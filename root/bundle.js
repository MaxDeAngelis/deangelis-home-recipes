!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(1),i=r(o),a=n(158),s=r(a),u=n(159),c=r(u);s.default.render(i.default.createElement(c.default,null),document.querySelector(".app-container"))},function(e,t,n){"use strict";e.exports=n(2)},function(e,t,n){"use strict";var r=n(3),o=n(148),i=n(152),a=n(39),s=n(157),u={};a(u,i),a(u,{findDOMNode:s("findDOMNode","ReactDOM","react-dom",r,r.findDOMNode),render:s("render","ReactDOM","react-dom",r,r.render),unmountComponentAtNode:s("unmountComponentAtNode","ReactDOM","react-dom",r,r.unmountComponentAtNode),renderToString:s("renderToString","ReactDOMServer","react-dom/server",o,o.renderToString),renderToStaticMarkup:s("renderToStaticMarkup","ReactDOMServer","react-dom/server",o,o.renderToStaticMarkup)}),u.__SECRET_DOM_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=r,u.__SECRET_DOM_SERVER_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=o,e.exports=u},function(e,t,n){(function(t){"use strict";var r=n(5),o=n(6),i=n(71),a=n(45),s=n(28),u=n(18),c=n(50),l=n(54),p=n(146),d=n(91),f=n(147),h=n(25);i.inject();var m=u.measure("React","render",s.render),v={findDOMNode:d,render:m,unmountComponentAtNode:s.unmountComponentAtNode,version:p,unstable_batchedUpdates:l.batchedUpdates,unstable_renderSubtreeIntoContainer:f};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({CurrentOwner:r,InstanceHandles:a,Mount:s,Reconciler:c,TextComponent:o}),"production"!==t.env.NODE_ENV){var g=n(9);if(g.canUseDOM&&window.top===window.self){"undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&(navigator.userAgent.indexOf("Chrome")>-1&&navigator.userAgent.indexOf("Edge")===-1||navigator.userAgent.indexOf("Firefox")>-1)&&console.debug("Download the React DevTools for a better development experience: https://fb.me/react-devtools");var y=document.documentMode&&document.documentMode<8;"production"!==t.env.NODE_ENV?h(!y,'Internet Explorer is running in compatibility mode; please add the following tag to your HTML to prevent this from happening: <meta http-equiv="X-UA-Compatible" content="IE=edge" />'):void 0;for(var _=[Array.isArray,Array.prototype.every,Array.prototype.forEach,Array.prototype.indexOf,Array.prototype.map,Date.now,Function.prototype.bind,Object.keys,String.prototype.split,String.prototype.trim,Object.create,Object.freeze],E=0;E<_.length;E++)if(!_[E]){console.error("One or more ES5 shim/shams expected by React are not available: https://fb.me/react-warning-polyfills");break}}}e.exports=v}).call(t,n(4))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function i(e){if(p===clearTimeout)return clearTimeout(e);if((p===r||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(e);try{return p(e)}catch(t){try{return p.call(null,e)}catch(t){return p.call(this,e)}}}function a(){m&&f&&(m=!1,f.length?h=f.concat(h):v=-1,h.length&&s())}function s(){if(!m){var e=o(a);m=!0;for(var t=h.length;t;){for(f=h,h=[];++v<t;)f&&f[v].run();v=-1,t=h.length}f=null,m=!1,i(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var l,p,d=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{p="function"==typeof clearTimeout?clearTimeout:r}catch(e){p=r}}();var f,h=[],m=!1,v=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new u(e,t)),1!==h.length||m||o(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t){"use strict";var n={current:null};e.exports=n},function(e,t,n){(function(t){"use strict";var r=n(7),o=n(22),i=n(26),a=n(28),s=n(39),u=n(21),c=n(20),l=n(70),p=function(e){};s(p.prototype,{construct:function(e){this._currentElement=e,this._stringText=""+e,this._rootNodeID=null,this._mountIndex=0},mountComponent:function(e,n,r){if("production"!==t.env.NODE_ENV&&r[l.ancestorInfoContextKey]&&l("span",null,r[l.ancestorInfoContextKey]),this._rootNodeID=e,n.useCreateElement){var i=r[a.ownerDocumentContextKey],s=i.createElement("span");return o.setAttributeForID(s,e),a.getID(s),c(s,this._stringText),s}var p=u(this._stringText);return n.renderToStaticMarkup?p:"<span "+o.createMarkupForID(e)+">"+p+"</span>"},receiveComponent:function(e,t){if(e!==this._currentElement){this._currentElement=e;var n=""+e;if(n!==this._stringText){this._stringText=n;var o=a.getNode(this._rootNodeID);r.updateTextContent(o,n)}}},unmountComponent:function(){i.unmountIDFromEnvironment(this._rootNodeID)}}),e.exports=p}).call(t,n(4))},function(e,t,n){(function(t){"use strict";function r(e,t,n){var r=n>=e.childNodes.length?null:e.childNodes.item(n);e.insertBefore(t,r)}var o=n(8),i=n(16),a=n(18),s=n(19),u=n(20),c=n(13),l={dangerouslyReplaceNodeWithMarkup:o.dangerouslyReplaceNodeWithMarkup,updateTextContent:u,processUpdates:function(e,n){for(var a,l=null,p=null,d=0;d<e.length;d++)if(a=e[d],a.type===i.MOVE_EXISTING||a.type===i.REMOVE_NODE){var f=a.fromIndex,h=a.parentNode.childNodes[f],m=a.parentID;h?void 0:"production"!==t.env.NODE_ENV?c(!1,"processUpdates(): Unable to find child %s of element. This probably means the DOM was unexpectedly mutated (e.g., by the browser), usually due to forgetting a <tbody> when using tables, nesting tags like <form>, <p>, or <a>, or using non-SVG elements in an <svg> parent. Try inspecting the child nodes of the element with React ID `%s`.",f,m):c(!1),l=l||{},l[m]=l[m]||[],l[m][f]=h,p=p||[],p.push(h)}var v;if(v=n.length&&"string"==typeof n[0]?o.dangerouslyRenderMarkup(n):n,p)for(var g=0;g<p.length;g++)p[g].parentNode.removeChild(p[g]);for(var y=0;y<e.length;y++)switch(a=e[y],a.type){case i.INSERT_MARKUP:r(a.parentNode,v[a.markupIndex],a.toIndex);break;case i.MOVE_EXISTING:r(a.parentNode,l[a.parentID][a.fromIndex],a.toIndex);break;case i.SET_MARKUP:s(a.parentNode,a.content);break;case i.TEXT_CONTENT:u(a.parentNode,a.content);break;case i.REMOVE_NODE:}}};a.measureMethods(l,"DOMChildrenOperations",{updateTextContent:"updateTextContent"}),e.exports=l}).call(t,n(4))},function(e,t,n){(function(t){"use strict";function r(e){return e.substring(1,e.indexOf(" "))}var o=n(9),i=n(10),a=n(15),s=n(14),u=n(13),c=/^(<[^ \/>]+)/,l="data-danger-index",p={dangerouslyRenderMarkup:function(e){o.canUseDOM?void 0:"production"!==t.env.NODE_ENV?u(!1,"dangerouslyRenderMarkup(...): Cannot render markup in a worker thread. Make sure `window` and `document` are available globally before requiring React when unit testing or use ReactDOMServer.renderToString for server rendering."):u(!1);for(var n,p={},d=0;d<e.length;d++)e[d]?void 0:"production"!==t.env.NODE_ENV?u(!1,"dangerouslyRenderMarkup(...): Missing markup."):u(!1),n=r(e[d]),n=s(n)?n:"*",p[n]=p[n]||[],p[n][d]=e[d];var f=[],h=0;for(n in p)if(p.hasOwnProperty(n)){var m,v=p[n];for(m in v)if(v.hasOwnProperty(m)){var g=v[m];v[m]=g.replace(c,"$1 "+l+'="'+m+'" ')}for(var y=i(v.join(""),a),_=0;_<y.length;++_){var E=y[_];E.hasAttribute&&E.hasAttribute(l)?(m=+E.getAttribute(l),E.removeAttribute(l),f.hasOwnProperty(m)?"production"!==t.env.NODE_ENV?u(!1,"Danger: Assigning to an already-occupied result index."):u(!1):void 0,f[m]=E,h+=1):"production"!==t.env.NODE_ENV&&console.error("Danger: Discarding unexpected node:",E)}}return h!==f.length?"production"!==t.env.NODE_ENV?u(!1,"Danger: Did not assign to every index of resultList."):u(!1):void 0,f.length!==e.length?"production"!==t.env.NODE_ENV?u(!1,"Danger: Expected markup to render %s nodes, but rendered %s.",e.length,f.length):u(!1):void 0,f},dangerouslyReplaceNodeWithMarkup:function(e,n){o.canUseDOM?void 0:"production"!==t.env.NODE_ENV?u(!1,"dangerouslyReplaceNodeWithMarkup(...): Cannot render markup in a worker thread. Make sure `window` and `document` are available globally before requiring React when unit testing or use ReactDOMServer.renderToString() for server rendering."):u(!1),n?void 0:"production"!==t.env.NODE_ENV?u(!1,"dangerouslyReplaceNodeWithMarkup(...): Missing markup."):u(!1),"html"===e.tagName.toLowerCase()?"production"!==t.env.NODE_ENV?u(!1,"dangerouslyReplaceNodeWithMarkup(...): Cannot replace markup of the <html> node. This is because browser quirks make this unreliable and/or slow. If you want to render to the root you must use server rendering. See ReactDOMServer.renderToString()."):u(!1):void 0;var r;r="string"==typeof n?i(n,a)[0]:n,e.parentNode.replaceChild(r,e)}};e.exports=p}).call(t,n(4))},function(e,t){"use strict";var n=!("undefined"==typeof window||!window.document||!window.document.createElement),r={canUseDOM:n,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:n&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:n&&!!window.screen,isInWorker:!n};e.exports=r},function(e,t,n){(function(t){"use strict";function r(e){var t=e.match(l);return t&&t[1].toLowerCase()}function o(e,n){var o=c;c?void 0:"production"!==t.env.NODE_ENV?u(!1,"createNodesFromMarkup dummy not initialized"):u(!1);var i=r(e),l=i&&s(i);if(l){o.innerHTML=l[1]+e+l[2];for(var p=l[0];p--;)o=o.lastChild}else o.innerHTML=e;var d=o.getElementsByTagName("script");d.length&&(n?void 0:"production"!==t.env.NODE_ENV?u(!1,"createNodesFromMarkup(...): Unexpected <script> element rendered."):u(!1),a(d).forEach(n));for(var f=a(o.childNodes);o.lastChild;)o.removeChild(o.lastChild);return f}var i=n(9),a=n(11),s=n(14),u=n(13),c=i.canUseDOM?document.createElement("div"):null,l=/^\s*<(\w+)/;e.exports=o}).call(t,n(4))},function(e,t,n){"use strict";function r(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}function o(e){return r(e)?Array.isArray(e)?e.slice():i(e):[e]}var i=n(12);e.exports=o},function(e,t,n){(function(t){"use strict";function r(e){var n=e.length;if(Array.isArray(e)||"object"!=typeof e&&"function"!=typeof e?"production"!==t.env.NODE_ENV?o(!1,"toArray: Array-like object expected"):o(!1):void 0,"number"!=typeof n?"production"!==t.env.NODE_ENV?o(!1,"toArray: Object needs a length property"):o(!1):void 0,0===n||n-1 in e?void 0:"production"!==t.env.NODE_ENV?o(!1,"toArray: Object should have keys for indices"):o(!1),e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(e){}for(var r=Array(n),i=0;i<n;i++)r[i]=e[i];return r}var o=n(13);e.exports=r}).call(t,n(4))},function(e,t,n){(function(t){"use strict";function n(e,n,r,o,i,a,s,u){if("production"!==t.env.NODE_ENV&&void 0===n)throw new Error("invariant requires an error message argument");if(!e){var c;if(void 0===n)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[r,o,i,a,s,u],p=0;c=new Error(n.replace(/%s/g,function(){return l[p++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}}e.exports=n}).call(t,n(4))},function(e,t,n){(function(t){"use strict";function r(e){return a?void 0:"production"!==t.env.NODE_ENV?i(!1,"Markup wrapping node not initialized"):i(!1),d.hasOwnProperty(e)||(e="*"),s.hasOwnProperty(e)||("*"===e?a.innerHTML="<link />":a.innerHTML="<"+e+"></"+e+">",s[e]=!a.firstChild),s[e]?d[e]:null}var o=n(9),i=n(13),a=o.canUseDOM?document.createElement("div"):null,s={},u=[1,'<select multiple="true">',"</select>"],c=[1,"<table>","</table>"],l=[3,"<table><tbody><tr>","</tr></tbody></table>"],p=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],d={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:u,option:u,caption:c,colgroup:c,tbody:c,tfoot:c,thead:c,td:l,th:l},f=["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"];f.forEach(function(e){d[e]=p,s[e]=!0}),e.exports=r}).call(t,n(4))},function(e,t){"use strict";function n(e){return function(){return e}}function r(){}r.thatReturns=n,r.thatReturnsFalse=n(!1),r.thatReturnsTrue=n(!0),r.thatReturnsNull=n(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(e){return e},e.exports=r},function(e,t,n){"use strict";var r=n(17),o=r({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,SET_MARKUP:null,TEXT_CONTENT:null});e.exports=o},function(e,t,n){(function(t){"use strict";var r=n(13),o=function(e){var n,o={};e instanceof Object&&!Array.isArray(e)?void 0:"production"!==t.env.NODE_ENV?r(!1,"keyMirror(...): Argument must be an object."):r(!1);for(n in e)e.hasOwnProperty(n)&&(o[n]=n);return o};e.exports=o}).call(t,n(4))},function(e,t,n){(function(t){"use strict";function n(e,t,n){return n}var r={enableMeasure:!1,storedMeasure:n,measureMethods:function(e,n,o){if("production"!==t.env.NODE_ENV)for(var i in o)o.hasOwnProperty(i)&&(e[i]=r.measure(n,o[i],e[i]))},measure:function(e,n,o){if("production"!==t.env.NODE_ENV){var i=null,a=function(){return r.enableMeasure?(i||(i=r.storedMeasure(e,n,o)),i.apply(this,arguments)):o.apply(this,arguments)};return a.displayName=e+"_"+n,a}return o},injection:{injectMeasure:function(e){r.storedMeasure=e}}};e.exports=r}).call(t,n(4))},function(e,t,n){"use strict";var r=n(9),o=/^[ \r\n\t\f]/,i=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,a=function(e,t){e.innerHTML=t};if("undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction&&(a=function(e,t){MSApp.execUnsafeLocalFunction(function(){e.innerHTML=t})}),r.canUseDOM){var s=document.createElement("div");s.innerHTML=" ",""===s.innerHTML&&(a=function(e,t){if(e.parentNode&&e.parentNode.replaceChild(e,e),o.test(t)||"<"===t[0]&&i.test(t)){e.innerHTML=String.fromCharCode(65279)+t;var n=e.firstChild;1===n.data.length?e.removeChild(n):n.deleteData(0,1)}else e.innerHTML=t})}e.exports=a},function(e,t,n){"use strict";var r=n(9),o=n(21),i=n(19),a=function(e,t){e.textContent=t};r.canUseDOM&&("textContent"in document.documentElement||(a=function(e,t){i(e,o(t))})),e.exports=a},function(e,t){"use strict";function n(e){return o[e]}function r(e){return(""+e).replace(i,n)}var o={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},i=/[&><"']/g;e.exports=r},function(e,t,n){(function(t){"use strict";function r(e){return!!p.hasOwnProperty(e)||!l.hasOwnProperty(e)&&(c.test(e)?(p[e]=!0,!0):(l[e]=!0,"production"!==t.env.NODE_ENV?u(!1,"Invalid attribute name: `%s`",e):void 0,!1))}function o(e,t){return null==t||e.hasBooleanValue&&!t||e.hasNumericValue&&isNaN(t)||e.hasPositiveNumericValue&&t<1||e.hasOverloadedBooleanValue&&t===!1}var i=n(23),a=n(18),s=n(24),u=n(25),c=/^[a-zA-Z_][\w\.\-]*$/,l={},p={};if("production"!==t.env.NODE_ENV)var d={children:!0,dangerouslySetInnerHTML:!0,key:!0,ref:!0},f={},h=function(e){if(!(d.hasOwnProperty(e)&&d[e]||f.hasOwnProperty(e)&&f[e])){f[e]=!0;var n=e.toLowerCase(),r=i.isCustomAttribute(n)?n:i.getPossibleStandardName.hasOwnProperty(n)?i.getPossibleStandardName[n]:null;"production"!==t.env.NODE_ENV?u(null==r,"Unknown DOM property %s. Did you mean %s?",e,r):void 0}};var m={createMarkupForID:function(e){return i.ID_ATTRIBUTE_NAME+"="+s(e)},setAttributeForID:function(e,t){e.setAttribute(i.ID_ATTRIBUTE_NAME,t)},createMarkupForProperty:function(e,n){var r=i.properties.hasOwnProperty(e)?i.properties[e]:null;if(r){if(o(r,n))return"";var a=r.attributeName;return r.hasBooleanValue||r.hasOverloadedBooleanValue&&n===!0?a+'=""':a+"="+s(n)}return i.isCustomAttribute(e)?null==n?"":e+"="+s(n):("production"!==t.env.NODE_ENV&&h(e),null)},createMarkupForCustomAttribute:function(e,t){return r(e)&&null!=t?e+"="+s(t):""},setValueForProperty:function(e,n,r){var a=i.properties.hasOwnProperty(n)?i.properties[n]:null;if(a){var s=a.mutationMethod;if(s)s(e,r);else if(o(a,r))this.deleteValueForProperty(e,n);else if(a.mustUseAttribute){var u=a.attributeName,c=a.attributeNamespace;c?e.setAttributeNS(c,u,""+r):a.hasBooleanValue||a.hasOverloadedBooleanValue&&r===!0?e.setAttribute(u,""):e.setAttribute(u,""+r)}else{var l=a.propertyName;a.hasSideEffects&&""+e[l]==""+r||(e[l]=r)}}else i.isCustomAttribute(n)?m.setValueForAttribute(e,n,r):"production"!==t.env.NODE_ENV&&h(n)},setValueForAttribute:function(e,t,n){r(t)&&(null==n?e.removeAttribute(t):e.setAttribute(t,""+n))},deleteValueForProperty:function(e,n){var r=i.properties.hasOwnProperty(n)?i.properties[n]:null;if(r){var o=r.mutationMethod;if(o)o(e,void 0);else if(r.mustUseAttribute)e.removeAttribute(r.attributeName);else{var a=r.propertyName,s=i.getDefaultValueForProperty(e.nodeName,a);r.hasSideEffects&&""+e[a]===s||(e[a]=s)}}else i.isCustomAttribute(n)?e.removeAttribute(n):"production"!==t.env.NODE_ENV&&h(n)}};a.measureMethods(m,"DOMPropertyOperations",{setValueForProperty:"setValueForProperty",setValueForAttribute:"setValueForAttribute",deleteValueForProperty:"deleteValueForProperty"}),e.exports=m}).call(t,n(4))},function(e,t,n){(function(t){"use strict";function r(e,t){return(e&t)===t}var o=n(13),i={MUST_USE_ATTRIBUTE:1,MUST_USE_PROPERTY:2,HAS_SIDE_EFFECTS:4,HAS_BOOLEAN_VALUE:8,HAS_NUMERIC_VALUE:16,HAS_POSITIVE_NUMERIC_VALUE:48,HAS_OVERLOADED_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(e){var n=i,a=e.Properties||{},u=e.DOMAttributeNamespaces||{},c=e.DOMAttributeNames||{},l=e.DOMPropertyNames||{},p=e.DOMMutationMethods||{};e.isCustomAttribute&&s._isCustomAttributeFunctions.push(e.isCustomAttribute);for(var d in a){s.properties.hasOwnProperty(d)?"production"!==t.env.NODE_ENV?o(!1,"injectDOMPropertyConfig(...): You're trying to inject DOM property '%s' which has already been injected. You may be accidentally injecting the same DOM property config twice, or you may be injecting two configs that have conflicting property names.",d):o(!1):void 0;var f=d.toLowerCase(),h=a[d],m={attributeName:f,attributeNamespace:null,propertyName:d,mutationMethod:null,mustUseAttribute:r(h,n.MUST_USE_ATTRIBUTE),mustUseProperty:r(h,n.MUST_USE_PROPERTY),hasSideEffects:r(h,n.HAS_SIDE_EFFECTS),hasBooleanValue:r(h,n.HAS_BOOLEAN_VALUE),hasNumericValue:r(h,n.HAS_NUMERIC_VALUE),hasPositiveNumericValue:r(h,n.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:r(h,n.HAS_OVERLOADED_BOOLEAN_VALUE)};if(m.mustUseAttribute&&m.mustUseProperty?"production"!==t.env.NODE_ENV?o(!1,"DOMProperty: Cannot require using both attribute and property: %s",d):o(!1):void 0,!m.mustUseProperty&&m.hasSideEffects?"production"!==t.env.NODE_ENV?o(!1,"DOMProperty: Properties that have side effects must use property: %s",d):o(!1):void 0,m.hasBooleanValue+m.hasNumericValue+m.hasOverloadedBooleanValue<=1?void 0:"production"!==t.env.NODE_ENV?o(!1,"DOMProperty: Value can be one of boolean, overloaded boolean, or numeric value, but not a combination: %s",d):o(!1),"production"!==t.env.NODE_ENV&&(s.getPossibleStandardName[f]=d),c.hasOwnProperty(d)){var v=c[d];m.attributeName=v,"production"!==t.env.NODE_ENV&&(s.getPossibleStandardName[v]=d)}u.hasOwnProperty(d)&&(m.attributeNamespace=u[d]),l.hasOwnProperty(d)&&(m.propertyName=l[d]),p.hasOwnProperty(d)&&(m.mutationMethod=p[d]),s.properties[d]=m}}},a={},s={ID_ATTRIBUTE_NAME:"data-reactid",properties:{},getPossibleStandardName:"production"!==t.env.NODE_ENV?{}:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(e){for(var t=0;t<s._isCustomAttributeFunctions.length;t++){var n=s._isCustomAttributeFunctions[t];if(n(e))return!0}return!1},getDefaultValueForProperty:function(e,t){var n,r=a[e];return r||(a[e]=r={}),t in r||(n=document.createElement(e),r[t]=n[t]),r[t]},injection:i};e.exports=s}).call(t,n(4))},function(e,t,n){"use strict";function r(e){return'"'+o(e)+'"'}var o=n(21);e.exports=r},function(e,t,n){(function(t){"use strict";var r=n(15),o=r;"production"!==t.env.NODE_ENV&&(o=function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];if(void 0===t)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(0!==t.indexOf("Failed Composite propType: ")&&!e){var i=0,a="Warning: "+t.replace(/%s/g,function(){return r[i++]});"undefined"!=typeof console&&console.error(a);try{throw new Error(a)}catch(e){}}}),e.exports=o}).call(t,n(4))},function(e,t,n){"use strict";var r=n(27),o=n(28),i={processChildrenUpdates:r.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkupByID:r.dangerouslyReplaceNodeWithMarkupByID,unmountIDFromEnvironment:function(e){o.purgeID(e)}};e.exports=i},function(e,t,n){(function(t){"use strict";var r=n(7),o=n(22),i=n(28),a=n(18),s=n(13),u={dangerouslySetInnerHTML:"`dangerouslySetInnerHTML` must be set using `updateInnerHTMLByID()`.",style:"`style` must be set using `updateStylesByID()`."},c={updatePropertyByID:function(e,n,r){var a=i.getNode(e);u.hasOwnProperty(n)?"production"!==t.env.NODE_ENV?s(!1,"updatePropertyByID(...): %s",u[n]):s(!1):void 0,null!=r?o.setValueForProperty(a,n,r):o.deleteValueForProperty(a,n)},dangerouslyReplaceNodeWithMarkupByID:function(e,t){var n=i.getNode(e);r.dangerouslyReplaceNodeWithMarkup(n,t)},dangerouslyProcessChildrenUpdates:function(e,t){for(var n=0;n<e.length;n++)e[n].parentNode=i.getNode(e[n].parentID);r.processUpdates(e,t)}};a.measureMethods(c,"ReactDOMIDOperations",{dangerouslyReplaceNodeWithMarkupByID:"dangerouslyReplaceNodeWithMarkupByID",dangerouslyProcessChildrenUpdates:"dangerouslyProcessChildrenUpdates"}),e.exports=c}).call(t,n(4))},function(e,t,n){(function(t){"use strict";function r(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++)if(e.charAt(r)!==t.charAt(r))return r;return e.length===t.length?-1:n}function o(e){return e?e.nodeType===q?e.documentElement:e.firstChild:null}function i(e){var t=o(e);return t&&ee.getID(t)}function a(e){var n=s(e);if(n)if(W.hasOwnProperty(n)){var r=W[n];r!==e&&(p(r,n)?"production"!==t.env.NODE_ENV?L(!1,"ReactMount: Two valid but unequal nodes with the same `%s`: %s",B,n):L(!1):void 0,W[n]=e)}else W[n]=e;return n}function s(e){return e&&e.getAttribute&&e.getAttribute(B)||""}function u(e,t){var n=s(e);n!==t&&delete W[n],e.setAttribute(B,t),W[t]=e}function c(e){return W.hasOwnProperty(e)&&p(W[e],e)||(W[e]=ee.findReactNodeByID(e)),W[e]}function l(e){var t=I.get(e)._rootNodeID;return x.isNullComponentID(t)?null:(W.hasOwnProperty(t)&&p(W[t],t)||(W[t]=ee.findReactNodeByID(t)),W[t])}function p(e,n){if(e){s(e)!==n?"production"!==t.env.NODE_ENV?L(!1,"ReactMount: Unexpected modification of `%s`",B):L(!1):void 0;var r=ee.findReactContainerForID(n);if(r&&P(r,e))return!0}return!1}function d(e){delete W[e]}function f(e){var t=W[e];return!(!t||!p(t,e))&&void(Q=t)}function h(e){Q=null,D.traverseAncestors(e,f);var t=Q;return Q=null,t}function m(e,n,r,o,i,a){if(w.useCreateElement&&(a=A({},a),r.nodeType===q?a[Y]=r:a[Y]=r.ownerDocument),"production"!==t.env.NODE_ENV){a===T&&(a={});var s=r.nodeName.toLowerCase();a[F.ancestorInfoContextKey]=F.updatedAncestorInfo(null,s,null)}var u=R.mountComponent(e,n,o,a);e._renderedComponent._topLevelWrapper=e,ee._mountImageIntoNode(u,r,i,o)}function v(e,t,n,r,o){var i=k.ReactReconcileTransaction.getPooled(r);i.perform(m,null,e,t,n,i,r,o),k.ReactReconcileTransaction.release(i)}function g(e,t){for(R.unmountComponent(e),t.nodeType===q&&(t=t.documentElement);t.lastChild;)t.removeChild(t.lastChild)}function y(e){var t=i(e);return!!t&&t!==D.getReactRootIDFromNodeID(t)}function _(e){for(;e&&e.parentNode!==e;e=e.parentNode)if(1===e.nodeType){var t=s(e);if(t){var n,r=D.getReactRootIDFromNodeID(t),o=e;do if(n=s(o),o=o.parentNode,null==o)return null;while(n!==r);if(o===Z[r])return e}}return null}var E=n(23),b=n(29),N=n(5),w=n(41),C=n(42),x=n(44),D=n(45),I=n(47),S=n(48),O=n(18),R=n(50),M=n(53),k=n(54),A=n(39),T=n(58),P=n(59),V=n(62),L=n(13),U=n(19),j=n(67),F=n(70),z=n(25),B=E.ID_ATTRIBUTE_NAME,W={},H=1,q=9,G=11,Y="__ReactMount_ownerDocument$"+Math.random().toString(36).slice(2),K={},Z={};if("production"!==t.env.NODE_ENV)var X={};var J=[],Q=null,$=function(){};$.prototype.isReactComponent={},"production"!==t.env.NODE_ENV&&($.displayName="TopLevelWrapper"),$.prototype.render=function(){return this.props};var ee={TopLevelWrapper:$,_instancesByReactRootID:K,scrollMonitor:function(e,t){t()},_updateRootComponent:function(e,n,r,a){return ee.scrollMonitor(r,function(){M.enqueueElementInternal(e,n),a&&M.enqueueCallbackInternal(e,a)}),"production"!==t.env.NODE_ENV&&(X[i(r)]=o(r)),e},_registerComponent:function(e,n){!n||n.nodeType!==H&&n.nodeType!==q&&n.nodeType!==G?"production"!==t.env.NODE_ENV?L(!1,"_registerComponent(...): Target container is not a DOM element."):L(!1):void 0,b.ensureScrollValueMonitoring();var r=ee.registerContainer(n);return K[r]=e,r},_renderNewRootComponent:function(e,n,r,i){"production"!==t.env.NODE_ENV?z(null==N.current,"_renderNewRootComponent(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate. Check the render method of %s.",N.current&&N.current.getName()||"ReactCompositeComponent"):void 0;var a=V(e,null),s=ee._registerComponent(a,n);return k.batchedUpdates(v,a,s,n,r,i),"production"!==t.env.NODE_ENV&&(X[s]=o(n)),a},renderSubtreeIntoContainer:function(e,n,r,o){return null==e||null==e._reactInternalInstance?"production"!==t.env.NODE_ENV?L(!1,"parentComponent must be a valid React Component"):L(!1):void 0,ee._renderSubtreeIntoContainer(e,n,r,o)},_renderSubtreeIntoContainer:function(e,n,r,a){C.isValidElement(n)?void 0:"production"!==t.env.NODE_ENV?L(!1,"ReactDOM.render(): Invalid component element.%s","string"==typeof n?" Instead of passing an element string, make sure to instantiate it by passing it to React.createElement.":"function"==typeof n?" Instead of passing a component class, make sure to instantiate it by passing it to React.createElement.":null!=n&&void 0!==n.props?" This may be caused by unintentionally loading two independent copies of React.":""):L(!1),"production"!==t.env.NODE_ENV?z(!r||!r.tagName||"BODY"!==r.tagName.toUpperCase(),"render(): Rendering components directly into document.body is discouraged, since its children are often manipulated by third-party scripts and browser extensions. This may lead to subtle reconciliation issues. Try rendering into a container element created for your app."):void 0;var u=new C($,null,null,null,null,null,n),c=K[i(r)];if(c){var l=c._currentElement,p=l.props;if(j(p,n)){var d=c._renderedComponent.getPublicInstance(),f=a&&function(){a.call(d)};return ee._updateRootComponent(c,u,r,f),d}ee.unmountComponentAtNode(r)}var h=o(r),m=h&&!!s(h),v=y(r);if("production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?z(!v,"render(...): Replacing React-rendered children with a new root component. If you intended to update the children of this node, you should instead have the existing children update their state and render the new components instead of calling ReactDOM.render."):void 0,!m||h.nextSibling))for(var g=h;g;){if(s(g)){"production"!==t.env.NODE_ENV?z(!1,"render(): Target node has markup rendered by React, but there are unrelated nodes as well. This is most commonly caused by white-space inserted around server-rendered markup."):void 0;break}g=g.nextSibling}var _=m&&!c&&!v,E=ee._renderNewRootComponent(u,r,_,null!=e?e._reactInternalInstance._processChildContext(e._reactInternalInstance._context):T)._renderedComponent.getPublicInstance();return a&&a.call(E),E},render:function(e,t,n){return ee._renderSubtreeIntoContainer(null,e,t,n)},registerContainer:function(e){var t=i(e);return t&&(t=D.getReactRootIDFromNodeID(t)),t||(t=D.createReactRootID()),Z[t]=e,t},unmountComponentAtNode:function(e){"production"!==t.env.NODE_ENV?z(null==N.current,"unmountComponentAtNode(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate. Check the render method of %s.",N.current&&N.current.getName()||"ReactCompositeComponent"):void 0,!e||e.nodeType!==H&&e.nodeType!==q&&e.nodeType!==G?"production"!==t.env.NODE_ENV?L(!1,"unmountComponentAtNode(...): Target container is not a DOM element."):L(!1):void 0;var n=i(e),r=K[n];if(!r){var o=y(e),a=s(e),u=a&&a===D.getReactRootIDFromNodeID(a);return"production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?z(!o,"unmountComponentAtNode(): The node you're attempting to unmount was rendered by React and is not a top-level container. %s",u?"You may have accidentally passed in a React root node instead of its container.":"Instead, have the parent component update its state and rerender in order to remove this component."):void 0),!1}return k.batchedUpdates(g,r,e),delete K[n],delete Z[n],"production"!==t.env.NODE_ENV&&delete X[n],!0},findReactContainerForID:function(e){var n=D.getReactRootIDFromNodeID(e),r=Z[n];if("production"!==t.env.NODE_ENV){var o=X[n];if(o&&o.parentNode!==r){"production"!==t.env.NODE_ENV?z(s(o)===n,"ReactMount: Root element ID differed from reactRootID."):void 0;var i=r.firstChild;i&&n===s(i)?X[n]=i:"production"!==t.env.NODE_ENV?z(!1,"ReactMount: Root element has been removed from its original container. New container: %s",o.parentNode):void 0}}return r},findReactNodeByID:function(e){var t=ee.findReactContainerForID(e);return ee.findComponentRoot(t,e)},getFirstReactDOM:function(e){return _(e)},findComponentRoot:function(e,n){var r=J,o=0,i=h(n)||e;for("production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?z(null!=i,"React can't find the root component node for data-reactid value `%s`. If you're seeing this message, it probably means that you've loaded two copies of React on the page. At this time, only a single copy of React can be loaded at a time.",n):void 0),r[0]=i.firstChild,r.length=1;o<r.length;){for(var a,s=r[o++];s;){var u=ee.getID(s);u?n===u?a=s:D.isAncestorIDOf(u,n)&&(r.length=o=0,r.push(s.firstChild)):r.push(s.firstChild),s=s.nextSibling}if(a)return r.length=0,a}r.length=0,"production"!==t.env.NODE_ENV?L(!1,"findComponentRoot(..., %s): Unable to find element. This probably means the DOM was unexpectedly mutated (e.g., by the browser), usually due to forgetting a <tbody> when using tables, nesting tags like <form>, <p>, or <a>, or using non-SVG elements in an <svg> parent. Try inspecting the child nodes of the element with React ID `%s`.",n,ee.getID(e)):L(!1)},_mountImageIntoNode:function(e,n,i,a){if(!n||n.nodeType!==H&&n.nodeType!==q&&n.nodeType!==G?"production"!==t.env.NODE_ENV?L(!1,"mountComponentIntoNode(...): Target container is not valid."):L(!1):void 0,i){var s=o(n);if(S.canReuseMarkup(e,s))return;var u=s.getAttribute(S.CHECKSUM_ATTR_NAME);s.removeAttribute(S.CHECKSUM_ATTR_NAME);var c=s.outerHTML;s.setAttribute(S.CHECKSUM_ATTR_NAME,u);var l=e;if("production"!==t.env.NODE_ENV){var p;n.nodeType===H?(p=document.createElement("div"),p.innerHTML=e,l=p.innerHTML):(p=document.createElement("iframe"),document.body.appendChild(p),p.contentDocument.write(e),l=p.contentDocument.documentElement.outerHTML,document.body.removeChild(p))}var d=r(l,c),f=" (client) "+l.substring(d-20,d+20)+"\n (server) "+c.substring(d-20,d+20);n.nodeType===q?"production"!==t.env.NODE_ENV?L(!1,"You're trying to render a component to the document using server rendering but the checksum was invalid. This usually means you rendered a different component type or props on the client from the one on the server, or your render() methods are impure. React cannot handle this case due to cross-browser quirks by rendering at the document root. You should look for environment dependent code in your components and ensure the props are the same client and server side:\n%s",f):L(!1):void 0,
"production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?z(!1,"React attempted to reuse markup in a container but the checksum was invalid. This generally means that you are using server rendering and the markup generated on the server was not what the client was expecting. React injected new markup to compensate which works but you have lost many of the benefits of server rendering. Instead, figure out why the markup being generated is different on the client or server:\n%s",f):void 0)}if(n.nodeType===q?"production"!==t.env.NODE_ENV?L(!1,"You're trying to render a component to the document but you didn't use server rendering. We can't do this without using server rendering due to cross-browser quirks. See ReactDOMServer.renderToString() for server rendering."):L(!1):void 0,a.useCreateElement){for(;n.lastChild;)n.removeChild(n.lastChild);n.appendChild(e)}else U(n,e)},ownerDocumentContextKey:Y,getReactRootID:i,getID:a,setID:u,getNode:c,getNodeFromInstance:l,isValid:p,purgeID:d};O.measureMethods(ee,"ReactMount",{_renderNewRootComponent:"_renderNewRootComponent",_mountImageIntoNode:"_mountImageIntoNode"}),e.exports=ee}).call(t,n(4))},function(e,t,n){"use strict";function r(e){return Object.prototype.hasOwnProperty.call(e,v)||(e[v]=h++,d[e[v]]={}),d[e[v]]}var o=n(30),i=n(31),a=n(32),s=n(37),u=n(18),c=n(38),l=n(39),p=n(40),d={},f=!1,h=0,m={topAbort:"abort",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},v="_reactListenersID"+String(Math.random()).slice(2),g=l({},s,{ReactEventListener:null,injection:{injectReactEventListener:function(e){e.setHandleTopLevel(g.handleTopLevel),g.ReactEventListener=e}},setEnabled:function(e){g.ReactEventListener&&g.ReactEventListener.setEnabled(e)},isEnabled:function(){return!(!g.ReactEventListener||!g.ReactEventListener.isEnabled())},listenTo:function(e,t){for(var n=t,i=r(n),s=a.registrationNameDependencies[e],u=o.topLevelTypes,c=0;c<s.length;c++){var l=s[c];i.hasOwnProperty(l)&&i[l]||(l===u.topWheel?p("wheel")?g.ReactEventListener.trapBubbledEvent(u.topWheel,"wheel",n):p("mousewheel")?g.ReactEventListener.trapBubbledEvent(u.topWheel,"mousewheel",n):g.ReactEventListener.trapBubbledEvent(u.topWheel,"DOMMouseScroll",n):l===u.topScroll?p("scroll",!0)?g.ReactEventListener.trapCapturedEvent(u.topScroll,"scroll",n):g.ReactEventListener.trapBubbledEvent(u.topScroll,"scroll",g.ReactEventListener.WINDOW_HANDLE):l===u.topFocus||l===u.topBlur?(p("focus",!0)?(g.ReactEventListener.trapCapturedEvent(u.topFocus,"focus",n),g.ReactEventListener.trapCapturedEvent(u.topBlur,"blur",n)):p("focusin")&&(g.ReactEventListener.trapBubbledEvent(u.topFocus,"focusin",n),g.ReactEventListener.trapBubbledEvent(u.topBlur,"focusout",n)),i[u.topBlur]=!0,i[u.topFocus]=!0):m.hasOwnProperty(l)&&g.ReactEventListener.trapBubbledEvent(l,m[l],n),i[l]=!0)}},trapBubbledEvent:function(e,t,n){return g.ReactEventListener.trapBubbledEvent(e,t,n)},trapCapturedEvent:function(e,t,n){return g.ReactEventListener.trapCapturedEvent(e,t,n)},ensureScrollValueMonitoring:function(){if(!f){var e=c.refreshScrollValues;g.ReactEventListener.monitorScrollValue(e),f=!0}},eventNameDispatchConfigs:i.eventNameDispatchConfigs,registrationNameModules:i.registrationNameModules,putListener:i.putListener,getListener:i.getListener,deleteListener:i.deleteListener,deleteAllListeners:i.deleteAllListeners});u.measureMethods(g,"ReactBrowserEventEmitter",{putListener:"putListener",deleteListener:"deleteListener"}),e.exports=g},function(e,t,n){"use strict";var r=n(17),o=r({bubbled:null,captured:null}),i=r({topAbort:null,topBlur:null,topCanPlay:null,topCanPlayThrough:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topDurationChange:null,topEmptied:null,topEncrypted:null,topEnded:null,topError:null,topFocus:null,topInput:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topLoadedData:null,topLoadedMetadata:null,topLoadStart:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topPause:null,topPlay:null,topPlaying:null,topProgress:null,topRateChange:null,topReset:null,topScroll:null,topSeeked:null,topSeeking:null,topSelectionChange:null,topStalled:null,topSubmit:null,topSuspend:null,topTextInput:null,topTimeUpdate:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topVolumeChange:null,topWaiting:null,topWheel:null}),a={topLevelTypes:i,PropagationPhases:o};e.exports=a},function(e,t,n){(function(t){"use strict";function r(){var e=v&&v.traverseTwoPhase&&v.traverseEnterLeave;"production"!==t.env.NODE_ENV?l(e,"InstanceHandle not injected before use!"):void 0}var o=n(32),i=n(33),a=n(34),s=n(35),u=n(36),c=n(13),l=n(25),p={},d=null,f=function(e,t){e&&(i.executeDispatchesInOrder(e,t),e.isPersistent()||e.constructor.release(e))},h=function(e){return f(e,!0)},m=function(e){return f(e,!1)},v=null,g={injection:{injectMount:i.injection.injectMount,injectInstanceHandle:function(e){v=e,"production"!==t.env.NODE_ENV&&r()},getInstanceHandle:function(){return"production"!==t.env.NODE_ENV&&r(),v},injectEventPluginOrder:o.injectEventPluginOrder,injectEventPluginsByName:o.injectEventPluginsByName},eventNameDispatchConfigs:o.eventNameDispatchConfigs,registrationNameModules:o.registrationNameModules,putListener:function(e,n,r){"function"!=typeof r?"production"!==t.env.NODE_ENV?c(!1,"Expected %s listener to be a function, instead got type %s",n,typeof r):c(!1):void 0;var i=p[n]||(p[n]={});i[e]=r;var a=o.registrationNameModules[n];a&&a.didPutListener&&a.didPutListener(e,n,r)},getListener:function(e,t){var n=p[t];return n&&n[e]},deleteListener:function(e,t){var n=o.registrationNameModules[t];n&&n.willDeleteListener&&n.willDeleteListener(e,t);var r=p[t];r&&delete r[e]},deleteAllListeners:function(e){for(var t in p)if(p[t][e]){var n=o.registrationNameModules[t];n&&n.willDeleteListener&&n.willDeleteListener(e,t),delete p[t][e]}},extractEvents:function(e,t,n,r,i){for(var a,u=o.plugins,c=0;c<u.length;c++){var l=u[c];if(l){var p=l.extractEvents(e,t,n,r,i);p&&(a=s(a,p))}}return a},enqueueEvents:function(e){e&&(d=s(d,e))},processEventQueue:function(e){var n=d;d=null,e?u(n,h):u(n,m),d?"production"!==t.env.NODE_ENV?c(!1,"processEventQueue(): Additional events were enqueued while processing an event queue. Support for this has not yet been implemented."):c(!1):void 0,a.rethrowCaughtError()},__purge:function(){p={}},__getListenerBank:function(){return p}};e.exports=g}).call(t,n(4))},function(e,t,n){(function(t){"use strict";function r(){if(s)for(var e in u){var n=u[e],r=s.indexOf(e);if(r>-1?void 0:"production"!==t.env.NODE_ENV?a(!1,"EventPluginRegistry: Cannot inject event plugins that do not exist in the plugin ordering, `%s`.",e):a(!1),!c.plugins[r]){n.extractEvents?void 0:"production"!==t.env.NODE_ENV?a(!1,"EventPluginRegistry: Event plugins must implement an `extractEvents` method, but `%s` does not.",e):a(!1),c.plugins[r]=n;var i=n.eventTypes;for(var l in i)o(i[l],n,l)?void 0:"production"!==t.env.NODE_ENV?a(!1,"EventPluginRegistry: Failed to publish event `%s` for plugin `%s`.",l,e):a(!1)}}}function o(e,n,r){c.eventNameDispatchConfigs.hasOwnProperty(r)?"production"!==t.env.NODE_ENV?a(!1,"EventPluginHub: More than one plugin attempted to publish the same event name, `%s`.",r):a(!1):void 0,c.eventNameDispatchConfigs[r]=e;var o=e.phasedRegistrationNames;if(o){for(var s in o)if(o.hasOwnProperty(s)){var u=o[s];i(u,n,r)}return!0}return!!e.registrationName&&(i(e.registrationName,n,r),!0)}function i(e,n,r){c.registrationNameModules[e]?"production"!==t.env.NODE_ENV?a(!1,"EventPluginHub: More than one plugin attempted to publish the same registration name, `%s`.",e):a(!1):void 0,c.registrationNameModules[e]=n,c.registrationNameDependencies[e]=n.eventTypes[r].dependencies}var a=n(13),s=null,u={},c={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},injectEventPluginOrder:function(e){s?"production"!==t.env.NODE_ENV?a(!1,"EventPluginRegistry: Cannot inject event plugin ordering more than once. You are likely trying to load more than one copy of React."):a(!1):void 0,s=Array.prototype.slice.call(e),r()},injectEventPluginsByName:function(e){var n=!1;for(var o in e)if(e.hasOwnProperty(o)){var i=e[o];u.hasOwnProperty(o)&&u[o]===i||(u[o]?"production"!==t.env.NODE_ENV?a(!1,"EventPluginRegistry: Cannot inject two different event plugins using the same name, `%s`.",o):a(!1):void 0,u[o]=i,n=!0)}n&&r()},getPluginModuleForEvent:function(e){var t=e.dispatchConfig;if(t.registrationName)return c.registrationNameModules[t.registrationName]||null;for(var n in t.phasedRegistrationNames)if(t.phasedRegistrationNames.hasOwnProperty(n)){var r=c.registrationNameModules[t.phasedRegistrationNames[n]];if(r)return r}return null},_resetEventPlugins:function(){s=null;for(var e in u)u.hasOwnProperty(e)&&delete u[e];c.plugins.length=0;var t=c.eventNameDispatchConfigs;for(var n in t)t.hasOwnProperty(n)&&delete t[n];var r=c.registrationNameModules;for(var o in r)r.hasOwnProperty(o)&&delete r[o]}};e.exports=c}).call(t,n(4))},function(e,t,n){(function(t){"use strict";function r(e){return e===y.topMouseUp||e===y.topTouchEnd||e===y.topTouchCancel}function o(e){return e===y.topMouseMove||e===y.topTouchMove}function i(e){return e===y.topMouseDown||e===y.topTouchStart}function a(e,t,n,r){var o=e.type||"unknown-event";e.currentTarget=g.Mount.getNode(r),t?h.invokeGuardedCallbackWithCatch(o,n,e,r):h.invokeGuardedCallback(o,n,e,r),e.currentTarget=null}function s(e,n){var r=e._dispatchListeners,o=e._dispatchIDs;if("production"!==t.env.NODE_ENV&&d(e),Array.isArray(r))for(var i=0;i<r.length&&!e.isPropagationStopped();i++)a(e,n,r[i],o[i]);else r&&a(e,n,r,o);e._dispatchListeners=null,e._dispatchIDs=null}function u(e){var n=e._dispatchListeners,r=e._dispatchIDs;if("production"!==t.env.NODE_ENV&&d(e),Array.isArray(n)){for(var o=0;o<n.length&&!e.isPropagationStopped();o++)if(n[o](e,r[o]))return r[o]}else if(n&&n(e,r))return r;return null}function c(e){var t=u(e);return e._dispatchIDs=null,e._dispatchListeners=null,t}function l(e){"production"!==t.env.NODE_ENV&&d(e);var n=e._dispatchListeners,r=e._dispatchIDs;Array.isArray(n)?"production"!==t.env.NODE_ENV?m(!1,"executeDirectDispatch(...): Invalid `event`."):m(!1):void 0;var o=n?n(e,r):null;return e._dispatchListeners=null,e._dispatchIDs=null,o}function p(e){return!!e._dispatchListeners}var d,f=n(30),h=n(34),m=n(13),v=n(25),g={Mount:null,injectMount:function(e){g.Mount=e,"production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?v(e&&e.getNode&&e.getID,"EventPluginUtils.injection.injectMount(...): Injected Mount module is missing getNode or getID."):void 0)}},y=f.topLevelTypes;"production"!==t.env.NODE_ENV&&(d=function(e){var n=e._dispatchListeners,r=e._dispatchIDs,o=Array.isArray(n),i=Array.isArray(r),a=i?r.length:r?1:0,s=o?n.length:n?1:0;"production"!==t.env.NODE_ENV?v(i===o&&a===s,"EventPluginUtils: Invalid `event`."):void 0});var _={isEndish:r,isMoveish:o,isStartish:i,executeDirectDispatch:l,executeDispatchesInOrder:s,executeDispatchesInOrderStopAtTrue:c,hasDispatches:p,getNode:function(e){return g.Mount.getNode(e)},getID:function(e){return g.Mount.getID(e)},injection:g};e.exports=_}).call(t,n(4))},function(e,t,n){(function(t){"use strict";function n(e,t,n,o){try{return t(n,o)}catch(e){return void(null===r&&(r=e))}}var r=null,o={invokeGuardedCallback:n,invokeGuardedCallbackWithCatch:n,rethrowCaughtError:function(){if(r){var e=r;throw r=null,e}}};if("production"!==t.env.NODE_ENV&&"undefined"!=typeof window&&"function"==typeof window.dispatchEvent&&"undefined"!=typeof document&&"function"==typeof document.createEvent){var i=document.createElement("react");o.invokeGuardedCallback=function(e,t,n,r){var o=t.bind(null,n,r),a="react-"+e;i.addEventListener(a,o,!1);var s=document.createEvent("Event");s.initEvent(a,!1,!1),i.dispatchEvent(s),i.removeEventListener(a,o,!1)}}e.exports=o}).call(t,n(4))},function(e,t,n){(function(t){"use strict";function r(e,n){if(null==n?"production"!==t.env.NODE_ENV?o(!1,"accumulateInto(...): Accumulated items must not be null or undefined."):o(!1):void 0,null==e)return n;var r=Array.isArray(e),i=Array.isArray(n);return r&&i?(e.push.apply(e,n),e):r?(e.push(n),e):i?[e].concat(n):[e,n]}var o=n(13);e.exports=r}).call(t,n(4))},function(e,t){"use strict";var n=function(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)};e.exports=n},function(e,t,n){"use strict";function r(e){o.enqueueEvents(e),o.processEventQueue(!1)}var o=n(31),i={handleTopLevel:function(e,t,n,i,a){var s=o.extractEvents(e,t,n,i,a);r(s)}};e.exports=i},function(e,t){"use strict";var n={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(e){n.currentScrollLeft=e.x,n.currentScrollTop=e.y}};e.exports=n},function(e,t){"use strict";function n(e,t){if(null==e)throw new TypeError("Object.assign target cannot be null or undefined");for(var n=Object(e),r=Object.prototype.hasOwnProperty,o=1;o<arguments.length;o++){var i=arguments[o];if(null!=i){var a=Object(i);for(var s in a)r.call(a,s)&&(n[s]=a[s])}}return n}e.exports=n},function(e,t,n){"use strict";/**
	 * Checks if an event is supported in the current execution environment.
	 *
	 * NOTE: This will not work correctly for non-generic events such as `change`,
	 * `reset`, `load`, `error`, and `select`.
	 *
	 * Borrows from Modernizr.
	 *
	 * @param {string} eventNameSuffix Event name, e.g. "click".
	 * @param {?boolean} capture Check if the capture phase is supported.
	 * @return {boolean} True if the event is supported.
	 * @internal
	 * @license Modernizr 3.0.0pre (Custom Build) | MIT
	 */
function r(e,t){if(!i.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,r=n in document;if(!r){var a=document.createElement("div");a.setAttribute(n,"return;"),r="function"==typeof a[n]}return!r&&o&&"wheel"===e&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var o,i=n(9);i.canUseDOM&&(o=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),e.exports=r},function(e,t){"use strict";var n={useCreateElement:!1};e.exports=n},function(e,t,n){(function(t){"use strict";var r=n(5),o=n(39),i=n(43),a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,s={key:!0,ref:!0,__self:!0,__source:!0},u=function(e,n,r,o,s,u,c){var l={$$typeof:a,type:e,key:n,ref:r,props:c,_owner:u};return"production"!==t.env.NODE_ENV&&(l._store={},i?(Object.defineProperty(l._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(l,"_self",{configurable:!1,enumerable:!1,writable:!1,value:o}),Object.defineProperty(l,"_source",{configurable:!1,enumerable:!1,writable:!1,value:s})):(l._store.validated=!1,l._self=o,l._source=s),Object.freeze(l.props),Object.freeze(l)),l};u.createElement=function(e,t,n){var o,i={},a=null,c=null,l=null,p=null;if(null!=t){c=void 0===t.ref?null:t.ref,a=void 0===t.key?null:""+t.key,l=void 0===t.__self?null:t.__self,p=void 0===t.__source?null:t.__source;for(o in t)t.hasOwnProperty(o)&&!s.hasOwnProperty(o)&&(i[o]=t[o])}var d=arguments.length-2;if(1===d)i.children=n;else if(d>1){for(var f=Array(d),h=0;h<d;h++)f[h]=arguments[h+2];i.children=f}if(e&&e.defaultProps){var m=e.defaultProps;for(o in m)"undefined"==typeof i[o]&&(i[o]=m[o])}return u(e,a,c,l,p,r.current,i)},u.createFactory=function(e){var t=u.createElement.bind(null,e);return t.type=e,t},u.cloneAndReplaceKey=function(e,t){var n=u(e.type,t,e.ref,e._self,e._source,e._owner,e.props);return n},u.cloneAndReplaceProps=function(e,n){var r=u(e.type,e.key,e.ref,e._self,e._source,e._owner,n);return"production"!==t.env.NODE_ENV&&(r._store.validated=e._store.validated),r},u.cloneElement=function(e,t,n){var i,a=o({},e.props),c=e.key,l=e.ref,p=e._self,d=e._source,f=e._owner;if(null!=t){void 0!==t.ref&&(l=t.ref,f=r.current),void 0!==t.key&&(c=""+t.key);for(i in t)t.hasOwnProperty(i)&&!s.hasOwnProperty(i)&&(a[i]=t[i])}var h=arguments.length-2;if(1===h)a.children=n;else if(h>1){for(var m=Array(h),v=0;v<h;v++)m[v]=arguments[v+2];a.children=m}return u(e.type,c,l,p,d,f,a)},u.isValidElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===a},e.exports=u}).call(t,n(4))},function(e,t,n){(function(t){"use strict";var n=!1;if("production"!==t.env.NODE_ENV)try{Object.defineProperty({},"x",{get:function(){}}),n=!0}catch(e){}e.exports=n}).call(t,n(4))},function(e,t){"use strict";function n(e){return!!i[e]}function r(e){i[e]=!0}function o(e){delete i[e]}var i={},a={isNullComponentID:n,registerNullComponentID:r,deregisterNullComponentID:o};e.exports=a},function(e,t,n){(function(t){"use strict";function r(e){return f+e.toString(36)}function o(e,t){return e.charAt(t)===f||t===e.length}function i(e){return""===e||e.charAt(0)===f&&e.charAt(e.length-1)!==f}function a(e,t){return 0===t.indexOf(e)&&o(t,e.length)}function s(e){return e?e.substr(0,e.lastIndexOf(f)):""}function u(e,n){if(i(e)&&i(n)?void 0:"production"!==t.env.NODE_ENV?d(!1,"getNextDescendantID(%s, %s): Received an invalid React DOM ID.",e,n):d(!1),a(e,n)?void 0:"production"!==t.env.NODE_ENV?d(!1,"getNextDescendantID(...): React has made an invalid assumption about the DOM hierarchy. Expected `%s` to be an ancestor of `%s`.",e,n):d(!1),e===n)return e;var r,s=e.length+h;for(r=s;r<n.length&&!o(n,r);r++);return n.substr(0,r)}function c(e,n){var r=Math.min(e.length,n.length);if(0===r)return"";for(var a=0,s=0;s<=r;s++)if(o(e,s)&&o(n,s))a=s;else if(e.charAt(s)!==n.charAt(s))break;var u=e.substr(0,a);return i(u)?void 0:"production"!==t.env.NODE_ENV?d(!1,"getFirstCommonAncestorID(%s, %s): Expected a valid React DOM ID: %s",e,n,u):d(!1),u}function l(e,n,r,o,i,c){e=e||"",n=n||"",e===n?"production"!==t.env.NODE_ENV?d(!1,"traverseParentPath(...): Cannot traverse from and to the same ID, `%s`.",e):d(!1):void 0;var l=a(n,e);l||a(e,n)?void 0:"production"!==t.env.NODE_ENV?d(!1,"traverseParentPath(%s, %s, ...): Cannot traverse from two IDs that do not have a parent path.",e,n):d(!1);for(var p=0,f=l?s:u,h=e;;h=f(h,n)){var v;if(i&&h===e||c&&h===n||(v=r(h,l,o)),v===!1||h===n)break;p++<m?void 0:"production"!==t.env.NODE_ENV?d(!1,"traverseParentPath(%s, %s, ...): Detected an infinite loop while traversing the React DOM ID tree. This may be due to malformed IDs: %s",e,n,h):d(!1)}}var p=n(46),d=n(13),f=".",h=f.length,m=1e4,v={createReactRootID:function(){return r(p.createReactRootIndex())},createReactID:function(e,t){return e+t},getReactRootIDFromNodeID:function(e){if(e&&e.charAt(0)===f&&e.length>1){var t=e.indexOf(f,1);return t>-1?e.substr(0,t):e}return null},traverseEnterLeave:function(e,t,n,r,o){var i=c(e,t);i!==e&&l(e,i,n,r,!1,!0),i!==t&&l(i,t,n,o,!0,!1)},traverseTwoPhase:function(e,t,n){e&&(l("",e,t,n,!0,!1),l(e,"",t,n,!1,!0))},traverseTwoPhaseSkipTarget:function(e,t,n){e&&(l("",e,t,n,!0,!0),l(e,"",t,n,!0,!0))},traverseAncestors:function(e,t,n){l("",e,t,n,!0,!1)},getFirstCommonAncestorID:c,_getNextDescendantID:u,isAncestorIDOf:a,SEPARATOR:f};e.exports=v}).call(t,n(4))},function(e,t){"use strict";var n={injectCreateReactRootIndex:function(e){r.createReactRootIndex=e}},r={createReactRootIndex:null,injection:n};e.exports=r},function(e,t){"use strict";var n={remove:function(e){e._reactInternalInstance=void 0},get:function(e){return e._reactInternalInstance},has:function(e){return void 0!==e._reactInternalInstance},set:function(e,t){e._reactInternalInstance=t}};e.exports=n},function(e,t,n){"use strict";var r=n(49),o=/\/?>/,i={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(e){var t=r(e);return e.replace(o," "+i.CHECKSUM_ATTR_NAME+'="'+t+'"$&')},canReuseMarkup:function(e,t){var n=t.getAttribute(i.CHECKSUM_ATTR_NAME);n=n&&parseInt(n,10);var o=r(e);return o===n}};e.exports=i},function(e,t){"use strict";function n(e){for(var t=1,n=0,o=0,i=e.length,a=i&-4;o<a;){for(;o<Math.min(o+4096,a);o+=4)n+=(t+=e.charCodeAt(o))+(t+=e.charCodeAt(o+1))+(t+=e.charCodeAt(o+2))+(t+=e.charCodeAt(o+3));t%=r,n%=r}for(;o<i;o++)n+=t+=e.charCodeAt(o);return t%=r,n%=r,t|n<<16}var r=65521;e.exports=n},function(e,t,n){"use strict";function r(){o.attachRefs(this,this._currentElement)}var o=n(51),i={mountComponent:function(e,t,n,o){var i=e.mountComponent(t,n,o);return e._currentElement&&null!=e._currentElement.ref&&n.getReactMountReady().enqueue(r,e),i},unmountComponent:function(e){o.detachRefs(e,e._currentElement),e.unmountComponent()},receiveComponent:function(e,t,n,i){var a=e._currentElement;if(t!==a||i!==e._context){var s=o.shouldUpdateRefs(a,t);s&&o.detachRefs(e,a),e.receiveComponent(t,n,i),s&&e._currentElement&&null!=e._currentElement.ref&&n.getReactMountReady().enqueue(r,e)}},performUpdateIfNecessary:function(e,t){e.performUpdateIfNecessary(t)}};e.exports=i},function(e,t,n){"use strict";function r(e,t,n){"function"==typeof e?e(t.getPublicInstance()):i.addComponentAsRefTo(t,e,n)}function o(e,t,n){"function"==typeof e?e(null):i.removeComponentAsRefFrom(t,e,n)}var i=n(52),a={};a.attachRefs=function(e,t){if(null!==t&&t!==!1){var n=t.ref;null!=n&&r(n,e,t._owner)}},a.shouldUpdateRefs=function(e,t){var n=null===e||e===!1,r=null===t||t===!1;return n||r||t._owner!==e._owner||t.ref!==e.ref},a.detachRefs=function(e,t){if(null!==t&&t!==!1){var n=t.ref;null!=n&&o(n,e,t._owner)}},e.exports=a},function(e,t,n){(function(t){"use strict";var r=n(13),o={isValidOwner:function(e){return!(!e||"function"!=typeof e.attachRef||"function"!=typeof e.detachRef)},addComponentAsRefTo:function(e,n,i){o.isValidOwner(i)?void 0:"production"!==t.env.NODE_ENV?r(!1,"addComponentAsRefTo(...): Only a ReactOwner can have refs. You might be adding a ref to a component that was not created inside a component's `render` method, or you have multiple copies of React loaded (details: https://fb.me/react-refs-must-have-owner)."):r(!1),i.attachRef(n,e)},removeComponentAsRefFrom:function(e,n,i){o.isValidOwner(i)?void 0:"production"!==t.env.NODE_ENV?r(!1,"removeComponentAsRefFrom(...): Only a ReactOwner can have refs. You might be removing a ref to a component that was not created inside a component's `render` method, or you have multiple copies of React loaded (details: https://fb.me/react-refs-must-have-owner)."):r(!1),i.getPublicInstance().refs[n]===e.getPublicInstance()&&i.detachRef(n)}};e.exports=o}).call(t,n(4))},function(e,t,n){(function(t){"use strict";function r(e){u.enqueueUpdate(e)}function o(e,n){var r=s.get(e);return r?("production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?p(null==i.current,"%s(...): Cannot update during an existing state transition (such as within `render`). Render methods should be a pure function of props and state.",n):void 0),r):("production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?p(!n,"%s(...): Can only update a mounted or mounting component. This usually means you called %s() on an unmounted component. This is a no-op. Please check the code for the %s component.",n,n,e.constructor.displayName):void 0),null)}var i=n(5),a=n(42),s=n(47),u=n(54),c=n(39),l=n(13),p=n(25),d={isMounted:function(e){if("production"!==t.env.NODE_ENV){var n=i.current;null!==n&&("production"!==t.env.NODE_ENV?p(n._warnedAboutRefsInRender,"%s is accessing isMounted inside its render() function. render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",n.getName()||"A component"):void 0,n._warnedAboutRefsInRender=!0)}var r=s.get(e);return!!r&&!!r._renderedComponent},enqueueCallback:function(e,n){"function"!=typeof n?"production"!==t.env.NODE_ENV?l(!1,"enqueueCallback(...): You called `setProps`, `replaceProps`, `setState`, `replaceState`, or `forceUpdate` with a callback that isn't callable."):l(!1):void 0;var i=o(e);return i?(i._pendingCallbacks?i._pendingCallbacks.push(n):i._pendingCallbacks=[n],void r(i)):null},enqueueCallbackInternal:function(e,n){"function"!=typeof n?"production"!==t.env.NODE_ENV?l(!1,"enqueueCallback(...): You called `setProps`, `replaceProps`, `setState`, `replaceState`, or `forceUpdate` with a callback that isn't callable."):l(!1):void 0,e._pendingCallbacks?e._pendingCallbacks.push(n):e._pendingCallbacks=[n],r(e)},enqueueForceUpdate:function(e){var t=o(e,"forceUpdate");t&&(t._pendingForceUpdate=!0,r(t))},enqueueReplaceState:function(e,t){var n=o(e,"replaceState");n&&(n._pendingStateQueue=[t],n._pendingReplaceState=!0,r(n))},enqueueSetState:function(e,t){var n=o(e,"setState");if(n){var i=n._pendingStateQueue||(n._pendingStateQueue=[]);i.push(t),r(n)}},enqueueSetProps:function(e,t){var n=o(e,"setProps");n&&d.enqueueSetPropsInternal(n,t)},enqueueSetPropsInternal:function(e,n){var o=e._topLevelWrapper;o?void 0:"production"!==t.env.NODE_ENV?l(!1,"setProps(...): You called `setProps` on a component with a parent. This is an anti-pattern since props will get reactively updated when rendered. Instead, change the owner's `render` method to pass the correct value as props to the component where it is created."):l(!1);var i=o._pendingElement||o._currentElement,s=i.props,u=c({},s.props,n);o._pendingElement=a.cloneAndReplaceProps(i,a.cloneAndReplaceProps(s,u)),r(o)},enqueueReplaceProps:function(e,t){var n=o(e,"replaceProps");n&&d.enqueueReplacePropsInternal(n,t)},enqueueReplacePropsInternal:function(e,n){var o=e._topLevelWrapper;o?void 0:"production"!==t.env.NODE_ENV?l(!1,"replaceProps(...): You called `replaceProps` on a component with a parent. This is an anti-pattern since props will get reactively updated when rendered. Instead, change the owner's `render` method to pass the correct value as props to the component where it is created."):l(!1);var i=o._pendingElement||o._currentElement,s=i.props;o._pendingElement=a.cloneAndReplaceProps(i,a.cloneAndReplaceProps(s,n)),r(o)},enqueueElementInternal:function(e,t){e._pendingElement=t,r(e)}};e.exports=d}).call(t,n(4))},function(e,t,n){(function(t){"use strict";function r(){D.ReactReconcileTransaction&&E?void 0:"production"!==t.env.NODE_ENV?v(!1,"ReactUpdates: must inject a reconcile transaction class and batching strategy"):v(!1)}function o(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=l.getPooled(),this.reconcileTransaction=D.ReactReconcileTransaction.getPooled(!1)}function i(e,t,n,o,i,a){r(),E.batchedUpdates(e,t,n,o,i,a)}function a(e,t){return e._mountOrder-t._mountOrder}function s(e){var n=e.dirtyComponentsLength;n!==g.length?"production"!==t.env.NODE_ENV?v(!1,"Expected flush transaction's stored dirty-components length (%s) to match dirty-components array length (%s).",n,g.length):v(!1):void 0,g.sort(a);for(var r=0;r<n;r++){var o=g[r],i=o._pendingCallbacks;if(o._pendingCallbacks=null,f.performUpdateIfNecessary(o,e.reconcileTransaction),i)for(var s=0;s<i.length;s++)e.callbackQueue.enqueue(i[s],o.getPublicInstance())}}function u(e){return r(),E.isBatchingUpdates?void g.push(e):void E.batchedUpdates(u,e)}function c(e,n){E.isBatchingUpdates?void 0:"production"!==t.env.NODE_ENV?v(!1,"ReactUpdates.asap: Can't enqueue an asap callback in a context whereupdates are not being batched."):v(!1),y.enqueue(e,n),_=!0}var l=n(55),p=n(56),d=n(18),f=n(50),h=n(57),m=n(39),v=n(13),g=[],y=l.getPooled(),_=!1,E=null,b={initialize:function(){this.dirtyComponentsLength=g.length},close:function(){this.dirtyComponentsLength!==g.length?(g.splice(0,this.dirtyComponentsLength),C()):g.length=0}},N={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},w=[b,N];m(o.prototype,h.Mixin,{getTransactionWrappers:function(){return w},destructor:function(){this.dirtyComponentsLength=null,l.release(this.callbackQueue),this.callbackQueue=null,D.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(e,t,n){return h.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,e,t,n)}}),p.addPoolingTo(o);var C=function(){for(;g.length||_;){if(g.length){var e=o.getPooled();e.perform(s,null,e),o.release(e)}if(_){_=!1;var t=y;y=l.getPooled(),t.notifyAll(),l.release(t)}}};C=d.measure("ReactUpdates","flushBatchedUpdates",C);var x={injectReconcileTransaction:function(e){e?void 0:"production"!==t.env.NODE_ENV?v(!1,"ReactUpdates: must provide a reconcile transaction class"):v(!1),D.ReactReconcileTransaction=e},injectBatchingStrategy:function(e){e?void 0:"production"!==t.env.NODE_ENV?v(!1,"ReactUpdates: must provide a batching strategy"):v(!1),"function"!=typeof e.batchedUpdates?"production"!==t.env.NODE_ENV?v(!1,"ReactUpdates: must provide a batchedUpdates() function"):v(!1):void 0,"boolean"!=typeof e.isBatchingUpdates?"production"!==t.env.NODE_ENV?v(!1,"ReactUpdates: must provide an isBatchingUpdates boolean attribute"):v(!1):void 0,E=e}},D={ReactReconcileTransaction:null,batchedUpdates:i,enqueueUpdate:u,flushBatchedUpdates:C,injection:x,asap:c};e.exports=D}).call(t,n(4))},function(e,t,n){(function(t){"use strict";function r(){this._callbacks=null,this._contexts=null}var o=n(56),i=n(39),a=n(13);i(r.prototype,{enqueue:function(e,t){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(e),this._contexts.push(t)},notifyAll:function(){var e=this._callbacks,n=this._contexts;if(e){e.length!==n.length?"production"!==t.env.NODE_ENV?a(!1,"Mismatched list of contexts in callback queue"):a(!1):void 0,this._callbacks=null,this._contexts=null;for(var r=0;r<e.length;r++)e[r].call(n[r]);e.length=0,n.length=0}},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),o.addPoolingTo(r),e.exports=r}).call(t,n(4))},function(e,t,n){(function(t){"use strict";var r=n(13),o=function(e){var t=this;if(t.instancePool.length){var n=t.instancePool.pop();return t.call(n,e),n}return new t(e)},i=function(e,t){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,e,t),r}return new n(e,t)},a=function(e,t,n){var r=this;if(r.instancePool.length){var o=r.instancePool.pop();return r.call(o,e,t,n),o}return new r(e,t,n)},s=function(e,t,n,r){var o=this;if(o.instancePool.length){var i=o.instancePool.pop();return o.call(i,e,t,n,r),i}return new o(e,t,n,r)},u=function(e,t,n,r,o){var i=this;if(i.instancePool.length){var a=i.instancePool.pop();return i.call(a,e,t,n,r,o),a}return new i(e,t,n,r,o)},c=function(e){var n=this;e instanceof n?void 0:"production"!==t.env.NODE_ENV?r(!1,"Trying to release an instance into a pool of a different type."):r(!1),e.destructor(),n.instancePool.length<n.poolSize&&n.instancePool.push(e)},l=10,p=o,d=function(e,t){var n=e;return n.instancePool=[],n.getPooled=t||p,n.poolSize||(n.poolSize=l),n.release=c,n},f={addPoolingTo:d,oneArgumentPooler:o,twoArgumentPooler:i,threeArgumentPooler:a,fourArgumentPooler:s,fiveArgumentPooler:u};e.exports=f}).call(t,n(4))},function(e,t,n){(function(t){"use strict";var r=n(13),o={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(e,n,o,i,a,s,u,c){this.isInTransaction()?"production"!==t.env.NODE_ENV?r(!1,"Transaction.perform(...): Cannot initialize a transaction when there is already an outstanding transaction."):r(!1):void 0;var l,p;try{this._isInTransaction=!0,l=!0,this.initializeAll(0),p=e.call(n,o,i,a,s,u,c),l=!1}finally{try{if(l)try{this.closeAll(0)}catch(e){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return p},initializeAll:function(e){for(var t=this.transactionWrappers,n=e;n<t.length;n++){var r=t[n];try{this.wrapperInitData[n]=i.OBSERVED_ERROR,this.wrapperInitData[n]=r.initialize?r.initialize.call(this):null}finally{if(this.wrapperInitData[n]===i.OBSERVED_ERROR)try{this.initializeAll(n+1)}catch(e){}}}},closeAll:function(e){this.isInTransaction()?void 0:"production"!==t.env.NODE_ENV?r(!1,"Transaction.closeAll(): Cannot close transaction when none are open."):r(!1);for(var n=this.transactionWrappers,o=e;o<n.length;o++){var a,s=n[o],u=this.wrapperInitData[o];try{a=!0,u!==i.OBSERVED_ERROR&&s.close&&s.close.call(this,u),a=!1}finally{if(a)try{this.closeAll(o+1)}catch(e){}}}this.wrapperInitData.length=0}},i={Mixin:o,OBSERVED_ERROR:{}};e.exports=i}).call(t,n(4))},function(e,t,n){(function(t){"use strict";var n={};"production"!==t.env.NODE_ENV&&Object.freeze(n),e.exports=n}).call(t,n(4))},function(e,t,n){"use strict";function r(e,t){var n=!0;e:for(;n;){var r=e,i=t;if(n=!1,r&&i){if(r===i)return!0;if(o(r))return!1;if(o(i)){e=r,t=i.parentNode,n=!0;continue e}return r.contains?r.contains(i):!!r.compareDocumentPosition&&!!(16&r.compareDocumentPosition(i))}return!1}}var o=n(60);e.exports=r},function(e,t,n){"use strict";function r(e){return o(e)&&3==e.nodeType}var o=n(61);e.exports=r},function(e,t){"use strict";function n(e){return!(!e||!("function"==typeof Node?e instanceof Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}e.exports=n},function(e,t,n){(function(t){"use strict";function r(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}function o(e){return"function"==typeof e&&"undefined"!=typeof e.prototype&&"function"==typeof e.prototype.mountComponent&&"function"==typeof e.prototype.receiveComponent}function i(e){var n;if(null===e||e===!1)n=new s(i);else if("object"==typeof e){var a=e;!a||"function"!=typeof a.type&&"string"!=typeof a.type?"production"!==t.env.NODE_ENV?l(!1,"Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",null==a.type?a.type:typeof a.type,r(a._owner)):l(!1):void 0,n="string"==typeof a.type?u.createInternalComponent(a):o(a.type)?new a.type(a):new d}else"string"==typeof e||"number"==typeof e?n=u.createInstanceForText(e):"production"!==t.env.NODE_ENV?l(!1,"Encountered invalid React node of type %s",typeof e):l(!1);return"production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?p("function"==typeof n.construct&&"function"==typeof n.mountComponent&&"function"==typeof n.receiveComponent&&"function"==typeof n.unmountComponent,"Only React Components can be mounted."):void 0),n.construct(e),n._mountIndex=0,n._mountImage=null,"production"!==t.env.NODE_ENV&&(n._isOwnerNecessary=!1,n._warnedAboutRefsInRender=!1),"production"!==t.env.NODE_ENV&&Object.preventExtensions&&Object.preventExtensions(n),n}var a=n(63),s=n(68),u=n(69),c=n(39),l=n(13),p=n(25),d=function(){};c(d.prototype,a.Mixin,{_instantiateReactComponent:i}),e.exports=i}).call(t,n(4))},function(e,t,n){(function(t){"use strict";function r(e){var t=e._currentElement._owner||null;if(t){var n=t.getName();if(n)return" Check the render method of `"+n+"`."}return""}function o(e){}var i=n(64),a=n(5),s=n(42),u=n(47),c=n(18),l=n(65),p=n(66),d=n(50),f=n(53),h=n(39),m=n(58),v=n(13),g=n(67),y=n(25);o.prototype.render=function(){var e=u.get(this)._currentElement.type;return e(this.props,this.context,this.updater)};var _=1,E={construct:function(e){this._currentElement=e,this._rootNodeID=null,this._instance=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._topLevelWrapper=null,this._pendingCallbacks=null},mountComponent:function(e,n,r){this._context=r,this._mountOrder=_++,this._rootNodeID=e;var i,c,l=this._processProps(this._currentElement.props),p=this._processContext(r),h=this._currentElement.type,g="prototype"in h;if(g)if("production"!==t.env.NODE_ENV){a.current=this;try{i=new h(l,p,f)}finally{a.current=null}}else i=new h(l,p,f);g&&null!==i&&i!==!1&&!s.isValidElement(i)||(c=i,i=new o(h)),"production"!==t.env.NODE_ENV&&(null==i.render?"production"!==t.env.NODE_ENV?y(!1,"%s(...): No `render` method found on the returned component instance: you may have forgotten to define `render`, returned null/false from a stateless component, or tried to render an element whose type is a function that isn't a React component.",h.displayName||h.name||"Component"):void 0:"production"!==t.env.NODE_ENV?y(h.prototype&&h.prototype.isReactComponent||!g||!(i instanceof h),"%s(...): React component classes must extend React.Component.",h.displayName||h.name||"Component"):void 0),i.props=l,i.context=p,i.refs=m,i.updater=f,this._instance=i,u.set(i,this),"production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?y(!i.getInitialState||i.getInitialState.isReactClassApproved,"getInitialState was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Did you mean to define a state property instead?",this.getName()||"a component"):void 0,"production"!==t.env.NODE_ENV?y(!i.getDefaultProps||i.getDefaultProps.isReactClassApproved,"getDefaultProps was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Use a static property to define defaultProps instead.",this.getName()||"a component"):void 0,"production"!==t.env.NODE_ENV?y(!i.propTypes,"propTypes was defined as an instance property on %s. Use a static property to define propTypes instead.",this.getName()||"a component"):void 0,"production"!==t.env.NODE_ENV?y(!i.contextTypes,"contextTypes was defined as an instance property on %s. Use a static property to define contextTypes instead.",this.getName()||"a component"):void 0,"production"!==t.env.NODE_ENV?y("function"!=typeof i.componentShouldUpdate,"%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",this.getName()||"A component"):void 0,"production"!==t.env.NODE_ENV?y("function"!=typeof i.componentDidUnmount,"%s has a method called componentDidUnmount(). But there is no such lifecycle method. Did you mean componentWillUnmount()?",this.getName()||"A component"):void 0,"production"!==t.env.NODE_ENV?y("function"!=typeof i.componentWillRecieveProps,"%s has a method called componentWillRecieveProps(). Did you mean componentWillReceiveProps()?",this.getName()||"A component"):void 0);var E=i.state;void 0===E&&(i.state=E=null),"object"!=typeof E||Array.isArray(E)?"production"!==t.env.NODE_ENV?v(!1,"%s.state: must be set to an object or null",this.getName()||"ReactCompositeComponent"):v(!1):void 0,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,i.componentWillMount&&(i.componentWillMount(),this._pendingStateQueue&&(i.state=this._processPendingState(i.props,i.context))),void 0===c&&(c=this._renderValidatedComponent()),this._renderedComponent=this._instantiateReactComponent(c);var b=d.mountComponent(this._renderedComponent,e,n,this._processChildContext(r));return i.componentDidMount&&n.getReactMountReady().enqueue(i.componentDidMount,i),b},unmountComponent:function(){var e=this._instance;e.componentWillUnmount&&e.componentWillUnmount(),d.unmountComponent(this._renderedComponent),this._renderedComponent=null,this._instance=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=null,this._topLevelWrapper=null,u.remove(e)},_maskContext:function(e){var t=null,n=this._currentElement.type,r=n.contextTypes;if(!r)return m;t={};for(var o in r)t[o]=e[o];return t},_processContext:function(e){var n=this._maskContext(e);if("production"!==t.env.NODE_ENV){var r=this._currentElement.type;r.contextTypes&&this._checkPropTypes(r.contextTypes,n,l.context)}return n},_processChildContext:function(e){var n=this._currentElement.type,r=this._instance,o=r.getChildContext&&r.getChildContext();if(o){"object"!=typeof n.childContextTypes?"production"!==t.env.NODE_ENV?v(!1,"%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",this.getName()||"ReactCompositeComponent"):v(!1):void 0,"production"!==t.env.NODE_ENV&&this._checkPropTypes(n.childContextTypes,o,l.childContext);for(var i in o)i in n.childContextTypes?void 0:"production"!==t.env.NODE_ENV?v(!1,'%s.getChildContext(): key "%s" is not defined in childContextTypes.',this.getName()||"ReactCompositeComponent",i):v(!1);return h({},e,o)}return e},_processProps:function(e){if("production"!==t.env.NODE_ENV){var n=this._currentElement.type;n.propTypes&&this._checkPropTypes(n.propTypes,e,l.prop)}return e},_checkPropTypes:function(e,n,o){var i=this.getName();for(var a in e)if(e.hasOwnProperty(a)){var s;try{"function"!=typeof e[a]?"production"!==t.env.NODE_ENV?v(!1,"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",i||"React class",p[o],a):v(!1):void 0,s=e[a](n,a,i,o,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(e){s=e}if(s instanceof Error){var u=r(this);o===l.prop?"production"!==t.env.NODE_ENV?y(!1,"Failed Composite propType: %s%s",s.message,u):void 0:"production"!==t.env.NODE_ENV?y(!1,"Failed Context Types: %s%s",s.message,u):void 0}}},receiveComponent:function(e,t,n){var r=this._currentElement,o=this._context;this._pendingElement=null,this.updateComponent(t,r,e,o,n)},performUpdateIfNecessary:function(e){null!=this._pendingElement&&d.receiveComponent(this,this._pendingElement||this._currentElement,e,this._context),(null!==this._pendingStateQueue||this._pendingForceUpdate)&&this.updateComponent(e,this._currentElement,this._currentElement,this._context,this._context)},updateComponent:function(e,n,r,o,i){var a,s=this._instance,u=this._context===i?s.context:this._processContext(i);n===r?a=r.props:(a=this._processProps(r.props),s.componentWillReceiveProps&&s.componentWillReceiveProps(a,u));var c=this._processPendingState(a,u),l=this._pendingForceUpdate||!s.shouldComponentUpdate||s.shouldComponentUpdate(a,c,u);"production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?y("undefined"!=typeof l,"%s.shouldComponentUpdate(): Returned undefined instead of a boolean value. Make sure to return true or false.",this.getName()||"ReactCompositeComponent"):void 0),l?(this._pendingForceUpdate=!1,this._performComponentUpdate(r,a,c,u,e,i)):(this._currentElement=r,this._context=i,s.props=a,s.state=c,s.context=u)},_processPendingState:function(e,t){var n=this._instance,r=this._pendingStateQueue,o=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!r)return n.state;if(o&&1===r.length)return r[0];for(var i=h({},o?r[0]:n.state),a=o?1:0;a<r.length;a++){var s=r[a];h(i,"function"==typeof s?s.call(n,i,e,t):s)}return i},_performComponentUpdate:function(e,t,n,r,o,i){var a,s,u,c=this._instance,l=Boolean(c.componentDidUpdate);l&&(a=c.props,s=c.state,u=c.context),c.componentWillUpdate&&c.componentWillUpdate(t,n,r),this._currentElement=e,this._context=i,c.props=t,c.state=n,c.context=r,this._updateRenderedComponent(o,i),l&&o.getReactMountReady().enqueue(c.componentDidUpdate.bind(c,a,s,u),c)},_updateRenderedComponent:function(e,t){var n=this._renderedComponent,r=n._currentElement,o=this._renderValidatedComponent();if(g(r,o))d.receiveComponent(n,o,e,this._processChildContext(t));else{var i=this._rootNodeID,a=n._rootNodeID;d.unmountComponent(n),this._renderedComponent=this._instantiateReactComponent(o);var s=d.mountComponent(this._renderedComponent,i,e,this._processChildContext(t));this._replaceNodeWithMarkupByID(a,s)}},_replaceNodeWithMarkupByID:function(e,t){i.replaceNodeWithMarkupByID(e,t)},_renderValidatedComponentWithoutOwnerOrContext:function(){var e=this._instance,n=e.render();return"production"!==t.env.NODE_ENV&&"undefined"==typeof n&&e.render._isMockFunction&&(n=null),n},_renderValidatedComponent:function(){var e;a.current=this;try{e=this._renderValidatedComponentWithoutOwnerOrContext()}finally{a.current=null}return null===e||e===!1||s.isValidElement(e)?void 0:"production"!==t.env.NODE_ENV?v(!1,"%s.render(): A valid ReactComponent must be returned. You may have returned undefined, an array or some other invalid object.",this.getName()||"ReactCompositeComponent"):v(!1),e},attachRef:function(e,n){var r=this.getPublicInstance();null==r?"production"!==t.env.NODE_ENV?v(!1,"Stateless function components cannot have refs."):v(!1):void 0;var o=n.getPublicInstance();if("production"!==t.env.NODE_ENV){var i=n&&n.getName?n.getName():"a component";"production"!==t.env.NODE_ENV?y(null!=o,'Stateless function components cannot be given refs (See ref "%s" in %s created by %s). Attempts to access this ref will fail.',e,i,this.getName()):void 0}var a=r.refs===m?r.refs={}:r.refs;a[e]=o},detachRef:function(e){var t=this.getPublicInstance().refs;delete t[e]},getName:function(){var e=this._currentElement.type,t=this._instance&&this._instance.constructor;return e.displayName||t&&t.displayName||e.name||t&&t.name||null},getPublicInstance:function(){var e=this._instance;return e instanceof o?null:e},_instantiateReactComponent:null};c.measureMethods(E,"ReactCompositeComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent",_renderValidatedComponent:"_renderValidatedComponent"});var b={Mixin:E};e.exports=b}).call(t,n(4))},function(e,t,n){(function(t){"use strict";var r=n(13),o=!1,i={unmountIDFromEnvironment:null,replaceNodeWithMarkupByID:null,processChildrenUpdates:null,injection:{injectEnvironment:function(e){o?"production"!==t.env.NODE_ENV?r(!1,"ReactCompositeComponent: injectEnvironment() can only be called once."):r(!1):void 0,i.unmountIDFromEnvironment=e.unmountIDFromEnvironment,i.replaceNodeWithMarkupByID=e.replaceNodeWithMarkupByID,i.processChildrenUpdates=e.processChildrenUpdates,o=!0}}};e.exports=i}).call(t,n(4));
},function(e,t,n){"use strict";var r=n(17),o=r({prop:null,context:null,childContext:null});e.exports=o},function(e,t,n){(function(t){"use strict";var n={};"production"!==t.env.NODE_ENV&&(n={prop:"prop",context:"context",childContext:"child context"}),e.exports=n}).call(t,n(4))},function(e,t){"use strict";function n(e,t){var n=null===e||e===!1,r=null===t||t===!1;if(n||r)return n===r;var o=typeof e,i=typeof t;return"string"===o||"number"===o?"string"===i||"number"===i:"object"===i&&e.type===t.type&&e.key===t.key}e.exports=n},function(e,t,n){"use strict";function r(){a.registerNullComponentID(this._rootNodeID)}var o,i=n(42),a=n(44),s=n(50),u=n(39),c={injectEmptyComponent:function(e){o=i.createElement(e)}},l=function(e){this._currentElement=null,this._rootNodeID=null,this._renderedComponent=e(o)};u(l.prototype,{construct:function(e){},mountComponent:function(e,t,n){return t.getReactMountReady().enqueue(r,this),this._rootNodeID=e,s.mountComponent(this._renderedComponent,e,t,n)},receiveComponent:function(){},unmountComponent:function(e,t,n){s.unmountComponent(this._renderedComponent),a.deregisterNullComponentID(this._rootNodeID),this._rootNodeID=null,this._renderedComponent=null}}),l.injection=c,e.exports=l},function(e,t,n){(function(t){"use strict";function r(e){if("function"==typeof e.type)return e.type;var t=e.type,n=p[t];return null==n&&(p[t]=n=c(t)),n}function o(e){return l?void 0:"production"!==t.env.NODE_ENV?u(!1,"There is no registered component for the tag %s",e.type):u(!1),new l(e.type,e.props)}function i(e){return new d(e)}function a(e){return e instanceof d}var s=n(39),u=n(13),c=null,l=null,p={},d=null,f={injectGenericComponentClass:function(e){l=e},injectTextComponentClass:function(e){d=e},injectComponentClasses:function(e){s(p,e)}},h={getComponentClassForElement:r,createInternalComponent:o,createInstanceForText:i,isTextComponent:a,injection:f};e.exports=h}).call(t,n(4))},function(e,t,n){(function(t){"use strict";var r=n(39),o=n(15),i=n(25),a=o;if("production"!==t.env.NODE_ENV){var s=["address","applet","area","article","aside","base","basefont","bgsound","blockquote","body","br","button","caption","center","col","colgroup","dd","details","dir","div","dl","dt","embed","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","img","input","isindex","li","link","listing","main","marquee","menu","menuitem","meta","nav","noembed","noframes","noscript","object","ol","p","param","plaintext","pre","script","section","select","source","style","summary","table","tbody","td","template","textarea","tfoot","th","thead","title","tr","track","ul","wbr","xmp"],u=["applet","caption","html","table","td","th","marquee","object","template","foreignObject","desc","title"],c=u.concat(["button"]),l=["dd","dt","li","option","optgroup","p","rp","rt"],p={parentTag:null,formTag:null,aTagInScope:null,buttonTagInScope:null,nobrTagInScope:null,pTagInButtonScope:null,listItemTagAutoclosing:null,dlItemTagAutoclosing:null},d=function(e,t,n){var o=r({},e||p),i={tag:t,instance:n};return u.indexOf(t)!==-1&&(o.aTagInScope=null,o.buttonTagInScope=null,o.nobrTagInScope=null),c.indexOf(t)!==-1&&(o.pTagInButtonScope=null),s.indexOf(t)!==-1&&"address"!==t&&"div"!==t&&"p"!==t&&(o.listItemTagAutoclosing=null,o.dlItemTagAutoclosing=null),o.parentTag=i,"form"===t&&(o.formTag=i),"a"===t&&(o.aTagInScope=i),"button"===t&&(o.buttonTagInScope=i),"nobr"===t&&(o.nobrTagInScope=i),"p"===t&&(o.pTagInButtonScope=i),"li"===t&&(o.listItemTagAutoclosing=i),"dd"!==t&&"dt"!==t||(o.dlItemTagAutoclosing=i),o},f=function(e,t){switch(t){case"select":return"option"===e||"optgroup"===e||"#text"===e;case"optgroup":return"option"===e||"#text"===e;case"option":return"#text"===e;case"tr":return"th"===e||"td"===e||"style"===e||"script"===e||"template"===e;case"tbody":case"thead":case"tfoot":return"tr"===e||"style"===e||"script"===e||"template"===e;case"colgroup":return"col"===e||"template"===e;case"table":return"caption"===e||"colgroup"===e||"tbody"===e||"tfoot"===e||"thead"===e||"style"===e||"script"===e||"template"===e;case"head":return"base"===e||"basefont"===e||"bgsound"===e||"link"===e||"meta"===e||"title"===e||"noscript"===e||"noframes"===e||"style"===e||"script"===e||"template"===e;case"html":return"head"===e||"body"===e}switch(e){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return"h1"!==t&&"h2"!==t&&"h3"!==t&&"h4"!==t&&"h5"!==t&&"h6"!==t;case"rp":case"rt":return l.indexOf(t)===-1;case"caption":case"col":case"colgroup":case"frame":case"head":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return null==t}return!0},h=function(e,t){switch(e){case"address":case"article":case"aside":case"blockquote":case"center":case"details":case"dialog":case"dir":case"div":case"dl":case"fieldset":case"figcaption":case"figure":case"footer":case"header":case"hgroup":case"main":case"menu":case"nav":case"ol":case"p":case"section":case"summary":case"ul":case"pre":case"listing":case"table":case"hr":case"xmp":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return t.pTagInButtonScope;case"form":return t.formTag||t.pTagInButtonScope;case"li":return t.listItemTagAutoclosing;case"dd":case"dt":return t.dlItemTagAutoclosing;case"button":return t.buttonTagInScope;case"a":return t.aTagInScope;case"nobr":return t.nobrTagInScope}return null},m=function(e){if(!e)return[];var t=[];do t.push(e);while(e=e._currentElement._owner);return t.reverse(),t},v={};a=function(e,n,r){r=r||p;var o=r.parentTag,a=o&&o.tag,s=f(e,a)?null:o,u=s?null:h(e,r),c=s||u;if(c){var l,d=c.tag,g=c.instance,y=n&&n._currentElement._owner,_=g&&g._currentElement._owner,E=m(y),b=m(_),N=Math.min(E.length,b.length),w=-1;for(l=0;l<N&&E[l]===b[l];l++)w=l;var C="(unknown)",x=E.slice(w+1).map(function(e){return e.getName()||C}),D=b.slice(w+1).map(function(e){return e.getName()||C}),I=[].concat(w!==-1?E[w].getName()||C:[],D,d,u?["..."]:[],x,e).join(" > "),S=!!s+"|"+e+"|"+d+"|"+I;if(v[S])return;if(v[S]=!0,s){var O="";"table"===d&&"tr"===e&&(O+=" Add a <tbody> to your code to match the DOM tree generated by the browser."),"production"!==t.env.NODE_ENV?i(!1,"validateDOMNesting(...): <%s> cannot appear as a child of <%s>. See %s.%s",e,d,I,O):void 0}else"production"!==t.env.NODE_ENV?i(!1,"validateDOMNesting(...): <%s> cannot appear as a descendant of <%s>. See %s.",e,d,I):void 0}},a.ancestorInfoContextKey="__validateDOMNesting_ancestorInfo$"+Math.random().toString(36).slice(2),a.updatedAncestorInfo=d,a.isTagValidInContext=function(e,t){t=t||p;var n=t.parentTag,r=n&&n.tag;return f(e,r)&&!h(e,t)}}e.exports=a}).call(t,n(4))},function(e,t,n){(function(t){"use strict";function r(){if(!x&&(x=!0,g.EventEmitter.injectReactEventListener(v),g.EventPluginHub.injectEventPluginOrder(s),g.EventPluginHub.injectInstanceHandle(y),g.EventPluginHub.injectMount(_),g.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:w,EnterLeaveEventPlugin:u,ChangeEventPlugin:i,SelectEventPlugin:b,BeforeInputEventPlugin:o}),g.NativeComponent.injectGenericComponentClass(h),g.NativeComponent.injectTextComponentClass(m),g.Class.injectMixin(p),g.DOMProperty.injectDOMPropertyConfig(l),g.DOMProperty.injectDOMPropertyConfig(C),g.EmptyComponent.injectEmptyComponent("noscript"),g.Updates.injectReconcileTransaction(E),g.Updates.injectBatchingStrategy(f),g.RootIndex.injectCreateReactRootIndex(c.canUseDOM?a.createReactRootIndex:N.createReactRootIndex),g.Component.injectEnvironment(d),"production"!==t.env.NODE_ENV)){var e=c.canUseDOM&&window.location.href||"";if(/[?&]react_perf\b/.test(e)){var r=n(142);r.start()}}}var o=n(72),i=n(80),a=n(83),s=n(84),u=n(85),c=n(9),l=n(89),p=n(90),d=n(26),f=n(92),h=n(93),m=n(6),v=n(118),g=n(121),y=n(45),_=n(28),E=n(125),b=n(130),N=n(131),w=n(132),C=n(141),x=!1;e.exports={inject:r}}).call(t,n(4))},function(e,t,n){"use strict";function r(){var e=window.opera;return"object"==typeof e&&"function"==typeof e.version&&parseInt(e.version(),10)<=12}function o(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}function i(e){switch(e){case S.topCompositionStart:return O.compositionStart;case S.topCompositionEnd:return O.compositionEnd;case S.topCompositionUpdate:return O.compositionUpdate}}function a(e,t){return e===S.topKeyDown&&t.keyCode===b}function s(e,t){switch(e){case S.topKeyUp:return E.indexOf(t.keyCode)!==-1;case S.topKeyDown:return t.keyCode!==b;case S.topKeyPress:case S.topMouseDown:case S.topBlur:return!0;default:return!1}}function u(e){var t=e.detail;return"object"==typeof t&&"data"in t?t.data:null}function c(e,t,n,r,o){var c,l;if(N?c=i(e):M?s(e,r)&&(c=O.compositionEnd):a(e,r)&&(c=O.compositionStart),!c)return null;x&&(M||c!==O.compositionStart?c===O.compositionEnd&&M&&(l=M.getData()):M=v.getPooled(t));var p=g.getPooled(c,n,r,o);if(l)p.data=l;else{var d=u(r);null!==d&&(p.data=d)}return h.accumulateTwoPhaseDispatches(p),p}function l(e,t){switch(e){case S.topCompositionEnd:return u(t);case S.topKeyPress:var n=t.which;return n!==D?null:(R=!0,I);case S.topTextInput:var r=t.data;return r===I&&R?null:r;default:return null}}function p(e,t){if(M){if(e===S.topCompositionEnd||s(e,t)){var n=M.getData();return v.release(M),M=null,n}return null}switch(e){case S.topPaste:return null;case S.topKeyPress:return t.which&&!o(t)?String.fromCharCode(t.which):null;case S.topCompositionEnd:return x?null:t.data;default:return null}}function d(e,t,n,r,o){var i;if(i=C?l(e,r):p(e,r),!i)return null;var a=y.getPooled(O.beforeInput,n,r,o);return a.data=i,h.accumulateTwoPhaseDispatches(a),a}var f=n(30),h=n(73),m=n(9),v=n(74),g=n(76),y=n(78),_=n(79),E=[9,13,27,32],b=229,N=m.canUseDOM&&"CompositionEvent"in window,w=null;m.canUseDOM&&"documentMode"in document&&(w=document.documentMode);var C=m.canUseDOM&&"TextEvent"in window&&!w&&!r(),x=m.canUseDOM&&(!N||w&&w>8&&w<=11),D=32,I=String.fromCharCode(D),S=f.topLevelTypes,O={beforeInput:{phasedRegistrationNames:{bubbled:_({onBeforeInput:null}),captured:_({onBeforeInputCapture:null})},dependencies:[S.topCompositionEnd,S.topKeyPress,S.topTextInput,S.topPaste]},compositionEnd:{phasedRegistrationNames:{bubbled:_({onCompositionEnd:null}),captured:_({onCompositionEndCapture:null})},dependencies:[S.topBlur,S.topCompositionEnd,S.topKeyDown,S.topKeyPress,S.topKeyUp,S.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:_({onCompositionStart:null}),captured:_({onCompositionStartCapture:null})},dependencies:[S.topBlur,S.topCompositionStart,S.topKeyDown,S.topKeyPress,S.topKeyUp,S.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:_({onCompositionUpdate:null}),captured:_({onCompositionUpdateCapture:null})},dependencies:[S.topBlur,S.topCompositionUpdate,S.topKeyDown,S.topKeyPress,S.topKeyUp,S.topMouseDown]}},R=!1,M=null,k={eventTypes:O,extractEvents:function(e,t,n,r,o){return[c(e,t,n,r,o),d(e,t,n,r,o)]}};e.exports=k},function(e,t,n){(function(t){"use strict";function r(e,t,n){var r=t.dispatchConfig.phasedRegistrationNames[n];return _(e,r)}function o(e,n,o){"production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?m(e,"Dispatching id must not be null"):void 0);var i=n?y.bubbled:y.captured,a=r(e,o,i);a&&(o._dispatchListeners=v(o._dispatchListeners,a),o._dispatchIDs=v(o._dispatchIDs,e))}function i(e){e&&e.dispatchConfig.phasedRegistrationNames&&h.injection.getInstanceHandle().traverseTwoPhase(e.dispatchMarker,o,e)}function a(e){e&&e.dispatchConfig.phasedRegistrationNames&&h.injection.getInstanceHandle().traverseTwoPhaseSkipTarget(e.dispatchMarker,o,e)}function s(e,t,n){if(n&&n.dispatchConfig.registrationName){var r=n.dispatchConfig.registrationName,o=_(e,r);o&&(n._dispatchListeners=v(n._dispatchListeners,o),n._dispatchIDs=v(n._dispatchIDs,e))}}function u(e){e&&e.dispatchConfig.registrationName&&s(e.dispatchMarker,null,e)}function c(e){g(e,i)}function l(e){g(e,a)}function p(e,t,n,r){h.injection.getInstanceHandle().traverseEnterLeave(n,r,s,e,t)}function d(e){g(e,u)}var f=n(30),h=n(31),m=n(25),v=n(35),g=n(36),y=f.PropagationPhases,_=h.getListener,E={accumulateTwoPhaseDispatches:c,accumulateTwoPhaseDispatchesSkipTarget:l,accumulateDirectDispatches:d,accumulateEnterLeaveDispatches:p};e.exports=E}).call(t,n(4))},function(e,t,n){"use strict";function r(e){this._root=e,this._startText=this.getText(),this._fallbackText=null}var o=n(56),i=n(39),a=n(75);i(r.prototype,{destructor:function(){this._root=null,this._startText=null,this._fallbackText=null},getText:function(){return"value"in this._root?this._root.value:this._root[a()]},getData:function(){if(this._fallbackText)return this._fallbackText;var e,t,n=this._startText,r=n.length,o=this.getText(),i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===o[i-t];t++);var s=t>1?1-t:void 0;return this._fallbackText=o.slice(e,s),this._fallbackText}}),o.addPoolingTo(r),e.exports=r},function(e,t,n){"use strict";function r(){return!i&&o.canUseDOM&&(i="textContent"in document.documentElement?"textContent":"innerText"),i}var o=n(9),i=null;e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){o.call(this,e,t,n,r)}var o=n(77),i={data:null};o.augmentClass(r,i),e.exports=r},function(e,t,n){(function(t){"use strict";function r(e,t,n,r){this.dispatchConfig=e,this.dispatchMarker=t,this.nativeEvent=n;var o=this.constructor.Interface;for(var i in o)if(o.hasOwnProperty(i)){var s=o[i];s?this[i]=s(n):"target"===i?this.target=r:this[i]=n[i]}var u=null!=n.defaultPrevented?n.defaultPrevented:n.returnValue===!1;u?this.isDefaultPrevented=a.thatReturnsTrue:this.isDefaultPrevented=a.thatReturnsFalse,this.isPropagationStopped=a.thatReturnsFalse}var o=n(56),i=n(39),a=n(15),s=n(25),u={type:null,target:null,currentTarget:a.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};i(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;"production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?s(e,"This synthetic event is reused for performance reasons. If you're seeing this, you're calling `preventDefault` on a released/nullified synthetic event. This is a no-op. See https://fb.me/react-event-pooling for more information."):void 0),e&&(e.preventDefault?e.preventDefault():e.returnValue=!1,this.isDefaultPrevented=a.thatReturnsTrue)},stopPropagation:function(){var e=this.nativeEvent;"production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?s(e,"This synthetic event is reused for performance reasons. If you're seeing this, you're calling `stopPropagation` on a released/nullified synthetic event. This is a no-op. See https://fb.me/react-event-pooling for more information."):void 0),e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,this.isPropagationStopped=a.thatReturnsTrue)},persist:function(){this.isPersistent=a.thatReturnsTrue},isPersistent:a.thatReturnsFalse,destructor:function(){var e=this.constructor.Interface;for(var t in e)this[t]=null;this.dispatchConfig=null,this.dispatchMarker=null,this.nativeEvent=null}}),r.Interface=u,r.augmentClass=function(e,t){var n=this,r=Object.create(n.prototype);i(r,e.prototype),e.prototype=r,e.prototype.constructor=e,e.Interface=i({},n.Interface,t),e.augmentClass=n.augmentClass,o.addPoolingTo(e,o.fourArgumentPooler)},o.addPoolingTo(r,o.fourArgumentPooler),e.exports=r}).call(t,n(4))},function(e,t,n){"use strict";function r(e,t,n,r){o.call(this,e,t,n,r)}var o=n(77),i={data:null};o.augmentClass(r,i),e.exports=r},function(e,t){"use strict";var n=function(e){var t;for(t in e)if(e.hasOwnProperty(t))return t;return null};e.exports=n},function(e,t,n){"use strict";function r(e){var t=e.nodeName&&e.nodeName.toLowerCase();return"select"===t||"input"===t&&"file"===e.type}function o(e){var t=w.getPooled(O.change,M,e,C(e));E.accumulateTwoPhaseDispatches(t),N.batchedUpdates(i,t)}function i(e){_.enqueueEvents(e),_.processEventQueue(!1)}function a(e,t){R=e,M=t,R.attachEvent("onchange",o)}function s(){R&&(R.detachEvent("onchange",o),R=null,M=null)}function u(e,t,n){if(e===S.topChange)return n}function c(e,t,n){e===S.topFocus?(s(),a(t,n)):e===S.topBlur&&s()}function l(e,t){R=e,M=t,k=e.value,A=Object.getOwnPropertyDescriptor(e.constructor.prototype,"value"),Object.defineProperty(R,"value",V),R.attachEvent("onpropertychange",d)}function p(){R&&(delete R.value,R.detachEvent("onpropertychange",d),R=null,M=null,k=null,A=null)}function d(e){if("value"===e.propertyName){var t=e.srcElement.value;t!==k&&(k=t,o(e))}}function f(e,t,n){if(e===S.topInput)return n}function h(e,t,n){e===S.topFocus?(p(),l(t,n)):e===S.topBlur&&p()}function m(e,t,n){if((e===S.topSelectionChange||e===S.topKeyUp||e===S.topKeyDown)&&R&&R.value!==k)return k=R.value,M}function v(e){return e.nodeName&&"input"===e.nodeName.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)}function g(e,t,n){if(e===S.topClick)return n}var y=n(30),_=n(31),E=n(73),b=n(9),N=n(54),w=n(77),C=n(81),x=n(40),D=n(82),I=n(79),S=y.topLevelTypes,O={change:{phasedRegistrationNames:{bubbled:I({onChange:null}),captured:I({onChangeCapture:null})},dependencies:[S.topBlur,S.topChange,S.topClick,S.topFocus,S.topInput,S.topKeyDown,S.topKeyUp,S.topSelectionChange]}},R=null,M=null,k=null,A=null,T=!1;b.canUseDOM&&(T=x("change")&&(!("documentMode"in document)||document.documentMode>8));var P=!1;b.canUseDOM&&(P=x("input")&&(!("documentMode"in document)||document.documentMode>9));var V={get:function(){return A.get.call(this)},set:function(e){k=""+e,A.set.call(this,e)}},L={eventTypes:O,extractEvents:function(e,t,n,o,i){var a,s;if(r(t)?T?a=u:s=c:D(t)?P?a=f:(a=m,s=h):v(t)&&(a=g),a){var l=a(e,t,n);if(l){var p=w.getPooled(O.change,l,o,i);return p.type="change",E.accumulateTwoPhaseDispatches(p),p}}s&&s(e,t,n)}};e.exports=L},function(e,t){"use strict";function n(e){var t=e.target||e.srcElement||window;return 3===t.nodeType?t.parentNode:t}e.exports=n},function(e,t){"use strict";function n(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&r[e.type]||"textarea"===t)}var r={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};e.exports=n},function(e,t){"use strict";var n=0,r={createReactRootIndex:function(){return n++}};e.exports=r},function(e,t,n){"use strict";var r=n(79),o=[r({ResponderEventPlugin:null}),r({SimpleEventPlugin:null}),r({TapEventPlugin:null}),r({EnterLeaveEventPlugin:null}),r({ChangeEventPlugin:null}),r({SelectEventPlugin:null}),r({BeforeInputEventPlugin:null})];e.exports=o},function(e,t,n){"use strict";var r=n(30),o=n(73),i=n(86),a=n(28),s=n(79),u=r.topLevelTypes,c=a.getFirstReactDOM,l={mouseEnter:{registrationName:s({onMouseEnter:null}),dependencies:[u.topMouseOut,u.topMouseOver]},mouseLeave:{registrationName:s({onMouseLeave:null}),dependencies:[u.topMouseOut,u.topMouseOver]}},p=[null,null],d={eventTypes:l,extractEvents:function(e,t,n,r,s){if(e===u.topMouseOver&&(r.relatedTarget||r.fromElement))return null;if(e!==u.topMouseOut&&e!==u.topMouseOver)return null;var d;if(t.window===t)d=t;else{var f=t.ownerDocument;d=f?f.defaultView||f.parentWindow:window}var h,m,v="",g="";if(e===u.topMouseOut?(h=t,v=n,m=c(r.relatedTarget||r.toElement),m?g=a.getID(m):m=d,m=m||d):(h=d,m=t,g=n),h===m)return null;var y=i.getPooled(l.mouseLeave,v,r,s);y.type="mouseleave",y.target=h,y.relatedTarget=m;var _=i.getPooled(l.mouseEnter,g,r,s);return _.type="mouseenter",_.target=m,_.relatedTarget=h,o.accumulateEnterLeaveDispatches(y,_,v,g),p[0]=y,p[1]=_,p}};e.exports=d},function(e,t,n){"use strict";function r(e,t,n,r){o.call(this,e,t,n,r)}var o=n(87),i=n(38),a=n(88),s={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:a,button:function(e){var t=e.button;return"which"in e?t:2===t?2:4===t?1:0},buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},pageX:function(e){return"pageX"in e?e.pageX:e.clientX+i.currentScrollLeft},pageY:function(e){return"pageY"in e?e.pageY:e.clientY+i.currentScrollTop}};o.augmentClass(r,s),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){o.call(this,e,t,n,r)}var o=n(77),i=n(81),a={view:function(e){if(e.view)return e.view;var t=i(e);if(null!=t&&t.window===t)return t;var n=t.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(e){return e.detail||0}};o.augmentClass(r,a),e.exports=r},function(e,t){"use strict";function n(e){var t=this,n=t.nativeEvent;if(n.getModifierState)return n.getModifierState(e);var r=o[e];return!!r&&!!n[r]}function r(e){return n}var o={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};e.exports=r},function(e,t,n){"use strict";var r,o=n(23),i=n(9),a=o.injection.MUST_USE_ATTRIBUTE,s=o.injection.MUST_USE_PROPERTY,u=o.injection.HAS_BOOLEAN_VALUE,c=o.injection.HAS_SIDE_EFFECTS,l=o.injection.HAS_NUMERIC_VALUE,p=o.injection.HAS_POSITIVE_NUMERIC_VALUE,d=o.injection.HAS_OVERLOADED_BOOLEAN_VALUE;if(i.canUseDOM){var f=document.implementation;r=f&&f.hasFeature&&f.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}var h={isCustomAttribute:RegExp.prototype.test.bind(/^(data|aria)-[a-z_][a-z\d_.\-]*$/),Properties:{accept:null,acceptCharset:null,accessKey:null,action:null,allowFullScreen:a|u,allowTransparency:a,alt:null,async:u,autoComplete:null,autoPlay:u,capture:a|u,cellPadding:null,cellSpacing:null,charSet:a,challenge:a,checked:s|u,classID:a,className:r?a:s,cols:a|p,colSpan:null,content:null,contentEditable:null,contextMenu:a,controls:s|u,coords:null,crossOrigin:null,data:null,dateTime:a,default:u,defer:u,dir:null,disabled:a|u,download:d,draggable:null,encType:null,form:a,formAction:a,formEncType:a,formMethod:a,formNoValidate:u,formTarget:a,frameBorder:a,headers:null,height:a,hidden:a|u,high:null,href:null,hrefLang:null,htmlFor:null,httpEquiv:null,icon:null,id:s,inputMode:a,integrity:null,is:a,keyParams:a,keyType:a,kind:null,label:null,lang:null,list:a,loop:s|u,low:null,manifest:a,marginHeight:null,marginWidth:null,max:null,maxLength:a,media:a,mediaGroup:null,method:null,min:null,minLength:a,multiple:s|u,muted:s|u,name:null,nonce:a,noValidate:u,open:u,optimum:null,pattern:null,placeholder:null,poster:null,preload:null,radioGroup:null,readOnly:s|u,rel:null,required:u,reversed:u,role:a,rows:a|p,rowSpan:null,sandbox:null,scope:null,scoped:u,scrolling:null,seamless:a|u,selected:s|u,shape:null,size:a|p,sizes:a,span:p,spellCheck:null,src:null,srcDoc:s,srcLang:null,srcSet:a,start:l,step:null,style:null,summary:null,tabIndex:null,target:null,title:null,type:null,useMap:null,value:s|c,width:a,wmode:a,wrap:null,about:a,datatype:a,inlist:a,prefix:a,property:a,resource:a,typeof:a,vocab:a,autoCapitalize:a,autoCorrect:a,autoSave:null,color:null,itemProp:a,itemScope:a|u,itemType:a,itemID:a,itemRef:a,results:null,security:a,unselectable:a},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{autoComplete:"autocomplete",autoFocus:"autofocus",autoPlay:"autoplay",autoSave:"autosave",encType:"encoding",hrefLang:"hreflang",radioGroup:"radiogroup",spellCheck:"spellcheck",srcDoc:"srcdoc",srcSet:"srcset"}};e.exports=h},function(e,t,n){(function(t){"use strict";var r=n(47),o=n(91),i=n(25),a="_getDOMNodeDidWarn",s={getDOMNode:function(){return"production"!==t.env.NODE_ENV?i(this.constructor[a],"%s.getDOMNode(...) is deprecated. Please use ReactDOM.findDOMNode(instance) instead.",r.get(this).getName()||this.tagName||"Unknown"):void 0,this.constructor[a]=!0,o(this)}};e.exports=s}).call(t,n(4))},function(e,t,n){(function(t){"use strict";function r(e){if("production"!==t.env.NODE_ENV){var n=o.current;null!==n&&("production"!==t.env.NODE_ENV?u(n._warnedAboutRefsInRender,"%s is accessing getDOMNode or findDOMNode inside its render(). render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",n.getName()||"A component"):void 0,n._warnedAboutRefsInRender=!0)}return null==e?null:1===e.nodeType?e:i.has(e)?a.getNodeFromInstance(e):(null!=e.render&&"function"==typeof e.render?"production"!==t.env.NODE_ENV?s(!1,"findDOMNode was called on an unmounted component."):s(!1):void 0,void("production"!==t.env.NODE_ENV?s(!1,"Element appears to be neither ReactComponent nor DOMNode (keys: %s)",Object.keys(e)):s(!1)))}var o=n(5),i=n(47),a=n(28),s=n(13),u=n(25);e.exports=r}).call(t,n(4))},function(e,t,n){"use strict";function r(){this.reinitializeTransaction()}var o=n(54),i=n(57),a=n(39),s=n(15),u={initialize:s,close:function(){d.isBatchingUpdates=!1}},c={initialize:s,close:o.flushBatchedUpdates.bind(o)},l=[c,u];a(r.prototype,i.Mixin,{getTransactionWrappers:function(){return l}});var p=new r,d={isBatchingUpdates:!1,batchedUpdates:function(e,t,n,r,o,i){var a=d.isBatchingUpdates;d.isBatchingUpdates=!0,a?e(t,n,r,o,i):p.perform(e,null,t,n,r,o,i)}};e.exports=d},function(e,t,n){(function(t){"use strict";function r(e){if(e){var t=e._currentElement._owner||null;if(t){var n=t.getName();if(n)return" This DOM node was rendered by `"+n+"`."}}return""}function o(){if("production"!==t.env.NODE_ENV){var e=this._reactInternalComponent;"production"!==t.env.NODE_ENV?K(!1,"ReactDOMComponent: Do not access .getDOMNode() of a DOM node; instead, use the node directly.%s",r(e)):void 0}return this}function i(){var e=this._reactInternalComponent;return"production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?K(!1,"ReactDOMComponent: Do not access .isMounted() of a DOM node.%s",r(e)):void 0),!!e}function a(){if("production"!==t.env.NODE_ENV){var e=this._reactInternalComponent;"production"!==t.env.NODE_ENV?K(!1,"ReactDOMComponent: Do not access .setState(), .replaceState(), or .forceUpdate() of a DOM node. This is a no-op.%s",r(e)):void 0}}function s(e,n){var o=this._reactInternalComponent;"production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?K(!1,"ReactDOMComponent: Do not access .setProps() of a DOM node. Instead, call ReactDOM.render again at the top level.%s",r(o)):void 0),o&&(L.enqueueSetPropsInternal(o,e),n&&L.enqueueCallbackInternal(o,n))}function u(e,n){var o=this._reactInternalComponent;"production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?K(!1,"ReactDOMComponent: Do not access .replaceProps() of a DOM node. Instead, call ReactDOM.render again at the top level.%s",r(o)):void 0),o&&(L.enqueueReplacePropsInternal(o,e),n&&L.enqueueCallbackInternal(o,n))}function c(e){if("object"==typeof e){if(Array.isArray(e))return"["+e.map(c).join(", ")+"]";var t=[];for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=/^[a-z$_][\w$_]*$/i.test(n)?n:JSON.stringify(n);t.push(r+": "+c(e[n]))}return"{"+t.join(", ")+"}"}return"string"==typeof e?JSON.stringify(e):"function"==typeof e?"[function object]":String(e)}function l(e,n,r){if(null!=e&&null!=n&&!G(e,n)){var o,i=r._tag,a=r._currentElement._owner;a&&(o=a.getName());var s=o+"|"+i;re.hasOwnProperty(s)||(re[s]=!0,"production"!==t.env.NODE_ENV?K(!1,"`%s` was passed a style object that has previously been mutated. Mutating `style` is deprecated. Consider cloning it beforehand. Check the `render` %s. Previous style: %s. Mutated style: %s.",i,a?"of `"+o+"`":"using <"+i+">",c(e),c(n)):void 0)}}function p(e,n){n&&("production"!==t.env.NODE_ENV&&se[e._tag]&&("production"!==t.env.NODE_ENV?K(null==n.children&&null==n.dangerouslySetInnerHTML,"%s is a void element tag and must not have `children` or use `props.dangerouslySetInnerHTML`.%s",e._tag,e._currentElement._owner?" Check the render method of "+e._currentElement._owner.getName()+".":""):void 0),null!=n.dangerouslySetInnerHTML&&(null!=n.children?"production"!==t.env.NODE_ENV?z(!1,"Can only set one of `children` or `props.dangerouslySetInnerHTML`."):z(!1):void 0,"object"==typeof n.dangerouslySetInnerHTML&&te in n.dangerouslySetInnerHTML?void 0:"production"!==t.env.NODE_ENV?z(!1,"`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://fb.me/react-invariant-dangerously-set-inner-html for more information."):z(!1)),"production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?K(null==n.innerHTML,"Directly setting property `innerHTML` is not permitted. For more information, lookup documentation on `dangerouslySetInnerHTML`."):void 0,"production"!==t.env.NODE_ENV?K(!n.contentEditable||null==n.children,"A component is `contentEditable` and contains `children` managed by React. It is now your responsibility to guarantee that none of those nodes are unexpectedly modified or duplicated. This is probably not intentional."):void 0),null!=n.style&&"object"!=typeof n.style?"production"!==t.env.NODE_ENV?z(!1,"The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.%s",r(e)):z(!1):void 0)}function d(e,n,r,o){"production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?K("onScroll"!==n||B("scroll",!0),"This browser doesn't support the `onScroll` event"):void 0);var i=T.findReactContainerForID(e);if(i){var a=i.nodeType===ne?i.ownerDocument:i;X(n,a)}o.getReactMountReady().enqueue(f,{id:e,registrationName:n,listener:r})}function f(){var e=this;I.putListener(e.id,e.registrationName,e.listener)}function h(){var e=this;e._rootNodeID?void 0:"production"!==t.env.NODE_ENV?z(!1,"Must be mounted to trap events"):z(!1);var n=T.getNode(e._rootNodeID);switch(n?void 0:"production"!==t.env.NODE_ENV?z(!1,"trapBubbledEvent(...): Requires node to be rendered."):z(!1),e._tag){case"iframe":e._wrapperState.listeners=[I.trapBubbledEvent(D.topLevelTypes.topLoad,"load",n)];break;case"video":case"audio":e._wrapperState.listeners=[];for(var r in oe)oe.hasOwnProperty(r)&&e._wrapperState.listeners.push(I.trapBubbledEvent(D.topLevelTypes[r],oe[r],n));break;case"img":e._wrapperState.listeners=[I.trapBubbledEvent(D.topLevelTypes.topError,"error",n),I.trapBubbledEvent(D.topLevelTypes.topLoad,"load",n)];break;case"form":e._wrapperState.listeners=[I.trapBubbledEvent(D.topLevelTypes.topReset,"reset",n),I.trapBubbledEvent(D.topLevelTypes.topSubmit,"submit",n)]}}function m(){R.mountReadyWrapper(this)}function v(){k.postUpdateWrapper(this)}function g(e){le.call(ce,e)||(ue.test(e)?void 0:"production"!==t.env.NODE_ENV?z(!1,"Invalid tag: %s",e):z(!1),ce[e]=!0)}function y(e,t){e=U({},e);var n=e[Y.ancestorInfoContextKey];return e[Y.ancestorInfoContextKey]=Y.updatedAncestorInfo(n,t._tag,t),e}function _(e,t){return e.indexOf("-")>=0||null!=t.is}function E(e){g(e),this._tag=e.toLowerCase(),this._renderedChildren=null,this._previousStyle=null,this._previousStyleCopy=null,this._rootNodeID=null,this._wrapperState=null,this._topLevelWrapper=null,this._nodeWithLegacyProperties=null,"production"!==t.env.NODE_ENV&&(this._unprocessedContextDev=null,this._processedContextDev=null)}var b,N=n(94),w=n(96),C=n(23),x=n(22),D=n(30),I=n(29),S=n(26),O=n(104),R=n(105),M=n(109),k=n(112),A=n(113),T=n(28),P=n(114),V=n(18),L=n(53),U=n(39),j=n(43),F=n(21),z=n(13),B=n(40),W=n(79),H=n(19),q=n(20),G=n(117),Y=n(70),K=n(25),Z=I.deleteListener,X=I.listenTo,J=I.registrationNameModules,Q={string:!0,number:!0},$=W({children:null}),ee=W({style:null}),te=W({__html:null}),ne=1;"production"!==t.env.NODE_ENV&&(b={props:{enumerable:!1,get:function(){var e=this._reactInternalComponent;return"production"!==t.env.NODE_ENV?K(!1,"ReactDOMComponent: Do not access .props of a DOM node; instead, recreate the props as `render` did originally or read the DOM properties/attributes directly from this node (e.g., this.refs.box.className).%s",r(e)):void 0,e._currentElement.props}}});var re={},oe={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",
topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},ie={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},ae={listing:!0,pre:!0,textarea:!0},se=U({menuitem:!0},ie),ue=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,ce={},le={}.hasOwnProperty;E.displayName="ReactDOMComponent",E.Mixin={construct:function(e){this._currentElement=e},mountComponent:function(e,n,r){this._rootNodeID=e;var o=this._currentElement.props;switch(this._tag){case"iframe":case"img":case"form":case"video":case"audio":this._wrapperState={listeners:null},n.getReactMountReady().enqueue(h,this);break;case"button":o=O.getNativeProps(this,o,r);break;case"input":R.mountWrapper(this,o,r),o=R.getNativeProps(this,o,r);break;case"option":M.mountWrapper(this,o,r),o=M.getNativeProps(this,o,r);break;case"select":k.mountWrapper(this,o,r),o=k.getNativeProps(this,o,r),r=k.processChildContext(this,o,r);break;case"textarea":A.mountWrapper(this,o,r),o=A.getNativeProps(this,o,r)}p(this,o),"production"!==t.env.NODE_ENV&&r[Y.ancestorInfoContextKey]&&Y(this._tag,this,r[Y.ancestorInfoContextKey]),"production"!==t.env.NODE_ENV&&(this._unprocessedContextDev=r,this._processedContextDev=y(r,this),r=this._processedContextDev);var i;if(n.useCreateElement){var a=r[T.ownerDocumentContextKey],s=a.createElement(this._currentElement.type);x.setAttributeForID(s,this._rootNodeID),T.getID(s),this._updateDOMProperties({},o,n,s),this._createInitialChildren(n,o,r,s),i=s}else{var u=this._createOpenTagMarkupAndPutListeners(n,o),c=this._createContentMarkup(n,o,r);i=!c&&ie[this._tag]?u+"/>":u+">"+c+"</"+this._currentElement.type+">"}switch(this._tag){case"input":n.getReactMountReady().enqueue(m,this);case"button":case"select":case"textarea":o.autoFocus&&n.getReactMountReady().enqueue(N.focusDOMComponent,this)}return i},_createOpenTagMarkupAndPutListeners:function(e,n){var r="<"+this._currentElement.type;for(var o in n)if(n.hasOwnProperty(o)){var i=n[o];if(null!=i)if(J.hasOwnProperty(o))i&&d(this._rootNodeID,o,i,e);else{o===ee&&(i&&("production"!==t.env.NODE_ENV&&(this._previousStyle=i),i=this._previousStyleCopy=U({},n.style)),i=w.createMarkupForStyles(i));var a=null;null!=this._tag&&_(this._tag,n)?o!==$&&(a=x.createMarkupForCustomAttribute(o,i)):a=x.createMarkupForProperty(o,i),a&&(r+=" "+a)}}if(e.renderToStaticMarkup)return r;var s=x.createMarkupForID(this._rootNodeID);return r+" "+s},_createContentMarkup:function(e,t,n){var r="",o=t.dangerouslySetInnerHTML;if(null!=o)null!=o.__html&&(r=o.__html);else{var i=Q[typeof t.children]?t.children:null,a=null!=i?null:t.children;if(null!=i)r=F(i);else if(null!=a){var s=this.mountChildren(a,e,n);r=s.join("")}}return ae[this._tag]&&"\n"===r.charAt(0)?"\n"+r:r},_createInitialChildren:function(e,t,n,r){var o=t.dangerouslySetInnerHTML;if(null!=o)null!=o.__html&&H(r,o.__html);else{var i=Q[typeof t.children]?t.children:null,a=null!=i?null:t.children;if(null!=i)q(r,i);else if(null!=a)for(var s=this.mountChildren(a,e,n),u=0;u<s.length;u++)r.appendChild(s[u])}},receiveComponent:function(e,t,n){var r=this._currentElement;this._currentElement=e,this.updateComponent(t,r,e,n)},updateComponent:function(e,n,r,o){var i=n.props,a=this._currentElement.props;switch(this._tag){case"button":i=O.getNativeProps(this,i),a=O.getNativeProps(this,a);break;case"input":R.updateWrapper(this),i=R.getNativeProps(this,i),a=R.getNativeProps(this,a);break;case"option":i=M.getNativeProps(this,i),a=M.getNativeProps(this,a);break;case"select":i=k.getNativeProps(this,i),a=k.getNativeProps(this,a);break;case"textarea":A.updateWrapper(this),i=A.getNativeProps(this,i),a=A.getNativeProps(this,a)}"production"!==t.env.NODE_ENV&&(this._unprocessedContextDev!==o&&(this._unprocessedContextDev=o,this._processedContextDev=y(o,this)),o=this._processedContextDev),p(this,a),this._updateDOMProperties(i,a,e,null),this._updateDOMChildren(i,a,e,o),!j&&this._nodeWithLegacyProperties&&(this._nodeWithLegacyProperties.props=a),"select"===this._tag&&e.getReactMountReady().enqueue(v,this)},_updateDOMProperties:function(e,n,r,o){var i,a,s;for(i in e)if(!n.hasOwnProperty(i)&&e.hasOwnProperty(i))if(i===ee){var u=this._previousStyleCopy;for(a in u)u.hasOwnProperty(a)&&(s=s||{},s[a]="");this._previousStyleCopy=null}else J.hasOwnProperty(i)?e[i]&&Z(this._rootNodeID,i):(C.properties[i]||C.isCustomAttribute(i))&&(o||(o=T.getNode(this._rootNodeID)),x.deleteValueForProperty(o,i));for(i in n){var c=n[i],p=i===ee?this._previousStyleCopy:e[i];if(n.hasOwnProperty(i)&&c!==p)if(i===ee)if(c?("production"!==t.env.NODE_ENV&&(l(this._previousStyleCopy,this._previousStyle,this),this._previousStyle=c),c=this._previousStyleCopy=U({},c)):this._previousStyleCopy=null,p){for(a in p)!p.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(s=s||{},s[a]="");for(a in c)c.hasOwnProperty(a)&&p[a]!==c[a]&&(s=s||{},s[a]=c[a])}else s=c;else J.hasOwnProperty(i)?c?d(this._rootNodeID,i,c,r):p&&Z(this._rootNodeID,i):_(this._tag,n)?(o||(o=T.getNode(this._rootNodeID)),i===$&&(c=null),x.setValueForAttribute(o,i,c)):(C.properties[i]||C.isCustomAttribute(i))&&(o||(o=T.getNode(this._rootNodeID)),null!=c?x.setValueForProperty(o,i,c):x.deleteValueForProperty(o,i))}s&&(o||(o=T.getNode(this._rootNodeID)),w.setValueForStyles(o,s))},_updateDOMChildren:function(e,t,n,r){var o=Q[typeof e.children]?e.children:null,i=Q[typeof t.children]?t.children:null,a=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,s=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,u=null!=o?null:e.children,c=null!=i?null:t.children,l=null!=o||null!=a,p=null!=i||null!=s;null!=u&&null==c?this.updateChildren(null,n,r):l&&!p&&this.updateTextContent(""),null!=i?o!==i&&this.updateTextContent(""+i):null!=s?a!==s&&this.updateMarkup(""+s):null!=c&&this.updateChildren(c,n,r)},unmountComponent:function(){switch(this._tag){case"iframe":case"img":case"form":case"video":case"audio":var e=this._wrapperState.listeners;if(e)for(var n=0;n<e.length;n++)e[n].remove();break;case"input":R.unmountWrapper(this);break;case"html":case"head":case"body":"production"!==t.env.NODE_ENV?z(!1,"<%s> tried to unmount. Because of cross-browser quirks it is impossible to unmount some top-level components (eg <html>, <head>, and <body>) reliably and efficiently. To fix this, have a single top-level component that never unmounts render these elements.",this._tag):z(!1)}if(this.unmountChildren(),I.deleteAllListeners(this._rootNodeID),S.unmountIDFromEnvironment(this._rootNodeID),this._rootNodeID=null,this._wrapperState=null,this._nodeWithLegacyProperties){var r=this._nodeWithLegacyProperties;r._reactInternalComponent=null,this._nodeWithLegacyProperties=null}},getPublicInstance:function(){if(!this._nodeWithLegacyProperties){var e=T.getNode(this._rootNodeID);e._reactInternalComponent=this,e.getDOMNode=o,e.isMounted=i,e.setState=a,e.replaceState=a,e.forceUpdate=a,e.setProps=s,e.replaceProps=u,"production"!==t.env.NODE_ENV&&j?Object.defineProperties(e,b):e.props=this._currentElement.props,this._nodeWithLegacyProperties=e}return this._nodeWithLegacyProperties}},V.measureMethods(E,"ReactDOMComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent"}),U(E.prototype,E.Mixin,P.Mixin),e.exports=E}).call(t,n(4))},function(e,t,n){"use strict";var r=n(28),o=n(91),i=n(95),a={componentDidMount:function(){this.props.autoFocus&&i(o(this))}},s={Mixin:a,focusDOMComponent:function(){i(r.getNode(this._rootNodeID))}};e.exports=s},function(e,t){"use strict";function n(e){try{e.focus()}catch(e){}}e.exports=n},function(e,t,n){(function(t){"use strict";var r=n(97),o=n(9),i=n(18),a=n(98),s=n(100),u=n(101),c=n(103),l=n(25),p=c(function(e){return u(e)}),d=!1,f="cssFloat";if(o.canUseDOM){var h=document.createElement("div").style;try{h.font=""}catch(e){d=!0}void 0===document.documentElement.style.cssFloat&&(f="styleFloat")}if("production"!==t.env.NODE_ENV)var m=/^(?:webkit|moz|o)[A-Z]/,v=/;\s*$/,g={},y={},_=function(e){g.hasOwnProperty(e)&&g[e]||(g[e]=!0,"production"!==t.env.NODE_ENV?l(!1,"Unsupported style property %s. Did you mean %s?",e,a(e)):void 0)},E=function(e){g.hasOwnProperty(e)&&g[e]||(g[e]=!0,"production"!==t.env.NODE_ENV?l(!1,"Unsupported vendor-prefixed style property %s. Did you mean %s?",e,e.charAt(0).toUpperCase()+e.slice(1)):void 0)},b=function(e,n){y.hasOwnProperty(n)&&y[n]||(y[n]=!0,"production"!==t.env.NODE_ENV?l(!1,'Style property values shouldn\'t contain a semicolon. Try "%s: %s" instead.',e,n.replace(v,"")):void 0)},N=function(e,t){e.indexOf("-")>-1?_(e):m.test(e)?E(e):v.test(t)&&b(e,t)};var w={createMarkupForStyles:function(e){var n="";for(var r in e)if(e.hasOwnProperty(r)){var o=e[r];"production"!==t.env.NODE_ENV&&N(r,o),null!=o&&(n+=p(r)+":",n+=s(r,o)+";")}return n||null},setValueForStyles:function(e,n){var o=e.style;for(var i in n)if(n.hasOwnProperty(i)){"production"!==t.env.NODE_ENV&&N(i,n[i]);var a=s(i,n[i]);if("float"===i&&(i=f),a)o[i]=a;else{var u=d&&r.shorthandPropertyExpansions[i];if(u)for(var c in u)o[c]="";else o[i]=""}}}};i.measureMethods(w,"CSSPropertyOperations",{setValueForStyles:"setValueForStyles"}),e.exports=w}).call(t,n(4))},function(e,t){"use strict";function n(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}var r={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0},o=["Webkit","ms","Moz","O"];Object.keys(r).forEach(function(e){o.forEach(function(t){r[n(t,e)]=r[e]})});var i={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},a={isUnitlessNumber:r,shorthandPropertyExpansions:i};e.exports=a},function(e,t,n){"use strict";function r(e){return o(e.replace(i,"ms-"))}var o=n(99),i=/^-ms-/;e.exports=r},function(e,t){"use strict";function n(e){return e.replace(r,function(e,t){return t.toUpperCase()})}var r=/-(.)/g;e.exports=n},function(e,t,n){"use strict";function r(e,t){var n=null==t||"boolean"==typeof t||""===t;if(n)return"";var r=isNaN(t);return r||0===t||i.hasOwnProperty(e)&&i[e]?""+t:("string"==typeof t&&(t=t.trim()),t+"px")}var o=n(97),i=o.isUnitlessNumber;e.exports=r},function(e,t,n){"use strict";function r(e){return o(e).replace(i,"-ms-")}var o=n(102),i=/^ms-/;e.exports=r},function(e,t){"use strict";function n(e){return e.replace(r,"-$1").toLowerCase()}var r=/([A-Z])/g;e.exports=n},function(e,t){"use strict";function n(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}e.exports=n},function(e,t){"use strict";var n={onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0},r={getNativeProps:function(e,t,r){if(!t.disabled)return t;var o={};for(var i in t)t.hasOwnProperty(i)&&!n[i]&&(o[i]=t[i]);return o}};e.exports=r},function(e,t,n){(function(t){"use strict";function r(){this._rootNodeID&&d.updateWrapper(this)}function o(e){var n=this._currentElement.props,o=a.executeOnChange(n,e);u.asap(r,this);var i=n.name;if("radio"===n.type&&null!=i){for(var c=s.getNode(this._rootNodeID),d=c;d.parentNode;)d=d.parentNode;for(var f=d.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),h=0;h<f.length;h++){var m=f[h];if(m!==c&&m.form===c.form){var v=s.getID(m);v?void 0:"production"!==t.env.NODE_ENV?l(!1,"ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported."):l(!1);var g=p[v];g?void 0:"production"!==t.env.NODE_ENV?l(!1,"ReactDOMInput: Unknown radio button ID %s.",v):l(!1),u.asap(r,g)}}}return o}var i=n(27),a=n(106),s=n(28),u=n(54),c=n(39),l=n(13),p={},d={getNativeProps:function(e,t,n){var r=a.getValue(t),o=a.getChecked(t),i=c({},t,{defaultChecked:void 0,defaultValue:void 0,value:null!=r?r:e._wrapperState.initialValue,checked:null!=o?o:e._wrapperState.initialChecked,onChange:e._wrapperState.onChange});return i},mountWrapper:function(e,n){"production"!==t.env.NODE_ENV&&a.checkPropTypes("input",n,e._currentElement._owner);var r=n.defaultValue;e._wrapperState={initialChecked:n.defaultChecked||!1,initialValue:null!=r?r:null,onChange:o.bind(e)}},mountReadyWrapper:function(e){p[e._rootNodeID]=e},unmountWrapper:function(e){delete p[e._rootNodeID]},updateWrapper:function(e){var t=e._currentElement.props,n=t.checked;null!=n&&i.updatePropertyByID(e._rootNodeID,"checked",n||!1);var r=a.getValue(t);null!=r&&i.updatePropertyByID(e._rootNodeID,"value",""+r)}};e.exports=d}).call(t,n(4))},function(e,t,n){(function(t){"use strict";function r(e){null!=e.checkedLink&&null!=e.valueLink?"production"!==t.env.NODE_ENV?c(!1,"Cannot provide a checkedLink and a valueLink. If you want to use checkedLink, you probably don't want to use valueLink and vice versa."):c(!1):void 0}function o(e){r(e),null!=e.value||null!=e.onChange?"production"!==t.env.NODE_ENV?c(!1,"Cannot provide a valueLink and a value or onChange event. If you want to use value or onChange, you probably don't want to use valueLink."):c(!1):void 0}function i(e){r(e),null!=e.checked||null!=e.onChange?"production"!==t.env.NODE_ENV?c(!1,"Cannot provide a checkedLink and a checked property or onChange event. If you want to use checked or onChange, you probably don't want to use checkedLink"):c(!1):void 0}function a(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}var s=n(107),u=n(65),c=n(13),l=n(25),p={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0},d={value:function(e,t,n){return!e[t]||p[e.type]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,t,n){return!e[t]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:s.func},f={},h={checkPropTypes:function(e,n,r){for(var o in d){if(d.hasOwnProperty(o))var i=d[o](n,o,e,u.prop,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");if(i instanceof Error&&!(i.message in f)){f[i.message]=!0;var s=a(r);"production"!==t.env.NODE_ENV?l(!1,"Failed form propType: %s%s",i.message,s):void 0}}},getValue:function(e){return e.valueLink?(o(e),e.valueLink.value):e.value},getChecked:function(e){return e.checkedLink?(i(e),e.checkedLink.value):e.checked},executeOnChange:function(e,t){return e.valueLink?(o(e),e.valueLink.requestChange(t.target.value)):e.checkedLink?(i(e),e.checkedLink.requestChange(t.target.checked)):e.onChange?e.onChange.call(void 0,t):void 0}};e.exports=h}).call(t,n(4))},function(e,t,n){"use strict";function r(e){function t(t,n,r,o,i,a){if(o=o||N,a=a||r,null==n[r]){var s=_[i];return t?new Error("Required "+s+" `"+a+"` was not specified in "+("`"+o+"`.")):null}return e(n,r,o,i,a)}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function o(e){function t(t,n,r,o,i){var a=t[n],s=m(a);if(s!==e){var u=_[o],c=v(a);return new Error("Invalid "+u+" `"+i+"` of type "+("`"+c+"` supplied to `"+r+"`, expected ")+("`"+e+"`."))}return null}return r(t)}function i(){return r(E.thatReturns(null))}function a(e){function t(t,n,r,o,i){var a=t[n];if(!Array.isArray(a)){var s=_[o],u=m(a);return new Error("Invalid "+s+" `"+i+"` of type "+("`"+u+"` supplied to `"+r+"`, expected an array."))}for(var c=0;c<a.length;c++){var l=e(a,c,r,o,i+"["+c+"]","SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");if(l instanceof Error)return l}return null}return r(t)}function s(){function e(e,t,n,r,o){if(!y.isValidElement(e[t])){var i=_[r];return new Error("Invalid "+i+" `"+o+"` supplied to "+("`"+n+"`, expected a single ReactElement."))}return null}return r(e)}function u(e){function t(t,n,r,o,i){if(!(t[n]instanceof e)){var a=_[o],s=e.name||N,u=g(t[n]);return new Error("Invalid "+a+" `"+i+"` of type "+("`"+u+"` supplied to `"+r+"`, expected ")+("instance of `"+s+"`."))}return null}return r(t)}function c(e){function t(t,n,r,o,i){for(var a=t[n],s=0;s<e.length;s++)if(a===e[s])return null;var u=_[o],c=JSON.stringify(e);return new Error("Invalid "+u+" `"+i+"` of value `"+a+"` "+("supplied to `"+r+"`, expected one of "+c+"."))}return r(Array.isArray(e)?t:function(){return new Error("Invalid argument supplied to oneOf, expected an instance of array.")})}function l(e){function t(t,n,r,o,i){var a=t[n],s=m(a);if("object"!==s){var u=_[o];return new Error("Invalid "+u+" `"+i+"` of type "+("`"+s+"` supplied to `"+r+"`, expected an object."))}for(var c in a)if(a.hasOwnProperty(c)){var l=e(a,c,r,o,i+"."+c,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");if(l instanceof Error)return l}return null}return r(t)}function p(e){function t(t,n,r,o,i){for(var a=0;a<e.length;a++){var s=e[a];if(null==s(t,n,r,o,i,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"))return null}var u=_[o];return new Error("Invalid "+u+" `"+i+"` supplied to "+("`"+r+"`."))}return r(Array.isArray(e)?t:function(){return new Error("Invalid argument supplied to oneOfType, expected an instance of array.")})}function d(){function e(e,t,n,r,o){if(!h(e[t])){var i=_[r];return new Error("Invalid "+i+" `"+o+"` supplied to "+("`"+n+"`, expected a ReactNode."))}return null}return r(e)}function f(e){function t(t,n,r,o,i){var a=t[n],s=m(a);if("object"!==s){var u=_[o];return new Error("Invalid "+u+" `"+i+"` of type `"+s+"` "+("supplied to `"+r+"`, expected `object`."))}for(var c in e){var l=e[c];if(l){var p=l(a,c,r,o,i+"."+c,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");if(p)return p}}return null}return r(t)}function h(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(h);if(null===e||y.isValidElement(e))return!0;var t=b(e);if(!t)return!1;var n,r=t.call(e);if(t!==e.entries){for(;!(n=r.next()).done;)if(!h(n.value))return!1}else for(;!(n=r.next()).done;){var o=n.value;if(o&&!h(o[1]))return!1}return!0;default:return!1}}function m(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":t}function v(e){var t=m(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function g(e){return e.constructor&&e.constructor.name?e.constructor.name:"<<anonymous>>"}var y=n(42),_=n(66),E=n(15),b=n(108),N="<<anonymous>>",w={array:o("array"),bool:o("boolean"),func:o("function"),number:o("number"),object:o("object"),string:o("string"),any:i(),arrayOf:a,element:s(),instanceOf:u,node:d(),objectOf:l,oneOf:c,oneOfType:p,shape:f};e.exports=w},function(e,t){"use strict";function n(e){var t=e&&(r&&e[r]||e[o]);if("function"==typeof t)return t}var r="function"==typeof Symbol&&Symbol.iterator,o="@@iterator";e.exports=n},function(e,t,n){(function(t){"use strict";var r=n(110),o=n(112),i=n(39),a=n(25),s=o.valueContextKey,u={mountWrapper:function(e,n,r){"production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?a(null==n.selected,"Use the `defaultValue` or `value` props on <select> instead of setting `selected` on <option>."):void 0);var o=r[s],i=null;if(null!=o)if(i=!1,Array.isArray(o)){for(var u=0;u<o.length;u++)if(""+o[u]==""+n.value){i=!0;break}}else i=""+o==""+n.value;e._wrapperState={selected:i}},getNativeProps:function(e,n,o){var s=i({selected:void 0,children:void 0},n);null!=e._wrapperState.selected&&(s.selected=e._wrapperState.selected);var u="";return r.forEach(n.children,function(e){null!=e&&("string"==typeof e||"number"==typeof e?u+=e:"production"!==t.env.NODE_ENV?a(!1,"Only strings and numbers are supported as <option> children."):void 0)}),u&&(s.children=u),s}};e.exports=u}).call(t,n(4))},function(e,t,n){"use strict";function r(e){return(""+e).replace(E,"//")}function o(e,t){this.func=e,this.context=t,this.count=0}function i(e,t,n){var r=e.func,o=e.context;r.call(o,t,e.count++)}function a(e,t,n){if(null==e)return e;var r=o.getPooled(t,n);g(e,i,r),o.release(r)}function s(e,t,n,r){this.result=e,this.keyPrefix=t,this.func=n,this.context=r,this.count=0}function u(e,t,n){var o=e.result,i=e.keyPrefix,a=e.func,s=e.context,u=a.call(s,t,e.count++);Array.isArray(u)?c(u,o,n,v.thatReturnsArgument):null!=u&&(m.isValidElement(u)&&(u=m.cloneAndReplaceKey(u,i+(u!==t?r(u.key||"")+"/":"")+n)),o.push(u))}function c(e,t,n,o,i){var a="";null!=n&&(a=r(n)+"/");var c=s.getPooled(t,a,o,i);g(e,u,c),s.release(c)}function l(e,t,n){if(null==e)return e;var r=[];return c(e,r,null,t,n),r}function p(e,t,n){return null}function d(e,t){return g(e,p,null)}function f(e){var t=[];return c(e,t,null,v.thatReturnsArgument),t}var h=n(56),m=n(42),v=n(15),g=n(111),y=h.twoArgumentPooler,_=h.fourArgumentPooler,E=/\/(?!\/)/g;o.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},h.addPoolingTo(o,y),s.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},h.addPoolingTo(s,_);var b={forEach:a,map:l,mapIntoWithKeyPrefixInternal:c,count:d,toArray:f};e.exports=b},function(e,t,n){(function(t){"use strict";function r(e){return g[e]}function o(e,t){return e&&null!=e.key?a(e.key):t.toString(36)}function i(e){return(""+e).replace(y,r)}function a(e){return"$"+i(e)}function s(e,n,r,i){var u=typeof e;if("undefined"!==u&&"boolean"!==u||(e=null),null===e||"string"===u||"number"===u||l.isValidElement(e))return r(i,e,""===n?m+o(e,0):n),1;var p,g,y=0,E=""===n?m:n+v;if(Array.isArray(e))for(var b=0;b<e.length;b++)p=e[b],g=E+o(p,b),y+=s(p,g,r,i);else{var N=d(e);if(N){var w,C=N.call(e);if(N!==e.entries)for(var x=0;!(w=C.next()).done;)p=w.value,g=E+o(p,x++),y+=s(p,g,r,i);else for("production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?h(_,"Using Maps as children is not yet fully supported. It is an experimental feature that might be removed. Convert it to a sequence / iterable of keyed ReactElements instead."):void 0,_=!0);!(w=C.next()).done;){var D=w.value;D&&(p=D[1],g=E+a(D[0])+v+o(p,0),y+=s(p,g,r,i))}}else if("object"===u){var I="";if("production"!==t.env.NODE_ENV&&(I=" If you meant to render a collection of children, use an array instead or wrap the object using createFragment(object) from the React add-ons.",e._isReactElement&&(I=" It looks like you're using an element created by a different version of React. Make sure to use only one copy of React."),c.current)){var S=c.current.getName();S&&(I+=" Check the render method of `"+S+"`.")}var O=String(e);"production"!==t.env.NODE_ENV?f(!1,"Objects are not valid as a React child (found: %s).%s","[object Object]"===O?"object with keys {"+Object.keys(e).join(", ")+"}":O,I):f(!1)}}return y}function u(e,t,n){return null==e?0:s(e,"",t,n)}var c=n(5),l=n(42),p=n(45),d=n(108),f=n(13),h=n(25),m=p.SEPARATOR,v=":",g={"=":"=0",".":"=1",":":"=2"},y=/[=.:]/g,_=!1;e.exports=u}).call(t,n(4))},function(e,t,n){(function(t){"use strict";function r(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var e=this._currentElement.props,t=u.getValue(e);null!=t&&a(this,Boolean(e.multiple),t)}}function o(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}function i(e,n){var r=e._currentElement._owner;u.checkPropTypes("select",n,r);for(var i=0;i<h.length;i++){var a=h[i];null!=n[a]&&(n.multiple?"production"!==t.env.NODE_ENV?d(Array.isArray(n[a]),"The `%s` prop supplied to <select> must be an array if `multiple` is true.%s",a,o(r)):void 0:"production"!==t.env.NODE_ENV?d(!Array.isArray(n[a]),"The `%s` prop supplied to <select> must be a scalar value if `multiple` is false.%s",a,o(r)):void 0)}}function a(e,t,n){var r,o,i=c.getNode(e._rootNodeID).options;if(t){for(r={},o=0;o<n.length;o++)r[""+n[o]]=!0;for(o=0;o<i.length;o++){var a=r.hasOwnProperty(i[o].value);i[o].selected!==a&&(i[o].selected=a)}}else{for(r=""+n,o=0;o<i.length;o++)if(i[o].value===r)return void(i[o].selected=!0);i.length&&(i[0].selected=!0)}}function s(e){var t=this._currentElement.props,n=u.executeOnChange(t,e);return this._wrapperState.pendingUpdate=!0,l.asap(r,this),n}var u=n(106),c=n(28),l=n(54),p=n(39),d=n(25),f="__ReactDOMSelect_value$"+Math.random().toString(36).slice(2),h=["value","defaultValue"],m={valueContextKey:f,getNativeProps:function(e,t,n){return p({},t,{onChange:e._wrapperState.onChange,value:void 0})},mountWrapper:function(e,n){"production"!==t.env.NODE_ENV&&i(e,n);var r=u.getValue(n);e._wrapperState={pendingUpdate:!1,initialValue:null!=r?r:n.defaultValue,onChange:s.bind(e),wasMultiple:Boolean(n.multiple)}},processChildContext:function(e,t,n){var r=p({},n);return r[f]=e._wrapperState.initialValue,r},postUpdateWrapper:function(e){var t=e._currentElement.props;e._wrapperState.initialValue=void 0;var n=e._wrapperState.wasMultiple;e._wrapperState.wasMultiple=Boolean(t.multiple);var r=u.getValue(t);null!=r?(e._wrapperState.pendingUpdate=!1,a(e,Boolean(t.multiple),r)):n!==Boolean(t.multiple)&&(null!=t.defaultValue?a(e,Boolean(t.multiple),t.defaultValue):a(e,Boolean(t.multiple),t.multiple?[]:""))}};e.exports=m}).call(t,n(4))},function(e,t,n){(function(t){"use strict";function r(){this._rootNodeID&&p.updateWrapper(this)}function o(e){var t=this._currentElement.props,n=i.executeOnChange(t,e);return s.asap(r,this),n}var i=n(106),a=n(27),s=n(54),u=n(39),c=n(13),l=n(25),p={getNativeProps:function(e,n,r){null!=n.dangerouslySetInnerHTML?"production"!==t.env.NODE_ENV?c(!1,"`dangerouslySetInnerHTML` does not make sense on <textarea>."):c(!1):void 0;var o=u({},n,{defaultValue:void 0,value:void 0,children:e._wrapperState.initialValue,onChange:e._wrapperState.onChange});return o},mountWrapper:function(e,n){"production"!==t.env.NODE_ENV&&i.checkPropTypes("textarea",n,e._currentElement._owner);var r=n.defaultValue,a=n.children;null!=a&&("production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?l(!1,"Use the `defaultValue` or `value` props instead of setting children on <textarea>."):void 0),null!=r?"production"!==t.env.NODE_ENV?c(!1,"If you supply `defaultValue` on a <textarea>, do not pass children."):c(!1):void 0,Array.isArray(a)&&(a.length<=1?void 0:"production"!==t.env.NODE_ENV?c(!1,"<textarea> can only have at most one child."):c(!1),a=a[0]),r=""+a),null==r&&(r="");var s=i.getValue(n);e._wrapperState={initialValue:""+(null!=s?s:r),onChange:o.bind(e)}},updateWrapper:function(e){var t=e._currentElement.props,n=i.getValue(t);null!=n&&a.updatePropertyByID(e._rootNodeID,"value",""+n)}};e.exports=p}).call(t,n(4))},function(e,t,n){(function(t){"use strict";function r(e,t,n){g.push({parentID:e,parentNode:null,type:p.INSERT_MARKUP,markupIndex:y.push(t)-1,content:null,fromIndex:null,toIndex:n})}function o(e,t,n){g.push({parentID:e,parentNode:null,type:p.MOVE_EXISTING,markupIndex:null,content:null,fromIndex:t,toIndex:n})}function i(e,t){g.push({parentID:e,parentNode:null,type:p.REMOVE_NODE,markupIndex:null,content:null,fromIndex:t,toIndex:null})}function a(e,t){g.push({parentID:e,parentNode:null,type:p.SET_MARKUP,markupIndex:null,content:t,fromIndex:null,toIndex:null})}function s(e,t){g.push({parentID:e,parentNode:null,type:p.TEXT_CONTENT,markupIndex:null,content:t,fromIndex:null,toIndex:null})}function u(){g.length&&(l.processChildrenUpdates(g,y),c())}function c(){g.length=0,y.length=0}var l=n(64),p=n(16),d=n(5),f=n(50),h=n(115),m=n(116),v=0,g=[],y=[],_={Mixin:{_reconcilerInstantiateChildren:function(e,n,r){if("production"!==t.env.NODE_ENV&&this._currentElement)try{return d.current=this._currentElement._owner,h.instantiateChildren(e,n,r)}finally{d.current=null}return h.instantiateChildren(e,n,r)},_reconcilerUpdateChildren:function(e,n,r,o){var i;if("production"!==t.env.NODE_ENV&&this._currentElement){try{d.current=this._currentElement._owner,i=m(n)}finally{d.current=null}return h.updateChildren(e,i,r,o)}return i=m(n),h.updateChildren(e,i,r,o)},mountChildren:function(e,t,n){var r=this._reconcilerInstantiateChildren(e,t,n);this._renderedChildren=r;var o=[],i=0;for(var a in r)if(r.hasOwnProperty(a)){var s=r[a],u=this._rootNodeID+a,c=f.mountComponent(s,u,t,n);s._mountIndex=i++,o.push(c)}return o},updateTextContent:function(e){v++;var t=!0;try{var n=this._renderedChildren;h.unmountChildren(n);for(var r in n)n.hasOwnProperty(r)&&this._unmountChild(n[r]);this.setTextContent(e),t=!1}finally{v--,v||(t?c():u())}},updateMarkup:function(e){v++;var t=!0;try{var n=this._renderedChildren;h.unmountChildren(n);for(var r in n)n.hasOwnProperty(r)&&this._unmountChildByName(n[r],r);this.setMarkup(e),t=!1}finally{v--,v||(t?c():u())}},updateChildren:function(e,t,n){v++;var r=!0;try{this._updateChildren(e,t,n),r=!1}finally{v--,v||(r?c():u())}},_updateChildren:function(e,t,n){var r=this._renderedChildren,o=this._reconcilerUpdateChildren(r,e,t,n);if(this._renderedChildren=o,o||r){var i,a=0,s=0;for(i in o)if(o.hasOwnProperty(i)){var u=r&&r[i],c=o[i];u===c?(this.moveChild(u,s,a),a=Math.max(u._mountIndex,a),u._mountIndex=s):(u&&(a=Math.max(u._mountIndex,a),this._unmountChild(u)),this._mountChildByNameAtIndex(c,i,s,t,n)),s++}for(i in r)!r.hasOwnProperty(i)||o&&o.hasOwnProperty(i)||this._unmountChild(r[i])}},unmountChildren:function(){var e=this._renderedChildren;h.unmountChildren(e),this._renderedChildren=null},moveChild:function(e,t,n){e._mountIndex<n&&o(this._rootNodeID,e._mountIndex,t)},createChild:function(e,t){r(this._rootNodeID,t,e._mountIndex)},removeChild:function(e){i(this._rootNodeID,e._mountIndex)},setTextContent:function(e){s(this._rootNodeID,e)},setMarkup:function(e){a(this._rootNodeID,e)},_mountChildByNameAtIndex:function(e,t,n,r,o){var i=this._rootNodeID+t,a=f.mountComponent(e,i,r,o);e._mountIndex=n,this.createChild(e,a)},_unmountChild:function(e){this.removeChild(e),e._mountIndex=null}}};e.exports=_}).call(t,n(4))},function(e,t,n){(function(t){"use strict";function r(e,n,r){var o=void 0===e[r];"production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?u(o,"flattenChildren(...): Encountered two children with the same key, `%s`. Child keys must be unique; when two children share a key, only the first child will be used.",r):void 0),null!=n&&o&&(e[r]=i(n,null))}var o=n(50),i=n(62),a=n(67),s=n(111),u=n(25),c={instantiateChildren:function(e,t,n){if(null==e)return null;var o={};return s(e,r,o),o},updateChildren:function(e,t,n,r){if(!t&&!e)return null;var s;for(s in t)if(t.hasOwnProperty(s)){var u=e&&e[s],c=u&&u._currentElement,l=t[s];if(null!=u&&a(c,l))o.receiveComponent(u,l,n,r),t[s]=u;else{u&&o.unmountComponent(u,s);var p=i(l,null);t[s]=p}}for(s in e)!e.hasOwnProperty(s)||t&&t.hasOwnProperty(s)||o.unmountComponent(e[s]);return t},unmountChildren:function(e){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];o.unmountComponent(n)}}};e.exports=c}).call(t,n(4))},function(e,t,n){(function(t){"use strict";function r(e,n,r){var o=e,i=void 0===o[r];"production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?a(i,"flattenChildren(...): Encountered two children with the same key, `%s`. Child keys must be unique; when two children share a key, only the first child will be used.",r):void 0),i&&null!=n&&(o[r]=n)}function o(e){if(null==e)return e;var t={};return i(e,r,t),t}var i=n(111),a=n(25);
e.exports=o}).call(t,n(4))},function(e,t){"use strict";function n(e,t){if(e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(var i=r.bind(t),a=0;a<n.length;a++)if(!i(n[a])||e[n[a]]!==t[n[a]])return!1;return!0}var r=Object.prototype.hasOwnProperty;e.exports=n},function(e,t,n){"use strict";function r(e){var t=d.getID(e),n=p.getReactRootIDFromNodeID(t),r=d.findReactContainerForID(n),o=d.getFirstReactDOM(r);return o}function o(e,t){this.topLevelType=e,this.nativeEvent=t,this.ancestors=[]}function i(e){a(e)}function a(e){for(var t=d.getFirstReactDOM(m(e.nativeEvent))||window,n=t;n;)e.ancestors.push(n),n=r(n);for(var o=0;o<e.ancestors.length;o++){t=e.ancestors[o];var i=d.getID(t)||"";g._handleTopLevel(e.topLevelType,t,i,e.nativeEvent,m(e.nativeEvent))}}function s(e){var t=v(window);e(t)}var u=n(119),c=n(9),l=n(56),p=n(45),d=n(28),f=n(54),h=n(39),m=n(81),v=n(120);h(o.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),l.addPoolingTo(o,l.twoArgumentPooler);var g={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:c.canUseDOM?window:null,setHandleTopLevel:function(e){g._handleTopLevel=e},setEnabled:function(e){g._enabled=!!e},isEnabled:function(){return g._enabled},trapBubbledEvent:function(e,t,n){var r=n;return r?u.listen(r,t,g.dispatchEvent.bind(null,e)):null},trapCapturedEvent:function(e,t,n){var r=n;return r?u.capture(r,t,g.dispatchEvent.bind(null,e)):null},monitorScrollValue:function(e){var t=s.bind(null,e);u.listen(window,"scroll",t)},dispatchEvent:function(e,t){if(g._enabled){var n=o.getPooled(e,t);try{f.batchedUpdates(i,n)}finally{o.release(n)}}}};e.exports=g},function(e,t,n){(function(t){"use strict";var r=n(15),o={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,n,o){return e.addEventListener?(e.addEventListener(n,o,!0),{remove:function(){e.removeEventListener(n,o,!0)}}):("production"!==t.env.NODE_ENV&&console.error("Attempted to listen to events during the capture phase on a browser that does not support the capture phase. Your application will not receive some events."),{remove:r})},registerDefault:function(){}};e.exports=o}).call(t,n(4))},function(e,t){"use strict";function n(e){return e===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}e.exports=n},function(e,t,n){"use strict";var r=n(23),o=n(31),i=n(64),a=n(122),s=n(68),u=n(29),c=n(69),l=n(18),p=n(46),d=n(54),f={Component:i.injection,Class:a.injection,DOMProperty:r.injection,EmptyComponent:s.injection,EventPluginHub:o.injection,EventEmitter:u.injection,NativeComponent:c.injection,Perf:l.injection,RootIndex:p.injection,Updates:d.injection};e.exports=f},function(e,t,n){(function(t){"use strict";function r(){I||(I=!0,"production"!==t.env.NODE_ENV?w(!1,"setProps(...) and replaceProps(...) are deprecated. Instead, call render again at the top level."):void 0)}function o(e,n,r){for(var o in n)n.hasOwnProperty(o)&&("production"!==t.env.NODE_ENV?w("function"==typeof n[o],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",e.displayName||"ReactClass",v[r],o):void 0)}function i(e,n){var r=S.hasOwnProperty(n)?S[n]:null;R.hasOwnProperty(n)&&(r!==x.OVERRIDE_BASE?"production"!==t.env.NODE_ENV?E(!1,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",n):E(!1):void 0),e.hasOwnProperty(n)&&(r!==x.DEFINE_MANY&&r!==x.DEFINE_MANY_MERGED?"production"!==t.env.NODE_ENV?E(!1,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",n):E(!1):void 0)}function a(e,n){if(n){"function"==typeof n?"production"!==t.env.NODE_ENV?E(!1,"ReactClass: You're attempting to use a component class as a mixin. Instead, just use a regular object."):E(!1):void 0,h.isValidElement(n)?"production"!==t.env.NODE_ENV?E(!1,"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object."):E(!1):void 0;var r=e.prototype;n.hasOwnProperty(C)&&O.mixins(e,n.mixins);for(var o in n)if(n.hasOwnProperty(o)&&o!==C){var a=n[o];if(i(r,o),O.hasOwnProperty(o))O[o](e,a);else{var s=S.hasOwnProperty(o),u=r.hasOwnProperty(o),p="function"==typeof a,d=p&&!s&&!u&&n.autobind!==!1;if(d)r.__reactAutoBindMap||(r.__reactAutoBindMap={}),r.__reactAutoBindMap[o]=a,r[o]=a;else if(u){var f=S[o];!s||f!==x.DEFINE_MANY_MERGED&&f!==x.DEFINE_MANY?"production"!==t.env.NODE_ENV?E(!1,"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",f,o):E(!1):void 0,f===x.DEFINE_MANY_MERGED?r[o]=c(r[o],a):f===x.DEFINE_MANY&&(r[o]=l(r[o],a))}else r[o]=a,"production"!==t.env.NODE_ENV&&"function"==typeof a&&n.displayName&&(r[o].displayName=n.displayName+"_"+o)}}}}function s(e,n){if(n)for(var r in n){var o=n[r];if(n.hasOwnProperty(r)){var i=r in O;i?"production"!==t.env.NODE_ENV?E(!1,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',r):E(!1):void 0;var a=r in e;a?"production"!==t.env.NODE_ENV?E(!1,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",r):E(!1):void 0,e[r]=o}}}function u(e,n){e&&n&&"object"==typeof e&&"object"==typeof n?void 0:"production"!==t.env.NODE_ENV?E(!1,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects."):E(!1);for(var r in n)n.hasOwnProperty(r)&&(void 0!==e[r]?"production"!==t.env.NODE_ENV?E(!1,"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",r):E(!1):void 0,e[r]=n[r]);return e}function c(e,t){return function(){var n=e.apply(this,arguments),r=t.apply(this,arguments);if(null==n)return r;if(null==r)return n;var o={};return u(o,n),u(o,r),o}}function l(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function p(e,n){var r=n.bind(e);if("production"!==t.env.NODE_ENV){r.__reactBoundContext=e,r.__reactBoundMethod=n,r.__reactBoundArguments=null;var o=e.constructor.displayName,i=r.bind;r.bind=function(a){for(var s=arguments.length,u=Array(s>1?s-1:0),c=1;c<s;c++)u[c-1]=arguments[c];if(a!==e&&null!==a)"production"!==t.env.NODE_ENV?w(!1,"bind(): React component methods may only be bound to the component instance. See %s",o):void 0;else if(!u.length)return"production"!==t.env.NODE_ENV?w(!1,"bind(): You are binding a component method to the component. React does this for you automatically in a high-performance way, so you can safely remove this call. See %s",o):void 0,r;var l=i.apply(r,arguments);return l.__reactBoundContext=e,l.__reactBoundMethod=n,l.__reactBoundArguments=u,l}}return r}function d(e){for(var t in e.__reactAutoBindMap)if(e.__reactAutoBindMap.hasOwnProperty(t)){var n=e.__reactAutoBindMap[t];e[t]=p(e,n)}}var f=n(123),h=n(42),m=n(65),v=n(66),g=n(124),y=n(39),_=n(58),E=n(13),b=n(17),N=n(79),w=n(25),C=N({mixins:null}),x=b({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),D=[],I=!1,S={mixins:x.DEFINE_MANY,statics:x.DEFINE_MANY,propTypes:x.DEFINE_MANY,contextTypes:x.DEFINE_MANY,childContextTypes:x.DEFINE_MANY,getDefaultProps:x.DEFINE_MANY_MERGED,getInitialState:x.DEFINE_MANY_MERGED,getChildContext:x.DEFINE_MANY_MERGED,render:x.DEFINE_ONCE,componentWillMount:x.DEFINE_MANY,componentDidMount:x.DEFINE_MANY,componentWillReceiveProps:x.DEFINE_MANY,shouldComponentUpdate:x.DEFINE_ONCE,componentWillUpdate:x.DEFINE_MANY,componentDidUpdate:x.DEFINE_MANY,componentWillUnmount:x.DEFINE_MANY,updateComponent:x.OVERRIDE_BASE},O={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)a(e,t[n])},childContextTypes:function(e,n){"production"!==t.env.NODE_ENV&&o(e,n,m.childContext),e.childContextTypes=y({},e.childContextTypes,n)},contextTypes:function(e,n){"production"!==t.env.NODE_ENV&&o(e,n,m.context),e.contextTypes=y({},e.contextTypes,n)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=c(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,n){"production"!==t.env.NODE_ENV&&o(e,n,m.prop),e.propTypes=y({},e.propTypes,n)},statics:function(e,t){s(e,t)},autobind:function(){}},R={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e),t&&this.updater.enqueueCallback(this,t)},isMounted:function(){return this.updater.isMounted(this)},setProps:function(e,n){"production"!==t.env.NODE_ENV&&r(),this.updater.enqueueSetProps(this,e),n&&this.updater.enqueueCallback(this,n)},replaceProps:function(e,n){"production"!==t.env.NODE_ENV&&r(),this.updater.enqueueReplaceProps(this,e),n&&this.updater.enqueueCallback(this,n)}},M=function(){};y(M.prototype,f.prototype,R);var k={createClass:function(e){var n=function(e,r,o){"production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?w(this instanceof n,"Something is calling a React component directly. Use a factory or JSX instead. See: https://fb.me/react-legacyfactory"):void 0),this.__reactAutoBindMap&&d(this),this.props=e,this.context=r,this.refs=_,this.updater=o||g,this.state=null;var i=this.getInitialState?this.getInitialState():null;"production"!==t.env.NODE_ENV&&"undefined"==typeof i&&this.getInitialState._isMockFunction&&(i=null),"object"!=typeof i||Array.isArray(i)?"production"!==t.env.NODE_ENV?E(!1,"%s.getInitialState(): must return an object or null",n.displayName||"ReactCompositeComponent"):E(!1):void 0,this.state=i};n.prototype=new M,n.prototype.constructor=n,D.forEach(a.bind(null,n)),a(n,e),n.getDefaultProps&&(n.defaultProps=n.getDefaultProps()),"production"!==t.env.NODE_ENV&&(n.getDefaultProps&&(n.getDefaultProps.isReactClassApproved={}),n.prototype.getInitialState&&(n.prototype.getInitialState.isReactClassApproved={})),n.prototype.render?void 0:"production"!==t.env.NODE_ENV?E(!1,"createClass(...): Class specification must implement a `render` method."):E(!1),"production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?w(!n.prototype.componentShouldUpdate,"%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",e.displayName||"A component"):void 0,"production"!==t.env.NODE_ENV?w(!n.prototype.componentWillRecieveProps,"%s has a method called componentWillRecieveProps(). Did you mean componentWillReceiveProps()?",e.displayName||"A component"):void 0);for(var r in S)n.prototype[r]||(n.prototype[r]=null);return n},injection:{injectMixin:function(e){D.push(e)}}};e.exports=k}).call(t,n(4))},function(e,t,n){(function(t){"use strict";function r(e,t,n){this.props=e,this.context=t,this.refs=a,this.updater=n||o}var o=n(124),i=n(43),a=n(58),s=n(13),u=n(25);if(r.prototype.isReactComponent={},r.prototype.setState=function(e,n){"object"!=typeof e&&"function"!=typeof e&&null!=e?"production"!==t.env.NODE_ENV?s(!1,"setState(...): takes an object of state variables to update or a function which returns an object of state variables."):s(!1):void 0,"production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?u(null!=e,"setState(...): You passed an undefined or null state object; instead, use forceUpdate()."):void 0),this.updater.enqueueSetState(this,e),n&&this.updater.enqueueCallback(this,n)},r.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this),e&&this.updater.enqueueCallback(this,e)},"production"!==t.env.NODE_ENV){var c={getDOMNode:["getDOMNode","Use ReactDOM.findDOMNode(component) instead."],isMounted:["isMounted","Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks."],replaceProps:["replaceProps","Instead, call render again at the top level."],replaceState:["replaceState","Refactor your code to use setState instead (see https://github.com/facebook/react/issues/3236)."],setProps:["setProps","Instead, call render again at the top level."]},l=function(e,n){i&&Object.defineProperty(r.prototype,e,{get:function(){"production"!==t.env.NODE_ENV?u(!1,"%s(...) is deprecated in plain JavaScript React classes. %s",n[0],n[1]):void 0}})};for(var p in c)c.hasOwnProperty(p)&&l(p,c[p])}e.exports=r}).call(t,n(4))},function(e,t,n){(function(t){"use strict";function r(e,n){"production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?o(!1,"%s(...): Can only update a mounted or mounting component. This usually means you called %s() on an unmounted component. This is a no-op. Please check the code for the %s component.",n,n,e.constructor&&e.constructor.displayName||""):void 0)}var o=n(25),i={isMounted:function(e){return!1},enqueueCallback:function(e,t){},enqueueForceUpdate:function(e){r(e,"forceUpdate")},enqueueReplaceState:function(e,t){r(e,"replaceState")},enqueueSetState:function(e,t){r(e,"setState")},enqueueSetProps:function(e,t){r(e,"setProps")},enqueueReplaceProps:function(e,t){r(e,"replaceProps")}};e.exports=i}).call(t,n(4))},function(e,t,n){"use strict";function r(e){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=o.getPooled(null),this.useCreateElement=!e&&s.useCreateElement}var o=n(55),i=n(56),a=n(29),s=n(41),u=n(126),c=n(57),l=n(39),p={initialize:u.getSelectionInformation,close:u.restoreSelection},d={initialize:function(){var e=a.isEnabled();return a.setEnabled(!1),e},close:function(e){a.setEnabled(e)}},f={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},h=[p,d,f],m={getTransactionWrappers:function(){return h},getReactMountReady:function(){return this.reactMountReady},destructor:function(){o.release(this.reactMountReady),this.reactMountReady=null}};l(r.prototype,c.Mixin,m),i.addPoolingTo(r),e.exports=r},function(e,t,n){"use strict";function r(e){return i(document.documentElement,e)}var o=n(127),i=n(59),a=n(95),s=n(129),u={hasSelectionCapabilities:function(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&"text"===e.type||"textarea"===t||"true"===e.contentEditable)},getSelectionInformation:function(){var e=s();return{focusedElem:e,selectionRange:u.hasSelectionCapabilities(e)?u.getSelection(e):null}},restoreSelection:function(e){var t=s(),n=e.focusedElem,o=e.selectionRange;t!==n&&r(n)&&(u.hasSelectionCapabilities(n)&&u.setSelection(n,o),a(n))},getSelection:function(e){var t;if("selectionStart"in e)t={start:e.selectionStart,end:e.selectionEnd};else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var n=document.selection.createRange();n.parentElement()===e&&(t={start:-n.moveStart("character",-e.value.length),end:-n.moveEnd("character",-e.value.length)})}else t=o.getOffsets(e);return t||{start:0,end:0}},setSelection:function(e,t){var n=t.start,r=t.end;if("undefined"==typeof r&&(r=n),"selectionStart"in e)e.selectionStart=n,e.selectionEnd=Math.min(r,e.value.length);else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var i=e.createTextRange();i.collapse(!0),i.moveStart("character",n),i.moveEnd("character",r-n),i.select()}else o.setOffsets(e,t)}};e.exports=u},function(e,t,n){"use strict";function r(e,t,n,r){return e===n&&t===r}function o(e){var t=document.selection,n=t.createRange(),r=n.text.length,o=n.duplicate();o.moveToElementText(e),o.setEndPoint("EndToStart",n);var i=o.text.length,a=i+r;return{start:i,end:a}}function i(e){var t=window.getSelection&&window.getSelection();if(!t||0===t.rangeCount)return null;var n=t.anchorNode,o=t.anchorOffset,i=t.focusNode,a=t.focusOffset,s=t.getRangeAt(0);try{s.startContainer.nodeType,s.endContainer.nodeType}catch(e){return null}var u=r(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),c=u?0:s.toString().length,l=s.cloneRange();l.selectNodeContents(e),l.setEnd(s.startContainer,s.startOffset);var p=r(l.startContainer,l.startOffset,l.endContainer,l.endOffset),d=p?0:l.toString().length,f=d+c,h=document.createRange();h.setStart(n,o),h.setEnd(i,a);var m=h.collapsed;return{start:m?f:d,end:m?d:f}}function a(e,t){var n,r,o=document.selection.createRange().duplicate();"undefined"==typeof t.end?(n=t.start,r=n):t.start>t.end?(n=t.end,r=t.start):(n=t.start,r=t.end),o.moveToElementText(e),o.moveStart("character",n),o.setEndPoint("EndToStart",o),o.moveEnd("character",r-n),o.select()}function s(e,t){if(window.getSelection){var n=window.getSelection(),r=e[l()].length,o=Math.min(t.start,r),i="undefined"==typeof t.end?o:Math.min(t.end,r);if(!n.extend&&o>i){var a=i;i=o,o=a}var s=c(e,o),u=c(e,i);if(s&&u){var p=document.createRange();p.setStart(s.node,s.offset),n.removeAllRanges(),o>i?(n.addRange(p),n.extend(u.node,u.offset)):(p.setEnd(u.node,u.offset),n.addRange(p))}}}var u=n(9),c=n(128),l=n(75),p=u.canUseDOM&&"selection"in document&&!("getSelection"in window),d={getOffsets:p?o:i,setOffsets:p?a:s};e.exports=d},function(e,t){"use strict";function n(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function r(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function o(e,t){for(var o=n(e),i=0,a=0;o;){if(3===o.nodeType){if(a=i+o.textContent.length,i<=t&&a>=t)return{node:o,offset:t-i};i=a}o=n(r(o))}}e.exports=o},function(e,t){"use strict";function n(){if("undefined"==typeof document)return null;try{return document.activeElement||document.body}catch(e){return document.body}}e.exports=n},function(e,t,n){"use strict";function r(e){if("selectionStart"in e&&u.hasSelectionCapabilities(e))return{start:e.selectionStart,end:e.selectionEnd};if(window.getSelection){var t=window.getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function o(e,t){if(E||null==g||g!==l())return null;var n=r(g);if(!_||!f(_,n)){_=n;var o=c.getPooled(v.select,y,e,t);return o.type="select",o.target=g,a.accumulateTwoPhaseDispatches(o),o}return null}var i=n(30),a=n(73),s=n(9),u=n(126),c=n(77),l=n(129),p=n(82),d=n(79),f=n(117),h=i.topLevelTypes,m=s.canUseDOM&&"documentMode"in document&&document.documentMode<=11,v={select:{phasedRegistrationNames:{bubbled:d({onSelect:null}),captured:d({onSelectCapture:null})},dependencies:[h.topBlur,h.topContextMenu,h.topFocus,h.topKeyDown,h.topMouseDown,h.topMouseUp,h.topSelectionChange]}},g=null,y=null,_=null,E=!1,b=!1,N=d({onSelect:null}),w={eventTypes:v,extractEvents:function(e,t,n,r,i){if(!b)return null;switch(e){case h.topFocus:(p(t)||"true"===t.contentEditable)&&(g=t,y=n,_=null);break;case h.topBlur:g=null,y=null,_=null;break;case h.topMouseDown:E=!0;break;case h.topContextMenu:case h.topMouseUp:return E=!1,o(r,i);case h.topSelectionChange:if(m)break;case h.topKeyDown:case h.topKeyUp:return o(r,i)}return null},didPutListener:function(e,t,n){t===N&&(b=!0)}};e.exports=w},function(e,t){"use strict";var n=Math.pow(2,53),r={createReactRootIndex:function(){return Math.ceil(Math.random()*n)}};e.exports=r},function(e,t,n){(function(t){"use strict";var r=n(30),o=n(119),i=n(73),a=n(28),s=n(133),u=n(77),c=n(134),l=n(135),p=n(86),d=n(138),f=n(139),h=n(87),m=n(140),v=n(15),g=n(136),y=n(13),_=n(79),E=r.topLevelTypes,b={abort:{phasedRegistrationNames:{bubbled:_({onAbort:!0}),captured:_({onAbortCapture:!0})}},blur:{phasedRegistrationNames:{bubbled:_({onBlur:!0}),captured:_({onBlurCapture:!0})}},canPlay:{phasedRegistrationNames:{bubbled:_({onCanPlay:!0}),captured:_({onCanPlayCapture:!0})}},canPlayThrough:{phasedRegistrationNames:{bubbled:_({onCanPlayThrough:!0}),captured:_({onCanPlayThroughCapture:!0})}},click:{phasedRegistrationNames:{bubbled:_({onClick:!0}),captured:_({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:_({onContextMenu:!0}),captured:_({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:_({onCopy:!0}),captured:_({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:_({onCut:!0}),captured:_({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:_({onDoubleClick:!0}),captured:_({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:_({onDrag:!0}),captured:_({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:_({onDragEnd:!0}),captured:_({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:_({onDragEnter:!0}),captured:_({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:_({onDragExit:!0}),captured:_({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:_({onDragLeave:!0}),captured:_({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:_({onDragOver:!0}),captured:_({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:_({onDragStart:!0}),captured:_({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:_({onDrop:!0}),captured:_({onDropCapture:!0})}},durationChange:{phasedRegistrationNames:{bubbled:_({onDurationChange:!0}),captured:_({onDurationChangeCapture:!0})}},emptied:{phasedRegistrationNames:{bubbled:_({onEmptied:!0}),captured:_({onEmptiedCapture:!0})}},encrypted:{phasedRegistrationNames:{bubbled:_({onEncrypted:!0}),captured:_({onEncryptedCapture:!0})}},ended:{phasedRegistrationNames:{bubbled:_({onEnded:!0}),captured:_({onEndedCapture:!0})}},error:{phasedRegistrationNames:{bubbled:_({onError:!0}),captured:_({onErrorCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:_({onFocus:!0}),captured:_({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:_({onInput:!0}),captured:_({onInputCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:_({onKeyDown:!0}),captured:_({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:_({onKeyPress:!0}),captured:_({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:_({onKeyUp:!0}),captured:_({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:_({onLoad:!0}),captured:_({onLoadCapture:!0})}},loadedData:{phasedRegistrationNames:{bubbled:_({onLoadedData:!0}),captured:_({onLoadedDataCapture:!0})}},loadedMetadata:{phasedRegistrationNames:{bubbled:_({onLoadedMetadata:!0}),captured:_({onLoadedMetadataCapture:!0})}},loadStart:{phasedRegistrationNames:{bubbled:_({onLoadStart:!0}),captured:_({onLoadStartCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:_({onMouseDown:!0}),captured:_({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:_({onMouseMove:!0}),captured:_({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:_({onMouseOut:!0}),captured:_({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:_({onMouseOver:!0}),captured:_({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:_({onMouseUp:!0}),captured:_({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:_({onPaste:!0}),captured:_({onPasteCapture:!0})}},pause:{phasedRegistrationNames:{bubbled:_({onPause:!0}),captured:_({onPauseCapture:!0})}},play:{phasedRegistrationNames:{bubbled:_({onPlay:!0}),captured:_({onPlayCapture:!0})}},playing:{phasedRegistrationNames:{bubbled:_({onPlaying:!0}),captured:_({onPlayingCapture:!0})}},progress:{phasedRegistrationNames:{bubbled:_({onProgress:!0}),captured:_({onProgressCapture:!0})}},rateChange:{phasedRegistrationNames:{bubbled:_({onRateChange:!0}),captured:_({onRateChangeCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:_({onReset:!0}),captured:_({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:_({onScroll:!0}),captured:_({onScrollCapture:!0})}},seeked:{phasedRegistrationNames:{bubbled:_({onSeeked:!0}),captured:_({onSeekedCapture:!0})}},seeking:{phasedRegistrationNames:{bubbled:_({onSeeking:!0}),captured:_({onSeekingCapture:!0})}},stalled:{phasedRegistrationNames:{bubbled:_({onStalled:!0}),captured:_({onStalledCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:_({onSubmit:!0}),captured:_({onSubmitCapture:!0})}},suspend:{phasedRegistrationNames:{bubbled:_({onSuspend:!0}),captured:_({onSuspendCapture:!0})}},timeUpdate:{phasedRegistrationNames:{bubbled:_({onTimeUpdate:!0}),captured:_({onTimeUpdateCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:_({onTouchCancel:!0}),captured:_({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:_({onTouchEnd:!0}),captured:_({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:_({onTouchMove:!0}),captured:_({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:_({onTouchStart:!0}),captured:_({onTouchStartCapture:!0})}},volumeChange:{phasedRegistrationNames:{bubbled:_({onVolumeChange:!0}),captured:_({onVolumeChangeCapture:!0})}},waiting:{phasedRegistrationNames:{bubbled:_({onWaiting:!0}),captured:_({onWaitingCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:_({onWheel:!0}),captured:_({onWheelCapture:!0})}}},N={topAbort:b.abort,topBlur:b.blur,topCanPlay:b.canPlay,topCanPlayThrough:b.canPlayThrough,topClick:b.click,topContextMenu:b.contextMenu,topCopy:b.copy,topCut:b.cut,topDoubleClick:b.doubleClick,topDrag:b.drag,topDragEnd:b.dragEnd,topDragEnter:b.dragEnter,topDragExit:b.dragExit,topDragLeave:b.dragLeave,topDragOver:b.dragOver,topDragStart:b.dragStart,topDrop:b.drop,topDurationChange:b.durationChange,topEmptied:b.emptied,topEncrypted:b.encrypted,topEnded:b.ended,topError:b.error,topFocus:b.focus,topInput:b.input,topKeyDown:b.keyDown,topKeyPress:b.keyPress,topKeyUp:b.keyUp,topLoad:b.load,topLoadedData:b.loadedData,topLoadedMetadata:b.loadedMetadata,topLoadStart:b.loadStart,topMouseDown:b.mouseDown,topMouseMove:b.mouseMove,topMouseOut:b.mouseOut,topMouseOver:b.mouseOver,topMouseUp:b.mouseUp,topPaste:b.paste,topPause:b.pause,topPlay:b.play,topPlaying:b.playing,topProgress:b.progress,topRateChange:b.rateChange,topReset:b.reset,topScroll:b.scroll,topSeeked:b.seeked,topSeeking:b.seeking,topStalled:b.stalled,topSubmit:b.submit,topSuspend:b.suspend,topTimeUpdate:b.timeUpdate,topTouchCancel:b.touchCancel,topTouchEnd:b.touchEnd,topTouchMove:b.touchMove,topTouchStart:b.touchStart,topVolumeChange:b.volumeChange,topWaiting:b.waiting,topWheel:b.wheel};for(var w in N)N[w].dependencies=[w];var C=_({onClick:null}),x={},D={eventTypes:b,extractEvents:function(e,n,r,o,a){var v=N[e];if(!v)return null;var _;switch(e){case E.topAbort:case E.topCanPlay:case E.topCanPlayThrough:case E.topDurationChange:case E.topEmptied:case E.topEncrypted:case E.topEnded:case E.topError:case E.topInput:case E.topLoad:case E.topLoadedData:case E.topLoadedMetadata:case E.topLoadStart:case E.topPause:case E.topPlay:case E.topPlaying:case E.topProgress:case E.topRateChange:case E.topReset:case E.topSeeked:case E.topSeeking:case E.topStalled:case E.topSubmit:case E.topSuspend:case E.topTimeUpdate:case E.topVolumeChange:case E.topWaiting:_=u;break;case E.topKeyPress:if(0===g(o))return null;case E.topKeyDown:case E.topKeyUp:_=l;break;case E.topBlur:case E.topFocus:_=c;break;case E.topClick:if(2===o.button)return null;case E.topContextMenu:case E.topDoubleClick:case E.topMouseDown:case E.topMouseMove:case E.topMouseOut:case E.topMouseOver:case E.topMouseUp:_=p;break;case E.topDrag:case E.topDragEnd:case E.topDragEnter:case E.topDragExit:case E.topDragLeave:case E.topDragOver:case E.topDragStart:case E.topDrop:_=d;break;case E.topTouchCancel:case E.topTouchEnd:case E.topTouchMove:case E.topTouchStart:_=f;break;case E.topScroll:_=h;break;case E.topWheel:_=m;break;case E.topCopy:case E.topCut:case E.topPaste:_=s}_?void 0:"production"!==t.env.NODE_ENV?y(!1,"SimpleEventPlugin: Unhandled event type, `%s`.",e):y(!1);var b=_.getPooled(v,r,o,a);return i.accumulateTwoPhaseDispatches(b),b},didPutListener:function(e,t,n){if(t===C){var r=a.getNode(e);x[e]||(x[e]=o.listen(r,"click",v))}},willDeleteListener:function(e,t){t===C&&(x[e].remove(),delete x[e])}};e.exports=D}).call(t,n(4))},function(e,t,n){"use strict";function r(e,t,n,r){o.call(this,e,t,n,r)}var o=n(77),i={clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}};o.augmentClass(r,i),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){o.call(this,e,t,n,r)}var o=n(87),i={relatedTarget:null};o.augmentClass(r,i),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){o.call(this,e,t,n,r)}var o=n(87),i=n(136),a=n(137),s=n(88),u={key:a,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:s,charCode:function(e){return"keypress"===e.type?i(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?i(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}};o.augmentClass(r,u),e.exports=r},function(e,t){"use strict";function n(e){var t,n=e.keyCode;return"charCode"in e?(t=e.charCode,0===t&&13===n&&(t=13)):t=n,t>=32||13===t?t:0}e.exports=n},function(e,t,n){"use strict";function r(e){if(e.key){var t=i[e.key]||e.key;if("Unidentified"!==t)return t}if("keypress"===e.type){var n=o(e);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===e.type||"keyup"===e.type?a[e.keyCode]||"Unidentified":""}var o=n(136),i={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){o.call(this,e,t,n,r)}var o=n(86),i={dataTransfer:null};o.augmentClass(r,i),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){o.call(this,e,t,n,r)}var o=n(87),i=n(88),a={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:i};o.augmentClass(r,a),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){o.call(this,e,t,n,r)}var o=n(86),i={deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null};o.augmentClass(r,i),e.exports=r},function(e,t,n){"use strict";var r=n(23),o=r.injection.MUST_USE_ATTRIBUTE,i={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},a={Properties:{clipPath:o,cx:o,cy:o,d:o,dx:o,dy:o,fill:o,fillOpacity:o,fontFamily:o,fontSize:o,fx:o,fy:o,gradientTransform:o,gradientUnits:o,markerEnd:o,markerMid:o,markerStart:o,offset:o,opacity:o,patternContentUnits:o,patternUnits:o,points:o,preserveAspectRatio:o,r:o,rx:o,ry:o,spreadMethod:o,stopColor:o,stopOpacity:o,stroke:o,strokeDasharray:o,strokeLinecap:o,strokeOpacity:o,strokeWidth:o,textAnchor:o,transform:o,version:o,viewBox:o,x1:o,x2:o,x:o,xlinkActuate:o,xlinkArcrole:o,xlinkHref:o,xlinkRole:o,xlinkShow:o,xlinkTitle:o,xlinkType:o,xmlBase:o,xmlLang:o,xmlSpace:o,y1:o,y2:o,y:o},DOMAttributeNamespaces:{xlinkActuate:i.xlink,xlinkArcrole:i.xlink,xlinkHref:i.xlink,xlinkRole:i.xlink,xlinkShow:i.xlink,xlinkTitle:i.xlink,xlinkType:i.xlink,xmlBase:i.xml,xmlLang:i.xml,xmlSpace:i.xml},DOMAttributeNames:{clipPath:"clip-path",fillOpacity:"fill-opacity",fontFamily:"font-family",fontSize:"font-size",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",patternContentUnits:"patternContentUnits",patternUnits:"patternUnits",
preserveAspectRatio:"preserveAspectRatio",spreadMethod:"spreadMethod",stopColor:"stop-color",stopOpacity:"stop-opacity",strokeDasharray:"stroke-dasharray",strokeLinecap:"stroke-linecap",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",textAnchor:"text-anchor",viewBox:"viewBox",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlLang:"xml:lang",xmlSpace:"xml:space"}};e.exports=a},function(e,t,n){"use strict";function r(e){return Math.floor(100*e)/100}function o(e,t,n){e[t]=(e[t]||0)+n}var i=n(23),a=n(143),s=n(28),u=n(18),c=n(144),l={_allMeasurements:[],_mountStack:[0],_injected:!1,start:function(){l._injected||u.injection.injectMeasure(l.measure),l._allMeasurements.length=0,u.enableMeasure=!0},stop:function(){u.enableMeasure=!1},getLastMeasurements:function(){return l._allMeasurements},printExclusive:function(e){e=e||l._allMeasurements;var t=a.getExclusiveSummary(e);console.table(t.map(function(e){return{"Component class name":e.componentName,"Total inclusive time (ms)":r(e.inclusive),"Exclusive mount time (ms)":r(e.exclusive),"Exclusive render time (ms)":r(e.render),"Mount time per instance (ms)":r(e.exclusive/e.count),"Render time per instance (ms)":r(e.render/e.count),Instances:e.count}}))},printInclusive:function(e){e=e||l._allMeasurements;var t=a.getInclusiveSummary(e);console.table(t.map(function(e){return{"Owner > component":e.componentName,"Inclusive time (ms)":r(e.time),Instances:e.count}})),console.log("Total time:",a.getTotalTime(e).toFixed(2)+" ms")},getMeasurementsSummaryMap:function(e){var t=a.getInclusiveSummary(e,!0);return t.map(function(e){return{"Owner > component":e.componentName,"Wasted time (ms)":e.time,Instances:e.count}})},printWasted:function(e){e=e||l._allMeasurements,console.table(l.getMeasurementsSummaryMap(e)),console.log("Total time:",a.getTotalTime(e).toFixed(2)+" ms")},printDOM:function(e){e=e||l._allMeasurements;var t=a.getDOMSummary(e);console.table(t.map(function(e){var t={};return t[i.ID_ATTRIBUTE_NAME]=e.id,t.type=e.type,t.args=JSON.stringify(e.args),t})),console.log("Total time:",a.getTotalTime(e).toFixed(2)+" ms")},_recordWrite:function(e,t,n,r){var o=l._allMeasurements[l._allMeasurements.length-1].writes;o[e]=o[e]||[],o[e].push({type:t,time:n,args:r})},measure:function(e,t,n){return function(){for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];var u,p,d;if("_renderNewRootComponent"===t||"flushBatchedUpdates"===t)return l._allMeasurements.push({exclusive:{},inclusive:{},render:{},counts:{},writes:{},displayNames:{},totalTime:0,created:{}}),d=c(),p=n.apply(this,i),l._allMeasurements[l._allMeasurements.length-1].totalTime=c()-d,p;if("_mountImageIntoNode"===t||"ReactBrowserEventEmitter"===e||"ReactDOMIDOperations"===e||"CSSPropertyOperations"===e||"DOMChildrenOperations"===e||"DOMPropertyOperations"===e){if(d=c(),p=n.apply(this,i),u=c()-d,"_mountImageIntoNode"===t){var f=s.getID(i[1]);l._recordWrite(f,t,u,i[0])}else if("dangerouslyProcessChildrenUpdates"===t)i[0].forEach(function(e){var t={};null!==e.fromIndex&&(t.fromIndex=e.fromIndex),null!==e.toIndex&&(t.toIndex=e.toIndex),null!==e.textContent&&(t.textContent=e.textContent),null!==e.markupIndex&&(t.markup=i[1][e.markupIndex]),l._recordWrite(e.parentID,e.type,u,t)});else{var h=i[0];"object"==typeof h&&(h=s.getID(i[0])),l._recordWrite(h,t,u,Array.prototype.slice.call(i,1))}return p}if("ReactCompositeComponent"!==e||"mountComponent"!==t&&"updateComponent"!==t&&"_renderValidatedComponent"!==t)return n.apply(this,i);if(this._currentElement.type===s.TopLevelWrapper)return n.apply(this,i);var m="mountComponent"===t?i[0]:this._rootNodeID,v="_renderValidatedComponent"===t,g="mountComponent"===t,y=l._mountStack,_=l._allMeasurements[l._allMeasurements.length-1];if(v?o(_.counts,m,1):g&&(_.created[m]=!0,y.push(0)),d=c(),p=n.apply(this,i),u=c()-d,v)o(_.render,m,u);else if(g){var E=y.pop();y[y.length-1]+=u,o(_.exclusive,m,u-E),o(_.inclusive,m,u)}else o(_.inclusive,m,u);return _.displayNames[m]={current:this.getName(),owner:this._currentElement._owner?this._currentElement._owner.getName():"<root>"},p}}};e.exports=l},function(e,t,n){"use strict";function r(e){for(var t=0,n=0;n<e.length;n++){var r=e[n];t+=r.totalTime}return t}function o(e){var t=[];return e.forEach(function(e){Object.keys(e.writes).forEach(function(n){e.writes[n].forEach(function(e){t.push({id:n,type:l[e.type]||e.type,args:e.args})})})}),t}function i(e){for(var t,n={},r=0;r<e.length;r++){var o=e[r],i=u({},o.exclusive,o.inclusive);for(var a in i)t=o.displayNames[a].current,n[t]=n[t]||{componentName:t,inclusive:0,exclusive:0,render:0,count:0},o.render[a]&&(n[t].render+=o.render[a]),o.exclusive[a]&&(n[t].exclusive+=o.exclusive[a]),o.inclusive[a]&&(n[t].inclusive+=o.inclusive[a]),o.counts[a]&&(n[t].count+=o.counts[a])}var s=[];for(t in n)n[t].exclusive>=c&&s.push(n[t]);return s.sort(function(e,t){return t.exclusive-e.exclusive}),s}function a(e,t){for(var n,r={},o=0;o<e.length;o++){var i,a=e[o],l=u({},a.exclusive,a.inclusive);t&&(i=s(a));for(var p in l)if(!t||i[p]){var d=a.displayNames[p];n=d.owner+" > "+d.current,r[n]=r[n]||{componentName:n,time:0,count:0},a.inclusive[p]&&(r[n].time+=a.inclusive[p]),a.counts[p]&&(r[n].count+=a.counts[p])}}var f=[];for(n in r)r[n].time>=c&&f.push(r[n]);return f.sort(function(e,t){return t.time-e.time}),f}function s(e){var t={},n=Object.keys(e.writes),r=u({},e.exclusive,e.inclusive);for(var o in r){for(var i=!1,a=0;a<n.length;a++)if(0===n[a].indexOf(o)){i=!0;break}e.created[o]&&(i=!0),!i&&e.counts[o]>0&&(t[o]=!0)}return t}var u=n(39),c=1.2,l={_mountImageIntoNode:"set innerHTML",INSERT_MARKUP:"set innerHTML",MOVE_EXISTING:"move",REMOVE_NODE:"remove",SET_MARKUP:"set innerHTML",TEXT_CONTENT:"set textContent",setValueForProperty:"update attribute",setValueForAttribute:"update attribute",deleteValueForProperty:"remove attribute",setValueForStyles:"update styles",replaceNodeWithMarkup:"replace",updateTextContent:"set textContent"},p={getExclusiveSummary:i,getInclusiveSummary:a,getDOMSummary:o,getTotalTime:r};e.exports=p},function(e,t,n){"use strict";var r,o=n(145);r=o.now?function(){return o.now()}:function(){return Date.now()},e.exports=r},function(e,t,n){"use strict";var r,o=n(9);o.canUseDOM&&(r=window.performance||window.msPerformance||window.webkitPerformance),e.exports=r||{}},function(e,t){"use strict";e.exports="0.14.9"},function(e,t,n){"use strict";var r=n(28);e.exports=r.renderSubtreeIntoContainer},function(e,t,n){"use strict";var r=n(71),o=n(149),i=n(146);r.inject();var a={renderToString:o.renderToString,renderToStaticMarkup:o.renderToStaticMarkup,version:i};e.exports=a},function(e,t,n){(function(t){"use strict";function r(e){a.isValidElement(e)?void 0:"production"!==t.env.NODE_ENV?h(!1,"renderToString(): You must pass a valid ReactElement."):h(!1);var n;try{p.injection.injectBatchingStrategy(c);var r=s.createReactRootID();return n=l.getPooled(!1),n.perform(function(){var t=f(e,null),o=t.mountComponent(r,n,d);return u.addChecksumToMarkup(o)},null)}finally{l.release(n),p.injection.injectBatchingStrategy(i)}}function o(e){a.isValidElement(e)?void 0:"production"!==t.env.NODE_ENV?h(!1,"renderToStaticMarkup(): You must pass a valid ReactElement."):h(!1);var n;try{p.injection.injectBatchingStrategy(c);var r=s.createReactRootID();return n=l.getPooled(!0),n.perform(function(){var t=f(e,null);return t.mountComponent(r,n,d)},null)}finally{l.release(n),p.injection.injectBatchingStrategy(i)}}var i=n(92),a=n(42),s=n(45),u=n(48),c=n(150),l=n(151),p=n(54),d=n(58),f=n(62),h=n(13);e.exports={renderToString:r,renderToStaticMarkup:o}}).call(t,n(4))},function(e,t){"use strict";var n={isBatchingUpdates:!1,batchedUpdates:function(e){}};e.exports=n},function(e,t,n){"use strict";function r(e){this.reinitializeTransaction(),this.renderToStaticMarkup=e,this.reactMountReady=i.getPooled(null),this.useCreateElement=!1}var o=n(56),i=n(55),a=n(57),s=n(39),u=n(15),c={initialize:function(){this.reactMountReady.reset()},close:u},l=[c],p={getTransactionWrappers:function(){return l},getReactMountReady:function(){return this.reactMountReady},destructor:function(){i.release(this.reactMountReady),this.reactMountReady=null}};s(r.prototype,a.Mixin,p),o.addPoolingTo(r),e.exports=r},function(e,t,n){(function(t){"use strict";var r=n(110),o=n(123),i=n(122),a=n(153),s=n(42),u=n(154),c=n(107),l=n(146),p=n(39),d=n(156),f=s.createElement,h=s.createFactory,m=s.cloneElement;"production"!==t.env.NODE_ENV&&(f=u.createElement,h=u.createFactory,m=u.cloneElement);var v={Children:{map:r.map,forEach:r.forEach,count:r.count,toArray:r.toArray,only:d},Component:o,createElement:f,cloneElement:m,isValidElement:s.isValidElement,PropTypes:c,createClass:i.createClass,createFactory:h,createMixin:function(e){return e},DOM:a,version:l,__spread:p};e.exports=v}).call(t,n(4))},function(e,t,n){(function(t){"use strict";function r(e){return"production"!==t.env.NODE_ENV?i.createFactory(e):o.createFactory(e)}var o=n(42),i=n(154),a=n(155),s=a({a:"a",abbr:"abbr",address:"address",area:"area",article:"article",aside:"aside",audio:"audio",b:"b",base:"base",bdi:"bdi",bdo:"bdo",big:"big",blockquote:"blockquote",body:"body",br:"br",button:"button",canvas:"canvas",caption:"caption",cite:"cite",code:"code",col:"col",colgroup:"colgroup",data:"data",datalist:"datalist",dd:"dd",del:"del",details:"details",dfn:"dfn",dialog:"dialog",div:"div",dl:"dl",dt:"dt",em:"em",embed:"embed",fieldset:"fieldset",figcaption:"figcaption",figure:"figure",footer:"footer",form:"form",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",head:"head",header:"header",hgroup:"hgroup",hr:"hr",html:"html",i:"i",iframe:"iframe",img:"img",input:"input",ins:"ins",kbd:"kbd",keygen:"keygen",label:"label",legend:"legend",li:"li",link:"link",main:"main",map:"map",mark:"mark",menu:"menu",menuitem:"menuitem",meta:"meta",meter:"meter",nav:"nav",noscript:"noscript",object:"object",ol:"ol",optgroup:"optgroup",option:"option",output:"output",p:"p",param:"param",picture:"picture",pre:"pre",progress:"progress",q:"q",rp:"rp",rt:"rt",ruby:"ruby",s:"s",samp:"samp",script:"script",section:"section",select:"select",small:"small",source:"source",span:"span",strong:"strong",style:"style",sub:"sub",summary:"summary",sup:"sup",table:"table",tbody:"tbody",td:"td",textarea:"textarea",tfoot:"tfoot",th:"th",thead:"thead",time:"time",title:"title",tr:"tr",track:"track",u:"u",ul:"ul",var:"var",video:"video",wbr:"wbr",circle:"circle",clipPath:"clipPath",defs:"defs",ellipse:"ellipse",g:"g",image:"image",line:"line",linearGradient:"linearGradient",mask:"mask",path:"path",pattern:"pattern",polygon:"polygon",polyline:"polyline",radialGradient:"radialGradient",rect:"rect",stop:"stop",svg:"svg",text:"text",tspan:"tspan"},r);e.exports=s}).call(t,n(4))},function(e,t,n){(function(t){"use strict";function r(){if(d.current){var e=d.current.getName();if(e)return" Check the render method of `"+e+"`."}return""}function o(e,n){if(e._store&&!e._store.validated&&null==e.key){e._store.validated=!0;var r=i("uniqueKey",e,n);null!==r&&("production"!==t.env.NODE_ENV?v(!1,'Each child in an array or iterator should have a unique "key" prop.%s%s%s',r.parentOrOwner||"",r.childOwner||"",r.url||""):void 0)}}function i(e,t,n){var o=r();if(!o){var i="string"==typeof n?n:n.displayName||n.name;i&&(o=" Check the top-level render call using <"+i+">.")}var a=g[e]||(g[e]={});if(a[o])return null;a[o]=!0;var s={parentOrOwner:o,url:" See https://fb.me/react-warning-keys for more information.",childOwner:null};return t&&t._owner&&t._owner!==d.current&&(s.childOwner=" It was passed a child from "+t._owner.getName()+"."),s}function a(e,t){if("object"==typeof e)if(Array.isArray(e))for(var n=0;n<e.length;n++){var r=e[n];c.isValidElement(r)&&o(r,t)}else if(c.isValidElement(e))e._store&&(e._store.validated=!0);else if(e){var i=h(e);if(i&&i!==e.entries)for(var a,s=i.call(e);!(a=s.next()).done;)c.isValidElement(a.value)&&o(a.value,t)}}function s(e,n,o,i){for(var a in n)if(n.hasOwnProperty(a)){var s;try{"function"!=typeof n[a]?"production"!==t.env.NODE_ENV?m(!1,"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",e||"React class",p[i],a):m(!1):void 0,s=n[a](o,a,e,i,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(e){s=e}if("production"!==t.env.NODE_ENV?v(!s||s instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",e||"React class",p[i],a,typeof s):void 0,s instanceof Error&&!(s.message in y)){y[s.message]=!0;var u=r();"production"!==t.env.NODE_ENV?v(!1,"Failed propType: %s%s",s.message,u):void 0}}}function u(e){var n=e.type;if("function"==typeof n){var r=n.displayName||n.name;n.propTypes&&s(r,n.propTypes,e.props,l.prop),"function"==typeof n.getDefaultProps&&("production"!==t.env.NODE_ENV?v(n.getDefaultProps.isReactClassApproved,"getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead."):void 0)}}var c=n(42),l=n(65),p=n(66),d=n(5),f=n(43),h=n(108),m=n(13),v=n(25),g={},y={},_={createElement:function(e,n,o){var i="string"==typeof e||"function"==typeof e;"production"!==t.env.NODE_ENV?v(i,"React.createElement: type should not be null, undefined, boolean, or number. It should be a string (for DOM elements) or a ReactClass (for composite components).%s",r()):void 0;var s=c.createElement.apply(this,arguments);if(null==s)return s;if(i)for(var l=2;l<arguments.length;l++)a(arguments[l],e);return u(s),s},createFactory:function(e){var n=_.createElement.bind(null,e);return n.type=e,"production"!==t.env.NODE_ENV&&f&&Object.defineProperty(n,"type",{enumerable:!1,get:function(){return"production"!==t.env.NODE_ENV?v(!1,"Factory.type is deprecated. Access the class directly before passing it to createFactory."):void 0,Object.defineProperty(this,"type",{value:e}),e}}),n},cloneElement:function(e,t,n){for(var r=c.cloneElement.apply(this,arguments),o=2;o<arguments.length;o++)a(arguments[o],r.type);return u(r),r}};e.exports=_}).call(t,n(4))},function(e,t){"use strict";function n(e,t,n){if(!e)return null;var o={};for(var i in e)r.call(e,i)&&(o[i]=t.call(n,e[i],i,e));return o}var r=Object.prototype.hasOwnProperty;e.exports=n},function(e,t,n){(function(t){"use strict";function r(e){return o.isValidElement(e)?void 0:"production"!==t.env.NODE_ENV?i(!1,"onlyChild must be passed a children with exactly one child."):i(!1),e}var o=n(42),i=n(13);e.exports=r}).call(t,n(4))},function(e,t,n){(function(t){"use strict";function r(e,n,r,a,s){var u=!1;if("production"!==t.env.NODE_ENV){var c=function(){return"production"!==t.env.NODE_ENV?i(u,"React.%s is deprecated. Please use %s.%s from require('%s') instead.",e,n,e,r):void 0,u=!0,s.apply(a,arguments)};return o(c,s)}return s}var o=n(39),i=n(25);e.exports=r}).call(t,n(4))},function(e,t,n){"use strict";e.exports=n(3)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),l=n(160),p=r(l),d=n(213),f=n(229),h=r(f),m=n(186),v=r(m),g=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"render",value:function(){for(var e=null,t=0;t<this.state.open.length;t++)this.state.open[t].active&&(e=this.state.open[t]);return c.default.createElement(p.default,{sOpenContent:e,sOpenList:this.state.open,sUser:this.state.user,sAuthenticate:this.state.authenticate,sNotify:this.state.notify,aNewRecipe:v.default.newRecipe,aSaveRecipe:v.default.saveRecipe,aGetRecipe:v.default.getRecipe,aCloseRecipe:v.default.closeRecipe,aAddIngredient:v.default.addIngredient,aAddStep:v.default.addStep,aUpdateValue:v.default.updateValue,aNotify:v.default.notify,aAuthenticate:v.default.authenticate,aOpenContent:v.default.openContent,aServerRequest:v.default.serverRequest,aUpdateUserStatus:v.default.updateUserStatus,aRegister:v.default.register,aLogin:v.default.login,aLogout:v.default.logout,aUpdatePassword:v.default.updatePassword})}}],[{key:"getStores",value:function(){return[h.default]}},{key:"calculateState",value:function(e){return h.default.getState()}}]),t}(u.Component);t.default=d.Container.create(g)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(o),a=n(158),s=r(a),u=n(161),c=r(u),l=n(196),p=r(l),d=n(163),f=r(d),h=n(199),m=r(h),v=n(202),g=r(v),y=n(205),_=r(y),E=n(208),b=r(E);n(211);var N=i.default.createClass({displayName:"Body",appAuthenticate:null,appBody:null,getInitialState:function(){return{showLogin:!1,showRegister:!1}},componentDidMount:function(){this.appAuthenticate=s.default.findDOMNode(this).querySelector(".app-authenticate"),this.appBody=s.default.findDOMNode(this).querySelector(".app-body"),this.handleLoad()},componentDidUpdate:function(){this.handleLoad()},handleLoad:function(){if(this.props.sAuthenticate.active)this.appAuthenticate.classList.add("show"),this.appBody.classList.add("hide");else{this.appAuthenticate.classList.add("hide"),this.appBody.classList.add("show"),this.appAuthenticate.classList.remove("show"),this.appBody.classList.remove("hide");var e=this;setTimeout(function(){e.appAuthenticate.classList.remove("hide"),e.appBody.classList.remove("show")},1e3)}},render:function(){var e;return e="home"==this.props.sOpenContent.id?i.default.createElement(m.default,{sHome:this.props.sOpenContent,aGetRecipe:this.props.aGetRecipe}):"user"==this.props.sOpenContent.id?i.default.createElement(g.default,{sUser:this.props.sUser,aUpdateUserStatus:this.props.aUpdateUserStatus}):i.default.createElement(f.default,{recipe:this.props.sOpenContent.recipe,sUser:this.props.sUser,aSaveRecipe:this.props.aSaveRecipe,aAddIngredient:this.props.aAddIngredient,aAddStep:this.props.aAddStep,aUpdateValue:this.props.aUpdateValue,aServerRequest:this.props.aServerRequest,aGetRecipe:this.props.aGetRecipe,aNotify:this.props.aNotify}),i.default.createElement("section",{className:"app"},i.default.createElement(b.default,{sNotify:this.props.sNotify,aNotify:this.props.aNotify}),i.default.createElement("section",{className:"app-authenticate"},i.default.createElement(_.default,{sAuthenticate:this.props.sAuthenticate,aAuthenticate:this.props.aAuthenticate,aRegister:this.props.aRegister,aLogin:this.props.aLogin,aUpdatePassword:this.props.aUpdatePassword,aNotify:this.props.aNotify})),i.default.createElement("section",{className:"app-body"},i.default.createElement(p.default,{sOpenList:this.props.sOpenList,sUser:this.props.sUser,aOpenContent:this.props.aOpenContent,aNewRecipe:this.props.aNewRecipe,aCloseRecipe:this.props.aCloseRecipe}),i.default.createElement("div",{className:"site-body"},i.default.createElement(c.default,{sUser:this.props.sUser,aAuthenticate:this.props.aAuthenticate,aGetRecipe:this.props.aGetRecipe,aServerRequest:this.props.aServerRequest,aLogout:this.props.aLogout}),i.default.createElement("main",{className:"open-content"},e))))}});t.default=N},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(o),a=n(158),s=r(a),u=n(162),c=r(u);n(194);var l=i.default.createClass({displayName:"Header",userMenu:null,componentDidMount:function(){this.userMenu=s.default.findDOMNode(this).querySelector(".user-menu")},handleDismissOnClick:function(e){for(var t=e.target,n=!1;t&&t!=document.body;){if(t==this.userMenu){n=!0;break}t=t.parentNode}n||(this.userMenu.classList.remove("show-menu"),window.removeEventListener("click",this.handleDismissOnClick))},handleUserMenuClick:function(e){e.stopPropagation(),this.userMenu.classList.contains("show-menu")?(this.userMenu.classList.remove("show-menu"),window.removeEventListener("click",this.handleDismissOnClick)):(this.userMenu.classList.add("show-menu"),window.addEventListener("click",this.handleDismissOnClick))},handleAuthenticate:function(e){this.props.aAuthenticate(!0,"login")},handleLogout:function(e){e.stopPropagation(),this.props.aLogout()},render:function(){var e=i.default.createElement("nav",{className:"user-menu"},i.default.createElement("a",{className:"user-label",onClick:this.handleAuthenticate},"Log in"));return null!=this.props.sUser&&(e=i.default.createElement("nav",{className:"user-menu"},i.default.createElement("a",{onClick:this.handleUserMenuClick},i.default.createElement("label",{className:"user-label"},this.props.sUser.firstName+" "+this.props.sUser.lastName),i.default.createElement("div",{className:"ti-angle-down"})),i.default.createElement("div",{className:"menu-options"},i.default.createElement("a",{className:"item",onClick:this.handleLogout},"Log out")))),i.default.createElement("header",{className:"header-content"},i.default.createElement(c.default,{aGetRecipe:this.props.aGetRecipe,aServerRequest:this.props.aServerRequest}),e)}});t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(o),a=n(158),s=r(a),u=n(163),c=(r(u),n(186));r(c);n(192);var l=i.default.createClass({displayName:"Search",getInitialState:function(){return{fullList:[],filteredList:[],searchTerms:[],activeIndex:0}},getRegExObj:function(e){var t=null;try{t=new RegExp(e,"i")}catch(e){}return t},getHighlightedTitle:function(e){for(var t=e,n=0,r=0;r<this.state.searchTerms.length;r++){var o=this.state.searchTerms[r];if(""!=o){var i=this.getRegExObj(o),a=t.substring(n,t.length).match(i),s="<span class='highlight'>"+a[0]+"</span>",u=t.substring(0,n),c=t.substring(n,t.length);t=u+c.replace(i,s),n+=a.index+s.length}}return{__html:t}},getRecipeHTML:function(e,t){var n="row";return this.state.activeIndex==t&&(n+=" active"),i.default.createElement("div",{className:n,key:e.id,"data-id":e.id,onClick:this.select},i.default.createElement("div",{className:"row-content"},i.default.createElement("img",{className:"image",src:e.picture+"?"+e.dateModified}),i.default.createElement("div",{className:"details"},i.default.createElement("div",{className:"title",dangerouslySetInnerHTML:this.getHighlightedTitle(e.title)}),i.default.createElement("div",{className:"author"},e.firstName+" "+e.lastName))))},change:function(e){for(var t=e.target.value.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").split(" "),n="",r=0;r<t.length;r++)n+=t[r]+".*";var o=this.getRegExObj(n),i=[];if(null!==o)for(var a=0;a<this.state.fullList.length;a++){var s=this.state.fullList[a];o.test(s.title)&&i.push(s)}else i=this.state.fullList.slice(0);this.setState({filteredList:i,searchTerms:t,activeIndex:0})},focus:function(){var e=this;this.props.aServerRequest({action:"GET_LIST"},function(t){e.setState({fullList:t.slice(0),filteredList:t.slice(0)});var n=s.default.findDOMNode(e).querySelector(".results"),r=n.getBoundingClientRect();n.style.maxHeight=window.innerHeight-r.top+"px",window.addEventListener("keyup",e.keyup,!1),s.default.findDOMNode(e).classList.add("show")},!0)},blur:function(){this.setState({activeIndex:0}),window.removeEventListener("keyup",this.keyup,!1),s.default.findDOMNode(this).classList.remove("show")},select:function(e){for(var t=e.target;!t.classList.contains("row");)t=t.parentElement;var n=t.dataset.id;this.props.aGetRecipe(n)},keyup:function(e){if(40==e.keyCode){var t=this.state.activeIndex+1;t<this.state.filteredList.length&&this.setState({activeIndex:t})}else if(38==e.keyCode){var t=this.state.activeIndex-1;t>=0&&this.setState({activeIndex:t})}else 13==e.keyCode&&(s.default.findDOMNode(this).querySelector(".results .active").click(),s.default.findDOMNode(this).querySelector("input").blur())},render:function(){var e=this,t=this.state.filteredList.map(function(t,n){return e.getRecipeHTML(t,n)});return i.default.createElement("div",{className:"search"},i.default.createElement("input",{placeholder:"Search...",onFocus:this.focus,onBlur:this.blur,onChange:this.change}),i.default.createElement("div",{className:"results"},t))}});t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(o),a=n(164),s=r(a),u=n(169),c=r(u),l=n(175),p=r(l);n(184);var d=i.default.createClass({displayName:"Recipe",getInitialState:function(){return{editable:!1,validate:!1}},edit:function(){this.setState({editable:!0})},save:function(){this.setState({validate:!0});var e=this.validate(this.props.recipe);e&&(this.props.aSaveRecipe(this.props.recipe),this.setState({editable:!1,validate:!1}),this.props.aGetRecipe(this.props.recipe.id),this.props.aNotify(!0,"success","Recipe successfully saved.",500))},cancel:function(){this.setState({editable:!1,validate:!1}),this.props.aGetRecipe(this.props.recipe.id)},validate:function(e){var t=[];""==e.title&&t.push("Recipe title is required"),""==e.servings?t.push("Recipe servings are required"):e.servings<0&&t.push("Recipe servings must be positive"),0==e.ingredients.length&&t.push("Atleast one ingredient must be supplied");for(var n=!1,r=!1,o=!1,a=0;a<e.ingredients.length;a++){var s=e.ingredients[a];""!=s.quantity||n?s.quantity<0&&!n&&(t.push("Ingredient quantity must be positive"),n=!0):(t.push("Ingredient quantity is required"),n=!0),""!=s.units||r||(t.push("Ingredient units are required"),r=!0),""!=s.ingredientName||o||(t.push("Ingredient name is required"),o=!0)}0==e.steps.split("|").length&&t.push("Atleast one step must be supplied");for(var u=e.steps.split("|"),a=0;a<u.length;a++){var c=u[a];if(""==c){t.push("Step instructions are required");break}}if(t.length>0){var l=0,p=t.map(function(e){return l+=1,i.default.createElement("li",{key:l},e)}),d=i.default.createElement("div",{className:"validation"},i.default.createElement("h3",null,"Please correct flagged fields"),i.default.createElement("ul",null,p));return this.props.aNotify(!0,"error",d,null),!1}return!0},render:function(){return i.default.createElement("main",{className:"full-recipe"},i.default.createElement(p.default,{recipe:this.props.recipe,edit:this.edit,save:this.save,cancel:this.cancel,aUpdateValue:this.props.aUpdateValue,editable:this.state.editable,validate:this.state.validate,sUser:this.props.sUser}),i.default.createElement("main",{className:"recipe-body"},i.default.createElement(c.default,{ingredients:this.props.recipe.ingredients,aUpdateValue:this.props.aUpdateValue,aAddIngredient:this.props.aAddIngredient,editable:this.state.editable,validate:this.state.validate,aServerRequest:this.props.aServerRequest}),i.default.createElement(s.default,{steps:this.props.recipe.steps,aUpdateValue:this.props.aUpdateValue,aAddStep:this.props.aAddStep,editable:this.state.editable,validate:this.state.validate})))}});t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(o),a=n(158),s=r(a);n(165);var u=i.default.createClass({displayName:"Steps",renderDisplay:function(e){var t=0;return e.map(function(e){return""==e&&(e="Please enter a step description..."),i.default.createElement("li",{className:"individual-step",key:t++},e)})},renderForm:function(e){var t=this,n=-1;return e.map(function(e){n+=1;var r;return t.props.validate&&(null!=e&&""!=e||(r="required")),i.default.createElement("li",{className:"individual-step",key:n,"data-index":n},i.default.createElement("div",{className:"step-content"},i.default.createElement("textarea",{value:e,placeholder:"Please enter a step description...",className:r,onChange:t.updateStep}),i.default.createElement("a",{className:"ti-trash",onClick:t.deleteStep})))})},updateStep:function(e){for(var t="",n=s.default.findDOMNode(this).querySelector(".steps-list").childNodes,r=0;r<n.length;r++){var o=n[r].querySelector("textarea").value;t+=o,r<n.length-1&&(t+="|")}this.props.aUpdateValue("steps",t)},deleteStep:function(e){for(var t=e.target;t&&!t.classList.contains("individual-step");)t=t.parentNode;for(var n=s.default.findDOMNode(this).querySelector(".steps-list").childNodes,r=null,o=0;o<n.length;o++)if(n[o]===t){r=o;break}if(null!=r){var i=this.props.steps.split("|");i.splice(r,1),this.props.aUpdateValue("steps",i.join("|"))}},render:function(){var e,t=[""];null!=this.props.steps&&(t=this.props.steps.split("|"));var n;return this.props.editable?(e=this.renderForm(t),n=i.default.createElement("div",{className:"add-new",onClick:this.props.aAddStep},i.default.createElement("a",{className:"ti-plus"}),i.default.createElement("label",null,"Add step"))):e=this.renderDisplay(t),i.default.createElement("section",{className:"recipe-steps"},i.default.createElement("label",{className:"data-label"},"Directions"),i.default.createElement("ol",{className:"steps-list"},e),n)}});t.default=u},function(e,t,n){"use strict";var r=n(166);"string"==typeof r&&(r=[[e.id,r,""]]);n(168)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(167)(),t.push([e.id,".recipe-steps .steps-list .individual-step{padding:5px}.recipe-steps .steps-list .step-content{width:100%;display:inline-flex;flex-direction:row;align-items:center}.recipe-steps .steps-list .step-content textarea{width:100%;resize:vertical}",""])},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<t.length;o++){var a=t[o];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(e,t,n){function r(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=f[r.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](r.parts[i]);for(;i<r.parts.length;i++)o.parts.push(c(r.parts[i],t))}else{for(var a=[],i=0;i<r.parts.length;i++)a.push(c(r.parts[i],t));f[r.id]={id:r.id,refs:1,parts:a}}}}function o(e){for(var t=[],n={},r=0;r<e.length;r++){var o=e[r],i=o[0],a=o[1],s=o[2],u=o[3],c={css:a,media:s,sourceMap:u};n[i]?n[i].parts.push(c):t.push(n[i]={id:i,parts:[c]})}return t}function i(e,t){var n=v(),r=_[_.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),_.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function a(e){e.parentNode.removeChild(e);var t=_.indexOf(e);t>=0&&_.splice(t,1)}function s(e){var t=document.createElement("style");return t.type="text/css",i(e,t),t}function u(e){var t=document.createElement("link");return t.rel="stylesheet",i(e,t),t}function c(e,t){var n,r,o;if(t.singleton){var i=y++;n=g||(g=s(t)),r=l.bind(null,n,i,!1),o=l.bind(null,n,i,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=u(t),r=d.bind(null,n),o=function(){a(n),n.href&&URL.revokeObjectURL(n.href);
}):(n=s(t),r=p.bind(null,n),o=function(){a(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}function l(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=E(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function p(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function d(e,t){var n=t.css,r=t.sourceMap;r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var o=new Blob([n],{type:"text/css"}),i=e.href;e.href=URL.createObjectURL(o),i&&URL.revokeObjectURL(i)}var f={},h=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},m=h(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),v=h(function(){return document.head||document.getElementsByTagName("head")[0]}),g=null,y=0,_=[];e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=m()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var n=o(e);return r(n,t),function(e){for(var i=[],a=0;a<n.length;a++){var s=n[a],u=f[s.id];u.refs--,i.push(u)}if(e){var c=o(e);r(c,t)}for(var a=0;a<i.length;a++){var u=i[a];if(0===u.refs){for(var l=0;l<u.parts.length;l++)u.parts[l]();delete f[u.id]}}}};var E=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(o),a=n(158),s=(r(a),n(170)),u=r(s);n(173);var c=i.default.createClass({displayName:"Ingredients",getInitialState:function(){return{ingredients:[],units:[]}},componentWillMount:function(){var e=this;this.props.aServerRequest({action:"GET_DATA_INGREDIENTS"},function(t){e.setState({ingredients:t})},!0),this.props.aServerRequest({action:"GET_DATA_UNITS"},function(t){e.setState({units:t})},!0)},saveIngredients:function(e,t){for(var n=e.target.value,r=null,o=e.currentTarget;null==r;){if(null!=o.dataset.ingKey){r=o.dataset.ingKey;break}o=o.parentNode}var i=this.props.ingredients;i[r][t]=n,this.setState({currentIngredients:i}),this.props.aUpdateValue("ingredients",this.props.ingredients)},updateQuantity:function(e){this.saveIngredients(e,"quantity")},updateUnit:function(e){this.saveIngredients(e,"units")},updateIngredientName:function(e){this.saveIngredients(e,"ingredientName")},deleteIngredient:function(e){var t=e.target.parentNode.dataset.ingKey,n=this.props.ingredients;0==t&&1==n.length?(n[0].quantity="",n[0].units="",n[0].ingredientName=""):n.splice(t,1),this.props.aUpdateValue("ingredients",n)},renderDisplay:function(){var e=0,t=this.props.ingredients.map(function(t){return""==t.ingredientName?i.default.createElement("li",{key:e++},"Please enter ingredient..."):i.default.createElement("li",{key:e++},t.quantity+" "+t.units+" "+t.ingredientName)});return i.default.createElement("ul",null,t)},renderForm:function(){for(var e=-1,t=this,n=[],r=0;r<this.state.ingredients.length;r++)n.push(this.state.ingredients[r].ingredientName);var o=this.props.ingredients.map(function(r){var o="quantity",a="units",s="name";return t.props.validate&&((null==r.quantity||""==r.quantity||r.quantity<0)&&(o+=" required"),null!=r.units&&""!=r.units||(a+=" required"),null!=r.ingredientName&&""!=r.ingredientName||(s+=" required")),e++,i.default.createElement("li",{key:e,"data-ing-key":e,className:"ingredient column column-3"},i.default.createElement("input",{value:r.quantity,type:"number",placeholder:"Quantity...",className:o,onChange:t.updateQuantity}),i.default.createElement(u.default,{value:r.units,placeholder:"Unit...",customClass:a,source:t.state.units,change:t.updateUnit}),i.default.createElement(u.default,{value:r.ingredientName,placeholder:"Ingredient...",customClass:s,source:n,change:t.updateIngredientName}),i.default.createElement("a",{className:"ti-trash",onClick:t.deleteIngredient}))});return i.default.createElement("ul",{className:"editable"},o,i.default.createElement("li",{onClick:this.props.aAddIngredient,className:"add-new"},i.default.createElement("a",{className:"ti-plus"}),i.default.createElement("label",null,"Add ingredient")))},render:function(){var e;return e=this.props.editable?this.renderForm():this.renderDisplay(),i.default.createElement("section",{className:"recipe-ingredients"},i.default.createElement("label",{className:"data-label"},"Ingredients"),e)}});t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(o),a=n(158),s=r(a);n(171);var u=i.default.createClass({displayName:"AutoComplete",getInitialState:function(){return{fullList:this.props.source,filteredList:[],searchTerms:[],activeIndex:0}},getItemHTML:function(e){for(var t=e,n=0,r=0;r<this.state.searchTerms.length;r++){var o=this.state.searchTerms[r];if(""!=o){var i="",a=this.getRegExObj(o),s=t.substring(n,t.length).match(a),u=t.substring(0,n),c=t.substring(n,t.length);null!=s&&(i="<span class='highlight'>"+s[0]+"</span>",n+=s.index+i.length),t=u+c.replace(a,i)}}return{__html:t}},getRegExObj:function(e){var t=null;try{t=new RegExp(e,"i")}catch(e){}return t},resize:function(){var e=s.default.findDOMNode(this).querySelector(".results"),t=s.default.findDOMNode(this).getBoundingClientRect(),n=e.getBoundingClientRect();e.style.maxHeight=window.innerHeight-n.top+"px",e.style.top=t.height+"px"},keyup:function(e){if(40==e.keyCode){var t=this.state.activeIndex+1;t<this.state.filteredList.length&&this.setState({activeIndex:t})}else if(38==e.keyCode){var t=this.state.activeIndex-1;t>=0&&this.setState({activeIndex:t})}else if(13==e.keyCode){var n=s.default.findDOMNode(this).querySelector(".results").childNodes;n[this.state.activeIndex].click(),s.default.findDOMNode(this).querySelector("input").blur()}},change:function(e){for(var t=s.default.findDOMNode(this).querySelector("input").value,n=(s.default.findDOMNode(this).querySelector(".results"),t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").split(" ")),r="",o=0;o<n.length;o++)r+=n[o]+".*";var i=this.getRegExObj(r),a=[];if(null!==i)for(var u=0;u<this.state.fullList.length;u++){var c=this.state.fullList[u];i.test(c)&&a.push(c)}else a=this.state.fullList.slice(0);this.setState({filteredList:a,fullList:this.props.source,searchTerms:n}),this.resize(),this.props.change(e)},focus:function(e){this.change(e),window.addEventListener("scroll",this.resize,!0),window.addEventListener("resize",this.resize,!1),window.addEventListener("keyup",this.keyup,!1),s.default.findDOMNode(this).classList.add("show"),this.setState({activeIndex:0})},blur:function(e){window.removeEventListener("scroll",this.resize,!0),window.removeEventListener("resize",this.resize,!1),window.removeEventListener("keyup",this.keyup,!1),s.default.findDOMNode(this).classList.remove("show")},select:function(e){for(var t=e.target;null!=t&&!t.classList.contains("item"););s.default.findDOMNode(this).querySelector("input").value=t.innerText,e.target=s.default.findDOMNode(this).querySelector("input"),this.change(e)},render:function(){var e=this,t=-1,n=this.state.filteredList.map(function(n,r){var o="item";return r==e.state.activeIndex&&(o+=" active"),i.default.createElement("div",{key:t++,className:o,onClick:e.select,dangerouslySetInnerHTML:e.getItemHTML(n)})}),r="autocomplete "+this.props.customClass;return i.default.createElement("div",{className:r},i.default.createElement("input",{value:this.props.value,placeholder:this.props.placeholder,onChange:this.change,onFocus:this.focus,onBlur:this.blur}),i.default.createElement("div",{className:"results"},n))}});t.default=u},function(e,t,n){"use strict";var r=n(172);"string"==typeof r&&(r=[[e.id,r,""]]);n(168)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(167)(),t.push([e.id,".autocomplete{position:relative}.autocomplete.show input{border-radius:5px 5px 0 0}.autocomplete.show .results{transform:perspective(0) rotateX(0deg)}.autocomplete .results{color:#585658;background-color:#fff;box-shadow:5px 5px 10px #000;position:absolute;left:0;right:0;transform:perspective(800px) rotateX(-90deg);transform-origin:top;transition:all .5s linear;z-index:10;overflow:scroll}.autocomplete .results .item{padding:5px;border-bottom:1px solid #2e2c2d;cursor:pointer}.autocomplete .results .item .highlight{font-weight:700;font-size:20px;color:#2e2c2d}.autocomplete .results .item:last-child{border-bottom:none}.autocomplete .results .item.active,.autocomplete .results .item:hover{background-color:#2e2c2d;color:#b3afaf}.autocomplete .results .item.active .highlight,.autocomplete .results .item:hover .highlight{color:#f1f1f1}",""])},function(e,t,n){"use strict";var r=n(174);"string"==typeof r&&(r=[[e.id,r,""]]);n(168)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(167)(),t.push([e.id,".recipe-ingredients ul{padding:0}.recipe-ingredients ul li{display:flex;align-items:center;padding:5px}.recipe-ingredients ul li input.required{background-color:#f96666}.recipe-ingredients ul li .quantity{width:5em;text-align:center}.recipe-ingredients ul li .units{display:flex;width:8em;margin:0 5px}.recipe-ingredients ul li .units input{width:100%}.recipe-ingredients ul li .name{flex:1;display:flex;margin-right:5px}.recipe-ingredients ul li .name input{flex:1}.recipe-ingredients ul .ti-trash{align-self:center}",""])},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(o),a=n(176),s=r(a),u=n(179),c=r(u);n(182);var l=i.default.createClass({displayName:"RecipeHeader",updateTitle:function(e){this.props.aUpdateValue("title",e.target.value)},updatePrepTime:function(e){this.props.aUpdateValue("prepTime",e)},updateCookTime:function(e){this.props.aUpdateValue("cookTime",e)},updateServings:function(e){this.props.aUpdateValue("servings",e.target.value)},afterImageCrop:function(e){this.props.aUpdateValue("picture",e)},handlePublicChange:function(e){this.props.aUpdateValue("public",e.target.checked)},render:function(){var e=this.props.recipe.dateModified.split(/[- :]/),t=new Date(Date.UTC(e[0],e[1]-1,e[2],e[3],e[4],e[5])),n=this.props.editable?"recipe-info editable":"recipe-info";if(this.props.recipe.public)var r=i.default.createElement("label",{className:"public-note"},"This recipe is public (Everyone can view)");else var r=i.default.createElement("label",{className:"public-note"},"This recipe is private (Only you can view)");var o=this.props.recipe.title;this.props.editable||""!=o&&"New..."!=o||(o="Please enter a new title ...");var a="title";!this.props.validate||null!=this.props.recipe.title&&""!=this.props.recipe.title||(a+=" required");var u="id-"+(new Date).getTime(),l="";null!=this.props.sUser&&this.props.sUser.userId==this.props.recipe.creator&&(l=i.default.createElement("div",null,i.default.createElement("span",{className:"ti-save",onClick:this.props.save}),i.default.createElement("span",{className:"ti-close",onClick:this.props.cancel}),i.default.createElement("span",{className:"ti-pencil",onClick:this.props.edit})));var p=i.default.createElement("span",{className:"text"},this.props.recipe.servings);if(this.props.editable){var d="serving-value";this.props.validate&&(null==this.props.recipe.servings||""==this.props.recipe.servings||this.props.recipe.servings<0)&&(d+=" required"),p=i.default.createElement("input",{type:"number",className:d,value:this.props.recipe.servings,onChange:this.updateServings})}return i.default.createElement("header",{className:"recipe-header"},i.default.createElement("div",{className:n},i.default.createElement("div",{className:"recipe-title"},i.default.createElement("input",{className:a,value:this.props.recipe.title,placeholder:"Please enter a new title ...",onChange:this.updateTitle}),i.default.createElement("span",{className:a},o),l),i.default.createElement("div",{className:"time-info"},i.default.createElement("span",{className:"ti-timer"}),i.default.createElement("span",{className:"prep-time"},i.default.createElement("label",null,"Prep"),i.default.createElement(c.default,{value:this.props.recipe.prepTime,customClass:"prep-time",editable:this.props.editable,update:this.updatePrepTime})),i.default.createElement("span",{className:"cook-time"},i.default.createElement("label",null,"Cook"),i.default.createElement(c.default,{value:this.props.recipe.cookTime,customClass:"cook-time",editable:this.props.editable,update:this.updateCookTime})),i.default.createElement("span",{className:"ti-pie-chart"}),i.default.createElement("span",{className:"servings"},p,i.default.createElement("label",null,"servings"))),i.default.createElement("div",{className:"addition-info"},i.default.createElement("span",{className:"author"},this.props.recipe.firstName+" "+this.props.recipe.lastName),i.default.createElement("span",{className:"creation-date"}," (",t.toDateString(),")")),i.default.createElement("div",{className:"public-option"},r,i.default.createElement("label",{className:"toggle-label"},"Make recipe public"),i.default.createElement("label",{id:u,className:"toggle-switch"},i.default.createElement("input",{htmlFor:u,type:"checkbox",checked:this.props.recipe.public,onChange:this.handlePublicChange}),i.default.createElement("span",{className:"slider"})))),i.default.createElement(s.default,{image:this.props.recipe.picture+"?"+this.props.recipe.dateModified,editable:this.props.editable,onAfterCrop:this.afterImageCrop}))}});t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(o),a=n(158),s=r(a);n(177);var u=i.default.createClass({displayName:"Cropper",getInitialState:function(){return{dragging:!1,zoomHeld:!1,zoomTimer:null,zoomingInterval:null,zoomDirection:null,image:{},mouse:{x:null,y:null},preview:null,currentUrl:null,zoom:1}},componentDidUpdate:function(){var e=s.default.findDOMNode(this).querySelector(".canvas").getContext("2d");e.clearRect(0,0,this.props.width,this.props.height),this.addImageToCanvas(e,this.state.image)},isDataURL:function(e){return!!e.match(/^\s*data:([a-z]+\/[a-z]+(;[a-z\-]+\=[a-z\-]+)?)?(;base64)?,[a-z0-9\!\$\&\'\,\(\)\*\+\,\;\=\-\.\_\~\:\@\/\?\%\s]*\s*$/i)},fitImageToCanvas:function(e,t){var n,r,o=this.props.height/this.props.width,i=t/e;if(o>i){n=this.props.height;var a=n/t;r=e*a}else{r=this.props.width;var s=r/e;n=t*s}return{width:r,height:n}},prepareImage:function(e,t){var n=this,r=new Image;this.isDataURL(e)||(r.crossOrigin="anonymous"),r.onload=function(){var e=n.fitImageToCanvas(r.width,r.height);e.resource=r,e.x=0,e.y=0,n.setState({dragging:!1,image:e,preview:n.toDataURL()}),t()},r.src=e},preventSelection:function(e){if(this.state.dragging)return e.preventDefault(),!1},boundedCoords:function(e,t,n,r){var o=e-n,i=t-r,a=this.state.image.width*this.state.zoom,s=(a-this.state.image.width)/2,u=(this.state.image.x-s,this.props.width);e=o-s>0?s:o<-a+u?u-a:o;var c=this.state.image.height*this.state.zoom,l=(c-this.state.image.height)/2,p=(this.state.image.y-l,this.props.height);return t=i-l>0?l:i<-c+p?p-c:i,{x:e,y:t}},addImageToCanvas:function(e,t){if(t.resource){e.save(),e.globalCompositeOperation="destination-over";var n=this.state.image.width*this.state.zoom,r=this.state.image.height*this.state.zoom,o=t.x-(n-this.state.image.width)/2,i=t.y-(r-this.state.image.height)/2;o=Math.min(o,0),i=Math.min(i,0),i=r+i>=this.props.height?i:i+(this.props.height-(r+i)),o=n+o>=this.props.width?o:o+(this.props.width-(n+o)),e.drawImage(t.resource,o,i,t.width*this.state.zoom,t.height*this.state.zoom),e.restore()}},toDataURL:function(){var e=document.createElement("canvas"),t=e.getContext("2d");return e.width=this.props.width,e.height=this.props.height,this.addImageToCanvas(t,{resource:this.state.image.resource,x:this.state.image.x,y:this.state.image.y,height:this.state.image.height,width:this.state.image.width}),e.toDataURL()},handleClose:function(e){var t=s.default.findDOMNode(this).querySelector(".canvas");window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("mouseup",this.handleMouseUp),t.removeEventListener("mousedown",this.handleMouseDown),s.default.findDOMNode(this).classList.remove("show")},handleMouseDown:function(e){this.setState({image:this.state.image,dragging:!0,mouse:{x:null,y:null}})},handleMouseUp:function(e){this.setState({dragging:!1,preview:this.toDataURL()})},handleMouseMove:function(e){if(this.state.dragging){var t=e.clientX,n=e.clientY,r=this.state.image.x,o=this.state.image.y,i=this.state.image;if(this.state.mouse.x&&this.state.mouse.y){var a=this.state.mouse.x-t,s=this.state.mouse.y-n,u=this.boundedCoords(r,o,a,s);i.x=u.x,i.y=u.y}this.setState({image:this.state.image,mouse:{x:t,y:n}})}},handleUpload:function(e){var t=this,n=new FormData;n.append("img",e.target.files[0]),n.append("action","UPLOAD_IMAGE"),e.target.value="";var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4==r.readyState){var e=JSON.parse(this.responseText),n=setTimeout(function(){s.default.findDOMNode(t).classList.add("loading")},100),o=function(){var e=s.default.findDOMNode(t).querySelector(".canvas");window.addEventListener("mousemove",t.handleMouseMove,!1),window.addEventListener("mouseup",t.handleMouseUp,!1),e.addEventListener("mousedown",t.handleMouseDown,!1),s.default.findDOMNode(t).classList.add("show"),clearTimeout(n),s.default.findDOMNode(t).classList.remove("loading")};t.prepareImage(e.url,o),t.setState({currentUrl:e.url,zoom:1})}},r.open("POST","processAction.php",!0),r.send(n)},handleCrop:function(){var e=this.toDataURL(),t=this,n=new FormData;n.append("image",e),n.append("action","CROP_IMAGE"),n.append("url",this.state.currentUrl);var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4==r.readyState){var e=JSON.parse(this.responseText);t.props.onAfterCrop(e.url),t.handleClose()}},r.open("POST","processAction.php",!0),r.send(n)},handleZoomMouseDown:function(e){var t=this;e.target.classList.contains("zoom-in")?this.setState({zoomDirection:"in"}):this.setState({zoomDirection:"out"});var n=setTimeout(function(){var e=setInterval(t.handleZoom,25);t.setState({zoomingInterval:e})},500);this.setState({zoomTimer:n,zoomHeld:!0})},handleZoomMouseUp:function(e){this.state.zoomTimer&&clearTimeout(this.state.zoomTimer),this.state.zoomingInterval&&clearInterval(this.state.zoomingInterval),this.setState({zoomTimer:null,zoomingInterval:null,zoomHeld:!1,zoomDirection:null})},handleZoom:function(e){if(e&&e.target.classList.contains("zoom-in")||"in"==this.state.zoomDirection){var t=this.state.zoom+.01;t<=3&&this.setState({zoom:t})}else{var t=this.state.zoom-.01;t>=1&&this.setState({zoom:t})}},render:function(){var e="file-"+(new Date).getTime();return i.default.createElement("div",{className:"cropper"},i.default.createElement("div",{className:"display"},this.props.editable&&i.default.createElement("div",null,i.default.createElement("label",{htmlFor:e,className:"ti-settings"}),i.default.createElement("input",{id:e,type:"file",accept:"image/*",onChange:this.handleUpload})),i.default.createElement("img",{className:"display",src:this.props.image})),i.default.createElement("div",{className:"container"},i.default.createElement("div",{className:"mask"}),i.default.createElement("div",{className:"content"},i.default.createElement("div",{className:"toolbar"},i.default.createElement("a",{className:"ti-minus zoom-out",onClick:this.handleZoom,onMouseDown:this.handleZoomMouseDown,onMouseUp:this.handleZoomMouseUp}),i.default.createElement("a",{className:"ti-plus zoom-in",onClick:this.handleZoom,onMouseDown:this.handleZoomMouseDown,onMouseUp:this.handleZoomMouseUp}),i.default.createElement("a",{className:"ti-check",onClick:this.handleCrop}),i.default.createElement("a",{className:"ti-close",onClick:this.handleClose})),i.default.createElement("canvas",{className:"canvas",width:this.props.width,height:this.props.height}))))}});u.propTypes={image:i.default.PropTypes.string.isRequired,width:i.default.PropTypes.number,height:i.default.PropTypes.number,zoom:i.default.PropTypes.number,editable:i.default.PropTypes.bool,onAfterCrop:i.default.PropTypes.func},u.defaultProps={width:400,height:400,zoom:1,editable:!0,onAfterCrop:function(e){}},t.default=u},function(e,t,n){"use strict";var r=n(178);"string"==typeof r&&(r=[[e.id,r,""]]);n(168)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(167)(),t.push([e.id,".cropper .display{position:relative}.cropper .display .ti-settings{position:absolute;top:0;right:0;padding:5px;margin:10px;font-size:2em;font-weight:700;color:hsla(0,0%,100%,.75);background-color:rgba(0,0,0,.75);z-index:1}.cropper .display .ti-settings:hover{color:#fff}.cropper .container,.cropper .display input[type=file]{display:none}.cropper .container .mask{position:fixed;top:0;left:0;bottom:0;right:0;background-color:#000;opacity:.85;z-index:5000}.cropper .container .canvas{cursor:move}.cropper .container .content{position:absolute;top:50%;left:50%;margin-top:-200px;margin-left:-200px;width:400px;height:400px;z-index:5001}.cropper .container .content .toolbar{position:absolute;top:0;right:0;background-color:rgba(0,0,0,.75);margin:10px;text-align:center}.cropper .container .content .toolbar a{color:#f1f1f1;opacity:.75;display:inline-block;padding:5px;font-size:2em;font-weight:700}.cropper .container .content .toolbar a:hover{opacity:1}.cropper .container .content .toolbar .ti-check{color:#13cc13}.cropper .container .content .toolbar .ti-close{color:red}.cropper.show .container{display:block}",""])},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(o),a=n(158),s=r(a);n(180);var u=i.default.createClass({displayName:"Time",getInitialState:function(){for(var e=this.props.value.split(":"),t={selectedHour:e[0],selectedMinute:e[1],hourList:[],minuteList:[]},n=0;n<=24;n++){var r=n<10?"0"+n:n;t.hourList.push(r.toString())}for(var n=0;n<60;n++){var r=n<10?"0"+n:n;t.minuteList.push(r.toString())}return t},scrollIntoView:function(e){var t=this,n=s.default.findDOMNode(this).querySelector(".results");n.querySelector(e).scrollTop=0,setTimeout(function(){var r=n.getBoundingClientRect(),o=n.querySelector(e+" .item.active").getBoundingClientRect();if(o.top>r.bottom){var i=o.top-r.top;t.scrollTo(n.querySelector(e),i,1e3)}},500)},scrollTo:function(e,t,n){if(!(n<=0)){var r=t-e.scrollTop,o=r/n*10,i=this;setTimeout(function(){e.scrollTop=e.scrollTop+o,e.scrollTop!==t&&i.scrollTo(e,t,n-10)},10)}},dismiss:function(e,t){for(var n=e.target;null!=n;){if(n==s.default.findDOMNode(this).querySelector(".results"))return!1;n=n.parentNode}window.removeEventListener("click",this.dismiss,!0),s.default.findDOMNode(this).classList.remove("show")},focus:function(e){var t=this;setTimeout(function(){window.addEventListener("click",t.dismiss,!0)},500),s.default.findDOMNode(this).classList.add("show"),this.scrollIntoView(".hours"),this.scrollIntoView(".minutes")},select:function(e,t){var n=(s.default.findDOMNode(this).querySelector("input"),["00","00"]);null!=t.selectedHour&&(n[0]=t.selectedHour),null!=t.selectedMinute&&(n[1]=t.selectedMinute),this.props.update(n.join(":")),this.setState(t)},selectMinute:function(e){var t={selectedHour:this.state.selectedHour,selectedMinute:e.target.innerText};this.select(e,t)},selectHour:function(e){var t={selectedHour:e.target.innerText,selectedMinute:this.state.selectedMinute};this.select(e,t)},render:function(){var e=this,t=this.state.hourList.map(function(t){var n="item",r=!1;return t==e.state.selectedHour&&(n+=" active",r=!0),i.default.createElement("li",{key:t,className:n,onClick:e.selectHour},t)}),n=this.state.minuteList.map(function(t){var n="item",r=!1;return t==e.state.selectedMinute&&(n+=" active",r=!0),i.default.createElement("li",{key:t,className:n,onClick:e.selectMinute},t)}),r="time-picker "+this.props.customClass,o=i.default.createElement("span",null,this.props.value);return this.props.editable&&(o=i.default.createElement("input",{readOnly:"true",value:this.props.value,onFocus:this.focus})),i.default.createElement("div",{className:r},o,i.default.createElement("div",{className:"results"},i.default.createElement("ul",{className:"hours"},t),i.default.createElement("ul",{className:"minutes"},n)))}});t.default=u},function(e,t,n){"use strict";var r=n(181);"string"==typeof r&&(r=[[e.id,r,""]]);n(168)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(167)(),t.push([e.id,".time-picker{position:relative;width:58px;height:24px}.time-picker input{width:40px;transition:width .5s;margin:0;cursor:pointer}.time-picker.show input{position:absolute;top:0;bottom:0;z-index:1;width:107px;border-radius:5px 5px 0 0;border-bottom:none;box-shadow:5px 5px 10px #000}.time-picker.show .results{transform:perspective(0) rotateX(0deg)}.time-picker .results{color:#585658;background-color:#fff;box-shadow:5px 5px 10px #000;position:absolute;top:100%;transform:perspective(800px) rotateX(-90deg);transform-origin:top;transition:all .5s linear;z-index:2;overflow:hidden;height:180px;display:flex;flex-direction:row;align-items:stretch;border:1px solid #585658}.time-picker .results .hours{border-right:1px solid #585658}.time-picker .results .hours,.time-picker .results .minutes{width:56px;overflow-y:scroll;margin:0;padding:0}.time-picker .results .item{padding:5px;padding:5px 5px 5px 16px;cursor:pointer}.time-picker .results .item:last-child{border-bottom:none}.time-picker .results .item.active,.time-picker .results .item:hover{background-color:#2e2c2d;color:#b3afaf}",""])},function(e,t,n){"use strict";var r=n(183);"string"==typeof r&&(r=[[e.id,r,""]]);n(168)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(167)(),t.push([e.id,".recipe-header{display:flex;flex-direction:row;justify-content:space-between;align-items:flex-start}.recipe-header .recipe-info{display:flex;flex-direction:column;padding:50px 25px 50px 75px;width:100%}.recipe-header .recipe-info .recipe-title{display:flex;align-items:center}.recipe-header .recipe-info.editable .public-note,.recipe-header .recipe-info.editable .ti-pencil,.recipe-header .recipe-info.editable .title{display:none}.recipe-header .recipe-info.editable .ti-close,.recipe-header .recipe-info.editable .ti-save,.recipe-header .recipe-info.editable .toggle-label,.recipe-header .recipe-info.editable .toggle-switch,.recipe-header .recipe-info.editable input.title{display:inline-block}.recipe-header .recipe-info .ti-pencil,.recipe-header .recipe-info .ti-save{padding-left:10px}.recipe-header .recipe-info .ti-close,.recipe-header .recipe-info .ti-pencil,.recipe-header .recipe-info .ti-save{color:#585658;font-size:2.25em}.recipe-header .recipe-info .ti-close:hover,.recipe-header .recipe-info .ti-pencil:hover,.recipe-header .recipe-info .ti-save:hover{color:#2e2c2d}.recipe-header .recipe-info .title{color:#2e2c2d;font-size:2.25em;display:flex;padding:5px;border:1px solid transparent;font-family:TensoMedium,TensoLight,Helvetica Neue,Helvetica,Arial,sans-serif}.recipe-header .recipe-info input.title{border:1px solid #2e2c2d;flex:1;display:none}.recipe-header .recipe-info .ti-save{padding-right:10px}.recipe-header .recipe-info .ti-close,.recipe-header .recipe-info .ti-save{display:none}.recipe-header .recipe-info .addition-info,.recipe-header .recipe-info .public-option{font-size:.75em;color:#585658;padding:5px 0 0 9px;display:flex;flex-direction:row;align-items:center}.recipe-header .recipe-info .public-option{height:30px}.recipe-header .recipe-info .toggle-switch{transform:scale(.5);display:none}.recipe-header .recipe-info .toggle-label{display:none}.recipe-header .recipe-info .author{padding-right:5px}.recipe-header .recipe-info .time-info{height:50px;display:flex;flex-direction:row;justify-content:flex-start;align-items:center;font-size:.75em;color:#585658;padding:0 7px}.recipe-header .recipe-info .time-info .serving-value{width:3em}.recipe-header .recipe-info .time-info .cook-time,.recipe-header .recipe-info .time-info .prep-time{display:flex;flex-direction:column;justify-content:center;padding-right:10px}.recipe-header .recipe-info .time-info .cook-time>span,.recipe-header .recipe-info .time-info .prep-time>span{display:inline-block}.recipe-header .recipe-info .time-info .time-picker.prep-time{z-index:3}.recipe-header .recipe-info .time-info .ti-pie-chart,.recipe-header .recipe-info .time-info .ti-timer{font-size:1.3em;padding-right:10px;cursor:default}.recipe-header .recipe-info .time-info .servings>label{padding-left:5px}@media only screen and (min-device-width:320px) and (max-device-width:480px){.recipe-header{display:block;position:relative;margin:0 10px;height:300px}.recipe-header .cropper,.recipe-header .recipe-info{position:absolute;top:0;right:0;bottom:0;left:0}.recipe-header .recipe-info{padding:25px;z-index:2}.recipe-header .cropper{z-index:1;overflow:hidden}.recipe-header .cropper .display{width:100%}}",""])},function(e,t,n){"use strict";var r=n(185);"string"==typeof r&&(r=[[e.id,r,""]]);n(168)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(167)(),t.push([e.id,".full-recipe .autocomplete.required input,.full-recipe input.required,.full-recipe textarea.required{background-color:#f96666}.full-recipe .recipe-images{display:flex;flex-direction:column;justify-content:center;align-items:center;padding:10px 0}.full-recipe .recipe-body{padding:10px;margin:0;display:flex;justify-content:space-between;align-items:stretch}.full-recipe .recipe-body>section{color:#2e2c2d;background-color:#fff;flex:1;padding:10px}.full-recipe .recipe-body>section:first-child{margin-right:10px}.full-recipe .add-new{color:#585658;display:inline-flex;align-items:center;cursor:pointer}.full-recipe .add-new:hover{color:#2e2c2d}.full-recipe .add-new:hover label{text-decoration:underline}.full-recipe .add-new .ti-plus{padding-right:5px}.full-recipe .add-new label{cursor:pointer}@media only screen and (min-device-width:320px) and (max-device-width:480px){.full-recipe .recipe-body{flex-direction:column}.full-recipe .recipe-body>section:first-child{margin-right:0}}",""])},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(187),i=r(o),a=n(188),s=r(a),u={saveRecipe:function(e){s.default.dispatch({action:i.default.SAVE_RECIPE,recipe:e})},getRecipe:function(e){s.default.dispatch({action:i.default.GET_RECIPE,id:e})},newRecipe:function(){s.default.dispatch({action:i.default.NEW_RECIPE})},closeRecipe:function(e){s.default.dispatch({action:i.default.CLOSE_RECIPE,id:e})},addIngredient:function(){s.default.dispatch({action:i.default.ADD_INGREDIENT})},addStep:function(){s.default.dispatch({action:i.default.ADD_STEP})},deleteStep:function(e){s.default.dispatch({action:i.default.DELETE_STEP,index:e})},deleteIngredient:function(e){s.default.dispatch({action:i.default.DELETE_INGREDIENT,index:e})},updateValue:function(e,t){s.default.dispatch({action:i.default.UPDATE_VALUE,key:e,value:t})},openContent:function(e){s.default.dispatch({action:i.default.OPEN_CONTENT,key:e})},serverRequest:function(e,t,n){s.default.dispatch({action:i.default.SERVER_REQUEST,data:e,async:n,callback:t})},authenticate:function(e,t){s.default.dispatch({action:i.default.AUTHENTICATE,active:e,type:t})},register:function(e,t,n,r,o){s.default.dispatch({action:i.default.REGISTER,firstName:e,lastName:t,username:n,email:r,callback:o})},updateUserStatus:function(e,t){s.default.dispatch({action:i.default.UPDATE_USER_STATUS,userId:e,status:t})},login:function(e,t,n){s.default.dispatch({action:i.default.LOGIN,username:e,password:t,callback:n})},logout:function(){s.default.dispatch({action:i.default.LOGOUT})},updatePassword:function(e,t,n){s.default.dispatch({action:i.default.UPDATE_PASSWORD,userId:e,oldPassword:t,
newPassword:n})},notify:function(e,t,n,r){s.default.dispatch({action:i.default.NOTIFY,active:e,type:t,message:n,timer:r})}};t.default=u},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={SAVE_RECIPE:"SAVE_RECIPE",GET_RECIPE:"GET_RECIPE",NEW_RECIPE:"NEW_RECIPE",ADD_INGREDIENT:"ADD_INGREDIENT",ADD_STEP:"ADD_STEP",UPDATE_VALUE:"UPDATE_VALUE",SERVER_REQUEST:"SERVER_REQUEST",OPEN_CONTENT:"OPEN_CONTENT",CLOSE_RECIPE:"CLOSE_RECIPE",AUTHENTICATE:"AUTHENTICATE",UPDATE_USER_STATUS:"UPDATE_USER_STATUS",LOGIN:"LOGIN",LOGOUT:"LOGOUT",UPDATE_PASSWORD:"UPDATE_PASSWORD",REGISTER:"REGISTER",NOTIFY:"NOTIFY"};t.default=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(189);t.default=new r.Dispatcher},function(e,t,n){e.exports.Dispatcher=n(190)},function(e,t,n){(function(r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=n(191),a="ID_",s=function(){function e(){o(this,e),this._callbacks={},this._isDispatching=!1,this._isHandled={},this._isPending={},this._lastID=1}return e.prototype.register=function(e){var t=a+this._lastID++;return this._callbacks[t]=e,t},e.prototype.unregister=function(e){this._callbacks[e]?void 0:"production"!==r.env.NODE_ENV?i(!1,"Dispatcher.unregister(...): `%s` does not map to a registered callback.",e):i(!1),delete this._callbacks[e]},e.prototype.waitFor=function(e){this._isDispatching?void 0:"production"!==r.env.NODE_ENV?i(!1,"Dispatcher.waitFor(...): Must be invoked while dispatching."):i(!1);for(var t=0;t<e.length;t++){var n=e[t];this._isPending[n]?this._isHandled[n]?void 0:"production"!==r.env.NODE_ENV?i(!1,"Dispatcher.waitFor(...): Circular dependency detected while waiting for `%s`.",n):i(!1):(this._callbacks[n]?void 0:"production"!==r.env.NODE_ENV?i(!1,"Dispatcher.waitFor(...): `%s` does not map to a registered callback.",n):i(!1),this._invokeCallback(n))}},e.prototype.dispatch=function(e){this._isDispatching?"production"!==r.env.NODE_ENV?i(!1,"Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch."):i(!1):void 0,this._startDispatching(e);try{for(var t in this._callbacks)this._isPending[t]||this._invokeCallback(t)}finally{this._stopDispatching()}},e.prototype.isDispatching=function(){return this._isDispatching},e.prototype._invokeCallback=function(e){this._isPending[e]=!0,this._callbacks[e](this._pendingPayload),this._isHandled[e]=!0},e.prototype._startDispatching=function(e){for(var t in this._callbacks)this._isPending[t]=!1,this._isHandled[t]=!1;this._pendingPayload=e,this._isDispatching=!0},e.prototype._stopDispatching=function(){delete this._pendingPayload,this._isDispatching=!1},e}();e.exports=s}).call(t,n(4))},function(e,t,n){(function(t){"use strict";function n(e,t,n,o,i,a,s,u){if(r(t),!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,o,i,a,s,u],p=0;c=new Error(t.replace(/%s/g,function(){return l[p++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}}var r=function(e){};"production"!==t.env.NODE_ENV&&(r=function(e){if(void 0===e)throw new Error("invariant requires an error message argument")}),e.exports=n}).call(t,n(4))},function(e,t,n){"use strict";var r=n(193);"string"==typeof r&&(r=[[e.id,r,""]]);n(168)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(167)(),t.push([e.id,'.search>input{font-size:16px;height:20px;width:540px;color:#2e2c2d;border-radius:4px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAABmJLR0QAqgCqAKohOK4IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AsRBBwx9UVFcgAAASBJREFUOMutlL1KA0EUhb+NVu4rBIQQOzvzEgYtouArnNrtXSTpImh9X0GIFgF9ClstFF0hj6BWCjZ3ZJDsTEBPMz97+Dh37s4URDKzEqiBfaDv20/AHBhLeiejIoIdALOM/1DSVcrQWQK7AQaSCkkFMPA9gJmZjZIJvcw3X1eSLpYZzewYOPdlKemjLWEdkrXBAPxbSHqaKnnP5zV5Bc9RCrjlCe5ytMizmWzKf6oDPPqh7+TMkadJAec+H68QYOLjZQoYQEMzqxLpKmA31+XCzSMg3IBb4CQ0wMucRLAG6Ev6yl29GNqmxju8AHqSPlu7LOkaKIEz4PUXZAps+IOxALrAs5mttyZcVWa2Brw49F7S9p/+Qz+7HvAQvQE/+gYLKV6t6i2B7gAAAABJRU5ErkJggg==");background-position:100% 6px;background-repeat:no-repeat;border-color:#2e2c2d;background-color:#fff;padding:5px}.search>input:focus{outline:none}.search.show input{border-radius:5px 5px 0 0}.search.show .results{transform:perspective(0) rotateX(0deg)}.search .results{width:552px;background-color:#fff;box-shadow:5px 5px 10px #000;position:absolute;display:flex;flex-direction:column;justify-content:flex-start;transform:perspective(800px) rotateX(-90deg);transform-origin:top;transition:all .5s linear;z-index:10;overflow:scroll}.search .results .row-content{display:flex;flex-direction:row;justify-content:flex-start;align-items:stretch;margin:0 10px;padding:5px 0;cursor:pointer}.search .results .row-content .details{padding-left:20px;display:flex;flex-direction:column;justify-content:center}.search .results .row-content .details .title{font-size:20px;color:#2e2c2d}.search .results .row-content .details .title .highlight{font-weight:700;font-size:20px}.search .results .row-content .details .author{font-size:14px;color:#585658}.search .results .row-content .image{width:50px;height:50px}.search .results .row{border-top:1px solid #3a353c;border-bottom:1px solid #3a353c}.search .results .row.active,.search .results .row:hover{background-color:#3a353c}.search .results .row.active .title,.search .results .row:hover .title{color:#f1f1f1}.search .results .row.active .author,.search .results .row:hover .author{color:#b3afaf}.search .results .row:last-child .row-content{border-bottom:none;padding-bottom:10px}.search .results .row:first-child .row-content{border-top:none;padding-top:10px}',""])},function(e,t,n){"use strict";var r=n(195);"string"==typeof r&&(r=[[e.id,r,""]]);n(168)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(167)(),t.push([e.id,".header-content{background-color:#fff;height:60px;padding:0 25px;display:flex;flex-direction:row;justify-content:space-between;align-items:center}.header-content .user-menu{position:relative;color:#585658;cursor:pointer}.header-content .user-menu .user-label{padding-right:10px;cursor:pointer}.header-content .user-menu .user-label:hover{text-decoration:underline;color:#2e2c2d}.header-content .user-menu.show-menu .menu-options{transform:perspective(0) rotateX(0deg)}.header-content .user-menu .menu-options{display:flex;flex-direction:column;background-color:#fff;box-shadow:5px 5px 10px #000;position:absolute;left:0;right:0;transform:perspective(800px) rotateX(-90deg);transform-origin:top;transition:all .5s linear;z-index:10}.header-content .user-menu .menu-options .item{padding:5px;border-bottom:1px solid #2e2c2d;cursor:pointer}.header-content .user-menu .menu-options .item:last-child{border-bottom:none}.header-content .user-menu .menu-options .item:hover{background-color:#2e2c2d;color:#b3afaf}.header-content .user-menu .menu-options .item:hover .highlight{color:#f1f1f1}",""])},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(o),a=n(158),s=r(a);n(197);var u=i.default.createClass({displayName:"Navigation",toggle:function(){s.default.findDOMNode(this).classList.contains("show")?(s.default.findDOMNode(this).classList.remove("show"),s.default.findDOMNode(this).removeEventListener("click",this._hide)):(s.default.findDOMNode(this).classList.add("show"),s.default.findDOMNode(this).addEventListener("click",this._hide))},_hide:function(){s.default.findDOMNode(this).classList.remove("show")},_getId:function(e){for(var t=e;!t.classList.contains("link");)t=t.parentElement;return t.dataset.id},handleClick:function(e){this.props.aOpenContent(this._getId(e.target)),e.stopPropagation()},handleClose:function(e){this.props.aCloseRecipe(this._getId(e.target)),e.stopPropagation()},render:function(){var e=this,t=this.props.sOpenList.map(function(t){var n="link hover";if(t.active&&(n="link hover active"),"home"==t.id)return n+=" ti-home",i.default.createElement("li",{key:t.id,className:n,"data-id":"home",onClick:e.handleClick},i.default.createElement("span",{className:"text"},"Home"));if("new"==t.id){if(null!=e.props.sUser)return n+=" ti-plus",i.default.createElement("li",{key:t.id,className:n,"data-id":"new",onClick:e.props.aNewRecipe},i.default.createElement("span",{className:"text"},"New"))}else{if("user"!=t.id){var r=t.recipe.title;return""==r&&(r="New..."),i.default.createElement("li",{key:t.id,"data-id":t.id,className:n,onClick:e.handleClick},i.default.createElement("img",{className:"image",src:t.recipe.picture+"?"+t.recipe.dateModified}),i.default.createElement("span",{className:"text truncate",title:r},r),i.default.createElement("a",{className:"ti-close",onClick:e.handleClose}),close)}if(null!=e.props.sUser)return n+=" ti-user",i.default.createElement("li",{key:t.id,className:n,"data-id":"user",onClick:e.handleClick},i.default.createElement("span",{className:"text"},"User settings"))}});return i.default.createElement("nav",{className:"navigation"},i.default.createElement("ul",{className:"navigation-content"},i.default.createElement("li",{className:"link"},i.default.createElement("a",{className:"toggle",onClick:this.toggle})),t))}});t.default=u},function(e,t,n){"use strict";var r=n(198);"string"==typeof r&&(r=[[e.id,r,""]]);n(168)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(167)(),t.push([e.id,'.navigation{width:50px;background-color:#3a353c;transition:width .5s}.navigation .navigation-content{position:relative;flex-direction:row;justify-content:flex-start;align-items:stretch;height:100%;list-style-type:none;margin:0;padding:0;overflow:hidden}.navigation .navigation-content .link{height:35px;display:flex;position:relative;align-items:center;line-height:35px;color:#f1f1f1;padding:5px 0 5px 10px;opacity:.75;cursor:pointer}.navigation .navigation-content .link .ti-close{position:absolute;top:0;right:0;font-size:.55em;padding:3px;margin:1px;border-radius:10px;background-color:#000;color:#b3afaf}.navigation .navigation-content .link .ti-close:hover{color:#f1f1f1}.navigation .navigation-content .link:first-child{display:block;padding:0}.navigation .navigation-content .link>.image{width:30px;height:30px;min-width:30px}.navigation .navigation-content .link>.text{opacity:0;padding-left:10px}.navigation .navigation-content .link>.text.truncate{width:150px;white-space:nowrap;text-rendering:auto;-webkit-font-smoothing:antialiased;display:inline-block;overflow:hidden;text-overflow:ellipsis;transition:all .5s}.navigation .navigation-content .link.active,.navigation .navigation-content .link.hover:hover,.navigation .navigation-content .link:first-child{background-color:#2e2c2d;opacity:1}.navigation .navigation-content .link.active{border-left:3px solid #deda1d;padding-left:7px}.navigation .navigation-content .link:before{font-size:26px;padding-right:5px}.navigation .navigation-content .toggle{padding:0;width:50px;float:right;display:block;height:35px}.navigation .navigation-content .toggle:after,.navigation .navigation-content .toggle:before{content:" ";transition:all .5s linear;background-color:#f1f1f1;position:absolute;right:15px;width:25px;height:3px;padding:0}.navigation .navigation-content .toggle:before{top:10px}.navigation .navigation-content .toggle:after{top:20px}.navigation.show{width:200px}.navigation.show .toggle{width:35px}.navigation.show .toggle:after,.navigation.show .toggle:before{right:12px;width:15px}.navigation.show .toggle:before{transform:rotate(-45deg)}.navigation.show .toggle:after{transform:rotate(45deg);top:19px}.navigation.show .link>.text{opacity:1}@media only screen and (min-device-width:320px) and (max-device-width:480px){.navigation{z-index:10;height:80px;transition:height .5s}.navigation .navigation-content .link{height:80px;line-height:80px}.navigation .navigation-content .link .ti-close{margin:10px;font-size:.75em}.navigation .navigation-content .link>.image{width:60px;height:60px}.navigation .navigation-content .link>.text.truncate{width:auto}.navigation .navigation-content .toggle{width:90px;height:80px}.navigation .navigation-content .toggle:after,.navigation .navigation-content .toggle:before{right:15px;width:50px;height:4px}.navigation .navigation-content .toggle:before{top:30px}.navigation .navigation-content .toggle:after{top:50px}.navigation.show{height:100%}.navigation.show .toggle{width:110px}.navigation.show .toggle:after,.navigation.show .toggle:before{top:35px;width:40px}.navigation.show .toggle:before{transform:rotate(45deg);right:50px}.navigation.show .toggle:after{transform:rotate(-45deg);right:22px}.navigation .ti-close{position:absolute;top:0;right:0;font-size:10px;padding:3px;margin:1px;border-radius:10px;background-color:#000;color:#b3afaf}.navigation .ti-close:hover{color:#f1f1f1}}',""])},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(o),a=n(158);r(a);n(200);var s=i.default.createClass({displayName:"Home",handleClick:function(e){for(var t=e.target;t&&!t.classList.contains("recipe");)t=t.parentNode;this.props.aGetRecipe(t.dataset.id)},render:function(){var e=this,t=this.props.sHome.recentFeed.map(function(t){var n=t.dateModified.split(/[- :]/),r=new Date(Date.UTC(n[0],n[1]-1,n[2],n[3],n[4],n[5]));return i.default.createElement("div",{className:"recipe",key:t.id,"data-id":t.id,onClick:e.handleClick},i.default.createElement("div",{className:"title"},t.title),i.default.createElement("img",{src:t.picture+"?"+t.dateModified}),i.default.createElement("div",{className:"additional-info"},i.default.createElement("span",{className:"author"},t.firstName+" "+t.lastName),i.default.createElement("span",{className:"creation-date"},"(",r.toDateString(),")")))});return i.default.createElement("main",{className:"home-content"},i.default.createElement("h1",{className:"site-title"},"DeAngelis Home Recipes"),i.default.createElement("div",{className:"recent-wrapper"},i.default.createElement("h2",{className:"recent-title"},"Recently Entered Recipes"),i.default.createElement("div",{className:"recent-feed"},t)))}});t.default=s},function(e,t,n){"use strict";var r=n(201);"string"==typeof r&&(r=[[e.id,r,""]]);n(168)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(167)(),t.push([e.id,".home-content{padding:25px}.home-content .site-title{color:#2e2c2d;font-size:2.25em;padding-left:10px;margin:0 0 25px}.home-content .recent-wrapper{display:flex;flex-direction:column;align-items:center}.home-content .recent-wrapper .recent-title{font-size:1.2em;color:#585658;margin:0 0 5px}.home-content .recent-feed{display:flex;border-top:1px solid #585658;border-bottom:1px solid #585658}.home-content .recent-feed .recipe{position:relative;display:flex;flex-direction:column;align-items:center;margin:10px;max-width:400px;transition:transform .5s;cursor:pointer}.home-content .recent-feed .recipe:hover{transform:scale(1.025);box-shadow:5px 5px 5px #888}.home-content .recent-feed .recipe .additional-info,.home-content .recent-feed .recipe .title{position:absolute;background-color:rgba(0,0,0,.75);left:0;right:0;text-align:center;padding:5px}.home-content .recent-feed .recipe .additional-info .author,.home-content .recent-feed .recipe .title .author{padding-right:10px}.home-content .recent-feed .recipe .title{color:#f1f1f1;top:0}.home-content .recent-feed .recipe .additional-info{color:#b3afaf;font-size:.75em;bottom:0}.home-content .recent-feed .recipe img{width:100%}@media only screen and (min-device-width:320px) and (max-device-width:480px){.home-content .recent-feed{width:100%;flex-direction:column}.home-content .recent-feed .recipe{max-width:100%}.home-content .recent-feed .recipe:hover{transform:none;box-shadow:none}}",""])},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(o),a=n(158);r(a);n(203);var s=i.default.createClass({displayName:"UserSettings",_getUserId:function(e){for(var t=e.target;null!=t;){if(t.classList.contains("item"))return console.log(t),console.log(t.dataset.userid),t.dataset.userid;t=t.parentNode}},accept:function(e){this.props.aUpdateUserStatus(this._getUserId(e),"pending")},decline:function(e){this.props.aUpdateUserStatus(this._getUserId(e),"deleted")},render:function(){var e,t=this;if("admin"==this.props.sUser.roleType){var n=this.props.sUser.requests.map(function(e){return i.default.createElement("li",{key:e.userId,className:"item","data-userid":e.userId},i.default.createElement("span",{className:"name"},e.firstName+" "+e.lastName),i.default.createElement("span",{className:"info"},"(",e.userName+" - "+e.email,")"),i.default.createElement("span",{className:"controls"},i.default.createElement("button",{className:"accept",onClick:t.accept},"Accept"),i.default.createElement("button",{className:"reject",onClick:t.decline},"Reject")))});e=i.default.createElement("div",null,i.default.createElement("h2",null,"Current requests"),i.default.createElement("ul",{className:"request-list"},n))}return i.default.createElement("main",{className:"settings-content"},i.default.createElement("h1",{className:"content-title"},"User Settings"),e)}});t.default=s},function(e,t,n){"use strict";var r=n(204);"string"==typeof r&&(r=[[e.id,r,""]]);n(168)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(167)(),t.push([e.id,".settings-content{padding:25px}.settings-content .content-title{color:#2e2c2d;font-size:30px;padding-left:10px;margin:0 0 25px}.settings-content .request-list{list-style:none;color:#2e2c2d;padding-left:10px}.settings-content .request-list .item{padding:5px 10px;border-bottom:1px solid #2e2c2d;display:flex;flex-direction:row;align-self:center}.settings-content .request-list .item>*{display:flex;align-items:center}.settings-content .request-list .item:last-child{border-bottom:none}.settings-content .request-list .item .info{color:#585658;padding-left:20px;font-size:.8em}.settings-content .request-list .item .controls{flex:1;display:flex;justify-content:flex-end}.settings-content .request-list .item .controls button{background-color:#3a353c;border:none;color:#f1f1f1;padding:5px 15px;margin-left:15px;cursor:pointer}.settings-content .request-list .item .controls button:hover{background-color:#2e2c2d}",""])},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(o),a=n(158),s=r(a);n(206);var u=i.default.createClass({displayName:"Authentication",appAuthenticateForm:null,getInitialState:function(){return{firstName:"",lastName:"",username:"",email:"",emailConfirm:"",oldPassword:"",newPassword:"",confirmPassword:""}},componentDidMount:function(){this.appAuthenticateForm=s.default.findDOMNode(this).querySelector(".app-authenticate-form"),this.handleLoad()},componentDidUpdate:function(){this.handleLoad()},handleLoad:function(){this.props.sAuthenticate.active?(this.appAuthenticateForm.querySelector("input").focus(),window.addEventListener("keyup",this.handleKeyUp,!0),"reset"==this.props.sAuthenticate.type&&(this.appAuthenticateForm.querySelector(".username").value=this.props.sAuthenticate.user,this.appAuthenticateForm.querySelector(".old-password").value=this.props.sAuthenticate.key)):window.removeEventListener("keyup",this.handleKeyUp,!0)},validateEmail:function(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)},validate:function(e,t,n,r,o,a,s,u){var c=[],l={firstName:"",lastName:"",username:"",email:"",emailConfirm:"",oldPassword:"",newPassword:"",confirmPassword:""};if(null!=e&&""==e&&(c.push("First name is required"),l.firstName="error "),null!=t&&""==t&&(c.push("Last name is required"),l.lastName="error "),null!=n&&""==n&&(c.push("Username is required"),l.username="error "),null!=r&&(""==r?(c.push("Email is required"),l.email="error "):this.validateEmail(r)||(c.push("Please enter valid email"),l.email="error ")),null!=o&&(""==o?(c.push("Email confirmation is required"),l.emailConfirm="error "):this.validateEmail(o)||(c.push("Please enter valid confirmation email"),l.emailConfirm="error ")),null!=r&&""!=r&&null!=o&&""!=o&&r!=o&&(c.push("Email addresses do not match"),l.email="error ",l.emailConfirm="error "),null!=a&&""==a&&(c.push("Password is required"),l.oldPassword="error "),null!=s&&""==s&&(c.push("New password is required"),l.newPassword="error "),null!=a&&""!=a&&null!=s&&""!=s&&a==s&&(c.push("Please pick a new password"),l.oldPassword="error ",l.newPassword="error "),this.setState(l),c.length>0){var p=0,d=c.map(function(e){return p+=1,i.default.createElement("li",{key:p},e)}),f=i.default.createElement("div",{className:"validation"},i.default.createElement("h3",null,"Please correct flagged fields"),i.default.createElement("ul",null,d));return this.props.aNotify(!0,"error",f,null),!1}return!0},handleHide:function(){for(var e=[".first-name",".last-name",".username",".email",".email-confirm",".password",".old-password",".new-password",".confirm-password"],t=0;t<e.length;t++){var n=this.appAuthenticateForm.querySelector(e[t]);null!=n&&(n.value="")}this.setState({firstName:"",lastName:"",username:"",email:"",emailConfirm:"",oldPassword:"",newPassword:"",confirmPassword:""}),this.props.aAuthenticate(!1)},handleShowRegister:function(){this.props.aAuthenticate(!0,"register")},handleShowLogin:function(){this.props.aAuthenticate(!0,"login")},handleLogin:function(){var e=this,t=this.appAuthenticateForm.querySelector(".username").value,n=this.appAuthenticateForm.querySelector(".password").value,r=function(t){if("fail"==t.status){e.setState({username:"error ",oldPassword:"error "});var n=i.default.createElement("div",{className:"validation"},i.default.createElement("h3",null,"An error occured durring login"),i.default.createElement("p",null,t.message));e.props.aNotify(!0,"error",n,null)}else e.handleHide()},o=this.validate(null,null,t,null,null,n,null,null);o&&this.props.aLogin(t,n,r)},handleReset:function(){var e=this.appAuthenticateForm.querySelector(".username").value,t=this.appAuthenticateForm.querySelector(".old-password").value,n=this.appAuthenticateForm.querySelector(".new-password").value,r=this.appAuthenticateForm.querySelector(".confirm-password").value,o=this.validate(null,null,e,null,null,t,n,r);o&&this.props.aUpdatePassword(this.props.sAuthenticate.userId,t,n)},handleRegister:function(){var e=this,t=this.appAuthenticateForm.querySelector(".first-name").value,n=this.appAuthenticateForm.querySelector(".last-name").value,r=this.appAuthenticateForm.querySelector(".username").value,o=this.appAuthenticateForm.querySelector(".email").value,a=this.appAuthenticateForm.querySelector(".email-confirm").value,s=function(t){if("fail"==t.status){"username"==t.field?e.setState({username:"error "}):"email"==t.field&&e.setState({email:"error "});var n=i.default.createElement("div",{className:"validation"},i.default.createElement("h3",null,"An error occured durring registration"),i.default.createElement("p",null,t.message));e.props.aNotify(!0,"error",n,null)}else{e.handleHide();var n=i.default.createElement("div",{className:"validation"},i.default.createElement("h3",null,"Thank you for registering"),i.default.createElement("p",null,"An administrator will review you registration as soon as possible. Once reviewed you will receive an email with a link to complete registration.",i.default.createElement("br",null),i.default.createElement("br",null),"Thank you for your patience!"));e.props.aNotify(!0,"message",n,null)}},u=this.validate(t,n,r,o,a,null,null,null);u&&this.props.aRegister(t,n,r,o,s)},handleKeyUp:function(e){13==e.keyCode&&s.default.findDOMNode(this).querySelector(".submit-button").click()},render:function(){if("register"==this.props.sAuthenticate.type)return i.default.createElement("div",{className:"app-authenticate-inner"},i.default.createElement("header",null,i.default.createElement("label",null,"Register"),i.default.createElement("a",{className:"ti-close",onClick:this.handleHide})),i.default.createElement("div",{className:"app-authenticate-form"},i.default.createElement("input",{placeholder:"First name",className:this.state.firstName+"first-name",type:"text"}),i.default.createElement("input",{placeholder:"Last name",className:this.state.lastName+"last-name",type:"text"}),i.default.createElement("input",{placeholder:"Username",className:this.state.username+"username",type:"text"}),i.default.createElement("input",{placeholder:"Email",className:this.state.email+"email",type:"email"}),i.default.createElement("input",{placeholder:"Confirm email",className:this.state.emailConfirm+" email-confirm",type:"email"})),i.default.createElement("footer",null,i.default.createElement("button",{className:"submit-button",onClick:this.handleRegister},"Register"),i.default.createElement("div",{className:"footer-note"},i.default.createElement("label",null,"Already have an account? "),i.default.createElement("a",{onClick:this.handleShowLogin},"Login"))));if("reset"==this.props.sAuthenticate.type){var e=!1;return""!=this.props.sAuthenticate.key&&(e=!0),i.default.createElement("div",{className:"app-authenticate-inner"},i.default.createElement("header",null,i.default.createElement("label",null,"Reset password"),i.default.createElement("a",{className:"ti-close",onClick:this.handleHide})),i.default.createElement("div",{className:"app-authenticate-form"},i.default.createElement("input",{placeholder:"Username",className:this.state.username+"username",type:"text",disabled:e}),i.default.createElement("input",{placeholder:"Current password",className:this.state.oldPassword+"old-password",type:"password",disabled:e}),i.default.createElement("input",{placeholder:"New password",className:this.state.newPassword+"new-password",type:"password"}),i.default.createElement("input",{placeholder:"Confirm password",className:this.state.confirmPassword+"confirm-password",type:"password"})),i.default.createElement("footer",null,i.default.createElement("button",{className:"submit-button",onClick:this.handleReset},"Reset"),i.default.createElement("div",{className:"footer-note"},i.default.createElement("label",null,"Already have an account? "),i.default.createElement("a",{onClick:this.handleShowLogin},"Login"))))}return i.default.createElement("div",{className:"app-authenticate-inner"},i.default.createElement("header",null,i.default.createElement("label",null,"Login"),i.default.createElement("a",{className:"ti-close",onClick:this.handleHide})),i.default.createElement("div",{className:"app-authenticate-form"},i.default.createElement("input",{placeholder:"Username",className:this.state.username+"username",type:"text"}),i.default.createElement("input",{placeholder:"Password",className:this.state.oldPassword+"password",type:"password"})),i.default.createElement("footer",null,i.default.createElement("button",{className:"submit-button",onClick:this.handleLogin},"Login"),i.default.createElement("div",{className:"footer-note"},i.default.createElement("label",null,"Don't have an account? "),i.default.createElement("a",{onClick:this.handleShowRegister},"Register"))))}});t.default=u},function(e,t,n){"use strict";var r=n(207);"string"==typeof r&&(r=[[e.id,r,""]]);n(168)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(167)(),t.push([e.id,".app-authenticate-inner{display:flex;flex-direction:column;justify-content:space-between;align-items:center;transition:height .5s;width:300px;background-color:#fff;box-shadow:5px 5px 5px #2e2c2d}.app-authenticate-inner .app-authenticate-form{align-content:stretch;display:flex;flex-direction:column;padding:25px 0;width:100%}.app-authenticate-inner .app-authenticate-form input{margin:5px 10px}.app-authenticate-inner footer,.app-authenticate-inner header{display:flex;width:100%;background-color:#ebebed}.app-authenticate-inner header{justify-content:space-between;padding:10px 0;border-bottom:1px solid #2e2c2d;color:#2e2c2d}.app-authenticate-inner header label{padding-left:10px}.app-authenticate-inner header .ti-close{padding-right:10px;opacity:.75}.app-authenticate-inner header .ti-close:hover{opacity:1}.app-authenticate-inner footer{align-items:center;flex-direction:column;padding:10px 0;border-top:1px solid #2e2c2d}.app-authenticate-inner footer .footer-note{color:#585658;font-size:.75em;padding-top:5px}.app-authenticate-inner footer .footer-note a{color:#585658;cursor:pointer}.app-authenticate-inner footer .footer-note a:hover{color:#2e2c2d;text-decoration:underline}.app-authenticate-inner footer button{background-color:#3a353c;border:none;color:#f1f1f1;padding:5px 15px;cursor:pointer}.app-authenticate-inner footer button:hover{background-color:#2e2c2d}",""])},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(1),a=r(i),s=n(158);r(s);n(209);var u=a.default.createClass({displayName:"Notify",timer:null,componentDidMount:function(){this.handleLoad()},componentDidUpdate:function(){this.handleLoad()},handleLoad:function(){this.props.sNotify.active&&null!=this.props.sNotify.timer&&(clearTimeout(this.timer),this.timer=setTimeout(this.handleHide,this.props.sNotify.timer+500))},handleHide:function(){this.props.aNotify(!1,null,null,this.props.sNotify.timer),window.removeEventListener("click",this.handleHide,!0)},render:function(){var e="app-notify";this.props.sNotify.active&&(e+=" show",window.addEventListener("click",this.handleHide,!0));var t="";null==this.props.sNotify.timer&&(t=a.default.createElement("a",{className:"ti-close",onClick:this.handleHide}));var n=a.default.createElement("p",null,this.props.sNotify.message);"object"==o(this.props.sNotify.message)&&(n=this.props.sNotify.message);var r="notify-content "+this.props.sNotify.type;return a.default.createElement("div",{className:e},a.default.createElement("div",{className:r},a.default.createElement("div",{className:"notify-message"},t,n)))}});t.default=u},function(e,t,n){"use strict";var r=n(210);"string"==typeof r&&(r=[[e.id,r,""]]);n(168)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(167)(),t.push([e.id,".app-notify{display:flex;position:absolute;justify-content:center;align-items:center;width:100%;z-index:1;top:-100%;color:#f1f1f1;transition:top 1s}.app-notify.show{top:25px;animation:showNotify .5s}.app-notify .notify-content{display:flex;flex-direction:column;justify-content:space-between;align-items:center;max-width:600px;color:#2e2c2d;box-shadow:5px 5px 5px #888}.app-notify .notify-content p{margin:0}.app-notify .notify-content.message{background-color:#f9f8cc}.app-notify .notify-content.error{background-color:#f96666}.app-notify .notify-content.success{background-color:#b1ffb5}.app-notify .notify-content .notify-message{padding:20px}.app-notify .notify-content .ti-close{float:right;padding:0 0 10px 10px;opacity:.75}.app-notify .notify-content .ti-close:hover{opacity:1}@keyframes showNotify{0%{top:-100%}70%{top:25px}70%{transform:translateY(0)}85%{transform:translateY(15px)}to{transform:translateY(0)}}",""])},function(e,t,n){"use strict";var r=n(212);"string"==typeof r&&(r=[[e.id,r,""]]);n(168)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(167)(),t.push([e.id,'body{overflow:hidden;margin:0;font-family:TensoMedium,TensoLight,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:18px;background-color:#3a353c}body *{font-family:inherit;font-size:inherit;outline-color:#deda1d}body input,body select,body textarea{border-radius:4px;border:1px solid #2e2c2d;padding:3px}.app .app-authenticate{display:flex;position:absolute;justify-content:center;align-items:center;transform:perspective(800px) rotateX(90deg);transition-property:all;transition-duration:1s;transition-delay:.5s;transform-origin:bottom;width:100%;height:100%}.app .app-authenticate.show{transform:perspective(0) rotateX(0deg)}.app .app-authenticate.hide{transition-delay:0s}.app .app-body{display:flex;transform:perspective(0) rotateX(0deg);transition-property:all;transition-duration:.5s;transform-origin:bottom}.app .app-body.hide{transform:perspective(800px) rotateX(90deg)}.app .app-body.show{transition-delay:1s}.app .app-body .site-body{flex:1;height:100vh;background-color:#ebebed}.app .app-body .site-body>.open-content{overflow:scroll;padding:0;margin-bottom:50px;height:calc(100% - 60px)}input.error{background-color:#f96666}.validation{display:flex;flex-direction:column}.validation h3{margin:0}.validation ul{margin:10px 0;padding-left:20px}.toggle-switch{position:relative;display:inline-block;width:60px;height:34px}.toggle-switch input{display:none}.toggle-switch input:checked+.slider{background-color:#deda1d}.toggle-switch input:checked+.slider:before{-webkit-transform:translateX(26px);transform:translateX(26px)}.toggle-switch .slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;transition:.4s;border-radius:34px}.toggle-switch .slider:before{position:absolute;content:"";height:26px;width:26px;left:4px;bottom:4px;background-color:#fff;transition:.4s;border-radius:50%}.loading:before{content:"";position:fixed;z-index:999999999999999;top:0;left:0;bottom:0;right:0;background-color:#000;opacity:.85;background-image:url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB3aWR0aD0nMTk2cHgnIGhlaWdodD0nMTk2cHgnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDEwMCAxMDAiIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIiBjbGFzcz0idWlsLXNwaW4iPgogIDxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSJub25lIiBjbGFzcz0iYmsiPjwvcmVjdD4KICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1MCA1MCkiPgogICAgPGcgdHJhbnNmb3JtPSJyb3RhdGUoMCkgdHJhbnNsYXRlKDM0IDApIj4KICAgICAgPGNpcmNsZSBjeD0iMCIgY3k9IjAiIHI9IjgiIGZpbGw9IiNkZWRhMWQiPgogICAgICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9Im9wYWNpdHkiIGZyb209IjEiIHRvPSIwLjEiIGJlZ2luPSIwcyIgZHVyPSIxcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiPjwvYW5pbWF0ZT4KICAgICAgICA8YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InNjYWxlIiBmcm9tPSIxLjYiIHRvPSIxIiBiZWdpbj0iMHMiIGR1cj0iMXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGVUcmFuc2Zvcm0+CiAgICAgIDwvY2lyY2xlPgogICAgPC9nPgogICAgPGcgdHJhbnNmb3JtPSJyb3RhdGUoNDUpIHRyYW5zbGF0ZSgzNCAwKSI+CiAgICAgIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSI4IiBmaWxsPSIjZGVkYTFkIj4KICAgICAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJvcGFjaXR5IiBmcm9tPSIxIiB0bz0iMC4xIiBiZWdpbj0iMC4xMnMiIGR1cj0iMXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGU+CiAgICAgICAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJzY2FsZSIgZnJvbT0iMS42IiB0bz0iMSIgYmVnaW49IjAuMTJzIiBkdXI9IjFzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSI+PC9hbmltYXRlVHJhbnNmb3JtPgogICAgICA8L2NpcmNsZT4KICAgIDwvZz4KICAgIDxnIHRyYW5zZm9ybT0icm90YXRlKDkwKSB0cmFuc2xhdGUoMzQgMCkiPgogICAgICA8Y2lyY2xlIGN4PSIwIiBjeT0iMCIgcj0iOCIgZmlsbD0iI2RlZGExZCI+CiAgICAgICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0ib3BhY2l0eSIgZnJvbT0iMSIgdG89IjAuMSIgYmVnaW49IjAuMjVzIiBkdXI9IjFzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSI+PC9hbmltYXRlPgogICAgICAgIDxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0ic2NhbGUiIGZyb209IjEuNiIgdG89IjEiIGJlZ2luPSIwLjI1cyIgZHVyPSIxcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiPjwvYW5pbWF0ZVRyYW5zZm9ybT4KICAgICAgPC9jaXJjbGU+CiAgICA8L2c+CiAgICA8ZyB0cmFuc2Zvcm09InJvdGF0ZSgxMzUpIHRyYW5zbGF0ZSgzNCAwKSI+CiAgICAgIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSI4IiBmaWxsPSIjZGVkYTFkIj4KICAgICAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJvcGFjaXR5IiBmcm9tPSIxIiB0bz0iMC4xIiBiZWdpbj0iMC4zN3MiIGR1cj0iMXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGU+CiAgICAgICAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJzY2FsZSIgZnJvbT0iMS42IiB0bz0iMSIgYmVnaW49IjAuMzdzIiBkdXI9IjFzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSI+PC9hbmltYXRlVHJhbnNmb3JtPgogICAgICA8L2NpcmNsZT4KICAgIDwvZz4KICAgIDxnIHRyYW5zZm9ybT0icm90YXRlKDE4MCkgdHJhbnNsYXRlKDM0IDApIj4KICAgICAgPGNpcmNsZSBjeD0iMCIgY3k9IjAiIHI9IjgiIGZpbGw9IiNkZWRhMWQiPgogICAgICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9Im9wYWNpdHkiIGZyb209IjEiIHRvPSIwLjEiIGJlZ2luPSIwLjVzIiBkdXI9IjFzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSI+PC9hbmltYXRlPgogICAgICAgIDxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0ic2NhbGUiIGZyb209IjEuNiIgdG89IjEiIGJlZ2luPSIwLjVzIiBkdXI9IjFzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSI+PC9hbmltYXRlVHJhbnNmb3JtPgogICAgICA8L2NpcmNsZT4KICAgIDwvZz4KICAgIDxnIHRyYW5zZm9ybT0icm90YXRlKDIyNSkgdHJhbnNsYXRlKDM0IDApIj4KICAgICAgPGNpcmNsZSBjeD0iMCIgY3k9IjAiIHI9IjgiIGZpbGw9IiNkZWRhMWQiPgogICAgICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9Im9wYWNpdHkiIGZyb209IjEiIHRvPSIwLjEiIGJlZ2luPSIwLjYycyIgZHVyPSIxcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiPjwvYW5pbWF0ZT4KICAgICAgICA8YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InNjYWxlIiBmcm9tPSIxLjYiIHRvPSIxIiBiZWdpbj0iMC42MnMiIGR1cj0iMXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGVUcmFuc2Zvcm0+CiAgICAgIDwvY2lyY2xlPgogICAgPC9nPgogICAgPGcgdHJhbnNmb3JtPSJyb3RhdGUoMjcwKSB0cmFuc2xhdGUoMzQgMCkiPgogICAgICA8Y2lyY2xlIGN4PSIwIiBjeT0iMCIgcj0iOCIgZmlsbD0iI2RlZGExZCI+CiAgICAgICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0ib3BhY2l0eSIgZnJvbT0iMSIgdG89IjAuMSIgYmVnaW49IjAuNzVzIiBkdXI9IjFzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSI+PC9hbmltYXRlPgogICAgICAgIDxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0ic2NhbGUiIGZyb209IjEuNiIgdG89IjEiIGJlZ2luPSIwLjc1cyIgZHVyPSIxcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiPjwvYW5pbWF0ZVRyYW5zZm9ybT4KICAgICAgPC9jaXJjbGU+CiAgICA8L2c+CiAgICA8ZyB0cmFuc2Zvcm09InJvdGF0ZSgzMTUpIHRyYW5zbGF0ZSgzNCAwKSI+CiAgICAgIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSI4IiBmaWxsPSIjZGVkYTFkIj4KICAgICAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJvcGFjaXR5IiBmcm9tPSIxIiB0bz0iMC4xIiBiZWdpbj0iMC44N3MiIGR1cj0iMXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGU+CiAgICAgICAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJzY2FsZSIgZnJvbT0iMS42IiB0bz0iMSIgYmVnaW49IjAuODdzIiBkdXI9IjFzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSI+PC9hbmltYXRlVHJhbnNmb3JtPgogICAgICA8L2NpcmNsZT4KICAgIDwvZz4KICA8L2c+Cjwvc3ZnPg==");background-repeat:no-repeat;background-position:50%}@media only screen and (min-device-width:320px) and (max-device-width:480px){body{font-size:36px}.app .app-body{position:relative;display:block;height:100vh}.app .app-body .site-body{position:absolute;bottom:80px;right:0;left:0;top:0;height:auto}.app .app-body .site-body .open-content{position:absolute;bottom:0;top:60px;right:0;left:0;margin-bottom:10px;height:auto}.app .app-body .navigation{position:fixed;bottom:0;width:100%}}',""]);
},function(e,t,n){e.exports.Container=n(214),e.exports.Mixin=n(218),e.exports.ReduceStore=n(219),e.exports.Store=n(220)},function(e,t,n){(function(t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){s(e);var n=c({},m,t||{}),i=function(t,r,o){var i=n.withProps?r:void 0,a=n.withContext?o:void 0;return e.calculateState(t,i,a)},u=function(t,r){var o=n.withProps?t:void 0,i=n.withContext?r:void 0;return e.getStores(o,i)},p=function(e){function t(n,o){var a=this;r(this,t),e.call(this,n,o),this._fluxContainerSubscriptions=new l,this._fluxContainerSubscriptions.setStores(u(n)),this._fluxContainerSubscriptions.addListener(function(){a.setState(function(e,t){return i(e,t,o)})});var s=i(void 0,n,o);this.state=c({},this.state||{},s)}return o(t,e),t.prototype.componentWillReceiveProps=function(t,r){e.prototype.componentWillReceiveProps&&e.prototype.componentWillReceiveProps.call(this,t,r),(n.withProps||n.withContext)&&(this._fluxContainerSubscriptions.setStores(u(t,r)),this.setState(function(e){return i(e,t,r)}))},t.prototype.componentWillUnmount=function(){e.prototype.componentWillUnmount&&e.prototype.componentWillUnmount.call(this),this._fluxContainerSubscriptions.reset()},t}(e),d=n.pure?a(p):p,f=e.displayName||e.name;return d.displayName="FluxContainer("+f+")",d}function a(e){var t=function(e){function t(){r(this,t),e.apply(this,arguments)}return o(t,e),t.prototype.shouldComponentUpdate=function(e,t){return!f(this.props,e)||!f(this.state,t)},t}(e);return t}function s(e){e.getStores?void 0:"production"!==t.env.NODE_ENV?d(!1,"Components that use FluxContainer must implement `static getStores()`"):d(!1),e.calculateState?void 0:"production"!==t.env.NODE_ENV?d(!1,"Components that use FluxContainer must implement `static calculateState()`"):d(!1)}function u(e,t,n,a){var s=function(i){function a(){r(this,a),i.apply(this,arguments)}return o(a,i),a.getStores=function(e,n){return t(e,n)},a.calculateState=function(e,t,r){return n(e,t,r)},a.prototype.render=function(){return e(this.state)},a}(h),u=e.displayName||e.name||"FunctionalContainer";return s.displayName=u,i(s,a)}var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=n(215),p=n(1),d=n(191),f=n(217),h=p.Component,m={pure:!0,withProps:!1,withContext:!1};e.exports={create:i,createFunctional:u}}).call(t,n(4))},function(e,t,n){(function(t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}var i=n(216),a=function(){function e(){r(this,e),this._callbacks=[]}return e.prototype.setStores=function(e){var n=this;if(!this._stores||!o(this._stores,e)){this._stores=e,this._resetTokens(),this._resetStoreGroup();var r=!1,a=[];"production"!==t.env.NODE_ENV?this._tokens=e.map(function(e){return e.addListener(function(){r=!0,a.push(e)})}):!function(){var t=function(){r=!0};n._tokens=e.map(function(e){return e.addListener(t)})}();var s=function(){r&&(n._callbacks.forEach(function(e){return e()}),r=!1,"production"!==t.env.NODE_ENV&&(a=[]))};this._storeGroup=new i(e,s)}},e.prototype.addListener=function(e){this._callbacks.push(e)},e.prototype.reset=function(){this._resetTokens(),this._resetStoreGroup(),this._resetCallbacks(),this._resetStores()},e.prototype._resetTokens=function(){this._tokens&&(this._tokens.forEach(function(e){return e.remove()}),this._tokens=null)},e.prototype._resetStoreGroup=function(){this._storeGroup&&(this._storeGroup.release(),this._storeGroup=null)},e.prototype._resetStores=function(){this._stores=null},e.prototype._resetCallbacks=function(){this._callbacks=[]},e}();e.exports=a}).call(t,n(4))},function(e,t,n){(function(t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){e&&e.length?void 0:"production"!==t.env.NODE_ENV?i(!1,"Must provide at least one store to FluxStoreGroup"):i(!1);var n=e[0].getDispatcher();if("production"!==t.env.NODE_ENV)for(var r=e,o=Array.isArray(r),a=0,r=o?r:r[Symbol.iterator]();;){var s;if(o){if(a>=r.length)break;s=r[a++]}else{if(a=r.next(),a.done)break;s=a.value}var u=s;u.getDispatcher()!==n?"production"!==t.env.NODE_ENV?i(!1,"All stores in a FluxStoreGroup must use the same dispatcher"):i(!1):void 0}return n}var i=n(191),a=function(){function e(t,n){var i=this;r(this,e),this._dispatcher=o(t);var a=t.map(function(e){return e.getDispatchToken()});this._dispatchToken=this._dispatcher.register(function(e){i._dispatcher.waitFor(a),n()})}return e.prototype.release=function(){this._dispatcher.unregister(this._dispatchToken)},e}();e.exports=a}).call(t,n(4))},function(e,t){"use strict";function n(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function r(e,t){if(n(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(var a=0;a<r.length;a++)if(!o.call(t,r[a])||!n(e[r[a]],t[r[a]]))return!1;return!0}var o=Object.prototype.hasOwnProperty;e.exports=r},function(e,t,n){(function(t){"use strict";function r(e){var t=arguments.length<=1||void 0===arguments[1]?{withProps:!1}:arguments[1];return e=e.filter(function(e){return!!e}),{getInitialState:function(){return o(this),t.withProps?this.constructor.calculateState(null,this.props):this.constructor.calculateState(null,void 0)},componentWillMount:function(){var n=this,r=!1,o=function(){r=!0};this._fluxMixinSubscriptions=e.map(function(e){return e.addListener(o)});var a=function(){r&&n.setState(function(e){return t.withProps?n.constructor.calculateState(e,n.props):n.constructor.calculateState(e,void 0)}),r=!1};this._fluxMixinStoreGroup=new i(e,a)},componentWillUnmount:function(){this._fluxMixinStoreGroup.release();for(var e=this._fluxMixinSubscriptions,t=Array.isArray(e),n=0,e=t?e:e[Symbol.iterator]();;){var r;if(t){if(n>=e.length)break;r=e[n++]}else{if(n=e.next(),n.done)break;r=n.value}var o=r;o.remove()}this._fluxMixinSubscriptions=[]}}}function o(e){e.constructor.calculateState?void 0:"production"!==t.env.NODE_ENV?a(!1,"Components that use FluxMixinLegacy must implement `calculateState()` on the statics object"):a(!1)}var i=n(216),a=n(191);e.exports=r}).call(t,n(4))},function(e,t,n){(function(t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(220),a=n(228),s=n(191),u=function(e){function n(t){r(this,n),e.call(this,t),this._state=this.getInitialState()}return o(n,e),n.prototype.getState=function(){return this._state},n.prototype.getInitialState=function(){return a("FluxReduceStore","getInitialState")},n.prototype.reduce=function(e,t){return a("FluxReduceStore","reduce")},n.prototype.areEqual=function(e,t){return e===t},n.prototype.__invokeOnDispatch=function(e){this.__changed=!1;var n=this._state,r=this.reduce(n,e);void 0===r?"production"!==t.env.NODE_ENV?s(!1,"%s returned undefined from reduce(...), did you forget to return state in the default case? (use null if this was intentional)",this.constructor.name):s(!1):void 0,this.areEqual(n,r)||(this._state=r,this.__emitChange()),this.__changed&&this.__emitter.emit(this.__changeEvent)},n}(i);e.exports=u}).call(t,n(4))},function(e,t,n){(function(t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(221),i=o.EventEmitter,a=n(191),s=function(){function e(t){var n=this;r(this,e),this.__className=this.constructor.name,this.__changed=!1,this.__changeEvent="change",this.__dispatcher=t,this.__emitter=new i,this._dispatchToken=t.register(function(e){n.__invokeOnDispatch(e)})}return e.prototype.addListener=function(e){return this.__emitter.addListener(this.__changeEvent,e)},e.prototype.getDispatcher=function(){return this.__dispatcher},e.prototype.getDispatchToken=function(){return this._dispatchToken},e.prototype.hasChanged=function(){return this.__dispatcher.isDispatching()?void 0:"production"!==t.env.NODE_ENV?a(!1,"%s.hasChanged(): Must be invoked while dispatching.",this.__className):a(!1),this.__changed},e.prototype.__emitChange=function(){this.__dispatcher.isDispatching()?void 0:"production"!==t.env.NODE_ENV?a(!1,"%s.__emitChange(): Must be invoked while dispatching.",this.__className):a(!1),this.__changed=!0},e.prototype.__invokeOnDispatch=function(e){this.__changed=!1,this.__onDispatch(e),this.__changed&&this.__emitter.emit(this.__changeEvent)},e.prototype.__onDispatch=function(e){"production"!==t.env.NODE_ENV?a(!1,"%s has not overridden FluxStore.__onDispatch(), which is required",this.__className):a(!1)},e}();e.exports=s}).call(t,n(4))},function(e,t,n){var r={EventEmitter:n(222),EmitterSubscription:n(223)};e.exports=r},function(e,t,n){(function(t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(223),i=n(225),a=n(227),s=n(226),u=function(){function e(){r(this,e),this._subscriber=new i,this._currentSubscription=null}return e.prototype.addListener=function(e,t,n){return this._subscriber.addSubscription(e,new o(this._subscriber,t,n))},e.prototype.once=function(e,t,n){var r=this;return this.addListener(e,function(){r.removeCurrentListener(),t.apply(n,arguments)})},e.prototype.removeAllListeners=function(e){this._subscriber.removeAllSubscriptions(e)},e.prototype.removeCurrentListener=function(){this._currentSubscription?void 0:"production"!==t.env.NODE_ENV?s(!1,"Not in an emitting cycle; there is no current subscription"):s(!1),this._subscriber.removeSubscription(this._currentSubscription)},e.prototype.listeners=function(e){var t=this._subscriber.getSubscriptionsForType(e);return t?t.filter(a.thatReturnsTrue).map(function(e){return e.listener}):[]},e.prototype.emit=function(e){var t=this._subscriber.getSubscriptionsForType(e);if(t){for(var n=Object.keys(t),r=0;r<n.length;r++){var o=n[r],i=t[o];i&&(this._currentSubscription=i,this.__emitToSubscription.apply(this,[i].concat(Array.prototype.slice.call(arguments))))}this._currentSubscription=null}},e.prototype.__emitToSubscription=function(e,t){var n=Array.prototype.slice.call(arguments,2);e.listener.apply(e.context,n)},e}();e.exports=u}).call(t,n(4))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(224),a=function(e){function t(n,o,i){r(this,t),e.call(this,n),this.listener=o,this.context=i}return o(t,e),t}(i);e.exports=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(t){n(this,e),this.subscriber=t}return e.prototype.remove=function(){this.subscriber&&(this.subscriber.removeSubscription(this),this.subscriber=null)},e}();e.exports=r},function(e,t,n){(function(t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(226),i=function(){function e(){r(this,e),this._subscriptionsForType={},this._currentSubscription=null}return e.prototype.addSubscription=function(e,n){n.subscriber!==this?"production"!==t.env.NODE_ENV?o(!1,"The subscriber of the subscription is incorrectly set."):o(!1):void 0,this._subscriptionsForType[e]||(this._subscriptionsForType[e]=[]);var r=this._subscriptionsForType[e].length;return this._subscriptionsForType[e].push(n),n.eventType=e,n.key=r,n},e.prototype.removeAllSubscriptions=function(e){void 0===e?this._subscriptionsForType={}:delete this._subscriptionsForType[e]},e.prototype.removeSubscription=function(e){var t=e.eventType,n=e.key,r=this._subscriptionsForType[t];r&&delete r[n]},e.prototype.getSubscriptionsForType=function(e){return this._subscriptionsForType[e]},e}();e.exports=i}).call(t,n(4))},function(e,t,n){(function(t){"use strict";function n(e,t,n,o,i,a,s,u){if(r(t),!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,o,i,a,s,u],p=0;c=new Error(t.replace(/%s/g,function(){return l[p++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}}var r=function(e){};"production"!==t.env.NODE_ENV&&(r=function(e){if(void 0===e)throw new Error("invariant requires an error message argument")}),e.exports=n}).call(t,n(4))},function(e,t){"use strict";function n(e){return function(){return e}}var r=function(){};r.thatReturns=n,r.thatReturnsFalse=n(!1),r.thatReturnsTrue=n(!0),r.thatReturnsNull=n(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(e){return e},e.exports=r},function(e,t,n){(function(t){"use strict";function r(e,n){"production"!==t.env.NODE_ENV?o(!1,"Subclasses of %s must override %s() with their own implementation.",e,n):o(!1)}var o=n(191);e.exports=r}).call(t,n(4))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(230),c=r(u),l=n(213),p=n(187),d=r(p),f=n(188),h=r(f),m=n(231),v=r(m),g=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,h.default))}return a(t,e),s(t,[{key:"getInitialState",value:function(){var e={id:"new"},t={id:"user",active:!1},n={active:!1,timer:null,message:"",type:""},r={id:"home",active:!0,recentFeed:[]};this._processAction({action:"GET_DATA_RECENT_FEED"},function(e){null!=e&&(r.recentFeed=e)},!1);var o=null;this._processAction({action:"LOGIN"},function(e){null!=e&&"success"==e.status&&(o=e.user)},!1);var i={active:!1,type:"login"};if(location.hash&&location.hash.indexOf("key")!=-1&&location.hash.indexOf("id")!=-1&&location.hash.indexOf("name")!=-1){i.active=!0,i.type="reset";for(var a=location.hash.slice(1).split("&"),s=0;s<a.length;s++){var u=a[s].split("=")[0],c=a[s].split("=")[1];"name"==u?i.user=c:"id"==u?i.userId=c:"key"==u&&(i.key=c)}location.hash=""}return{authenticate:i,user:o,notify:n,open:[r,t,e]}}},{key:"_processAction",value:function(e,t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4==r.readyState){var e=JSON.parse(this.responseText);"function"==typeof t&&t(e)}},r.open("POST","processAction.php",n),r.setRequestHeader("Content-Type","application/json"),r.send(JSON.stringify(e))}},{key:"_processContent",value:function(e,t){for(var n={id:t.id,active:!0,recipe:t},r=!1,o=0;o<e.length;o++)e[o].active=!1,e[o].id==t.id&&(e[o]=n,r=!0);r||e.push(n)}},{key:"_openContent",value:function(e,t){for(var n=0;n<e.length;n++)e[n].active=!1,e[n].id==t&&(e[n].active=!0)}},{key:"_updateActiveRecipe",value:function(e){for(var t=this.getState(),n=0;n<t.open.length;n++)if(t.open[n].active){t.open[n].recipe=e(t.open[n].recipe);break}return t}},{key:"reduce",value:function(e,t){switch(t.action){case d.default.NOTIFY:return e.notify={active:t.active,timer:t.timer,message:t.message?t.message:e.notify.message,type:t.type?t.type:e.notify.type},c.default.fromJS(e).toJS();case d.default.AUTHENTICATE:return null!=t.active&&(e.authenticate.active=t.active),null!=t.type&&(e.authenticate.type=t.type),c.default.fromJS(e).toJS();case d.default.UPDATE_USER_STATUS:return t.url=location.origin,this._processAction(t,null,!0),e;case d.default.UPDATE_PASSWORD:var n=this;t.newPassword=(0,v.default)(t.newPassword);var r=function(t){null!=t&&(e.user=t,e.authenticate.active=!1)};return this._processAction(t,r,!1),c.default.fromJS(e).toJS();case d.default.REGISTER:var n=this,r=function(e){"function"==typeof t.callback&&setTimeout(function(){t.callback(e)},0)};return this._processAction(t,r,!1),c.default.fromJS(e).toJS();case d.default.LOGIN:var n=this;t.password=(0,v.default)(t.password);var r=function(n){"success"==n.status&&(e.user=n.user),"function"==typeof t.callback&&setTimeout(function(){t.callback(n)},0)};return this._processAction(t,r,!1),c.default.fromJS(e).toJS();case d.default.LOGOUT:var n=this,r=function(){e=n.getInitialState()};return this._processAction(t,r,!1),c.default.fromJS(e).toJS();case d.default.OPEN_CONTENT:return this._openContent(e.open,t.key),c.default.fromJS(e).toJS();case d.default.SERVER_REQUEST:return this._processAction(t.data,t.callback,t.async),e;case d.default.SAVE_RECIPE:return this._processAction(t,null,!1),e;case d.default.GET_RECIPE:var n=this,r=function(t){n._processContent(e.open,t)};return this._processAction(t,r,!1),c.default.fromJS(e).toJS();case d.default.NEW_RECIPE:var n=this,r=function(t){n._processContent(e.open,t)};return this._processAction(t,r,!1),c.default.fromJS(e).toJS();case d.default.CLOSE_RECIPE:for(var o=null,i=!1,a=0;a<e.open.length;a++)e.open[a].id==t.id&&(o=a,e.open[a].active&&(i=!0));if(i)for(var a=0;a<e.open.length;a++)"home"==e.open[a].id&&(e.open[a].active=!0);return null!=o&&e.open.splice(o,1),c.default.fromJS(e).toJS();case d.default.ADD_INGREDIENT:return e=this._updateActiveRecipe(function(e){return e.ingredients.push({id:"",unit:"",ingredientName:""}),e}),c.default.fromJS(e).toJS();case d.default.ADD_STEP:return e=this._updateActiveRecipe(function(e){return e.steps+="|",e}),c.default.fromJS(e).toJS();case d.default.UPDATE_VALUE:return e=this._updateActiveRecipe(function(e){return e[t.key]=t.value,e}),c.default.fromJS(e).toJS();default:return console.log("default"),e}}}]),t}(l.ReduceStore);t.default=new g},function(e,t,n){!function(t,n){e.exports=n()}(this,function(){"use strict";function e(e,t){t&&(e.prototype=Object.create(t.prototype)),e.prototype.constructor=e}function t(e){return i(e)?e:O(e)}function n(e){return a(e)?e:R(e)}function r(e){return s(e)?e:M(e)}function o(e){return i(e)&&!u(e)?e:k(e)}function i(e){return!(!e||!e[cn])}function a(e){return!(!e||!e[ln])}function s(e){return!(!e||!e[pn])}function u(e){return a(e)||s(e)}function c(e){return!(!e||!e[dn])}function l(e){return e.value=!1,e}function p(e){e&&(e.value=!0)}function d(){}function f(e,t){t=t||0;for(var n=Math.max(0,e.length-t),r=new Array(n),o=0;o<n;o++)r[o]=e[o+t];return r}function h(e){return void 0===e.size&&(e.size=e.__iterate(v)),e.size}function m(e,t){if("number"!=typeof t){var n=t>>>0;if(""+n!==t||4294967295===n)return NaN;t=n}return t<0?h(e)+t:t}function v(){return!0}function g(e,t,n){return(0===e||void 0!==n&&e<=-n)&&(void 0===t||void 0!==n&&t>=n)}function y(e,t){return E(e,t,0)}function _(e,t){return E(e,t,t)}function E(e,t,n){return void 0===e?n:e<0?Math.max(0,t+e):void 0===t?e:Math.min(t,e)}function b(e){this.next=e}function N(e,t,n,r){var o=0===e?t:1===e?n:[t,n];return r?r.value=o:r={value:o,done:!1},r}function w(){return{value:void 0,done:!0}}function C(e){return!!I(e)}function x(e){return e&&"function"==typeof e.next}function D(e){var t=I(e);return t&&t.call(e)}function I(e){var t=e&&(wn&&e[wn]||e[Cn]);if("function"==typeof t)return t}function S(e){return e&&"number"==typeof e.length}function O(e){return null===e||void 0===e?U():i(e)?e.toSeq():z(e)}function R(e){return null===e||void 0===e?U().toKeyedSeq():i(e)?a(e)?e.toSeq():e.fromEntrySeq():j(e)}function M(e){return null===e||void 0===e?U():i(e)?a(e)?e.entrySeq():e.toIndexedSeq():F(e)}function k(e){return(null===e||void 0===e?U():i(e)?a(e)?e.entrySeq():e:F(e)).toSetSeq()}function A(e){this._array=e,this.size=e.length}function T(e){var t=Object.keys(e);this._object=e,this._keys=t,this.size=t.length}function P(e){this._iterable=e,this.size=e.length||e.size}function V(e){this._iterator=e,this._iteratorCache=[]}function L(e){return!(!e||!e[Dn])}function U(){return In||(In=new A([]))}function j(e){var t=Array.isArray(e)?new A(e).fromEntrySeq():x(e)?new V(e).fromEntrySeq():C(e)?new P(e).fromEntrySeq():"object"==typeof e?new T(e):void 0;if(!t)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+e);return t}function F(e){var t=B(e);if(!t)throw new TypeError("Expected Array or iterable object of values: "+e);return t}function z(e){var t=B(e)||"object"==typeof e&&new T(e);if(!t)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+e);return t}function B(e){return S(e)?new A(e):x(e)?new V(e):C(e)?new P(e):void 0}function W(e,t,n,r){var o=e._cache;if(o){for(var i=o.length-1,a=0;a<=i;a++){var s=o[n?i-a:a];if(t(s[1],r?s[0]:a,e)===!1)return a+1}return a}return e.__iterateUncached(t,n)}function H(e,t,n,r){var o=e._cache;if(o){var i=o.length-1,a=0;return new b(function(){var e=o[n?i-a:a];return a++>i?w():N(t,r?e[0]:a-1,e[1])})}return e.__iteratorUncached(t,n)}function q(e,t){return t?G(t,e,"",{"":e}):Y(e)}function G(e,t,n,r){return Array.isArray(t)?e.call(r,n,M(t).map(function(n,r){return G(e,n,r,t)})):K(t)?e.call(r,n,R(t).map(function(n,r){return G(e,n,r,t)})):t}function Y(e){return Array.isArray(e)?M(e).map(Y).toList():K(e)?R(e).map(Y).toMap():e}function K(e){return e&&(e.constructor===Object||void 0===e.constructor)}function Z(e,t){if(e===t||e!==e&&t!==t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){if(e=e.valueOf(),t=t.valueOf(),e===t||e!==e&&t!==t)return!0;if(!e||!t)return!1}return!("function"!=typeof e.equals||"function"!=typeof t.equals||!e.equals(t))}function X(e,t){if(e===t)return!0;if(!i(t)||void 0!==e.size&&void 0!==t.size&&e.size!==t.size||void 0!==e.__hash&&void 0!==t.__hash&&e.__hash!==t.__hash||a(e)!==a(t)||s(e)!==s(t)||c(e)!==c(t))return!1;if(0===e.size&&0===t.size)return!0;var n=!u(e);if(c(e)){var r=e.entries();return t.every(function(e,t){var o=r.next().value;return o&&Z(o[1],e)&&(n||Z(o[0],t))})&&r.next().done}var o=!1;if(void 0===e.size)if(void 0===t.size)"function"==typeof e.cacheResult&&e.cacheResult();else{o=!0;var l=e;e=t,t=l}var p=!0,d=t.__iterate(function(t,r){if(n?!e.has(t):o?!Z(t,e.get(r,gn)):!Z(e.get(r,gn),t))return p=!1,!1});return p&&e.size===d}function J(e,t){if(!(this instanceof J))return new J(e,t);if(this._value=e,this.size=void 0===t?1/0:Math.max(0,t),0===this.size){if(Sn)return Sn;Sn=this}}function Q(e,t){if(!e)throw new Error(t)}function $(e,t,n){if(!(this instanceof $))return new $(e,t,n);if(Q(0!==n,"Cannot step a Range by 0"),e=e||0,void 0===t&&(t=1/0),n=void 0===n?1:Math.abs(n),t<e&&(n=-n),this._start=e,this._end=t,this._step=n,this.size=Math.max(0,Math.ceil((t-e)/n-1)+1),0===this.size){if(On)return On;On=this}}function ee(){throw TypeError("Abstract")}function te(){}function ne(){}function re(){}function oe(e){return e>>>1&1073741824|3221225471&e}function ie(e){if(e===!1||null===e||void 0===e)return 0;if("function"==typeof e.valueOf&&(e=e.valueOf(),e===!1||null===e||void 0===e))return 0;if(e===!0)return 1;var t=typeof e;if("number"===t){if(e!==e||e===1/0)return 0;var n=0|e;for(n!==e&&(n^=4294967295*e);e>4294967295;)e/=4294967295,n^=e;return oe(n)}if("string"===t)return e.length>Ln?ae(e):se(e);if("function"==typeof e.hashCode)return e.hashCode();if("object"===t)return ue(e);if("function"==typeof e.toString)return se(e.toString());throw new Error("Value type "+t+" cannot be hashed.")}function ae(e){var t=Fn[e];return void 0===t&&(t=se(e),jn===Un&&(jn=0,Fn={}),jn++,Fn[e]=t),t}function se(e){for(var t=0,n=0;n<e.length;n++)t=31*t+e.charCodeAt(n)|0;return oe(t)}function ue(e){var t;if(Tn&&(t=Rn.get(e),void 0!==t))return t;if(t=e[Vn],void 0!==t)return t;if(!An){if(t=e.propertyIsEnumerable&&e.propertyIsEnumerable[Vn],void 0!==t)return t;if(t=ce(e),void 0!==t)return t}if(t=++Pn,1073741824&Pn&&(Pn=0),Tn)Rn.set(e,t);else{if(void 0!==kn&&kn(e)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(An)Object.defineProperty(e,Vn,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(void 0!==e.propertyIsEnumerable&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},e.propertyIsEnumerable[Vn]=t;else{if(void 0===e.nodeType)throw new Error("Unable to set a non-enumerable property on object.");e[Vn]=t}}return t}function ce(e){if(e&&e.nodeType>0)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID}}function le(e){Q(e!==1/0,"Cannot perform this action with an infinite size.")}function pe(e){return null===e||void 0===e?Ne():de(e)&&!c(e)?e:Ne().withMutations(function(t){var r=n(e);le(r.size),r.forEach(function(e,n){return t.set(n,e)})})}function de(e){return!(!e||!e[zn])}function fe(e,t){this.ownerID=e,this.entries=t}function he(e,t,n){this.ownerID=e,this.bitmap=t,this.nodes=n}function me(e,t,n){this.ownerID=e,this.count=t,this.nodes=n}function ve(e,t,n){this.ownerID=e,this.keyHash=t,this.entries=n}function ge(e,t,n){this.ownerID=e,this.keyHash=t,this.entry=n}function ye(e,t,n){this._type=t,this._reverse=n,this._stack=e._root&&Ee(e._root)}function _e(e,t){return N(e,t[0],t[1])}function Ee(e,t){return{node:e,index:0,__prev:t}}function be(e,t,n,r){var o=Object.create(Bn);return o.size=e,o._root=t,o.__ownerID=n,o.__hash=r,o.__altered=!1,o}function Ne(){return Wn||(Wn=be(0))}function we(e,t,n){var r,o;if(e._root){var i=l(yn),a=l(_n);if(r=Ce(e._root,e.__ownerID,0,void 0,t,n,i,a),!a.value)return e;o=e.size+(i.value?n===gn?-1:1:0)}else{if(n===gn)return e;o=1,r=new fe(e.__ownerID,[[t,n]])}return e.__ownerID?(e.size=o,e._root=r,e.__hash=void 0,e.__altered=!0,e):r?be(o,r):Ne()}function Ce(e,t,n,r,o,i,a,s){return e?e.update(t,n,r,o,i,a,s):i===gn?e:(p(s),p(a),new ge(t,r,[o,i]))}function xe(e){return e.constructor===ge||e.constructor===ve}function De(e,t,n,r,o){if(e.keyHash===r)return new ve(t,r,[e.entry,o]);var i,a=(0===n?e.keyHash:e.keyHash>>>n)&vn,s=(0===n?r:r>>>n)&vn,u=a===s?[De(e,t,n+hn,r,o)]:(i=new ge(t,r,o),a<s?[e,i]:[i,e]);return new he(t,1<<a|1<<s,u)}function Ie(e,t,n,r){e||(e=new d);for(var o=new ge(e,ie(n),[n,r]),i=0;i<t.length;i++){var a=t[i];o=o.update(e,0,void 0,a[0],a[1])}return o}function Se(e,t,n,r){for(var o=0,i=0,a=new Array(n),s=0,u=1,c=t.length;s<c;s++,u<<=1){var l=t[s];void 0!==l&&s!==r&&(o|=u,a[i++]=l)}return new he(e,o,a)}function Oe(e,t,n,r,o){for(var i=0,a=new Array(mn),s=0;0!==n;s++,n>>>=1)a[s]=1&n?t[i++]:void 0;return a[r]=o,new me(e,i+1,a)}function Re(e,t,r){for(var o=[],a=0;a<r.length;a++){var s=r[a],u=n(s);i(s)||(u=u.map(function(e){return q(e)})),o.push(u)}return Ae(e,t,o)}function Me(e,t,n){return e&&e.mergeDeep&&i(t)?e.mergeDeep(t):Z(e,t)?e:t}function ke(e){return function(t,n,r){if(t&&t.mergeDeepWith&&i(n))return t.mergeDeepWith(e,n);var o=e(t,n,r);return Z(t,o)?t:o}}function Ae(e,t,n){return n=n.filter(function(e){return 0!==e.size}),0===n.length?e:0!==e.size||e.__ownerID||1!==n.length?e.withMutations(function(e){for(var r=t?function(n,r){e.update(r,gn,function(e){return e===gn?n:t(e,n,r)})}:function(t,n){e.set(n,t)},o=0;o<n.length;o++)n[o].forEach(r)}):e.constructor(n[0])}function Te(e,t,n,r){var o=e===gn,i=t.next();if(i.done){var a=o?n:e,s=r(a);return s===a?e:s}Q(o||e&&e.set,"invalid keyPath");var u=i.value,c=o?gn:e.get(u,gn),l=Te(c,t,n,r);return l===c?e:l===gn?e.remove(u):(o?Ne():e).set(u,l)}function Pe(e){return e-=e>>1&1431655765,e=(858993459&e)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,127&e}function Ve(e,t,n,r){var o=r?e:f(e);return o[t]=n,o}function Le(e,t,n,r){var o=e.length+1;if(r&&t+1===o)return e[t]=n,e;for(var i=new Array(o),a=0,s=0;s<o;s++)s===t?(i[s]=n,a=-1):i[s]=e[s+a];return i}function Ue(e,t,n){var r=e.length-1;if(n&&t===r)return e.pop(),e;for(var o=new Array(r),i=0,a=0;a<r;a++)a===t&&(i=1),o[a]=e[a+i];return o}function je(e){var t=He();if(null===e||void 0===e)return t;if(Fe(e))return e;var n=r(e),o=n.size;return 0===o?t:(le(o),o>0&&o<mn?We(0,o,hn,null,new ze(n.toArray())):t.withMutations(function(e){e.setSize(o),n.forEach(function(t,n){return e.set(n,t)})}))}function Fe(e){return!(!e||!e[Yn])}function ze(e,t){this.array=e,this.ownerID=t}function Be(e,t){function n(e,t,n){return 0===t?r(e,n):o(e,t,n)}function r(e,n){var r=n===s?u&&u.array:e&&e.array,o=n>i?0:i-n,c=a-n;return c>mn&&(c=mn),function(){if(o===c)return Xn;var e=t?--c:o++;return r&&r[e]}}function o(e,r,o){var s,u=e&&e.array,c=o>i?0:i-o>>r,l=(a-o>>r)+1;return l>mn&&(l=mn),function(){for(;;){if(s){var e=s();if(e!==Xn)return e;s=null}if(c===l)return Xn;var i=t?--l:c++;s=n(u&&u[i],r-hn,o+(i<<r))}}}var i=e._origin,a=e._capacity,s=Je(a),u=e._tail;return n(e._root,e._level,0)}function We(e,t,n,r,o,i,a){var s=Object.create(Kn);return s.size=t-e,s._origin=e,s._capacity=t,s._level=n,s._root=r,s._tail=o,s.__ownerID=i,s.__hash=a,s.__altered=!1,s}function He(){return Zn||(Zn=We(0,0,hn))}function qe(e,t,n){if(t=m(e,t),t!==t)return e;if(t>=e.size||t<0)return e.withMutations(function(e){t<0?Ze(e,t).set(0,n):Ze(e,0,t+1).set(t,n)});t+=e._origin;var r=e._tail,o=e._root,i=l(_n);return t>=Je(e._capacity)?r=Ge(r,e.__ownerID,0,t,n,i):o=Ge(o,e.__ownerID,e._level,t,n,i),i.value?e.__ownerID?(e._root=o,e._tail=r,e.__hash=void 0,e.__altered=!0,e):We(e._origin,e._capacity,e._level,o,r):e}function Ge(e,t,n,r,o,i){var a=r>>>n&vn,s=e&&a<e.array.length;if(!s&&void 0===o)return e;var u;if(n>0){var c=e&&e.array[a],l=Ge(c,t,n-hn,r,o,i);return l===c?e:(u=Ye(e,t),u.array[a]=l,u)}return s&&e.array[a]===o?e:(p(i),u=Ye(e,t),void 0===o&&a===u.array.length-1?u.array.pop():u.array[a]=o,u)}function Ye(e,t){return t&&e&&t===e.ownerID?e:new ze(e?e.array.slice():[],t)}function Ke(e,t){if(t>=Je(e._capacity))return e._tail;if(t<1<<e._level+hn){for(var n=e._root,r=e._level;n&&r>0;)n=n.array[t>>>r&vn],r-=hn;return n}}function Ze(e,t,n){void 0!==t&&(t|=0),void 0!==n&&(n|=0);var r=e.__ownerID||new d,o=e._origin,i=e._capacity,a=o+t,s=void 0===n?i:n<0?i+n:o+n;if(a===o&&s===i)return e;if(a>=s)return e.clear();for(var u=e._level,c=e._root,l=0;a+l<0;)c=new ze(c&&c.array.length?[void 0,c]:[],r),u+=hn,l+=1<<u;l&&(a+=l,o+=l,s+=l,i+=l);for(var p=Je(i),f=Je(s);f>=1<<u+hn;)c=new ze(c&&c.array.length?[c]:[],r),u+=hn;var h=e._tail,m=f<p?Ke(e,s-1):f>p?new ze([],r):h;if(h&&f>p&&a<i&&h.array.length){c=Ye(c,r);for(var v=c,g=u;g>hn;g-=hn){var y=p>>>g&vn;v=v.array[y]=Ye(v.array[y],r)}v.array[p>>>hn&vn]=h}if(s<i&&(m=m&&m.removeAfter(r,0,s)),a>=f)a-=f,s-=f,u=hn,c=null,m=m&&m.removeBefore(r,0,a);else if(a>o||f<p){for(l=0;c;){var _=a>>>u&vn;if(_!==f>>>u&vn)break;_&&(l+=(1<<u)*_),u-=hn,c=c.array[_]}c&&a>o&&(c=c.removeBefore(r,u,a-l)),c&&f<p&&(c=c.removeAfter(r,u,f-l)),l&&(a-=l,s-=l)}return e.__ownerID?(e.size=s-a,e._origin=a,
e._capacity=s,e._level=u,e._root=c,e._tail=m,e.__hash=void 0,e.__altered=!0,e):We(a,s,u,c,m)}function Xe(e,t,n){for(var o=[],a=0,s=0;s<n.length;s++){var u=n[s],c=r(u);c.size>a&&(a=c.size),i(u)||(c=c.map(function(e){return q(e)})),o.push(c)}return a>e.size&&(e=e.setSize(a)),Ae(e,t,o)}function Je(e){return e<mn?0:e-1>>>hn<<hn}function Qe(e){return null===e||void 0===e?tt():$e(e)?e:tt().withMutations(function(t){var r=n(e);le(r.size),r.forEach(function(e,n){return t.set(n,e)})})}function $e(e){return de(e)&&c(e)}function et(e,t,n,r){var o=Object.create(Qe.prototype);return o.size=e?e.size:0,o._map=e,o._list=t,o.__ownerID=n,o.__hash=r,o}function tt(){return Jn||(Jn=et(Ne(),He()))}function nt(e,t,n){var r,o,i=e._map,a=e._list,s=i.get(t),u=void 0!==s;if(n===gn){if(!u)return e;a.size>=mn&&a.size>=2*i.size?(o=a.filter(function(e,t){return void 0!==e&&s!==t}),r=o.toKeyedSeq().map(function(e){return e[0]}).flip().toMap(),e.__ownerID&&(r.__ownerID=o.__ownerID=e.__ownerID)):(r=i.remove(t),o=s===a.size-1?a.pop():a.set(s,void 0))}else if(u){if(n===a.get(s)[1])return e;r=i,o=a.set(s,[t,n])}else r=i.set(t,a.size),o=a.set(a.size,[t,n]);return e.__ownerID?(e.size=r.size,e._map=r,e._list=o,e.__hash=void 0,e):et(r,o)}function rt(e,t){this._iter=e,this._useKeys=t,this.size=e.size}function ot(e){this._iter=e,this.size=e.size}function it(e){this._iter=e,this.size=e.size}function at(e){this._iter=e,this.size=e.size}function st(e){var t=St(e);return t._iter=e,t.size=e.size,t.flip=function(){return e},t.reverse=function(){var t=e.reverse.apply(this);return t.flip=function(){return e.reverse()},t},t.has=function(t){return e.includes(t)},t.includes=function(t){return e.has(t)},t.cacheResult=Ot,t.__iterateUncached=function(t,n){var r=this;return e.__iterate(function(e,n){return t(n,e,r)!==!1},n)},t.__iteratorUncached=function(t,n){if(t===Nn){var r=e.__iterator(t,n);return new b(function(){var e=r.next();if(!e.done){var t=e.value[0];e.value[0]=e.value[1],e.value[1]=t}return e})}return e.__iterator(t===bn?En:bn,n)},t}function ut(e,t,n){var r=St(e);return r.size=e.size,r.has=function(t){return e.has(t)},r.get=function(r,o){var i=e.get(r,gn);return i===gn?o:t.call(n,i,r,e)},r.__iterateUncached=function(r,o){var i=this;return e.__iterate(function(e,o,a){return r(t.call(n,e,o,a),o,i)!==!1},o)},r.__iteratorUncached=function(r,o){var i=e.__iterator(Nn,o);return new b(function(){var o=i.next();if(o.done)return o;var a=o.value,s=a[0];return N(r,s,t.call(n,a[1],s,e),o)})},r}function ct(e,t){var n=St(e);return n._iter=e,n.size=e.size,n.reverse=function(){return e},e.flip&&(n.flip=function(){var t=st(e);return t.reverse=function(){return e.flip()},t}),n.get=function(n,r){return e.get(t?n:-1-n,r)},n.has=function(n){return e.has(t?n:-1-n)},n.includes=function(t){return e.includes(t)},n.cacheResult=Ot,n.__iterate=function(t,n){var r=this;return e.__iterate(function(e,n){return t(e,n,r)},!n)},n.__iterator=function(t,n){return e.__iterator(t,!n)},n}function lt(e,t,n,r){var o=St(e);return r&&(o.has=function(r){var o=e.get(r,gn);return o!==gn&&!!t.call(n,o,r,e)},o.get=function(r,o){var i=e.get(r,gn);return i!==gn&&t.call(n,i,r,e)?i:o}),o.__iterateUncached=function(o,i){var a=this,s=0;return e.__iterate(function(e,i,u){if(t.call(n,e,i,u))return s++,o(e,r?i:s-1,a)},i),s},o.__iteratorUncached=function(o,i){var a=e.__iterator(Nn,i),s=0;return new b(function(){for(;;){var i=a.next();if(i.done)return i;var u=i.value,c=u[0],l=u[1];if(t.call(n,l,c,e))return N(o,r?c:s++,l,i)}})},o}function pt(e,t,n){var r=pe().asMutable();return e.__iterate(function(o,i){r.update(t.call(n,o,i,e),0,function(e){return e+1})}),r.asImmutable()}function dt(e,t,n){var r=a(e),o=(c(e)?Qe():pe()).asMutable();e.__iterate(function(i,a){o.update(t.call(n,i,a,e),function(e){return e=e||[],e.push(r?[a,i]:i),e})});var i=It(e);return o.map(function(t){return Ct(e,i(t))})}function ft(e,t,n,r){var o=e.size;if(void 0!==t&&(t|=0),void 0!==n&&(n===1/0?n=o:n|=0),g(t,n,o))return e;var i=y(t,o),a=_(n,o);if(i!==i||a!==a)return ft(e.toSeq().cacheResult(),t,n,r);var s,u=a-i;u===u&&(s=u<0?0:u);var c=St(e);return c.size=0===s?s:e.size&&s||void 0,!r&&L(e)&&s>=0&&(c.get=function(t,n){return t=m(this,t),t>=0&&t<s?e.get(t+i,n):n}),c.__iterateUncached=function(t,n){var o=this;if(0===s)return 0;if(n)return this.cacheResult().__iterate(t,n);var a=0,u=!0,c=0;return e.__iterate(function(e,n){if(!u||!(u=a++<i))return c++,t(e,r?n:c-1,o)!==!1&&c!==s}),c},c.__iteratorUncached=function(t,n){if(0!==s&&n)return this.cacheResult().__iterator(t,n);var o=0!==s&&e.__iterator(t,n),a=0,u=0;return new b(function(){for(;a++<i;)o.next();if(++u>s)return w();var e=o.next();return r||t===bn?e:t===En?N(t,u-1,void 0,e):N(t,u-1,e.value[1],e)})},c}function ht(e,t,n){var r=St(e);return r.__iterateUncached=function(r,o){var i=this;if(o)return this.cacheResult().__iterate(r,o);var a=0;return e.__iterate(function(e,o,s){return t.call(n,e,o,s)&&++a&&r(e,o,i)}),a},r.__iteratorUncached=function(r,o){var i=this;if(o)return this.cacheResult().__iterator(r,o);var a=e.__iterator(Nn,o),s=!0;return new b(function(){if(!s)return w();var e=a.next();if(e.done)return e;var o=e.value,u=o[0],c=o[1];return t.call(n,c,u,i)?r===Nn?e:N(r,u,c,e):(s=!1,w())})},r}function mt(e,t,n,r){var o=St(e);return o.__iterateUncached=function(o,i){var a=this;if(i)return this.cacheResult().__iterate(o,i);var s=!0,u=0;return e.__iterate(function(e,i,c){if(!s||!(s=t.call(n,e,i,c)))return u++,o(e,r?i:u-1,a)}),u},o.__iteratorUncached=function(o,i){var a=this;if(i)return this.cacheResult().__iterator(o,i);var s=e.__iterator(Nn,i),u=!0,c=0;return new b(function(){var e,i,l;do{if(e=s.next(),e.done)return r||o===bn?e:o===En?N(o,c++,void 0,e):N(o,c++,e.value[1],e);var p=e.value;i=p[0],l=p[1],u&&(u=t.call(n,l,i,a))}while(u);return o===Nn?e:N(o,i,l,e)})},o}function vt(e,t){var r=a(e),o=[e].concat(t).map(function(e){return i(e)?r&&(e=n(e)):e=r?j(e):F(Array.isArray(e)?e:[e]),e}).filter(function(e){return 0!==e.size});if(0===o.length)return e;if(1===o.length){var u=o[0];if(u===e||r&&a(u)||s(e)&&s(u))return u}var c=new A(o);return r?c=c.toKeyedSeq():s(e)||(c=c.toSetSeq()),c=c.flatten(!0),c.size=o.reduce(function(e,t){if(void 0!==e){var n=t.size;if(void 0!==n)return e+n}},0),c}function gt(e,t,n){var r=St(e);return r.__iterateUncached=function(r,o){function a(e,c){var l=this;e.__iterate(function(e,o){return(!t||c<t)&&i(e)?a(e,c+1):r(e,n?o:s++,l)===!1&&(u=!0),!u},o)}var s=0,u=!1;return a(e,0),s},r.__iteratorUncached=function(r,o){var a=e.__iterator(r,o),s=[],u=0;return new b(function(){for(;a;){var e=a.next();if(e.done===!1){var c=e.value;if(r===Nn&&(c=c[1]),t&&!(s.length<t)||!i(c))return n?e:N(r,u++,c,e);s.push(a),a=c.__iterator(r,o)}else a=s.pop()}return w()})},r}function yt(e,t,n){var r=It(e);return e.toSeq().map(function(o,i){return r(t.call(n,o,i,e))}).flatten(!0)}function _t(e,t){var n=St(e);return n.size=e.size&&2*e.size-1,n.__iterateUncached=function(n,r){var o=this,i=0;return e.__iterate(function(e,r){return(!i||n(t,i++,o)!==!1)&&n(e,i++,o)!==!1},r),i},n.__iteratorUncached=function(n,r){var o,i=e.__iterator(bn,r),a=0;return new b(function(){return(!o||a%2)&&(o=i.next(),o.done)?o:a%2?N(n,a++,t):N(n,a++,o.value,o)})},n}function Et(e,t,n){t||(t=Rt);var r=a(e),o=0,i=e.toSeq().map(function(t,r){return[r,t,o++,n?n(t,r,e):t]}).toArray();return i.sort(function(e,n){return t(e[3],n[3])||e[2]-n[2]}).forEach(r?function(e,t){i[t].length=2}:function(e,t){i[t]=e[1]}),r?R(i):s(e)?M(i):k(i)}function bt(e,t,n){if(t||(t=Rt),n){var r=e.toSeq().map(function(t,r){return[t,n(t,r,e)]}).reduce(function(e,n){return Nt(t,e[1],n[1])?n:e});return r&&r[0]}return e.reduce(function(e,n){return Nt(t,e,n)?n:e})}function Nt(e,t,n){var r=e(n,t);return 0===r&&n!==t&&(void 0===n||null===n||n!==n)||r>0}function wt(e,n,r){var o=St(e);return o.size=new A(r).map(function(e){return e.size}).min(),o.__iterate=function(e,t){for(var n,r=this.__iterator(bn,t),o=0;!(n=r.next()).done&&e(n.value,o++,this)!==!1;);return o},o.__iteratorUncached=function(e,o){var i=r.map(function(e){return e=t(e),D(o?e.reverse():e)}),a=0,s=!1;return new b(function(){var t;return s||(t=i.map(function(e){return e.next()}),s=t.some(function(e){return e.done})),s?w():N(e,a++,n.apply(null,t.map(function(e){return e.value})))})},o}function Ct(e,t){return L(e)?t:e.constructor(t)}function xt(e){if(e!==Object(e))throw new TypeError("Expected [K, V] tuple: "+e)}function Dt(e){return le(e.size),h(e)}function It(e){return a(e)?n:s(e)?r:o}function St(e){return Object.create((a(e)?R:s(e)?M:k).prototype)}function Ot(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):O.prototype.cacheResult.call(this)}function Rt(e,t){return e>t?1:e<t?-1:0}function Mt(e){var n=D(e);if(!n){if(!S(e))throw new TypeError("Expected iterable or array-like: "+e);n=D(t(e))}return n}function kt(e,t){var n,r=function(i){if(i instanceof r)return i;if(!(this instanceof r))return new r(i);if(!n){n=!0;var a=Object.keys(e);Pt(o,a),o.size=a.length,o._name=t,o._keys=a,o._defaultValues=e}this._map=pe(i)},o=r.prototype=Object.create(Qn);return o.constructor=r,r}function At(e,t,n){var r=Object.create(Object.getPrototypeOf(e));return r._map=t,r.__ownerID=n,r}function Tt(e){return e._name||e.constructor.name||"Record"}function Pt(e,t){try{t.forEach(Vt.bind(void 0,e))}catch(e){}}function Vt(e,t){Object.defineProperty(e,t,{get:function(){return this.get(t)},set:function(e){Q(this.__ownerID,"Cannot set on an immutable record."),this.set(t,e)}})}function Lt(e){return null===e||void 0===e?zt():Ut(e)&&!c(e)?e:zt().withMutations(function(t){var n=o(e);le(n.size),n.forEach(function(e){return t.add(e)})})}function Ut(e){return!(!e||!e[$n])}function jt(e,t){return e.__ownerID?(e.size=t.size,e._map=t,e):t===e._map?e:0===t.size?e.__empty():e.__make(t)}function Ft(e,t){var n=Object.create(er);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function zt(){return tr||(tr=Ft(Ne()))}function Bt(e){return null===e||void 0===e?qt():Wt(e)?e:qt().withMutations(function(t){var n=o(e);le(n.size),n.forEach(function(e){return t.add(e)})})}function Wt(e){return Ut(e)&&c(e)}function Ht(e,t){var n=Object.create(nr);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function qt(){return rr||(rr=Ht(tt()))}function Gt(e){return null===e||void 0===e?Zt():Yt(e)?e:Zt().unshiftAll(e)}function Yt(e){return!(!e||!e[or])}function Kt(e,t,n,r){var o=Object.create(ir);return o.size=e,o._head=t,o.__ownerID=n,o.__hash=r,o.__altered=!1,o}function Zt(){return ar||(ar=Kt(0))}function Xt(e,t){var n=function(n){e.prototype[n]=t[n]};return Object.keys(t).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(n),e}function Jt(e,t){return t}function Qt(e,t){return[t,e]}function $t(e){return function(){return!e.apply(this,arguments)}}function en(e){return function(){return-e.apply(this,arguments)}}function tn(e){return"string"==typeof e?JSON.stringify(e):String(e)}function nn(){return f(arguments)}function rn(e,t){return e<t?1:e>t?-1:0}function on(e){if(e.size===1/0)return 0;var t=c(e),n=a(e),r=t?1:0,o=e.__iterate(n?t?function(e,t){r=31*r+sn(ie(e),ie(t))|0}:function(e,t){r=r+sn(ie(e),ie(t))|0}:t?function(e){r=31*r+ie(e)|0}:function(e){r=r+ie(e)|0});return an(o,r)}function an(e,t){return t=Mn(t,3432918353),t=Mn(t<<15|t>>>-15,461845907),t=Mn(t<<13|t>>>-13,5),t=(t+3864292196|0)^e,t=Mn(t^t>>>16,2246822507),t=Mn(t^t>>>13,3266489909),t=oe(t^t>>>16)}function sn(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}var un=Array.prototype.slice;e(n,t),e(r,t),e(o,t),t.isIterable=i,t.isKeyed=a,t.isIndexed=s,t.isAssociative=u,t.isOrdered=c,t.Keyed=n,t.Indexed=r,t.Set=o;var cn="@@__IMMUTABLE_ITERABLE__@@",ln="@@__IMMUTABLE_KEYED__@@",pn="@@__IMMUTABLE_INDEXED__@@",dn="@@__IMMUTABLE_ORDERED__@@",fn="delete",hn=5,mn=1<<hn,vn=mn-1,gn={},yn={value:!1},_n={value:!1},En=0,bn=1,Nn=2,wn="function"==typeof Symbol&&Symbol.iterator,Cn="@@iterator",xn=wn||Cn;b.prototype.toString=function(){return"[Iterator]"},b.KEYS=En,b.VALUES=bn,b.ENTRIES=Nn,b.prototype.inspect=b.prototype.toSource=function(){return this.toString()},b.prototype[xn]=function(){return this},e(O,t),O.of=function(){return O(arguments)},O.prototype.toSeq=function(){return this},O.prototype.toString=function(){return this.__toString("Seq {","}")},O.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},O.prototype.__iterate=function(e,t){return W(this,e,t,!0)},O.prototype.__iterator=function(e,t){return H(this,e,t,!0)},e(R,O),R.prototype.toKeyedSeq=function(){return this},e(M,O),M.of=function(){return M(arguments)},M.prototype.toIndexedSeq=function(){return this},M.prototype.toString=function(){return this.__toString("Seq [","]")},M.prototype.__iterate=function(e,t){return W(this,e,t,!1)},M.prototype.__iterator=function(e,t){return H(this,e,t,!1)},e(k,O),k.of=function(){return k(arguments)},k.prototype.toSetSeq=function(){return this},O.isSeq=L,O.Keyed=R,O.Set=k,O.Indexed=M;var Dn="@@__IMMUTABLE_SEQ__@@";O.prototype[Dn]=!0,e(A,M),A.prototype.get=function(e,t){return this.has(e)?this._array[m(this,e)]:t},A.prototype.__iterate=function(e,t){for(var n=this._array,r=n.length-1,o=0;o<=r;o++)if(e(n[t?r-o:o],o,this)===!1)return o+1;return o},A.prototype.__iterator=function(e,t){var n=this._array,r=n.length-1,o=0;return new b(function(){return o>r?w():N(e,o,n[t?r-o++:o++])})},e(T,R),T.prototype.get=function(e,t){return void 0===t||this.has(e)?this._object[e]:t},T.prototype.has=function(e){return this._object.hasOwnProperty(e)},T.prototype.__iterate=function(e,t){for(var n=this._object,r=this._keys,o=r.length-1,i=0;i<=o;i++){var a=r[t?o-i:i];if(e(n[a],a,this)===!1)return i+1}return i},T.prototype.__iterator=function(e,t){var n=this._object,r=this._keys,o=r.length-1,i=0;return new b(function(){var a=r[t?o-i:i];return i++>o?w():N(e,a,n[a])})},T.prototype[dn]=!0,e(P,M),P.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);var n=this._iterable,r=D(n),o=0;if(x(r))for(var i;!(i=r.next()).done&&e(i.value,o++,this)!==!1;);return o},P.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var n=this._iterable,r=D(n);if(!x(r))return new b(w);var o=0;return new b(function(){var t=r.next();return t.done?t:N(e,o++,t.value)})},e(V,M),V.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);for(var n=this._iterator,r=this._iteratorCache,o=0;o<r.length;)if(e(r[o],o++,this)===!1)return o;for(var i;!(i=n.next()).done;){var a=i.value;if(r[o]=a,e(a,o++,this)===!1)break}return o},V.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var n=this._iterator,r=this._iteratorCache,o=0;return new b(function(){if(o>=r.length){var t=n.next();if(t.done)return t;r[o]=t.value}return N(e,o,r[o++])})};var In;e(J,M),J.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},J.prototype.get=function(e,t){return this.has(e)?this._value:t},J.prototype.includes=function(e){return Z(this._value,e)},J.prototype.slice=function(e,t){var n=this.size;return g(e,t,n)?this:new J(this._value,_(t,n)-y(e,n))},J.prototype.reverse=function(){return this},J.prototype.indexOf=function(e){return Z(this._value,e)?0:-1},J.prototype.lastIndexOf=function(e){return Z(this._value,e)?this.size:-1},J.prototype.__iterate=function(e,t){for(var n=0;n<this.size;n++)if(e(this._value,n,this)===!1)return n+1;return n},J.prototype.__iterator=function(e,t){var n=this,r=0;return new b(function(){return r<n.size?N(e,r++,n._value):w()})},J.prototype.equals=function(e){return e instanceof J?Z(this._value,e._value):X(e)};var Sn;e($,M),$.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},$.prototype.get=function(e,t){return this.has(e)?this._start+m(this,e)*this._step:t},$.prototype.includes=function(e){var t=(e-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t)},$.prototype.slice=function(e,t){return g(e,t,this.size)?this:(e=y(e,this.size),t=_(t,this.size),t<=e?new $(0,0):new $(this.get(e,this._end),this.get(t,this._end),this._step))},$.prototype.indexOf=function(e){var t=e-this._start;if(t%this._step===0){var n=t/this._step;if(n>=0&&n<this.size)return n}return-1},$.prototype.lastIndexOf=function(e){return this.indexOf(e)},$.prototype.__iterate=function(e,t){for(var n=this.size-1,r=this._step,o=t?this._start+n*r:this._start,i=0;i<=n;i++){if(e(o,i,this)===!1)return i+1;o+=t?-r:r}return i},$.prototype.__iterator=function(e,t){var n=this.size-1,r=this._step,o=t?this._start+n*r:this._start,i=0;return new b(function(){var a=o;return o+=t?-r:r,i>n?w():N(e,i++,a)})},$.prototype.equals=function(e){return e instanceof $?this._start===e._start&&this._end===e._end&&this._step===e._step:X(this,e)};var On;e(ee,t),e(te,ee),e(ne,ee),e(re,ee),ee.Keyed=te,ee.Indexed=ne,ee.Set=re;var Rn,Mn="function"==typeof Math.imul&&Math.imul(4294967295,2)===-2?Math.imul:function(e,t){e|=0,t|=0;var n=65535&e,r=65535&t;return n*r+((e>>>16)*r+n*(t>>>16)<<16>>>0)|0},kn=Object.isExtensible,An=function(){try{return Object.defineProperty({},"@",{}),!0}catch(e){return!1}}(),Tn="function"==typeof WeakMap;Tn&&(Rn=new WeakMap);var Pn=0,Vn="__immutablehash__";"function"==typeof Symbol&&(Vn=Symbol(Vn));var Ln=16,Un=255,jn=0,Fn={};e(pe,te),pe.of=function(){var e=un.call(arguments,0);return Ne().withMutations(function(t){for(var n=0;n<e.length;n+=2){if(n+1>=e.length)throw new Error("Missing value for key: "+e[n]);t.set(e[n],e[n+1])}})},pe.prototype.toString=function(){return this.__toString("Map {","}")},pe.prototype.get=function(e,t){return this._root?this._root.get(0,void 0,e,t):t},pe.prototype.set=function(e,t){return we(this,e,t)},pe.prototype.setIn=function(e,t){return this.updateIn(e,gn,function(){return t})},pe.prototype.remove=function(e){return we(this,e,gn)},pe.prototype.deleteIn=function(e){return this.updateIn(e,function(){return gn})},pe.prototype.update=function(e,t,n){return 1===arguments.length?e(this):this.updateIn([e],t,n)},pe.prototype.updateIn=function(e,t,n){n||(n=t,t=void 0);var r=Te(this,Mt(e),t,n);return r===gn?void 0:r},pe.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Ne()},pe.prototype.merge=function(){return Re(this,void 0,arguments)},pe.prototype.mergeWith=function(e){var t=un.call(arguments,1);return Re(this,e,t)},pe.prototype.mergeIn=function(e){var t=un.call(arguments,1);return this.updateIn(e,Ne(),function(e){return"function"==typeof e.merge?e.merge.apply(e,t):t[t.length-1]})},pe.prototype.mergeDeep=function(){return Re(this,Me,arguments)},pe.prototype.mergeDeepWith=function(e){var t=un.call(arguments,1);return Re(this,ke(e),t)},pe.prototype.mergeDeepIn=function(e){var t=un.call(arguments,1);return this.updateIn(e,Ne(),function(e){return"function"==typeof e.mergeDeep?e.mergeDeep.apply(e,t):t[t.length-1]})},pe.prototype.sort=function(e){return Qe(Et(this,e))},pe.prototype.sortBy=function(e,t){return Qe(Et(this,t,e))},pe.prototype.withMutations=function(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this},pe.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new d)},pe.prototype.asImmutable=function(){return this.__ensureOwner()},pe.prototype.wasAltered=function(){return this.__altered},pe.prototype.__iterator=function(e,t){return new ye(this,e,t)},pe.prototype.__iterate=function(e,t){var n=this,r=0;return this._root&&this._root.iterate(function(t){return r++,e(t[1],t[0],n)},t),r},pe.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?be(this.size,this._root,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},pe.isMap=de;var zn="@@__IMMUTABLE_MAP__@@",Bn=pe.prototype;Bn[zn]=!0,Bn[fn]=Bn.remove,Bn.removeIn=Bn.deleteIn,fe.prototype.get=function(e,t,n,r){for(var o=this.entries,i=0,a=o.length;i<a;i++)if(Z(n,o[i][0]))return o[i][1];return r},fe.prototype.update=function(e,t,n,r,o,i,a){for(var s=o===gn,u=this.entries,c=0,l=u.length;c<l&&!Z(r,u[c][0]);c++);var d=c<l;if(d?u[c][1]===o:s)return this;if(p(a),(s||!d)&&p(i),!s||1!==u.length){if(!d&&!s&&u.length>=Hn)return Ie(e,u,r,o);var h=e&&e===this.ownerID,m=h?u:f(u);return d?s?c===l-1?m.pop():m[c]=m.pop():m[c]=[r,o]:m.push([r,o]),h?(this.entries=m,this):new fe(e,m)}},he.prototype.get=function(e,t,n,r){void 0===t&&(t=ie(n));var o=1<<((0===e?t:t>>>e)&vn),i=this.bitmap;return 0===(i&o)?r:this.nodes[Pe(i&o-1)].get(e+hn,t,n,r)},he.prototype.update=function(e,t,n,r,o,i,a){void 0===n&&(n=ie(r));var s=(0===t?n:n>>>t)&vn,u=1<<s,c=this.bitmap,l=0!==(c&u);if(!l&&o===gn)return this;var p=Pe(c&u-1),d=this.nodes,f=l?d[p]:void 0,h=Ce(f,e,t+hn,n,r,o,i,a);if(h===f)return this;if(!l&&h&&d.length>=qn)return Oe(e,d,c,s,h);if(l&&!h&&2===d.length&&xe(d[1^p]))return d[1^p];if(l&&h&&1===d.length&&xe(h))return h;var m=e&&e===this.ownerID,v=l?h?c:c^u:c|u,g=l?h?Ve(d,p,h,m):Ue(d,p,m):Le(d,p,h,m);return m?(this.bitmap=v,this.nodes=g,this):new he(e,v,g)},me.prototype.get=function(e,t,n,r){void 0===t&&(t=ie(n));var o=(0===e?t:t>>>e)&vn,i=this.nodes[o];return i?i.get(e+hn,t,n,r):r},me.prototype.update=function(e,t,n,r,o,i,a){void 0===n&&(n=ie(r));var s=(0===t?n:n>>>t)&vn,u=o===gn,c=this.nodes,l=c[s];if(u&&!l)return this;var p=Ce(l,e,t+hn,n,r,o,i,a);if(p===l)return this;var d=this.count;if(l){if(!p&&(d--,d<Gn))return Se(e,c,d,s)}else d++;var f=e&&e===this.ownerID,h=Ve(c,s,p,f);return f?(this.count=d,this.nodes=h,this):new me(e,d,h)},ve.prototype.get=function(e,t,n,r){for(var o=this.entries,i=0,a=o.length;i<a;i++)if(Z(n,o[i][0]))return o[i][1];return r},ve.prototype.update=function(e,t,n,r,o,i,a){void 0===n&&(n=ie(r));var s=o===gn;if(n!==this.keyHash)return s?this:(p(a),p(i),De(this,e,t,n,[r,o]));for(var u=this.entries,c=0,l=u.length;c<l&&!Z(r,u[c][0]);c++);var d=c<l;if(d?u[c][1]===o:s)return this;if(p(a),(s||!d)&&p(i),s&&2===l)return new ge(e,this.keyHash,u[1^c]);var h=e&&e===this.ownerID,m=h?u:f(u);return d?s?c===l-1?m.pop():m[c]=m.pop():m[c]=[r,o]:m.push([r,o]),h?(this.entries=m,this):new ve(e,this.keyHash,m)},ge.prototype.get=function(e,t,n,r){return Z(n,this.entry[0])?this.entry[1]:r},ge.prototype.update=function(e,t,n,r,o,i,a){var s=o===gn,u=Z(r,this.entry[0]);return(u?o===this.entry[1]:s)?this:(p(a),s?void p(i):u?e&&e===this.ownerID?(this.entry[1]=o,this):new ge(e,this.keyHash,[r,o]):(p(i),De(this,e,t,ie(r),[r,o])))},fe.prototype.iterate=ve.prototype.iterate=function(e,t){for(var n=this.entries,r=0,o=n.length-1;r<=o;r++)if(e(n[t?o-r:r])===!1)return!1},he.prototype.iterate=me.prototype.iterate=function(e,t){for(var n=this.nodes,r=0,o=n.length-1;r<=o;r++){var i=n[t?o-r:r];if(i&&i.iterate(e,t)===!1)return!1}},ge.prototype.iterate=function(e,t){return e(this.entry)},e(ye,b),ye.prototype.next=function(){for(var e=this._type,t=this._stack;t;){var n,r=t.node,o=t.index++;if(r.entry){if(0===o)return _e(e,r.entry)}else if(r.entries){if(n=r.entries.length-1,o<=n)return _e(e,r.entries[this._reverse?n-o:o])}else if(n=r.nodes.length-1,o<=n){var i=r.nodes[this._reverse?n-o:o];if(i){if(i.entry)return _e(e,i.entry);t=this._stack=Ee(i,t)}continue}t=this._stack=this._stack.__prev}return w()};var Wn,Hn=mn/4,qn=mn/2,Gn=mn/4;e(je,ne),je.of=function(){return this(arguments)},je.prototype.toString=function(){return this.__toString("List [","]")},je.prototype.get=function(e,t){if(e=m(this,e),e>=0&&e<this.size){e+=this._origin;var n=Ke(this,e);return n&&n.array[e&vn]}return t},je.prototype.set=function(e,t){return qe(this,e,t)},je.prototype.remove=function(e){return this.has(e)?0===e?this.shift():e===this.size-1?this.pop():this.splice(e,1):this},je.prototype.insert=function(e,t){return this.splice(e,0,t)},je.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=hn,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):He()},je.prototype.push=function(){var e=arguments,t=this.size;return this.withMutations(function(n){Ze(n,0,t+e.length);for(var r=0;r<e.length;r++)n.set(t+r,e[r])})},je.prototype.pop=function(){return Ze(this,0,-1)},je.prototype.unshift=function(){var e=arguments;return this.withMutations(function(t){Ze(t,-e.length);for(var n=0;n<e.length;n++)t.set(n,e[n])})},je.prototype.shift=function(){return Ze(this,1)},je.prototype.merge=function(){return Xe(this,void 0,arguments)},je.prototype.mergeWith=function(e){var t=un.call(arguments,1);return Xe(this,e,t)},je.prototype.mergeDeep=function(){return Xe(this,Me,arguments)},je.prototype.mergeDeepWith=function(e){var t=un.call(arguments,1);return Xe(this,ke(e),t)},je.prototype.setSize=function(e){return Ze(this,0,e)},je.prototype.slice=function(e,t){var n=this.size;return g(e,t,n)?this:Ze(this,y(e,n),_(t,n))},je.prototype.__iterator=function(e,t){var n=0,r=Be(this,t);return new b(function(){var t=r();return t===Xn?w():N(e,n++,t)})},je.prototype.__iterate=function(e,t){for(var n,r=0,o=Be(this,t);(n=o())!==Xn&&e(n,r++,this)!==!1;);return r},je.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?We(this._origin,this._capacity,this._level,this._root,this._tail,e,this.__hash):(this.__ownerID=e,this)},je.isList=Fe;var Yn="@@__IMMUTABLE_LIST__@@",Kn=je.prototype;Kn[Yn]=!0,Kn[fn]=Kn.remove,Kn.setIn=Bn.setIn,Kn.deleteIn=Kn.removeIn=Bn.removeIn,Kn.update=Bn.update,Kn.updateIn=Bn.updateIn,Kn.mergeIn=Bn.mergeIn,Kn.mergeDeepIn=Bn.mergeDeepIn,Kn.withMutations=Bn.withMutations,Kn.asMutable=Bn.asMutable,Kn.asImmutable=Bn.asImmutable,Kn.wasAltered=Bn.wasAltered,ze.prototype.removeBefore=function(e,t,n){if(n===t?1<<t:0===this.array.length)return this;var r=n>>>t&vn;if(r>=this.array.length)return new ze([],e);var o,i=0===r;if(t>0){var a=this.array[r];if(o=a&&a.removeBefore(e,t-hn,n),o===a&&i)return this}if(i&&!o)return this;var s=Ye(this,e);if(!i)for(var u=0;u<r;u++)s.array[u]=void 0;return o&&(s.array[r]=o),s},ze.prototype.removeAfter=function(e,t,n){if(n===(t?1<<t:0)||0===this.array.length)return this;var r=n-1>>>t&vn;if(r>=this.array.length)return this;var o;if(t>0){var i=this.array[r];if(o=i&&i.removeAfter(e,t-hn,n),o===i&&r===this.array.length-1)return this}var a=Ye(this,e);return a.array.splice(r+1),o&&(a.array[r]=o),a};var Zn,Xn={};e(Qe,pe),Qe.of=function(){return this(arguments)},Qe.prototype.toString=function(){return this.__toString("OrderedMap {","}")},Qe.prototype.get=function(e,t){var n=this._map.get(e);return void 0!==n?this._list.get(n)[1]:t},Qe.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):tt()},Qe.prototype.set=function(e,t){return nt(this,e,t)},Qe.prototype.remove=function(e){return nt(this,e,gn)},Qe.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Qe.prototype.__iterate=function(e,t){var n=this;return this._list.__iterate(function(t){return t&&e(t[1],t[0],n)},t)},Qe.prototype.__iterator=function(e,t){return this._list.fromEntrySeq().__iterator(e,t)},Qe.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e),n=this._list.__ensureOwner(e);return e?et(t,n,e,this.__hash):(this.__ownerID=e,this._map=t,this._list=n,this)},Qe.isOrderedMap=$e,Qe.prototype[dn]=!0,Qe.prototype[fn]=Qe.prototype.remove;var Jn;e(rt,R),rt.prototype.get=function(e,t){return this._iter.get(e,t)},rt.prototype.has=function(e){return this._iter.has(e)},rt.prototype.valueSeq=function(){return this._iter.valueSeq()},rt.prototype.reverse=function(){var e=this,t=ct(this,!0);return this._useKeys||(t.valueSeq=function(){return e._iter.toSeq().reverse()}),t},rt.prototype.map=function(e,t){var n=this,r=ut(this,e,t);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(e,t)}),r},rt.prototype.__iterate=function(e,t){var n,r=this;return this._iter.__iterate(this._useKeys?function(t,n){return e(t,n,r)}:(n=t?Dt(this):0,function(o){return e(o,t?--n:n++,r)}),t)},rt.prototype.__iterator=function(e,t){if(this._useKeys)return this._iter.__iterator(e,t);var n=this._iter.__iterator(bn,t),r=t?Dt(this):0;return new b(function(){var o=n.next();return o.done?o:N(e,t?--r:r++,o.value,o)})},rt.prototype[dn]=!0,e(ot,M),ot.prototype.includes=function(e){return this._iter.includes(e)},ot.prototype.__iterate=function(e,t){var n=this,r=0;return this._iter.__iterate(function(t){return e(t,r++,n)},t)},ot.prototype.__iterator=function(e,t){var n=this._iter.__iterator(bn,t),r=0;return new b(function(){var t=n.next();return t.done?t:N(e,r++,t.value,t)})},e(it,k),it.prototype.has=function(e){return this._iter.includes(e)},it.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate(function(t){return e(t,t,n)},t)},it.prototype.__iterator=function(e,t){var n=this._iter.__iterator(bn,t);return new b(function(){var t=n.next();return t.done?t:N(e,t.value,t.value,t)})},e(at,R),at.prototype.entrySeq=function(){return this._iter.toSeq()},at.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate(function(t){if(t){xt(t);var r=i(t);return e(r?t.get(1):t[1],r?t.get(0):t[0],n)}},t)},at.prototype.__iterator=function(e,t){var n=this._iter.__iterator(bn,t);return new b(function(){for(;;){var t=n.next();if(t.done)return t;var r=t.value;if(r){xt(r);var o=i(r);return N(e,o?r.get(0):r[0],o?r.get(1):r[1],t)}}})},ot.prototype.cacheResult=rt.prototype.cacheResult=it.prototype.cacheResult=at.prototype.cacheResult=Ot,e(kt,te),kt.prototype.toString=function(){return this.__toString(Tt(this)+" {","}")},kt.prototype.has=function(e){return this._defaultValues.hasOwnProperty(e)},kt.prototype.get=function(e,t){if(!this.has(e))return t;var n=this._defaultValues[e];return this._map?this._map.get(e,n):n},kt.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var e=this.constructor;return e._empty||(e._empty=At(this,Ne()))},kt.prototype.set=function(e,t){if(!this.has(e))throw new Error('Cannot set unknown key "'+e+'" on '+Tt(this));if(this._map&&!this._map.has(e)){var n=this._defaultValues[e];if(t===n)return this}var r=this._map&&this._map.set(e,t);return this.__ownerID||r===this._map?this:At(this,r)},kt.prototype.remove=function(e){if(!this.has(e))return this;var t=this._map&&this._map.remove(e);return this.__ownerID||t===this._map?this:At(this,t)},kt.prototype.wasAltered=function(){return this._map.wasAltered()},kt.prototype.__iterator=function(e,t){var r=this;return n(this._defaultValues).map(function(e,t){return r.get(t)}).__iterator(e,t)},kt.prototype.__iterate=function(e,t){var r=this;return n(this._defaultValues).map(function(e,t){return r.get(t)}).__iterate(e,t)},kt.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map&&this._map.__ensureOwner(e);return e?At(this,t,e):(this.__ownerID=e,this._map=t,this)};var Qn=kt.prototype;Qn[fn]=Qn.remove,Qn.deleteIn=Qn.removeIn=Bn.removeIn,Qn.merge=Bn.merge,Qn.mergeWith=Bn.mergeWith,Qn.mergeIn=Bn.mergeIn,Qn.mergeDeep=Bn.mergeDeep,Qn.mergeDeepWith=Bn.mergeDeepWith,Qn.mergeDeepIn=Bn.mergeDeepIn,Qn.setIn=Bn.setIn,Qn.update=Bn.update,Qn.updateIn=Bn.updateIn,Qn.withMutations=Bn.withMutations,Qn.asMutable=Bn.asMutable,Qn.asImmutable=Bn.asImmutable,e(Lt,re),Lt.of=function(){return this(arguments)},Lt.fromKeys=function(e){return this(n(e).keySeq())},Lt.prototype.toString=function(){return this.__toString("Set {","}")},Lt.prototype.has=function(e){return this._map.has(e)},Lt.prototype.add=function(e){return jt(this,this._map.set(e,!0))},Lt.prototype.remove=function(e){return jt(this,this._map.remove(e))},Lt.prototype.clear=function(){return jt(this,this._map.clear())},Lt.prototype.union=function(){var e=un.call(arguments,0);return e=e.filter(function(e){return 0!==e.size}),0===e.length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations(function(t){for(var n=0;n<e.length;n++)o(e[n]).forEach(function(e){return t.add(e)})}):this.constructor(e[0])},Lt.prototype.intersect=function(){var e=un.call(arguments,0);if(0===e.length)return this;
e=e.map(function(e){return o(e)});var t=this;return this.withMutations(function(n){t.forEach(function(t){e.every(function(e){return e.includes(t)})||n.remove(t)})})},Lt.prototype.subtract=function(){var e=un.call(arguments,0);if(0===e.length)return this;e=e.map(function(e){return o(e)});var t=this;return this.withMutations(function(n){t.forEach(function(t){e.some(function(e){return e.includes(t)})&&n.remove(t)})})},Lt.prototype.merge=function(){return this.union.apply(this,arguments)},Lt.prototype.mergeWith=function(e){var t=un.call(arguments,1);return this.union.apply(this,t)},Lt.prototype.sort=function(e){return Bt(Et(this,e))},Lt.prototype.sortBy=function(e,t){return Bt(Et(this,t,e))},Lt.prototype.wasAltered=function(){return this._map.wasAltered()},Lt.prototype.__iterate=function(e,t){var n=this;return this._map.__iterate(function(t,r){return e(r,r,n)},t)},Lt.prototype.__iterator=function(e,t){return this._map.map(function(e,t){return t}).__iterator(e,t)},Lt.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e);return e?this.__make(t,e):(this.__ownerID=e,this._map=t,this)},Lt.isSet=Ut;var $n="@@__IMMUTABLE_SET__@@",er=Lt.prototype;er[$n]=!0,er[fn]=er.remove,er.mergeDeep=er.merge,er.mergeDeepWith=er.mergeWith,er.withMutations=Bn.withMutations,er.asMutable=Bn.asMutable,er.asImmutable=Bn.asImmutable,er.__empty=zt,er.__make=Ft;var tr;e(Bt,Lt),Bt.of=function(){return this(arguments)},Bt.fromKeys=function(e){return this(n(e).keySeq())},Bt.prototype.toString=function(){return this.__toString("OrderedSet {","}")},Bt.isOrderedSet=Wt;var nr=Bt.prototype;nr[dn]=!0,nr.__empty=qt,nr.__make=Ht;var rr;e(Gt,ne),Gt.of=function(){return this(arguments)},Gt.prototype.toString=function(){return this.__toString("Stack [","]")},Gt.prototype.get=function(e,t){var n=this._head;for(e=m(this,e);n&&e--;)n=n.next;return n?n.value:t},Gt.prototype.peek=function(){return this._head&&this._head.value},Gt.prototype.push=function(){if(0===arguments.length)return this;for(var e=this.size+arguments.length,t=this._head,n=arguments.length-1;n>=0;n--)t={value:arguments[n],next:t};return this.__ownerID?(this.size=e,this._head=t,this.__hash=void 0,this.__altered=!0,this):Kt(e,t)},Gt.prototype.pushAll=function(e){if(e=r(e),0===e.size)return this;le(e.size);var t=this.size,n=this._head;return e.reverse().forEach(function(e){t++,n={value:e,next:n}}),this.__ownerID?(this.size=t,this._head=n,this.__hash=void 0,this.__altered=!0,this):Kt(t,n)},Gt.prototype.pop=function(){return this.slice(1)},Gt.prototype.unshift=function(){return this.push.apply(this,arguments)},Gt.prototype.unshiftAll=function(e){return this.pushAll(e)},Gt.prototype.shift=function(){return this.pop.apply(this,arguments)},Gt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Zt()},Gt.prototype.slice=function(e,t){if(g(e,t,this.size))return this;var n=y(e,this.size),r=_(t,this.size);if(r!==this.size)return ne.prototype.slice.call(this,e,t);for(var o=this.size-n,i=this._head;n--;)i=i.next;return this.__ownerID?(this.size=o,this._head=i,this.__hash=void 0,this.__altered=!0,this):Kt(o,i)},Gt.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Kt(this.size,this._head,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},Gt.prototype.__iterate=function(e,t){if(t)return this.reverse().__iterate(e);for(var n=0,r=this._head;r&&e(r.value,n++,this)!==!1;)r=r.next;return n},Gt.prototype.__iterator=function(e,t){if(t)return this.reverse().__iterator(e);var n=0,r=this._head;return new b(function(){if(r){var t=r.value;return r=r.next,N(e,n++,t)}return w()})},Gt.isStack=Yt;var or="@@__IMMUTABLE_STACK__@@",ir=Gt.prototype;ir[or]=!0,ir.withMutations=Bn.withMutations,ir.asMutable=Bn.asMutable,ir.asImmutable=Bn.asImmutable,ir.wasAltered=Bn.wasAltered;var ar;t.Iterator=b,Xt(t,{toArray:function(){le(this.size);var e=new Array(this.size||0);return this.valueSeq().__iterate(function(t,n){e[n]=t}),e},toIndexedSeq:function(){return new ot(this)},toJS:function(){return this.toSeq().map(function(e){return e&&"function"==typeof e.toJS?e.toJS():e}).__toJS()},toJSON:function(){return this.toSeq().map(function(e){return e&&"function"==typeof e.toJSON?e.toJSON():e}).__toJS()},toKeyedSeq:function(){return new rt(this,!0)},toMap:function(){return pe(this.toKeyedSeq())},toObject:function(){le(this.size);var e={};return this.__iterate(function(t,n){e[n]=t}),e},toOrderedMap:function(){return Qe(this.toKeyedSeq())},toOrderedSet:function(){return Bt(a(this)?this.valueSeq():this)},toSet:function(){return Lt(a(this)?this.valueSeq():this)},toSetSeq:function(){return new it(this)},toSeq:function(){return s(this)?this.toIndexedSeq():a(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Gt(a(this)?this.valueSeq():this)},toList:function(){return je(a(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(e,t){return 0===this.size?e+t:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+t},concat:function(){var e=un.call(arguments,0);return Ct(this,vt(this,e))},includes:function(e){return this.some(function(t){return Z(t,e)})},entries:function(){return this.__iterator(Nn)},every:function(e,t){le(this.size);var n=!0;return this.__iterate(function(r,o,i){if(!e.call(t,r,o,i))return n=!1,!1}),n},filter:function(e,t){return Ct(this,lt(this,e,t,!0))},find:function(e,t,n){var r=this.findEntry(e,t);return r?r[1]:n},forEach:function(e,t){return le(this.size),this.__iterate(t?e.bind(t):e)},join:function(e){le(this.size),e=void 0!==e?""+e:",";var t="",n=!0;return this.__iterate(function(r){n?n=!1:t+=e,t+=null!==r&&void 0!==r?r.toString():""}),t},keys:function(){return this.__iterator(En)},map:function(e,t){return Ct(this,ut(this,e,t))},reduce:function(e,t,n){le(this.size);var r,o;return arguments.length<2?o=!0:r=t,this.__iterate(function(t,i,a){o?(o=!1,r=t):r=e.call(n,r,t,i,a)}),r},reduceRight:function(e,t,n){var r=this.toKeyedSeq().reverse();return r.reduce.apply(r,arguments)},reverse:function(){return Ct(this,ct(this,!0))},slice:function(e,t){return Ct(this,ft(this,e,t,!0))},some:function(e,t){return!this.every($t(e),t)},sort:function(e){return Ct(this,Et(this,e))},values:function(){return this.__iterator(bn)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(e,t){return h(e?this.toSeq().filter(e,t):this)},countBy:function(e,t){return pt(this,e,t)},equals:function(e){return X(this,e)},entrySeq:function(){var e=this;if(e._cache)return new A(e._cache);var t=e.toSeq().map(Qt).toIndexedSeq();return t.fromEntrySeq=function(){return e.toSeq()},t},filterNot:function(e,t){return this.filter($t(e),t)},findEntry:function(e,t,n){var r=n;return this.__iterate(function(n,o,i){if(e.call(t,n,o,i))return r=[o,n],!1}),r},findKey:function(e,t){var n=this.findEntry(e,t);return n&&n[0]},findLast:function(e,t,n){return this.toKeyedSeq().reverse().find(e,t,n)},findLastEntry:function(e,t,n){return this.toKeyedSeq().reverse().findEntry(e,t,n)},findLastKey:function(e,t){return this.toKeyedSeq().reverse().findKey(e,t)},first:function(){return this.find(v)},flatMap:function(e,t){return Ct(this,yt(this,e,t))},flatten:function(e){return Ct(this,gt(this,e,!0))},fromEntrySeq:function(){return new at(this)},get:function(e,t){return this.find(function(t,n){return Z(n,e)},void 0,t)},getIn:function(e,t){for(var n,r=this,o=Mt(e);!(n=o.next()).done;){var i=n.value;if(r=r&&r.get?r.get(i,gn):gn,r===gn)return t}return r},groupBy:function(e,t){return dt(this,e,t)},has:function(e){return this.get(e,gn)!==gn},hasIn:function(e){return this.getIn(e,gn)!==gn},isSubset:function(e){return e="function"==typeof e.includes?e:t(e),this.every(function(t){return e.includes(t)})},isSuperset:function(e){return e="function"==typeof e.isSubset?e:t(e),e.isSubset(this)},keyOf:function(e){return this.findKey(function(t){return Z(t,e)})},keySeq:function(){return this.toSeq().map(Jt).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(e){return this.toKeyedSeq().reverse().keyOf(e)},max:function(e){return bt(this,e)},maxBy:function(e,t){return bt(this,t,e)},min:function(e){return bt(this,e?en(e):rn)},minBy:function(e,t){return bt(this,t?en(t):rn,e)},rest:function(){return this.slice(1)},skip:function(e){return this.slice(Math.max(0,e))},skipLast:function(e){return Ct(this,this.toSeq().reverse().skip(e).reverse())},skipWhile:function(e,t){return Ct(this,mt(this,e,t,!0))},skipUntil:function(e,t){return this.skipWhile($t(e),t)},sortBy:function(e,t){return Ct(this,Et(this,t,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return Ct(this,this.toSeq().reverse().take(e).reverse())},takeWhile:function(e,t){return Ct(this,ht(this,e,t))},takeUntil:function(e,t){return this.takeWhile($t(e),t)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=on(this))}});var sr=t.prototype;sr[cn]=!0,sr[xn]=sr.values,sr.__toJS=sr.toArray,sr.__toStringMapper=tn,sr.inspect=sr.toSource=function(){return this.toString()},sr.chain=sr.flatMap,sr.contains=sr.includes,Xt(n,{flip:function(){return Ct(this,st(this))},mapEntries:function(e,t){var n=this,r=0;return Ct(this,this.toSeq().map(function(o,i){return e.call(t,[i,o],r++,n)}).fromEntrySeq())},mapKeys:function(e,t){var n=this;return Ct(this,this.toSeq().flip().map(function(r,o){return e.call(t,r,o,n)}).flip())}});var ur=n.prototype;ur[ln]=!0,ur[xn]=sr.entries,ur.__toJS=sr.toObject,ur.__toStringMapper=function(e,t){return JSON.stringify(t)+": "+tn(e)},Xt(r,{toKeyedSeq:function(){return new rt(this,!1)},filter:function(e,t){return Ct(this,lt(this,e,t,!1))},findIndex:function(e,t){var n=this.findEntry(e,t);return n?n[0]:-1},indexOf:function(e){var t=this.keyOf(e);return void 0===t?-1:t},lastIndexOf:function(e){var t=this.lastKeyOf(e);return void 0===t?-1:t},reverse:function(){return Ct(this,ct(this,!1))},slice:function(e,t){return Ct(this,ft(this,e,t,!1))},splice:function(e,t){var n=arguments.length;if(t=Math.max(0|t,0),0===n||2===n&&!t)return this;e=y(e,e<0?this.count():this.size);var r=this.slice(0,e);return Ct(this,1===n?r:r.concat(f(arguments,2),this.slice(e+t)))},findLastIndex:function(e,t){var n=this.findLastEntry(e,t);return n?n[0]:-1},first:function(){return this.get(0)},flatten:function(e){return Ct(this,gt(this,e,!1))},get:function(e,t){return e=m(this,e),e<0||this.size===1/0||void 0!==this.size&&e>this.size?t:this.find(function(t,n){return n===e},void 0,t)},has:function(e){return e=m(this,e),e>=0&&(void 0!==this.size?this.size===1/0||e<this.size:this.indexOf(e)!==-1)},interpose:function(e){return Ct(this,_t(this,e))},interleave:function(){var e=[this].concat(f(arguments)),t=wt(this.toSeq(),M.of,e),n=t.flatten(!0);return t.size&&(n.size=t.size*e.length),Ct(this,n)},keySeq:function(){return $(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(e,t){return Ct(this,mt(this,e,t,!1))},zip:function(){var e=[this].concat(f(arguments));return Ct(this,wt(this,nn,e))},zipWith:function(e){var t=f(arguments);return t[0]=this,Ct(this,wt(this,e,t))}}),r.prototype[pn]=!0,r.prototype[dn]=!0,Xt(o,{get:function(e,t){return this.has(e)?e:t},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}}),o.prototype.has=sr.includes,o.prototype.contains=o.prototype.includes,Xt(R,n.prototype),Xt(M,r.prototype),Xt(k,o.prototype),Xt(te,n.prototype),Xt(ne,r.prototype),Xt(re,o.prototype);var cr={Iterable:t,Seq:O,Collection:ee,Map:pe,OrderedMap:Qe,List:je,Stack:Gt,Set:Lt,OrderedSet:Bt,Record:kt,Range:$,Repeat:J,is:Z,fromJS:q};return cr})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;(function(process,global){/**
	 * [js-md5]{@link https://github.com/emn178/js-md5}
	 *
	 * @namespace md5
	 * @version 0.7.3
	 * @author Chen, Yi-Cyuan [emn178@gmail.com]
	 * @copyright Chen, Yi-Cyuan 2014-2017
	 * @license MIT
	 */
!function(){"use strict";function Md5(e){if(e)blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks,this.buffer8=buffer8;else if(ARRAY_BUFFER){var t=new ArrayBuffer(68);this.buffer8=new Uint8Array(t),this.blocks=new Uint32Array(t)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}var ERROR="input is invalid type",WINDOW="object"==typeof window,root=WINDOW?window:{};root.JS_MD5_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"==typeof self,NODE_JS=!root.JS_MD5_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_MD5_NO_COMMON_JS&&"object"==typeof module&&module.exports,AMD=__webpack_require__(232),ARRAY_BUFFER=!root.JS_MD5_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[128,32768,8388608,-2147483648],SHIFT=[0,8,16,24],OUTPUT_TYPES=["hex","array","digest","buffer","arrayBuffer","base64"],BASE64_ENCODE_CHAR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),blocks=[],buffer8;if(ARRAY_BUFFER){var buffer=new ArrayBuffer(68);buffer8=new Uint8Array(buffer),blocks=new Uint32Array(buffer)}!root.JS_MD5_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!ARRAY_BUFFER||!root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});var createOutputMethod=function(e){return function(t){return new Md5(!0).update(t)[e]()}},createMethod=function(){var e=createOutputMethod("hex");NODE_JS&&(e=nodeWrap(e)),e.create=function(){return new Md5},e.update=function(t){return e.create().update(t)};for(var t=0;t<OUTPUT_TYPES.length;++t){var n=OUTPUT_TYPES[t];e[n]=createOutputMethod(n)}return e},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(e){if("string"==typeof e)return crypto.createHash("md5").update(e,"utf8").digest("hex");if(null===e||void 0===e)throw ERROR;return e.constructor===ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||ArrayBuffer.isView(e)||e.constructor===Buffer?crypto.createHash("md5").update(new Buffer(e)).digest("hex"):method(e)};return nodeMethod};Md5.prototype.update=function(e){if(!this.finalized){var t,n=typeof e;if("string"!==n){if("object"!==n)throw ERROR;if(null===e)throw ERROR;if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||ARRAY_BUFFER&&ArrayBuffer.isView(e)))throw ERROR;t=!0}for(var r,o,i=0,a=e.length,s=this.blocks,u=this.buffer8;i<a;){if(this.hashed&&(this.hashed=!1,s[0]=s[16],s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),t)if(ARRAY_BUFFER)for(o=this.start;i<a&&o<64;++i)u[o++]=e[i];else for(o=this.start;i<a&&o<64;++i)s[o>>2]|=e[i]<<SHIFT[3&o++];else if(ARRAY_BUFFER)for(o=this.start;i<a&&o<64;++i)r=e.charCodeAt(i),r<128?u[o++]=r:r<2048?(u[o++]=192|r>>6,u[o++]=128|63&r):r<55296||r>=57344?(u[o++]=224|r>>12,u[o++]=128|r>>6&63,u[o++]=128|63&r):(r=65536+((1023&r)<<10|1023&e.charCodeAt(++i)),u[o++]=240|r>>18,u[o++]=128|r>>12&63,u[o++]=128|r>>6&63,u[o++]=128|63&r);else for(o=this.start;i<a&&o<64;++i)r=e.charCodeAt(i),r<128?s[o>>2]|=r<<SHIFT[3&o++]:r<2048?(s[o>>2]|=(192|r>>6)<<SHIFT[3&o++],s[o>>2]|=(128|63&r)<<SHIFT[3&o++]):r<55296||r>=57344?(s[o>>2]|=(224|r>>12)<<SHIFT[3&o++],s[o>>2]|=(128|r>>6&63)<<SHIFT[3&o++],s[o>>2]|=(128|63&r)<<SHIFT[3&o++]):(r=65536+((1023&r)<<10|1023&e.charCodeAt(++i)),s[o>>2]|=(240|r>>18)<<SHIFT[3&o++],s[o>>2]|=(128|r>>12&63)<<SHIFT[3&o++],s[o>>2]|=(128|r>>6&63)<<SHIFT[3&o++],s[o>>2]|=(128|63&r)<<SHIFT[3&o++]);this.lastByteIndex=o,this.bytes+=o-this.start,o>=64?(this.start=o-64,this.hash(),this.hashed=!0):this.start=o}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Md5.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[t>>2]|=EXTRA[3&t],t>=56&&(this.hashed||this.hash(),e[0]=e[16],e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.bytes<<3,e[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},Md5.prototype.hash=function(){var e,t,n,r,o,i,a=this.blocks;this.first?(e=a[0]-680876937,e=(e<<7|e>>>25)-271733879<<0,r=(-1732584194^2004318071&e)+a[1]-117830708,r=(r<<12|r>>>20)+e<<0,n=(-271733879^r&(e^-271733879))+a[2]-1126478375,n=(n<<17|n>>>15)+r<<0,t=(e^n&(r^e))+a[3]-1316259209,t=(t<<22|t>>>10)+n<<0):(e=this.h0,t=this.h1,n=this.h2,r=this.h3,e+=(r^t&(n^r))+a[0]-680876936,e=(e<<7|e>>>25)+t<<0,r+=(n^e&(t^n))+a[1]-389564586,r=(r<<12|r>>>20)+e<<0,n+=(t^r&(e^t))+a[2]+606105819,n=(n<<17|n>>>15)+r<<0,t+=(e^n&(r^e))+a[3]-1044525330,t=(t<<22|t>>>10)+n<<0),e+=(r^t&(n^r))+a[4]-176418897,e=(e<<7|e>>>25)+t<<0,r+=(n^e&(t^n))+a[5]+1200080426,r=(r<<12|r>>>20)+e<<0,n+=(t^r&(e^t))+a[6]-1473231341,n=(n<<17|n>>>15)+r<<0,t+=(e^n&(r^e))+a[7]-45705983,t=(t<<22|t>>>10)+n<<0,e+=(r^t&(n^r))+a[8]+1770035416,e=(e<<7|e>>>25)+t<<0,r+=(n^e&(t^n))+a[9]-1958414417,r=(r<<12|r>>>20)+e<<0,n+=(t^r&(e^t))+a[10]-42063,n=(n<<17|n>>>15)+r<<0,t+=(e^n&(r^e))+a[11]-1990404162,t=(t<<22|t>>>10)+n<<0,e+=(r^t&(n^r))+a[12]+1804603682,e=(e<<7|e>>>25)+t<<0,r+=(n^e&(t^n))+a[13]-40341101,r=(r<<12|r>>>20)+e<<0,n+=(t^r&(e^t))+a[14]-1502002290,n=(n<<17|n>>>15)+r<<0,t+=(e^n&(r^e))+a[15]+1236535329,t=(t<<22|t>>>10)+n<<0,e+=(n^r&(t^n))+a[1]-165796510,e=(e<<5|e>>>27)+t<<0,r+=(t^n&(e^t))+a[6]-1069501632,r=(r<<9|r>>>23)+e<<0,n+=(e^t&(r^e))+a[11]+643717713,n=(n<<14|n>>>18)+r<<0,t+=(r^e&(n^r))+a[0]-373897302,t=(t<<20|t>>>12)+n<<0,e+=(n^r&(t^n))+a[5]-701558691,e=(e<<5|e>>>27)+t<<0,r+=(t^n&(e^t))+a[10]+38016083,r=(r<<9|r>>>23)+e<<0,n+=(e^t&(r^e))+a[15]-660478335,n=(n<<14|n>>>18)+r<<0,t+=(r^e&(n^r))+a[4]-405537848,t=(t<<20|t>>>12)+n<<0,e+=(n^r&(t^n))+a[9]+568446438,e=(e<<5|e>>>27)+t<<0,r+=(t^n&(e^t))+a[14]-1019803690,r=(r<<9|r>>>23)+e<<0,n+=(e^t&(r^e))+a[3]-187363961,n=(n<<14|n>>>18)+r<<0,t+=(r^e&(n^r))+a[8]+1163531501,t=(t<<20|t>>>12)+n<<0,e+=(n^r&(t^n))+a[13]-1444681467,e=(e<<5|e>>>27)+t<<0,r+=(t^n&(e^t))+a[2]-51403784,r=(r<<9|r>>>23)+e<<0,n+=(e^t&(r^e))+a[7]+1735328473,n=(n<<14|n>>>18)+r<<0,t+=(r^e&(n^r))+a[12]-1926607734,t=(t<<20|t>>>12)+n<<0,o=t^n,e+=(o^r)+a[5]-378558,e=(e<<4|e>>>28)+t<<0,r+=(o^e)+a[8]-2022574463,r=(r<<11|r>>>21)+e<<0,i=r^e,n+=(i^t)+a[11]+1839030562,n=(n<<16|n>>>16)+r<<0,t+=(i^n)+a[14]-35309556,t=(t<<23|t>>>9)+n<<0,o=t^n,e+=(o^r)+a[1]-1530992060,e=(e<<4|e>>>28)+t<<0,r+=(o^e)+a[4]+1272893353,r=(r<<11|r>>>21)+e<<0,i=r^e,n+=(i^t)+a[7]-155497632,n=(n<<16|n>>>16)+r<<0,t+=(i^n)+a[10]-1094730640,t=(t<<23|t>>>9)+n<<0,o=t^n,e+=(o^r)+a[13]+681279174,e=(e<<4|e>>>28)+t<<0,r+=(o^e)+a[0]-358537222,r=(r<<11|r>>>21)+e<<0,i=r^e,n+=(i^t)+a[3]-722521979,n=(n<<16|n>>>16)+r<<0,t+=(i^n)+a[6]+76029189,t=(t<<23|t>>>9)+n<<0,o=t^n,e+=(o^r)+a[9]-640364487,e=(e<<4|e>>>28)+t<<0,r+=(o^e)+a[12]-421815835,r=(r<<11|r>>>21)+e<<0,i=r^e,n+=(i^t)+a[15]+530742520,n=(n<<16|n>>>16)+r<<0,t+=(i^n)+a[2]-995338651,t=(t<<23|t>>>9)+n<<0,e+=(n^(t|~r))+a[0]-198630844,e=(e<<6|e>>>26)+t<<0,r+=(t^(e|~n))+a[7]+1126891415,r=(r<<10|r>>>22)+e<<0,n+=(e^(r|~t))+a[14]-1416354905,n=(n<<15|n>>>17)+r<<0,t+=(r^(n|~e))+a[5]-57434055,t=(t<<21|t>>>11)+n<<0,e+=(n^(t|~r))+a[12]+1700485571,e=(e<<6|e>>>26)+t<<0,r+=(t^(e|~n))+a[3]-1894986606,r=(r<<10|r>>>22)+e<<0,n+=(e^(r|~t))+a[10]-1051523,n=(n<<15|n>>>17)+r<<0,t+=(r^(n|~e))+a[1]-2054922799,t=(t<<21|t>>>11)+n<<0,e+=(n^(t|~r))+a[8]+1873313359,e=(e<<6|e>>>26)+t<<0,r+=(t^(e|~n))+a[15]-30611744,r=(r<<10|r>>>22)+e<<0,n+=(e^(r|~t))+a[6]-1560198380,n=(n<<15|n>>>17)+r<<0,t+=(r^(n|~e))+a[13]+1309151649,t=(t<<21|t>>>11)+n<<0,e+=(n^(t|~r))+a[4]-145523070,e=(e<<6|e>>>26)+t<<0,r+=(t^(e|~n))+a[11]-1120210379,r=(r<<10|r>>>22)+e<<0,n+=(e^(r|~t))+a[2]+718787259,n=(n<<15|n>>>17)+r<<0,t+=(r^(n|~e))+a[9]-343485551,t=(t<<21|t>>>11)+n<<0,this.first?(this.h0=e+1732584193<<0,this.h1=t-271733879<<0,this.h2=n-1732584194<<0,this.h3=r+271733878<<0,this.first=!1):(this.h0=this.h0+e<<0,this.h1=this.h1+t<<0,this.h2=this.h2+n<<0,this.h3=this.h3+r<<0)},Md5.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3;return HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]},Md5.prototype.toString=Md5.prototype.hex,Md5.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3;return[255&e,e>>8&255,e>>16&255,e>>24&255,255&t,t>>8&255,t>>16&255,t>>24&255,255&n,n>>8&255,n>>16&255,n>>24&255,255&r,r>>8&255,r>>16&255,r>>24&255]},Md5.prototype.array=Md5.prototype.digest,Md5.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(16),t=new Uint32Array(e);return t[0]=this.h0,t[1]=this.h1,t[2]=this.h2,t[3]=this.h3,e},Md5.prototype.buffer=Md5.prototype.arrayBuffer,Md5.prototype.base64=function(){for(var e,t,n,r="",o=this.array(),i=0;i<15;)e=o[i++],t=o[i++],n=o[i++],r+=BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[63&(e<<4|t>>>4)]+BASE64_ENCODE_CHAR[63&(t<<2|n>>>6)]+BASE64_ENCODE_CHAR[63&n];return e=o[i],r+=BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[e<<4&63]+"=="};var exports=createMethod();COMMON_JS?module.exports=exports:(root.md5=exports,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))))}()}).call(exports,__webpack_require__(4),function(){return this}())},function(e,t){(function(t){e.exports=t}).call(t,{})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vYnVuZGxlLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCBhY2IzZTM4YTJkYmRjYmM5MzI2OSIsIndlYnBhY2s6Ly8vLi9yb290L2xpYi9yb290LmpzeCIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0L3JlYWN0LmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL1JlYWN0LmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL1JlYWN0RE9NLmpzIiwid2VicGFjazovLy8uL34vcHJvY2Vzcy9icm93c2VyLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL1JlYWN0Q3VycmVudE93bmVyLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL1JlYWN0RE9NVGV4dENvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0L2xpYi9ET01DaGlsZHJlbk9wZXJhdGlvbnMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvRGFuZ2VyLmpzIiwid2VicGFjazovLy8uL34vZmJqcy9saWIvRXhlY3V0aW9uRW52aXJvbm1lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9mYmpzL2xpYi9jcmVhdGVOb2Rlc0Zyb21NYXJrdXAuanMiLCJ3ZWJwYWNrOi8vLy4vfi9mYmpzL2xpYi9jcmVhdGVBcnJheUZyb21NaXhlZC5qcyIsIndlYnBhY2s6Ly8vLi9+L2ZianMvbGliL3RvQXJyYXkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9mYmpzL2xpYi9pbnZhcmlhbnQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9mYmpzL2xpYi9nZXRNYXJrdXBXcmFwLmpzIiwid2VicGFjazovLy8uL34vZmJqcy9saWIvZW1wdHlGdW5jdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0L2xpYi9SZWFjdE11bHRpQ2hpbGRVcGRhdGVUeXBlcy5qcyIsIndlYnBhY2s6Ly8vLi9+L2ZianMvbGliL2tleU1pcnJvci5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0L2xpYi9SZWFjdFBlcmYuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvc2V0SW5uZXJIVE1MLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL3NldFRleHRDb250ZW50LmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL2VzY2FwZVRleHRDb250ZW50Rm9yQnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0L2xpYi9ET01Qcm9wZXJ0eU9wZXJhdGlvbnMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvRE9NUHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvcXVvdGVBdHRyaWJ1dGVWYWx1ZUZvckJyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9mYmpzL2xpYi93YXJuaW5nLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL1JlYWN0Q29tcG9uZW50QnJvd3NlckVudmlyb25tZW50LmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL1JlYWN0RE9NSURPcGVyYXRpb25zLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL1JlYWN0TW91bnQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL0V2ZW50Q29uc3RhbnRzLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL0V2ZW50UGx1Z2luSHViLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL0V2ZW50UGx1Z2luUmVnaXN0cnkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvRXZlbnRQbHVnaW5VdGlscy5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0L2xpYi9SZWFjdEVycm9yVXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvYWNjdW11bGF0ZUludG8uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvZm9yRWFjaEFjY3VtdWxhdGVkLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL1JlYWN0RXZlbnRFbWl0dGVyTWl4aW4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvVmlld3BvcnRNZXRyaWNzLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL09iamVjdC5hc3NpZ24uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvaXNFdmVudFN1cHBvcnRlZC5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0L2xpYi9SZWFjdERPTUZlYXR1cmVGbGFncy5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0L2xpYi9SZWFjdEVsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvY2FuRGVmaW5lUHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvUmVhY3RFbXB0eUNvbXBvbmVudFJlZ2lzdHJ5LmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL1JlYWN0SW5zdGFuY2VIYW5kbGVzLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL1JlYWN0Um9vdEluZGV4LmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL1JlYWN0SW5zdGFuY2VNYXAuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvUmVhY3RNYXJrdXBDaGVja3N1bS5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0L2xpYi9hZGxlcjMyLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL1JlYWN0UmVjb25jaWxlci5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0L2xpYi9SZWFjdFJlZi5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0L2xpYi9SZWFjdE93bmVyLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL1JlYWN0VXBkYXRlUXVldWUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvUmVhY3RVcGRhdGVzLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL0NhbGxiYWNrUXVldWUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvUG9vbGVkQ2xhc3MuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvVHJhbnNhY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vfi9mYmpzL2xpYi9lbXB0eU9iamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9+L2ZianMvbGliL2NvbnRhaW5zTm9kZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2ZianMvbGliL2lzVGV4dE5vZGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9mYmpzL2xpYi9pc05vZGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0L2xpYi9SZWFjdENvbXBvc2l0ZUNvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0L2xpYi9SZWFjdENvbXBvbmVudEVudmlyb25tZW50LmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL1JlYWN0UHJvcFR5cGVMb2NhdGlvbnMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvc2hvdWxkVXBkYXRlUmVhY3RDb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvUmVhY3RFbXB0eUNvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0L2xpYi9SZWFjdE5hdGl2ZUNvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0L2xpYi92YWxpZGF0ZURPTU5lc3RpbmcuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvUmVhY3REZWZhdWx0SW5qZWN0aW9uLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL0JlZm9yZUlucHV0RXZlbnRQbHVnaW4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvRXZlbnRQcm9wYWdhdG9ycy5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0L2xpYi9GYWxsYmFja0NvbXBvc2l0aW9uU3RhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvZ2V0VGV4dENvbnRlbnRBY2Nlc3Nvci5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0L2xpYi9TeW50aGV0aWNDb21wb3NpdGlvbkV2ZW50LmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL1N5bnRoZXRpY0V2ZW50LmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL1N5bnRoZXRpY0lucHV0RXZlbnQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9mYmpzL2xpYi9rZXlPZi5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0L2xpYi9DaGFuZ2VFdmVudFBsdWdpbi5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0L2xpYi9nZXRFdmVudFRhcmdldC5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0L2xpYi9pc1RleHRJbnB1dEVsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvQ2xpZW50UmVhY3RSb290SW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvRGVmYXVsdEV2ZW50UGx1Z2luT3JkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvRW50ZXJMZWF2ZUV2ZW50UGx1Z2luLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL1N5bnRoZXRpY01vdXNlRXZlbnQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvU3ludGhldGljVUlFdmVudC5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0L2xpYi9nZXRFdmVudE1vZGlmaWVyU3RhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvSFRNTERPTVByb3BlcnR5Q29uZmlnLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL1JlYWN0QnJvd3NlckNvbXBvbmVudE1peGluLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL2ZpbmRET01Ob2RlLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL1JlYWN0RGVmYXVsdEJhdGNoaW5nU3RyYXRlZ3kuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvUmVhY3RET01Db21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvQXV0b0ZvY3VzVXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9mYmpzL2xpYi9mb2N1c05vZGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvQ1NTUHJvcGVydHlPcGVyYXRpb25zLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL0NTU1Byb3BlcnR5LmpzIiwid2VicGFjazovLy8uL34vZmJqcy9saWIvY2FtZWxpemVTdHlsZU5hbWUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9mYmpzL2xpYi9jYW1lbGl6ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0L2xpYi9kYW5nZXJvdXNTdHlsZVZhbHVlLmpzIiwid2VicGFjazovLy8uL34vZmJqcy9saWIvaHlwaGVuYXRlU3R5bGVOYW1lLmpzIiwid2VicGFjazovLy8uL34vZmJqcy9saWIvaHlwaGVuYXRlLmpzIiwid2VicGFjazovLy8uL34vZmJqcy9saWIvbWVtb2l6ZVN0cmluZ09ubHkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvUmVhY3RET01CdXR0b24uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvUmVhY3RET01JbnB1dC5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0L2xpYi9MaW5rZWRWYWx1ZVV0aWxzLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL1JlYWN0UHJvcFR5cGVzLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL2dldEl0ZXJhdG9yRm4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvUmVhY3RET01PcHRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvUmVhY3RDaGlsZHJlbi5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0L2xpYi90cmF2ZXJzZUFsbENoaWxkcmVuLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL1JlYWN0RE9NU2VsZWN0LmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL1JlYWN0RE9NVGV4dGFyZWEuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvUmVhY3RNdWx0aUNoaWxkLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL1JlYWN0Q2hpbGRSZWNvbmNpbGVyLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL2ZsYXR0ZW5DaGlsZHJlbi5qcyIsIndlYnBhY2s6Ly8vLi9+L2ZianMvbGliL3NoYWxsb3dFcXVhbC5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0L2xpYi9SZWFjdEV2ZW50TGlzdGVuZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9mYmpzL2xpYi9FdmVudExpc3RlbmVyLmpzIiwid2VicGFjazovLy8uL34vZmJqcy9saWIvZ2V0VW5ib3VuZGVkU2Nyb2xsUG9zaXRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvUmVhY3RJbmplY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvUmVhY3RDbGFzcy5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0L2xpYi9SZWFjdENvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0L2xpYi9SZWFjdE5vb3BVcGRhdGVRdWV1ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0L2xpYi9SZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL1JlYWN0SW5wdXRTZWxlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvUmVhY3RET01TZWxlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvZ2V0Tm9kZUZvckNoYXJhY3Rlck9mZnNldC5qcyIsIndlYnBhY2s6Ly8vLi9+L2ZianMvbGliL2dldEFjdGl2ZUVsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvU2VsZWN0RXZlbnRQbHVnaW4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvU2VydmVyUmVhY3RSb290SW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvU2ltcGxlRXZlbnRQbHVnaW4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvU3ludGhldGljQ2xpcGJvYXJkRXZlbnQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvU3ludGhldGljRm9jdXNFdmVudC5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0L2xpYi9TeW50aGV0aWNLZXlib2FyZEV2ZW50LmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL2dldEV2ZW50Q2hhckNvZGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvZ2V0RXZlbnRLZXkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvU3ludGhldGljRHJhZ0V2ZW50LmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL1N5bnRoZXRpY1RvdWNoRXZlbnQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvU3ludGhldGljV2hlZWxFdmVudC5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0L2xpYi9TVkdET01Qcm9wZXJ0eUNvbmZpZy5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0L2xpYi9SZWFjdERlZmF1bHRQZXJmLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL1JlYWN0RGVmYXVsdFBlcmZBbmFseXNpcy5qcyIsIndlYnBhY2s6Ly8vLi9+L2ZianMvbGliL3BlcmZvcm1hbmNlTm93LmpzIiwid2VicGFjazovLy8uL34vZmJqcy9saWIvcGVyZm9ybWFuY2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvUmVhY3RWZXJzaW9uLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL3JlbmRlclN1YnRyZWVJbnRvQ29udGFpbmVyLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL1JlYWN0RE9NU2VydmVyLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL1JlYWN0U2VydmVyUmVuZGVyaW5nLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL1JlYWN0U2VydmVyQmF0Y2hpbmdTdHJhdGVneS5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0L2xpYi9SZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9uLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL1JlYWN0SXNvbW9ycGhpYy5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0L2xpYi9SZWFjdERPTUZhY3Rvcmllcy5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0L2xpYi9SZWFjdEVsZW1lbnRWYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vfi9mYmpzL2xpYi9tYXBPYmplY3QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvb25seUNoaWxkLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL2RlcHJlY2F0ZWQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1kb20vaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vcm9vdC9saWIvY29udGFpbmVyLmpzeCIsIndlYnBhY2s6Ly8vLi9yb290L2xpYi9ib2R5LmpzeCIsIndlYnBhY2s6Ly8vLi9yb290L2NvbXBvbmVudHMvaGVhZGVyLmpzeCIsIndlYnBhY2s6Ly8vLi9yb290L2NvbXBvbmVudHMvc2VhcmNoLmpzeCIsIndlYnBhY2s6Ly8vLi9yb290L2NvbXBvbmVudHMvcmVjaXBlLmpzeCIsIndlYnBhY2s6Ly8vLi9yb290L2NvbXBvbmVudHMvc3RlcHMuanN4Iiwid2VicGFjazovLy8uL3Jvb3Qvc3R5bGUvY29tcG9uZW50cy9zdGVwcy5zY3NzIiwid2VicGFjazovLy8uL3Jvb3Qvc3R5bGUvY29tcG9uZW50cy9zdGVwcy5zY3NzPzA5N2EiLCJ3ZWJwYWNrOi8vLy4vfi9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3N0eWxlLWxvYWRlci9hZGRTdHlsZXMuanMiLCJ3ZWJwYWNrOi8vLy4vcm9vdC9jb21wb25lbnRzL2luZ3JlZGllbnRzLmpzeCIsIndlYnBhY2s6Ly8vLi9yb290L2NvbXBvbmVudHMvYXV0b2NvbXBsZXRlLmpzeCIsIndlYnBhY2s6Ly8vLi9yb290L3N0eWxlL2NvbXBvbmVudHMvYXV0b2NvbXBsZXRlLnNjc3MiLCJ3ZWJwYWNrOi8vLy4vcm9vdC9zdHlsZS9jb21wb25lbnRzL2F1dG9jb21wbGV0ZS5zY3NzPzdkN2EiLCJ3ZWJwYWNrOi8vLy4vcm9vdC9zdHlsZS9jb21wb25lbnRzL2luZ3JlZGllbnRzLnNjc3MiLCJ3ZWJwYWNrOi8vLy4vcm9vdC9zdHlsZS9jb21wb25lbnRzL2luZ3JlZGllbnRzLnNjc3M/NDIzYSIsIndlYnBhY2s6Ly8vLi9yb290L2NvbXBvbmVudHMvcmVjaXBlSGVhZGVyLmpzeCIsIndlYnBhY2s6Ly8vLi9yb290L2NvbXBvbmVudHMvY3JvcHBlci5qc3giLCJ3ZWJwYWNrOi8vLy4vcm9vdC9zdHlsZS9jb21wb25lbnRzL2Nyb3BwZXIuc2NzcyIsIndlYnBhY2s6Ly8vLi9yb290L3N0eWxlL2NvbXBvbmVudHMvY3JvcHBlci5zY3NzPzgyNTQiLCJ3ZWJwYWNrOi8vLy4vcm9vdC9jb21wb25lbnRzL3RpbWUuanN4Iiwid2VicGFjazovLy8uL3Jvb3Qvc3R5bGUvY29tcG9uZW50cy90aW1lLnNjc3MiLCJ3ZWJwYWNrOi8vLy4vcm9vdC9zdHlsZS9jb21wb25lbnRzL3RpbWUuc2Nzcz85N2NhIiwid2VicGFjazovLy8uL3Jvb3Qvc3R5bGUvY29tcG9uZW50cy9yZWNpcGVIZWFkZXIuc2NzcyIsIndlYnBhY2s6Ly8vLi9yb290L3N0eWxlL2NvbXBvbmVudHMvcmVjaXBlSGVhZGVyLnNjc3M/MjViMyIsIndlYnBhY2s6Ly8vLi9yb290L3N0eWxlL2NvbXBvbmVudHMvcmVjaXBlLnNjc3MiLCJ3ZWJwYWNrOi8vLy4vcm9vdC9zdHlsZS9jb21wb25lbnRzL3JlY2lwZS5zY3NzPzJlMTIiLCJ3ZWJwYWNrOi8vLy4vcm9vdC9saWIvYWN0aW9ucy5qcyIsIndlYnBhY2s6Ly8vLi9yb290L2xpYi9hY3Rpb25UeXBlcy5qcyIsIndlYnBhY2s6Ly8vLi9yb290L2xpYi9kaXNwYXRjaGVyLmpzIiwid2VicGFjazovLy8uL34vZmx1eC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2ZsdXgvbGliL0Rpc3BhdGNoZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9mbHV4L34vZmJqcy9saWIvaW52YXJpYW50LmpzIiwid2VicGFjazovLy8uL3Jvb3Qvc3R5bGUvY29tcG9uZW50cy9zZWFyY2guc2NzcyIsIndlYnBhY2s6Ly8vLi9yb290L3N0eWxlL2NvbXBvbmVudHMvc2VhcmNoLnNjc3M/NWZkOCIsIndlYnBhY2s6Ly8vLi9yb290L3N0eWxlL2NvbXBvbmVudHMvaGVhZGVyLnNjc3MiLCJ3ZWJwYWNrOi8vLy4vcm9vdC9zdHlsZS9jb21wb25lbnRzL2hlYWRlci5zY3NzP2Y2OTMiLCJ3ZWJwYWNrOi8vLy4vcm9vdC9jb21wb25lbnRzL25hdmlnYXRpb24uanN4Iiwid2VicGFjazovLy8uL3Jvb3Qvc3R5bGUvY29tcG9uZW50cy9uYXZpZ2F0aW9uLnNjc3MiLCJ3ZWJwYWNrOi8vLy4vcm9vdC9zdHlsZS9jb21wb25lbnRzL25hdmlnYXRpb24uc2Nzcz9jZmM2Iiwid2VicGFjazovLy8uL3Jvb3QvY29tcG9uZW50cy9ob21lLmpzeCIsIndlYnBhY2s6Ly8vLi9yb290L3N0eWxlL2NvbXBvbmVudHMvaG9tZS5zY3NzIiwid2VicGFjazovLy8uL3Jvb3Qvc3R5bGUvY29tcG9uZW50cy9ob21lLnNjc3M/ZWVlMSIsIndlYnBhY2s6Ly8vLi9yb290L2NvbXBvbmVudHMvdXNlclNldHRpbmdzLmpzeCIsIndlYnBhY2s6Ly8vLi9yb290L3N0eWxlL2NvbXBvbmVudHMvdXNlclNldHRpbmdzLnNjc3MiLCJ3ZWJwYWNrOi8vLy4vcm9vdC9zdHlsZS9jb21wb25lbnRzL3VzZXJTZXR0aW5ncy5zY3NzP2JiY2YiLCJ3ZWJwYWNrOi8vLy4vcm9vdC9jb21wb25lbnRzL2F1dGhlbnRpY2F0aW9uLmpzeCIsIndlYnBhY2s6Ly8vLi9yb290L3N0eWxlL2NvbXBvbmVudHMvYXV0aGVudGljYXRpb24uc2NzcyIsIndlYnBhY2s6Ly8vLi9yb290L3N0eWxlL2NvbXBvbmVudHMvYXV0aGVudGljYXRpb24uc2Nzcz82ZTBhIiwid2VicGFjazovLy8uL3Jvb3QvY29tcG9uZW50cy9ub3RpZnkuanN4Iiwid2VicGFjazovLy8uL3Jvb3Qvc3R5bGUvY29tcG9uZW50cy9ub3RpZnkuc2NzcyIsIndlYnBhY2s6Ly8vLi9yb290L3N0eWxlL2NvbXBvbmVudHMvbm90aWZ5LnNjc3M/YjkxMCIsIndlYnBhY2s6Ly8vLi9yb290L3N0eWxlL21haW4uc2NzcyIsIndlYnBhY2s6Ly8vLi9yb290L3N0eWxlL21haW4uc2Nzcz9jNWFjIiwid2VicGFjazovLy8uL34vZmx1eC91dGlscy5qcyIsIndlYnBhY2s6Ly8vLi9+L2ZsdXgvbGliL0ZsdXhDb250YWluZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9mbHV4L2xpYi9GbHV4Q29udGFpbmVyU3Vic2NyaXB0aW9ucy5qcyIsIndlYnBhY2s6Ly8vLi9+L2ZsdXgvbGliL0ZsdXhTdG9yZUdyb3VwLmpzIiwid2VicGFjazovLy8uL34vZmx1eC9+L2ZianMvbGliL3NoYWxsb3dFcXVhbC5qcyIsIndlYnBhY2s6Ly8vLi9+L2ZsdXgvbGliL0ZsdXhNaXhpbkxlZ2FjeS5qcyIsIndlYnBhY2s6Ly8vLi9+L2ZsdXgvbGliL0ZsdXhSZWR1Y2VTdG9yZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2ZsdXgvbGliL0ZsdXhTdG9yZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2ZiZW1pdHRlci9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2ZiZW1pdHRlci9saWIvQmFzZUV2ZW50RW1pdHRlci5qcyIsIndlYnBhY2s6Ly8vLi9+L2ZiZW1pdHRlci9saWIvRW1pdHRlclN1YnNjcmlwdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9+L2ZiZW1pdHRlci9saWIvRXZlbnRTdWJzY3JpcHRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vfi9mYmVtaXR0ZXIvbGliL0V2ZW50U3Vic2NyaXB0aW9uVmVuZG9yLmpzIiwid2VicGFjazovLy8uL34vZmJlbWl0dGVyL34vZmJqcy9saWIvaW52YXJpYW50LmpzIiwid2VicGFjazovLy8uL34vZmJlbWl0dGVyL34vZmJqcy9saWIvZW1wdHlGdW5jdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9+L2ZsdXgvbGliL2Fic3RyYWN0TWV0aG9kLmpzIiwid2VicGFjazovLy8uL3Jvb3QvbGliL3JlY2lwZVN0b3JlLmpzIiwid2VicGFjazovLy8uL34vaW1tdXRhYmxlL2Rpc3QvaW1tdXRhYmxlLmpzIiwid2VicGFjazovLy8uL34vanMtbWQ1L3NyYy9tZDUuanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9idWlsZGluL2FtZC1vcHRpb25zLmpzIl0sIm5hbWVzIjpbIm1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpbnN0YWxsZWRNb2R1bGVzIiwiZXhwb3J0cyIsIm1vZHVsZSIsImlkIiwibG9hZGVkIiwiY2FsbCIsIm0iLCJjIiwicCIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIl9yZWFjdCIsIl9yZWFjdDIiLCJfcmVhY3REb20iLCJfcmVhY3REb20yIiwiX2NvbnRhaW5lciIsIl9jb250YWluZXIyIiwicmVuZGVyIiwiY3JlYXRlRWxlbWVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIlJlYWN0RE9NIiwiUmVhY3RET01TZXJ2ZXIiLCJSZWFjdElzb21vcnBoaWMiLCJhc3NpZ24iLCJkZXByZWNhdGVkIiwiUmVhY3QiLCJmaW5kRE9NTm9kZSIsInVubW91bnRDb21wb25lbnRBdE5vZGUiLCJyZW5kZXJUb1N0cmluZyIsInJlbmRlclRvU3RhdGljTWFya3VwIiwiX19TRUNSRVRfRE9NX0RPX05PVF9VU0VfT1JfWU9VX1dJTExfQkVfRklSRUQiLCJfX1NFQ1JFVF9ET01fU0VSVkVSX0RPX05PVF9VU0VfT1JfWU9VX1dJTExfQkVfRklSRUQiLCJwcm9jZXNzIiwiUmVhY3RDdXJyZW50T3duZXIiLCJSZWFjdERPTVRleHRDb21wb25lbnQiLCJSZWFjdERlZmF1bHRJbmplY3Rpb24iLCJSZWFjdEluc3RhbmNlSGFuZGxlcyIsIlJlYWN0TW91bnQiLCJSZWFjdFBlcmYiLCJSZWFjdFJlY29uY2lsZXIiLCJSZWFjdFVwZGF0ZXMiLCJSZWFjdFZlcnNpb24iLCJyZW5kZXJTdWJ0cmVlSW50b0NvbnRhaW5lciIsIndhcm5pbmciLCJpbmplY3QiLCJtZWFzdXJlIiwidmVyc2lvbiIsInVuc3RhYmxlX2JhdGNoZWRVcGRhdGVzIiwiYmF0Y2hlZFVwZGF0ZXMiLCJ1bnN0YWJsZV9yZW5kZXJTdWJ0cmVlSW50b0NvbnRhaW5lciIsIl9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXyIsIkN1cnJlbnRPd25lciIsIkluc3RhbmNlSGFuZGxlcyIsIk1vdW50IiwiUmVjb25jaWxlciIsIlRleHRDb21wb25lbnQiLCJlbnYiLCJOT0RFX0VOViIsIkV4ZWN1dGlvbkVudmlyb25tZW50IiwiY2FuVXNlRE9NIiwid2luZG93IiwidG9wIiwic2VsZiIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsImluZGV4T2YiLCJjb25zb2xlIiwiZGVidWciLCJpZUNvbXBhdGliaWxpdHlNb2RlIiwiZG9jdW1lbnRNb2RlIiwidW5kZWZpbmVkIiwiZXhwZWN0ZWRGZWF0dXJlcyIsIkFycmF5IiwiaXNBcnJheSIsInByb3RvdHlwZSIsImV2ZXJ5IiwiZm9yRWFjaCIsIm1hcCIsIkRhdGUiLCJub3ciLCJGdW5jdGlvbiIsImJpbmQiLCJPYmplY3QiLCJrZXlzIiwiU3RyaW5nIiwic3BsaXQiLCJ0cmltIiwiY3JlYXRlIiwiZnJlZXplIiwiaSIsImxlbmd0aCIsImVycm9yIiwiZGVmYXVsdFNldFRpbW91dCIsIkVycm9yIiwiZGVmYXVsdENsZWFyVGltZW91dCIsInJ1blRpbWVvdXQiLCJmdW4iLCJjYWNoZWRTZXRUaW1lb3V0Iiwic2V0VGltZW91dCIsImUiLCJ0aGlzIiwicnVuQ2xlYXJUaW1lb3V0IiwibWFya2VyIiwiY2FjaGVkQ2xlYXJUaW1lb3V0IiwiY2xlYXJUaW1lb3V0IiwiY2xlYW5VcE5leHRUaWNrIiwiZHJhaW5pbmciLCJjdXJyZW50UXVldWUiLCJxdWV1ZSIsImNvbmNhdCIsInF1ZXVlSW5kZXgiLCJkcmFpblF1ZXVlIiwidGltZW91dCIsImxlbiIsInJ1biIsIkl0ZW0iLCJhcnJheSIsIm5vb3AiLCJuZXh0VGljayIsImFyZ3MiLCJhcmd1bWVudHMiLCJwdXNoIiwiYXBwbHkiLCJ0aXRsZSIsImJyb3dzZXIiLCJhcmd2IiwidmVyc2lvbnMiLCJvbiIsImFkZExpc3RlbmVyIiwib25jZSIsIm9mZiIsInJlbW92ZUxpc3RlbmVyIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwiZW1pdCIsInByZXBlbmRMaXN0ZW5lciIsInByZXBlbmRPbmNlTGlzdGVuZXIiLCJsaXN0ZW5lcnMiLCJuYW1lIiwiYmluZGluZyIsImN3ZCIsImNoZGlyIiwiZGlyIiwidW1hc2siLCJjdXJyZW50IiwiRE9NQ2hpbGRyZW5PcGVyYXRpb25zIiwiRE9NUHJvcGVydHlPcGVyYXRpb25zIiwiUmVhY3RDb21wb25lbnRCcm93c2VyRW52aXJvbm1lbnQiLCJlc2NhcGVUZXh0Q29udGVudEZvckJyb3dzZXIiLCJzZXRUZXh0Q29udGVudCIsInZhbGlkYXRlRE9NTmVzdGluZyIsInByb3BzIiwiY29uc3RydWN0IiwidGV4dCIsIl9jdXJyZW50RWxlbWVudCIsIl9zdHJpbmdUZXh0IiwiX3Jvb3ROb2RlSUQiLCJfbW91bnRJbmRleCIsIm1vdW50Q29tcG9uZW50Iiwicm9vdElEIiwidHJhbnNhY3Rpb24iLCJjb250ZXh0IiwiYW5jZXN0b3JJbmZvQ29udGV4dEtleSIsInVzZUNyZWF0ZUVsZW1lbnQiLCJvd25lckRvY3VtZW50Iiwib3duZXJEb2N1bWVudENvbnRleHRLZXkiLCJlbCIsInNldEF0dHJpYnV0ZUZvcklEIiwiZ2V0SUQiLCJlc2NhcGVkVGV4dCIsImNyZWF0ZU1hcmt1cEZvcklEIiwicmVjZWl2ZUNvbXBvbmVudCIsIm5leHRUZXh0IiwibmV4dFN0cmluZ1RleHQiLCJub2RlIiwiZ2V0Tm9kZSIsInVwZGF0ZVRleHRDb250ZW50IiwidW5tb3VudENvbXBvbmVudCIsInVubW91bnRJREZyb21FbnZpcm9ubWVudCIsImluc2VydENoaWxkQXQiLCJwYXJlbnROb2RlIiwiY2hpbGROb2RlIiwiaW5kZXgiLCJiZWZvcmVDaGlsZCIsImNoaWxkTm9kZXMiLCJpdGVtIiwiaW5zZXJ0QmVmb3JlIiwiRGFuZ2VyIiwiUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMiLCJzZXRJbm5lckhUTUwiLCJpbnZhcmlhbnQiLCJkYW5nZXJvdXNseVJlcGxhY2VOb2RlV2l0aE1hcmt1cCIsInByb2Nlc3NVcGRhdGVzIiwidXBkYXRlcyIsIm1hcmt1cExpc3QiLCJ1cGRhdGUiLCJpbml0aWFsQ2hpbGRyZW4iLCJ1cGRhdGVkQ2hpbGRyZW4iLCJ0eXBlIiwiTU9WRV9FWElTVElORyIsIlJFTU9WRV9OT0RFIiwidXBkYXRlZEluZGV4IiwiZnJvbUluZGV4IiwidXBkYXRlZENoaWxkIiwicGFyZW50SUQiLCJyZW5kZXJlZE1hcmt1cCIsImRhbmdlcm91c2x5UmVuZGVyTWFya3VwIiwiaiIsInJlbW92ZUNoaWxkIiwiayIsIklOU0VSVF9NQVJLVVAiLCJtYXJrdXBJbmRleCIsInRvSW5kZXgiLCJTRVRfTUFSS1VQIiwiY29udGVudCIsIlRFWFRfQ09OVEVOVCIsIm1lYXN1cmVNZXRob2RzIiwiZ2V0Tm9kZU5hbWUiLCJtYXJrdXAiLCJzdWJzdHJpbmciLCJjcmVhdGVOb2Rlc0Zyb21NYXJrdXAiLCJlbXB0eUZ1bmN0aW9uIiwiZ2V0TWFya3VwV3JhcCIsIk9QRU5fVEFHX05BTUVfRVhQIiwiUkVTVUxUX0lOREVYX0FUVFIiLCJub2RlTmFtZSIsIm1hcmt1cEJ5Tm9kZU5hbWUiLCJyZXN1bHRMaXN0IiwicmVzdWx0TGlzdEFzc2lnbm1lbnRDb3VudCIsImhhc093blByb3BlcnR5IiwicmVzdWx0SW5kZXgiLCJtYXJrdXBMaXN0QnlOb2RlTmFtZSIsInJlcGxhY2UiLCJyZW5kZXJOb2RlcyIsImpvaW4iLCJyZW5kZXJOb2RlIiwiaGFzQXR0cmlidXRlIiwiZ2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwib2xkQ2hpbGQiLCJ0YWdOYW1lIiwidG9Mb3dlckNhc2UiLCJuZXdDaGlsZCIsInJlcGxhY2VDaGlsZCIsImNhblVzZVdvcmtlcnMiLCJXb3JrZXIiLCJjYW5Vc2VFdmVudExpc3RlbmVycyIsImFkZEV2ZW50TGlzdGVuZXIiLCJhdHRhY2hFdmVudCIsImNhblVzZVZpZXdwb3J0Iiwic2NyZWVuIiwiaXNJbldvcmtlciIsIm5vZGVOYW1lTWF0Y2giLCJtYXRjaCIsIm5vZGVOYW1lUGF0dGVybiIsImhhbmRsZVNjcmlwdCIsImR1bW15Tm9kZSIsIndyYXAiLCJpbm5lckhUTUwiLCJ3cmFwRGVwdGgiLCJsYXN0Q2hpbGQiLCJzY3JpcHRzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJjcmVhdGVBcnJheUZyb21NaXhlZCIsIm5vZGVzIiwiaGFzQXJyYXlOYXR1cmUiLCJub2RlVHlwZSIsInNsaWNlIiwidG9BcnJheSIsInJldCIsImlpIiwiY29uZGl0aW9uIiwiZm9ybWF0IiwiYSIsImIiLCJkIiwiZiIsImFyZ0luZGV4IiwiZnJhbWVzVG9Qb3AiLCJtYXJrdXBXcmFwIiwic2hvdWxkV3JhcCIsImZpcnN0Q2hpbGQiLCJzZWxlY3RXcmFwIiwidGFibGVXcmFwIiwidHJXcmFwIiwic3ZnV3JhcCIsIioiLCJhcmVhIiwiY29sIiwibGVnZW5kIiwicGFyYW0iLCJ0ciIsIm9wdGdyb3VwIiwib3B0aW9uIiwiY2FwdGlvbiIsImNvbGdyb3VwIiwidGJvZHkiLCJ0Zm9vdCIsInRoZWFkIiwidGQiLCJ0aCIsInN2Z0VsZW1lbnRzIiwibWFrZUVtcHR5RnVuY3Rpb24iLCJhcmciLCJ0aGF0UmV0dXJucyIsInRoYXRSZXR1cm5zRmFsc2UiLCJ0aGF0UmV0dXJuc1RydWUiLCJ0aGF0UmV0dXJuc051bGwiLCJ0aGF0UmV0dXJuc1RoaXMiLCJ0aGF0UmV0dXJuc0FyZ3VtZW50Iiwia2V5TWlycm9yIiwia2V5IiwiX25vTWVhc3VyZSIsIm9iak5hbWUiLCJmbk5hbWUiLCJmdW5jIiwiZW5hYmxlTWVhc3VyZSIsInN0b3JlZE1lYXN1cmUiLCJvYmplY3QiLCJvYmplY3ROYW1lIiwibWV0aG9kTmFtZXMiLCJtZWFzdXJlZEZ1bmMiLCJ3cmFwcGVyIiwiZGlzcGxheU5hbWUiLCJpbmplY3Rpb24iLCJpbmplY3RNZWFzdXJlIiwiV0hJVEVTUEFDRV9URVNUIiwiTk9OVklTSUJMRV9URVNUIiwiaHRtbCIsIk1TQXBwIiwiZXhlY1Vuc2FmZUxvY2FsRnVuY3Rpb24iLCJ0ZXN0RWxlbWVudCIsInRlc3QiLCJmcm9tQ2hhckNvZGUiLCJ0ZXh0Tm9kZSIsImRhdGEiLCJkZWxldGVEYXRhIiwidGV4dENvbnRlbnQiLCJkb2N1bWVudEVsZW1lbnQiLCJlc2NhcGVyIiwiRVNDQVBFX0xPT0tVUCIsIkVTQ0FQRV9SRUdFWCIsIiYiLCI+IiwiPCIsIlwiIiwiJyIsImlzQXR0cmlidXRlTmFtZVNhZmUiLCJhdHRyaWJ1dGVOYW1lIiwidmFsaWRhdGVkQXR0cmlidXRlTmFtZUNhY2hlIiwiaWxsZWdhbEF0dHJpYnV0ZU5hbWVDYWNoZSIsIlZBTElEX0FUVFJJQlVURV9OQU1FX1JFR0VYIiwic2hvdWxkSWdub3JlVmFsdWUiLCJwcm9wZXJ0eUluZm8iLCJ2YWx1ZSIsImhhc0Jvb2xlYW5WYWx1ZSIsImhhc051bWVyaWNWYWx1ZSIsImlzTmFOIiwiaGFzUG9zaXRpdmVOdW1lcmljVmFsdWUiLCJoYXNPdmVybG9hZGVkQm9vbGVhblZhbHVlIiwiRE9NUHJvcGVydHkiLCJxdW90ZUF0dHJpYnV0ZVZhbHVlRm9yQnJvd3NlciIsInJlYWN0UHJvcHMiLCJjaGlsZHJlbiIsImRhbmdlcm91c2x5U2V0SW5uZXJIVE1MIiwicmVmIiwid2FybmVkUHJvcGVydGllcyIsIndhcm5Vbmtub3duUHJvcGVydHkiLCJsb3dlckNhc2VkTmFtZSIsInN0YW5kYXJkTmFtZSIsImlzQ3VzdG9tQXR0cmlidXRlIiwiZ2V0UG9zc2libGVTdGFuZGFyZE5hbWUiLCJJRF9BVFRSSUJVVEVfTkFNRSIsInNldEF0dHJpYnV0ZSIsImNyZWF0ZU1hcmt1cEZvclByb3BlcnR5IiwicHJvcGVydGllcyIsImNyZWF0ZU1hcmt1cEZvckN1c3RvbUF0dHJpYnV0ZSIsInNldFZhbHVlRm9yUHJvcGVydHkiLCJtdXRhdGlvbk1ldGhvZCIsImRlbGV0ZVZhbHVlRm9yUHJvcGVydHkiLCJtdXN0VXNlQXR0cmlidXRlIiwibmFtZXNwYWNlIiwiYXR0cmlidXRlTmFtZXNwYWNlIiwic2V0QXR0cmlidXRlTlMiLCJwcm9wTmFtZSIsInByb3BlcnR5TmFtZSIsImhhc1NpZGVFZmZlY3RzIiwic2V0VmFsdWVGb3JBdHRyaWJ1dGUiLCJkZWZhdWx0VmFsdWUiLCJnZXREZWZhdWx0VmFsdWVGb3JQcm9wZXJ0eSIsImNoZWNrTWFzayIsImJpdG1hc2siLCJET01Qcm9wZXJ0eUluamVjdGlvbiIsIk1VU1RfVVNFX0FUVFJJQlVURSIsIk1VU1RfVVNFX1BST1BFUlRZIiwiSEFTX1NJREVfRUZGRUNUUyIsIkhBU19CT09MRUFOX1ZBTFVFIiwiSEFTX05VTUVSSUNfVkFMVUUiLCJIQVNfUE9TSVRJVkVfTlVNRVJJQ19WQUxVRSIsIkhBU19PVkVSTE9BREVEX0JPT0xFQU5fVkFMVUUiLCJpbmplY3RET01Qcm9wZXJ0eUNvbmZpZyIsImRvbVByb3BlcnR5Q29uZmlnIiwiSW5qZWN0aW9uIiwiUHJvcGVydGllcyIsIkRPTUF0dHJpYnV0ZU5hbWVzcGFjZXMiLCJET01BdHRyaWJ1dGVOYW1lcyIsIkRPTVByb3BlcnR5TmFtZXMiLCJET01NdXRhdGlvbk1ldGhvZHMiLCJfaXNDdXN0b21BdHRyaWJ1dGVGdW5jdGlvbnMiLCJsb3dlckNhc2VkIiwicHJvcENvbmZpZyIsIm11c3RVc2VQcm9wZXJ0eSIsImRlZmF1bHRWYWx1ZUNhY2hlIiwiaXNDdXN0b21BdHRyaWJ1dGVGbiIsInByb3AiLCJub2RlRGVmYXVsdHMiLCJfbGVuIiwiX2tleSIsIm1lc3NhZ2UiLCJ4IiwiUmVhY3RET01JRE9wZXJhdGlvbnMiLCJwcm9jZXNzQ2hpbGRyZW5VcGRhdGVzIiwiZGFuZ2Vyb3VzbHlQcm9jZXNzQ2hpbGRyZW5VcGRhdGVzIiwicmVwbGFjZU5vZGVXaXRoTWFya3VwQnlJRCIsImRhbmdlcm91c2x5UmVwbGFjZU5vZGVXaXRoTWFya3VwQnlJRCIsInJvb3ROb2RlSUQiLCJwdXJnZUlEIiwiSU5WQUxJRF9QUk9QRVJUWV9FUlJPUlMiLCJzdHlsZSIsInVwZGF0ZVByb3BlcnR5QnlJRCIsImZpcnN0RGlmZmVyZW5jZUluZGV4Iiwic3RyaW5nMSIsInN0cmluZzIiLCJtaW5MZW4iLCJNYXRoIiwibWluIiwiY2hhckF0IiwiZ2V0UmVhY3RSb290RWxlbWVudEluQ29udGFpbmVyIiwiY29udGFpbmVyIiwiRE9DX05PREVfVFlQRSIsImdldFJlYWN0Um9vdElEIiwicm9vdEVsZW1lbnQiLCJpbnRlcm5hbEdldElEIiwibm9kZUNhY2hlIiwiY2FjaGVkIiwiaXNWYWxpZCIsIkFUVFJfTkFNRSIsInNldElEIiwib2xkSUQiLCJmaW5kUmVhY3ROb2RlQnlJRCIsImdldE5vZGVGcm9tSW5zdGFuY2UiLCJpbnN0YW5jZSIsIlJlYWN0SW5zdGFuY2VNYXAiLCJnZXQiLCJSZWFjdEVtcHR5Q29tcG9uZW50UmVnaXN0cnkiLCJpc051bGxDb21wb25lbnRJRCIsImZpbmRSZWFjdENvbnRhaW5lckZvcklEIiwiY29udGFpbnNOb2RlIiwiZmluZERlZXBlc3RDYWNoZWRBbmNlc3RvckltcGwiLCJhbmNlc3RvcklEIiwiYW5jZXN0b3IiLCJkZWVwZXN0Tm9kZVNvRmFyIiwiZmluZERlZXBlc3RDYWNoZWRBbmNlc3RvciIsInRhcmdldElEIiwidHJhdmVyc2VBbmNlc3RvcnMiLCJmb3VuZE5vZGUiLCJtb3VudENvbXBvbmVudEludG9Ob2RlIiwiY29tcG9uZW50SW5zdGFuY2UiLCJzaG91bGRSZXVzZU1hcmt1cCIsIlJlYWN0RE9NRmVhdHVyZUZsYWdzIiwiZW1wdHlPYmplY3QiLCJ0YWciLCJ1cGRhdGVkQW5jZXN0b3JJbmZvIiwiX3JlbmRlcmVkQ29tcG9uZW50IiwiX3RvcExldmVsV3JhcHBlciIsIl9tb3VudEltYWdlSW50b05vZGUiLCJiYXRjaGVkTW91bnRDb21wb25lbnRJbnRvTm9kZSIsIlJlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb24iLCJnZXRQb29sZWQiLCJwZXJmb3JtIiwicmVsZWFzZSIsInVubW91bnRDb21wb25lbnRGcm9tTm9kZSIsImhhc05vblJvb3RSZWFjdENoaWxkIiwicmVhY3RSb290SUQiLCJnZXRSZWFjdFJvb3RJREZyb21Ob2RlSUQiLCJmaW5kRmlyc3RSZWFjdERPTUltcGwiLCJub2RlSUQiLCJsYXN0SUQiLCJjb250YWluZXJzQnlSZWFjdFJvb3RJRCIsIlJlYWN0QnJvd3NlckV2ZW50RW1pdHRlciIsIlJlYWN0RWxlbWVudCIsIlJlYWN0TWFya3VwQ2hlY2tzdW0iLCJSZWFjdFVwZGF0ZVF1ZXVlIiwiaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudCIsInNob3VsZFVwZGF0ZVJlYWN0Q29tcG9uZW50IiwiRUxFTUVOVF9OT0RFX1RZUEUiLCJET0NVTUVOVF9GUkFHTUVOVF9OT0RFX1RZUEUiLCJyYW5kb20iLCJ0b1N0cmluZyIsImluc3RhbmNlc0J5UmVhY3RSb290SUQiLCJyb290RWxlbWVudHNCeVJlYWN0Um9vdElEIiwiZmluZENvbXBvbmVudFJvb3RSZXVzYWJsZUFycmF5IiwiVG9wTGV2ZWxXcmFwcGVyIiwiaXNSZWFjdENvbXBvbmVudCIsIl9pbnN0YW5jZXNCeVJlYWN0Um9vdElEIiwic2Nyb2xsTW9uaXRvciIsInJlbmRlckNhbGxiYWNrIiwiX3VwZGF0ZVJvb3RDb21wb25lbnQiLCJwcmV2Q29tcG9uZW50IiwibmV4dEVsZW1lbnQiLCJjYWxsYmFjayIsImVucXVldWVFbGVtZW50SW50ZXJuYWwiLCJlbnF1ZXVlQ2FsbGJhY2tJbnRlcm5hbCIsIl9yZWdpc3RlckNvbXBvbmVudCIsIm5leHRDb21wb25lbnQiLCJlbnN1cmVTY3JvbGxWYWx1ZU1vbml0b3JpbmciLCJyZWdpc3RlckNvbnRhaW5lciIsIl9yZW5kZXJOZXdSb290Q29tcG9uZW50IiwiZ2V0TmFtZSIsInBhcmVudENvbXBvbmVudCIsIl9yZWFjdEludGVybmFsSW5zdGFuY2UiLCJfcmVuZGVyU3VidHJlZUludG9Db250YWluZXIiLCJpc1ZhbGlkRWxlbWVudCIsInRvVXBwZXJDYXNlIiwibmV4dFdyYXBwZWRFbGVtZW50IiwicHJldldyYXBwZWRFbGVtZW50IiwicHJldkVsZW1lbnQiLCJwdWJsaWNJbnN0IiwiZ2V0UHVibGljSW5zdGFuY2UiLCJ1cGRhdGVkQ2FsbGJhY2siLCJyZWFjdFJvb3RFbGVtZW50IiwiY29udGFpbmVySGFzUmVhY3RNYXJrdXAiLCJjb250YWluZXJIYXNOb25Sb290UmVhY3RDaGlsZCIsIm5leHRTaWJsaW5nIiwicm9vdEVsZW1lbnRTaWJsaW5nIiwiY29tcG9uZW50IiwiX3Byb2Nlc3NDaGlsZENvbnRleHQiLCJfY29udGV4dCIsImNyZWF0ZVJlYWN0Um9vdElEIiwiY29udGFpbmVySUQiLCJpc0NvbnRhaW5lclJlYWN0Um9vdCIsImNvbnRhaW5lckNoaWxkIiwicmVhY3RSb290IiwiZmluZENvbXBvbmVudFJvb3QiLCJnZXRGaXJzdFJlYWN0RE9NIiwiYW5jZXN0b3JOb2RlIiwiZmlyc3RDaGlsZHJlbiIsImNoaWxkSW5kZXgiLCJkZWVwZXN0QW5jZXN0b3IiLCJ0YXJnZXRDaGlsZCIsImNoaWxkIiwiY2hpbGRJRCIsImlzQW5jZXN0b3JJRE9mIiwiY2FuUmV1c2VNYXJrdXAiLCJjaGVja3N1bSIsIkNIRUNLU1VNX0FUVFJfTkFNRSIsInJvb3RNYXJrdXAiLCJvdXRlckhUTUwiLCJub3JtYWxpemVkTWFya3VwIiwibm9ybWFsaXplciIsImJvZHkiLCJhcHBlbmRDaGlsZCIsImNvbnRlbnREb2N1bWVudCIsIndyaXRlIiwiZGlmZkluZGV4IiwiZGlmZmVyZW5jZSIsImdldExpc3RlbmluZ0ZvckRvY3VtZW50IiwibW91bnRBdCIsInRvcExpc3RlbmVyc0lES2V5IiwicmVhY3RUb3BMaXN0ZW5lcnNDb3VudGVyIiwiYWxyZWFkeUxpc3RlbmluZ1RvIiwiRXZlbnRDb25zdGFudHMiLCJFdmVudFBsdWdpbkh1YiIsIkV2ZW50UGx1Z2luUmVnaXN0cnkiLCJSZWFjdEV2ZW50RW1pdHRlck1peGluIiwiVmlld3BvcnRNZXRyaWNzIiwiaXNFdmVudFN1cHBvcnRlZCIsImlzTW9uaXRvcmluZ1Njcm9sbFZhbHVlIiwidG9wRXZlbnRNYXBwaW5nIiwidG9wQWJvcnQiLCJ0b3BCbHVyIiwidG9wQ2FuUGxheSIsInRvcENhblBsYXlUaHJvdWdoIiwidG9wQ2hhbmdlIiwidG9wQ2xpY2siLCJ0b3BDb21wb3NpdGlvbkVuZCIsInRvcENvbXBvc2l0aW9uU3RhcnQiLCJ0b3BDb21wb3NpdGlvblVwZGF0ZSIsInRvcENvbnRleHRNZW51IiwidG9wQ29weSIsInRvcEN1dCIsInRvcERvdWJsZUNsaWNrIiwidG9wRHJhZyIsInRvcERyYWdFbmQiLCJ0b3BEcmFnRW50ZXIiLCJ0b3BEcmFnRXhpdCIsInRvcERyYWdMZWF2ZSIsInRvcERyYWdPdmVyIiwidG9wRHJhZ1N0YXJ0IiwidG9wRHJvcCIsInRvcER1cmF0aW9uQ2hhbmdlIiwidG9wRW1wdGllZCIsInRvcEVuY3J5cHRlZCIsInRvcEVuZGVkIiwidG9wRXJyb3IiLCJ0b3BGb2N1cyIsInRvcElucHV0IiwidG9wS2V5RG93biIsInRvcEtleVByZXNzIiwidG9wS2V5VXAiLCJ0b3BMb2FkZWREYXRhIiwidG9wTG9hZGVkTWV0YWRhdGEiLCJ0b3BMb2FkU3RhcnQiLCJ0b3BNb3VzZURvd24iLCJ0b3BNb3VzZU1vdmUiLCJ0b3BNb3VzZU91dCIsInRvcE1vdXNlT3ZlciIsInRvcE1vdXNlVXAiLCJ0b3BQYXN0ZSIsInRvcFBhdXNlIiwidG9wUGxheSIsInRvcFBsYXlpbmciLCJ0b3BQcm9ncmVzcyIsInRvcFJhdGVDaGFuZ2UiLCJ0b3BTY3JvbGwiLCJ0b3BTZWVrZWQiLCJ0b3BTZWVraW5nIiwidG9wU2VsZWN0aW9uQ2hhbmdlIiwidG9wU3RhbGxlZCIsInRvcFN1c3BlbmQiLCJ0b3BUZXh0SW5wdXQiLCJ0b3BUaW1lVXBkYXRlIiwidG9wVG91Y2hDYW5jZWwiLCJ0b3BUb3VjaEVuZCIsInRvcFRvdWNoTW92ZSIsInRvcFRvdWNoU3RhcnQiLCJ0b3BWb2x1bWVDaGFuZ2UiLCJ0b3BXYWl0aW5nIiwidG9wV2hlZWwiLCJSZWFjdEV2ZW50TGlzdGVuZXIiLCJpbmplY3RSZWFjdEV2ZW50TGlzdGVuZXIiLCJzZXRIYW5kbGVUb3BMZXZlbCIsImhhbmRsZVRvcExldmVsIiwic2V0RW5hYmxlZCIsImVuYWJsZWQiLCJpc0VuYWJsZWQiLCJsaXN0ZW5UbyIsInJlZ2lzdHJhdGlvbk5hbWUiLCJjb250ZW50RG9jdW1lbnRIYW5kbGUiLCJpc0xpc3RlbmluZyIsImRlcGVuZGVuY2llcyIsInJlZ2lzdHJhdGlvbk5hbWVEZXBlbmRlbmNpZXMiLCJ0b3BMZXZlbFR5cGVzIiwiZGVwZW5kZW5jeSIsInRyYXBCdWJibGVkRXZlbnQiLCJ0cmFwQ2FwdHVyZWRFdmVudCIsIldJTkRPV19IQU5ETEUiLCJ0b3BMZXZlbFR5cGUiLCJoYW5kbGVyQmFzZU5hbWUiLCJoYW5kbGUiLCJyZWZyZXNoIiwicmVmcmVzaFNjcm9sbFZhbHVlcyIsIm1vbml0b3JTY3JvbGxWYWx1ZSIsImV2ZW50TmFtZURpc3BhdGNoQ29uZmlncyIsInJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzIiwicHV0TGlzdGVuZXIiLCJnZXRMaXN0ZW5lciIsImRlbGV0ZUxpc3RlbmVyIiwiZGVsZXRlQWxsTGlzdGVuZXJzIiwiUHJvcGFnYXRpb25QaGFzZXMiLCJidWJibGVkIiwiY2FwdHVyZWQiLCJ0b3BMb2FkIiwidG9wUmVzZXQiLCJ0b3BTdWJtaXQiLCJ2YWxpZGF0ZUluc3RhbmNlSGFuZGxlIiwidmFsaWQiLCJJbnN0YW5jZUhhbmRsZSIsInRyYXZlcnNlVHdvUGhhc2UiLCJ0cmF2ZXJzZUVudGVyTGVhdmUiLCJFdmVudFBsdWdpblV0aWxzIiwiUmVhY3RFcnJvclV0aWxzIiwiYWNjdW11bGF0ZUludG8iLCJmb3JFYWNoQWNjdW11bGF0ZWQiLCJsaXN0ZW5lckJhbmsiLCJldmVudFF1ZXVlIiwiZXhlY3V0ZURpc3BhdGNoZXNBbmRSZWxlYXNlIiwiZXZlbnQiLCJzaW11bGF0ZWQiLCJleGVjdXRlRGlzcGF0Y2hlc0luT3JkZXIiLCJpc1BlcnNpc3RlbnQiLCJjb25zdHJ1Y3RvciIsImV4ZWN1dGVEaXNwYXRjaGVzQW5kUmVsZWFzZVNpbXVsYXRlZCIsImV4ZWN1dGVEaXNwYXRjaGVzQW5kUmVsZWFzZVRvcExldmVsIiwiaW5qZWN0TW91bnQiLCJpbmplY3RJbnN0YW5jZUhhbmRsZSIsIkluamVjdGVkSW5zdGFuY2VIYW5kbGUiLCJnZXRJbnN0YW5jZUhhbmRsZSIsImluamVjdEV2ZW50UGx1Z2luT3JkZXIiLCJpbmplY3RFdmVudFBsdWdpbnNCeU5hbWUiLCJsaXN0ZW5lciIsImJhbmtGb3JSZWdpc3RyYXRpb25OYW1lIiwiUGx1Z2luTW9kdWxlIiwiZGlkUHV0TGlzdGVuZXIiLCJ3aWxsRGVsZXRlTGlzdGVuZXIiLCJleHRyYWN0RXZlbnRzIiwidG9wTGV2ZWxUYXJnZXQiLCJ0b3BMZXZlbFRhcmdldElEIiwibmF0aXZlRXZlbnQiLCJuYXRpdmVFdmVudFRhcmdldCIsImV2ZW50cyIsInBsdWdpbnMiLCJwb3NzaWJsZVBsdWdpbiIsImV4dHJhY3RlZEV2ZW50cyIsImVucXVldWVFdmVudHMiLCJwcm9jZXNzRXZlbnRRdWV1ZSIsInByb2Nlc3NpbmdFdmVudFF1ZXVlIiwicmV0aHJvd0NhdWdodEVycm9yIiwiX19wdXJnZSIsIl9fZ2V0TGlzdGVuZXJCYW5rIiwicmVjb21wdXRlUGx1Z2luT3JkZXJpbmciLCJFdmVudFBsdWdpbk9yZGVyIiwicGx1Z2luTmFtZSIsIm5hbWVzVG9QbHVnaW5zIiwicGx1Z2luSW5kZXgiLCJwdWJsaXNoZWRFdmVudHMiLCJldmVudFR5cGVzIiwiZXZlbnROYW1lIiwicHVibGlzaEV2ZW50Rm9yUGx1Z2luIiwiZGlzcGF0Y2hDb25maWciLCJwaGFzZWRSZWdpc3RyYXRpb25OYW1lcyIsInBoYXNlTmFtZSIsInBoYXNlZFJlZ2lzdHJhdGlvbk5hbWUiLCJwdWJsaXNoUmVnaXN0cmF0aW9uTmFtZSIsIkluamVjdGVkRXZlbnRQbHVnaW5PcmRlciIsImluamVjdGVkTmFtZXNUb1BsdWdpbnMiLCJpc09yZGVyaW5nRGlydHkiLCJnZXRQbHVnaW5Nb2R1bGVGb3JFdmVudCIsInBoYXNlIiwiX3Jlc2V0RXZlbnRQbHVnaW5zIiwiaXNFbmRpc2giLCJpc01vdmVpc2giLCJpc1N0YXJ0aXNoIiwiZXhlY3V0ZURpc3BhdGNoIiwiZG9tSUQiLCJjdXJyZW50VGFyZ2V0IiwiaW52b2tlR3VhcmRlZENhbGxiYWNrV2l0aENhdGNoIiwiaW52b2tlR3VhcmRlZENhbGxiYWNrIiwiZGlzcGF0Y2hMaXN0ZW5lcnMiLCJfZGlzcGF0Y2hMaXN0ZW5lcnMiLCJkaXNwYXRjaElEcyIsIl9kaXNwYXRjaElEcyIsInZhbGlkYXRlRXZlbnREaXNwYXRjaGVzIiwiaXNQcm9wYWdhdGlvblN0b3BwZWQiLCJleGVjdXRlRGlzcGF0Y2hlc0luT3JkZXJTdG9wQXRUcnVlSW1wbCIsImV4ZWN1dGVEaXNwYXRjaGVzSW5PcmRlclN0b3BBdFRydWUiLCJleGVjdXRlRGlyZWN0RGlzcGF0Y2giLCJkaXNwYXRjaExpc3RlbmVyIiwiZGlzcGF0Y2hJRCIsInJlcyIsImhhc0Rpc3BhdGNoZXMiLCJJbmplY3RlZE1vdW50IiwibGlzdGVuZXJzSXNBcnIiLCJpZHNJc0FyciIsIklEc0xlbiIsImxpc3RlbmVyc0xlbiIsImNhdWdodEVycm9yIiwiZGlzcGF0Y2hFdmVudCIsImNyZWF0ZUV2ZW50IiwiZmFrZU5vZGUiLCJib3VuZEZ1bmMiLCJldnRUeXBlIiwiZXZ0IiwiaW5pdEV2ZW50IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIm5leHQiLCJjdXJyZW50SXNBcnJheSIsIm5leHRJc0FycmF5IiwiYXJyIiwiY2IiLCJzY29wZSIsInJ1bkV2ZW50UXVldWVJbkJhdGNoIiwiY3VycmVudFNjcm9sbExlZnQiLCJjdXJyZW50U2Nyb2xsVG9wIiwic2Nyb2xsUG9zaXRpb24iLCJ5IiwidGFyZ2V0Iiwic291cmNlcyIsIlR5cGVFcnJvciIsInRvIiwibmV4dEluZGV4IiwibmV4dFNvdXJjZSIsImZyb20iLCJldmVudE5hbWVTdWZmaXgiLCJjYXB0dXJlIiwiaXNTdXBwb3J0ZWQiLCJlbGVtZW50IiwidXNlSGFzRmVhdHVyZSIsImltcGxlbWVudGF0aW9uIiwiaGFzRmVhdHVyZSIsImNhbkRlZmluZVByb3BlcnR5IiwiUkVBQ1RfRUxFTUVOVF9UWVBFIiwiU3ltYm9sIiwiUkVTRVJWRURfUFJPUFMiLCJfX3NlbGYiLCJfX3NvdXJjZSIsInNvdXJjZSIsIm93bmVyIiwiJCR0eXBlb2YiLCJfb3duZXIiLCJfc3RvcmUiLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJ3cml0YWJsZSIsInZhbGlkYXRlZCIsIl9zZWxmIiwiX3NvdXJjZSIsImNvbmZpZyIsImNoaWxkcmVuTGVuZ3RoIiwiY2hpbGRBcnJheSIsImRlZmF1bHRQcm9wcyIsImNyZWF0ZUZhY3RvcnkiLCJmYWN0b3J5IiwiY2xvbmVBbmRSZXBsYWNlS2V5Iiwib2xkRWxlbWVudCIsIm5ld0tleSIsIm5ld0VsZW1lbnQiLCJjbG9uZUFuZFJlcGxhY2VQcm9wcyIsIm5ld1Byb3BzIiwiY2xvbmVFbGVtZW50IiwibnVsbENvbXBvbmVudElEc1JlZ2lzdHJ5IiwicmVnaXN0ZXJOdWxsQ29tcG9uZW50SUQiLCJkZXJlZ2lzdGVyTnVsbENvbXBvbmVudElEIiwiZ2V0UmVhY3RSb290SURTdHJpbmciLCJTRVBBUkFUT1IiLCJpc0JvdW5kYXJ5IiwiaXNWYWxpZElEIiwiZGVzY2VuZGFudElEIiwiZ2V0UGFyZW50SUQiLCJzdWJzdHIiLCJsYXN0SW5kZXhPZiIsImdldE5leHREZXNjZW5kYW50SUQiLCJkZXN0aW5hdGlvbklEIiwic3RhcnQiLCJTRVBBUkFUT1JfTEVOR1RIIiwiZ2V0Rmlyc3RDb21tb25BbmNlc3RvcklEIiwib25lSUQiLCJ0d29JRCIsIm1pbkxlbmd0aCIsImxhc3RDb21tb25NYXJrZXJJbmRleCIsImxvbmdlc3RDb21tb25JRCIsInRyYXZlcnNlUGFyZW50UGF0aCIsInN0b3AiLCJza2lwRmlyc3QiLCJza2lwTGFzdCIsInRyYXZlcnNlVXAiLCJkZXB0aCIsInRyYXZlcnNlIiwiTUFYX1RSRUVfREVQVEgiLCJSZWFjdFJvb3RJbmRleCIsImNyZWF0ZVJlYWN0Um9vdEluZGV4IiwiY3JlYXRlUmVhY3RJRCIsImxlYXZlSUQiLCJlbnRlcklEIiwidXBBcmciLCJkb3duQXJnIiwidHJhdmVyc2VUd29QaGFzZVNraXBUYXJnZXQiLCJfZ2V0TmV4dERlc2NlbmRhbnRJRCIsIlJlYWN0Um9vdEluZGV4SW5qZWN0aW9uIiwiaW5qZWN0Q3JlYXRlUmVhY3RSb290SW5kZXgiLCJfY3JlYXRlUmVhY3RSb290SW5kZXgiLCJyZW1vdmUiLCJoYXMiLCJzZXQiLCJhZGxlcjMyIiwiVEFHX0VORCIsImFkZENoZWNrc3VtVG9NYXJrdXAiLCJleGlzdGluZ0NoZWNrc3VtIiwicGFyc2VJbnQiLCJtYXJrdXBDaGVja3N1bSIsImwiLCJjaGFyQ29kZUF0IiwiTU9EIiwiYXR0YWNoUmVmcyIsIlJlYWN0UmVmIiwiaW50ZXJuYWxJbnN0YW5jZSIsImdldFJlYWN0TW91bnRSZWFkeSIsImVucXVldWUiLCJkZXRhY2hSZWZzIiwicmVmc0NoYW5nZWQiLCJzaG91bGRVcGRhdGVSZWZzIiwicGVyZm9ybVVwZGF0ZUlmTmVjZXNzYXJ5IiwiYXR0YWNoUmVmIiwiUmVhY3RPd25lciIsImFkZENvbXBvbmVudEFzUmVmVG8iLCJkZXRhY2hSZWYiLCJyZW1vdmVDb21wb25lbnRBc1JlZkZyb20iLCJwcmV2RW1wdHkiLCJuZXh0RW1wdHkiLCJpc1ZhbGlkT3duZXIiLCJyZWZzIiwiZW5xdWV1ZVVwZGF0ZSIsImdldEludGVybmFsSW5zdGFuY2VSZWFkeUZvclVwZGF0ZSIsInB1YmxpY0luc3RhbmNlIiwiY2FsbGVyTmFtZSIsImlzTW91bnRlZCIsIl93YXJuZWRBYm91dFJlZnNJblJlbmRlciIsImVucXVldWVDYWxsYmFjayIsIl9wZW5kaW5nQ2FsbGJhY2tzIiwiZW5xdWV1ZUZvcmNlVXBkYXRlIiwiX3BlbmRpbmdGb3JjZVVwZGF0ZSIsImVucXVldWVSZXBsYWNlU3RhdGUiLCJjb21wbGV0ZVN0YXRlIiwiX3BlbmRpbmdTdGF0ZVF1ZXVlIiwiX3BlbmRpbmdSZXBsYWNlU3RhdGUiLCJlbnF1ZXVlU2V0U3RhdGUiLCJwYXJ0aWFsU3RhdGUiLCJlbnF1ZXVlU2V0UHJvcHMiLCJwYXJ0aWFsUHJvcHMiLCJlbnF1ZXVlU2V0UHJvcHNJbnRlcm5hbCIsInRvcExldmVsV3JhcHBlciIsIndyYXBFbGVtZW50IiwiX3BlbmRpbmdFbGVtZW50IiwiZW5xdWV1ZVJlcGxhY2VQcm9wcyIsImVucXVldWVSZXBsYWNlUHJvcHNJbnRlcm5hbCIsImVuc3VyZUluamVjdGVkIiwiYmF0Y2hpbmdTdHJhdGVneSIsIlJlYWN0VXBkYXRlc0ZsdXNoVHJhbnNhY3Rpb24iLCJyZWluaXRpYWxpemVUcmFuc2FjdGlvbiIsImRpcnR5Q29tcG9uZW50c0xlbmd0aCIsImNhbGxiYWNrUXVldWUiLCJDYWxsYmFja1F1ZXVlIiwicmVjb25jaWxlVHJhbnNhY3Rpb24iLCJtb3VudE9yZGVyQ29tcGFyYXRvciIsImMxIiwiYzIiLCJfbW91bnRPcmRlciIsInJ1bkJhdGNoZWRVcGRhdGVzIiwiZGlydHlDb21wb25lbnRzIiwic29ydCIsImNhbGxiYWNrcyIsImlzQmF0Y2hpbmdVcGRhdGVzIiwiYXNhcCIsImFzYXBDYWxsYmFja1F1ZXVlIiwiYXNhcEVucXVldWVkIiwiUG9vbGVkQ2xhc3MiLCJUcmFuc2FjdGlvbiIsIk5FU1RFRF9VUERBVEVTIiwiaW5pdGlhbGl6ZSIsImNsb3NlIiwic3BsaWNlIiwiZmx1c2hCYXRjaGVkVXBkYXRlcyIsIlVQREFURV9RVUVVRUlORyIsInJlc2V0Iiwibm90aWZ5QWxsIiwiVFJBTlNBQ1RJT05fV1JBUFBFUlMiLCJNaXhpbiIsImdldFRyYW5zYWN0aW9uV3JhcHBlcnMiLCJkZXN0cnVjdG9yIiwibWV0aG9kIiwiYWRkUG9vbGluZ1RvIiwiUmVhY3RVcGRhdGVzSW5qZWN0aW9uIiwiaW5qZWN0UmVjb25jaWxlVHJhbnNhY3Rpb24iLCJSZWNvbmNpbGVUcmFuc2FjdGlvbiIsImluamVjdEJhdGNoaW5nU3RyYXRlZ3kiLCJfYmF0Y2hpbmdTdHJhdGVneSIsIl9jYWxsYmFja3MiLCJfY29udGV4dHMiLCJjb250ZXh0cyIsIm9uZUFyZ3VtZW50UG9vbGVyIiwiY29weUZpZWxkc0Zyb20iLCJLbGFzcyIsImluc3RhbmNlUG9vbCIsInBvcCIsInR3b0FyZ3VtZW50UG9vbGVyIiwiYTEiLCJhMiIsInRocmVlQXJndW1lbnRQb29sZXIiLCJhMyIsImZvdXJBcmd1bWVudFBvb2xlciIsImE0IiwiZml2ZUFyZ3VtZW50UG9vbGVyIiwiYTUiLCJzdGFuZGFyZFJlbGVhc2VyIiwicG9vbFNpemUiLCJERUZBVUxUX1BPT0xfU0laRSIsIkRFRkFVTFRfUE9PTEVSIiwiQ29weUNvbnN0cnVjdG9yIiwicG9vbGVyIiwiTmV3S2xhc3MiLCJ0cmFuc2FjdGlvbldyYXBwZXJzIiwid3JhcHBlckluaXREYXRhIiwiX2lzSW5UcmFuc2FjdGlvbiIsImlzSW5UcmFuc2FjdGlvbiIsImVycm9yVGhyb3duIiwiaW5pdGlhbGl6ZUFsbCIsImNsb3NlQWxsIiwiZXJyIiwic3RhcnRJbmRleCIsIk9CU0VSVkVEX0VSUk9SIiwiaW5pdERhdGEiLCJfeCIsIl94MiIsIl9hZ2FpbiIsIl9mdW5jdGlvbiIsIm91dGVyTm9kZSIsImlubmVyTm9kZSIsImlzVGV4dE5vZGUiLCJjb250YWlucyIsImNvbXBhcmVEb2N1bWVudFBvc2l0aW9uIiwiaXNOb2RlIiwiTm9kZSIsImdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bSIsImlzSW50ZXJuYWxDb21wb25lbnRUeXBlIiwiUmVhY3RFbXB0eUNvbXBvbmVudCIsIlJlYWN0TmF0aXZlQ29tcG9uZW50IiwiY3JlYXRlSW50ZXJuYWxDb21wb25lbnQiLCJSZWFjdENvbXBvc2l0ZUNvbXBvbmVudFdyYXBwZXIiLCJjcmVhdGVJbnN0YW5jZUZvclRleHQiLCJfbW91bnRJbWFnZSIsIl9pc093bmVyTmVjZXNzYXJ5IiwicHJldmVudEV4dGVuc2lvbnMiLCJSZWFjdENvbXBvc2l0ZUNvbXBvbmVudCIsIl9pbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50IiwiU3RhdGVsZXNzQ29tcG9uZW50IiwiQ29tcG9uZW50IiwiUmVhY3RDb21wb25lbnRFbnZpcm9ubWVudCIsIlJlYWN0UHJvcFR5cGVMb2NhdGlvbnMiLCJSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lcyIsInVwZGF0ZXIiLCJuZXh0TW91bnRJRCIsIlJlYWN0Q29tcG9zaXRlQ29tcG9uZW50TWl4aW4iLCJfaW5zdGFuY2UiLCJpbnN0IiwicmVuZGVyZWRFbGVtZW50IiwicHVibGljUHJvcHMiLCJfcHJvY2Vzc1Byb3BzIiwicHVibGljQ29udGV4dCIsIl9wcm9jZXNzQ29udGV4dCIsImNhbkluc3RhbnRpYXRlIiwiZ2V0SW5pdGlhbFN0YXRlIiwiaXNSZWFjdENsYXNzQXBwcm92ZWQiLCJnZXREZWZhdWx0UHJvcHMiLCJwcm9wVHlwZXMiLCJjb250ZXh0VHlwZXMiLCJjb21wb25lbnRTaG91bGRVcGRhdGUiLCJjb21wb25lbnREaWRVbm1vdW50IiwiY29tcG9uZW50V2lsbFJlY2lldmVQcm9wcyIsImluaXRpYWxTdGF0ZSIsInN0YXRlIiwiY29tcG9uZW50V2lsbE1vdW50IiwiX3Byb2Nlc3NQZW5kaW5nU3RhdGUiLCJfcmVuZGVyVmFsaWRhdGVkQ29tcG9uZW50IiwiY29tcG9uZW50RGlkTW91bnQiLCJjb21wb25lbnRXaWxsVW5tb3VudCIsIl9tYXNrQ29udGV4dCIsIm1hc2tlZENvbnRleHQiLCJjb250ZXh0TmFtZSIsIl9jaGVja1Byb3BUeXBlcyIsImN1cnJlbnRDb250ZXh0IiwiY2hpbGRDb250ZXh0IiwiZ2V0Q2hpbGRDb250ZXh0IiwiY2hpbGRDb250ZXh0VHlwZXMiLCJsb2NhdGlvbiIsImNvbXBvbmVudE5hbWUiLCJleCIsImFkZGVuZHVtIiwibmV4dENvbnRleHQiLCJwcmV2Q29udGV4dCIsInVwZGF0ZUNvbXBvbmVudCIsInByZXZQYXJlbnRFbGVtZW50IiwibmV4dFBhcmVudEVsZW1lbnQiLCJwcmV2VW5tYXNrZWRDb250ZXh0IiwibmV4dFVubWFza2VkQ29udGV4dCIsIm5leHRQcm9wcyIsImNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMiLCJuZXh0U3RhdGUiLCJzaG91bGRVcGRhdGUiLCJzaG91bGRDb21wb25lbnRVcGRhdGUiLCJfcGVyZm9ybUNvbXBvbmVudFVwZGF0ZSIsInBhcnRpYWwiLCJ1bm1hc2tlZENvbnRleHQiLCJwcmV2UHJvcHMiLCJwcmV2U3RhdGUiLCJoYXNDb21wb25lbnREaWRVcGRhdGUiLCJCb29sZWFuIiwiY29tcG9uZW50RGlkVXBkYXRlIiwiY29tcG9uZW50V2lsbFVwZGF0ZSIsIl91cGRhdGVSZW5kZXJlZENvbXBvbmVudCIsInByZXZDb21wb25lbnRJbnN0YW5jZSIsInByZXZSZW5kZXJlZEVsZW1lbnQiLCJuZXh0UmVuZGVyZWRFbGVtZW50IiwidGhpc0lEIiwicHJldkNvbXBvbmVudElEIiwibmV4dE1hcmt1cCIsIl9yZXBsYWNlTm9kZVdpdGhNYXJrdXBCeUlEIiwiX3JlbmRlclZhbGlkYXRlZENvbXBvbmVudFdpdGhvdXRPd25lck9yQ29udGV4dCIsInJlbmRlcmVkQ29tcG9uZW50IiwiX2lzTW9ja0Z1bmN0aW9uIiwicHVibGljQ29tcG9uZW50SW5zdGFuY2UiLCJpbmplY3RlZCIsImluamVjdEVudmlyb25tZW50IiwiZW52aXJvbm1lbnQiLCJwcmV2VHlwZSIsIm5leHRUeXBlIiwicGxhY2Vob2xkZXJFbGVtZW50IiwiUmVhY3RFbXB0eUNvbXBvbmVudEluamVjdGlvbiIsImluamVjdEVtcHR5Q29tcG9uZW50IiwiaW5zdGFudGlhdGUiLCJnZXRDb21wb25lbnRDbGFzc0ZvckVsZW1lbnQiLCJjb21wb25lbnRDbGFzcyIsInRhZ1RvQ29tcG9uZW50Q2xhc3MiLCJhdXRvR2VuZXJhdGVXcmFwcGVyQ2xhc3MiLCJnZW5lcmljQ29tcG9uZW50Q2xhc3MiLCJ0ZXh0Q29tcG9uZW50Q2xhc3MiLCJpc1RleHRDb21wb25lbnQiLCJSZWFjdE5hdGl2ZUNvbXBvbmVudEluamVjdGlvbiIsImluamVjdEdlbmVyaWNDb21wb25lbnRDbGFzcyIsImluamVjdFRleHRDb21wb25lbnRDbGFzcyIsImluamVjdENvbXBvbmVudENsYXNzZXMiLCJjb21wb25lbnRDbGFzc2VzIiwic3BlY2lhbFRhZ3MiLCJpblNjb3BlVGFncyIsImJ1dHRvblNjb3BlVGFncyIsImltcGxpZWRFbmRUYWdzIiwiZW1wdHlBbmNlc3RvckluZm8iLCJwYXJlbnRUYWciLCJmb3JtVGFnIiwiYVRhZ0luU2NvcGUiLCJidXR0b25UYWdJblNjb3BlIiwibm9iclRhZ0luU2NvcGUiLCJwVGFnSW5CdXR0b25TY29wZSIsImxpc3RJdGVtVGFnQXV0b2Nsb3NpbmciLCJkbEl0ZW1UYWdBdXRvY2xvc2luZyIsIm9sZEluZm8iLCJhbmNlc3RvckluZm8iLCJpbmZvIiwiaXNUYWdWYWxpZFdpdGhQYXJlbnQiLCJmaW5kSW52YWxpZEFuY2VzdG9yRm9yVGFnIiwiZmluZE93bmVyU3RhY2siLCJzdGFjayIsInJldmVyc2UiLCJkaWRXYXJuIiwiY2hpbGRUYWciLCJjaGlsZEluc3RhbmNlIiwicGFyZW50SW5mbyIsImludmFsaWRQYXJlbnQiLCJpbnZhbGlkQW5jZXN0b3IiLCJwcm9ibGVtYXRpYyIsImFuY2VzdG9yVGFnIiwiYW5jZXN0b3JJbnN0YW5jZSIsImNoaWxkT3duZXIiLCJhbmNlc3Rvck93bmVyIiwiY2hpbGRPd25lcnMiLCJhbmNlc3Rvck93bmVycyIsIm1pblN0YWNrTGVuIiwiZGVlcGVzdENvbW1vbiIsIlVOS05PV04iLCJjaGlsZE93bmVyTmFtZXMiLCJhbmNlc3Rvck93bmVyTmFtZXMiLCJvd25lckluZm8iLCJ3YXJuS2V5IiwiaXNUYWdWYWxpZEluQ29udGV4dCIsImFscmVhZHlJbmplY3RlZCIsIlJlYWN0SW5qZWN0aW9uIiwiRXZlbnRFbWl0dGVyIiwiRGVmYXVsdEV2ZW50UGx1Z2luT3JkZXIiLCJTaW1wbGVFdmVudFBsdWdpbiIsIkVudGVyTGVhdmVFdmVudFBsdWdpbiIsIkNoYW5nZUV2ZW50UGx1Z2luIiwiU2VsZWN0RXZlbnRQbHVnaW4iLCJCZWZvcmVJbnB1dEV2ZW50UGx1Z2luIiwiTmF0aXZlQ29tcG9uZW50IiwiUmVhY3RET01Db21wb25lbnQiLCJDbGFzcyIsImluamVjdE1peGluIiwiUmVhY3RCcm93c2VyQ29tcG9uZW50TWl4aW4iLCJIVE1MRE9NUHJvcGVydHlDb25maWciLCJTVkdET01Qcm9wZXJ0eUNvbmZpZyIsIkVtcHR5Q29tcG9uZW50IiwiVXBkYXRlcyIsIlJlYWN0RGVmYXVsdEJhdGNoaW5nU3RyYXRlZ3kiLCJSb290SW5kZXgiLCJDbGllbnRSZWFjdFJvb3RJbmRleCIsIlNlcnZlclJlYWN0Um9vdEluZGV4IiwidXJsIiwiaHJlZiIsIlJlYWN0RGVmYXVsdFBlcmYiLCJpc1ByZXN0byIsIm9wZXJhIiwiaXNLZXlwcmVzc0NvbW1hbmQiLCJjdHJsS2V5IiwiYWx0S2V5IiwibWV0YUtleSIsImdldENvbXBvc2l0aW9uRXZlbnRUeXBlIiwiY29tcG9zaXRpb25TdGFydCIsImNvbXBvc2l0aW9uRW5kIiwiY29tcG9zaXRpb25VcGRhdGUiLCJpc0ZhbGxiYWNrQ29tcG9zaXRpb25TdGFydCIsImtleUNvZGUiLCJTVEFSVF9LRVlDT0RFIiwiaXNGYWxsYmFja0NvbXBvc2l0aW9uRW5kIiwiRU5EX0tFWUNPREVTIiwiZ2V0RGF0YUZyb21DdXN0b21FdmVudCIsImRldGFpbCIsImV4dHJhY3RDb21wb3NpdGlvbkV2ZW50IiwiZXZlbnRUeXBlIiwiZmFsbGJhY2tEYXRhIiwiY2FuVXNlQ29tcG9zaXRpb25FdmVudCIsImN1cnJlbnRDb21wb3NpdGlvbiIsInVzZUZhbGxiYWNrQ29tcG9zaXRpb25EYXRhIiwiZ2V0RGF0YSIsIkZhbGxiYWNrQ29tcG9zaXRpb25TdGF0ZSIsIlN5bnRoZXRpY0NvbXBvc2l0aW9uRXZlbnQiLCJjdXN0b21EYXRhIiwiRXZlbnRQcm9wYWdhdG9ycyIsImFjY3VtdWxhdGVUd29QaGFzZURpc3BhdGNoZXMiLCJnZXROYXRpdmVCZWZvcmVJbnB1dENoYXJzIiwid2hpY2giLCJTUEFDRUJBUl9DT0RFIiwiaGFzU3BhY2VLZXlwcmVzcyIsIlNQQUNFQkFSX0NIQVIiLCJjaGFycyIsImdldEZhbGxiYWNrQmVmb3JlSW5wdXRDaGFycyIsImV4dHJhY3RCZWZvcmVJbnB1dEV2ZW50IiwiY2FuVXNlVGV4dElucHV0RXZlbnQiLCJTeW50aGV0aWNJbnB1dEV2ZW50IiwiYmVmb3JlSW5wdXQiLCJrZXlPZiIsIm9uQmVmb3JlSW5wdXQiLCJvbkJlZm9yZUlucHV0Q2FwdHVyZSIsIm9uQ29tcG9zaXRpb25FbmQiLCJvbkNvbXBvc2l0aW9uRW5kQ2FwdHVyZSIsIm9uQ29tcG9zaXRpb25TdGFydCIsIm9uQ29tcG9zaXRpb25TdGFydENhcHR1cmUiLCJvbkNvbXBvc2l0aW9uVXBkYXRlIiwib25Db21wb3NpdGlvblVwZGF0ZUNhcHR1cmUiLCJsaXN0ZW5lckF0UGhhc2UiLCJwcm9wYWdhdGlvblBoYXNlIiwiYWNjdW11bGF0ZURpcmVjdGlvbmFsRGlzcGF0Y2hlcyIsInVwd2FyZHMiLCJhY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzU2luZ2xlIiwiZGlzcGF0Y2hNYXJrZXIiLCJhY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzU2luZ2xlU2tpcFRhcmdldCIsImFjY3VtdWxhdGVEaXNwYXRjaGVzIiwiaWdub3JlZERpcmVjdGlvbiIsImFjY3VtdWxhdGVEaXJlY3REaXNwYXRjaGVzU2luZ2xlIiwiYWNjdW11bGF0ZVR3b1BoYXNlRGlzcGF0Y2hlc1NraXBUYXJnZXQiLCJhY2N1bXVsYXRlRW50ZXJMZWF2ZURpc3BhdGNoZXMiLCJsZWF2ZSIsImVudGVyIiwiZnJvbUlEIiwidG9JRCIsImFjY3VtdWxhdGVEaXJlY3REaXNwYXRjaGVzIiwicm9vdCIsIl9yb290IiwiX3N0YXJ0VGV4dCIsImdldFRleHQiLCJfZmFsbGJhY2tUZXh0IiwiZ2V0VGV4dENvbnRlbnRBY2Nlc3NvciIsImVuZCIsInN0YXJ0VmFsdWUiLCJzdGFydExlbmd0aCIsImVuZFZhbHVlIiwiZW5kTGVuZ3RoIiwibWluRW5kIiwic2xpY2VUYWlsIiwiY29udGVudEtleSIsIlN5bnRoZXRpY0V2ZW50IiwiQ29tcG9zaXRpb25FdmVudEludGVyZmFjZSIsImF1Z21lbnRDbGFzcyIsIkludGVyZmFjZSIsIm5vcm1hbGl6ZSIsImRlZmF1bHRQcmV2ZW50ZWQiLCJyZXR1cm5WYWx1ZSIsImlzRGVmYXVsdFByZXZlbnRlZCIsIkV2ZW50SW50ZXJmYWNlIiwiZXZlbnRQaGFzZSIsImJ1YmJsZXMiLCJjYW5jZWxhYmxlIiwidGltZVN0YW1wIiwiaXNUcnVzdGVkIiwicHJldmVudERlZmF1bHQiLCJzdG9wUHJvcGFnYXRpb24iLCJjYW5jZWxCdWJibGUiLCJwZXJzaXN0IiwiU3VwZXIiLCJJbnB1dEV2ZW50SW50ZXJmYWNlIiwib25lS2V5T2JqIiwic2hvdWxkVXNlQ2hhbmdlRXZlbnQiLCJlbGVtIiwibWFudWFsRGlzcGF0Y2hDaGFuZ2VFdmVudCIsImNoYW5nZSIsImFjdGl2ZUVsZW1lbnRJRCIsImdldEV2ZW50VGFyZ2V0IiwicnVuRXZlbnRJbkJhdGNoIiwic3RhcnRXYXRjaGluZ0ZvckNoYW5nZUV2ZW50SUU4IiwiYWN0aXZlRWxlbWVudCIsInN0b3BXYXRjaGluZ0ZvckNoYW5nZUV2ZW50SUU4IiwiZGV0YWNoRXZlbnQiLCJnZXRUYXJnZXRJREZvckNoYW5nZUV2ZW50IiwiaGFuZGxlRXZlbnRzRm9yQ2hhbmdlRXZlbnRJRTgiLCJzdGFydFdhdGNoaW5nRm9yVmFsdWVDaGFuZ2UiLCJhY3RpdmVFbGVtZW50VmFsdWUiLCJhY3RpdmVFbGVtZW50VmFsdWVQcm9wIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwibmV3VmFsdWVQcm9wIiwiaGFuZGxlUHJvcGVydHlDaGFuZ2UiLCJzdG9wV2F0Y2hpbmdGb3JWYWx1ZUNoYW5nZSIsInNyY0VsZW1lbnQiLCJnZXRUYXJnZXRJREZvcklucHV0RXZlbnQiLCJoYW5kbGVFdmVudHNGb3JJbnB1dEV2ZW50SUUiLCJnZXRUYXJnZXRJREZvcklucHV0RXZlbnRJRSIsInNob3VsZFVzZUNsaWNrRXZlbnQiLCJnZXRUYXJnZXRJREZvckNsaWNrRXZlbnQiLCJpc1RleHRJbnB1dEVsZW1lbnQiLCJvbkNoYW5nZSIsIm9uQ2hhbmdlQ2FwdHVyZSIsImRvZXNDaGFuZ2VFdmVudEJ1YmJsZSIsImlzSW5wdXRFdmVudFN1cHBvcnRlZCIsInZhbCIsImdldFRhcmdldElERnVuYyIsImhhbmRsZUV2ZW50RnVuYyIsInN1cHBvcnRlZElucHV0VHlwZXMiLCJjb2xvciIsImRhdGUiLCJkYXRldGltZSIsImRhdGV0aW1lLWxvY2FsIiwiZW1haWwiLCJtb250aCIsIm51bWJlciIsInBhc3N3b3JkIiwicmFuZ2UiLCJzZWFyY2giLCJ0ZWwiLCJ0aW1lIiwid2VlayIsIm5leHRSZWFjdFJvb3RJbmRleCIsIlJlc3BvbmRlckV2ZW50UGx1Z2luIiwiVGFwRXZlbnRQbHVnaW4iLCJTeW50aGV0aWNNb3VzZUV2ZW50IiwibW91c2VFbnRlciIsIm9uTW91c2VFbnRlciIsIm1vdXNlTGVhdmUiLCJvbk1vdXNlTGVhdmUiLCJyZWxhdGVkVGFyZ2V0IiwiZnJvbUVsZW1lbnQiLCJ3aW4iLCJkb2MiLCJkZWZhdWx0VmlldyIsInBhcmVudFdpbmRvdyIsInRvRWxlbWVudCIsIlN5bnRoZXRpY1VJRXZlbnQiLCJnZXRFdmVudE1vZGlmaWVyU3RhdGUiLCJNb3VzZUV2ZW50SW50ZXJmYWNlIiwic2NyZWVuWCIsInNjcmVlblkiLCJjbGllbnRYIiwiY2xpZW50WSIsInNoaWZ0S2V5IiwiZ2V0TW9kaWZpZXJTdGF0ZSIsImJ1dHRvbiIsImJ1dHRvbnMiLCJwYWdlWCIsInBhZ2VZIiwiVUlFdmVudEludGVyZmFjZSIsInZpZXciLCJtb2RpZmllclN0YXRlR2V0dGVyIiwia2V5QXJnIiwic3ludGhldGljRXZlbnQiLCJrZXlQcm9wIiwibW9kaWZpZXJLZXlUb1Byb3AiLCJBbHQiLCJDb250cm9sIiwiTWV0YSIsIlNoaWZ0IiwiaGFzU1ZHIiwiUmVnRXhwIiwiYWNjZXB0IiwiYWNjZXB0Q2hhcnNldCIsImFjY2Vzc0tleSIsImFjdGlvbiIsImFsbG93RnVsbFNjcmVlbiIsImFsbG93VHJhbnNwYXJlbmN5IiwiYWx0IiwiYXN5bmMiLCJhdXRvQ29tcGxldGUiLCJhdXRvUGxheSIsImNlbGxQYWRkaW5nIiwiY2VsbFNwYWNpbmciLCJjaGFyU2V0IiwiY2hhbGxlbmdlIiwiY2hlY2tlZCIsImNsYXNzSUQiLCJjbGFzc05hbWUiLCJjb2xzIiwiY29sU3BhbiIsImNvbnRlbnRFZGl0YWJsZSIsImNvbnRleHRNZW51IiwiY29udHJvbHMiLCJjb29yZHMiLCJjcm9zc09yaWdpbiIsImRhdGVUaW1lIiwiZGVmZXIiLCJkaXNhYmxlZCIsImRvd25sb2FkIiwiZHJhZ2dhYmxlIiwiZW5jVHlwZSIsImZvcm0iLCJmb3JtQWN0aW9uIiwiZm9ybUVuY1R5cGUiLCJmb3JtTWV0aG9kIiwiZm9ybU5vVmFsaWRhdGUiLCJmb3JtVGFyZ2V0IiwiZnJhbWVCb3JkZXIiLCJoZWFkZXJzIiwiaGVpZ2h0IiwiaGlkZGVuIiwiaGlnaCIsImhyZWZMYW5nIiwiaHRtbEZvciIsImh0dHBFcXVpdiIsImljb24iLCJpbnB1dE1vZGUiLCJpbnRlZ3JpdHkiLCJpcyIsImtleVBhcmFtcyIsImtleVR5cGUiLCJraW5kIiwibGFiZWwiLCJsYW5nIiwibGlzdCIsImxvb3AiLCJsb3ciLCJtYW5pZmVzdCIsIm1hcmdpbkhlaWdodCIsIm1hcmdpbldpZHRoIiwibWF4IiwibWF4TGVuZ3RoIiwibWVkaWEiLCJtZWRpYUdyb3VwIiwibXVsdGlwbGUiLCJtdXRlZCIsIm5vbmNlIiwibm9WYWxpZGF0ZSIsIm9wZW4iLCJvcHRpbXVtIiwicGF0dGVybiIsInBsYWNlaG9sZGVyIiwicG9zdGVyIiwicHJlbG9hZCIsInJhZGlvR3JvdXAiLCJyZWFkT25seSIsInJlbCIsInJlcXVpcmVkIiwicmV2ZXJzZWQiLCJyb2xlIiwicm93cyIsInJvd1NwYW4iLCJzYW5kYm94Iiwic2NvcGVkIiwic2Nyb2xsaW5nIiwic2VhbWxlc3MiLCJzZWxlY3RlZCIsInNoYXBlIiwic2l6ZSIsInNpemVzIiwic3BhbiIsInNwZWxsQ2hlY2siLCJzcmMiLCJzcmNEb2MiLCJzcmNMYW5nIiwic3JjU2V0Iiwic3RlcCIsInN1bW1hcnkiLCJ0YWJJbmRleCIsInVzZU1hcCIsIndpZHRoIiwid21vZGUiLCJhYm91dCIsImRhdGF0eXBlIiwiaW5saXN0IiwicHJlZml4IiwicHJvcGVydHkiLCJyZXNvdXJjZSIsInR5cGVvZiIsInZvY2FiIiwiYXV0b0NhcGl0YWxpemUiLCJhdXRvQ29ycmVjdCIsImF1dG9TYXZlIiwiaXRlbVByb3AiLCJpdGVtU2NvcGUiLCJpdGVtVHlwZSIsIml0ZW1JRCIsIml0ZW1SZWYiLCJyZXN1bHRzIiwic2VjdXJpdHkiLCJ1bnNlbGVjdGFibGUiLCJhdXRvRm9jdXMiLCJkaWRXYXJuS2V5IiwiZ2V0RE9NTm9kZSIsImNvbXBvbmVudE9yRWxlbWVudCIsIlJlYWN0RGVmYXVsdEJhdGNoaW5nU3RyYXRlZ3lUcmFuc2FjdGlvbiIsIlJFU0VUX0JBVENIRURfVVBEQVRFUyIsIkZMVVNIX0JBVENIRURfVVBEQVRFUyIsImFscmVhZHlCYXRjaGluZ1VwZGF0ZXMiLCJsZWdhY3lHZXRET01Ob2RlIiwiX3JlYWN0SW50ZXJuYWxDb21wb25lbnQiLCJsZWdhY3lJc01vdW50ZWQiLCJsZWdhY3lTZXRTdGF0ZUV0YyIsImxlZ2FjeVNldFByb3BzIiwibGVnYWN5UmVwbGFjZVByb3BzIiwiZnJpZW5kbHlTdHJpbmdpZnkiLCJwYWlycyIsImtleUVzY2FwZWQiLCJKU09OIiwic3RyaW5naWZ5IiwiY2hlY2tBbmRXYXJuRm9yTXV0YXRlZFN0eWxlIiwic3R5bGUxIiwic3R5bGUyIiwic2hhbGxvd0VxdWFsIiwib3duZXJOYW1lIiwiX3RhZyIsImhhc2giLCJzdHlsZU11dGF0aW9uV2FybmluZyIsImFzc2VydFZhbGlkUHJvcHMiLCJ2b2lkRWxlbWVudFRhZ3MiLCJIVE1MIiwiZW5xdWV1ZVB1dExpc3RlbmVyIiwibGlzdGVuZXJUb1B1dCIsInRyYXBCdWJibGVkRXZlbnRzTG9jYWwiLCJfd3JhcHBlclN0YXRlIiwibWVkaWFFdmVudHMiLCJtb3VudFJlYWR5SW5wdXRXcmFwcGVyIiwiUmVhY3RET01JbnB1dCIsIm1vdW50UmVhZHlXcmFwcGVyIiwicG9zdFVwZGF0ZVNlbGVjdFdyYXBwZXIiLCJSZWFjdERPTVNlbGVjdCIsInBvc3RVcGRhdGVXcmFwcGVyIiwidmFsaWRhdGVEYW5nZXJvdXNUYWciLCJ2YWxpZGF0ZWRUYWdDYWNoZSIsIlZBTElEX1RBR19SRUdFWCIsInByb2Nlc3NDaGlsZENvbnRleHREZXYiLCJpc0N1c3RvbUNvbXBvbmVudCIsIl9yZW5kZXJlZENoaWxkcmVuIiwiX3ByZXZpb3VzU3R5bGUiLCJfcHJldmlvdXNTdHlsZUNvcHkiLCJfbm9kZVdpdGhMZWdhY3lQcm9wZXJ0aWVzIiwiX3VucHJvY2Vzc2VkQ29udGV4dERldiIsIl9wcm9jZXNzZWRDb250ZXh0RGV2IiwibGVnYWN5UHJvcHNEZXNjcmlwdG9yIiwiQXV0b0ZvY3VzVXRpbHMiLCJDU1NQcm9wZXJ0eU9wZXJhdGlvbnMiLCJSZWFjdERPTUJ1dHRvbiIsIlJlYWN0RE9NT3B0aW9uIiwiUmVhY3RET01UZXh0YXJlYSIsIlJlYWN0TXVsdGlDaGlsZCIsIkNPTlRFTlRfVFlQRVMiLCJzdHJpbmciLCJDSElMRFJFTiIsIlNUWUxFIiwiX19odG1sIiwib21pdHRlZENsb3NlVGFncyIsImJhc2UiLCJiciIsImVtYmVkIiwiaHIiLCJpbWciLCJpbnB1dCIsImtleWdlbiIsImxpbmsiLCJtZXRhIiwidHJhY2siLCJ3YnIiLCJuZXdsaW5lRWF0aW5nVGFncyIsImxpc3RpbmciLCJwcmUiLCJ0ZXh0YXJlYSIsIm1lbnVpdGVtIiwiZ2V0TmF0aXZlUHJvcHMiLCJtb3VudFdyYXBwZXIiLCJwcm9jZXNzQ2hpbGRDb250ZXh0IiwibW91bnRJbWFnZSIsIl91cGRhdGVET01Qcm9wZXJ0aWVzIiwiX2NyZWF0ZUluaXRpYWxDaGlsZHJlbiIsInRhZ09wZW4iLCJfY3JlYXRlT3BlblRhZ01hcmt1cEFuZFB1dExpc3RlbmVycyIsInRhZ0NvbnRlbnQiLCJfY3JlYXRlQ29udGVudE1hcmt1cCIsImZvY3VzRE9NQ29tcG9uZW50IiwicHJvcEtleSIsInByb3BWYWx1ZSIsImNyZWF0ZU1hcmt1cEZvclN0eWxlcyIsIm1hcmt1cEZvcklEIiwiY29udGVudFRvVXNlIiwiY2hpbGRyZW5Ub1VzZSIsIm1vdW50SW1hZ2VzIiwibW91bnRDaGlsZHJlbiIsImxhc3RQcm9wcyIsInVwZGF0ZVdyYXBwZXIiLCJfdXBkYXRlRE9NQ2hpbGRyZW4iLCJzdHlsZU5hbWUiLCJzdHlsZVVwZGF0ZXMiLCJsYXN0U3R5bGUiLCJuZXh0UHJvcCIsImxhc3RQcm9wIiwic2V0VmFsdWVGb3JTdHlsZXMiLCJsYXN0Q29udGVudCIsIm5leHRDb250ZW50IiwibGFzdEh0bWwiLCJuZXh0SHRtbCIsImxhc3RDaGlsZHJlbiIsIm5leHRDaGlsZHJlbiIsImxhc3RIYXNDb250ZW50T3JIdG1sIiwibmV4dEhhc0NvbnRlbnRPckh0bWwiLCJ1cGRhdGVDaGlsZHJlbiIsInVwZGF0ZU1hcmt1cCIsInVubW91bnRXcmFwcGVyIiwidW5tb3VudENoaWxkcmVuIiwic2V0U3RhdGUiLCJyZXBsYWNlU3RhdGUiLCJmb3JjZVVwZGF0ZSIsInNldFByb3BzIiwicmVwbGFjZVByb3BzIiwiZGVmaW5lUHJvcGVydGllcyIsImZvY3VzTm9kZSIsImZvY3VzIiwiQ1NTUHJvcGVydHkiLCJjYW1lbGl6ZVN0eWxlTmFtZSIsImRhbmdlcm91c1N0eWxlVmFsdWUiLCJoeXBoZW5hdGVTdHlsZU5hbWUiLCJtZW1vaXplU3RyaW5nT25seSIsInByb2Nlc3NTdHlsZU5hbWUiLCJoYXNTaG9ydGhhbmRQcm9wZXJ0eUJ1ZyIsInN0eWxlRmxvYXRBY2Nlc3NvciIsInRlbXBTdHlsZSIsImZvbnQiLCJjc3NGbG9hdCIsImJhZFZlbmRvcmVkU3R5bGVOYW1lUGF0dGVybiIsImJhZFN0eWxlVmFsdWVXaXRoU2VtaWNvbG9uUGF0dGVybiIsIndhcm5lZFN0eWxlTmFtZXMiLCJ3YXJuZWRTdHlsZVZhbHVlcyIsIndhcm5IeXBoZW5hdGVkU3R5bGVOYW1lIiwid2FybkJhZFZlbmRvcmVkU3R5bGVOYW1lIiwid2FyblN0eWxlVmFsdWVXaXRoU2VtaWNvbG9uIiwid2FyblZhbGlkU3R5bGUiLCJzdHlsZXMiLCJzZXJpYWxpemVkIiwic3R5bGVWYWx1ZSIsImV4cGFuc2lvbiIsInNob3J0aGFuZFByb3BlcnR5RXhwYW5zaW9ucyIsImluZGl2aWR1YWxTdHlsZU5hbWUiLCJwcmVmaXhLZXkiLCJpc1VuaXRsZXNzTnVtYmVyIiwiYW5pbWF0aW9uSXRlcmF0aW9uQ291bnQiLCJib3hGbGV4IiwiYm94RmxleEdyb3VwIiwiYm94T3JkaW5hbEdyb3VwIiwiY29sdW1uQ291bnQiLCJmbGV4IiwiZmxleEdyb3ciLCJmbGV4UG9zaXRpdmUiLCJmbGV4U2hyaW5rIiwiZmxleE5lZ2F0aXZlIiwiZmxleE9yZGVyIiwiZm9udFdlaWdodCIsImxpbmVDbGFtcCIsImxpbmVIZWlnaHQiLCJvcGFjaXR5Iiwib3JkZXIiLCJvcnBoYW5zIiwidGFiU2l6ZSIsIndpZG93cyIsInpJbmRleCIsInpvb20iLCJmaWxsT3BhY2l0eSIsInN0b3BPcGFjaXR5Iiwic3Ryb2tlRGFzaG9mZnNldCIsInN0cm9rZU9wYWNpdHkiLCJzdHJva2VXaWR0aCIsInByZWZpeGVzIiwiYmFja2dyb3VuZCIsImJhY2tncm91bmRBdHRhY2htZW50IiwiYmFja2dyb3VuZENvbG9yIiwiYmFja2dyb3VuZEltYWdlIiwiYmFja2dyb3VuZFBvc2l0aW9uWCIsImJhY2tncm91bmRQb3NpdGlvblkiLCJiYWNrZ3JvdW5kUmVwZWF0IiwiYmFja2dyb3VuZFBvc2l0aW9uIiwiYm9yZGVyIiwiYm9yZGVyV2lkdGgiLCJib3JkZXJTdHlsZSIsImJvcmRlckNvbG9yIiwiYm9yZGVyQm90dG9tIiwiYm9yZGVyQm90dG9tV2lkdGgiLCJib3JkZXJCb3R0b21TdHlsZSIsImJvcmRlckJvdHRvbUNvbG9yIiwiYm9yZGVyTGVmdCIsImJvcmRlckxlZnRXaWR0aCIsImJvcmRlckxlZnRTdHlsZSIsImJvcmRlckxlZnRDb2xvciIsImJvcmRlclJpZ2h0IiwiYm9yZGVyUmlnaHRXaWR0aCIsImJvcmRlclJpZ2h0U3R5bGUiLCJib3JkZXJSaWdodENvbG9yIiwiYm9yZGVyVG9wIiwiYm9yZGVyVG9wV2lkdGgiLCJib3JkZXJUb3BTdHlsZSIsImJvcmRlclRvcENvbG9yIiwiZm9udFN0eWxlIiwiZm9udFZhcmlhbnQiLCJmb250U2l6ZSIsImZvbnRGYW1pbHkiLCJvdXRsaW5lIiwib3V0bGluZVdpZHRoIiwib3V0bGluZVN0eWxlIiwib3V0bGluZUNvbG9yIiwiY2FtZWxpemUiLCJtc1BhdHRlcm4iLCJfaHlwaGVuUGF0dGVybiIsIl8iLCJjaGFyYWN0ZXIiLCJpc0VtcHR5IiwiaXNOb25OdW1lcmljIiwiaHlwaGVuYXRlIiwiX3VwcGVyY2FzZVBhdHRlcm4iLCJjYWNoZSIsIm1vdXNlTGlzdGVuZXJOYW1lcyIsIm9uQ2xpY2siLCJvbkRvdWJsZUNsaWNrIiwib25Nb3VzZURvd24iLCJvbk1vdXNlTW92ZSIsIm9uTW91c2VVcCIsIm9uQ2xpY2tDYXB0dXJlIiwib25Eb3VibGVDbGlja0NhcHR1cmUiLCJvbk1vdXNlRG93bkNhcHR1cmUiLCJvbk1vdXNlTW92ZUNhcHR1cmUiLCJvbk1vdXNlVXBDYXB0dXJlIiwibmF0aXZlUHJvcHMiLCJmb3JjZVVwZGF0ZUlmTW91bnRlZCIsIl9oYW5kbGVDaGFuZ2UiLCJMaW5rZWRWYWx1ZVV0aWxzIiwiZXhlY3V0ZU9uQ2hhbmdlIiwicm9vdE5vZGUiLCJxdWVyeVJvb3QiLCJncm91cCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJvdGhlck5vZGUiLCJvdGhlcklEIiwib3RoZXJJbnN0YW5jZSIsImluc3RhbmNlc0J5UmVhY3RJRCIsImdldFZhbHVlIiwiZ2V0Q2hlY2tlZCIsImRlZmF1bHRDaGVja2VkIiwiaW5pdGlhbFZhbHVlIiwiaW5pdGlhbENoZWNrZWQiLCJjaGVja1Byb3BUeXBlcyIsIl9hc3NlcnRTaW5nbGVMaW5rIiwiaW5wdXRQcm9wcyIsImNoZWNrZWRMaW5rIiwidmFsdWVMaW5rIiwiX2Fzc2VydFZhbHVlTGluayIsIl9hc3NlcnRDaGVja2VkTGluayIsIlJlYWN0UHJvcFR5cGVzIiwiaGFzUmVhZE9ubHlWYWx1ZSIsImNoZWNrYm94IiwiaW1hZ2UiLCJyYWRpbyIsInN1Ym1pdCIsImxvZ2dlZFR5cGVGYWlsdXJlcyIsInJlcXVlc3RDaGFuZ2UiLCJjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlciIsInZhbGlkYXRlIiwiY2hlY2tUeXBlIiwiaXNSZXF1aXJlZCIsInByb3BGdWxsTmFtZSIsIkFOT05ZTU9VUyIsImxvY2F0aW9uTmFtZSIsImNoYWluZWRDaGVja1R5cGUiLCJjcmVhdGVQcmltaXRpdmVUeXBlQ2hlY2tlciIsImV4cGVjdGVkVHlwZSIsInByb3BUeXBlIiwiZ2V0UHJvcFR5cGUiLCJwcmVjaXNlVHlwZSIsImdldFByZWNpc2VUeXBlIiwiY3JlYXRlQW55VHlwZUNoZWNrZXIiLCJjcmVhdGVBcnJheU9mVHlwZUNoZWNrZXIiLCJ0eXBlQ2hlY2tlciIsImNyZWF0ZUVsZW1lbnRUeXBlQ2hlY2tlciIsImNyZWF0ZUluc3RhbmNlVHlwZUNoZWNrZXIiLCJleHBlY3RlZENsYXNzIiwiZXhwZWN0ZWRDbGFzc05hbWUiLCJhY3R1YWxDbGFzc05hbWUiLCJnZXRDbGFzc05hbWUiLCJjcmVhdGVFbnVtVHlwZUNoZWNrZXIiLCJleHBlY3RlZFZhbHVlcyIsInZhbHVlc1N0cmluZyIsImNyZWF0ZU9iamVjdE9mVHlwZUNoZWNrZXIiLCJjcmVhdGVVbmlvblR5cGVDaGVja2VyIiwiYXJyYXlPZlR5cGVDaGVja2VycyIsImNoZWNrZXIiLCJjcmVhdGVOb2RlQ2hlY2tlciIsImNyZWF0ZVNoYXBlVHlwZUNoZWNrZXIiLCJzaGFwZVR5cGVzIiwiaXRlcmF0b3JGbiIsImdldEl0ZXJhdG9yRm4iLCJpdGVyYXRvciIsImVudHJpZXMiLCJkb25lIiwiZW50cnkiLCJib29sIiwiYW55IiwiYXJyYXlPZiIsImluc3RhbmNlT2YiLCJvYmplY3RPZiIsIm9uZU9mIiwib25lT2ZUeXBlIiwibWF5YmVJdGVyYWJsZSIsIklURVJBVE9SX1NZTUJPTCIsIkZBVVhfSVRFUkFUT1JfU1lNQk9MIiwiUmVhY3RDaGlsZHJlbiIsInZhbHVlQ29udGV4dEtleSIsInNlbGVjdFZhbHVlIiwiZXNjYXBlVXNlclByb3ZpZGVkS2V5IiwidXNlclByb3ZpZGVkS2V5RXNjYXBlUmVnZXgiLCJGb3JFYWNoQm9va0tlZXBpbmciLCJmb3JFYWNoRnVuY3Rpb24iLCJmb3JFYWNoQ29udGV4dCIsImNvdW50IiwiZm9yRWFjaFNpbmdsZUNoaWxkIiwiYm9va0tlZXBpbmciLCJmb3JFYWNoQ2hpbGRyZW4iLCJmb3JFYWNoRnVuYyIsInRyYXZlcnNlQ29udGV4dCIsInRyYXZlcnNlQWxsQ2hpbGRyZW4iLCJNYXBCb29rS2VlcGluZyIsIm1hcFJlc3VsdCIsImtleVByZWZpeCIsIm1hcEZ1bmN0aW9uIiwibWFwQ29udGV4dCIsInJlc3VsdCIsIm1hcFNpbmdsZUNoaWxkSW50b0NvbnRleHQiLCJjaGlsZEtleSIsIm1hcHBlZENoaWxkIiwibWFwSW50b1dpdGhLZXlQcmVmaXhJbnRlcm5hbCIsImVzY2FwZWRQcmVmaXgiLCJtYXBDaGlsZHJlbiIsImZvckVhY2hTaW5nbGVDaGlsZER1bW15IiwiY291bnRDaGlsZHJlbiIsInVzZXJQcm92aWRlZEtleUVzY2FwZXIiLCJ1c2VyUHJvdmlkZWRLZXlFc2NhcGVyTG9va3VwIiwiZ2V0Q29tcG9uZW50S2V5Iiwid3JhcFVzZXJQcm92aWRlZEtleSIsInRyYXZlcnNlQWxsQ2hpbGRyZW5JbXBsIiwibmFtZVNvRmFyIiwibmV4dE5hbWUiLCJzdWJ0cmVlQ291bnQiLCJuZXh0TmFtZVByZWZpeCIsIlNVQlNFUEFSQVRPUiIsImRpZFdhcm5BYm91dE1hcHMiLCJfaXNSZWFjdEVsZW1lbnQiLCJjaGlsZHJlblN0cmluZyIsIj0iLCIuIiwiOiIsInVwZGF0ZU9wdGlvbnNJZlBlbmRpbmdVcGRhdGVBbmRNb3VudGVkIiwicGVuZGluZ1VwZGF0ZSIsInVwZGF0ZU9wdGlvbnMiLCJjaGVja1NlbGVjdFByb3BUeXBlcyIsInZhbHVlUHJvcE5hbWVzIiwic2VsZWN0ZWRWYWx1ZSIsIm9wdGlvbnMiLCJ3YXNNdWx0aXBsZSIsImVucXVldWVJbnNlcnRNYXJrdXAiLCJ1cGRhdGVRdWV1ZSIsIm1hcmt1cFF1ZXVlIiwiZW5xdWV1ZU1vdmUiLCJlbnF1ZXVlUmVtb3ZlIiwiZW5xdWV1ZVNldE1hcmt1cCIsImVucXVldWVUZXh0Q29udGVudCIsInByb2Nlc3NRdWV1ZSIsImNsZWFyUXVldWUiLCJSZWFjdENoaWxkUmVjb25jaWxlciIsImZsYXR0ZW5DaGlsZHJlbiIsInVwZGF0ZURlcHRoIiwiX3JlY29uY2lsZXJJbnN0YW50aWF0ZUNoaWxkcmVuIiwibmVzdGVkQ2hpbGRyZW4iLCJpbnN0YW50aWF0ZUNoaWxkcmVuIiwiX3JlY29uY2lsZXJVcGRhdGVDaGlsZHJlbiIsInByZXZDaGlsZHJlbiIsIm5leHROZXN0ZWRDaGlsZHJlbkVsZW1lbnRzIiwiX3VubW91bnRDaGlsZCIsIl91bm1vdW50Q2hpbGRCeU5hbWUiLCJzZXRNYXJrdXAiLCJfdXBkYXRlQ2hpbGRyZW4iLCJsYXN0SW5kZXgiLCJwcmV2Q2hpbGQiLCJuZXh0Q2hpbGQiLCJtb3ZlQ2hpbGQiLCJfbW91bnRDaGlsZEJ5TmFtZUF0SW5kZXgiLCJyZW5kZXJlZENoaWxkcmVuIiwiY3JlYXRlQ2hpbGQiLCJpbnN0YW50aWF0ZUNoaWxkIiwiY2hpbGRJbnN0YW5jZXMiLCJrZXlVbmlxdWUiLCJuZXN0ZWRDaGlsZE5vZGVzIiwibmV4dENoaWxkSW5zdGFuY2UiLCJyZW5kZXJlZENoaWxkIiwiZmxhdHRlblNpbmdsZUNoaWxkSW50b0NvbnRleHQiLCJvYmpBIiwib2JqQiIsImtleXNBIiwia2V5c0IiLCJiSGFzT3duUHJvcGVydHkiLCJmaW5kUGFyZW50IiwicGFyZW50IiwiVG9wTGV2ZWxDYWxsYmFja0Jvb2tLZWVwaW5nIiwiYW5jZXN0b3JzIiwiaGFuZGxlVG9wTGV2ZWxJbXBsIiwiaGFuZGxlVG9wTGV2ZWxXaXRob3V0UGF0aCIsIl9oYW5kbGVUb3BMZXZlbCIsInNjcm9sbFZhbHVlTW9uaXRvciIsImdldFVuYm91bmRlZFNjcm9sbFBvc2l0aW9uIiwiRXZlbnRMaXN0ZW5lciIsIl9lbmFibGVkIiwibGlzdGVuIiwicmVnaXN0ZXJEZWZhdWx0Iiwic2Nyb2xsYWJsZSIsInBhZ2VYT2Zmc2V0Iiwic2Nyb2xsTGVmdCIsInBhZ2VZT2Zmc2V0Iiwic2Nyb2xsVG9wIiwiUmVhY3RDbGFzcyIsIlBlcmYiLCJ3YXJuU2V0UHJvcHMiLCJ3YXJuZWRTZXRQcm9wcyIsInZhbGlkYXRlVHlwZURlZiIsIkNvbnN0cnVjdG9yIiwidHlwZURlZiIsInZhbGlkYXRlTWV0aG9kT3ZlcnJpZGUiLCJwcm90byIsInNwZWNQb2xpY3kiLCJSZWFjdENsYXNzSW50ZXJmYWNlIiwiUmVhY3RDbGFzc01peGluIiwiU3BlY1BvbGljeSIsIk9WRVJSSURFX0JBU0UiLCJERUZJTkVfTUFOWSIsIkRFRklORV9NQU5ZX01FUkdFRCIsIm1peFNwZWNJbnRvQ29tcG9uZW50Iiwic3BlYyIsIk1JWElOU19LRVkiLCJSRVNFUlZFRF9TUEVDX0tFWVMiLCJtaXhpbnMiLCJpc1JlYWN0Q2xhc3NNZXRob2QiLCJpc0FscmVhZHlEZWZpbmVkIiwiaXNGdW5jdGlvbiIsInNob3VsZEF1dG9CaW5kIiwiYXV0b2JpbmQiLCJfX3JlYWN0QXV0b0JpbmRNYXAiLCJjcmVhdGVNZXJnZWRSZXN1bHRGdW5jdGlvbiIsImNyZWF0ZUNoYWluZWRGdW5jdGlvbiIsIm1peFN0YXRpY1NwZWNJbnRvQ29tcG9uZW50Iiwic3RhdGljcyIsImlzUmVzZXJ2ZWQiLCJpc0luaGVyaXRlZCIsIm1lcmdlSW50b1dpdGhOb0R1cGxpY2F0ZUtleXMiLCJvbmUiLCJ0d28iLCJiaW5kQXV0b0JpbmRNZXRob2QiLCJib3VuZE1ldGhvZCIsIl9fcmVhY3RCb3VuZENvbnRleHQiLCJfX3JlYWN0Qm91bmRNZXRob2QiLCJfX3JlYWN0Qm91bmRBcmd1bWVudHMiLCJfYmluZCIsIm5ld1RoaXMiLCJyZWJvdW5kTWV0aG9kIiwiYmluZEF1dG9CaW5kTWV0aG9kcyIsImF1dG9CaW5kS2V5IiwiUmVhY3RDb21wb25lbnQiLCJSZWFjdE5vb3BVcGRhdGVRdWV1ZSIsIkRFRklORV9PTkNFIiwiaW5qZWN0ZWRNaXhpbnMiLCJuZXdTdGF0ZSIsIlJlYWN0Q2xhc3NDb21wb25lbnQiLCJjcmVhdGVDbGFzcyIsIm1ldGhvZE5hbWUiLCJtaXhpbiIsImRlcHJlY2F0ZWRBUElzIiwiZGVmaW5lRGVwcmVjYXRpb25XYXJuaW5nIiwid2FyblREWiIsImZvcmNlSFRNTCIsInJlYWN0TW91bnRSZWFkeSIsIlJlYWN0SW5wdXRTZWxlY3Rpb24iLCJTRUxFQ1RJT05fUkVTVE9SQVRJT04iLCJnZXRTZWxlY3Rpb25JbmZvcm1hdGlvbiIsInJlc3RvcmVTZWxlY3Rpb24iLCJFVkVOVF9TVVBQUkVTU0lPTiIsImN1cnJlbnRseUVuYWJsZWQiLCJwcmV2aW91c2x5RW5hYmxlZCIsIk9OX0RPTV9SRUFEWV9RVUVVRUlORyIsImlzSW5Eb2N1bWVudCIsIlJlYWN0RE9NU2VsZWN0aW9uIiwiZ2V0QWN0aXZlRWxlbWVudCIsImhhc1NlbGVjdGlvbkNhcGFiaWxpdGllcyIsImZvY3VzZWRFbGVtIiwic2VsZWN0aW9uUmFuZ2UiLCJnZXRTZWxlY3Rpb24iLCJwcmlvclNlbGVjdGlvbkluZm9ybWF0aW9uIiwiY3VyRm9jdXNlZEVsZW0iLCJwcmlvckZvY3VzZWRFbGVtIiwicHJpb3JTZWxlY3Rpb25SYW5nZSIsInNldFNlbGVjdGlvbiIsInNlbGVjdGlvbiIsInNlbGVjdGlvblN0YXJ0Iiwic2VsZWN0aW9uRW5kIiwiY3JlYXRlUmFuZ2UiLCJwYXJlbnRFbGVtZW50IiwibW92ZVN0YXJ0IiwibW92ZUVuZCIsImdldE9mZnNldHMiLCJvZmZzZXRzIiwiY3JlYXRlVGV4dFJhbmdlIiwiY29sbGFwc2UiLCJzZWxlY3QiLCJzZXRPZmZzZXRzIiwiaXNDb2xsYXBzZWQiLCJhbmNob3JOb2RlIiwiYW5jaG9yT2Zmc2V0IiwiZm9jdXNPZmZzZXQiLCJnZXRJRU9mZnNldHMiLCJzZWxlY3RlZFJhbmdlIiwic2VsZWN0ZWRMZW5ndGgiLCJmcm9tU3RhcnQiLCJkdXBsaWNhdGUiLCJtb3ZlVG9FbGVtZW50VGV4dCIsInNldEVuZFBvaW50Iiwic3RhcnRPZmZzZXQiLCJlbmRPZmZzZXQiLCJnZXRNb2Rlcm5PZmZzZXRzIiwicmFuZ2VDb3VudCIsImN1cnJlbnRSYW5nZSIsImdldFJhbmdlQXQiLCJzdGFydENvbnRhaW5lciIsImVuZENvbnRhaW5lciIsImlzU2VsZWN0aW9uQ29sbGFwc2VkIiwicmFuZ2VMZW5ndGgiLCJ0ZW1wUmFuZ2UiLCJjbG9uZVJhbmdlIiwic2VsZWN0Tm9kZUNvbnRlbnRzIiwic2V0RW5kIiwiaXNUZW1wUmFuZ2VDb2xsYXBzZWQiLCJkZXRlY3Rpb25SYW5nZSIsInNldFN0YXJ0IiwiaXNCYWNrd2FyZCIsImNvbGxhcHNlZCIsInNldElFT2Zmc2V0cyIsInNldE1vZGVybk9mZnNldHMiLCJleHRlbmQiLCJ0ZW1wIiwic3RhcnRNYXJrZXIiLCJnZXROb2RlRm9yQ2hhcmFjdGVyT2Zmc2V0IiwiZW5kTWFya2VyIiwib2Zmc2V0IiwicmVtb3ZlQWxsUmFuZ2VzIiwiYWRkUmFuZ2UiLCJ1c2VJRU9mZnNldHMiLCJnZXRMZWFmTm9kZSIsImdldFNpYmxpbmdOb2RlIiwibm9kZVN0YXJ0Iiwibm9kZUVuZCIsImJvdW5kaW5nVG9wIiwibGVmdCIsImJvdW5kaW5nTGVmdCIsImNvbnN0cnVjdFNlbGVjdEV2ZW50IiwibW91c2VEb3duIiwiY3VycmVudFNlbGVjdGlvbiIsImxhc3RTZWxlY3Rpb24iLCJza2lwU2VsZWN0aW9uQ2hhbmdlRXZlbnQiLCJvblNlbGVjdCIsIm9uU2VsZWN0Q2FwdHVyZSIsImhhc0xpc3RlbmVyIiwiT05fU0VMRUNUX0tFWSIsIkdMT0JBTF9NT1VOVF9QT0lOVF9NQVgiLCJwb3ciLCJjZWlsIiwiU3ludGhldGljQ2xpcGJvYXJkRXZlbnQiLCJTeW50aGV0aWNGb2N1c0V2ZW50IiwiU3ludGhldGljS2V5Ym9hcmRFdmVudCIsIlN5bnRoZXRpY0RyYWdFdmVudCIsIlN5bnRoZXRpY1RvdWNoRXZlbnQiLCJTeW50aGV0aWNXaGVlbEV2ZW50IiwiZ2V0RXZlbnRDaGFyQ29kZSIsImFib3J0Iiwib25BYm9ydCIsIm9uQWJvcnRDYXB0dXJlIiwiYmx1ciIsIm9uQmx1ciIsIm9uQmx1ckNhcHR1cmUiLCJjYW5QbGF5Iiwib25DYW5QbGF5Iiwib25DYW5QbGF5Q2FwdHVyZSIsImNhblBsYXlUaHJvdWdoIiwib25DYW5QbGF5VGhyb3VnaCIsIm9uQ2FuUGxheVRocm91Z2hDYXB0dXJlIiwiY2xpY2siLCJvbkNvbnRleHRNZW51Iiwib25Db250ZXh0TWVudUNhcHR1cmUiLCJjb3B5Iiwib25Db3B5Iiwib25Db3B5Q2FwdHVyZSIsImN1dCIsIm9uQ3V0Iiwib25DdXRDYXB0dXJlIiwiZG91YmxlQ2xpY2siLCJkcmFnIiwib25EcmFnIiwib25EcmFnQ2FwdHVyZSIsImRyYWdFbmQiLCJvbkRyYWdFbmQiLCJvbkRyYWdFbmRDYXB0dXJlIiwiZHJhZ0VudGVyIiwib25EcmFnRW50ZXIiLCJvbkRyYWdFbnRlckNhcHR1cmUiLCJkcmFnRXhpdCIsIm9uRHJhZ0V4aXQiLCJvbkRyYWdFeGl0Q2FwdHVyZSIsImRyYWdMZWF2ZSIsIm9uRHJhZ0xlYXZlIiwib25EcmFnTGVhdmVDYXB0dXJlIiwiZHJhZ092ZXIiLCJvbkRyYWdPdmVyIiwib25EcmFnT3ZlckNhcHR1cmUiLCJkcmFnU3RhcnQiLCJvbkRyYWdTdGFydCIsIm9uRHJhZ1N0YXJ0Q2FwdHVyZSIsImRyb3AiLCJvbkRyb3AiLCJvbkRyb3BDYXB0dXJlIiwiZHVyYXRpb25DaGFuZ2UiLCJvbkR1cmF0aW9uQ2hhbmdlIiwib25EdXJhdGlvbkNoYW5nZUNhcHR1cmUiLCJlbXB0aWVkIiwib25FbXB0aWVkIiwib25FbXB0aWVkQ2FwdHVyZSIsImVuY3J5cHRlZCIsIm9uRW5jcnlwdGVkIiwib25FbmNyeXB0ZWRDYXB0dXJlIiwiZW5kZWQiLCJvbkVuZGVkIiwib25FbmRlZENhcHR1cmUiLCJvbkVycm9yIiwib25FcnJvckNhcHR1cmUiLCJvbkZvY3VzIiwib25Gb2N1c0NhcHR1cmUiLCJvbklucHV0Iiwib25JbnB1dENhcHR1cmUiLCJrZXlEb3duIiwib25LZXlEb3duIiwib25LZXlEb3duQ2FwdHVyZSIsImtleVByZXNzIiwib25LZXlQcmVzcyIsIm9uS2V5UHJlc3NDYXB0dXJlIiwia2V5VXAiLCJvbktleVVwIiwib25LZXlVcENhcHR1cmUiLCJsb2FkIiwib25Mb2FkIiwib25Mb2FkQ2FwdHVyZSIsImxvYWRlZERhdGEiLCJvbkxvYWRlZERhdGEiLCJvbkxvYWRlZERhdGFDYXB0dXJlIiwibG9hZGVkTWV0YWRhdGEiLCJvbkxvYWRlZE1ldGFkYXRhIiwib25Mb2FkZWRNZXRhZGF0YUNhcHR1cmUiLCJsb2FkU3RhcnQiLCJvbkxvYWRTdGFydCIsIm9uTG9hZFN0YXJ0Q2FwdHVyZSIsIm1vdXNlTW92ZSIsIm1vdXNlT3V0Iiwib25Nb3VzZU91dCIsIm9uTW91c2VPdXRDYXB0dXJlIiwibW91c2VPdmVyIiwib25Nb3VzZU92ZXIiLCJvbk1vdXNlT3ZlckNhcHR1cmUiLCJtb3VzZVVwIiwicGFzdGUiLCJvblBhc3RlIiwib25QYXN0ZUNhcHR1cmUiLCJwYXVzZSIsIm9uUGF1c2UiLCJvblBhdXNlQ2FwdHVyZSIsInBsYXkiLCJvblBsYXkiLCJvblBsYXlDYXB0dXJlIiwicGxheWluZyIsIm9uUGxheWluZyIsIm9uUGxheWluZ0NhcHR1cmUiLCJwcm9ncmVzcyIsIm9uUHJvZ3Jlc3MiLCJvblByb2dyZXNzQ2FwdHVyZSIsInJhdGVDaGFuZ2UiLCJvblJhdGVDaGFuZ2UiLCJvblJhdGVDaGFuZ2VDYXB0dXJlIiwib25SZXNldCIsIm9uUmVzZXRDYXB0dXJlIiwic2Nyb2xsIiwib25TY3JvbGwiLCJvblNjcm9sbENhcHR1cmUiLCJzZWVrZWQiLCJvblNlZWtlZCIsIm9uU2Vla2VkQ2FwdHVyZSIsInNlZWtpbmciLCJvblNlZWtpbmciLCJvblNlZWtpbmdDYXB0dXJlIiwic3RhbGxlZCIsIm9uU3RhbGxlZCIsIm9uU3RhbGxlZENhcHR1cmUiLCJvblN1Ym1pdCIsIm9uU3VibWl0Q2FwdHVyZSIsInN1c3BlbmQiLCJvblN1c3BlbmQiLCJvblN1c3BlbmRDYXB0dXJlIiwidGltZVVwZGF0ZSIsIm9uVGltZVVwZGF0ZSIsIm9uVGltZVVwZGF0ZUNhcHR1cmUiLCJ0b3VjaENhbmNlbCIsIm9uVG91Y2hDYW5jZWwiLCJvblRvdWNoQ2FuY2VsQ2FwdHVyZSIsInRvdWNoRW5kIiwib25Ub3VjaEVuZCIsIm9uVG91Y2hFbmRDYXB0dXJlIiwidG91Y2hNb3ZlIiwib25Ub3VjaE1vdmUiLCJvblRvdWNoTW92ZUNhcHR1cmUiLCJ0b3VjaFN0YXJ0Iiwib25Ub3VjaFN0YXJ0Iiwib25Ub3VjaFN0YXJ0Q2FwdHVyZSIsInZvbHVtZUNoYW5nZSIsIm9uVm9sdW1lQ2hhbmdlIiwib25Wb2x1bWVDaGFuZ2VDYXB0dXJlIiwid2FpdGluZyIsIm9uV2FpdGluZyIsIm9uV2FpdGluZ0NhcHR1cmUiLCJ3aGVlbCIsIm9uV2hlZWwiLCJvbldoZWVsQ2FwdHVyZSIsInRvcExldmVsRXZlbnRzVG9EaXNwYXRjaENvbmZpZyIsIk9OX0NMSUNLX0tFWSIsIm9uQ2xpY2tMaXN0ZW5lcnMiLCJFdmVudENvbnN0cnVjdG9yIiwiQ2xpcGJvYXJkRXZlbnRJbnRlcmZhY2UiLCJjbGlwYm9hcmREYXRhIiwiRm9jdXNFdmVudEludGVyZmFjZSIsImdldEV2ZW50S2V5IiwiS2V5Ym9hcmRFdmVudEludGVyZmFjZSIsInJlcGVhdCIsImxvY2FsZSIsImNoYXJDb2RlIiwibm9ybWFsaXplS2V5IiwidHJhbnNsYXRlVG9LZXkiLCJFc2MiLCJTcGFjZWJhciIsIkxlZnQiLCJVcCIsIlJpZ2h0IiwiRG93biIsIkRlbCIsIldpbiIsIk1lbnUiLCJBcHBzIiwiU2Nyb2xsIiwiTW96UHJpbnRhYmxlS2V5IiwiOCIsIjkiLCIxMiIsIjEzIiwiMTYiLCIxNyIsIjE4IiwiMTkiLCIyMCIsIjI3IiwiMzIiLCIzMyIsIjM0IiwiMzUiLCIzNiIsIjM3IiwiMzgiLCIzOSIsIjQwIiwiNDUiLCI0NiIsIjExMiIsIjExMyIsIjExNCIsIjExNSIsIjExNiIsIjExNyIsIjExOCIsIjExOSIsIjEyMCIsIjEyMSIsIjEyMiIsIjEyMyIsIjE0NCIsIjE0NSIsIjIyNCIsIkRyYWdFdmVudEludGVyZmFjZSIsImRhdGFUcmFuc2ZlciIsIlRvdWNoRXZlbnRJbnRlcmZhY2UiLCJ0b3VjaGVzIiwidGFyZ2V0VG91Y2hlcyIsImNoYW5nZWRUb3VjaGVzIiwiV2hlZWxFdmVudEludGVyZmFjZSIsImRlbHRhWCIsIndoZWVsRGVsdGFYIiwiZGVsdGFZIiwid2hlZWxEZWx0YVkiLCJ3aGVlbERlbHRhIiwiZGVsdGFaIiwiZGVsdGFNb2RlIiwiTlMiLCJ4bGluayIsInhtbCIsImNsaXBQYXRoIiwiY3giLCJjeSIsImR4IiwiZHkiLCJmaWxsIiwiZngiLCJmeSIsImdyYWRpZW50VHJhbnNmb3JtIiwiZ3JhZGllbnRVbml0cyIsIm1hcmtlckVuZCIsIm1hcmtlck1pZCIsIm1hcmtlclN0YXJ0IiwicGF0dGVybkNvbnRlbnRVbml0cyIsInBhdHRlcm5Vbml0cyIsInBvaW50cyIsInByZXNlcnZlQXNwZWN0UmF0aW8iLCJyIiwicngiLCJyeSIsInNwcmVhZE1ldGhvZCIsInN0b3BDb2xvciIsInN0cm9rZSIsInN0cm9rZURhc2hhcnJheSIsInN0cm9rZUxpbmVjYXAiLCJ0ZXh0QW5jaG9yIiwidHJhbnNmb3JtIiwidmlld0JveCIsIngxIiwieDIiLCJ4bGlua0FjdHVhdGUiLCJ4bGlua0FyY3JvbGUiLCJ4bGlua0hyZWYiLCJ4bGlua1JvbGUiLCJ4bGlua1Nob3ciLCJ4bGlua1RpdGxlIiwieGxpbmtUeXBlIiwieG1sQmFzZSIsInhtbExhbmciLCJ4bWxTcGFjZSIsInkxIiwieTIiLCJyb3VuZEZsb2F0IiwiZmxvb3IiLCJhZGRWYWx1ZSIsIlJlYWN0RGVmYXVsdFBlcmZBbmFseXNpcyIsInBlcmZvcm1hbmNlTm93IiwiX2FsbE1lYXN1cmVtZW50cyIsIl9tb3VudFN0YWNrIiwiX2luamVjdGVkIiwiZ2V0TGFzdE1lYXN1cmVtZW50cyIsInByaW50RXhjbHVzaXZlIiwibWVhc3VyZW1lbnRzIiwiZ2V0RXhjbHVzaXZlU3VtbWFyeSIsInRhYmxlIiwiQ29tcG9uZW50IGNsYXNzIG5hbWUiLCJUb3RhbCBpbmNsdXNpdmUgdGltZSAobXMpIiwiaW5jbHVzaXZlIiwiRXhjbHVzaXZlIG1vdW50IHRpbWUgKG1zKSIsImV4Y2x1c2l2ZSIsIkV4Y2x1c2l2ZSByZW5kZXIgdGltZSAobXMpIiwiTW91bnQgdGltZSBwZXIgaW5zdGFuY2UgKG1zKSIsIlJlbmRlciB0aW1lIHBlciBpbnN0YW5jZSAobXMpIiwiSW5zdGFuY2VzIiwicHJpbnRJbmNsdXNpdmUiLCJnZXRJbmNsdXNpdmVTdW1tYXJ5IiwiT3duZXIgPiBjb21wb25lbnQiLCJJbmNsdXNpdmUgdGltZSAobXMpIiwibG9nIiwiZ2V0VG90YWxUaW1lIiwidG9GaXhlZCIsImdldE1lYXN1cmVtZW50c1N1bW1hcnlNYXAiLCJXYXN0ZWQgdGltZSAobXMpIiwicHJpbnRXYXN0ZWQiLCJwcmludERPTSIsImdldERPTVN1bW1hcnkiLCJfcmVjb3JkV3JpdGUiLCJ0b3RhbFRpbWUiLCJ3cml0ZXMiLCJtb2R1bGVOYW1lIiwicnYiLCJjb3VudHMiLCJkaXNwbGF5TmFtZXMiLCJjcmVhdGVkIiwibW91bnRJRCIsIndyaXRlQXJncyIsImlzUmVuZGVyIiwiaXNNb3VudCIsIm1vdW50U3RhY2siLCJzdWJNb3VudFRpbWUiLCJtZWFzdXJlbWVudCIsIml0ZW1zIiwiRE9NX09QRVJBVElPTl9UWVBFUyIsImNhbmRpZGF0ZXMiLCJhbGxJRHMiLCJET05UX0NBUkVfVEhSRVNIT0xEIiwib25seUNsZWFuIiwiaW5jbHVzaXZlS2V5IiwiY2xlYW5Db21wb25lbnRzIiwiZ2V0VW5jaGFuZ2VkQ29tcG9uZW50cyIsImRpcnR5TGVhZklEcyIsImlzRGlydHkiLCJyZXBsYWNlTm9kZVdpdGhNYXJrdXAiLCJwZXJmb3JtYW5jZSIsIm1zUGVyZm9ybWFuY2UiLCJ3ZWJraXRQZXJmb3JtYW5jZSIsIlJlYWN0U2VydmVyUmVuZGVyaW5nIiwiUmVhY3RTZXJ2ZXJCYXRjaGluZ1N0cmF0ZWd5IiwiUmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvbiIsIlJlYWN0RE9NRmFjdG9yaWVzIiwiUmVhY3RFbGVtZW50VmFsaWRhdG9yIiwib25seUNoaWxkIiwiQ2hpbGRyZW4iLCJvbmx5IiwiUHJvcFR5cGVzIiwiY3JlYXRlTWl4aW4iLCJET00iLCJfX3NwcmVhZCIsImNyZWF0ZURPTUZhY3RvcnkiLCJtYXBPYmplY3QiLCJhYmJyIiwiYWRkcmVzcyIsImFydGljbGUiLCJhc2lkZSIsImF1ZGlvIiwiYmRpIiwiYmRvIiwiYmlnIiwiYmxvY2txdW90ZSIsImNhbnZhcyIsImNpdGUiLCJjb2RlIiwiZGF0YWxpc3QiLCJkZCIsImRlbCIsImRldGFpbHMiLCJkZm4iLCJkaWFsb2ciLCJkaXYiLCJkbCIsImR0IiwiZW0iLCJmaWVsZHNldCIsImZpZ2NhcHRpb24iLCJmaWd1cmUiLCJmb290ZXIiLCJoMSIsImgyIiwiaDMiLCJoNCIsImg1IiwiaDYiLCJoZWFkIiwiaGVhZGVyIiwiaGdyb3VwIiwiaWZyYW1lIiwiaW5zIiwia2JkIiwibGkiLCJtYWluIiwibWFyayIsIm1lbnUiLCJtZXRlciIsIm5hdiIsIm5vc2NyaXB0Iiwib2wiLCJvdXRwdXQiLCJwaWN0dXJlIiwicSIsInJwIiwicnQiLCJydWJ5IiwicyIsInNhbXAiLCJzY3JpcHQiLCJzZWN0aW9uIiwic21hbGwiLCJzdHJvbmciLCJzdWIiLCJzdXAiLCJ1IiwidWwiLCJ2YXIiLCJ2aWRlbyIsImNpcmNsZSIsImRlZnMiLCJlbGxpcHNlIiwiZyIsImxpbmUiLCJsaW5lYXJHcmFkaWVudCIsIm1hc2siLCJwYXRoIiwicG9seWdvbiIsInBvbHlsaW5lIiwicmFkaWFsR3JhZGllbnQiLCJyZWN0Iiwic3ZnIiwidHNwYW4iLCJ2YWxpZGF0ZUV4cGxpY2l0S2V5IiwicGFyZW50VHlwZSIsImFkZGVuZGEiLCJnZXRBZGRlbmRhRm9yS2V5VXNlIiwicGFyZW50T3JPd25lciIsIm1lc3NhZ2VUeXBlIiwicGFyZW50TmFtZSIsIm1lbW9pemVyIiwib3duZXJIYXNLZXlVc2VXYXJuaW5nIiwidmFsaWRhdGVDaGlsZEtleXMiLCJ2YWxpZGF0ZVByb3BUeXBlcyIsInZhbGlkVHlwZSIsInZhbGlkYXRlZEZhY3RvcnkiLCJuZXdNb2R1bGUiLCJuZXdQYWNrYWdlIiwiY3R4IiwiZm4iLCJ3YXJuZWQiLCJuZXdGbiIsIl9jbGFzc0NhbGxDaGVjayIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIiwiUmVmZXJlbmNlRXJyb3IiLCJfaW5oZXJpdHMiLCJzdWJDbGFzcyIsInN1cGVyQ2xhc3MiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIl9jcmVhdGVDbGFzcyIsImRlc2NyaXB0b3IiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJfYm9keSIsIl9ib2R5MiIsIl91dGlscyIsIl9yZWNpcGVTdG9yZSIsIl9yZWNpcGVTdG9yZTIiLCJfYWN0aW9ucyIsIl9hY3Rpb25zMiIsIlNpdGVDb250YWluZXIiLCJfQ29tcG9uZW50IiwiZ2V0UHJvdG90eXBlT2YiLCJvcGVuQ29udGVudCIsImFjdGl2ZSIsInNPcGVuQ29udGVudCIsInNPcGVuTGlzdCIsInNVc2VyIiwidXNlciIsInNBdXRoZW50aWNhdGUiLCJhdXRoZW50aWNhdGUiLCJzTm90aWZ5Iiwibm90aWZ5IiwiYU5ld1JlY2lwZSIsIm5ld1JlY2lwZSIsImFTYXZlUmVjaXBlIiwic2F2ZVJlY2lwZSIsImFHZXRSZWNpcGUiLCJnZXRSZWNpcGUiLCJhQ2xvc2VSZWNpcGUiLCJjbG9zZVJlY2lwZSIsImFBZGRJbmdyZWRpZW50IiwiYWRkSW5ncmVkaWVudCIsImFBZGRTdGVwIiwiYWRkU3RlcCIsImFVcGRhdGVWYWx1ZSIsInVwZGF0ZVZhbHVlIiwiYU5vdGlmeSIsImFBdXRoZW50aWNhdGUiLCJhT3BlbkNvbnRlbnQiLCJhU2VydmVyUmVxdWVzdCIsInNlcnZlclJlcXVlc3QiLCJhVXBkYXRlVXNlclN0YXR1cyIsInVwZGF0ZVVzZXJTdGF0dXMiLCJhUmVnaXN0ZXIiLCJyZWdpc3RlciIsImFMb2dpbiIsImxvZ2luIiwiYUxvZ291dCIsImxvZ291dCIsImFVcGRhdGVQYXNzd29yZCIsInVwZGF0ZVBhc3N3b3JkIiwiZ2V0U3RhdGUiLCJDb250YWluZXIiLCJfaGVhZGVyIiwiX2hlYWRlcjIiLCJfbmF2aWdhdGlvbiIsIl9uYXZpZ2F0aW9uMiIsIl9yZWNpcGUiLCJfcmVjaXBlMiIsIl9ob21lIiwiX2hvbWUyIiwiX3VzZXJTZXR0aW5ncyIsIl91c2VyU2V0dGluZ3MyIiwiX2F1dGhlbnRpY2F0aW9uIiwiX2F1dGhlbnRpY2F0aW9uMiIsIl9ub3RpZnkiLCJfbm90aWZ5MiIsIkJvZHkiLCJhcHBBdXRoZW50aWNhdGUiLCJhcHBCb2R5Iiwic2hvd0xvZ2luIiwic2hvd1JlZ2lzdGVyIiwiaGFuZGxlTG9hZCIsImNsYXNzTGlzdCIsImFkZCIsInNIb21lIiwicmVjaXBlIiwiX3NlYXJjaCIsIl9zZWFyY2gyIiwiSGVhZGVyIiwidXNlck1lbnUiLCJoYW5kbGVEaXNtaXNzT25DbGljayIsImN1cnJlbnROb2RlIiwiaXNGcm9tTWVudSIsImhhbmRsZVVzZXJNZW51Q2xpY2siLCJoYW5kbGVBdXRoZW50aWNhdGUiLCJoYW5kbGVMb2dvdXQiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsIlNlYXJjaCIsImZ1bGxMaXN0IiwiZmlsdGVyZWRMaXN0Iiwic2VhcmNoVGVybXMiLCJhY3RpdmVJbmRleCIsImdldFJlZ0V4T2JqIiwic2VhcmNoUmVnRXgiLCJyZXR1cm5PYmoiLCJnZXRIaWdobGlnaHRlZFRpdGxlIiwidGl0bGVIVE1MIiwid2hlcmVUb1N0YXJ0IiwidGVybSIsInJlZ0V4T2JqIiwicmVwbGFjZW1lbnQiLCJiZWZvcmVTdHJpbmciLCJhZnRlclN0cmluZyIsImdldFJlY2lwZUhUTUwiLCJyb3dDbGFzc2VzIiwiZGF0YS1pZCIsImRhdGVNb2RpZmllZCIsInNlYXJjaFJlZ0V4U3RyaW5nIiwiY3VycmVudFJlY2lwZSIsIm1lIiwicmVzcG9uc2UiLCJwb3MiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJtYXhIZWlnaHQiLCJpbm5lckhlaWdodCIsImtleXVwIiwiZGF0YXNldCIsIm5ld0luZGV4IiwiX3N0ZXBzIiwiX3N0ZXBzMiIsIl9pbmdyZWRpZW50cyIsIl9pbmdyZWRpZW50czIiLCJfcmVjaXBlSGVhZGVyIiwiX3JlY2lwZUhlYWRlcjIiLCJSZWNpcGUiLCJlZGl0YWJsZSIsImVkaXQiLCJzYXZlIiwiY2FuY2VsIiwiZXJyb3JzIiwic2VydmluZ3MiLCJpbmdyZWRpZW50cyIsInF1YW50aXR5RmxhZ2dlZCIsInVuaXRGbGFnZ2VkIiwibmFtZUZsYWdnZWQiLCJpbmdyZWRpZW50IiwicXVhbnRpdHkiLCJ1bml0cyIsImluZ3JlZGllbnROYW1lIiwic3RlcHMiLCJtZXNzYWdlSW5uZXIiLCJtc2ciLCJTdGVwcyIsInJlbmRlckRpc3BsYXkiLCJyZW5kZXJGb3JtIiwic3RlcENsYXNzZXMiLCJkYXRhLWluZGV4IiwidXBkYXRlU3RlcCIsImRlbGV0ZVN0ZXAiLCJuZXdTdGVwcyIsIml0ZW1Ub0NoZWNrIiwiaXRlbVRvUmVtb3ZlIiwiYWRkTGluayIsImxvY2FscyIsIm1lZGlhUXVlcnkiLCJhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzIiwiYWRkU3R5bGVzVG9Eb20iLCJkb21TdHlsZSIsInN0eWxlc0luRG9tIiwicGFydHMiLCJhZGRTdHlsZSIsImxpc3RUb1N0eWxlcyIsIm5ld1N0eWxlcyIsImNzcyIsInNvdXJjZU1hcCIsInBhcnQiLCJpbnNlcnRTdHlsZUVsZW1lbnQiLCJzdHlsZUVsZW1lbnQiLCJnZXRIZWFkRWxlbWVudCIsImxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wIiwic3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3AiLCJpbnNlcnRBdCIsInJlbW92ZVN0eWxlRWxlbWVudCIsImlkeCIsImNyZWF0ZVN0eWxlRWxlbWVudCIsImNyZWF0ZUxpbmtFbGVtZW50IiwibGlua0VsZW1lbnQiLCJzaW5nbGV0b24iLCJzdHlsZUluZGV4Iiwic2luZ2xldG9uQ291bnRlciIsInNpbmdsZXRvbkVsZW1lbnQiLCJhcHBseVRvU2luZ2xldG9uVGFnIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwicmV2b2tlT2JqZWN0VVJMIiwiQmxvYiIsImJ0b2EiLCJ1cGRhdGVMaW5rIiwiYXBwbHlUb1RhZyIsIm5ld09iaiIsInN0eWxlU2hlZXQiLCJjc3NUZXh0IiwicmVwbGFjZVRleHQiLCJjc3NOb2RlIiwiY3JlYXRlVGV4dE5vZGUiLCJ1bmVzY2FwZSIsImVuY29kZVVSSUNvbXBvbmVudCIsImJsb2IiLCJvbGRTcmMiLCJtZW1vaXplIiwibWVtbyIsImlzT2xkSUUiLCJuZXdMaXN0IiwibWF5UmVtb3ZlIiwidGV4dFN0b3JlIiwiZmlsdGVyIiwiX2F1dG9jb21wbGV0ZSIsIl9hdXRvY29tcGxldGUyIiwiSW5ncmVkaWVudHMiLCJzYXZlSW5ncmVkaWVudHMiLCJpbmdLZXkiLCJjdXJyZW50RWxlbWVudCIsInRlbXBJbmdyZWRpZW50c0xpc3QiLCJjdXJyZW50SW5ncmVkaWVudHMiLCJ1cGRhdGVRdWFudGl0eSIsInVwZGF0ZVVuaXQiLCJ1cGRhdGVJbmdyZWRpZW50TmFtZSIsImRlbGV0ZUluZ3JlZGllbnQiLCJpbmciLCJpbmdyZWRpZW50TGlzdCIsInF1YW50aXR5Q2xhc3NlcyIsInVuaXRzQ2xhc3NlcyIsImluZ3JlZGllbnRDbGFzc2VzIiwiZGF0YS1pbmcta2V5IiwiY3VzdG9tQ2xhc3MiLCJBdXRvQ29tcGxldGUiLCJnZXRJdGVtSFRNTCIsIml0ZW1IVE1MIiwicmVzaXplIiwiY29tcG9uZW50UG9zIiwiY3VycmVudEl0ZW0iLCJpbm5lclRleHQiLCJpdGVtQ2xhc3MiLCJfY3JvcHBlciIsIl9jcm9wcGVyMiIsIl90aW1lIiwiX3RpbWUyIiwiUmVjaXBlSGVhZGVyIiwidXBkYXRlVGl0bGUiLCJ1cGRhdGVQcmVwVGltZSIsInVwZGF0ZUNvb2tUaW1lIiwidXBkYXRlU2VydmluZ3MiLCJhZnRlckltYWdlQ3JvcCIsImltYWdlVXJsIiwiaGFuZGxlUHVibGljQ2hhbmdlIiwiVVRDIiwiaW5mb0NsYXNzZXMiLCJwdWJsaWMiLCJwdWJsaWNOb3RlIiwidGl0bGVDbGFzc2VzIiwidW5pcXVlSWQiLCJnZXRUaW1lIiwidXNlcklkIiwiY3JlYXRvciIsInNlcnZpbmdzQ2xhc3NlcyIsInByZXBUaW1lIiwiY29va1RpbWUiLCJ0b0RhdGVTdHJpbmciLCJvbkFmdGVyQ3JvcCIsIkNyb3BwZXIiLCJkcmFnZ2luZyIsInpvb21IZWxkIiwiem9vbVRpbWVyIiwiem9vbWluZ0ludGVydmFsIiwiem9vbURpcmVjdGlvbiIsIm1vdXNlIiwicHJldmlldyIsImN1cnJlbnRVcmwiLCJnZXRDb250ZXh0IiwiY2xlYXJSZWN0IiwiYWRkSW1hZ2VUb0NhbnZhcyIsImlzRGF0YVVSTCIsImZpdEltYWdlVG9DYW52YXMiLCJzY2FsZWRIZWlnaHQiLCJzY2FsZWRXaWR0aCIsImNhbnZhc0FzcGVjdFJhdGlvIiwiaW1hZ2VBc3BlY3RSYXRpbyIsInNjYWxlUmF0aW8iLCJwcmVwYXJlSW1hZ2UiLCJpbWFnZVVyaSIsIkltYWdlIiwib25sb2FkIiwic2NhbGVkSW1hZ2UiLCJ0b0RhdGFVUkwiLCJwcmV2ZW50U2VsZWN0aW9uIiwiYm91bmRlZENvb3JkcyIsIm5ld1giLCJuZXdZIiwiZHciLCJyaWdodEVkZ2UiLCJkaCIsImJvdHRvbUVkZ2UiLCJnbG9iYWxDb21wb3NpdGVPcGVyYXRpb24iLCJkcmF3SW1hZ2UiLCJyZXN0b3JlIiwiaGFuZGxlQ2xvc2UiLCJoYW5kbGVNb3VzZU1vdmUiLCJoYW5kbGVNb3VzZVVwIiwiaGFuZGxlTW91c2VEb3duIiwibW91c2VYIiwibW91c2VZIiwiaW1hZ2VYIiwiaW1hZ2VZIiwibmV3SW1hZ2UiLCJib3VuZGVkIiwiaGFuZGxlVXBsb2FkIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsImFwcGVuZCIsImZpbGVzIiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwicGFyc2UiLCJyZXNwb25zZVRleHQiLCJsb2FkaW5nIiwic2VuZCIsImhhbmRsZUNyb3AiLCJoYW5kbGVab29tTW91c2VEb3duIiwidGltZXIiLCJpbnRlcnZhbCIsInNldEludGVydmFsIiwiaGFuZGxlWm9vbSIsImhhbmRsZVpvb21Nb3VzZVVwIiwiY2xlYXJJbnRlcnZhbCIsIm5ld1pvb20iLCJmaWxlSWQiLCJUaW1lIiwicGFyc2VkIiwic2VsZWN0ZWRIb3VyIiwic2VsZWN0ZWRNaW51dGUiLCJob3VyTGlzdCIsIm1pbnV0ZUxpc3QiLCJzY3JvbGxJbnRvVmlldyIsInNlbGVjdG9yIiwicmVzdWx0c1BvcyIsImJvdHRvbSIsInNjcm9sbERpZmYiLCJzY3JvbGxUbyIsImR1cmF0aW9uIiwicGVyVGljayIsImRpc21pc3MiLCJza2lwIiwic2VsZWN0TWludXRlIiwic2VsZWN0SG91ciIsImhvdXJzIiwibWludXRlcyIsIl9hY3Rpb25UeXBlcyIsIl9hY3Rpb25UeXBlczIiLCJfZGlzcGF0Y2hlciIsIl9kaXNwYXRjaGVyMiIsIkFjdGlvbnMiLCJkaXNwYXRjaCIsIlNBVkVfUkVDSVBFIiwiR0VUX1JFQ0lQRSIsIk5FV19SRUNJUEUiLCJDTE9TRV9SRUNJUEUiLCJBRERfSU5HUkVESUVOVCIsIkFERF9TVEVQIiwiREVMRVRFX1NURVAiLCJERUxFVEVfSU5HUkVESUVOVCIsIlVQREFURV9WQUxVRSIsIk9QRU5fQ09OVEVOVCIsIlNFUlZFUl9SRVFVRVNUIiwiQVVUSEVOVElDQVRFIiwidXNlcm5hbWUiLCJSRUdJU1RFUiIsInN0YXR1cyIsIlVQREFURV9VU0VSX1NUQVRVUyIsIkxPR0lOIiwiTE9HT1VUIiwib2xkUGFzc3dvcmQiLCJuZXdQYXNzd29yZCIsIlVQREFURV9QQVNTV09SRCIsIk5PVElGWSIsIkFjdGlvblR5cGVzIiwiX2ZsdXgiLCJEaXNwYXRjaGVyIiwiX3ByZWZpeCIsIl9pc0Rpc3BhdGNoaW5nIiwiX2lzSGFuZGxlZCIsIl9pc1BlbmRpbmciLCJfbGFzdElEIiwidW5yZWdpc3RlciIsIndhaXRGb3IiLCJpZHMiLCJfaW52b2tlQ2FsbGJhY2siLCJwYXlsb2FkIiwiX3N0YXJ0RGlzcGF0Y2hpbmciLCJfc3RvcERpc3BhdGNoaW5nIiwiaXNEaXNwYXRjaGluZyIsIl9wZW5kaW5nUGF5bG9hZCIsInZhbGlkYXRlRm9ybWF0IiwiTmF2aWdhdGlvbiIsInRvZ2dsZSIsIl9oaWRlIiwiX2dldElkIiwiaGFuZGxlQ2xpY2siLCJjbGFzc2VzIiwiSG9tZSIsImhvbWUiLCJyZWNlbnRGZWVkIiwiVXNlclNldHRpbmdzIiwiX2dldFVzZXJJZCIsInVzZXJpZCIsImRlY2xpbmUiLCJhZG1pbiIsInNldHRpbmciLCJyb2xlVHlwZSIsInJlcXVlc3RzIiwiZGF0YS11c2VyaWQiLCJ1c2VyTmFtZSIsIkF1dGhlbnRpY2F0aW9uIiwiYXBwQXV0aGVudGljYXRlRm9ybSIsImVtYWlsQ29uZmlybSIsImNvbmZpcm1QYXNzd29yZCIsImhhbmRsZUtleVVwIiwidmFsaWRhdGVFbWFpbCIsInJlIiwiaGFuZGxlSGlkZSIsImZpZWxkcyIsImZpZWxkIiwiaGFuZGxlU2hvd1JlZ2lzdGVyIiwiaGFuZGxlU2hvd0xvZ2luIiwiaGFuZGxlTG9naW4iLCJhdXRoIiwiaGFuZGxlUmVzZXQiLCJoYW5kbGVSZWdpc3RlciIsIl90eXBlb2YiLCJOb3RpZnkiLCJvdXRlckNsYXNzZXMiLCJjb250ZW50Q2xhc3NlcyIsIlJlZHVjZVN0b3JlIiwiU3RvcmUiLCJCYXNlIiwiZW5mb3JjZUludGVyZmFjZSIsInJlYWxPcHRpb25zIiwiX2V4dGVuZHMiLCJERUZBVUxUX09QVElPTlMiLCJtYXliZVByb3BzIiwibWF5YmVDb250ZXh0Iiwid2l0aFByb3BzIiwid2l0aENvbnRleHQiLCJjYWxjdWxhdGVTdGF0ZSIsImdldFN0b3JlcyIsIkNvbnRhaW5lckNsYXNzIiwiX0Jhc2UiLCJfdGhpcyIsIl9mbHV4Q29udGFpbmVyU3Vic2NyaXB0aW9ucyIsIkZsdXhDb250YWluZXJTdWJzY3JpcHRpb25zIiwic2V0U3RvcmVzIiwiY3VycmVudFByb3BzIiwiY2FsY3VsYXRlZFN0YXRlIiwicHVyZSIsImNyZWF0ZVB1cmVDb21wb25lbnQiLCJCYXNlQ29tcG9uZW50IiwiUHVyZUNvbXBvbmVudCIsIl9CYXNlQ29tcG9uZW50IiwibyIsImNyZWF0ZUZ1bmN0aW9uYWwiLCJ2aWV3Rm4iLCJfZ2V0U3RvcmVzIiwiX2NhbGN1bGF0ZVN0YXRlIiwiRnVuY3Rpb25hbENvbnRhaW5lciIsInZpZXdGbk5hbWUiLCJzaGFsbG93QXJyYXlFcXVhbCIsIkZsdXhTdG9yZUdyb3VwIiwic3RvcmVzIiwiX3N0b3JlcyIsIl9yZXNldFRva2VucyIsIl9yZXNldFN0b3JlR3JvdXAiLCJjaGFuZ2VkIiwiY2hhbmdlZFN0b3JlcyIsIl90b2tlbnMiLCJzdG9yZSIsInNldENoYW5nZWQiLCJjYWxsQ2FsbGJhY2tzIiwiX3N0b3JlR3JvdXAiLCJfcmVzZXRDYWxsYmFja3MiLCJfcmVzZXRTdG9yZXMiLCJ0b2tlbiIsIl9nZXRVbmlmb3JtRGlzcGF0Y2hlciIsImRpc3BhdGNoZXIiLCJnZXREaXNwYXRjaGVyIiwiX2l0ZXJhdG9yIiwiX2lzQXJyYXkiLCJfaSIsIl9yZWYiLCJzdG9yZVRva2VucyIsImdldERpc3BhdGNoVG9rZW4iLCJfZGlzcGF0Y2hUb2tlbiIsIkZsdXhNaXhpbkxlZ2FjeSIsIl9mbHV4TWl4aW5TdWJzY3JpcHRpb25zIiwiX2ZsdXhNaXhpblN0b3JlR3JvdXAiLCJzdWJzY3JpcHRpb24iLCJGbHV4U3RvcmUiLCJhYnN0cmFjdE1ldGhvZCIsIkZsdXhSZWR1Y2VTdG9yZSIsIl9GbHV4U3RvcmUiLCJfc3RhdGUiLCJyZWR1Y2UiLCJhcmVFcXVhbCIsIl9faW52b2tlT25EaXNwYXRjaCIsIl9fY2hhbmdlZCIsInN0YXJ0aW5nU3RhdGUiLCJlbmRpbmdTdGF0ZSIsIl9fZW1pdENoYW5nZSIsIl9fZW1pdHRlciIsIl9fY2hhbmdlRXZlbnQiLCJfcmVxdWlyZSIsIl9fY2xhc3NOYW1lIiwiX19kaXNwYXRjaGVyIiwiaGFzQ2hhbmdlZCIsIl9fb25EaXNwYXRjaCIsImZiZW1pdHRlciIsIkVtaXR0ZXJTdWJzY3JpcHRpb24iLCJFdmVudFN1YnNjcmlwdGlvblZlbmRvciIsIkJhc2VFdmVudEVtaXR0ZXIiLCJfc3Vic2NyaWJlciIsIl9jdXJyZW50U3Vic2NyaXB0aW9uIiwiYWRkU3Vic2NyaXB0aW9uIiwiZW1pdHRlciIsInJlbW92ZUN1cnJlbnRMaXN0ZW5lciIsInJlbW92ZUFsbFN1YnNjcmlwdGlvbnMiLCJyZW1vdmVTdWJzY3JpcHRpb24iLCJzdWJzY3JpcHRpb25zIiwiZ2V0U3Vic2NyaXB0aW9uc0ZvclR5cGUiLCJfX2VtaXRUb1N1YnNjcmlwdGlvbiIsIkV2ZW50U3Vic2NyaXB0aW9uIiwiX0V2ZW50U3Vic2NyaXB0aW9uIiwic3Vic2NyaWJlciIsIl9zdWJzY3JpcHRpb25zRm9yVHlwZSIsInN1YnNjcmlwdGlvbnNGb3JUeXBlIiwiX2ltbXV0YWJsZSIsIl9pbW11dGFibGUyIiwiX2pzTWQiLCJfanNNZDIiLCJSZWNpcGVTdG9yZSIsIl9SZWR1Y2VTdG9yZSIsInVzZXJTZXR0aW5ncyIsIl9wcm9jZXNzQWN0aW9uIiwic2V0UmVxdWVzdEhlYWRlciIsIm5ld0l0ZW0iLCJpc09wZW4iLCJjdXJyU3RhdGUiLCJmcm9tSlMiLCJ0b0pTIiwib3JpZ2luIiwiX29wZW5Db250ZW50IiwiX3Byb2Nlc3NDb250ZW50IiwiaXNBY3RpdmUiLCJfdXBkYXRlQWN0aXZlUmVjaXBlIiwidW5pdCIsImdsb2JhbCIsImN0b3IiLCJJdGVyYWJsZSIsImlzSXRlcmFibGUiLCJTZXEiLCJLZXllZEl0ZXJhYmxlIiwiaXNLZXllZCIsIktleWVkU2VxIiwiSW5kZXhlZEl0ZXJhYmxlIiwiaXNJbmRleGVkIiwiSW5kZXhlZFNlcSIsIlNldEl0ZXJhYmxlIiwiaXNBc3NvY2lhdGl2ZSIsIlNldFNlcSIsIklTX0lURVJBQkxFX1NFTlRJTkVMIiwibWF5YmVLZXllZCIsIklTX0tFWUVEX1NFTlRJTkVMIiwibWF5YmVJbmRleGVkIiwiSVNfSU5ERVhFRF9TRU5USU5FTCIsIm1heWJlQXNzb2NpYXRpdmUiLCJpc09yZGVyZWQiLCJtYXliZU9yZGVyZWQiLCJJU19PUkRFUkVEX1NFTlRJTkVMIiwiTWFrZVJlZiIsIlNldFJlZiIsIk93bmVySUQiLCJhcnJDb3B5IiwibmV3QXJyIiwiZW5zdXJlU2l6ZSIsIml0ZXIiLCJfX2l0ZXJhdGUiLCJyZXR1cm5UcnVlIiwid3JhcEluZGV4IiwidWludDMySW5kZXgiLCJOYU4iLCJ3aG9sZVNsaWNlIiwiYmVnaW4iLCJyZXNvbHZlQmVnaW4iLCJyZXNvbHZlSW5kZXgiLCJyZXNvbHZlRW5kIiwiZGVmYXVsdEluZGV4IiwiSXRlcmF0b3IiLCJpdGVyYXRvclZhbHVlIiwidiIsIml0ZXJhdG9yUmVzdWx0IiwiaXRlcmF0b3JEb25lIiwiaGFzSXRlcmF0b3IiLCJpc0l0ZXJhdG9yIiwibWF5YmVJdGVyYXRvciIsImdldEl0ZXJhdG9yIiwiaXRlcmFibGUiLCJSRUFMX0lURVJBVE9SX1NZTUJPTCIsImlzQXJyYXlMaWtlIiwiZW1wdHlTZXF1ZW5jZSIsInRvU2VxIiwic2VxRnJvbVZhbHVlIiwidG9LZXllZFNlcSIsImZyb21FbnRyeVNlcSIsImtleWVkU2VxRnJvbVZhbHVlIiwiZW50cnlTZXEiLCJ0b0luZGV4ZWRTZXEiLCJpbmRleGVkU2VxRnJvbVZhbHVlIiwidG9TZXRTZXEiLCJBcnJheVNlcSIsIl9hcnJheSIsIk9iamVjdFNlcSIsIl9vYmplY3QiLCJfa2V5cyIsIkl0ZXJhYmxlU2VxIiwiX2l0ZXJhYmxlIiwiSXRlcmF0b3JTZXEiLCJfaXRlcmF0b3JDYWNoZSIsImlzU2VxIiwibWF5YmVTZXEiLCJJU19TRVFfU0VOVElORUwiLCJFTVBUWV9TRVEiLCJzZXEiLCJtYXliZUluZGV4ZWRTZXFGcm9tVmFsdWUiLCJzZXFJdGVyYXRlIiwidXNlS2V5cyIsIl9jYWNoZSIsIm1heEluZGV4IiwiX19pdGVyYXRlVW5jYWNoZWQiLCJzZXFJdGVyYXRvciIsIl9faXRlcmF0b3JVbmNhY2hlZCIsImpzb24iLCJjb252ZXJ0ZXIiLCJmcm9tSlNXaXRoIiwiIiwiZnJvbUpTRGVmYXVsdCIsInBhcmVudEpTT04iLCJpc1BsYWluT2JqIiwidG9MaXN0IiwidG9NYXAiLCJ2YWx1ZUEiLCJ2YWx1ZUIiLCJ2YWx1ZU9mIiwiZXF1YWxzIiwiZGVlcEVxdWFsIiwiX19oYXNoIiwibm90QXNzb2NpYXRpdmUiLCJmbGlwcGVkIiwiY2FjaGVSZXN1bHQiLCJhbGxFcXVhbCIsImJTaXplIiwiTk9UX1NFVCIsIlJlcGVhdCIsInRpbWVzIiwiX3ZhbHVlIiwiSW5maW5pdHkiLCJFTVBUWV9SRVBFQVQiLCJSYW5nZSIsImFicyIsIl9zdGFydCIsIl9lbmQiLCJfc3RlcCIsIkVNUFRZX1JBTkdFIiwiQ29sbGVjdGlvbiIsIktleWVkQ29sbGVjdGlvbiIsIkluZGV4ZWRDb2xsZWN0aW9uIiwiU2V0Q29sbGVjdGlvbiIsInNtaSIsImkzMiIsImgiLCJTVFJJTkdfSEFTSF9DQUNIRV9NSU5fU1RSTEVOIiwiY2FjaGVkSGFzaFN0cmluZyIsImhhc2hTdHJpbmciLCJoYXNoQ29kZSIsImhhc2hKU09iaiIsInN0cmluZ0hhc2hDYWNoZSIsIlNUUklOR19IQVNIX0NBQ0hFX1NJWkUiLCJTVFJJTkdfSEFTSF9DQUNIRV9NQVhfU0laRSIsInVzaW5nV2Vha01hcCIsIndlYWtNYXAiLCJVSURfSEFTSF9LRVkiLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsImdldElFTm9kZUhhc2giLCJvYmpIYXNoVUlEIiwiaXNFeHRlbnNpYmxlIiwidW5pcXVlSUQiLCJhc3NlcnROb3RJbmZpbml0ZSIsIk1hcCIsImVtcHR5TWFwIiwiaXNNYXAiLCJ3aXRoTXV0YXRpb25zIiwibWF5YmVNYXAiLCJJU19NQVBfU0VOVElORUwiLCJBcnJheU1hcE5vZGUiLCJvd25lcklEIiwiQml0bWFwSW5kZXhlZE5vZGUiLCJiaXRtYXAiLCJIYXNoQXJyYXlNYXBOb2RlIiwiSGFzaENvbGxpc2lvbk5vZGUiLCJrZXlIYXNoIiwiVmFsdWVOb2RlIiwiTWFwSXRlcmF0b3IiLCJfdHlwZSIsIl9yZXZlcnNlIiwiX3N0YWNrIiwibWFwSXRlcmF0b3JGcmFtZSIsIm1hcEl0ZXJhdG9yVmFsdWUiLCJwcmV2IiwiX19wcmV2IiwibWFrZU1hcCIsIk1hcFByb3RvdHlwZSIsIl9fb3duZXJJRCIsIl9fYWx0ZXJlZCIsIkVNUFRZX01BUCIsInVwZGF0ZU1hcCIsIm5ld1Jvb3QiLCJuZXdTaXplIiwiZGlkQ2hhbmdlU2l6ZSIsIkNIQU5HRV9MRU5HVEgiLCJkaWRBbHRlciIsIkRJRF9BTFRFUiIsInVwZGF0ZU5vZGUiLCJzaGlmdCIsImlzTGVhZk5vZGUiLCJtZXJnZUludG9Ob2RlIiwibmV3Tm9kZSIsImlkeDEiLCJNQVNLIiwiaWR4MiIsIlNISUZUIiwiY3JlYXRlTm9kZXMiLCJwYWNrTm9kZXMiLCJleGNsdWRpbmciLCJwYWNrZWRJSSIsInBhY2tlZE5vZGVzIiwiYml0IiwiZXhwYW5kTm9kZXMiLCJpbmNsdWRpbmciLCJleHBhbmRlZE5vZGVzIiwiU0laRSIsIm1lcmdlSW50b01hcFdpdGgiLCJtZXJnZXIiLCJpdGVyYWJsZXMiLCJpdGVycyIsIm1lcmdlSW50b0NvbGxlY3Rpb25XaXRoIiwiZGVlcE1lcmdlciIsImV4aXN0aW5nIiwibWVyZ2VEZWVwIiwiZGVlcE1lcmdlcldpdGgiLCJtZXJnZURlZXBXaXRoIiwibmV4dFZhbHVlIiwiY29sbGVjdGlvbiIsIm1lcmdlSW50b01hcCIsInVwZGF0ZUluRGVlcE1hcCIsImtleVBhdGhJdGVyIiwibm90U2V0VmFsdWUiLCJpc05vdFNldCIsImV4aXN0aW5nVmFsdWUiLCJuZXdWYWx1ZSIsIm5leHRFeGlzdGluZyIsIm5leHRVcGRhdGVkIiwicG9wQ291bnQiLCJzZXRJbiIsImNhbkVkaXQiLCJuZXdBcnJheSIsInNwbGljZUluIiwibmV3TGVuIiwiYWZ0ZXIiLCJzcGxpY2VPdXQiLCJMaXN0IiwiZW1wdHkiLCJlbXB0eUxpc3QiLCJpc0xpc3QiLCJtYWtlTGlzdCIsIlZOb2RlIiwic2V0U2l6ZSIsIm1heWJlTGlzdCIsIklTX0xJU1RfU0VOVElORUwiLCJpdGVyYXRlTGlzdCIsIml0ZXJhdGVOb2RlT3JMZWFmIiwibGV2ZWwiLCJpdGVyYXRlTGVhZiIsIml0ZXJhdGVOb2RlIiwidGFpbFBvcyIsInRhaWwiLCJyaWdodCIsIkRPTkUiLCJ2YWx1ZXMiLCJfb3JpZ2luIiwiX2NhcGFjaXR5IiwiZ2V0VGFpbE9mZnNldCIsIl90YWlsIiwiX2xldmVsIiwiY2FwYWNpdHkiLCJMaXN0UHJvdG90eXBlIiwiRU1QVFlfTElTVCIsInVwZGF0ZUxpc3QiLCJzZXRMaXN0Qm91bmRzIiwibmV3VGFpbCIsInVwZGF0ZVZOb2RlIiwibm9kZUhhcyIsImxvd2VyTm9kZSIsIm5ld0xvd2VyTm9kZSIsImVkaXRhYmxlVk5vZGUiLCJsaXN0Tm9kZUZvciIsInJhd0luZGV4Iiwib2xkT3JpZ2luIiwib2xkQ2FwYWNpdHkiLCJuZXdPcmlnaW4iLCJuZXdDYXBhY2l0eSIsImNsZWFyIiwibmV3TGV2ZWwiLCJvZmZzZXRTaGlmdCIsIm9sZFRhaWxPZmZzZXQiLCJuZXdUYWlsT2Zmc2V0Iiwib2xkVGFpbCIsInJlbW92ZUFmdGVyIiwicmVtb3ZlQmVmb3JlIiwiYmVnaW5JbmRleCIsIm1lcmdlSW50b0xpc3RXaXRoIiwibWF4U2l6ZSIsIk9yZGVyZWRNYXAiLCJlbXB0eU9yZGVyZWRNYXAiLCJpc09yZGVyZWRNYXAiLCJtYXliZU9yZGVyZWRNYXAiLCJtYWtlT3JkZXJlZE1hcCIsIm9tYXAiLCJfbWFwIiwiX2xpc3QiLCJFTVBUWV9PUkRFUkVEX01BUCIsInVwZGF0ZU9yZGVyZWRNYXAiLCJuZXdNYXAiLCJmbGlwIiwiVG9LZXllZFNlcXVlbmNlIiwiaW5kZXhlZCIsIl9pdGVyIiwiX3VzZUtleXMiLCJUb0luZGV4ZWRTZXF1ZW5jZSIsIlRvU2V0U2VxdWVuY2UiLCJGcm9tRW50cmllc1NlcXVlbmNlIiwiZmxpcEZhY3RvcnkiLCJmbGlwU2VxdWVuY2UiLCJtYWtlU2VxdWVuY2UiLCJyZXZlcnNlZFNlcXVlbmNlIiwiaW5jbHVkZXMiLCJjYWNoZVJlc3VsdFRocm91Z2giLCJ0aGlzJDAiLCJJVEVSQVRFX0VOVFJJRVMiLCJfX2l0ZXJhdG9yIiwiSVRFUkFURV9WQUxVRVMiLCJJVEVSQVRFX0tFWVMiLCJtYXBGYWN0b3J5IiwibWFwcGVyIiwibWFwcGVkU2VxdWVuY2UiLCJyZXZlcnNlRmFjdG9yeSIsImZpbHRlckZhY3RvcnkiLCJwcmVkaWNhdGUiLCJmaWx0ZXJTZXF1ZW5jZSIsIml0ZXJhdGlvbnMiLCJjb3VudEJ5RmFjdG9yeSIsImdyb3VwZXIiLCJncm91cHMiLCJhc011dGFibGUiLCJhc0ltbXV0YWJsZSIsImdyb3VwQnlGYWN0b3J5IiwiaXNLZXllZEl0ZXIiLCJjb2VyY2UiLCJpdGVyYWJsZUNsYXNzIiwicmVpZnkiLCJzbGljZUZhY3RvcnkiLCJvcmlnaW5hbFNpemUiLCJyZXNvbHZlZEJlZ2luIiwicmVzb2x2ZWRFbmQiLCJzbGljZVNpemUiLCJyZXNvbHZlZFNpemUiLCJzbGljZVNlcSIsInNraXBwZWQiLCJpc1NraXBwaW5nIiwidGFrZVdoaWxlRmFjdG9yeSIsInRha2VTZXF1ZW5jZSIsIml0ZXJhdGluZyIsInNraXBXaGlsZUZhY3RvcnkiLCJza2lwU2VxdWVuY2UiLCJza2lwcGluZyIsImNvbmNhdEZhY3RvcnkiLCJpc0tleWVkSXRlcmFibGUiLCJjb25jYXRTZXEiLCJmbGF0dGVuIiwic3VtIiwiZmxhdHRlbkZhY3RvcnkiLCJmbGF0U2VxdWVuY2UiLCJmbGF0RGVlcCIsImN1cnJlbnREZXB0aCIsInN0b3BwZWQiLCJmbGF0TWFwRmFjdG9yeSIsImludGVycG9zZUZhY3RvcnkiLCJzZXBhcmF0b3IiLCJpbnRlcnBvc2VkU2VxdWVuY2UiLCJzb3J0RmFjdG9yeSIsImNvbXBhcmF0b3IiLCJkZWZhdWx0Q29tcGFyYXRvciIsIm1heEZhY3RvcnkiLCJtYXhDb21wYXJlIiwiY29tcCIsInppcFdpdGhGYWN0b3J5Iiwia2V5SXRlciIsInppcHBlciIsInppcFNlcXVlbmNlIiwiaXRlcmF0b3JzIiwiaXNEb25lIiwic29tZSIsInZhbGlkYXRlRW50cnkiLCJyZXNvbHZlU2l6ZSIsImZvcmNlSXRlcmF0b3IiLCJrZXlQYXRoIiwiUmVjb3JkIiwiZGVmYXVsdFZhbHVlcyIsImhhc0luaXRpYWxpemVkIiwiUmVjb3JkVHlwZSIsIlJlY29yZFR5cGVQcm90b3R5cGUiLCJfbmFtZSIsIl9kZWZhdWx0VmFsdWVzIiwiUmVjb3JkUHJvdG90eXBlIiwibWFrZVJlY29yZCIsImxpa2VSZWNvcmQiLCJyZWNvcmQiLCJyZWNvcmROYW1lIiwibmFtZXMiLCJzZXRQcm9wIiwiU2V0IiwiZW1wdHlTZXQiLCJpc1NldCIsIm1heWJlU2V0IiwiSVNfU0VUX1NFTlRJTkVMIiwidXBkYXRlU2V0IiwiX19lbXB0eSIsIl9fbWFrZSIsIm1ha2VTZXQiLCJTZXRQcm90b3R5cGUiLCJFTVBUWV9TRVQiLCJPcmRlcmVkU2V0IiwiZW1wdHlPcmRlcmVkU2V0IiwiaXNPcmRlcmVkU2V0IiwibWF5YmVPcmRlcmVkU2V0IiwibWFrZU9yZGVyZWRTZXQiLCJPcmRlcmVkU2V0UHJvdG90eXBlIiwiRU1QVFlfT1JERVJFRF9TRVQiLCJTdGFjayIsImVtcHR5U3RhY2siLCJpc1N0YWNrIiwidW5zaGlmdEFsbCIsIm1heWJlU3RhY2siLCJJU19TVEFDS19TRU5USU5FTCIsIm1ha2VTdGFjayIsIlN0YWNrUHJvdG90eXBlIiwiX2hlYWQiLCJFTVBUWV9TVEFDSyIsIm1ldGhvZHMiLCJrZXlDb3BpZXIiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJrZXlNYXBwZXIiLCJlbnRyeU1hcHBlciIsIm5vdCIsIm5lZyIsInF1b3RlU3RyaW5nIiwiZGVmYXVsdFppcHBlciIsImRlZmF1bHROZWdDb21wYXJhdG9yIiwiaGFzaEl0ZXJhYmxlIiwib3JkZXJlZCIsImtleWVkIiwiaGFzaE1lcmdlIiwibXVybXVySGFzaE9mU2l6ZSIsImltdWwiLCJTTElDRSQwIiwiS2V5ZWQiLCJJbmRleGVkIiwiREVMRVRFIiwiS0VZUyIsIlZBTFVFUyIsIkVOVFJJRVMiLCJpbnNwZWN0IiwidG9Tb3VyY2UiLCJvZiIsIl9fdG9TdHJpbmciLCJzZWFyY2hWYWx1ZSIsIm90aGVyIiwicG9zc2libGVJbmRleCIsIm9mZnNldFZhbHVlIiwiV2Vha01hcCIsImtleVZhbHVlcyIsInVwZGF0ZUluIiwiZGVsZXRlSW4iLCJ1cGRhdGVkVmFsdWUiLCJtZXJnZSIsIm1lcmdlV2l0aCIsIm1lcmdlSW4iLCJtZXJnZURlZXBJbiIsInNvcnRCeSIsIm11dGFibGUiLCJ3YXNBbHRlcmVkIiwiX19lbnN1cmVPd25lciIsIml0ZXJhdGUiLCJyZW1vdmVJbiIsInJlbW92ZWQiLCJleGlzdHMiLCJNQVhfQVJSQVlfTUFQX1NJWkUiLCJpc0VkaXRhYmxlIiwibmV3RW50cmllcyIsImtleUhhc2hGcmFnIiwiTUFYX0JJVE1BUF9JTkRFWEVEX1NJWkUiLCJuZXdCaXRtYXAiLCJuZXdOb2RlcyIsIm5ld0NvdW50IiwiTUlOX0hBU0hfQVJSQVlfTUFQX1NJWkUiLCJrZXlNYXRjaCIsInN1Yk5vZGUiLCJpbnNlcnQiLCJvbGRTaXplIiwidW5zaGlmdCIsIm9yaWdpbkluZGV4IiwicmVtb3ZpbmdGaXJzdCIsInNpemVJbmRleCIsInZhbHVlU2VxIiwiaW5kZXhlZEl0ZXJhYmxlIiwiZGVmYXVsdFZhbCIsIl9lbXB0eSIsImZyb21LZXlzIiwia2V5U2VxIiwidW5pb24iLCJpbnRlcnNlY3QiLCJvcmlnaW5hbFNldCIsInN1YnRyYWN0IiwicGVlayIsInB1c2hBbGwiLCJfX3RvSlMiLCJ0b0pTT04iLCJ0b09iamVjdCIsInRvT3JkZXJlZE1hcCIsInRvT3JkZXJlZFNldCIsInRvU2V0IiwidG9TdGFjayIsIl9fdG9TdHJpbmdNYXBwZXIiLCJmaW5kIiwiZmluZEVudHJ5Iiwic2lkZUVmZmVjdCIsImpvaW5lZCIsImlzRmlyc3QiLCJyZWR1Y2VyIiwiaW5pdGlhbFJlZHVjdGlvbiIsInJlZHVjdGlvbiIsInVzZUZpcnN0IiwicmVkdWNlUmlnaHQiLCJidXRMYXN0IiwiY291bnRCeSIsImVudHJpZXNTZXF1ZW5jZSIsImZpbHRlck5vdCIsImZvdW5kIiwiZmluZEtleSIsImZpbmRMYXN0IiwiZmluZExhc3RFbnRyeSIsImZpbmRMYXN0S2V5IiwiZmlyc3QiLCJmbGF0TWFwIiwic2VhcmNoS2V5IiwiZ2V0SW4iLCJzZWFyY2hLZXlQYXRoIiwibmVzdGVkIiwiZ3JvdXBCeSIsImhhc0luIiwiaXNTdWJzZXQiLCJpc1N1cGVyc2V0IiwibGFzdCIsImxhc3RLZXlPZiIsIm1heEJ5IiwibWluQnkiLCJyZXN0IiwiYW1vdW50Iiwic2tpcFdoaWxlIiwic2tpcFVudGlsIiwidGFrZSIsInRha2VMYXN0IiwidGFrZVdoaWxlIiwidGFrZVVudGlsIiwiSXRlcmFibGVQcm90b3R5cGUiLCJjaGFpbiIsIm1hcEVudHJpZXMiLCJtYXBLZXlzIiwiS2V5ZWRJdGVyYWJsZVByb3RvdHlwZSIsImZpbmRJbmRleCIsInJlbW92ZU51bSIsIm51bUFyZ3MiLCJzcGxpY2VkIiwiZmluZExhc3RJbmRleCIsImludGVycG9zZSIsImludGVybGVhdmUiLCJ6aXBwZWQiLCJpbnRlcmxlYXZlZCIsInppcCIsInppcFdpdGgiLCJJbW11dGFibGUiLCJfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyIsIk1kNSIsInNoYXJlZE1lbW9yeSIsImJsb2NrcyIsImJ1ZmZlcjgiLCJBUlJBWV9CVUZGRVIiLCJidWZmZXIiLCJBcnJheUJ1ZmZlciIsIlVpbnQ4QXJyYXkiLCJVaW50MzJBcnJheSIsImgwIiwiYnl0ZXMiLCJoQnl0ZXMiLCJmaW5hbGl6ZWQiLCJoYXNoZWQiLCJFUlJPUiIsIldJTkRPVyIsIkpTX01ENV9OT19XSU5ET1ciLCJXRUJfV09SS0VSIiwiTk9ERV9KUyIsIkpTX01ENV9OT19OT0RFX0pTIiwiQ09NTU9OX0pTIiwiSlNfTUQ1X05PX0NPTU1PTl9KUyIsIkFNRCIsIkpTX01ENV9OT19BUlJBWV9CVUZGRVIiLCJIRVhfQ0hBUlMiLCJFWFRSQSIsIk9VVFBVVF9UWVBFUyIsIkJBU0U2NF9FTkNPREVfQ0hBUiIsIkpTX01ENV9OT19BUlJBWV9CVUZGRVJfSVNfVklFVyIsImlzVmlldyIsImNyZWF0ZU91dHB1dE1ldGhvZCIsIm91dHB1dFR5cGUiLCJjcmVhdGVNZXRob2QiLCJub2RlV3JhcCIsImNyeXB0byIsImV2YWwiLCJCdWZmZXIiLCJub2RlTWV0aG9kIiwiY3JlYXRlSGFzaCIsImRpZ2VzdCIsIm5vdFN0cmluZyIsImxhc3RCeXRlSW5kZXgiLCJmaW5hbGl6ZSIsImJjIiwiZGEiLCJoZXgiLCJhcnJheUJ1ZmZlciIsImJhc2U2NCIsInYxIiwidjIiLCJ2MyIsImJhc2U2NFN0ciIsIm1kNSIsIl9fd2VicGFja19hbWRfb3B0aW9uc19fIl0sIm1hcHBpbmdzIjoiQ0FBUyxTQUFVQSxHQ0luQixRQUFBQyxHQUFBQyxHQUdBLEdBQUFDLEVBQUFELEdBQ0EsTUFBQUMsR0FBQUQsR0FBQUUsT0FHQSxJQUFBQyxHQUFBRixFQUFBRCxJQUNBRSxXQUNBRSxHQUFBSixFQUNBSyxRQUFBLEVBVUEsT0FOQVAsR0FBQUUsR0FBQU0sS0FBQUgsRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUgsR0FHQUksRUFBQUUsUUFBQSxFQUdBRixFQUFBRCxRQXZCQSxHQUFBRCxLQXFDQSxPQVRBRixHQUFBUSxFQUFBVCxFQUdBQyxFQUFBUyxFQUFBUCxFQUdBRixFQUFBVSxFQUFBLEdBR0FWLEVBQUEsS0RNTSxTQUFVSSxFQUFRRCxFQUFTSCxHQUVoQyxZQWNBLFNBQVNXLEdBQXVCQyxHQUFPLE1BQU9BLElBQU9BLEVBQUlDLFdBQWFELEdBQVFFLFFBQVNGLEdFNUR4RixHQUFBRyxHQUFBZixFQUFBLEdGa0RLZ0IsRUFBVUwsRUFBdUJJLEdFakR0Q0UsRUFBQWpCLEVBQUEsS0ZxREtrQixFQUFhUCxFQUF1Qk0sR0VwRHpDRSxFQUFBbkIsRUFBQSxLRndES29CLEVBQWNULEVBQXVCUSxFRXREMUNELEdBQUFKLFFBQVNPLE9BQVFMLEVBQUFGLFFB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c291cmNlc0NvbnRlbnQiOlsiLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge30sXG4vKioqKioqLyBcdFx0XHRpZDogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblx0XG5cdHZhciBfcmVhY3REb20gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1OCk7XG5cdFxuXHR2YXIgX3JlYWN0RG9tMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0RG9tKTtcblx0XG5cdHZhciBfY29udGFpbmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTkpO1xuXHRcblx0dmFyIF9jb250YWluZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY29udGFpbmVyKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRfcmVhY3REb20yLmRlZmF1bHQucmVuZGVyKF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9jb250YWluZXIyLmRlZmF1bHQsIG51bGwpLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFwcC1jb250YWluZXJcIikpO1xuXG4vKioqLyB9KSxcbi8qIDEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cblxuLyoqKi8gfSksXG4vKiAyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBSZWFjdFxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBSZWFjdERPTSA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdHZhciBSZWFjdERPTVNlcnZlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTQ4KTtcblx0dmFyIFJlYWN0SXNvbW9ycGhpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMTUyKTtcblx0XG5cdHZhciBhc3NpZ24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KTtcblx0dmFyIGRlcHJlY2F0ZWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1Nyk7XG5cdFxuXHQvLyBgdmVyc2lvbmAgd2lsbCBiZSBhZGRlZCBoZXJlIGJ5IFJlYWN0SXNvbW9ycGhpYy5cblx0dmFyIFJlYWN0ID0ge307XG5cdFxuXHRhc3NpZ24oUmVhY3QsIFJlYWN0SXNvbW9ycGhpYyk7XG5cdFxuXHRhc3NpZ24oUmVhY3QsIHtcblx0ICAvLyBSZWFjdERPTVxuXHQgIGZpbmRET01Ob2RlOiBkZXByZWNhdGVkKCdmaW5kRE9NTm9kZScsICdSZWFjdERPTScsICdyZWFjdC1kb20nLCBSZWFjdERPTSwgUmVhY3RET00uZmluZERPTU5vZGUpLFxuXHQgIHJlbmRlcjogZGVwcmVjYXRlZCgncmVuZGVyJywgJ1JlYWN0RE9NJywgJ3JlYWN0LWRvbScsIFJlYWN0RE9NLCBSZWFjdERPTS5yZW5kZXIpLFxuXHQgIHVubW91bnRDb21wb25lbnRBdE5vZGU6IGRlcHJlY2F0ZWQoJ3VubW91bnRDb21wb25lbnRBdE5vZGUnLCAnUmVhY3RET00nLCAncmVhY3QtZG9tJywgUmVhY3RET00sIFJlYWN0RE9NLnVubW91bnRDb21wb25lbnRBdE5vZGUpLFxuXHRcblx0ICAvLyBSZWFjdERPTVNlcnZlclxuXHQgIHJlbmRlclRvU3RyaW5nOiBkZXByZWNhdGVkKCdyZW5kZXJUb1N0cmluZycsICdSZWFjdERPTVNlcnZlcicsICdyZWFjdC1kb20vc2VydmVyJywgUmVhY3RET01TZXJ2ZXIsIFJlYWN0RE9NU2VydmVyLnJlbmRlclRvU3RyaW5nKSxcblx0ICByZW5kZXJUb1N0YXRpY01hcmt1cDogZGVwcmVjYXRlZCgncmVuZGVyVG9TdGF0aWNNYXJrdXAnLCAnUmVhY3RET01TZXJ2ZXInLCAncmVhY3QtZG9tL3NlcnZlcicsIFJlYWN0RE9NU2VydmVyLCBSZWFjdERPTVNlcnZlci5yZW5kZXJUb1N0YXRpY01hcmt1cClcblx0fSk7XG5cdFxuXHRSZWFjdC5fX1NFQ1JFVF9ET01fRE9fTk9UX1VTRV9PUl9ZT1VfV0lMTF9CRV9GSVJFRCA9IFJlYWN0RE9NO1xuXHRSZWFjdC5fX1NFQ1JFVF9ET01fU0VSVkVSX0RPX05PVF9VU0VfT1JfWU9VX1dJTExfQkVfRklSRUQgPSBSZWFjdERPTVNlcnZlcjtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gUmVhY3Q7XG5cbi8qKiovIH0pLFxuLyogMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzKSB7LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBSZWFjdERPTVxuXHQgKi9cblx0XG5cdC8qIGdsb2JhbHMgX19SRUFDVF9ERVZUT09MU19HTE9CQUxfSE9PS19fKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBSZWFjdEN1cnJlbnRPd25lciA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cdHZhciBSZWFjdERPTVRleHRDb21wb25lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHR2YXIgUmVhY3REZWZhdWx0SW5qZWN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MSk7XG5cdHZhciBSZWFjdEluc3RhbmNlSGFuZGxlcyA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXHR2YXIgUmVhY3RNb3VudCA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpO1xuXHR2YXIgUmVhY3RQZXJmID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7XG5cdHZhciBSZWFjdFJlY29uY2lsZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTtcblx0dmFyIFJlYWN0VXBkYXRlcyA9IF9fd2VicGFja19yZXF1aXJlX18oNTQpO1xuXHR2YXIgUmVhY3RWZXJzaW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDYpO1xuXHRcblx0dmFyIGZpbmRET01Ob2RlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5MSk7XG5cdHZhciByZW5kZXJTdWJ0cmVlSW50b0NvbnRhaW5lciA9IF9fd2VicGFja19yZXF1aXJlX18oMTQ3KTtcblx0dmFyIHdhcm5pbmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTtcblx0XG5cdFJlYWN0RGVmYXVsdEluamVjdGlvbi5pbmplY3QoKTtcblx0XG5cdHZhciByZW5kZXIgPSBSZWFjdFBlcmYubWVhc3VyZSgnUmVhY3QnLCAncmVuZGVyJywgUmVhY3RNb3VudC5yZW5kZXIpO1xuXHRcblx0dmFyIFJlYWN0ID0ge1xuXHQgIGZpbmRET01Ob2RlOiBmaW5kRE9NTm9kZSxcblx0ICByZW5kZXI6IHJlbmRlcixcblx0ICB1bm1vdW50Q29tcG9uZW50QXROb2RlOiBSZWFjdE1vdW50LnVubW91bnRDb21wb25lbnRBdE5vZGUsXG5cdCAgdmVyc2lvbjogUmVhY3RWZXJzaW9uLFxuXHRcblx0ICAvKiBlc2xpbnQtZGlzYWJsZSBjYW1lbGNhc2UgKi9cblx0ICB1bnN0YWJsZV9iYXRjaGVkVXBkYXRlczogUmVhY3RVcGRhdGVzLmJhdGNoZWRVcGRhdGVzLFxuXHQgIHVuc3RhYmxlX3JlbmRlclN1YnRyZWVJbnRvQ29udGFpbmVyOiByZW5kZXJTdWJ0cmVlSW50b0NvbnRhaW5lclxuXHR9O1xuXHRcblx0Ly8gSW5qZWN0IHRoZSBydW50aW1lIGludG8gYSBkZXZ0b29scyBnbG9iYWwgaG9vayByZWdhcmRsZXNzIG9mIGJyb3dzZXIuXG5cdC8vIEFsbG93cyBmb3IgZGVidWdnaW5nIHdoZW4gdGhlIGhvb2sgaXMgaW5qZWN0ZWQgb24gdGhlIHBhZ2UuXG5cdC8qIGVzbGludC1lbmFibGUgY2FtZWxjYXNlICovXG5cdGlmICh0eXBlb2YgX19SRUFDVF9ERVZUT09MU19HTE9CQUxfSE9PS19fICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgX19SRUFDVF9ERVZUT09MU19HTE9CQUxfSE9PS19fLmluamVjdCA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgIF9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXy5pbmplY3Qoe1xuXHQgICAgQ3VycmVudE93bmVyOiBSZWFjdEN1cnJlbnRPd25lcixcblx0ICAgIEluc3RhbmNlSGFuZGxlczogUmVhY3RJbnN0YW5jZUhhbmRsZXMsXG5cdCAgICBNb3VudDogUmVhY3RNb3VudCxcblx0ICAgIFJlY29uY2lsZXI6IFJlYWN0UmVjb25jaWxlcixcblx0ICAgIFRleHRDb21wb25lbnQ6IFJlYWN0RE9NVGV4dENvbXBvbmVudFxuXHQgIH0pO1xuXHR9XG5cdFxuXHRpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgIHZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdCAgaWYgKEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSAmJiB3aW5kb3cudG9wID09PSB3aW5kb3cuc2VsZikge1xuXHRcblx0ICAgIC8vIEZpcnN0IGNoZWNrIGlmIGRldnRvb2xzIGlzIG5vdCBpbnN0YWxsZWRcblx0ICAgIGlmICh0eXBlb2YgX19SRUFDVF9ERVZUT09MU19HTE9CQUxfSE9PS19fID09PSAndW5kZWZpbmVkJykge1xuXHQgICAgICAvLyBJZiB3ZSdyZSBpbiBDaHJvbWUgb3IgRmlyZWZveCwgcHJvdmlkZSBhIGRvd25sb2FkIGxpbmsgaWYgbm90IGluc3RhbGxlZC5cblx0ICAgICAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignQ2hyb21lJykgPiAtMSAmJiBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ0VkZ2UnKSA9PT0gLTEgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdGaXJlZm94JykgPiAtMSkge1xuXHQgICAgICAgIGNvbnNvbGUuZGVidWcoJ0Rvd25sb2FkIHRoZSBSZWFjdCBEZXZUb29scyBmb3IgYSBiZXR0ZXIgZGV2ZWxvcG1lbnQgZXhwZXJpZW5jZTogJyArICdodHRwczovL2ZiLm1lL3JlYWN0LWRldnRvb2xzJyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICAvLyBJZiB3ZSdyZSBpbiBJRTgsIGNoZWNrIHRvIHNlZSBpZiB3ZSBhcmUgaW4gY29tcGF0aWJpbGl0eSBtb2RlIGFuZCBwcm92aWRlXG5cdCAgICAvLyBpbmZvcm1hdGlvbiBvbiBwcmV2ZW50aW5nIGNvbXBhdGliaWxpdHkgbW9kZVxuXHQgICAgdmFyIGllQ29tcGF0aWJpbGl0eU1vZGUgPSBkb2N1bWVudC5kb2N1bWVudE1vZGUgJiYgZG9jdW1lbnQuZG9jdW1lbnRNb2RlIDwgODtcblx0XG5cdCAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyghaWVDb21wYXRpYmlsaXR5TW9kZSwgJ0ludGVybmV0IEV4cGxvcmVyIGlzIHJ1bm5pbmcgaW4gY29tcGF0aWJpbGl0eSBtb2RlOyBwbGVhc2UgYWRkIHRoZSAnICsgJ2ZvbGxvd2luZyB0YWcgdG8geW91ciBIVE1MIHRvIHByZXZlbnQgdGhpcyBmcm9tIGhhcHBlbmluZzogJyArICc8bWV0YSBodHRwLWVxdWl2PVwiWC1VQS1Db21wYXRpYmxlXCIgY29udGVudD1cIklFPWVkZ2VcIiAvPicpIDogdW5kZWZpbmVkO1xuXHRcblx0ICAgIHZhciBleHBlY3RlZEZlYXR1cmVzID0gW1xuXHQgICAgLy8gc2hpbXNcblx0ICAgIEFycmF5LmlzQXJyYXksIEFycmF5LnByb3RvdHlwZS5ldmVyeSwgQXJyYXkucHJvdG90eXBlLmZvckVhY2gsIEFycmF5LnByb3RvdHlwZS5pbmRleE9mLCBBcnJheS5wcm90b3R5cGUubWFwLCBEYXRlLm5vdywgRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQsIE9iamVjdC5rZXlzLCBTdHJpbmcucHJvdG90eXBlLnNwbGl0LCBTdHJpbmcucHJvdG90eXBlLnRyaW0sXG5cdFxuXHQgICAgLy8gc2hhbXNcblx0ICAgIE9iamVjdC5jcmVhdGUsIE9iamVjdC5mcmVlemVdO1xuXHRcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXhwZWN0ZWRGZWF0dXJlcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICBpZiAoIWV4cGVjdGVkRmVhdHVyZXNbaV0pIHtcblx0ICAgICAgICBjb25zb2xlLmVycm9yKCdPbmUgb3IgbW9yZSBFUzUgc2hpbS9zaGFtcyBleHBlY3RlZCBieSBSZWFjdCBhcmUgbm90IGF2YWlsYWJsZTogJyArICdodHRwczovL2ZiLm1lL3JlYWN0LXdhcm5pbmctcG9seWZpbGxzJyk7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gUmVhY3Q7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpKSlcblxuLyoqKi8gfSksXG4vKiA0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0Ly8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG5cdHZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblx0XG5cdC8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuXHQvLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcblx0Ly8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuXHQvLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXHRcblx0dmFyIGNhY2hlZFNldFRpbWVvdXQ7XG5cdHZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cdFxuXHRmdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG5cdH1cblx0ZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xuXHR9XG5cdChmdW5jdGlvbiAoKSB7XG5cdCAgICB0cnkge1xuXHQgICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcblx0ICAgICAgICB9XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG5cdCAgICB9XG5cdCAgICB0cnkge1xuXHQgICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuXHQgICAgICAgIH1cblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuXHQgICAgfVxuXHR9ICgpKVxuXHRmdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuXHQgICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcblx0ICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcblx0ICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuXHQgICAgfVxuXHQgICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcblx0ICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuXHQgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuXHQgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG5cdCAgICB9XG5cdCAgICB0cnkge1xuXHQgICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3Ncblx0ICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuXHQgICAgfSBjYXRjaChlKXtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcblx0ICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuXHQgICAgICAgIH0gY2F0Y2goZSl7XG5cdCAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG5cdCAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdFxuXHRcblx0fVxuXHRmdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG5cdCAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcblx0ICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcblx0ICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG5cdCAgICB9XG5cdCAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG5cdCAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcblx0ICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG5cdCAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuXHQgICAgfVxuXHQgICAgdHJ5IHtcblx0ICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG5cdCAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuXHQgICAgfSBjYXRjaCAoZSl7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuXHQgICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcblx0ICAgICAgICB9IGNhdGNoIChlKXtcblx0ICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG5cdCAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcblx0ICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0XG5cdFxuXHR9XG5cdHZhciBxdWV1ZSA9IFtdO1xuXHR2YXIgZHJhaW5pbmcgPSBmYWxzZTtcblx0dmFyIGN1cnJlbnRRdWV1ZTtcblx0dmFyIHF1ZXVlSW5kZXggPSAtMTtcblx0XG5cdGZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcblx0ICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIGRyYWluaW5nID0gZmFsc2U7XG5cdCAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuXHQgICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcblx0ICAgIH1cblx0ICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcblx0ICAgICAgICBkcmFpblF1ZXVlKCk7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG5cdCAgICBpZiAoZHJhaW5pbmcpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcblx0ICAgIGRyYWluaW5nID0gdHJ1ZTtcblx0XG5cdCAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuXHQgICAgd2hpbGUobGVuKSB7XG5cdCAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG5cdCAgICAgICAgcXVldWUgPSBbXTtcblx0ICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG5cdCAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcblx0ICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG5cdCAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuXHQgICAgfVxuXHQgICAgY3VycmVudFF1ZXVlID0gbnVsbDtcblx0ICAgIGRyYWluaW5nID0gZmFsc2U7XG5cdCAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG5cdH1cblx0XG5cdHByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG5cdCAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG5cdCAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuXHQgICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcblx0ICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuXHQgICAgfVxuXHR9O1xuXHRcblx0Ly8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuXHRmdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcblx0ICAgIHRoaXMuZnVuID0gZnVuO1xuXHQgICAgdGhpcy5hcnJheSA9IGFycmF5O1xuXHR9XG5cdEl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xuXHR9O1xuXHRwcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xuXHRwcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xuXHRwcm9jZXNzLmVudiA9IHt9O1xuXHRwcm9jZXNzLmFyZ3YgPSBbXTtcblx0cHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5cdHByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblx0XG5cdGZ1bmN0aW9uIG5vb3AoKSB7fVxuXHRcblx0cHJvY2Vzcy5vbiA9IG5vb3A7XG5cdHByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xuXHRwcm9jZXNzLm9uY2UgPSBub29wO1xuXHRwcm9jZXNzLm9mZiA9IG5vb3A7XG5cdHByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xuXHRwcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5cdHByb2Nlc3MuZW1pdCA9IG5vb3A7XG5cdHByb2Nlc3MucHJlcGVuZExpc3RlbmVyID0gbm9vcDtcblx0cHJvY2Vzcy5wcmVwZW5kT25jZUxpc3RlbmVyID0gbm9vcDtcblx0XG5cdHByb2Nlc3MubGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIFtdIH1cblx0XG5cdHByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG5cdH07XG5cdFxuXHRwcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xuXHRwcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcblx0fTtcblx0cHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcblxuXG4vKioqLyB9KSxcbi8qIDUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0Q3VycmVudE93bmVyXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0LyoqXG5cdCAqIEtlZXBzIHRyYWNrIG9mIHRoZSBjdXJyZW50IG93bmVyLlxuXHQgKlxuXHQgKiBUaGUgY3VycmVudCBvd25lciBpcyB0aGUgY29tcG9uZW50IHdobyBzaG91bGQgb3duIGFueSBjb21wb25lbnRzIHRoYXQgYXJlXG5cdCAqIGN1cnJlbnRseSBiZWluZyBjb25zdHJ1Y3RlZC5cblx0ICovXG5cdHZhciBSZWFjdEN1cnJlbnRPd25lciA9IHtcblx0XG5cdCAgLyoqXG5cdCAgICogQGludGVybmFsXG5cdCAgICogQHR5cGUge1JlYWN0Q29tcG9uZW50fVxuXHQgICAqL1xuXHQgIGN1cnJlbnQ6IG51bGxcblx0XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFJlYWN0Q3VycmVudE93bmVyO1xuXG4vKioqLyB9KSxcbi8qIDYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgey8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RET01UZXh0Q29tcG9uZW50XG5cdCAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIERPTUNoaWxkcmVuT3BlcmF0aW9ucyA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cdHZhciBET01Qcm9wZXJ0eU9wZXJhdGlvbnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKTtcblx0dmFyIFJlYWN0Q29tcG9uZW50QnJvd3NlckVudmlyb25tZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNik7XG5cdHZhciBSZWFjdE1vdW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCk7XG5cdFxuXHR2YXIgYXNzaWduID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7XG5cdHZhciBlc2NhcGVUZXh0Q29udGVudEZvckJyb3dzZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTtcblx0dmFyIHNldFRleHRDb250ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7XG5cdHZhciB2YWxpZGF0ZURPTU5lc3RpbmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcwKTtcblx0XG5cdC8qKlxuXHQgKiBUZXh0IG5vZGVzIHZpb2xhdGUgYSBjb3VwbGUgYXNzdW1wdGlvbnMgdGhhdCBSZWFjdCBtYWtlcyBhYm91dCBjb21wb25lbnRzOlxuXHQgKlxuXHQgKiAgLSBXaGVuIG1vdW50aW5nIHRleHQgaW50byB0aGUgRE9NLCBhZGphY2VudCB0ZXh0IG5vZGVzIGFyZSBtZXJnZWQuXG5cdCAqICAtIFRleHQgbm9kZXMgY2Fubm90IGJlIGFzc2lnbmVkIGEgUmVhY3Qgcm9vdCBJRC5cblx0ICpcblx0ICogVGhpcyBjb21wb25lbnQgaXMgdXNlZCB0byB3cmFwIHN0cmluZ3MgaW4gZWxlbWVudHMgc28gdGhhdCB0aGV5IGNhbiB1bmRlcmdvXG5cdCAqIHRoZSBzYW1lIHJlY29uY2lsaWF0aW9uIHRoYXQgaXMgYXBwbGllZCB0byBlbGVtZW50cy5cblx0ICpcblx0ICogVE9ETzogSW52ZXN0aWdhdGUgcmVwcmVzZW50aW5nIFJlYWN0IGNvbXBvbmVudHMgaW4gdGhlIERPTSB3aXRoIHRleHQgbm9kZXMuXG5cdCAqXG5cdCAqIEBjbGFzcyBSZWFjdERPTVRleHRDb21wb25lbnRcblx0ICogQGV4dGVuZHMgUmVhY3RDb21wb25lbnRcblx0ICogQGludGVybmFsXG5cdCAqL1xuXHR2YXIgUmVhY3RET01UZXh0Q29tcG9uZW50ID0gZnVuY3Rpb24gKHByb3BzKSB7XG5cdCAgLy8gVGhpcyBjb25zdHJ1Y3RvciBhbmQgaXRzIGFyZ3VtZW50IGlzIGN1cnJlbnRseSB1c2VkIGJ5IG1vY2tzLlxuXHR9O1xuXHRcblx0YXNzaWduKFJlYWN0RE9NVGV4dENvbXBvbmVudC5wcm90b3R5cGUsIHtcblx0XG5cdCAgLyoqXG5cdCAgICogQHBhcmFtIHtSZWFjdFRleHR9IHRleHRcblx0ICAgKiBAaW50ZXJuYWxcblx0ICAgKi9cblx0ICBjb25zdHJ1Y3Q6IGZ1bmN0aW9uICh0ZXh0KSB7XG5cdCAgICAvLyBUT0RPOiBUaGlzIGlzIHJlYWxseSBhIFJlYWN0VGV4dCAoUmVhY3ROb2RlKSwgbm90IGEgUmVhY3RFbGVtZW50XG5cdCAgICB0aGlzLl9jdXJyZW50RWxlbWVudCA9IHRleHQ7XG5cdCAgICB0aGlzLl9zdHJpbmdUZXh0ID0gJycgKyB0ZXh0O1xuXHRcblx0ICAgIC8vIFByb3BlcnRpZXNcblx0ICAgIHRoaXMuX3Jvb3ROb2RlSUQgPSBudWxsO1xuXHQgICAgdGhpcy5fbW91bnRJbmRleCA9IDA7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogQ3JlYXRlcyB0aGUgbWFya3VwIGZvciB0aGlzIHRleHQgbm9kZS4gVGhpcyBub2RlIGlzIG5vdCBpbnRlbmRlZCB0byBoYXZlXG5cdCAgICogYW55IGZlYXR1cmVzIGJlc2lkZXMgY29udGFpbmluZyB0ZXh0IGNvbnRlbnQuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge3N0cmluZ30gcm9vdElEIERPTSBJRCBvZiB0aGUgcm9vdCBub2RlLlxuXHQgICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbnxSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuXHQgICAqIEByZXR1cm4ge3N0cmluZ30gTWFya3VwIGZvciB0aGlzIHRleHQgbm9kZS5cblx0ICAgKiBAaW50ZXJuYWxcblx0ICAgKi9cblx0ICBtb3VudENvbXBvbmVudDogZnVuY3Rpb24gKHJvb3RJRCwgdHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgIGlmIChjb250ZXh0W3ZhbGlkYXRlRE9NTmVzdGluZy5hbmNlc3RvckluZm9Db250ZXh0S2V5XSkge1xuXHQgICAgICAgIHZhbGlkYXRlRE9NTmVzdGluZygnc3BhbicsIG51bGwsIGNvbnRleHRbdmFsaWRhdGVET01OZXN0aW5nLmFuY2VzdG9ySW5mb0NvbnRleHRLZXldKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMuX3Jvb3ROb2RlSUQgPSByb290SUQ7XG5cdCAgICBpZiAodHJhbnNhY3Rpb24udXNlQ3JlYXRlRWxlbWVudCkge1xuXHQgICAgICB2YXIgb3duZXJEb2N1bWVudCA9IGNvbnRleHRbUmVhY3RNb3VudC5vd25lckRvY3VtZW50Q29udGV4dEtleV07XG5cdCAgICAgIHZhciBlbCA9IG93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuXHQgICAgICBET01Qcm9wZXJ0eU9wZXJhdGlvbnMuc2V0QXR0cmlidXRlRm9ySUQoZWwsIHJvb3RJRCk7XG5cdCAgICAgIC8vIFBvcHVsYXRlIG5vZGUgY2FjaGVcblx0ICAgICAgUmVhY3RNb3VudC5nZXRJRChlbCk7XG5cdCAgICAgIHNldFRleHRDb250ZW50KGVsLCB0aGlzLl9zdHJpbmdUZXh0KTtcblx0ICAgICAgcmV0dXJuIGVsO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdmFyIGVzY2FwZWRUZXh0ID0gZXNjYXBlVGV4dENvbnRlbnRGb3JCcm93c2VyKHRoaXMuX3N0cmluZ1RleHQpO1xuXHRcblx0ICAgICAgaWYgKHRyYW5zYWN0aW9uLnJlbmRlclRvU3RhdGljTWFya3VwKSB7XG5cdCAgICAgICAgLy8gTm9ybWFsbHkgd2UnZCB3cmFwIHRoaXMgaW4gYSBgc3BhbmAgZm9yIHRoZSByZWFzb25zIHN0YXRlZCBhYm92ZSwgYnV0XG5cdCAgICAgICAgLy8gc2luY2UgdGhpcyBpcyBhIHNpdHVhdGlvbiB3aGVyZSBSZWFjdCB3b24ndCB0YWtlIG92ZXIgKHN0YXRpYyBwYWdlcyksXG5cdCAgICAgICAgLy8gd2UgY2FuIHNpbXBseSByZXR1cm4gdGhlIHRleHQgYXMgaXQgaXMuXG5cdCAgICAgICAgcmV0dXJuIGVzY2FwZWRUZXh0O1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gJzxzcGFuICcgKyBET01Qcm9wZXJ0eU9wZXJhdGlvbnMuY3JlYXRlTWFya3VwRm9ySUQocm9vdElEKSArICc+JyArIGVzY2FwZWRUZXh0ICsgJzwvc3Bhbj4nO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFVwZGF0ZXMgdGhpcyBjb21wb25lbnQgYnkgdXBkYXRpbmcgdGhlIHRleHQgY29udGVudC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7UmVhY3RUZXh0fSBuZXh0VGV4dCBUaGUgbmV4dCB0ZXh0IGNvbnRlbnRcblx0ICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG5cdCAgICogQGludGVybmFsXG5cdCAgICovXG5cdCAgcmVjZWl2ZUNvbXBvbmVudDogZnVuY3Rpb24gKG5leHRUZXh0LCB0cmFuc2FjdGlvbikge1xuXHQgICAgaWYgKG5leHRUZXh0ICE9PSB0aGlzLl9jdXJyZW50RWxlbWVudCkge1xuXHQgICAgICB0aGlzLl9jdXJyZW50RWxlbWVudCA9IG5leHRUZXh0O1xuXHQgICAgICB2YXIgbmV4dFN0cmluZ1RleHQgPSAnJyArIG5leHRUZXh0O1xuXHQgICAgICBpZiAobmV4dFN0cmluZ1RleHQgIT09IHRoaXMuX3N0cmluZ1RleHQpIHtcblx0ICAgICAgICAvLyBUT0RPOiBTYXZlIHRoaXMgYXMgcGVuZGluZyBwcm9wcyBhbmQgdXNlIHBlcmZvcm1VcGRhdGVJZk5lY2Vzc2FyeVxuXHQgICAgICAgIC8vIGFuZC9vciB1cGRhdGVDb21wb25lbnQgdG8gZG8gdGhlIGFjdHVhbCB1cGRhdGUgZm9yIGNvbnNpc3RlbmN5IHdpdGhcblx0ICAgICAgICAvLyBvdGhlciBjb21wb25lbnQgdHlwZXM/XG5cdCAgICAgICAgdGhpcy5fc3RyaW5nVGV4dCA9IG5leHRTdHJpbmdUZXh0O1xuXHQgICAgICAgIHZhciBub2RlID0gUmVhY3RNb3VudC5nZXROb2RlKHRoaXMuX3Jvb3ROb2RlSUQpO1xuXHQgICAgICAgIERPTUNoaWxkcmVuT3BlcmF0aW9ucy51cGRhdGVUZXh0Q29udGVudChub2RlLCBuZXh0U3RyaW5nVGV4dCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1bm1vdW50Q29tcG9uZW50OiBmdW5jdGlvbiAoKSB7XG5cdCAgICBSZWFjdENvbXBvbmVudEJyb3dzZXJFbnZpcm9ubWVudC51bm1vdW50SURGcm9tRW52aXJvbm1lbnQodGhpcy5fcm9vdE5vZGVJRCk7XG5cdCAgfVxuXHRcblx0fSk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFJlYWN0RE9NVGV4dENvbXBvbmVudDtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oNCkpKVxuXG4vKioqLyB9KSxcbi8qIDcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgey8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgRE9NQ2hpbGRyZW5PcGVyYXRpb25zXG5cdCAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIERhbmdlciA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdHZhciBSZWFjdE11bHRpQ2hpbGRVcGRhdGVUeXBlcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpO1xuXHR2YXIgUmVhY3RQZXJmID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7XG5cdFxuXHR2YXIgc2V0SW5uZXJIVE1MID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOSk7XG5cdHZhciBzZXRUZXh0Q29udGVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMjApO1xuXHR2YXIgaW52YXJpYW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7XG5cdFxuXHQvKipcblx0ICogSW5zZXJ0cyBgY2hpbGROb2RlYCBhcyBhIGNoaWxkIG9mIGBwYXJlbnROb2RlYCBhdCB0aGUgYGluZGV4YC5cblx0ICpcblx0ICogQHBhcmFtIHtET01FbGVtZW50fSBwYXJlbnROb2RlIFBhcmVudCBub2RlIGluIHdoaWNoIHRvIGluc2VydC5cblx0ICogQHBhcmFtIHtET01FbGVtZW50fSBjaGlsZE5vZGUgQ2hpbGQgbm9kZSB0byBpbnNlcnQuXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBJbmRleCBhdCB3aGljaCB0byBpbnNlcnQgdGhlIGNoaWxkLlxuXHQgKiBAaW50ZXJuYWxcblx0ICovXG5cdGZ1bmN0aW9uIGluc2VydENoaWxkQXQocGFyZW50Tm9kZSwgY2hpbGROb2RlLCBpbmRleCkge1xuXHQgIC8vIEJ5IGV4cGxvaXRpbmcgYXJyYXlzIHJldHVybmluZyBgdW5kZWZpbmVkYCBmb3IgYW4gdW5kZWZpbmVkIGluZGV4LCB3ZSBjYW5cblx0ICAvLyByZWx5IGV4Y2x1c2l2ZWx5IG9uIGBpbnNlcnRCZWZvcmUobm9kZSwgbnVsbClgIGluc3RlYWQgb2YgYWxzbyB1c2luZ1xuXHQgIC8vIGBhcHBlbmRDaGlsZChub2RlKWAuIEhvd2V2ZXIsIHVzaW5nIGB1bmRlZmluZWRgIGlzIG5vdCBhbGxvd2VkIGJ5IGFsbFxuXHQgIC8vIGJyb3dzZXJzIHNvIHdlIG11c3QgcmVwbGFjZSBpdCB3aXRoIGBudWxsYC5cblx0XG5cdCAgLy8gZml4IHJlbmRlciBvcmRlciBlcnJvciBpbiBzYWZhcmlcblx0ICAvLyBJRTggd2lsbCB0aHJvdyBlcnJvciB3aGVuIGluZGV4IG91dCBvZiBsaXN0IHNpemUuXG5cdCAgdmFyIGJlZm9yZUNoaWxkID0gaW5kZXggPj0gcGFyZW50Tm9kZS5jaGlsZE5vZGVzLmxlbmd0aCA/IG51bGwgOiBwYXJlbnROb2RlLmNoaWxkTm9kZXMuaXRlbShpbmRleCk7XG5cdFxuXHQgIHBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGNoaWxkTm9kZSwgYmVmb3JlQ2hpbGQpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogT3BlcmF0aW9ucyBmb3IgdXBkYXRpbmcgd2l0aCBET00gY2hpbGRyZW4uXG5cdCAqL1xuXHR2YXIgRE9NQ2hpbGRyZW5PcGVyYXRpb25zID0ge1xuXHRcblx0ICBkYW5nZXJvdXNseVJlcGxhY2VOb2RlV2l0aE1hcmt1cDogRGFuZ2VyLmRhbmdlcm91c2x5UmVwbGFjZU5vZGVXaXRoTWFya3VwLFxuXHRcblx0ICB1cGRhdGVUZXh0Q29udGVudDogc2V0VGV4dENvbnRlbnQsXG5cdFxuXHQgIC8qKlxuXHQgICAqIFVwZGF0ZXMgYSBjb21wb25lbnQncyBjaGlsZHJlbiBieSBwcm9jZXNzaW5nIGEgc2VyaWVzIG9mIHVwZGF0ZXMuIFRoZVxuXHQgICAqIHVwZGF0ZSBjb25maWd1cmF0aW9ucyBhcmUgZWFjaCBleHBlY3RlZCB0byBoYXZlIGEgYHBhcmVudE5vZGVgIHByb3BlcnR5LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHthcnJheTxvYmplY3Q+fSB1cGRhdGVzIExpc3Qgb2YgdXBkYXRlIGNvbmZpZ3VyYXRpb25zLlxuXHQgICAqIEBwYXJhbSB7YXJyYXk8c3RyaW5nPn0gbWFya3VwTGlzdCBMaXN0IG9mIG1hcmt1cCBzdHJpbmdzLlxuXHQgICAqIEBpbnRlcm5hbFxuXHQgICAqL1xuXHQgIHByb2Nlc3NVcGRhdGVzOiBmdW5jdGlvbiAodXBkYXRlcywgbWFya3VwTGlzdCkge1xuXHQgICAgdmFyIHVwZGF0ZTtcblx0ICAgIC8vIE1hcHBpbmcgZnJvbSBwYXJlbnQgSURzIHRvIGluaXRpYWwgY2hpbGQgb3JkZXJpbmdzLlxuXHQgICAgdmFyIGluaXRpYWxDaGlsZHJlbiA9IG51bGw7XG5cdCAgICAvLyBMaXN0IG9mIGNoaWxkcmVuIHRoYXQgd2lsbCBiZSBtb3ZlZCBvciByZW1vdmVkLlxuXHQgICAgdmFyIHVwZGF0ZWRDaGlsZHJlbiA9IG51bGw7XG5cdFxuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB1cGRhdGVzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHVwZGF0ZSA9IHVwZGF0ZXNbaV07XG5cdCAgICAgIGlmICh1cGRhdGUudHlwZSA9PT0gUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMuTU9WRV9FWElTVElORyB8fCB1cGRhdGUudHlwZSA9PT0gUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMuUkVNT1ZFX05PREUpIHtcblx0ICAgICAgICB2YXIgdXBkYXRlZEluZGV4ID0gdXBkYXRlLmZyb21JbmRleDtcblx0ICAgICAgICB2YXIgdXBkYXRlZENoaWxkID0gdXBkYXRlLnBhcmVudE5vZGUuY2hpbGROb2Rlc1t1cGRhdGVkSW5kZXhdO1xuXHQgICAgICAgIHZhciBwYXJlbnRJRCA9IHVwZGF0ZS5wYXJlbnRJRDtcblx0XG5cdCAgICAgICAgIXVwZGF0ZWRDaGlsZCA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdwcm9jZXNzVXBkYXRlcygpOiBVbmFibGUgdG8gZmluZCBjaGlsZCAlcyBvZiBlbGVtZW50LiBUaGlzICcgKyAncHJvYmFibHkgbWVhbnMgdGhlIERPTSB3YXMgdW5leHBlY3RlZGx5IG11dGF0ZWQgKGUuZy4sIGJ5IHRoZSAnICsgJ2Jyb3dzZXIpLCB1c3VhbGx5IGR1ZSB0byBmb3JnZXR0aW5nIGEgPHRib2R5PiB3aGVuIHVzaW5nIHRhYmxlcywgJyArICduZXN0aW5nIHRhZ3MgbGlrZSA8Zm9ybT4sIDxwPiwgb3IgPGE+LCBvciB1c2luZyBub24tU1ZHIGVsZW1lbnRzICcgKyAnaW4gYW4gPHN2Zz4gcGFyZW50LiBUcnkgaW5zcGVjdGluZyB0aGUgY2hpbGQgbm9kZXMgb2YgdGhlIGVsZW1lbnQgJyArICd3aXRoIFJlYWN0IElEIGAlc2AuJywgdXBkYXRlZEluZGV4LCBwYXJlbnRJRCkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXHRcblx0ICAgICAgICBpbml0aWFsQ2hpbGRyZW4gPSBpbml0aWFsQ2hpbGRyZW4gfHwge307XG5cdCAgICAgICAgaW5pdGlhbENoaWxkcmVuW3BhcmVudElEXSA9IGluaXRpYWxDaGlsZHJlbltwYXJlbnRJRF0gfHwgW107XG5cdCAgICAgICAgaW5pdGlhbENoaWxkcmVuW3BhcmVudElEXVt1cGRhdGVkSW5kZXhdID0gdXBkYXRlZENoaWxkO1xuXHRcblx0ICAgICAgICB1cGRhdGVkQ2hpbGRyZW4gPSB1cGRhdGVkQ2hpbGRyZW4gfHwgW107XG5cdCAgICAgICAgdXBkYXRlZENoaWxkcmVuLnB1c2godXBkYXRlZENoaWxkKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHZhciByZW5kZXJlZE1hcmt1cDtcblx0ICAgIC8vIG1hcmt1cExpc3QgaXMgZWl0aGVyIGEgbGlzdCBvZiBtYXJrdXAgb3IganVzdCBhIGxpc3Qgb2YgZWxlbWVudHNcblx0ICAgIGlmIChtYXJrdXBMaXN0Lmxlbmd0aCAmJiB0eXBlb2YgbWFya3VwTGlzdFswXSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgcmVuZGVyZWRNYXJrdXAgPSBEYW5nZXIuZGFuZ2Vyb3VzbHlSZW5kZXJNYXJrdXAobWFya3VwTGlzdCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZW5kZXJlZE1hcmt1cCA9IG1hcmt1cExpc3Q7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gUmVtb3ZlIHVwZGF0ZWQgY2hpbGRyZW4gZmlyc3Qgc28gdGhhdCBgdG9JbmRleGAgaXMgY29uc2lzdGVudC5cblx0ICAgIGlmICh1cGRhdGVkQ2hpbGRyZW4pIHtcblx0ICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB1cGRhdGVkQ2hpbGRyZW4ubGVuZ3RoOyBqKyspIHtcblx0ICAgICAgICB1cGRhdGVkQ2hpbGRyZW5bal0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh1cGRhdGVkQ2hpbGRyZW5bal0pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZm9yICh2YXIgayA9IDA7IGsgPCB1cGRhdGVzLmxlbmd0aDsgaysrKSB7XG5cdCAgICAgIHVwZGF0ZSA9IHVwZGF0ZXNba107XG5cdCAgICAgIHN3aXRjaCAodXBkYXRlLnR5cGUpIHtcblx0ICAgICAgICBjYXNlIFJlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzLklOU0VSVF9NQVJLVVA6XG5cdCAgICAgICAgICBpbnNlcnRDaGlsZEF0KHVwZGF0ZS5wYXJlbnROb2RlLCByZW5kZXJlZE1hcmt1cFt1cGRhdGUubWFya3VwSW5kZXhdLCB1cGRhdGUudG9JbmRleCk7XG5cdCAgICAgICAgICBicmVhaztcblx0ICAgICAgICBjYXNlIFJlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzLk1PVkVfRVhJU1RJTkc6XG5cdCAgICAgICAgICBpbnNlcnRDaGlsZEF0KHVwZGF0ZS5wYXJlbnROb2RlLCBpbml0aWFsQ2hpbGRyZW5bdXBkYXRlLnBhcmVudElEXVt1cGRhdGUuZnJvbUluZGV4XSwgdXBkYXRlLnRvSW5kZXgpO1xuXHQgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgY2FzZSBSZWFjdE11bHRpQ2hpbGRVcGRhdGVUeXBlcy5TRVRfTUFSS1VQOlxuXHQgICAgICAgICAgc2V0SW5uZXJIVE1MKHVwZGF0ZS5wYXJlbnROb2RlLCB1cGRhdGUuY29udGVudCk7XG5cdCAgICAgICAgICBicmVhaztcblx0ICAgICAgICBjYXNlIFJlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzLlRFWFRfQ09OVEVOVDpcblx0ICAgICAgICAgIHNldFRleHRDb250ZW50KHVwZGF0ZS5wYXJlbnROb2RlLCB1cGRhdGUuY29udGVudCk7XG5cdCAgICAgICAgICBicmVhaztcblx0ICAgICAgICBjYXNlIFJlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzLlJFTU9WRV9OT0RFOlxuXHQgICAgICAgICAgLy8gQWxyZWFkeSByZW1vdmVkIGJ5IHRoZSBmb3ItbG9vcCBhYm92ZS5cblx0ICAgICAgICAgIGJyZWFrO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0fTtcblx0XG5cdFJlYWN0UGVyZi5tZWFzdXJlTWV0aG9kcyhET01DaGlsZHJlbk9wZXJhdGlvbnMsICdET01DaGlsZHJlbk9wZXJhdGlvbnMnLCB7XG5cdCAgdXBkYXRlVGV4dENvbnRlbnQ6ICd1cGRhdGVUZXh0Q29udGVudCdcblx0fSk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IERPTUNoaWxkcmVuT3BlcmF0aW9ucztcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oNCkpKVxuXG4vKioqLyB9KSxcbi8qIDggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgey8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgRGFuZ2VyXG5cdCAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIEV4ZWN1dGlvbkVudmlyb25tZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0XG5cdHZhciBjcmVhdGVOb2Rlc0Zyb21NYXJrdXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0dmFyIGVtcHR5RnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblx0dmFyIGdldE1hcmt1cFdyYXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0dmFyIGludmFyaWFudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHRcblx0dmFyIE9QRU5fVEFHX05BTUVfRVhQID0gL14oPFteIFxcLz5dKykvO1xuXHR2YXIgUkVTVUxUX0lOREVYX0FUVFIgPSAnZGF0YS1kYW5nZXItaW5kZXgnO1xuXHRcblx0LyoqXG5cdCAqIEV4dHJhY3RzIHRoZSBgbm9kZU5hbWVgIGZyb20gYSBzdHJpbmcgb2YgbWFya3VwLlxuXHQgKlxuXHQgKiBOT1RFOiBFeHRyYWN0aW5nIHRoZSBgbm9kZU5hbWVgIGRvZXMgbm90IHJlcXVpcmUgYSByZWd1bGFyIGV4cHJlc3Npb24gbWF0Y2hcblx0ICogYmVjYXVzZSB3ZSBtYWtlIGFzc3VtcHRpb25zIGFib3V0IFJlYWN0LWdlbmVyYXRlZCBtYXJrdXAgKGkuZS4gdGhlcmUgYXJlIG5vXG5cdCAqIHNwYWNlcyBzdXJyb3VuZGluZyB0aGUgb3BlbmluZyB0YWcgYW5kIHRoZXJlIGlzIGF0IGxlYXN0IG9uZSBhdHRyaWJ1dGUpLlxuXHQgKlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gbWFya3VwIFN0cmluZyBvZiBtYXJrdXAuXG5cdCAqIEByZXR1cm4ge3N0cmluZ30gTm9kZSBuYW1lIG9mIHRoZSBzdXBwbGllZCBtYXJrdXAuXG5cdCAqIEBzZWUgaHR0cDovL2pzcGVyZi5jb20vZXh0cmFjdC1ub2RlbmFtZVxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0Tm9kZU5hbWUobWFya3VwKSB7XG5cdCAgcmV0dXJuIG1hcmt1cC5zdWJzdHJpbmcoMSwgbWFya3VwLmluZGV4T2YoJyAnKSk7XG5cdH1cblx0XG5cdHZhciBEYW5nZXIgPSB7XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJlbmRlcnMgbWFya3VwIGludG8gYW4gYXJyYXkgb2Ygbm9kZXMuIFRoZSBtYXJrdXAgaXMgZXhwZWN0ZWQgdG8gcmVuZGVyXG5cdCAgICogaW50byBhIGxpc3Qgb2Ygcm9vdCBub2Rlcy4gQWxzbywgdGhlIGxlbmd0aCBvZiBgcmVzdWx0TGlzdGAgYW5kXG5cdCAgICogYG1hcmt1cExpc3RgIHNob3VsZCBiZSB0aGUgc2FtZS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7YXJyYXk8c3RyaW5nPn0gbWFya3VwTGlzdCBMaXN0IG9mIG1hcmt1cCBzdHJpbmdzIHRvIHJlbmRlci5cblx0ICAgKiBAcmV0dXJuIHthcnJheTxET01FbGVtZW50Pn0gTGlzdCBvZiByZW5kZXJlZCBub2Rlcy5cblx0ICAgKiBAaW50ZXJuYWxcblx0ICAgKi9cblx0ICBkYW5nZXJvdXNseVJlbmRlck1hcmt1cDogZnVuY3Rpb24gKG1hcmt1cExpc3QpIHtcblx0ICAgICFFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnZGFuZ2Vyb3VzbHlSZW5kZXJNYXJrdXAoLi4uKTogQ2Fubm90IHJlbmRlciBtYXJrdXAgaW4gYSB3b3JrZXIgJyArICd0aHJlYWQuIE1ha2Ugc3VyZSBgd2luZG93YCBhbmQgYGRvY3VtZW50YCBhcmUgYXZhaWxhYmxlIGdsb2JhbGx5ICcgKyAnYmVmb3JlIHJlcXVpcmluZyBSZWFjdCB3aGVuIHVuaXQgdGVzdGluZyBvciB1c2UgJyArICdSZWFjdERPTVNlcnZlci5yZW5kZXJUb1N0cmluZyBmb3Igc2VydmVyIHJlbmRlcmluZy4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdCAgICB2YXIgbm9kZU5hbWU7XG5cdCAgICB2YXIgbWFya3VwQnlOb2RlTmFtZSA9IHt9O1xuXHQgICAgLy8gR3JvdXAgbWFya3VwIGJ5IGBub2RlTmFtZWAgaWYgYSB3cmFwIGlzIG5lY2Vzc2FyeSwgZWxzZSBieSAnKicuXG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hcmt1cExpc3QubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgIW1hcmt1cExpc3RbaV0gPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnZGFuZ2Vyb3VzbHlSZW5kZXJNYXJrdXAoLi4uKTogTWlzc2luZyBtYXJrdXAuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXHQgICAgICBub2RlTmFtZSA9IGdldE5vZGVOYW1lKG1hcmt1cExpc3RbaV0pO1xuXHQgICAgICBub2RlTmFtZSA9IGdldE1hcmt1cFdyYXAobm9kZU5hbWUpID8gbm9kZU5hbWUgOiAnKic7XG5cdCAgICAgIG1hcmt1cEJ5Tm9kZU5hbWVbbm9kZU5hbWVdID0gbWFya3VwQnlOb2RlTmFtZVtub2RlTmFtZV0gfHwgW107XG5cdCAgICAgIG1hcmt1cEJ5Tm9kZU5hbWVbbm9kZU5hbWVdW2ldID0gbWFya3VwTGlzdFtpXTtcblx0ICAgIH1cblx0ICAgIHZhciByZXN1bHRMaXN0ID0gW107XG5cdCAgICB2YXIgcmVzdWx0TGlzdEFzc2lnbm1lbnRDb3VudCA9IDA7XG5cdCAgICBmb3IgKG5vZGVOYW1lIGluIG1hcmt1cEJ5Tm9kZU5hbWUpIHtcblx0ICAgICAgaWYgKCFtYXJrdXBCeU5vZGVOYW1lLmhhc093blByb3BlcnR5KG5vZGVOYW1lKSkge1xuXHQgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBtYXJrdXBMaXN0QnlOb2RlTmFtZSA9IG1hcmt1cEJ5Tm9kZU5hbWVbbm9kZU5hbWVdO1xuXHRcblx0ICAgICAgLy8gVGhpcyBmb3ItaW4gbG9vcCBza2lwcyB0aGUgaG9sZXMgb2YgdGhlIHNwYXJzZSBhcnJheS4gVGhlIG9yZGVyIG9mXG5cdCAgICAgIC8vIGl0ZXJhdGlvbiBzaG91bGQgZm9sbG93IHRoZSBvcmRlciBvZiBhc3NpZ25tZW50LCB3aGljaCBoYXBwZW5zIHRvIG1hdGNoXG5cdCAgICAgIC8vIG51bWVyaWNhbCBpbmRleCBvcmRlciwgYnV0IHdlIGRvbid0IHJlbHkgb24gdGhhdC5cblx0ICAgICAgdmFyIHJlc3VsdEluZGV4O1xuXHQgICAgICBmb3IgKHJlc3VsdEluZGV4IGluIG1hcmt1cExpc3RCeU5vZGVOYW1lKSB7XG5cdCAgICAgICAgaWYgKG1hcmt1cExpc3RCeU5vZGVOYW1lLmhhc093blByb3BlcnR5KHJlc3VsdEluZGV4KSkge1xuXHQgICAgICAgICAgdmFyIG1hcmt1cCA9IG1hcmt1cExpc3RCeU5vZGVOYW1lW3Jlc3VsdEluZGV4XTtcblx0XG5cdCAgICAgICAgICAvLyBQdXNoIHRoZSByZXF1ZXN0ZWQgbWFya3VwIHdpdGggYW4gYWRkaXRpb25hbCBSRVNVTFRfSU5ERVhfQVRUUlxuXHQgICAgICAgICAgLy8gYXR0cmlidXRlLiAgSWYgdGhlIG1hcmt1cCBkb2VzIG5vdCBzdGFydCB3aXRoIGEgPCBjaGFyYWN0ZXIsIGl0XG5cdCAgICAgICAgICAvLyB3aWxsIGJlIGRpc2NhcmRlZCBiZWxvdyAod2l0aCBhbiBhcHByb3ByaWF0ZSBjb25zb2xlLmVycm9yKS5cblx0ICAgICAgICAgIG1hcmt1cExpc3RCeU5vZGVOYW1lW3Jlc3VsdEluZGV4XSA9IG1hcmt1cC5yZXBsYWNlKE9QRU5fVEFHX05BTUVfRVhQLFxuXHQgICAgICAgICAgLy8gVGhpcyBpbmRleCB3aWxsIGJlIHBhcnNlZCBiYWNrIG91dCBiZWxvdy5cblx0ICAgICAgICAgICckMSAnICsgUkVTVUxUX0lOREVYX0FUVFIgKyAnPVwiJyArIHJlc3VsdEluZGV4ICsgJ1wiICcpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gUmVuZGVyIGVhY2ggZ3JvdXAgb2YgbWFya3VwIHdpdGggc2ltaWxhciB3cmFwcGluZyBgbm9kZU5hbWVgLlxuXHQgICAgICB2YXIgcmVuZGVyTm9kZXMgPSBjcmVhdGVOb2Rlc0Zyb21NYXJrdXAobWFya3VwTGlzdEJ5Tm9kZU5hbWUuam9pbignJyksIGVtcHR5RnVuY3Rpb24gLy8gRG8gbm90aGluZyBzcGVjaWFsIHdpdGggPHNjcmlwdD4gdGFncy5cblx0ICAgICAgKTtcblx0XG5cdCAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcmVuZGVyTm9kZXMubGVuZ3RoOyArK2opIHtcblx0ICAgICAgICB2YXIgcmVuZGVyTm9kZSA9IHJlbmRlck5vZGVzW2pdO1xuXHQgICAgICAgIGlmIChyZW5kZXJOb2RlLmhhc0F0dHJpYnV0ZSAmJiByZW5kZXJOb2RlLmhhc0F0dHJpYnV0ZShSRVNVTFRfSU5ERVhfQVRUUikpIHtcblx0XG5cdCAgICAgICAgICByZXN1bHRJbmRleCA9ICtyZW5kZXJOb2RlLmdldEF0dHJpYnV0ZShSRVNVTFRfSU5ERVhfQVRUUik7XG5cdCAgICAgICAgICByZW5kZXJOb2RlLnJlbW92ZUF0dHJpYnV0ZShSRVNVTFRfSU5ERVhfQVRUUik7XG5cdFxuXHQgICAgICAgICAgISFyZXN1bHRMaXN0Lmhhc093blByb3BlcnR5KHJlc3VsdEluZGV4KSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdEYW5nZXI6IEFzc2lnbmluZyB0byBhbiBhbHJlYWR5LW9jY3VwaWVkIHJlc3VsdCBpbmRleC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdFxuXHQgICAgICAgICAgcmVzdWx0TGlzdFtyZXN1bHRJbmRleF0gPSByZW5kZXJOb2RlO1xuXHRcblx0ICAgICAgICAgIC8vIFRoaXMgc2hvdWxkIG1hdGNoIHJlc3VsdExpc3QubGVuZ3RoIGFuZCBtYXJrdXBMaXN0Lmxlbmd0aCB3aGVuXG5cdCAgICAgICAgICAvLyB3ZSdyZSBkb25lLlxuXHQgICAgICAgICAgcmVzdWx0TGlzdEFzc2lnbm1lbnRDb3VudCArPSAxO1xuXHQgICAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgICAgY29uc29sZS5lcnJvcignRGFuZ2VyOiBEaXNjYXJkaW5nIHVuZXhwZWN0ZWQgbm9kZTonLCByZW5kZXJOb2RlKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICAvLyBBbHRob3VnaCByZXN1bHRMaXN0IHdhcyBwb3B1bGF0ZWQgb3V0IG9mIG9yZGVyLCBpdCBzaG91bGQgbm93IGJlIGEgZGVuc2Vcblx0ICAgIC8vIGFycmF5LlxuXHQgICAgIShyZXN1bHRMaXN0QXNzaWdubWVudENvdW50ID09PSByZXN1bHRMaXN0Lmxlbmd0aCkgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRGFuZ2VyOiBEaWQgbm90IGFzc2lnbiB0byBldmVyeSBpbmRleCBvZiByZXN1bHRMaXN0LicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0XG5cdCAgICAhKHJlc3VsdExpc3QubGVuZ3RoID09PSBtYXJrdXBMaXN0Lmxlbmd0aCkgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRGFuZ2VyOiBFeHBlY3RlZCBtYXJrdXAgdG8gcmVuZGVyICVzIG5vZGVzLCBidXQgcmVuZGVyZWQgJXMuJywgbWFya3VwTGlzdC5sZW5ndGgsIHJlc3VsdExpc3QubGVuZ3RoKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdFxuXHQgICAgcmV0dXJuIHJlc3VsdExpc3Q7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogUmVwbGFjZXMgYSBub2RlIHdpdGggYSBzdHJpbmcgb2YgbWFya3VwIGF0IGl0cyBjdXJyZW50IHBvc2l0aW9uIHdpdGhpbiBpdHNcblx0ICAgKiBwYXJlbnQuIFRoZSBtYXJrdXAgbXVzdCByZW5kZXIgaW50byBhIHNpbmdsZSByb290IG5vZGUuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IG9sZENoaWxkIENoaWxkIG5vZGUgdG8gcmVwbGFjZS5cblx0ICAgKiBAcGFyYW0ge3N0cmluZ30gbWFya3VwIE1hcmt1cCB0byByZW5kZXIgaW4gcGxhY2Ugb2YgdGhlIGNoaWxkIG5vZGUuXG5cdCAgICogQGludGVybmFsXG5cdCAgICovXG5cdCAgZGFuZ2Vyb3VzbHlSZXBsYWNlTm9kZVdpdGhNYXJrdXA6IGZ1bmN0aW9uIChvbGRDaGlsZCwgbWFya3VwKSB7XG5cdCAgICAhRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2Rhbmdlcm91c2x5UmVwbGFjZU5vZGVXaXRoTWFya3VwKC4uLik6IENhbm5vdCByZW5kZXIgbWFya3VwIGluIGEgJyArICd3b3JrZXIgdGhyZWFkLiBNYWtlIHN1cmUgYHdpbmRvd2AgYW5kIGBkb2N1bWVudGAgYXJlIGF2YWlsYWJsZSAnICsgJ2dsb2JhbGx5IGJlZm9yZSByZXF1aXJpbmcgUmVhY3Qgd2hlbiB1bml0IHRlc3Rpbmcgb3IgdXNlICcgKyAnUmVhY3RET01TZXJ2ZXIucmVuZGVyVG9TdHJpbmcoKSBmb3Igc2VydmVyIHJlbmRlcmluZy4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdCAgICAhbWFya3VwID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2Rhbmdlcm91c2x5UmVwbGFjZU5vZGVXaXRoTWFya3VwKC4uLik6IE1pc3NpbmcgbWFya3VwLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0ICAgICEob2xkQ2hpbGQudGFnTmFtZS50b0xvd2VyQ2FzZSgpICE9PSAnaHRtbCcpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2Rhbmdlcm91c2x5UmVwbGFjZU5vZGVXaXRoTWFya3VwKC4uLik6IENhbm5vdCByZXBsYWNlIG1hcmt1cCBvZiB0aGUgJyArICc8aHRtbD4gbm9kZS4gVGhpcyBpcyBiZWNhdXNlIGJyb3dzZXIgcXVpcmtzIG1ha2UgdGhpcyB1bnJlbGlhYmxlICcgKyAnYW5kL29yIHNsb3cuIElmIHlvdSB3YW50IHRvIHJlbmRlciB0byB0aGUgcm9vdCB5b3UgbXVzdCB1c2UgJyArICdzZXJ2ZXIgcmVuZGVyaW5nLiBTZWUgUmVhY3RET01TZXJ2ZXIucmVuZGVyVG9TdHJpbmcoKS4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdFxuXHQgICAgdmFyIG5ld0NoaWxkO1xuXHQgICAgaWYgKHR5cGVvZiBtYXJrdXAgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgIG5ld0NoaWxkID0gY3JlYXRlTm9kZXNGcm9tTWFya3VwKG1hcmt1cCwgZW1wdHlGdW5jdGlvbilbMF07XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBuZXdDaGlsZCA9IG1hcmt1cDtcblx0ICAgIH1cblx0ICAgIG9sZENoaWxkLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG5ld0NoaWxkLCBvbGRDaGlsZCk7XG5cdCAgfVxuXHRcblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gRGFuZ2VyO1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg0KSkpXG5cbi8qKiovIH0pLFxuLyogOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgRXhlY3V0aW9uRW52aXJvbm1lbnRcblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgY2FuVXNlRE9NID0gISEodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmRvY3VtZW50ICYmIHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KTtcblx0XG5cdC8qKlxuXHQgKiBTaW1wbGUsIGxpZ2h0d2VpZ2h0IG1vZHVsZSBhc3Npc3Rpbmcgd2l0aCB0aGUgZGV0ZWN0aW9uIGFuZCBjb250ZXh0IG9mXG5cdCAqIFdvcmtlci4gSGVscHMgYXZvaWQgY2lyY3VsYXIgZGVwZW5kZW5jaWVzIGFuZCBhbGxvd3MgY29kZSB0byByZWFzb24gYWJvdXRcblx0ICogd2hldGhlciBvciBub3QgdGhleSBhcmUgaW4gYSBXb3JrZXIsIGV2ZW4gaWYgdGhleSBuZXZlciBpbmNsdWRlIHRoZSBtYWluXG5cdCAqIGBSZWFjdFdvcmtlcmAgZGVwZW5kZW5jeS5cblx0ICovXG5cdHZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHtcblx0XG5cdCAgY2FuVXNlRE9NOiBjYW5Vc2VET00sXG5cdFxuXHQgIGNhblVzZVdvcmtlcnM6IHR5cGVvZiBXb3JrZXIgIT09ICd1bmRlZmluZWQnLFxuXHRcblx0ICBjYW5Vc2VFdmVudExpc3RlbmVyczogY2FuVXNlRE9NICYmICEhKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyIHx8IHdpbmRvdy5hdHRhY2hFdmVudCksXG5cdFxuXHQgIGNhblVzZVZpZXdwb3J0OiBjYW5Vc2VET00gJiYgISF3aW5kb3cuc2NyZWVuLFxuXHRcblx0ICBpc0luV29ya2VyOiAhY2FuVXNlRE9NIC8vIEZvciBub3csIHRoaXMgaXMgdHJ1ZSAtIG1pZ2h0IGNoYW5nZSBpbiB0aGUgZnV0dXJlLlxuXHRcblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gRXhlY3V0aW9uRW52aXJvbm1lbnQ7XG5cbi8qKiovIH0pLFxuLyogMTAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgey8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgY3JlYXRlTm9kZXNGcm9tTWFya3VwXG5cdCAqIEB0eXBlY2hlY2tzXG5cdCAqL1xuXHRcblx0Lyplc2xpbnQtZGlzYWJsZSBmYi13d3cvdW5zYWZlLWh0bWwqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIEV4ZWN1dGlvbkVudmlyb25tZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0XG5cdHZhciBjcmVhdGVBcnJheUZyb21NaXhlZCA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHR2YXIgZ2V0TWFya3VwV3JhcCA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHR2YXIgaW52YXJpYW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7XG5cdFxuXHQvKipcblx0ICogRHVtbXkgY29udGFpbmVyIHVzZWQgdG8gcmVuZGVyIGFsbCBtYXJrdXAuXG5cdCAqL1xuXHR2YXIgZHVtbXlOb2RlID0gRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NID8gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykgOiBudWxsO1xuXHRcblx0LyoqXG5cdCAqIFBhdHRlcm4gdXNlZCBieSBgZ2V0Tm9kZU5hbWVgLlxuXHQgKi9cblx0dmFyIG5vZGVOYW1lUGF0dGVybiA9IC9eXFxzKjwoXFx3KykvO1xuXHRcblx0LyoqXG5cdCAqIEV4dHJhY3RzIHRoZSBgbm9kZU5hbWVgIG9mIHRoZSBmaXJzdCBlbGVtZW50IGluIGEgc3RyaW5nIG9mIG1hcmt1cC5cblx0ICpcblx0ICogQHBhcmFtIHtzdHJpbmd9IG1hcmt1cCBTdHJpbmcgb2YgbWFya3VwLlxuXHQgKiBAcmV0dXJuIHs/c3RyaW5nfSBOb2RlIG5hbWUgb2YgdGhlIHN1cHBsaWVkIG1hcmt1cC5cblx0ICovXG5cdGZ1bmN0aW9uIGdldE5vZGVOYW1lKG1hcmt1cCkge1xuXHQgIHZhciBub2RlTmFtZU1hdGNoID0gbWFya3VwLm1hdGNoKG5vZGVOYW1lUGF0dGVybik7XG5cdCAgcmV0dXJuIG5vZGVOYW1lTWF0Y2ggJiYgbm9kZU5hbWVNYXRjaFsxXS50b0xvd2VyQ2FzZSgpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlcyBhbiBhcnJheSBjb250YWluaW5nIHRoZSBub2RlcyByZW5kZXJlZCBmcm9tIHRoZSBzdXBwbGllZCBtYXJrdXAuIFRoZVxuXHQgKiBvcHRpb25hbGx5IHN1cHBsaWVkIGBoYW5kbGVTY3JpcHRgIGZ1bmN0aW9uIHdpbGwgYmUgaW52b2tlZCBvbmNlIGZvciBlYWNoXG5cdCAqIDxzY3JpcHQ+IGVsZW1lbnQgdGhhdCBpcyByZW5kZXJlZC4gSWYgbm8gYGhhbmRsZVNjcmlwdGAgZnVuY3Rpb24gaXMgc3VwcGxpZWQsXG5cdCAqIGFuIGV4Y2VwdGlvbiBpcyB0aHJvd24gaWYgYW55IDxzY3JpcHQ+IGVsZW1lbnRzIGFyZSByZW5kZXJlZC5cblx0ICpcblx0ICogQHBhcmFtIHtzdHJpbmd9IG1hcmt1cCBBIHN0cmluZyBvZiB2YWxpZCBIVE1MIG1hcmt1cC5cblx0ICogQHBhcmFtIHs/ZnVuY3Rpb259IGhhbmRsZVNjcmlwdCBJbnZva2VkIG9uY2UgZm9yIGVhY2ggcmVuZGVyZWQgPHNjcmlwdD4uXG5cdCAqIEByZXR1cm4ge2FycmF5PERPTUVsZW1lbnR8RE9NVGV4dE5vZGU+fSBBbiBhcnJheSBvZiByZW5kZXJlZCBub2Rlcy5cblx0ICovXG5cdGZ1bmN0aW9uIGNyZWF0ZU5vZGVzRnJvbU1hcmt1cChtYXJrdXAsIGhhbmRsZVNjcmlwdCkge1xuXHQgIHZhciBub2RlID0gZHVtbXlOb2RlO1xuXHQgICEhIWR1bW15Tm9kZSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdjcmVhdGVOb2Rlc0Zyb21NYXJrdXAgZHVtbXkgbm90IGluaXRpYWxpemVkJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXHQgIHZhciBub2RlTmFtZSA9IGdldE5vZGVOYW1lKG1hcmt1cCk7XG5cdFxuXHQgIHZhciB3cmFwID0gbm9kZU5hbWUgJiYgZ2V0TWFya3VwV3JhcChub2RlTmFtZSk7XG5cdCAgaWYgKHdyYXApIHtcblx0ICAgIG5vZGUuaW5uZXJIVE1MID0gd3JhcFsxXSArIG1hcmt1cCArIHdyYXBbMl07XG5cdFxuXHQgICAgdmFyIHdyYXBEZXB0aCA9IHdyYXBbMF07XG5cdCAgICB3aGlsZSAod3JhcERlcHRoLS0pIHtcblx0ICAgICAgbm9kZSA9IG5vZGUubGFzdENoaWxkO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICBub2RlLmlubmVySFRNTCA9IG1hcmt1cDtcblx0ICB9XG5cdFxuXHQgIHZhciBzY3JpcHRzID0gbm9kZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0Jyk7XG5cdCAgaWYgKHNjcmlwdHMubGVuZ3RoKSB7XG5cdCAgICAhaGFuZGxlU2NyaXB0ID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2NyZWF0ZU5vZGVzRnJvbU1hcmt1cCguLi4pOiBVbmV4cGVjdGVkIDxzY3JpcHQ+IGVsZW1lbnQgcmVuZGVyZWQuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXHQgICAgY3JlYXRlQXJyYXlGcm9tTWl4ZWQoc2NyaXB0cykuZm9yRWFjaChoYW5kbGVTY3JpcHQpO1xuXHQgIH1cblx0XG5cdCAgdmFyIG5vZGVzID0gY3JlYXRlQXJyYXlGcm9tTWl4ZWQobm9kZS5jaGlsZE5vZGVzKTtcblx0ICB3aGlsZSAobm9kZS5sYXN0Q2hpbGQpIHtcblx0ICAgIG5vZGUucmVtb3ZlQ2hpbGQobm9kZS5sYXN0Q2hpbGQpO1xuXHQgIH1cblx0ICByZXR1cm4gbm9kZXM7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gY3JlYXRlTm9kZXNGcm9tTWFya3VwO1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg0KSkpXG5cbi8qKiovIH0pLFxuLyogMTEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIGNyZWF0ZUFycmF5RnJvbU1peGVkXG5cdCAqIEB0eXBlY2hlY2tzXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHRvQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblx0XG5cdC8qKlxuXHQgKiBQZXJmb3JtIGEgaGV1cmlzdGljIHRlc3QgdG8gZGV0ZXJtaW5lIGlmIGFuIG9iamVjdCBpcyBcImFycmF5LWxpa2VcIi5cblx0ICpcblx0ICogICBBIG1vbmsgYXNrZWQgSm9zaHUsIGEgWmVuIG1hc3RlciwgXCJIYXMgYSBkb2cgQnVkZGhhIG5hdHVyZT9cIlxuXHQgKiAgIEpvc2h1IHJlcGxpZWQ6IFwiTXUuXCJcblx0ICpcblx0ICogVGhpcyBmdW5jdGlvbiBkZXRlcm1pbmVzIGlmIGl0cyBhcmd1bWVudCBoYXMgXCJhcnJheSBuYXR1cmVcIjogaXQgcmV0dXJuc1xuXHQgKiB0cnVlIGlmIHRoZSBhcmd1bWVudCBpcyBhbiBhY3R1YWwgYXJyYXksIGFuIGBhcmd1bWVudHMnIG9iamVjdCwgb3IgYW5cblx0ICogSFRNTENvbGxlY3Rpb24gKGUuZy4gbm9kZS5jaGlsZE5vZGVzIG9yIG5vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoKSkuXG5cdCAqXG5cdCAqIEl0IHdpbGwgcmV0dXJuIGZhbHNlIGZvciBvdGhlciBhcnJheS1saWtlIG9iamVjdHMgbGlrZSBGaWxlbGlzdC5cblx0ICpcblx0ICogQHBhcmFtIHsqfSBvYmpcblx0ICogQHJldHVybiB7Ym9vbGVhbn1cblx0ICovXG5cdGZ1bmN0aW9uIGhhc0FycmF5TmF0dXJlKG9iaikge1xuXHQgIHJldHVybihcblx0ICAgIC8vIG5vdCBudWxsL2ZhbHNlXG5cdCAgICAhIW9iaiAmJiAoXG5cdCAgICAvLyBhcnJheXMgYXJlIG9iamVjdHMsIE5vZGVMaXN0cyBhcmUgZnVuY3Rpb25zIGluIFNhZmFyaVxuXHQgICAgdHlwZW9mIG9iaiA9PSAnb2JqZWN0JyB8fCB0eXBlb2Ygb2JqID09ICdmdW5jdGlvbicpICYmXG5cdCAgICAvLyBxdWFja3MgbGlrZSBhbiBhcnJheVxuXHQgICAgJ2xlbmd0aCcgaW4gb2JqICYmXG5cdCAgICAvLyBub3Qgd2luZG93XG5cdCAgICAhKCdzZXRJbnRlcnZhbCcgaW4gb2JqKSAmJlxuXHQgICAgLy8gbm8gRE9NIG5vZGUgc2hvdWxkIGJlIGNvbnNpZGVyZWQgYW4gYXJyYXktbGlrZVxuXHQgICAgLy8gYSAnc2VsZWN0JyBlbGVtZW50IGhhcyAnbGVuZ3RoJyBhbmQgJ2l0ZW0nIHByb3BlcnRpZXMgb24gSUU4XG5cdCAgICB0eXBlb2Ygb2JqLm5vZGVUeXBlICE9ICdudW1iZXInICYmIChcblx0ICAgIC8vIGEgcmVhbCBhcnJheVxuXHQgICAgQXJyYXkuaXNBcnJheShvYmopIHx8XG5cdCAgICAvLyBhcmd1bWVudHNcblx0ICAgICdjYWxsZWUnIGluIG9iaiB8fFxuXHQgICAgLy8gSFRNTENvbGxlY3Rpb24vTm9kZUxpc3Rcblx0ICAgICdpdGVtJyBpbiBvYmopXG5cdCAgKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEVuc3VyZSB0aGF0IHRoZSBhcmd1bWVudCBpcyBhbiBhcnJheSBieSB3cmFwcGluZyBpdCBpbiBhbiBhcnJheSBpZiBpdCBpcyBub3QuXG5cdCAqIENyZWF0ZXMgYSBjb3B5IG9mIHRoZSBhcmd1bWVudCBpZiBpdCBpcyBhbHJlYWR5IGFuIGFycmF5LlxuXHQgKlxuXHQgKiBUaGlzIGlzIG1vc3RseSB1c2VmdWwgaWRpb21hdGljYWxseTpcblx0ICpcblx0ICogICB2YXIgY3JlYXRlQXJyYXlGcm9tTWl4ZWQgPSByZXF1aXJlKCdjcmVhdGVBcnJheUZyb21NaXhlZCcpO1xuXHQgKlxuXHQgKiAgIGZ1bmN0aW9uIHRha2VzT25lT3JNb3JlVGhpbmdzKHRoaW5ncykge1xuXHQgKiAgICAgdGhpbmdzID0gY3JlYXRlQXJyYXlGcm9tTWl4ZWQodGhpbmdzKTtcblx0ICogICAgIC4uLlxuXHQgKiAgIH1cblx0ICpcblx0ICogVGhpcyBhbGxvd3MgeW91IHRvIHRyZWF0IGB0aGluZ3MnIGFzIGFuIGFycmF5LCBidXQgYWNjZXB0IHNjYWxhcnMgaW4gdGhlIEFQSS5cblx0ICpcblx0ICogSWYgeW91IG5lZWQgdG8gY29udmVydCBhbiBhcnJheS1saWtlIG9iamVjdCwgbGlrZSBgYXJndW1lbnRzYCwgaW50byBhbiBhcnJheVxuXHQgKiB1c2UgdG9BcnJheSBpbnN0ZWFkLlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IG9ialxuXHQgKiBAcmV0dXJuIHthcnJheX1cblx0ICovXG5cdGZ1bmN0aW9uIGNyZWF0ZUFycmF5RnJvbU1peGVkKG9iaikge1xuXHQgIGlmICghaGFzQXJyYXlOYXR1cmUob2JqKSkge1xuXHQgICAgcmV0dXJuIFtvYmpdO1xuXHQgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShvYmopKSB7XG5cdCAgICByZXR1cm4gb2JqLnNsaWNlKCk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiB0b0FycmF5KG9iaik7XG5cdCAgfVxuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGNyZWF0ZUFycmF5RnJvbU1peGVkO1xuXG4vKioqLyB9KSxcbi8qIDEyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MpIHsvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIHRvQXJyYXlcblx0ICogQHR5cGVjaGVja3Ncblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgaW52YXJpYW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7XG5cdFxuXHQvKipcblx0ICogQ29udmVydCBhcnJheS1saWtlIG9iamVjdHMgdG8gYXJyYXlzLlxuXHQgKlxuXHQgKiBUaGlzIEFQSSBhc3N1bWVzIHRoZSBjYWxsZXIga25vd3MgdGhlIGNvbnRlbnRzIG9mIHRoZSBkYXRhIHR5cGUuIEZvciBsZXNzXG5cdCAqIHdlbGwgZGVmaW5lZCBpbnB1dHMgdXNlIGNyZWF0ZUFycmF5RnJvbU1peGVkLlxuXHQgKlxuXHQgKiBAcGFyYW0ge29iamVjdHxmdW5jdGlvbnxmaWxlbGlzdH0gb2JqXG5cdCAqIEByZXR1cm4ge2FycmF5fVxuXHQgKi9cblx0ZnVuY3Rpb24gdG9BcnJheShvYmopIHtcblx0ICB2YXIgbGVuZ3RoID0gb2JqLmxlbmd0aDtcblx0XG5cdCAgLy8gU29tZSBicm93c2UgYnVpbHRpbiBvYmplY3RzIGNhbiByZXBvcnQgdHlwZW9mICdmdW5jdGlvbicgKGUuZy4gTm9kZUxpc3QgaW5cblx0ICAvLyBvbGQgdmVyc2lvbnMgb2YgU2FmYXJpKS5cblx0ICAhKCFBcnJheS5pc0FycmF5KG9iaikgJiYgKHR5cGVvZiBvYmogPT09ICdvYmplY3QnIHx8IHR5cGVvZiBvYmogPT09ICdmdW5jdGlvbicpKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICd0b0FycmF5OiBBcnJheS1saWtlIG9iamVjdCBleHBlY3RlZCcpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0XG5cdCAgISh0eXBlb2YgbGVuZ3RoID09PSAnbnVtYmVyJykgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAndG9BcnJheTogT2JqZWN0IG5lZWRzIGEgbGVuZ3RoIHByb3BlcnR5JykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXHRcblx0ICAhKGxlbmd0aCA9PT0gMCB8fCBsZW5ndGggLSAxIGluIG9iaikgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAndG9BcnJheTogT2JqZWN0IHNob3VsZCBoYXZlIGtleXMgZm9yIGluZGljZXMnKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdFxuXHQgIC8vIE9sZCBJRSBkb2Vzbid0IGdpdmUgY29sbGVjdGlvbnMgYWNjZXNzIHRvIGhhc093blByb3BlcnR5LiBBc3N1bWUgaW5wdXRzXG5cdCAgLy8gd2l0aG91dCBtZXRob2Qgd2lsbCB0aHJvdyBkdXJpbmcgdGhlIHNsaWNlIGNhbGwgYW5kIHNraXAgc3RyYWlnaHQgdG8gdGhlXG5cdCAgLy8gZmFsbGJhY2suXG5cdCAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eSkge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKG9iaik7XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgIC8vIElFIDwgOSBkb2VzIG5vdCBzdXBwb3J0IEFycmF5I3NsaWNlIG9uIGNvbGxlY3Rpb25zIG9iamVjdHNcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8vIEZhbGwgYmFjayB0byBjb3B5aW5nIGtleSBieSBrZXkuIFRoaXMgYXNzdW1lcyBhbGwga2V5cyBoYXZlIGEgdmFsdWUsXG5cdCAgLy8gc28gd2lsbCBub3QgcHJlc2VydmUgc3BhcnNlbHkgcG9wdWxhdGVkIGlucHV0cy5cblx0ICB2YXIgcmV0ID0gQXJyYXkobGVuZ3RoKTtcblx0ICBmb3IgKHZhciBpaSA9IDA7IGlpIDwgbGVuZ3RoOyBpaSsrKSB7XG5cdCAgICByZXRbaWldID0gb2JqW2lpXTtcblx0ICB9XG5cdCAgcmV0dXJuIHJldDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSB0b0FycmF5O1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg0KSkpXG5cbi8qKiovIH0pLFxuLyogMTMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgey8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgaW52YXJpYW50XG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0LyoqXG5cdCAqIFVzZSBpbnZhcmlhbnQoKSB0byBhc3NlcnQgc3RhdGUgd2hpY2ggeW91ciBwcm9ncmFtIGFzc3VtZXMgdG8gYmUgdHJ1ZS5cblx0ICpcblx0ICogUHJvdmlkZSBzcHJpbnRmLXN0eWxlIGZvcm1hdCAob25seSAlcyBpcyBzdXBwb3J0ZWQpIGFuZCBhcmd1bWVudHNcblx0ICogdG8gcHJvdmlkZSBpbmZvcm1hdGlvbiBhYm91dCB3aGF0IGJyb2tlIGFuZCB3aGF0IHlvdSB3ZXJlXG5cdCAqIGV4cGVjdGluZy5cblx0ICpcblx0ICogVGhlIGludmFyaWFudCBtZXNzYWdlIHdpbGwgYmUgc3RyaXBwZWQgaW4gcHJvZHVjdGlvbiwgYnV0IHRoZSBpbnZhcmlhbnRcblx0ICogd2lsbCByZW1haW4gdG8gZW5zdXJlIGxvZ2ljIGRvZXMgbm90IGRpZmZlciBpbiBwcm9kdWN0aW9uLlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGludmFyaWFudChjb25kaXRpb24sIGZvcm1hdCwgYSwgYiwgYywgZCwgZSwgZikge1xuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICBpZiAoZm9ybWF0ID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhcmlhbnQgcmVxdWlyZXMgYW4gZXJyb3IgbWVzc2FnZSBhcmd1bWVudCcpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgaWYgKCFjb25kaXRpb24pIHtcblx0ICAgIHZhciBlcnJvcjtcblx0ICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICBlcnJvciA9IG5ldyBFcnJvcignTWluaWZpZWQgZXhjZXB0aW9uIG9jY3VycmVkOyB1c2UgdGhlIG5vbi1taW5pZmllZCBkZXYgZW52aXJvbm1lbnQgJyArICdmb3IgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZSBhbmQgYWRkaXRpb25hbCBoZWxwZnVsIHdhcm5pbmdzLicpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdmFyIGFyZ3MgPSBbYSwgYiwgYywgZCwgZSwgZl07XG5cdCAgICAgIHZhciBhcmdJbmRleCA9IDA7XG5cdCAgICAgIGVycm9yID0gbmV3IEVycm9yKGZvcm1hdC5yZXBsYWNlKC8lcy9nLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIGFyZ3NbYXJnSW5kZXgrK107XG5cdCAgICAgIH0pKTtcblx0ICAgICAgZXJyb3IubmFtZSA9ICdJbnZhcmlhbnQgVmlvbGF0aW9uJztcblx0ICAgIH1cblx0XG5cdCAgICBlcnJvci5mcmFtZXNUb1BvcCA9IDE7IC8vIHdlIGRvbid0IGNhcmUgYWJvdXQgaW52YXJpYW50J3Mgb3duIGZyYW1lXG5cdCAgICB0aHJvdyBlcnJvcjtcblx0ICB9XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaW52YXJpYW50O1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg0KSkpXG5cbi8qKiovIH0pLFxuLyogMTQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgey8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgZ2V0TWFya3VwV3JhcFxuXHQgKi9cblx0XG5cdC8qZXNsaW50LWRpc2FibGUgZmItd3d3L3Vuc2FmZS1odG1sICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgRXhlY3V0aW9uRW52aXJvbm1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHRcblx0dmFyIGludmFyaWFudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHRcblx0LyoqXG5cdCAqIER1bW15IGNvbnRhaW5lciB1c2VkIHRvIGRldGVjdCB3aGljaCB3cmFwcyBhcmUgbmVjZXNzYXJ5LlxuXHQgKi9cblx0dmFyIGR1bW15Tm9kZSA9IEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSA/IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpIDogbnVsbDtcblx0XG5cdC8qKlxuXHQgKiBTb21lIGJyb3dzZXJzIGNhbm5vdCB1c2UgYGlubmVySFRNTGAgdG8gcmVuZGVyIGNlcnRhaW4gZWxlbWVudHMgc3RhbmRhbG9uZSxcblx0ICogc28gd2Ugd3JhcCB0aGVtLCByZW5kZXIgdGhlIHdyYXBwZWQgbm9kZXMsIHRoZW4gZXh0cmFjdCB0aGUgZGVzaXJlZCBub2RlLlxuXHQgKlxuXHQgKiBJbiBJRTgsIGNlcnRhaW4gZWxlbWVudHMgY2Fubm90IHJlbmRlciBhbG9uZSwgc28gd3JhcCBhbGwgZWxlbWVudHMgKCcqJykuXG5cdCAqL1xuXHRcblx0dmFyIHNob3VsZFdyYXAgPSB7fTtcblx0XG5cdHZhciBzZWxlY3RXcmFwID0gWzEsICc8c2VsZWN0IG11bHRpcGxlPVwidHJ1ZVwiPicsICc8L3NlbGVjdD4nXTtcblx0dmFyIHRhYmxlV3JhcCA9IFsxLCAnPHRhYmxlPicsICc8L3RhYmxlPiddO1xuXHR2YXIgdHJXcmFwID0gWzMsICc8dGFibGU+PHRib2R5Pjx0cj4nLCAnPC90cj48L3Rib2R5PjwvdGFibGU+J107XG5cdFxuXHR2YXIgc3ZnV3JhcCA9IFsxLCAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+JywgJzwvc3ZnPiddO1xuXHRcblx0dmFyIG1hcmt1cFdyYXAgPSB7XG5cdCAgJyonOiBbMSwgJz88ZGl2PicsICc8L2Rpdj4nXSxcblx0XG5cdCAgJ2FyZWEnOiBbMSwgJzxtYXA+JywgJzwvbWFwPiddLFxuXHQgICdjb2wnOiBbMiwgJzx0YWJsZT48dGJvZHk+PC90Ym9keT48Y29sZ3JvdXA+JywgJzwvY29sZ3JvdXA+PC90YWJsZT4nXSxcblx0ICAnbGVnZW5kJzogWzEsICc8ZmllbGRzZXQ+JywgJzwvZmllbGRzZXQ+J10sXG5cdCAgJ3BhcmFtJzogWzEsICc8b2JqZWN0PicsICc8L29iamVjdD4nXSxcblx0ICAndHInOiBbMiwgJzx0YWJsZT48dGJvZHk+JywgJzwvdGJvZHk+PC90YWJsZT4nXSxcblx0XG5cdCAgJ29wdGdyb3VwJzogc2VsZWN0V3JhcCxcblx0ICAnb3B0aW9uJzogc2VsZWN0V3JhcCxcblx0XG5cdCAgJ2NhcHRpb24nOiB0YWJsZVdyYXAsXG5cdCAgJ2NvbGdyb3VwJzogdGFibGVXcmFwLFxuXHQgICd0Ym9keSc6IHRhYmxlV3JhcCxcblx0ICAndGZvb3QnOiB0YWJsZVdyYXAsXG5cdCAgJ3RoZWFkJzogdGFibGVXcmFwLFxuXHRcblx0ICAndGQnOiB0cldyYXAsXG5cdCAgJ3RoJzogdHJXcmFwXG5cdH07XG5cdFxuXHQvLyBJbml0aWFsaXplIHRoZSBTVkcgZWxlbWVudHMgc2luY2Ugd2Uga25vdyB0aGV5J2xsIGFsd2F5cyBuZWVkIHRvIGJlIHdyYXBwZWRcblx0Ly8gY29uc2lzdGVudGx5LiBJZiB0aGV5IGFyZSBjcmVhdGVkIGluc2lkZSBhIDxkaXY+IHRoZXkgd2lsbCBiZSBpbml0aWFsaXplZCBpblxuXHQvLyB0aGUgd3JvbmcgbmFtZXNwYWNlIChhbmQgd2lsbCBub3QgZGlzcGxheSkuXG5cdHZhciBzdmdFbGVtZW50cyA9IFsnY2lyY2xlJywgJ2NsaXBQYXRoJywgJ2RlZnMnLCAnZWxsaXBzZScsICdnJywgJ2ltYWdlJywgJ2xpbmUnLCAnbGluZWFyR3JhZGllbnQnLCAnbWFzaycsICdwYXRoJywgJ3BhdHRlcm4nLCAncG9seWdvbicsICdwb2x5bGluZScsICdyYWRpYWxHcmFkaWVudCcsICdyZWN0JywgJ3N0b3AnLCAndGV4dCcsICd0c3BhbiddO1xuXHRzdmdFbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChub2RlTmFtZSkge1xuXHQgIG1hcmt1cFdyYXBbbm9kZU5hbWVdID0gc3ZnV3JhcDtcblx0ICBzaG91bGRXcmFwW25vZGVOYW1lXSA9IHRydWU7XG5cdH0pO1xuXHRcblx0LyoqXG5cdCAqIEdldHMgdGhlIG1hcmt1cCB3cmFwIGNvbmZpZ3VyYXRpb24gZm9yIHRoZSBzdXBwbGllZCBgbm9kZU5hbWVgLlxuXHQgKlxuXHQgKiBOT1RFOiBUaGlzIGxhemlseSBkZXRlY3RzIHdoaWNoIHdyYXBzIGFyZSBuZWNlc3NhcnkgZm9yIHRoZSBjdXJyZW50IGJyb3dzZXIuXG5cdCAqXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBub2RlTmFtZSBMb3dlcmNhc2UgYG5vZGVOYW1lYC5cblx0ICogQHJldHVybiB7P2FycmF5fSBNYXJrdXAgd3JhcCBjb25maWd1cmF0aW9uLCBpZiBhcHBsaWNhYmxlLlxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0TWFya3VwV3JhcChub2RlTmFtZSkge1xuXHQgICEhIWR1bW15Tm9kZSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdNYXJrdXAgd3JhcHBpbmcgbm9kZSBub3QgaW5pdGlhbGl6ZWQnKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdCAgaWYgKCFtYXJrdXBXcmFwLmhhc093blByb3BlcnR5KG5vZGVOYW1lKSkge1xuXHQgICAgbm9kZU5hbWUgPSAnKic7XG5cdCAgfVxuXHQgIGlmICghc2hvdWxkV3JhcC5oYXNPd25Qcm9wZXJ0eShub2RlTmFtZSkpIHtcblx0ICAgIGlmIChub2RlTmFtZSA9PT0gJyonKSB7XG5cdCAgICAgIGR1bW15Tm9kZS5pbm5lckhUTUwgPSAnPGxpbmsgLz4nO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZHVtbXlOb2RlLmlubmVySFRNTCA9ICc8JyArIG5vZGVOYW1lICsgJz48LycgKyBub2RlTmFtZSArICc+Jztcblx0ICAgIH1cblx0ICAgIHNob3VsZFdyYXBbbm9kZU5hbWVdID0gIWR1bW15Tm9kZS5maXJzdENoaWxkO1xuXHQgIH1cblx0ICByZXR1cm4gc2hvdWxkV3JhcFtub2RlTmFtZV0gPyBtYXJrdXBXcmFwW25vZGVOYW1lXSA6IG51bGw7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZ2V0TWFya3VwV3JhcDtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oNCkpKVxuXG4vKioqLyB9KSxcbi8qIDE1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBlbXB0eUZ1bmN0aW9uXG5cdCAqL1xuXHRcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRmdW5jdGlvbiBtYWtlRW1wdHlGdW5jdGlvbihhcmcpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuIGFyZztcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogVGhpcyBmdW5jdGlvbiBhY2NlcHRzIGFuZCBkaXNjYXJkcyBpbnB1dHM7IGl0IGhhcyBubyBzaWRlIGVmZmVjdHMuIFRoaXMgaXNcblx0ICogcHJpbWFyaWx5IHVzZWZ1bCBpZGlvbWF0aWNhbGx5IGZvciBvdmVycmlkYWJsZSBmdW5jdGlvbiBlbmRwb2ludHMgd2hpY2hcblx0ICogYWx3YXlzIG5lZWQgdG8gYmUgY2FsbGFibGUsIHNpbmNlIEpTIGxhY2tzIGEgbnVsbC1jYWxsIGlkaW9tIGFsYSBDb2NvYS5cblx0ICovXG5cdGZ1bmN0aW9uIGVtcHR5RnVuY3Rpb24oKSB7fVxuXHRcblx0ZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJucyA9IG1ha2VFbXB0eUZ1bmN0aW9uO1xuXHRlbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zRmFsc2UgPSBtYWtlRW1wdHlGdW5jdGlvbihmYWxzZSk7XG5cdGVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNUcnVlID0gbWFrZUVtcHR5RnVuY3Rpb24odHJ1ZSk7XG5cdGVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNOdWxsID0gbWFrZUVtcHR5RnVuY3Rpb24obnVsbCk7XG5cdGVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNUaGlzID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiB0aGlzO1xuXHR9O1xuXHRlbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zQXJndW1lbnQgPSBmdW5jdGlvbiAoYXJnKSB7XG5cdCAgcmV0dXJuIGFyZztcblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZW1wdHlGdW5jdGlvbjtcblxuLyoqKi8gfSksXG4vKiAxNiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXNcblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIga2V5TWlycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7XG5cdFxuXHQvKipcblx0ICogV2hlbiBhIGNvbXBvbmVudCdzIGNoaWxkcmVuIGFyZSB1cGRhdGVkLCBhIHNlcmllcyBvZiB1cGRhdGUgY29uZmlndXJhdGlvblxuXHQgKiBvYmplY3RzIGFyZSBjcmVhdGVkIGluIG9yZGVyIHRvIGJhdGNoIGFuZCBzZXJpYWxpemUgdGhlIHJlcXVpcmVkIGNoYW5nZXMuXG5cdCAqXG5cdCAqIEVudW1lcmF0ZXMgYWxsIHRoZSBwb3NzaWJsZSB0eXBlcyBvZiB1cGRhdGUgY29uZmlndXJhdGlvbnMuXG5cdCAqXG5cdCAqIEBpbnRlcm5hbFxuXHQgKi9cblx0dmFyIFJlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzID0ga2V5TWlycm9yKHtcblx0ICBJTlNFUlRfTUFSS1VQOiBudWxsLFxuXHQgIE1PVkVfRVhJU1RJTkc6IG51bGwsXG5cdCAgUkVNT1ZFX05PREU6IG51bGwsXG5cdCAgU0VUX01BUktVUDogbnVsbCxcblx0ICBURVhUX0NPTlRFTlQ6IG51bGxcblx0fSk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFJlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzO1xuXG4vKioqLyB9KSxcbi8qIDE3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MpIHsvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIGtleU1pcnJvclxuXHQgKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBpbnZhcmlhbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblx0XG5cdC8qKlxuXHQgKiBDb25zdHJ1Y3RzIGFuIGVudW1lcmF0aW9uIHdpdGgga2V5cyBlcXVhbCB0byB0aGVpciB2YWx1ZS5cblx0ICpcblx0ICogRm9yIGV4YW1wbGU6XG5cdCAqXG5cdCAqICAgdmFyIENPTE9SUyA9IGtleU1pcnJvcih7Ymx1ZTogbnVsbCwgcmVkOiBudWxsfSk7XG5cdCAqICAgdmFyIG15Q29sb3IgPSBDT0xPUlMuYmx1ZTtcblx0ICogICB2YXIgaXNDb2xvclZhbGlkID0gISFDT0xPUlNbbXlDb2xvcl07XG5cdCAqXG5cdCAqIFRoZSBsYXN0IGxpbmUgY291bGQgbm90IGJlIHBlcmZvcm1lZCBpZiB0aGUgdmFsdWVzIG9mIHRoZSBnZW5lcmF0ZWQgZW51bSB3ZXJlXG5cdCAqIG5vdCBlcXVhbCB0byB0aGVpciBrZXlzLlxuXHQgKlxuXHQgKiAgIElucHV0OiAge2tleTE6IHZhbDEsIGtleTI6IHZhbDJ9XG5cdCAqICAgT3V0cHV0OiB7a2V5MToga2V5MSwga2V5Mjoga2V5Mn1cblx0ICpcblx0ICogQHBhcmFtIHtvYmplY3R9IG9ialxuXHQgKiBAcmV0dXJuIHtvYmplY3R9XG5cdCAqL1xuXHR2YXIga2V5TWlycm9yID0gZnVuY3Rpb24gKG9iaikge1xuXHQgIHZhciByZXQgPSB7fTtcblx0ICB2YXIga2V5O1xuXHQgICEob2JqIGluc3RhbmNlb2YgT2JqZWN0ICYmICFBcnJheS5pc0FycmF5KG9iaikpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2tleU1pcnJvciguLi4pOiBBcmd1bWVudCBtdXN0IGJlIGFuIG9iamVjdC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdCAgZm9yIChrZXkgaW4gb2JqKSB7XG5cdCAgICBpZiAoIW9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG5cdCAgICAgIGNvbnRpbnVlO1xuXHQgICAgfVxuXHQgICAgcmV0W2tleV0gPSBrZXk7XG5cdCAgfVxuXHQgIHJldHVybiByZXQ7XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGtleU1pcnJvcjtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oNCkpKVxuXG4vKioqLyB9KSxcbi8qIDE4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MpIHsvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0UGVyZlxuXHQgKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8qKlxuXHQgKiBSZWFjdFBlcmYgaXMgYSBnZW5lcmFsIEFPUCBzeXN0ZW0gZGVzaWduZWQgdG8gbWVhc3VyZSBwZXJmb3JtYW5jZS4gVGhpc1xuXHQgKiBtb2R1bGUgb25seSBoYXMgdGhlIGhvb2tzOiBzZWUgUmVhY3REZWZhdWx0UGVyZiBmb3IgdGhlIGFuYWx5c2lzIHRvb2wuXG5cdCAqL1xuXHR2YXIgUmVhY3RQZXJmID0ge1xuXHQgIC8qKlxuXHQgICAqIEJvb2xlYW4gdG8gZW5hYmxlL2Rpc2FibGUgbWVhc3VyZW1lbnQuIFNldCB0byBmYWxzZSBieSBkZWZhdWx0IHRvIHByZXZlbnRcblx0ICAgKiBhY2NpZGVudGFsIGxvZ2dpbmcgYW5kIHBlcmYgbG9zcy5cblx0ICAgKi9cblx0ICBlbmFibGVNZWFzdXJlOiBmYWxzZSxcblx0XG5cdCAgLyoqXG5cdCAgICogSG9sZHMgb250byB0aGUgbWVhc3VyZSBmdW5jdGlvbiBpbiB1c2UuIEJ5IGRlZmF1bHQsIGRvbid0IG1lYXN1cmVcblx0ICAgKiBhbnl0aGluZywgYnV0IHdlJ2xsIG92ZXJyaWRlIHRoaXMgaWYgd2UgaW5qZWN0IGEgbWVhc3VyZSBmdW5jdGlvbi5cblx0ICAgKi9cblx0ICBzdG9yZWRNZWFzdXJlOiBfbm9NZWFzdXJlLFxuXHRcblx0ICAvKipcblx0ICAgKiBAcGFyYW0ge29iamVjdH0gb2JqZWN0XG5cdCAgICogQHBhcmFtIHtzdHJpbmd9IG9iamVjdE5hbWVcblx0ICAgKiBAcGFyYW0ge29iamVjdDxzdHJpbmc+fSBtZXRob2ROYW1lc1xuXHQgICAqL1xuXHQgIG1lYXN1cmVNZXRob2RzOiBmdW5jdGlvbiAob2JqZWN0LCBvYmplY3ROYW1lLCBtZXRob2ROYW1lcykge1xuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgZm9yICh2YXIga2V5IGluIG1ldGhvZE5hbWVzKSB7XG5cdCAgICAgICAgaWYgKCFtZXRob2ROYW1lcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG5cdCAgICAgICAgICBjb250aW51ZTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgb2JqZWN0W2tleV0gPSBSZWFjdFBlcmYubWVhc3VyZShvYmplY3ROYW1lLCBtZXRob2ROYW1lc1trZXldLCBvYmplY3Rba2V5XSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBVc2UgdGhpcyB0byB3cmFwIG1ldGhvZHMgeW91IHdhbnQgdG8gbWVhc3VyZS4gWmVybyBvdmVyaGVhZCBpbiBwcm9kdWN0aW9uLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtzdHJpbmd9IG9iak5hbWVcblx0ICAgKiBAcGFyYW0ge3N0cmluZ30gZm5OYW1lXG5cdCAgICogQHBhcmFtIHtmdW5jdGlvbn0gZnVuY1xuXHQgICAqIEByZXR1cm4ge2Z1bmN0aW9ufVxuXHQgICAqL1xuXHQgIG1lYXN1cmU6IGZ1bmN0aW9uIChvYmpOYW1lLCBmbk5hbWUsIGZ1bmMpIHtcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgIHZhciBtZWFzdXJlZEZ1bmMgPSBudWxsO1xuXHQgICAgICB2YXIgd3JhcHBlciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAoUmVhY3RQZXJmLmVuYWJsZU1lYXN1cmUpIHtcblx0ICAgICAgICAgIGlmICghbWVhc3VyZWRGdW5jKSB7XG5cdCAgICAgICAgICAgIG1lYXN1cmVkRnVuYyA9IFJlYWN0UGVyZi5zdG9yZWRNZWFzdXJlKG9iak5hbWUsIGZuTmFtZSwgZnVuYyk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICByZXR1cm4gbWVhc3VyZWRGdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICAgIH07XG5cdCAgICAgIHdyYXBwZXIuZGlzcGxheU5hbWUgPSBvYmpOYW1lICsgJ18nICsgZm5OYW1lO1xuXHQgICAgICByZXR1cm4gd3JhcHBlcjtcblx0ICAgIH1cblx0ICAgIHJldHVybiBmdW5jO1xuXHQgIH0sXG5cdFxuXHQgIGluamVjdGlvbjoge1xuXHQgICAgLyoqXG5cdCAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBtZWFzdXJlXG5cdCAgICAgKi9cblx0ICAgIGluamVjdE1lYXN1cmU6IGZ1bmN0aW9uIChtZWFzdXJlKSB7XG5cdCAgICAgIFJlYWN0UGVyZi5zdG9yZWRNZWFzdXJlID0gbWVhc3VyZTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogU2ltcGx5IHBhc3NlcyB0aHJvdWdoIHRoZSBtZWFzdXJlZCBmdW5jdGlvbiwgd2l0aG91dCBtZWFzdXJpbmcgaXQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBvYmpOYW1lXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBmbk5hbWVcblx0ICogQHBhcmFtIHtmdW5jdGlvbn0gZnVuY1xuXHQgKiBAcmV0dXJuIHtmdW5jdGlvbn1cblx0ICovXG5cdGZ1bmN0aW9uIF9ub01lYXN1cmUob2JqTmFtZSwgZm5OYW1lLCBmdW5jKSB7XG5cdCAgcmV0dXJuIGZ1bmM7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gUmVhY3RQZXJmO1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg0KSkpXG5cbi8qKiovIH0pLFxuLyogMTkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIHNldElubmVySFRNTFxuXHQgKi9cblx0XG5cdC8qIGdsb2JhbHMgTVNBcHAgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdFxuXHR2YXIgV0hJVEVTUEFDRV9URVNUID0gL15bIFxcclxcblxcdFxcZl0vO1xuXHR2YXIgTk9OVklTSUJMRV9URVNUID0gLzwoIS0tfGxpbmt8bm9zY3JpcHR8bWV0YXxzY3JpcHR8c3R5bGUpWyBcXHJcXG5cXHRcXGZcXC8+XS87XG5cdFxuXHQvKipcblx0ICogU2V0IHRoZSBpbm5lckhUTUwgcHJvcGVydHkgb2YgYSBub2RlLCBlbnN1cmluZyB0aGF0IHdoaXRlc3BhY2UgaXMgcHJlc2VydmVkXG5cdCAqIGV2ZW4gaW4gSUU4LlxuXHQgKlxuXHQgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IG5vZGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IGh0bWxcblx0ICogQGludGVybmFsXG5cdCAqL1xuXHR2YXIgc2V0SW5uZXJIVE1MID0gZnVuY3Rpb24gKG5vZGUsIGh0bWwpIHtcblx0ICBub2RlLmlubmVySFRNTCA9IGh0bWw7XG5cdH07XG5cdFxuXHQvLyBXaW44IGFwcHM6IEFsbG93IGFsbCBodG1sIHRvIGJlIGluc2VydGVkXG5cdGlmICh0eXBlb2YgTVNBcHAgIT09ICd1bmRlZmluZWQnICYmIE1TQXBwLmV4ZWNVbnNhZmVMb2NhbEZ1bmN0aW9uKSB7XG5cdCAgc2V0SW5uZXJIVE1MID0gZnVuY3Rpb24gKG5vZGUsIGh0bWwpIHtcblx0ICAgIE1TQXBwLmV4ZWNVbnNhZmVMb2NhbEZ1bmN0aW9uKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgbm9kZS5pbm5lckhUTUwgPSBodG1sO1xuXHQgICAgfSk7XG5cdCAgfTtcblx0fVxuXHRcblx0aWYgKEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSkge1xuXHQgIC8vIElFODogV2hlbiB1cGRhdGluZyBhIGp1c3QgY3JlYXRlZCBub2RlIHdpdGggaW5uZXJIVE1MIG9ubHkgbGVhZGluZ1xuXHQgIC8vIHdoaXRlc3BhY2UgaXMgcmVtb3ZlZC4gV2hlbiB1cGRhdGluZyBhbiBleGlzdGluZyBub2RlIHdpdGggaW5uZXJIVE1MXG5cdCAgLy8gd2hpdGVzcGFjZSBpbiByb290IFRleHROb2RlcyBpcyBhbHNvIGNvbGxhcHNlZC5cblx0ICAvLyBAc2VlIHF1aXJrc21vZGUub3JnL2J1Z3JlcG9ydHMvYXJjaGl2ZXMvMjAwNC8xMS9pbm5lcmh0bWxfYW5kX3QuaHRtbFxuXHRcblx0ICAvLyBGZWF0dXJlIGRldGVjdGlvbjsgb25seSBJRTggaXMga25vd24gdG8gYmVoYXZlIGltcHJvcGVybHkgbGlrZSB0aGlzLlxuXHQgIHZhciB0ZXN0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHQgIHRlc3RFbGVtZW50LmlubmVySFRNTCA9ICcgJztcblx0ICBpZiAodGVzdEVsZW1lbnQuaW5uZXJIVE1MID09PSAnJykge1xuXHQgICAgc2V0SW5uZXJIVE1MID0gZnVuY3Rpb24gKG5vZGUsIGh0bWwpIHtcblx0ICAgICAgLy8gTWFnaWMgdGhlb3J5OiBJRTggc3VwcG9zZWRseSBkaWZmZXJlbnRpYXRlcyBiZXR3ZWVuIGFkZGVkIGFuZCB1cGRhdGVkXG5cdCAgICAgIC8vIG5vZGVzIHdoZW4gcHJvY2Vzc2luZyBpbm5lckhUTUwsIGlubmVySFRNTCBvbiB1cGRhdGVkIG5vZGVzIHN1ZmZlcnNcblx0ICAgICAgLy8gZnJvbSB3b3JzZSB3aGl0ZXNwYWNlIGJlaGF2aW9yLiBSZS1hZGRpbmcgYSBub2RlIGxpa2UgdGhpcyB0cmlnZ2Vyc1xuXHQgICAgICAvLyB0aGUgaW5pdGlhbCBhbmQgbW9yZSBmYXZvcmFibGUgd2hpdGVzcGFjZSBiZWhhdmlvci5cblx0ICAgICAgLy8gVE9ETzogV2hhdCB0byBkbyBvbiBhIGRldGFjaGVkIG5vZGU/XG5cdCAgICAgIGlmIChub2RlLnBhcmVudE5vZGUpIHtcblx0ICAgICAgICBub2RlLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG5vZGUsIG5vZGUpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyBXZSBhbHNvIGltcGxlbWVudCBhIHdvcmthcm91bmQgZm9yIG5vbi12aXNpYmxlIHRhZ3MgZGlzYXBwZWFyaW5nIGludG9cblx0ICAgICAgLy8gdGhpbiBhaXIgb24gSUU4LCB0aGlzIG9ubHkgaGFwcGVucyBpZiB0aGVyZSBpcyBubyB2aXNpYmxlIHRleHRcblx0ICAgICAgLy8gaW4tZnJvbnQgb2YgdGhlIG5vbi12aXNpYmxlIHRhZ3MuIFBpZ2d5YmFjayBvbiB0aGUgd2hpdGVzcGFjZSBmaXhcblx0ICAgICAgLy8gYW5kIHNpbXBseSBjaGVjayBpZiBhbnkgbm9uLXZpc2libGUgdGFncyBhcHBlYXIgaW4gdGhlIHNvdXJjZS5cblx0ICAgICAgaWYgKFdISVRFU1BBQ0VfVEVTVC50ZXN0KGh0bWwpIHx8IGh0bWxbMF0gPT09ICc8JyAmJiBOT05WSVNJQkxFX1RFU1QudGVzdChodG1sKSkge1xuXHQgICAgICAgIC8vIFJlY292ZXIgbGVhZGluZyB3aGl0ZXNwYWNlIGJ5IHRlbXBvcmFyaWx5IHByZXBlbmRpbmcgYW55IGNoYXJhY3Rlci5cblx0ICAgICAgICAvLyBcXHVGRUZGIGhhcyB0aGUgcG90ZW50aWFsIGFkdmFudGFnZSBvZiBiZWluZyB6ZXJvLXdpZHRoL2ludmlzaWJsZS5cblx0ICAgICAgICAvLyBVZ2xpZnlKUyBkcm9wcyBVK0ZFRkYgY2hhcnMgd2hlbiBwYXJzaW5nLCBzbyB1c2UgU3RyaW5nLmZyb21DaGFyQ29kZVxuXHQgICAgICAgIC8vIGluIGhvcGVzIHRoYXQgdGhpcyBpcyBwcmVzZXJ2ZWQgZXZlbiBpZiBcIlxcdUZFRkZcIiBpcyB0cmFuc2Zvcm1lZCB0b1xuXHQgICAgICAgIC8vIHRoZSBhY3R1YWwgVW5pY29kZSBjaGFyYWN0ZXIgKGJ5IEJhYmVsLCBmb3IgZXhhbXBsZSkuXG5cdCAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL21pc2hvby9VZ2xpZnlKUzIvYmxvYi92Mi40LjIwL2xpYi9wYXJzZS5qcyNMMjE2XG5cdCAgICAgICAgbm9kZS5pbm5lckhUTUwgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4RkVGRikgKyBodG1sO1xuXHRcblx0ICAgICAgICAvLyBkZWxldGVEYXRhIGxlYXZlcyBhbiBlbXB0eSBgVGV4dE5vZGVgIHdoaWNoIG9mZnNldHMgdGhlIGluZGV4IG9mIGFsbFxuXHQgICAgICAgIC8vIGNoaWxkcmVuLiBEZWZpbml0ZWx5IHdhbnQgdG8gYXZvaWQgdGhpcy5cblx0ICAgICAgICB2YXIgdGV4dE5vZGUgPSBub2RlLmZpcnN0Q2hpbGQ7XG5cdCAgICAgICAgaWYgKHRleHROb2RlLmRhdGEubGVuZ3RoID09PSAxKSB7XG5cdCAgICAgICAgICBub2RlLnJlbW92ZUNoaWxkKHRleHROb2RlKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgdGV4dE5vZGUuZGVsZXRlRGF0YSgwLCAxKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgbm9kZS5pbm5lckhUTUwgPSBodG1sO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgIH1cblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBzZXRJbm5lckhUTUw7XG5cbi8qKiovIH0pLFxuLyogMjAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIHNldFRleHRDb250ZW50XG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIEV4ZWN1dGlvbkVudmlyb25tZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0dmFyIGVzY2FwZVRleHRDb250ZW50Rm9yQnJvd3NlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjEpO1xuXHR2YXIgc2V0SW5uZXJIVE1MID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOSk7XG5cdFxuXHQvKipcblx0ICogU2V0IHRoZSB0ZXh0Q29udGVudCBwcm9wZXJ0eSBvZiBhIG5vZGUsIGVuc3VyaW5nIHRoYXQgd2hpdGVzcGFjZSBpcyBwcmVzZXJ2ZWRcblx0ICogZXZlbiBpbiBJRTguIGlubmVyVGV4dCBpcyBhIHBvb3Igc3Vic3RpdHV0ZSBmb3IgdGV4dENvbnRlbnQgYW5kLCBhbW9uZyBtYW55XG5cdCAqIGlzc3VlcywgaW5zZXJ0cyA8YnI+IGluc3RlYWQgb2YgdGhlIGxpdGVyYWwgbmV3bGluZSBjaGFycy4gaW5uZXJIVE1MIGJlaGF2ZXNcblx0ICogYXMgaXQgc2hvdWxkLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IG5vZGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IHRleHRcblx0ICogQGludGVybmFsXG5cdCAqL1xuXHR2YXIgc2V0VGV4dENvbnRlbnQgPSBmdW5jdGlvbiAobm9kZSwgdGV4dCkge1xuXHQgIG5vZGUudGV4dENvbnRlbnQgPSB0ZXh0O1xuXHR9O1xuXHRcblx0aWYgKEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSkge1xuXHQgIGlmICghKCd0ZXh0Q29udGVudCcgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSkge1xuXHQgICAgc2V0VGV4dENvbnRlbnQgPSBmdW5jdGlvbiAobm9kZSwgdGV4dCkge1xuXHQgICAgICBzZXRJbm5lckhUTUwobm9kZSwgZXNjYXBlVGV4dENvbnRlbnRGb3JCcm93c2VyKHRleHQpKTtcblx0ICAgIH07XG5cdCAgfVxuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHNldFRleHRDb250ZW50O1xuXG4vKioqLyB9KSxcbi8qIDIxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBlc2NhcGVUZXh0Q29udGVudEZvckJyb3dzZXJcblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgRVNDQVBFX0xPT0tVUCA9IHtcblx0ICAnJic6ICcmYW1wOycsXG5cdCAgJz4nOiAnJmd0OycsXG5cdCAgJzwnOiAnJmx0OycsXG5cdCAgJ1wiJzogJyZxdW90OycsXG5cdCAgJ1xcJyc6ICcmI3gyNzsnXG5cdH07XG5cdFxuXHR2YXIgRVNDQVBFX1JFR0VYID0gL1smPjxcIiddL2c7XG5cdFxuXHRmdW5jdGlvbiBlc2NhcGVyKG1hdGNoKSB7XG5cdCAgcmV0dXJuIEVTQ0FQRV9MT09LVVBbbWF0Y2hdO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRXNjYXBlcyB0ZXh0IHRvIHByZXZlbnQgc2NyaXB0aW5nIGF0dGFja3MuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gdGV4dCBUZXh0IHZhbHVlIHRvIGVzY2FwZS5cblx0ICogQHJldHVybiB7c3RyaW5nfSBBbiBlc2NhcGVkIHN0cmluZy5cblx0ICovXG5cdGZ1bmN0aW9uIGVzY2FwZVRleHRDb250ZW50Rm9yQnJvd3Nlcih0ZXh0KSB7XG5cdCAgcmV0dXJuICgnJyArIHRleHQpLnJlcGxhY2UoRVNDQVBFX1JFR0VYLCBlc2NhcGVyKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBlc2NhcGVUZXh0Q29udGVudEZvckJyb3dzZXI7XG5cbi8qKiovIH0pLFxuLyogMjIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgey8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgRE9NUHJvcGVydHlPcGVyYXRpb25zXG5cdCAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIERPTVByb3BlcnR5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMyk7XG5cdHZhciBSZWFjdFBlcmYgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblx0XG5cdHZhciBxdW90ZUF0dHJpYnV0ZVZhbHVlRm9yQnJvd3NlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpO1xuXHR2YXIgd2FybmluZyA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHRcblx0Ly8gU2ltcGxpZmllZCBzdWJzZXRcblx0dmFyIFZBTElEX0FUVFJJQlVURV9OQU1FX1JFR0VYID0gL15bYS16QS1aX11bXFx3XFwuXFwtXSokLztcblx0dmFyIGlsbGVnYWxBdHRyaWJ1dGVOYW1lQ2FjaGUgPSB7fTtcblx0dmFyIHZhbGlkYXRlZEF0dHJpYnV0ZU5hbWVDYWNoZSA9IHt9O1xuXHRcblx0ZnVuY3Rpb24gaXNBdHRyaWJ1dGVOYW1lU2FmZShhdHRyaWJ1dGVOYW1lKSB7XG5cdCAgaWYgKHZhbGlkYXRlZEF0dHJpYnV0ZU5hbWVDYWNoZS5oYXNPd25Qcm9wZXJ0eShhdHRyaWJ1dGVOYW1lKSkge1xuXHQgICAgcmV0dXJuIHRydWU7XG5cdCAgfVxuXHQgIGlmIChpbGxlZ2FsQXR0cmlidXRlTmFtZUNhY2hlLmhhc093blByb3BlcnR5KGF0dHJpYnV0ZU5hbWUpKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHQgIGlmIChWQUxJRF9BVFRSSUJVVEVfTkFNRV9SRUdFWC50ZXN0KGF0dHJpYnV0ZU5hbWUpKSB7XG5cdCAgICB2YWxpZGF0ZWRBdHRyaWJ1dGVOYW1lQ2FjaGVbYXR0cmlidXRlTmFtZV0gPSB0cnVlO1xuXHQgICAgcmV0dXJuIHRydWU7XG5cdCAgfVxuXHQgIGlsbGVnYWxBdHRyaWJ1dGVOYW1lQ2FjaGVbYXR0cmlidXRlTmFtZV0gPSB0cnVlO1xuXHQgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnSW52YWxpZCBhdHRyaWJ1dGUgbmFtZTogYCVzYCcsIGF0dHJpYnV0ZU5hbWUpIDogdW5kZWZpbmVkO1xuXHQgIHJldHVybiBmYWxzZTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gc2hvdWxkSWdub3JlVmFsdWUocHJvcGVydHlJbmZvLCB2YWx1ZSkge1xuXHQgIHJldHVybiB2YWx1ZSA9PSBudWxsIHx8IHByb3BlcnR5SW5mby5oYXNCb29sZWFuVmFsdWUgJiYgIXZhbHVlIHx8IHByb3BlcnR5SW5mby5oYXNOdW1lcmljVmFsdWUgJiYgaXNOYU4odmFsdWUpIHx8IHByb3BlcnR5SW5mby5oYXNQb3NpdGl2ZU51bWVyaWNWYWx1ZSAmJiB2YWx1ZSA8IDEgfHwgcHJvcGVydHlJbmZvLmhhc092ZXJsb2FkZWRCb29sZWFuVmFsdWUgJiYgdmFsdWUgPT09IGZhbHNlO1xuXHR9XG5cdFxuXHRpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgIHZhciByZWFjdFByb3BzID0ge1xuXHQgICAgY2hpbGRyZW46IHRydWUsXG5cdCAgICBkYW5nZXJvdXNseVNldElubmVySFRNTDogdHJ1ZSxcblx0ICAgIGtleTogdHJ1ZSxcblx0ICAgIHJlZjogdHJ1ZVxuXHQgIH07XG5cdCAgdmFyIHdhcm5lZFByb3BlcnRpZXMgPSB7fTtcblx0XG5cdCAgdmFyIHdhcm5Vbmtub3duUHJvcGVydHkgPSBmdW5jdGlvbiAobmFtZSkge1xuXHQgICAgaWYgKHJlYWN0UHJvcHMuaGFzT3duUHJvcGVydHkobmFtZSkgJiYgcmVhY3RQcm9wc1tuYW1lXSB8fCB3YXJuZWRQcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KG5hbWUpICYmIHdhcm5lZFByb3BlcnRpZXNbbmFtZV0pIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIHdhcm5lZFByb3BlcnRpZXNbbmFtZV0gPSB0cnVlO1xuXHQgICAgdmFyIGxvd2VyQ2FzZWROYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcblx0ICAgIC8vIGRhdGEtKiBhdHRyaWJ1dGVzIHNob3VsZCBiZSBsb3dlcmNhc2U7IHN1Z2dlc3QgdGhlIGxvd2VyY2FzZSB2ZXJzaW9uXG5cdCAgICB2YXIgc3RhbmRhcmROYW1lID0gRE9NUHJvcGVydHkuaXNDdXN0b21BdHRyaWJ1dGUobG93ZXJDYXNlZE5hbWUpID8gbG93ZXJDYXNlZE5hbWUgOiBET01Qcm9wZXJ0eS5nZXRQb3NzaWJsZVN0YW5kYXJkTmFtZS5oYXNPd25Qcm9wZXJ0eShsb3dlckNhc2VkTmFtZSkgPyBET01Qcm9wZXJ0eS5nZXRQb3NzaWJsZVN0YW5kYXJkTmFtZVtsb3dlckNhc2VkTmFtZV0gOiBudWxsO1xuXHRcblx0ICAgIC8vIEZvciBub3csIG9ubHkgd2FybiB3aGVuIHdlIGhhdmUgYSBzdWdnZXN0ZWQgY29ycmVjdGlvbi4gVGhpcyBwcmV2ZW50c1xuXHQgICAgLy8gbG9nZ2luZyB0b28gbXVjaCB3aGVuIHVzaW5nIHRyYW5zZmVyUHJvcHNUby5cblx0ICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKHN0YW5kYXJkTmFtZSA9PSBudWxsLCAnVW5rbm93biBET00gcHJvcGVydHkgJXMuIERpZCB5b3UgbWVhbiAlcz8nLCBuYW1lLCBzdGFuZGFyZE5hbWUpIDogdW5kZWZpbmVkO1xuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBPcGVyYXRpb25zIGZvciBkZWFsaW5nIHdpdGggRE9NIHByb3BlcnRpZXMuXG5cdCAqL1xuXHR2YXIgRE9NUHJvcGVydHlPcGVyYXRpb25zID0ge1xuXHRcblx0ICAvKipcblx0ICAgKiBDcmVhdGVzIG1hcmt1cCBmb3IgdGhlIElEIHByb3BlcnR5LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtzdHJpbmd9IGlkIFVuZXNjYXBlZCBJRC5cblx0ICAgKiBAcmV0dXJuIHtzdHJpbmd9IE1hcmt1cCBzdHJpbmcuXG5cdCAgICovXG5cdCAgY3JlYXRlTWFya3VwRm9ySUQ6IGZ1bmN0aW9uIChpZCkge1xuXHQgICAgcmV0dXJuIERPTVByb3BlcnR5LklEX0FUVFJJQlVURV9OQU1FICsgJz0nICsgcXVvdGVBdHRyaWJ1dGVWYWx1ZUZvckJyb3dzZXIoaWQpO1xuXHQgIH0sXG5cdFxuXHQgIHNldEF0dHJpYnV0ZUZvcklEOiBmdW5jdGlvbiAobm9kZSwgaWQpIHtcblx0ICAgIG5vZGUuc2V0QXR0cmlidXRlKERPTVByb3BlcnR5LklEX0FUVFJJQlVURV9OQU1FLCBpZCk7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogQ3JlYXRlcyBtYXJrdXAgZm9yIGEgcHJvcGVydHkuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuXHQgICAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICAgKiBAcmV0dXJuIHs/c3RyaW5nfSBNYXJrdXAgc3RyaW5nLCBvciBudWxsIGlmIHRoZSBwcm9wZXJ0eSB3YXMgaW52YWxpZC5cblx0ICAgKi9cblx0ICBjcmVhdGVNYXJrdXBGb3JQcm9wZXJ0eTogZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XG5cdCAgICB2YXIgcHJvcGVydHlJbmZvID0gRE9NUHJvcGVydHkucHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSA/IERPTVByb3BlcnR5LnByb3BlcnRpZXNbbmFtZV0gOiBudWxsO1xuXHQgICAgaWYgKHByb3BlcnR5SW5mbykge1xuXHQgICAgICBpZiAoc2hvdWxkSWdub3JlVmFsdWUocHJvcGVydHlJbmZvLCB2YWx1ZSkpIHtcblx0ICAgICAgICByZXR1cm4gJyc7XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIGF0dHJpYnV0ZU5hbWUgPSBwcm9wZXJ0eUluZm8uYXR0cmlidXRlTmFtZTtcblx0ICAgICAgaWYgKHByb3BlcnR5SW5mby5oYXNCb29sZWFuVmFsdWUgfHwgcHJvcGVydHlJbmZvLmhhc092ZXJsb2FkZWRCb29sZWFuVmFsdWUgJiYgdmFsdWUgPT09IHRydWUpIHtcblx0ICAgICAgICByZXR1cm4gYXR0cmlidXRlTmFtZSArICc9XCJcIic7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGF0dHJpYnV0ZU5hbWUgKyAnPScgKyBxdW90ZUF0dHJpYnV0ZVZhbHVlRm9yQnJvd3Nlcih2YWx1ZSk7XG5cdCAgICB9IGVsc2UgaWYgKERPTVByb3BlcnR5LmlzQ3VzdG9tQXR0cmlidXRlKG5hbWUpKSB7XG5cdCAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG5cdCAgICAgICAgcmV0dXJuICcnO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBuYW1lICsgJz0nICsgcXVvdGVBdHRyaWJ1dGVWYWx1ZUZvckJyb3dzZXIodmFsdWUpO1xuXHQgICAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgIHdhcm5Vbmtub3duUHJvcGVydHkobmFtZSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gbnVsbDtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBDcmVhdGVzIG1hcmt1cCBmb3IgYSBjdXN0b20gcHJvcGVydHkuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuXHQgICAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICAgKiBAcmV0dXJuIHtzdHJpbmd9IE1hcmt1cCBzdHJpbmcsIG9yIGVtcHR5IHN0cmluZyBpZiB0aGUgcHJvcGVydHkgd2FzIGludmFsaWQuXG5cdCAgICovXG5cdCAgY3JlYXRlTWFya3VwRm9yQ3VzdG9tQXR0cmlidXRlOiBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcblx0ICAgIGlmICghaXNBdHRyaWJ1dGVOYW1lU2FmZShuYW1lKSB8fCB2YWx1ZSA9PSBudWxsKSB7XG5cdCAgICAgIHJldHVybiAnJztcblx0ICAgIH1cblx0ICAgIHJldHVybiBuYW1lICsgJz0nICsgcXVvdGVBdHRyaWJ1dGVWYWx1ZUZvckJyb3dzZXIodmFsdWUpO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFNldHMgdGhlIHZhbHVlIGZvciBhIHByb3BlcnR5IG9uIGEgbm9kZS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gbm9kZVxuXHQgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG5cdCAgICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgICAqL1xuXHQgIHNldFZhbHVlRm9yUHJvcGVydHk6IGZ1bmN0aW9uIChub2RlLCBuYW1lLCB2YWx1ZSkge1xuXHQgICAgdmFyIHByb3BlcnR5SW5mbyA9IERPTVByb3BlcnR5LnByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkobmFtZSkgPyBET01Qcm9wZXJ0eS5wcm9wZXJ0aWVzW25hbWVdIDogbnVsbDtcblx0ICAgIGlmIChwcm9wZXJ0eUluZm8pIHtcblx0ICAgICAgdmFyIG11dGF0aW9uTWV0aG9kID0gcHJvcGVydHlJbmZvLm11dGF0aW9uTWV0aG9kO1xuXHQgICAgICBpZiAobXV0YXRpb25NZXRob2QpIHtcblx0ICAgICAgICBtdXRhdGlvbk1ldGhvZChub2RlLCB2YWx1ZSk7XG5cdCAgICAgIH0gZWxzZSBpZiAoc2hvdWxkSWdub3JlVmFsdWUocHJvcGVydHlJbmZvLCB2YWx1ZSkpIHtcblx0ICAgICAgICB0aGlzLmRlbGV0ZVZhbHVlRm9yUHJvcGVydHkobm9kZSwgbmFtZSk7XG5cdCAgICAgIH0gZWxzZSBpZiAocHJvcGVydHlJbmZvLm11c3RVc2VBdHRyaWJ1dGUpIHtcblx0ICAgICAgICB2YXIgYXR0cmlidXRlTmFtZSA9IHByb3BlcnR5SW5mby5hdHRyaWJ1dGVOYW1lO1xuXHQgICAgICAgIHZhciBuYW1lc3BhY2UgPSBwcm9wZXJ0eUluZm8uYXR0cmlidXRlTmFtZXNwYWNlO1xuXHQgICAgICAgIC8vIGBzZXRBdHRyaWJ1dGVgIHdpdGggb2JqZWN0cyBiZWNvbWVzIG9ubHkgYFtvYmplY3RdYCBpbiBJRTgvOSxcblx0ICAgICAgICAvLyAoJycgKyB2YWx1ZSkgbWFrZXMgaXQgb3V0cHV0IHRoZSBjb3JyZWN0IHRvU3RyaW5nKCktdmFsdWUuXG5cdCAgICAgICAgaWYgKG5hbWVzcGFjZSkge1xuXHQgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGVOUyhuYW1lc3BhY2UsIGF0dHJpYnV0ZU5hbWUsICcnICsgdmFsdWUpO1xuXHQgICAgICAgIH0gZWxzZSBpZiAocHJvcGVydHlJbmZvLmhhc0Jvb2xlYW5WYWx1ZSB8fCBwcm9wZXJ0eUluZm8uaGFzT3ZlcmxvYWRlZEJvb2xlYW5WYWx1ZSAmJiB2YWx1ZSA9PT0gdHJ1ZSkge1xuXHQgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSwgJycpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lLCAnJyArIHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdmFyIHByb3BOYW1lID0gcHJvcGVydHlJbmZvLnByb3BlcnR5TmFtZTtcblx0ICAgICAgICAvLyBNdXN0IGV4cGxpY2l0bHkgY2FzdCB2YWx1ZXMgZm9yIEhBU19TSURFX0VGRkVDVFMtcHJvcGVydGllcyB0byB0aGVcblx0ICAgICAgICAvLyBwcm9wZXJ0eSB0eXBlIGJlZm9yZSBjb21wYXJpbmc7IG9ubHkgYHZhbHVlYCBkb2VzIGFuZCBpcyBzdHJpbmcuXG5cdCAgICAgICAgaWYgKCFwcm9wZXJ0eUluZm8uaGFzU2lkZUVmZmVjdHMgfHwgJycgKyBub2RlW3Byb3BOYW1lXSAhPT0gJycgKyB2YWx1ZSkge1xuXHQgICAgICAgICAgLy8gQ29udHJhcnkgdG8gYHNldEF0dHJpYnV0ZWAsIG9iamVjdCBwcm9wZXJ0aWVzIGFyZSBwcm9wZXJseVxuXHQgICAgICAgICAgLy8gYHRvU3RyaW5nYGVkIGJ5IElFOC85LlxuXHQgICAgICAgICAgbm9kZVtwcm9wTmFtZV0gPSB2YWx1ZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSBpZiAoRE9NUHJvcGVydHkuaXNDdXN0b21BdHRyaWJ1dGUobmFtZSkpIHtcblx0ICAgICAgRE9NUHJvcGVydHlPcGVyYXRpb25zLnNldFZhbHVlRm9yQXR0cmlidXRlKG5vZGUsIG5hbWUsIHZhbHVlKTtcblx0ICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICB3YXJuVW5rbm93blByb3BlcnR5KG5hbWUpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHNldFZhbHVlRm9yQXR0cmlidXRlOiBmdW5jdGlvbiAobm9kZSwgbmFtZSwgdmFsdWUpIHtcblx0ICAgIGlmICghaXNBdHRyaWJ1dGVOYW1lU2FmZShuYW1lKSkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuXHQgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIG5vZGUuc2V0QXR0cmlidXRlKG5hbWUsICcnICsgdmFsdWUpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIERlbGV0ZXMgdGhlIHZhbHVlIGZvciBhIHByb3BlcnR5IG9uIGEgbm9kZS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gbm9kZVxuXHQgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG5cdCAgICovXG5cdCAgZGVsZXRlVmFsdWVGb3JQcm9wZXJ0eTogZnVuY3Rpb24gKG5vZGUsIG5hbWUpIHtcblx0ICAgIHZhciBwcm9wZXJ0eUluZm8gPSBET01Qcm9wZXJ0eS5wcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KG5hbWUpID8gRE9NUHJvcGVydHkucHJvcGVydGllc1tuYW1lXSA6IG51bGw7XG5cdCAgICBpZiAocHJvcGVydHlJbmZvKSB7XG5cdCAgICAgIHZhciBtdXRhdGlvbk1ldGhvZCA9IHByb3BlcnR5SW5mby5tdXRhdGlvbk1ldGhvZDtcblx0ICAgICAgaWYgKG11dGF0aW9uTWV0aG9kKSB7XG5cdCAgICAgICAgbXV0YXRpb25NZXRob2Qobm9kZSwgdW5kZWZpbmVkKTtcblx0ICAgICAgfSBlbHNlIGlmIChwcm9wZXJ0eUluZm8ubXVzdFVzZUF0dHJpYnV0ZSkge1xuXHQgICAgICAgIG5vZGUucmVtb3ZlQXR0cmlidXRlKHByb3BlcnR5SW5mby5hdHRyaWJ1dGVOYW1lKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB2YXIgcHJvcE5hbWUgPSBwcm9wZXJ0eUluZm8ucHJvcGVydHlOYW1lO1xuXHQgICAgICAgIHZhciBkZWZhdWx0VmFsdWUgPSBET01Qcm9wZXJ0eS5nZXREZWZhdWx0VmFsdWVGb3JQcm9wZXJ0eShub2RlLm5vZGVOYW1lLCBwcm9wTmFtZSk7XG5cdCAgICAgICAgaWYgKCFwcm9wZXJ0eUluZm8uaGFzU2lkZUVmZmVjdHMgfHwgJycgKyBub2RlW3Byb3BOYW1lXSAhPT0gZGVmYXVsdFZhbHVlKSB7XG5cdCAgICAgICAgICBub2RlW3Byb3BOYW1lXSA9IGRlZmF1bHRWYWx1ZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSBpZiAoRE9NUHJvcGVydHkuaXNDdXN0b21BdHRyaWJ1dGUobmFtZSkpIHtcblx0ICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XG5cdCAgICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgd2FyblVua25vd25Qcm9wZXJ0eShuYW1lKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHR9O1xuXHRcblx0UmVhY3RQZXJmLm1lYXN1cmVNZXRob2RzKERPTVByb3BlcnR5T3BlcmF0aW9ucywgJ0RPTVByb3BlcnR5T3BlcmF0aW9ucycsIHtcblx0ICBzZXRWYWx1ZUZvclByb3BlcnR5OiAnc2V0VmFsdWVGb3JQcm9wZXJ0eScsXG5cdCAgc2V0VmFsdWVGb3JBdHRyaWJ1dGU6ICdzZXRWYWx1ZUZvckF0dHJpYnV0ZScsXG5cdCAgZGVsZXRlVmFsdWVGb3JQcm9wZXJ0eTogJ2RlbGV0ZVZhbHVlRm9yUHJvcGVydHknXG5cdH0pO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBET01Qcm9wZXJ0eU9wZXJhdGlvbnM7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpKSlcblxuLyoqKi8gfSksXG4vKiAyMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzKSB7LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBET01Qcm9wZXJ0eVxuXHQgKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBpbnZhcmlhbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblx0XG5cdGZ1bmN0aW9uIGNoZWNrTWFzayh2YWx1ZSwgYml0bWFzaykge1xuXHQgIHJldHVybiAodmFsdWUgJiBiaXRtYXNrKSA9PT0gYml0bWFzaztcblx0fVxuXHRcblx0dmFyIERPTVByb3BlcnR5SW5qZWN0aW9uID0ge1xuXHQgIC8qKlxuXHQgICAqIE1hcHBpbmcgZnJvbSBub3JtYWxpemVkLCBjYW1lbGNhc2VkIHByb3BlcnR5IG5hbWVzIHRvIGEgY29uZmlndXJhdGlvbiB0aGF0XG5cdCAgICogc3BlY2lmaWVzIGhvdyB0aGUgYXNzb2NpYXRlZCBET00gcHJvcGVydHkgc2hvdWxkIGJlIGFjY2Vzc2VkIG9yIHJlbmRlcmVkLlxuXHQgICAqL1xuXHQgIE1VU1RfVVNFX0FUVFJJQlVURTogMHgxLFxuXHQgIE1VU1RfVVNFX1BST1BFUlRZOiAweDIsXG5cdCAgSEFTX1NJREVfRUZGRUNUUzogMHg0LFxuXHQgIEhBU19CT09MRUFOX1ZBTFVFOiAweDgsXG5cdCAgSEFTX05VTUVSSUNfVkFMVUU6IDB4MTAsXG5cdCAgSEFTX1BPU0lUSVZFX05VTUVSSUNfVkFMVUU6IDB4MjAgfCAweDEwLFxuXHQgIEhBU19PVkVSTE9BREVEX0JPT0xFQU5fVkFMVUU6IDB4NDAsXG5cdFxuXHQgIC8qKlxuXHQgICAqIEluamVjdCBzb21lIHNwZWNpYWxpemVkIGtub3dsZWRnZSBhYm91dCB0aGUgRE9NLiBUaGlzIHRha2VzIGEgY29uZmlnIG9iamVjdFxuXHQgICAqIHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuXHQgICAqXG5cdCAgICogaXNDdXN0b21BdHRyaWJ1dGU6IGZ1bmN0aW9uIHRoYXQgZ2l2ZW4gYW4gYXR0cmlidXRlIG5hbWUgd2lsbCByZXR1cm4gdHJ1ZVxuXHQgICAqIGlmIGl0IGNhbiBiZSBpbnNlcnRlZCBpbnRvIHRoZSBET00gdmVyYmF0aW0uIFVzZWZ1bCBmb3IgZGF0YS0qIG9yIGFyaWEtKlxuXHQgICAqIGF0dHJpYnV0ZXMgd2hlcmUgaXQncyBpbXBvc3NpYmxlIHRvIGVudW1lcmF0ZSBhbGwgb2YgdGhlIHBvc3NpYmxlXG5cdCAgICogYXR0cmlidXRlIG5hbWVzLFxuXHQgICAqXG5cdCAgICogUHJvcGVydGllczogb2JqZWN0IG1hcHBpbmcgRE9NIHByb3BlcnR5IG5hbWUgdG8gb25lIG9mIHRoZVxuXHQgICAqIERPTVByb3BlcnR5SW5qZWN0aW9uIGNvbnN0YW50cyBvciBudWxsLiBJZiB5b3VyIGF0dHJpYnV0ZSBpc24ndCBpbiBoZXJlLFxuXHQgICAqIGl0IHdvbid0IGdldCB3cml0dGVuIHRvIHRoZSBET00uXG5cdCAgICpcblx0ICAgKiBET01BdHRyaWJ1dGVOYW1lczogb2JqZWN0IG1hcHBpbmcgUmVhY3QgYXR0cmlidXRlIG5hbWUgdG8gdGhlIERPTVxuXHQgICAqIGF0dHJpYnV0ZSBuYW1lLiBBdHRyaWJ1dGUgbmFtZXMgbm90IHNwZWNpZmllZCB1c2UgdGhlICoqbG93ZXJjYXNlKipcblx0ICAgKiBub3JtYWxpemVkIG5hbWUuXG5cdCAgICpcblx0ICAgKiBET01BdHRyaWJ1dGVOYW1lc3BhY2VzOiBvYmplY3QgbWFwcGluZyBSZWFjdCBhdHRyaWJ1dGUgbmFtZSB0byB0aGUgRE9NXG5cdCAgICogYXR0cmlidXRlIG5hbWVzcGFjZSBVUkwuIChBdHRyaWJ1dGUgbmFtZXMgbm90IHNwZWNpZmllZCB1c2Ugbm8gbmFtZXNwYWNlLilcblx0ICAgKlxuXHQgICAqIERPTVByb3BlcnR5TmFtZXM6IHNpbWlsYXIgdG8gRE9NQXR0cmlidXRlTmFtZXMgYnV0IGZvciBET00gcHJvcGVydGllcy5cblx0ICAgKiBQcm9wZXJ0eSBuYW1lcyBub3Qgc3BlY2lmaWVkIHVzZSB0aGUgbm9ybWFsaXplZCBuYW1lLlxuXHQgICAqXG5cdCAgICogRE9NTXV0YXRpb25NZXRob2RzOiBQcm9wZXJ0aWVzIHRoYXQgcmVxdWlyZSBzcGVjaWFsIG11dGF0aW9uIG1ldGhvZHMuIElmXG5cdCAgICogYHZhbHVlYCBpcyB1bmRlZmluZWQsIHRoZSBtdXRhdGlvbiBtZXRob2Qgc2hvdWxkIHVuc2V0IHRoZSBwcm9wZXJ0eS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7b2JqZWN0fSBkb21Qcm9wZXJ0eUNvbmZpZyB0aGUgY29uZmlnIGFzIGRlc2NyaWJlZCBhYm92ZS5cblx0ICAgKi9cblx0ICBpbmplY3RET01Qcm9wZXJ0eUNvbmZpZzogZnVuY3Rpb24gKGRvbVByb3BlcnR5Q29uZmlnKSB7XG5cdCAgICB2YXIgSW5qZWN0aW9uID0gRE9NUHJvcGVydHlJbmplY3Rpb247XG5cdCAgICB2YXIgUHJvcGVydGllcyA9IGRvbVByb3BlcnR5Q29uZmlnLlByb3BlcnRpZXMgfHwge307XG5cdCAgICB2YXIgRE9NQXR0cmlidXRlTmFtZXNwYWNlcyA9IGRvbVByb3BlcnR5Q29uZmlnLkRPTUF0dHJpYnV0ZU5hbWVzcGFjZXMgfHwge307XG5cdCAgICB2YXIgRE9NQXR0cmlidXRlTmFtZXMgPSBkb21Qcm9wZXJ0eUNvbmZpZy5ET01BdHRyaWJ1dGVOYW1lcyB8fCB7fTtcblx0ICAgIHZhciBET01Qcm9wZXJ0eU5hbWVzID0gZG9tUHJvcGVydHlDb25maWcuRE9NUHJvcGVydHlOYW1lcyB8fCB7fTtcblx0ICAgIHZhciBET01NdXRhdGlvbk1ldGhvZHMgPSBkb21Qcm9wZXJ0eUNvbmZpZy5ET01NdXRhdGlvbk1ldGhvZHMgfHwge307XG5cdFxuXHQgICAgaWYgKGRvbVByb3BlcnR5Q29uZmlnLmlzQ3VzdG9tQXR0cmlidXRlKSB7XG5cdCAgICAgIERPTVByb3BlcnR5Ll9pc0N1c3RvbUF0dHJpYnV0ZUZ1bmN0aW9ucy5wdXNoKGRvbVByb3BlcnR5Q29uZmlnLmlzQ3VzdG9tQXR0cmlidXRlKTtcblx0ICAgIH1cblx0XG5cdCAgICBmb3IgKHZhciBwcm9wTmFtZSBpbiBQcm9wZXJ0aWVzKSB7XG5cdCAgICAgICEhRE9NUHJvcGVydHkucHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnaW5qZWN0RE9NUHJvcGVydHlDb25maWcoLi4uKTogWW91XFwncmUgdHJ5aW5nIHRvIGluamVjdCBET00gcHJvcGVydHkgJyArICdcXCclc1xcJyB3aGljaCBoYXMgYWxyZWFkeSBiZWVuIGluamVjdGVkLiBZb3UgbWF5IGJlIGFjY2lkZW50YWxseSAnICsgJ2luamVjdGluZyB0aGUgc2FtZSBET00gcHJvcGVydHkgY29uZmlnIHR3aWNlLCBvciB5b3UgbWF5IGJlICcgKyAnaW5qZWN0aW5nIHR3byBjb25maWdzIHRoYXQgaGF2ZSBjb25mbGljdGluZyBwcm9wZXJ0eSBuYW1lcy4nLCBwcm9wTmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXHRcblx0ICAgICAgdmFyIGxvd2VyQ2FzZWQgPSBwcm9wTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHQgICAgICB2YXIgcHJvcENvbmZpZyA9IFByb3BlcnRpZXNbcHJvcE5hbWVdO1xuXHRcblx0ICAgICAgdmFyIHByb3BlcnR5SW5mbyA9IHtcblx0ICAgICAgICBhdHRyaWJ1dGVOYW1lOiBsb3dlckNhc2VkLFxuXHQgICAgICAgIGF0dHJpYnV0ZU5hbWVzcGFjZTogbnVsbCxcblx0ICAgICAgICBwcm9wZXJ0eU5hbWU6IHByb3BOYW1lLFxuXHQgICAgICAgIG11dGF0aW9uTWV0aG9kOiBudWxsLFxuXHRcblx0ICAgICAgICBtdXN0VXNlQXR0cmlidXRlOiBjaGVja01hc2socHJvcENvbmZpZywgSW5qZWN0aW9uLk1VU1RfVVNFX0FUVFJJQlVURSksXG5cdCAgICAgICAgbXVzdFVzZVByb3BlcnR5OiBjaGVja01hc2socHJvcENvbmZpZywgSW5qZWN0aW9uLk1VU1RfVVNFX1BST1BFUlRZKSxcblx0ICAgICAgICBoYXNTaWRlRWZmZWN0czogY2hlY2tNYXNrKHByb3BDb25maWcsIEluamVjdGlvbi5IQVNfU0lERV9FRkZFQ1RTKSxcblx0ICAgICAgICBoYXNCb29sZWFuVmFsdWU6IGNoZWNrTWFzayhwcm9wQ29uZmlnLCBJbmplY3Rpb24uSEFTX0JPT0xFQU5fVkFMVUUpLFxuXHQgICAgICAgIGhhc051bWVyaWNWYWx1ZTogY2hlY2tNYXNrKHByb3BDb25maWcsIEluamVjdGlvbi5IQVNfTlVNRVJJQ19WQUxVRSksXG5cdCAgICAgICAgaGFzUG9zaXRpdmVOdW1lcmljVmFsdWU6IGNoZWNrTWFzayhwcm9wQ29uZmlnLCBJbmplY3Rpb24uSEFTX1BPU0lUSVZFX05VTUVSSUNfVkFMVUUpLFxuXHQgICAgICAgIGhhc092ZXJsb2FkZWRCb29sZWFuVmFsdWU6IGNoZWNrTWFzayhwcm9wQ29uZmlnLCBJbmplY3Rpb24uSEFTX09WRVJMT0FERURfQk9PTEVBTl9WQUxVRSlcblx0ICAgICAgfTtcblx0XG5cdCAgICAgICEoIXByb3BlcnR5SW5mby5tdXN0VXNlQXR0cmlidXRlIHx8ICFwcm9wZXJ0eUluZm8ubXVzdFVzZVByb3BlcnR5KSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdET01Qcm9wZXJ0eTogQ2Fubm90IHJlcXVpcmUgdXNpbmcgYm90aCBhdHRyaWJ1dGUgYW5kIHByb3BlcnR5OiAlcycsIHByb3BOYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdCAgICAgICEocHJvcGVydHlJbmZvLm11c3RVc2VQcm9wZXJ0eSB8fCAhcHJvcGVydHlJbmZvLmhhc1NpZGVFZmZlY3RzKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdET01Qcm9wZXJ0eTogUHJvcGVydGllcyB0aGF0IGhhdmUgc2lkZSBlZmZlY3RzIG11c3QgdXNlIHByb3BlcnR5OiAlcycsIHByb3BOYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdCAgICAgICEocHJvcGVydHlJbmZvLmhhc0Jvb2xlYW5WYWx1ZSArIHByb3BlcnR5SW5mby5oYXNOdW1lcmljVmFsdWUgKyBwcm9wZXJ0eUluZm8uaGFzT3ZlcmxvYWRlZEJvb2xlYW5WYWx1ZSA8PSAxKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdET01Qcm9wZXJ0eTogVmFsdWUgY2FuIGJlIG9uZSBvZiBib29sZWFuLCBvdmVybG9hZGVkIGJvb2xlYW4sIG9yICcgKyAnbnVtZXJpYyB2YWx1ZSwgYnV0IG5vdCBhIGNvbWJpbmF0aW9uOiAlcycsIHByb3BOYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdFxuXHQgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgIERPTVByb3BlcnR5LmdldFBvc3NpYmxlU3RhbmRhcmROYW1lW2xvd2VyQ2FzZWRdID0gcHJvcE5hbWU7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChET01BdHRyaWJ1dGVOYW1lcy5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkpIHtcblx0ICAgICAgICB2YXIgYXR0cmlidXRlTmFtZSA9IERPTUF0dHJpYnV0ZU5hbWVzW3Byb3BOYW1lXTtcblx0ICAgICAgICBwcm9wZXJ0eUluZm8uYXR0cmlidXRlTmFtZSA9IGF0dHJpYnV0ZU5hbWU7XG5cdCAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgICAgIERPTVByb3BlcnR5LmdldFBvc3NpYmxlU3RhbmRhcmROYW1lW2F0dHJpYnV0ZU5hbWVdID0gcHJvcE5hbWU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoRE9NQXR0cmlidXRlTmFtZXNwYWNlcy5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkpIHtcblx0ICAgICAgICBwcm9wZXJ0eUluZm8uYXR0cmlidXRlTmFtZXNwYWNlID0gRE9NQXR0cmlidXRlTmFtZXNwYWNlc1twcm9wTmFtZV07XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChET01Qcm9wZXJ0eU5hbWVzLmhhc093blByb3BlcnR5KHByb3BOYW1lKSkge1xuXHQgICAgICAgIHByb3BlcnR5SW5mby5wcm9wZXJ0eU5hbWUgPSBET01Qcm9wZXJ0eU5hbWVzW3Byb3BOYW1lXTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKERPTU11dGF0aW9uTWV0aG9kcy5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkpIHtcblx0ICAgICAgICBwcm9wZXJ0eUluZm8ubXV0YXRpb25NZXRob2QgPSBET01NdXRhdGlvbk1ldGhvZHNbcHJvcE5hbWVdO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBET01Qcm9wZXJ0eS5wcm9wZXJ0aWVzW3Byb3BOYW1lXSA9IHByb3BlcnR5SW5mbztcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdHZhciBkZWZhdWx0VmFsdWVDYWNoZSA9IHt9O1xuXHRcblx0LyoqXG5cdCAqIERPTVByb3BlcnR5IGV4cG9ydHMgbG9va3VwIG9iamVjdHMgdGhhdCBjYW4gYmUgdXNlZCBsaWtlIGZ1bmN0aW9uczpcblx0ICpcblx0ICogICA+IERPTVByb3BlcnR5LmlzVmFsaWRbJ2lkJ11cblx0ICogICB0cnVlXG5cdCAqICAgPiBET01Qcm9wZXJ0eS5pc1ZhbGlkWydmb29iYXInXVxuXHQgKiAgIHVuZGVmaW5lZFxuXHQgKlxuXHQgKiBBbHRob3VnaCB0aGlzIG1heSBiZSBjb25mdXNpbmcsIGl0IHBlcmZvcm1zIGJldHRlciBpbiBnZW5lcmFsLlxuXHQgKlxuXHQgKiBAc2VlIGh0dHA6Ly9qc3BlcmYuY29tL2tleS1leGlzdHNcblx0ICogQHNlZSBodHRwOi8vanNwZXJmLmNvbS9rZXktbWlzc2luZ1xuXHQgKi9cblx0dmFyIERPTVByb3BlcnR5ID0ge1xuXHRcblx0ICBJRF9BVFRSSUJVVEVfTkFNRTogJ2RhdGEtcmVhY3RpZCcsXG5cdFxuXHQgIC8qKlxuXHQgICAqIE1hcCBmcm9tIHByb3BlcnR5IFwic3RhbmRhcmQgbmFtZVwiIHRvIGFuIG9iamVjdCB3aXRoIGluZm8gYWJvdXQgaG93IHRvIHNldFxuXHQgICAqIHRoZSBwcm9wZXJ0eSBpbiB0aGUgRE9NLiBFYWNoIG9iamVjdCBjb250YWluczpcblx0ICAgKlxuXHQgICAqIGF0dHJpYnV0ZU5hbWU6XG5cdCAgICogICBVc2VkIHdoZW4gcmVuZGVyaW5nIG1hcmt1cCBvciB3aXRoIGAqQXR0cmlidXRlKClgLlxuXHQgICAqIGF0dHJpYnV0ZU5hbWVzcGFjZVxuXHQgICAqIHByb3BlcnR5TmFtZTpcblx0ICAgKiAgIFVzZWQgb24gRE9NIG5vZGUgaW5zdGFuY2VzLiAoVGhpcyBpbmNsdWRlcyBwcm9wZXJ0aWVzIHRoYXQgbXV0YXRlIGR1ZSB0b1xuXHQgICAqICAgZXh0ZXJuYWwgZmFjdG9ycy4pXG5cdCAgICogbXV0YXRpb25NZXRob2Q6XG5cdCAgICogICBJZiBub24tbnVsbCwgdXNlZCBpbnN0ZWFkIG9mIHRoZSBwcm9wZXJ0eSBvciBgc2V0QXR0cmlidXRlKClgIGFmdGVyXG5cdCAgICogICBpbml0aWFsIHJlbmRlci5cblx0ICAgKiBtdXN0VXNlQXR0cmlidXRlOlxuXHQgICAqICAgV2hldGhlciB0aGUgcHJvcGVydHkgbXVzdCBiZSBhY2Nlc3NlZCBhbmQgbXV0YXRlZCB1c2luZyBgKkF0dHJpYnV0ZSgpYC5cblx0ICAgKiAgIChUaGlzIGluY2x1ZGVzIGFueXRoaW5nIHRoYXQgZmFpbHMgYDxwcm9wTmFtZT4gaW4gPGVsZW1lbnQ+YC4pXG5cdCAgICogbXVzdFVzZVByb3BlcnR5OlxuXHQgICAqICAgV2hldGhlciB0aGUgcHJvcGVydHkgbXVzdCBiZSBhY2Nlc3NlZCBhbmQgbXV0YXRlZCBhcyBhbiBvYmplY3QgcHJvcGVydHkuXG5cdCAgICogaGFzU2lkZUVmZmVjdHM6XG5cdCAgICogICBXaGV0aGVyIG9yIG5vdCBzZXR0aW5nIGEgdmFsdWUgY2F1c2VzIHNpZGUgZWZmZWN0cyBzdWNoIGFzIHRyaWdnZXJpbmdcblx0ICAgKiAgIHJlc291cmNlcyB0byBiZSBsb2FkZWQgb3IgdGV4dCBzZWxlY3Rpb24gY2hhbmdlcy4gSWYgdHJ1ZSwgd2UgcmVhZCBmcm9tXG5cdCAgICogICB0aGUgRE9NIGJlZm9yZSB1cGRhdGluZyB0byBlbnN1cmUgdGhhdCB0aGUgdmFsdWUgaXMgb25seSBzZXQgaWYgaXQgaGFzXG5cdCAgICogICBjaGFuZ2VkLlxuXHQgICAqIGhhc0Jvb2xlYW5WYWx1ZTpcblx0ICAgKiAgIFdoZXRoZXIgdGhlIHByb3BlcnR5IHNob3VsZCBiZSByZW1vdmVkIHdoZW4gc2V0IHRvIGEgZmFsc2V5IHZhbHVlLlxuXHQgICAqIGhhc051bWVyaWNWYWx1ZTpcblx0ICAgKiAgIFdoZXRoZXIgdGhlIHByb3BlcnR5IG11c3QgYmUgbnVtZXJpYyBvciBwYXJzZSBhcyBhIG51bWVyaWMgYW5kIHNob3VsZCBiZVxuXHQgICAqICAgcmVtb3ZlZCB3aGVuIHNldCB0byBhIGZhbHNleSB2YWx1ZS5cblx0ICAgKiBoYXNQb3NpdGl2ZU51bWVyaWNWYWx1ZTpcblx0ICAgKiAgIFdoZXRoZXIgdGhlIHByb3BlcnR5IG11c3QgYmUgcG9zaXRpdmUgbnVtZXJpYyBvciBwYXJzZSBhcyBhIHBvc2l0aXZlXG5cdCAgICogICBudW1lcmljIGFuZCBzaG91bGQgYmUgcmVtb3ZlZCB3aGVuIHNldCB0byBhIGZhbHNleSB2YWx1ZS5cblx0ICAgKiBoYXNPdmVybG9hZGVkQm9vbGVhblZhbHVlOlxuXHQgICAqICAgV2hldGhlciB0aGUgcHJvcGVydHkgY2FuIGJlIHVzZWQgYXMgYSBmbGFnIGFzIHdlbGwgYXMgd2l0aCBhIHZhbHVlLlxuXHQgICAqICAgUmVtb3ZlZCB3aGVuIHN0cmljdGx5IGVxdWFsIHRvIGZhbHNlOyBwcmVzZW50IHdpdGhvdXQgYSB2YWx1ZSB3aGVuXG5cdCAgICogICBzdHJpY3RseSBlcXVhbCB0byB0cnVlOyBwcmVzZW50IHdpdGggYSB2YWx1ZSBvdGhlcndpc2UuXG5cdCAgICovXG5cdCAgcHJvcGVydGllczoge30sXG5cdFxuXHQgIC8qKlxuXHQgICAqIE1hcHBpbmcgZnJvbSBsb3dlcmNhc2UgcHJvcGVydHkgbmFtZXMgdG8gdGhlIHByb3Blcmx5IGNhc2VkIHZlcnNpb24sIHVzZWRcblx0ICAgKiB0byB3YXJuIGluIHRoZSBjYXNlIG9mIG1pc3NpbmcgcHJvcGVydGllcy4gQXZhaWxhYmxlIG9ubHkgaW4gX19ERVZfXy5cblx0ICAgKiBAdHlwZSB7T2JqZWN0fVxuXHQgICAqL1xuXHQgIGdldFBvc3NpYmxlU3RhbmRhcmROYW1lOiBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8ge30gOiBudWxsLFxuXHRcblx0ICAvKipcblx0ICAgKiBBbGwgb2YgdGhlIGlzQ3VzdG9tQXR0cmlidXRlKCkgZnVuY3Rpb25zIHRoYXQgaGF2ZSBiZWVuIGluamVjdGVkLlxuXHQgICAqL1xuXHQgIF9pc0N1c3RvbUF0dHJpYnV0ZUZ1bmN0aW9uczogW10sXG5cdFxuXHQgIC8qKlxuXHQgICAqIENoZWNrcyB3aGV0aGVyIGEgcHJvcGVydHkgbmFtZSBpcyBhIGN1c3RvbSBhdHRyaWJ1dGUuXG5cdCAgICogQG1ldGhvZFxuXHQgICAqL1xuXHQgIGlzQ3VzdG9tQXR0cmlidXRlOiBmdW5jdGlvbiAoYXR0cmlidXRlTmFtZSkge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBET01Qcm9wZXJ0eS5faXNDdXN0b21BdHRyaWJ1dGVGdW5jdGlvbnMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIGlzQ3VzdG9tQXR0cmlidXRlRm4gPSBET01Qcm9wZXJ0eS5faXNDdXN0b21BdHRyaWJ1dGVGdW5jdGlvbnNbaV07XG5cdCAgICAgIGlmIChpc0N1c3RvbUF0dHJpYnV0ZUZuKGF0dHJpYnV0ZU5hbWUpKSB7XG5cdCAgICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBSZXR1cm5zIHRoZSBkZWZhdWx0IHByb3BlcnR5IHZhbHVlIGZvciBhIERPTSBwcm9wZXJ0eSAoaS5lLiwgbm90IGFuXG5cdCAgICogYXR0cmlidXRlKS4gTW9zdCBkZWZhdWx0IHZhbHVlcyBhcmUgJycgb3IgZmFsc2UsIGJ1dCBub3QgYWxsLiBXb3JzZSB5ZXQsXG5cdCAgICogc29tZSAoaW4gcGFydGljdWxhciwgYHR5cGVgKSB2YXJ5IGRlcGVuZGluZyBvbiB0aGUgdHlwZSBvZiBlbGVtZW50LlxuXHQgICAqXG5cdCAgICogVE9ETzogSXMgaXQgYmV0dGVyIHRvIGdyYWIgYWxsIHRoZSBwb3NzaWJsZSBwcm9wZXJ0aWVzIHdoZW4gY3JlYXRpbmcgYW5cblx0ICAgKiBlbGVtZW50IHRvIGF2b2lkIGhhdmluZyB0byBjcmVhdGUgdGhlIHNhbWUgZWxlbWVudCB0d2ljZT9cblx0ICAgKi9cblx0ICBnZXREZWZhdWx0VmFsdWVGb3JQcm9wZXJ0eTogZnVuY3Rpb24gKG5vZGVOYW1lLCBwcm9wKSB7XG5cdCAgICB2YXIgbm9kZURlZmF1bHRzID0gZGVmYXVsdFZhbHVlQ2FjaGVbbm9kZU5hbWVdO1xuXHQgICAgdmFyIHRlc3RFbGVtZW50O1xuXHQgICAgaWYgKCFub2RlRGVmYXVsdHMpIHtcblx0ICAgICAgZGVmYXVsdFZhbHVlQ2FjaGVbbm9kZU5hbWVdID0gbm9kZURlZmF1bHRzID0ge307XG5cdCAgICB9XG5cdCAgICBpZiAoIShwcm9wIGluIG5vZGVEZWZhdWx0cykpIHtcblx0ICAgICAgdGVzdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5vZGVOYW1lKTtcblx0ICAgICAgbm9kZURlZmF1bHRzW3Byb3BdID0gdGVzdEVsZW1lbnRbcHJvcF07XG5cdCAgICB9XG5cdCAgICByZXR1cm4gbm9kZURlZmF1bHRzW3Byb3BdO1xuXHQgIH0sXG5cdFxuXHQgIGluamVjdGlvbjogRE9NUHJvcGVydHlJbmplY3Rpb25cblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gRE9NUHJvcGVydHk7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpKSlcblxuLyoqKi8gfSksXG4vKiAyNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgcXVvdGVBdHRyaWJ1dGVWYWx1ZUZvckJyb3dzZXJcblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgZXNjYXBlVGV4dENvbnRlbnRGb3JCcm93c2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMSk7XG5cdFxuXHQvKipcblx0ICogRXNjYXBlcyBhdHRyaWJ1dGUgdmFsdWUgdG8gcHJldmVudCBzY3JpcHRpbmcgYXR0YWNrcy5cblx0ICpcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBWYWx1ZSB0byBlc2NhcGUuXG5cdCAqIEByZXR1cm4ge3N0cmluZ30gQW4gZXNjYXBlZCBzdHJpbmcuXG5cdCAqL1xuXHRmdW5jdGlvbiBxdW90ZUF0dHJpYnV0ZVZhbHVlRm9yQnJvd3Nlcih2YWx1ZSkge1xuXHQgIHJldHVybiAnXCInICsgZXNjYXBlVGV4dENvbnRlbnRGb3JCcm93c2VyKHZhbHVlKSArICdcIic7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gcXVvdGVBdHRyaWJ1dGVWYWx1ZUZvckJyb3dzZXI7XG5cbi8qKiovIH0pLFxuLyogMjUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgey8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxNC0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgd2FybmluZ1xuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBlbXB0eUZ1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdFxuXHQvKipcblx0ICogU2ltaWxhciB0byBpbnZhcmlhbnQgYnV0IG9ubHkgbG9ncyBhIHdhcm5pbmcgaWYgdGhlIGNvbmRpdGlvbiBpcyBub3QgbWV0LlxuXHQgKiBUaGlzIGNhbiBiZSB1c2VkIHRvIGxvZyBpc3N1ZXMgaW4gZGV2ZWxvcG1lbnQgZW52aXJvbm1lbnRzIGluIGNyaXRpY2FsXG5cdCAqIHBhdGhzLiBSZW1vdmluZyB0aGUgbG9nZ2luZyBjb2RlIGZvciBwcm9kdWN0aW9uIGVudmlyb25tZW50cyB3aWxsIGtlZXAgdGhlXG5cdCAqIHNhbWUgbG9naWMgYW5kIGZvbGxvdyB0aGUgc2FtZSBjb2RlIHBhdGhzLlxuXHQgKi9cblx0XG5cdHZhciB3YXJuaW5nID0gZW1wdHlGdW5jdGlvbjtcblx0XG5cdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgd2FybmluZyA9IGZ1bmN0aW9uIChjb25kaXRpb24sIGZvcm1hdCkge1xuXHQgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuID4gMiA/IF9sZW4gLSAyIDogMCksIF9rZXkgPSAyOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG5cdCAgICAgIGFyZ3NbX2tleSAtIDJdID0gYXJndW1lbnRzW19rZXldO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2B3YXJuaW5nKGNvbmRpdGlvbiwgZm9ybWF0LCAuLi5hcmdzKWAgcmVxdWlyZXMgYSB3YXJuaW5nICcgKyAnbWVzc2FnZSBhcmd1bWVudCcpO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChmb3JtYXQuaW5kZXhPZignRmFpbGVkIENvbXBvc2l0ZSBwcm9wVHlwZTogJykgPT09IDApIHtcblx0ICAgICAgcmV0dXJuOyAvLyBJZ25vcmUgQ29tcG9zaXRlQ29tcG9uZW50IHByb3B0eXBlIGNoZWNrLlxuXHQgICAgfVxuXHRcblx0ICAgIGlmICghY29uZGl0aW9uKSB7XG5cdCAgICAgIHZhciBhcmdJbmRleCA9IDA7XG5cdCAgICAgIHZhciBtZXNzYWdlID0gJ1dhcm5pbmc6ICcgKyBmb3JtYXQucmVwbGFjZSgvJXMvZywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJldHVybiBhcmdzW2FyZ0luZGV4KytdO1xuXHQgICAgICB9KTtcblx0ICAgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgICAgIGNvbnNvbGUuZXJyb3IobWVzc2FnZSk7XG5cdCAgICAgIH1cblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICAvLyAtLS0gV2VsY29tZSB0byBkZWJ1Z2dpbmcgUmVhY3QgLS0tXG5cdCAgICAgICAgLy8gVGhpcyBlcnJvciB3YXMgdGhyb3duIGFzIGEgY29udmVuaWVuY2Ugc28gdGhhdCB5b3UgY2FuIHVzZSB0aGlzIHN0YWNrXG5cdCAgICAgICAgLy8gdG8gZmluZCB0aGUgY2FsbHNpdGUgdGhhdCBjYXVzZWQgdGhpcyB3YXJuaW5nIHRvIGZpcmUuXG5cdCAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xuXHQgICAgICB9IGNhdGNoICh4KSB7fVxuXHQgICAgfVxuXHQgIH07XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gd2FybmluZztcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oNCkpKVxuXG4vKioqLyB9KSxcbi8qIDI2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBSZWFjdENvbXBvbmVudEJyb3dzZXJFbnZpcm9ubWVudFxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBSZWFjdERPTUlET3BlcmF0aW9ucyA9IF9fd2VicGFja19yZXF1aXJlX18oMjcpO1xuXHR2YXIgUmVhY3RNb3VudCA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpO1xuXHRcblx0LyoqXG5cdCAqIEFic3RyYWN0cyBhd2F5IGFsbCBmdW5jdGlvbmFsaXR5IG9mIHRoZSByZWNvbmNpbGVyIHRoYXQgcmVxdWlyZXMga25vd2xlZGdlIG9mXG5cdCAqIHRoZSBicm93c2VyIGNvbnRleHQuIFRPRE86IFRoZXNlIGNhbGxlcnMgc2hvdWxkIGJlIHJlZmFjdG9yZWQgdG8gYXZvaWQgdGhlXG5cdCAqIG5lZWQgZm9yIHRoaXMgaW5qZWN0aW9uLlxuXHQgKi9cblx0dmFyIFJlYWN0Q29tcG9uZW50QnJvd3NlckVudmlyb25tZW50ID0ge1xuXHRcblx0ICBwcm9jZXNzQ2hpbGRyZW5VcGRhdGVzOiBSZWFjdERPTUlET3BlcmF0aW9ucy5kYW5nZXJvdXNseVByb2Nlc3NDaGlsZHJlblVwZGF0ZXMsXG5cdFxuXHQgIHJlcGxhY2VOb2RlV2l0aE1hcmt1cEJ5SUQ6IFJlYWN0RE9NSURPcGVyYXRpb25zLmRhbmdlcm91c2x5UmVwbGFjZU5vZGVXaXRoTWFya3VwQnlJRCxcblx0XG5cdCAgLyoqXG5cdCAgICogSWYgYSBwYXJ0aWN1bGFyIGVudmlyb25tZW50IHJlcXVpcmVzIHRoYXQgc29tZSByZXNvdXJjZXMgYmUgY2xlYW5lZCB1cCxcblx0ICAgKiBzcGVjaWZ5IHRoaXMgaW4gdGhlIGluamVjdGVkIE1peGluLiBJbiB0aGUgRE9NLCB3ZSB3b3VsZCBsaWtlbHkgd2FudCB0b1xuXHQgICAqIHB1cmdlIGFueSBjYWNoZWQgbm9kZSBJRCBsb29rdXBzLlxuXHQgICAqXG5cdCAgICogQHByaXZhdGVcblx0ICAgKi9cblx0ICB1bm1vdW50SURGcm9tRW52aXJvbm1lbnQ6IGZ1bmN0aW9uIChyb290Tm9kZUlEKSB7XG5cdCAgICBSZWFjdE1vdW50LnB1cmdlSUQocm9vdE5vZGVJRCk7XG5cdCAgfVxuXHRcblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gUmVhY3RDb21wb25lbnRCcm93c2VyRW52aXJvbm1lbnQ7XG5cbi8qKiovIH0pLFxuLyogMjcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgey8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RET01JRE9wZXJhdGlvbnNcblx0ICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgRE9NQ2hpbGRyZW5PcGVyYXRpb25zID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0dmFyIERPTVByb3BlcnR5T3BlcmF0aW9ucyA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpO1xuXHR2YXIgUmVhY3RNb3VudCA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpO1xuXHR2YXIgUmVhY3RQZXJmID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7XG5cdFxuXHR2YXIgaW52YXJpYW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7XG5cdFxuXHQvKipcblx0ICogRXJyb3JzIGZvciBwcm9wZXJ0aWVzIHRoYXQgc2hvdWxkIG5vdCBiZSB1cGRhdGVkIHdpdGggYHVwZGF0ZVByb3BlcnR5QnlJRCgpYC5cblx0ICpcblx0ICogQHR5cGUge29iamVjdH1cblx0ICogQHByaXZhdGVcblx0ICovXG5cdHZhciBJTlZBTElEX1BST1BFUlRZX0VSUk9SUyA9IHtcblx0ICBkYW5nZXJvdXNseVNldElubmVySFRNTDogJ2BkYW5nZXJvdXNseVNldElubmVySFRNTGAgbXVzdCBiZSBzZXQgdXNpbmcgYHVwZGF0ZUlubmVySFRNTEJ5SUQoKWAuJyxcblx0ICBzdHlsZTogJ2BzdHlsZWAgbXVzdCBiZSBzZXQgdXNpbmcgYHVwZGF0ZVN0eWxlc0J5SUQoKWAuJ1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIE9wZXJhdGlvbnMgdXNlZCB0byBwcm9jZXNzIHVwZGF0ZXMgdG8gRE9NIG5vZGVzLlxuXHQgKi9cblx0dmFyIFJlYWN0RE9NSURPcGVyYXRpb25zID0ge1xuXHRcblx0ICAvKipcblx0ICAgKiBVcGRhdGVzIGEgRE9NIG5vZGUgd2l0aCBuZXcgcHJvcGVydHkgdmFsdWVzLiBUaGlzIHNob3VsZCBvbmx5IGJlIHVzZWQgdG9cblx0ICAgKiB1cGRhdGUgRE9NIHByb3BlcnRpZXMgaW4gYERPTVByb3BlcnR5YC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBJRCBvZiB0aGUgbm9kZSB0byB1cGRhdGUuXG5cdCAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgQSB2YWxpZCBwcm9wZXJ0eSBuYW1lLCBzZWUgYERPTVByb3BlcnR5YC5cblx0ICAgKiBAcGFyYW0geyp9IHZhbHVlIE5ldyB2YWx1ZSBvZiB0aGUgcHJvcGVydHkuXG5cdCAgICogQGludGVybmFsXG5cdCAgICovXG5cdCAgdXBkYXRlUHJvcGVydHlCeUlEOiBmdW5jdGlvbiAoaWQsIG5hbWUsIHZhbHVlKSB7XG5cdCAgICB2YXIgbm9kZSA9IFJlYWN0TW91bnQuZ2V0Tm9kZShpZCk7XG5cdCAgICAhIUlOVkFMSURfUFJPUEVSVFlfRVJST1JTLmhhc093blByb3BlcnR5KG5hbWUpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ3VwZGF0ZVByb3BlcnR5QnlJRCguLi4pOiAlcycsIElOVkFMSURfUFJPUEVSVFlfRVJST1JTW25hbWVdKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdFxuXHQgICAgLy8gSWYgd2UncmUgdXBkYXRpbmcgdG8gbnVsbCBvciB1bmRlZmluZWQsIHdlIHNob3VsZCByZW1vdmUgdGhlIHByb3BlcnR5XG5cdCAgICAvLyBmcm9tIHRoZSBET00gbm9kZSBpbnN0ZWFkIG9mIGluYWR2ZXJ0YW50bHkgc2V0dGluZyB0byBhIHN0cmluZy4gVGhpc1xuXHQgICAgLy8gYnJpbmdzIHVzIGluIGxpbmUgd2l0aCB0aGUgc2FtZSBiZWhhdmlvciB3ZSBoYXZlIG9uIGluaXRpYWwgcmVuZGVyLlxuXHQgICAgaWYgKHZhbHVlICE9IG51bGwpIHtcblx0ICAgICAgRE9NUHJvcGVydHlPcGVyYXRpb25zLnNldFZhbHVlRm9yUHJvcGVydHkobm9kZSwgbmFtZSwgdmFsdWUpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgRE9NUHJvcGVydHlPcGVyYXRpb25zLmRlbGV0ZVZhbHVlRm9yUHJvcGVydHkobm9kZSwgbmFtZSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogUmVwbGFjZXMgYSBET00gbm9kZSB0aGF0IGV4aXN0cyBpbiB0aGUgZG9jdW1lbnQgd2l0aCBtYXJrdXAuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgSUQgb2YgY2hpbGQgdG8gYmUgcmVwbGFjZWQuXG5cdCAgICogQHBhcmFtIHtzdHJpbmd9IG1hcmt1cCBEYW5nZXJvdXMgbWFya3VwIHRvIGluamVjdCBpbiBwbGFjZSBvZiBjaGlsZC5cblx0ICAgKiBAaW50ZXJuYWxcblx0ICAgKiBAc2VlIHtEYW5nZXIuZGFuZ2Vyb3VzbHlSZXBsYWNlTm9kZVdpdGhNYXJrdXB9XG5cdCAgICovXG5cdCAgZGFuZ2Vyb3VzbHlSZXBsYWNlTm9kZVdpdGhNYXJrdXBCeUlEOiBmdW5jdGlvbiAoaWQsIG1hcmt1cCkge1xuXHQgICAgdmFyIG5vZGUgPSBSZWFjdE1vdW50LmdldE5vZGUoaWQpO1xuXHQgICAgRE9NQ2hpbGRyZW5PcGVyYXRpb25zLmRhbmdlcm91c2x5UmVwbGFjZU5vZGVXaXRoTWFya3VwKG5vZGUsIG1hcmt1cCk7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogVXBkYXRlcyBhIGNvbXBvbmVudCdzIGNoaWxkcmVuIGJ5IHByb2Nlc3NpbmcgYSBzZXJpZXMgb2YgdXBkYXRlcy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7YXJyYXk8b2JqZWN0Pn0gdXBkYXRlcyBMaXN0IG9mIHVwZGF0ZSBjb25maWd1cmF0aW9ucy5cblx0ICAgKiBAcGFyYW0ge2FycmF5PHN0cmluZz59IG1hcmt1cCBMaXN0IG9mIG1hcmt1cCBzdHJpbmdzLlxuXHQgICAqIEBpbnRlcm5hbFxuXHQgICAqL1xuXHQgIGRhbmdlcm91c2x5UHJvY2Vzc0NoaWxkcmVuVXBkYXRlczogZnVuY3Rpb24gKHVwZGF0ZXMsIG1hcmt1cCkge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB1cGRhdGVzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHVwZGF0ZXNbaV0ucGFyZW50Tm9kZSA9IFJlYWN0TW91bnQuZ2V0Tm9kZSh1cGRhdGVzW2ldLnBhcmVudElEKTtcblx0ICAgIH1cblx0ICAgIERPTUNoaWxkcmVuT3BlcmF0aW9ucy5wcm9jZXNzVXBkYXRlcyh1cGRhdGVzLCBtYXJrdXApO1xuXHQgIH1cblx0fTtcblx0XG5cdFJlYWN0UGVyZi5tZWFzdXJlTWV0aG9kcyhSZWFjdERPTUlET3BlcmF0aW9ucywgJ1JlYWN0RE9NSURPcGVyYXRpb25zJywge1xuXHQgIGRhbmdlcm91c2x5UmVwbGFjZU5vZGVXaXRoTWFya3VwQnlJRDogJ2Rhbmdlcm91c2x5UmVwbGFjZU5vZGVXaXRoTWFya3VwQnlJRCcsXG5cdCAgZGFuZ2Vyb3VzbHlQcm9jZXNzQ2hpbGRyZW5VcGRhdGVzOiAnZGFuZ2Vyb3VzbHlQcm9jZXNzQ2hpbGRyZW5VcGRhdGVzJ1xuXHR9KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gUmVhY3RET01JRE9wZXJhdGlvbnM7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpKSlcblxuLyoqKi8gfSksXG4vKiAyOCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzKSB7LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBSZWFjdE1vdW50XG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIERPTVByb3BlcnR5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMyk7XG5cdHZhciBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KTtcblx0dmFyIFJlYWN0Q3VycmVudE93bmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblx0dmFyIFJlYWN0RE9NRmVhdHVyZUZsYWdzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBSZWFjdEVsZW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyKTtcblx0dmFyIFJlYWN0RW1wdHlDb21wb25lbnRSZWdpc3RyeSA9IF9fd2VicGFja19yZXF1aXJlX18oNDQpO1xuXHR2YXIgUmVhY3RJbnN0YW5jZUhhbmRsZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblx0dmFyIFJlYWN0SW5zdGFuY2VNYXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3KTtcblx0dmFyIFJlYWN0TWFya3VwQ2hlY2tzdW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4KTtcblx0dmFyIFJlYWN0UGVyZiA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHR2YXIgUmVhY3RSZWNvbmNpbGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7XG5cdHZhciBSZWFjdFVwZGF0ZVF1ZXVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Myk7XG5cdHZhciBSZWFjdFVwZGF0ZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU0KTtcblx0XG5cdHZhciBhc3NpZ24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KTtcblx0dmFyIGVtcHR5T2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OCk7XG5cdHZhciBjb250YWluc05vZGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU5KTtcblx0dmFyIGluc3RhbnRpYXRlUmVhY3RDb21wb25lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYyKTtcblx0dmFyIGludmFyaWFudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHR2YXIgc2V0SW5uZXJIVE1MID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOSk7XG5cdHZhciBzaG91bGRVcGRhdGVSZWFjdENvbXBvbmVudCA9IF9fd2VicGFja19yZXF1aXJlX18oNjcpO1xuXHR2YXIgdmFsaWRhdGVET01OZXN0aW5nID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MCk7XG5cdHZhciB3YXJuaW5nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cdFxuXHR2YXIgQVRUUl9OQU1FID0gRE9NUHJvcGVydHkuSURfQVRUUklCVVRFX05BTUU7XG5cdHZhciBub2RlQ2FjaGUgPSB7fTtcblx0XG5cdHZhciBFTEVNRU5UX05PREVfVFlQRSA9IDE7XG5cdHZhciBET0NfTk9ERV9UWVBFID0gOTtcblx0dmFyIERPQ1VNRU5UX0ZSQUdNRU5UX05PREVfVFlQRSA9IDExO1xuXHRcblx0dmFyIG93bmVyRG9jdW1lbnRDb250ZXh0S2V5ID0gJ19fUmVhY3RNb3VudF9vd25lckRvY3VtZW50JCcgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zbGljZSgyKTtcblx0XG5cdC8qKiBNYXBwaW5nIGZyb20gcmVhY3RSb290SUQgdG8gUmVhY3QgY29tcG9uZW50IGluc3RhbmNlLiAqL1xuXHR2YXIgaW5zdGFuY2VzQnlSZWFjdFJvb3RJRCA9IHt9O1xuXHRcblx0LyoqIE1hcHBpbmcgZnJvbSByZWFjdFJvb3RJRCB0byBgY29udGFpbmVyYCBub2Rlcy4gKi9cblx0dmFyIGNvbnRhaW5lcnNCeVJlYWN0Um9vdElEID0ge307XG5cdFxuXHRpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgIC8qKiBfX0RFVl9fLW9ubHkgbWFwcGluZyBmcm9tIHJlYWN0Um9vdElEIHRvIHJvb3QgZWxlbWVudHMuICovXG5cdCAgdmFyIHJvb3RFbGVtZW50c0J5UmVhY3RSb290SUQgPSB7fTtcblx0fVxuXHRcblx0Ly8gVXNlZCB0byBzdG9yZSBicmVhZHRoLWZpcnN0IHNlYXJjaCBzdGF0ZSBpbiBmaW5kQ29tcG9uZW50Um9vdC5cblx0dmFyIGZpbmRDb21wb25lbnRSb290UmV1c2FibGVBcnJheSA9IFtdO1xuXHRcblx0LyoqXG5cdCAqIEZpbmRzIHRoZSBpbmRleCBvZiB0aGUgZmlyc3QgY2hhcmFjdGVyXG5cdCAqIHRoYXQncyBub3QgY29tbW9uIGJldHdlZW4gdGhlIHR3byBnaXZlbiBzdHJpbmdzLlxuXHQgKlxuXHQgKiBAcmV0dXJuIHtudW1iZXJ9IHRoZSBpbmRleCBvZiB0aGUgY2hhcmFjdGVyIHdoZXJlIHRoZSBzdHJpbmdzIGRpdmVyZ2Vcblx0ICovXG5cdGZ1bmN0aW9uIGZpcnN0RGlmZmVyZW5jZUluZGV4KHN0cmluZzEsIHN0cmluZzIpIHtcblx0ICB2YXIgbWluTGVuID0gTWF0aC5taW4oc3RyaW5nMS5sZW5ndGgsIHN0cmluZzIubGVuZ3RoKTtcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IG1pbkxlbjsgaSsrKSB7XG5cdCAgICBpZiAoc3RyaW5nMS5jaGFyQXQoaSkgIT09IHN0cmluZzIuY2hhckF0KGkpKSB7XG5cdCAgICAgIHJldHVybiBpO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gc3RyaW5nMS5sZW5ndGggPT09IHN0cmluZzIubGVuZ3RoID8gLTEgOiBtaW5MZW47XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBAcGFyYW0ge0RPTUVsZW1lbnR8RE9NRG9jdW1lbnR9IGNvbnRhaW5lciBET00gZWxlbWVudCB0aGF0IG1heSBjb250YWluXG5cdCAqIGEgUmVhY3QgY29tcG9uZW50XG5cdCAqIEByZXR1cm4gez8qfSBET00gZWxlbWVudCB0aGF0IG1heSBoYXZlIHRoZSByZWFjdFJvb3QgSUQsIG9yIG51bGwuXG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRSZWFjdFJvb3RFbGVtZW50SW5Db250YWluZXIoY29udGFpbmVyKSB7XG5cdCAgaWYgKCFjb250YWluZXIpIHtcblx0ICAgIHJldHVybiBudWxsO1xuXHQgIH1cblx0XG5cdCAgaWYgKGNvbnRhaW5lci5ub2RlVHlwZSA9PT0gRE9DX05PREVfVFlQRSkge1xuXHQgICAgcmV0dXJuIGNvbnRhaW5lci5kb2N1bWVudEVsZW1lbnQ7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBjb250YWluZXIuZmlyc3RDaGlsZDtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGNvbnRhaW5lciBET00gZWxlbWVudCB0aGF0IG1heSBjb250YWluIGEgUmVhY3QgY29tcG9uZW50LlxuXHQgKiBAcmV0dXJuIHs/c3RyaW5nfSBBIFwicmVhY3RSb290XCIgSUQsIGlmIGEgUmVhY3QgY29tcG9uZW50IGlzIHJlbmRlcmVkLlxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0UmVhY3RSb290SUQoY29udGFpbmVyKSB7XG5cdCAgdmFyIHJvb3RFbGVtZW50ID0gZ2V0UmVhY3RSb290RWxlbWVudEluQ29udGFpbmVyKGNvbnRhaW5lcik7XG5cdCAgcmV0dXJuIHJvb3RFbGVtZW50ICYmIFJlYWN0TW91bnQuZ2V0SUQocm9vdEVsZW1lbnQpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQWNjZXNzaW5nIG5vZGVbQVRUUl9OQU1FXSBvciBjYWxsaW5nIGdldEF0dHJpYnV0ZShBVFRSX05BTUUpIG9uIGEgZm9ybVxuXHQgKiBlbGVtZW50IGNhbiByZXR1cm4gaXRzIGNvbnRyb2wgd2hvc2UgbmFtZSBvciBJRCBlcXVhbHMgQVRUUl9OQU1FLiBBbGxcblx0ICogRE9NIG5vZGVzIHN1cHBvcnQgYGdldEF0dHJpYnV0ZU5vZGVgIGJ1dCB0aGlzIGNhbiBhbHNvIGdldCBjYWxsZWQgb25cblx0ICogb3RoZXIgb2JqZWN0cyBzbyBqdXN0IHJldHVybiAnJyBpZiB3ZSdyZSBnaXZlbiBzb21ldGhpbmcgb3RoZXIgdGhhbiBhXG5cdCAqIERPTSBub2RlIChzdWNoIGFzIHdpbmRvdykuXG5cdCAqXG5cdCAqIEBwYXJhbSB7P0RPTUVsZW1lbnR8RE9NV2luZG93fERPTURvY3VtZW50fERPTVRleHROb2RlfSBub2RlIERPTSBub2RlLlxuXHQgKiBAcmV0dXJuIHtzdHJpbmd9IElEIG9mIHRoZSBzdXBwbGllZCBgZG9tTm9kZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRJRChub2RlKSB7XG5cdCAgdmFyIGlkID0gaW50ZXJuYWxHZXRJRChub2RlKTtcblx0ICBpZiAoaWQpIHtcblx0ICAgIGlmIChub2RlQ2FjaGUuaGFzT3duUHJvcGVydHkoaWQpKSB7XG5cdCAgICAgIHZhciBjYWNoZWQgPSBub2RlQ2FjaGVbaWRdO1xuXHQgICAgICBpZiAoY2FjaGVkICE9PSBub2RlKSB7XG5cdCAgICAgICAgISFpc1ZhbGlkKGNhY2hlZCwgaWQpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0TW91bnQ6IFR3byB2YWxpZCBidXQgdW5lcXVhbCBub2RlcyB3aXRoIHRoZSBzYW1lIGAlc2A6ICVzJywgQVRUUl9OQU1FLCBpZCkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXHRcblx0ICAgICAgICBub2RlQ2FjaGVbaWRdID0gbm9kZTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgbm9kZUNhY2hlW2lkXSA9IG5vZGU7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gaWQ7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGludGVybmFsR2V0SUQobm9kZSkge1xuXHQgIC8vIElmIG5vZGUgaXMgc29tZXRoaW5nIGxpa2UgYSB3aW5kb3csIGRvY3VtZW50LCBvciB0ZXh0IG5vZGUsIG5vbmUgb2Zcblx0ICAvLyB3aGljaCBzdXBwb3J0IGF0dHJpYnV0ZXMgb3IgYSAuZ2V0QXR0cmlidXRlIG1ldGhvZCwgZ3JhY2VmdWxseSByZXR1cm5cblx0ICAvLyB0aGUgZW1wdHkgc3RyaW5nLCBhcyBpZiB0aGUgYXR0cmlidXRlIHdlcmUgbWlzc2luZy5cblx0ICByZXR1cm4gbm9kZSAmJiBub2RlLmdldEF0dHJpYnV0ZSAmJiBub2RlLmdldEF0dHJpYnV0ZShBVFRSX05BTUUpIHx8ICcnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogU2V0cyB0aGUgUmVhY3Qtc3BlY2lmaWMgSUQgb2YgdGhlIGdpdmVuIG5vZGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RE9NRWxlbWVudH0gbm9kZSBUaGUgRE9NIG5vZGUgd2hvc2UgSUQgd2lsbCBiZSBzZXQuXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBpZCBUaGUgdmFsdWUgb2YgdGhlIElEIGF0dHJpYnV0ZS5cblx0ICovXG5cdGZ1bmN0aW9uIHNldElEKG5vZGUsIGlkKSB7XG5cdCAgdmFyIG9sZElEID0gaW50ZXJuYWxHZXRJRChub2RlKTtcblx0ICBpZiAob2xkSUQgIT09IGlkKSB7XG5cdCAgICBkZWxldGUgbm9kZUNhY2hlW29sZElEXTtcblx0ICB9XG5cdCAgbm9kZS5zZXRBdHRyaWJ1dGUoQVRUUl9OQU1FLCBpZCk7XG5cdCAgbm9kZUNhY2hlW2lkXSA9IG5vZGU7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGaW5kcyB0aGUgbm9kZSB3aXRoIHRoZSBzdXBwbGllZCBSZWFjdC1nZW5lcmF0ZWQgRE9NIElELlxuXHQgKlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gaWQgQSBSZWFjdC1nZW5lcmF0ZWQgRE9NIElELlxuXHQgKiBAcmV0dXJuIHtET01FbGVtZW50fSBET00gbm9kZSB3aXRoIHRoZSBzdXBwbGVkIGBpZGAuXG5cdCAqIEBpbnRlcm5hbFxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0Tm9kZShpZCkge1xuXHQgIGlmICghbm9kZUNhY2hlLmhhc093blByb3BlcnR5KGlkKSB8fCAhaXNWYWxpZChub2RlQ2FjaGVbaWRdLCBpZCkpIHtcblx0ICAgIG5vZGVDYWNoZVtpZF0gPSBSZWFjdE1vdW50LmZpbmRSZWFjdE5vZGVCeUlEKGlkKTtcblx0ICB9XG5cdCAgcmV0dXJuIG5vZGVDYWNoZVtpZF07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGaW5kcyB0aGUgbm9kZSB3aXRoIHRoZSBzdXBwbGllZCBwdWJsaWMgUmVhY3QgaW5zdGFuY2UuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gaW5zdGFuY2UgQSBwdWJsaWMgUmVhY3QgaW5zdGFuY2UuXG5cdCAqIEByZXR1cm4gez9ET01FbGVtZW50fSBET00gbm9kZSB3aXRoIHRoZSBzdXBwbGVkIGBpZGAuXG5cdCAqIEBpbnRlcm5hbFxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0Tm9kZUZyb21JbnN0YW5jZShpbnN0YW5jZSkge1xuXHQgIHZhciBpZCA9IFJlYWN0SW5zdGFuY2VNYXAuZ2V0KGluc3RhbmNlKS5fcm9vdE5vZGVJRDtcblx0ICBpZiAoUmVhY3RFbXB0eUNvbXBvbmVudFJlZ2lzdHJ5LmlzTnVsbENvbXBvbmVudElEKGlkKSkge1xuXHQgICAgcmV0dXJuIG51bGw7XG5cdCAgfVxuXHQgIGlmICghbm9kZUNhY2hlLmhhc093blByb3BlcnR5KGlkKSB8fCAhaXNWYWxpZChub2RlQ2FjaGVbaWRdLCBpZCkpIHtcblx0ICAgIG5vZGVDYWNoZVtpZF0gPSBSZWFjdE1vdW50LmZpbmRSZWFjdE5vZGVCeUlEKGlkKTtcblx0ICB9XG5cdCAgcmV0dXJuIG5vZGVDYWNoZVtpZF07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBIG5vZGUgaXMgXCJ2YWxpZFwiIGlmIGl0IGlzIGNvbnRhaW5lZCBieSBhIGN1cnJlbnRseSBtb3VudGVkIGNvbnRhaW5lci5cblx0ICpcblx0ICogVGhpcyBtZWFucyB0aGF0IHRoZSBub2RlIGRvZXMgbm90IGhhdmUgdG8gYmUgY29udGFpbmVkIGJ5IGEgZG9jdW1lbnQgaW5cblx0ICogb3JkZXIgdG8gYmUgY29uc2lkZXJlZCB2YWxpZC5cblx0ICpcblx0ICogQHBhcmFtIHs/RE9NRWxlbWVudH0gbm9kZSBUaGUgY2FuZGlkYXRlIERPTSBub2RlLlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gaWQgVGhlIGV4cGVjdGVkIElEIG9mIHRoZSBub2RlLlxuXHQgKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoZSBub2RlIGlzIGNvbnRhaW5lZCBieSBhIG1vdW50ZWQgY29udGFpbmVyLlxuXHQgKi9cblx0ZnVuY3Rpb24gaXNWYWxpZChub2RlLCBpZCkge1xuXHQgIGlmIChub2RlKSB7XG5cdCAgICAhKGludGVybmFsR2V0SUQobm9kZSkgPT09IGlkKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdE1vdW50OiBVbmV4cGVjdGVkIG1vZGlmaWNhdGlvbiBvZiBgJXNgJywgQVRUUl9OQU1FKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdFxuXHQgICAgdmFyIGNvbnRhaW5lciA9IFJlYWN0TW91bnQuZmluZFJlYWN0Q29udGFpbmVyRm9ySUQoaWQpO1xuXHQgICAgaWYgKGNvbnRhaW5lciAmJiBjb250YWluc05vZGUoY29udGFpbmVyLCBub2RlKSkge1xuXHQgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybiBmYWxzZTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENhdXNlcyB0aGUgY2FjaGUgdG8gZm9yZ2V0IGFib3V0IG9uZSBSZWFjdC1zcGVjaWZpYyBJRC5cblx0ICpcblx0ICogQHBhcmFtIHtzdHJpbmd9IGlkIFRoZSBJRCB0byBmb3JnZXQuXG5cdCAqL1xuXHRmdW5jdGlvbiBwdXJnZUlEKGlkKSB7XG5cdCAgZGVsZXRlIG5vZGVDYWNoZVtpZF07XG5cdH1cblx0XG5cdHZhciBkZWVwZXN0Tm9kZVNvRmFyID0gbnVsbDtcblx0ZnVuY3Rpb24gZmluZERlZXBlc3RDYWNoZWRBbmNlc3RvckltcGwoYW5jZXN0b3JJRCkge1xuXHQgIHZhciBhbmNlc3RvciA9IG5vZGVDYWNoZVthbmNlc3RvcklEXTtcblx0ICBpZiAoYW5jZXN0b3IgJiYgaXNWYWxpZChhbmNlc3RvciwgYW5jZXN0b3JJRCkpIHtcblx0ICAgIGRlZXBlc3ROb2RlU29GYXIgPSBhbmNlc3Rvcjtcblx0ICB9IGVsc2Uge1xuXHQgICAgLy8gVGhpcyBub2RlIGlzbid0IHBvcHVsYXRlZCBpbiB0aGUgY2FjaGUsIHNvIHByZXN1bWFibHkgbm9uZSBvZiBpdHNcblx0ICAgIC8vIGRlc2NlbmRhbnRzIGFyZS4gQnJlYWsgb3V0IG9mIHRoZSBsb29wLlxuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFJldHVybiB0aGUgZGVlcGVzdCBjYWNoZWQgbm9kZSB3aG9zZSBJRCBpcyBhIHByZWZpeCBvZiBgdGFyZ2V0SURgLlxuXHQgKi9cblx0ZnVuY3Rpb24gZmluZERlZXBlc3RDYWNoZWRBbmNlc3Rvcih0YXJnZXRJRCkge1xuXHQgIGRlZXBlc3ROb2RlU29GYXIgPSBudWxsO1xuXHQgIFJlYWN0SW5zdGFuY2VIYW5kbGVzLnRyYXZlcnNlQW5jZXN0b3JzKHRhcmdldElELCBmaW5kRGVlcGVzdENhY2hlZEFuY2VzdG9ySW1wbCk7XG5cdFxuXHQgIHZhciBmb3VuZE5vZGUgPSBkZWVwZXN0Tm9kZVNvRmFyO1xuXHQgIGRlZXBlc3ROb2RlU29GYXIgPSBudWxsO1xuXHQgIHJldHVybiBmb3VuZE5vZGU7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBNb3VudHMgdGhpcyBjb21wb25lbnQgYW5kIGluc2VydHMgaXQgaW50byB0aGUgRE9NLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBjb21wb25lbnRJbnN0YW5jZSBUaGUgaW5zdGFuY2UgdG8gbW91bnQuXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSByb290SUQgRE9NIElEIG9mIHRoZSByb290IG5vZGUuXG5cdCAqIEBwYXJhbSB7RE9NRWxlbWVudH0gY29udGFpbmVyIERPTSBlbGVtZW50IHRvIG1vdW50IGludG8uXG5cdCAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cblx0ICogQHBhcmFtIHtib29sZWFufSBzaG91bGRSZXVzZU1hcmt1cCBJZiB0cnVlLCBkbyBub3QgaW5zZXJ0IG1hcmt1cFxuXHQgKi9cblx0ZnVuY3Rpb24gbW91bnRDb21wb25lbnRJbnRvTm9kZShjb21wb25lbnRJbnN0YW5jZSwgcm9vdElELCBjb250YWluZXIsIHRyYW5zYWN0aW9uLCBzaG91bGRSZXVzZU1hcmt1cCwgY29udGV4dCkge1xuXHQgIGlmIChSZWFjdERPTUZlYXR1cmVGbGFncy51c2VDcmVhdGVFbGVtZW50KSB7XG5cdCAgICBjb250ZXh0ID0gYXNzaWduKHt9LCBjb250ZXh0KTtcblx0ICAgIGlmIChjb250YWluZXIubm9kZVR5cGUgPT09IERPQ19OT0RFX1RZUEUpIHtcblx0ICAgICAgY29udGV4dFtvd25lckRvY3VtZW50Q29udGV4dEtleV0gPSBjb250YWluZXI7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBjb250ZXh0W293bmVyRG9jdW1lbnRDb250ZXh0S2V5XSA9IGNvbnRhaW5lci5vd25lckRvY3VtZW50O1xuXHQgICAgfVxuXHQgIH1cblx0ICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgaWYgKGNvbnRleHQgPT09IGVtcHR5T2JqZWN0KSB7XG5cdCAgICAgIGNvbnRleHQgPSB7fTtcblx0ICAgIH1cblx0ICAgIHZhciB0YWcgPSBjb250YWluZXIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcblx0ICAgIGNvbnRleHRbdmFsaWRhdGVET01OZXN0aW5nLmFuY2VzdG9ySW5mb0NvbnRleHRLZXldID0gdmFsaWRhdGVET01OZXN0aW5nLnVwZGF0ZWRBbmNlc3RvckluZm8obnVsbCwgdGFnLCBudWxsKTtcblx0ICB9XG5cdCAgdmFyIG1hcmt1cCA9IFJlYWN0UmVjb25jaWxlci5tb3VudENvbXBvbmVudChjb21wb25lbnRJbnN0YW5jZSwgcm9vdElELCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG5cdCAgY29tcG9uZW50SW5zdGFuY2UuX3JlbmRlcmVkQ29tcG9uZW50Ll90b3BMZXZlbFdyYXBwZXIgPSBjb21wb25lbnRJbnN0YW5jZTtcblx0ICBSZWFjdE1vdW50Ll9tb3VudEltYWdlSW50b05vZGUobWFya3VwLCBjb250YWluZXIsIHNob3VsZFJldXNlTWFya3VwLCB0cmFuc2FjdGlvbik7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBCYXRjaGVkIG1vdW50LlxuXHQgKlxuXHQgKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBjb21wb25lbnRJbnN0YW5jZSBUaGUgaW5zdGFuY2UgdG8gbW91bnQuXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSByb290SUQgRE9NIElEIG9mIHRoZSByb290IG5vZGUuXG5cdCAqIEBwYXJhbSB7RE9NRWxlbWVudH0gY29udGFpbmVyIERPTSBlbGVtZW50IHRvIG1vdW50IGludG8uXG5cdCAqIEBwYXJhbSB7Ym9vbGVhbn0gc2hvdWxkUmV1c2VNYXJrdXAgSWYgdHJ1ZSwgZG8gbm90IGluc2VydCBtYXJrdXBcblx0ICovXG5cdGZ1bmN0aW9uIGJhdGNoZWRNb3VudENvbXBvbmVudEludG9Ob2RlKGNvbXBvbmVudEluc3RhbmNlLCByb290SUQsIGNvbnRhaW5lciwgc2hvdWxkUmV1c2VNYXJrdXAsIGNvbnRleHQpIHtcblx0ICB2YXIgdHJhbnNhY3Rpb24gPSBSZWFjdFVwZGF0ZXMuUmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbi5nZXRQb29sZWQoXG5cdCAgLyogZm9yY2VIVE1MICovc2hvdWxkUmV1c2VNYXJrdXApO1xuXHQgIHRyYW5zYWN0aW9uLnBlcmZvcm0obW91bnRDb21wb25lbnRJbnRvTm9kZSwgbnVsbCwgY29tcG9uZW50SW5zdGFuY2UsIHJvb3RJRCwgY29udGFpbmVyLCB0cmFuc2FjdGlvbiwgc2hvdWxkUmV1c2VNYXJrdXAsIGNvbnRleHQpO1xuXHQgIFJlYWN0VXBkYXRlcy5SZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uLnJlbGVhc2UodHJhbnNhY3Rpb24pO1xuXHR9XG5cdFxuXHQvKipcblx0ICogVW5tb3VudHMgYSBjb21wb25lbnQgYW5kIHJlbW92ZXMgaXQgZnJvbSB0aGUgRE9NLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBpbnN0YW5jZSBSZWFjdCBjb21wb25lbnQgaW5zdGFuY2UuXG5cdCAqIEBwYXJhbSB7RE9NRWxlbWVudH0gY29udGFpbmVyIERPTSBlbGVtZW50IHRvIHVubW91bnQgZnJvbS5cblx0ICogQGZpbmFsXG5cdCAqIEBpbnRlcm5hbFxuXHQgKiBAc2VlIHtSZWFjdE1vdW50LnVubW91bnRDb21wb25lbnRBdE5vZGV9XG5cdCAqL1xuXHRmdW5jdGlvbiB1bm1vdW50Q29tcG9uZW50RnJvbU5vZGUoaW5zdGFuY2UsIGNvbnRhaW5lcikge1xuXHQgIFJlYWN0UmVjb25jaWxlci51bm1vdW50Q29tcG9uZW50KGluc3RhbmNlKTtcblx0XG5cdCAgaWYgKGNvbnRhaW5lci5ub2RlVHlwZSA9PT0gRE9DX05PREVfVFlQRSkge1xuXHQgICAgY29udGFpbmVyID0gY29udGFpbmVyLmRvY3VtZW50RWxlbWVudDtcblx0ICB9XG5cdFxuXHQgIC8vIGh0dHA6Ly9qc3BlcmYuY29tL2VtcHR5aW5nLWEtbm9kZVxuXHQgIHdoaWxlIChjb250YWluZXIubGFzdENoaWxkKSB7XG5cdCAgICBjb250YWluZXIucmVtb3ZlQ2hpbGQoY29udGFpbmVyLmxhc3RDaGlsZCk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogVHJ1ZSBpZiB0aGUgc3VwcGxpZWQgRE9NIG5vZGUgaGFzIGEgZGlyZWN0IFJlYWN0LXJlbmRlcmVkIGNoaWxkIHRoYXQgaXNcblx0ICogbm90IGEgUmVhY3Qgcm9vdCBlbGVtZW50LiBVc2VmdWwgZm9yIHdhcm5pbmcgaW4gYHJlbmRlcmAsXG5cdCAqIGB1bm1vdW50Q29tcG9uZW50QXROb2RlYCwgZXRjLlxuXHQgKlxuXHQgKiBAcGFyYW0gez9ET01FbGVtZW50fSBub2RlIFRoZSBjYW5kaWRhdGUgRE9NIG5vZGUuXG5cdCAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIERPTSBlbGVtZW50IGNvbnRhaW5zIGEgZGlyZWN0IGNoaWxkIHRoYXQgd2FzXG5cdCAqIHJlbmRlcmVkIGJ5IFJlYWN0IGJ1dCBpcyBub3QgYSByb290IGVsZW1lbnQuXG5cdCAqIEBpbnRlcm5hbFxuXHQgKi9cblx0ZnVuY3Rpb24gaGFzTm9uUm9vdFJlYWN0Q2hpbGQobm9kZSkge1xuXHQgIHZhciByZWFjdFJvb3RJRCA9IGdldFJlYWN0Um9vdElEKG5vZGUpO1xuXHQgIHJldHVybiByZWFjdFJvb3RJRCA/IHJlYWN0Um9vdElEICE9PSBSZWFjdEluc3RhbmNlSGFuZGxlcy5nZXRSZWFjdFJvb3RJREZyb21Ob2RlSUQocmVhY3RSb290SUQpIDogZmFsc2U7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZXR1cm5zIHRoZSBmaXJzdCAoZGVlcGVzdCkgYW5jZXN0b3Igb2YgYSBub2RlIHdoaWNoIGlzIHJlbmRlcmVkIGJ5IHRoaXMgY29weVxuXHQgKiBvZiBSZWFjdC5cblx0ICovXG5cdGZ1bmN0aW9uIGZpbmRGaXJzdFJlYWN0RE9NSW1wbChub2RlKSB7XG5cdCAgLy8gVGhpcyBub2RlIG1pZ2h0IGJlIGZyb20gYW5vdGhlciBSZWFjdCBpbnN0YW5jZSwgc28gd2UgbWFrZSBzdXJlIG5vdCB0b1xuXHQgIC8vIGV4YW1pbmUgdGhlIG5vZGUgY2FjaGUgaGVyZVxuXHQgIGZvciAoOyBub2RlICYmIG5vZGUucGFyZW50Tm9kZSAhPT0gbm9kZTsgbm9kZSA9IG5vZGUucGFyZW50Tm9kZSkge1xuXHQgICAgaWYgKG5vZGUubm9kZVR5cGUgIT09IDEpIHtcblx0ICAgICAgLy8gTm90IGEgRE9NRWxlbWVudCwgdGhlcmVmb3JlIG5vdCBhIFJlYWN0IGNvbXBvbmVudFxuXHQgICAgICBjb250aW51ZTtcblx0ICAgIH1cblx0ICAgIHZhciBub2RlSUQgPSBpbnRlcm5hbEdldElEKG5vZGUpO1xuXHQgICAgaWYgKCFub2RlSUQpIHtcblx0ICAgICAgY29udGludWU7XG5cdCAgICB9XG5cdCAgICB2YXIgcmVhY3RSb290SUQgPSBSZWFjdEluc3RhbmNlSGFuZGxlcy5nZXRSZWFjdFJvb3RJREZyb21Ob2RlSUQobm9kZUlEKTtcblx0XG5cdCAgICAvLyBJZiBjb250YWluZXJzQnlSZWFjdFJvb3RJRCBjb250YWlucyB0aGUgY29udGFpbmVyIHdlIGZpbmQgYnkgY3Jhd2xpbmcgdXBcblx0ICAgIC8vIHRoZSB0cmVlLCB3ZSBrbm93IHRoYXQgdGhpcyBpbnN0YW5jZSBvZiBSZWFjdCByZW5kZXJlZCB0aGUgbm9kZS5cblx0ICAgIC8vIG5iLiBpc1ZhbGlkJ3Mgc3RyYXRlZ3kgKHdpdGggY29udGFpbnNOb2RlKSBkb2VzIG5vdCB3b3JrIGJlY2F1c2UgcmVuZGVyXG5cdCAgICAvLyB0cmVlcyBtYXkgYmUgbmVzdGVkIGFuZCB3ZSBkb24ndCB3YW50IGEgZmFsc2UgcG9zaXRpdmUgaW4gdGhhdCBjYXNlLlxuXHQgICAgdmFyIGN1cnJlbnQgPSBub2RlO1xuXHQgICAgdmFyIGxhc3RJRDtcblx0ICAgIGRvIHtcblx0ICAgICAgbGFzdElEID0gaW50ZXJuYWxHZXRJRChjdXJyZW50KTtcblx0ICAgICAgY3VycmVudCA9IGN1cnJlbnQucGFyZW50Tm9kZTtcblx0ICAgICAgaWYgKGN1cnJlbnQgPT0gbnVsbCkge1xuXHQgICAgICAgIC8vIFRoZSBwYXNzZWQtaW4gbm9kZSBoYXMgYmVlbiBkZXRhY2hlZCBmcm9tIHRoZSBjb250YWluZXIgaXQgd2FzXG5cdCAgICAgICAgLy8gb3JpZ2luYWxseSByZW5kZXJlZCBpbnRvLlxuXHQgICAgICAgIHJldHVybiBudWxsO1xuXHQgICAgICB9XG5cdCAgICB9IHdoaWxlIChsYXN0SUQgIT09IHJlYWN0Um9vdElEKTtcblx0XG5cdCAgICBpZiAoY3VycmVudCA9PT0gY29udGFpbmVyc0J5UmVhY3RSb290SURbcmVhY3RSb290SURdKSB7XG5cdCAgICAgIHJldHVybiBub2RlO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gbnVsbDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFRlbXBvcmFyeSAoPykgaGFjayBzbyB0aGF0IHdlIGNhbiBzdG9yZSBhbGwgdG9wLWxldmVsIHBlbmRpbmcgdXBkYXRlcyBvblxuXHQgKiBjb21wb3NpdGVzIGluc3RlYWQgb2YgaGF2aW5nIHRvIHdvcnJ5IGFib3V0IGRpZmZlcmVudCB0eXBlcyBvZiBjb21wb25lbnRzXG5cdCAqIGhlcmUuXG5cdCAqL1xuXHR2YXIgVG9wTGV2ZWxXcmFwcGVyID0gZnVuY3Rpb24gKCkge307XG5cdFRvcExldmVsV3JhcHBlci5wcm90b3R5cGUuaXNSZWFjdENvbXBvbmVudCA9IHt9O1xuXHRpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgIFRvcExldmVsV3JhcHBlci5kaXNwbGF5TmFtZSA9ICdUb3BMZXZlbFdyYXBwZXInO1xuXHR9XG5cdFRvcExldmVsV3JhcHBlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuXHQgIC8vIHRoaXMucHJvcHMgaXMgYWN0dWFsbHkgYSBSZWFjdEVsZW1lbnRcblx0ICByZXR1cm4gdGhpcy5wcm9wcztcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBNb3VudGluZyBpcyB0aGUgcHJvY2VzcyBvZiBpbml0aWFsaXppbmcgYSBSZWFjdCBjb21wb25lbnQgYnkgY3JlYXRpbmcgaXRzXG5cdCAqIHJlcHJlc2VudGF0aXZlIERPTSBlbGVtZW50cyBhbmQgaW5zZXJ0aW5nIHRoZW0gaW50byBhIHN1cHBsaWVkIGBjb250YWluZXJgLlxuXHQgKiBBbnkgcHJpb3IgY29udGVudCBpbnNpZGUgYGNvbnRhaW5lcmAgaXMgZGVzdHJveWVkIGluIHRoZSBwcm9jZXNzLlxuXHQgKlxuXHQgKiAgIFJlYWN0TW91bnQucmVuZGVyKFxuXHQgKiAgICAgY29tcG9uZW50LFxuXHQgKiAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRhaW5lcicpXG5cdCAqICAgKTtcblx0ICpcblx0ICogICA8ZGl2IGlkPVwiY29udGFpbmVyXCI+ICAgICAgICAgICAgICAgICAgIDwtLSBTdXBwbGllZCBgY29udGFpbmVyYC5cblx0ICogICAgIDxkaXYgZGF0YS1yZWFjdGlkPVwiLjNcIj4gICAgICAgICAgICAgIDwtLSBSZW5kZXJlZCByZWFjdFJvb3Qgb2YgUmVhY3Rcblx0ICogICAgICAgLy8gLi4uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50LlxuXHQgKiAgICAgPC9kaXY+XG5cdCAqICAgPC9kaXY+XG5cdCAqXG5cdCAqIEluc2lkZSBvZiBgY29udGFpbmVyYCwgdGhlIGZpcnN0IGVsZW1lbnQgcmVuZGVyZWQgaXMgdGhlIFwicmVhY3RSb290XCIuXG5cdCAqL1xuXHR2YXIgUmVhY3RNb3VudCA9IHtcblx0XG5cdCAgVG9wTGV2ZWxXcmFwcGVyOiBUb3BMZXZlbFdyYXBwZXIsXG5cdFxuXHQgIC8qKiBFeHBvc2VkIGZvciBkZWJ1Z2dpbmcgcHVycG9zZXMgKiovXG5cdCAgX2luc3RhbmNlc0J5UmVhY3RSb290SUQ6IGluc3RhbmNlc0J5UmVhY3RSb290SUQsXG5cdFxuXHQgIC8qKlxuXHQgICAqIFRoaXMgaXMgYSBob29rIHByb3ZpZGVkIHRvIHN1cHBvcnQgcmVuZGVyaW5nIFJlYWN0IGNvbXBvbmVudHMgd2hpbGVcblx0ICAgKiBlbnN1cmluZyB0aGF0IHRoZSBhcHBhcmVudCBzY3JvbGwgcG9zaXRpb24gb2YgaXRzIGBjb250YWluZXJgIGRvZXMgbm90XG5cdCAgICogY2hhbmdlLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtET01FbGVtZW50fSBjb250YWluZXIgVGhlIGBjb250YWluZXJgIGJlaW5nIHJlbmRlcmVkIGludG8uXG5cdCAgICogQHBhcmFtIHtmdW5jdGlvbn0gcmVuZGVyQ2FsbGJhY2sgVGhpcyBtdXN0IGJlIGNhbGxlZCBvbmNlIHRvIGRvIHRoZSByZW5kZXIuXG5cdCAgICovXG5cdCAgc2Nyb2xsTW9uaXRvcjogZnVuY3Rpb24gKGNvbnRhaW5lciwgcmVuZGVyQ2FsbGJhY2spIHtcblx0ICAgIHJlbmRlckNhbGxiYWNrKCk7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogVGFrZSBhIGNvbXBvbmVudCB0aGF0J3MgYWxyZWFkeSBtb3VudGVkIGludG8gdGhlIERPTSBhbmQgcmVwbGFjZSBpdHMgcHJvcHNcblx0ICAgKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBwcmV2Q29tcG9uZW50IGNvbXBvbmVudCBpbnN0YW5jZSBhbHJlYWR5IGluIHRoZSBET01cblx0ICAgKiBAcGFyYW0ge1JlYWN0RWxlbWVudH0gbmV4dEVsZW1lbnQgY29tcG9uZW50IGluc3RhbmNlIHRvIHJlbmRlclxuXHQgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gY29udGFpbmVyIGNvbnRhaW5lciB0byByZW5kZXIgaW50b1xuXHQgICAqIEBwYXJhbSB7P2Z1bmN0aW9ufSBjYWxsYmFjayBmdW5jdGlvbiB0cmlnZ2VyZWQgb24gY29tcGxldGlvblxuXHQgICAqL1xuXHQgIF91cGRhdGVSb290Q29tcG9uZW50OiBmdW5jdGlvbiAocHJldkNvbXBvbmVudCwgbmV4dEVsZW1lbnQsIGNvbnRhaW5lciwgY2FsbGJhY2spIHtcblx0ICAgIFJlYWN0TW91bnQuc2Nyb2xsTW9uaXRvcihjb250YWluZXIsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgUmVhY3RVcGRhdGVRdWV1ZS5lbnF1ZXVlRWxlbWVudEludGVybmFsKHByZXZDb21wb25lbnQsIG5leHRFbGVtZW50KTtcblx0ICAgICAgaWYgKGNhbGxiYWNrKSB7XG5cdCAgICAgICAgUmVhY3RVcGRhdGVRdWV1ZS5lbnF1ZXVlQ2FsbGJhY2tJbnRlcm5hbChwcmV2Q29tcG9uZW50LCBjYWxsYmFjayk7XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHRcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgIC8vIFJlY29yZCB0aGUgcm9vdCBlbGVtZW50IGluIGNhc2UgaXQgbGF0ZXIgZ2V0cyB0cmFuc3BsYW50ZWQuXG5cdCAgICAgIHJvb3RFbGVtZW50c0J5UmVhY3RSb290SURbZ2V0UmVhY3RSb290SUQoY29udGFpbmVyKV0gPSBnZXRSZWFjdFJvb3RFbGVtZW50SW5Db250YWluZXIoY29udGFpbmVyKTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gcHJldkNvbXBvbmVudDtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBSZWdpc3RlciBhIGNvbXBvbmVudCBpbnRvIHRoZSBpbnN0YW5jZSBtYXAgYW5kIHN0YXJ0cyBzY3JvbGwgdmFsdWVcblx0ICAgKiBtb25pdG9yaW5nXG5cdCAgICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gbmV4dENvbXBvbmVudCBjb21wb25lbnQgaW5zdGFuY2UgdG8gcmVuZGVyXG5cdCAgICogQHBhcmFtIHtET01FbGVtZW50fSBjb250YWluZXIgY29udGFpbmVyIHRvIHJlbmRlciBpbnRvXG5cdCAgICogQHJldHVybiB7c3RyaW5nfSByZWFjdFJvb3QgSUQgcHJlZml4XG5cdCAgICovXG5cdCAgX3JlZ2lzdGVyQ29tcG9uZW50OiBmdW5jdGlvbiAobmV4dENvbXBvbmVudCwgY29udGFpbmVyKSB7XG5cdCAgICAhKGNvbnRhaW5lciAmJiAoY29udGFpbmVyLm5vZGVUeXBlID09PSBFTEVNRU5UX05PREVfVFlQRSB8fCBjb250YWluZXIubm9kZVR5cGUgPT09IERPQ19OT0RFX1RZUEUgfHwgY29udGFpbmVyLm5vZGVUeXBlID09PSBET0NVTUVOVF9GUkFHTUVOVF9OT0RFX1RZUEUpKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdfcmVnaXN0ZXJDb21wb25lbnQoLi4uKTogVGFyZ2V0IGNvbnRhaW5lciBpcyBub3QgYSBET00gZWxlbWVudC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdFxuXHQgICAgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLmVuc3VyZVNjcm9sbFZhbHVlTW9uaXRvcmluZygpO1xuXHRcblx0ICAgIHZhciByZWFjdFJvb3RJRCA9IFJlYWN0TW91bnQucmVnaXN0ZXJDb250YWluZXIoY29udGFpbmVyKTtcblx0ICAgIGluc3RhbmNlc0J5UmVhY3RSb290SURbcmVhY3RSb290SURdID0gbmV4dENvbXBvbmVudDtcblx0ICAgIHJldHVybiByZWFjdFJvb3RJRDtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBSZW5kZXIgYSBuZXcgY29tcG9uZW50IGludG8gdGhlIERPTS5cblx0ICAgKiBAcGFyYW0ge1JlYWN0RWxlbWVudH0gbmV4dEVsZW1lbnQgZWxlbWVudCB0byByZW5kZXJcblx0ICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGNvbnRhaW5lciBjb250YWluZXIgdG8gcmVuZGVyIGludG9cblx0ICAgKiBAcGFyYW0ge2Jvb2xlYW59IHNob3VsZFJldXNlTWFya3VwIGlmIHdlIHNob3VsZCBza2lwIHRoZSBtYXJrdXAgaW5zZXJ0aW9uXG5cdCAgICogQHJldHVybiB7UmVhY3RDb21wb25lbnR9IG5leHRDb21wb25lbnRcblx0ICAgKi9cblx0ICBfcmVuZGVyTmV3Um9vdENvbXBvbmVudDogZnVuY3Rpb24gKG5leHRFbGVtZW50LCBjb250YWluZXIsIHNob3VsZFJldXNlTWFya3VwLCBjb250ZXh0KSB7XG5cdCAgICAvLyBWYXJpb3VzIHBhcnRzIG9mIG91ciBjb2RlIChzdWNoIGFzIFJlYWN0Q29tcG9zaXRlQ29tcG9uZW50J3Ncblx0ICAgIC8vIF9yZW5kZXJWYWxpZGF0ZWRDb21wb25lbnQpIGFzc3VtZSB0aGF0IGNhbGxzIHRvIHJlbmRlciBhcmVuJ3QgbmVzdGVkO1xuXHQgICAgLy8gdmVyaWZ5IHRoYXQgdGhhdCdzIHRoZSBjYXNlLlxuXHQgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoUmVhY3RDdXJyZW50T3duZXIuY3VycmVudCA9PSBudWxsLCAnX3JlbmRlck5ld1Jvb3RDb21wb25lbnQoKTogUmVuZGVyIG1ldGhvZHMgc2hvdWxkIGJlIGEgcHVyZSBmdW5jdGlvbiAnICsgJ29mIHByb3BzIGFuZCBzdGF0ZTsgdHJpZ2dlcmluZyBuZXN0ZWQgY29tcG9uZW50IHVwZGF0ZXMgZnJvbSAnICsgJ3JlbmRlciBpcyBub3QgYWxsb3dlZC4gSWYgbmVjZXNzYXJ5LCB0cmlnZ2VyIG5lc3RlZCB1cGRhdGVzIGluICcgKyAnY29tcG9uZW50RGlkVXBkYXRlLiBDaGVjayB0aGUgcmVuZGVyIG1ldGhvZCBvZiAlcy4nLCBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50ICYmIFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQuZ2V0TmFtZSgpIHx8ICdSZWFjdENvbXBvc2l0ZUNvbXBvbmVudCcpIDogdW5kZWZpbmVkO1xuXHRcblx0ICAgIHZhciBjb21wb25lbnRJbnN0YW5jZSA9IGluc3RhbnRpYXRlUmVhY3RDb21wb25lbnQobmV4dEVsZW1lbnQsIG51bGwpO1xuXHQgICAgdmFyIHJlYWN0Um9vdElEID0gUmVhY3RNb3VudC5fcmVnaXN0ZXJDb21wb25lbnQoY29tcG9uZW50SW5zdGFuY2UsIGNvbnRhaW5lcik7XG5cdFxuXHQgICAgLy8gVGhlIGluaXRpYWwgcmVuZGVyIGlzIHN5bmNocm9ub3VzIGJ1dCBhbnkgdXBkYXRlcyB0aGF0IGhhcHBlbiBkdXJpbmdcblx0ICAgIC8vIHJlbmRlcmluZywgaW4gY29tcG9uZW50V2lsbE1vdW50IG9yIGNvbXBvbmVudERpZE1vdW50LCB3aWxsIGJlIGJhdGNoZWRcblx0ICAgIC8vIGFjY29yZGluZyB0byB0aGUgY3VycmVudCBiYXRjaGluZyBzdHJhdGVneS5cblx0XG5cdCAgICBSZWFjdFVwZGF0ZXMuYmF0Y2hlZFVwZGF0ZXMoYmF0Y2hlZE1vdW50Q29tcG9uZW50SW50b05vZGUsIGNvbXBvbmVudEluc3RhbmNlLCByZWFjdFJvb3RJRCwgY29udGFpbmVyLCBzaG91bGRSZXVzZU1hcmt1cCwgY29udGV4dCk7XG5cdFxuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgLy8gUmVjb3JkIHRoZSByb290IGVsZW1lbnQgaW4gY2FzZSBpdCBsYXRlciBnZXRzIHRyYW5zcGxhbnRlZC5cblx0ICAgICAgcm9vdEVsZW1lbnRzQnlSZWFjdFJvb3RJRFtyZWFjdFJvb3RJRF0gPSBnZXRSZWFjdFJvb3RFbGVtZW50SW5Db250YWluZXIoY29udGFpbmVyKTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gY29tcG9uZW50SW5zdGFuY2U7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogUmVuZGVycyBhIFJlYWN0IGNvbXBvbmVudCBpbnRvIHRoZSBET00gaW4gdGhlIHN1cHBsaWVkIGBjb250YWluZXJgLlxuXHQgICAqXG5cdCAgICogSWYgdGhlIFJlYWN0IGNvbXBvbmVudCB3YXMgcHJldmlvdXNseSByZW5kZXJlZCBpbnRvIGBjb250YWluZXJgLCB0aGlzIHdpbGxcblx0ICAgKiBwZXJmb3JtIGFuIHVwZGF0ZSBvbiBpdCBhbmQgb25seSBtdXRhdGUgdGhlIERPTSBhcyBuZWNlc3NhcnkgdG8gcmVmbGVjdCB0aGVcblx0ICAgKiBsYXRlc3QgUmVhY3QgY29tcG9uZW50LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gcGFyZW50Q29tcG9uZW50IFRoZSBjb25jZXB0dWFsIHBhcmVudCBvZiB0aGlzIHJlbmRlciB0cmVlLlxuXHQgICAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBuZXh0RWxlbWVudCBDb21wb25lbnQgZWxlbWVudCB0byByZW5kZXIuXG5cdCAgICogQHBhcmFtIHtET01FbGVtZW50fSBjb250YWluZXIgRE9NIGVsZW1lbnQgdG8gcmVuZGVyIGludG8uXG5cdCAgICogQHBhcmFtIHs/ZnVuY3Rpb259IGNhbGxiYWNrIGZ1bmN0aW9uIHRyaWdnZXJlZCBvbiBjb21wbGV0aW9uXG5cdCAgICogQHJldHVybiB7UmVhY3RDb21wb25lbnR9IENvbXBvbmVudCBpbnN0YW5jZSByZW5kZXJlZCBpbiBgY29udGFpbmVyYC5cblx0ICAgKi9cblx0ICByZW5kZXJTdWJ0cmVlSW50b0NvbnRhaW5lcjogZnVuY3Rpb24gKHBhcmVudENvbXBvbmVudCwgbmV4dEVsZW1lbnQsIGNvbnRhaW5lciwgY2FsbGJhY2spIHtcblx0ICAgICEocGFyZW50Q29tcG9uZW50ICE9IG51bGwgJiYgcGFyZW50Q29tcG9uZW50Ll9yZWFjdEludGVybmFsSW5zdGFuY2UgIT0gbnVsbCkgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAncGFyZW50Q29tcG9uZW50IG11c3QgYmUgYSB2YWxpZCBSZWFjdCBDb21wb25lbnQnKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdCAgICByZXR1cm4gUmVhY3RNb3VudC5fcmVuZGVyU3VidHJlZUludG9Db250YWluZXIocGFyZW50Q29tcG9uZW50LCBuZXh0RWxlbWVudCwgY29udGFpbmVyLCBjYWxsYmFjayk7XG5cdCAgfSxcblx0XG5cdCAgX3JlbmRlclN1YnRyZWVJbnRvQ29udGFpbmVyOiBmdW5jdGlvbiAocGFyZW50Q29tcG9uZW50LCBuZXh0RWxlbWVudCwgY29udGFpbmVyLCBjYWxsYmFjaykge1xuXHQgICAgIVJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChuZXh0RWxlbWVudCkgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RET00ucmVuZGVyKCk6IEludmFsaWQgY29tcG9uZW50IGVsZW1lbnQuJXMnLCB0eXBlb2YgbmV4dEVsZW1lbnQgPT09ICdzdHJpbmcnID8gJyBJbnN0ZWFkIG9mIHBhc3NpbmcgYW4gZWxlbWVudCBzdHJpbmcsIG1ha2Ugc3VyZSB0byBpbnN0YW50aWF0ZSAnICsgJ2l0IGJ5IHBhc3NpbmcgaXQgdG8gUmVhY3QuY3JlYXRlRWxlbWVudC4nIDogdHlwZW9mIG5leHRFbGVtZW50ID09PSAnZnVuY3Rpb24nID8gJyBJbnN0ZWFkIG9mIHBhc3NpbmcgYSBjb21wb25lbnQgY2xhc3MsIG1ha2Ugc3VyZSB0byBpbnN0YW50aWF0ZSAnICsgJ2l0IGJ5IHBhc3NpbmcgaXQgdG8gUmVhY3QuY3JlYXRlRWxlbWVudC4nIDpcblx0ICAgIC8vIENoZWNrIGlmIGl0IHF1YWNrcyBsaWtlIGFuIGVsZW1lbnRcblx0ICAgIG5leHRFbGVtZW50ICE9IG51bGwgJiYgbmV4dEVsZW1lbnQucHJvcHMgIT09IHVuZGVmaW5lZCA/ICcgVGhpcyBtYXkgYmUgY2F1c2VkIGJ5IHVuaW50ZW50aW9uYWxseSBsb2FkaW5nIHR3byBpbmRlcGVuZGVudCAnICsgJ2NvcGllcyBvZiBSZWFjdC4nIDogJycpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0XG5cdCAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyghY29udGFpbmVyIHx8ICFjb250YWluZXIudGFnTmFtZSB8fCBjb250YWluZXIudGFnTmFtZS50b1VwcGVyQ2FzZSgpICE9PSAnQk9EWScsICdyZW5kZXIoKTogUmVuZGVyaW5nIGNvbXBvbmVudHMgZGlyZWN0bHkgaW50byBkb2N1bWVudC5ib2R5IGlzICcgKyAnZGlzY291cmFnZWQsIHNpbmNlIGl0cyBjaGlsZHJlbiBhcmUgb2Z0ZW4gbWFuaXB1bGF0ZWQgYnkgdGhpcmQtcGFydHkgJyArICdzY3JpcHRzIGFuZCBicm93c2VyIGV4dGVuc2lvbnMuIFRoaXMgbWF5IGxlYWQgdG8gc3VidGxlICcgKyAncmVjb25jaWxpYXRpb24gaXNzdWVzLiBUcnkgcmVuZGVyaW5nIGludG8gYSBjb250YWluZXIgZWxlbWVudCBjcmVhdGVkICcgKyAnZm9yIHlvdXIgYXBwLicpIDogdW5kZWZpbmVkO1xuXHRcblx0ICAgIHZhciBuZXh0V3JhcHBlZEVsZW1lbnQgPSBuZXcgUmVhY3RFbGVtZW50KFRvcExldmVsV3JhcHBlciwgbnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgbmV4dEVsZW1lbnQpO1xuXHRcblx0ICAgIHZhciBwcmV2Q29tcG9uZW50ID0gaW5zdGFuY2VzQnlSZWFjdFJvb3RJRFtnZXRSZWFjdFJvb3RJRChjb250YWluZXIpXTtcblx0XG5cdCAgICBpZiAocHJldkNvbXBvbmVudCkge1xuXHQgICAgICB2YXIgcHJldldyYXBwZWRFbGVtZW50ID0gcHJldkNvbXBvbmVudC5fY3VycmVudEVsZW1lbnQ7XG5cdCAgICAgIHZhciBwcmV2RWxlbWVudCA9IHByZXZXcmFwcGVkRWxlbWVudC5wcm9wcztcblx0ICAgICAgaWYgKHNob3VsZFVwZGF0ZVJlYWN0Q29tcG9uZW50KHByZXZFbGVtZW50LCBuZXh0RWxlbWVudCkpIHtcblx0ICAgICAgICB2YXIgcHVibGljSW5zdCA9IHByZXZDb21wb25lbnQuX3JlbmRlcmVkQ29tcG9uZW50LmdldFB1YmxpY0luc3RhbmNlKCk7XG5cdCAgICAgICAgdmFyIHVwZGF0ZWRDYWxsYmFjayA9IGNhbGxiYWNrICYmIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgIGNhbGxiYWNrLmNhbGwocHVibGljSW5zdCk7XG5cdCAgICAgICAgfTtcblx0ICAgICAgICBSZWFjdE1vdW50Ll91cGRhdGVSb290Q29tcG9uZW50KHByZXZDb21wb25lbnQsIG5leHRXcmFwcGVkRWxlbWVudCwgY29udGFpbmVyLCB1cGRhdGVkQ2FsbGJhY2spO1xuXHQgICAgICAgIHJldHVybiBwdWJsaWNJbnN0O1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIFJlYWN0TW91bnQudW5tb3VudENvbXBvbmVudEF0Tm9kZShjb250YWluZXIpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIHJlYWN0Um9vdEVsZW1lbnQgPSBnZXRSZWFjdFJvb3RFbGVtZW50SW5Db250YWluZXIoY29udGFpbmVyKTtcblx0ICAgIHZhciBjb250YWluZXJIYXNSZWFjdE1hcmt1cCA9IHJlYWN0Um9vdEVsZW1lbnQgJiYgISFpbnRlcm5hbEdldElEKHJlYWN0Um9vdEVsZW1lbnQpO1xuXHQgICAgdmFyIGNvbnRhaW5lckhhc05vblJvb3RSZWFjdENoaWxkID0gaGFzTm9uUm9vdFJlYWN0Q2hpbGQoY29udGFpbmVyKTtcblx0XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyghY29udGFpbmVySGFzTm9uUm9vdFJlYWN0Q2hpbGQsICdyZW5kZXIoLi4uKTogUmVwbGFjaW5nIFJlYWN0LXJlbmRlcmVkIGNoaWxkcmVuIHdpdGggYSBuZXcgcm9vdCAnICsgJ2NvbXBvbmVudC4gSWYgeW91IGludGVuZGVkIHRvIHVwZGF0ZSB0aGUgY2hpbGRyZW4gb2YgdGhpcyBub2RlLCAnICsgJ3lvdSBzaG91bGQgaW5zdGVhZCBoYXZlIHRoZSBleGlzdGluZyBjaGlsZHJlbiB1cGRhdGUgdGhlaXIgc3RhdGUgJyArICdhbmQgcmVuZGVyIHRoZSBuZXcgY29tcG9uZW50cyBpbnN0ZWFkIG9mIGNhbGxpbmcgUmVhY3RET00ucmVuZGVyLicpIDogdW5kZWZpbmVkO1xuXHRcblx0ICAgICAgaWYgKCFjb250YWluZXJIYXNSZWFjdE1hcmt1cCB8fCByZWFjdFJvb3RFbGVtZW50Lm5leHRTaWJsaW5nKSB7XG5cdCAgICAgICAgdmFyIHJvb3RFbGVtZW50U2libGluZyA9IHJlYWN0Um9vdEVsZW1lbnQ7XG5cdCAgICAgICAgd2hpbGUgKHJvb3RFbGVtZW50U2libGluZykge1xuXHQgICAgICAgICAgaWYgKGludGVybmFsR2V0SUQocm9vdEVsZW1lbnRTaWJsaW5nKSkge1xuXHQgICAgICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ3JlbmRlcigpOiBUYXJnZXQgbm9kZSBoYXMgbWFya3VwIHJlbmRlcmVkIGJ5IFJlYWN0LCBidXQgdGhlcmUgJyArICdhcmUgdW5yZWxhdGVkIG5vZGVzIGFzIHdlbGwuIFRoaXMgaXMgbW9zdCBjb21tb25seSBjYXVzZWQgYnkgJyArICd3aGl0ZS1zcGFjZSBpbnNlcnRlZCBhcm91bmQgc2VydmVyLXJlbmRlcmVkIG1hcmt1cC4nKSA6IHVuZGVmaW5lZDtcblx0ICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICByb290RWxlbWVudFNpYmxpbmcgPSByb290RWxlbWVudFNpYmxpbmcubmV4dFNpYmxpbmc7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIHNob3VsZFJldXNlTWFya3VwID0gY29udGFpbmVySGFzUmVhY3RNYXJrdXAgJiYgIXByZXZDb21wb25lbnQgJiYgIWNvbnRhaW5lckhhc05vblJvb3RSZWFjdENoaWxkO1xuXHQgICAgdmFyIGNvbXBvbmVudCA9IFJlYWN0TW91bnQuX3JlbmRlck5ld1Jvb3RDb21wb25lbnQobmV4dFdyYXBwZWRFbGVtZW50LCBjb250YWluZXIsIHNob3VsZFJldXNlTWFya3VwLCBwYXJlbnRDb21wb25lbnQgIT0gbnVsbCA/IHBhcmVudENvbXBvbmVudC5fcmVhY3RJbnRlcm5hbEluc3RhbmNlLl9wcm9jZXNzQ2hpbGRDb250ZXh0KHBhcmVudENvbXBvbmVudC5fcmVhY3RJbnRlcm5hbEluc3RhbmNlLl9jb250ZXh0KSA6IGVtcHR5T2JqZWN0KS5fcmVuZGVyZWRDb21wb25lbnQuZ2V0UHVibGljSW5zdGFuY2UoKTtcblx0ICAgIGlmIChjYWxsYmFjaykge1xuXHQgICAgICBjYWxsYmFjay5jYWxsKGNvbXBvbmVudCk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gY29tcG9uZW50O1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFJlbmRlcnMgYSBSZWFjdCBjb21wb25lbnQgaW50byB0aGUgRE9NIGluIHRoZSBzdXBwbGllZCBgY29udGFpbmVyYC5cblx0ICAgKlxuXHQgICAqIElmIHRoZSBSZWFjdCBjb21wb25lbnQgd2FzIHByZXZpb3VzbHkgcmVuZGVyZWQgaW50byBgY29udGFpbmVyYCwgdGhpcyB3aWxsXG5cdCAgICogcGVyZm9ybSBhbiB1cGRhdGUgb24gaXQgYW5kIG9ubHkgbXV0YXRlIHRoZSBET00gYXMgbmVjZXNzYXJ5IHRvIHJlZmxlY3QgdGhlXG5cdCAgICogbGF0ZXN0IFJlYWN0IGNvbXBvbmVudC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBuZXh0RWxlbWVudCBDb21wb25lbnQgZWxlbWVudCB0byByZW5kZXIuXG5cdCAgICogQHBhcmFtIHtET01FbGVtZW50fSBjb250YWluZXIgRE9NIGVsZW1lbnQgdG8gcmVuZGVyIGludG8uXG5cdCAgICogQHBhcmFtIHs/ZnVuY3Rpb259IGNhbGxiYWNrIGZ1bmN0aW9uIHRyaWdnZXJlZCBvbiBjb21wbGV0aW9uXG5cdCAgICogQHJldHVybiB7UmVhY3RDb21wb25lbnR9IENvbXBvbmVudCBpbnN0YW5jZSByZW5kZXJlZCBpbiBgY29udGFpbmVyYC5cblx0ICAgKi9cblx0ICByZW5kZXI6IGZ1bmN0aW9uIChuZXh0RWxlbWVudCwgY29udGFpbmVyLCBjYWxsYmFjaykge1xuXHQgICAgcmV0dXJuIFJlYWN0TW91bnQuX3JlbmRlclN1YnRyZWVJbnRvQ29udGFpbmVyKG51bGwsIG5leHRFbGVtZW50LCBjb250YWluZXIsIGNhbGxiYWNrKTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBSZWdpc3RlcnMgYSBjb250YWluZXIgbm9kZSBpbnRvIHdoaWNoIFJlYWN0IGNvbXBvbmVudHMgd2lsbCBiZSByZW5kZXJlZC5cblx0ICAgKiBUaGlzIGFsc28gY3JlYXRlcyB0aGUgXCJyZWFjdFJvb3RcIiBJRCB0aGF0IHdpbGwgYmUgYXNzaWduZWQgdG8gdGhlIGVsZW1lbnRcblx0ICAgKiByZW5kZXJlZCB3aXRoaW4uXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGNvbnRhaW5lciBET00gZWxlbWVudCB0byByZWdpc3RlciBhcyBhIGNvbnRhaW5lci5cblx0ICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBcInJlYWN0Um9vdFwiIElEIG9mIGVsZW1lbnRzIHJlbmRlcmVkIHdpdGhpbi5cblx0ICAgKi9cblx0ICByZWdpc3RlckNvbnRhaW5lcjogZnVuY3Rpb24gKGNvbnRhaW5lcikge1xuXHQgICAgdmFyIHJlYWN0Um9vdElEID0gZ2V0UmVhY3RSb290SUQoY29udGFpbmVyKTtcblx0ICAgIGlmIChyZWFjdFJvb3RJRCkge1xuXHQgICAgICAvLyBJZiBvbmUgZXhpc3RzLCBtYWtlIHN1cmUgaXQgaXMgYSB2YWxpZCBcInJlYWN0Um9vdFwiIElELlxuXHQgICAgICByZWFjdFJvb3RJRCA9IFJlYWN0SW5zdGFuY2VIYW5kbGVzLmdldFJlYWN0Um9vdElERnJvbU5vZGVJRChyZWFjdFJvb3RJRCk7XG5cdCAgICB9XG5cdCAgICBpZiAoIXJlYWN0Um9vdElEKSB7XG5cdCAgICAgIC8vIE5vIHZhbGlkIFwicmVhY3RSb290XCIgSUQgZm91bmQsIGNyZWF0ZSBvbmUuXG5cdCAgICAgIHJlYWN0Um9vdElEID0gUmVhY3RJbnN0YW5jZUhhbmRsZXMuY3JlYXRlUmVhY3RSb290SUQoKTtcblx0ICAgIH1cblx0ICAgIGNvbnRhaW5lcnNCeVJlYWN0Um9vdElEW3JlYWN0Um9vdElEXSA9IGNvbnRhaW5lcjtcblx0ICAgIHJldHVybiByZWFjdFJvb3RJRDtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBVbm1vdW50cyBhbmQgZGVzdHJveXMgdGhlIFJlYWN0IGNvbXBvbmVudCByZW5kZXJlZCBpbiB0aGUgYGNvbnRhaW5lcmAuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGNvbnRhaW5lciBET00gZWxlbWVudCBjb250YWluaW5nIGEgUmVhY3QgY29tcG9uZW50LlxuXHQgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgYSBjb21wb25lbnQgd2FzIGZvdW5kIGluIGFuZCB1bm1vdW50ZWQgZnJvbVxuXHQgICAqICAgICAgICAgICAgICAgICAgIGBjb250YWluZXJgXG5cdCAgICovXG5cdCAgdW5tb3VudENvbXBvbmVudEF0Tm9kZTogZnVuY3Rpb24gKGNvbnRhaW5lcikge1xuXHQgICAgLy8gVmFyaW91cyBwYXJ0cyBvZiBvdXIgY29kZSAoc3VjaCBhcyBSZWFjdENvbXBvc2l0ZUNvbXBvbmVudCdzXG5cdCAgICAvLyBfcmVuZGVyVmFsaWRhdGVkQ29tcG9uZW50KSBhc3N1bWUgdGhhdCBjYWxscyB0byByZW5kZXIgYXJlbid0IG5lc3RlZDtcblx0ICAgIC8vIHZlcmlmeSB0aGF0IHRoYXQncyB0aGUgY2FzZS4gKFN0cmljdGx5IHNwZWFraW5nLCB1bm1vdW50aW5nIHdvbid0IGNhdXNlIGFcblx0ICAgIC8vIHJlbmRlciBidXQgd2Ugc3RpbGwgZG9uJ3QgZXhwZWN0IHRvIGJlIGluIGEgcmVuZGVyIGNhbGwgaGVyZS4pXG5cdCAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50ID09IG51bGwsICd1bm1vdW50Q29tcG9uZW50QXROb2RlKCk6IFJlbmRlciBtZXRob2RzIHNob3VsZCBiZSBhIHB1cmUgZnVuY3Rpb24gJyArICdvZiBwcm9wcyBhbmQgc3RhdGU7IHRyaWdnZXJpbmcgbmVzdGVkIGNvbXBvbmVudCB1cGRhdGVzIGZyb20gcmVuZGVyICcgKyAnaXMgbm90IGFsbG93ZWQuIElmIG5lY2Vzc2FyeSwgdHJpZ2dlciBuZXN0ZWQgdXBkYXRlcyBpbiAnICsgJ2NvbXBvbmVudERpZFVwZGF0ZS4gQ2hlY2sgdGhlIHJlbmRlciBtZXRob2Qgb2YgJXMuJywgUmVhY3RDdXJyZW50T3duZXIuY3VycmVudCAmJiBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50LmdldE5hbWUoKSB8fCAnUmVhY3RDb21wb3NpdGVDb21wb25lbnQnKSA6IHVuZGVmaW5lZDtcblx0XG5cdCAgICAhKGNvbnRhaW5lciAmJiAoY29udGFpbmVyLm5vZGVUeXBlID09PSBFTEVNRU5UX05PREVfVFlQRSB8fCBjb250YWluZXIubm9kZVR5cGUgPT09IERPQ19OT0RFX1RZUEUgfHwgY29udGFpbmVyLm5vZGVUeXBlID09PSBET0NVTUVOVF9GUkFHTUVOVF9OT0RFX1RZUEUpKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICd1bm1vdW50Q29tcG9uZW50QXROb2RlKC4uLik6IFRhcmdldCBjb250YWluZXIgaXMgbm90IGEgRE9NIGVsZW1lbnQuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXHRcblx0ICAgIHZhciByZWFjdFJvb3RJRCA9IGdldFJlYWN0Um9vdElEKGNvbnRhaW5lcik7XG5cdCAgICB2YXIgY29tcG9uZW50ID0gaW5zdGFuY2VzQnlSZWFjdFJvb3RJRFtyZWFjdFJvb3RJRF07XG5cdCAgICBpZiAoIWNvbXBvbmVudCkge1xuXHQgICAgICAvLyBDaGVjayBpZiB0aGUgbm9kZSBiZWluZyB1bm1vdW50ZWQgd2FzIHJlbmRlcmVkIGJ5IFJlYWN0LCBidXQgaXNuJ3QgYVxuXHQgICAgICAvLyByb290IG5vZGUuXG5cdCAgICAgIHZhciBjb250YWluZXJIYXNOb25Sb290UmVhY3RDaGlsZCA9IGhhc05vblJvb3RSZWFjdENoaWxkKGNvbnRhaW5lcik7XG5cdFxuXHQgICAgICAvLyBDaGVjayBpZiB0aGUgY29udGFpbmVyIGl0c2VsZiBpcyBhIFJlYWN0IHJvb3Qgbm9kZS5cblx0ICAgICAgdmFyIGNvbnRhaW5lcklEID0gaW50ZXJuYWxHZXRJRChjb250YWluZXIpO1xuXHQgICAgICB2YXIgaXNDb250YWluZXJSZWFjdFJvb3QgPSBjb250YWluZXJJRCAmJiBjb250YWluZXJJRCA9PT0gUmVhY3RJbnN0YW5jZUhhbmRsZXMuZ2V0UmVhY3RSb290SURGcm9tTm9kZUlEKGNvbnRhaW5lcklEKTtcblx0XG5cdCAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoIWNvbnRhaW5lckhhc05vblJvb3RSZWFjdENoaWxkLCAndW5tb3VudENvbXBvbmVudEF0Tm9kZSgpOiBUaGUgbm9kZSB5b3VcXCdyZSBhdHRlbXB0aW5nIHRvIHVubW91bnQgJyArICd3YXMgcmVuZGVyZWQgYnkgUmVhY3QgYW5kIGlzIG5vdCBhIHRvcC1sZXZlbCBjb250YWluZXIuICVzJywgaXNDb250YWluZXJSZWFjdFJvb3QgPyAnWW91IG1heSBoYXZlIGFjY2lkZW50YWxseSBwYXNzZWQgaW4gYSBSZWFjdCByb290IG5vZGUgaW5zdGVhZCAnICsgJ29mIGl0cyBjb250YWluZXIuJyA6ICdJbnN0ZWFkLCBoYXZlIHRoZSBwYXJlbnQgY29tcG9uZW50IHVwZGF0ZSBpdHMgc3RhdGUgYW5kICcgKyAncmVyZW5kZXIgaW4gb3JkZXIgdG8gcmVtb3ZlIHRoaXMgY29tcG9uZW50LicpIDogdW5kZWZpbmVkO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdCAgICBSZWFjdFVwZGF0ZXMuYmF0Y2hlZFVwZGF0ZXModW5tb3VudENvbXBvbmVudEZyb21Ob2RlLCBjb21wb25lbnQsIGNvbnRhaW5lcik7XG5cdCAgICBkZWxldGUgaW5zdGFuY2VzQnlSZWFjdFJvb3RJRFtyZWFjdFJvb3RJRF07XG5cdCAgICBkZWxldGUgY29udGFpbmVyc0J5UmVhY3RSb290SURbcmVhY3RSb290SURdO1xuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgZGVsZXRlIHJvb3RFbGVtZW50c0J5UmVhY3RSb290SURbcmVhY3RSb290SURdO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHRydWU7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogRmluZHMgdGhlIGNvbnRhaW5lciBET00gZWxlbWVudCB0aGF0IGNvbnRhaW5zIFJlYWN0IGNvbXBvbmVudCB0byB3aGljaCB0aGVcblx0ICAgKiBzdXBwbGllZCBET00gYGlkYCBiZWxvbmdzLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtzdHJpbmd9IGlkIFRoZSBJRCBvZiBhbiBlbGVtZW50IHJlbmRlcmVkIGJ5IGEgUmVhY3QgY29tcG9uZW50LlxuXHQgICAqIEByZXR1cm4gez9ET01FbGVtZW50fSBET00gZWxlbWVudCB0aGF0IGNvbnRhaW5zIHRoZSBgaWRgLlxuXHQgICAqL1xuXHQgIGZpbmRSZWFjdENvbnRhaW5lckZvcklEOiBmdW5jdGlvbiAoaWQpIHtcblx0ICAgIHZhciByZWFjdFJvb3RJRCA9IFJlYWN0SW5zdGFuY2VIYW5kbGVzLmdldFJlYWN0Um9vdElERnJvbU5vZGVJRChpZCk7XG5cdCAgICB2YXIgY29udGFpbmVyID0gY29udGFpbmVyc0J5UmVhY3RSb290SURbcmVhY3RSb290SURdO1xuXHRcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgIHZhciByb290RWxlbWVudCA9IHJvb3RFbGVtZW50c0J5UmVhY3RSb290SURbcmVhY3RSb290SURdO1xuXHQgICAgICBpZiAocm9vdEVsZW1lbnQgJiYgcm9vdEVsZW1lbnQucGFyZW50Tm9kZSAhPT0gY29udGFpbmVyKSB7XG5cdCAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoXG5cdCAgICAgICAgLy8gQ2FsbCBpbnRlcm5hbEdldElEIGhlcmUgYmVjYXVzZSBnZXRJRCBjYWxscyBpc1ZhbGlkIHdoaWNoIGNhbGxzXG5cdCAgICAgICAgLy8gZmluZFJlYWN0Q29udGFpbmVyRm9ySUQgKHRoaXMgZnVuY3Rpb24pLlxuXHQgICAgICAgIGludGVybmFsR2V0SUQocm9vdEVsZW1lbnQpID09PSByZWFjdFJvb3RJRCwgJ1JlYWN0TW91bnQ6IFJvb3QgZWxlbWVudCBJRCBkaWZmZXJlZCBmcm9tIHJlYWN0Um9vdElELicpIDogdW5kZWZpbmVkO1xuXHQgICAgICAgIHZhciBjb250YWluZXJDaGlsZCA9IGNvbnRhaW5lci5maXJzdENoaWxkO1xuXHQgICAgICAgIGlmIChjb250YWluZXJDaGlsZCAmJiByZWFjdFJvb3RJRCA9PT0gaW50ZXJuYWxHZXRJRChjb250YWluZXJDaGlsZCkpIHtcblx0ICAgICAgICAgIC8vIElmIHRoZSBjb250YWluZXIgaGFzIGEgbmV3IGNoaWxkIHdpdGggdGhlIHNhbWUgSUQgYXMgdGhlIG9sZFxuXHQgICAgICAgICAgLy8gcm9vdCBlbGVtZW50LCB0aGVuIHJvb3RFbGVtZW50c0J5UmVhY3RSb290SURbcmVhY3RSb290SURdIGlzXG5cdCAgICAgICAgICAvLyBqdXN0IHN0YWxlIGFuZCBuZWVkcyB0byBiZSB1cGRhdGVkLiBUaGUgY2FzZSB0aGF0IGRlc2VydmVzIGFcblx0ICAgICAgICAgIC8vIHdhcm5pbmcgaXMgd2hlbiB0aGUgY29udGFpbmVyIGlzIGVtcHR5LlxuXHQgICAgICAgICAgcm9vdEVsZW1lbnRzQnlSZWFjdFJvb3RJRFtyZWFjdFJvb3RJRF0gPSBjb250YWluZXJDaGlsZDtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdSZWFjdE1vdW50OiBSb290IGVsZW1lbnQgaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIGl0cyBvcmlnaW5hbCAnICsgJ2NvbnRhaW5lci4gTmV3IGNvbnRhaW5lcjogJXMnLCByb290RWxlbWVudC5wYXJlbnROb2RlKSA6IHVuZGVmaW5lZDtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gY29udGFpbmVyO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIEZpbmRzIGFuIGVsZW1lbnQgcmVuZGVyZWQgYnkgUmVhY3Qgd2l0aCB0aGUgc3VwcGxpZWQgSUQuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgSUQgb2YgYSBET00gbm9kZSBpbiB0aGUgUmVhY3QgY29tcG9uZW50LlxuXHQgICAqIEByZXR1cm4ge0RPTUVsZW1lbnR9IFJvb3QgRE9NIG5vZGUgb2YgdGhlIFJlYWN0IGNvbXBvbmVudC5cblx0ICAgKi9cblx0ICBmaW5kUmVhY3ROb2RlQnlJRDogZnVuY3Rpb24gKGlkKSB7XG5cdCAgICB2YXIgcmVhY3RSb290ID0gUmVhY3RNb3VudC5maW5kUmVhY3RDb250YWluZXJGb3JJRChpZCk7XG5cdCAgICByZXR1cm4gUmVhY3RNb3VudC5maW5kQ29tcG9uZW50Um9vdChyZWFjdFJvb3QsIGlkKTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBUcmF2ZXJzZXMgdXAgdGhlIGFuY2VzdG9ycyBvZiB0aGUgc3VwcGxpZWQgbm9kZSB0byBmaW5kIGEgbm9kZSB0aGF0IGlzIGFcblx0ICAgKiBET00gcmVwcmVzZW50YXRpb24gb2YgYSBSZWFjdCBjb21wb25lbnQgcmVuZGVyZWQgYnkgdGhpcyBjb3B5IG9mIFJlYWN0LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHsqfSBub2RlXG5cdCAgICogQHJldHVybiB7P0RPTUV2ZW50VGFyZ2V0fVxuXHQgICAqIEBpbnRlcm5hbFxuXHQgICAqL1xuXHQgIGdldEZpcnN0UmVhY3RET006IGZ1bmN0aW9uIChub2RlKSB7XG5cdCAgICByZXR1cm4gZmluZEZpcnN0UmVhY3RET01JbXBsKG5vZGUpO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIEZpbmRzIGEgbm9kZSB3aXRoIHRoZSBzdXBwbGllZCBgdGFyZ2V0SURgIGluc2lkZSBvZiB0aGUgc3VwcGxpZWRcblx0ICAgKiBgYW5jZXN0b3JOb2RlYC4gIEV4cGxvaXRzIHRoZSBJRCBuYW1pbmcgc2NoZW1lIHRvIHBlcmZvcm0gdGhlIHNlYXJjaFxuXHQgICAqIHF1aWNrbHkuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0RPTUV2ZW50VGFyZ2V0fSBhbmNlc3Rvck5vZGUgU2VhcmNoIGZyb20gdGhpcyByb290LlxuXHQgICAqIEBwYXJhcm0ge3N0cmluZ30gdGFyZ2V0SUQgSUQgb2YgdGhlIERPTSByZXByZXNlbnRhdGlvbiBvZiB0aGUgY29tcG9uZW50LlxuXHQgICAqIEByZXR1cm4ge0RPTUV2ZW50VGFyZ2V0fSBET00gbm9kZSB3aXRoIHRoZSBzdXBwbGllZCBgdGFyZ2V0SURgLlxuXHQgICAqIEBpbnRlcm5hbFxuXHQgICAqL1xuXHQgIGZpbmRDb21wb25lbnRSb290OiBmdW5jdGlvbiAoYW5jZXN0b3JOb2RlLCB0YXJnZXRJRCkge1xuXHQgICAgdmFyIGZpcnN0Q2hpbGRyZW4gPSBmaW5kQ29tcG9uZW50Um9vdFJldXNhYmxlQXJyYXk7XG5cdCAgICB2YXIgY2hpbGRJbmRleCA9IDA7XG5cdFxuXHQgICAgdmFyIGRlZXBlc3RBbmNlc3RvciA9IGZpbmREZWVwZXN0Q2FjaGVkQW5jZXN0b3IodGFyZ2V0SUQpIHx8IGFuY2VzdG9yTm9kZTtcblx0XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAvLyBUaGlzIHdpbGwgdGhyb3cgb24gdGhlIG5leHQgbGluZTsgZ2l2ZSBhbiBlYXJseSB3YXJuaW5nXG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGRlZXBlc3RBbmNlc3RvciAhPSBudWxsLCAnUmVhY3QgY2FuXFwndCBmaW5kIHRoZSByb290IGNvbXBvbmVudCBub2RlIGZvciBkYXRhLXJlYWN0aWQgdmFsdWUgJyArICdgJXNgLiBJZiB5b3VcXCdyZSBzZWVpbmcgdGhpcyBtZXNzYWdlLCBpdCBwcm9iYWJseSBtZWFucyB0aGF0ICcgKyAneW91XFwndmUgbG9hZGVkIHR3byBjb3BpZXMgb2YgUmVhY3Qgb24gdGhlIHBhZ2UuIEF0IHRoaXMgdGltZSwgb25seSAnICsgJ2Egc2luZ2xlIGNvcHkgb2YgUmVhY3QgY2FuIGJlIGxvYWRlZCBhdCBhIHRpbWUuJywgdGFyZ2V0SUQpIDogdW5kZWZpbmVkO1xuXHQgICAgfVxuXHRcblx0ICAgIGZpcnN0Q2hpbGRyZW5bMF0gPSBkZWVwZXN0QW5jZXN0b3IuZmlyc3RDaGlsZDtcblx0ICAgIGZpcnN0Q2hpbGRyZW4ubGVuZ3RoID0gMTtcblx0XG5cdCAgICB3aGlsZSAoY2hpbGRJbmRleCA8IGZpcnN0Q2hpbGRyZW4ubGVuZ3RoKSB7XG5cdCAgICAgIHZhciBjaGlsZCA9IGZpcnN0Q2hpbGRyZW5bY2hpbGRJbmRleCsrXTtcblx0ICAgICAgdmFyIHRhcmdldENoaWxkO1xuXHRcblx0ICAgICAgd2hpbGUgKGNoaWxkKSB7XG5cdCAgICAgICAgdmFyIGNoaWxkSUQgPSBSZWFjdE1vdW50LmdldElEKGNoaWxkKTtcblx0ICAgICAgICBpZiAoY2hpbGRJRCkge1xuXHQgICAgICAgICAgLy8gRXZlbiBpZiB3ZSBmaW5kIHRoZSBub2RlIHdlJ3JlIGxvb2tpbmcgZm9yLCB3ZSBmaW5pc2ggbG9vcGluZ1xuXHQgICAgICAgICAgLy8gdGhyb3VnaCBpdHMgc2libGluZ3MgdG8gZW5zdXJlIHRoZXkncmUgY2FjaGVkIHNvIHRoYXQgd2UgZG9uJ3QgaGF2ZVxuXHQgICAgICAgICAgLy8gdG8gcmV2aXNpdCB0aGlzIG5vZGUgYWdhaW4uIE90aGVyd2lzZSwgd2UgbWFrZSBuXjIgY2FsbHMgdG8gZ2V0SURcblx0ICAgICAgICAgIC8vIHdoZW4gdmlzaXRpbmcgdGhlIG1hbnkgY2hpbGRyZW4gb2YgYSBzaW5nbGUgbm9kZSBpbiBvcmRlci5cblx0XG5cdCAgICAgICAgICBpZiAodGFyZ2V0SUQgPT09IGNoaWxkSUQpIHtcblx0ICAgICAgICAgICAgdGFyZ2V0Q2hpbGQgPSBjaGlsZDtcblx0ICAgICAgICAgIH0gZWxzZSBpZiAoUmVhY3RJbnN0YW5jZUhhbmRsZXMuaXNBbmNlc3RvcklET2YoY2hpbGRJRCwgdGFyZ2V0SUQpKSB7XG5cdCAgICAgICAgICAgIC8vIElmIHdlIGZpbmQgYSBjaGlsZCB3aG9zZSBJRCBpcyBhbiBhbmNlc3RvciBvZiB0aGUgZ2l2ZW4gSUQsXG5cdCAgICAgICAgICAgIC8vIHRoZW4gd2UgY2FuIGJlIHN1cmUgdGhhdCB3ZSBvbmx5IHdhbnQgdG8gc2VhcmNoIHRoZSBzdWJ0cmVlXG5cdCAgICAgICAgICAgIC8vIHJvb3RlZCBhdCB0aGlzIGNoaWxkLCBzbyB3ZSBjYW4gdGhyb3cgb3V0IHRoZSByZXN0IG9mIHRoZVxuXHQgICAgICAgICAgICAvLyBzZWFyY2ggc3RhdGUuXG5cdCAgICAgICAgICAgIGZpcnN0Q2hpbGRyZW4ubGVuZ3RoID0gY2hpbGRJbmRleCA9IDA7XG5cdCAgICAgICAgICAgIGZpcnN0Q2hpbGRyZW4ucHVzaChjaGlsZC5maXJzdENoaWxkKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgLy8gSWYgdGhpcyBjaGlsZCBoYWQgbm8gSUQsIHRoZW4gdGhlcmUncyBhIGNoYW5jZSB0aGF0IGl0IHdhc1xuXHQgICAgICAgICAgLy8gaW5qZWN0ZWQgYXV0b21hdGljYWxseSBieSB0aGUgYnJvd3NlciwgYXMgd2hlbiBhIGA8dGFibGU+YFxuXHQgICAgICAgICAgLy8gZWxlbWVudCBzcHJvdXRzIGFuIGV4dHJhIGA8dGJvZHk+YCBjaGlsZCBhcyBhIHNpZGUgZWZmZWN0IG9mXG5cdCAgICAgICAgICAvLyBgLmlubmVySFRNTGAgcGFyc2luZy4gT3B0aW1pc3RpY2FsbHkgY29udGludWUgZG93biB0aGlzXG5cdCAgICAgICAgICAvLyBicmFuY2gsIGJ1dCBub3QgYmVmb3JlIGV4YW1pbmluZyB0aGUgb3RoZXIgc2libGluZ3MuXG5cdCAgICAgICAgICBmaXJzdENoaWxkcmVuLnB1c2goY2hpbGQuZmlyc3RDaGlsZCk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBjaGlsZCA9IGNoaWxkLm5leHRTaWJsaW5nO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAodGFyZ2V0Q2hpbGQpIHtcblx0ICAgICAgICAvLyBFbXB0eWluZyBmaXJzdENoaWxkcmVuL2ZpbmRDb21wb25lbnRSb290UmV1c2FibGVBcnJheSBpc1xuXHQgICAgICAgIC8vIG5vdCBuZWNlc3NhcnkgZm9yIGNvcnJlY3RuZXNzLCBidXQgaXQgaGVscHMgdGhlIEdDIHJlY2xhaW1cblx0ICAgICAgICAvLyBhbnkgbm9kZXMgdGhhdCB3ZXJlIGxlZnQgYXQgdGhlIGVuZCBvZiB0aGUgc2VhcmNoLlxuXHQgICAgICAgIGZpcnN0Q2hpbGRyZW4ubGVuZ3RoID0gMDtcblx0XG5cdCAgICAgICAgcmV0dXJuIHRhcmdldENoaWxkO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZmlyc3RDaGlsZHJlbi5sZW5ndGggPSAwO1xuXHRcblx0ICAgICB0cnVlID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2ZpbmRDb21wb25lbnRSb290KC4uLiwgJXMpOiBVbmFibGUgdG8gZmluZCBlbGVtZW50LiBUaGlzIHByb2JhYmx5ICcgKyAnbWVhbnMgdGhlIERPTSB3YXMgdW5leHBlY3RlZGx5IG11dGF0ZWQgKGUuZy4sIGJ5IHRoZSBicm93c2VyKSwgJyArICd1c3VhbGx5IGR1ZSB0byBmb3JnZXR0aW5nIGEgPHRib2R5PiB3aGVuIHVzaW5nIHRhYmxlcywgbmVzdGluZyB0YWdzICcgKyAnbGlrZSA8Zm9ybT4sIDxwPiwgb3IgPGE+LCBvciB1c2luZyBub24tU1ZHIGVsZW1lbnRzIGluIGFuIDxzdmc+ICcgKyAncGFyZW50LiAnICsgJ1RyeSBpbnNwZWN0aW5nIHRoZSBjaGlsZCBub2RlcyBvZiB0aGUgZWxlbWVudCB3aXRoIFJlYWN0IElEIGAlc2AuJywgdGFyZ2V0SUQsIFJlYWN0TW91bnQuZ2V0SUQoYW5jZXN0b3JOb2RlKSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXHQgIH0sXG5cdFxuXHQgIF9tb3VudEltYWdlSW50b05vZGU6IGZ1bmN0aW9uIChtYXJrdXAsIGNvbnRhaW5lciwgc2hvdWxkUmV1c2VNYXJrdXAsIHRyYW5zYWN0aW9uKSB7XG5cdCAgICAhKGNvbnRhaW5lciAmJiAoY29udGFpbmVyLm5vZGVUeXBlID09PSBFTEVNRU5UX05PREVfVFlQRSB8fCBjb250YWluZXIubm9kZVR5cGUgPT09IERPQ19OT0RFX1RZUEUgfHwgY29udGFpbmVyLm5vZGVUeXBlID09PSBET0NVTUVOVF9GUkFHTUVOVF9OT0RFX1RZUEUpKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdtb3VudENvbXBvbmVudEludG9Ob2RlKC4uLik6IFRhcmdldCBjb250YWluZXIgaXMgbm90IHZhbGlkLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0XG5cdCAgICBpZiAoc2hvdWxkUmV1c2VNYXJrdXApIHtcblx0ICAgICAgdmFyIHJvb3RFbGVtZW50ID0gZ2V0UmVhY3RSb290RWxlbWVudEluQ29udGFpbmVyKGNvbnRhaW5lcik7XG5cdCAgICAgIGlmIChSZWFjdE1hcmt1cENoZWNrc3VtLmNhblJldXNlTWFya3VwKG1hcmt1cCwgcm9vdEVsZW1lbnQpKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHZhciBjaGVja3N1bSA9IHJvb3RFbGVtZW50LmdldEF0dHJpYnV0ZShSZWFjdE1hcmt1cENoZWNrc3VtLkNIRUNLU1VNX0FUVFJfTkFNRSk7XG5cdCAgICAgICAgcm9vdEVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFJlYWN0TWFya3VwQ2hlY2tzdW0uQ0hFQ0tTVU1fQVRUUl9OQU1FKTtcblx0XG5cdCAgICAgICAgdmFyIHJvb3RNYXJrdXAgPSByb290RWxlbWVudC5vdXRlckhUTUw7XG5cdCAgICAgICAgcm9vdEVsZW1lbnQuc2V0QXR0cmlidXRlKFJlYWN0TWFya3VwQ2hlY2tzdW0uQ0hFQ0tTVU1fQVRUUl9OQU1FLCBjaGVja3N1bSk7XG5cdFxuXHQgICAgICAgIHZhciBub3JtYWxpemVkTWFya3VwID0gbWFya3VwO1xuXHQgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgICAgICAvLyBiZWNhdXNlIHJvb3RNYXJrdXAgaXMgcmV0cmlldmVkIGZyb20gdGhlIERPTSwgdmFyaW91cyBub3JtYWxpemF0aW9uc1xuXHQgICAgICAgICAgLy8gd2lsbCBoYXZlIG9jY3VycmVkIHdoaWNoIHdpbGwgbm90IGJlIHByZXNlbnQgaW4gYG1hcmt1cGAuIEhlcmUsXG5cdCAgICAgICAgICAvLyBpbnNlcnQgbWFya3VwIGludG8gYSA8ZGl2PiBvciA8aWZyYW1lPiBkZXBlbmRpbmcgb24gdGhlIGNvbnRhaW5lclxuXHQgICAgICAgICAgLy8gdHlwZSB0byBwZXJmb3JtIHRoZSBzYW1lIG5vcm1hbGl6YXRpb25zIGJlZm9yZSBjb21wYXJpbmcuXG5cdCAgICAgICAgICB2YXIgbm9ybWFsaXplcjtcblx0ICAgICAgICAgIGlmIChjb250YWluZXIubm9kZVR5cGUgPT09IEVMRU1FTlRfTk9ERV9UWVBFKSB7XG5cdCAgICAgICAgICAgIG5vcm1hbGl6ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0ICAgICAgICAgICAgbm9ybWFsaXplci5pbm5lckhUTUwgPSBtYXJrdXA7XG5cdCAgICAgICAgICAgIG5vcm1hbGl6ZWRNYXJrdXAgPSBub3JtYWxpemVyLmlubmVySFRNTDtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIG5vcm1hbGl6ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTtcblx0ICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChub3JtYWxpemVyKTtcblx0ICAgICAgICAgICAgbm9ybWFsaXplci5jb250ZW50RG9jdW1lbnQud3JpdGUobWFya3VwKTtcblx0ICAgICAgICAgICAgbm9ybWFsaXplZE1hcmt1cCA9IG5vcm1hbGl6ZXIuY29udGVudERvY3VtZW50LmRvY3VtZW50RWxlbWVudC5vdXRlckhUTUw7XG5cdCAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobm9ybWFsaXplcik7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB2YXIgZGlmZkluZGV4ID0gZmlyc3REaWZmZXJlbmNlSW5kZXgobm9ybWFsaXplZE1hcmt1cCwgcm9vdE1hcmt1cCk7XG5cdCAgICAgICAgdmFyIGRpZmZlcmVuY2UgPSAnIChjbGllbnQpICcgKyBub3JtYWxpemVkTWFya3VwLnN1YnN0cmluZyhkaWZmSW5kZXggLSAyMCwgZGlmZkluZGV4ICsgMjApICsgJ1xcbiAoc2VydmVyKSAnICsgcm9vdE1hcmt1cC5zdWJzdHJpbmcoZGlmZkluZGV4IC0gMjAsIGRpZmZJbmRleCArIDIwKTtcblx0XG5cdCAgICAgICAgIShjb250YWluZXIubm9kZVR5cGUgIT09IERPQ19OT0RFX1RZUEUpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1lvdVxcJ3JlIHRyeWluZyB0byByZW5kZXIgYSBjb21wb25lbnQgdG8gdGhlIGRvY3VtZW50IHVzaW5nICcgKyAnc2VydmVyIHJlbmRlcmluZyBidXQgdGhlIGNoZWNrc3VtIHdhcyBpbnZhbGlkLiBUaGlzIHVzdWFsbHkgJyArICdtZWFucyB5b3UgcmVuZGVyZWQgYSBkaWZmZXJlbnQgY29tcG9uZW50IHR5cGUgb3IgcHJvcHMgb24gJyArICd0aGUgY2xpZW50IGZyb20gdGhlIG9uZSBvbiB0aGUgc2VydmVyLCBvciB5b3VyIHJlbmRlcigpICcgKyAnbWV0aG9kcyBhcmUgaW1wdXJlLiBSZWFjdCBjYW5ub3QgaGFuZGxlIHRoaXMgY2FzZSBkdWUgdG8gJyArICdjcm9zcy1icm93c2VyIHF1aXJrcyBieSByZW5kZXJpbmcgYXQgdGhlIGRvY3VtZW50IHJvb3QuIFlvdSAnICsgJ3Nob3VsZCBsb29rIGZvciBlbnZpcm9ubWVudCBkZXBlbmRlbnQgY29kZSBpbiB5b3VyIGNvbXBvbmVudHMgJyArICdhbmQgZW5zdXJlIHRoZSBwcm9wcyBhcmUgdGhlIHNhbWUgY2xpZW50IGFuZCBzZXJ2ZXIgc2lkZTpcXG4lcycsIGRpZmZlcmVuY2UpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0XG5cdCAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnUmVhY3QgYXR0ZW1wdGVkIHRvIHJldXNlIG1hcmt1cCBpbiBhIGNvbnRhaW5lciBidXQgdGhlICcgKyAnY2hlY2tzdW0gd2FzIGludmFsaWQuIFRoaXMgZ2VuZXJhbGx5IG1lYW5zIHRoYXQgeW91IGFyZSAnICsgJ3VzaW5nIHNlcnZlciByZW5kZXJpbmcgYW5kIHRoZSBtYXJrdXAgZ2VuZXJhdGVkIG9uIHRoZSAnICsgJ3NlcnZlciB3YXMgbm90IHdoYXQgdGhlIGNsaWVudCB3YXMgZXhwZWN0aW5nLiBSZWFjdCBpbmplY3RlZCAnICsgJ25ldyBtYXJrdXAgdG8gY29tcGVuc2F0ZSB3aGljaCB3b3JrcyBidXQgeW91IGhhdmUgbG9zdCBtYW55ICcgKyAnb2YgdGhlIGJlbmVmaXRzIG9mIHNlcnZlciByZW5kZXJpbmcuIEluc3RlYWQsIGZpZ3VyZSBvdXQgJyArICd3aHkgdGhlIG1hcmt1cCBiZWluZyBnZW5lcmF0ZWQgaXMgZGlmZmVyZW50IG9uIHRoZSBjbGllbnQgJyArICdvciBzZXJ2ZXI6XFxuJXMnLCBkaWZmZXJlbmNlKSA6IHVuZGVmaW5lZDtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICAhKGNvbnRhaW5lci5ub2RlVHlwZSAhPT0gRE9DX05PREVfVFlQRSkgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnWW91XFwncmUgdHJ5aW5nIHRvIHJlbmRlciBhIGNvbXBvbmVudCB0byB0aGUgZG9jdW1lbnQgYnV0ICcgKyAneW91IGRpZG5cXCd0IHVzZSBzZXJ2ZXIgcmVuZGVyaW5nLiBXZSBjYW5cXCd0IGRvIHRoaXMgJyArICd3aXRob3V0IHVzaW5nIHNlcnZlciByZW5kZXJpbmcgZHVlIHRvIGNyb3NzLWJyb3dzZXIgcXVpcmtzLiAnICsgJ1NlZSBSZWFjdERPTVNlcnZlci5yZW5kZXJUb1N0cmluZygpIGZvciBzZXJ2ZXIgcmVuZGVyaW5nLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0XG5cdCAgICBpZiAodHJhbnNhY3Rpb24udXNlQ3JlYXRlRWxlbWVudCkge1xuXHQgICAgICB3aGlsZSAoY29udGFpbmVyLmxhc3RDaGlsZCkge1xuXHQgICAgICAgIGNvbnRhaW5lci5yZW1vdmVDaGlsZChjb250YWluZXIubGFzdENoaWxkKTtcblx0ICAgICAgfVxuXHQgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobWFya3VwKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHNldElubmVySFRNTChjb250YWluZXIsIG1hcmt1cCk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgb3duZXJEb2N1bWVudENvbnRleHRLZXk6IG93bmVyRG9jdW1lbnRDb250ZXh0S2V5LFxuXHRcblx0ICAvKipcblx0ICAgKiBSZWFjdCBJRCB1dGlsaXRpZXMuXG5cdCAgICovXG5cdFxuXHQgIGdldFJlYWN0Um9vdElEOiBnZXRSZWFjdFJvb3RJRCxcblx0XG5cdCAgZ2V0SUQ6IGdldElELFxuXHRcblx0ICBzZXRJRDogc2V0SUQsXG5cdFxuXHQgIGdldE5vZGU6IGdldE5vZGUsXG5cdFxuXHQgIGdldE5vZGVGcm9tSW5zdGFuY2U6IGdldE5vZGVGcm9tSW5zdGFuY2UsXG5cdFxuXHQgIGlzVmFsaWQ6IGlzVmFsaWQsXG5cdFxuXHQgIHB1cmdlSUQ6IHB1cmdlSURcblx0fTtcblx0XG5cdFJlYWN0UGVyZi5tZWFzdXJlTWV0aG9kcyhSZWFjdE1vdW50LCAnUmVhY3RNb3VudCcsIHtcblx0ICBfcmVuZGVyTmV3Um9vdENvbXBvbmVudDogJ19yZW5kZXJOZXdSb290Q29tcG9uZW50Jyxcblx0ICBfbW91bnRJbWFnZUludG9Ob2RlOiAnX21vdW50SW1hZ2VJbnRvTm9kZSdcblx0fSk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFJlYWN0TW91bnQ7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpKSlcblxuLyoqKi8gfSksXG4vKiAyOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyXG5cdCAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIEV2ZW50Q29uc3RhbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMCk7XG5cdHZhciBFdmVudFBsdWdpbkh1YiA9IF9fd2VicGFja19yZXF1aXJlX18oMzEpO1xuXHR2YXIgRXZlbnRQbHVnaW5SZWdpc3RyeSA9IF9fd2VicGFja19yZXF1aXJlX18oMzIpO1xuXHR2YXIgUmVhY3RFdmVudEVtaXR0ZXJNaXhpbiA9IF9fd2VicGFja19yZXF1aXJlX18oMzcpO1xuXHR2YXIgUmVhY3RQZXJmID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7XG5cdHZhciBWaWV3cG9ydE1ldHJpY3MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4KTtcblx0XG5cdHZhciBhc3NpZ24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KTtcblx0dmFyIGlzRXZlbnRTdXBwb3J0ZWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTtcblx0XG5cdC8qKlxuXHQgKiBTdW1tYXJ5IG9mIGBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXJgIGV2ZW50IGhhbmRsaW5nOlxuXHQgKlxuXHQgKiAgLSBUb3AtbGV2ZWwgZGVsZWdhdGlvbiBpcyB1c2VkIHRvIHRyYXAgbW9zdCBuYXRpdmUgYnJvd3NlciBldmVudHMuIFRoaXNcblx0ICogICAgbWF5IG9ubHkgb2NjdXIgaW4gdGhlIG1haW4gdGhyZWFkIGFuZCBpcyB0aGUgcmVzcG9uc2liaWxpdHkgb2Zcblx0ICogICAgUmVhY3RFdmVudExpc3RlbmVyLCB3aGljaCBpcyBpbmplY3RlZCBhbmQgY2FuIHRoZXJlZm9yZSBzdXBwb3J0IHBsdWdnYWJsZVxuXHQgKiAgICBldmVudCBzb3VyY2VzLiBUaGlzIGlzIHRoZSBvbmx5IHdvcmsgdGhhdCBvY2N1cnMgaW4gdGhlIG1haW4gdGhyZWFkLlxuXHQgKlxuXHQgKiAgLSBXZSBub3JtYWxpemUgYW5kIGRlLWR1cGxpY2F0ZSBldmVudHMgdG8gYWNjb3VudCBmb3IgYnJvd3NlciBxdWlya3MuIFRoaXNcblx0ICogICAgbWF5IGJlIGRvbmUgaW4gdGhlIHdvcmtlciB0aHJlYWQuXG5cdCAqXG5cdCAqICAtIEZvcndhcmQgdGhlc2UgbmF0aXZlIGV2ZW50cyAod2l0aCB0aGUgYXNzb2NpYXRlZCB0b3AtbGV2ZWwgdHlwZSB1c2VkIHRvXG5cdCAqICAgIHRyYXAgaXQpIHRvIGBFdmVudFBsdWdpbkh1YmAsIHdoaWNoIGluIHR1cm4gd2lsbCBhc2sgcGx1Z2lucyBpZiB0aGV5IHdhbnRcblx0ICogICAgdG8gZXh0cmFjdCBhbnkgc3ludGhldGljIGV2ZW50cy5cblx0ICpcblx0ICogIC0gVGhlIGBFdmVudFBsdWdpbkh1YmAgd2lsbCB0aGVuIHByb2Nlc3MgZWFjaCBldmVudCBieSBhbm5vdGF0aW5nIHRoZW0gd2l0aFxuXHQgKiAgICBcImRpc3BhdGNoZXNcIiwgYSBzZXF1ZW5jZSBvZiBsaXN0ZW5lcnMgYW5kIElEcyB0aGF0IGNhcmUgYWJvdXQgdGhhdCBldmVudC5cblx0ICpcblx0ICogIC0gVGhlIGBFdmVudFBsdWdpbkh1YmAgdGhlbiBkaXNwYXRjaGVzIHRoZSBldmVudHMuXG5cdCAqXG5cdCAqIE92ZXJ2aWV3IG9mIFJlYWN0IGFuZCB0aGUgZXZlbnQgc3lzdGVtOlxuXHQgKlxuXHQgKiArLS0tLS0tLS0tLS0tKyAgICAuXG5cdCAqIHwgICAgRE9NICAgICB8ICAgIC5cblx0ICogKy0tLS0tLS0tLS0tLSsgICAgLlxuXHQgKiAgICAgICB8ICAgICAgICAgICAuXG5cdCAqICAgICAgIHYgICAgICAgICAgIC5cblx0ICogKy0tLS0tLS0tLS0tLSsgICAgLlxuXHQgKiB8IFJlYWN0RXZlbnQgfCAgICAuXG5cdCAqIHwgIExpc3RlbmVyICB8ICAgIC5cblx0ICogKy0tLS0tLS0tLS0tLSsgICAgLiAgICAgICAgICAgICAgICAgICAgICAgICArLS0tLS0tLS0tLS0rXG5cdCAqICAgICAgIHwgICAgICAgICAgIC4gICAgICAgICAgICAgICArLS0tLS0tLS0rfFNpbXBsZUV2ZW50fFxuXHQgKiAgICAgICB8ICAgICAgICAgICAuICAgICAgICAgICAgICAgfCAgICAgICAgIHxQbHVnaW4gICAgIHxcblx0ICogKy0tLS0tfC0tLS0tLSsgICAgLiAgICAgICAgICAgICAgIHYgICAgICAgICArLS0tLS0tLS0tLS0rXG5cdCAqIHwgICAgIHwgICAgICB8ICAgIC4gICAgKy0tLS0tLS0tLS0tLS0tKyAgICAgICAgICAgICAgICAgICAgKy0tLS0tLS0tLS0tLStcblx0ICogfCAgICAgKy0tLS0tLS0tLS0tLi0tLT58RXZlbnRQbHVnaW5IdWJ8ICAgICAgICAgICAgICAgICAgICB8ICAgIEV2ZW50ICAgfFxuXHQgKiB8ICAgICAgICAgICAgfCAgICAuICAgIHwgICAgICAgICAgICAgIHwgICAgICstLS0tLS0tLS0tLSsgIHwgUHJvcGFnYXRvcnN8XG5cdCAqIHwgUmVhY3RFdmVudCB8ICAgIC4gICAgfCAgICAgICAgICAgICAgfCAgICAgfFRhcEV2ZW50ICAgfCAgfC0tLS0tLS0tLS0tLXxcblx0ICogfCAgRW1pdHRlciAgIHwgICAgLiAgICB8ICAgICAgICAgICAgICB8PC0tLSt8UGx1Z2luICAgICB8ICB8b3RoZXIgcGx1Z2lufFxuXHQgKiB8ICAgICAgICAgICAgfCAgICAuICAgIHwgICAgICAgICAgICAgIHwgICAgICstLS0tLS0tLS0tLSsgIHwgIHV0aWxpdGllcyB8XG5cdCAqIHwgICAgICstLS0tLS0tLS0tLS4tLS0+fCAgICAgICAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgKy0tLS0tLS0tLS0tLStcblx0ICogfCAgICAgfCAgICAgIHwgICAgLiAgICArLS0tLS0tLS0tLS0tLS0rXG5cdCAqICstLS0tLXwtLS0tLS0rICAgIC4gICAgICAgICAgICAgICAgXiAgICAgICAgKy0tLS0tLS0tLS0tK1xuXHQgKiAgICAgICB8ICAgICAgICAgICAuICAgICAgICAgICAgICAgIHwgICAgICAgIHxFbnRlci9MZWF2ZXxcblx0ICogICAgICAgKyAgICAgICAgICAgLiAgICAgICAgICAgICAgICArLS0tLS0tLSt8UGx1Z2luICAgICB8XG5cdCAqICstLS0tLS0tLS0tLS0tKyAgIC4gICAgICAgICAgICAgICAgICAgICAgICAgKy0tLS0tLS0tLS0tK1xuXHQgKiB8IGFwcGxpY2F0aW9uIHwgICAuXG5cdCAqIHwtLS0tLS0tLS0tLS0tfCAgIC5cblx0ICogfCAgICAgICAgICAgICB8ICAgLlxuXHQgKiB8ICAgICAgICAgICAgIHwgICAuXG5cdCAqICstLS0tLS0tLS0tLS0tKyAgIC5cblx0ICogICAgICAgICAgICAgICAgICAgLlxuXHQgKiAgICBSZWFjdCBDb3JlICAgICAuICBHZW5lcmFsIFB1cnBvc2UgRXZlbnQgUGx1Z2luIFN5c3RlbVxuXHQgKi9cblx0XG5cdHZhciBhbHJlYWR5TGlzdGVuaW5nVG8gPSB7fTtcblx0dmFyIGlzTW9uaXRvcmluZ1Njcm9sbFZhbHVlID0gZmFsc2U7XG5cdHZhciByZWFjdFRvcExpc3RlbmVyc0NvdW50ZXIgPSAwO1xuXHRcblx0Ly8gRm9yIGV2ZW50cyBsaWtlICdzdWJtaXQnIHdoaWNoIGRvbid0IGNvbnNpc3RlbnRseSBidWJibGUgKHdoaWNoIHdlIHRyYXAgYXQgYVxuXHQvLyBsb3dlciBub2RlIHRoYW4gYGRvY3VtZW50YCksIGJpbmRpbmcgYXQgYGRvY3VtZW50YCB3b3VsZCBjYXVzZSBkdXBsaWNhdGVcblx0Ly8gZXZlbnRzIHNvIHdlIGRvbid0IGluY2x1ZGUgdGhlbSBoZXJlXG5cdHZhciB0b3BFdmVudE1hcHBpbmcgPSB7XG5cdCAgdG9wQWJvcnQ6ICdhYm9ydCcsXG5cdCAgdG9wQmx1cjogJ2JsdXInLFxuXHQgIHRvcENhblBsYXk6ICdjYW5wbGF5Jyxcblx0ICB0b3BDYW5QbGF5VGhyb3VnaDogJ2NhbnBsYXl0aHJvdWdoJyxcblx0ICB0b3BDaGFuZ2U6ICdjaGFuZ2UnLFxuXHQgIHRvcENsaWNrOiAnY2xpY2snLFxuXHQgIHRvcENvbXBvc2l0aW9uRW5kOiAnY29tcG9zaXRpb25lbmQnLFxuXHQgIHRvcENvbXBvc2l0aW9uU3RhcnQ6ICdjb21wb3NpdGlvbnN0YXJ0Jyxcblx0ICB0b3BDb21wb3NpdGlvblVwZGF0ZTogJ2NvbXBvc2l0aW9udXBkYXRlJyxcblx0ICB0b3BDb250ZXh0TWVudTogJ2NvbnRleHRtZW51Jyxcblx0ICB0b3BDb3B5OiAnY29weScsXG5cdCAgdG9wQ3V0OiAnY3V0Jyxcblx0ICB0b3BEb3VibGVDbGljazogJ2RibGNsaWNrJyxcblx0ICB0b3BEcmFnOiAnZHJhZycsXG5cdCAgdG9wRHJhZ0VuZDogJ2RyYWdlbmQnLFxuXHQgIHRvcERyYWdFbnRlcjogJ2RyYWdlbnRlcicsXG5cdCAgdG9wRHJhZ0V4aXQ6ICdkcmFnZXhpdCcsXG5cdCAgdG9wRHJhZ0xlYXZlOiAnZHJhZ2xlYXZlJyxcblx0ICB0b3BEcmFnT3ZlcjogJ2RyYWdvdmVyJyxcblx0ICB0b3BEcmFnU3RhcnQ6ICdkcmFnc3RhcnQnLFxuXHQgIHRvcERyb3A6ICdkcm9wJyxcblx0ICB0b3BEdXJhdGlvbkNoYW5nZTogJ2R1cmF0aW9uY2hhbmdlJyxcblx0ICB0b3BFbXB0aWVkOiAnZW1wdGllZCcsXG5cdCAgdG9wRW5jcnlwdGVkOiAnZW5jcnlwdGVkJyxcblx0ICB0b3BFbmRlZDogJ2VuZGVkJyxcblx0ICB0b3BFcnJvcjogJ2Vycm9yJyxcblx0ICB0b3BGb2N1czogJ2ZvY3VzJyxcblx0ICB0b3BJbnB1dDogJ2lucHV0Jyxcblx0ICB0b3BLZXlEb3duOiAna2V5ZG93bicsXG5cdCAgdG9wS2V5UHJlc3M6ICdrZXlwcmVzcycsXG5cdCAgdG9wS2V5VXA6ICdrZXl1cCcsXG5cdCAgdG9wTG9hZGVkRGF0YTogJ2xvYWRlZGRhdGEnLFxuXHQgIHRvcExvYWRlZE1ldGFkYXRhOiAnbG9hZGVkbWV0YWRhdGEnLFxuXHQgIHRvcExvYWRTdGFydDogJ2xvYWRzdGFydCcsXG5cdCAgdG9wTW91c2VEb3duOiAnbW91c2Vkb3duJyxcblx0ICB0b3BNb3VzZU1vdmU6ICdtb3VzZW1vdmUnLFxuXHQgIHRvcE1vdXNlT3V0OiAnbW91c2VvdXQnLFxuXHQgIHRvcE1vdXNlT3ZlcjogJ21vdXNlb3ZlcicsXG5cdCAgdG9wTW91c2VVcDogJ21vdXNldXAnLFxuXHQgIHRvcFBhc3RlOiAncGFzdGUnLFxuXHQgIHRvcFBhdXNlOiAncGF1c2UnLFxuXHQgIHRvcFBsYXk6ICdwbGF5Jyxcblx0ICB0b3BQbGF5aW5nOiAncGxheWluZycsXG5cdCAgdG9wUHJvZ3Jlc3M6ICdwcm9ncmVzcycsXG5cdCAgdG9wUmF0ZUNoYW5nZTogJ3JhdGVjaGFuZ2UnLFxuXHQgIHRvcFNjcm9sbDogJ3Njcm9sbCcsXG5cdCAgdG9wU2Vla2VkOiAnc2Vla2VkJyxcblx0ICB0b3BTZWVraW5nOiAnc2Vla2luZycsXG5cdCAgdG9wU2VsZWN0aW9uQ2hhbmdlOiAnc2VsZWN0aW9uY2hhbmdlJyxcblx0ICB0b3BTdGFsbGVkOiAnc3RhbGxlZCcsXG5cdCAgdG9wU3VzcGVuZDogJ3N1c3BlbmQnLFxuXHQgIHRvcFRleHRJbnB1dDogJ3RleHRJbnB1dCcsXG5cdCAgdG9wVGltZVVwZGF0ZTogJ3RpbWV1cGRhdGUnLFxuXHQgIHRvcFRvdWNoQ2FuY2VsOiAndG91Y2hjYW5jZWwnLFxuXHQgIHRvcFRvdWNoRW5kOiAndG91Y2hlbmQnLFxuXHQgIHRvcFRvdWNoTW92ZTogJ3RvdWNobW92ZScsXG5cdCAgdG9wVG91Y2hTdGFydDogJ3RvdWNoc3RhcnQnLFxuXHQgIHRvcFZvbHVtZUNoYW5nZTogJ3ZvbHVtZWNoYW5nZScsXG5cdCAgdG9wV2FpdGluZzogJ3dhaXRpbmcnLFxuXHQgIHRvcFdoZWVsOiAnd2hlZWwnXG5cdH07XG5cdFxuXHQvKipcblx0ICogVG8gZW5zdXJlIG5vIGNvbmZsaWN0cyB3aXRoIG90aGVyIHBvdGVudGlhbCBSZWFjdCBpbnN0YW5jZXMgb24gdGhlIHBhZ2Vcblx0ICovXG5cdHZhciB0b3BMaXN0ZW5lcnNJREtleSA9ICdfcmVhY3RMaXN0ZW5lcnNJRCcgKyBTdHJpbmcoTWF0aC5yYW5kb20oKSkuc2xpY2UoMik7XG5cdFxuXHRmdW5jdGlvbiBnZXRMaXN0ZW5pbmdGb3JEb2N1bWVudChtb3VudEF0KSB7XG5cdCAgLy8gSW4gSUU4LCBgbW91bnRBdGAgaXMgYSBob3N0IG9iamVjdCBhbmQgZG9lc24ndCBoYXZlIGBoYXNPd25Qcm9wZXJ0eWBcblx0ICAvLyBkaXJlY3RseS5cblx0ICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb3VudEF0LCB0b3BMaXN0ZW5lcnNJREtleSkpIHtcblx0ICAgIG1vdW50QXRbdG9wTGlzdGVuZXJzSURLZXldID0gcmVhY3RUb3BMaXN0ZW5lcnNDb3VudGVyKys7XG5cdCAgICBhbHJlYWR5TGlzdGVuaW5nVG9bbW91bnRBdFt0b3BMaXN0ZW5lcnNJREtleV1dID0ge307XG5cdCAgfVxuXHQgIHJldHVybiBhbHJlYWR5TGlzdGVuaW5nVG9bbW91bnRBdFt0b3BMaXN0ZW5lcnNJREtleV1dO1xuXHR9XG5cdFxuXHQvKipcblx0ICogYFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlcmAgaXMgdXNlZCB0byBhdHRhY2ggdG9wLWxldmVsIGV2ZW50IGxpc3RlbmVycy4gRm9yXG5cdCAqIGV4YW1wbGU6XG5cdCAqXG5cdCAqICAgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLnB1dExpc3RlbmVyKCdteUlEJywgJ29uQ2xpY2snLCBteUZ1bmN0aW9uKTtcblx0ICpcblx0ICogVGhpcyB3b3VsZCBhbGxvY2F0ZSBhIFwicmVnaXN0cmF0aW9uXCIgb2YgYCgnb25DbGljaycsIG15RnVuY3Rpb24pYCBvbiAnbXlJRCcuXG5cdCAqXG5cdCAqIEBpbnRlcm5hbFxuXHQgKi9cblx0dmFyIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlciA9IGFzc2lnbih7fSwgUmVhY3RFdmVudEVtaXR0ZXJNaXhpbiwge1xuXHRcblx0ICAvKipcblx0ICAgKiBJbmplY3RhYmxlIGV2ZW50IGJhY2tlbmRcblx0ICAgKi9cblx0ICBSZWFjdEV2ZW50TGlzdGVuZXI6IG51bGwsXG5cdFxuXHQgIGluamVjdGlvbjoge1xuXHQgICAgLyoqXG5cdCAgICAgKiBAcGFyYW0ge29iamVjdH0gUmVhY3RFdmVudExpc3RlbmVyXG5cdCAgICAgKi9cblx0ICAgIGluamVjdFJlYWN0RXZlbnRMaXN0ZW5lcjogZnVuY3Rpb24gKFJlYWN0RXZlbnRMaXN0ZW5lcikge1xuXHQgICAgICBSZWFjdEV2ZW50TGlzdGVuZXIuc2V0SGFuZGxlVG9wTGV2ZWwoUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLmhhbmRsZVRvcExldmVsKTtcblx0ICAgICAgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lciA9IFJlYWN0RXZlbnRMaXN0ZW5lcjtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBTZXRzIHdoZXRoZXIgb3Igbm90IGFueSBjcmVhdGVkIGNhbGxiYWNrcyBzaG91bGQgYmUgZW5hYmxlZC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Ym9vbGVhbn0gZW5hYmxlZCBUcnVlIGlmIGNhbGxiYWNrcyBzaG91bGQgYmUgZW5hYmxlZC5cblx0ICAgKi9cblx0ICBzZXRFbmFibGVkOiBmdW5jdGlvbiAoZW5hYmxlZCkge1xuXHQgICAgaWYgKFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5SZWFjdEV2ZW50TGlzdGVuZXIpIHtcblx0ICAgICAgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lci5zZXRFbmFibGVkKGVuYWJsZWQpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgY2FsbGJhY2tzIGFyZSBlbmFibGVkLlxuXHQgICAqL1xuXHQgIGlzRW5hYmxlZDogZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuICEhKFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5SZWFjdEV2ZW50TGlzdGVuZXIgJiYgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lci5pc0VuYWJsZWQoKSk7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogV2UgbGlzdGVuIGZvciBidWJibGVkIHRvdWNoIGV2ZW50cyBvbiB0aGUgZG9jdW1lbnQgb2JqZWN0LlxuXHQgICAqXG5cdCAgICogRmlyZWZveCB2OC4wMSAoYW5kIHBvc3NpYmx5IG90aGVycykgZXhoaWJpdGVkIHN0cmFuZ2UgYmVoYXZpb3Igd2hlblxuXHQgICAqIG1vdW50aW5nIGBvbm1vdXNlbW92ZWAgZXZlbnRzIGF0IHNvbWUgbm9kZSB0aGF0IHdhcyBub3QgdGhlIGRvY3VtZW50XG5cdCAgICogZWxlbWVudC4gVGhlIHN5bXB0b21zIHdlcmUgdGhhdCBpZiB5b3VyIG1vdXNlIGlzIG5vdCBtb3Zpbmcgb3ZlciBzb21ldGhpbmdcblx0ICAgKiBjb250YWluZWQgd2l0aGluIHRoYXQgbW91bnQgcG9pbnQgKGZvciBleGFtcGxlIG9uIHRoZSBiYWNrZ3JvdW5kKSB0aGVcblx0ICAgKiB0b3AtbGV2ZWwgbGlzdGVuZXJzIGZvciBgb25tb3VzZW1vdmVgIHdvbid0IGJlIGNhbGxlZC4gSG93ZXZlciwgaWYgeW91XG5cdCAgICogcmVnaXN0ZXIgdGhlIGBtb3VzZW1vdmVgIG9uIHRoZSBkb2N1bWVudCBvYmplY3QsIHRoZW4gaXQgd2lsbCBvZiBjb3Vyc2Vcblx0ICAgKiBjYXRjaCBhbGwgYG1vdXNlbW92ZWBzLiBUaGlzIGFsb25nIHdpdGggaU9TIHF1aXJrcywganVzdGlmaWVzIHJlc3RyaWN0aW5nXG5cdCAgICogdG9wLWxldmVsIGxpc3RlbmVycyB0byB0aGUgZG9jdW1lbnQgb2JqZWN0IG9ubHksIGF0IGxlYXN0IGZvciB0aGVzZVxuXHQgICAqIG1vdmVtZW50IHR5cGVzIG9mIGV2ZW50cyBhbmQgcG9zc2libHkgYWxsIGV2ZW50cy5cblx0ICAgKlxuXHQgICAqIEBzZWUgaHR0cDovL3d3dy5xdWlya3Ntb2RlLm9yZy9ibG9nL2FyY2hpdmVzLzIwMTAvMDkvY2xpY2tfZXZlbnRfZGVsLmh0bWxcblx0ICAgKlxuXHQgICAqIEFsc28sIGBrZXl1cGAvYGtleXByZXNzYC9ga2V5ZG93bmAgZG8gbm90IGJ1YmJsZSB0byB0aGUgd2luZG93IG9uIElFLCBidXRcblx0ICAgKiB0aGV5IGJ1YmJsZSB0byBkb2N1bWVudC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7c3RyaW5nfSByZWdpc3RyYXRpb25OYW1lIE5hbWUgb2YgbGlzdGVuZXIgKGUuZy4gYG9uQ2xpY2tgKS5cblx0ICAgKiBAcGFyYW0ge29iamVjdH0gY29udGVudERvY3VtZW50SGFuZGxlIERvY3VtZW50IHdoaWNoIG93bnMgdGhlIGNvbnRhaW5lclxuXHQgICAqL1xuXHQgIGxpc3RlblRvOiBmdW5jdGlvbiAocmVnaXN0cmF0aW9uTmFtZSwgY29udGVudERvY3VtZW50SGFuZGxlKSB7XG5cdCAgICB2YXIgbW91bnRBdCA9IGNvbnRlbnREb2N1bWVudEhhbmRsZTtcblx0ICAgIHZhciBpc0xpc3RlbmluZyA9IGdldExpc3RlbmluZ0ZvckRvY3VtZW50KG1vdW50QXQpO1xuXHQgICAgdmFyIGRlcGVuZGVuY2llcyA9IEV2ZW50UGx1Z2luUmVnaXN0cnkucmVnaXN0cmF0aW9uTmFtZURlcGVuZGVuY2llc1tyZWdpc3RyYXRpb25OYW1lXTtcblx0XG5cdCAgICB2YXIgdG9wTGV2ZWxUeXBlcyA9IEV2ZW50Q29uc3RhbnRzLnRvcExldmVsVHlwZXM7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRlcGVuZGVuY2llcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIgZGVwZW5kZW5jeSA9IGRlcGVuZGVuY2llc1tpXTtcblx0ICAgICAgaWYgKCEoaXNMaXN0ZW5pbmcuaGFzT3duUHJvcGVydHkoZGVwZW5kZW5jeSkgJiYgaXNMaXN0ZW5pbmdbZGVwZW5kZW5jeV0pKSB7XG5cdCAgICAgICAgaWYgKGRlcGVuZGVuY3kgPT09IHRvcExldmVsVHlwZXMudG9wV2hlZWwpIHtcblx0ICAgICAgICAgIGlmIChpc0V2ZW50U3VwcG9ydGVkKCd3aGVlbCcpKSB7XG5cdCAgICAgICAgICAgIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5SZWFjdEV2ZW50TGlzdGVuZXIudHJhcEJ1YmJsZWRFdmVudCh0b3BMZXZlbFR5cGVzLnRvcFdoZWVsLCAnd2hlZWwnLCBtb3VudEF0KTtcblx0ICAgICAgICAgIH0gZWxzZSBpZiAoaXNFdmVudFN1cHBvcnRlZCgnbW91c2V3aGVlbCcpKSB7XG5cdCAgICAgICAgICAgIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5SZWFjdEV2ZW50TGlzdGVuZXIudHJhcEJ1YmJsZWRFdmVudCh0b3BMZXZlbFR5cGVzLnRvcFdoZWVsLCAnbW91c2V3aGVlbCcsIG1vdW50QXQpO1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgLy8gRmlyZWZveCBuZWVkcyB0byBjYXB0dXJlIGEgZGlmZmVyZW50IG1vdXNlIHNjcm9sbCBldmVudC5cblx0ICAgICAgICAgICAgLy8gQHNlZSBodHRwOi8vd3d3LnF1aXJrc21vZGUub3JnL2RvbS9ldmVudHMvdGVzdHMvc2Nyb2xsLmh0bWxcblx0ICAgICAgICAgICAgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lci50cmFwQnViYmxlZEV2ZW50KHRvcExldmVsVHlwZXMudG9wV2hlZWwsICdET01Nb3VzZVNjcm9sbCcsIG1vdW50QXQpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSBpZiAoZGVwZW5kZW5jeSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BTY3JvbGwpIHtcblx0XG5cdCAgICAgICAgICBpZiAoaXNFdmVudFN1cHBvcnRlZCgnc2Nyb2xsJywgdHJ1ZSkpIHtcblx0ICAgICAgICAgICAgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lci50cmFwQ2FwdHVyZWRFdmVudCh0b3BMZXZlbFR5cGVzLnRvcFNjcm9sbCwgJ3Njcm9sbCcsIG1vdW50QXQpO1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lci50cmFwQnViYmxlZEV2ZW50KHRvcExldmVsVHlwZXMudG9wU2Nyb2xsLCAnc2Nyb2xsJywgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lci5XSU5ET1dfSEFORExFKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2UgaWYgKGRlcGVuZGVuY3kgPT09IHRvcExldmVsVHlwZXMudG9wRm9jdXMgfHwgZGVwZW5kZW5jeSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BCbHVyKSB7XG5cdFxuXHQgICAgICAgICAgaWYgKGlzRXZlbnRTdXBwb3J0ZWQoJ2ZvY3VzJywgdHJ1ZSkpIHtcblx0ICAgICAgICAgICAgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lci50cmFwQ2FwdHVyZWRFdmVudCh0b3BMZXZlbFR5cGVzLnRvcEZvY3VzLCAnZm9jdXMnLCBtb3VudEF0KTtcblx0ICAgICAgICAgICAgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lci50cmFwQ2FwdHVyZWRFdmVudCh0b3BMZXZlbFR5cGVzLnRvcEJsdXIsICdibHVyJywgbW91bnRBdCk7XG5cdCAgICAgICAgICB9IGVsc2UgaWYgKGlzRXZlbnRTdXBwb3J0ZWQoJ2ZvY3VzaW4nKSkge1xuXHQgICAgICAgICAgICAvLyBJRSBoYXMgYGZvY3VzaW5gIGFuZCBgZm9jdXNvdXRgIGV2ZW50cyB3aGljaCBidWJibGUuXG5cdCAgICAgICAgICAgIC8vIEBzZWUgaHR0cDovL3d3dy5xdWlya3Ntb2RlLm9yZy9ibG9nL2FyY2hpdmVzLzIwMDgvMDQvZGVsZWdhdGluZ190aGUuaHRtbFxuXHQgICAgICAgICAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyLnRyYXBCdWJibGVkRXZlbnQodG9wTGV2ZWxUeXBlcy50b3BGb2N1cywgJ2ZvY3VzaW4nLCBtb3VudEF0KTtcblx0ICAgICAgICAgICAgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lci50cmFwQnViYmxlZEV2ZW50KHRvcExldmVsVHlwZXMudG9wQmx1ciwgJ2ZvY3Vzb3V0JywgbW91bnRBdCk7XG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgLy8gdG8gbWFrZSBzdXJlIGJsdXIgYW5kIGZvY3VzIGV2ZW50IGxpc3RlbmVycyBhcmUgb25seSBhdHRhY2hlZCBvbmNlXG5cdCAgICAgICAgICBpc0xpc3RlbmluZ1t0b3BMZXZlbFR5cGVzLnRvcEJsdXJdID0gdHJ1ZTtcblx0ICAgICAgICAgIGlzTGlzdGVuaW5nW3RvcExldmVsVHlwZXMudG9wRm9jdXNdID0gdHJ1ZTtcblx0ICAgICAgICB9IGVsc2UgaWYgKHRvcEV2ZW50TWFwcGluZy5oYXNPd25Qcm9wZXJ0eShkZXBlbmRlbmN5KSkge1xuXHQgICAgICAgICAgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lci50cmFwQnViYmxlZEV2ZW50KGRlcGVuZGVuY3ksIHRvcEV2ZW50TWFwcGluZ1tkZXBlbmRlbmN5XSwgbW91bnRBdCk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpc0xpc3RlbmluZ1tkZXBlbmRlbmN5XSA9IHRydWU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB0cmFwQnViYmxlZEV2ZW50OiBmdW5jdGlvbiAodG9wTGV2ZWxUeXBlLCBoYW5kbGVyQmFzZU5hbWUsIGhhbmRsZSkge1xuXHQgICAgcmV0dXJuIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5SZWFjdEV2ZW50TGlzdGVuZXIudHJhcEJ1YmJsZWRFdmVudCh0b3BMZXZlbFR5cGUsIGhhbmRsZXJCYXNlTmFtZSwgaGFuZGxlKTtcblx0ICB9LFxuXHRcblx0ICB0cmFwQ2FwdHVyZWRFdmVudDogZnVuY3Rpb24gKHRvcExldmVsVHlwZSwgaGFuZGxlckJhc2VOYW1lLCBoYW5kbGUpIHtcblx0ICAgIHJldHVybiBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyLnRyYXBDYXB0dXJlZEV2ZW50KHRvcExldmVsVHlwZSwgaGFuZGxlckJhc2VOYW1lLCBoYW5kbGUpO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIExpc3RlbnMgdG8gd2luZG93IHNjcm9sbCBhbmQgcmVzaXplIGV2ZW50cy4gV2UgY2FjaGUgc2Nyb2xsIHZhbHVlcyBzbyB0aGF0XG5cdCAgICogYXBwbGljYXRpb24gY29kZSBjYW4gYWNjZXNzIHRoZW0gd2l0aG91dCB0cmlnZ2VyaW5nIHJlZmxvd3MuXG5cdCAgICpcblx0ICAgKiBOT1RFOiBTY3JvbGwgZXZlbnRzIGRvIG5vdCBidWJibGUuXG5cdCAgICpcblx0ICAgKiBAc2VlIGh0dHA6Ly93d3cucXVpcmtzbW9kZS5vcmcvZG9tL2V2ZW50cy9zY3JvbGwuaHRtbFxuXHQgICAqL1xuXHQgIGVuc3VyZVNjcm9sbFZhbHVlTW9uaXRvcmluZzogZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKCFpc01vbml0b3JpbmdTY3JvbGxWYWx1ZSkge1xuXHQgICAgICB2YXIgcmVmcmVzaCA9IFZpZXdwb3J0TWV0cmljcy5yZWZyZXNoU2Nyb2xsVmFsdWVzO1xuXHQgICAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyLm1vbml0b3JTY3JvbGxWYWx1ZShyZWZyZXNoKTtcblx0ICAgICAgaXNNb25pdG9yaW5nU2Nyb2xsVmFsdWUgPSB0cnVlO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIGV2ZW50TmFtZURpc3BhdGNoQ29uZmlnczogRXZlbnRQbHVnaW5IdWIuZXZlbnROYW1lRGlzcGF0Y2hDb25maWdzLFxuXHRcblx0ICByZWdpc3RyYXRpb25OYW1lTW9kdWxlczogRXZlbnRQbHVnaW5IdWIucmVnaXN0cmF0aW9uTmFtZU1vZHVsZXMsXG5cdFxuXHQgIHB1dExpc3RlbmVyOiBFdmVudFBsdWdpbkh1Yi5wdXRMaXN0ZW5lcixcblx0XG5cdCAgZ2V0TGlzdGVuZXI6IEV2ZW50UGx1Z2luSHViLmdldExpc3RlbmVyLFxuXHRcblx0ICBkZWxldGVMaXN0ZW5lcjogRXZlbnRQbHVnaW5IdWIuZGVsZXRlTGlzdGVuZXIsXG5cdFxuXHQgIGRlbGV0ZUFsbExpc3RlbmVyczogRXZlbnRQbHVnaW5IdWIuZGVsZXRlQWxsTGlzdGVuZXJzXG5cdFxuXHR9KTtcblx0XG5cdFJlYWN0UGVyZi5tZWFzdXJlTWV0aG9kcyhSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIsICdSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXInLCB7XG5cdCAgcHV0TGlzdGVuZXI6ICdwdXRMaXN0ZW5lcicsXG5cdCAgZGVsZXRlTGlzdGVuZXI6ICdkZWxldGVMaXN0ZW5lcidcblx0fSk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlcjtcblxuLyoqKi8gfSksXG4vKiAzMCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgRXZlbnRDb25zdGFudHNcblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIga2V5TWlycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7XG5cdFxuXHR2YXIgUHJvcGFnYXRpb25QaGFzZXMgPSBrZXlNaXJyb3IoeyBidWJibGVkOiBudWxsLCBjYXB0dXJlZDogbnVsbCB9KTtcblx0XG5cdC8qKlxuXHQgKiBUeXBlcyBvZiByYXcgc2lnbmFscyBmcm9tIHRoZSBicm93c2VyIGNhdWdodCBhdCB0aGUgdG9wIGxldmVsLlxuXHQgKi9cblx0dmFyIHRvcExldmVsVHlwZXMgPSBrZXlNaXJyb3Ioe1xuXHQgIHRvcEFib3J0OiBudWxsLFxuXHQgIHRvcEJsdXI6IG51bGwsXG5cdCAgdG9wQ2FuUGxheTogbnVsbCxcblx0ICB0b3BDYW5QbGF5VGhyb3VnaDogbnVsbCxcblx0ICB0b3BDaGFuZ2U6IG51bGwsXG5cdCAgdG9wQ2xpY2s6IG51bGwsXG5cdCAgdG9wQ29tcG9zaXRpb25FbmQ6IG51bGwsXG5cdCAgdG9wQ29tcG9zaXRpb25TdGFydDogbnVsbCxcblx0ICB0b3BDb21wb3NpdGlvblVwZGF0ZTogbnVsbCxcblx0ICB0b3BDb250ZXh0TWVudTogbnVsbCxcblx0ICB0b3BDb3B5OiBudWxsLFxuXHQgIHRvcEN1dDogbnVsbCxcblx0ICB0b3BEb3VibGVDbGljazogbnVsbCxcblx0ICB0b3BEcmFnOiBudWxsLFxuXHQgIHRvcERyYWdFbmQ6IG51bGwsXG5cdCAgdG9wRHJhZ0VudGVyOiBudWxsLFxuXHQgIHRvcERyYWdFeGl0OiBudWxsLFxuXHQgIHRvcERyYWdMZWF2ZTogbnVsbCxcblx0ICB0b3BEcmFnT3ZlcjogbnVsbCxcblx0ICB0b3BEcmFnU3RhcnQ6IG51bGwsXG5cdCAgdG9wRHJvcDogbnVsbCxcblx0ICB0b3BEdXJhdGlvbkNoYW5nZTogbnVsbCxcblx0ICB0b3BFbXB0aWVkOiBudWxsLFxuXHQgIHRvcEVuY3J5cHRlZDogbnVsbCxcblx0ICB0b3BFbmRlZDogbnVsbCxcblx0ICB0b3BFcnJvcjogbnVsbCxcblx0ICB0b3BGb2N1czogbnVsbCxcblx0ICB0b3BJbnB1dDogbnVsbCxcblx0ICB0b3BLZXlEb3duOiBudWxsLFxuXHQgIHRvcEtleVByZXNzOiBudWxsLFxuXHQgIHRvcEtleVVwOiBudWxsLFxuXHQgIHRvcExvYWQ6IG51bGwsXG5cdCAgdG9wTG9hZGVkRGF0YTogbnVsbCxcblx0ICB0b3BMb2FkZWRNZXRhZGF0YTogbnVsbCxcblx0ICB0b3BMb2FkU3RhcnQ6IG51bGwsXG5cdCAgdG9wTW91c2VEb3duOiBudWxsLFxuXHQgIHRvcE1vdXNlTW92ZTogbnVsbCxcblx0ICB0b3BNb3VzZU91dDogbnVsbCxcblx0ICB0b3BNb3VzZU92ZXI6IG51bGwsXG5cdCAgdG9wTW91c2VVcDogbnVsbCxcblx0ICB0b3BQYXN0ZTogbnVsbCxcblx0ICB0b3BQYXVzZTogbnVsbCxcblx0ICB0b3BQbGF5OiBudWxsLFxuXHQgIHRvcFBsYXlpbmc6IG51bGwsXG5cdCAgdG9wUHJvZ3Jlc3M6IG51bGwsXG5cdCAgdG9wUmF0ZUNoYW5nZTogbnVsbCxcblx0ICB0b3BSZXNldDogbnVsbCxcblx0ICB0b3BTY3JvbGw6IG51bGwsXG5cdCAgdG9wU2Vla2VkOiBudWxsLFxuXHQgIHRvcFNlZWtpbmc6IG51bGwsXG5cdCAgdG9wU2VsZWN0aW9uQ2hhbmdlOiBudWxsLFxuXHQgIHRvcFN0YWxsZWQ6IG51bGwsXG5cdCAgdG9wU3VibWl0OiBudWxsLFxuXHQgIHRvcFN1c3BlbmQ6IG51bGwsXG5cdCAgdG9wVGV4dElucHV0OiBudWxsLFxuXHQgIHRvcFRpbWVVcGRhdGU6IG51bGwsXG5cdCAgdG9wVG91Y2hDYW5jZWw6IG51bGwsXG5cdCAgdG9wVG91Y2hFbmQ6IG51bGwsXG5cdCAgdG9wVG91Y2hNb3ZlOiBudWxsLFxuXHQgIHRvcFRvdWNoU3RhcnQ6IG51bGwsXG5cdCAgdG9wVm9sdW1lQ2hhbmdlOiBudWxsLFxuXHQgIHRvcFdhaXRpbmc6IG51bGwsXG5cdCAgdG9wV2hlZWw6IG51bGxcblx0fSk7XG5cdFxuXHR2YXIgRXZlbnRDb25zdGFudHMgPSB7XG5cdCAgdG9wTGV2ZWxUeXBlczogdG9wTGV2ZWxUeXBlcyxcblx0ICBQcm9wYWdhdGlvblBoYXNlczogUHJvcGFnYXRpb25QaGFzZXNcblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gRXZlbnRDb25zdGFudHM7XG5cbi8qKiovIH0pLFxuLyogMzEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgey8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgRXZlbnRQbHVnaW5IdWJcblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgRXZlbnRQbHVnaW5SZWdpc3RyeSA9IF9fd2VicGFja19yZXF1aXJlX18oMzIpO1xuXHR2YXIgRXZlbnRQbHVnaW5VdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMzMpO1xuXHR2YXIgUmVhY3RFcnJvclV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNCk7XG5cdFxuXHR2YXIgYWNjdW11bGF0ZUludG8gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1KTtcblx0dmFyIGZvckVhY2hBY2N1bXVsYXRlZCA9IF9fd2VicGFja19yZXF1aXJlX18oMzYpO1xuXHR2YXIgaW52YXJpYW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7XG5cdHZhciB3YXJuaW5nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cdFxuXHQvKipcblx0ICogSW50ZXJuYWwgc3RvcmUgZm9yIGV2ZW50IGxpc3RlbmVyc1xuXHQgKi9cblx0dmFyIGxpc3RlbmVyQmFuayA9IHt9O1xuXHRcblx0LyoqXG5cdCAqIEludGVybmFsIHF1ZXVlIG9mIGV2ZW50cyB0aGF0IGhhdmUgYWNjdW11bGF0ZWQgdGhlaXIgZGlzcGF0Y2hlcyBhbmQgYXJlXG5cdCAqIHdhaXRpbmcgdG8gaGF2ZSB0aGVpciBkaXNwYXRjaGVzIGV4ZWN1dGVkLlxuXHQgKi9cblx0dmFyIGV2ZW50UXVldWUgPSBudWxsO1xuXHRcblx0LyoqXG5cdCAqIERpc3BhdGNoZXMgYW4gZXZlbnQgYW5kIHJlbGVhc2VzIGl0IGJhY2sgaW50byB0aGUgcG9vbCwgdW5sZXNzIHBlcnNpc3RlbnQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7P29iamVjdH0gZXZlbnQgU3ludGhldGljIGV2ZW50IHRvIGJlIGRpc3BhdGNoZWQuXG5cdCAqIEBwYXJhbSB7Ym9vbGVhbn0gc2ltdWxhdGVkIElmIHRoZSBldmVudCBpcyBzaW11bGF0ZWQgKGNoYW5nZXMgZXhuIGJlaGF2aW9yKVxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0dmFyIGV4ZWN1dGVEaXNwYXRjaGVzQW5kUmVsZWFzZSA9IGZ1bmN0aW9uIChldmVudCwgc2ltdWxhdGVkKSB7XG5cdCAgaWYgKGV2ZW50KSB7XG5cdCAgICBFdmVudFBsdWdpblV0aWxzLmV4ZWN1dGVEaXNwYXRjaGVzSW5PcmRlcihldmVudCwgc2ltdWxhdGVkKTtcblx0XG5cdCAgICBpZiAoIWV2ZW50LmlzUGVyc2lzdGVudCgpKSB7XG5cdCAgICAgIGV2ZW50LmNvbnN0cnVjdG9yLnJlbGVhc2UoZXZlbnQpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0dmFyIGV4ZWN1dGVEaXNwYXRjaGVzQW5kUmVsZWFzZVNpbXVsYXRlZCA9IGZ1bmN0aW9uIChlKSB7XG5cdCAgcmV0dXJuIGV4ZWN1dGVEaXNwYXRjaGVzQW5kUmVsZWFzZShlLCB0cnVlKTtcblx0fTtcblx0dmFyIGV4ZWN1dGVEaXNwYXRjaGVzQW5kUmVsZWFzZVRvcExldmVsID0gZnVuY3Rpb24gKGUpIHtcblx0ICByZXR1cm4gZXhlY3V0ZURpc3BhdGNoZXNBbmRSZWxlYXNlKGUsIGZhbHNlKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiAtIGBJbnN0YW5jZUhhbmRsZWA6IFtyZXF1aXJlZF0gTW9kdWxlIHRoYXQgcGVyZm9ybXMgbG9naWNhbCB0cmF2ZXJzYWxzIG9mIERPTVxuXHQgKiAgIGhpZXJhcmNoeSBnaXZlbiBpZHMgb2YgdGhlIGxvZ2ljYWwgRE9NIGVsZW1lbnRzIGludm9sdmVkLlxuXHQgKi9cblx0dmFyIEluc3RhbmNlSGFuZGxlID0gbnVsbDtcblx0XG5cdGZ1bmN0aW9uIHZhbGlkYXRlSW5zdGFuY2VIYW5kbGUoKSB7XG5cdCAgdmFyIHZhbGlkID0gSW5zdGFuY2VIYW5kbGUgJiYgSW5zdGFuY2VIYW5kbGUudHJhdmVyc2VUd29QaGFzZSAmJiBJbnN0YW5jZUhhbmRsZS50cmF2ZXJzZUVudGVyTGVhdmU7XG5cdCAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcodmFsaWQsICdJbnN0YW5jZUhhbmRsZSBub3QgaW5qZWN0ZWQgYmVmb3JlIHVzZSEnKSA6IHVuZGVmaW5lZDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFRoaXMgaXMgYSB1bmlmaWVkIGludGVyZmFjZSBmb3IgZXZlbnQgcGx1Z2lucyB0byBiZSBpbnN0YWxsZWQgYW5kIGNvbmZpZ3VyZWQuXG5cdCAqXG5cdCAqIEV2ZW50IHBsdWdpbnMgY2FuIGltcGxlbWVudCB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG5cdCAqXG5cdCAqICAgYGV4dHJhY3RFdmVudHNgIHtmdW5jdGlvbihzdHJpbmcsIERPTUV2ZW50VGFyZ2V0LCBzdHJpbmcsIG9iamVjdCk6ICp9XG5cdCAqICAgICBSZXF1aXJlZC4gV2hlbiBhIHRvcC1sZXZlbCBldmVudCBpcyBmaXJlZCwgdGhpcyBtZXRob2QgaXMgZXhwZWN0ZWQgdG9cblx0ICogICAgIGV4dHJhY3Qgc3ludGhldGljIGV2ZW50cyB0aGF0IHdpbGwgaW4gdHVybiBiZSBxdWV1ZWQgYW5kIGRpc3BhdGNoZWQuXG5cdCAqXG5cdCAqICAgYGV2ZW50VHlwZXNgIHtvYmplY3R9XG5cdCAqICAgICBPcHRpb25hbCwgcGx1Z2lucyB0aGF0IGZpcmUgZXZlbnRzIG11c3QgcHVibGlzaCBhIG1hcHBpbmcgb2YgcmVnaXN0cmF0aW9uXG5cdCAqICAgICBuYW1lcyB0aGF0IGFyZSB1c2VkIHRvIHJlZ2lzdGVyIGxpc3RlbmVycy4gVmFsdWVzIG9mIHRoaXMgbWFwcGluZyBtdXN0XG5cdCAqICAgICBiZSBvYmplY3RzIHRoYXQgY29udGFpbiBgcmVnaXN0cmF0aW9uTmFtZWAgb3IgYHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzYC5cblx0ICpcblx0ICogICBgZXhlY3V0ZURpc3BhdGNoYCB7ZnVuY3Rpb24ob2JqZWN0LCBmdW5jdGlvbiwgc3RyaW5nKX1cblx0ICogICAgIE9wdGlvbmFsLCBhbGxvd3MgcGx1Z2lucyB0byBvdmVycmlkZSBob3cgYW4gZXZlbnQgZ2V0cyBkaXNwYXRjaGVkLiBCeVxuXHQgKiAgICAgZGVmYXVsdCwgdGhlIGxpc3RlbmVyIGlzIHNpbXBseSBpbnZva2VkLlxuXHQgKlxuXHQgKiBFYWNoIHBsdWdpbiB0aGF0IGlzIGluamVjdGVkIGludG8gYEV2ZW50c1BsdWdpbkh1YmAgaXMgaW1tZWRpYXRlbHkgb3BlcmFibGUuXG5cdCAqXG5cdCAqIEBwdWJsaWNcblx0ICovXG5cdHZhciBFdmVudFBsdWdpbkh1YiA9IHtcblx0XG5cdCAgLyoqXG5cdCAgICogTWV0aG9kcyBmb3IgaW5qZWN0aW5nIGRlcGVuZGVuY2llcy5cblx0ICAgKi9cblx0ICBpbmplY3Rpb246IHtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIEBwYXJhbSB7b2JqZWN0fSBJbmplY3RlZE1vdW50XG5cdCAgICAgKiBAcHVibGljXG5cdCAgICAgKi9cblx0ICAgIGluamVjdE1vdW50OiBFdmVudFBsdWdpblV0aWxzLmluamVjdGlvbi5pbmplY3RNb3VudCxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIEBwYXJhbSB7b2JqZWN0fSBJbmplY3RlZEluc3RhbmNlSGFuZGxlXG5cdCAgICAgKiBAcHVibGljXG5cdCAgICAgKi9cblx0ICAgIGluamVjdEluc3RhbmNlSGFuZGxlOiBmdW5jdGlvbiAoSW5qZWN0ZWRJbnN0YW5jZUhhbmRsZSkge1xuXHQgICAgICBJbnN0YW5jZUhhbmRsZSA9IEluamVjdGVkSW5zdGFuY2VIYW5kbGU7XG5cdCAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgICAgdmFsaWRhdGVJbnN0YW5jZUhhbmRsZSgpO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHRcblx0ICAgIGdldEluc3RhbmNlSGFuZGxlOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgICAgdmFsaWRhdGVJbnN0YW5jZUhhbmRsZSgpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBJbnN0YW5jZUhhbmRsZTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBAcGFyYW0ge2FycmF5fSBJbmplY3RlZEV2ZW50UGx1Z2luT3JkZXJcblx0ICAgICAqIEBwdWJsaWNcblx0ICAgICAqL1xuXHQgICAgaW5qZWN0RXZlbnRQbHVnaW5PcmRlcjogRXZlbnRQbHVnaW5SZWdpc3RyeS5pbmplY3RFdmVudFBsdWdpbk9yZGVyLFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQHBhcmFtIHtvYmplY3R9IGluamVjdGVkTmFtZXNUb1BsdWdpbnMgTWFwIGZyb20gbmFtZXMgdG8gcGx1Z2luIG1vZHVsZXMuXG5cdCAgICAgKi9cblx0ICAgIGluamVjdEV2ZW50UGx1Z2luc0J5TmFtZTogRXZlbnRQbHVnaW5SZWdpc3RyeS5pbmplY3RFdmVudFBsdWdpbnNCeU5hbWVcblx0XG5cdCAgfSxcblx0XG5cdCAgZXZlbnROYW1lRGlzcGF0Y2hDb25maWdzOiBFdmVudFBsdWdpblJlZ2lzdHJ5LmV2ZW50TmFtZURpc3BhdGNoQ29uZmlncyxcblx0XG5cdCAgcmVnaXN0cmF0aW9uTmFtZU1vZHVsZXM6IEV2ZW50UGx1Z2luUmVnaXN0cnkucmVnaXN0cmF0aW9uTmFtZU1vZHVsZXMsXG5cdFxuXHQgIC8qKlxuXHQgICAqIFN0b3JlcyBgbGlzdGVuZXJgIGF0IGBsaXN0ZW5lckJhbmtbcmVnaXN0cmF0aW9uTmFtZV1baWRdYC4gSXMgaWRlbXBvdGVudC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBJRCBvZiB0aGUgRE9NIGVsZW1lbnQuXG5cdCAgICogQHBhcmFtIHtzdHJpbmd9IHJlZ2lzdHJhdGlvbk5hbWUgTmFtZSBvZiBsaXN0ZW5lciAoZS5nLiBgb25DbGlja2ApLlxuXHQgICAqIEBwYXJhbSB7P2Z1bmN0aW9ufSBsaXN0ZW5lciBUaGUgY2FsbGJhY2sgdG8gc3RvcmUuXG5cdCAgICovXG5cdCAgcHV0TGlzdGVuZXI6IGZ1bmN0aW9uIChpZCwgcmVnaXN0cmF0aW9uTmFtZSwgbGlzdGVuZXIpIHtcblx0ICAgICEodHlwZW9mIGxpc3RlbmVyID09PSAnZnVuY3Rpb24nKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdFeHBlY3RlZCAlcyBsaXN0ZW5lciB0byBiZSBhIGZ1bmN0aW9uLCBpbnN0ZWFkIGdvdCB0eXBlICVzJywgcmVnaXN0cmF0aW9uTmFtZSwgdHlwZW9mIGxpc3RlbmVyKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdFxuXHQgICAgdmFyIGJhbmtGb3JSZWdpc3RyYXRpb25OYW1lID0gbGlzdGVuZXJCYW5rW3JlZ2lzdHJhdGlvbk5hbWVdIHx8IChsaXN0ZW5lckJhbmtbcmVnaXN0cmF0aW9uTmFtZV0gPSB7fSk7XG5cdCAgICBiYW5rRm9yUmVnaXN0cmF0aW9uTmFtZVtpZF0gPSBsaXN0ZW5lcjtcblx0XG5cdCAgICB2YXIgUGx1Z2luTW9kdWxlID0gRXZlbnRQbHVnaW5SZWdpc3RyeS5yZWdpc3RyYXRpb25OYW1lTW9kdWxlc1tyZWdpc3RyYXRpb25OYW1lXTtcblx0ICAgIGlmIChQbHVnaW5Nb2R1bGUgJiYgUGx1Z2luTW9kdWxlLmRpZFB1dExpc3RlbmVyKSB7XG5cdCAgICAgIFBsdWdpbk1vZHVsZS5kaWRQdXRMaXN0ZW5lcihpZCwgcmVnaXN0cmF0aW9uTmFtZSwgbGlzdGVuZXIpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBJRCBvZiB0aGUgRE9NIGVsZW1lbnQuXG5cdCAgICogQHBhcmFtIHtzdHJpbmd9IHJlZ2lzdHJhdGlvbk5hbWUgTmFtZSBvZiBsaXN0ZW5lciAoZS5nLiBgb25DbGlja2ApLlxuXHQgICAqIEByZXR1cm4gez9mdW5jdGlvbn0gVGhlIHN0b3JlZCBjYWxsYmFjay5cblx0ICAgKi9cblx0ICBnZXRMaXN0ZW5lcjogZnVuY3Rpb24gKGlkLCByZWdpc3RyYXRpb25OYW1lKSB7XG5cdCAgICB2YXIgYmFua0ZvclJlZ2lzdHJhdGlvbk5hbWUgPSBsaXN0ZW5lckJhbmtbcmVnaXN0cmF0aW9uTmFtZV07XG5cdCAgICByZXR1cm4gYmFua0ZvclJlZ2lzdHJhdGlvbk5hbWUgJiYgYmFua0ZvclJlZ2lzdHJhdGlvbk5hbWVbaWRdO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIERlbGV0ZXMgYSBsaXN0ZW5lciBmcm9tIHRoZSByZWdpc3RyYXRpb24gYmFuay5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBJRCBvZiB0aGUgRE9NIGVsZW1lbnQuXG5cdCAgICogQHBhcmFtIHtzdHJpbmd9IHJlZ2lzdHJhdGlvbk5hbWUgTmFtZSBvZiBsaXN0ZW5lciAoZS5nLiBgb25DbGlja2ApLlxuXHQgICAqL1xuXHQgIGRlbGV0ZUxpc3RlbmVyOiBmdW5jdGlvbiAoaWQsIHJlZ2lzdHJhdGlvbk5hbWUpIHtcblx0ICAgIHZhciBQbHVnaW5Nb2R1bGUgPSBFdmVudFBsdWdpblJlZ2lzdHJ5LnJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzW3JlZ2lzdHJhdGlvbk5hbWVdO1xuXHQgICAgaWYgKFBsdWdpbk1vZHVsZSAmJiBQbHVnaW5Nb2R1bGUud2lsbERlbGV0ZUxpc3RlbmVyKSB7XG5cdCAgICAgIFBsdWdpbk1vZHVsZS53aWxsRGVsZXRlTGlzdGVuZXIoaWQsIHJlZ2lzdHJhdGlvbk5hbWUpO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBiYW5rRm9yUmVnaXN0cmF0aW9uTmFtZSA9IGxpc3RlbmVyQmFua1tyZWdpc3RyYXRpb25OYW1lXTtcblx0ICAgIC8vIFRPRE86IFRoaXMgc2hvdWxkIG5ldmVyIGJlIG51bGwgLS0gd2hlbiBpcyBpdD9cblx0ICAgIGlmIChiYW5rRm9yUmVnaXN0cmF0aW9uTmFtZSkge1xuXHQgICAgICBkZWxldGUgYmFua0ZvclJlZ2lzdHJhdGlvbk5hbWVbaWRdO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIERlbGV0ZXMgYWxsIGxpc3RlbmVycyBmb3IgdGhlIERPTSBlbGVtZW50IHdpdGggdGhlIHN1cHBsaWVkIElELlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtzdHJpbmd9IGlkIElEIG9mIHRoZSBET00gZWxlbWVudC5cblx0ICAgKi9cblx0ICBkZWxldGVBbGxMaXN0ZW5lcnM6IGZ1bmN0aW9uIChpZCkge1xuXHQgICAgZm9yICh2YXIgcmVnaXN0cmF0aW9uTmFtZSBpbiBsaXN0ZW5lckJhbmspIHtcblx0ICAgICAgaWYgKCFsaXN0ZW5lckJhbmtbcmVnaXN0cmF0aW9uTmFtZV1baWRdKSB7XG5cdCAgICAgICAgY29udGludWU7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBQbHVnaW5Nb2R1bGUgPSBFdmVudFBsdWdpblJlZ2lzdHJ5LnJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzW3JlZ2lzdHJhdGlvbk5hbWVdO1xuXHQgICAgICBpZiAoUGx1Z2luTW9kdWxlICYmIFBsdWdpbk1vZHVsZS53aWxsRGVsZXRlTGlzdGVuZXIpIHtcblx0ICAgICAgICBQbHVnaW5Nb2R1bGUud2lsbERlbGV0ZUxpc3RlbmVyKGlkLCByZWdpc3RyYXRpb25OYW1lKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgZGVsZXRlIGxpc3RlbmVyQmFua1tyZWdpc3RyYXRpb25OYW1lXVtpZF07XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogQWxsb3dzIHJlZ2lzdGVyZWQgcGx1Z2lucyBhbiBvcHBvcnR1bml0eSB0byBleHRyYWN0IGV2ZW50cyBmcm9tIHRvcC1sZXZlbFxuXHQgICAqIG5hdGl2ZSBicm93c2VyIGV2ZW50cy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFR5cGUgUmVjb3JkIGZyb20gYEV2ZW50Q29uc3RhbnRzYC5cblx0ICAgKiBAcGFyYW0ge0RPTUV2ZW50VGFyZ2V0fSB0b3BMZXZlbFRhcmdldCBUaGUgbGlzdGVuaW5nIGNvbXBvbmVudCByb290IG5vZGUuXG5cdCAgICogQHBhcmFtIHtzdHJpbmd9IHRvcExldmVsVGFyZ2V0SUQgSUQgb2YgYHRvcExldmVsVGFyZ2V0YC5cblx0ICAgKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG5cdCAgICogQHJldHVybiB7Kn0gQW4gYWNjdW11bGF0aW9uIG9mIHN5bnRoZXRpYyBldmVudHMuXG5cdCAgICogQGludGVybmFsXG5cdCAgICovXG5cdCAgZXh0cmFjdEV2ZW50czogZnVuY3Rpb24gKHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuXHQgICAgdmFyIGV2ZW50cztcblx0ICAgIHZhciBwbHVnaW5zID0gRXZlbnRQbHVnaW5SZWdpc3RyeS5wbHVnaW5zO1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwbHVnaW5zLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIC8vIE5vdCBldmVyeSBwbHVnaW4gaW4gdGhlIG9yZGVyaW5nIG1heSBiZSBsb2FkZWQgYXQgcnVudGltZS5cblx0ICAgICAgdmFyIHBvc3NpYmxlUGx1Z2luID0gcGx1Z2luc1tpXTtcblx0ICAgICAgaWYgKHBvc3NpYmxlUGx1Z2luKSB7XG5cdCAgICAgICAgdmFyIGV4dHJhY3RlZEV2ZW50cyA9IHBvc3NpYmxlUGx1Z2luLmV4dHJhY3RFdmVudHModG9wTGV2ZWxUeXBlLCB0b3BMZXZlbFRhcmdldCwgdG9wTGV2ZWxUYXJnZXRJRCwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcblx0ICAgICAgICBpZiAoZXh0cmFjdGVkRXZlbnRzKSB7XG5cdCAgICAgICAgICBldmVudHMgPSBhY2N1bXVsYXRlSW50byhldmVudHMsIGV4dHJhY3RlZEV2ZW50cyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZXZlbnRzO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIEVucXVldWVzIGEgc3ludGhldGljIGV2ZW50IHRoYXQgc2hvdWxkIGJlIGRpc3BhdGNoZWQgd2hlblxuXHQgICAqIGBwcm9jZXNzRXZlbnRRdWV1ZWAgaXMgaW52b2tlZC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Kn0gZXZlbnRzIEFuIGFjY3VtdWxhdGlvbiBvZiBzeW50aGV0aWMgZXZlbnRzLlxuXHQgICAqIEBpbnRlcm5hbFxuXHQgICAqL1xuXHQgIGVucXVldWVFdmVudHM6IGZ1bmN0aW9uIChldmVudHMpIHtcblx0ICAgIGlmIChldmVudHMpIHtcblx0ICAgICAgZXZlbnRRdWV1ZSA9IGFjY3VtdWxhdGVJbnRvKGV2ZW50UXVldWUsIGV2ZW50cyk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogRGlzcGF0Y2hlcyBhbGwgc3ludGhldGljIGV2ZW50cyBvbiB0aGUgZXZlbnQgcXVldWUuXG5cdCAgICpcblx0ICAgKiBAaW50ZXJuYWxcblx0ICAgKi9cblx0ICBwcm9jZXNzRXZlbnRRdWV1ZTogZnVuY3Rpb24gKHNpbXVsYXRlZCkge1xuXHQgICAgLy8gU2V0IGBldmVudFF1ZXVlYCB0byBudWxsIGJlZm9yZSBwcm9jZXNzaW5nIGl0IHNvIHRoYXQgd2UgY2FuIHRlbGwgaWYgbW9yZVxuXHQgICAgLy8gZXZlbnRzIGdldCBlbnF1ZXVlZCB3aGlsZSBwcm9jZXNzaW5nLlxuXHQgICAgdmFyIHByb2Nlc3NpbmdFdmVudFF1ZXVlID0gZXZlbnRRdWV1ZTtcblx0ICAgIGV2ZW50UXVldWUgPSBudWxsO1xuXHQgICAgaWYgKHNpbXVsYXRlZCkge1xuXHQgICAgICBmb3JFYWNoQWNjdW11bGF0ZWQocHJvY2Vzc2luZ0V2ZW50UXVldWUsIGV4ZWN1dGVEaXNwYXRjaGVzQW5kUmVsZWFzZVNpbXVsYXRlZCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBmb3JFYWNoQWNjdW11bGF0ZWQocHJvY2Vzc2luZ0V2ZW50UXVldWUsIGV4ZWN1dGVEaXNwYXRjaGVzQW5kUmVsZWFzZVRvcExldmVsKTtcblx0ICAgIH1cblx0ICAgICEhZXZlbnRRdWV1ZSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdwcm9jZXNzRXZlbnRRdWV1ZSgpOiBBZGRpdGlvbmFsIGV2ZW50cyB3ZXJlIGVucXVldWVkIHdoaWxlIHByb2Nlc3NpbmcgJyArICdhbiBldmVudCBxdWV1ZS4gU3VwcG9ydCBmb3IgdGhpcyBoYXMgbm90IHlldCBiZWVuIGltcGxlbWVudGVkLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0ICAgIC8vIFRoaXMgd291bGQgYmUgYSBnb29kIHRpbWUgdG8gcmV0aHJvdyBpZiBhbnkgb2YgdGhlIGV2ZW50IGhhbmRsZXJzIHRocmV3LlxuXHQgICAgUmVhY3RFcnJvclV0aWxzLnJldGhyb3dDYXVnaHRFcnJvcigpO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFRoZXNlIGFyZSBuZWVkZWQgZm9yIHRlc3RzIG9ubHkuIERvIG5vdCB1c2UhXG5cdCAgICovXG5cdCAgX19wdXJnZTogZnVuY3Rpb24gKCkge1xuXHQgICAgbGlzdGVuZXJCYW5rID0ge307XG5cdCAgfSxcblx0XG5cdCAgX19nZXRMaXN0ZW5lckJhbms6IGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiBsaXN0ZW5lckJhbms7XG5cdCAgfVxuXHRcblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gRXZlbnRQbHVnaW5IdWI7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpKSlcblxuLyoqKi8gfSksXG4vKiAzMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzKSB7LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBFdmVudFBsdWdpblJlZ2lzdHJ5XG5cdCAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGludmFyaWFudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHRcblx0LyoqXG5cdCAqIEluamVjdGFibGUgb3JkZXJpbmcgb2YgZXZlbnQgcGx1Z2lucy5cblx0ICovXG5cdHZhciBFdmVudFBsdWdpbk9yZGVyID0gbnVsbDtcblx0XG5cdC8qKlxuXHQgKiBJbmplY3RhYmxlIG1hcHBpbmcgZnJvbSBuYW1lcyB0byBldmVudCBwbHVnaW4gbW9kdWxlcy5cblx0ICovXG5cdHZhciBuYW1lc1RvUGx1Z2lucyA9IHt9O1xuXHRcblx0LyoqXG5cdCAqIFJlY29tcHV0ZXMgdGhlIHBsdWdpbiBsaXN0IHVzaW5nIHRoZSBpbmplY3RlZCBwbHVnaW5zIGFuZCBwbHVnaW4gb3JkZXJpbmcuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHRmdW5jdGlvbiByZWNvbXB1dGVQbHVnaW5PcmRlcmluZygpIHtcblx0ICBpZiAoIUV2ZW50UGx1Z2luT3JkZXIpIHtcblx0ICAgIC8vIFdhaXQgdW50aWwgYW4gYEV2ZW50UGx1Z2luT3JkZXJgIGlzIGluamVjdGVkLlxuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICBmb3IgKHZhciBwbHVnaW5OYW1lIGluIG5hbWVzVG9QbHVnaW5zKSB7XG5cdCAgICB2YXIgUGx1Z2luTW9kdWxlID0gbmFtZXNUb1BsdWdpbnNbcGx1Z2luTmFtZV07XG5cdCAgICB2YXIgcGx1Z2luSW5kZXggPSBFdmVudFBsdWdpbk9yZGVyLmluZGV4T2YocGx1Z2luTmFtZSk7XG5cdCAgICAhKHBsdWdpbkluZGV4ID4gLTEpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0V2ZW50UGx1Z2luUmVnaXN0cnk6IENhbm5vdCBpbmplY3QgZXZlbnQgcGx1Z2lucyB0aGF0IGRvIG5vdCBleGlzdCBpbiAnICsgJ3RoZSBwbHVnaW4gb3JkZXJpbmcsIGAlc2AuJywgcGx1Z2luTmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXHQgICAgaWYgKEV2ZW50UGx1Z2luUmVnaXN0cnkucGx1Z2luc1twbHVnaW5JbmRleF0pIHtcblx0ICAgICAgY29udGludWU7XG5cdCAgICB9XG5cdCAgICAhUGx1Z2luTW9kdWxlLmV4dHJhY3RFdmVudHMgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRXZlbnRQbHVnaW5SZWdpc3RyeTogRXZlbnQgcGx1Z2lucyBtdXN0IGltcGxlbWVudCBhbiBgZXh0cmFjdEV2ZW50c2AgJyArICdtZXRob2QsIGJ1dCBgJXNgIGRvZXMgbm90LicsIHBsdWdpbk5hbWUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0ICAgIEV2ZW50UGx1Z2luUmVnaXN0cnkucGx1Z2luc1twbHVnaW5JbmRleF0gPSBQbHVnaW5Nb2R1bGU7XG5cdCAgICB2YXIgcHVibGlzaGVkRXZlbnRzID0gUGx1Z2luTW9kdWxlLmV2ZW50VHlwZXM7XG5cdCAgICBmb3IgKHZhciBldmVudE5hbWUgaW4gcHVibGlzaGVkRXZlbnRzKSB7XG5cdCAgICAgICFwdWJsaXNoRXZlbnRGb3JQbHVnaW4ocHVibGlzaGVkRXZlbnRzW2V2ZW50TmFtZV0sIFBsdWdpbk1vZHVsZSwgZXZlbnROYW1lKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdFdmVudFBsdWdpblJlZ2lzdHJ5OiBGYWlsZWQgdG8gcHVibGlzaCBldmVudCBgJXNgIGZvciBwbHVnaW4gYCVzYC4nLCBldmVudE5hbWUsIHBsdWdpbk5hbWUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQdWJsaXNoZXMgYW4gZXZlbnQgc28gdGhhdCBpdCBjYW4gYmUgZGlzcGF0Y2hlZCBieSB0aGUgc3VwcGxpZWQgcGx1Z2luLlxuXHQgKlxuXHQgKiBAcGFyYW0ge29iamVjdH0gZGlzcGF0Y2hDb25maWcgRGlzcGF0Y2ggY29uZmlndXJhdGlvbiBmb3IgdGhlIGV2ZW50LlxuXHQgKiBAcGFyYW0ge29iamVjdH0gUGx1Z2luTW9kdWxlIFBsdWdpbiBwdWJsaXNoaW5nIHRoZSBldmVudC5cblx0ICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZXZlbnQgd2FzIHN1Y2Nlc3NmdWxseSBwdWJsaXNoZWQuXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHRmdW5jdGlvbiBwdWJsaXNoRXZlbnRGb3JQbHVnaW4oZGlzcGF0Y2hDb25maWcsIFBsdWdpbk1vZHVsZSwgZXZlbnROYW1lKSB7XG5cdCAgISFFdmVudFBsdWdpblJlZ2lzdHJ5LmV2ZW50TmFtZURpc3BhdGNoQ29uZmlncy5oYXNPd25Qcm9wZXJ0eShldmVudE5hbWUpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0V2ZW50UGx1Z2luSHViOiBNb3JlIHRoYW4gb25lIHBsdWdpbiBhdHRlbXB0ZWQgdG8gcHVibGlzaCB0aGUgc2FtZSAnICsgJ2V2ZW50IG5hbWUsIGAlc2AuJywgZXZlbnROYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdCAgRXZlbnRQbHVnaW5SZWdpc3RyeS5ldmVudE5hbWVEaXNwYXRjaENvbmZpZ3NbZXZlbnROYW1lXSA9IGRpc3BhdGNoQ29uZmlnO1xuXHRcblx0ICB2YXIgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXMgPSBkaXNwYXRjaENvbmZpZy5waGFzZWRSZWdpc3RyYXRpb25OYW1lcztcblx0ICBpZiAocGhhc2VkUmVnaXN0cmF0aW9uTmFtZXMpIHtcblx0ICAgIGZvciAodmFyIHBoYXNlTmFtZSBpbiBwaGFzZWRSZWdpc3RyYXRpb25OYW1lcykge1xuXHQgICAgICBpZiAocGhhc2VkUmVnaXN0cmF0aW9uTmFtZXMuaGFzT3duUHJvcGVydHkocGhhc2VOYW1lKSkge1xuXHQgICAgICAgIHZhciBwaGFzZWRSZWdpc3RyYXRpb25OYW1lID0gcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXNbcGhhc2VOYW1lXTtcblx0ICAgICAgICBwdWJsaXNoUmVnaXN0cmF0aW9uTmFtZShwaGFzZWRSZWdpc3RyYXRpb25OYW1lLCBQbHVnaW5Nb2R1bGUsIGV2ZW50TmFtZSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiB0cnVlO1xuXHQgIH0gZWxzZSBpZiAoZGlzcGF0Y2hDb25maWcucmVnaXN0cmF0aW9uTmFtZSkge1xuXHQgICAgcHVibGlzaFJlZ2lzdHJhdGlvbk5hbWUoZGlzcGF0Y2hDb25maWcucmVnaXN0cmF0aW9uTmFtZSwgUGx1Z2luTW9kdWxlLCBldmVudE5hbWUpO1xuXHQgICAgcmV0dXJuIHRydWU7XG5cdCAgfVxuXHQgIHJldHVybiBmYWxzZTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFB1Ymxpc2hlcyBhIHJlZ2lzdHJhdGlvbiBuYW1lIHRoYXQgaXMgdXNlZCB0byBpZGVudGlmeSBkaXNwYXRjaGVkIGV2ZW50cyBhbmRcblx0ICogY2FuIGJlIHVzZWQgd2l0aCBgRXZlbnRQbHVnaW5IdWIucHV0TGlzdGVuZXJgIHRvIHJlZ2lzdGVyIGxpc3RlbmVycy5cblx0ICpcblx0ICogQHBhcmFtIHtzdHJpbmd9IHJlZ2lzdHJhdGlvbk5hbWUgUmVnaXN0cmF0aW9uIG5hbWUgdG8gYWRkLlxuXHQgKiBAcGFyYW0ge29iamVjdH0gUGx1Z2luTW9kdWxlIFBsdWdpbiBwdWJsaXNoaW5nIHRoZSBldmVudC5cblx0ICogQHByaXZhdGVcblx0ICovXG5cdGZ1bmN0aW9uIHB1Ymxpc2hSZWdpc3RyYXRpb25OYW1lKHJlZ2lzdHJhdGlvbk5hbWUsIFBsdWdpbk1vZHVsZSwgZXZlbnROYW1lKSB7XG5cdCAgISFFdmVudFBsdWdpblJlZ2lzdHJ5LnJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzW3JlZ2lzdHJhdGlvbk5hbWVdID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0V2ZW50UGx1Z2luSHViOiBNb3JlIHRoYW4gb25lIHBsdWdpbiBhdHRlbXB0ZWQgdG8gcHVibGlzaCB0aGUgc2FtZSAnICsgJ3JlZ2lzdHJhdGlvbiBuYW1lLCBgJXNgLicsIHJlZ2lzdHJhdGlvbk5hbWUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0ICBFdmVudFBsdWdpblJlZ2lzdHJ5LnJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzW3JlZ2lzdHJhdGlvbk5hbWVdID0gUGx1Z2luTW9kdWxlO1xuXHQgIEV2ZW50UGx1Z2luUmVnaXN0cnkucmVnaXN0cmF0aW9uTmFtZURlcGVuZGVuY2llc1tyZWdpc3RyYXRpb25OYW1lXSA9IFBsdWdpbk1vZHVsZS5ldmVudFR5cGVzW2V2ZW50TmFtZV0uZGVwZW5kZW5jaWVzO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUmVnaXN0ZXJzIHBsdWdpbnMgc28gdGhhdCB0aGV5IGNhbiBleHRyYWN0IGFuZCBkaXNwYXRjaCBldmVudHMuXG5cdCAqXG5cdCAqIEBzZWUge0V2ZW50UGx1Z2luSHVifVxuXHQgKi9cblx0dmFyIEV2ZW50UGx1Z2luUmVnaXN0cnkgPSB7XG5cdFxuXHQgIC8qKlxuXHQgICAqIE9yZGVyZWQgbGlzdCBvZiBpbmplY3RlZCBwbHVnaW5zLlxuXHQgICAqL1xuXHQgIHBsdWdpbnM6IFtdLFxuXHRcblx0ICAvKipcblx0ICAgKiBNYXBwaW5nIGZyb20gZXZlbnQgbmFtZSB0byBkaXNwYXRjaCBjb25maWdcblx0ICAgKi9cblx0ICBldmVudE5hbWVEaXNwYXRjaENvbmZpZ3M6IHt9LFxuXHRcblx0ICAvKipcblx0ICAgKiBNYXBwaW5nIGZyb20gcmVnaXN0cmF0aW9uIG5hbWUgdG8gcGx1Z2luIG1vZHVsZVxuXHQgICAqL1xuXHQgIHJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzOiB7fSxcblx0XG5cdCAgLyoqXG5cdCAgICogTWFwcGluZyBmcm9tIHJlZ2lzdHJhdGlvbiBuYW1lIHRvIGV2ZW50IG5hbWVcblx0ICAgKi9cblx0ICByZWdpc3RyYXRpb25OYW1lRGVwZW5kZW5jaWVzOiB7fSxcblx0XG5cdCAgLyoqXG5cdCAgICogSW5qZWN0cyBhbiBvcmRlcmluZyBvZiBwbHVnaW5zIChieSBwbHVnaW4gbmFtZSkuIFRoaXMgYWxsb3dzIHRoZSBvcmRlcmluZ1xuXHQgICAqIHRvIGJlIGRlY291cGxlZCBmcm9tIGluamVjdGlvbiBvZiB0aGUgYWN0dWFsIHBsdWdpbnMgc28gdGhhdCBvcmRlcmluZyBpc1xuXHQgICAqIGFsd2F5cyBkZXRlcm1pbmlzdGljIHJlZ2FyZGxlc3Mgb2YgcGFja2FnaW5nLCBvbi10aGUtZmx5IGluamVjdGlvbiwgZXRjLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHthcnJheX0gSW5qZWN0ZWRFdmVudFBsdWdpbk9yZGVyXG5cdCAgICogQGludGVybmFsXG5cdCAgICogQHNlZSB7RXZlbnRQbHVnaW5IdWIuaW5qZWN0aW9uLmluamVjdEV2ZW50UGx1Z2luT3JkZXJ9XG5cdCAgICovXG5cdCAgaW5qZWN0RXZlbnRQbHVnaW5PcmRlcjogZnVuY3Rpb24gKEluamVjdGVkRXZlbnRQbHVnaW5PcmRlcikge1xuXHQgICAgISFFdmVudFBsdWdpbk9yZGVyID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0V2ZW50UGx1Z2luUmVnaXN0cnk6IENhbm5vdCBpbmplY3QgZXZlbnQgcGx1Z2luIG9yZGVyaW5nIG1vcmUgdGhhbiAnICsgJ29uY2UuIFlvdSBhcmUgbGlrZWx5IHRyeWluZyB0byBsb2FkIG1vcmUgdGhhbiBvbmUgY29weSBvZiBSZWFjdC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdCAgICAvLyBDbG9uZSB0aGUgb3JkZXJpbmcgc28gaXQgY2Fubm90IGJlIGR5bmFtaWNhbGx5IG11dGF0ZWQuXG5cdCAgICBFdmVudFBsdWdpbk9yZGVyID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoSW5qZWN0ZWRFdmVudFBsdWdpbk9yZGVyKTtcblx0ICAgIHJlY29tcHV0ZVBsdWdpbk9yZGVyaW5nKCk7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogSW5qZWN0cyBwbHVnaW5zIHRvIGJlIHVzZWQgYnkgYEV2ZW50UGx1Z2luSHViYC4gVGhlIHBsdWdpbiBuYW1lcyBtdXN0IGJlXG5cdCAgICogaW4gdGhlIG9yZGVyaW5nIGluamVjdGVkIGJ5IGBpbmplY3RFdmVudFBsdWdpbk9yZGVyYC5cblx0ICAgKlxuXHQgICAqIFBsdWdpbnMgY2FuIGJlIGluamVjdGVkIGFzIHBhcnQgb2YgcGFnZSBpbml0aWFsaXphdGlvbiBvciBvbi10aGUtZmx5LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtvYmplY3R9IGluamVjdGVkTmFtZXNUb1BsdWdpbnMgTWFwIGZyb20gbmFtZXMgdG8gcGx1Z2luIG1vZHVsZXMuXG5cdCAgICogQGludGVybmFsXG5cdCAgICogQHNlZSB7RXZlbnRQbHVnaW5IdWIuaW5qZWN0aW9uLmluamVjdEV2ZW50UGx1Z2luc0J5TmFtZX1cblx0ICAgKi9cblx0ICBpbmplY3RFdmVudFBsdWdpbnNCeU5hbWU6IGZ1bmN0aW9uIChpbmplY3RlZE5hbWVzVG9QbHVnaW5zKSB7XG5cdCAgICB2YXIgaXNPcmRlcmluZ0RpcnR5ID0gZmFsc2U7XG5cdCAgICBmb3IgKHZhciBwbHVnaW5OYW1lIGluIGluamVjdGVkTmFtZXNUb1BsdWdpbnMpIHtcblx0ICAgICAgaWYgKCFpbmplY3RlZE5hbWVzVG9QbHVnaW5zLmhhc093blByb3BlcnR5KHBsdWdpbk5hbWUpKSB7XG5cdCAgICAgICAgY29udGludWU7XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIFBsdWdpbk1vZHVsZSA9IGluamVjdGVkTmFtZXNUb1BsdWdpbnNbcGx1Z2luTmFtZV07XG5cdCAgICAgIGlmICghbmFtZXNUb1BsdWdpbnMuaGFzT3duUHJvcGVydHkocGx1Z2luTmFtZSkgfHwgbmFtZXNUb1BsdWdpbnNbcGx1Z2luTmFtZV0gIT09IFBsdWdpbk1vZHVsZSkge1xuXHQgICAgICAgICEhbmFtZXNUb1BsdWdpbnNbcGx1Z2luTmFtZV0gPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRXZlbnRQbHVnaW5SZWdpc3RyeTogQ2Fubm90IGluamVjdCB0d28gZGlmZmVyZW50IGV2ZW50IHBsdWdpbnMgJyArICd1c2luZyB0aGUgc2FtZSBuYW1lLCBgJXNgLicsIHBsdWdpbk5hbWUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0ICAgICAgICBuYW1lc1RvUGx1Z2luc1twbHVnaW5OYW1lXSA9IFBsdWdpbk1vZHVsZTtcblx0ICAgICAgICBpc09yZGVyaW5nRGlydHkgPSB0cnVlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBpZiAoaXNPcmRlcmluZ0RpcnR5KSB7XG5cdCAgICAgIHJlY29tcHV0ZVBsdWdpbk9yZGVyaW5nKCk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogTG9va3MgdXAgdGhlIHBsdWdpbiBmb3IgdGhlIHN1cHBsaWVkIGV2ZW50LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtvYmplY3R9IGV2ZW50IEEgc3ludGhldGljIGV2ZW50LlxuXHQgICAqIEByZXR1cm4gez9vYmplY3R9IFRoZSBwbHVnaW4gdGhhdCBjcmVhdGVkIHRoZSBzdXBwbGllZCBldmVudC5cblx0ICAgKiBAaW50ZXJuYWxcblx0ICAgKi9cblx0ICBnZXRQbHVnaW5Nb2R1bGVGb3JFdmVudDogZnVuY3Rpb24gKGV2ZW50KSB7XG5cdCAgICB2YXIgZGlzcGF0Y2hDb25maWcgPSBldmVudC5kaXNwYXRjaENvbmZpZztcblx0ICAgIGlmIChkaXNwYXRjaENvbmZpZy5yZWdpc3RyYXRpb25OYW1lKSB7XG5cdCAgICAgIHJldHVybiBFdmVudFBsdWdpblJlZ2lzdHJ5LnJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzW2Rpc3BhdGNoQ29uZmlnLnJlZ2lzdHJhdGlvbk5hbWVdIHx8IG51bGw7XG5cdCAgICB9XG5cdCAgICBmb3IgKHZhciBwaGFzZSBpbiBkaXNwYXRjaENvbmZpZy5waGFzZWRSZWdpc3RyYXRpb25OYW1lcykge1xuXHQgICAgICBpZiAoIWRpc3BhdGNoQ29uZmlnLnBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzLmhhc093blByb3BlcnR5KHBoYXNlKSkge1xuXHQgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBQbHVnaW5Nb2R1bGUgPSBFdmVudFBsdWdpblJlZ2lzdHJ5LnJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzW2Rpc3BhdGNoQ29uZmlnLnBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzW3BoYXNlXV07XG5cdCAgICAgIGlmIChQbHVnaW5Nb2R1bGUpIHtcblx0ICAgICAgICByZXR1cm4gUGx1Z2luTW9kdWxlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gbnVsbDtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBFeHBvc2VkIGZvciB1bml0IHRlc3RpbmcuXG5cdCAgICogQHByaXZhdGVcblx0ICAgKi9cblx0ICBfcmVzZXRFdmVudFBsdWdpbnM6IGZ1bmN0aW9uICgpIHtcblx0ICAgIEV2ZW50UGx1Z2luT3JkZXIgPSBudWxsO1xuXHQgICAgZm9yICh2YXIgcGx1Z2luTmFtZSBpbiBuYW1lc1RvUGx1Z2lucykge1xuXHQgICAgICBpZiAobmFtZXNUb1BsdWdpbnMuaGFzT3duUHJvcGVydHkocGx1Z2luTmFtZSkpIHtcblx0ICAgICAgICBkZWxldGUgbmFtZXNUb1BsdWdpbnNbcGx1Z2luTmFtZV07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIEV2ZW50UGx1Z2luUmVnaXN0cnkucGx1Z2lucy5sZW5ndGggPSAwO1xuXHRcblx0ICAgIHZhciBldmVudE5hbWVEaXNwYXRjaENvbmZpZ3MgPSBFdmVudFBsdWdpblJlZ2lzdHJ5LmV2ZW50TmFtZURpc3BhdGNoQ29uZmlncztcblx0ICAgIGZvciAodmFyIGV2ZW50TmFtZSBpbiBldmVudE5hbWVEaXNwYXRjaENvbmZpZ3MpIHtcblx0ICAgICAgaWYgKGV2ZW50TmFtZURpc3BhdGNoQ29uZmlncy5oYXNPd25Qcm9wZXJ0eShldmVudE5hbWUpKSB7XG5cdCAgICAgICAgZGVsZXRlIGV2ZW50TmFtZURpc3BhdGNoQ29uZmlnc1tldmVudE5hbWVdO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIHJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzID0gRXZlbnRQbHVnaW5SZWdpc3RyeS5yZWdpc3RyYXRpb25OYW1lTW9kdWxlcztcblx0ICAgIGZvciAodmFyIHJlZ2lzdHJhdGlvbk5hbWUgaW4gcmVnaXN0cmF0aW9uTmFtZU1vZHVsZXMpIHtcblx0ICAgICAgaWYgKHJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzLmhhc093blByb3BlcnR5KHJlZ2lzdHJhdGlvbk5hbWUpKSB7XG5cdCAgICAgICAgZGVsZXRlIHJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzW3JlZ2lzdHJhdGlvbk5hbWVdO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gRXZlbnRQbHVnaW5SZWdpc3RyeTtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oNCkpKVxuXG4vKioqLyB9KSxcbi8qIDMzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MpIHsvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIEV2ZW50UGx1Z2luVXRpbHNcblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgRXZlbnRDb25zdGFudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKTtcblx0dmFyIFJlYWN0RXJyb3JVdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMzQpO1xuXHRcblx0dmFyIGludmFyaWFudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHR2YXIgd2FybmluZyA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHRcblx0LyoqXG5cdCAqIEluamVjdGVkIGRlcGVuZGVuY2llczpcblx0ICovXG5cdFxuXHQvKipcblx0ICogLSBgTW91bnRgOiBbcmVxdWlyZWRdIE1vZHVsZSB0aGF0IGNhbiBjb252ZXJ0IGJldHdlZW4gUmVhY3QgZG9tIElEcyBhbmRcblx0ICogICBhY3R1YWwgbm9kZSByZWZlcmVuY2VzLlxuXHQgKi9cblx0dmFyIGluamVjdGlvbiA9IHtcblx0ICBNb3VudDogbnVsbCxcblx0ICBpbmplY3RNb3VudDogZnVuY3Rpb24gKEluamVjdGVkTW91bnQpIHtcblx0ICAgIGluamVjdGlvbi5Nb3VudCA9IEluamVjdGVkTW91bnQ7XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhJbmplY3RlZE1vdW50ICYmIEluamVjdGVkTW91bnQuZ2V0Tm9kZSAmJiBJbmplY3RlZE1vdW50LmdldElELCAnRXZlbnRQbHVnaW5VdGlscy5pbmplY3Rpb24uaW5qZWN0TW91bnQoLi4uKTogSW5qZWN0ZWQgTW91bnQgJyArICdtb2R1bGUgaXMgbWlzc2luZyBnZXROb2RlIG9yIGdldElELicpIDogdW5kZWZpbmVkO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdHZhciB0b3BMZXZlbFR5cGVzID0gRXZlbnRDb25zdGFudHMudG9wTGV2ZWxUeXBlcztcblx0XG5cdGZ1bmN0aW9uIGlzRW5kaXNoKHRvcExldmVsVHlwZSkge1xuXHQgIHJldHVybiB0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wTW91c2VVcCB8fCB0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wVG91Y2hFbmQgfHwgdG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcFRvdWNoQ2FuY2VsO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc01vdmVpc2godG9wTGV2ZWxUeXBlKSB7XG5cdCAgcmV0dXJuIHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BNb3VzZU1vdmUgfHwgdG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcFRvdWNoTW92ZTtcblx0fVxuXHRmdW5jdGlvbiBpc1N0YXJ0aXNoKHRvcExldmVsVHlwZSkge1xuXHQgIHJldHVybiB0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wTW91c2VEb3duIHx8IHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BUb3VjaFN0YXJ0O1xuXHR9XG5cdFxuXHR2YXIgdmFsaWRhdGVFdmVudERpc3BhdGNoZXM7XG5cdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgdmFsaWRhdGVFdmVudERpc3BhdGNoZXMgPSBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgIHZhciBkaXNwYXRjaExpc3RlbmVycyA9IGV2ZW50Ll9kaXNwYXRjaExpc3RlbmVycztcblx0ICAgIHZhciBkaXNwYXRjaElEcyA9IGV2ZW50Ll9kaXNwYXRjaElEcztcblx0XG5cdCAgICB2YXIgbGlzdGVuZXJzSXNBcnIgPSBBcnJheS5pc0FycmF5KGRpc3BhdGNoTGlzdGVuZXJzKTtcblx0ICAgIHZhciBpZHNJc0FyciA9IEFycmF5LmlzQXJyYXkoZGlzcGF0Y2hJRHMpO1xuXHQgICAgdmFyIElEc0xlbiA9IGlkc0lzQXJyID8gZGlzcGF0Y2hJRHMubGVuZ3RoIDogZGlzcGF0Y2hJRHMgPyAxIDogMDtcblx0ICAgIHZhciBsaXN0ZW5lcnNMZW4gPSBsaXN0ZW5lcnNJc0FyciA/IGRpc3BhdGNoTGlzdGVuZXJzLmxlbmd0aCA6IGRpc3BhdGNoTGlzdGVuZXJzID8gMSA6IDA7XG5cdFxuXHQgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoaWRzSXNBcnIgPT09IGxpc3RlbmVyc0lzQXJyICYmIElEc0xlbiA9PT0gbGlzdGVuZXJzTGVuLCAnRXZlbnRQbHVnaW5VdGlsczogSW52YWxpZCBgZXZlbnRgLicpIDogdW5kZWZpbmVkO1xuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBEaXNwYXRjaCB0aGUgZXZlbnQgdG8gdGhlIGxpc3RlbmVyLlxuXHQgKiBAcGFyYW0ge1N5bnRoZXRpY0V2ZW50fSBldmVudCBTeW50aGV0aWNFdmVudCB0byBoYW5kbGVcblx0ICogQHBhcmFtIHtib29sZWFufSBzaW11bGF0ZWQgSWYgdGhlIGV2ZW50IGlzIHNpbXVsYXRlZCAoY2hhbmdlcyBleG4gYmVoYXZpb3IpXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb259IGxpc3RlbmVyIEFwcGxpY2F0aW9uLWxldmVsIGNhbGxiYWNrXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBkb21JRCBET00gaWQgdG8gcGFzcyB0byB0aGUgY2FsbGJhY2suXG5cdCAqL1xuXHRmdW5jdGlvbiBleGVjdXRlRGlzcGF0Y2goZXZlbnQsIHNpbXVsYXRlZCwgbGlzdGVuZXIsIGRvbUlEKSB7XG5cdCAgdmFyIHR5cGUgPSBldmVudC50eXBlIHx8ICd1bmtub3duLWV2ZW50Jztcblx0ICBldmVudC5jdXJyZW50VGFyZ2V0ID0gaW5qZWN0aW9uLk1vdW50LmdldE5vZGUoZG9tSUQpO1xuXHQgIGlmIChzaW11bGF0ZWQpIHtcblx0ICAgIFJlYWN0RXJyb3JVdGlscy5pbnZva2VHdWFyZGVkQ2FsbGJhY2tXaXRoQ2F0Y2godHlwZSwgbGlzdGVuZXIsIGV2ZW50LCBkb21JRCk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIFJlYWN0RXJyb3JVdGlscy5pbnZva2VHdWFyZGVkQ2FsbGJhY2sodHlwZSwgbGlzdGVuZXIsIGV2ZW50LCBkb21JRCk7XG5cdCAgfVxuXHQgIGV2ZW50LmN1cnJlbnRUYXJnZXQgPSBudWxsO1xuXHR9XG5cdFxuXHQvKipcblx0ICogU3RhbmRhcmQvc2ltcGxlIGl0ZXJhdGlvbiB0aHJvdWdoIGFuIGV2ZW50J3MgY29sbGVjdGVkIGRpc3BhdGNoZXMuXG5cdCAqL1xuXHRmdW5jdGlvbiBleGVjdXRlRGlzcGF0Y2hlc0luT3JkZXIoZXZlbnQsIHNpbXVsYXRlZCkge1xuXHQgIHZhciBkaXNwYXRjaExpc3RlbmVycyA9IGV2ZW50Ll9kaXNwYXRjaExpc3RlbmVycztcblx0ICB2YXIgZGlzcGF0Y2hJRHMgPSBldmVudC5fZGlzcGF0Y2hJRHM7XG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgIHZhbGlkYXRlRXZlbnREaXNwYXRjaGVzKGV2ZW50KTtcblx0ICB9XG5cdCAgaWYgKEFycmF5LmlzQXJyYXkoZGlzcGF0Y2hMaXN0ZW5lcnMpKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpc3BhdGNoTGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIGlmIChldmVudC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKSB7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIH1cblx0ICAgICAgLy8gTGlzdGVuZXJzIGFuZCBJRHMgYXJlIHR3byBwYXJhbGxlbCBhcnJheXMgdGhhdCBhcmUgYWx3YXlzIGluIHN5bmMuXG5cdCAgICAgIGV4ZWN1dGVEaXNwYXRjaChldmVudCwgc2ltdWxhdGVkLCBkaXNwYXRjaExpc3RlbmVyc1tpXSwgZGlzcGF0Y2hJRHNbaV0pO1xuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAoZGlzcGF0Y2hMaXN0ZW5lcnMpIHtcblx0ICAgIGV4ZWN1dGVEaXNwYXRjaChldmVudCwgc2ltdWxhdGVkLCBkaXNwYXRjaExpc3RlbmVycywgZGlzcGF0Y2hJRHMpO1xuXHQgIH1cblx0ICBldmVudC5fZGlzcGF0Y2hMaXN0ZW5lcnMgPSBudWxsO1xuXHQgIGV2ZW50Ll9kaXNwYXRjaElEcyA9IG51bGw7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBTdGFuZGFyZC9zaW1wbGUgaXRlcmF0aW9uIHRocm91Z2ggYW4gZXZlbnQncyBjb2xsZWN0ZWQgZGlzcGF0Y2hlcywgYnV0IHN0b3BzXG5cdCAqIGF0IHRoZSBmaXJzdCBkaXNwYXRjaCBleGVjdXRpb24gcmV0dXJuaW5nIHRydWUsIGFuZCByZXR1cm5zIHRoYXQgaWQuXG5cdCAqXG5cdCAqIEByZXR1cm4gez9zdHJpbmd9IGlkIG9mIHRoZSBmaXJzdCBkaXNwYXRjaCBleGVjdXRpb24gd2hvJ3MgbGlzdGVuZXIgcmV0dXJuc1xuXHQgKiB0cnVlLCBvciBudWxsIGlmIG5vIGxpc3RlbmVyIHJldHVybmVkIHRydWUuXG5cdCAqL1xuXHRmdW5jdGlvbiBleGVjdXRlRGlzcGF0Y2hlc0luT3JkZXJTdG9wQXRUcnVlSW1wbChldmVudCkge1xuXHQgIHZhciBkaXNwYXRjaExpc3RlbmVycyA9IGV2ZW50Ll9kaXNwYXRjaExpc3RlbmVycztcblx0ICB2YXIgZGlzcGF0Y2hJRHMgPSBldmVudC5fZGlzcGF0Y2hJRHM7XG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgIHZhbGlkYXRlRXZlbnREaXNwYXRjaGVzKGV2ZW50KTtcblx0ICB9XG5cdCAgaWYgKEFycmF5LmlzQXJyYXkoZGlzcGF0Y2hMaXN0ZW5lcnMpKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpc3BhdGNoTGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIGlmIChldmVudC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKSB7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIH1cblx0ICAgICAgLy8gTGlzdGVuZXJzIGFuZCBJRHMgYXJlIHR3byBwYXJhbGxlbCBhcnJheXMgdGhhdCBhcmUgYWx3YXlzIGluIHN5bmMuXG5cdCAgICAgIGlmIChkaXNwYXRjaExpc3RlbmVyc1tpXShldmVudCwgZGlzcGF0Y2hJRHNbaV0pKSB7XG5cdCAgICAgICAgcmV0dXJuIGRpc3BhdGNoSURzW2ldO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmIChkaXNwYXRjaExpc3RlbmVycykge1xuXHQgICAgaWYgKGRpc3BhdGNoTGlzdGVuZXJzKGV2ZW50LCBkaXNwYXRjaElEcykpIHtcblx0ICAgICAgcmV0dXJuIGRpc3BhdGNoSURzO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gbnVsbDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEBzZWUgZXhlY3V0ZURpc3BhdGNoZXNJbk9yZGVyU3RvcEF0VHJ1ZUltcGxcblx0ICovXG5cdGZ1bmN0aW9uIGV4ZWN1dGVEaXNwYXRjaGVzSW5PcmRlclN0b3BBdFRydWUoZXZlbnQpIHtcblx0ICB2YXIgcmV0ID0gZXhlY3V0ZURpc3BhdGNoZXNJbk9yZGVyU3RvcEF0VHJ1ZUltcGwoZXZlbnQpO1xuXHQgIGV2ZW50Ll9kaXNwYXRjaElEcyA9IG51bGw7XG5cdCAgZXZlbnQuX2Rpc3BhdGNoTGlzdGVuZXJzID0gbnVsbDtcblx0ICByZXR1cm4gcmV0O1xuXHR9XG5cdFxuXHQvKipcblx0ICogRXhlY3V0aW9uIG9mIGEgXCJkaXJlY3RcIiBkaXNwYXRjaCAtIHRoZXJlIG11c3QgYmUgYXQgbW9zdCBvbmUgZGlzcGF0Y2hcblx0ICogYWNjdW11bGF0ZWQgb24gdGhlIGV2ZW50IG9yIGl0IGlzIGNvbnNpZGVyZWQgYW4gZXJyb3IuIEl0IGRvZXNuJ3QgcmVhbGx5IG1ha2Vcblx0ICogc2Vuc2UgZm9yIGFuIGV2ZW50IHdpdGggbXVsdGlwbGUgZGlzcGF0Y2hlcyAoYnViYmxlZCkgdG8ga2VlcCB0cmFjayBvZiB0aGVcblx0ICogcmV0dXJuIHZhbHVlcyBhdCBlYWNoIGRpc3BhdGNoIGV4ZWN1dGlvbiwgYnV0IGl0IGRvZXMgdGVuZCB0byBtYWtlIHNlbnNlIHdoZW5cblx0ICogZGVhbGluZyB3aXRoIFwiZGlyZWN0XCIgZGlzcGF0Y2hlcy5cblx0ICpcblx0ICogQHJldHVybiB7Kn0gVGhlIHJldHVybiB2YWx1ZSBvZiBleGVjdXRpbmcgdGhlIHNpbmdsZSBkaXNwYXRjaC5cblx0ICovXG5cdGZ1bmN0aW9uIGV4ZWN1dGVEaXJlY3REaXNwYXRjaChldmVudCkge1xuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICB2YWxpZGF0ZUV2ZW50RGlzcGF0Y2hlcyhldmVudCk7XG5cdCAgfVxuXHQgIHZhciBkaXNwYXRjaExpc3RlbmVyID0gZXZlbnQuX2Rpc3BhdGNoTGlzdGVuZXJzO1xuXHQgIHZhciBkaXNwYXRjaElEID0gZXZlbnQuX2Rpc3BhdGNoSURzO1xuXHQgICEhQXJyYXkuaXNBcnJheShkaXNwYXRjaExpc3RlbmVyKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdleGVjdXRlRGlyZWN0RGlzcGF0Y2goLi4uKTogSW52YWxpZCBgZXZlbnRgLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0ICB2YXIgcmVzID0gZGlzcGF0Y2hMaXN0ZW5lciA/IGRpc3BhdGNoTGlzdGVuZXIoZXZlbnQsIGRpc3BhdGNoSUQpIDogbnVsbDtcblx0ICBldmVudC5fZGlzcGF0Y2hMaXN0ZW5lcnMgPSBudWxsO1xuXHQgIGV2ZW50Ll9kaXNwYXRjaElEcyA9IG51bGw7XG5cdCAgcmV0dXJuIHJlcztcblx0fVxuXHRcblx0LyoqXG5cdCAqIEBwYXJhbSB7U3ludGhldGljRXZlbnR9IGV2ZW50XG5cdCAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWZmIG51bWJlciBvZiBkaXNwYXRjaGVzIGFjY3VtdWxhdGVkIGlzIGdyZWF0ZXIgdGhhbiAwLlxuXHQgKi9cblx0ZnVuY3Rpb24gaGFzRGlzcGF0Y2hlcyhldmVudCkge1xuXHQgIHJldHVybiAhIWV2ZW50Ll9kaXNwYXRjaExpc3RlbmVycztcblx0fVxuXHRcblx0LyoqXG5cdCAqIEdlbmVyYWwgdXRpbGl0aWVzIHRoYXQgYXJlIHVzZWZ1bCBpbiBjcmVhdGluZyBjdXN0b20gRXZlbnQgUGx1Z2lucy5cblx0ICovXG5cdHZhciBFdmVudFBsdWdpblV0aWxzID0ge1xuXHQgIGlzRW5kaXNoOiBpc0VuZGlzaCxcblx0ICBpc01vdmVpc2g6IGlzTW92ZWlzaCxcblx0ICBpc1N0YXJ0aXNoOiBpc1N0YXJ0aXNoLFxuXHRcblx0ICBleGVjdXRlRGlyZWN0RGlzcGF0Y2g6IGV4ZWN1dGVEaXJlY3REaXNwYXRjaCxcblx0ICBleGVjdXRlRGlzcGF0Y2hlc0luT3JkZXI6IGV4ZWN1dGVEaXNwYXRjaGVzSW5PcmRlcixcblx0ICBleGVjdXRlRGlzcGF0Y2hlc0luT3JkZXJTdG9wQXRUcnVlOiBleGVjdXRlRGlzcGF0Y2hlc0luT3JkZXJTdG9wQXRUcnVlLFxuXHQgIGhhc0Rpc3BhdGNoZXM6IGhhc0Rpc3BhdGNoZXMsXG5cdFxuXHQgIGdldE5vZGU6IGZ1bmN0aW9uIChpZCkge1xuXHQgICAgcmV0dXJuIGluamVjdGlvbi5Nb3VudC5nZXROb2RlKGlkKTtcblx0ICB9LFxuXHQgIGdldElEOiBmdW5jdGlvbiAobm9kZSkge1xuXHQgICAgcmV0dXJuIGluamVjdGlvbi5Nb3VudC5nZXRJRChub2RlKTtcblx0ICB9LFxuXHRcblx0ICBpbmplY3Rpb246IGluamVjdGlvblxuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBFdmVudFBsdWdpblV0aWxzO1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg0KSkpXG5cbi8qKiovIH0pLFxuLyogMzQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgey8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RFcnJvclV0aWxzXG5cdCAqIEB0eXBlY2hlY2tzXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGNhdWdodEVycm9yID0gbnVsbDtcblx0XG5cdC8qKlxuXHQgKiBDYWxsIGEgZnVuY3Rpb24gd2hpbGUgZ3VhcmRpbmcgYWdhaW5zdCBlcnJvcnMgdGhhdCBoYXBwZW5zIHdpdGhpbiBpdC5cblx0ICpcblx0ICogQHBhcmFtIHs/U3RyaW5nfSBuYW1lIG9mIHRoZSBndWFyZCB0byB1c2UgZm9yIGxvZ2dpbmcgb3IgZGVidWdnaW5nXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGludm9rZVxuXHQgKiBAcGFyYW0geyp9IGEgRmlyc3QgYXJndW1lbnRcblx0ICogQHBhcmFtIHsqfSBiIFNlY29uZCBhcmd1bWVudFxuXHQgKi9cblx0ZnVuY3Rpb24gaW52b2tlR3VhcmRlZENhbGxiYWNrKG5hbWUsIGZ1bmMsIGEsIGIpIHtcblx0ICB0cnkge1xuXHQgICAgcmV0dXJuIGZ1bmMoYSwgYik7XG5cdCAgfSBjYXRjaCAoeCkge1xuXHQgICAgaWYgKGNhdWdodEVycm9yID09PSBudWxsKSB7XG5cdCAgICAgIGNhdWdodEVycm9yID0geDtcblx0ICAgIH1cblx0ICAgIHJldHVybiB1bmRlZmluZWQ7XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgUmVhY3RFcnJvclV0aWxzID0ge1xuXHQgIGludm9rZUd1YXJkZWRDYWxsYmFjazogaW52b2tlR3VhcmRlZENhbGxiYWNrLFxuXHRcblx0ICAvKipcblx0ICAgKiBJbnZva2VkIGJ5IFJlYWN0VGVzdFV0aWxzLlNpbXVsYXRlIHNvIHRoYXQgYW55IGVycm9ycyB0aHJvd24gYnkgdGhlIGV2ZW50XG5cdCAgICogaGFuZGxlciBhcmUgc3VyZSB0byBiZSByZXRocm93biBieSByZXRocm93Q2F1Z2h0RXJyb3IuXG5cdCAgICovXG5cdCAgaW52b2tlR3VhcmRlZENhbGxiYWNrV2l0aENhdGNoOiBpbnZva2VHdWFyZGVkQ2FsbGJhY2ssXG5cdFxuXHQgIC8qKlxuXHQgICAqIER1cmluZyBleGVjdXRpb24gb2YgZ3VhcmRlZCBmdW5jdGlvbnMgd2Ugd2lsbCBjYXB0dXJlIHRoZSBmaXJzdCBlcnJvciB3aGljaFxuXHQgICAqIHdlIHdpbGwgcmV0aHJvdyB0byBiZSBoYW5kbGVkIGJ5IHRoZSB0b3AgbGV2ZWwgZXJyb3IgaGFuZGxlci5cblx0ICAgKi9cblx0ICByZXRocm93Q2F1Z2h0RXJyb3I6IGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmIChjYXVnaHRFcnJvcikge1xuXHQgICAgICB2YXIgZXJyb3IgPSBjYXVnaHRFcnJvcjtcblx0ICAgICAgY2F1Z2h0RXJyb3IgPSBudWxsO1xuXHQgICAgICB0aHJvdyBlcnJvcjtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHRpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgIC8qKlxuXHQgICAqIFRvIGhlbHAgZGV2ZWxvcG1lbnQgd2UgY2FuIGdldCBiZXR0ZXIgZGV2dG9vbHMgaW50ZWdyYXRpb24gYnkgc2ltdWxhdGluZyBhXG5cdCAgICogcmVhbCBicm93c2VyIGV2ZW50LlxuXHQgICAqL1xuXHQgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygd2luZG93LmRpc3BhdGNoRXZlbnQgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgZG9jdW1lbnQuY3JlYXRlRXZlbnQgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgIHZhciBmYWtlTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3JlYWN0Jyk7XG5cdCAgICBSZWFjdEVycm9yVXRpbHMuaW52b2tlR3VhcmRlZENhbGxiYWNrID0gZnVuY3Rpb24gKG5hbWUsIGZ1bmMsIGEsIGIpIHtcblx0ICAgICAgdmFyIGJvdW5kRnVuYyA9IGZ1bmMuYmluZChudWxsLCBhLCBiKTtcblx0ICAgICAgdmFyIGV2dFR5cGUgPSAncmVhY3QtJyArIG5hbWU7XG5cdCAgICAgIGZha2VOb2RlLmFkZEV2ZW50TGlzdGVuZXIoZXZ0VHlwZSwgYm91bmRGdW5jLCBmYWxzZSk7XG5cdCAgICAgIHZhciBldnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnRXZlbnQnKTtcblx0ICAgICAgZXZ0LmluaXRFdmVudChldnRUeXBlLCBmYWxzZSwgZmFsc2UpO1xuXHQgICAgICBmYWtlTm9kZS5kaXNwYXRjaEV2ZW50KGV2dCk7XG5cdCAgICAgIGZha2VOb2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZ0VHlwZSwgYm91bmRGdW5jLCBmYWxzZSk7XG5cdCAgICB9O1xuXHQgIH1cblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBSZWFjdEVycm9yVXRpbHM7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpKSlcblxuLyoqKi8gfSksXG4vKiAzNSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzKSB7LyoqXG5cdCAqIENvcHlyaWdodCAyMDE0LTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBhY2N1bXVsYXRlSW50b1xuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBpbnZhcmlhbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblx0XG5cdC8qKlxuXHQgKlxuXHQgKiBBY2N1bXVsYXRlcyBpdGVtcyB0aGF0IG11c3Qgbm90IGJlIG51bGwgb3IgdW5kZWZpbmVkIGludG8gdGhlIGZpcnN0IG9uZS4gVGhpc1xuXHQgKiBpcyB1c2VkIHRvIGNvbnNlcnZlIG1lbW9yeSBieSBhdm9pZGluZyBhcnJheSBhbGxvY2F0aW9ucywgYW5kIHRodXMgc2FjcmlmaWNlc1xuXHQgKiBBUEkgY2xlYW5uZXNzLiBTaW5jZSBgY3VycmVudGAgY2FuIGJlIG51bGwgYmVmb3JlIGJlaW5nIHBhc3NlZCBpbiBhbmQgbm90XG5cdCAqIG51bGwgYWZ0ZXIgdGhpcyBmdW5jdGlvbiwgbWFrZSBzdXJlIHRvIGFzc2lnbiBpdCBiYWNrIHRvIGBjdXJyZW50YDpcblx0ICpcblx0ICogYGEgPSBhY2N1bXVsYXRlSW50byhhLCBiKTtgXG5cdCAqXG5cdCAqIFRoaXMgQVBJIHNob3VsZCBiZSBzcGFyaW5nbHkgdXNlZC4gVHJ5IGBhY2N1bXVsYXRlYCBmb3Igc29tZXRoaW5nIGNsZWFuZXIuXG5cdCAqXG5cdCAqIEByZXR1cm4geyp8YXJyYXk8Kj59IEFuIGFjY3VtdWxhdGlvbiBvZiBpdGVtcy5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBhY2N1bXVsYXRlSW50byhjdXJyZW50LCBuZXh0KSB7XG5cdCAgIShuZXh0ICE9IG51bGwpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2FjY3VtdWxhdGVJbnRvKC4uLik6IEFjY3VtdWxhdGVkIGl0ZW1zIG11c3Qgbm90IGJlIG51bGwgb3IgdW5kZWZpbmVkLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0ICBpZiAoY3VycmVudCA9PSBudWxsKSB7XG5cdCAgICByZXR1cm4gbmV4dDtcblx0ICB9XG5cdFxuXHQgIC8vIEJvdGggYXJlIG5vdCBlbXB0eS4gV2FybmluZzogTmV2ZXIgY2FsbCB4LmNvbmNhdCh5KSB3aGVuIHlvdSBhcmUgbm90XG5cdCAgLy8gY2VydGFpbiB0aGF0IHggaXMgYW4gQXJyYXkgKHggY291bGQgYmUgYSBzdHJpbmcgd2l0aCBjb25jYXQgbWV0aG9kKS5cblx0ICB2YXIgY3VycmVudElzQXJyYXkgPSBBcnJheS5pc0FycmF5KGN1cnJlbnQpO1xuXHQgIHZhciBuZXh0SXNBcnJheSA9IEFycmF5LmlzQXJyYXkobmV4dCk7XG5cdFxuXHQgIGlmIChjdXJyZW50SXNBcnJheSAmJiBuZXh0SXNBcnJheSkge1xuXHQgICAgY3VycmVudC5wdXNoLmFwcGx5KGN1cnJlbnQsIG5leHQpO1xuXHQgICAgcmV0dXJuIGN1cnJlbnQ7XG5cdCAgfVxuXHRcblx0ICBpZiAoY3VycmVudElzQXJyYXkpIHtcblx0ICAgIGN1cnJlbnQucHVzaChuZXh0KTtcblx0ICAgIHJldHVybiBjdXJyZW50O1xuXHQgIH1cblx0XG5cdCAgaWYgKG5leHRJc0FycmF5KSB7XG5cdCAgICAvLyBBIGJpdCB0b28gZGFuZ2Vyb3VzIHRvIG11dGF0ZSBgbmV4dGAuXG5cdCAgICByZXR1cm4gW2N1cnJlbnRdLmNvbmNhdChuZXh0KTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBbY3VycmVudCwgbmV4dF07XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYWNjdW11bGF0ZUludG87XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpKSlcblxuLyoqKi8gfSksXG4vKiAzNiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgZm9yRWFjaEFjY3VtdWxhdGVkXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0LyoqXG5cdCAqIEBwYXJhbSB7YXJyYXl9IGFyciBhbiBcImFjY3VtdWxhdGlvblwiIG9mIGl0ZW1zIHdoaWNoIGlzIGVpdGhlciBhbiBBcnJheSBvclxuXHQgKiBhIHNpbmdsZSBpdGVtLiBVc2VmdWwgd2hlbiBwYWlyZWQgd2l0aCB0aGUgYGFjY3VtdWxhdGVgIG1vZHVsZS4gVGhpcyBpcyBhXG5cdCAqIHNpbXBsZSB1dGlsaXR5IHRoYXQgYWxsb3dzIHVzIHRvIHJlYXNvbiBhYm91dCBhIGNvbGxlY3Rpb24gb2YgaXRlbXMsIGJ1dFxuXHQgKiBoYW5kbGluZyB0aGUgY2FzZSB3aGVuIHRoZXJlIGlzIGV4YWN0bHkgb25lIGl0ZW0gKGFuZCB3ZSBkbyBub3QgbmVlZCB0b1xuXHQgKiBhbGxvY2F0ZSBhbiBhcnJheSkuXG5cdCAqL1xuXHR2YXIgZm9yRWFjaEFjY3VtdWxhdGVkID0gZnVuY3Rpb24gKGFyciwgY2IsIHNjb3BlKSB7XG5cdCAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkge1xuXHQgICAgYXJyLmZvckVhY2goY2IsIHNjb3BlKTtcblx0ICB9IGVsc2UgaWYgKGFycikge1xuXHQgICAgY2IuY2FsbChzY29wZSwgYXJyKTtcblx0ICB9XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZvckVhY2hBY2N1bXVsYXRlZDtcblxuLyoqKi8gfSksXG4vKiAzNyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RFdmVudEVtaXR0ZXJNaXhpblxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBFdmVudFBsdWdpbkh1YiA9IF9fd2VicGFja19yZXF1aXJlX18oMzEpO1xuXHRcblx0ZnVuY3Rpb24gcnVuRXZlbnRRdWV1ZUluQmF0Y2goZXZlbnRzKSB7XG5cdCAgRXZlbnRQbHVnaW5IdWIuZW5xdWV1ZUV2ZW50cyhldmVudHMpO1xuXHQgIEV2ZW50UGx1Z2luSHViLnByb2Nlc3NFdmVudFF1ZXVlKGZhbHNlKTtcblx0fVxuXHRcblx0dmFyIFJlYWN0RXZlbnRFbWl0dGVyTWl4aW4gPSB7XG5cdFxuXHQgIC8qKlxuXHQgICAqIFN0cmVhbXMgYSBmaXJlZCB0b3AtbGV2ZWwgZXZlbnQgdG8gYEV2ZW50UGx1Z2luSHViYCB3aGVyZSBwbHVnaW5zIGhhdmUgdGhlXG5cdCAgICogb3Bwb3J0dW5pdHkgdG8gY3JlYXRlIGBSZWFjdEV2ZW50YHMgdG8gYmUgZGlzcGF0Y2hlZC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFR5cGUgUmVjb3JkIGZyb20gYEV2ZW50Q29uc3RhbnRzYC5cblx0ICAgKiBAcGFyYW0ge29iamVjdH0gdG9wTGV2ZWxUYXJnZXQgVGhlIGxpc3RlbmluZyBjb21wb25lbnQgcm9vdCBub2RlLlxuXHQgICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFRhcmdldElEIElEIG9mIGB0b3BMZXZlbFRhcmdldGAuXG5cdCAgICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBlbnZpcm9ubWVudCBldmVudC5cblx0ICAgKi9cblx0ICBoYW5kbGVUb3BMZXZlbDogZnVuY3Rpb24gKHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuXHQgICAgdmFyIGV2ZW50cyA9IEV2ZW50UGx1Z2luSHViLmV4dHJhY3RFdmVudHModG9wTGV2ZWxUeXBlLCB0b3BMZXZlbFRhcmdldCwgdG9wTGV2ZWxUYXJnZXRJRCwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcblx0ICAgIHJ1bkV2ZW50UXVldWVJbkJhdGNoKGV2ZW50cyk7XG5cdCAgfVxuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBSZWFjdEV2ZW50RW1pdHRlck1peGluO1xuXG4vKioqLyB9KSxcbi8qIDM4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBWaWV3cG9ydE1ldHJpY3Ncblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgVmlld3BvcnRNZXRyaWNzID0ge1xuXHRcblx0ICBjdXJyZW50U2Nyb2xsTGVmdDogMCxcblx0XG5cdCAgY3VycmVudFNjcm9sbFRvcDogMCxcblx0XG5cdCAgcmVmcmVzaFNjcm9sbFZhbHVlczogZnVuY3Rpb24gKHNjcm9sbFBvc2l0aW9uKSB7XG5cdCAgICBWaWV3cG9ydE1ldHJpY3MuY3VycmVudFNjcm9sbExlZnQgPSBzY3JvbGxQb3NpdGlvbi54O1xuXHQgICAgVmlld3BvcnRNZXRyaWNzLmN1cnJlbnRTY3JvbGxUb3AgPSBzY3JvbGxQb3NpdGlvbi55O1xuXHQgIH1cblx0XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFZpZXdwb3J0TWV0cmljcztcblxuLyoqKi8gfSksXG4vKiAzOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxNC0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgT2JqZWN0LmFzc2lnblxuXHQgKi9cblx0XG5cdC8vIGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1vYmplY3QuYXNzaWduXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRmdW5jdGlvbiBhc3NpZ24odGFyZ2V0LCBzb3VyY2VzKSB7XG5cdCAgaWYgKHRhcmdldCA9PSBudWxsKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdPYmplY3QuYXNzaWduIHRhcmdldCBjYW5ub3QgYmUgbnVsbCBvciB1bmRlZmluZWQnKTtcblx0ICB9XG5cdFxuXHQgIHZhciB0byA9IE9iamVjdCh0YXJnZXQpO1xuXHQgIHZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cdFxuXHQgIGZvciAodmFyIG5leHRJbmRleCA9IDE7IG5leHRJbmRleCA8IGFyZ3VtZW50cy5sZW5ndGg7IG5leHRJbmRleCsrKSB7XG5cdCAgICB2YXIgbmV4dFNvdXJjZSA9IGFyZ3VtZW50c1tuZXh0SW5kZXhdO1xuXHQgICAgaWYgKG5leHRTb3VyY2UgPT0gbnVsbCkge1xuXHQgICAgICBjb250aW51ZTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgZnJvbSA9IE9iamVjdChuZXh0U291cmNlKTtcblx0XG5cdCAgICAvLyBXZSBkb24ndCBjdXJyZW50bHkgc3VwcG9ydCBhY2Nlc3NvcnMgbm9yIHByb3hpZXMuIFRoZXJlZm9yZSB0aGlzXG5cdCAgICAvLyBjb3B5IGNhbm5vdCB0aHJvdy4gSWYgd2UgZXZlciBzdXBwb3J0ZWQgdGhpcyB0aGVuIHdlIG11c3QgaGFuZGxlXG5cdCAgICAvLyBleGNlcHRpb25zIGFuZCBzaWRlLWVmZmVjdHMuIFdlIGRvbid0IHN1cHBvcnQgc3ltYm9scyBzbyB0aGV5IHdvbid0XG5cdCAgICAvLyBiZSB0cmFuc2ZlcnJlZC5cblx0XG5cdCAgICBmb3IgKHZhciBrZXkgaW4gZnJvbSkge1xuXHQgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChmcm9tLCBrZXkpKSB7XG5cdCAgICAgICAgdG9ba2V5XSA9IGZyb21ba2V5XTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHRvO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGFzc2lnbjtcblxuLyoqKi8gfSksXG4vKiA0MCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgaXNFdmVudFN1cHBvcnRlZFxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdFxuXHR2YXIgdXNlSGFzRmVhdHVyZTtcblx0aWYgKEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSkge1xuXHQgIHVzZUhhc0ZlYXR1cmUgPSBkb2N1bWVudC5pbXBsZW1lbnRhdGlvbiAmJiBkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5oYXNGZWF0dXJlICYmXG5cdCAgLy8gYWx3YXlzIHJldHVybnMgdHJ1ZSBpbiBuZXdlciBicm93c2VycyBhcyBwZXIgdGhlIHN0YW5kYXJkLlxuXHQgIC8vIEBzZWUgaHR0cDovL2RvbS5zcGVjLndoYXR3Zy5vcmcvI2RvbS1kb21pbXBsZW1lbnRhdGlvbi1oYXNmZWF0dXJlXG5cdCAgZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uaGFzRmVhdHVyZSgnJywgJycpICE9PSB0cnVlO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGFuIGV2ZW50IGlzIHN1cHBvcnRlZCBpbiB0aGUgY3VycmVudCBleGVjdXRpb24gZW52aXJvbm1lbnQuXG5cdCAqXG5cdCAqIE5PVEU6IFRoaXMgd2lsbCBub3Qgd29yayBjb3JyZWN0bHkgZm9yIG5vbi1nZW5lcmljIGV2ZW50cyBzdWNoIGFzIGBjaGFuZ2VgLFxuXHQgKiBgcmVzZXRgLCBgbG9hZGAsIGBlcnJvcmAsIGFuZCBgc2VsZWN0YC5cblx0ICpcblx0ICogQm9ycm93cyBmcm9tIE1vZGVybml6ci5cblx0ICpcblx0ICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50TmFtZVN1ZmZpeCBFdmVudCBuYW1lLCBlLmcuIFwiY2xpY2tcIi5cblx0ICogQHBhcmFtIHs/Ym9vbGVhbn0gY2FwdHVyZSBDaGVjayBpZiB0aGUgY2FwdHVyZSBwaGFzZSBpcyBzdXBwb3J0ZWQuXG5cdCAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGV2ZW50IGlzIHN1cHBvcnRlZC5cblx0ICogQGludGVybmFsXG5cdCAqIEBsaWNlbnNlIE1vZGVybml6ciAzLjAuMHByZSAoQ3VzdG9tIEJ1aWxkKSB8IE1JVFxuXHQgKi9cblx0ZnVuY3Rpb24gaXNFdmVudFN1cHBvcnRlZChldmVudE5hbWVTdWZmaXgsIGNhcHR1cmUpIHtcblx0ICBpZiAoIUV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSB8fCBjYXB0dXJlICYmICEoJ2FkZEV2ZW50TGlzdGVuZXInIGluIGRvY3VtZW50KSkge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0XG5cdCAgdmFyIGV2ZW50TmFtZSA9ICdvbicgKyBldmVudE5hbWVTdWZmaXg7XG5cdCAgdmFyIGlzU3VwcG9ydGVkID0gKGV2ZW50TmFtZSBpbiBkb2N1bWVudCk7XG5cdFxuXHQgIGlmICghaXNTdXBwb3J0ZWQpIHtcblx0ICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShldmVudE5hbWUsICdyZXR1cm47Jyk7XG5cdCAgICBpc1N1cHBvcnRlZCA9IHR5cGVvZiBlbGVtZW50W2V2ZW50TmFtZV0gPT09ICdmdW5jdGlvbic7XG5cdCAgfVxuXHRcblx0ICBpZiAoIWlzU3VwcG9ydGVkICYmIHVzZUhhc0ZlYXR1cmUgJiYgZXZlbnROYW1lU3VmZml4ID09PSAnd2hlZWwnKSB7XG5cdCAgICAvLyBUaGlzIGlzIHRoZSBvbmx5IHdheSB0byB0ZXN0IHN1cHBvcnQgZm9yIHRoZSBgd2hlZWxgIGV2ZW50IGluIElFOSsuXG5cdCAgICBpc1N1cHBvcnRlZCA9IGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmhhc0ZlYXR1cmUoJ0V2ZW50cy53aGVlbCcsICczLjAnKTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBpc1N1cHBvcnRlZDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpc0V2ZW50U3VwcG9ydGVkO1xuXG4vKioqLyB9KSxcbi8qIDQxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBSZWFjdERPTUZlYXR1cmVGbGFnc1xuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBSZWFjdERPTUZlYXR1cmVGbGFncyA9IHtcblx0ICB1c2VDcmVhdGVFbGVtZW50OiBmYWxzZVxuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBSZWFjdERPTUZlYXR1cmVGbGFncztcblxuLyoqKi8gfSksXG4vKiA0MiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzKSB7LyoqXG5cdCAqIENvcHlyaWdodCAyMDE0LTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBSZWFjdEVsZW1lbnRcblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgUmVhY3RDdXJyZW50T3duZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXHRcblx0dmFyIGFzc2lnbiA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpO1xuXHR2YXIgY2FuRGVmaW5lUHJvcGVydHkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQzKTtcblx0XG5cdC8vIFRoZSBTeW1ib2wgdXNlZCB0byB0YWcgdGhlIFJlYWN0RWxlbWVudCB0eXBlLiBJZiB0aGVyZSBpcyBubyBuYXRpdmUgU3ltYm9sXG5cdC8vIG5vciBwb2x5ZmlsbCwgdGhlbiBhIHBsYWluIG51bWJlciBpcyB1c2VkIGZvciBwZXJmb3JtYW5jZS5cblx0dmFyIFJFQUNUX0VMRU1FTlRfVFlQRSA9IHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgU3ltYm9sWydmb3InXSAmJiBTeW1ib2xbJ2ZvciddKCdyZWFjdC5lbGVtZW50JykgfHwgMHhlYWM3O1xuXHRcblx0dmFyIFJFU0VSVkVEX1BST1BTID0ge1xuXHQgIGtleTogdHJ1ZSxcblx0ICByZWY6IHRydWUsXG5cdCAgX19zZWxmOiB0cnVlLFxuXHQgIF9fc291cmNlOiB0cnVlXG5cdH07XG5cdFxuXHQvKipcblx0ICogQmFzZSBjb25zdHJ1Y3RvciBmb3IgYWxsIFJlYWN0IGVsZW1lbnRzLiBUaGlzIGlzIG9ubHkgdXNlZCB0byBtYWtlIHRoaXNcblx0ICogd29yayB3aXRoIGEgZHluYW1pYyBpbnN0YW5jZW9mIGNoZWNrLiBOb3RoaW5nIHNob3VsZCBsaXZlIG9uIHRoaXMgcHJvdG90eXBlLlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IHR5cGVcblx0ICogQHBhcmFtIHsqfSBrZXlcblx0ICogQHBhcmFtIHtzdHJpbmd8b2JqZWN0fSByZWZcblx0ICogQHBhcmFtIHsqfSBzZWxmIEEgKnRlbXBvcmFyeSogaGVscGVyIHRvIGRldGVjdCBwbGFjZXMgd2hlcmUgYHRoaXNgIGlzXG5cdCAqIGRpZmZlcmVudCBmcm9tIHRoZSBgb3duZXJgIHdoZW4gUmVhY3QuY3JlYXRlRWxlbWVudCBpcyBjYWxsZWQsIHNvIHRoYXQgd2Vcblx0ICogY2FuIHdhcm4uIFdlIHdhbnQgdG8gZ2V0IHJpZCBvZiBvd25lciBhbmQgcmVwbGFjZSBzdHJpbmcgYHJlZmBzIHdpdGggYXJyb3dcblx0ICogZnVuY3Rpb25zLCBhbmQgYXMgbG9uZyBhcyBgdGhpc2AgYW5kIG93bmVyIGFyZSB0aGUgc2FtZSwgdGhlcmUgd2lsbCBiZSBub1xuXHQgKiBjaGFuZ2UgaW4gYmVoYXZpb3IuXG5cdCAqIEBwYXJhbSB7Kn0gc291cmNlIEFuIGFubm90YXRpb24gb2JqZWN0IChhZGRlZCBieSBhIHRyYW5zcGlsZXIgb3Igb3RoZXJ3aXNlKVxuXHQgKiBpbmRpY2F0aW5nIGZpbGVuYW1lLCBsaW5lIG51bWJlciwgYW5kL29yIG90aGVyIGluZm9ybWF0aW9uLlxuXHQgKiBAcGFyYW0geyp9IG93bmVyXG5cdCAqIEBwYXJhbSB7Kn0gcHJvcHNcblx0ICogQGludGVybmFsXG5cdCAqL1xuXHR2YXIgUmVhY3RFbGVtZW50ID0gZnVuY3Rpb24gKHR5cGUsIGtleSwgcmVmLCBzZWxmLCBzb3VyY2UsIG93bmVyLCBwcm9wcykge1xuXHQgIHZhciBlbGVtZW50ID0ge1xuXHQgICAgLy8gVGhpcyB0YWcgYWxsb3cgdXMgdG8gdW5pcXVlbHkgaWRlbnRpZnkgdGhpcyBhcyBhIFJlYWN0IEVsZW1lbnRcblx0ICAgICQkdHlwZW9mOiBSRUFDVF9FTEVNRU5UX1RZUEUsXG5cdFxuXHQgICAgLy8gQnVpbHQtaW4gcHJvcGVydGllcyB0aGF0IGJlbG9uZyBvbiB0aGUgZWxlbWVudFxuXHQgICAgdHlwZTogdHlwZSxcblx0ICAgIGtleToga2V5LFxuXHQgICAgcmVmOiByZWYsXG5cdCAgICBwcm9wczogcHJvcHMsXG5cdFxuXHQgICAgLy8gUmVjb3JkIHRoZSBjb21wb25lbnQgcmVzcG9uc2libGUgZm9yIGNyZWF0aW5nIHRoaXMgZWxlbWVudC5cblx0ICAgIF9vd25lcjogb3duZXJcblx0ICB9O1xuXHRcblx0ICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgLy8gVGhlIHZhbGlkYXRpb24gZmxhZyBpcyBjdXJyZW50bHkgbXV0YXRpdmUuIFdlIHB1dCBpdCBvblxuXHQgICAgLy8gYW4gZXh0ZXJuYWwgYmFja2luZyBzdG9yZSBzbyB0aGF0IHdlIGNhbiBmcmVlemUgdGhlIHdob2xlIG9iamVjdC5cblx0ICAgIC8vIFRoaXMgY2FuIGJlIHJlcGxhY2VkIHdpdGggYSBXZWFrTWFwIG9uY2UgdGhleSBhcmUgaW1wbGVtZW50ZWQgaW5cblx0ICAgIC8vIGNvbW1vbmx5IHVzZWQgZGV2ZWxvcG1lbnQgZW52aXJvbm1lbnRzLlxuXHQgICAgZWxlbWVudC5fc3RvcmUgPSB7fTtcblx0XG5cdCAgICAvLyBUbyBtYWtlIGNvbXBhcmluZyBSZWFjdEVsZW1lbnRzIGVhc2llciBmb3IgdGVzdGluZyBwdXJwb3Nlcywgd2UgbWFrZVxuXHQgICAgLy8gdGhlIHZhbGlkYXRpb24gZmxhZyBub24tZW51bWVyYWJsZSAod2hlcmUgcG9zc2libGUsIHdoaWNoIHNob3VsZFxuXHQgICAgLy8gaW5jbHVkZSBldmVyeSBlbnZpcm9ubWVudCB3ZSBydW4gdGVzdHMgaW4pLCBzbyB0aGUgdGVzdCBmcmFtZXdvcmtcblx0ICAgIC8vIGlnbm9yZXMgaXQuXG5cdCAgICBpZiAoY2FuRGVmaW5lUHJvcGVydHkpIHtcblx0ICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGVsZW1lbnQuX3N0b3JlLCAndmFsaWRhdGVkJywge1xuXHQgICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG5cdCAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG5cdCAgICAgICAgd3JpdGFibGU6IHRydWUsXG5cdCAgICAgICAgdmFsdWU6IGZhbHNlXG5cdCAgICAgIH0pO1xuXHQgICAgICAvLyBzZWxmIGFuZCBzb3VyY2UgYXJlIERFViBvbmx5IHByb3BlcnRpZXMuXG5cdCAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlbGVtZW50LCAnX3NlbGYnLCB7XG5cdCAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcblx0ICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcblx0ICAgICAgICB3cml0YWJsZTogZmFsc2UsXG5cdCAgICAgICAgdmFsdWU6IHNlbGZcblx0ICAgICAgfSk7XG5cdCAgICAgIC8vIFR3byBlbGVtZW50cyBjcmVhdGVkIGluIHR3byBkaWZmZXJlbnQgcGxhY2VzIHNob3VsZCBiZSBjb25zaWRlcmVkXG5cdCAgICAgIC8vIGVxdWFsIGZvciB0ZXN0aW5nIHB1cnBvc2VzIGFuZCB0aGVyZWZvcmUgd2UgaGlkZSBpdCBmcm9tIGVudW1lcmF0aW9uLlxuXHQgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZWxlbWVudCwgJ19zb3VyY2UnLCB7XG5cdCAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcblx0ICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcblx0ICAgICAgICB3cml0YWJsZTogZmFsc2UsXG5cdCAgICAgICAgdmFsdWU6IHNvdXJjZVxuXHQgICAgICB9KTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGVsZW1lbnQuX3N0b3JlLnZhbGlkYXRlZCA9IGZhbHNlO1xuXHQgICAgICBlbGVtZW50Ll9zZWxmID0gc2VsZjtcblx0ICAgICAgZWxlbWVudC5fc291cmNlID0gc291cmNlO1xuXHQgICAgfVxuXHQgICAgT2JqZWN0LmZyZWV6ZShlbGVtZW50LnByb3BzKTtcblx0ICAgIE9iamVjdC5mcmVlemUoZWxlbWVudCk7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gZWxlbWVudDtcblx0fTtcblx0XG5cdFJlYWN0RWxlbWVudC5jcmVhdGVFbGVtZW50ID0gZnVuY3Rpb24gKHR5cGUsIGNvbmZpZywgY2hpbGRyZW4pIHtcblx0ICB2YXIgcHJvcE5hbWU7XG5cdFxuXHQgIC8vIFJlc2VydmVkIG5hbWVzIGFyZSBleHRyYWN0ZWRcblx0ICB2YXIgcHJvcHMgPSB7fTtcblx0XG5cdCAgdmFyIGtleSA9IG51bGw7XG5cdCAgdmFyIHJlZiA9IG51bGw7XG5cdCAgdmFyIHNlbGYgPSBudWxsO1xuXHQgIHZhciBzb3VyY2UgPSBudWxsO1xuXHRcblx0ICBpZiAoY29uZmlnICE9IG51bGwpIHtcblx0ICAgIHJlZiA9IGNvbmZpZy5yZWYgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBjb25maWcucmVmO1xuXHQgICAga2V5ID0gY29uZmlnLmtleSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6ICcnICsgY29uZmlnLmtleTtcblx0ICAgIHNlbGYgPSBjb25maWcuX19zZWxmID09PSB1bmRlZmluZWQgPyBudWxsIDogY29uZmlnLl9fc2VsZjtcblx0ICAgIHNvdXJjZSA9IGNvbmZpZy5fX3NvdXJjZSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IGNvbmZpZy5fX3NvdXJjZTtcblx0ICAgIC8vIFJlbWFpbmluZyBwcm9wZXJ0aWVzIGFyZSBhZGRlZCB0byBhIG5ldyBwcm9wcyBvYmplY3Rcblx0ICAgIGZvciAocHJvcE5hbWUgaW4gY29uZmlnKSB7XG5cdCAgICAgIGlmIChjb25maWcuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpICYmICFSRVNFUlZFRF9QUk9QUy5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkpIHtcblx0ICAgICAgICBwcm9wc1twcm9wTmFtZV0gPSBjb25maWdbcHJvcE5hbWVdO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvLyBDaGlsZHJlbiBjYW4gYmUgbW9yZSB0aGFuIG9uZSBhcmd1bWVudCwgYW5kIHRob3NlIGFyZSB0cmFuc2ZlcnJlZCBvbnRvXG5cdCAgLy8gdGhlIG5ld2x5IGFsbG9jYXRlZCBwcm9wcyBvYmplY3QuXG5cdCAgdmFyIGNoaWxkcmVuTGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aCAtIDI7XG5cdCAgaWYgKGNoaWxkcmVuTGVuZ3RoID09PSAxKSB7XG5cdCAgICBwcm9wcy5jaGlsZHJlbiA9IGNoaWxkcmVuO1xuXHQgIH0gZWxzZSBpZiAoY2hpbGRyZW5MZW5ndGggPiAxKSB7XG5cdCAgICB2YXIgY2hpbGRBcnJheSA9IEFycmF5KGNoaWxkcmVuTGVuZ3RoKTtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW5MZW5ndGg7IGkrKykge1xuXHQgICAgICBjaGlsZEFycmF5W2ldID0gYXJndW1lbnRzW2kgKyAyXTtcblx0ICAgIH1cblx0ICAgIHByb3BzLmNoaWxkcmVuID0gY2hpbGRBcnJheTtcblx0ICB9XG5cdFxuXHQgIC8vIFJlc29sdmUgZGVmYXVsdCBwcm9wc1xuXHQgIGlmICh0eXBlICYmIHR5cGUuZGVmYXVsdFByb3BzKSB7XG5cdCAgICB2YXIgZGVmYXVsdFByb3BzID0gdHlwZS5kZWZhdWx0UHJvcHM7XG5cdCAgICBmb3IgKHByb3BOYW1lIGluIGRlZmF1bHRQcm9wcykge1xuXHQgICAgICBpZiAodHlwZW9mIHByb3BzW3Byb3BOYW1lXSA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgICAgICBwcm9wc1twcm9wTmFtZV0gPSBkZWZhdWx0UHJvcHNbcHJvcE5hbWVdO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gUmVhY3RFbGVtZW50KHR5cGUsIGtleSwgcmVmLCBzZWxmLCBzb3VyY2UsIFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQsIHByb3BzKTtcblx0fTtcblx0XG5cdFJlYWN0RWxlbWVudC5jcmVhdGVGYWN0b3J5ID0gZnVuY3Rpb24gKHR5cGUpIHtcblx0ICB2YXIgZmFjdG9yeSA9IFJlYWN0RWxlbWVudC5jcmVhdGVFbGVtZW50LmJpbmQobnVsbCwgdHlwZSk7XG5cdCAgLy8gRXhwb3NlIHRoZSB0eXBlIG9uIHRoZSBmYWN0b3J5IGFuZCB0aGUgcHJvdG90eXBlIHNvIHRoYXQgaXQgY2FuIGJlXG5cdCAgLy8gZWFzaWx5IGFjY2Vzc2VkIG9uIGVsZW1lbnRzLiBFLmcuIGA8Rm9vIC8+LnR5cGUgPT09IEZvb2AuXG5cdCAgLy8gVGhpcyBzaG91bGQgbm90IGJlIG5hbWVkIGBjb25zdHJ1Y3RvcmAgc2luY2UgdGhpcyBtYXkgbm90IGJlIHRoZSBmdW5jdGlvblxuXHQgIC8vIHRoYXQgY3JlYXRlZCB0aGUgZWxlbWVudCwgYW5kIGl0IG1heSBub3QgZXZlbiBiZSBhIGNvbnN0cnVjdG9yLlxuXHQgIC8vIExlZ2FjeSBob29rIFRPRE86IFdhcm4gaWYgdGhpcyBpcyBhY2Nlc3NlZFxuXHQgIGZhY3RvcnkudHlwZSA9IHR5cGU7XG5cdCAgcmV0dXJuIGZhY3Rvcnk7XG5cdH07XG5cdFxuXHRSZWFjdEVsZW1lbnQuY2xvbmVBbmRSZXBsYWNlS2V5ID0gZnVuY3Rpb24gKG9sZEVsZW1lbnQsIG5ld0tleSkge1xuXHQgIHZhciBuZXdFbGVtZW50ID0gUmVhY3RFbGVtZW50KG9sZEVsZW1lbnQudHlwZSwgbmV3S2V5LCBvbGRFbGVtZW50LnJlZiwgb2xkRWxlbWVudC5fc2VsZiwgb2xkRWxlbWVudC5fc291cmNlLCBvbGRFbGVtZW50Ll9vd25lciwgb2xkRWxlbWVudC5wcm9wcyk7XG5cdFxuXHQgIHJldHVybiBuZXdFbGVtZW50O1xuXHR9O1xuXHRcblx0UmVhY3RFbGVtZW50LmNsb25lQW5kUmVwbGFjZVByb3BzID0gZnVuY3Rpb24gKG9sZEVsZW1lbnQsIG5ld1Byb3BzKSB7XG5cdCAgdmFyIG5ld0VsZW1lbnQgPSBSZWFjdEVsZW1lbnQob2xkRWxlbWVudC50eXBlLCBvbGRFbGVtZW50LmtleSwgb2xkRWxlbWVudC5yZWYsIG9sZEVsZW1lbnQuX3NlbGYsIG9sZEVsZW1lbnQuX3NvdXJjZSwgb2xkRWxlbWVudC5fb3duZXIsIG5ld1Byb3BzKTtcblx0XG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgIC8vIElmIHRoZSBrZXkgb24gdGhlIG9yaWdpbmFsIGlzIHZhbGlkLCB0aGVuIHRoZSBjbG9uZSBpcyB2YWxpZFxuXHQgICAgbmV3RWxlbWVudC5fc3RvcmUudmFsaWRhdGVkID0gb2xkRWxlbWVudC5fc3RvcmUudmFsaWRhdGVkO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIG5ld0VsZW1lbnQ7XG5cdH07XG5cdFxuXHRSZWFjdEVsZW1lbnQuY2xvbmVFbGVtZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQsIGNvbmZpZywgY2hpbGRyZW4pIHtcblx0ICB2YXIgcHJvcE5hbWU7XG5cdFxuXHQgIC8vIE9yaWdpbmFsIHByb3BzIGFyZSBjb3BpZWRcblx0ICB2YXIgcHJvcHMgPSBhc3NpZ24oe30sIGVsZW1lbnQucHJvcHMpO1xuXHRcblx0ICAvLyBSZXNlcnZlZCBuYW1lcyBhcmUgZXh0cmFjdGVkXG5cdCAgdmFyIGtleSA9IGVsZW1lbnQua2V5O1xuXHQgIHZhciByZWYgPSBlbGVtZW50LnJlZjtcblx0ICAvLyBTZWxmIGlzIHByZXNlcnZlZCBzaW5jZSB0aGUgb3duZXIgaXMgcHJlc2VydmVkLlxuXHQgIHZhciBzZWxmID0gZWxlbWVudC5fc2VsZjtcblx0ICAvLyBTb3VyY2UgaXMgcHJlc2VydmVkIHNpbmNlIGNsb25lRWxlbWVudCBpcyB1bmxpa2VseSB0byBiZSB0YXJnZXRlZCBieSBhXG5cdCAgLy8gdHJhbnNwaWxlciwgYW5kIHRoZSBvcmlnaW5hbCBzb3VyY2UgaXMgcHJvYmFibHkgYSBiZXR0ZXIgaW5kaWNhdG9yIG9mIHRoZVxuXHQgIC8vIHRydWUgb3duZXIuXG5cdCAgdmFyIHNvdXJjZSA9IGVsZW1lbnQuX3NvdXJjZTtcblx0XG5cdCAgLy8gT3duZXIgd2lsbCBiZSBwcmVzZXJ2ZWQsIHVubGVzcyByZWYgaXMgb3ZlcnJpZGRlblxuXHQgIHZhciBvd25lciA9IGVsZW1lbnQuX293bmVyO1xuXHRcblx0ICBpZiAoY29uZmlnICE9IG51bGwpIHtcblx0ICAgIGlmIChjb25maWcucmVmICE9PSB1bmRlZmluZWQpIHtcblx0ICAgICAgLy8gU2lsZW50bHkgc3RlYWwgdGhlIHJlZiBmcm9tIHRoZSBwYXJlbnQuXG5cdCAgICAgIHJlZiA9IGNvbmZpZy5yZWY7XG5cdCAgICAgIG93bmVyID0gUmVhY3RDdXJyZW50T3duZXIuY3VycmVudDtcblx0ICAgIH1cblx0ICAgIGlmIChjb25maWcua2V5ICE9PSB1bmRlZmluZWQpIHtcblx0ICAgICAga2V5ID0gJycgKyBjb25maWcua2V5O1xuXHQgICAgfVxuXHQgICAgLy8gUmVtYWluaW5nIHByb3BlcnRpZXMgb3ZlcnJpZGUgZXhpc3RpbmcgcHJvcHNcblx0ICAgIGZvciAocHJvcE5hbWUgaW4gY29uZmlnKSB7XG5cdCAgICAgIGlmIChjb25maWcuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpICYmICFSRVNFUlZFRF9QUk9QUy5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkpIHtcblx0ICAgICAgICBwcm9wc1twcm9wTmFtZV0gPSBjb25maWdbcHJvcE5hbWVdO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvLyBDaGlsZHJlbiBjYW4gYmUgbW9yZSB0aGFuIG9uZSBhcmd1bWVudCwgYW5kIHRob3NlIGFyZSB0cmFuc2ZlcnJlZCBvbnRvXG5cdCAgLy8gdGhlIG5ld2x5IGFsbG9jYXRlZCBwcm9wcyBvYmplY3QuXG5cdCAgdmFyIGNoaWxkcmVuTGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aCAtIDI7XG5cdCAgaWYgKGNoaWxkcmVuTGVuZ3RoID09PSAxKSB7XG5cdCAgICBwcm9wcy5jaGlsZHJlbiA9IGNoaWxkcmVuO1xuXHQgIH0gZWxzZSBpZiAoY2hpbGRyZW5MZW5ndGggPiAxKSB7XG5cdCAgICB2YXIgY2hpbGRBcnJheSA9IEFycmF5KGNoaWxkcmVuTGVuZ3RoKTtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW5MZW5ndGg7IGkrKykge1xuXHQgICAgICBjaGlsZEFycmF5W2ldID0gYXJndW1lbnRzW2kgKyAyXTtcblx0ICAgIH1cblx0ICAgIHByb3BzLmNoaWxkcmVuID0gY2hpbGRBcnJheTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBSZWFjdEVsZW1lbnQoZWxlbWVudC50eXBlLCBrZXksIHJlZiwgc2VsZiwgc291cmNlLCBvd25lciwgcHJvcHMpO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEBwYXJhbSB7P29iamVjdH0gb2JqZWN0XG5cdCAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgYG9iamVjdGAgaXMgYSB2YWxpZCBjb21wb25lbnQuXG5cdCAqIEBmaW5hbFxuXHQgKi9cblx0UmVhY3RFbGVtZW50LmlzVmFsaWRFbGVtZW50ID0gZnVuY3Rpb24gKG9iamVjdCkge1xuXHQgIHJldHVybiB0eXBlb2Ygb2JqZWN0ID09PSAnb2JqZWN0JyAmJiBvYmplY3QgIT09IG51bGwgJiYgb2JqZWN0LiQkdHlwZW9mID09PSBSRUFDVF9FTEVNRU5UX1RZUEU7XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFJlYWN0RWxlbWVudDtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oNCkpKVxuXG4vKioqLyB9KSxcbi8qIDQzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MpIHsvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIGNhbkRlZmluZVByb3BlcnR5XG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGNhbkRlZmluZVByb3BlcnR5ID0gZmFsc2U7XG5cdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgdHJ5IHtcblx0ICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgJ3gnLCB7IGdldDogZnVuY3Rpb24gKCkge30gfSk7XG5cdCAgICBjYW5EZWZpbmVQcm9wZXJ0eSA9IHRydWU7XG5cdCAgfSBjYXRjaCAoeCkge1xuXHQgICAgLy8gSUUgd2lsbCBmYWlsIG9uIGRlZmluZVByb3BlcnR5XG5cdCAgfVxuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGNhbkRlZmluZVByb3BlcnR5O1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg0KSkpXG5cbi8qKiovIH0pLFxuLyogNDQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogQ29weXJpZ2h0IDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RW1wdHlDb21wb25lbnRSZWdpc3RyeVxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8vIFRoaXMgcmVnaXN0cnkga2VlcHMgdHJhY2sgb2YgdGhlIFJlYWN0IElEcyBvZiB0aGUgY29tcG9uZW50cyB0aGF0IHJlbmRlcmVkIHRvXG5cdC8vIGBudWxsYCAoaW4gcmVhbGl0eSBhIHBsYWNlaG9sZGVyIHN1Y2ggYXMgYG5vc2NyaXB0YClcblx0dmFyIG51bGxDb21wb25lbnRJRHNSZWdpc3RyeSA9IHt9O1xuXHRcblx0LyoqXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBpZCBDb21wb25lbnQncyBgX3Jvb3ROb2RlSURgLlxuXHQgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBjb21wb25lbnQgaXMgcmVuZGVyZWQgdG8gbnVsbC5cblx0ICovXG5cdGZ1bmN0aW9uIGlzTnVsbENvbXBvbmVudElEKGlkKSB7XG5cdCAgcmV0dXJuICEhbnVsbENvbXBvbmVudElEc1JlZ2lzdHJ5W2lkXTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIE1hcmsgdGhlIGNvbXBvbmVudCBhcyBoYXZpbmcgcmVuZGVyZWQgdG8gbnVsbC5cblx0ICogQHBhcmFtIHtzdHJpbmd9IGlkIENvbXBvbmVudCdzIGBfcm9vdE5vZGVJRGAuXG5cdCAqL1xuXHRmdW5jdGlvbiByZWdpc3Rlck51bGxDb21wb25lbnRJRChpZCkge1xuXHQgIG51bGxDb21wb25lbnRJRHNSZWdpc3RyeVtpZF0gPSB0cnVlO1xuXHR9XG5cdFxuXHQvKipcblx0ICogVW5tYXJrIHRoZSBjb21wb25lbnQgYXMgaGF2aW5nIHJlbmRlcmVkIHRvIG51bGw6IGl0IHJlbmRlcnMgdG8gc29tZXRoaW5nIG5vdy5cblx0ICogQHBhcmFtIHtzdHJpbmd9IGlkIENvbXBvbmVudCdzIGBfcm9vdE5vZGVJRGAuXG5cdCAqL1xuXHRmdW5jdGlvbiBkZXJlZ2lzdGVyTnVsbENvbXBvbmVudElEKGlkKSB7XG5cdCAgZGVsZXRlIG51bGxDb21wb25lbnRJRHNSZWdpc3RyeVtpZF07XG5cdH1cblx0XG5cdHZhciBSZWFjdEVtcHR5Q29tcG9uZW50UmVnaXN0cnkgPSB7XG5cdCAgaXNOdWxsQ29tcG9uZW50SUQ6IGlzTnVsbENvbXBvbmVudElELFxuXHQgIHJlZ2lzdGVyTnVsbENvbXBvbmVudElEOiByZWdpc3Rlck51bGxDb21wb25lbnRJRCxcblx0ICBkZXJlZ2lzdGVyTnVsbENvbXBvbmVudElEOiBkZXJlZ2lzdGVyTnVsbENvbXBvbmVudElEXG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFJlYWN0RW1wdHlDb21wb25lbnRSZWdpc3RyeTtcblxuLyoqKi8gfSksXG4vKiA0NSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzKSB7LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBSZWFjdEluc3RhbmNlSGFuZGxlc1xuXHQgKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBSZWFjdFJvb3RJbmRleCA9IF9fd2VicGFja19yZXF1aXJlX18oNDYpO1xuXHRcblx0dmFyIGludmFyaWFudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHRcblx0dmFyIFNFUEFSQVRPUiA9ICcuJztcblx0dmFyIFNFUEFSQVRPUl9MRU5HVEggPSBTRVBBUkFUT1IubGVuZ3RoO1xuXHRcblx0LyoqXG5cdCAqIE1heGltdW0gZGVwdGggb2YgdHJhdmVyc2FscyBiZWZvcmUgd2UgY29uc2lkZXIgdGhlIHBvc3NpYmlsaXR5IG9mIGEgYmFkIElELlxuXHQgKi9cblx0dmFyIE1BWF9UUkVFX0RFUFRIID0gMTAwMDA7XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlcyBhIERPTSBJRCBwcmVmaXggdG8gdXNlIHdoZW4gbW91bnRpbmcgUmVhY3QgY29tcG9uZW50cy5cblx0ICpcblx0ICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IEEgdW5pcXVlIGludGVnZXJcblx0ICogQHJldHVybiB7c3RyaW5nfSBSZWFjdCByb290IElELlxuXHQgKiBAaW50ZXJuYWxcblx0ICovXG5cdGZ1bmN0aW9uIGdldFJlYWN0Um9vdElEU3RyaW5nKGluZGV4KSB7XG5cdCAgcmV0dXJuIFNFUEFSQVRPUiArIGluZGV4LnRvU3RyaW5nKDM2KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBhIGNoYXJhY3RlciBpbiB0aGUgc3VwcGxpZWQgSUQgaXMgYSBzZXBhcmF0b3Igb3IgdGhlIGVuZC5cblx0ICpcblx0ICogQHBhcmFtIHtzdHJpbmd9IGlkIEEgUmVhY3QgRE9NIElELlxuXHQgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggSW5kZXggb2YgdGhlIGNoYXJhY3RlciB0byBjaGVjay5cblx0ICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgY2hhcmFjdGVyIGlzIGEgc2VwYXJhdG9yIG9yIGVuZCBvZiB0aGUgSUQuXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0JvdW5kYXJ5KGlkLCBpbmRleCkge1xuXHQgIHJldHVybiBpZC5jaGFyQXQoaW5kZXgpID09PSBTRVBBUkFUT1IgfHwgaW5kZXggPT09IGlkLmxlbmd0aDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiB0aGUgc3VwcGxpZWQgc3RyaW5nIGlzIGEgdmFsaWQgUmVhY3QgRE9NIElELlxuXHQgKlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gaWQgQSBSZWFjdCBET00gSUQsIG1heWJlLlxuXHQgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBzdHJpbmcgaXMgYSB2YWxpZCBSZWFjdCBET00gSUQuXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc1ZhbGlkSUQoaWQpIHtcblx0ICByZXR1cm4gaWQgPT09ICcnIHx8IGlkLmNoYXJBdCgwKSA9PT0gU0VQQVJBVE9SICYmIGlkLmNoYXJBdChpZC5sZW5ndGggLSAxKSAhPT0gU0VQQVJBVE9SO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIHRoZSBmaXJzdCBJRCBpcyBhbiBhbmNlc3RvciBvZiBvciBlcXVhbCB0byB0aGUgc2Vjb25kIElELlxuXHQgKlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gYW5jZXN0b3JJRFxuXHQgKiBAcGFyYW0ge3N0cmluZ30gZGVzY2VuZGFudElEXG5cdCAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgYGFuY2VzdG9ySURgIGlzIGFuIGFuY2VzdG9yIG9mIGBkZXNjZW5kYW50SURgLlxuXHQgKiBAaW50ZXJuYWxcblx0ICovXG5cdGZ1bmN0aW9uIGlzQW5jZXN0b3JJRE9mKGFuY2VzdG9ySUQsIGRlc2NlbmRhbnRJRCkge1xuXHQgIHJldHVybiBkZXNjZW5kYW50SUQuaW5kZXhPZihhbmNlc3RvcklEKSA9PT0gMCAmJiBpc0JvdW5kYXJ5KGRlc2NlbmRhbnRJRCwgYW5jZXN0b3JJRC5sZW5ndGgpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogR2V0cyB0aGUgcGFyZW50IElEIG9mIHRoZSBzdXBwbGllZCBSZWFjdCBET00gSUQsIGBpZGAuXG5cdCAqXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBpZCBJRCBvZiBhIGNvbXBvbmVudC5cblx0ICogQHJldHVybiB7c3RyaW5nfSBJRCBvZiB0aGUgcGFyZW50LCBvciBhbiBlbXB0eSBzdHJpbmcuXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRQYXJlbnRJRChpZCkge1xuXHQgIHJldHVybiBpZCA/IGlkLnN1YnN0cigwLCBpZC5sYXN0SW5kZXhPZihTRVBBUkFUT1IpKSA6ICcnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogR2V0cyB0aGUgbmV4dCBET00gSUQgb24gdGhlIHRyZWUgcGF0aCBmcm9tIHRoZSBzdXBwbGllZCBgYW5jZXN0b3JJRGAgdG8gdGhlXG5cdCAqIHN1cHBsaWVkIGBkZXN0aW5hdGlvbklEYC4gSWYgdGhleSBhcmUgZXF1YWwsIHRoZSBJRCBpcyByZXR1cm5lZC5cblx0ICpcblx0ICogQHBhcmFtIHtzdHJpbmd9IGFuY2VzdG9ySUQgSUQgb2YgYW4gYW5jZXN0b3Igbm9kZSBvZiBgZGVzdGluYXRpb25JRGAuXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBkZXN0aW5hdGlvbklEIElEIG9mIHRoZSBkZXN0aW5hdGlvbiBub2RlLlxuXHQgKiBAcmV0dXJuIHtzdHJpbmd9IE5leHQgSUQgb24gdGhlIHBhdGggZnJvbSBgYW5jZXN0b3JJRGAgdG8gYGRlc3RpbmF0aW9uSURgLlxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0TmV4dERlc2NlbmRhbnRJRChhbmNlc3RvcklELCBkZXN0aW5hdGlvbklEKSB7XG5cdCAgIShpc1ZhbGlkSUQoYW5jZXN0b3JJRCkgJiYgaXNWYWxpZElEKGRlc3RpbmF0aW9uSUQpKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdnZXROZXh0RGVzY2VuZGFudElEKCVzLCAlcyk6IFJlY2VpdmVkIGFuIGludmFsaWQgUmVhY3QgRE9NIElELicsIGFuY2VzdG9ySUQsIGRlc3RpbmF0aW9uSUQpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0ICAhaXNBbmNlc3RvcklET2YoYW5jZXN0b3JJRCwgZGVzdGluYXRpb25JRCkgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnZ2V0TmV4dERlc2NlbmRhbnRJRCguLi4pOiBSZWFjdCBoYXMgbWFkZSBhbiBpbnZhbGlkIGFzc3VtcHRpb24gYWJvdXQgJyArICd0aGUgRE9NIGhpZXJhcmNoeS4gRXhwZWN0ZWQgYCVzYCB0byBiZSBhbiBhbmNlc3RvciBvZiBgJXNgLicsIGFuY2VzdG9ySUQsIGRlc3RpbmF0aW9uSUQpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0ICBpZiAoYW5jZXN0b3JJRCA9PT0gZGVzdGluYXRpb25JRCkge1xuXHQgICAgcmV0dXJuIGFuY2VzdG9ySUQ7XG5cdCAgfVxuXHQgIC8vIFNraXAgb3ZlciB0aGUgYW5jZXN0b3IgYW5kIHRoZSBpbW1lZGlhdGUgc2VwYXJhdG9yLiBUcmF2ZXJzZSB1bnRpbCB3ZSBoaXRcblx0ICAvLyBhbm90aGVyIHNlcGFyYXRvciBvciB3ZSByZWFjaCB0aGUgZW5kIG9mIGBkZXN0aW5hdGlvbklEYC5cblx0ICB2YXIgc3RhcnQgPSBhbmNlc3RvcklELmxlbmd0aCArIFNFUEFSQVRPUl9MRU5HVEg7XG5cdCAgdmFyIGk7XG5cdCAgZm9yIChpID0gc3RhcnQ7IGkgPCBkZXN0aW5hdGlvbklELmxlbmd0aDsgaSsrKSB7XG5cdCAgICBpZiAoaXNCb3VuZGFyeShkZXN0aW5hdGlvbklELCBpKSkge1xuXHQgICAgICBicmVhaztcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIGRlc3RpbmF0aW9uSUQuc3Vic3RyKDAsIGkpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogR2V0cyB0aGUgbmVhcmVzdCBjb21tb24gYW5jZXN0b3IgSUQgb2YgdHdvIElEcy5cblx0ICpcblx0ICogVXNpbmcgdGhpcyBJRCBzY2hlbWUsIHRoZSBuZWFyZXN0IGNvbW1vbiBhbmNlc3RvciBJRCBpcyB0aGUgbG9uZ2VzdCBjb21tb25cblx0ICogcHJlZml4IG9mIHRoZSB0d28gSURzIHRoYXQgaW1tZWRpYXRlbHkgcHJlY2VkZWQgYSBcIm1hcmtlclwiIGluIGJvdGggc3RyaW5ncy5cblx0ICpcblx0ICogQHBhcmFtIHtzdHJpbmd9IG9uZUlEXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSB0d29JRFxuXHQgKiBAcmV0dXJuIHtzdHJpbmd9IE5lYXJlc3QgY29tbW9uIGFuY2VzdG9yIElELCBvciB0aGUgZW1wdHkgc3RyaW5nIGlmIG5vbmUuXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRGaXJzdENvbW1vbkFuY2VzdG9ySUQob25lSUQsIHR3b0lEKSB7XG5cdCAgdmFyIG1pbkxlbmd0aCA9IE1hdGgubWluKG9uZUlELmxlbmd0aCwgdHdvSUQubGVuZ3RoKTtcblx0ICBpZiAobWluTGVuZ3RoID09PSAwKSB7XG5cdCAgICByZXR1cm4gJyc7XG5cdCAgfVxuXHQgIHZhciBsYXN0Q29tbW9uTWFya2VySW5kZXggPSAwO1xuXHQgIC8vIFVzZSBgPD1gIHRvIHRyYXZlcnNlIHVudGlsIHRoZSBcIkVPTFwiIG9mIHRoZSBzaG9ydGVyIHN0cmluZy5cblx0ICBmb3IgKHZhciBpID0gMDsgaSA8PSBtaW5MZW5ndGg7IGkrKykge1xuXHQgICAgaWYgKGlzQm91bmRhcnkob25lSUQsIGkpICYmIGlzQm91bmRhcnkodHdvSUQsIGkpKSB7XG5cdCAgICAgIGxhc3RDb21tb25NYXJrZXJJbmRleCA9IGk7XG5cdCAgICB9IGVsc2UgaWYgKG9uZUlELmNoYXJBdChpKSAhPT0gdHdvSUQuY2hhckF0KGkpKSB7XG5cdCAgICAgIGJyZWFrO1xuXHQgICAgfVxuXHQgIH1cblx0ICB2YXIgbG9uZ2VzdENvbW1vbklEID0gb25lSUQuc3Vic3RyKDAsIGxhc3RDb21tb25NYXJrZXJJbmRleCk7XG5cdCAgIWlzVmFsaWRJRChsb25nZXN0Q29tbW9uSUQpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2dldEZpcnN0Q29tbW9uQW5jZXN0b3JJRCglcywgJXMpOiBFeHBlY3RlZCBhIHZhbGlkIFJlYWN0IERPTSBJRDogJXMnLCBvbmVJRCwgdHdvSUQsIGxvbmdlc3RDb21tb25JRCkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXHQgIHJldHVybiBsb25nZXN0Q29tbW9uSUQ7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBUcmF2ZXJzZXMgdGhlIHBhcmVudCBwYXRoIGJldHdlZW4gdHdvIElEcyAoZWl0aGVyIHVwIG9yIGRvd24pLiBUaGUgSURzIG11c3Rcblx0ICogbm90IGJlIHRoZSBzYW1lLCBhbmQgdGhlcmUgbXVzdCBleGlzdCBhIHBhcmVudCBwYXRoIGJldHdlZW4gdGhlbS4gSWYgdGhlXG5cdCAqIGNhbGxiYWNrIHJldHVybnMgYGZhbHNlYCwgdHJhdmVyc2FsIGlzIHN0b3BwZWQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7P3N0cmluZ30gc3RhcnQgSUQgYXQgd2hpY2ggdG8gc3RhcnQgdHJhdmVyc2FsLlxuXHQgKiBAcGFyYW0gez9zdHJpbmd9IHN0b3AgSUQgYXQgd2hpY2ggdG8gZW5kIHRyYXZlcnNhbC5cblx0ICogQHBhcmFtIHtmdW5jdGlvbn0gY2IgQ2FsbGJhY2sgdG8gaW52b2tlIGVhY2ggSUQgd2l0aC5cblx0ICogQHBhcmFtIHsqfSBhcmcgQXJndW1lbnQgdG8gaW52b2tlIHRoZSBjYWxsYmFjayB3aXRoLlxuXHQgKiBAcGFyYW0gez9ib29sZWFufSBza2lwRmlyc3QgV2hldGhlciBvciBub3QgdG8gc2tpcCB0aGUgZmlyc3Qgbm9kZS5cblx0ICogQHBhcmFtIHs/Ym9vbGVhbn0gc2tpcExhc3QgV2hldGhlciBvciBub3QgdG8gc2tpcCB0aGUgbGFzdCBub2RlLlxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0ZnVuY3Rpb24gdHJhdmVyc2VQYXJlbnRQYXRoKHN0YXJ0LCBzdG9wLCBjYiwgYXJnLCBza2lwRmlyc3QsIHNraXBMYXN0KSB7XG5cdCAgc3RhcnQgPSBzdGFydCB8fCAnJztcblx0ICBzdG9wID0gc3RvcCB8fCAnJztcblx0ICAhKHN0YXJ0ICE9PSBzdG9wKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICd0cmF2ZXJzZVBhcmVudFBhdGgoLi4uKTogQ2Fubm90IHRyYXZlcnNlIGZyb20gYW5kIHRvIHRoZSBzYW1lIElELCBgJXNgLicsIHN0YXJ0KSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdCAgdmFyIHRyYXZlcnNlVXAgPSBpc0FuY2VzdG9ySURPZihzdG9wLCBzdGFydCk7XG5cdCAgISh0cmF2ZXJzZVVwIHx8IGlzQW5jZXN0b3JJRE9mKHN0YXJ0LCBzdG9wKSkgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAndHJhdmVyc2VQYXJlbnRQYXRoKCVzLCAlcywgLi4uKTogQ2Fubm90IHRyYXZlcnNlIGZyb20gdHdvIElEcyB0aGF0IGRvICcgKyAnbm90IGhhdmUgYSBwYXJlbnQgcGF0aC4nLCBzdGFydCwgc3RvcCkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXHQgIC8vIFRyYXZlcnNlIGZyb20gYHN0YXJ0YCB0byBgc3RvcGAgb25lIGRlcHRoIGF0IGEgdGltZS5cblx0ICB2YXIgZGVwdGggPSAwO1xuXHQgIHZhciB0cmF2ZXJzZSA9IHRyYXZlcnNlVXAgPyBnZXRQYXJlbnRJRCA6IGdldE5leHREZXNjZW5kYW50SUQ7XG5cdCAgZm9yICh2YXIgaWQgPSBzdGFydDs7IC8qIHVudGlsIGJyZWFrICovaWQgPSB0cmF2ZXJzZShpZCwgc3RvcCkpIHtcblx0ICAgIHZhciByZXQ7XG5cdCAgICBpZiAoKCFza2lwRmlyc3QgfHwgaWQgIT09IHN0YXJ0KSAmJiAoIXNraXBMYXN0IHx8IGlkICE9PSBzdG9wKSkge1xuXHQgICAgICByZXQgPSBjYihpZCwgdHJhdmVyc2VVcCwgYXJnKTtcblx0ICAgIH1cblx0ICAgIGlmIChyZXQgPT09IGZhbHNlIHx8IGlkID09PSBzdG9wKSB7XG5cdCAgICAgIC8vIE9ubHkgYnJlYWsgLy9hZnRlci8vIHZpc2l0aW5nIGBzdG9wYC5cblx0ICAgICAgYnJlYWs7XG5cdCAgICB9XG5cdCAgICAhKGRlcHRoKysgPCBNQVhfVFJFRV9ERVBUSCkgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAndHJhdmVyc2VQYXJlbnRQYXRoKCVzLCAlcywgLi4uKTogRGV0ZWN0ZWQgYW4gaW5maW5pdGUgbG9vcCB3aGlsZSAnICsgJ3RyYXZlcnNpbmcgdGhlIFJlYWN0IERPTSBJRCB0cmVlLiBUaGlzIG1heSBiZSBkdWUgdG8gbWFsZm9ybWVkIElEczogJXMnLCBzdGFydCwgc3RvcCwgaWQpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBNYW5hZ2VzIHRoZSBJRHMgYXNzaWduZWQgdG8gRE9NIHJlcHJlc2VudGF0aW9ucyBvZiBSZWFjdCBjb21wb25lbnRzLiBUaGlzXG5cdCAqIHVzZXMgYSBzcGVjaWZpYyBzY2hlbWUgaW4gb3JkZXIgdG8gdHJhdmVyc2UgdGhlIERPTSBlZmZpY2llbnRseSAoZS5nLiBpblxuXHQgKiBvcmRlciB0byBzaW11bGF0ZSBldmVudHMpLlxuXHQgKlxuXHQgKiBAaW50ZXJuYWxcblx0ICovXG5cdHZhciBSZWFjdEluc3RhbmNlSGFuZGxlcyA9IHtcblx0XG5cdCAgLyoqXG5cdCAgICogQ29uc3RydWN0cyBhIFJlYWN0IHJvb3QgSURcblx0ICAgKiBAcmV0dXJuIHtzdHJpbmd9IEEgUmVhY3Qgcm9vdCBJRC5cblx0ICAgKi9cblx0ICBjcmVhdGVSZWFjdFJvb3RJRDogZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuIGdldFJlYWN0Um9vdElEU3RyaW5nKFJlYWN0Um9vdEluZGV4LmNyZWF0ZVJlYWN0Um9vdEluZGV4KCkpO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIENvbnN0cnVjdHMgYSBSZWFjdCBJRCBieSBqb2luaW5nIGEgcm9vdCBJRCB3aXRoIGEgbmFtZS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7c3RyaW5nfSByb290SUQgUm9vdCBJRCBvZiBhIHBhcmVudCBjb21wb25lbnQuXG5cdCAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgQSBjb21wb25lbnQncyBuYW1lIChhcyBmbGF0dGVuZWQgY2hpbGRyZW4pLlxuXHQgICAqIEByZXR1cm4ge3N0cmluZ30gQSBSZWFjdCBJRC5cblx0ICAgKiBAaW50ZXJuYWxcblx0ICAgKi9cblx0ICBjcmVhdGVSZWFjdElEOiBmdW5jdGlvbiAocm9vdElELCBuYW1lKSB7XG5cdCAgICByZXR1cm4gcm9vdElEICsgbmFtZTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBHZXRzIHRoZSBET00gSUQgb2YgdGhlIFJlYWN0IGNvbXBvbmVudCB0aGF0IGlzIHRoZSByb290IG9mIHRoZSB0cmVlIHRoYXRcblx0ICAgKiBjb250YWlucyB0aGUgUmVhY3QgY29tcG9uZW50IHdpdGggdGhlIHN1cHBsaWVkIERPTSBJRC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBET00gSUQgb2YgYSBSZWFjdCBjb21wb25lbnQuXG5cdCAgICogQHJldHVybiB7P3N0cmluZ30gRE9NIElEIG9mIHRoZSBSZWFjdCBjb21wb25lbnQgdGhhdCBpcyB0aGUgcm9vdC5cblx0ICAgKiBAaW50ZXJuYWxcblx0ICAgKi9cblx0ICBnZXRSZWFjdFJvb3RJREZyb21Ob2RlSUQ6IGZ1bmN0aW9uIChpZCkge1xuXHQgICAgaWYgKGlkICYmIGlkLmNoYXJBdCgwKSA9PT0gU0VQQVJBVE9SICYmIGlkLmxlbmd0aCA+IDEpIHtcblx0ICAgICAgdmFyIGluZGV4ID0gaWQuaW5kZXhPZihTRVBBUkFUT1IsIDEpO1xuXHQgICAgICByZXR1cm4gaW5kZXggPiAtMSA/IGlkLnN1YnN0cigwLCBpbmRleCkgOiBpZDtcblx0ICAgIH1cblx0ICAgIHJldHVybiBudWxsO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFRyYXZlcnNlcyB0aGUgSUQgaGllcmFyY2h5IGFuZCBpbnZva2VzIHRoZSBzdXBwbGllZCBgY2JgIG9uIGFueSBJRHMgdGhhdFxuXHQgICAqIHNob3VsZCB3b3VsZCByZWNlaXZlIGEgYG1vdXNlRW50ZXJgIG9yIGBtb3VzZUxlYXZlYCBldmVudC5cblx0ICAgKlxuXHQgICAqIE5PVEU6IERvZXMgbm90IGludm9rZSB0aGUgY2FsbGJhY2sgb24gdGhlIG5lYXJlc3QgY29tbW9uIGFuY2VzdG9yIGJlY2F1c2Vcblx0ICAgKiBub3RoaW5nIFwiZW50ZXJlZFwiIG9yIFwibGVmdFwiIHRoYXQgZWxlbWVudC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7c3RyaW5nfSBsZWF2ZUlEIElEIGJlaW5nIGxlZnQuXG5cdCAgICogQHBhcmFtIHtzdHJpbmd9IGVudGVySUQgSUQgYmVpbmcgZW50ZXJlZC5cblx0ICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYiBDYWxsYmFjayB0byBpbnZva2Ugb24gZWFjaCBlbnRlcmVkL2xlZnQgSUQuXG5cdCAgICogQHBhcmFtIHsqfSB1cEFyZyBBcmd1bWVudCB0byBpbnZva2UgdGhlIGNhbGxiYWNrIHdpdGggb24gbGVmdCBJRHMuXG5cdCAgICogQHBhcmFtIHsqfSBkb3duQXJnIEFyZ3VtZW50IHRvIGludm9rZSB0aGUgY2FsbGJhY2sgd2l0aCBvbiBlbnRlcmVkIElEcy5cblx0ICAgKiBAaW50ZXJuYWxcblx0ICAgKi9cblx0ICB0cmF2ZXJzZUVudGVyTGVhdmU6IGZ1bmN0aW9uIChsZWF2ZUlELCBlbnRlcklELCBjYiwgdXBBcmcsIGRvd25BcmcpIHtcblx0ICAgIHZhciBhbmNlc3RvcklEID0gZ2V0Rmlyc3RDb21tb25BbmNlc3RvcklEKGxlYXZlSUQsIGVudGVySUQpO1xuXHQgICAgaWYgKGFuY2VzdG9ySUQgIT09IGxlYXZlSUQpIHtcblx0ICAgICAgdHJhdmVyc2VQYXJlbnRQYXRoKGxlYXZlSUQsIGFuY2VzdG9ySUQsIGNiLCB1cEFyZywgZmFsc2UsIHRydWUpO1xuXHQgICAgfVxuXHQgICAgaWYgKGFuY2VzdG9ySUQgIT09IGVudGVySUQpIHtcblx0ICAgICAgdHJhdmVyc2VQYXJlbnRQYXRoKGFuY2VzdG9ySUQsIGVudGVySUQsIGNiLCBkb3duQXJnLCB0cnVlLCBmYWxzZSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogU2ltdWxhdGVzIHRoZSB0cmF2ZXJzYWwgb2YgYSB0d28tcGhhc2UsIGNhcHR1cmUvYnViYmxlIGV2ZW50IGRpc3BhdGNoLlxuXHQgICAqXG5cdCAgICogTk9URTogVGhpcyB0cmF2ZXJzYWwgaGFwcGVucyBvbiBJRHMgd2l0aG91dCB0b3VjaGluZyB0aGUgRE9NLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtzdHJpbmd9IHRhcmdldElEIElEIG9mIHRoZSB0YXJnZXQgbm9kZS5cblx0ICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYiBDYWxsYmFjayB0byBpbnZva2UuXG5cdCAgICogQHBhcmFtIHsqfSBhcmcgQXJndW1lbnQgdG8gaW52b2tlIHRoZSBjYWxsYmFjayB3aXRoLlxuXHQgICAqIEBpbnRlcm5hbFxuXHQgICAqL1xuXHQgIHRyYXZlcnNlVHdvUGhhc2U6IGZ1bmN0aW9uICh0YXJnZXRJRCwgY2IsIGFyZykge1xuXHQgICAgaWYgKHRhcmdldElEKSB7XG5cdCAgICAgIHRyYXZlcnNlUGFyZW50UGF0aCgnJywgdGFyZ2V0SUQsIGNiLCBhcmcsIHRydWUsIGZhbHNlKTtcblx0ICAgICAgdHJhdmVyc2VQYXJlbnRQYXRoKHRhcmdldElELCAnJywgY2IsIGFyZywgZmFsc2UsIHRydWUpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFNhbWUgYXMgYHRyYXZlcnNlVHdvUGhhc2VgIGJ1dCBza2lwcyB0aGUgYHRhcmdldElEYC5cblx0ICAgKi9cblx0ICB0cmF2ZXJzZVR3b1BoYXNlU2tpcFRhcmdldDogZnVuY3Rpb24gKHRhcmdldElELCBjYiwgYXJnKSB7XG5cdCAgICBpZiAodGFyZ2V0SUQpIHtcblx0ICAgICAgdHJhdmVyc2VQYXJlbnRQYXRoKCcnLCB0YXJnZXRJRCwgY2IsIGFyZywgdHJ1ZSwgdHJ1ZSk7XG5cdCAgICAgIHRyYXZlcnNlUGFyZW50UGF0aCh0YXJnZXRJRCwgJycsIGNiLCBhcmcsIHRydWUsIHRydWUpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFRyYXZlcnNlIGEgbm9kZSBJRCwgY2FsbGluZyB0aGUgc3VwcGxpZWQgYGNiYCBmb3IgZWFjaCBhbmNlc3RvciBJRC4gRm9yXG5cdCAgICogZXhhbXBsZSwgcGFzc2luZyBgLjAuJHJvdy0wLjFgIHdvdWxkIHJlc3VsdCBpbiBgY2JgIGdldHRpbmcgY2FsbGVkXG5cdCAgICogd2l0aCBgLjBgLCBgLjAuJHJvdy0wYCwgYW5kIGAuMC4kcm93LTAuMWAuXG5cdCAgICpcblx0ICAgKiBOT1RFOiBUaGlzIHRyYXZlcnNhbCBoYXBwZW5zIG9uIElEcyB3aXRob3V0IHRvdWNoaW5nIHRoZSBET00uXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge3N0cmluZ30gdGFyZ2V0SUQgSUQgb2YgdGhlIHRhcmdldCBub2RlLlxuXHQgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNiIENhbGxiYWNrIHRvIGludm9rZS5cblx0ICAgKiBAcGFyYW0geyp9IGFyZyBBcmd1bWVudCB0byBpbnZva2UgdGhlIGNhbGxiYWNrIHdpdGguXG5cdCAgICogQGludGVybmFsXG5cdCAgICovXG5cdCAgdHJhdmVyc2VBbmNlc3RvcnM6IGZ1bmN0aW9uICh0YXJnZXRJRCwgY2IsIGFyZykge1xuXHQgICAgdHJhdmVyc2VQYXJlbnRQYXRoKCcnLCB0YXJnZXRJRCwgY2IsIGFyZywgdHJ1ZSwgZmFsc2UpO1xuXHQgIH0sXG5cdFxuXHQgIGdldEZpcnN0Q29tbW9uQW5jZXN0b3JJRDogZ2V0Rmlyc3RDb21tb25BbmNlc3RvcklELFxuXHRcblx0ICAvKipcblx0ICAgKiBFeHBvc2VkIGZvciB1bml0IHRlc3RpbmcuXG5cdCAgICogQHByaXZhdGVcblx0ICAgKi9cblx0ICBfZ2V0TmV4dERlc2NlbmRhbnRJRDogZ2V0TmV4dERlc2NlbmRhbnRJRCxcblx0XG5cdCAgaXNBbmNlc3RvcklET2Y6IGlzQW5jZXN0b3JJRE9mLFxuXHRcblx0ICBTRVBBUkFUT1I6IFNFUEFSQVRPUlxuXHRcblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gUmVhY3RJbnN0YW5jZUhhbmRsZXM7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpKSlcblxuLyoqKi8gfSksXG4vKiA0NiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RSb290SW5kZXhcblx0ICogQHR5cGVjaGVja3Ncblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgUmVhY3RSb290SW5kZXhJbmplY3Rpb24gPSB7XG5cdCAgLyoqXG5cdCAgICogQHBhcmFtIHtmdW5jdGlvbn0gX2NyZWF0ZVJlYWN0Um9vdEluZGV4XG5cdCAgICovXG5cdCAgaW5qZWN0Q3JlYXRlUmVhY3RSb290SW5kZXg6IGZ1bmN0aW9uIChfY3JlYXRlUmVhY3RSb290SW5kZXgpIHtcblx0ICAgIFJlYWN0Um9vdEluZGV4LmNyZWF0ZVJlYWN0Um9vdEluZGV4ID0gX2NyZWF0ZVJlYWN0Um9vdEluZGV4O1xuXHQgIH1cblx0fTtcblx0XG5cdHZhciBSZWFjdFJvb3RJbmRleCA9IHtcblx0ICBjcmVhdGVSZWFjdFJvb3RJbmRleDogbnVsbCxcblx0ICBpbmplY3Rpb246IFJlYWN0Um9vdEluZGV4SW5qZWN0aW9uXG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFJlYWN0Um9vdEluZGV4O1xuXG4vKioqLyB9KSxcbi8qIDQ3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBSZWFjdEluc3RhbmNlTWFwXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0LyoqXG5cdCAqIGBSZWFjdEluc3RhbmNlTWFwYCBtYWludGFpbnMgYSBtYXBwaW5nIGZyb20gYSBwdWJsaWMgZmFjaW5nIHN0YXRlZnVsXG5cdCAqIGluc3RhbmNlIChrZXkpIGFuZCB0aGUgaW50ZXJuYWwgcmVwcmVzZW50YXRpb24gKHZhbHVlKS4gVGhpcyBhbGxvd3MgcHVibGljXG5cdCAqIG1ldGhvZHMgdG8gYWNjZXB0IHRoZSB1c2VyIGZhY2luZyBpbnN0YW5jZSBhcyBhbiBhcmd1bWVudCBhbmQgbWFwIHRoZW0gYmFja1xuXHQgKiB0byBpbnRlcm5hbCBtZXRob2RzLlxuXHQgKi9cblx0XG5cdC8vIFRPRE86IFJlcGxhY2UgdGhpcyB3aXRoIEVTNjogdmFyIFJlYWN0SW5zdGFuY2VNYXAgPSBuZXcgTWFwKCk7XG5cdHZhciBSZWFjdEluc3RhbmNlTWFwID0ge1xuXHRcblx0ICAvKipcblx0ICAgKiBUaGlzIEFQSSBzaG91bGQgYmUgY2FsbGVkIGBkZWxldGVgIGJ1dCB3ZSdkIGhhdmUgdG8gbWFrZSBzdXJlIHRvIGFsd2F5c1xuXHQgICAqIHRyYW5zZm9ybSB0aGVzZSB0byBzdHJpbmdzIGZvciBJRSBzdXBwb3J0LiBXaGVuIHRoaXMgdHJhbnNmb3JtIGlzIGZ1bGx5XG5cdCAgICogc3VwcG9ydGVkIHdlIGNhbiByZW5hbWUgaXQuXG5cdCAgICovXG5cdCAgcmVtb3ZlOiBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICBrZXkuX3JlYWN0SW50ZXJuYWxJbnN0YW5jZSA9IHVuZGVmaW5lZDtcblx0ICB9LFxuXHRcblx0ICBnZXQ6IGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgIHJldHVybiBrZXkuX3JlYWN0SW50ZXJuYWxJbnN0YW5jZTtcblx0ICB9LFxuXHRcblx0ICBoYXM6IGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgIHJldHVybiBrZXkuX3JlYWN0SW50ZXJuYWxJbnN0YW5jZSAhPT0gdW5kZWZpbmVkO1xuXHQgIH0sXG5cdFxuXHQgIHNldDogZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcblx0ICAgIGtleS5fcmVhY3RJbnRlcm5hbEluc3RhbmNlID0gdmFsdWU7XG5cdCAgfVxuXHRcblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gUmVhY3RJbnN0YW5jZU1hcDtcblxuLyoqKi8gfSksXG4vKiA0OCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RNYXJrdXBDaGVja3N1bVxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBhZGxlcjMyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OSk7XG5cdFxuXHR2YXIgVEFHX0VORCA9IC9cXC8/Pi87XG5cdFxuXHR2YXIgUmVhY3RNYXJrdXBDaGVja3N1bSA9IHtcblx0ICBDSEVDS1NVTV9BVFRSX05BTUU6ICdkYXRhLXJlYWN0LWNoZWNrc3VtJyxcblx0XG5cdCAgLyoqXG5cdCAgICogQHBhcmFtIHtzdHJpbmd9IG1hcmt1cCBNYXJrdXAgc3RyaW5nXG5cdCAgICogQHJldHVybiB7c3RyaW5nfSBNYXJrdXAgc3RyaW5nIHdpdGggY2hlY2tzdW0gYXR0cmlidXRlIGF0dGFjaGVkXG5cdCAgICovXG5cdCAgYWRkQ2hlY2tzdW1Ub01hcmt1cDogZnVuY3Rpb24gKG1hcmt1cCkge1xuXHQgICAgdmFyIGNoZWNrc3VtID0gYWRsZXIzMihtYXJrdXApO1xuXHRcblx0ICAgIC8vIEFkZCBjaGVja3N1bSAoaGFuZGxlIGJvdGggcGFyZW50IHRhZ3MgYW5kIHNlbGYtY2xvc2luZyB0YWdzKVxuXHQgICAgcmV0dXJuIG1hcmt1cC5yZXBsYWNlKFRBR19FTkQsICcgJyArIFJlYWN0TWFya3VwQ2hlY2tzdW0uQ0hFQ0tTVU1fQVRUUl9OQU1FICsgJz1cIicgKyBjaGVja3N1bSArICdcIiQmJyk7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogQHBhcmFtIHtzdHJpbmd9IG1hcmt1cCB0byB1c2Vcblx0ICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGVsZW1lbnQgcm9vdCBSZWFjdCBlbGVtZW50XG5cdCAgICogQHJldHVybnMge2Jvb2xlYW59IHdoZXRoZXIgb3Igbm90IHRoZSBtYXJrdXAgaXMgdGhlIHNhbWVcblx0ICAgKi9cblx0ICBjYW5SZXVzZU1hcmt1cDogZnVuY3Rpb24gKG1hcmt1cCwgZWxlbWVudCkge1xuXHQgICAgdmFyIGV4aXN0aW5nQ2hlY2tzdW0gPSBlbGVtZW50LmdldEF0dHJpYnV0ZShSZWFjdE1hcmt1cENoZWNrc3VtLkNIRUNLU1VNX0FUVFJfTkFNRSk7XG5cdCAgICBleGlzdGluZ0NoZWNrc3VtID0gZXhpc3RpbmdDaGVja3N1bSAmJiBwYXJzZUludChleGlzdGluZ0NoZWNrc3VtLCAxMCk7XG5cdCAgICB2YXIgbWFya3VwQ2hlY2tzdW0gPSBhZGxlcjMyKG1hcmt1cCk7XG5cdCAgICByZXR1cm4gbWFya3VwQ2hlY2tzdW0gPT09IGV4aXN0aW5nQ2hlY2tzdW07XG5cdCAgfVxuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBSZWFjdE1hcmt1cENoZWNrc3VtO1xuXG4vKioqLyB9KSxcbi8qIDQ5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBhZGxlcjMyXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIE1PRCA9IDY1NTIxO1xuXHRcblx0Ly8gYWRsZXIzMiBpcyBub3QgY3J5cHRvZ3JhcGhpY2FsbHkgc3Ryb25nLCBhbmQgaXMgb25seSB1c2VkIHRvIHNhbml0eSBjaGVjayB0aGF0XG5cdC8vIG1hcmt1cCBnZW5lcmF0ZWQgb24gdGhlIHNlcnZlciBtYXRjaGVzIHRoZSBtYXJrdXAgZ2VuZXJhdGVkIG9uIHRoZSBjbGllbnQuXG5cdC8vIFRoaXMgaW1wbGVtZW50YXRpb24gKGEgbW9kaWZpZWQgdmVyc2lvbiBvZiB0aGUgU2hlZXRKUyB2ZXJzaW9uKSBoYXMgYmVlbiBvcHRpbWl6ZWRcblx0Ly8gZm9yIG91ciB1c2UgY2FzZSwgYXQgdGhlIGV4cGVuc2Ugb2YgY29uZm9ybWluZyB0byB0aGUgYWRsZXIzMiBzcGVjaWZpY2F0aW9uXG5cdC8vIGZvciBub24tYXNjaWkgaW5wdXRzLlxuXHRmdW5jdGlvbiBhZGxlcjMyKGRhdGEpIHtcblx0ICB2YXIgYSA9IDE7XG5cdCAgdmFyIGIgPSAwO1xuXHQgIHZhciBpID0gMDtcblx0ICB2YXIgbCA9IGRhdGEubGVuZ3RoO1xuXHQgIHZhciBtID0gbCAmIH4weDM7XG5cdCAgd2hpbGUgKGkgPCBtKSB7XG5cdCAgICBmb3IgKDsgaSA8IE1hdGgubWluKGkgKyA0MDk2LCBtKTsgaSArPSA0KSB7XG5cdCAgICAgIGIgKz0gKGEgKz0gZGF0YS5jaGFyQ29kZUF0KGkpKSArIChhICs9IGRhdGEuY2hhckNvZGVBdChpICsgMSkpICsgKGEgKz0gZGF0YS5jaGFyQ29kZUF0KGkgKyAyKSkgKyAoYSArPSBkYXRhLmNoYXJDb2RlQXQoaSArIDMpKTtcblx0ICAgIH1cblx0ICAgIGEgJT0gTU9EO1xuXHQgICAgYiAlPSBNT0Q7XG5cdCAgfVxuXHQgIGZvciAoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBiICs9IGEgKz0gZGF0YS5jaGFyQ29kZUF0KGkpO1xuXHQgIH1cblx0ICBhICU9IE1PRDtcblx0ICBiICU9IE1PRDtcblx0ICByZXR1cm4gYSB8IGIgPDwgMTY7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYWRsZXIzMjtcblxuLyoqKi8gfSksXG4vKiA1MCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RSZWNvbmNpbGVyXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIFJlYWN0UmVmID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MSk7XG5cdFxuXHQvKipcblx0ICogSGVscGVyIHRvIGNhbGwgUmVhY3RSZWYuYXR0YWNoUmVmcyB3aXRoIHRoaXMgY29tcG9zaXRlIGNvbXBvbmVudCwgc3BsaXQgb3V0XG5cdCAqIHRvIGF2b2lkIGFsbG9jYXRpb25zIGluIHRoZSB0cmFuc2FjdGlvbiBtb3VudC1yZWFkeSBxdWV1ZS5cblx0ICovXG5cdGZ1bmN0aW9uIGF0dGFjaFJlZnMoKSB7XG5cdCAgUmVhY3RSZWYuYXR0YWNoUmVmcyh0aGlzLCB0aGlzLl9jdXJyZW50RWxlbWVudCk7XG5cdH1cblx0XG5cdHZhciBSZWFjdFJlY29uY2lsZXIgPSB7XG5cdFxuXHQgIC8qKlxuXHQgICAqIEluaXRpYWxpemVzIHRoZSBjb21wb25lbnQsIHJlbmRlcnMgbWFya3VwLCBhbmQgcmVnaXN0ZXJzIGV2ZW50IGxpc3RlbmVycy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7UmVhY3RDb21wb25lbnR9IGludGVybmFsSW5zdGFuY2Vcblx0ICAgKiBAcGFyYW0ge3N0cmluZ30gcm9vdElEIERPTSBJRCBvZiB0aGUgcm9vdCBub2RlLlxuXHQgICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbnxSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuXHQgICAqIEByZXR1cm4gez9zdHJpbmd9IFJlbmRlcmVkIG1hcmt1cCB0byBiZSBpbnNlcnRlZCBpbnRvIHRoZSBET00uXG5cdCAgICogQGZpbmFsXG5cdCAgICogQGludGVybmFsXG5cdCAgICovXG5cdCAgbW91bnRDb21wb25lbnQ6IGZ1bmN0aW9uIChpbnRlcm5hbEluc3RhbmNlLCByb290SUQsIHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG5cdCAgICB2YXIgbWFya3VwID0gaW50ZXJuYWxJbnN0YW5jZS5tb3VudENvbXBvbmVudChyb290SUQsIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcblx0ICAgIGlmIChpbnRlcm5hbEluc3RhbmNlLl9jdXJyZW50RWxlbWVudCAmJiBpbnRlcm5hbEluc3RhbmNlLl9jdXJyZW50RWxlbWVudC5yZWYgIT0gbnVsbCkge1xuXHQgICAgICB0cmFuc2FjdGlvbi5nZXRSZWFjdE1vdW50UmVhZHkoKS5lbnF1ZXVlKGF0dGFjaFJlZnMsIGludGVybmFsSW5zdGFuY2UpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIG1hcmt1cDtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBSZWxlYXNlcyBhbnkgcmVzb3VyY2VzIGFsbG9jYXRlZCBieSBgbW91bnRDb21wb25lbnRgLlxuXHQgICAqXG5cdCAgICogQGZpbmFsXG5cdCAgICogQGludGVybmFsXG5cdCAgICovXG5cdCAgdW5tb3VudENvbXBvbmVudDogZnVuY3Rpb24gKGludGVybmFsSW5zdGFuY2UpIHtcblx0ICAgIFJlYWN0UmVmLmRldGFjaFJlZnMoaW50ZXJuYWxJbnN0YW5jZSwgaW50ZXJuYWxJbnN0YW5jZS5fY3VycmVudEVsZW1lbnQpO1xuXHQgICAgaW50ZXJuYWxJbnN0YW5jZS51bm1vdW50Q29tcG9uZW50KCk7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogVXBkYXRlIGEgY29tcG9uZW50IHVzaW5nIGEgbmV3IGVsZW1lbnQuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBpbnRlcm5hbEluc3RhbmNlXG5cdCAgICogQHBhcmFtIHtSZWFjdEVsZW1lbnR9IG5leHRFbGVtZW50XG5cdCAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuXHQgICAqIEBwYXJhbSB7b2JqZWN0fSBjb250ZXh0XG5cdCAgICogQGludGVybmFsXG5cdCAgICovXG5cdCAgcmVjZWl2ZUNvbXBvbmVudDogZnVuY3Rpb24gKGludGVybmFsSW5zdGFuY2UsIG5leHRFbGVtZW50LCB0cmFuc2FjdGlvbiwgY29udGV4dCkge1xuXHQgICAgdmFyIHByZXZFbGVtZW50ID0gaW50ZXJuYWxJbnN0YW5jZS5fY3VycmVudEVsZW1lbnQ7XG5cdFxuXHQgICAgaWYgKG5leHRFbGVtZW50ID09PSBwcmV2RWxlbWVudCAmJiBjb250ZXh0ID09PSBpbnRlcm5hbEluc3RhbmNlLl9jb250ZXh0KSB7XG5cdCAgICAgIC8vIFNpbmNlIGVsZW1lbnRzIGFyZSBpbW11dGFibGUgYWZ0ZXIgdGhlIG93bmVyIGlzIHJlbmRlcmVkLFxuXHQgICAgICAvLyB3ZSBjYW4gZG8gYSBjaGVhcCBpZGVudGl0eSBjb21wYXJlIGhlcmUgdG8gZGV0ZXJtaW5lIGlmIHRoaXMgaXMgYVxuXHQgICAgICAvLyBzdXBlcmZsdW91cyByZWNvbmNpbGUuIEl0J3MgcG9zc2libGUgZm9yIHN0YXRlIHRvIGJlIG11dGFibGUgYnV0IHN1Y2hcblx0ICAgICAgLy8gY2hhbmdlIHNob3VsZCB0cmlnZ2VyIGFuIHVwZGF0ZSBvZiB0aGUgb3duZXIgd2hpY2ggd291bGQgcmVjcmVhdGVcblx0ICAgICAgLy8gdGhlIGVsZW1lbnQuIFdlIGV4cGxpY2l0bHkgY2hlY2sgZm9yIHRoZSBleGlzdGVuY2Ugb2YgYW4gb3duZXIgc2luY2Vcblx0ICAgICAgLy8gaXQncyBwb3NzaWJsZSBmb3IgYW4gZWxlbWVudCBjcmVhdGVkIG91dHNpZGUgYSBjb21wb3NpdGUgdG8gYmVcblx0ICAgICAgLy8gZGVlcGx5IG11dGF0ZWQgYW5kIHJldXNlZC5cblx0XG5cdCAgICAgIC8vIFRPRE86IEJhaWxpbmcgb3V0IGVhcmx5IGlzIGp1c3QgYSBwZXJmIG9wdGltaXphdGlvbiByaWdodD9cblx0ICAgICAgLy8gVE9ETzogUmVtb3ZpbmcgdGhlIHJldHVybiBzdGF0ZW1lbnQgc2hvdWxkIGFmZmVjdCBjb3JyZWN0bmVzcz9cblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciByZWZzQ2hhbmdlZCA9IFJlYWN0UmVmLnNob3VsZFVwZGF0ZVJlZnMocHJldkVsZW1lbnQsIG5leHRFbGVtZW50KTtcblx0XG5cdCAgICBpZiAocmVmc0NoYW5nZWQpIHtcblx0ICAgICAgUmVhY3RSZWYuZGV0YWNoUmVmcyhpbnRlcm5hbEluc3RhbmNlLCBwcmV2RWxlbWVudCk7XG5cdCAgICB9XG5cdFxuXHQgICAgaW50ZXJuYWxJbnN0YW5jZS5yZWNlaXZlQ29tcG9uZW50KG5leHRFbGVtZW50LCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG5cdFxuXHQgICAgaWYgKHJlZnNDaGFuZ2VkICYmIGludGVybmFsSW5zdGFuY2UuX2N1cnJlbnRFbGVtZW50ICYmIGludGVybmFsSW5zdGFuY2UuX2N1cnJlbnRFbGVtZW50LnJlZiAhPSBudWxsKSB7XG5cdCAgICAgIHRyYW5zYWN0aW9uLmdldFJlYWN0TW91bnRSZWFkeSgpLmVucXVldWUoYXR0YWNoUmVmcywgaW50ZXJuYWxJbnN0YW5jZSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogRmx1c2ggYW55IGRpcnR5IGNoYW5nZXMgaW4gYSBjb21wb25lbnQuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBpbnRlcm5hbEluc3RhbmNlXG5cdCAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuXHQgICAqIEBpbnRlcm5hbFxuXHQgICAqL1xuXHQgIHBlcmZvcm1VcGRhdGVJZk5lY2Vzc2FyeTogZnVuY3Rpb24gKGludGVybmFsSW5zdGFuY2UsIHRyYW5zYWN0aW9uKSB7XG5cdCAgICBpbnRlcm5hbEluc3RhbmNlLnBlcmZvcm1VcGRhdGVJZk5lY2Vzc2FyeSh0cmFuc2FjdGlvbik7XG5cdCAgfVxuXHRcblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gUmVhY3RSZWNvbmNpbGVyO1xuXG4vKioqLyB9KSxcbi8qIDUxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBSZWFjdFJlZlxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBSZWFjdE93bmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Mik7XG5cdFxuXHR2YXIgUmVhY3RSZWYgPSB7fTtcblx0XG5cdGZ1bmN0aW9uIGF0dGFjaFJlZihyZWYsIGNvbXBvbmVudCwgb3duZXIpIHtcblx0ICBpZiAodHlwZW9mIHJlZiA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgcmVmKGNvbXBvbmVudC5nZXRQdWJsaWNJbnN0YW5jZSgpKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgLy8gTGVnYWN5IHJlZlxuXHQgICAgUmVhY3RPd25lci5hZGRDb21wb25lbnRBc1JlZlRvKGNvbXBvbmVudCwgcmVmLCBvd25lcik7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBkZXRhY2hSZWYocmVmLCBjb21wb25lbnQsIG93bmVyKSB7XG5cdCAgaWYgKHR5cGVvZiByZWYgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgIHJlZihudWxsKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgLy8gTGVnYWN5IHJlZlxuXHQgICAgUmVhY3RPd25lci5yZW1vdmVDb21wb25lbnRBc1JlZkZyb20oY29tcG9uZW50LCByZWYsIG93bmVyKTtcblx0ICB9XG5cdH1cblx0XG5cdFJlYWN0UmVmLmF0dGFjaFJlZnMgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIGVsZW1lbnQpIHtcblx0ICBpZiAoZWxlbWVudCA9PT0gbnVsbCB8fCBlbGVtZW50ID09PSBmYWxzZSkge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICB2YXIgcmVmID0gZWxlbWVudC5yZWY7XG5cdCAgaWYgKHJlZiAhPSBudWxsKSB7XG5cdCAgICBhdHRhY2hSZWYocmVmLCBpbnN0YW5jZSwgZWxlbWVudC5fb3duZXIpO1xuXHQgIH1cblx0fTtcblx0XG5cdFJlYWN0UmVmLnNob3VsZFVwZGF0ZVJlZnMgPSBmdW5jdGlvbiAocHJldkVsZW1lbnQsIG5leHRFbGVtZW50KSB7XG5cdCAgLy8gSWYgZWl0aGVyIHRoZSBvd25lciBvciBhIGByZWZgIGhhcyBjaGFuZ2VkLCBtYWtlIHN1cmUgdGhlIG5ld2VzdCBvd25lclxuXHQgIC8vIGhhcyBzdG9yZWQgYSByZWZlcmVuY2UgdG8gYHRoaXNgLCBhbmQgdGhlIHByZXZpb3VzIG93bmVyIChpZiBkaWZmZXJlbnQpXG5cdCAgLy8gaGFzIGZvcmdvdHRlbiB0aGUgcmVmZXJlbmNlIHRvIGB0aGlzYC4gV2UgdXNlIHRoZSBlbGVtZW50IGluc3RlYWRcblx0ICAvLyBvZiB0aGUgcHVibGljIHRoaXMucHJvcHMgYmVjYXVzZSB0aGUgcG9zdCBwcm9jZXNzaW5nIGNhbm5vdCBkZXRlcm1pbmVcblx0ICAvLyBhIHJlZi4gVGhlIHJlZiBjb25jZXB0dWFsbHkgbGl2ZXMgb24gdGhlIGVsZW1lbnQuXG5cdFxuXHQgIC8vIFRPRE86IFNob3VsZCB0aGlzIGV2ZW4gYmUgcG9zc2libGU/IFRoZSBvd25lciBjYW5ub3QgY2hhbmdlIGJlY2F1c2Vcblx0ICAvLyBpdCdzIGZvcmJpZGRlbiBieSBzaG91bGRVcGRhdGVSZWFjdENvbXBvbmVudC4gVGhlIHJlZiBjYW4gY2hhbmdlXG5cdCAgLy8gaWYgeW91IHN3YXAgdGhlIGtleXMgb2YgYnV0IG5vdCB0aGUgcmVmcy4gUmVjb25zaWRlciB3aGVyZSB0aGlzIGNoZWNrXG5cdCAgLy8gaXMgbWFkZS4gSXQgcHJvYmFibHkgYmVsb25ncyB3aGVyZSB0aGUga2V5IGNoZWNraW5nIGFuZFxuXHQgIC8vIGluc3RhbnRpYXRlUmVhY3RDb21wb25lbnQgaXMgZG9uZS5cblx0XG5cdCAgdmFyIHByZXZFbXB0eSA9IHByZXZFbGVtZW50ID09PSBudWxsIHx8IHByZXZFbGVtZW50ID09PSBmYWxzZTtcblx0ICB2YXIgbmV4dEVtcHR5ID0gbmV4dEVsZW1lbnQgPT09IG51bGwgfHwgbmV4dEVsZW1lbnQgPT09IGZhbHNlO1xuXHRcblx0ICByZXR1cm4oXG5cdCAgICAvLyBUaGlzIGhhcyBhIGZldyBmYWxzZSBwb3NpdGl2ZXMgdy9yL3QgZW1wdHkgY29tcG9uZW50cy5cblx0ICAgIHByZXZFbXB0eSB8fCBuZXh0RW1wdHkgfHwgbmV4dEVsZW1lbnQuX293bmVyICE9PSBwcmV2RWxlbWVudC5fb3duZXIgfHwgbmV4dEVsZW1lbnQucmVmICE9PSBwcmV2RWxlbWVudC5yZWZcblx0ICApO1xuXHR9O1xuXHRcblx0UmVhY3RSZWYuZGV0YWNoUmVmcyA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgZWxlbWVudCkge1xuXHQgIGlmIChlbGVtZW50ID09PSBudWxsIHx8IGVsZW1lbnQgPT09IGZhbHNlKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHZhciByZWYgPSBlbGVtZW50LnJlZjtcblx0ICBpZiAocmVmICE9IG51bGwpIHtcblx0ICAgIGRldGFjaFJlZihyZWYsIGluc3RhbmNlLCBlbGVtZW50Ll9vd25lcik7XG5cdCAgfVxuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBSZWFjdFJlZjtcblxuLyoqKi8gfSksXG4vKiA1MiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzKSB7LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBSZWFjdE93bmVyXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGludmFyaWFudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHRcblx0LyoqXG5cdCAqIFJlYWN0T3duZXJzIGFyZSBjYXBhYmxlIG9mIHN0b3JpbmcgcmVmZXJlbmNlcyB0byBvd25lZCBjb21wb25lbnRzLlxuXHQgKlxuXHQgKiBBbGwgY29tcG9uZW50cyBhcmUgY2FwYWJsZSBvZiAvL2JlaW5nLy8gcmVmZXJlbmNlZCBieSBvd25lciBjb21wb25lbnRzLCBidXRcblx0ICogb25seSBSZWFjdE93bmVyIGNvbXBvbmVudHMgYXJlIGNhcGFibGUgb2YgLy9yZWZlcmVuY2luZy8vIG93bmVkIGNvbXBvbmVudHMuXG5cdCAqIFRoZSBuYW1lZCByZWZlcmVuY2UgaXMga25vd24gYXMgYSBcInJlZlwiLlxuXHQgKlxuXHQgKiBSZWZzIGFyZSBhdmFpbGFibGUgd2hlbiBtb3VudGVkIGFuZCB1cGRhdGVkIGR1cmluZyByZWNvbmNpbGlhdGlvbi5cblx0ICpcblx0ICogICB2YXIgTXlDb21wb25lbnQgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG5cdCAqICAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuXHQgKiAgICAgICByZXR1cm4gKFxuXHQgKiAgICAgICAgIDxkaXYgb25DbGljaz17dGhpcy5oYW5kbGVDbGlja30+XG5cdCAqICAgICAgICAgICA8Q3VzdG9tQ29tcG9uZW50IHJlZj1cImN1c3RvbVwiIC8+XG5cdCAqICAgICAgICAgPC9kaXY+XG5cdCAqICAgICAgICk7XG5cdCAqICAgICB9LFxuXHQgKiAgICAgaGFuZGxlQ2xpY2s6IGZ1bmN0aW9uKCkge1xuXHQgKiAgICAgICB0aGlzLnJlZnMuY3VzdG9tLmhhbmRsZUNsaWNrKCk7XG5cdCAqICAgICB9LFxuXHQgKiAgICAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuXHQgKiAgICAgICB0aGlzLnJlZnMuY3VzdG9tLmluaXRpYWxpemUoKTtcblx0ICogICAgIH1cblx0ICogICB9KTtcblx0ICpcblx0ICogUmVmcyBzaG91bGQgcmFyZWx5IGJlIHVzZWQuIFdoZW4gcmVmcyBhcmUgdXNlZCwgdGhleSBzaG91bGQgb25seSBiZSBkb25lIHRvXG5cdCAqIGNvbnRyb2wgZGF0YSB0aGF0IGlzIG5vdCBoYW5kbGVkIGJ5IFJlYWN0J3MgZGF0YSBmbG93LlxuXHQgKlxuXHQgKiBAY2xhc3MgUmVhY3RPd25lclxuXHQgKi9cblx0dmFyIFJlYWN0T3duZXIgPSB7XG5cdFxuXHQgIC8qKlxuXHQgICAqIEBwYXJhbSB7P29iamVjdH0gb2JqZWN0XG5cdCAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBgb2JqZWN0YCBpcyBhIHZhbGlkIG93bmVyLlxuXHQgICAqIEBmaW5hbFxuXHQgICAqL1xuXHQgIGlzVmFsaWRPd25lcjogZnVuY3Rpb24gKG9iamVjdCkge1xuXHQgICAgcmV0dXJuICEhKG9iamVjdCAmJiB0eXBlb2Ygb2JqZWN0LmF0dGFjaFJlZiA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2Ygb2JqZWN0LmRldGFjaFJlZiA9PT0gJ2Z1bmN0aW9uJyk7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogQWRkcyBhIGNvbXBvbmVudCBieSByZWYgdG8gYW4gb3duZXIgY29tcG9uZW50LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gY29tcG9uZW50IENvbXBvbmVudCB0byByZWZlcmVuY2UuXG5cdCAgICogQHBhcmFtIHtzdHJpbmd9IHJlZiBOYW1lIGJ5IHdoaWNoIHRvIHJlZmVyIHRvIHRoZSBjb21wb25lbnQuXG5cdCAgICogQHBhcmFtIHtSZWFjdE93bmVyfSBvd25lciBDb21wb25lbnQgb24gd2hpY2ggdG8gcmVjb3JkIHRoZSByZWYuXG5cdCAgICogQGZpbmFsXG5cdCAgICogQGludGVybmFsXG5cdCAgICovXG5cdCAgYWRkQ29tcG9uZW50QXNSZWZUbzogZnVuY3Rpb24gKGNvbXBvbmVudCwgcmVmLCBvd25lcikge1xuXHQgICAgIVJlYWN0T3duZXIuaXNWYWxpZE93bmVyKG93bmVyKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdhZGRDb21wb25lbnRBc1JlZlRvKC4uLik6IE9ubHkgYSBSZWFjdE93bmVyIGNhbiBoYXZlIHJlZnMuIFlvdSBtaWdodCAnICsgJ2JlIGFkZGluZyBhIHJlZiB0byBhIGNvbXBvbmVudCB0aGF0IHdhcyBub3QgY3JlYXRlZCBpbnNpZGUgYSBjb21wb25lbnRcXCdzICcgKyAnYHJlbmRlcmAgbWV0aG9kLCBvciB5b3UgaGF2ZSBtdWx0aXBsZSBjb3BpZXMgb2YgUmVhY3QgbG9hZGVkICcgKyAnKGRldGFpbHM6IGh0dHBzOi8vZmIubWUvcmVhY3QtcmVmcy1tdXN0LWhhdmUtb3duZXIpLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0ICAgIG93bmVyLmF0dGFjaFJlZihyZWYsIGNvbXBvbmVudCk7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogUmVtb3ZlcyBhIGNvbXBvbmVudCBieSByZWYgZnJvbSBhbiBvd25lciBjb21wb25lbnQuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBjb21wb25lbnQgQ29tcG9uZW50IHRvIGRlcmVmZXJlbmNlLlxuXHQgICAqIEBwYXJhbSB7c3RyaW5nfSByZWYgTmFtZSBvZiB0aGUgcmVmIHRvIHJlbW92ZS5cblx0ICAgKiBAcGFyYW0ge1JlYWN0T3duZXJ9IG93bmVyIENvbXBvbmVudCBvbiB3aGljaCB0aGUgcmVmIGlzIHJlY29yZGVkLlxuXHQgICAqIEBmaW5hbFxuXHQgICAqIEBpbnRlcm5hbFxuXHQgICAqL1xuXHQgIHJlbW92ZUNvbXBvbmVudEFzUmVmRnJvbTogZnVuY3Rpb24gKGNvbXBvbmVudCwgcmVmLCBvd25lcikge1xuXHQgICAgIVJlYWN0T3duZXIuaXNWYWxpZE93bmVyKG93bmVyKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdyZW1vdmVDb21wb25lbnRBc1JlZkZyb20oLi4uKTogT25seSBhIFJlYWN0T3duZXIgY2FuIGhhdmUgcmVmcy4gWW91IG1pZ2h0ICcgKyAnYmUgcmVtb3ZpbmcgYSByZWYgdG8gYSBjb21wb25lbnQgdGhhdCB3YXMgbm90IGNyZWF0ZWQgaW5zaWRlIGEgY29tcG9uZW50XFwncyAnICsgJ2ByZW5kZXJgIG1ldGhvZCwgb3IgeW91IGhhdmUgbXVsdGlwbGUgY29waWVzIG9mIFJlYWN0IGxvYWRlZCAnICsgJyhkZXRhaWxzOiBodHRwczovL2ZiLm1lL3JlYWN0LXJlZnMtbXVzdC1oYXZlLW93bmVyKS4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdCAgICAvLyBDaGVjayB0aGF0IGBjb21wb25lbnRgIGlzIHN0aWxsIHRoZSBjdXJyZW50IHJlZiBiZWNhdXNlIHdlIGRvIG5vdCB3YW50IHRvXG5cdCAgICAvLyBkZXRhY2ggdGhlIHJlZiBpZiBhbm90aGVyIGNvbXBvbmVudCBzdG9sZSBpdC5cblx0ICAgIGlmIChvd25lci5nZXRQdWJsaWNJbnN0YW5jZSgpLnJlZnNbcmVmXSA9PT0gY29tcG9uZW50LmdldFB1YmxpY0luc3RhbmNlKCkpIHtcblx0ICAgICAgb3duZXIuZGV0YWNoUmVmKHJlZik7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gUmVhY3RPd25lcjtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oNCkpKVxuXG4vKioqLyB9KSxcbi8qIDUzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MpIHsvKipcblx0ICogQ29weXJpZ2h0IDIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBSZWFjdFVwZGF0ZVF1ZXVlXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIFJlYWN0Q3VycmVudE93bmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblx0dmFyIFJlYWN0RWxlbWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oNDIpO1xuXHR2YXIgUmVhY3RJbnN0YW5jZU1hcCA9IF9fd2VicGFja19yZXF1aXJlX18oNDcpO1xuXHR2YXIgUmVhY3RVcGRhdGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NCk7XG5cdFxuXHR2YXIgYXNzaWduID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7XG5cdHZhciBpbnZhcmlhbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblx0dmFyIHdhcm5pbmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTtcblx0XG5cdGZ1bmN0aW9uIGVucXVldWVVcGRhdGUoaW50ZXJuYWxJbnN0YW5jZSkge1xuXHQgIFJlYWN0VXBkYXRlcy5lbnF1ZXVlVXBkYXRlKGludGVybmFsSW5zdGFuY2UpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXRJbnRlcm5hbEluc3RhbmNlUmVhZHlGb3JVcGRhdGUocHVibGljSW5zdGFuY2UsIGNhbGxlck5hbWUpIHtcblx0ICB2YXIgaW50ZXJuYWxJbnN0YW5jZSA9IFJlYWN0SW5zdGFuY2VNYXAuZ2V0KHB1YmxpY0luc3RhbmNlKTtcblx0ICBpZiAoIWludGVybmFsSW5zdGFuY2UpIHtcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgIC8vIE9ubHkgd2FybiB3aGVuIHdlIGhhdmUgYSBjYWxsZXJOYW1lLiBPdGhlcndpc2Ugd2Ugc2hvdWxkIGJlIHNpbGVudC5cblx0ICAgICAgLy8gV2UncmUgcHJvYmFibHkgY2FsbGluZyBmcm9tIGVucXVldWVDYWxsYmFjay4gV2UgZG9uJ3Qgd2FudCB0byB3YXJuXG5cdCAgICAgIC8vIHRoZXJlIGJlY2F1c2Ugd2UgYWxyZWFkeSB3YXJuZWQgZm9yIHRoZSBjb3JyZXNwb25kaW5nIGxpZmVjeWNsZSBtZXRob2QuXG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKCFjYWxsZXJOYW1lLCAnJXMoLi4uKTogQ2FuIG9ubHkgdXBkYXRlIGEgbW91bnRlZCBvciBtb3VudGluZyBjb21wb25lbnQuICcgKyAnVGhpcyB1c3VhbGx5IG1lYW5zIHlvdSBjYWxsZWQgJXMoKSBvbiBhbiB1bm1vdW50ZWQgY29tcG9uZW50LiAnICsgJ1RoaXMgaXMgYSBuby1vcC4gUGxlYXNlIGNoZWNrIHRoZSBjb2RlIGZvciB0aGUgJXMgY29tcG9uZW50LicsIGNhbGxlck5hbWUsIGNhbGxlck5hbWUsIHB1YmxpY0luc3RhbmNlLmNvbnN0cnVjdG9yLmRpc3BsYXlOYW1lKSA6IHVuZGVmaW5lZDtcblx0ICAgIH1cblx0ICAgIHJldHVybiBudWxsO1xuXHQgIH1cblx0XG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQgPT0gbnVsbCwgJyVzKC4uLik6IENhbm5vdCB1cGRhdGUgZHVyaW5nIGFuIGV4aXN0aW5nIHN0YXRlIHRyYW5zaXRpb24gJyArICcoc3VjaCBhcyB3aXRoaW4gYHJlbmRlcmApLiBSZW5kZXIgbWV0aG9kcyBzaG91bGQgYmUgYSBwdXJlIGZ1bmN0aW9uICcgKyAnb2YgcHJvcHMgYW5kIHN0YXRlLicsIGNhbGxlck5hbWUpIDogdW5kZWZpbmVkO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGludGVybmFsSW5zdGFuY2U7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZWFjdFVwZGF0ZVF1ZXVlIGFsbG93cyBmb3Igc3RhdGUgdXBkYXRlcyB0byBiZSBzY2hlZHVsZWQgaW50byBhIGxhdGVyXG5cdCAqIHJlY29uY2lsaWF0aW9uIHN0ZXAuXG5cdCAqL1xuXHR2YXIgUmVhY3RVcGRhdGVRdWV1ZSA9IHtcblx0XG5cdCAgLyoqXG5cdCAgICogQ2hlY2tzIHdoZXRoZXIgb3Igbm90IHRoaXMgY29tcG9zaXRlIGNvbXBvbmVudCBpcyBtb3VudGVkLlxuXHQgICAqIEBwYXJhbSB7UmVhY3RDbGFzc30gcHVibGljSW5zdGFuY2UgVGhlIGluc3RhbmNlIHdlIHdhbnQgdG8gdGVzdC5cblx0ICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIG1vdW50ZWQsIGZhbHNlIG90aGVyd2lzZS5cblx0ICAgKiBAcHJvdGVjdGVkXG5cdCAgICogQGZpbmFsXG5cdCAgICovXG5cdCAgaXNNb3VudGVkOiBmdW5jdGlvbiAocHVibGljSW5zdGFuY2UpIHtcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgIHZhciBvd25lciA9IFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQ7XG5cdCAgICAgIGlmIChvd25lciAhPT0gbnVsbCkge1xuXHQgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKG93bmVyLl93YXJuZWRBYm91dFJlZnNJblJlbmRlciwgJyVzIGlzIGFjY2Vzc2luZyBpc01vdW50ZWQgaW5zaWRlIGl0cyByZW5kZXIoKSBmdW5jdGlvbi4gJyArICdyZW5kZXIoKSBzaG91bGQgYmUgYSBwdXJlIGZ1bmN0aW9uIG9mIHByb3BzIGFuZCBzdGF0ZS4gSXQgc2hvdWxkICcgKyAnbmV2ZXIgYWNjZXNzIHNvbWV0aGluZyB0aGF0IHJlcXVpcmVzIHN0YWxlIGRhdGEgZnJvbSB0aGUgcHJldmlvdXMgJyArICdyZW5kZXIsIHN1Y2ggYXMgcmVmcy4gTW92ZSB0aGlzIGxvZ2ljIHRvIGNvbXBvbmVudERpZE1vdW50IGFuZCAnICsgJ2NvbXBvbmVudERpZFVwZGF0ZSBpbnN0ZWFkLicsIG93bmVyLmdldE5hbWUoKSB8fCAnQSBjb21wb25lbnQnKSA6IHVuZGVmaW5lZDtcblx0ICAgICAgICBvd25lci5fd2FybmVkQWJvdXRSZWZzSW5SZW5kZXIgPSB0cnVlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICB2YXIgaW50ZXJuYWxJbnN0YW5jZSA9IFJlYWN0SW5zdGFuY2VNYXAuZ2V0KHB1YmxpY0luc3RhbmNlKTtcblx0ICAgIGlmIChpbnRlcm5hbEluc3RhbmNlKSB7XG5cdCAgICAgIC8vIER1cmluZyBjb21wb25lbnRXaWxsTW91bnQgYW5kIHJlbmRlciB0aGlzIHdpbGwgc3RpbGwgYmUgbnVsbCBidXQgYWZ0ZXJcblx0ICAgICAgLy8gdGhhdCB3aWxsIGFsd2F5cyByZW5kZXIgdG8gc29tZXRoaW5nLiBBdCBsZWFzdCBmb3Igbm93LiBTbyB3ZSBjYW4gdXNlXG5cdCAgICAgIC8vIHRoaXMgaGFjay5cblx0ICAgICAgcmV0dXJuICEhaW50ZXJuYWxJbnN0YW5jZS5fcmVuZGVyZWRDb21wb25lbnQ7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogRW5xdWV1ZSBhIGNhbGxiYWNrIHRoYXQgd2lsbCBiZSBleGVjdXRlZCBhZnRlciBhbGwgdGhlIHBlbmRpbmcgdXBkYXRlc1xuXHQgICAqIGhhdmUgcHJvY2Vzc2VkLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtSZWFjdENsYXNzfSBwdWJsaWNJbnN0YW5jZSBUaGUgaW5zdGFuY2UgdG8gdXNlIGFzIGB0aGlzYCBjb250ZXh0LlxuXHQgICAqIEBwYXJhbSB7P2Z1bmN0aW9ufSBjYWxsYmFjayBDYWxsZWQgYWZ0ZXIgc3RhdGUgaXMgdXBkYXRlZC5cblx0ICAgKiBAaW50ZXJuYWxcblx0ICAgKi9cblx0ICBlbnF1ZXVlQ2FsbGJhY2s6IGZ1bmN0aW9uIChwdWJsaWNJbnN0YW5jZSwgY2FsbGJhY2spIHtcblx0ICAgICEodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdlbnF1ZXVlQ2FsbGJhY2soLi4uKTogWW91IGNhbGxlZCBgc2V0UHJvcHNgLCBgcmVwbGFjZVByb3BzYCwgJyArICdgc2V0U3RhdGVgLCBgcmVwbGFjZVN0YXRlYCwgb3IgYGZvcmNlVXBkYXRlYCB3aXRoIGEgY2FsbGJhY2sgdGhhdCAnICsgJ2lzblxcJ3QgY2FsbGFibGUuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXHQgICAgdmFyIGludGVybmFsSW5zdGFuY2UgPSBnZXRJbnRlcm5hbEluc3RhbmNlUmVhZHlGb3JVcGRhdGUocHVibGljSW5zdGFuY2UpO1xuXHRcblx0ICAgIC8vIFByZXZpb3VzbHkgd2Ugd291bGQgdGhyb3cgYW4gZXJyb3IgaWYgd2UgZGlkbid0IGhhdmUgYW4gaW50ZXJuYWxcblx0ICAgIC8vIGluc3RhbmNlLiBTaW5jZSB3ZSB3YW50IHRvIG1ha2UgaXQgYSBuby1vcCBpbnN0ZWFkLCB3ZSBtaXJyb3IgdGhlIHNhbWVcblx0ICAgIC8vIGJlaGF2aW9yIHdlIGhhdmUgaW4gb3RoZXIgZW5xdWV1ZSogbWV0aG9kcy5cblx0ICAgIC8vIFdlIGFsc28gbmVlZCB0byBpZ25vcmUgY2FsbGJhY2tzIGluIGNvbXBvbmVudFdpbGxNb3VudC4gU2VlXG5cdCAgICAvLyBlbnF1ZXVlVXBkYXRlcy5cblx0ICAgIGlmICghaW50ZXJuYWxJbnN0YW5jZSkge1xuXHQgICAgICByZXR1cm4gbnVsbDtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoaW50ZXJuYWxJbnN0YW5jZS5fcGVuZGluZ0NhbGxiYWNrcykge1xuXHQgICAgICBpbnRlcm5hbEluc3RhbmNlLl9wZW5kaW5nQ2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgaW50ZXJuYWxJbnN0YW5jZS5fcGVuZGluZ0NhbGxiYWNrcyA9IFtjYWxsYmFja107XG5cdCAgICB9XG5cdCAgICAvLyBUT0RPOiBUaGUgY2FsbGJhY2sgaGVyZSBpcyBpZ25vcmVkIHdoZW4gc2V0U3RhdGUgaXMgY2FsbGVkIGZyb21cblx0ICAgIC8vIGNvbXBvbmVudFdpbGxNb3VudC4gRWl0aGVyIGZpeCBpdCBvciBkaXNhbGxvdyBkb2luZyBzbyBjb21wbGV0ZWx5IGluXG5cdCAgICAvLyBmYXZvciBvZiBnZXRJbml0aWFsU3RhdGUuIEFsdGVybmF0aXZlbHksIHdlIGNhbiBkaXNhbGxvd1xuXHQgICAgLy8gY29tcG9uZW50V2lsbE1vdW50IGR1cmluZyBzZXJ2ZXItc2lkZSByZW5kZXJpbmcuXG5cdCAgICBlbnF1ZXVlVXBkYXRlKGludGVybmFsSW5zdGFuY2UpO1xuXHQgIH0sXG5cdFxuXHQgIGVucXVldWVDYWxsYmFja0ludGVybmFsOiBmdW5jdGlvbiAoaW50ZXJuYWxJbnN0YW5jZSwgY2FsbGJhY2spIHtcblx0ICAgICEodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdlbnF1ZXVlQ2FsbGJhY2soLi4uKTogWW91IGNhbGxlZCBgc2V0UHJvcHNgLCBgcmVwbGFjZVByb3BzYCwgJyArICdgc2V0U3RhdGVgLCBgcmVwbGFjZVN0YXRlYCwgb3IgYGZvcmNlVXBkYXRlYCB3aXRoIGEgY2FsbGJhY2sgdGhhdCAnICsgJ2lzblxcJ3QgY2FsbGFibGUuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXHQgICAgaWYgKGludGVybmFsSW5zdGFuY2UuX3BlbmRpbmdDYWxsYmFja3MpIHtcblx0ICAgICAgaW50ZXJuYWxJbnN0YW5jZS5fcGVuZGluZ0NhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGludGVybmFsSW5zdGFuY2UuX3BlbmRpbmdDYWxsYmFja3MgPSBbY2FsbGJhY2tdO1xuXHQgICAgfVxuXHQgICAgZW5xdWV1ZVVwZGF0ZShpbnRlcm5hbEluc3RhbmNlKTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBGb3JjZXMgYW4gdXBkYXRlLiBUaGlzIHNob3VsZCBvbmx5IGJlIGludm9rZWQgd2hlbiBpdCBpcyBrbm93biB3aXRoXG5cdCAgICogY2VydGFpbnR5IHRoYXQgd2UgYXJlICoqbm90KiogaW4gYSBET00gdHJhbnNhY3Rpb24uXG5cdCAgICpcblx0ICAgKiBZb3UgbWF5IHdhbnQgdG8gY2FsbCB0aGlzIHdoZW4geW91IGtub3cgdGhhdCBzb21lIGRlZXBlciBhc3BlY3Qgb2YgdGhlXG5cdCAgICogY29tcG9uZW50J3Mgc3RhdGUgaGFzIGNoYW5nZWQgYnV0IGBzZXRTdGF0ZWAgd2FzIG5vdCBjYWxsZWQuXG5cdCAgICpcblx0ICAgKiBUaGlzIHdpbGwgbm90IGludm9rZSBgc2hvdWxkQ29tcG9uZW50VXBkYXRlYCwgYnV0IGl0IHdpbGwgaW52b2tlXG5cdCAgICogYGNvbXBvbmVudFdpbGxVcGRhdGVgIGFuZCBgY29tcG9uZW50RGlkVXBkYXRlYC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7UmVhY3RDbGFzc30gcHVibGljSW5zdGFuY2UgVGhlIGluc3RhbmNlIHRoYXQgc2hvdWxkIHJlcmVuZGVyLlxuXHQgICAqIEBpbnRlcm5hbFxuXHQgICAqL1xuXHQgIGVucXVldWVGb3JjZVVwZGF0ZTogZnVuY3Rpb24gKHB1YmxpY0luc3RhbmNlKSB7XG5cdCAgICB2YXIgaW50ZXJuYWxJbnN0YW5jZSA9IGdldEludGVybmFsSW5zdGFuY2VSZWFkeUZvclVwZGF0ZShwdWJsaWNJbnN0YW5jZSwgJ2ZvcmNlVXBkYXRlJyk7XG5cdFxuXHQgICAgaWYgKCFpbnRlcm5hbEluc3RhbmNlKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICBpbnRlcm5hbEluc3RhbmNlLl9wZW5kaW5nRm9yY2VVcGRhdGUgPSB0cnVlO1xuXHRcblx0ICAgIGVucXVldWVVcGRhdGUoaW50ZXJuYWxJbnN0YW5jZSk7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogUmVwbGFjZXMgYWxsIG9mIHRoZSBzdGF0ZS4gQWx3YXlzIHVzZSB0aGlzIG9yIGBzZXRTdGF0ZWAgdG8gbXV0YXRlIHN0YXRlLlxuXHQgICAqIFlvdSBzaG91bGQgdHJlYXQgYHRoaXMuc3RhdGVgIGFzIGltbXV0YWJsZS5cblx0ICAgKlxuXHQgICAqIFRoZXJlIGlzIG5vIGd1YXJhbnRlZSB0aGF0IGB0aGlzLnN0YXRlYCB3aWxsIGJlIGltbWVkaWF0ZWx5IHVwZGF0ZWQsIHNvXG5cdCAgICogYWNjZXNzaW5nIGB0aGlzLnN0YXRlYCBhZnRlciBjYWxsaW5nIHRoaXMgbWV0aG9kIG1heSByZXR1cm4gdGhlIG9sZCB2YWx1ZS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7UmVhY3RDbGFzc30gcHVibGljSW5zdGFuY2UgVGhlIGluc3RhbmNlIHRoYXQgc2hvdWxkIHJlcmVuZGVyLlxuXHQgICAqIEBwYXJhbSB7b2JqZWN0fSBjb21wbGV0ZVN0YXRlIE5leHQgc3RhdGUuXG5cdCAgICogQGludGVybmFsXG5cdCAgICovXG5cdCAgZW5xdWV1ZVJlcGxhY2VTdGF0ZTogZnVuY3Rpb24gKHB1YmxpY0luc3RhbmNlLCBjb21wbGV0ZVN0YXRlKSB7XG5cdCAgICB2YXIgaW50ZXJuYWxJbnN0YW5jZSA9IGdldEludGVybmFsSW5zdGFuY2VSZWFkeUZvclVwZGF0ZShwdWJsaWNJbnN0YW5jZSwgJ3JlcGxhY2VTdGF0ZScpO1xuXHRcblx0ICAgIGlmICghaW50ZXJuYWxJbnN0YW5jZSkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgaW50ZXJuYWxJbnN0YW5jZS5fcGVuZGluZ1N0YXRlUXVldWUgPSBbY29tcGxldGVTdGF0ZV07XG5cdCAgICBpbnRlcm5hbEluc3RhbmNlLl9wZW5kaW5nUmVwbGFjZVN0YXRlID0gdHJ1ZTtcblx0XG5cdCAgICBlbnF1ZXVlVXBkYXRlKGludGVybmFsSW5zdGFuY2UpO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFNldHMgYSBzdWJzZXQgb2YgdGhlIHN0YXRlLiBUaGlzIG9ubHkgZXhpc3RzIGJlY2F1c2UgX3BlbmRpbmdTdGF0ZSBpc1xuXHQgICAqIGludGVybmFsLiBUaGlzIHByb3ZpZGVzIGEgbWVyZ2luZyBzdHJhdGVneSB0aGF0IGlzIG5vdCBhdmFpbGFibGUgdG8gZGVlcFxuXHQgICAqIHByb3BlcnRpZXMgd2hpY2ggaXMgY29uZnVzaW5nLiBUT0RPOiBFeHBvc2UgcGVuZGluZ1N0YXRlIG9yIGRvbid0IHVzZSBpdFxuXHQgICAqIGR1cmluZyB0aGUgbWVyZ2UuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1JlYWN0Q2xhc3N9IHB1YmxpY0luc3RhbmNlIFRoZSBpbnN0YW5jZSB0aGF0IHNob3VsZCByZXJlbmRlci5cblx0ICAgKiBAcGFyYW0ge29iamVjdH0gcGFydGlhbFN0YXRlIE5leHQgcGFydGlhbCBzdGF0ZSB0byBiZSBtZXJnZWQgd2l0aCBzdGF0ZS5cblx0ICAgKiBAaW50ZXJuYWxcblx0ICAgKi9cblx0ICBlbnF1ZXVlU2V0U3RhdGU6IGZ1bmN0aW9uIChwdWJsaWNJbnN0YW5jZSwgcGFydGlhbFN0YXRlKSB7XG5cdCAgICB2YXIgaW50ZXJuYWxJbnN0YW5jZSA9IGdldEludGVybmFsSW5zdGFuY2VSZWFkeUZvclVwZGF0ZShwdWJsaWNJbnN0YW5jZSwgJ3NldFN0YXRlJyk7XG5cdFxuXHQgICAgaWYgKCFpbnRlcm5hbEluc3RhbmNlKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgcXVldWUgPSBpbnRlcm5hbEluc3RhbmNlLl9wZW5kaW5nU3RhdGVRdWV1ZSB8fCAoaW50ZXJuYWxJbnN0YW5jZS5fcGVuZGluZ1N0YXRlUXVldWUgPSBbXSk7XG5cdCAgICBxdWV1ZS5wdXNoKHBhcnRpYWxTdGF0ZSk7XG5cdFxuXHQgICAgZW5xdWV1ZVVwZGF0ZShpbnRlcm5hbEluc3RhbmNlKTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBTZXRzIGEgc3Vic2V0IG9mIHRoZSBwcm9wcy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7UmVhY3RDbGFzc30gcHVibGljSW5zdGFuY2UgVGhlIGluc3RhbmNlIHRoYXQgc2hvdWxkIHJlcmVuZGVyLlxuXHQgICAqIEBwYXJhbSB7b2JqZWN0fSBwYXJ0aWFsUHJvcHMgU3Vic2V0IG9mIHRoZSBuZXh0IHByb3BzLlxuXHQgICAqIEBpbnRlcm5hbFxuXHQgICAqL1xuXHQgIGVucXVldWVTZXRQcm9wczogZnVuY3Rpb24gKHB1YmxpY0luc3RhbmNlLCBwYXJ0aWFsUHJvcHMpIHtcblx0ICAgIHZhciBpbnRlcm5hbEluc3RhbmNlID0gZ2V0SW50ZXJuYWxJbnN0YW5jZVJlYWR5Rm9yVXBkYXRlKHB1YmxpY0luc3RhbmNlLCAnc2V0UHJvcHMnKTtcblx0ICAgIGlmICghaW50ZXJuYWxJbnN0YW5jZSkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICBSZWFjdFVwZGF0ZVF1ZXVlLmVucXVldWVTZXRQcm9wc0ludGVybmFsKGludGVybmFsSW5zdGFuY2UsIHBhcnRpYWxQcm9wcyk7XG5cdCAgfSxcblx0XG5cdCAgZW5xdWV1ZVNldFByb3BzSW50ZXJuYWw6IGZ1bmN0aW9uIChpbnRlcm5hbEluc3RhbmNlLCBwYXJ0aWFsUHJvcHMpIHtcblx0ICAgIHZhciB0b3BMZXZlbFdyYXBwZXIgPSBpbnRlcm5hbEluc3RhbmNlLl90b3BMZXZlbFdyYXBwZXI7XG5cdCAgICAhdG9wTGV2ZWxXcmFwcGVyID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ3NldFByb3BzKC4uLik6IFlvdSBjYWxsZWQgYHNldFByb3BzYCBvbiBhICcgKyAnY29tcG9uZW50IHdpdGggYSBwYXJlbnQuIFRoaXMgaXMgYW4gYW50aS1wYXR0ZXJuIHNpbmNlIHByb3BzIHdpbGwgJyArICdnZXQgcmVhY3RpdmVseSB1cGRhdGVkIHdoZW4gcmVuZGVyZWQuIEluc3RlYWQsIGNoYW5nZSB0aGUgb3duZXJcXCdzICcgKyAnYHJlbmRlcmAgbWV0aG9kIHRvIHBhc3MgdGhlIGNvcnJlY3QgdmFsdWUgYXMgcHJvcHMgdG8gdGhlIGNvbXBvbmVudCAnICsgJ3doZXJlIGl0IGlzIGNyZWF0ZWQuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXHRcblx0ICAgIC8vIE1lcmdlIHdpdGggdGhlIHBlbmRpbmcgZWxlbWVudCBpZiBpdCBleGlzdHMsIG90aGVyd2lzZSB3aXRoIGV4aXN0aW5nXG5cdCAgICAvLyBlbGVtZW50IHByb3BzLlxuXHQgICAgdmFyIHdyYXBFbGVtZW50ID0gdG9wTGV2ZWxXcmFwcGVyLl9wZW5kaW5nRWxlbWVudCB8fCB0b3BMZXZlbFdyYXBwZXIuX2N1cnJlbnRFbGVtZW50O1xuXHQgICAgdmFyIGVsZW1lbnQgPSB3cmFwRWxlbWVudC5wcm9wcztcblx0ICAgIHZhciBwcm9wcyA9IGFzc2lnbih7fSwgZWxlbWVudC5wcm9wcywgcGFydGlhbFByb3BzKTtcblx0ICAgIHRvcExldmVsV3JhcHBlci5fcGVuZGluZ0VsZW1lbnQgPSBSZWFjdEVsZW1lbnQuY2xvbmVBbmRSZXBsYWNlUHJvcHMod3JhcEVsZW1lbnQsIFJlYWN0RWxlbWVudC5jbG9uZUFuZFJlcGxhY2VQcm9wcyhlbGVtZW50LCBwcm9wcykpO1xuXHRcblx0ICAgIGVucXVldWVVcGRhdGUodG9wTGV2ZWxXcmFwcGVyKTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBSZXBsYWNlcyBhbGwgb2YgdGhlIHByb3BzLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtSZWFjdENsYXNzfSBwdWJsaWNJbnN0YW5jZSBUaGUgaW5zdGFuY2UgdGhhdCBzaG91bGQgcmVyZW5kZXIuXG5cdCAgICogQHBhcmFtIHtvYmplY3R9IHByb3BzIE5ldyBwcm9wcy5cblx0ICAgKiBAaW50ZXJuYWxcblx0ICAgKi9cblx0ICBlbnF1ZXVlUmVwbGFjZVByb3BzOiBmdW5jdGlvbiAocHVibGljSW5zdGFuY2UsIHByb3BzKSB7XG5cdCAgICB2YXIgaW50ZXJuYWxJbnN0YW5jZSA9IGdldEludGVybmFsSW5zdGFuY2VSZWFkeUZvclVwZGF0ZShwdWJsaWNJbnN0YW5jZSwgJ3JlcGxhY2VQcm9wcycpO1xuXHQgICAgaWYgKCFpbnRlcm5hbEluc3RhbmNlKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIFJlYWN0VXBkYXRlUXVldWUuZW5xdWV1ZVJlcGxhY2VQcm9wc0ludGVybmFsKGludGVybmFsSW5zdGFuY2UsIHByb3BzKTtcblx0ICB9LFxuXHRcblx0ICBlbnF1ZXVlUmVwbGFjZVByb3BzSW50ZXJuYWw6IGZ1bmN0aW9uIChpbnRlcm5hbEluc3RhbmNlLCBwcm9wcykge1xuXHQgICAgdmFyIHRvcExldmVsV3JhcHBlciA9IGludGVybmFsSW5zdGFuY2UuX3RvcExldmVsV3JhcHBlcjtcblx0ICAgICF0b3BMZXZlbFdyYXBwZXIgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAncmVwbGFjZVByb3BzKC4uLik6IFlvdSBjYWxsZWQgYHJlcGxhY2VQcm9wc2Agb24gYSAnICsgJ2NvbXBvbmVudCB3aXRoIGEgcGFyZW50LiBUaGlzIGlzIGFuIGFudGktcGF0dGVybiBzaW5jZSBwcm9wcyB3aWxsICcgKyAnZ2V0IHJlYWN0aXZlbHkgdXBkYXRlZCB3aGVuIHJlbmRlcmVkLiBJbnN0ZWFkLCBjaGFuZ2UgdGhlIG93bmVyXFwncyAnICsgJ2ByZW5kZXJgIG1ldGhvZCB0byBwYXNzIHRoZSBjb3JyZWN0IHZhbHVlIGFzIHByb3BzIHRvIHRoZSBjb21wb25lbnQgJyArICd3aGVyZSBpdCBpcyBjcmVhdGVkLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0XG5cdCAgICAvLyBNZXJnZSB3aXRoIHRoZSBwZW5kaW5nIGVsZW1lbnQgaWYgaXQgZXhpc3RzLCBvdGhlcndpc2Ugd2l0aCBleGlzdGluZ1xuXHQgICAgLy8gZWxlbWVudCBwcm9wcy5cblx0ICAgIHZhciB3cmFwRWxlbWVudCA9IHRvcExldmVsV3JhcHBlci5fcGVuZGluZ0VsZW1lbnQgfHwgdG9wTGV2ZWxXcmFwcGVyLl9jdXJyZW50RWxlbWVudDtcblx0ICAgIHZhciBlbGVtZW50ID0gd3JhcEVsZW1lbnQucHJvcHM7XG5cdCAgICB0b3BMZXZlbFdyYXBwZXIuX3BlbmRpbmdFbGVtZW50ID0gUmVhY3RFbGVtZW50LmNsb25lQW5kUmVwbGFjZVByb3BzKHdyYXBFbGVtZW50LCBSZWFjdEVsZW1lbnQuY2xvbmVBbmRSZXBsYWNlUHJvcHMoZWxlbWVudCwgcHJvcHMpKTtcblx0XG5cdCAgICBlbnF1ZXVlVXBkYXRlKHRvcExldmVsV3JhcHBlcik7XG5cdCAgfSxcblx0XG5cdCAgZW5xdWV1ZUVsZW1lbnRJbnRlcm5hbDogZnVuY3Rpb24gKGludGVybmFsSW5zdGFuY2UsIG5ld0VsZW1lbnQpIHtcblx0ICAgIGludGVybmFsSW5zdGFuY2UuX3BlbmRpbmdFbGVtZW50ID0gbmV3RWxlbWVudDtcblx0ICAgIGVucXVldWVVcGRhdGUoaW50ZXJuYWxJbnN0YW5jZSk7XG5cdCAgfVxuXHRcblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gUmVhY3RVcGRhdGVRdWV1ZTtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oNCkpKVxuXG4vKioqLyB9KSxcbi8qIDU0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MpIHsvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0VXBkYXRlc1xuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBDYWxsYmFja1F1ZXVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NSk7XG5cdHZhciBQb29sZWRDbGFzcyA9IF9fd2VicGFja19yZXF1aXJlX18oNTYpO1xuXHR2YXIgUmVhY3RQZXJmID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7XG5cdHZhciBSZWFjdFJlY29uY2lsZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTtcblx0dmFyIFRyYW5zYWN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Nyk7XG5cdFxuXHR2YXIgYXNzaWduID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7XG5cdHZhciBpbnZhcmlhbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblx0XG5cdHZhciBkaXJ0eUNvbXBvbmVudHMgPSBbXTtcblx0dmFyIGFzYXBDYWxsYmFja1F1ZXVlID0gQ2FsbGJhY2tRdWV1ZS5nZXRQb29sZWQoKTtcblx0dmFyIGFzYXBFbnF1ZXVlZCA9IGZhbHNlO1xuXHRcblx0dmFyIGJhdGNoaW5nU3RyYXRlZ3kgPSBudWxsO1xuXHRcblx0ZnVuY3Rpb24gZW5zdXJlSW5qZWN0ZWQoKSB7XG5cdCAgIShSZWFjdFVwZGF0ZXMuUmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbiAmJiBiYXRjaGluZ1N0cmF0ZWd5KSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdFVwZGF0ZXM6IG11c3QgaW5qZWN0IGEgcmVjb25jaWxlIHRyYW5zYWN0aW9uIGNsYXNzIGFuZCBiYXRjaGluZyAnICsgJ3N0cmF0ZWd5JykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXHR9XG5cdFxuXHR2YXIgTkVTVEVEX1VQREFURVMgPSB7XG5cdCAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpcy5kaXJ0eUNvbXBvbmVudHNMZW5ndGggPSBkaXJ0eUNvbXBvbmVudHMubGVuZ3RoO1xuXHQgIH0sXG5cdCAgY2xvc2U6IGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmICh0aGlzLmRpcnR5Q29tcG9uZW50c0xlbmd0aCAhPT0gZGlydHlDb21wb25lbnRzLmxlbmd0aCkge1xuXHQgICAgICAvLyBBZGRpdGlvbmFsIHVwZGF0ZXMgd2VyZSBlbnF1ZXVlZCBieSBjb21wb25lbnREaWRVcGRhdGUgaGFuZGxlcnMgb3Jcblx0ICAgICAgLy8gc2ltaWxhcjsgYmVmb3JlIG91ciBvd24gVVBEQVRFX1FVRVVFSU5HIHdyYXBwZXIgY2xvc2VzLCB3ZSB3YW50IHRvIHJ1blxuXHQgICAgICAvLyB0aGVzZSBuZXcgdXBkYXRlcyBzbyB0aGF0IGlmIEEncyBjb21wb25lbnREaWRVcGRhdGUgY2FsbHMgc2V0U3RhdGUgb25cblx0ICAgICAgLy8gQiwgQiB3aWxsIHVwZGF0ZSBiZWZvcmUgdGhlIGNhbGxiYWNrIEEncyB1cGRhdGVyIHByb3ZpZGVkIHdoZW4gY2FsbGluZ1xuXHQgICAgICAvLyBzZXRTdGF0ZS5cblx0ICAgICAgZGlydHlDb21wb25lbnRzLnNwbGljZSgwLCB0aGlzLmRpcnR5Q29tcG9uZW50c0xlbmd0aCk7XG5cdCAgICAgIGZsdXNoQmF0Y2hlZFVwZGF0ZXMoKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGRpcnR5Q29tcG9uZW50cy5sZW5ndGggPSAwO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdHZhciBVUERBVEVfUVVFVUVJTkcgPSB7XG5cdCAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpcy5jYWxsYmFja1F1ZXVlLnJlc2V0KCk7XG5cdCAgfSxcblx0ICBjbG9zZTogZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpcy5jYWxsYmFja1F1ZXVlLm5vdGlmeUFsbCgpO1xuXHQgIH1cblx0fTtcblx0XG5cdHZhciBUUkFOU0FDVElPTl9XUkFQUEVSUyA9IFtORVNURURfVVBEQVRFUywgVVBEQVRFX1FVRVVFSU5HXTtcblx0XG5cdGZ1bmN0aW9uIFJlYWN0VXBkYXRlc0ZsdXNoVHJhbnNhY3Rpb24oKSB7XG5cdCAgdGhpcy5yZWluaXRpYWxpemVUcmFuc2FjdGlvbigpO1xuXHQgIHRoaXMuZGlydHlDb21wb25lbnRzTGVuZ3RoID0gbnVsbDtcblx0ICB0aGlzLmNhbGxiYWNrUXVldWUgPSBDYWxsYmFja1F1ZXVlLmdldFBvb2xlZCgpO1xuXHQgIHRoaXMucmVjb25jaWxlVHJhbnNhY3Rpb24gPSBSZWFjdFVwZGF0ZXMuUmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbi5nZXRQb29sZWQoIC8qIGZvcmNlSFRNTCAqL2ZhbHNlKTtcblx0fVxuXHRcblx0YXNzaWduKFJlYWN0VXBkYXRlc0ZsdXNoVHJhbnNhY3Rpb24ucHJvdG90eXBlLCBUcmFuc2FjdGlvbi5NaXhpbiwge1xuXHQgIGdldFRyYW5zYWN0aW9uV3JhcHBlcnM6IGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiBUUkFOU0FDVElPTl9XUkFQUEVSUztcblx0ICB9LFxuXHRcblx0ICBkZXN0cnVjdG9yOiBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLmRpcnR5Q29tcG9uZW50c0xlbmd0aCA9IG51bGw7XG5cdCAgICBDYWxsYmFja1F1ZXVlLnJlbGVhc2UodGhpcy5jYWxsYmFja1F1ZXVlKTtcblx0ICAgIHRoaXMuY2FsbGJhY2tRdWV1ZSA9IG51bGw7XG5cdCAgICBSZWFjdFVwZGF0ZXMuUmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbi5yZWxlYXNlKHRoaXMucmVjb25jaWxlVHJhbnNhY3Rpb24pO1xuXHQgICAgdGhpcy5yZWNvbmNpbGVUcmFuc2FjdGlvbiA9IG51bGw7XG5cdCAgfSxcblx0XG5cdCAgcGVyZm9ybTogZnVuY3Rpb24gKG1ldGhvZCwgc2NvcGUsIGEpIHtcblx0ICAgIC8vIEVzc2VudGlhbGx5IGNhbGxzIGB0aGlzLnJlY29uY2lsZVRyYW5zYWN0aW9uLnBlcmZvcm0obWV0aG9kLCBzY29wZSwgYSlgXG5cdCAgICAvLyB3aXRoIHRoaXMgdHJhbnNhY3Rpb24ncyB3cmFwcGVycyBhcm91bmQgaXQuXG5cdCAgICByZXR1cm4gVHJhbnNhY3Rpb24uTWl4aW4ucGVyZm9ybS5jYWxsKHRoaXMsIHRoaXMucmVjb25jaWxlVHJhbnNhY3Rpb24ucGVyZm9ybSwgdGhpcy5yZWNvbmNpbGVUcmFuc2FjdGlvbiwgbWV0aG9kLCBzY29wZSwgYSk7XG5cdCAgfVxuXHR9KTtcblx0XG5cdFBvb2xlZENsYXNzLmFkZFBvb2xpbmdUbyhSZWFjdFVwZGF0ZXNGbHVzaFRyYW5zYWN0aW9uKTtcblx0XG5cdGZ1bmN0aW9uIGJhdGNoZWRVcGRhdGVzKGNhbGxiYWNrLCBhLCBiLCBjLCBkLCBlKSB7XG5cdCAgZW5zdXJlSW5qZWN0ZWQoKTtcblx0ICBiYXRjaGluZ1N0cmF0ZWd5LmJhdGNoZWRVcGRhdGVzKGNhbGxiYWNrLCBhLCBiLCBjLCBkLCBlKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEFycmF5IGNvbXBhcmF0b3IgZm9yIFJlYWN0Q29tcG9uZW50cyBieSBtb3VudCBvcmRlcmluZy5cblx0ICpcblx0ICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gYzEgZmlyc3QgY29tcG9uZW50IHlvdSdyZSBjb21wYXJpbmdcblx0ICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gYzIgc2Vjb25kIGNvbXBvbmVudCB5b3UncmUgY29tcGFyaW5nXG5cdCAqIEByZXR1cm4ge251bWJlcn0gUmV0dXJuIHZhbHVlIHVzYWJsZSBieSBBcnJheS5wcm90b3R5cGUuc29ydCgpLlxuXHQgKi9cblx0ZnVuY3Rpb24gbW91bnRPcmRlckNvbXBhcmF0b3IoYzEsIGMyKSB7XG5cdCAgcmV0dXJuIGMxLl9tb3VudE9yZGVyIC0gYzIuX21vdW50T3JkZXI7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJ1bkJhdGNoZWRVcGRhdGVzKHRyYW5zYWN0aW9uKSB7XG5cdCAgdmFyIGxlbiA9IHRyYW5zYWN0aW9uLmRpcnR5Q29tcG9uZW50c0xlbmd0aDtcblx0ICAhKGxlbiA9PT0gZGlydHlDb21wb25lbnRzLmxlbmd0aCkgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRXhwZWN0ZWQgZmx1c2ggdHJhbnNhY3Rpb25cXCdzIHN0b3JlZCBkaXJ0eS1jb21wb25lbnRzIGxlbmd0aCAoJXMpIHRvICcgKyAnbWF0Y2ggZGlydHktY29tcG9uZW50cyBhcnJheSBsZW5ndGggKCVzKS4nLCBsZW4sIGRpcnR5Q29tcG9uZW50cy5sZW5ndGgpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0XG5cdCAgLy8gU2luY2UgcmVjb25jaWxpbmcgYSBjb21wb25lbnQgaGlnaGVyIGluIHRoZSBvd25lciBoaWVyYXJjaHkgdXN1YWxseSAobm90XG5cdCAgLy8gYWx3YXlzIC0tIHNlZSBzaG91bGRDb21wb25lbnRVcGRhdGUoKSkgd2lsbCByZWNvbmNpbGUgY2hpbGRyZW4sIHJlY29uY2lsZVxuXHQgIC8vIHRoZW0gYmVmb3JlIHRoZWlyIGNoaWxkcmVuIGJ5IHNvcnRpbmcgdGhlIGFycmF5LlxuXHQgIGRpcnR5Q29tcG9uZW50cy5zb3J0KG1vdW50T3JkZXJDb21wYXJhdG9yKTtcblx0XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXHQgICAgLy8gSWYgYSBjb21wb25lbnQgaXMgdW5tb3VudGVkIGJlZm9yZSBwZW5kaW5nIGNoYW5nZXMgYXBwbHksIGl0IHdpbGwgc3RpbGxcblx0ICAgIC8vIGJlIGhlcmUsIGJ1dCB3ZSBhc3N1bWUgdGhhdCBpdCBoYXMgY2xlYXJlZCBpdHMgX3BlbmRpbmdDYWxsYmFja3MgYW5kXG5cdCAgICAvLyB0aGF0IHBlcmZvcm1VcGRhdGVJZk5lY2Vzc2FyeSBpcyBhIG5vb3AuXG5cdCAgICB2YXIgY29tcG9uZW50ID0gZGlydHlDb21wb25lbnRzW2ldO1xuXHRcblx0ICAgIC8vIElmIHBlcmZvcm1VcGRhdGVJZk5lY2Vzc2FyeSBoYXBwZW5zIHRvIGVucXVldWUgYW55IG5ldyB1cGRhdGVzLCB3ZVxuXHQgICAgLy8gc2hvdWxkbid0IGV4ZWN1dGUgdGhlIGNhbGxiYWNrcyB1bnRpbCB0aGUgbmV4dCByZW5kZXIgaGFwcGVucywgc29cblx0ICAgIC8vIHN0YXNoIHRoZSBjYWxsYmFja3MgZmlyc3Rcblx0ICAgIHZhciBjYWxsYmFja3MgPSBjb21wb25lbnQuX3BlbmRpbmdDYWxsYmFja3M7XG5cdCAgICBjb21wb25lbnQuX3BlbmRpbmdDYWxsYmFja3MgPSBudWxsO1xuXHRcblx0ICAgIFJlYWN0UmVjb25jaWxlci5wZXJmb3JtVXBkYXRlSWZOZWNlc3NhcnkoY29tcG9uZW50LCB0cmFuc2FjdGlvbi5yZWNvbmNpbGVUcmFuc2FjdGlvbik7XG5cdFxuXHQgICAgaWYgKGNhbGxiYWNrcykge1xuXHQgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNhbGxiYWNrcy5sZW5ndGg7IGorKykge1xuXHQgICAgICAgIHRyYW5zYWN0aW9uLmNhbGxiYWNrUXVldWUuZW5xdWV1ZShjYWxsYmFja3Nbal0sIGNvbXBvbmVudC5nZXRQdWJsaWNJbnN0YW5jZSgpKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0dmFyIGZsdXNoQmF0Y2hlZFVwZGF0ZXMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgLy8gUmVhY3RVcGRhdGVzRmx1c2hUcmFuc2FjdGlvbidzIHdyYXBwZXJzIHdpbGwgY2xlYXIgdGhlIGRpcnR5Q29tcG9uZW50c1xuXHQgIC8vIGFycmF5IGFuZCBwZXJmb3JtIGFueSB1cGRhdGVzIGVucXVldWVkIGJ5IG1vdW50LXJlYWR5IGhhbmRsZXJzIChpLmUuLFxuXHQgIC8vIGNvbXBvbmVudERpZFVwZGF0ZSkgYnV0IHdlIG5lZWQgdG8gY2hlY2sgaGVyZSB0b28gaW4gb3JkZXIgdG8gY2F0Y2hcblx0ICAvLyB1cGRhdGVzIGVucXVldWVkIGJ5IHNldFN0YXRlIGNhbGxiYWNrcyBhbmQgYXNhcCBjYWxscy5cblx0ICB3aGlsZSAoZGlydHlDb21wb25lbnRzLmxlbmd0aCB8fCBhc2FwRW5xdWV1ZWQpIHtcblx0ICAgIGlmIChkaXJ0eUNvbXBvbmVudHMubGVuZ3RoKSB7XG5cdCAgICAgIHZhciB0cmFuc2FjdGlvbiA9IFJlYWN0VXBkYXRlc0ZsdXNoVHJhbnNhY3Rpb24uZ2V0UG9vbGVkKCk7XG5cdCAgICAgIHRyYW5zYWN0aW9uLnBlcmZvcm0ocnVuQmF0Y2hlZFVwZGF0ZXMsIG51bGwsIHRyYW5zYWN0aW9uKTtcblx0ICAgICAgUmVhY3RVcGRhdGVzRmx1c2hUcmFuc2FjdGlvbi5yZWxlYXNlKHRyYW5zYWN0aW9uKTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoYXNhcEVucXVldWVkKSB7XG5cdCAgICAgIGFzYXBFbnF1ZXVlZCA9IGZhbHNlO1xuXHQgICAgICB2YXIgcXVldWUgPSBhc2FwQ2FsbGJhY2tRdWV1ZTtcblx0ICAgICAgYXNhcENhbGxiYWNrUXVldWUgPSBDYWxsYmFja1F1ZXVlLmdldFBvb2xlZCgpO1xuXHQgICAgICBxdWV1ZS5ub3RpZnlBbGwoKTtcblx0ICAgICAgQ2FsbGJhY2tRdWV1ZS5yZWxlYXNlKHF1ZXVlKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdGZsdXNoQmF0Y2hlZFVwZGF0ZXMgPSBSZWFjdFBlcmYubWVhc3VyZSgnUmVhY3RVcGRhdGVzJywgJ2ZsdXNoQmF0Y2hlZFVwZGF0ZXMnLCBmbHVzaEJhdGNoZWRVcGRhdGVzKTtcblx0XG5cdC8qKlxuXHQgKiBNYXJrIGEgY29tcG9uZW50IGFzIG5lZWRpbmcgYSByZXJlbmRlciwgYWRkaW5nIGFuIG9wdGlvbmFsIGNhbGxiYWNrIHRvIGFcblx0ICogbGlzdCBvZiBmdW5jdGlvbnMgd2hpY2ggd2lsbCBiZSBleGVjdXRlZCBvbmNlIHRoZSByZXJlbmRlciBvY2N1cnMuXG5cdCAqL1xuXHRmdW5jdGlvbiBlbnF1ZXVlVXBkYXRlKGNvbXBvbmVudCkge1xuXHQgIGVuc3VyZUluamVjdGVkKCk7XG5cdFxuXHQgIC8vIFZhcmlvdXMgcGFydHMgb2Ygb3VyIGNvZGUgKHN1Y2ggYXMgUmVhY3RDb21wb3NpdGVDb21wb25lbnQnc1xuXHQgIC8vIF9yZW5kZXJWYWxpZGF0ZWRDb21wb25lbnQpIGFzc3VtZSB0aGF0IGNhbGxzIHRvIHJlbmRlciBhcmVuJ3QgbmVzdGVkO1xuXHQgIC8vIHZlcmlmeSB0aGF0IHRoYXQncyB0aGUgY2FzZS4gKFRoaXMgaXMgY2FsbGVkIGJ5IGVhY2ggdG9wLWxldmVsIHVwZGF0ZVxuXHQgIC8vIGZ1bmN0aW9uLCBsaWtlIHNldFByb3BzLCBzZXRTdGF0ZSwgZm9yY2VVcGRhdGUsIGV0Yy47IGNyZWF0aW9uIGFuZFxuXHQgIC8vIGRlc3RydWN0aW9uIG9mIHRvcC1sZXZlbCBjb21wb25lbnRzIGlzIGd1YXJkZWQgaW4gUmVhY3RNb3VudC4pXG5cdFxuXHQgIGlmICghYmF0Y2hpbmdTdHJhdGVneS5pc0JhdGNoaW5nVXBkYXRlcykge1xuXHQgICAgYmF0Y2hpbmdTdHJhdGVneS5iYXRjaGVkVXBkYXRlcyhlbnF1ZXVlVXBkYXRlLCBjb21wb25lbnQpO1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0XG5cdCAgZGlydHlDb21wb25lbnRzLnB1c2goY29tcG9uZW50KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEVucXVldWUgYSBjYWxsYmFjayB0byBiZSBydW4gYXQgdGhlIGVuZCBvZiB0aGUgY3VycmVudCBiYXRjaGluZyBjeWNsZS4gVGhyb3dzXG5cdCAqIGlmIG5vIHVwZGF0ZXMgYXJlIGN1cnJlbnRseSBiZWluZyBwZXJmb3JtZWQuXG5cdCAqL1xuXHRmdW5jdGlvbiBhc2FwKGNhbGxiYWNrLCBjb250ZXh0KSB7XG5cdCAgIWJhdGNoaW5nU3RyYXRlZ3kuaXNCYXRjaGluZ1VwZGF0ZXMgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RVcGRhdGVzLmFzYXA6IENhblxcJ3QgZW5xdWV1ZSBhbiBhc2FwIGNhbGxiYWNrIGluIGEgY29udGV4dCB3aGVyZScgKyAndXBkYXRlcyBhcmUgbm90IGJlaW5nIGJhdGNoZWQuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXHQgIGFzYXBDYWxsYmFja1F1ZXVlLmVucXVldWUoY2FsbGJhY2ssIGNvbnRleHQpO1xuXHQgIGFzYXBFbnF1ZXVlZCA9IHRydWU7XG5cdH1cblx0XG5cdHZhciBSZWFjdFVwZGF0ZXNJbmplY3Rpb24gPSB7XG5cdCAgaW5qZWN0UmVjb25jaWxlVHJhbnNhY3Rpb246IGZ1bmN0aW9uIChSZWNvbmNpbGVUcmFuc2FjdGlvbikge1xuXHQgICAgIVJlY29uY2lsZVRyYW5zYWN0aW9uID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0VXBkYXRlczogbXVzdCBwcm92aWRlIGEgcmVjb25jaWxlIHRyYW5zYWN0aW9uIGNsYXNzJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXHQgICAgUmVhY3RVcGRhdGVzLlJlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb24gPSBSZWNvbmNpbGVUcmFuc2FjdGlvbjtcblx0ICB9LFxuXHRcblx0ICBpbmplY3RCYXRjaGluZ1N0cmF0ZWd5OiBmdW5jdGlvbiAoX2JhdGNoaW5nU3RyYXRlZ3kpIHtcblx0ICAgICFfYmF0Y2hpbmdTdHJhdGVneSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdFVwZGF0ZXM6IG11c3QgcHJvdmlkZSBhIGJhdGNoaW5nIHN0cmF0ZWd5JykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXHQgICAgISh0eXBlb2YgX2JhdGNoaW5nU3RyYXRlZ3kuYmF0Y2hlZFVwZGF0ZXMgPT09ICdmdW5jdGlvbicpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0VXBkYXRlczogbXVzdCBwcm92aWRlIGEgYmF0Y2hlZFVwZGF0ZXMoKSBmdW5jdGlvbicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0ICAgICEodHlwZW9mIF9iYXRjaGluZ1N0cmF0ZWd5LmlzQmF0Y2hpbmdVcGRhdGVzID09PSAnYm9vbGVhbicpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0VXBkYXRlczogbXVzdCBwcm92aWRlIGFuIGlzQmF0Y2hpbmdVcGRhdGVzIGJvb2xlYW4gYXR0cmlidXRlJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXHQgICAgYmF0Y2hpbmdTdHJhdGVneSA9IF9iYXRjaGluZ1N0cmF0ZWd5O1xuXHQgIH1cblx0fTtcblx0XG5cdHZhciBSZWFjdFVwZGF0ZXMgPSB7XG5cdCAgLyoqXG5cdCAgICogUmVhY3QgcmVmZXJlbmNlcyBgUmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbmAgdXNpbmcgdGhpcyBwcm9wZXJ0eSBpbiBvcmRlclxuXHQgICAqIHRvIGFsbG93IGRlcGVuZGVuY3kgaW5qZWN0aW9uLlxuXHQgICAqXG5cdCAgICogQGludGVybmFsXG5cdCAgICovXG5cdCAgUmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbjogbnVsbCxcblx0XG5cdCAgYmF0Y2hlZFVwZGF0ZXM6IGJhdGNoZWRVcGRhdGVzLFxuXHQgIGVucXVldWVVcGRhdGU6IGVucXVldWVVcGRhdGUsXG5cdCAgZmx1c2hCYXRjaGVkVXBkYXRlczogZmx1c2hCYXRjaGVkVXBkYXRlcyxcblx0ICBpbmplY3Rpb246IFJlYWN0VXBkYXRlc0luamVjdGlvbixcblx0ICBhc2FwOiBhc2FwXG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFJlYWN0VXBkYXRlcztcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oNCkpKVxuXG4vKioqLyB9KSxcbi8qIDU1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MpIHsvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIENhbGxiYWNrUXVldWVcblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgUG9vbGVkQ2xhc3MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU2KTtcblx0XG5cdHZhciBhc3NpZ24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KTtcblx0dmFyIGludmFyaWFudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHRcblx0LyoqXG5cdCAqIEEgc3BlY2lhbGl6ZWQgcHNldWRvLWV2ZW50IG1vZHVsZSB0byBoZWxwIGtlZXAgdHJhY2sgb2YgY29tcG9uZW50cyB3YWl0aW5nIHRvXG5cdCAqIGJlIG5vdGlmaWVkIHdoZW4gdGhlaXIgRE9NIHJlcHJlc2VudGF0aW9ucyBhcmUgYXZhaWxhYmxlIGZvciB1c2UuXG5cdCAqXG5cdCAqIFRoaXMgaW1wbGVtZW50cyBgUG9vbGVkQ2xhc3NgLCBzbyB5b3Ugc2hvdWxkIG5ldmVyIG5lZWQgdG8gaW5zdGFudGlhdGUgdGhpcy5cblx0ICogSW5zdGVhZCwgdXNlIGBDYWxsYmFja1F1ZXVlLmdldFBvb2xlZCgpYC5cblx0ICpcblx0ICogQGNsYXNzIFJlYWN0TW91bnRSZWFkeVxuXHQgKiBAaW1wbGVtZW50cyBQb29sZWRDbGFzc1xuXHQgKiBAaW50ZXJuYWxcblx0ICovXG5cdGZ1bmN0aW9uIENhbGxiYWNrUXVldWUoKSB7XG5cdCAgdGhpcy5fY2FsbGJhY2tzID0gbnVsbDtcblx0ICB0aGlzLl9jb250ZXh0cyA9IG51bGw7XG5cdH1cblx0XG5cdGFzc2lnbihDYWxsYmFja1F1ZXVlLnByb3RvdHlwZSwge1xuXHRcblx0ICAvKipcblx0ICAgKiBFbnF1ZXVlcyBhIGNhbGxiYWNrIHRvIGJlIGludm9rZWQgd2hlbiBgbm90aWZ5QWxsYCBpcyBpbnZva2VkLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sgSW52b2tlZCB3aGVuIGBub3RpZnlBbGxgIGlzIGludm9rZWQuXG5cdCAgICogQHBhcmFtIHs/b2JqZWN0fSBjb250ZXh0IENvbnRleHQgdG8gY2FsbCBgY2FsbGJhY2tgIHdpdGguXG5cdCAgICogQGludGVybmFsXG5cdCAgICovXG5cdCAgZW5xdWV1ZTogZnVuY3Rpb24gKGNhbGxiYWNrLCBjb250ZXh0KSB7XG5cdCAgICB0aGlzLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3MgfHwgW107XG5cdCAgICB0aGlzLl9jb250ZXh0cyA9IHRoaXMuX2NvbnRleHRzIHx8IFtdO1xuXHQgICAgdGhpcy5fY2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xuXHQgICAgdGhpcy5fY29udGV4dHMucHVzaChjb250ZXh0KTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBJbnZva2VzIGFsbCBlbnF1ZXVlZCBjYWxsYmFja3MgYW5kIGNsZWFycyB0aGUgcXVldWUuIFRoaXMgaXMgaW52b2tlZCBhZnRlclxuXHQgICAqIHRoZSBET00gcmVwcmVzZW50YXRpb24gb2YgYSBjb21wb25lbnQgaGFzIGJlZW4gY3JlYXRlZCBvciB1cGRhdGVkLlxuXHQgICAqXG5cdCAgICogQGludGVybmFsXG5cdCAgICovXG5cdCAgbm90aWZ5QWxsOiBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzO1xuXHQgICAgdmFyIGNvbnRleHRzID0gdGhpcy5fY29udGV4dHM7XG5cdCAgICBpZiAoY2FsbGJhY2tzKSB7XG5cdCAgICAgICEoY2FsbGJhY2tzLmxlbmd0aCA9PT0gY29udGV4dHMubGVuZ3RoKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdNaXNtYXRjaGVkIGxpc3Qgb2YgY29udGV4dHMgaW4gY2FsbGJhY2sgcXVldWUnKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdCAgICAgIHRoaXMuX2NhbGxiYWNrcyA9IG51bGw7XG5cdCAgICAgIHRoaXMuX2NvbnRleHRzID0gbnVsbDtcblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjYWxsYmFja3MubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBjYWxsYmFja3NbaV0uY2FsbChjb250ZXh0c1tpXSk7XG5cdCAgICAgIH1cblx0ICAgICAgY2FsbGJhY2tzLmxlbmd0aCA9IDA7XG5cdCAgICAgIGNvbnRleHRzLmxlbmd0aCA9IDA7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogUmVzZXRzIHRoZSBpbnRlcm5hbCBxdWV1ZS5cblx0ICAgKlxuXHQgICAqIEBpbnRlcm5hbFxuXHQgICAqL1xuXHQgIHJlc2V0OiBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLl9jYWxsYmFja3MgPSBudWxsO1xuXHQgICAgdGhpcy5fY29udGV4dHMgPSBudWxsO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIGBQb29sZWRDbGFzc2AgbG9va3MgZm9yIHRoaXMuXG5cdCAgICovXG5cdCAgZGVzdHJ1Y3RvcjogZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpcy5yZXNldCgpO1xuXHQgIH1cblx0XG5cdH0pO1xuXHRcblx0UG9vbGVkQ2xhc3MuYWRkUG9vbGluZ1RvKENhbGxiYWNrUXVldWUpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBDYWxsYmFja1F1ZXVlO1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg0KSkpXG5cbi8qKiovIH0pLFxuLyogNTYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgey8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgUG9vbGVkQ2xhc3Ncblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgaW52YXJpYW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7XG5cdFxuXHQvKipcblx0ICogU3RhdGljIHBvb2xlcnMuIFNldmVyYWwgY3VzdG9tIHZlcnNpb25zIGZvciBlYWNoIHBvdGVudGlhbCBudW1iZXIgb2Zcblx0ICogYXJndW1lbnRzLiBBIGNvbXBsZXRlbHkgZ2VuZXJpYyBwb29sZXIgaXMgZWFzeSB0byBpbXBsZW1lbnQsIGJ1dCB3b3VsZFxuXHQgKiByZXF1aXJlIGFjY2Vzc2luZyB0aGUgYGFyZ3VtZW50c2Agb2JqZWN0LiBJbiBlYWNoIG9mIHRoZXNlLCBgdGhpc2AgcmVmZXJzIHRvXG5cdCAqIHRoZSBDbGFzcyBpdHNlbGYsIG5vdCBhbiBpbnN0YW5jZS4gSWYgYW55IG90aGVycyBhcmUgbmVlZGVkLCBzaW1wbHkgYWRkIHRoZW1cblx0ICogaGVyZSwgb3IgaW4gdGhlaXIgb3duIGZpbGVzLlxuXHQgKi9cblx0dmFyIG9uZUFyZ3VtZW50UG9vbGVyID0gZnVuY3Rpb24gKGNvcHlGaWVsZHNGcm9tKSB7XG5cdCAgdmFyIEtsYXNzID0gdGhpcztcblx0ICBpZiAoS2xhc3MuaW5zdGFuY2VQb29sLmxlbmd0aCkge1xuXHQgICAgdmFyIGluc3RhbmNlID0gS2xhc3MuaW5zdGFuY2VQb29sLnBvcCgpO1xuXHQgICAgS2xhc3MuY2FsbChpbnN0YW5jZSwgY29weUZpZWxkc0Zyb20pO1xuXHQgICAgcmV0dXJuIGluc3RhbmNlO1xuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gbmV3IEtsYXNzKGNvcHlGaWVsZHNGcm9tKTtcblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgdHdvQXJndW1lbnRQb29sZXIgPSBmdW5jdGlvbiAoYTEsIGEyKSB7XG5cdCAgdmFyIEtsYXNzID0gdGhpcztcblx0ICBpZiAoS2xhc3MuaW5zdGFuY2VQb29sLmxlbmd0aCkge1xuXHQgICAgdmFyIGluc3RhbmNlID0gS2xhc3MuaW5zdGFuY2VQb29sLnBvcCgpO1xuXHQgICAgS2xhc3MuY2FsbChpbnN0YW5jZSwgYTEsIGEyKTtcblx0ICAgIHJldHVybiBpbnN0YW5jZTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIG5ldyBLbGFzcyhhMSwgYTIpO1xuXHQgIH1cblx0fTtcblx0XG5cdHZhciB0aHJlZUFyZ3VtZW50UG9vbGVyID0gZnVuY3Rpb24gKGExLCBhMiwgYTMpIHtcblx0ICB2YXIgS2xhc3MgPSB0aGlzO1xuXHQgIGlmIChLbGFzcy5pbnN0YW5jZVBvb2wubGVuZ3RoKSB7XG5cdCAgICB2YXIgaW5zdGFuY2UgPSBLbGFzcy5pbnN0YW5jZVBvb2wucG9wKCk7XG5cdCAgICBLbGFzcy5jYWxsKGluc3RhbmNlLCBhMSwgYTIsIGEzKTtcblx0ICAgIHJldHVybiBpbnN0YW5jZTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIG5ldyBLbGFzcyhhMSwgYTIsIGEzKTtcblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgZm91ckFyZ3VtZW50UG9vbGVyID0gZnVuY3Rpb24gKGExLCBhMiwgYTMsIGE0KSB7XG5cdCAgdmFyIEtsYXNzID0gdGhpcztcblx0ICBpZiAoS2xhc3MuaW5zdGFuY2VQb29sLmxlbmd0aCkge1xuXHQgICAgdmFyIGluc3RhbmNlID0gS2xhc3MuaW5zdGFuY2VQb29sLnBvcCgpO1xuXHQgICAgS2xhc3MuY2FsbChpbnN0YW5jZSwgYTEsIGEyLCBhMywgYTQpO1xuXHQgICAgcmV0dXJuIGluc3RhbmNlO1xuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gbmV3IEtsYXNzKGExLCBhMiwgYTMsIGE0KTtcblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgZml2ZUFyZ3VtZW50UG9vbGVyID0gZnVuY3Rpb24gKGExLCBhMiwgYTMsIGE0LCBhNSkge1xuXHQgIHZhciBLbGFzcyA9IHRoaXM7XG5cdCAgaWYgKEtsYXNzLmluc3RhbmNlUG9vbC5sZW5ndGgpIHtcblx0ICAgIHZhciBpbnN0YW5jZSA9IEtsYXNzLmluc3RhbmNlUG9vbC5wb3AoKTtcblx0ICAgIEtsYXNzLmNhbGwoaW5zdGFuY2UsIGExLCBhMiwgYTMsIGE0LCBhNSk7XG5cdCAgICByZXR1cm4gaW5zdGFuY2U7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBuZXcgS2xhc3MoYTEsIGEyLCBhMywgYTQsIGE1KTtcblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgc3RhbmRhcmRSZWxlYXNlciA9IGZ1bmN0aW9uIChpbnN0YW5jZSkge1xuXHQgIHZhciBLbGFzcyA9IHRoaXM7XG5cdCAgIShpbnN0YW5jZSBpbnN0YW5jZW9mIEtsYXNzKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdUcnlpbmcgdG8gcmVsZWFzZSBhbiBpbnN0YW5jZSBpbnRvIGEgcG9vbCBvZiBhIGRpZmZlcmVudCB0eXBlLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0ICBpbnN0YW5jZS5kZXN0cnVjdG9yKCk7XG5cdCAgaWYgKEtsYXNzLmluc3RhbmNlUG9vbC5sZW5ndGggPCBLbGFzcy5wb29sU2l6ZSkge1xuXHQgICAgS2xhc3MuaW5zdGFuY2VQb29sLnB1c2goaW5zdGFuY2UpO1xuXHQgIH1cblx0fTtcblx0XG5cdHZhciBERUZBVUxUX1BPT0xfU0laRSA9IDEwO1xuXHR2YXIgREVGQVVMVF9QT09MRVIgPSBvbmVBcmd1bWVudFBvb2xlcjtcblx0XG5cdC8qKlxuXHQgKiBBdWdtZW50cyBgQ29weUNvbnN0cnVjdG9yYCB0byBiZSBhIHBvb2xhYmxlIGNsYXNzLCBhdWdtZW50aW5nIG9ubHkgdGhlIGNsYXNzXG5cdCAqIGl0c2VsZiAoc3RhdGljYWxseSkgbm90IGFkZGluZyBhbnkgcHJvdG90eXBpY2FsIGZpZWxkcy4gQW55IENvcHlDb25zdHJ1Y3RvclxuXHQgKiB5b3UgZ2l2ZSB0aGlzIG1heSBoYXZlIGEgYHBvb2xTaXplYCBwcm9wZXJ0eSwgYW5kIHdpbGwgbG9vayBmb3IgYVxuXHQgKiBwcm90b3R5cGljYWwgYGRlc3RydWN0b3JgIG9uIGluc3RhbmNlcyAob3B0aW9uYWwpLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBDb3B5Q29uc3RydWN0b3IgQ29uc3RydWN0b3IgdGhhdCBjYW4gYmUgdXNlZCB0byByZXNldC5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gcG9vbGVyIEN1c3RvbWl6YWJsZSBwb29sZXIuXG5cdCAqL1xuXHR2YXIgYWRkUG9vbGluZ1RvID0gZnVuY3Rpb24gKENvcHlDb25zdHJ1Y3RvciwgcG9vbGVyKSB7XG5cdCAgdmFyIE5ld0tsYXNzID0gQ29weUNvbnN0cnVjdG9yO1xuXHQgIE5ld0tsYXNzLmluc3RhbmNlUG9vbCA9IFtdO1xuXHQgIE5ld0tsYXNzLmdldFBvb2xlZCA9IHBvb2xlciB8fCBERUZBVUxUX1BPT0xFUjtcblx0ICBpZiAoIU5ld0tsYXNzLnBvb2xTaXplKSB7XG5cdCAgICBOZXdLbGFzcy5wb29sU2l6ZSA9IERFRkFVTFRfUE9PTF9TSVpFO1xuXHQgIH1cblx0ICBOZXdLbGFzcy5yZWxlYXNlID0gc3RhbmRhcmRSZWxlYXNlcjtcblx0ICByZXR1cm4gTmV3S2xhc3M7XG5cdH07XG5cdFxuXHR2YXIgUG9vbGVkQ2xhc3MgPSB7XG5cdCAgYWRkUG9vbGluZ1RvOiBhZGRQb29saW5nVG8sXG5cdCAgb25lQXJndW1lbnRQb29sZXI6IG9uZUFyZ3VtZW50UG9vbGVyLFxuXHQgIHR3b0FyZ3VtZW50UG9vbGVyOiB0d29Bcmd1bWVudFBvb2xlcixcblx0ICB0aHJlZUFyZ3VtZW50UG9vbGVyOiB0aHJlZUFyZ3VtZW50UG9vbGVyLFxuXHQgIGZvdXJBcmd1bWVudFBvb2xlcjogZm91ckFyZ3VtZW50UG9vbGVyLFxuXHQgIGZpdmVBcmd1bWVudFBvb2xlcjogZml2ZUFyZ3VtZW50UG9vbGVyXG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFBvb2xlZENsYXNzO1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg0KSkpXG5cbi8qKiovIH0pLFxuLyogNTcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgey8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgVHJhbnNhY3Rpb25cblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgaW52YXJpYW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7XG5cdFxuXHQvKipcblx0ICogYFRyYW5zYWN0aW9uYCBjcmVhdGVzIGEgYmxhY2sgYm94IHRoYXQgaXMgYWJsZSB0byB3cmFwIGFueSBtZXRob2Qgc3VjaCB0aGF0XG5cdCAqIGNlcnRhaW4gaW52YXJpYW50cyBhcmUgbWFpbnRhaW5lZCBiZWZvcmUgYW5kIGFmdGVyIHRoZSBtZXRob2QgaXMgaW52b2tlZFxuXHQgKiAoRXZlbiBpZiBhbiBleGNlcHRpb24gaXMgdGhyb3duIHdoaWxlIGludm9raW5nIHRoZSB3cmFwcGVkIG1ldGhvZCkuIFdob2V2ZXJcblx0ICogaW5zdGFudGlhdGVzIGEgdHJhbnNhY3Rpb24gY2FuIHByb3ZpZGUgZW5mb3JjZXJzIG9mIHRoZSBpbnZhcmlhbnRzIGF0XG5cdCAqIGNyZWF0aW9uIHRpbWUuIFRoZSBgVHJhbnNhY3Rpb25gIGNsYXNzIGl0c2VsZiB3aWxsIHN1cHBseSBvbmUgYWRkaXRpb25hbFxuXHQgKiBhdXRvbWF0aWMgaW52YXJpYW50IGZvciB5b3UgLSB0aGUgaW52YXJpYW50IHRoYXQgYW55IHRyYW5zYWN0aW9uIGluc3RhbmNlXG5cdCAqIHNob3VsZCBub3QgYmUgcnVuIHdoaWxlIGl0IGlzIGFscmVhZHkgYmVpbmcgcnVuLiBZb3Ugd291bGQgdHlwaWNhbGx5IGNyZWF0ZSBhXG5cdCAqIHNpbmdsZSBpbnN0YW5jZSBvZiBhIGBUcmFuc2FjdGlvbmAgZm9yIHJldXNlIG11bHRpcGxlIHRpbWVzLCB0aGF0IHBvdGVudGlhbGx5XG5cdCAqIGlzIHVzZWQgdG8gd3JhcCBzZXZlcmFsIGRpZmZlcmVudCBtZXRob2RzLiBXcmFwcGVycyBhcmUgZXh0cmVtZWx5IHNpbXBsZSAtXG5cdCAqIHRoZXkgb25seSByZXF1aXJlIGltcGxlbWVudGluZyB0d28gbWV0aG9kcy5cblx0ICpcblx0ICogPHByZT5cblx0ICogICAgICAgICAgICAgICAgICAgICAgIHdyYXBwZXJzIChpbmplY3RlZCBhdCBjcmVhdGlvbiB0aW1lKVxuXHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAgICAgICAgK1xuXHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICAgfFxuXHQgKiAgICAgICAgICAgICAgICAgICAgKy0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tK1xuXHQgKiAgICAgICAgICAgICAgICAgICAgfCAgICAgICAgICAgICAgICAgdiAgICAgICAgfCAgICAgICAgICAgICAgfFxuXHQgKiAgICAgICAgICAgICAgICAgICAgfCAgICAgICstLS0tLS0tLS0tLS0tLS0rICAgfCAgICAgICAgICAgICAgfFxuXHQgKiAgICAgICAgICAgICAgICAgICAgfCAgICstLXwgICAgd3JhcHBlcjEgICB8LS0tfC0tLS0rICAgICAgICAgfFxuXHQgKiAgICAgICAgICAgICAgICAgICAgfCAgIHwgICstLS0tLS0tLS0tLS0tLS0rICAgdiAgICB8ICAgICAgICAgfFxuXHQgKiAgICAgICAgICAgICAgICAgICAgfCAgIHwgICAgICAgICAgKy0tLS0tLS0tLS0tLS0rICB8ICAgICAgICAgfFxuXHQgKiAgICAgICAgICAgICAgICAgICAgfCAgIHwgICAgICstLS0tfCAgIHdyYXBwZXIyICB8LS0tLS0tLS0rICAgfFxuXHQgKiAgICAgICAgICAgICAgICAgICAgfCAgIHwgICAgIHwgICAgKy0tLS0tLS0tLS0tLS0rICB8ICAgICB8ICAgfFxuXHQgKiAgICAgICAgICAgICAgICAgICAgfCAgIHwgICAgIHwgICAgICAgICAgICAgICAgICAgICB8ICAgICB8ICAgfFxuXHQgKiAgICAgICAgICAgICAgICAgICAgfCAgIHYgICAgIHYgICAgICAgICAgICAgICAgICAgICB2ICAgICB2ICAgfCB3cmFwcGVyXG5cdCAqICAgICAgICAgICAgICAgICAgICB8ICstLS0rICstLS0rICAgKy0tLS0tLS0tLSsgICArLS0tKyArLS0tKyB8IGludmFyaWFudHNcblx0ICogcGVyZm9ybShhbnlNZXRob2QpIHwgfCAgIHwgfCAgIHwgICB8ICAgICAgICAgfCAgIHwgICB8IHwgICB8IHwgbWFpbnRhaW5lZFxuXHQgKiArLS0tLS0tLS0tLS0tLS0tLS0+fC18LS0tfC18LS0tfC0tPnxhbnlNZXRob2R8LS0tfC0tLXwtfC0tLXwtfC0tLS0tLS0tPlxuXHQgKiAgICAgICAgICAgICAgICAgICAgfCB8ICAgfCB8ICAgfCAgIHwgICAgICAgICB8ICAgfCAgIHwgfCAgIHwgfFxuXHQgKiAgICAgICAgICAgICAgICAgICAgfCB8ICAgfCB8ICAgfCAgIHwgICAgICAgICB8ICAgfCAgIHwgfCAgIHwgfFxuXHQgKiAgICAgICAgICAgICAgICAgICAgfCB8ICAgfCB8ICAgfCAgIHwgICAgICAgICB8ICAgfCAgIHwgfCAgIHwgfFxuXHQgKiAgICAgICAgICAgICAgICAgICAgfCArLS0tKyArLS0tKyAgICstLS0tLS0tLS0rICAgKy0tLSsgKy0tLSsgfFxuXHQgKiAgICAgICAgICAgICAgICAgICAgfCAgaW5pdGlhbGl6ZSAgICAgICAgICAgICAgICAgICAgY2xvc2UgICAgfFxuXHQgKiAgICAgICAgICAgICAgICAgICAgKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tK1xuXHQgKiA8L3ByZT5cblx0ICpcblx0ICogVXNlIGNhc2VzOlxuXHQgKiAtIFByZXNlcnZpbmcgdGhlIGlucHV0IHNlbGVjdGlvbiByYW5nZXMgYmVmb3JlL2FmdGVyIHJlY29uY2lsaWF0aW9uLlxuXHQgKiAgIFJlc3RvcmluZyBzZWxlY3Rpb24gZXZlbiBpbiB0aGUgZXZlbnQgb2YgYW4gdW5leHBlY3RlZCBlcnJvci5cblx0ICogLSBEZWFjdGl2YXRpbmcgZXZlbnRzIHdoaWxlIHJlYXJyYW5naW5nIHRoZSBET00sIHByZXZlbnRpbmcgYmx1cnMvZm9jdXNlcyxcblx0ICogICB3aGlsZSBndWFyYW50ZWVpbmcgdGhhdCBhZnRlcndhcmRzLCB0aGUgZXZlbnQgc3lzdGVtIGlzIHJlYWN0aXZhdGVkLlxuXHQgKiAtIEZsdXNoaW5nIGEgcXVldWUgb2YgY29sbGVjdGVkIERPTSBtdXRhdGlvbnMgdG8gdGhlIG1haW4gVUkgdGhyZWFkIGFmdGVyIGFcblx0ICogICByZWNvbmNpbGlhdGlvbiB0YWtlcyBwbGFjZSBpbiBhIHdvcmtlciB0aHJlYWQuXG5cdCAqIC0gSW52b2tpbmcgYW55IGNvbGxlY3RlZCBgY29tcG9uZW50RGlkVXBkYXRlYCBjYWxsYmFja3MgYWZ0ZXIgcmVuZGVyaW5nIG5ld1xuXHQgKiAgIGNvbnRlbnQuXG5cdCAqIC0gKEZ1dHVyZSB1c2UgY2FzZSk6IFdyYXBwaW5nIHBhcnRpY3VsYXIgZmx1c2hlcyBvZiB0aGUgYFJlYWN0V29ya2VyYCBxdWV1ZVxuXHQgKiAgIHRvIHByZXNlcnZlIHRoZSBgc2Nyb2xsVG9wYCAoYW4gYXV0b21hdGljIHNjcm9sbCBhd2FyZSBET00pLlxuXHQgKiAtIChGdXR1cmUgdXNlIGNhc2UpOiBMYXlvdXQgY2FsY3VsYXRpb25zIGJlZm9yZSBhbmQgYWZ0ZXIgRE9NIHVwZGF0ZXMuXG5cdCAqXG5cdCAqIFRyYW5zYWN0aW9uYWwgcGx1Z2luIEFQSTpcblx0ICogLSBBIG1vZHVsZSB0aGF0IGhhcyBhbiBgaW5pdGlhbGl6ZWAgbWV0aG9kIHRoYXQgcmV0dXJucyBhbnkgcHJlY29tcHV0YXRpb24uXG5cdCAqIC0gYW5kIGEgYGNsb3NlYCBtZXRob2QgdGhhdCBhY2NlcHRzIHRoZSBwcmVjb21wdXRhdGlvbi4gYGNsb3NlYCBpcyBpbnZva2VkXG5cdCAqICAgd2hlbiB0aGUgd3JhcHBlZCBwcm9jZXNzIGlzIGNvbXBsZXRlZCwgb3IgaGFzIGZhaWxlZC5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheTxUcmFuc2FjdGlvbmFsV3JhcHBlcj59IHRyYW5zYWN0aW9uV3JhcHBlciBXcmFwcGVyIG1vZHVsZXNcblx0ICogdGhhdCBpbXBsZW1lbnQgYGluaXRpYWxpemVgIGFuZCBgY2xvc2VgLlxuXHQgKiBAcmV0dXJuIHtUcmFuc2FjdGlvbn0gU2luZ2xlIHRyYW5zYWN0aW9uIGZvciByZXVzZSBpbiB0aHJlYWQuXG5cdCAqXG5cdCAqIEBjbGFzcyBUcmFuc2FjdGlvblxuXHQgKi9cblx0dmFyIE1peGluID0ge1xuXHQgIC8qKlxuXHQgICAqIFNldHMgdXAgdGhpcyBpbnN0YW5jZSBzbyB0aGF0IGl0IGlzIHByZXBhcmVkIGZvciBjb2xsZWN0aW5nIG1ldHJpY3MuIERvZXNcblx0ICAgKiBzbyBzdWNoIHRoYXQgdGhpcyBzZXR1cCBtZXRob2QgbWF5IGJlIHVzZWQgb24gYW4gaW5zdGFuY2UgdGhhdCBpcyBhbHJlYWR5XG5cdCAgICogaW5pdGlhbGl6ZWQsIGluIGEgd2F5IHRoYXQgZG9lcyBub3QgY29uc3VtZSBhZGRpdGlvbmFsIG1lbW9yeSB1cG9uIHJldXNlLlxuXHQgICAqIFRoYXQgY2FuIGJlIHVzZWZ1bCBpZiB5b3UgZGVjaWRlIHRvIG1ha2UgeW91ciBzdWJjbGFzcyBvZiB0aGlzIG1peGluIGFcblx0ICAgKiBcIlBvb2xlZENsYXNzXCIuXG5cdCAgICovXG5cdCAgcmVpbml0aWFsaXplVHJhbnNhY3Rpb246IGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMudHJhbnNhY3Rpb25XcmFwcGVycyA9IHRoaXMuZ2V0VHJhbnNhY3Rpb25XcmFwcGVycygpO1xuXHQgICAgaWYgKHRoaXMud3JhcHBlckluaXREYXRhKSB7XG5cdCAgICAgIHRoaXMud3JhcHBlckluaXREYXRhLmxlbmd0aCA9IDA7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLndyYXBwZXJJbml0RGF0YSA9IFtdO1xuXHQgICAgfVxuXHQgICAgdGhpcy5faXNJblRyYW5zYWN0aW9uID0gZmFsc2U7XG5cdCAgfSxcblx0XG5cdCAgX2lzSW5UcmFuc2FjdGlvbjogZmFsc2UsXG5cdFxuXHQgIC8qKlxuXHQgICAqIEBhYnN0cmFjdFxuXHQgICAqIEByZXR1cm4ge0FycmF5PFRyYW5zYWN0aW9uV3JhcHBlcj59IEFycmF5IG9mIHRyYW5zYWN0aW9uIHdyYXBwZXJzLlxuXHQgICAqL1xuXHQgIGdldFRyYW5zYWN0aW9uV3JhcHBlcnM6IG51bGwsXG5cdFxuXHQgIGlzSW5UcmFuc2FjdGlvbjogZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuICEhdGhpcy5faXNJblRyYW5zYWN0aW9uO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIEV4ZWN1dGVzIHRoZSBmdW5jdGlvbiB3aXRoaW4gYSBzYWZldHkgd2luZG93LiBVc2UgdGhpcyBmb3IgdGhlIHRvcCBsZXZlbFxuXHQgICAqIG1ldGhvZHMgdGhhdCByZXN1bHQgaW4gbGFyZ2UgYW1vdW50cyBvZiBjb21wdXRhdGlvbi9tdXRhdGlvbnMgdGhhdCB3b3VsZFxuXHQgICAqIG5lZWQgdG8gYmUgc2FmZXR5IGNoZWNrZWQuIFRoZSBvcHRpb25hbCBhcmd1bWVudHMgaGVscHMgcHJldmVudCB0aGUgbmVlZFxuXHQgICAqIHRvIGJpbmQgaW4gbWFueSBjYXNlcy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7ZnVuY3Rpb259IG1ldGhvZCBNZW1iZXIgb2Ygc2NvcGUgdG8gY2FsbC5cblx0ICAgKiBAcGFyYW0ge09iamVjdH0gc2NvcGUgU2NvcGUgdG8gaW52b2tlIGZyb20uXG5cdCAgICogQHBhcmFtIHtPYmplY3Q/PX0gYSBBcmd1bWVudCB0byBwYXNzIHRvIHRoZSBtZXRob2QuXG5cdCAgICogQHBhcmFtIHtPYmplY3Q/PX0gYiBBcmd1bWVudCB0byBwYXNzIHRvIHRoZSBtZXRob2QuXG5cdCAgICogQHBhcmFtIHtPYmplY3Q/PX0gYyBBcmd1bWVudCB0byBwYXNzIHRvIHRoZSBtZXRob2QuXG5cdCAgICogQHBhcmFtIHtPYmplY3Q/PX0gZCBBcmd1bWVudCB0byBwYXNzIHRvIHRoZSBtZXRob2QuXG5cdCAgICogQHBhcmFtIHtPYmplY3Q/PX0gZSBBcmd1bWVudCB0byBwYXNzIHRvIHRoZSBtZXRob2QuXG5cdCAgICogQHBhcmFtIHtPYmplY3Q/PX0gZiBBcmd1bWVudCB0byBwYXNzIHRvIHRoZSBtZXRob2QuXG5cdCAgICpcblx0ICAgKiBAcmV0dXJuIHsqfSBSZXR1cm4gdmFsdWUgZnJvbSBgbWV0aG9kYC5cblx0ICAgKi9cblx0ICBwZXJmb3JtOiBmdW5jdGlvbiAobWV0aG9kLCBzY29wZSwgYSwgYiwgYywgZCwgZSwgZikge1xuXHQgICAgISF0aGlzLmlzSW5UcmFuc2FjdGlvbigpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1RyYW5zYWN0aW9uLnBlcmZvcm0oLi4uKTogQ2Fubm90IGluaXRpYWxpemUgYSB0cmFuc2FjdGlvbiB3aGVuIHRoZXJlICcgKyAnaXMgYWxyZWFkeSBhbiBvdXRzdGFuZGluZyB0cmFuc2FjdGlvbi4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdCAgICB2YXIgZXJyb3JUaHJvd247XG5cdCAgICB2YXIgcmV0O1xuXHQgICAgdHJ5IHtcblx0ICAgICAgdGhpcy5faXNJblRyYW5zYWN0aW9uID0gdHJ1ZTtcblx0ICAgICAgLy8gQ2F0Y2hpbmcgZXJyb3JzIG1ha2VzIGRlYnVnZ2luZyBtb3JlIGRpZmZpY3VsdCwgc28gd2Ugc3RhcnQgd2l0aFxuXHQgICAgICAvLyBlcnJvclRocm93biBzZXQgdG8gdHJ1ZSBiZWZvcmUgc2V0dGluZyBpdCB0byBmYWxzZSBhZnRlciBjYWxsaW5nXG5cdCAgICAgIC8vIGNsb3NlIC0tIGlmIGl0J3Mgc3RpbGwgc2V0IHRvIHRydWUgaW4gdGhlIGZpbmFsbHkgYmxvY2ssIGl0IG1lYW5zXG5cdCAgICAgIC8vIG9uZSBvZiB0aGVzZSBjYWxscyB0aHJldy5cblx0ICAgICAgZXJyb3JUaHJvd24gPSB0cnVlO1xuXHQgICAgICB0aGlzLmluaXRpYWxpemVBbGwoMCk7XG5cdCAgICAgIHJldCA9IG1ldGhvZC5jYWxsKHNjb3BlLCBhLCBiLCBjLCBkLCBlLCBmKTtcblx0ICAgICAgZXJyb3JUaHJvd24gPSBmYWxzZTtcblx0ICAgIH0gZmluYWxseSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgaWYgKGVycm9yVGhyb3duKSB7XG5cdCAgICAgICAgICAvLyBJZiBgbWV0aG9kYCB0aHJvd3MsIHByZWZlciB0byBzaG93IHRoYXQgc3RhY2sgdHJhY2Ugb3ZlciBhbnkgdGhyb3duXG5cdCAgICAgICAgICAvLyBieSBpbnZva2luZyBgY2xvc2VBbGxgLlxuXHQgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgdGhpcy5jbG9zZUFsbCgwKTtcblx0ICAgICAgICAgIH0gY2F0Y2ggKGVycikge31cblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgLy8gU2luY2UgYG1ldGhvZGAgZGlkbid0IHRocm93LCB3ZSBkb24ndCB3YW50IHRvIHNpbGVuY2UgdGhlIGV4Y2VwdGlvblxuXHQgICAgICAgICAgLy8gaGVyZS5cblx0ICAgICAgICAgIHRoaXMuY2xvc2VBbGwoMCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGZpbmFsbHkge1xuXHQgICAgICAgIHRoaXMuX2lzSW5UcmFuc2FjdGlvbiA9IGZhbHNlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gcmV0O1xuXHQgIH0sXG5cdFxuXHQgIGluaXRpYWxpemVBbGw6IGZ1bmN0aW9uIChzdGFydEluZGV4KSB7XG5cdCAgICB2YXIgdHJhbnNhY3Rpb25XcmFwcGVycyA9IHRoaXMudHJhbnNhY3Rpb25XcmFwcGVycztcblx0ICAgIGZvciAodmFyIGkgPSBzdGFydEluZGV4OyBpIDwgdHJhbnNhY3Rpb25XcmFwcGVycy5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIgd3JhcHBlciA9IHRyYW5zYWN0aW9uV3JhcHBlcnNbaV07XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgLy8gQ2F0Y2hpbmcgZXJyb3JzIG1ha2VzIGRlYnVnZ2luZyBtb3JlIGRpZmZpY3VsdCwgc28gd2Ugc3RhcnQgd2l0aCB0aGVcblx0ICAgICAgICAvLyBPQlNFUlZFRF9FUlJPUiBzdGF0ZSBiZWZvcmUgb3ZlcndyaXRpbmcgaXQgd2l0aCB0aGUgcmVhbCByZXR1cm4gdmFsdWVcblx0ICAgICAgICAvLyBvZiBpbml0aWFsaXplIC0tIGlmIGl0J3Mgc3RpbGwgc2V0IHRvIE9CU0VSVkVEX0VSUk9SIGluIHRoZSBmaW5hbGx5XG5cdCAgICAgICAgLy8gYmxvY2ssIGl0IG1lYW5zIHdyYXBwZXIuaW5pdGlhbGl6ZSB0aHJldy5cblx0ICAgICAgICB0aGlzLndyYXBwZXJJbml0RGF0YVtpXSA9IFRyYW5zYWN0aW9uLk9CU0VSVkVEX0VSUk9SO1xuXHQgICAgICAgIHRoaXMud3JhcHBlckluaXREYXRhW2ldID0gd3JhcHBlci5pbml0aWFsaXplID8gd3JhcHBlci5pbml0aWFsaXplLmNhbGwodGhpcykgOiBudWxsO1xuXHQgICAgICB9IGZpbmFsbHkge1xuXHQgICAgICAgIGlmICh0aGlzLndyYXBwZXJJbml0RGF0YVtpXSA9PT0gVHJhbnNhY3Rpb24uT0JTRVJWRURfRVJST1IpIHtcblx0ICAgICAgICAgIC8vIFRoZSBpbml0aWFsaXplciBmb3Igd3JhcHBlciBpIHRocmV3IGFuIGVycm9yOyBpbml0aWFsaXplIHRoZVxuXHQgICAgICAgICAgLy8gcmVtYWluaW5nIHdyYXBwZXJzIGJ1dCBzaWxlbmNlIGFueSBleGNlcHRpb25zIGZyb20gdGhlbSB0byBlbnN1cmVcblx0ICAgICAgICAgIC8vIHRoYXQgdGhlIGZpcnN0IGVycm9yIGlzIHRoZSBvbmUgdG8gYnViYmxlIHVwLlxuXHQgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplQWxsKGkgKyAxKTtcblx0ICAgICAgICAgIH0gY2F0Y2ggKGVycikge31cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBJbnZva2VzIGVhY2ggb2YgYHRoaXMudHJhbnNhY3Rpb25XcmFwcGVycy5jbG9zZVtpXWAgZnVuY3Rpb25zLCBwYXNzaW5nIGludG9cblx0ICAgKiB0aGVtIHRoZSByZXNwZWN0aXZlIHJldHVybiB2YWx1ZXMgb2YgYHRoaXMudHJhbnNhY3Rpb25XcmFwcGVycy5pbml0W2ldYFxuXHQgICAqIChgY2xvc2VgcnMgdGhhdCBjb3JyZXNwb25kIHRvIGluaXRpYWxpemVycyB0aGF0IGZhaWxlZCB3aWxsIG5vdCBiZVxuXHQgICAqIGludm9rZWQpLlxuXHQgICAqL1xuXHQgIGNsb3NlQWxsOiBmdW5jdGlvbiAoc3RhcnRJbmRleCkge1xuXHQgICAgIXRoaXMuaXNJblRyYW5zYWN0aW9uKCkgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnVHJhbnNhY3Rpb24uY2xvc2VBbGwoKTogQ2Fubm90IGNsb3NlIHRyYW5zYWN0aW9uIHdoZW4gbm9uZSBhcmUgb3Blbi4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdCAgICB2YXIgdHJhbnNhY3Rpb25XcmFwcGVycyA9IHRoaXMudHJhbnNhY3Rpb25XcmFwcGVycztcblx0ICAgIGZvciAodmFyIGkgPSBzdGFydEluZGV4OyBpIDwgdHJhbnNhY3Rpb25XcmFwcGVycy5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIgd3JhcHBlciA9IHRyYW5zYWN0aW9uV3JhcHBlcnNbaV07XG5cdCAgICAgIHZhciBpbml0RGF0YSA9IHRoaXMud3JhcHBlckluaXREYXRhW2ldO1xuXHQgICAgICB2YXIgZXJyb3JUaHJvd247XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgLy8gQ2F0Y2hpbmcgZXJyb3JzIG1ha2VzIGRlYnVnZ2luZyBtb3JlIGRpZmZpY3VsdCwgc28gd2Ugc3RhcnQgd2l0aFxuXHQgICAgICAgIC8vIGVycm9yVGhyb3duIHNldCB0byB0cnVlIGJlZm9yZSBzZXR0aW5nIGl0IHRvIGZhbHNlIGFmdGVyIGNhbGxpbmdcblx0ICAgICAgICAvLyBjbG9zZSAtLSBpZiBpdCdzIHN0aWxsIHNldCB0byB0cnVlIGluIHRoZSBmaW5hbGx5IGJsb2NrLCBpdCBtZWFuc1xuXHQgICAgICAgIC8vIHdyYXBwZXIuY2xvc2UgdGhyZXcuXG5cdCAgICAgICAgZXJyb3JUaHJvd24gPSB0cnVlO1xuXHQgICAgICAgIGlmIChpbml0RGF0YSAhPT0gVHJhbnNhY3Rpb24uT0JTRVJWRURfRVJST1IgJiYgd3JhcHBlci5jbG9zZSkge1xuXHQgICAgICAgICAgd3JhcHBlci5jbG9zZS5jYWxsKHRoaXMsIGluaXREYXRhKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZXJyb3JUaHJvd24gPSBmYWxzZTtcblx0ICAgICAgfSBmaW5hbGx5IHtcblx0ICAgICAgICBpZiAoZXJyb3JUaHJvd24pIHtcblx0ICAgICAgICAgIC8vIFRoZSBjbG9zZXIgZm9yIHdyYXBwZXIgaSB0aHJldyBhbiBlcnJvcjsgY2xvc2UgdGhlIHJlbWFpbmluZ1xuXHQgICAgICAgICAgLy8gd3JhcHBlcnMgYnV0IHNpbGVuY2UgYW55IGV4Y2VwdGlvbnMgZnJvbSB0aGVtIHRvIGVuc3VyZSB0aGF0IHRoZVxuXHQgICAgICAgICAgLy8gZmlyc3QgZXJyb3IgaXMgdGhlIG9uZSB0byBidWJibGUgdXAuXG5cdCAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICB0aGlzLmNsb3NlQWxsKGkgKyAxKTtcblx0ICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICB0aGlzLndyYXBwZXJJbml0RGF0YS5sZW5ndGggPSAwO1xuXHQgIH1cblx0fTtcblx0XG5cdHZhciBUcmFuc2FjdGlvbiA9IHtcblx0XG5cdCAgTWl4aW46IE1peGluLFxuXHRcblx0ICAvKipcblx0ICAgKiBUb2tlbiB0byBsb29rIGZvciB0byBkZXRlcm1pbmUgaWYgYW4gZXJyb3Igb2NjdXJyZWQuXG5cdCAgICovXG5cdCAgT0JTRVJWRURfRVJST1I6IHt9XG5cdFxuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBUcmFuc2FjdGlvbjtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oNCkpKVxuXG4vKioqLyB9KSxcbi8qIDU4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MpIHsvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIGVtcHR5T2JqZWN0XG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGVtcHR5T2JqZWN0ID0ge307XG5cdFxuXHRpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgIE9iamVjdC5mcmVlemUoZW1wdHlPYmplY3QpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGVtcHR5T2JqZWN0O1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg0KSkpXG5cbi8qKiovIH0pLFxuLyogNTkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIGNvbnRhaW5zTm9kZVxuXHQgKiBAdHlwZWNoZWNrc1xuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBpc1RleHROb2RlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MCk7XG5cdFxuXHQvKmVzbGludC1kaXNhYmxlIG5vLWJpdHdpc2UgKi9cblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYSBnaXZlbiBET00gbm9kZSBjb250YWlucyBvciBpcyBhbm90aGVyIERPTSBub2RlLlxuXHQgKlxuXHQgKiBAcGFyYW0gez9ET01Ob2RlfSBvdXRlck5vZGUgT3V0ZXIgRE9NIG5vZGUuXG5cdCAqIEBwYXJhbSB7P0RPTU5vZGV9IGlubmVyTm9kZSBJbm5lciBET00gbm9kZS5cblx0ICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBgb3V0ZXJOb2RlYCBjb250YWlucyBvciBpcyBgaW5uZXJOb2RlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGNvbnRhaW5zTm9kZShfeCwgX3gyKSB7XG5cdCAgdmFyIF9hZ2FpbiA9IHRydWU7XG5cdFxuXHQgIF9mdW5jdGlvbjogd2hpbGUgKF9hZ2Fpbikge1xuXHQgICAgdmFyIG91dGVyTm9kZSA9IF94LFxuXHQgICAgICAgIGlubmVyTm9kZSA9IF94Mjtcblx0ICAgIF9hZ2FpbiA9IGZhbHNlO1xuXHRcblx0ICAgIGlmICghb3V0ZXJOb2RlIHx8ICFpbm5lck5vZGUpIHtcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfSBlbHNlIGlmIChvdXRlck5vZGUgPT09IGlubmVyTm9kZSkge1xuXHQgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgIH0gZWxzZSBpZiAoaXNUZXh0Tm9kZShvdXRlck5vZGUpKSB7XG5cdCAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgIH0gZWxzZSBpZiAoaXNUZXh0Tm9kZShpbm5lck5vZGUpKSB7XG5cdCAgICAgIF94ID0gb3V0ZXJOb2RlO1xuXHQgICAgICBfeDIgPSBpbm5lck5vZGUucGFyZW50Tm9kZTtcblx0ICAgICAgX2FnYWluID0gdHJ1ZTtcblx0ICAgICAgY29udGludWUgX2Z1bmN0aW9uO1xuXHQgICAgfSBlbHNlIGlmIChvdXRlck5vZGUuY29udGFpbnMpIHtcblx0ICAgICAgcmV0dXJuIG91dGVyTm9kZS5jb250YWlucyhpbm5lck5vZGUpO1xuXHQgICAgfSBlbHNlIGlmIChvdXRlck5vZGUuY29tcGFyZURvY3VtZW50UG9zaXRpb24pIHtcblx0ICAgICAgcmV0dXJuICEhKG91dGVyTm9kZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihpbm5lck5vZGUpICYgMTYpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBjb250YWluc05vZGU7XG5cbi8qKiovIH0pLFxuLyogNjAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIGlzVGV4dE5vZGVcblx0ICogQHR5cGVjaGVja3Ncblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgaXNOb2RlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MSk7XG5cdFxuXHQvKipcblx0ICogQHBhcmFtIHsqfSBvYmplY3QgVGhlIG9iamVjdCB0byBjaGVjay5cblx0ICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciBvciBub3QgdGhlIG9iamVjdCBpcyBhIERPTSB0ZXh0IG5vZGUuXG5cdCAqL1xuXHRmdW5jdGlvbiBpc1RleHROb2RlKG9iamVjdCkge1xuXHQgIHJldHVybiBpc05vZGUob2JqZWN0KSAmJiBvYmplY3Qubm9kZVR5cGUgPT0gMztcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpc1RleHROb2RlO1xuXG4vKioqLyB9KSxcbi8qIDYxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBpc05vZGVcblx0ICogQHR5cGVjaGVja3Ncblx0ICovXG5cdFxuXHQvKipcblx0ICogQHBhcmFtIHsqfSBvYmplY3QgVGhlIG9iamVjdCB0byBjaGVjay5cblx0ICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciBvciBub3QgdGhlIG9iamVjdCBpcyBhIERPTSBub2RlLlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0ZnVuY3Rpb24gaXNOb2RlKG9iamVjdCkge1xuXHQgIHJldHVybiAhIShvYmplY3QgJiYgKHR5cGVvZiBOb2RlID09PSAnZnVuY3Rpb24nID8gb2JqZWN0IGluc3RhbmNlb2YgTm9kZSA6IHR5cGVvZiBvYmplY3QgPT09ICdvYmplY3QnICYmIHR5cGVvZiBvYmplY3Qubm9kZVR5cGUgPT09ICdudW1iZXInICYmIHR5cGVvZiBvYmplY3Qubm9kZU5hbWUgPT09ICdzdHJpbmcnKSk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaXNOb2RlO1xuXG4vKioqLyB9KSxcbi8qIDYyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MpIHsvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIGluc3RhbnRpYXRlUmVhY3RDb21wb25lbnRcblx0ICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgUmVhY3RDb21wb3NpdGVDb21wb25lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYzKTtcblx0dmFyIFJlYWN0RW1wdHlDb21wb25lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY4KTtcblx0dmFyIFJlYWN0TmF0aXZlQ29tcG9uZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2OSk7XG5cdFxuXHR2YXIgYXNzaWduID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7XG5cdHZhciBpbnZhcmlhbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblx0dmFyIHdhcm5pbmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTtcblx0XG5cdC8vIFRvIGF2b2lkIGEgY3ljbGljIGRlcGVuZGVuY3ksIHdlIGNyZWF0ZSB0aGUgZmluYWwgY2xhc3MgaW4gdGhpcyBtb2R1bGVcblx0dmFyIFJlYWN0Q29tcG9zaXRlQ29tcG9uZW50V3JhcHBlciA9IGZ1bmN0aW9uICgpIHt9O1xuXHRhc3NpZ24oUmVhY3RDb21wb3NpdGVDb21wb25lbnRXcmFwcGVyLnByb3RvdHlwZSwgUmVhY3RDb21wb3NpdGVDb21wb25lbnQuTWl4aW4sIHtcblx0ICBfaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudDogaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudFxuXHR9KTtcblx0XG5cdGZ1bmN0aW9uIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShvd25lcikge1xuXHQgIGlmIChvd25lcikge1xuXHQgICAgdmFyIG5hbWUgPSBvd25lci5nZXROYW1lKCk7XG5cdCAgICBpZiAobmFtZSkge1xuXHQgICAgICByZXR1cm4gJyBDaGVjayB0aGUgcmVuZGVyIG1ldGhvZCBvZiBgJyArIG5hbWUgKyAnYC4nO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gJyc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiB0aGUgdHlwZSByZWZlcmVuY2UgaXMgYSBrbm93biBpbnRlcm5hbCB0eXBlLiBJLmUuIG5vdCBhIHVzZXJcblx0ICogcHJvdmlkZWQgY29tcG9zaXRlIHR5cGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb259IHR5cGVcblx0ICogQHJldHVybiB7Ym9vbGVhbn0gUmV0dXJucyB0cnVlIGlmIHRoaXMgaXMgYSB2YWxpZCBpbnRlcm5hbCB0eXBlLlxuXHQgKi9cblx0ZnVuY3Rpb24gaXNJbnRlcm5hbENvbXBvbmVudFR5cGUodHlwZSkge1xuXHQgIHJldHVybiB0eXBlb2YgdHlwZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgdHlwZS5wcm90b3R5cGUgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiB0eXBlLnByb3RvdHlwZS5tb3VudENvbXBvbmVudCA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgdHlwZS5wcm90b3R5cGUucmVjZWl2ZUNvbXBvbmVudCA9PT0gJ2Z1bmN0aW9uJztcblx0fVxuXHRcblx0LyoqXG5cdCAqIEdpdmVuIGEgUmVhY3ROb2RlLCBjcmVhdGUgYW4gaW5zdGFuY2UgdGhhdCB3aWxsIGFjdHVhbGx5IGJlIG1vdW50ZWQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7UmVhY3ROb2RlfSBub2RlXG5cdCAqIEByZXR1cm4ge29iamVjdH0gQSBuZXcgaW5zdGFuY2Ugb2YgdGhlIGVsZW1lbnQncyBjb25zdHJ1Y3Rvci5cblx0ICogQHByb3RlY3RlZFxuXHQgKi9cblx0ZnVuY3Rpb24gaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudChub2RlKSB7XG5cdCAgdmFyIGluc3RhbmNlO1xuXHRcblx0ICBpZiAobm9kZSA9PT0gbnVsbCB8fCBub2RlID09PSBmYWxzZSkge1xuXHQgICAgaW5zdGFuY2UgPSBuZXcgUmVhY3RFbXB0eUNvbXBvbmVudChpbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50KTtcblx0ICB9IGVsc2UgaWYgKHR5cGVvZiBub2RlID09PSAnb2JqZWN0Jykge1xuXHQgICAgdmFyIGVsZW1lbnQgPSBub2RlO1xuXHQgICAgIShlbGVtZW50ICYmICh0eXBlb2YgZWxlbWVudC50eXBlID09PSAnZnVuY3Rpb24nIHx8IHR5cGVvZiBlbGVtZW50LnR5cGUgPT09ICdzdHJpbmcnKSkgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRWxlbWVudCB0eXBlIGlzIGludmFsaWQ6IGV4cGVjdGVkIGEgc3RyaW5nIChmb3IgYnVpbHQtaW4gY29tcG9uZW50cykgJyArICdvciBhIGNsYXNzL2Z1bmN0aW9uIChmb3IgY29tcG9zaXRlIGNvbXBvbmVudHMpIGJ1dCBnb3Q6ICVzLiVzJywgZWxlbWVudC50eXBlID09IG51bGwgPyBlbGVtZW50LnR5cGUgOiB0eXBlb2YgZWxlbWVudC50eXBlLCBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0oZWxlbWVudC5fb3duZXIpKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdFxuXHQgICAgLy8gU3BlY2lhbCBjYXNlIHN0cmluZyB2YWx1ZXNcblx0ICAgIGlmICh0eXBlb2YgZWxlbWVudC50eXBlID09PSAnc3RyaW5nJykge1xuXHQgICAgICBpbnN0YW5jZSA9IFJlYWN0TmF0aXZlQ29tcG9uZW50LmNyZWF0ZUludGVybmFsQ29tcG9uZW50KGVsZW1lbnQpO1xuXHQgICAgfSBlbHNlIGlmIChpc0ludGVybmFsQ29tcG9uZW50VHlwZShlbGVtZW50LnR5cGUpKSB7XG5cdCAgICAgIC8vIFRoaXMgaXMgdGVtcG9yYXJpbHkgYXZhaWxhYmxlIGZvciBjdXN0b20gY29tcG9uZW50cyB0aGF0IGFyZSBub3Qgc3RyaW5nXG5cdCAgICAgIC8vIHJlcHJlc2VudGF0aW9ucy4gSS5lLiBBUlQuIE9uY2UgdGhvc2UgYXJlIHVwZGF0ZWQgdG8gdXNlIHRoZSBzdHJpbmdcblx0ICAgICAgLy8gcmVwcmVzZW50YXRpb24sIHdlIGNhbiBkcm9wIHRoaXMgY29kZSBwYXRoLlxuXHQgICAgICBpbnN0YW5jZSA9IG5ldyBlbGVtZW50LnR5cGUoZWxlbWVudCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBpbnN0YW5jZSA9IG5ldyBSZWFjdENvbXBvc2l0ZUNvbXBvbmVudFdyYXBwZXIoKTtcblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKHR5cGVvZiBub2RlID09PSAnc3RyaW5nJyB8fCB0eXBlb2Ygbm9kZSA9PT0gJ251bWJlcicpIHtcblx0ICAgIGluc3RhbmNlID0gUmVhY3ROYXRpdmVDb21wb25lbnQuY3JlYXRlSW5zdGFuY2VGb3JUZXh0KG5vZGUpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICAgdHJ1ZSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdFbmNvdW50ZXJlZCBpbnZhbGlkIFJlYWN0IG5vZGUgb2YgdHlwZSAlcycsIHR5cGVvZiBub2RlKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdCAgfVxuXHRcblx0ICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcodHlwZW9mIGluc3RhbmNlLmNvbnN0cnVjdCA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgaW5zdGFuY2UubW91bnRDb21wb25lbnQgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGluc3RhbmNlLnJlY2VpdmVDb21wb25lbnQgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGluc3RhbmNlLnVubW91bnRDb21wb25lbnQgPT09ICdmdW5jdGlvbicsICdPbmx5IFJlYWN0IENvbXBvbmVudHMgY2FuIGJlIG1vdW50ZWQuJykgOiB1bmRlZmluZWQ7XG5cdCAgfVxuXHRcblx0ICAvLyBTZXRzIHVwIHRoZSBpbnN0YW5jZS4gVGhpcyBjYW4gcHJvYmFibHkganVzdCBtb3ZlIGludG8gdGhlIGNvbnN0cnVjdG9yIG5vdy5cblx0ICBpbnN0YW5jZS5jb25zdHJ1Y3Qobm9kZSk7XG5cdFxuXHQgIC8vIFRoZXNlIHR3byBmaWVsZHMgYXJlIHVzZWQgYnkgdGhlIERPTSBhbmQgQVJUIGRpZmZpbmcgYWxnb3JpdGhtc1xuXHQgIC8vIHJlc3BlY3RpdmVseS4gSW5zdGVhZCBvZiB1c2luZyBleHBhbmRvcyBvbiBjb21wb25lbnRzLCB3ZSBzaG91bGQgYmVcblx0ICAvLyBzdG9yaW5nIHRoZSBzdGF0ZSBuZWVkZWQgYnkgdGhlIGRpZmZpbmcgYWxnb3JpdGhtcyBlbHNld2hlcmUuXG5cdCAgaW5zdGFuY2UuX21vdW50SW5kZXggPSAwO1xuXHQgIGluc3RhbmNlLl9tb3VudEltYWdlID0gbnVsbDtcblx0XG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgIGluc3RhbmNlLl9pc093bmVyTmVjZXNzYXJ5ID0gZmFsc2U7XG5cdCAgICBpbnN0YW5jZS5fd2FybmVkQWJvdXRSZWZzSW5SZW5kZXIgPSBmYWxzZTtcblx0ICB9XG5cdFxuXHQgIC8vIEludGVybmFsIGluc3RhbmNlcyBzaG91bGQgZnVsbHkgY29uc3RydWN0ZWQgYXQgdGhpcyBwb2ludCwgc28gdGhleSBzaG91bGRcblx0ICAvLyBub3QgZ2V0IGFueSBuZXcgZmllbGRzIGFkZGVkIHRvIHRoZW0gYXQgdGhpcyBwb2ludC5cblx0ICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgaWYgKE9iamVjdC5wcmV2ZW50RXh0ZW5zaW9ucykge1xuXHQgICAgICBPYmplY3QucHJldmVudEV4dGVuc2lvbnMoaW5zdGFuY2UpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGluc3RhbmNlO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGluc3RhbnRpYXRlUmVhY3RDb21wb25lbnQ7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpKSlcblxuLyoqKi8gfSksXG4vKiA2MyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzKSB7LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBSZWFjdENvbXBvc2l0ZUNvbXBvbmVudFxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBSZWFjdENvbXBvbmVudEVudmlyb25tZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2NCk7XG5cdHZhciBSZWFjdEN1cnJlbnRPd25lciA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cdHZhciBSZWFjdEVsZW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyKTtcblx0dmFyIFJlYWN0SW5zdGFuY2VNYXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3KTtcblx0dmFyIFJlYWN0UGVyZiA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHR2YXIgUmVhY3RQcm9wVHlwZUxvY2F0aW9ucyA9IF9fd2VicGFja19yZXF1aXJlX18oNjUpO1xuXHR2YXIgUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY2KTtcblx0dmFyIFJlYWN0UmVjb25jaWxlciA9IF9fd2VicGFja19yZXF1aXJlX18oNTApO1xuXHR2YXIgUmVhY3RVcGRhdGVRdWV1ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTMpO1xuXHRcblx0dmFyIGFzc2lnbiA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpO1xuXHR2YXIgZW1wdHlPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU4KTtcblx0dmFyIGludmFyaWFudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHR2YXIgc2hvdWxkVXBkYXRlUmVhY3RDb21wb25lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY3KTtcblx0dmFyIHdhcm5pbmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTtcblx0XG5cdGZ1bmN0aW9uIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShjb21wb25lbnQpIHtcblx0ICB2YXIgb3duZXIgPSBjb21wb25lbnQuX2N1cnJlbnRFbGVtZW50Ll9vd25lciB8fCBudWxsO1xuXHQgIGlmIChvd25lcikge1xuXHQgICAgdmFyIG5hbWUgPSBvd25lci5nZXROYW1lKCk7XG5cdCAgICBpZiAobmFtZSkge1xuXHQgICAgICByZXR1cm4gJyBDaGVjayB0aGUgcmVuZGVyIG1ldGhvZCBvZiBgJyArIG5hbWUgKyAnYC4nO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gJyc7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIFN0YXRlbGVzc0NvbXBvbmVudChDb21wb25lbnQpIHt9XG5cdFN0YXRlbGVzc0NvbXBvbmVudC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciBDb21wb25lbnQgPSBSZWFjdEluc3RhbmNlTWFwLmdldCh0aGlzKS5fY3VycmVudEVsZW1lbnQudHlwZTtcblx0ICByZXR1cm4gQ29tcG9uZW50KHRoaXMucHJvcHMsIHRoaXMuY29udGV4dCwgdGhpcy51cGRhdGVyKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiAtLS0tLS0tLS0tLS0tLS0tLS0gVGhlIExpZmUtQ3ljbGUgb2YgYSBDb21wb3NpdGUgQ29tcG9uZW50IC0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgKlxuXHQgKiAtIGNvbnN0cnVjdG9yOiBJbml0aWFsaXphdGlvbiBvZiBzdGF0ZS4gVGhlIGluc3RhbmNlIGlzIG5vdyByZXRhaW5lZC5cblx0ICogICAtIGNvbXBvbmVudFdpbGxNb3VudFxuXHQgKiAgIC0gcmVuZGVyXG5cdCAqICAgLSBbY2hpbGRyZW4ncyBjb25zdHJ1Y3RvcnNdXG5cdCAqICAgICAtIFtjaGlsZHJlbidzIGNvbXBvbmVudFdpbGxNb3VudCBhbmQgcmVuZGVyXVxuXHQgKiAgICAgLSBbY2hpbGRyZW4ncyBjb21wb25lbnREaWRNb3VudF1cblx0ICogICAgIC0gY29tcG9uZW50RGlkTW91bnRcblx0ICpcblx0ICogICAgICAgVXBkYXRlIFBoYXNlczpcblx0ICogICAgICAgLSBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzIChvbmx5IGNhbGxlZCBpZiBwYXJlbnQgdXBkYXRlZClcblx0ICogICAgICAgLSBzaG91bGRDb21wb25lbnRVcGRhdGVcblx0ICogICAgICAgICAtIGNvbXBvbmVudFdpbGxVcGRhdGVcblx0ICogICAgICAgICAgIC0gcmVuZGVyXG5cdCAqICAgICAgICAgICAtIFtjaGlsZHJlbidzIGNvbnN0cnVjdG9ycyBvciByZWNlaXZlIHByb3BzIHBoYXNlc11cblx0ICogICAgICAgICAtIGNvbXBvbmVudERpZFVwZGF0ZVxuXHQgKlxuXHQgKiAgICAgLSBjb21wb25lbnRXaWxsVW5tb3VudFxuXHQgKiAgICAgLSBbY2hpbGRyZW4ncyBjb21wb25lbnRXaWxsVW5tb3VudF1cblx0ICogICAtIFtjaGlsZHJlbiBkZXN0cm95ZWRdXG5cdCAqIC0gKGRlc3Ryb3llZCk6IFRoZSBpbnN0YW5jZSBpcyBub3cgYmxhbmssIHJlbGVhc2VkIGJ5IFJlYWN0IGFuZCByZWFkeSBmb3IgR0MuXG5cdCAqXG5cdCAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAqL1xuXHRcblx0LyoqXG5cdCAqIEFuIGluY3JlbWVudGluZyBJRCBhc3NpZ25lZCB0byBlYWNoIGNvbXBvbmVudCB3aGVuIGl0IGlzIG1vdW50ZWQuIFRoaXMgaXNcblx0ICogdXNlZCB0byBlbmZvcmNlIHRoZSBvcmRlciBpbiB3aGljaCBgUmVhY3RVcGRhdGVzYCB1cGRhdGVzIGRpcnR5IGNvbXBvbmVudHMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHR2YXIgbmV4dE1vdW50SUQgPSAxO1xuXHRcblx0LyoqXG5cdCAqIEBsZW5kcyB7UmVhY3RDb21wb3NpdGVDb21wb25lbnQucHJvdG90eXBlfVxuXHQgKi9cblx0dmFyIFJlYWN0Q29tcG9zaXRlQ29tcG9uZW50TWl4aW4gPSB7XG5cdFxuXHQgIC8qKlxuXHQgICAqIEJhc2UgY29uc3RydWN0b3IgZm9yIGFsbCBjb21wb3NpdGUgY29tcG9uZW50LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtSZWFjdEVsZW1lbnR9IGVsZW1lbnRcblx0ICAgKiBAZmluYWxcblx0ICAgKiBAaW50ZXJuYWxcblx0ICAgKi9cblx0ICBjb25zdHJ1Y3Q6IGZ1bmN0aW9uIChlbGVtZW50KSB7XG5cdCAgICB0aGlzLl9jdXJyZW50RWxlbWVudCA9IGVsZW1lbnQ7XG5cdCAgICB0aGlzLl9yb290Tm9kZUlEID0gbnVsbDtcblx0ICAgIHRoaXMuX2luc3RhbmNlID0gbnVsbDtcblx0XG5cdCAgICAvLyBTZWUgUmVhY3RVcGRhdGVRdWV1ZVxuXHQgICAgdGhpcy5fcGVuZGluZ0VsZW1lbnQgPSBudWxsO1xuXHQgICAgdGhpcy5fcGVuZGluZ1N0YXRlUXVldWUgPSBudWxsO1xuXHQgICAgdGhpcy5fcGVuZGluZ1JlcGxhY2VTdGF0ZSA9IGZhbHNlO1xuXHQgICAgdGhpcy5fcGVuZGluZ0ZvcmNlVXBkYXRlID0gZmFsc2U7XG5cdFxuXHQgICAgdGhpcy5fcmVuZGVyZWRDb21wb25lbnQgPSBudWxsO1xuXHRcblx0ICAgIHRoaXMuX2NvbnRleHQgPSBudWxsO1xuXHQgICAgdGhpcy5fbW91bnRPcmRlciA9IDA7XG5cdCAgICB0aGlzLl90b3BMZXZlbFdyYXBwZXIgPSBudWxsO1xuXHRcblx0ICAgIC8vIFNlZSBSZWFjdFVwZGF0ZXMgYW5kIFJlYWN0VXBkYXRlUXVldWUuXG5cdCAgICB0aGlzLl9wZW5kaW5nQ2FsbGJhY2tzID0gbnVsbDtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBJbml0aWFsaXplcyB0aGUgY29tcG9uZW50LCByZW5kZXJzIG1hcmt1cCwgYW5kIHJlZ2lzdGVycyBldmVudCBsaXN0ZW5lcnMuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge3N0cmluZ30gcm9vdElEIERPTSBJRCBvZiB0aGUgcm9vdCBub2RlLlxuXHQgICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbnxSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuXHQgICAqIEByZXR1cm4gez9zdHJpbmd9IFJlbmRlcmVkIG1hcmt1cCB0byBiZSBpbnNlcnRlZCBpbnRvIHRoZSBET00uXG5cdCAgICogQGZpbmFsXG5cdCAgICogQGludGVybmFsXG5cdCAgICovXG5cdCAgbW91bnRDb21wb25lbnQ6IGZ1bmN0aW9uIChyb290SUQsIHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG5cdCAgICB0aGlzLl9jb250ZXh0ID0gY29udGV4dDtcblx0ICAgIHRoaXMuX21vdW50T3JkZXIgPSBuZXh0TW91bnRJRCsrO1xuXHQgICAgdGhpcy5fcm9vdE5vZGVJRCA9IHJvb3RJRDtcblx0XG5cdCAgICB2YXIgcHVibGljUHJvcHMgPSB0aGlzLl9wcm9jZXNzUHJvcHModGhpcy5fY3VycmVudEVsZW1lbnQucHJvcHMpO1xuXHQgICAgdmFyIHB1YmxpY0NvbnRleHQgPSB0aGlzLl9wcm9jZXNzQ29udGV4dChjb250ZXh0KTtcblx0XG5cdCAgICB2YXIgQ29tcG9uZW50ID0gdGhpcy5fY3VycmVudEVsZW1lbnQudHlwZTtcblx0XG5cdCAgICAvLyBJbml0aWFsaXplIHRoZSBwdWJsaWMgY2xhc3Ncblx0ICAgIHZhciBpbnN0O1xuXHQgICAgdmFyIHJlbmRlcmVkRWxlbWVudDtcblx0XG5cdCAgICAvLyBUaGlzIGlzIGEgd2F5IHRvIGRldGVjdCBpZiBDb21wb25lbnQgaXMgYSBzdGF0ZWxlc3MgYXJyb3cgZnVuY3Rpb25cblx0ICAgIC8vIGNvbXBvbmVudCwgd2hpY2ggaXMgbm90IG5ld2FibGUuIEl0IG1pZ2h0IG5vdCBiZSAxMDAlIHJlbGlhYmxlIGJ1dCBpc1xuXHQgICAgLy8gc29tZXRoaW5nIHdlIGNhbiBkbyB1bnRpbCB3ZSBzdGFydCBkZXRlY3RpbmcgdGhhdCBDb21wb25lbnQgZXh0ZW5kc1xuXHQgICAgLy8gUmVhY3QuQ29tcG9uZW50LiBXZSBhbHJlYWR5IGFzc3VtZSB0aGF0IHR5cGVvZiBDb21wb25lbnQgPT09ICdmdW5jdGlvbicuXG5cdCAgICB2YXIgY2FuSW5zdGFudGlhdGUgPSAoJ3Byb3RvdHlwZScgaW4gQ29tcG9uZW50KTtcblx0XG5cdCAgICBpZiAoY2FuSW5zdGFudGlhdGUpIHtcblx0ICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgICBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50ID0gdGhpcztcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgaW5zdCA9IG5ldyBDb21wb25lbnQocHVibGljUHJvcHMsIHB1YmxpY0NvbnRleHQsIFJlYWN0VXBkYXRlUXVldWUpO1xuXHQgICAgICAgIH0gZmluYWxseSB7XG5cdCAgICAgICAgICBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50ID0gbnVsbDtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgaW5zdCA9IG5ldyBDb21wb25lbnQocHVibGljUHJvcHMsIHB1YmxpY0NvbnRleHQsIFJlYWN0VXBkYXRlUXVldWUpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKCFjYW5JbnN0YW50aWF0ZSB8fCBpbnN0ID09PSBudWxsIHx8IGluc3QgPT09IGZhbHNlIHx8IFJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChpbnN0KSkge1xuXHQgICAgICByZW5kZXJlZEVsZW1lbnQgPSBpbnN0O1xuXHQgICAgICBpbnN0ID0gbmV3IFN0YXRlbGVzc0NvbXBvbmVudChDb21wb25lbnQpO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgIC8vIFRoaXMgd2lsbCB0aHJvdyBsYXRlciBpbiBfcmVuZGVyVmFsaWRhdGVkQ29tcG9uZW50LCBidXQgYWRkIGFuIGVhcmx5XG5cdCAgICAgIC8vIHdhcm5pbmcgbm93IHRvIGhlbHAgZGVidWdnaW5nXG5cdCAgICAgIGlmIChpbnN0LnJlbmRlciA9PSBudWxsKSB7XG5cdCAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICclcyguLi4pOiBObyBgcmVuZGVyYCBtZXRob2QgZm91bmQgb24gdGhlIHJldHVybmVkIGNvbXBvbmVudCAnICsgJ2luc3RhbmNlOiB5b3UgbWF5IGhhdmUgZm9yZ290dGVuIHRvIGRlZmluZSBgcmVuZGVyYCwgcmV0dXJuZWQgJyArICdudWxsL2ZhbHNlIGZyb20gYSBzdGF0ZWxlc3MgY29tcG9uZW50LCBvciB0cmllZCB0byByZW5kZXIgYW4gJyArICdlbGVtZW50IHdob3NlIHR5cGUgaXMgYSBmdW5jdGlvbiB0aGF0IGlzblxcJ3QgYSBSZWFjdCBjb21wb25lbnQuJywgQ29tcG9uZW50LmRpc3BsYXlOYW1lIHx8IENvbXBvbmVudC5uYW1lIHx8ICdDb21wb25lbnQnKSA6IHVuZGVmaW5lZDtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyBXZSBzdXBwb3J0IEVTNiBpbmhlcml0aW5nIGZyb20gUmVhY3QuQ29tcG9uZW50LCB0aGUgbW9kdWxlIHBhdHRlcm4sXG5cdCAgICAgICAgLy8gYW5kIHN0YXRlbGVzcyBjb21wb25lbnRzLCBidXQgbm90IEVTNiBjbGFzc2VzIHRoYXQgZG9uJ3QgZXh0ZW5kXG5cdCAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoQ29tcG9uZW50LnByb3RvdHlwZSAmJiBDb21wb25lbnQucHJvdG90eXBlLmlzUmVhY3RDb21wb25lbnQgfHwgIWNhbkluc3RhbnRpYXRlIHx8ICEoaW5zdCBpbnN0YW5jZW9mIENvbXBvbmVudCksICclcyguLi4pOiBSZWFjdCBjb21wb25lbnQgY2xhc3NlcyBtdXN0IGV4dGVuZCBSZWFjdC5Db21wb25lbnQuJywgQ29tcG9uZW50LmRpc3BsYXlOYW1lIHx8IENvbXBvbmVudC5uYW1lIHx8ICdDb21wb25lbnQnKSA6IHVuZGVmaW5lZDtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIC8vIFRoZXNlIHNob3VsZCBiZSBzZXQgdXAgaW4gdGhlIGNvbnN0cnVjdG9yLCBidXQgYXMgYSBjb252ZW5pZW5jZSBmb3Jcblx0ICAgIC8vIHNpbXBsZXIgY2xhc3MgYWJzdHJhY3Rpb25zLCB3ZSBzZXQgdGhlbSB1cCBhZnRlciB0aGUgZmFjdC5cblx0ICAgIGluc3QucHJvcHMgPSBwdWJsaWNQcm9wcztcblx0ICAgIGluc3QuY29udGV4dCA9IHB1YmxpY0NvbnRleHQ7XG5cdCAgICBpbnN0LnJlZnMgPSBlbXB0eU9iamVjdDtcblx0ICAgIGluc3QudXBkYXRlciA9IFJlYWN0VXBkYXRlUXVldWU7XG5cdFxuXHQgICAgdGhpcy5faW5zdGFuY2UgPSBpbnN0O1xuXHRcblx0ICAgIC8vIFN0b3JlIGEgcmVmZXJlbmNlIGZyb20gdGhlIGluc3RhbmNlIGJhY2sgdG8gdGhlIGludGVybmFsIHJlcHJlc2VudGF0aW9uXG5cdCAgICBSZWFjdEluc3RhbmNlTWFwLnNldChpbnN0LCB0aGlzKTtcblx0XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAvLyBTaW5jZSBwbGFpbiBKUyBjbGFzc2VzIGFyZSBkZWZpbmVkIHdpdGhvdXQgYW55IHNwZWNpYWwgaW5pdGlhbGl6YXRpb25cblx0ICAgICAgLy8gbG9naWMsIHdlIGNhbiBub3QgY2F0Y2ggY29tbW9uIGVycm9ycyBlYXJseS4gVGhlcmVmb3JlLCB3ZSBoYXZlIHRvXG5cdCAgICAgIC8vIGNhdGNoIHRoZW0gaGVyZSwgYXQgaW5pdGlhbGl6YXRpb24gdGltZSwgaW5zdGVhZC5cblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoIWluc3QuZ2V0SW5pdGlhbFN0YXRlIHx8IGluc3QuZ2V0SW5pdGlhbFN0YXRlLmlzUmVhY3RDbGFzc0FwcHJvdmVkLCAnZ2V0SW5pdGlhbFN0YXRlIHdhcyBkZWZpbmVkIG9uICVzLCBhIHBsYWluIEphdmFTY3JpcHQgY2xhc3MuICcgKyAnVGhpcyBpcyBvbmx5IHN1cHBvcnRlZCBmb3IgY2xhc3NlcyBjcmVhdGVkIHVzaW5nIFJlYWN0LmNyZWF0ZUNsYXNzLiAnICsgJ0RpZCB5b3UgbWVhbiB0byBkZWZpbmUgYSBzdGF0ZSBwcm9wZXJ0eSBpbnN0ZWFkPycsIHRoaXMuZ2V0TmFtZSgpIHx8ICdhIGNvbXBvbmVudCcpIDogdW5kZWZpbmVkO1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyghaW5zdC5nZXREZWZhdWx0UHJvcHMgfHwgaW5zdC5nZXREZWZhdWx0UHJvcHMuaXNSZWFjdENsYXNzQXBwcm92ZWQsICdnZXREZWZhdWx0UHJvcHMgd2FzIGRlZmluZWQgb24gJXMsIGEgcGxhaW4gSmF2YVNjcmlwdCBjbGFzcy4gJyArICdUaGlzIGlzIG9ubHkgc3VwcG9ydGVkIGZvciBjbGFzc2VzIGNyZWF0ZWQgdXNpbmcgUmVhY3QuY3JlYXRlQ2xhc3MuICcgKyAnVXNlIGEgc3RhdGljIHByb3BlcnR5IHRvIGRlZmluZSBkZWZhdWx0UHJvcHMgaW5zdGVhZC4nLCB0aGlzLmdldE5hbWUoKSB8fCAnYSBjb21wb25lbnQnKSA6IHVuZGVmaW5lZDtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoIWluc3QucHJvcFR5cGVzLCAncHJvcFR5cGVzIHdhcyBkZWZpbmVkIGFzIGFuIGluc3RhbmNlIHByb3BlcnR5IG9uICVzLiBVc2UgYSBzdGF0aWMgJyArICdwcm9wZXJ0eSB0byBkZWZpbmUgcHJvcFR5cGVzIGluc3RlYWQuJywgdGhpcy5nZXROYW1lKCkgfHwgJ2EgY29tcG9uZW50JykgOiB1bmRlZmluZWQ7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKCFpbnN0LmNvbnRleHRUeXBlcywgJ2NvbnRleHRUeXBlcyB3YXMgZGVmaW5lZCBhcyBhbiBpbnN0YW5jZSBwcm9wZXJ0eSBvbiAlcy4gVXNlIGEgJyArICdzdGF0aWMgcHJvcGVydHkgdG8gZGVmaW5lIGNvbnRleHRUeXBlcyBpbnN0ZWFkLicsIHRoaXMuZ2V0TmFtZSgpIHx8ICdhIGNvbXBvbmVudCcpIDogdW5kZWZpbmVkO1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyh0eXBlb2YgaW5zdC5jb21wb25lbnRTaG91bGRVcGRhdGUgIT09ICdmdW5jdGlvbicsICclcyBoYXMgYSBtZXRob2QgY2FsbGVkICcgKyAnY29tcG9uZW50U2hvdWxkVXBkYXRlKCkuIERpZCB5b3UgbWVhbiBzaG91bGRDb21wb25lbnRVcGRhdGUoKT8gJyArICdUaGUgbmFtZSBpcyBwaHJhc2VkIGFzIGEgcXVlc3Rpb24gYmVjYXVzZSB0aGUgZnVuY3Rpb24gaXMgJyArICdleHBlY3RlZCB0byByZXR1cm4gYSB2YWx1ZS4nLCB0aGlzLmdldE5hbWUoKSB8fCAnQSBjb21wb25lbnQnKSA6IHVuZGVmaW5lZDtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcodHlwZW9mIGluc3QuY29tcG9uZW50RGlkVW5tb3VudCAhPT0gJ2Z1bmN0aW9uJywgJyVzIGhhcyBhIG1ldGhvZCBjYWxsZWQgJyArICdjb21wb25lbnREaWRVbm1vdW50KCkuIEJ1dCB0aGVyZSBpcyBubyBzdWNoIGxpZmVjeWNsZSBtZXRob2QuICcgKyAnRGlkIHlvdSBtZWFuIGNvbXBvbmVudFdpbGxVbm1vdW50KCk/JywgdGhpcy5nZXROYW1lKCkgfHwgJ0EgY29tcG9uZW50JykgOiB1bmRlZmluZWQ7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKHR5cGVvZiBpbnN0LmNvbXBvbmVudFdpbGxSZWNpZXZlUHJvcHMgIT09ICdmdW5jdGlvbicsICclcyBoYXMgYSBtZXRob2QgY2FsbGVkICcgKyAnY29tcG9uZW50V2lsbFJlY2lldmVQcm9wcygpLiBEaWQgeW91IG1lYW4gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcygpPycsIHRoaXMuZ2V0TmFtZSgpIHx8ICdBIGNvbXBvbmVudCcpIDogdW5kZWZpbmVkO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBpbml0aWFsU3RhdGUgPSBpbnN0LnN0YXRlO1xuXHQgICAgaWYgKGluaXRpYWxTdGF0ZSA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgIGluc3Quc3RhdGUgPSBpbml0aWFsU3RhdGUgPSBudWxsO1xuXHQgICAgfVxuXHQgICAgISh0eXBlb2YgaW5pdGlhbFN0YXRlID09PSAnb2JqZWN0JyAmJiAhQXJyYXkuaXNBcnJheShpbml0aWFsU3RhdGUpKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICclcy5zdGF0ZTogbXVzdCBiZSBzZXQgdG8gYW4gb2JqZWN0IG9yIG51bGwnLCB0aGlzLmdldE5hbWUoKSB8fCAnUmVhY3RDb21wb3NpdGVDb21wb25lbnQnKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdFxuXHQgICAgdGhpcy5fcGVuZGluZ1N0YXRlUXVldWUgPSBudWxsO1xuXHQgICAgdGhpcy5fcGVuZGluZ1JlcGxhY2VTdGF0ZSA9IGZhbHNlO1xuXHQgICAgdGhpcy5fcGVuZGluZ0ZvcmNlVXBkYXRlID0gZmFsc2U7XG5cdFxuXHQgICAgaWYgKGluc3QuY29tcG9uZW50V2lsbE1vdW50KSB7XG5cdCAgICAgIGluc3QuY29tcG9uZW50V2lsbE1vdW50KCk7XG5cdCAgICAgIC8vIFdoZW4gbW91bnRpbmcsIGNhbGxzIHRvIGBzZXRTdGF0ZWAgYnkgYGNvbXBvbmVudFdpbGxNb3VudGAgd2lsbCBzZXRcblx0ICAgICAgLy8gYHRoaXMuX3BlbmRpbmdTdGF0ZVF1ZXVlYCB3aXRob3V0IHRyaWdnZXJpbmcgYSByZS1yZW5kZXIuXG5cdCAgICAgIGlmICh0aGlzLl9wZW5kaW5nU3RhdGVRdWV1ZSkge1xuXHQgICAgICAgIGluc3Quc3RhdGUgPSB0aGlzLl9wcm9jZXNzUGVuZGluZ1N0YXRlKGluc3QucHJvcHMsIGluc3QuY29udGV4dCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICAvLyBJZiBub3QgYSBzdGF0ZWxlc3MgY29tcG9uZW50LCB3ZSBub3cgcmVuZGVyXG5cdCAgICBpZiAocmVuZGVyZWRFbGVtZW50ID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgcmVuZGVyZWRFbGVtZW50ID0gdGhpcy5fcmVuZGVyVmFsaWRhdGVkQ29tcG9uZW50KCk7XG5cdCAgICB9XG5cdFxuXHQgICAgdGhpcy5fcmVuZGVyZWRDb21wb25lbnQgPSB0aGlzLl9pbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50KHJlbmRlcmVkRWxlbWVudCk7XG5cdFxuXHQgICAgdmFyIG1hcmt1cCA9IFJlYWN0UmVjb25jaWxlci5tb3VudENvbXBvbmVudCh0aGlzLl9yZW5kZXJlZENvbXBvbmVudCwgcm9vdElELCB0cmFuc2FjdGlvbiwgdGhpcy5fcHJvY2Vzc0NoaWxkQ29udGV4dChjb250ZXh0KSk7XG5cdCAgICBpZiAoaW5zdC5jb21wb25lbnREaWRNb3VudCkge1xuXHQgICAgICB0cmFuc2FjdGlvbi5nZXRSZWFjdE1vdW50UmVhZHkoKS5lbnF1ZXVlKGluc3QuY29tcG9uZW50RGlkTW91bnQsIGluc3QpO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBtYXJrdXA7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogUmVsZWFzZXMgYW55IHJlc291cmNlcyBhbGxvY2F0ZWQgYnkgYG1vdW50Q29tcG9uZW50YC5cblx0ICAgKlxuXHQgICAqIEBmaW5hbFxuXHQgICAqIEBpbnRlcm5hbFxuXHQgICAqL1xuXHQgIHVubW91bnRDb21wb25lbnQ6IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBpbnN0ID0gdGhpcy5faW5zdGFuY2U7XG5cdFxuXHQgICAgaWYgKGluc3QuY29tcG9uZW50V2lsbFVubW91bnQpIHtcblx0ICAgICAgaW5zdC5jb21wb25lbnRXaWxsVW5tb3VudCgpO1xuXHQgICAgfVxuXHRcblx0ICAgIFJlYWN0UmVjb25jaWxlci51bm1vdW50Q29tcG9uZW50KHRoaXMuX3JlbmRlcmVkQ29tcG9uZW50KTtcblx0ICAgIHRoaXMuX3JlbmRlcmVkQ29tcG9uZW50ID0gbnVsbDtcblx0ICAgIHRoaXMuX2luc3RhbmNlID0gbnVsbDtcblx0XG5cdCAgICAvLyBSZXNldCBwZW5kaW5nIGZpZWxkc1xuXHQgICAgLy8gRXZlbiBpZiB0aGlzIGNvbXBvbmVudCBpcyBzY2hlZHVsZWQgZm9yIGFub3RoZXIgdXBkYXRlIGluIFJlYWN0VXBkYXRlcyxcblx0ICAgIC8vIGl0IHdvdWxkIHN0aWxsIGJlIGlnbm9yZWQgYmVjYXVzZSB0aGVzZSBmaWVsZHMgYXJlIHJlc2V0LlxuXHQgICAgdGhpcy5fcGVuZGluZ1N0YXRlUXVldWUgPSBudWxsO1xuXHQgICAgdGhpcy5fcGVuZGluZ1JlcGxhY2VTdGF0ZSA9IGZhbHNlO1xuXHQgICAgdGhpcy5fcGVuZGluZ0ZvcmNlVXBkYXRlID0gZmFsc2U7XG5cdCAgICB0aGlzLl9wZW5kaW5nQ2FsbGJhY2tzID0gbnVsbDtcblx0ICAgIHRoaXMuX3BlbmRpbmdFbGVtZW50ID0gbnVsbDtcblx0XG5cdCAgICAvLyBUaGVzZSBmaWVsZHMgZG8gbm90IHJlYWxseSBuZWVkIHRvIGJlIHJlc2V0IHNpbmNlIHRoaXMgb2JqZWN0IGlzIG5vXG5cdCAgICAvLyBsb25nZXIgYWNjZXNzaWJsZS5cblx0ICAgIHRoaXMuX2NvbnRleHQgPSBudWxsO1xuXHQgICAgdGhpcy5fcm9vdE5vZGVJRCA9IG51bGw7XG5cdCAgICB0aGlzLl90b3BMZXZlbFdyYXBwZXIgPSBudWxsO1xuXHRcblx0ICAgIC8vIERlbGV0ZSB0aGUgcmVmZXJlbmNlIGZyb20gdGhlIGluc3RhbmNlIHRvIHRoaXMgaW50ZXJuYWwgcmVwcmVzZW50YXRpb25cblx0ICAgIC8vIHdoaWNoIGFsbG93IHRoZSBpbnRlcm5hbHMgdG8gYmUgcHJvcGVybHkgY2xlYW5lZCB1cCBldmVuIGlmIHRoZSB1c2VyXG5cdCAgICAvLyBsZWFrcyBhIHJlZmVyZW5jZSB0byB0aGUgcHVibGljIGluc3RhbmNlLlxuXHQgICAgUmVhY3RJbnN0YW5jZU1hcC5yZW1vdmUoaW5zdCk7XG5cdFxuXHQgICAgLy8gU29tZSBleGlzdGluZyBjb21wb25lbnRzIHJlbHkgb24gaW5zdC5wcm9wcyBldmVuIGFmdGVyIHRoZXkndmUgYmVlblxuXHQgICAgLy8gZGVzdHJveWVkIChpbiBldmVudCBoYW5kbGVycykuXG5cdCAgICAvLyBUT0RPOiBpbnN0LnByb3BzID0gbnVsbDtcblx0ICAgIC8vIFRPRE86IGluc3Quc3RhdGUgPSBudWxsO1xuXHQgICAgLy8gVE9ETzogaW5zdC5jb250ZXh0ID0gbnVsbDtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBGaWx0ZXJzIHRoZSBjb250ZXh0IG9iamVjdCB0byBvbmx5IGNvbnRhaW4ga2V5cyBzcGVjaWZpZWQgaW5cblx0ICAgKiBgY29udGV4dFR5cGVzYFxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtvYmplY3R9IGNvbnRleHRcblx0ICAgKiBAcmV0dXJuIHs/b2JqZWN0fVxuXHQgICAqIEBwcml2YXRlXG5cdCAgICovXG5cdCAgX21hc2tDb250ZXh0OiBmdW5jdGlvbiAoY29udGV4dCkge1xuXHQgICAgdmFyIG1hc2tlZENvbnRleHQgPSBudWxsO1xuXHQgICAgdmFyIENvbXBvbmVudCA9IHRoaXMuX2N1cnJlbnRFbGVtZW50LnR5cGU7XG5cdCAgICB2YXIgY29udGV4dFR5cGVzID0gQ29tcG9uZW50LmNvbnRleHRUeXBlcztcblx0ICAgIGlmICghY29udGV4dFR5cGVzKSB7XG5cdCAgICAgIHJldHVybiBlbXB0eU9iamVjdDtcblx0ICAgIH1cblx0ICAgIG1hc2tlZENvbnRleHQgPSB7fTtcblx0ICAgIGZvciAodmFyIGNvbnRleHROYW1lIGluIGNvbnRleHRUeXBlcykge1xuXHQgICAgICBtYXNrZWRDb250ZXh0W2NvbnRleHROYW1lXSA9IGNvbnRleHRbY29udGV4dE5hbWVdO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIG1hc2tlZENvbnRleHQ7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogRmlsdGVycyB0aGUgY29udGV4dCBvYmplY3QgdG8gb25seSBjb250YWluIGtleXMgc3BlY2lmaWVkIGluXG5cdCAgICogYGNvbnRleHRUeXBlc2AsIGFuZCBhc3NlcnRzIHRoYXQgdGhleSBhcmUgdmFsaWQuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge29iamVjdH0gY29udGV4dFxuXHQgICAqIEByZXR1cm4gez9vYmplY3R9XG5cdCAgICogQHByaXZhdGVcblx0ICAgKi9cblx0ICBfcHJvY2Vzc0NvbnRleHQ6IGZ1bmN0aW9uIChjb250ZXh0KSB7XG5cdCAgICB2YXIgbWFza2VkQ29udGV4dCA9IHRoaXMuX21hc2tDb250ZXh0KGNvbnRleHQpO1xuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgdmFyIENvbXBvbmVudCA9IHRoaXMuX2N1cnJlbnRFbGVtZW50LnR5cGU7XG5cdCAgICAgIGlmIChDb21wb25lbnQuY29udGV4dFR5cGVzKSB7XG5cdCAgICAgICAgdGhpcy5fY2hlY2tQcm9wVHlwZXMoQ29tcG9uZW50LmNvbnRleHRUeXBlcywgbWFza2VkQ29udGV4dCwgUmVhY3RQcm9wVHlwZUxvY2F0aW9ucy5jb250ZXh0KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIG1hc2tlZENvbnRleHQ7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogQHBhcmFtIHtvYmplY3R9IGN1cnJlbnRDb250ZXh0XG5cdCAgICogQHJldHVybiB7b2JqZWN0fVxuXHQgICAqIEBwcml2YXRlXG5cdCAgICovXG5cdCAgX3Byb2Nlc3NDaGlsZENvbnRleHQ6IGZ1bmN0aW9uIChjdXJyZW50Q29udGV4dCkge1xuXHQgICAgdmFyIENvbXBvbmVudCA9IHRoaXMuX2N1cnJlbnRFbGVtZW50LnR5cGU7XG5cdCAgICB2YXIgaW5zdCA9IHRoaXMuX2luc3RhbmNlO1xuXHQgICAgdmFyIGNoaWxkQ29udGV4dCA9IGluc3QuZ2V0Q2hpbGRDb250ZXh0ICYmIGluc3QuZ2V0Q2hpbGRDb250ZXh0KCk7XG5cdCAgICBpZiAoY2hpbGRDb250ZXh0KSB7XG5cdCAgICAgICEodHlwZW9mIENvbXBvbmVudC5jaGlsZENvbnRleHRUeXBlcyA9PT0gJ29iamVjdCcpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJyVzLmdldENoaWxkQ29udGV4dCgpOiBjaGlsZENvbnRleHRUeXBlcyBtdXN0IGJlIGRlZmluZWQgaW4gb3JkZXIgdG8gJyArICd1c2UgZ2V0Q2hpbGRDb250ZXh0KCkuJywgdGhpcy5nZXROYW1lKCkgfHwgJ1JlYWN0Q29tcG9zaXRlQ29tcG9uZW50JykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXHQgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgIHRoaXMuX2NoZWNrUHJvcFR5cGVzKENvbXBvbmVudC5jaGlsZENvbnRleHRUeXBlcywgY2hpbGRDb250ZXh0LCBSZWFjdFByb3BUeXBlTG9jYXRpb25zLmNoaWxkQ29udGV4dCk7XG5cdCAgICAgIH1cblx0ICAgICAgZm9yICh2YXIgbmFtZSBpbiBjaGlsZENvbnRleHQpIHtcblx0ICAgICAgICAhKG5hbWUgaW4gQ29tcG9uZW50LmNoaWxkQ29udGV4dFR5cGVzKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICclcy5nZXRDaGlsZENvbnRleHQoKToga2V5IFwiJXNcIiBpcyBub3QgZGVmaW5lZCBpbiBjaGlsZENvbnRleHRUeXBlcy4nLCB0aGlzLmdldE5hbWUoKSB8fCAnUmVhY3RDb21wb3NpdGVDb21wb25lbnQnLCBuYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGFzc2lnbih7fSwgY3VycmVudENvbnRleHQsIGNoaWxkQ29udGV4dCk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gY3VycmVudENvbnRleHQ7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogUHJvY2Vzc2VzIHByb3BzIGJ5IHNldHRpbmcgZGVmYXVsdCB2YWx1ZXMgZm9yIHVuc3BlY2lmaWVkIHByb3BzIGFuZFxuXHQgICAqIGFzc2VydGluZyB0aGF0IHRoZSBwcm9wcyBhcmUgdmFsaWQuIERvZXMgbm90IG11dGF0ZSBpdHMgYXJndW1lbnQ7IHJldHVybnNcblx0ICAgKiBhIG5ldyBwcm9wcyBvYmplY3Qgd2l0aCBkZWZhdWx0cyBtZXJnZWQgaW4uXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge29iamVjdH0gbmV3UHJvcHNcblx0ICAgKiBAcmV0dXJuIHtvYmplY3R9XG5cdCAgICogQHByaXZhdGVcblx0ICAgKi9cblx0ICBfcHJvY2Vzc1Byb3BzOiBmdW5jdGlvbiAobmV3UHJvcHMpIHtcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgIHZhciBDb21wb25lbnQgPSB0aGlzLl9jdXJyZW50RWxlbWVudC50eXBlO1xuXHQgICAgICBpZiAoQ29tcG9uZW50LnByb3BUeXBlcykge1xuXHQgICAgICAgIHRoaXMuX2NoZWNrUHJvcFR5cGVzKENvbXBvbmVudC5wcm9wVHlwZXMsIG5ld1Byb3BzLCBSZWFjdFByb3BUeXBlTG9jYXRpb25zLnByb3ApO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gbmV3UHJvcHM7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogQXNzZXJ0IHRoYXQgdGhlIHByb3BzIGFyZSB2YWxpZFxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtvYmplY3R9IHByb3BUeXBlcyBNYXAgb2YgcHJvcCBuYW1lIHRvIGEgUmVhY3RQcm9wVHlwZVxuXHQgICAqIEBwYXJhbSB7b2JqZWN0fSBwcm9wc1xuXHQgICAqIEBwYXJhbSB7c3RyaW5nfSBsb2NhdGlvbiBlLmcuIFwicHJvcFwiLCBcImNvbnRleHRcIiwgXCJjaGlsZCBjb250ZXh0XCJcblx0ICAgKiBAcHJpdmF0ZVxuXHQgICAqL1xuXHQgIF9jaGVja1Byb3BUeXBlczogZnVuY3Rpb24gKHByb3BUeXBlcywgcHJvcHMsIGxvY2F0aW9uKSB7XG5cdCAgICAvLyBUT0RPOiBTdG9wIHZhbGlkYXRpbmcgcHJvcCB0eXBlcyBoZXJlIGFuZCBvbmx5IHVzZSB0aGUgZWxlbWVudFxuXHQgICAgLy8gdmFsaWRhdGlvbi5cblx0ICAgIHZhciBjb21wb25lbnROYW1lID0gdGhpcy5nZXROYW1lKCk7XG5cdCAgICBmb3IgKHZhciBwcm9wTmFtZSBpbiBwcm9wVHlwZXMpIHtcblx0ICAgICAgaWYgKHByb3BUeXBlcy5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkpIHtcblx0ICAgICAgICB2YXIgZXJyb3I7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIC8vIFRoaXMgaXMgaW50ZW50aW9uYWxseSBhbiBpbnZhcmlhbnQgdGhhdCBnZXRzIGNhdWdodC4gSXQncyB0aGUgc2FtZVxuXHQgICAgICAgICAgLy8gYmVoYXZpb3IgYXMgd2l0aG91dCB0aGlzIHN0YXRlbWVudCBleGNlcHQgd2l0aCBhIGJldHRlciBtZXNzYWdlLlxuXHQgICAgICAgICAgISh0eXBlb2YgcHJvcFR5cGVzW3Byb3BOYW1lXSA9PT0gJ2Z1bmN0aW9uJykgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnJXM6ICVzIHR5cGUgYCVzYCBpcyBpbnZhbGlkOyBpdCBtdXN0IGJlIGEgZnVuY3Rpb24sIHVzdWFsbHkgJyArICdmcm9tIFJlYWN0LlByb3BUeXBlcy4nLCBjb21wb25lbnROYW1lIHx8ICdSZWFjdCBjbGFzcycsIFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXSwgcHJvcE5hbWUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0ICAgICAgICAgIGVycm9yID0gcHJvcFR5cGVzW3Byb3BOYW1lXShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBudWxsLCAnU0VDUkVUX0RPX05PVF9QQVNTX1RISVNfT1JfWU9VX1dJTExfQkVfRklSRUQnKTtcblx0ICAgICAgICB9IGNhdGNoIChleCkge1xuXHQgICAgICAgICAgZXJyb3IgPSBleDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcblx0ICAgICAgICAgIC8vIFdlIG1heSB3YW50IHRvIGV4dGVuZCB0aGlzIGxvZ2ljIGZvciBzaW1pbGFyIGVycm9ycyBpblxuXHQgICAgICAgICAgLy8gdG9wLWxldmVsIHJlbmRlciBjYWxscywgc28gSSdtIGFic3RyYWN0aW5nIGl0IGF3YXkgaW50b1xuXHQgICAgICAgICAgLy8gYSBmdW5jdGlvbiB0byBtaW5pbWl6ZSByZWZhY3RvcmluZyBpbiB0aGUgZnV0dXJlXG5cdCAgICAgICAgICB2YXIgYWRkZW5kdW0gPSBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0odGhpcyk7XG5cdFxuXHQgICAgICAgICAgaWYgKGxvY2F0aW9uID09PSBSZWFjdFByb3BUeXBlTG9jYXRpb25zLnByb3ApIHtcblx0ICAgICAgICAgICAgLy8gUHJlZmFjZSBnaXZlcyB1cyBzb21ldGhpbmcgdG8gYmxhY2tsaXN0IGluIHdhcm5pbmcgbW9kdWxlXG5cdCAgICAgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnRmFpbGVkIENvbXBvc2l0ZSBwcm9wVHlwZTogJXMlcycsIGVycm9yLm1lc3NhZ2UsIGFkZGVuZHVtKSA6IHVuZGVmaW5lZDtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnRmFpbGVkIENvbnRleHQgVHlwZXM6ICVzJXMnLCBlcnJvci5tZXNzYWdlLCBhZGRlbmR1bSkgOiB1bmRlZmluZWQ7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgcmVjZWl2ZUNvbXBvbmVudDogZnVuY3Rpb24gKG5leHRFbGVtZW50LCB0cmFuc2FjdGlvbiwgbmV4dENvbnRleHQpIHtcblx0ICAgIHZhciBwcmV2RWxlbWVudCA9IHRoaXMuX2N1cnJlbnRFbGVtZW50O1xuXHQgICAgdmFyIHByZXZDb250ZXh0ID0gdGhpcy5fY29udGV4dDtcblx0XG5cdCAgICB0aGlzLl9wZW5kaW5nRWxlbWVudCA9IG51bGw7XG5cdFxuXHQgICAgdGhpcy51cGRhdGVDb21wb25lbnQodHJhbnNhY3Rpb24sIHByZXZFbGVtZW50LCBuZXh0RWxlbWVudCwgcHJldkNvbnRleHQsIG5leHRDb250ZXh0KTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBJZiBhbnkgb2YgYF9wZW5kaW5nRWxlbWVudGAsIGBfcGVuZGluZ1N0YXRlUXVldWVgLCBvciBgX3BlbmRpbmdGb3JjZVVwZGF0ZWBcblx0ICAgKiBpcyBzZXQsIHVwZGF0ZSB0aGUgY29tcG9uZW50LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuXHQgICAqIEBpbnRlcm5hbFxuXHQgICAqL1xuXHQgIHBlcmZvcm1VcGRhdGVJZk5lY2Vzc2FyeTogZnVuY3Rpb24gKHRyYW5zYWN0aW9uKSB7XG5cdCAgICBpZiAodGhpcy5fcGVuZGluZ0VsZW1lbnQgIT0gbnVsbCkge1xuXHQgICAgICBSZWFjdFJlY29uY2lsZXIucmVjZWl2ZUNvbXBvbmVudCh0aGlzLCB0aGlzLl9wZW5kaW5nRWxlbWVudCB8fCB0aGlzLl9jdXJyZW50RWxlbWVudCwgdHJhbnNhY3Rpb24sIHRoaXMuX2NvbnRleHQpO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmICh0aGlzLl9wZW5kaW5nU3RhdGVRdWV1ZSAhPT0gbnVsbCB8fCB0aGlzLl9wZW5kaW5nRm9yY2VVcGRhdGUpIHtcblx0ICAgICAgdGhpcy51cGRhdGVDb21wb25lbnQodHJhbnNhY3Rpb24sIHRoaXMuX2N1cnJlbnRFbGVtZW50LCB0aGlzLl9jdXJyZW50RWxlbWVudCwgdGhpcy5fY29udGV4dCwgdGhpcy5fY29udGV4dCk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogUGVyZm9ybSBhbiB1cGRhdGUgdG8gYSBtb3VudGVkIGNvbXBvbmVudC4gVGhlIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgYW5kXG5cdCAgICogc2hvdWxkQ29tcG9uZW50VXBkYXRlIG1ldGhvZHMgYXJlIGNhbGxlZCwgdGhlbiAoYXNzdW1pbmcgdGhlIHVwZGF0ZSBpc24ndFxuXHQgICAqIHNraXBwZWQpIHRoZSByZW1haW5pbmcgdXBkYXRlIGxpZmVjeWNsZSBtZXRob2RzIGFyZSBjYWxsZWQgYW5kIHRoZSBET01cblx0ICAgKiByZXByZXNlbnRhdGlvbiBpcyB1cGRhdGVkLlxuXHQgICAqXG5cdCAgICogQnkgZGVmYXVsdCwgdGhpcyBpbXBsZW1lbnRzIFJlYWN0J3MgcmVuZGVyaW5nIGFuZCByZWNvbmNpbGlhdGlvbiBhbGdvcml0aG0uXG5cdCAgICogU29waGlzdGljYXRlZCBjbGllbnRzIG1heSB3aXNoIHRvIG92ZXJyaWRlIHRoaXMuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG5cdCAgICogQHBhcmFtIHtSZWFjdEVsZW1lbnR9IHByZXZQYXJlbnRFbGVtZW50XG5cdCAgICogQHBhcmFtIHtSZWFjdEVsZW1lbnR9IG5leHRQYXJlbnRFbGVtZW50XG5cdCAgICogQGludGVybmFsXG5cdCAgICogQG92ZXJyaWRhYmxlXG5cdCAgICovXG5cdCAgdXBkYXRlQ29tcG9uZW50OiBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHByZXZQYXJlbnRFbGVtZW50LCBuZXh0UGFyZW50RWxlbWVudCwgcHJldlVubWFza2VkQ29udGV4dCwgbmV4dFVubWFza2VkQ29udGV4dCkge1xuXHQgICAgdmFyIGluc3QgPSB0aGlzLl9pbnN0YW5jZTtcblx0XG5cdCAgICB2YXIgbmV4dENvbnRleHQgPSB0aGlzLl9jb250ZXh0ID09PSBuZXh0VW5tYXNrZWRDb250ZXh0ID8gaW5zdC5jb250ZXh0IDogdGhpcy5fcHJvY2Vzc0NvbnRleHQobmV4dFVubWFza2VkQ29udGV4dCk7XG5cdCAgICB2YXIgbmV4dFByb3BzO1xuXHRcblx0ICAgIC8vIERpc3Rpbmd1aXNoIGJldHdlZW4gYSBwcm9wcyB1cGRhdGUgdmVyc3VzIGEgc2ltcGxlIHN0YXRlIHVwZGF0ZVxuXHQgICAgaWYgKHByZXZQYXJlbnRFbGVtZW50ID09PSBuZXh0UGFyZW50RWxlbWVudCkge1xuXHQgICAgICAvLyBTa2lwIGNoZWNraW5nIHByb3AgdHlwZXMgYWdhaW4gLS0gd2UgZG9uJ3QgcmVhZCBpbnN0LnByb3BzIHRvIGF2b2lkXG5cdCAgICAgIC8vIHdhcm5pbmcgZm9yIERPTSBjb21wb25lbnQgcHJvcHMgaW4gdGhpcyB1cGdyYWRlXG5cdCAgICAgIG5leHRQcm9wcyA9IG5leHRQYXJlbnRFbGVtZW50LnByb3BzO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgbmV4dFByb3BzID0gdGhpcy5fcHJvY2Vzc1Byb3BzKG5leHRQYXJlbnRFbGVtZW50LnByb3BzKTtcblx0ICAgICAgLy8gQW4gdXBkYXRlIGhlcmUgd2lsbCBzY2hlZHVsZSBhbiB1cGRhdGUgYnV0IGltbWVkaWF0ZWx5IHNldFxuXHQgICAgICAvLyBfcGVuZGluZ1N0YXRlUXVldWUgd2hpY2ggd2lsbCBlbnN1cmUgdGhhdCBhbnkgc3RhdGUgdXBkYXRlcyBnZXRzXG5cdCAgICAgIC8vIGltbWVkaWF0ZWx5IHJlY29uY2lsZWQgaW5zdGVhZCBvZiB3YWl0aW5nIGZvciB0aGUgbmV4dCBiYXRjaC5cblx0XG5cdCAgICAgIGlmIChpbnN0LmNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMpIHtcblx0ICAgICAgICBpbnN0LmNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzLCBuZXh0Q29udGV4dCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICB2YXIgbmV4dFN0YXRlID0gdGhpcy5fcHJvY2Vzc1BlbmRpbmdTdGF0ZShuZXh0UHJvcHMsIG5leHRDb250ZXh0KTtcblx0XG5cdCAgICB2YXIgc2hvdWxkVXBkYXRlID0gdGhpcy5fcGVuZGluZ0ZvcmNlVXBkYXRlIHx8ICFpbnN0LnNob3VsZENvbXBvbmVudFVwZGF0ZSB8fCBpbnN0LnNob3VsZENvbXBvbmVudFVwZGF0ZShuZXh0UHJvcHMsIG5leHRTdGF0ZSwgbmV4dENvbnRleHQpO1xuXHRcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKHR5cGVvZiBzaG91bGRVcGRhdGUgIT09ICd1bmRlZmluZWQnLCAnJXMuc2hvdWxkQ29tcG9uZW50VXBkYXRlKCk6IFJldHVybmVkIHVuZGVmaW5lZCBpbnN0ZWFkIG9mIGEgJyArICdib29sZWFuIHZhbHVlLiBNYWtlIHN1cmUgdG8gcmV0dXJuIHRydWUgb3IgZmFsc2UuJywgdGhpcy5nZXROYW1lKCkgfHwgJ1JlYWN0Q29tcG9zaXRlQ29tcG9uZW50JykgOiB1bmRlZmluZWQ7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHNob3VsZFVwZGF0ZSkge1xuXHQgICAgICB0aGlzLl9wZW5kaW5nRm9yY2VVcGRhdGUgPSBmYWxzZTtcblx0ICAgICAgLy8gV2lsbCBzZXQgYHRoaXMucHJvcHNgLCBgdGhpcy5zdGF0ZWAgYW5kIGB0aGlzLmNvbnRleHRgLlxuXHQgICAgICB0aGlzLl9wZXJmb3JtQ29tcG9uZW50VXBkYXRlKG5leHRQYXJlbnRFbGVtZW50LCBuZXh0UHJvcHMsIG5leHRTdGF0ZSwgbmV4dENvbnRleHQsIHRyYW5zYWN0aW9uLCBuZXh0VW5tYXNrZWRDb250ZXh0KTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIElmIGl0J3MgZGV0ZXJtaW5lZCB0aGF0IGEgY29tcG9uZW50IHNob3VsZCBub3QgdXBkYXRlLCB3ZSBzdGlsbCB3YW50XG5cdCAgICAgIC8vIHRvIHNldCBwcm9wcyBhbmQgc3RhdGUgYnV0IHdlIHNob3J0Y3V0IHRoZSByZXN0IG9mIHRoZSB1cGRhdGUuXG5cdCAgICAgIHRoaXMuX2N1cnJlbnRFbGVtZW50ID0gbmV4dFBhcmVudEVsZW1lbnQ7XG5cdCAgICAgIHRoaXMuX2NvbnRleHQgPSBuZXh0VW5tYXNrZWRDb250ZXh0O1xuXHQgICAgICBpbnN0LnByb3BzID0gbmV4dFByb3BzO1xuXHQgICAgICBpbnN0LnN0YXRlID0gbmV4dFN0YXRlO1xuXHQgICAgICBpbnN0LmNvbnRleHQgPSBuZXh0Q29udGV4dDtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBfcHJvY2Vzc1BlbmRpbmdTdGF0ZTogZnVuY3Rpb24gKHByb3BzLCBjb250ZXh0KSB7XG5cdCAgICB2YXIgaW5zdCA9IHRoaXMuX2luc3RhbmNlO1xuXHQgICAgdmFyIHF1ZXVlID0gdGhpcy5fcGVuZGluZ1N0YXRlUXVldWU7XG5cdCAgICB2YXIgcmVwbGFjZSA9IHRoaXMuX3BlbmRpbmdSZXBsYWNlU3RhdGU7XG5cdCAgICB0aGlzLl9wZW5kaW5nUmVwbGFjZVN0YXRlID0gZmFsc2U7XG5cdCAgICB0aGlzLl9wZW5kaW5nU3RhdGVRdWV1ZSA9IG51bGw7XG5cdFxuXHQgICAgaWYgKCFxdWV1ZSkge1xuXHQgICAgICByZXR1cm4gaW5zdC5zdGF0ZTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAocmVwbGFjZSAmJiBxdWV1ZS5sZW5ndGggPT09IDEpIHtcblx0ICAgICAgcmV0dXJuIHF1ZXVlWzBdO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBuZXh0U3RhdGUgPSBhc3NpZ24oe30sIHJlcGxhY2UgPyBxdWV1ZVswXSA6IGluc3Quc3RhdGUpO1xuXHQgICAgZm9yICh2YXIgaSA9IHJlcGxhY2UgPyAxIDogMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBwYXJ0aWFsID0gcXVldWVbaV07XG5cdCAgICAgIGFzc2lnbihuZXh0U3RhdGUsIHR5cGVvZiBwYXJ0aWFsID09PSAnZnVuY3Rpb24nID8gcGFydGlhbC5jYWxsKGluc3QsIG5leHRTdGF0ZSwgcHJvcHMsIGNvbnRleHQpIDogcGFydGlhbCk7XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIG5leHRTdGF0ZTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBNZXJnZXMgbmV3IHByb3BzIGFuZCBzdGF0ZSwgbm90aWZpZXMgZGVsZWdhdGUgbWV0aG9kcyBvZiB1cGRhdGUgYW5kXG5cdCAgICogcGVyZm9ybXMgdXBkYXRlLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtSZWFjdEVsZW1lbnR9IG5leHRFbGVtZW50IE5leHQgZWxlbWVudFxuXHQgICAqIEBwYXJhbSB7b2JqZWN0fSBuZXh0UHJvcHMgTmV4dCBwdWJsaWMgb2JqZWN0IHRvIHNldCBhcyBwcm9wZXJ0aWVzLlxuXHQgICAqIEBwYXJhbSB7P29iamVjdH0gbmV4dFN0YXRlIE5leHQgb2JqZWN0IHRvIHNldCBhcyBzdGF0ZS5cblx0ICAgKiBAcGFyYW0gez9vYmplY3R9IG5leHRDb250ZXh0IE5leHQgcHVibGljIG9iamVjdCB0byBzZXQgYXMgY29udGV4dC5cblx0ICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG5cdCAgICogQHBhcmFtIHs/b2JqZWN0fSB1bm1hc2tlZENvbnRleHRcblx0ICAgKiBAcHJpdmF0ZVxuXHQgICAqL1xuXHQgIF9wZXJmb3JtQ29tcG9uZW50VXBkYXRlOiBmdW5jdGlvbiAobmV4dEVsZW1lbnQsIG5leHRQcm9wcywgbmV4dFN0YXRlLCBuZXh0Q29udGV4dCwgdHJhbnNhY3Rpb24sIHVubWFza2VkQ29udGV4dCkge1xuXHQgICAgdmFyIGluc3QgPSB0aGlzLl9pbnN0YW5jZTtcblx0XG5cdCAgICB2YXIgaGFzQ29tcG9uZW50RGlkVXBkYXRlID0gQm9vbGVhbihpbnN0LmNvbXBvbmVudERpZFVwZGF0ZSk7XG5cdCAgICB2YXIgcHJldlByb3BzO1xuXHQgICAgdmFyIHByZXZTdGF0ZTtcblx0ICAgIHZhciBwcmV2Q29udGV4dDtcblx0ICAgIGlmIChoYXNDb21wb25lbnREaWRVcGRhdGUpIHtcblx0ICAgICAgcHJldlByb3BzID0gaW5zdC5wcm9wcztcblx0ICAgICAgcHJldlN0YXRlID0gaW5zdC5zdGF0ZTtcblx0ICAgICAgcHJldkNvbnRleHQgPSBpbnN0LmNvbnRleHQ7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKGluc3QuY29tcG9uZW50V2lsbFVwZGF0ZSkge1xuXHQgICAgICBpbnN0LmNvbXBvbmVudFdpbGxVcGRhdGUobmV4dFByb3BzLCBuZXh0U3RhdGUsIG5leHRDb250ZXh0KTtcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLl9jdXJyZW50RWxlbWVudCA9IG5leHRFbGVtZW50O1xuXHQgICAgdGhpcy5fY29udGV4dCA9IHVubWFza2VkQ29udGV4dDtcblx0ICAgIGluc3QucHJvcHMgPSBuZXh0UHJvcHM7XG5cdCAgICBpbnN0LnN0YXRlID0gbmV4dFN0YXRlO1xuXHQgICAgaW5zdC5jb250ZXh0ID0gbmV4dENvbnRleHQ7XG5cdFxuXHQgICAgdGhpcy5fdXBkYXRlUmVuZGVyZWRDb21wb25lbnQodHJhbnNhY3Rpb24sIHVubWFza2VkQ29udGV4dCk7XG5cdFxuXHQgICAgaWYgKGhhc0NvbXBvbmVudERpZFVwZGF0ZSkge1xuXHQgICAgICB0cmFuc2FjdGlvbi5nZXRSZWFjdE1vdW50UmVhZHkoKS5lbnF1ZXVlKGluc3QuY29tcG9uZW50RGlkVXBkYXRlLmJpbmQoaW5zdCwgcHJldlByb3BzLCBwcmV2U3RhdGUsIHByZXZDb250ZXh0KSwgaW5zdCk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogQ2FsbCB0aGUgY29tcG9uZW50J3MgYHJlbmRlcmAgbWV0aG9kIGFuZCB1cGRhdGUgdGhlIERPTSBhY2NvcmRpbmdseS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cblx0ICAgKiBAaW50ZXJuYWxcblx0ICAgKi9cblx0ICBfdXBkYXRlUmVuZGVyZWRDb21wb25lbnQ6IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgY29udGV4dCkge1xuXHQgICAgdmFyIHByZXZDb21wb25lbnRJbnN0YW5jZSA9IHRoaXMuX3JlbmRlcmVkQ29tcG9uZW50O1xuXHQgICAgdmFyIHByZXZSZW5kZXJlZEVsZW1lbnQgPSBwcmV2Q29tcG9uZW50SW5zdGFuY2UuX2N1cnJlbnRFbGVtZW50O1xuXHQgICAgdmFyIG5leHRSZW5kZXJlZEVsZW1lbnQgPSB0aGlzLl9yZW5kZXJWYWxpZGF0ZWRDb21wb25lbnQoKTtcblx0ICAgIGlmIChzaG91bGRVcGRhdGVSZWFjdENvbXBvbmVudChwcmV2UmVuZGVyZWRFbGVtZW50LCBuZXh0UmVuZGVyZWRFbGVtZW50KSkge1xuXHQgICAgICBSZWFjdFJlY29uY2lsZXIucmVjZWl2ZUNvbXBvbmVudChwcmV2Q29tcG9uZW50SW5zdGFuY2UsIG5leHRSZW5kZXJlZEVsZW1lbnQsIHRyYW5zYWN0aW9uLCB0aGlzLl9wcm9jZXNzQ2hpbGRDb250ZXh0KGNvbnRleHQpKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIFRoZXNlIHR3byBJRHMgYXJlIGFjdHVhbGx5IHRoZSBzYW1lISBCdXQgbm90aGluZyBzaG91bGQgcmVseSBvbiB0aGF0LlxuXHQgICAgICB2YXIgdGhpc0lEID0gdGhpcy5fcm9vdE5vZGVJRDtcblx0ICAgICAgdmFyIHByZXZDb21wb25lbnRJRCA9IHByZXZDb21wb25lbnRJbnN0YW5jZS5fcm9vdE5vZGVJRDtcblx0ICAgICAgUmVhY3RSZWNvbmNpbGVyLnVubW91bnRDb21wb25lbnQocHJldkNvbXBvbmVudEluc3RhbmNlKTtcblx0XG5cdCAgICAgIHRoaXMuX3JlbmRlcmVkQ29tcG9uZW50ID0gdGhpcy5faW5zdGFudGlhdGVSZWFjdENvbXBvbmVudChuZXh0UmVuZGVyZWRFbGVtZW50KTtcblx0ICAgICAgdmFyIG5leHRNYXJrdXAgPSBSZWFjdFJlY29uY2lsZXIubW91bnRDb21wb25lbnQodGhpcy5fcmVuZGVyZWRDb21wb25lbnQsIHRoaXNJRCwgdHJhbnNhY3Rpb24sIHRoaXMuX3Byb2Nlc3NDaGlsZENvbnRleHQoY29udGV4dCkpO1xuXHQgICAgICB0aGlzLl9yZXBsYWNlTm9kZVdpdGhNYXJrdXBCeUlEKHByZXZDb21wb25lbnRJRCwgbmV4dE1hcmt1cCk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogQHByb3RlY3RlZFxuXHQgICAqL1xuXHQgIF9yZXBsYWNlTm9kZVdpdGhNYXJrdXBCeUlEOiBmdW5jdGlvbiAocHJldkNvbXBvbmVudElELCBuZXh0TWFya3VwKSB7XG5cdCAgICBSZWFjdENvbXBvbmVudEVudmlyb25tZW50LnJlcGxhY2VOb2RlV2l0aE1hcmt1cEJ5SUQocHJldkNvbXBvbmVudElELCBuZXh0TWFya3VwKTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBAcHJvdGVjdGVkXG5cdCAgICovXG5cdCAgX3JlbmRlclZhbGlkYXRlZENvbXBvbmVudFdpdGhvdXRPd25lck9yQ29udGV4dDogZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIGluc3QgPSB0aGlzLl9pbnN0YW5jZTtcblx0ICAgIHZhciByZW5kZXJlZENvbXBvbmVudCA9IGluc3QucmVuZGVyKCk7XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAvLyBXZSBhbGxvdyBhdXRvLW1vY2tzIHRvIHByb2NlZWQgYXMgaWYgdGhleSdyZSByZXR1cm5pbmcgbnVsbC5cblx0ICAgICAgaWYgKHR5cGVvZiByZW5kZXJlZENvbXBvbmVudCA9PT0gJ3VuZGVmaW5lZCcgJiYgaW5zdC5yZW5kZXIuX2lzTW9ja0Z1bmN0aW9uKSB7XG5cdCAgICAgICAgLy8gVGhpcyBpcyBwcm9iYWJseSBiYWQgcHJhY3RpY2UuIENvbnNpZGVyIHdhcm5pbmcgaGVyZSBhbmRcblx0ICAgICAgICAvLyBkZXByZWNhdGluZyB0aGlzIGNvbnZlbmllbmNlLlxuXHQgICAgICAgIHJlbmRlcmVkQ29tcG9uZW50ID0gbnVsbDtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiByZW5kZXJlZENvbXBvbmVudDtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBAcHJpdmF0ZVxuXHQgICAqL1xuXHQgIF9yZW5kZXJWYWxpZGF0ZWRDb21wb25lbnQ6IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciByZW5kZXJlZENvbXBvbmVudDtcblx0ICAgIFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQgPSB0aGlzO1xuXHQgICAgdHJ5IHtcblx0ICAgICAgcmVuZGVyZWRDb21wb25lbnQgPSB0aGlzLl9yZW5kZXJWYWxpZGF0ZWRDb21wb25lbnRXaXRob3V0T3duZXJPckNvbnRleHQoKTtcblx0ICAgIH0gZmluYWxseSB7XG5cdCAgICAgIFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQgPSBudWxsO1xuXHQgICAgfVxuXHQgICAgIShcblx0ICAgIC8vIFRPRE86IEFuIGBpc1ZhbGlkTm9kZWAgZnVuY3Rpb24gd291bGQgcHJvYmFibHkgYmUgbW9yZSBhcHByb3ByaWF0ZVxuXHQgICAgcmVuZGVyZWRDb21wb25lbnQgPT09IG51bGwgfHwgcmVuZGVyZWRDb21wb25lbnQgPT09IGZhbHNlIHx8IFJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChyZW5kZXJlZENvbXBvbmVudCkpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJyVzLnJlbmRlcigpOiBBIHZhbGlkIFJlYWN0Q29tcG9uZW50IG11c3QgYmUgcmV0dXJuZWQuIFlvdSBtYXkgaGF2ZSAnICsgJ3JldHVybmVkIHVuZGVmaW5lZCwgYW4gYXJyYXkgb3Igc29tZSBvdGhlciBpbnZhbGlkIG9iamVjdC4nLCB0aGlzLmdldE5hbWUoKSB8fCAnUmVhY3RDb21wb3NpdGVDb21wb25lbnQnKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdCAgICByZXR1cm4gcmVuZGVyZWRDb21wb25lbnQ7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogTGF6aWx5IGFsbG9jYXRlcyB0aGUgcmVmcyBvYmplY3QgYW5kIHN0b3JlcyBgY29tcG9uZW50YCBhcyBgcmVmYC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7c3RyaW5nfSByZWYgUmVmZXJlbmNlIG5hbWUuXG5cdCAgICogQHBhcmFtIHtjb21wb25lbnR9IGNvbXBvbmVudCBDb21wb25lbnQgdG8gc3RvcmUgYXMgYHJlZmAuXG5cdCAgICogQGZpbmFsXG5cdCAgICogQHByaXZhdGVcblx0ICAgKi9cblx0ICBhdHRhY2hSZWY6IGZ1bmN0aW9uIChyZWYsIGNvbXBvbmVudCkge1xuXHQgICAgdmFyIGluc3QgPSB0aGlzLmdldFB1YmxpY0luc3RhbmNlKCk7XG5cdCAgICAhKGluc3QgIT0gbnVsbCkgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnU3RhdGVsZXNzIGZ1bmN0aW9uIGNvbXBvbmVudHMgY2Fubm90IGhhdmUgcmVmcy4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdCAgICB2YXIgcHVibGljQ29tcG9uZW50SW5zdGFuY2UgPSBjb21wb25lbnQuZ2V0UHVibGljSW5zdGFuY2UoKTtcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgIHZhciBjb21wb25lbnROYW1lID0gY29tcG9uZW50ICYmIGNvbXBvbmVudC5nZXROYW1lID8gY29tcG9uZW50LmdldE5hbWUoKSA6ICdhIGNvbXBvbmVudCc7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKHB1YmxpY0NvbXBvbmVudEluc3RhbmNlICE9IG51bGwsICdTdGF0ZWxlc3MgZnVuY3Rpb24gY29tcG9uZW50cyBjYW5ub3QgYmUgZ2l2ZW4gcmVmcyAnICsgJyhTZWUgcmVmIFwiJXNcIiBpbiAlcyBjcmVhdGVkIGJ5ICVzKS4gJyArICdBdHRlbXB0cyB0byBhY2Nlc3MgdGhpcyByZWYgd2lsbCBmYWlsLicsIHJlZiwgY29tcG9uZW50TmFtZSwgdGhpcy5nZXROYW1lKCkpIDogdW5kZWZpbmVkO1xuXHQgICAgfVxuXHQgICAgdmFyIHJlZnMgPSBpbnN0LnJlZnMgPT09IGVtcHR5T2JqZWN0ID8gaW5zdC5yZWZzID0ge30gOiBpbnN0LnJlZnM7XG5cdCAgICByZWZzW3JlZl0gPSBwdWJsaWNDb21wb25lbnRJbnN0YW5jZTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBEZXRhY2hlcyBhIHJlZmVyZW5jZSBuYW1lLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtzdHJpbmd9IHJlZiBOYW1lIHRvIGRlcmVmZXJlbmNlLlxuXHQgICAqIEBmaW5hbFxuXHQgICAqIEBwcml2YXRlXG5cdCAgICovXG5cdCAgZGV0YWNoUmVmOiBmdW5jdGlvbiAocmVmKSB7XG5cdCAgICB2YXIgcmVmcyA9IHRoaXMuZ2V0UHVibGljSW5zdGFuY2UoKS5yZWZzO1xuXHQgICAgZGVsZXRlIHJlZnNbcmVmXTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBHZXQgYSB0ZXh0IGRlc2NyaXB0aW9uIG9mIHRoZSBjb21wb25lbnQgdGhhdCBjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBpdFxuXHQgICAqIGluIGVycm9yIG1lc3NhZ2VzLlxuXHQgICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIG5hbWUgb3IgbnVsbC5cblx0ICAgKiBAaW50ZXJuYWxcblx0ICAgKi9cblx0ICBnZXROYW1lOiBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgdHlwZSA9IHRoaXMuX2N1cnJlbnRFbGVtZW50LnR5cGU7XG5cdCAgICB2YXIgY29uc3RydWN0b3IgPSB0aGlzLl9pbnN0YW5jZSAmJiB0aGlzLl9pbnN0YW5jZS5jb25zdHJ1Y3Rvcjtcblx0ICAgIHJldHVybiB0eXBlLmRpc3BsYXlOYW1lIHx8IGNvbnN0cnVjdG9yICYmIGNvbnN0cnVjdG9yLmRpc3BsYXlOYW1lIHx8IHR5cGUubmFtZSB8fCBjb25zdHJ1Y3RvciAmJiBjb25zdHJ1Y3Rvci5uYW1lIHx8IG51bGw7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogR2V0IHRoZSBwdWJsaWNseSBhY2Nlc3NpYmxlIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgY29tcG9uZW50IC0gaS5lLiB3aGF0XG5cdCAgICogaXMgZXhwb3NlZCBieSByZWZzIGFuZCByZXR1cm5lZCBieSByZW5kZXIuIENhbiBiZSBudWxsIGZvciBzdGF0ZWxlc3Ncblx0ICAgKiBjb21wb25lbnRzLlxuXHQgICAqXG5cdCAgICogQHJldHVybiB7UmVhY3RDb21wb25lbnR9IHRoZSBwdWJsaWMgY29tcG9uZW50IGluc3RhbmNlLlxuXHQgICAqIEBpbnRlcm5hbFxuXHQgICAqL1xuXHQgIGdldFB1YmxpY0luc3RhbmNlOiBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgaW5zdCA9IHRoaXMuX2luc3RhbmNlO1xuXHQgICAgaWYgKGluc3QgaW5zdGFuY2VvZiBTdGF0ZWxlc3NDb21wb25lbnQpIHtcblx0ICAgICAgcmV0dXJuIG51bGw7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gaW5zdDtcblx0ICB9LFxuXHRcblx0ICAvLyBTdHViXG5cdCAgX2luc3RhbnRpYXRlUmVhY3RDb21wb25lbnQ6IG51bGxcblx0XG5cdH07XG5cdFxuXHRSZWFjdFBlcmYubWVhc3VyZU1ldGhvZHMoUmVhY3RDb21wb3NpdGVDb21wb25lbnRNaXhpbiwgJ1JlYWN0Q29tcG9zaXRlQ29tcG9uZW50Jywge1xuXHQgIG1vdW50Q29tcG9uZW50OiAnbW91bnRDb21wb25lbnQnLFxuXHQgIHVwZGF0ZUNvbXBvbmVudDogJ3VwZGF0ZUNvbXBvbmVudCcsXG5cdCAgX3JlbmRlclZhbGlkYXRlZENvbXBvbmVudDogJ19yZW5kZXJWYWxpZGF0ZWRDb21wb25lbnQnXG5cdH0pO1xuXHRcblx0dmFyIFJlYWN0Q29tcG9zaXRlQ29tcG9uZW50ID0ge1xuXHRcblx0ICBNaXhpbjogUmVhY3RDb21wb3NpdGVDb21wb25lbnRNaXhpblxuXHRcblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gUmVhY3RDb21wb3NpdGVDb21wb25lbnQ7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpKSlcblxuLyoqKi8gfSksXG4vKiA2NCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzKSB7LyoqXG5cdCAqIENvcHlyaWdodCAyMDE0LTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBSZWFjdENvbXBvbmVudEVudmlyb25tZW50XG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGludmFyaWFudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHRcblx0dmFyIGluamVjdGVkID0gZmFsc2U7XG5cdFxuXHR2YXIgUmVhY3RDb21wb25lbnRFbnZpcm9ubWVudCA9IHtcblx0XG5cdCAgLyoqXG5cdCAgICogT3B0aW9uYWxseSBpbmplY3RhYmxlIGVudmlyb25tZW50IGRlcGVuZGVudCBjbGVhbnVwIGhvb2suIChzZXJ2ZXIgdnMuXG5cdCAgICogYnJvd3NlciBldGMpLiBFeGFtcGxlOiBBIGJyb3dzZXIgc3lzdGVtIGNhY2hlcyBET00gbm9kZXMgYmFzZWQgb24gY29tcG9uZW50XG5cdCAgICogSUQgYW5kIG11c3QgcmVtb3ZlIHRoYXQgY2FjaGUgZW50cnkgd2hlbiB0aGlzIGluc3RhbmNlIGlzIHVubW91bnRlZC5cblx0ICAgKi9cblx0ICB1bm1vdW50SURGcm9tRW52aXJvbm1lbnQ6IG51bGwsXG5cdFxuXHQgIC8qKlxuXHQgICAqIE9wdGlvbmFsbHkgaW5qZWN0YWJsZSBob29rIGZvciBzd2FwcGluZyBvdXQgbW91bnQgaW1hZ2VzIGluIHRoZSBtaWRkbGUgb2Zcblx0ICAgKiB0aGUgdHJlZS5cblx0ICAgKi9cblx0ICByZXBsYWNlTm9kZVdpdGhNYXJrdXBCeUlEOiBudWxsLFxuXHRcblx0ICAvKipcblx0ICAgKiBPcHRpb25hbGx5IGluamVjdGFibGUgaG9vayBmb3IgcHJvY2Vzc2luZyBhIHF1ZXVlIG9mIGNoaWxkIHVwZGF0ZXMuIFdpbGxcblx0ICAgKiBsYXRlciBtb3ZlIGludG8gTXVsdGlDaGlsZENvbXBvbmVudHMuXG5cdCAgICovXG5cdCAgcHJvY2Vzc0NoaWxkcmVuVXBkYXRlczogbnVsbCxcblx0XG5cdCAgaW5qZWN0aW9uOiB7XG5cdCAgICBpbmplY3RFbnZpcm9ubWVudDogZnVuY3Rpb24gKGVudmlyb25tZW50KSB7XG5cdCAgICAgICEhaW5qZWN0ZWQgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RDb21wb3NpdGVDb21wb25lbnQ6IGluamVjdEVudmlyb25tZW50KCkgY2FuIG9ubHkgYmUgY2FsbGVkIG9uY2UuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXHQgICAgICBSZWFjdENvbXBvbmVudEVudmlyb25tZW50LnVubW91bnRJREZyb21FbnZpcm9ubWVudCA9IGVudmlyb25tZW50LnVubW91bnRJREZyb21FbnZpcm9ubWVudDtcblx0ICAgICAgUmVhY3RDb21wb25lbnRFbnZpcm9ubWVudC5yZXBsYWNlTm9kZVdpdGhNYXJrdXBCeUlEID0gZW52aXJvbm1lbnQucmVwbGFjZU5vZGVXaXRoTWFya3VwQnlJRDtcblx0ICAgICAgUmVhY3RDb21wb25lbnRFbnZpcm9ubWVudC5wcm9jZXNzQ2hpbGRyZW5VcGRhdGVzID0gZW52aXJvbm1lbnQucHJvY2Vzc0NoaWxkcmVuVXBkYXRlcztcblx0ICAgICAgaW5qZWN0ZWQgPSB0cnVlO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFJlYWN0Q29tcG9uZW50RW52aXJvbm1lbnQ7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpKSlcblxuLyoqKi8gfSksXG4vKiA2NSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RQcm9wVHlwZUxvY2F0aW9uc1xuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBrZXlNaXJyb3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTtcblx0XG5cdHZhciBSZWFjdFByb3BUeXBlTG9jYXRpb25zID0ga2V5TWlycm9yKHtcblx0ICBwcm9wOiBudWxsLFxuXHQgIGNvbnRleHQ6IG51bGwsXG5cdCAgY2hpbGRDb250ZXh0OiBudWxsXG5cdH0pO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBSZWFjdFByb3BUeXBlTG9jYXRpb25zO1xuXG4vKioqLyB9KSxcbi8qIDY2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MpIHsvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzID0ge307XG5cdFxuXHRpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgIFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzID0ge1xuXHQgICAgcHJvcDogJ3Byb3AnLFxuXHQgICAgY29udGV4dDogJ2NvbnRleHQnLFxuXHQgICAgY2hpbGRDb250ZXh0OiAnY2hpbGQgY29udGV4dCdcblx0ICB9O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzO1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg0KSkpXG5cbi8qKiovIH0pLFxuLyogNjcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIHNob3VsZFVwZGF0ZVJlYWN0Q29tcG9uZW50XG5cdCAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0LyoqXG5cdCAqIEdpdmVuIGEgYHByZXZFbGVtZW50YCBhbmQgYG5leHRFbGVtZW50YCwgZGV0ZXJtaW5lcyBpZiB0aGUgZXhpc3Rpbmdcblx0ICogaW5zdGFuY2Ugc2hvdWxkIGJlIHVwZGF0ZWQgYXMgb3Bwb3NlZCB0byBiZWluZyBkZXN0cm95ZWQgb3IgcmVwbGFjZWQgYnkgYSBuZXdcblx0ICogaW5zdGFuY2UuIEJvdGggYXJndW1lbnRzIGFyZSBlbGVtZW50cy4gVGhpcyBlbnN1cmVzIHRoYXQgdGhpcyBsb2dpYyBjYW5cblx0ICogb3BlcmF0ZSBvbiBzdGF0ZWxlc3MgdHJlZXMgd2l0aG91dCBhbnkgYmFja2luZyBpbnN0YW5jZS5cblx0ICpcblx0ICogQHBhcmFtIHs/b2JqZWN0fSBwcmV2RWxlbWVudFxuXHQgKiBAcGFyYW0gez9vYmplY3R9IG5leHRFbGVtZW50XG5cdCAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGV4aXN0aW5nIGluc3RhbmNlIHNob3VsZCBiZSB1cGRhdGVkLlxuXHQgKiBAcHJvdGVjdGVkXG5cdCAqL1xuXHRmdW5jdGlvbiBzaG91bGRVcGRhdGVSZWFjdENvbXBvbmVudChwcmV2RWxlbWVudCwgbmV4dEVsZW1lbnQpIHtcblx0ICB2YXIgcHJldkVtcHR5ID0gcHJldkVsZW1lbnQgPT09IG51bGwgfHwgcHJldkVsZW1lbnQgPT09IGZhbHNlO1xuXHQgIHZhciBuZXh0RW1wdHkgPSBuZXh0RWxlbWVudCA9PT0gbnVsbCB8fCBuZXh0RWxlbWVudCA9PT0gZmFsc2U7XG5cdCAgaWYgKHByZXZFbXB0eSB8fCBuZXh0RW1wdHkpIHtcblx0ICAgIHJldHVybiBwcmV2RW1wdHkgPT09IG5leHRFbXB0eTtcblx0ICB9XG5cdFxuXHQgIHZhciBwcmV2VHlwZSA9IHR5cGVvZiBwcmV2RWxlbWVudDtcblx0ICB2YXIgbmV4dFR5cGUgPSB0eXBlb2YgbmV4dEVsZW1lbnQ7XG5cdCAgaWYgKHByZXZUeXBlID09PSAnc3RyaW5nJyB8fCBwcmV2VHlwZSA9PT0gJ251bWJlcicpIHtcblx0ICAgIHJldHVybiBuZXh0VHlwZSA9PT0gJ3N0cmluZycgfHwgbmV4dFR5cGUgPT09ICdudW1iZXInO1xuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gbmV4dFR5cGUgPT09ICdvYmplY3QnICYmIHByZXZFbGVtZW50LnR5cGUgPT09IG5leHRFbGVtZW50LnR5cGUgJiYgcHJldkVsZW1lbnQua2V5ID09PSBuZXh0RWxlbWVudC5rZXk7XG5cdCAgfVxuXHQgIHJldHVybiBmYWxzZTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBzaG91bGRVcGRhdGVSZWFjdENvbXBvbmVudDtcblxuLyoqKi8gfSksXG4vKiA2OCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxNC0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RFbXB0eUNvbXBvbmVudFxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBSZWFjdEVsZW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyKTtcblx0dmFyIFJlYWN0RW1wdHlDb21wb25lbnRSZWdpc3RyeSA9IF9fd2VicGFja19yZXF1aXJlX18oNDQpO1xuXHR2YXIgUmVhY3RSZWNvbmNpbGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7XG5cdFxuXHR2YXIgYXNzaWduID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7XG5cdFxuXHR2YXIgcGxhY2Vob2xkZXJFbGVtZW50O1xuXHRcblx0dmFyIFJlYWN0RW1wdHlDb21wb25lbnRJbmplY3Rpb24gPSB7XG5cdCAgaW5qZWN0RW1wdHlDb21wb25lbnQ6IGZ1bmN0aW9uIChjb21wb25lbnQpIHtcblx0ICAgIHBsYWNlaG9sZGVyRWxlbWVudCA9IFJlYWN0RWxlbWVudC5jcmVhdGVFbGVtZW50KGNvbXBvbmVudCk7XG5cdCAgfVxuXHR9O1xuXHRcblx0ZnVuY3Rpb24gcmVnaXN0ZXJOdWxsQ29tcG9uZW50SUQoKSB7XG5cdCAgUmVhY3RFbXB0eUNvbXBvbmVudFJlZ2lzdHJ5LnJlZ2lzdGVyTnVsbENvbXBvbmVudElEKHRoaXMuX3Jvb3ROb2RlSUQpO1xuXHR9XG5cdFxuXHR2YXIgUmVhY3RFbXB0eUNvbXBvbmVudCA9IGZ1bmN0aW9uIChpbnN0YW50aWF0ZSkge1xuXHQgIHRoaXMuX2N1cnJlbnRFbGVtZW50ID0gbnVsbDtcblx0ICB0aGlzLl9yb290Tm9kZUlEID0gbnVsbDtcblx0ICB0aGlzLl9yZW5kZXJlZENvbXBvbmVudCA9IGluc3RhbnRpYXRlKHBsYWNlaG9sZGVyRWxlbWVudCk7XG5cdH07XG5cdGFzc2lnbihSZWFjdEVtcHR5Q29tcG9uZW50LnByb3RvdHlwZSwge1xuXHQgIGNvbnN0cnVjdDogZnVuY3Rpb24gKGVsZW1lbnQpIHt9LFxuXHQgIG1vdW50Q29tcG9uZW50OiBmdW5jdGlvbiAocm9vdElELCB0cmFuc2FjdGlvbiwgY29udGV4dCkge1xuXHQgICAgdHJhbnNhY3Rpb24uZ2V0UmVhY3RNb3VudFJlYWR5KCkuZW5xdWV1ZShyZWdpc3Rlck51bGxDb21wb25lbnRJRCwgdGhpcyk7XG5cdCAgICB0aGlzLl9yb290Tm9kZUlEID0gcm9vdElEO1xuXHQgICAgcmV0dXJuIFJlYWN0UmVjb25jaWxlci5tb3VudENvbXBvbmVudCh0aGlzLl9yZW5kZXJlZENvbXBvbmVudCwgcm9vdElELCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG5cdCAgfSxcblx0ICByZWNlaXZlQ29tcG9uZW50OiBmdW5jdGlvbiAoKSB7fSxcblx0ICB1bm1vdW50Q29tcG9uZW50OiBmdW5jdGlvbiAocm9vdElELCB0cmFuc2FjdGlvbiwgY29udGV4dCkge1xuXHQgICAgUmVhY3RSZWNvbmNpbGVyLnVubW91bnRDb21wb25lbnQodGhpcy5fcmVuZGVyZWRDb21wb25lbnQpO1xuXHQgICAgUmVhY3RFbXB0eUNvbXBvbmVudFJlZ2lzdHJ5LmRlcmVnaXN0ZXJOdWxsQ29tcG9uZW50SUQodGhpcy5fcm9vdE5vZGVJRCk7XG5cdCAgICB0aGlzLl9yb290Tm9kZUlEID0gbnVsbDtcblx0ICAgIHRoaXMuX3JlbmRlcmVkQ29tcG9uZW50ID0gbnVsbDtcblx0ICB9XG5cdH0pO1xuXHRcblx0UmVhY3RFbXB0eUNvbXBvbmVudC5pbmplY3Rpb24gPSBSZWFjdEVtcHR5Q29tcG9uZW50SW5qZWN0aW9uO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBSZWFjdEVtcHR5Q29tcG9uZW50O1xuXG4vKioqLyB9KSxcbi8qIDY5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MpIHsvKipcblx0ICogQ29weXJpZ2h0IDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0TmF0aXZlQ29tcG9uZW50XG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGFzc2lnbiA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpO1xuXHR2YXIgaW52YXJpYW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7XG5cdFxuXHR2YXIgYXV0b0dlbmVyYXRlV3JhcHBlckNsYXNzID0gbnVsbDtcblx0dmFyIGdlbmVyaWNDb21wb25lbnRDbGFzcyA9IG51bGw7XG5cdC8vIFRoaXMgcmVnaXN0cnkga2VlcHMgdHJhY2sgb2Ygd3JhcHBlciBjbGFzc2VzIGFyb3VuZCBuYXRpdmUgdGFncy5cblx0dmFyIHRhZ1RvQ29tcG9uZW50Q2xhc3MgPSB7fTtcblx0dmFyIHRleHRDb21wb25lbnRDbGFzcyA9IG51bGw7XG5cdFxuXHR2YXIgUmVhY3ROYXRpdmVDb21wb25lbnRJbmplY3Rpb24gPSB7XG5cdCAgLy8gVGhpcyBhY2NlcHRzIGEgY2xhc3MgdGhhdCByZWNlaXZlcyB0aGUgdGFnIHN0cmluZy4gVGhpcyBpcyBhIGNhdGNoIGFsbFxuXHQgIC8vIHRoYXQgY2FuIHJlbmRlciBhbnkga2luZCBvZiB0YWcuXG5cdCAgaW5qZWN0R2VuZXJpY0NvbXBvbmVudENsYXNzOiBmdW5jdGlvbiAoY29tcG9uZW50Q2xhc3MpIHtcblx0ICAgIGdlbmVyaWNDb21wb25lbnRDbGFzcyA9IGNvbXBvbmVudENsYXNzO1xuXHQgIH0sXG5cdCAgLy8gVGhpcyBhY2NlcHRzIGEgdGV4dCBjb21wb25lbnQgY2xhc3MgdGhhdCB0YWtlcyB0aGUgdGV4dCBzdHJpbmcgdG8gYmVcblx0ICAvLyByZW5kZXJlZCBhcyBwcm9wcy5cblx0ICBpbmplY3RUZXh0Q29tcG9uZW50Q2xhc3M6IGZ1bmN0aW9uIChjb21wb25lbnRDbGFzcykge1xuXHQgICAgdGV4dENvbXBvbmVudENsYXNzID0gY29tcG9uZW50Q2xhc3M7XG5cdCAgfSxcblx0ICAvLyBUaGlzIGFjY2VwdHMgYSBrZXllZCBvYmplY3Qgd2l0aCBjbGFzc2VzIGFzIHZhbHVlcy4gRWFjaCBrZXkgcmVwcmVzZW50cyBhXG5cdCAgLy8gdGFnLiBUaGF0IHBhcnRpY3VsYXIgdGFnIHdpbGwgdXNlIHRoaXMgY2xhc3MgaW5zdGVhZCBvZiB0aGUgZ2VuZXJpYyBvbmUuXG5cdCAgaW5qZWN0Q29tcG9uZW50Q2xhc3NlczogZnVuY3Rpb24gKGNvbXBvbmVudENsYXNzZXMpIHtcblx0ICAgIGFzc2lnbih0YWdUb0NvbXBvbmVudENsYXNzLCBjb21wb25lbnRDbGFzc2VzKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogR2V0IGEgY29tcG9zaXRlIGNvbXBvbmVudCB3cmFwcGVyIGNsYXNzIGZvciBhIHNwZWNpZmljIHRhZy5cblx0ICpcblx0ICogQHBhcmFtIHtSZWFjdEVsZW1lbnR9IGVsZW1lbnQgVGhlIHRhZyBmb3Igd2hpY2ggdG8gZ2V0IHRoZSBjbGFzcy5cblx0ICogQHJldHVybiB7ZnVuY3Rpb259IFRoZSBSZWFjdCBjbGFzcyBjb25zdHJ1Y3RvciBmdW5jdGlvbi5cblx0ICovXG5cdGZ1bmN0aW9uIGdldENvbXBvbmVudENsYXNzRm9yRWxlbWVudChlbGVtZW50KSB7XG5cdCAgaWYgKHR5cGVvZiBlbGVtZW50LnR5cGUgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgIHJldHVybiBlbGVtZW50LnR5cGU7XG5cdCAgfVxuXHQgIHZhciB0YWcgPSBlbGVtZW50LnR5cGU7XG5cdCAgdmFyIGNvbXBvbmVudENsYXNzID0gdGFnVG9Db21wb25lbnRDbGFzc1t0YWddO1xuXHQgIGlmIChjb21wb25lbnRDbGFzcyA9PSBudWxsKSB7XG5cdCAgICB0YWdUb0NvbXBvbmVudENsYXNzW3RhZ10gPSBjb21wb25lbnRDbGFzcyA9IGF1dG9HZW5lcmF0ZVdyYXBwZXJDbGFzcyh0YWcpO1xuXHQgIH1cblx0ICByZXR1cm4gY29tcG9uZW50Q2xhc3M7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBHZXQgYSBuYXRpdmUgaW50ZXJuYWwgY29tcG9uZW50IGNsYXNzIGZvciBhIHNwZWNpZmljIHRhZy5cblx0ICpcblx0ICogQHBhcmFtIHtSZWFjdEVsZW1lbnR9IGVsZW1lbnQgVGhlIGVsZW1lbnQgdG8gY3JlYXRlLlxuXHQgKiBAcmV0dXJuIHtmdW5jdGlvbn0gVGhlIGludGVybmFsIGNsYXNzIGNvbnN0cnVjdG9yIGZ1bmN0aW9uLlxuXHQgKi9cblx0ZnVuY3Rpb24gY3JlYXRlSW50ZXJuYWxDb21wb25lbnQoZWxlbWVudCkge1xuXHQgICFnZW5lcmljQ29tcG9uZW50Q2xhc3MgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnVGhlcmUgaXMgbm8gcmVnaXN0ZXJlZCBjb21wb25lbnQgZm9yIHRoZSB0YWcgJXMnLCBlbGVtZW50LnR5cGUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0ICByZXR1cm4gbmV3IGdlbmVyaWNDb21wb25lbnRDbGFzcyhlbGVtZW50LnR5cGUsIGVsZW1lbnQucHJvcHMpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQHBhcmFtIHtSZWFjdFRleHR9IHRleHRcblx0ICogQHJldHVybiB7UmVhY3RDb21wb25lbnR9XG5cdCAqL1xuXHRmdW5jdGlvbiBjcmVhdGVJbnN0YW5jZUZvclRleHQodGV4dCkge1xuXHQgIHJldHVybiBuZXcgdGV4dENvbXBvbmVudENsYXNzKHRleHQpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gY29tcG9uZW50XG5cdCAqIEByZXR1cm4ge2Jvb2xlYW59XG5cdCAqL1xuXHRmdW5jdGlvbiBpc1RleHRDb21wb25lbnQoY29tcG9uZW50KSB7XG5cdCAgcmV0dXJuIGNvbXBvbmVudCBpbnN0YW5jZW9mIHRleHRDb21wb25lbnRDbGFzcztcblx0fVxuXHRcblx0dmFyIFJlYWN0TmF0aXZlQ29tcG9uZW50ID0ge1xuXHQgIGdldENvbXBvbmVudENsYXNzRm9yRWxlbWVudDogZ2V0Q29tcG9uZW50Q2xhc3NGb3JFbGVtZW50LFxuXHQgIGNyZWF0ZUludGVybmFsQ29tcG9uZW50OiBjcmVhdGVJbnRlcm5hbENvbXBvbmVudCxcblx0ICBjcmVhdGVJbnN0YW5jZUZvclRleHQ6IGNyZWF0ZUluc3RhbmNlRm9yVGV4dCxcblx0ICBpc1RleHRDb21wb25lbnQ6IGlzVGV4dENvbXBvbmVudCxcblx0ICBpbmplY3Rpb246IFJlYWN0TmF0aXZlQ29tcG9uZW50SW5qZWN0aW9uXG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFJlYWN0TmF0aXZlQ29tcG9uZW50O1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg0KSkpXG5cbi8qKiovIH0pLFxuLyogNzAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgey8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIHZhbGlkYXRlRE9NTmVzdGluZ1xuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBhc3NpZ24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KTtcblx0dmFyIGVtcHR5RnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblx0dmFyIHdhcm5pbmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTtcblx0XG5cdHZhciB2YWxpZGF0ZURPTU5lc3RpbmcgPSBlbXB0eUZ1bmN0aW9uO1xuXHRcblx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAvLyBUaGlzIHZhbGlkYXRpb24gY29kZSB3YXMgd3JpdHRlbiBiYXNlZCBvbiB0aGUgSFRNTDUgcGFyc2luZyBzcGVjOlxuXHQgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI2hhcy1hbi1lbGVtZW50LWluLXNjb3BlXG5cdCAgLy9cblx0ICAvLyBOb3RlOiB0aGlzIGRvZXMgbm90IGNhdGNoIGFsbCBpbnZhbGlkIG5lc3RpbmcsIG5vciBkb2VzIGl0IHRyeSB0byAoYXMgaXQnc1xuXHQgIC8vIG5vdCBjbGVhciB3aGF0IHByYWN0aWNhbCBiZW5lZml0IGRvaW5nIHNvIHByb3ZpZGVzKTsgaW5zdGVhZCwgd2Ugd2FybiBvbmx5XG5cdCAgLy8gZm9yIGNhc2VzIHdoZXJlIHRoZSBwYXJzZXIgd2lsbCBnaXZlIGEgcGFyc2UgdHJlZSBkaWZmZXJpbmcgZnJvbSB3aGF0IFJlYWN0XG5cdCAgLy8gaW50ZW5kZWQuIEZvciBleGFtcGxlLCA8Yj48ZGl2PjwvZGl2PjwvYj4gaXMgaW52YWxpZCBidXQgd2UgZG9uJ3Qgd2FyblxuXHQgIC8vIGJlY2F1c2UgaXQgc3RpbGwgcGFyc2VzIGNvcnJlY3RseTsgd2UgZG8gd2FybiBmb3Igb3RoZXIgY2FzZXMgbGlrZSBuZXN0ZWRcblx0ICAvLyA8cD4gdGFncyB3aGVyZSB0aGUgYmVnaW5uaW5nIG9mIHRoZSBzZWNvbmQgZWxlbWVudCBpbXBsaWNpdGx5IGNsb3NlcyB0aGVcblx0ICAvLyBmaXJzdCwgY2F1c2luZyBhIGNvbmZ1c2luZyBtZXNzLlxuXHRcblx0ICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNzcGVjaWFsXG5cdCAgdmFyIHNwZWNpYWxUYWdzID0gWydhZGRyZXNzJywgJ2FwcGxldCcsICdhcmVhJywgJ2FydGljbGUnLCAnYXNpZGUnLCAnYmFzZScsICdiYXNlZm9udCcsICdiZ3NvdW5kJywgJ2Jsb2NrcXVvdGUnLCAnYm9keScsICdicicsICdidXR0b24nLCAnY2FwdGlvbicsICdjZW50ZXInLCAnY29sJywgJ2NvbGdyb3VwJywgJ2RkJywgJ2RldGFpbHMnLCAnZGlyJywgJ2RpdicsICdkbCcsICdkdCcsICdlbWJlZCcsICdmaWVsZHNldCcsICdmaWdjYXB0aW9uJywgJ2ZpZ3VyZScsICdmb290ZXInLCAnZm9ybScsICdmcmFtZScsICdmcmFtZXNldCcsICdoMScsICdoMicsICdoMycsICdoNCcsICdoNScsICdoNicsICdoZWFkJywgJ2hlYWRlcicsICdoZ3JvdXAnLCAnaHInLCAnaHRtbCcsICdpZnJhbWUnLCAnaW1nJywgJ2lucHV0JywgJ2lzaW5kZXgnLCAnbGknLCAnbGluaycsICdsaXN0aW5nJywgJ21haW4nLCAnbWFycXVlZScsICdtZW51JywgJ21lbnVpdGVtJywgJ21ldGEnLCAnbmF2JywgJ25vZW1iZWQnLCAnbm9mcmFtZXMnLCAnbm9zY3JpcHQnLCAnb2JqZWN0JywgJ29sJywgJ3AnLCAncGFyYW0nLCAncGxhaW50ZXh0JywgJ3ByZScsICdzY3JpcHQnLCAnc2VjdGlvbicsICdzZWxlY3QnLCAnc291cmNlJywgJ3N0eWxlJywgJ3N1bW1hcnknLCAndGFibGUnLCAndGJvZHknLCAndGQnLCAndGVtcGxhdGUnLCAndGV4dGFyZWEnLCAndGZvb3QnLCAndGgnLCAndGhlYWQnLCAndGl0bGUnLCAndHInLCAndHJhY2snLCAndWwnLCAnd2JyJywgJ3htcCddO1xuXHRcblx0ICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNoYXMtYW4tZWxlbWVudC1pbi1zY29wZVxuXHQgIHZhciBpblNjb3BlVGFncyA9IFsnYXBwbGV0JywgJ2NhcHRpb24nLCAnaHRtbCcsICd0YWJsZScsICd0ZCcsICd0aCcsICdtYXJxdWVlJywgJ29iamVjdCcsICd0ZW1wbGF0ZScsXG5cdFxuXHQgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI2h0bWwtaW50ZWdyYXRpb24tcG9pbnRcblx0ICAvLyBUT0RPOiBEaXN0aW5ndWlzaCBieSBuYW1lc3BhY2UgaGVyZSAtLSBmb3IgPHRpdGxlPiwgaW5jbHVkaW5nIGl0IGhlcmVcblx0ICAvLyBlcnJzIG9uIHRoZSBzaWRlIG9mIGZld2VyIHdhcm5pbmdzXG5cdCAgJ2ZvcmVpZ25PYmplY3QnLCAnZGVzYycsICd0aXRsZSddO1xuXHRcblx0ICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNoYXMtYW4tZWxlbWVudC1pbi1idXR0b24tc2NvcGVcblx0ICB2YXIgYnV0dG9uU2NvcGVUYWdzID0gaW5TY29wZVRhZ3MuY29uY2F0KFsnYnV0dG9uJ10pO1xuXHRcblx0ICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNnZW5lcmF0ZS1pbXBsaWVkLWVuZC10YWdzXG5cdCAgdmFyIGltcGxpZWRFbmRUYWdzID0gWydkZCcsICdkdCcsICdsaScsICdvcHRpb24nLCAnb3B0Z3JvdXAnLCAncCcsICdycCcsICdydCddO1xuXHRcblx0ICB2YXIgZW1wdHlBbmNlc3RvckluZm8gPSB7XG5cdCAgICBwYXJlbnRUYWc6IG51bGwsXG5cdFxuXHQgICAgZm9ybVRhZzogbnVsbCxcblx0ICAgIGFUYWdJblNjb3BlOiBudWxsLFxuXHQgICAgYnV0dG9uVGFnSW5TY29wZTogbnVsbCxcblx0ICAgIG5vYnJUYWdJblNjb3BlOiBudWxsLFxuXHQgICAgcFRhZ0luQnV0dG9uU2NvcGU6IG51bGwsXG5cdFxuXHQgICAgbGlzdEl0ZW1UYWdBdXRvY2xvc2luZzogbnVsbCxcblx0ICAgIGRsSXRlbVRhZ0F1dG9jbG9zaW5nOiBudWxsXG5cdCAgfTtcblx0XG5cdCAgdmFyIHVwZGF0ZWRBbmNlc3RvckluZm8gPSBmdW5jdGlvbiAob2xkSW5mbywgdGFnLCBpbnN0YW5jZSkge1xuXHQgICAgdmFyIGFuY2VzdG9ySW5mbyA9IGFzc2lnbih7fSwgb2xkSW5mbyB8fCBlbXB0eUFuY2VzdG9ySW5mbyk7XG5cdCAgICB2YXIgaW5mbyA9IHsgdGFnOiB0YWcsIGluc3RhbmNlOiBpbnN0YW5jZSB9O1xuXHRcblx0ICAgIGlmIChpblNjb3BlVGFncy5pbmRleE9mKHRhZykgIT09IC0xKSB7XG5cdCAgICAgIGFuY2VzdG9ySW5mby5hVGFnSW5TY29wZSA9IG51bGw7XG5cdCAgICAgIGFuY2VzdG9ySW5mby5idXR0b25UYWdJblNjb3BlID0gbnVsbDtcblx0ICAgICAgYW5jZXN0b3JJbmZvLm5vYnJUYWdJblNjb3BlID0gbnVsbDtcblx0ICAgIH1cblx0ICAgIGlmIChidXR0b25TY29wZVRhZ3MuaW5kZXhPZih0YWcpICE9PSAtMSkge1xuXHQgICAgICBhbmNlc3RvckluZm8ucFRhZ0luQnV0dG9uU2NvcGUgPSBudWxsO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIFNlZSBydWxlcyBmb3IgJ2xpJywgJ2RkJywgJ2R0JyBzdGFydCB0YWdzIGluXG5cdCAgICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNwYXJzaW5nLW1haW4taW5ib2R5XG5cdCAgICBpZiAoc3BlY2lhbFRhZ3MuaW5kZXhPZih0YWcpICE9PSAtMSAmJiB0YWcgIT09ICdhZGRyZXNzJyAmJiB0YWcgIT09ICdkaXYnICYmIHRhZyAhPT0gJ3AnKSB7XG5cdCAgICAgIGFuY2VzdG9ySW5mby5saXN0SXRlbVRhZ0F1dG9jbG9zaW5nID0gbnVsbDtcblx0ICAgICAgYW5jZXN0b3JJbmZvLmRsSXRlbVRhZ0F1dG9jbG9zaW5nID0gbnVsbDtcblx0ICAgIH1cblx0XG5cdCAgICBhbmNlc3RvckluZm8ucGFyZW50VGFnID0gaW5mbztcblx0XG5cdCAgICBpZiAodGFnID09PSAnZm9ybScpIHtcblx0ICAgICAgYW5jZXN0b3JJbmZvLmZvcm1UYWcgPSBpbmZvO1xuXHQgICAgfVxuXHQgICAgaWYgKHRhZyA9PT0gJ2EnKSB7XG5cdCAgICAgIGFuY2VzdG9ySW5mby5hVGFnSW5TY29wZSA9IGluZm87XG5cdCAgICB9XG5cdCAgICBpZiAodGFnID09PSAnYnV0dG9uJykge1xuXHQgICAgICBhbmNlc3RvckluZm8uYnV0dG9uVGFnSW5TY29wZSA9IGluZm87XG5cdCAgICB9XG5cdCAgICBpZiAodGFnID09PSAnbm9icicpIHtcblx0ICAgICAgYW5jZXN0b3JJbmZvLm5vYnJUYWdJblNjb3BlID0gaW5mbztcblx0ICAgIH1cblx0ICAgIGlmICh0YWcgPT09ICdwJykge1xuXHQgICAgICBhbmNlc3RvckluZm8ucFRhZ0luQnV0dG9uU2NvcGUgPSBpbmZvO1xuXHQgICAgfVxuXHQgICAgaWYgKHRhZyA9PT0gJ2xpJykge1xuXHQgICAgICBhbmNlc3RvckluZm8ubGlzdEl0ZW1UYWdBdXRvY2xvc2luZyA9IGluZm87XG5cdCAgICB9XG5cdCAgICBpZiAodGFnID09PSAnZGQnIHx8IHRhZyA9PT0gJ2R0Jykge1xuXHQgICAgICBhbmNlc3RvckluZm8uZGxJdGVtVGFnQXV0b2Nsb3NpbmcgPSBpbmZvO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBhbmNlc3RvckluZm87XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogUmV0dXJucyB3aGV0aGVyXG5cdCAgICovXG5cdCAgdmFyIGlzVGFnVmFsaWRXaXRoUGFyZW50ID0gZnVuY3Rpb24gKHRhZywgcGFyZW50VGFnKSB7XG5cdCAgICAvLyBGaXJzdCwgbGV0J3MgY2hlY2sgaWYgd2UncmUgaW4gYW4gdW51c3VhbCBwYXJzaW5nIG1vZGUuLi5cblx0ICAgIHN3aXRjaCAocGFyZW50VGFnKSB7XG5cdCAgICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI3BhcnNpbmctbWFpbi1pbnNlbGVjdFxuXHQgICAgICBjYXNlICdzZWxlY3QnOlxuXHQgICAgICAgIHJldHVybiB0YWcgPT09ICdvcHRpb24nIHx8IHRhZyA9PT0gJ29wdGdyb3VwJyB8fCB0YWcgPT09ICcjdGV4dCc7XG5cdCAgICAgIGNhc2UgJ29wdGdyb3VwJzpcblx0ICAgICAgICByZXR1cm4gdGFnID09PSAnb3B0aW9uJyB8fCB0YWcgPT09ICcjdGV4dCc7XG5cdCAgICAgIC8vIFN0cmljdGx5IHNwZWFraW5nLCBzZWVpbmcgYW4gPG9wdGlvbj4gZG9lc24ndCBtZWFuIHdlJ3JlIGluIGEgPHNlbGVjdD5cblx0ICAgICAgLy8gYnV0XG5cdCAgICAgIGNhc2UgJ29wdGlvbic6XG5cdCAgICAgICAgcmV0dXJuIHRhZyA9PT0gJyN0ZXh0Jztcblx0XG5cdCAgICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI3BhcnNpbmctbWFpbi1pbnRkXG5cdCAgICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI3BhcnNpbmctbWFpbi1pbmNhcHRpb25cblx0ICAgICAgLy8gTm8gc3BlY2lhbCBiZWhhdmlvciBzaW5jZSB0aGVzZSBydWxlcyBmYWxsIGJhY2sgdG8gXCJpbiBib2R5XCIgbW9kZSBmb3Jcblx0ICAgICAgLy8gYWxsIGV4Y2VwdCBzcGVjaWFsIHRhYmxlIG5vZGVzIHdoaWNoIGNhdXNlIGJhZCBwYXJzaW5nIGJlaGF2aW9yIGFueXdheS5cblx0XG5cdCAgICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI3BhcnNpbmctbWFpbi1pbnRyXG5cdCAgICAgIGNhc2UgJ3RyJzpcblx0ICAgICAgICByZXR1cm4gdGFnID09PSAndGgnIHx8IHRhZyA9PT0gJ3RkJyB8fCB0YWcgPT09ICdzdHlsZScgfHwgdGFnID09PSAnc2NyaXB0JyB8fCB0YWcgPT09ICd0ZW1wbGF0ZSc7XG5cdFxuXHQgICAgICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNwYXJzaW5nLW1haW4taW50Ym9keVxuXHQgICAgICBjYXNlICd0Ym9keSc6XG5cdCAgICAgIGNhc2UgJ3RoZWFkJzpcblx0ICAgICAgY2FzZSAndGZvb3QnOlxuXHQgICAgICAgIHJldHVybiB0YWcgPT09ICd0cicgfHwgdGFnID09PSAnc3R5bGUnIHx8IHRhZyA9PT0gJ3NjcmlwdCcgfHwgdGFnID09PSAndGVtcGxhdGUnO1xuXHRcblx0ICAgICAgLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc3ludGF4Lmh0bWwjcGFyc2luZy1tYWluLWluY29sZ3JvdXBcblx0ICAgICAgY2FzZSAnY29sZ3JvdXAnOlxuXHQgICAgICAgIHJldHVybiB0YWcgPT09ICdjb2wnIHx8IHRhZyA9PT0gJ3RlbXBsYXRlJztcblx0XG5cdCAgICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI3BhcnNpbmctbWFpbi1pbnRhYmxlXG5cdCAgICAgIGNhc2UgJ3RhYmxlJzpcblx0ICAgICAgICByZXR1cm4gdGFnID09PSAnY2FwdGlvbicgfHwgdGFnID09PSAnY29sZ3JvdXAnIHx8IHRhZyA9PT0gJ3Rib2R5JyB8fCB0YWcgPT09ICd0Zm9vdCcgfHwgdGFnID09PSAndGhlYWQnIHx8IHRhZyA9PT0gJ3N0eWxlJyB8fCB0YWcgPT09ICdzY3JpcHQnIHx8IHRhZyA9PT0gJ3RlbXBsYXRlJztcblx0XG5cdCAgICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI3BhcnNpbmctbWFpbi1pbmhlYWRcblx0ICAgICAgY2FzZSAnaGVhZCc6XG5cdCAgICAgICAgcmV0dXJuIHRhZyA9PT0gJ2Jhc2UnIHx8IHRhZyA9PT0gJ2Jhc2Vmb250JyB8fCB0YWcgPT09ICdiZ3NvdW5kJyB8fCB0YWcgPT09ICdsaW5rJyB8fCB0YWcgPT09ICdtZXRhJyB8fCB0YWcgPT09ICd0aXRsZScgfHwgdGFnID09PSAnbm9zY3JpcHQnIHx8IHRhZyA9PT0gJ25vZnJhbWVzJyB8fCB0YWcgPT09ICdzdHlsZScgfHwgdGFnID09PSAnc2NyaXB0JyB8fCB0YWcgPT09ICd0ZW1wbGF0ZSc7XG5cdFxuXHQgICAgICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zZW1hbnRpY3MuaHRtbCN0aGUtaHRtbC1lbGVtZW50XG5cdCAgICAgIGNhc2UgJ2h0bWwnOlxuXHQgICAgICAgIHJldHVybiB0YWcgPT09ICdoZWFkJyB8fCB0YWcgPT09ICdib2R5Jztcblx0ICAgIH1cblx0XG5cdCAgICAvLyBQcm9iYWJseSBpbiB0aGUgXCJpbiBib2R5XCIgcGFyc2luZyBtb2RlLCBzbyB3ZSBvdXRsYXcgb25seSB0YWcgY29tYm9zXG5cdCAgICAvLyB3aGVyZSB0aGUgcGFyc2luZyBydWxlcyBjYXVzZSBpbXBsaWNpdCBvcGVucyBvciBjbG9zZXMgdG8gYmUgYWRkZWQuXG5cdCAgICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNwYXJzaW5nLW1haW4taW5ib2R5XG5cdCAgICBzd2l0Y2ggKHRhZykge1xuXHQgICAgICBjYXNlICdoMSc6XG5cdCAgICAgIGNhc2UgJ2gyJzpcblx0ICAgICAgY2FzZSAnaDMnOlxuXHQgICAgICBjYXNlICdoNCc6XG5cdCAgICAgIGNhc2UgJ2g1Jzpcblx0ICAgICAgY2FzZSAnaDYnOlxuXHQgICAgICAgIHJldHVybiBwYXJlbnRUYWcgIT09ICdoMScgJiYgcGFyZW50VGFnICE9PSAnaDInICYmIHBhcmVudFRhZyAhPT0gJ2gzJyAmJiBwYXJlbnRUYWcgIT09ICdoNCcgJiYgcGFyZW50VGFnICE9PSAnaDUnICYmIHBhcmVudFRhZyAhPT0gJ2g2Jztcblx0XG5cdCAgICAgIGNhc2UgJ3JwJzpcblx0ICAgICAgY2FzZSAncnQnOlxuXHQgICAgICAgIHJldHVybiBpbXBsaWVkRW5kVGFncy5pbmRleE9mKHBhcmVudFRhZykgPT09IC0xO1xuXHRcblx0ICAgICAgY2FzZSAnY2FwdGlvbic6XG5cdCAgICAgIGNhc2UgJ2NvbCc6XG5cdCAgICAgIGNhc2UgJ2NvbGdyb3VwJzpcblx0ICAgICAgY2FzZSAnZnJhbWUnOlxuXHQgICAgICBjYXNlICdoZWFkJzpcblx0ICAgICAgY2FzZSAndGJvZHknOlxuXHQgICAgICBjYXNlICd0ZCc6XG5cdCAgICAgIGNhc2UgJ3Rmb290Jzpcblx0ICAgICAgY2FzZSAndGgnOlxuXHQgICAgICBjYXNlICd0aGVhZCc6XG5cdCAgICAgIGNhc2UgJ3RyJzpcblx0ICAgICAgICAvLyBUaGVzZSB0YWdzIGFyZSBvbmx5IHZhbGlkIHdpdGggYSBmZXcgcGFyZW50cyB0aGF0IGhhdmUgc3BlY2lhbCBjaGlsZFxuXHQgICAgICAgIC8vIHBhcnNpbmcgcnVsZXMgLS0gaWYgd2UncmUgZG93biBoZXJlLCB0aGVuIG5vbmUgb2YgdGhvc2UgbWF0Y2hlZCBhbmRcblx0ICAgICAgICAvLyBzbyB3ZSBhbGxvdyBpdCBvbmx5IGlmIHdlIGRvbid0IGtub3cgd2hhdCB0aGUgcGFyZW50IGlzLCBhcyBhbGwgb3RoZXJcblx0ICAgICAgICAvLyBjYXNlcyBhcmUgaW52YWxpZC5cblx0ICAgICAgICByZXR1cm4gcGFyZW50VGFnID09IG51bGw7XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIHRydWU7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogUmV0dXJucyB3aGV0aGVyXG5cdCAgICovXG5cdCAgdmFyIGZpbmRJbnZhbGlkQW5jZXN0b3JGb3JUYWcgPSBmdW5jdGlvbiAodGFnLCBhbmNlc3RvckluZm8pIHtcblx0ICAgIHN3aXRjaCAodGFnKSB7XG5cdCAgICAgIGNhc2UgJ2FkZHJlc3MnOlxuXHQgICAgICBjYXNlICdhcnRpY2xlJzpcblx0ICAgICAgY2FzZSAnYXNpZGUnOlxuXHQgICAgICBjYXNlICdibG9ja3F1b3RlJzpcblx0ICAgICAgY2FzZSAnY2VudGVyJzpcblx0ICAgICAgY2FzZSAnZGV0YWlscyc6XG5cdCAgICAgIGNhc2UgJ2RpYWxvZyc6XG5cdCAgICAgIGNhc2UgJ2Rpcic6XG5cdCAgICAgIGNhc2UgJ2Rpdic6XG5cdCAgICAgIGNhc2UgJ2RsJzpcblx0ICAgICAgY2FzZSAnZmllbGRzZXQnOlxuXHQgICAgICBjYXNlICdmaWdjYXB0aW9uJzpcblx0ICAgICAgY2FzZSAnZmlndXJlJzpcblx0ICAgICAgY2FzZSAnZm9vdGVyJzpcblx0ICAgICAgY2FzZSAnaGVhZGVyJzpcblx0ICAgICAgY2FzZSAnaGdyb3VwJzpcblx0ICAgICAgY2FzZSAnbWFpbic6XG5cdCAgICAgIGNhc2UgJ21lbnUnOlxuXHQgICAgICBjYXNlICduYXYnOlxuXHQgICAgICBjYXNlICdvbCc6XG5cdCAgICAgIGNhc2UgJ3AnOlxuXHQgICAgICBjYXNlICdzZWN0aW9uJzpcblx0ICAgICAgY2FzZSAnc3VtbWFyeSc6XG5cdCAgICAgIGNhc2UgJ3VsJzpcblx0XG5cdCAgICAgIGNhc2UgJ3ByZSc6XG5cdCAgICAgIGNhc2UgJ2xpc3RpbmcnOlxuXHRcblx0ICAgICAgY2FzZSAndGFibGUnOlxuXHRcblx0ICAgICAgY2FzZSAnaHInOlxuXHRcblx0ICAgICAgY2FzZSAneG1wJzpcblx0XG5cdCAgICAgIGNhc2UgJ2gxJzpcblx0ICAgICAgY2FzZSAnaDInOlxuXHQgICAgICBjYXNlICdoMyc6XG5cdCAgICAgIGNhc2UgJ2g0Jzpcblx0ICAgICAgY2FzZSAnaDUnOlxuXHQgICAgICBjYXNlICdoNic6XG5cdCAgICAgICAgcmV0dXJuIGFuY2VzdG9ySW5mby5wVGFnSW5CdXR0b25TY29wZTtcblx0XG5cdCAgICAgIGNhc2UgJ2Zvcm0nOlxuXHQgICAgICAgIHJldHVybiBhbmNlc3RvckluZm8uZm9ybVRhZyB8fCBhbmNlc3RvckluZm8ucFRhZ0luQnV0dG9uU2NvcGU7XG5cdFxuXHQgICAgICBjYXNlICdsaSc6XG5cdCAgICAgICAgcmV0dXJuIGFuY2VzdG9ySW5mby5saXN0SXRlbVRhZ0F1dG9jbG9zaW5nO1xuXHRcblx0ICAgICAgY2FzZSAnZGQnOlxuXHQgICAgICBjYXNlICdkdCc6XG5cdCAgICAgICAgcmV0dXJuIGFuY2VzdG9ySW5mby5kbEl0ZW1UYWdBdXRvY2xvc2luZztcblx0XG5cdCAgICAgIGNhc2UgJ2J1dHRvbic6XG5cdCAgICAgICAgcmV0dXJuIGFuY2VzdG9ySW5mby5idXR0b25UYWdJblNjb3BlO1xuXHRcblx0ICAgICAgY2FzZSAnYSc6XG5cdCAgICAgICAgLy8gU3BlYyBzYXlzIHNvbWV0aGluZyBhYm91dCBzdG9yaW5nIGEgbGlzdCBvZiBtYXJrZXJzLCBidXQgaXQgc291bmRzXG5cdCAgICAgICAgLy8gZXF1aXZhbGVudCB0byB0aGlzIGNoZWNrLlxuXHQgICAgICAgIHJldHVybiBhbmNlc3RvckluZm8uYVRhZ0luU2NvcGU7XG5cdFxuXHQgICAgICBjYXNlICdub2JyJzpcblx0ICAgICAgICByZXR1cm4gYW5jZXN0b3JJbmZvLm5vYnJUYWdJblNjb3BlO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBudWxsO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEdpdmVuIGEgUmVhY3RDb21wb3NpdGVDb21wb25lbnQgaW5zdGFuY2UsIHJldHVybiBhIGxpc3Qgb2YgaXRzIHJlY3Vyc2l2ZVxuXHQgICAqIG93bmVycywgc3RhcnRpbmcgYXQgdGhlIHJvb3QgYW5kIGVuZGluZyB3aXRoIHRoZSBpbnN0YW5jZSBpdHNlbGYuXG5cdCAgICovXG5cdCAgdmFyIGZpbmRPd25lclN0YWNrID0gZnVuY3Rpb24gKGluc3RhbmNlKSB7XG5cdCAgICBpZiAoIWluc3RhbmNlKSB7XG5cdCAgICAgIHJldHVybiBbXTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgc3RhY2sgPSBbXTtcblx0ICAgIC8qZXNsaW50LWRpc2FibGUgc3BhY2UtYWZ0ZXIta2V5d29yZHMgKi9cblx0ICAgIGRvIHtcblx0ICAgICAgLyplc2xpbnQtZW5hYmxlIHNwYWNlLWFmdGVyLWtleXdvcmRzICovXG5cdCAgICAgIHN0YWNrLnB1c2goaW5zdGFuY2UpO1xuXHQgICAgfSB3aGlsZSAoaW5zdGFuY2UgPSBpbnN0YW5jZS5fY3VycmVudEVsZW1lbnQuX293bmVyKTtcblx0ICAgIHN0YWNrLnJldmVyc2UoKTtcblx0ICAgIHJldHVybiBzdGFjaztcblx0ICB9O1xuXHRcblx0ICB2YXIgZGlkV2FybiA9IHt9O1xuXHRcblx0ICB2YWxpZGF0ZURPTU5lc3RpbmcgPSBmdW5jdGlvbiAoY2hpbGRUYWcsIGNoaWxkSW5zdGFuY2UsIGFuY2VzdG9ySW5mbykge1xuXHQgICAgYW5jZXN0b3JJbmZvID0gYW5jZXN0b3JJbmZvIHx8IGVtcHR5QW5jZXN0b3JJbmZvO1xuXHQgICAgdmFyIHBhcmVudEluZm8gPSBhbmNlc3RvckluZm8ucGFyZW50VGFnO1xuXHQgICAgdmFyIHBhcmVudFRhZyA9IHBhcmVudEluZm8gJiYgcGFyZW50SW5mby50YWc7XG5cdFxuXHQgICAgdmFyIGludmFsaWRQYXJlbnQgPSBpc1RhZ1ZhbGlkV2l0aFBhcmVudChjaGlsZFRhZywgcGFyZW50VGFnKSA/IG51bGwgOiBwYXJlbnRJbmZvO1xuXHQgICAgdmFyIGludmFsaWRBbmNlc3RvciA9IGludmFsaWRQYXJlbnQgPyBudWxsIDogZmluZEludmFsaWRBbmNlc3RvckZvclRhZyhjaGlsZFRhZywgYW5jZXN0b3JJbmZvKTtcblx0ICAgIHZhciBwcm9ibGVtYXRpYyA9IGludmFsaWRQYXJlbnQgfHwgaW52YWxpZEFuY2VzdG9yO1xuXHRcblx0ICAgIGlmIChwcm9ibGVtYXRpYykge1xuXHQgICAgICB2YXIgYW5jZXN0b3JUYWcgPSBwcm9ibGVtYXRpYy50YWc7XG5cdCAgICAgIHZhciBhbmNlc3Rvckluc3RhbmNlID0gcHJvYmxlbWF0aWMuaW5zdGFuY2U7XG5cdFxuXHQgICAgICB2YXIgY2hpbGRPd25lciA9IGNoaWxkSW5zdGFuY2UgJiYgY2hpbGRJbnN0YW5jZS5fY3VycmVudEVsZW1lbnQuX293bmVyO1xuXHQgICAgICB2YXIgYW5jZXN0b3JPd25lciA9IGFuY2VzdG9ySW5zdGFuY2UgJiYgYW5jZXN0b3JJbnN0YW5jZS5fY3VycmVudEVsZW1lbnQuX293bmVyO1xuXHRcblx0ICAgICAgdmFyIGNoaWxkT3duZXJzID0gZmluZE93bmVyU3RhY2soY2hpbGRPd25lcik7XG5cdCAgICAgIHZhciBhbmNlc3Rvck93bmVycyA9IGZpbmRPd25lclN0YWNrKGFuY2VzdG9yT3duZXIpO1xuXHRcblx0ICAgICAgdmFyIG1pblN0YWNrTGVuID0gTWF0aC5taW4oY2hpbGRPd25lcnMubGVuZ3RoLCBhbmNlc3Rvck93bmVycy5sZW5ndGgpO1xuXHQgICAgICB2YXIgaTtcblx0XG5cdCAgICAgIHZhciBkZWVwZXN0Q29tbW9uID0gLTE7XG5cdCAgICAgIGZvciAoaSA9IDA7IGkgPCBtaW5TdGFja0xlbjsgaSsrKSB7XG5cdCAgICAgICAgaWYgKGNoaWxkT3duZXJzW2ldID09PSBhbmNlc3Rvck93bmVyc1tpXSkge1xuXHQgICAgICAgICAgZGVlcGVzdENvbW1vbiA9IGk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIFVOS05PV04gPSAnKHVua25vd24pJztcblx0ICAgICAgdmFyIGNoaWxkT3duZXJOYW1lcyA9IGNoaWxkT3duZXJzLnNsaWNlKGRlZXBlc3RDb21tb24gKyAxKS5tYXAoZnVuY3Rpb24gKGluc3QpIHtcblx0ICAgICAgICByZXR1cm4gaW5zdC5nZXROYW1lKCkgfHwgVU5LTk9XTjtcblx0ICAgICAgfSk7XG5cdCAgICAgIHZhciBhbmNlc3Rvck93bmVyTmFtZXMgPSBhbmNlc3Rvck93bmVycy5zbGljZShkZWVwZXN0Q29tbW9uICsgMSkubWFwKGZ1bmN0aW9uIChpbnN0KSB7XG5cdCAgICAgICAgcmV0dXJuIGluc3QuZ2V0TmFtZSgpIHx8IFVOS05PV047XG5cdCAgICAgIH0pO1xuXHQgICAgICB2YXIgb3duZXJJbmZvID0gW10uY29uY2F0KFxuXHQgICAgICAvLyBJZiB0aGUgcGFyZW50IGFuZCBjaGlsZCBpbnN0YW5jZXMgaGF2ZSBhIGNvbW1vbiBvd25lciBhbmNlc3Rvciwgc3RhcnRcblx0ICAgICAgLy8gd2l0aCB0aGF0IC0tIG90aGVyd2lzZSB3ZSBqdXN0IHN0YXJ0IHdpdGggdGhlIHBhcmVudCdzIG93bmVycy5cblx0ICAgICAgZGVlcGVzdENvbW1vbiAhPT0gLTEgPyBjaGlsZE93bmVyc1tkZWVwZXN0Q29tbW9uXS5nZXROYW1lKCkgfHwgVU5LTk9XTiA6IFtdLCBhbmNlc3Rvck93bmVyTmFtZXMsIGFuY2VzdG9yVGFnLFxuXHQgICAgICAvLyBJZiB3ZSdyZSB3YXJuaW5nIGFib3V0IGFuIGludmFsaWQgKG5vbi1wYXJlbnQpIGFuY2VzdHJ5LCBhZGQgJy4uLidcblx0ICAgICAgaW52YWxpZEFuY2VzdG9yID8gWycuLi4nXSA6IFtdLCBjaGlsZE93bmVyTmFtZXMsIGNoaWxkVGFnKS5qb2luKCcgPiAnKTtcblx0XG5cdCAgICAgIHZhciB3YXJuS2V5ID0gISFpbnZhbGlkUGFyZW50ICsgJ3wnICsgY2hpbGRUYWcgKyAnfCcgKyBhbmNlc3RvclRhZyArICd8JyArIG93bmVySW5mbztcblx0ICAgICAgaWYgKGRpZFdhcm5bd2FybktleV0pIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgICAgZGlkV2Fyblt3YXJuS2V5XSA9IHRydWU7XG5cdFxuXHQgICAgICBpZiAoaW52YWxpZFBhcmVudCkge1xuXHQgICAgICAgIHZhciBpbmZvID0gJyc7XG5cdCAgICAgICAgaWYgKGFuY2VzdG9yVGFnID09PSAndGFibGUnICYmIGNoaWxkVGFnID09PSAndHInKSB7XG5cdCAgICAgICAgICBpbmZvICs9ICcgQWRkIGEgPHRib2R5PiB0byB5b3VyIGNvZGUgdG8gbWF0Y2ggdGhlIERPTSB0cmVlIGdlbmVyYXRlZCBieSAnICsgJ3RoZSBicm93c2VyLic7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAndmFsaWRhdGVET01OZXN0aW5nKC4uLik6IDwlcz4gY2Fubm90IGFwcGVhciBhcyBhIGNoaWxkIG9mIDwlcz4uICcgKyAnU2VlICVzLiVzJywgY2hpbGRUYWcsIGFuY2VzdG9yVGFnLCBvd25lckluZm8sIGluZm8pIDogdW5kZWZpbmVkO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAndmFsaWRhdGVET01OZXN0aW5nKC4uLik6IDwlcz4gY2Fubm90IGFwcGVhciBhcyBhIGRlc2NlbmRhbnQgb2YgJyArICc8JXM+LiBTZWUgJXMuJywgY2hpbGRUYWcsIGFuY2VzdG9yVGFnLCBvd25lckluZm8pIDogdW5kZWZpbmVkO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgdmFsaWRhdGVET01OZXN0aW5nLmFuY2VzdG9ySW5mb0NvbnRleHRLZXkgPSAnX192YWxpZGF0ZURPTU5lc3RpbmdfYW5jZXN0b3JJbmZvJCcgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zbGljZSgyKTtcblx0XG5cdCAgdmFsaWRhdGVET01OZXN0aW5nLnVwZGF0ZWRBbmNlc3RvckluZm8gPSB1cGRhdGVkQW5jZXN0b3JJbmZvO1xuXHRcblx0ICAvLyBGb3IgdGVzdGluZ1xuXHQgIHZhbGlkYXRlRE9NTmVzdGluZy5pc1RhZ1ZhbGlkSW5Db250ZXh0ID0gZnVuY3Rpb24gKHRhZywgYW5jZXN0b3JJbmZvKSB7XG5cdCAgICBhbmNlc3RvckluZm8gPSBhbmNlc3RvckluZm8gfHwgZW1wdHlBbmNlc3RvckluZm87XG5cdCAgICB2YXIgcGFyZW50SW5mbyA9IGFuY2VzdG9ySW5mby5wYXJlbnRUYWc7XG5cdCAgICB2YXIgcGFyZW50VGFnID0gcGFyZW50SW5mbyAmJiBwYXJlbnRJbmZvLnRhZztcblx0ICAgIHJldHVybiBpc1RhZ1ZhbGlkV2l0aFBhcmVudCh0YWcsIHBhcmVudFRhZykgJiYgIWZpbmRJbnZhbGlkQW5jZXN0b3JGb3JUYWcodGFnLCBhbmNlc3RvckluZm8pO1xuXHQgIH07XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gdmFsaWRhdGVET01OZXN0aW5nO1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg0KSkpXG5cbi8qKiovIH0pLFxuLyogNzEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgey8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3REZWZhdWx0SW5qZWN0aW9uXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIEJlZm9yZUlucHV0RXZlbnRQbHVnaW4gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcyKTtcblx0dmFyIENoYW5nZUV2ZW50UGx1Z2luID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4MCk7XG5cdHZhciBDbGllbnRSZWFjdFJvb3RJbmRleCA9IF9fd2VicGFja19yZXF1aXJlX18oODMpO1xuXHR2YXIgRGVmYXVsdEV2ZW50UGx1Z2luT3JkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg0KTtcblx0dmFyIEVudGVyTGVhdmVFdmVudFBsdWdpbiA9IF9fd2VicGFja19yZXF1aXJlX18oODUpO1xuXHR2YXIgRXhlY3V0aW9uRW52aXJvbm1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHR2YXIgSFRNTERPTVByb3BlcnR5Q29uZmlnID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4OSk7XG5cdHZhciBSZWFjdEJyb3dzZXJDb21wb25lbnRNaXhpbiA9IF9fd2VicGFja19yZXF1aXJlX18oOTApO1xuXHR2YXIgUmVhY3RDb21wb25lbnRCcm93c2VyRW52aXJvbm1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KTtcblx0dmFyIFJlYWN0RGVmYXVsdEJhdGNoaW5nU3RyYXRlZ3kgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkyKTtcblx0dmFyIFJlYWN0RE9NQ29tcG9uZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5Myk7XG5cdHZhciBSZWFjdERPTVRleHRDb21wb25lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHR2YXIgUmVhY3RFdmVudExpc3RlbmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTgpO1xuXHR2YXIgUmVhY3RJbmplY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyMSk7XG5cdHZhciBSZWFjdEluc3RhbmNlSGFuZGxlcyA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXHR2YXIgUmVhY3RNb3VudCA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpO1xuXHR2YXIgUmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTI1KTtcblx0dmFyIFNlbGVjdEV2ZW50UGx1Z2luID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzApO1xuXHR2YXIgU2VydmVyUmVhY3RSb290SW5kZXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzMSk7XG5cdHZhciBTaW1wbGVFdmVudFBsdWdpbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTMyKTtcblx0dmFyIFNWR0RPTVByb3BlcnR5Q29uZmlnID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDEpO1xuXHRcblx0dmFyIGFscmVhZHlJbmplY3RlZCA9IGZhbHNlO1xuXHRcblx0ZnVuY3Rpb24gaW5qZWN0KCkge1xuXHQgIGlmIChhbHJlYWR5SW5qZWN0ZWQpIHtcblx0ICAgIC8vIFRPRE86IFRoaXMgaXMgY3VycmVudGx5IHRydWUgYmVjYXVzZSB0aGVzZSBpbmplY3Rpb25zIGFyZSBzaGFyZWQgYmV0d2VlblxuXHQgICAgLy8gdGhlIGNsaWVudCBhbmQgdGhlIHNlcnZlciBwYWNrYWdlLiBUaGV5IHNob3VsZCBiZSBidWlsdCBpbmRlcGVuZGVudGx5XG5cdCAgICAvLyBhbmQgbm90IHNoYXJlIGFueSBpbmplY3Rpb24gc3RhdGUuIFRoZW4gdGhpcyBwcm9ibGVtIHdpbGwgYmUgc29sdmVkLlxuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICBhbHJlYWR5SW5qZWN0ZWQgPSB0cnVlO1xuXHRcblx0ICBSZWFjdEluamVjdGlvbi5FdmVudEVtaXR0ZXIuaW5qZWN0UmVhY3RFdmVudExpc3RlbmVyKFJlYWN0RXZlbnRMaXN0ZW5lcik7XG5cdFxuXHQgIC8qKlxuXHQgICAqIEluamVjdCBtb2R1bGVzIGZvciByZXNvbHZpbmcgRE9NIGhpZXJhcmNoeSBhbmQgcGx1Z2luIG9yZGVyaW5nLlxuXHQgICAqL1xuXHQgIFJlYWN0SW5qZWN0aW9uLkV2ZW50UGx1Z2luSHViLmluamVjdEV2ZW50UGx1Z2luT3JkZXIoRGVmYXVsdEV2ZW50UGx1Z2luT3JkZXIpO1xuXHQgIFJlYWN0SW5qZWN0aW9uLkV2ZW50UGx1Z2luSHViLmluamVjdEluc3RhbmNlSGFuZGxlKFJlYWN0SW5zdGFuY2VIYW5kbGVzKTtcblx0ICBSZWFjdEluamVjdGlvbi5FdmVudFBsdWdpbkh1Yi5pbmplY3RNb3VudChSZWFjdE1vdW50KTtcblx0XG5cdCAgLyoqXG5cdCAgICogU29tZSBpbXBvcnRhbnQgZXZlbnQgcGx1Z2lucyBpbmNsdWRlZCBieSBkZWZhdWx0ICh3aXRob3V0IGhhdmluZyB0byByZXF1aXJlXG5cdCAgICogdGhlbSkuXG5cdCAgICovXG5cdCAgUmVhY3RJbmplY3Rpb24uRXZlbnRQbHVnaW5IdWIuaW5qZWN0RXZlbnRQbHVnaW5zQnlOYW1lKHtcblx0ICAgIFNpbXBsZUV2ZW50UGx1Z2luOiBTaW1wbGVFdmVudFBsdWdpbixcblx0ICAgIEVudGVyTGVhdmVFdmVudFBsdWdpbjogRW50ZXJMZWF2ZUV2ZW50UGx1Z2luLFxuXHQgICAgQ2hhbmdlRXZlbnRQbHVnaW46IENoYW5nZUV2ZW50UGx1Z2luLFxuXHQgICAgU2VsZWN0RXZlbnRQbHVnaW46IFNlbGVjdEV2ZW50UGx1Z2luLFxuXHQgICAgQmVmb3JlSW5wdXRFdmVudFBsdWdpbjogQmVmb3JlSW5wdXRFdmVudFBsdWdpblxuXHQgIH0pO1xuXHRcblx0ICBSZWFjdEluamVjdGlvbi5OYXRpdmVDb21wb25lbnQuaW5qZWN0R2VuZXJpY0NvbXBvbmVudENsYXNzKFJlYWN0RE9NQ29tcG9uZW50KTtcblx0XG5cdCAgUmVhY3RJbmplY3Rpb24uTmF0aXZlQ29tcG9uZW50LmluamVjdFRleHRDb21wb25lbnRDbGFzcyhSZWFjdERPTVRleHRDb21wb25lbnQpO1xuXHRcblx0ICBSZWFjdEluamVjdGlvbi5DbGFzcy5pbmplY3RNaXhpbihSZWFjdEJyb3dzZXJDb21wb25lbnRNaXhpbik7XG5cdFxuXHQgIFJlYWN0SW5qZWN0aW9uLkRPTVByb3BlcnR5LmluamVjdERPTVByb3BlcnR5Q29uZmlnKEhUTUxET01Qcm9wZXJ0eUNvbmZpZyk7XG5cdCAgUmVhY3RJbmplY3Rpb24uRE9NUHJvcGVydHkuaW5qZWN0RE9NUHJvcGVydHlDb25maWcoU1ZHRE9NUHJvcGVydHlDb25maWcpO1xuXHRcblx0ICBSZWFjdEluamVjdGlvbi5FbXB0eUNvbXBvbmVudC5pbmplY3RFbXB0eUNvbXBvbmVudCgnbm9zY3JpcHQnKTtcblx0XG5cdCAgUmVhY3RJbmplY3Rpb24uVXBkYXRlcy5pbmplY3RSZWNvbmNpbGVUcmFuc2FjdGlvbihSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uKTtcblx0ICBSZWFjdEluamVjdGlvbi5VcGRhdGVzLmluamVjdEJhdGNoaW5nU3RyYXRlZ3koUmVhY3REZWZhdWx0QmF0Y2hpbmdTdHJhdGVneSk7XG5cdFxuXHQgIFJlYWN0SW5qZWN0aW9uLlJvb3RJbmRleC5pbmplY3RDcmVhdGVSZWFjdFJvb3RJbmRleChFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gPyBDbGllbnRSZWFjdFJvb3RJbmRleC5jcmVhdGVSZWFjdFJvb3RJbmRleCA6IFNlcnZlclJlYWN0Um9vdEluZGV4LmNyZWF0ZVJlYWN0Um9vdEluZGV4KTtcblx0XG5cdCAgUmVhY3RJbmplY3Rpb24uQ29tcG9uZW50LmluamVjdEVudmlyb25tZW50KFJlYWN0Q29tcG9uZW50QnJvd3NlckVudmlyb25tZW50KTtcblx0XG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgIHZhciB1cmwgPSBFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gJiYgd2luZG93LmxvY2F0aW9uLmhyZWYgfHwgJyc7XG5cdCAgICBpZiAoL1s/Jl1yZWFjdF9wZXJmXFxiLy50ZXN0KHVybCkpIHtcblx0ICAgICAgdmFyIFJlYWN0RGVmYXVsdFBlcmYgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0Mik7XG5cdCAgICAgIFJlYWN0RGVmYXVsdFBlcmYuc3RhcnQoKTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0ge1xuXHQgIGluamVjdDogaW5qZWN0XG5cdH07XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpKSlcblxuLyoqKi8gfSksXG4vKiA3MiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1IEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBCZWZvcmVJbnB1dEV2ZW50UGx1Z2luXG5cdCAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIEV2ZW50Q29uc3RhbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMCk7XG5cdHZhciBFdmVudFByb3BhZ2F0b3JzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Myk7XG5cdHZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdHZhciBGYWxsYmFja0NvbXBvc2l0aW9uU3RhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc0KTtcblx0dmFyIFN5bnRoZXRpY0NvbXBvc2l0aW9uRXZlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc2KTtcblx0dmFyIFN5bnRoZXRpY0lucHV0RXZlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc4KTtcblx0XG5cdHZhciBrZXlPZiA9IF9fd2VicGFja19yZXF1aXJlX18oNzkpO1xuXHRcblx0dmFyIEVORF9LRVlDT0RFUyA9IFs5LCAxMywgMjcsIDMyXTsgLy8gVGFiLCBSZXR1cm4sIEVzYywgU3BhY2Vcblx0dmFyIFNUQVJUX0tFWUNPREUgPSAyMjk7XG5cdFxuXHR2YXIgY2FuVXNlQ29tcG9zaXRpb25FdmVudCA9IEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSAmJiAnQ29tcG9zaXRpb25FdmVudCcgaW4gd2luZG93O1xuXHRcblx0dmFyIGRvY3VtZW50TW9kZSA9IG51bGw7XG5cdGlmIChFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gJiYgJ2RvY3VtZW50TW9kZScgaW4gZG9jdW1lbnQpIHtcblx0ICBkb2N1bWVudE1vZGUgPSBkb2N1bWVudC5kb2N1bWVudE1vZGU7XG5cdH1cblx0XG5cdC8vIFdlYmtpdCBvZmZlcnMgYSB2ZXJ5IHVzZWZ1bCBgdGV4dElucHV0YCBldmVudCB0aGF0IGNhbiBiZSB1c2VkIHRvXG5cdC8vIGRpcmVjdGx5IHJlcHJlc2VudCBgYmVmb3JlSW5wdXRgLiBUaGUgSUUgYHRleHRpbnB1dGAgZXZlbnQgaXMgbm90IGFzXG5cdC8vIHVzZWZ1bCwgc28gd2UgZG9uJ3QgdXNlIGl0LlxuXHR2YXIgY2FuVXNlVGV4dElucHV0RXZlbnQgPSBFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gJiYgJ1RleHRFdmVudCcgaW4gd2luZG93ICYmICFkb2N1bWVudE1vZGUgJiYgIWlzUHJlc3RvKCk7XG5cdFxuXHQvLyBJbiBJRTkrLCB3ZSBoYXZlIGFjY2VzcyB0byBjb21wb3NpdGlvbiBldmVudHMsIGJ1dCB0aGUgZGF0YSBzdXBwbGllZFxuXHQvLyBieSB0aGUgbmF0aXZlIGNvbXBvc2l0aW9uZW5kIGV2ZW50IG1heSBiZSBpbmNvcnJlY3QuIEphcGFuZXNlIGlkZW9ncmFwaGljXG5cdC8vIHNwYWNlcywgZm9yIGluc3RhbmNlIChcXHUzMDAwKSBhcmUgbm90IHJlY29yZGVkIGNvcnJlY3RseS5cblx0dmFyIHVzZUZhbGxiYWNrQ29tcG9zaXRpb25EYXRhID0gRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NICYmICghY2FuVXNlQ29tcG9zaXRpb25FdmVudCB8fCBkb2N1bWVudE1vZGUgJiYgZG9jdW1lbnRNb2RlID4gOCAmJiBkb2N1bWVudE1vZGUgPD0gMTEpO1xuXHRcblx0LyoqXG5cdCAqIE9wZXJhIDw9IDEyIGluY2x1ZGVzIFRleHRFdmVudCBpbiB3aW5kb3csIGJ1dCBkb2VzIG5vdCBmaXJlXG5cdCAqIHRleHQgaW5wdXQgZXZlbnRzLiBSZWx5IG9uIGtleXByZXNzIGluc3RlYWQuXG5cdCAqL1xuXHRmdW5jdGlvbiBpc1ByZXN0bygpIHtcblx0ICB2YXIgb3BlcmEgPSB3aW5kb3cub3BlcmE7XG5cdCAgcmV0dXJuIHR5cGVvZiBvcGVyYSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG9wZXJhLnZlcnNpb24gPT09ICdmdW5jdGlvbicgJiYgcGFyc2VJbnQob3BlcmEudmVyc2lvbigpLCAxMCkgPD0gMTI7XG5cdH1cblx0XG5cdHZhciBTUEFDRUJBUl9DT0RFID0gMzI7XG5cdHZhciBTUEFDRUJBUl9DSEFSID0gU3RyaW5nLmZyb21DaGFyQ29kZShTUEFDRUJBUl9DT0RFKTtcblx0XG5cdHZhciB0b3BMZXZlbFR5cGVzID0gRXZlbnRDb25zdGFudHMudG9wTGV2ZWxUeXBlcztcblx0XG5cdC8vIEV2ZW50cyBhbmQgdGhlaXIgY29ycmVzcG9uZGluZyBwcm9wZXJ0eSBuYW1lcy5cblx0dmFyIGV2ZW50VHlwZXMgPSB7XG5cdCAgYmVmb3JlSW5wdXQ6IHtcblx0ICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG5cdCAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25CZWZvcmVJbnB1dDogbnVsbCB9KSxcblx0ICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25CZWZvcmVJbnB1dENhcHR1cmU6IG51bGwgfSlcblx0ICAgIH0sXG5cdCAgICBkZXBlbmRlbmNpZXM6IFt0b3BMZXZlbFR5cGVzLnRvcENvbXBvc2l0aW9uRW5kLCB0b3BMZXZlbFR5cGVzLnRvcEtleVByZXNzLCB0b3BMZXZlbFR5cGVzLnRvcFRleHRJbnB1dCwgdG9wTGV2ZWxUeXBlcy50b3BQYXN0ZV1cblx0ICB9LFxuXHQgIGNvbXBvc2l0aW9uRW5kOiB7XG5cdCAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuXHQgICAgICBidWJibGVkOiBrZXlPZih7IG9uQ29tcG9zaXRpb25FbmQ6IG51bGwgfSksXG5cdCAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uQ29tcG9zaXRpb25FbmRDYXB0dXJlOiBudWxsIH0pXG5cdCAgICB9LFxuXHQgICAgZGVwZW5kZW5jaWVzOiBbdG9wTGV2ZWxUeXBlcy50b3BCbHVyLCB0b3BMZXZlbFR5cGVzLnRvcENvbXBvc2l0aW9uRW5kLCB0b3BMZXZlbFR5cGVzLnRvcEtleURvd24sIHRvcExldmVsVHlwZXMudG9wS2V5UHJlc3MsIHRvcExldmVsVHlwZXMudG9wS2V5VXAsIHRvcExldmVsVHlwZXMudG9wTW91c2VEb3duXVxuXHQgIH0sXG5cdCAgY29tcG9zaXRpb25TdGFydDoge1xuXHQgICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcblx0ICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkNvbXBvc2l0aW9uU3RhcnQ6IG51bGwgfSksXG5cdCAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uQ29tcG9zaXRpb25TdGFydENhcHR1cmU6IG51bGwgfSlcblx0ICAgIH0sXG5cdCAgICBkZXBlbmRlbmNpZXM6IFt0b3BMZXZlbFR5cGVzLnRvcEJsdXIsIHRvcExldmVsVHlwZXMudG9wQ29tcG9zaXRpb25TdGFydCwgdG9wTGV2ZWxUeXBlcy50b3BLZXlEb3duLCB0b3BMZXZlbFR5cGVzLnRvcEtleVByZXNzLCB0b3BMZXZlbFR5cGVzLnRvcEtleVVwLCB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlRG93bl1cblx0ICB9LFxuXHQgIGNvbXBvc2l0aW9uVXBkYXRlOiB7XG5cdCAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuXHQgICAgICBidWJibGVkOiBrZXlPZih7IG9uQ29tcG9zaXRpb25VcGRhdGU6IG51bGwgfSksXG5cdCAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uQ29tcG9zaXRpb25VcGRhdGVDYXB0dXJlOiBudWxsIH0pXG5cdCAgICB9LFxuXHQgICAgZGVwZW5kZW5jaWVzOiBbdG9wTGV2ZWxUeXBlcy50b3BCbHVyLCB0b3BMZXZlbFR5cGVzLnRvcENvbXBvc2l0aW9uVXBkYXRlLCB0b3BMZXZlbFR5cGVzLnRvcEtleURvd24sIHRvcExldmVsVHlwZXMudG9wS2V5UHJlc3MsIHRvcExldmVsVHlwZXMudG9wS2V5VXAsIHRvcExldmVsVHlwZXMudG9wTW91c2VEb3duXVxuXHQgIH1cblx0fTtcblx0XG5cdC8vIFRyYWNrIHdoZXRoZXIgd2UndmUgZXZlciBoYW5kbGVkIGEga2V5cHJlc3Mgb24gdGhlIHNwYWNlIGtleS5cblx0dmFyIGhhc1NwYWNlS2V5cHJlc3MgPSBmYWxzZTtcblx0XG5cdC8qKlxuXHQgKiBSZXR1cm4gd2hldGhlciBhIG5hdGl2ZSBrZXlwcmVzcyBldmVudCBpcyBhc3N1bWVkIHRvIGJlIGEgY29tbWFuZC5cblx0ICogVGhpcyBpcyByZXF1aXJlZCBiZWNhdXNlIEZpcmVmb3ggZmlyZXMgYGtleXByZXNzYCBldmVudHMgZm9yIGtleSBjb21tYW5kc1xuXHQgKiAoY3V0LCBjb3B5LCBzZWxlY3QtYWxsLCBldGMuKSBldmVuIHRob3VnaCBubyBjaGFyYWN0ZXIgaXMgaW5zZXJ0ZWQuXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0tleXByZXNzQ29tbWFuZChuYXRpdmVFdmVudCkge1xuXHQgIHJldHVybiAobmF0aXZlRXZlbnQuY3RybEtleSB8fCBuYXRpdmVFdmVudC5hbHRLZXkgfHwgbmF0aXZlRXZlbnQubWV0YUtleSkgJiZcblx0ICAvLyBjdHJsS2V5ICYmIGFsdEtleSBpcyBlcXVpdmFsZW50IHRvIEFsdEdyLCBhbmQgaXMgbm90IGEgY29tbWFuZC5cblx0ICAhKG5hdGl2ZUV2ZW50LmN0cmxLZXkgJiYgbmF0aXZlRXZlbnQuYWx0S2V5KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFRyYW5zbGF0ZSBuYXRpdmUgdG9wIGxldmVsIGV2ZW50cyBpbnRvIGV2ZW50IHR5cGVzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlXG5cdCAqIEByZXR1cm4ge29iamVjdH1cblx0ICovXG5cdGZ1bmN0aW9uIGdldENvbXBvc2l0aW9uRXZlbnRUeXBlKHRvcExldmVsVHlwZSkge1xuXHQgIHN3aXRjaCAodG9wTGV2ZWxUeXBlKSB7XG5cdCAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQ29tcG9zaXRpb25TdGFydDpcblx0ICAgICAgcmV0dXJuIGV2ZW50VHlwZXMuY29tcG9zaXRpb25TdGFydDtcblx0ICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BDb21wb3NpdGlvbkVuZDpcblx0ICAgICAgcmV0dXJuIGV2ZW50VHlwZXMuY29tcG9zaXRpb25FbmQ7XG5cdCAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQ29tcG9zaXRpb25VcGRhdGU6XG5cdCAgICAgIHJldHVybiBldmVudFR5cGVzLmNvbXBvc2l0aW9uVXBkYXRlO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIERvZXMgb3VyIGZhbGxiYWNrIGJlc3QtZ3Vlc3MgbW9kZWwgdGhpbmsgdGhpcyBldmVudCBzaWduaWZpZXMgdGhhdFxuXHQgKiBjb21wb3NpdGlvbiBoYXMgYmVndW4/XG5cdCAqXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFR5cGVcblx0ICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50XG5cdCAqIEByZXR1cm4ge2Jvb2xlYW59XG5cdCAqL1xuXHRmdW5jdGlvbiBpc0ZhbGxiYWNrQ29tcG9zaXRpb25TdGFydCh0b3BMZXZlbFR5cGUsIG5hdGl2ZUV2ZW50KSB7XG5cdCAgcmV0dXJuIHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BLZXlEb3duICYmIG5hdGl2ZUV2ZW50LmtleUNvZGUgPT09IFNUQVJUX0tFWUNPREU7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBEb2VzIG91ciBmYWxsYmFjayBtb2RlIHRoaW5rIHRoYXQgdGhpcyBldmVudCBpcyB0aGUgZW5kIG9mIGNvbXBvc2l0aW9uP1xuXHQgKlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlXG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudFxuXHQgKiBAcmV0dXJuIHtib29sZWFufVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNGYWxsYmFja0NvbXBvc2l0aW9uRW5kKHRvcExldmVsVHlwZSwgbmF0aXZlRXZlbnQpIHtcblx0ICBzd2l0Y2ggKHRvcExldmVsVHlwZSkge1xuXHQgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEtleVVwOlxuXHQgICAgICAvLyBDb21tYW5kIGtleXMgaW5zZXJ0IG9yIGNsZWFyIElNRSBpbnB1dC5cblx0ICAgICAgcmV0dXJuIEVORF9LRVlDT0RFUy5pbmRleE9mKG5hdGl2ZUV2ZW50LmtleUNvZGUpICE9PSAtMTtcblx0ICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BLZXlEb3duOlxuXHQgICAgICAvLyBFeHBlY3QgSU1FIGtleUNvZGUgb24gZWFjaCBrZXlkb3duLiBJZiB3ZSBnZXQgYW55IG90aGVyXG5cdCAgICAgIC8vIGNvZGUgd2UgbXVzdCBoYXZlIGV4aXRlZCBlYXJsaWVyLlxuXHQgICAgICByZXR1cm4gbmF0aXZlRXZlbnQua2V5Q29kZSAhPT0gU1RBUlRfS0VZQ09ERTtcblx0ICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BLZXlQcmVzczpcblx0ICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BNb3VzZURvd246XG5cdCAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQmx1cjpcblx0ICAgICAgLy8gRXZlbnRzIGFyZSBub3QgcG9zc2libGUgd2l0aG91dCBjYW5jZWxsaW5nIElNRS5cblx0ICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICBkZWZhdWx0OlxuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogR29vZ2xlIElucHV0IFRvb2xzIHByb3ZpZGVzIGNvbXBvc2l0aW9uIGRhdGEgdmlhIGEgQ3VzdG9tRXZlbnQsXG5cdCAqIHdpdGggdGhlIGBkYXRhYCBwcm9wZXJ0eSBwb3B1bGF0ZWQgaW4gdGhlIGBkZXRhaWxgIG9iamVjdC4gSWYgdGhpc1xuXHQgKiBpcyBhdmFpbGFibGUgb24gdGhlIGV2ZW50IG9iamVjdCwgdXNlIGl0LiBJZiBub3QsIHRoaXMgaXMgYSBwbGFpblxuXHQgKiBjb21wb3NpdGlvbiBldmVudCBhbmQgd2UgaGF2ZSBub3RoaW5nIHNwZWNpYWwgdG8gZXh0cmFjdC5cblx0ICpcblx0ICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50XG5cdCAqIEByZXR1cm4gez9zdHJpbmd9XG5cdCAqL1xuXHRmdW5jdGlvbiBnZXREYXRhRnJvbUN1c3RvbUV2ZW50KG5hdGl2ZUV2ZW50KSB7XG5cdCAgdmFyIGRldGFpbCA9IG5hdGl2ZUV2ZW50LmRldGFpbDtcblx0ICBpZiAodHlwZW9mIGRldGFpbCA9PT0gJ29iamVjdCcgJiYgJ2RhdGEnIGluIGRldGFpbCkge1xuXHQgICAgcmV0dXJuIGRldGFpbC5kYXRhO1xuXHQgIH1cblx0ICByZXR1cm4gbnVsbDtcblx0fVxuXHRcblx0Ly8gVHJhY2sgdGhlIGN1cnJlbnQgSU1FIGNvbXBvc2l0aW9uIGZhbGxiYWNrIG9iamVjdCwgaWYgYW55LlxuXHR2YXIgY3VycmVudENvbXBvc2l0aW9uID0gbnVsbDtcblx0XG5cdC8qKlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlIFJlY29yZCBmcm9tIGBFdmVudENvbnN0YW50c2AuXG5cdCAqIEBwYXJhbSB7RE9NRXZlbnRUYXJnZXR9IHRvcExldmVsVGFyZ2V0IFRoZSBsaXN0ZW5pbmcgY29tcG9uZW50IHJvb3Qgbm9kZS5cblx0ICogQHBhcmFtIHtzdHJpbmd9IHRvcExldmVsVGFyZ2V0SUQgSUQgb2YgYHRvcExldmVsVGFyZ2V0YC5cblx0ICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuXHQgKiBAcmV0dXJuIHs/b2JqZWN0fSBBIFN5bnRoZXRpY0NvbXBvc2l0aW9uRXZlbnQuXG5cdCAqL1xuXHRmdW5jdGlvbiBleHRyYWN0Q29tcG9zaXRpb25FdmVudCh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElELCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpIHtcblx0ICB2YXIgZXZlbnRUeXBlO1xuXHQgIHZhciBmYWxsYmFja0RhdGE7XG5cdFxuXHQgIGlmIChjYW5Vc2VDb21wb3NpdGlvbkV2ZW50KSB7XG5cdCAgICBldmVudFR5cGUgPSBnZXRDb21wb3NpdGlvbkV2ZW50VHlwZSh0b3BMZXZlbFR5cGUpO1xuXHQgIH0gZWxzZSBpZiAoIWN1cnJlbnRDb21wb3NpdGlvbikge1xuXHQgICAgaWYgKGlzRmFsbGJhY2tDb21wb3NpdGlvblN0YXJ0KHRvcExldmVsVHlwZSwgbmF0aXZlRXZlbnQpKSB7XG5cdCAgICAgIGV2ZW50VHlwZSA9IGV2ZW50VHlwZXMuY29tcG9zaXRpb25TdGFydDtcblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKGlzRmFsbGJhY2tDb21wb3NpdGlvbkVuZCh0b3BMZXZlbFR5cGUsIG5hdGl2ZUV2ZW50KSkge1xuXHQgICAgZXZlbnRUeXBlID0gZXZlbnRUeXBlcy5jb21wb3NpdGlvbkVuZDtcblx0ICB9XG5cdFxuXHQgIGlmICghZXZlbnRUeXBlKSB7XG5cdCAgICByZXR1cm4gbnVsbDtcblx0ICB9XG5cdFxuXHQgIGlmICh1c2VGYWxsYmFja0NvbXBvc2l0aW9uRGF0YSkge1xuXHQgICAgLy8gVGhlIGN1cnJlbnQgY29tcG9zaXRpb24gaXMgc3RvcmVkIHN0YXRpY2FsbHkgYW5kIG11c3Qgbm90IGJlXG5cdCAgICAvLyBvdmVyd3JpdHRlbiB3aGlsZSBjb21wb3NpdGlvbiBjb250aW51ZXMuXG5cdCAgICBpZiAoIWN1cnJlbnRDb21wb3NpdGlvbiAmJiBldmVudFR5cGUgPT09IGV2ZW50VHlwZXMuY29tcG9zaXRpb25TdGFydCkge1xuXHQgICAgICBjdXJyZW50Q29tcG9zaXRpb24gPSBGYWxsYmFja0NvbXBvc2l0aW9uU3RhdGUuZ2V0UG9vbGVkKHRvcExldmVsVGFyZ2V0KTtcblx0ICAgIH0gZWxzZSBpZiAoZXZlbnRUeXBlID09PSBldmVudFR5cGVzLmNvbXBvc2l0aW9uRW5kKSB7XG5cdCAgICAgIGlmIChjdXJyZW50Q29tcG9zaXRpb24pIHtcblx0ICAgICAgICBmYWxsYmFja0RhdGEgPSBjdXJyZW50Q29tcG9zaXRpb24uZ2V0RGF0YSgpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICB2YXIgZXZlbnQgPSBTeW50aGV0aWNDb21wb3NpdGlvbkV2ZW50LmdldFBvb2xlZChldmVudFR5cGUsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG5cdFxuXHQgIGlmIChmYWxsYmFja0RhdGEpIHtcblx0ICAgIC8vIEluamVjdCBkYXRhIGdlbmVyYXRlZCBmcm9tIGZhbGxiYWNrIHBhdGggaW50byB0aGUgc3ludGhldGljIGV2ZW50LlxuXHQgICAgLy8gVGhpcyBtYXRjaGVzIHRoZSBwcm9wZXJ0eSBvZiBuYXRpdmUgQ29tcG9zaXRpb25FdmVudEludGVyZmFjZS5cblx0ICAgIGV2ZW50LmRhdGEgPSBmYWxsYmFja0RhdGE7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBjdXN0b21EYXRhID0gZ2V0RGF0YUZyb21DdXN0b21FdmVudChuYXRpdmVFdmVudCk7XG5cdCAgICBpZiAoY3VzdG9tRGF0YSAhPT0gbnVsbCkge1xuXHQgICAgICBldmVudC5kYXRhID0gY3VzdG9tRGF0YTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIEV2ZW50UHJvcGFnYXRvcnMuYWNjdW11bGF0ZVR3b1BoYXNlRGlzcGF0Y2hlcyhldmVudCk7XG5cdCAgcmV0dXJuIGV2ZW50O1xuXHR9XG5cdFxuXHQvKipcblx0ICogQHBhcmFtIHtzdHJpbmd9IHRvcExldmVsVHlwZSBSZWNvcmQgZnJvbSBgRXZlbnRDb25zdGFudHNgLlxuXHQgKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG5cdCAqIEByZXR1cm4gez9zdHJpbmd9IFRoZSBzdHJpbmcgY29ycmVzcG9uZGluZyB0byB0aGlzIGBiZWZvcmVJbnB1dGAgZXZlbnQuXG5cdCAqL1xuXHRmdW5jdGlvbiBnZXROYXRpdmVCZWZvcmVJbnB1dENoYXJzKHRvcExldmVsVHlwZSwgbmF0aXZlRXZlbnQpIHtcblx0ICBzd2l0Y2ggKHRvcExldmVsVHlwZSkge1xuXHQgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcENvbXBvc2l0aW9uRW5kOlxuXHQgICAgICByZXR1cm4gZ2V0RGF0YUZyb21DdXN0b21FdmVudChuYXRpdmVFdmVudCk7XG5cdCAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wS2V5UHJlc3M6XG5cdCAgICAgIC8qKlxuXHQgICAgICAgKiBJZiBuYXRpdmUgYHRleHRJbnB1dGAgZXZlbnRzIGFyZSBhdmFpbGFibGUsIG91ciBnb2FsIGlzIHRvIG1ha2Vcblx0ICAgICAgICogdXNlIG9mIHRoZW0uIEhvd2V2ZXIsIHRoZXJlIGlzIGEgc3BlY2lhbCBjYXNlOiB0aGUgc3BhY2ViYXIga2V5LlxuXHQgICAgICAgKiBJbiBXZWJraXQsIHByZXZlbnRpbmcgZGVmYXVsdCBvbiBhIHNwYWNlYmFyIGB0ZXh0SW5wdXRgIGV2ZW50XG5cdCAgICAgICAqIGNhbmNlbHMgY2hhcmFjdGVyIGluc2VydGlvbiwgYnV0IGl0ICphbHNvKiBjYXVzZXMgdGhlIGJyb3dzZXJcblx0ICAgICAgICogdG8gZmFsbCBiYWNrIHRvIGl0cyBkZWZhdWx0IHNwYWNlYmFyIGJlaGF2aW9yIG9mIHNjcm9sbGluZyB0aGVcblx0ICAgICAgICogcGFnZS5cblx0ICAgICAgICpcblx0ICAgICAgICogVHJhY2tpbmcgYXQ6XG5cdCAgICAgICAqIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD0zNTUxMDNcblx0ICAgICAgICpcblx0ICAgICAgICogVG8gYXZvaWQgdGhpcyBpc3N1ZSwgdXNlIHRoZSBrZXlwcmVzcyBldmVudCBhcyBpZiBubyBgdGV4dElucHV0YFxuXHQgICAgICAgKiBldmVudCBpcyBhdmFpbGFibGUuXG5cdCAgICAgICAqL1xuXHQgICAgICB2YXIgd2hpY2ggPSBuYXRpdmVFdmVudC53aGljaDtcblx0ICAgICAgaWYgKHdoaWNoICE9PSBTUEFDRUJBUl9DT0RFKSB7XG5cdCAgICAgICAgcmV0dXJuIG51bGw7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGhhc1NwYWNlS2V5cHJlc3MgPSB0cnVlO1xuXHQgICAgICByZXR1cm4gU1BBQ0VCQVJfQ0hBUjtcblx0XG5cdCAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wVGV4dElucHV0OlxuXHQgICAgICAvLyBSZWNvcmQgdGhlIGNoYXJhY3RlcnMgdG8gYmUgYWRkZWQgdG8gdGhlIERPTS5cblx0ICAgICAgdmFyIGNoYXJzID0gbmF0aXZlRXZlbnQuZGF0YTtcblx0XG5cdCAgICAgIC8vIElmIGl0J3MgYSBzcGFjZWJhciBjaGFyYWN0ZXIsIGFzc3VtZSB0aGF0IHdlIGhhdmUgYWxyZWFkeSBoYW5kbGVkXG5cdCAgICAgIC8vIGl0IGF0IHRoZSBrZXlwcmVzcyBsZXZlbCBhbmQgYmFpbCBpbW1lZGlhdGVseS4gQW5kcm9pZCBDaHJvbWVcblx0ICAgICAgLy8gZG9lc24ndCBnaXZlIHVzIGtleWNvZGVzLCBzbyB3ZSBuZWVkIHRvIGJsYWNrbGlzdCBpdC5cblx0ICAgICAgaWYgKGNoYXJzID09PSBTUEFDRUJBUl9DSEFSICYmIGhhc1NwYWNlS2V5cHJlc3MpIHtcblx0ICAgICAgICByZXR1cm4gbnVsbDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIGNoYXJzO1xuXHRcblx0ICAgIGRlZmF1bHQ6XG5cdCAgICAgIC8vIEZvciBvdGhlciBuYXRpdmUgZXZlbnQgdHlwZXMsIGRvIG5vdGhpbmcuXG5cdCAgICAgIHJldHVybiBudWxsO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEZvciBicm93c2VycyB0aGF0IGRvIG5vdCBwcm92aWRlIHRoZSBgdGV4dElucHV0YCBldmVudCwgZXh0cmFjdCB0aGVcblx0ICogYXBwcm9wcmlhdGUgc3RyaW5nIHRvIHVzZSBmb3IgU3ludGhldGljSW5wdXRFdmVudC5cblx0ICpcblx0ICogQHBhcmFtIHtzdHJpbmd9IHRvcExldmVsVHlwZSBSZWNvcmQgZnJvbSBgRXZlbnRDb25zdGFudHNgLlxuXHQgKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG5cdCAqIEByZXR1cm4gez9zdHJpbmd9IFRoZSBmYWxsYmFjayBzdHJpbmcgZm9yIHRoaXMgYGJlZm9yZUlucHV0YCBldmVudC5cblx0ICovXG5cdGZ1bmN0aW9uIGdldEZhbGxiYWNrQmVmb3JlSW5wdXRDaGFycyh0b3BMZXZlbFR5cGUsIG5hdGl2ZUV2ZW50KSB7XG5cdCAgLy8gSWYgd2UgYXJlIGN1cnJlbnRseSBjb21wb3NpbmcgKElNRSkgYW5kIHVzaW5nIGEgZmFsbGJhY2sgdG8gZG8gc28sXG5cdCAgLy8gdHJ5IHRvIGV4dHJhY3QgdGhlIGNvbXBvc2VkIGNoYXJhY3RlcnMgZnJvbSB0aGUgZmFsbGJhY2sgb2JqZWN0LlxuXHQgIGlmIChjdXJyZW50Q29tcG9zaXRpb24pIHtcblx0ICAgIGlmICh0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wQ29tcG9zaXRpb25FbmQgfHwgaXNGYWxsYmFja0NvbXBvc2l0aW9uRW5kKHRvcExldmVsVHlwZSwgbmF0aXZlRXZlbnQpKSB7XG5cdCAgICAgIHZhciBjaGFycyA9IGN1cnJlbnRDb21wb3NpdGlvbi5nZXREYXRhKCk7XG5cdCAgICAgIEZhbGxiYWNrQ29tcG9zaXRpb25TdGF0ZS5yZWxlYXNlKGN1cnJlbnRDb21wb3NpdGlvbik7XG5cdCAgICAgIGN1cnJlbnRDb21wb3NpdGlvbiA9IG51bGw7XG5cdCAgICAgIHJldHVybiBjaGFycztcblx0ICAgIH1cblx0ICAgIHJldHVybiBudWxsO1xuXHQgIH1cblx0XG5cdCAgc3dpdGNoICh0b3BMZXZlbFR5cGUpIHtcblx0ICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BQYXN0ZTpcblx0ICAgICAgLy8gSWYgYSBwYXN0ZSBldmVudCBvY2N1cnMgYWZ0ZXIgYSBrZXlwcmVzcywgdGhyb3cgb3V0IHRoZSBpbnB1dFxuXHQgICAgICAvLyBjaGFycy4gUGFzdGUgZXZlbnRzIHNob3VsZCBub3QgbGVhZCB0byBCZWZvcmVJbnB1dCBldmVudHMuXG5cdCAgICAgIHJldHVybiBudWxsO1xuXHQgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEtleVByZXNzOlxuXHQgICAgICAvKipcblx0ICAgICAgICogQXMgb2YgdjI3LCBGaXJlZm94IG1heSBmaXJlIGtleXByZXNzIGV2ZW50cyBldmVuIHdoZW4gbm8gY2hhcmFjdGVyXG5cdCAgICAgICAqIHdpbGwgYmUgaW5zZXJ0ZWQuIEEgZmV3IHBvc3NpYmlsaXRpZXM6XG5cdCAgICAgICAqXG5cdCAgICAgICAqIC0gYHdoaWNoYCBpcyBgMGAuIEFycm93IGtleXMsIEVzYyBrZXksIGV0Yy5cblx0ICAgICAgICpcblx0ICAgICAgICogLSBgd2hpY2hgIGlzIHRoZSBwcmVzc2VkIGtleSBjb2RlLCBidXQgbm8gY2hhciBpcyBhdmFpbGFibGUuXG5cdCAgICAgICAqICAgRXg6ICdBbHRHciArIGRgIGluIFBvbGlzaC4gVGhlcmUgaXMgbm8gbW9kaWZpZWQgY2hhcmFjdGVyIGZvclxuXHQgICAgICAgKiAgIHRoaXMga2V5IGNvbWJpbmF0aW9uIGFuZCBubyBjaGFyYWN0ZXIgaXMgaW5zZXJ0ZWQgaW50byB0aGVcblx0ICAgICAgICogICBkb2N1bWVudCwgYnV0IEZGIGZpcmVzIHRoZSBrZXlwcmVzcyBmb3IgY2hhciBjb2RlIGAxMDBgIGFueXdheS5cblx0ICAgICAgICogICBObyBgaW5wdXRgIGV2ZW50IHdpbGwgb2NjdXIuXG5cdCAgICAgICAqXG5cdCAgICAgICAqIC0gYHdoaWNoYCBpcyB0aGUgcHJlc3NlZCBrZXkgY29kZSwgYnV0IGEgY29tbWFuZCBjb21iaW5hdGlvbiBpc1xuXHQgICAgICAgKiAgIGJlaW5nIHVzZWQuIEV4OiBgQ21kK0NgLiBObyBjaGFyYWN0ZXIgaXMgaW5zZXJ0ZWQsIGFuZCBub1xuXHQgICAgICAgKiAgIGBpbnB1dGAgZXZlbnQgd2lsbCBvY2N1ci5cblx0ICAgICAgICovXG5cdCAgICAgIGlmIChuYXRpdmVFdmVudC53aGljaCAmJiAhaXNLZXlwcmVzc0NvbW1hbmQobmF0aXZlRXZlbnQpKSB7XG5cdCAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUobmF0aXZlRXZlbnQud2hpY2gpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBudWxsO1xuXHQgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcENvbXBvc2l0aW9uRW5kOlxuXHQgICAgICByZXR1cm4gdXNlRmFsbGJhY2tDb21wb3NpdGlvbkRhdGEgPyBudWxsIDogbmF0aXZlRXZlbnQuZGF0YTtcblx0ICAgIGRlZmF1bHQ6XG5cdCAgICAgIHJldHVybiBudWxsO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEV4dHJhY3QgYSBTeW50aGV0aWNJbnB1dEV2ZW50IGZvciBgYmVmb3JlSW5wdXRgLCBiYXNlZCBvbiBlaXRoZXIgbmF0aXZlXG5cdCAqIGB0ZXh0SW5wdXRgIG9yIGZhbGxiYWNrIGJlaGF2aW9yLlxuXHQgKlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlIFJlY29yZCBmcm9tIGBFdmVudENvbnN0YW50c2AuXG5cdCAqIEBwYXJhbSB7RE9NRXZlbnRUYXJnZXR9IHRvcExldmVsVGFyZ2V0IFRoZSBsaXN0ZW5pbmcgY29tcG9uZW50IHJvb3Qgbm9kZS5cblx0ICogQHBhcmFtIHtzdHJpbmd9IHRvcExldmVsVGFyZ2V0SUQgSUQgb2YgYHRvcExldmVsVGFyZ2V0YC5cblx0ICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuXHQgKiBAcmV0dXJuIHs/b2JqZWN0fSBBIFN5bnRoZXRpY0lucHV0RXZlbnQuXG5cdCAqL1xuXHRmdW5jdGlvbiBleHRyYWN0QmVmb3JlSW5wdXRFdmVudCh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElELCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpIHtcblx0ICB2YXIgY2hhcnM7XG5cdFxuXHQgIGlmIChjYW5Vc2VUZXh0SW5wdXRFdmVudCkge1xuXHQgICAgY2hhcnMgPSBnZXROYXRpdmVCZWZvcmVJbnB1dENoYXJzKHRvcExldmVsVHlwZSwgbmF0aXZlRXZlbnQpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBjaGFycyA9IGdldEZhbGxiYWNrQmVmb3JlSW5wdXRDaGFycyh0b3BMZXZlbFR5cGUsIG5hdGl2ZUV2ZW50KTtcblx0ICB9XG5cdFxuXHQgIC8vIElmIG5vIGNoYXJhY3RlcnMgYXJlIGJlaW5nIGluc2VydGVkLCBubyBCZWZvcmVJbnB1dCBldmVudCBzaG91bGRcblx0ICAvLyBiZSBmaXJlZC5cblx0ICBpZiAoIWNoYXJzKSB7XG5cdCAgICByZXR1cm4gbnVsbDtcblx0ICB9XG5cdFxuXHQgIHZhciBldmVudCA9IFN5bnRoZXRpY0lucHV0RXZlbnQuZ2V0UG9vbGVkKGV2ZW50VHlwZXMuYmVmb3JlSW5wdXQsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG5cdFxuXHQgIGV2ZW50LmRhdGEgPSBjaGFycztcblx0ICBFdmVudFByb3BhZ2F0b3JzLmFjY3VtdWxhdGVUd29QaGFzZURpc3BhdGNoZXMoZXZlbnQpO1xuXHQgIHJldHVybiBldmVudDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENyZWF0ZSBhbiBgb25CZWZvcmVJbnB1dGAgZXZlbnQgdG8gbWF0Y2hcblx0ICogaHR0cDovL3d3dy53My5vcmcvVFIvMjAxMy9XRC1ET00tTGV2ZWwtMy1FdmVudHMtMjAxMzExMDUvI2V2ZW50cy1pbnB1dGV2ZW50cy5cblx0ICpcblx0ICogVGhpcyBldmVudCBwbHVnaW4gaXMgYmFzZWQgb24gdGhlIG5hdGl2ZSBgdGV4dElucHV0YCBldmVudFxuXHQgKiBhdmFpbGFibGUgaW4gQ2hyb21lLCBTYWZhcmksIE9wZXJhLCBhbmQgSUUuIFRoaXMgZXZlbnQgZmlyZXMgYWZ0ZXJcblx0ICogYG9uS2V5UHJlc3NgIGFuZCBgb25Db21wb3NpdGlvbkVuZGAsIGJ1dCBiZWZvcmUgYG9uSW5wdXRgLlxuXHQgKlxuXHQgKiBgYmVmb3JlSW5wdXRgIGlzIHNwZWMnZCBidXQgbm90IGltcGxlbWVudGVkIGluIGFueSBicm93c2VycywgYW5kXG5cdCAqIHRoZSBgaW5wdXRgIGV2ZW50IGRvZXMgbm90IHByb3ZpZGUgYW55IHVzZWZ1bCBpbmZvcm1hdGlvbiBhYm91dCB3aGF0IGhhc1xuXHQgKiBhY3R1YWxseSBiZWVuIGFkZGVkLCBjb250cmFyeSB0byB0aGUgc3BlYy4gVGh1cywgYHRleHRJbnB1dGAgaXMgdGhlIGJlc3Rcblx0ICogYXZhaWxhYmxlIGV2ZW50IHRvIGlkZW50aWZ5IHRoZSBjaGFyYWN0ZXJzIHRoYXQgaGF2ZSBhY3R1YWxseSBiZWVuIGluc2VydGVkXG5cdCAqIGludG8gdGhlIHRhcmdldCBub2RlLlxuXHQgKlxuXHQgKiBUaGlzIHBsdWdpbiBpcyBhbHNvIHJlc3BvbnNpYmxlIGZvciBlbWl0dGluZyBgY29tcG9zaXRpb25gIGV2ZW50cywgdGh1c1xuXHQgKiBhbGxvd2luZyB1cyB0byBzaGFyZSBjb21wb3NpdGlvbiBmYWxsYmFjayBjb2RlIGZvciBib3RoIGBiZWZvcmVJbnB1dGAgYW5kXG5cdCAqIGBjb21wb3NpdGlvbmAgZXZlbnQgdHlwZXMuXG5cdCAqL1xuXHR2YXIgQmVmb3JlSW5wdXRFdmVudFBsdWdpbiA9IHtcblx0XG5cdCAgZXZlbnRUeXBlczogZXZlbnRUeXBlcyxcblx0XG5cdCAgLyoqXG5cdCAgICogQHBhcmFtIHtzdHJpbmd9IHRvcExldmVsVHlwZSBSZWNvcmQgZnJvbSBgRXZlbnRDb25zdGFudHNgLlxuXHQgICAqIEBwYXJhbSB7RE9NRXZlbnRUYXJnZXR9IHRvcExldmVsVGFyZ2V0IFRoZSBsaXN0ZW5pbmcgY29tcG9uZW50IHJvb3Qgbm9kZS5cblx0ICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUYXJnZXRJRCBJRCBvZiBgdG9wTGV2ZWxUYXJnZXRgLlxuXHQgICAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cblx0ICAgKiBAcmV0dXJuIHsqfSBBbiBhY2N1bXVsYXRpb24gb2Ygc3ludGhldGljIGV2ZW50cy5cblx0ICAgKiBAc2VlIHtFdmVudFBsdWdpbkh1Yi5leHRyYWN0RXZlbnRzfVxuXHQgICAqL1xuXHQgIGV4dHJhY3RFdmVudHM6IGZ1bmN0aW9uICh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElELCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpIHtcblx0ICAgIHJldHVybiBbZXh0cmFjdENvbXBvc2l0aW9uRXZlbnQodG9wTGV2ZWxUeXBlLCB0b3BMZXZlbFRhcmdldCwgdG9wTGV2ZWxUYXJnZXRJRCwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KSwgZXh0cmFjdEJlZm9yZUlucHV0RXZlbnQodG9wTGV2ZWxUeXBlLCB0b3BMZXZlbFRhcmdldCwgdG9wTGV2ZWxUYXJnZXRJRCwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KV07XG5cdCAgfVxuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBCZWZvcmVJbnB1dEV2ZW50UGx1Z2luO1xuXG4vKioqLyB9KSxcbi8qIDczICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MpIHsvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIEV2ZW50UHJvcGFnYXRvcnNcblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgRXZlbnRDb25zdGFudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKTtcblx0dmFyIEV2ZW50UGx1Z2luSHViID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMSk7XG5cdFxuXHR2YXIgd2FybmluZyA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHRcblx0dmFyIGFjY3VtdWxhdGVJbnRvID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNSk7XG5cdHZhciBmb3JFYWNoQWNjdW11bGF0ZWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2KTtcblx0XG5cdHZhciBQcm9wYWdhdGlvblBoYXNlcyA9IEV2ZW50Q29uc3RhbnRzLlByb3BhZ2F0aW9uUGhhc2VzO1xuXHR2YXIgZ2V0TGlzdGVuZXIgPSBFdmVudFBsdWdpbkh1Yi5nZXRMaXN0ZW5lcjtcblx0XG5cdC8qKlxuXHQgKiBTb21lIGV2ZW50IHR5cGVzIGhhdmUgYSBub3Rpb24gb2YgZGlmZmVyZW50IHJlZ2lzdHJhdGlvbiBuYW1lcyBmb3IgZGlmZmVyZW50XG5cdCAqIFwicGhhc2VzXCIgb2YgcHJvcGFnYXRpb24uIFRoaXMgZmluZHMgbGlzdGVuZXJzIGJ5IGEgZ2l2ZW4gcGhhc2UuXG5cdCAqL1xuXHRmdW5jdGlvbiBsaXN0ZW5lckF0UGhhc2UoaWQsIGV2ZW50LCBwcm9wYWdhdGlvblBoYXNlKSB7XG5cdCAgdmFyIHJlZ2lzdHJhdGlvbk5hbWUgPSBldmVudC5kaXNwYXRjaENvbmZpZy5waGFzZWRSZWdpc3RyYXRpb25OYW1lc1twcm9wYWdhdGlvblBoYXNlXTtcblx0ICByZXR1cm4gZ2V0TGlzdGVuZXIoaWQsIHJlZ2lzdHJhdGlvbk5hbWUpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogVGFncyBhIGBTeW50aGV0aWNFdmVudGAgd2l0aCBkaXNwYXRjaGVkIGxpc3RlbmVycy4gQ3JlYXRpbmcgdGhpcyBmdW5jdGlvblxuXHQgKiBoZXJlLCBhbGxvd3MgdXMgdG8gbm90IGhhdmUgdG8gYmluZCBvciBjcmVhdGUgZnVuY3Rpb25zIGZvciBlYWNoIGV2ZW50LlxuXHQgKiBNdXRhdGluZyB0aGUgZXZlbnQncyBtZW1iZXJzIGFsbG93cyB1cyB0byBub3QgaGF2ZSB0byBjcmVhdGUgYSB3cmFwcGluZ1xuXHQgKiBcImRpc3BhdGNoXCIgb2JqZWN0IHRoYXQgcGFpcnMgdGhlIGV2ZW50IHdpdGggdGhlIGxpc3RlbmVyLlxuXHQgKi9cblx0ZnVuY3Rpb24gYWNjdW11bGF0ZURpcmVjdGlvbmFsRGlzcGF0Y2hlcyhkb21JRCwgdXB3YXJkcywgZXZlbnQpIHtcblx0ICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZG9tSUQsICdEaXNwYXRjaGluZyBpZCBtdXN0IG5vdCBiZSBudWxsJykgOiB1bmRlZmluZWQ7XG5cdCAgfVxuXHQgIHZhciBwaGFzZSA9IHVwd2FyZHMgPyBQcm9wYWdhdGlvblBoYXNlcy5idWJibGVkIDogUHJvcGFnYXRpb25QaGFzZXMuY2FwdHVyZWQ7XG5cdCAgdmFyIGxpc3RlbmVyID0gbGlzdGVuZXJBdFBoYXNlKGRvbUlELCBldmVudCwgcGhhc2UpO1xuXHQgIGlmIChsaXN0ZW5lcikge1xuXHQgICAgZXZlbnQuX2Rpc3BhdGNoTGlzdGVuZXJzID0gYWNjdW11bGF0ZUludG8oZXZlbnQuX2Rpc3BhdGNoTGlzdGVuZXJzLCBsaXN0ZW5lcik7XG5cdCAgICBldmVudC5fZGlzcGF0Y2hJRHMgPSBhY2N1bXVsYXRlSW50byhldmVudC5fZGlzcGF0Y2hJRHMsIGRvbUlEKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb2xsZWN0IGRpc3BhdGNoZXMgKG11c3QgYmUgZW50aXJlbHkgY29sbGVjdGVkIGJlZm9yZSBkaXNwYXRjaGluZyAtIHNlZSB1bml0XG5cdCAqIHRlc3RzKS4gTGF6aWx5IGFsbG9jYXRlIHRoZSBhcnJheSB0byBjb25zZXJ2ZSBtZW1vcnkuICBXZSBtdXN0IGxvb3AgdGhyb3VnaFxuXHQgKiBlYWNoIGV2ZW50IGFuZCBwZXJmb3JtIHRoZSB0cmF2ZXJzYWwgZm9yIGVhY2ggb25lLiBXZSBjYW5ub3QgcGVyZm9ybSBhXG5cdCAqIHNpbmdsZSB0cmF2ZXJzYWwgZm9yIHRoZSBlbnRpcmUgY29sbGVjdGlvbiBvZiBldmVudHMgYmVjYXVzZSBlYWNoIGV2ZW50IG1heVxuXHQgKiBoYXZlIGEgZGlmZmVyZW50IHRhcmdldC5cblx0ICovXG5cdGZ1bmN0aW9uIGFjY3VtdWxhdGVUd29QaGFzZURpc3BhdGNoZXNTaW5nbGUoZXZlbnQpIHtcblx0ICBpZiAoZXZlbnQgJiYgZXZlbnQuZGlzcGF0Y2hDb25maWcucGhhc2VkUmVnaXN0cmF0aW9uTmFtZXMpIHtcblx0ICAgIEV2ZW50UGx1Z2luSHViLmluamVjdGlvbi5nZXRJbnN0YW5jZUhhbmRsZSgpLnRyYXZlcnNlVHdvUGhhc2UoZXZlbnQuZGlzcGF0Y2hNYXJrZXIsIGFjY3VtdWxhdGVEaXJlY3Rpb25hbERpc3BhdGNoZXMsIGV2ZW50KTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBTYW1lIGFzIGBhY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzU2luZ2xlYCwgYnV0IHNraXBzIG92ZXIgdGhlIHRhcmdldElELlxuXHQgKi9cblx0ZnVuY3Rpb24gYWNjdW11bGF0ZVR3b1BoYXNlRGlzcGF0Y2hlc1NpbmdsZVNraXBUYXJnZXQoZXZlbnQpIHtcblx0ICBpZiAoZXZlbnQgJiYgZXZlbnQuZGlzcGF0Y2hDb25maWcucGhhc2VkUmVnaXN0cmF0aW9uTmFtZXMpIHtcblx0ICAgIEV2ZW50UGx1Z2luSHViLmluamVjdGlvbi5nZXRJbnN0YW5jZUhhbmRsZSgpLnRyYXZlcnNlVHdvUGhhc2VTa2lwVGFyZ2V0KGV2ZW50LmRpc3BhdGNoTWFya2VyLCBhY2N1bXVsYXRlRGlyZWN0aW9uYWxEaXNwYXRjaGVzLCBldmVudCk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQWNjdW11bGF0ZXMgd2l0aG91dCByZWdhcmQgdG8gZGlyZWN0aW9uLCBkb2VzIG5vdCBsb29rIGZvciBwaGFzZWRcblx0ICogcmVnaXN0cmF0aW9uIG5hbWVzLiBTYW1lIGFzIGBhY2N1bXVsYXRlRGlyZWN0RGlzcGF0Y2hlc1NpbmdsZWAgYnV0IHdpdGhvdXRcblx0ICogcmVxdWlyaW5nIHRoYXQgdGhlIGBkaXNwYXRjaE1hcmtlcmAgYmUgdGhlIHNhbWUgYXMgdGhlIGRpc3BhdGNoZWQgSUQuXG5cdCAqL1xuXHRmdW5jdGlvbiBhY2N1bXVsYXRlRGlzcGF0Y2hlcyhpZCwgaWdub3JlZERpcmVjdGlvbiwgZXZlbnQpIHtcblx0ICBpZiAoZXZlbnQgJiYgZXZlbnQuZGlzcGF0Y2hDb25maWcucmVnaXN0cmF0aW9uTmFtZSkge1xuXHQgICAgdmFyIHJlZ2lzdHJhdGlvbk5hbWUgPSBldmVudC5kaXNwYXRjaENvbmZpZy5yZWdpc3RyYXRpb25OYW1lO1xuXHQgICAgdmFyIGxpc3RlbmVyID0gZ2V0TGlzdGVuZXIoaWQsIHJlZ2lzdHJhdGlvbk5hbWUpO1xuXHQgICAgaWYgKGxpc3RlbmVyKSB7XG5cdCAgICAgIGV2ZW50Ll9kaXNwYXRjaExpc3RlbmVycyA9IGFjY3VtdWxhdGVJbnRvKGV2ZW50Ll9kaXNwYXRjaExpc3RlbmVycywgbGlzdGVuZXIpO1xuXHQgICAgICBldmVudC5fZGlzcGF0Y2hJRHMgPSBhY2N1bXVsYXRlSW50byhldmVudC5fZGlzcGF0Y2hJRHMsIGlkKTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBY2N1bXVsYXRlcyBkaXNwYXRjaGVzIG9uIGFuIGBTeW50aGV0aWNFdmVudGAsIGJ1dCBvbmx5IGZvciB0aGVcblx0ICogYGRpc3BhdGNoTWFya2VyYC5cblx0ICogQHBhcmFtIHtTeW50aGV0aWNFdmVudH0gZXZlbnRcblx0ICovXG5cdGZ1bmN0aW9uIGFjY3VtdWxhdGVEaXJlY3REaXNwYXRjaGVzU2luZ2xlKGV2ZW50KSB7XG5cdCAgaWYgKGV2ZW50ICYmIGV2ZW50LmRpc3BhdGNoQ29uZmlnLnJlZ2lzdHJhdGlvbk5hbWUpIHtcblx0ICAgIGFjY3VtdWxhdGVEaXNwYXRjaGVzKGV2ZW50LmRpc3BhdGNoTWFya2VyLCBudWxsLCBldmVudCk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBhY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzKGV2ZW50cykge1xuXHQgIGZvckVhY2hBY2N1bXVsYXRlZChldmVudHMsIGFjY3VtdWxhdGVUd29QaGFzZURpc3BhdGNoZXNTaW5nbGUpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBhY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzU2tpcFRhcmdldChldmVudHMpIHtcblx0ICBmb3JFYWNoQWNjdW11bGF0ZWQoZXZlbnRzLCBhY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzU2luZ2xlU2tpcFRhcmdldCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFjY3VtdWxhdGVFbnRlckxlYXZlRGlzcGF0Y2hlcyhsZWF2ZSwgZW50ZXIsIGZyb21JRCwgdG9JRCkge1xuXHQgIEV2ZW50UGx1Z2luSHViLmluamVjdGlvbi5nZXRJbnN0YW5jZUhhbmRsZSgpLnRyYXZlcnNlRW50ZXJMZWF2ZShmcm9tSUQsIHRvSUQsIGFjY3VtdWxhdGVEaXNwYXRjaGVzLCBsZWF2ZSwgZW50ZXIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBhY2N1bXVsYXRlRGlyZWN0RGlzcGF0Y2hlcyhldmVudHMpIHtcblx0ICBmb3JFYWNoQWNjdW11bGF0ZWQoZXZlbnRzLCBhY2N1bXVsYXRlRGlyZWN0RGlzcGF0Y2hlc1NpbmdsZSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBIHNtYWxsIHNldCBvZiBwcm9wYWdhdGlvbiBwYXR0ZXJucywgZWFjaCBvZiB3aGljaCB3aWxsIGFjY2VwdCBhIHNtYWxsIGFtb3VudFxuXHQgKiBvZiBpbmZvcm1hdGlvbiwgYW5kIGdlbmVyYXRlIGEgc2V0IG9mIFwiZGlzcGF0Y2ggcmVhZHkgZXZlbnQgb2JqZWN0c1wiIC0gd2hpY2hcblx0ICogYXJlIHNldHMgb2YgZXZlbnRzIHRoYXQgaGF2ZSBhbHJlYWR5IGJlZW4gYW5ub3RhdGVkIHdpdGggYSBzZXQgb2YgZGlzcGF0Y2hlZFxuXHQgKiBsaXN0ZW5lciBmdW5jdGlvbnMvaWRzLiBUaGUgQVBJIGlzIGRlc2lnbmVkIHRoaXMgd2F5IHRvIGRpc2NvdXJhZ2UgdGhlc2Vcblx0ICogcHJvcGFnYXRpb24gc3RyYXRlZ2llcyBmcm9tIGFjdHVhbGx5IGV4ZWN1dGluZyB0aGUgZGlzcGF0Y2hlcywgc2luY2Ugd2Vcblx0ICogYWx3YXlzIHdhbnQgdG8gY29sbGVjdCB0aGUgZW50aXJlIHNldCBvZiBkaXNwYXRjaGVzIGJlZm9yZSBleGVjdXRpbmcgZXZlbnQgYVxuXHQgKiBzaW5nbGUgb25lLlxuXHQgKlxuXHQgKiBAY29uc3RydWN0b3IgRXZlbnRQcm9wYWdhdG9yc1xuXHQgKi9cblx0dmFyIEV2ZW50UHJvcGFnYXRvcnMgPSB7XG5cdCAgYWNjdW11bGF0ZVR3b1BoYXNlRGlzcGF0Y2hlczogYWNjdW11bGF0ZVR3b1BoYXNlRGlzcGF0Y2hlcyxcblx0ICBhY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzU2tpcFRhcmdldDogYWNjdW11bGF0ZVR3b1BoYXNlRGlzcGF0Y2hlc1NraXBUYXJnZXQsXG5cdCAgYWNjdW11bGF0ZURpcmVjdERpc3BhdGNoZXM6IGFjY3VtdWxhdGVEaXJlY3REaXNwYXRjaGVzLFxuXHQgIGFjY3VtdWxhdGVFbnRlckxlYXZlRGlzcGF0Y2hlczogYWNjdW11bGF0ZUVudGVyTGVhdmVEaXNwYXRjaGVzXG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IEV2ZW50UHJvcGFnYXRvcnM7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpKSlcblxuLyoqKi8gfSksXG4vKiA3NCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgRmFsbGJhY2tDb21wb3NpdGlvblN0YXRlXG5cdCAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIFBvb2xlZENsYXNzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Nik7XG5cdFxuXHR2YXIgYXNzaWduID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7XG5cdHZhciBnZXRUZXh0Q29udGVudEFjY2Vzc29yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3NSk7XG5cdFxuXHQvKipcblx0ICogVGhpcyBoZWxwZXIgY2xhc3Mgc3RvcmVzIGluZm9ybWF0aW9uIGFib3V0IHRleHQgY29udGVudCBvZiBhIHRhcmdldCBub2RlLFxuXHQgKiBhbGxvd2luZyBjb21wYXJpc29uIG9mIGNvbnRlbnQgYmVmb3JlIGFuZCBhZnRlciBhIGdpdmVuIGV2ZW50LlxuXHQgKlxuXHQgKiBJZGVudGlmeSB0aGUgbm9kZSB3aGVyZSBzZWxlY3Rpb24gY3VycmVudGx5IGJlZ2lucywgdGhlbiBvYnNlcnZlXG5cdCAqIGJvdGggaXRzIHRleHQgY29udGVudCBhbmQgaXRzIGN1cnJlbnQgcG9zaXRpb24gaW4gdGhlIERPTS4gU2luY2UgdGhlXG5cdCAqIGJyb3dzZXIgbWF5IG5hdGl2ZWx5IHJlcGxhY2UgdGhlIHRhcmdldCBub2RlIGR1cmluZyBjb21wb3NpdGlvbiwgd2UgY2FuXG5cdCAqIHVzZSBpdHMgcG9zaXRpb24gdG8gZmluZCBpdHMgcmVwbGFjZW1lbnQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RE9NRXZlbnRUYXJnZXR9IHJvb3Rcblx0ICovXG5cdGZ1bmN0aW9uIEZhbGxiYWNrQ29tcG9zaXRpb25TdGF0ZShyb290KSB7XG5cdCAgdGhpcy5fcm9vdCA9IHJvb3Q7XG5cdCAgdGhpcy5fc3RhcnRUZXh0ID0gdGhpcy5nZXRUZXh0KCk7XG5cdCAgdGhpcy5fZmFsbGJhY2tUZXh0ID0gbnVsbDtcblx0fVxuXHRcblx0YXNzaWduKEZhbGxiYWNrQ29tcG9zaXRpb25TdGF0ZS5wcm90b3R5cGUsIHtcblx0ICBkZXN0cnVjdG9yOiBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLl9yb290ID0gbnVsbDtcblx0ICAgIHRoaXMuX3N0YXJ0VGV4dCA9IG51bGw7XG5cdCAgICB0aGlzLl9mYWxsYmFja1RleHQgPSBudWxsO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIEdldCBjdXJyZW50IHRleHQgb2YgaW5wdXQuXG5cdCAgICpcblx0ICAgKiBAcmV0dXJuIHtzdHJpbmd9XG5cdCAgICovXG5cdCAgZ2V0VGV4dDogZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKCd2YWx1ZScgaW4gdGhpcy5fcm9vdCkge1xuXHQgICAgICByZXR1cm4gdGhpcy5fcm9vdC52YWx1ZTtcblx0ICAgIH1cblx0ICAgIHJldHVybiB0aGlzLl9yb290W2dldFRleHRDb250ZW50QWNjZXNzb3IoKV07XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogRGV0ZXJtaW5lIHRoZSBkaWZmZXJpbmcgc3Vic3RyaW5nIGJldHdlZW4gdGhlIGluaXRpYWxseSBzdG9yZWRcblx0ICAgKiB0ZXh0IGNvbnRlbnQgYW5kIHRoZSBjdXJyZW50IGNvbnRlbnQuXG5cdCAgICpcblx0ICAgKiBAcmV0dXJuIHtzdHJpbmd9XG5cdCAgICovXG5cdCAgZ2V0RGF0YTogZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKHRoaXMuX2ZhbGxiYWNrVGV4dCkge1xuXHQgICAgICByZXR1cm4gdGhpcy5fZmFsbGJhY2tUZXh0O1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBzdGFydDtcblx0ICAgIHZhciBzdGFydFZhbHVlID0gdGhpcy5fc3RhcnRUZXh0O1xuXHQgICAgdmFyIHN0YXJ0TGVuZ3RoID0gc3RhcnRWYWx1ZS5sZW5ndGg7XG5cdCAgICB2YXIgZW5kO1xuXHQgICAgdmFyIGVuZFZhbHVlID0gdGhpcy5nZXRUZXh0KCk7XG5cdCAgICB2YXIgZW5kTGVuZ3RoID0gZW5kVmFsdWUubGVuZ3RoO1xuXHRcblx0ICAgIGZvciAoc3RhcnQgPSAwOyBzdGFydCA8IHN0YXJ0TGVuZ3RoOyBzdGFydCsrKSB7XG5cdCAgICAgIGlmIChzdGFydFZhbHVlW3N0YXJ0XSAhPT0gZW5kVmFsdWVbc3RhcnRdKSB7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICB2YXIgbWluRW5kID0gc3RhcnRMZW5ndGggLSBzdGFydDtcblx0ICAgIGZvciAoZW5kID0gMTsgZW5kIDw9IG1pbkVuZDsgZW5kKyspIHtcblx0ICAgICAgaWYgKHN0YXJ0VmFsdWVbc3RhcnRMZW5ndGggLSBlbmRdICE9PSBlbmRWYWx1ZVtlbmRMZW5ndGggLSBlbmRdKSB7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICB2YXIgc2xpY2VUYWlsID0gZW5kID4gMSA/IDEgLSBlbmQgOiB1bmRlZmluZWQ7XG5cdCAgICB0aGlzLl9mYWxsYmFja1RleHQgPSBlbmRWYWx1ZS5zbGljZShzdGFydCwgc2xpY2VUYWlsKTtcblx0ICAgIHJldHVybiB0aGlzLl9mYWxsYmFja1RleHQ7XG5cdCAgfVxuXHR9KTtcblx0XG5cdFBvb2xlZENsYXNzLmFkZFBvb2xpbmdUbyhGYWxsYmFja0NvbXBvc2l0aW9uU3RhdGUpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBGYWxsYmFja0NvbXBvc2l0aW9uU3RhdGU7XG5cbi8qKiovIH0pLFxuLyogNzUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIGdldFRleHRDb250ZW50QWNjZXNzb3Jcblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgRXhlY3V0aW9uRW52aXJvbm1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHRcblx0dmFyIGNvbnRlbnRLZXkgPSBudWxsO1xuXHRcblx0LyoqXG5cdCAqIEdldHMgdGhlIGtleSB1c2VkIHRvIGFjY2VzcyB0ZXh0IGNvbnRlbnQgb24gYSBET00gbm9kZS5cblx0ICpcblx0ICogQHJldHVybiB7P3N0cmluZ30gS2V5IHVzZWQgdG8gYWNjZXNzIHRleHQgY29udGVudC5cblx0ICogQGludGVybmFsXG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRUZXh0Q29udGVudEFjY2Vzc29yKCkge1xuXHQgIGlmICghY29udGVudEtleSAmJiBFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00pIHtcblx0ICAgIC8vIFByZWZlciB0ZXh0Q29udGVudCB0byBpbm5lclRleHQgYmVjYXVzZSBtYW55IGJyb3dzZXJzIHN1cHBvcnQgYm90aCBidXRcblx0ICAgIC8vIFNWRyA8dGV4dD4gZWxlbWVudHMgZG9uJ3Qgc3VwcG9ydCBpbm5lclRleHQgZXZlbiB3aGVuIDxkaXY+IGRvZXMuXG5cdCAgICBjb250ZW50S2V5ID0gJ3RleHRDb250ZW50JyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgPyAndGV4dENvbnRlbnQnIDogJ2lubmVyVGV4dCc7XG5cdCAgfVxuXHQgIHJldHVybiBjb250ZW50S2V5O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGdldFRleHRDb250ZW50QWNjZXNzb3I7XG5cbi8qKiovIH0pLFxuLyogNzYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIFN5bnRoZXRpY0NvbXBvc2l0aW9uRXZlbnRcblx0ICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgU3ludGhldGljRXZlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc3KTtcblx0XG5cdC8qKlxuXHQgKiBAaW50ZXJmYWNlIEV2ZW50XG5cdCAqIEBzZWUgaHR0cDovL3d3dy53My5vcmcvVFIvRE9NLUxldmVsLTMtRXZlbnRzLyNldmVudHMtY29tcG9zaXRpb25ldmVudHNcblx0ICovXG5cdHZhciBDb21wb3NpdGlvbkV2ZW50SW50ZXJmYWNlID0ge1xuXHQgIGRhdGE6IG51bGxcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBAcGFyYW0ge29iamVjdH0gZGlzcGF0Y2hDb25maWcgQ29uZmlndXJhdGlvbiB1c2VkIHRvIGRpc3BhdGNoIHRoaXMgZXZlbnQuXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBkaXNwYXRjaE1hcmtlciBNYXJrZXIgaWRlbnRpZnlpbmcgdGhlIGV2ZW50IHRhcmdldC5cblx0ICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuXHQgKiBAZXh0ZW5kcyB7U3ludGhldGljVUlFdmVudH1cblx0ICovXG5cdGZ1bmN0aW9uIFN5bnRoZXRpY0NvbXBvc2l0aW9uRXZlbnQoZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpIHtcblx0ICBTeW50aGV0aWNFdmVudC5jYWxsKHRoaXMsIGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcblx0fVxuXHRcblx0U3ludGhldGljRXZlbnQuYXVnbWVudENsYXNzKFN5bnRoZXRpY0NvbXBvc2l0aW9uRXZlbnQsIENvbXBvc2l0aW9uRXZlbnRJbnRlcmZhY2UpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBTeW50aGV0aWNDb21wb3NpdGlvbkV2ZW50O1xuXG4vKioqLyB9KSxcbi8qIDc3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MpIHsvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIFN5bnRoZXRpY0V2ZW50XG5cdCAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIFBvb2xlZENsYXNzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Nik7XG5cdFxuXHR2YXIgYXNzaWduID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7XG5cdHZhciBlbXB0eUZ1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdHZhciB3YXJuaW5nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cdFxuXHQvKipcblx0ICogQGludGVyZmFjZSBFdmVudFxuXHQgKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL0RPTS1MZXZlbC0zLUV2ZW50cy9cblx0ICovXG5cdHZhciBFdmVudEludGVyZmFjZSA9IHtcblx0ICB0eXBlOiBudWxsLFxuXHQgIHRhcmdldDogbnVsbCxcblx0ICAvLyBjdXJyZW50VGFyZ2V0IGlzIHNldCB3aGVuIGRpc3BhdGNoaW5nOyBubyB1c2UgaW4gY29weWluZyBpdCBoZXJlXG5cdCAgY3VycmVudFRhcmdldDogZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc051bGwsXG5cdCAgZXZlbnRQaGFzZTogbnVsbCxcblx0ICBidWJibGVzOiBudWxsLFxuXHQgIGNhbmNlbGFibGU6IG51bGwsXG5cdCAgdGltZVN0YW1wOiBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgIHJldHVybiBldmVudC50aW1lU3RhbXAgfHwgRGF0ZS5ub3coKTtcblx0ICB9LFxuXHQgIGRlZmF1bHRQcmV2ZW50ZWQ6IG51bGwsXG5cdCAgaXNUcnVzdGVkOiBudWxsXG5cdH07XG5cdFxuXHQvKipcblx0ICogU3ludGhldGljIGV2ZW50cyBhcmUgZGlzcGF0Y2hlZCBieSBldmVudCBwbHVnaW5zLCB0eXBpY2FsbHkgaW4gcmVzcG9uc2UgdG8gYVxuXHQgKiB0b3AtbGV2ZWwgZXZlbnQgZGVsZWdhdGlvbiBoYW5kbGVyLlxuXHQgKlxuXHQgKiBUaGVzZSBzeXN0ZW1zIHNob3VsZCBnZW5lcmFsbHkgdXNlIHBvb2xpbmcgdG8gcmVkdWNlIHRoZSBmcmVxdWVuY3kgb2YgZ2FyYmFnZVxuXHQgKiBjb2xsZWN0aW9uLiBUaGUgc3lzdGVtIHNob3VsZCBjaGVjayBgaXNQZXJzaXN0ZW50YCB0byBkZXRlcm1pbmUgd2hldGhlciB0aGVcblx0ICogZXZlbnQgc2hvdWxkIGJlIHJlbGVhc2VkIGludG8gdGhlIHBvb2wgYWZ0ZXIgYmVpbmcgZGlzcGF0Y2hlZC4gVXNlcnMgdGhhdFxuXHQgKiBuZWVkIGEgcGVyc2lzdGVkIGV2ZW50IHNob3VsZCBpbnZva2UgYHBlcnNpc3RgLlxuXHQgKlxuXHQgKiBTeW50aGV0aWMgZXZlbnRzIChhbmQgc3ViY2xhc3NlcykgaW1wbGVtZW50IHRoZSBET00gTGV2ZWwgMyBFdmVudHMgQVBJIGJ5XG5cdCAqIG5vcm1hbGl6aW5nIGJyb3dzZXIgcXVpcmtzLiBTdWJjbGFzc2VzIGRvIG5vdCBuZWNlc3NhcmlseSBoYXZlIHRvIGltcGxlbWVudCBhXG5cdCAqIERPTSBpbnRlcmZhY2U7IGN1c3RvbSBhcHBsaWNhdGlvbi1zcGVjaWZpYyBldmVudHMgY2FuIGFsc28gc3ViY2xhc3MgdGhpcy5cblx0ICpcblx0ICogQHBhcmFtIHtvYmplY3R9IGRpc3BhdGNoQ29uZmlnIENvbmZpZ3VyYXRpb24gdXNlZCB0byBkaXNwYXRjaCB0aGlzIGV2ZW50LlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gZGlzcGF0Y2hNYXJrZXIgTWFya2VyIGlkZW50aWZ5aW5nIHRoZSBldmVudCB0YXJnZXQuXG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cblx0ICovXG5cdGZ1bmN0aW9uIFN5bnRoZXRpY0V2ZW50KGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KSB7XG5cdCAgdGhpcy5kaXNwYXRjaENvbmZpZyA9IGRpc3BhdGNoQ29uZmlnO1xuXHQgIHRoaXMuZGlzcGF0Y2hNYXJrZXIgPSBkaXNwYXRjaE1hcmtlcjtcblx0ICB0aGlzLm5hdGl2ZUV2ZW50ID0gbmF0aXZlRXZlbnQ7XG5cdFxuXHQgIHZhciBJbnRlcmZhY2UgPSB0aGlzLmNvbnN0cnVjdG9yLkludGVyZmFjZTtcblx0ICBmb3IgKHZhciBwcm9wTmFtZSBpbiBJbnRlcmZhY2UpIHtcblx0ICAgIGlmICghSW50ZXJmYWNlLmhhc093blByb3BlcnR5KHByb3BOYW1lKSkge1xuXHQgICAgICBjb250aW51ZTtcblx0ICAgIH1cblx0ICAgIHZhciBub3JtYWxpemUgPSBJbnRlcmZhY2VbcHJvcE5hbWVdO1xuXHQgICAgaWYgKG5vcm1hbGl6ZSkge1xuXHQgICAgICB0aGlzW3Byb3BOYW1lXSA9IG5vcm1hbGl6ZShuYXRpdmVFdmVudCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBpZiAocHJvcE5hbWUgPT09ICd0YXJnZXQnKSB7XG5cdCAgICAgICAgdGhpcy50YXJnZXQgPSBuYXRpdmVFdmVudFRhcmdldDtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aGlzW3Byb3BOYW1lXSA9IG5hdGl2ZUV2ZW50W3Byb3BOYW1lXTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgdmFyIGRlZmF1bHRQcmV2ZW50ZWQgPSBuYXRpdmVFdmVudC5kZWZhdWx0UHJldmVudGVkICE9IG51bGwgPyBuYXRpdmVFdmVudC5kZWZhdWx0UHJldmVudGVkIDogbmF0aXZlRXZlbnQucmV0dXJuVmFsdWUgPT09IGZhbHNlO1xuXHQgIGlmIChkZWZhdWx0UHJldmVudGVkKSB7XG5cdCAgICB0aGlzLmlzRGVmYXVsdFByZXZlbnRlZCA9IGVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNUcnVlO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB0aGlzLmlzRGVmYXVsdFByZXZlbnRlZCA9IGVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNGYWxzZTtcblx0ICB9XG5cdCAgdGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZCA9IGVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNGYWxzZTtcblx0fVxuXHRcblx0YXNzaWduKFN5bnRoZXRpY0V2ZW50LnByb3RvdHlwZSwge1xuXHRcblx0ICBwcmV2ZW50RGVmYXVsdDogZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpcy5kZWZhdWx0UHJldmVudGVkID0gdHJ1ZTtcblx0ICAgIHZhciBldmVudCA9IHRoaXMubmF0aXZlRXZlbnQ7XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhldmVudCwgJ1RoaXMgc3ludGhldGljIGV2ZW50IGlzIHJldXNlZCBmb3IgcGVyZm9ybWFuY2UgcmVhc29ucy4gSWYgeW91XFwncmUgJyArICdzZWVpbmcgdGhpcywgeW91XFwncmUgY2FsbGluZyBgcHJldmVudERlZmF1bHRgIG9uIGEgJyArICdyZWxlYXNlZC9udWxsaWZpZWQgc3ludGhldGljIGV2ZW50LiBUaGlzIGlzIGEgbm8tb3AuIFNlZSAnICsgJ2h0dHBzOi8vZmIubWUvcmVhY3QtZXZlbnQtcG9vbGluZyBmb3IgbW9yZSBpbmZvcm1hdGlvbi4nKSA6IHVuZGVmaW5lZDtcblx0ICAgIH1cblx0ICAgIGlmICghZXZlbnQpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChldmVudC5wcmV2ZW50RGVmYXVsdCkge1xuXHQgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZXZlbnQucmV0dXJuVmFsdWUgPSBmYWxzZTtcblx0ICAgIH1cblx0ICAgIHRoaXMuaXNEZWZhdWx0UHJldmVudGVkID0gZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc1RydWU7XG5cdCAgfSxcblx0XG5cdCAgc3RvcFByb3BhZ2F0aW9uOiBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgZXZlbnQgPSB0aGlzLm5hdGl2ZUV2ZW50O1xuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZXZlbnQsICdUaGlzIHN5bnRoZXRpYyBldmVudCBpcyByZXVzZWQgZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMuIElmIHlvdVxcJ3JlICcgKyAnc2VlaW5nIHRoaXMsIHlvdVxcJ3JlIGNhbGxpbmcgYHN0b3BQcm9wYWdhdGlvbmAgb24gYSAnICsgJ3JlbGVhc2VkL251bGxpZmllZCBzeW50aGV0aWMgZXZlbnQuIFRoaXMgaXMgYSBuby1vcC4gU2VlICcgKyAnaHR0cHM6Ly9mYi5tZS9yZWFjdC1ldmVudC1wb29saW5nIGZvciBtb3JlIGluZm9ybWF0aW9uLicpIDogdW5kZWZpbmVkO1xuXHQgICAgfVxuXHQgICAgaWYgKCFldmVudCkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKGV2ZW50LnN0b3BQcm9wYWdhdGlvbikge1xuXHQgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGV2ZW50LmNhbmNlbEJ1YmJsZSA9IHRydWU7XG5cdCAgICB9XG5cdCAgICB0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkID0gZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc1RydWU7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogV2UgcmVsZWFzZSBhbGwgZGlzcGF0Y2hlZCBgU3ludGhldGljRXZlbnRgcyBhZnRlciBlYWNoIGV2ZW50IGxvb3AsIGFkZGluZ1xuXHQgICAqIHRoZW0gYmFjayBpbnRvIHRoZSBwb29sLiBUaGlzIGFsbG93cyBhIHdheSB0byBob2xkIG9udG8gYSByZWZlcmVuY2UgdGhhdFxuXHQgICAqIHdvbid0IGJlIGFkZGVkIGJhY2sgaW50byB0aGUgcG9vbC5cblx0ICAgKi9cblx0ICBwZXJzaXN0OiBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLmlzUGVyc2lzdGVudCA9IGVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNUcnVlO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIENoZWNrcyBpZiB0aGlzIGV2ZW50IHNob3VsZCBiZSByZWxlYXNlZCBiYWNrIGludG8gdGhlIHBvb2wuXG5cdCAgICpcblx0ICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoaXMgc2hvdWxkIG5vdCBiZSByZWxlYXNlZCwgZmFsc2Ugb3RoZXJ3aXNlLlxuXHQgICAqL1xuXHQgIGlzUGVyc2lzdGVudDogZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc0ZhbHNlLFxuXHRcblx0ICAvKipcblx0ICAgKiBgUG9vbGVkQ2xhc3NgIGxvb2tzIGZvciBgZGVzdHJ1Y3RvcmAgb24gZWFjaCBpbnN0YW5jZSBpdCByZWxlYXNlcy5cblx0ICAgKi9cblx0ICBkZXN0cnVjdG9yOiBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgSW50ZXJmYWNlID0gdGhpcy5jb25zdHJ1Y3Rvci5JbnRlcmZhY2U7XG5cdCAgICBmb3IgKHZhciBwcm9wTmFtZSBpbiBJbnRlcmZhY2UpIHtcblx0ICAgICAgdGhpc1twcm9wTmFtZV0gPSBudWxsO1xuXHQgICAgfVxuXHQgICAgdGhpcy5kaXNwYXRjaENvbmZpZyA9IG51bGw7XG5cdCAgICB0aGlzLmRpc3BhdGNoTWFya2VyID0gbnVsbDtcblx0ICAgIHRoaXMubmF0aXZlRXZlbnQgPSBudWxsO1xuXHQgIH1cblx0XG5cdH0pO1xuXHRcblx0U3ludGhldGljRXZlbnQuSW50ZXJmYWNlID0gRXZlbnRJbnRlcmZhY2U7XG5cdFxuXHQvKipcblx0ICogSGVscGVyIHRvIHJlZHVjZSBib2lsZXJwbGF0ZSB3aGVuIGNyZWF0aW5nIHN1YmNsYXNzZXMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb259IENsYXNzXG5cdCAqIEBwYXJhbSB7P29iamVjdH0gSW50ZXJmYWNlXG5cdCAqL1xuXHRTeW50aGV0aWNFdmVudC5hdWdtZW50Q2xhc3MgPSBmdW5jdGlvbiAoQ2xhc3MsIEludGVyZmFjZSkge1xuXHQgIHZhciBTdXBlciA9IHRoaXM7XG5cdFxuXHQgIHZhciBwcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFN1cGVyLnByb3RvdHlwZSk7XG5cdCAgYXNzaWduKHByb3RvdHlwZSwgQ2xhc3MucHJvdG90eXBlKTtcblx0ICBDbGFzcy5wcm90b3R5cGUgPSBwcm90b3R5cGU7XG5cdCAgQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ2xhc3M7XG5cdFxuXHQgIENsYXNzLkludGVyZmFjZSA9IGFzc2lnbih7fSwgU3VwZXIuSW50ZXJmYWNlLCBJbnRlcmZhY2UpO1xuXHQgIENsYXNzLmF1Z21lbnRDbGFzcyA9IFN1cGVyLmF1Z21lbnRDbGFzcztcblx0XG5cdCAgUG9vbGVkQ2xhc3MuYWRkUG9vbGluZ1RvKENsYXNzLCBQb29sZWRDbGFzcy5mb3VyQXJndW1lbnRQb29sZXIpO1xuXHR9O1xuXHRcblx0UG9vbGVkQ2xhc3MuYWRkUG9vbGluZ1RvKFN5bnRoZXRpY0V2ZW50LCBQb29sZWRDbGFzcy5mb3VyQXJndW1lbnRQb29sZXIpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBTeW50aGV0aWNFdmVudDtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oNCkpKVxuXG4vKioqLyB9KSxcbi8qIDc4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBTeW50aGV0aWNJbnB1dEV2ZW50XG5cdCAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIFN5bnRoZXRpY0V2ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Nyk7XG5cdFxuXHQvKipcblx0ICogQGludGVyZmFjZSBFdmVudFxuXHQgKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSLzIwMTMvV0QtRE9NLUxldmVsLTMtRXZlbnRzLTIwMTMxMTA1XG5cdCAqICAgICAgLyNldmVudHMtaW5wdXRldmVudHNcblx0ICovXG5cdHZhciBJbnB1dEV2ZW50SW50ZXJmYWNlID0ge1xuXHQgIGRhdGE6IG51bGxcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBAcGFyYW0ge29iamVjdH0gZGlzcGF0Y2hDb25maWcgQ29uZmlndXJhdGlvbiB1c2VkIHRvIGRpc3BhdGNoIHRoaXMgZXZlbnQuXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBkaXNwYXRjaE1hcmtlciBNYXJrZXIgaWRlbnRpZnlpbmcgdGhlIGV2ZW50IHRhcmdldC5cblx0ICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuXHQgKiBAZXh0ZW5kcyB7U3ludGhldGljVUlFdmVudH1cblx0ICovXG5cdGZ1bmN0aW9uIFN5bnRoZXRpY0lucHV0RXZlbnQoZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpIHtcblx0ICBTeW50aGV0aWNFdmVudC5jYWxsKHRoaXMsIGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcblx0fVxuXHRcblx0U3ludGhldGljRXZlbnQuYXVnbWVudENsYXNzKFN5bnRoZXRpY0lucHV0RXZlbnQsIElucHV0RXZlbnRJbnRlcmZhY2UpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBTeW50aGV0aWNJbnB1dEV2ZW50O1xuXG4vKioqLyB9KSxcbi8qIDc5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBrZXlPZlxuXHQgKi9cblx0XG5cdC8qKlxuXHQgKiBBbGxvd3MgZXh0cmFjdGlvbiBvZiBhIG1pbmlmaWVkIGtleS4gTGV0J3MgdGhlIGJ1aWxkIHN5c3RlbSBtaW5pZnkga2V5c1xuXHQgKiB3aXRob3V0IGxvc2luZyB0aGUgYWJpbGl0eSB0byBkeW5hbWljYWxseSB1c2Uga2V5IHN0cmluZ3MgYXMgdmFsdWVzXG5cdCAqIHRoZW1zZWx2ZXMuIFBhc3MgaW4gYW4gb2JqZWN0IHdpdGggYSBzaW5nbGUga2V5L3ZhbCBwYWlyIGFuZCBpdCB3aWxsIHJldHVyblxuXHQgKiB5b3UgdGhlIHN0cmluZyBrZXkgb2YgdGhhdCBzaW5nbGUgcmVjb3JkLiBTdXBwb3NlIHlvdSB3YW50IHRvIGdyYWIgdGhlXG5cdCAqIHZhbHVlIGZvciBhIGtleSAnY2xhc3NOYW1lJyBpbnNpZGUgb2YgYW4gb2JqZWN0LiBLZXkvdmFsIG1pbmlmaWNhdGlvbiBtYXlcblx0ICogaGF2ZSBhbGlhc2VkIHRoYXQga2V5IHRvIGJlICd4YTEyJy4ga2V5T2Yoe2NsYXNzTmFtZTogbnVsbH0pIHdpbGwgcmV0dXJuXG5cdCAqICd4YTEyJyBpbiB0aGF0IGNhc2UuIFJlc29sdmUga2V5cyB5b3Ugd2FudCB0byB1c2Ugb25jZSBhdCBzdGFydHVwIHRpbWUsIHRoZW5cblx0ICogcmV1c2UgdGhvc2UgcmVzb2x1dGlvbnMuXG5cdCAqL1xuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdHZhciBrZXlPZiA9IGZ1bmN0aW9uIChvbmVLZXlPYmopIHtcblx0ICB2YXIga2V5O1xuXHQgIGZvciAoa2V5IGluIG9uZUtleU9iaikge1xuXHQgICAgaWYgKCFvbmVLZXlPYmouaGFzT3duUHJvcGVydHkoa2V5KSkge1xuXHQgICAgICBjb250aW51ZTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBrZXk7XG5cdCAgfVxuXHQgIHJldHVybiBudWxsO1xuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBrZXlPZjtcblxuLyoqKi8gfSksXG4vKiA4MCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgQ2hhbmdlRXZlbnRQbHVnaW5cblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgRXZlbnRDb25zdGFudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKTtcblx0dmFyIEV2ZW50UGx1Z2luSHViID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMSk7XG5cdHZhciBFdmVudFByb3BhZ2F0b3JzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Myk7XG5cdHZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdHZhciBSZWFjdFVwZGF0ZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU0KTtcblx0dmFyIFN5bnRoZXRpY0V2ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Nyk7XG5cdFxuXHR2YXIgZ2V0RXZlbnRUYXJnZXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgxKTtcblx0dmFyIGlzRXZlbnRTdXBwb3J0ZWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTtcblx0dmFyIGlzVGV4dElucHV0RWxlbWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oODIpO1xuXHR2YXIga2V5T2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc5KTtcblx0XG5cdHZhciB0b3BMZXZlbFR5cGVzID0gRXZlbnRDb25zdGFudHMudG9wTGV2ZWxUeXBlcztcblx0XG5cdHZhciBldmVudFR5cGVzID0ge1xuXHQgIGNoYW5nZToge1xuXHQgICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcblx0ICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkNoYW5nZTogbnVsbCB9KSxcblx0ICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25DaGFuZ2VDYXB0dXJlOiBudWxsIH0pXG5cdCAgICB9LFxuXHQgICAgZGVwZW5kZW5jaWVzOiBbdG9wTGV2ZWxUeXBlcy50b3BCbHVyLCB0b3BMZXZlbFR5cGVzLnRvcENoYW5nZSwgdG9wTGV2ZWxUeXBlcy50b3BDbGljaywgdG9wTGV2ZWxUeXBlcy50b3BGb2N1cywgdG9wTGV2ZWxUeXBlcy50b3BJbnB1dCwgdG9wTGV2ZWxUeXBlcy50b3BLZXlEb3duLCB0b3BMZXZlbFR5cGVzLnRvcEtleVVwLCB0b3BMZXZlbFR5cGVzLnRvcFNlbGVjdGlvbkNoYW5nZV1cblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogRm9yIElFIHNoaW1zXG5cdCAqL1xuXHR2YXIgYWN0aXZlRWxlbWVudCA9IG51bGw7XG5cdHZhciBhY3RpdmVFbGVtZW50SUQgPSBudWxsO1xuXHR2YXIgYWN0aXZlRWxlbWVudFZhbHVlID0gbnVsbDtcblx0dmFyIGFjdGl2ZUVsZW1lbnRWYWx1ZVByb3AgPSBudWxsO1xuXHRcblx0LyoqXG5cdCAqIFNFQ1RJT046IGhhbmRsZSBgY2hhbmdlYCBldmVudFxuXHQgKi9cblx0ZnVuY3Rpb24gc2hvdWxkVXNlQ2hhbmdlRXZlbnQoZWxlbSkge1xuXHQgIHZhciBub2RlTmFtZSA9IGVsZW0ubm9kZU5hbWUgJiYgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHQgIHJldHVybiBub2RlTmFtZSA9PT0gJ3NlbGVjdCcgfHwgbm9kZU5hbWUgPT09ICdpbnB1dCcgJiYgZWxlbS50eXBlID09PSAnZmlsZSc7XG5cdH1cblx0XG5cdHZhciBkb2VzQ2hhbmdlRXZlbnRCdWJibGUgPSBmYWxzZTtcblx0aWYgKEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSkge1xuXHQgIC8vIFNlZSBgaGFuZGxlQ2hhbmdlYCBjb21tZW50IGJlbG93XG5cdCAgZG9lc0NoYW5nZUV2ZW50QnViYmxlID0gaXNFdmVudFN1cHBvcnRlZCgnY2hhbmdlJykgJiYgKCEoJ2RvY3VtZW50TW9kZScgaW4gZG9jdW1lbnQpIHx8IGRvY3VtZW50LmRvY3VtZW50TW9kZSA+IDgpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYW51YWxEaXNwYXRjaENoYW5nZUV2ZW50KG5hdGl2ZUV2ZW50KSB7XG5cdCAgdmFyIGV2ZW50ID0gU3ludGhldGljRXZlbnQuZ2V0UG9vbGVkKGV2ZW50VHlwZXMuY2hhbmdlLCBhY3RpdmVFbGVtZW50SUQsIG5hdGl2ZUV2ZW50LCBnZXRFdmVudFRhcmdldChuYXRpdmVFdmVudCkpO1xuXHQgIEV2ZW50UHJvcGFnYXRvcnMuYWNjdW11bGF0ZVR3b1BoYXNlRGlzcGF0Y2hlcyhldmVudCk7XG5cdFxuXHQgIC8vIElmIGNoYW5nZSBhbmQgcHJvcGVydHljaGFuZ2UgYnViYmxlZCwgd2UnZCBqdXN0IGJpbmQgdG8gaXQgbGlrZSBhbGwgdGhlXG5cdCAgLy8gb3RoZXIgZXZlbnRzIGFuZCBoYXZlIGl0IGdvIHRocm91Z2ggUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLiBTaW5jZSBpdFxuXHQgIC8vIGRvZXNuJ3QsIHdlIG1hbnVhbGx5IGxpc3RlbiBmb3IgdGhlIGV2ZW50cyBhbmQgc28gd2UgaGF2ZSB0byBlbnF1ZXVlIGFuZFxuXHQgIC8vIHByb2Nlc3MgdGhlIGFic3RyYWN0IGV2ZW50IG1hbnVhbGx5LlxuXHQgIC8vXG5cdCAgLy8gQmF0Y2hpbmcgaXMgbmVjZXNzYXJ5IGhlcmUgaW4gb3JkZXIgdG8gZW5zdXJlIHRoYXQgYWxsIGV2ZW50IGhhbmRsZXJzIHJ1blxuXHQgIC8vIGJlZm9yZSB0aGUgbmV4dCByZXJlbmRlciAoaW5jbHVkaW5nIGV2ZW50IGhhbmRsZXJzIGF0dGFjaGVkIHRvIGFuY2VzdG9yXG5cdCAgLy8gZWxlbWVudHMgaW5zdGVhZCBvZiBkaXJlY3RseSBvbiB0aGUgaW5wdXQpLiBXaXRob3V0IHRoaXMsIGNvbnRyb2xsZWRcblx0ICAvLyBjb21wb25lbnRzIGRvbid0IHdvcmsgcHJvcGVybHkgaW4gY29uanVuY3Rpb24gd2l0aCBldmVudCBidWJibGluZyBiZWNhdXNlXG5cdCAgLy8gdGhlIGNvbXBvbmVudCBpcyByZXJlbmRlcmVkIGFuZCB0aGUgdmFsdWUgcmV2ZXJ0ZWQgYmVmb3JlIGFsbCB0aGUgZXZlbnRcblx0ICAvLyBoYW5kbGVycyBjYW4gcnVuLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0L2lzc3Vlcy83MDguXG5cdCAgUmVhY3RVcGRhdGVzLmJhdGNoZWRVcGRhdGVzKHJ1bkV2ZW50SW5CYXRjaCwgZXZlbnQpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBydW5FdmVudEluQmF0Y2goZXZlbnQpIHtcblx0ICBFdmVudFBsdWdpbkh1Yi5lbnF1ZXVlRXZlbnRzKGV2ZW50KTtcblx0ICBFdmVudFBsdWdpbkh1Yi5wcm9jZXNzRXZlbnRRdWV1ZShmYWxzZSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHN0YXJ0V2F0Y2hpbmdGb3JDaGFuZ2VFdmVudElFOCh0YXJnZXQsIHRhcmdldElEKSB7XG5cdCAgYWN0aXZlRWxlbWVudCA9IHRhcmdldDtcblx0ICBhY3RpdmVFbGVtZW50SUQgPSB0YXJnZXRJRDtcblx0ICBhY3RpdmVFbGVtZW50LmF0dGFjaEV2ZW50KCdvbmNoYW5nZScsIG1hbnVhbERpc3BhdGNoQ2hhbmdlRXZlbnQpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzdG9wV2F0Y2hpbmdGb3JDaGFuZ2VFdmVudElFOCgpIHtcblx0ICBpZiAoIWFjdGl2ZUVsZW1lbnQpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgYWN0aXZlRWxlbWVudC5kZXRhY2hFdmVudCgnb25jaGFuZ2UnLCBtYW51YWxEaXNwYXRjaENoYW5nZUV2ZW50KTtcblx0ICBhY3RpdmVFbGVtZW50ID0gbnVsbDtcblx0ICBhY3RpdmVFbGVtZW50SUQgPSBudWxsO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXRUYXJnZXRJREZvckNoYW5nZUV2ZW50KHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQpIHtcblx0ICBpZiAodG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcENoYW5nZSkge1xuXHQgICAgcmV0dXJuIHRvcExldmVsVGFyZ2V0SUQ7XG5cdCAgfVxuXHR9XG5cdGZ1bmN0aW9uIGhhbmRsZUV2ZW50c0ZvckNoYW5nZUV2ZW50SUU4KHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQpIHtcblx0ICBpZiAodG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcEZvY3VzKSB7XG5cdCAgICAvLyBzdG9wV2F0Y2hpbmcoKSBzaG91bGQgYmUgYSBub29wIGhlcmUgYnV0IHdlIGNhbGwgaXQganVzdCBpbiBjYXNlIHdlXG5cdCAgICAvLyBtaXNzZWQgYSBibHVyIGV2ZW50IHNvbWVob3cuXG5cdCAgICBzdG9wV2F0Y2hpbmdGb3JDaGFuZ2VFdmVudElFOCgpO1xuXHQgICAgc3RhcnRXYXRjaGluZ0ZvckNoYW5nZUV2ZW50SUU4KHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElEKTtcblx0ICB9IGVsc2UgaWYgKHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BCbHVyKSB7XG5cdCAgICBzdG9wV2F0Y2hpbmdGb3JDaGFuZ2VFdmVudElFOCgpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFNFQ1RJT046IGhhbmRsZSBgaW5wdXRgIGV2ZW50XG5cdCAqL1xuXHR2YXIgaXNJbnB1dEV2ZW50U3VwcG9ydGVkID0gZmFsc2U7XG5cdGlmIChFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00pIHtcblx0ICAvLyBJRTkgY2xhaW1zIHRvIHN1cHBvcnQgdGhlIGlucHV0IGV2ZW50IGJ1dCBmYWlscyB0byB0cmlnZ2VyIGl0IHdoZW5cblx0ICAvLyBkZWxldGluZyB0ZXh0LCBzbyB3ZSBpZ25vcmUgaXRzIGlucHV0IGV2ZW50c1xuXHQgIGlzSW5wdXRFdmVudFN1cHBvcnRlZCA9IGlzRXZlbnRTdXBwb3J0ZWQoJ2lucHV0JykgJiYgKCEoJ2RvY3VtZW50TW9kZScgaW4gZG9jdW1lbnQpIHx8IGRvY3VtZW50LmRvY3VtZW50TW9kZSA+IDkpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogKEZvciBvbGQgSUUuKSBSZXBsYWNlbWVudCBnZXR0ZXIvc2V0dGVyIGZvciB0aGUgYHZhbHVlYCBwcm9wZXJ0eSB0aGF0IGdldHNcblx0ICogc2V0IG9uIHRoZSBhY3RpdmUgZWxlbWVudC5cblx0ICovXG5cdHZhciBuZXdWYWx1ZVByb3AgPSB7XG5cdCAgZ2V0OiBmdW5jdGlvbiAoKSB7XG5cdCAgICByZXR1cm4gYWN0aXZlRWxlbWVudFZhbHVlUHJvcC5nZXQuY2FsbCh0aGlzKTtcblx0ICB9LFxuXHQgIHNldDogZnVuY3Rpb24gKHZhbCkge1xuXHQgICAgLy8gQ2FzdCB0byBhIHN0cmluZyBzbyB3ZSBjYW4gZG8gZXF1YWxpdHkgY2hlY2tzLlxuXHQgICAgYWN0aXZlRWxlbWVudFZhbHVlID0gJycgKyB2YWw7XG5cdCAgICBhY3RpdmVFbGVtZW50VmFsdWVQcm9wLnNldC5jYWxsKHRoaXMsIHZhbCk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIChGb3Igb2xkIElFLikgU3RhcnRzIHRyYWNraW5nIHByb3BlcnR5Y2hhbmdlIGV2ZW50cyBvbiB0aGUgcGFzc2VkLWluIGVsZW1lbnRcblx0ICogYW5kIG92ZXJyaWRlIHRoZSB2YWx1ZSBwcm9wZXJ0eSBzbyB0aGF0IHdlIGNhbiBkaXN0aW5ndWlzaCB1c2VyIGV2ZW50cyBmcm9tXG5cdCAqIHZhbHVlIGNoYW5nZXMgaW4gSlMuXG5cdCAqL1xuXHRmdW5jdGlvbiBzdGFydFdhdGNoaW5nRm9yVmFsdWVDaGFuZ2UodGFyZ2V0LCB0YXJnZXRJRCkge1xuXHQgIGFjdGl2ZUVsZW1lbnQgPSB0YXJnZXQ7XG5cdCAgYWN0aXZlRWxlbWVudElEID0gdGFyZ2V0SUQ7XG5cdCAgYWN0aXZlRWxlbWVudFZhbHVlID0gdGFyZ2V0LnZhbHVlO1xuXHQgIGFjdGl2ZUVsZW1lbnRWYWx1ZVByb3AgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldC5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsICd2YWx1ZScpO1xuXHRcblx0ICAvLyBOb3QgZ3VhcmRlZCBpbiBhIGNhbkRlZmluZVByb3BlcnR5IGNoZWNrOiBJRTggc3VwcG9ydHMgZGVmaW5lUHJvcGVydHkgb25seVxuXHQgIC8vIG9uIERPTSBlbGVtZW50c1xuXHQgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhY3RpdmVFbGVtZW50LCAndmFsdWUnLCBuZXdWYWx1ZVByb3ApO1xuXHQgIGFjdGl2ZUVsZW1lbnQuYXR0YWNoRXZlbnQoJ29ucHJvcGVydHljaGFuZ2UnLCBoYW5kbGVQcm9wZXJ0eUNoYW5nZSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiAoRm9yIG9sZCBJRS4pIFJlbW92ZXMgdGhlIGV2ZW50IGxpc3RlbmVycyBmcm9tIHRoZSBjdXJyZW50bHktdHJhY2tlZCBlbGVtZW50LFxuXHQgKiBpZiBhbnkgZXhpc3RzLlxuXHQgKi9cblx0ZnVuY3Rpb24gc3RvcFdhdGNoaW5nRm9yVmFsdWVDaGFuZ2UoKSB7XG5cdCAgaWYgKCFhY3RpdmVFbGVtZW50KSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHRcblx0ICAvLyBkZWxldGUgcmVzdG9yZXMgdGhlIG9yaWdpbmFsIHByb3BlcnR5IGRlZmluaXRpb25cblx0ICBkZWxldGUgYWN0aXZlRWxlbWVudC52YWx1ZTtcblx0ICBhY3RpdmVFbGVtZW50LmRldGFjaEV2ZW50KCdvbnByb3BlcnR5Y2hhbmdlJywgaGFuZGxlUHJvcGVydHlDaGFuZ2UpO1xuXHRcblx0ICBhY3RpdmVFbGVtZW50ID0gbnVsbDtcblx0ICBhY3RpdmVFbGVtZW50SUQgPSBudWxsO1xuXHQgIGFjdGl2ZUVsZW1lbnRWYWx1ZSA9IG51bGw7XG5cdCAgYWN0aXZlRWxlbWVudFZhbHVlUHJvcCA9IG51bGw7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiAoRm9yIG9sZCBJRS4pIEhhbmRsZXMgYSBwcm9wZXJ0eWNoYW5nZSBldmVudCwgc2VuZGluZyBhIGBjaGFuZ2VgIGV2ZW50IGlmXG5cdCAqIHRoZSB2YWx1ZSBvZiB0aGUgYWN0aXZlIGVsZW1lbnQgaGFzIGNoYW5nZWQuXG5cdCAqL1xuXHRmdW5jdGlvbiBoYW5kbGVQcm9wZXJ0eUNoYW5nZShuYXRpdmVFdmVudCkge1xuXHQgIGlmIChuYXRpdmVFdmVudC5wcm9wZXJ0eU5hbWUgIT09ICd2YWx1ZScpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgdmFyIHZhbHVlID0gbmF0aXZlRXZlbnQuc3JjRWxlbWVudC52YWx1ZTtcblx0ICBpZiAodmFsdWUgPT09IGFjdGl2ZUVsZW1lbnRWYWx1ZSkge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICBhY3RpdmVFbGVtZW50VmFsdWUgPSB2YWx1ZTtcblx0XG5cdCAgbWFudWFsRGlzcGF0Y2hDaGFuZ2VFdmVudChuYXRpdmVFdmVudCk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBJZiBhIGBjaGFuZ2VgIGV2ZW50IHNob3VsZCBiZSBmaXJlZCwgcmV0dXJucyB0aGUgdGFyZ2V0J3MgSUQuXG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRUYXJnZXRJREZvcklucHV0RXZlbnQodG9wTGV2ZWxUeXBlLCB0b3BMZXZlbFRhcmdldCwgdG9wTGV2ZWxUYXJnZXRJRCkge1xuXHQgIGlmICh0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wSW5wdXQpIHtcblx0ICAgIC8vIEluIG1vZGVybiBicm93c2VycyAoaS5lLiwgbm90IElFOCBvciBJRTkpLCB0aGUgaW5wdXQgZXZlbnQgaXMgZXhhY3RseVxuXHQgICAgLy8gd2hhdCB3ZSB3YW50IHNvIGZhbGwgdGhyb3VnaCBoZXJlIGFuZCB0cmlnZ2VyIGFuIGFic3RyYWN0IGV2ZW50XG5cdCAgICByZXR1cm4gdG9wTGV2ZWxUYXJnZXRJRDtcblx0ICB9XG5cdH1cblx0XG5cdC8vIEZvciBJRTggYW5kIElFOS5cblx0ZnVuY3Rpb24gaGFuZGxlRXZlbnRzRm9ySW5wdXRFdmVudElFKHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQpIHtcblx0ICBpZiAodG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcEZvY3VzKSB7XG5cdCAgICAvLyBJbiBJRTgsIHdlIGNhbiBjYXB0dXJlIGFsbW9zdCBhbGwgLnZhbHVlIGNoYW5nZXMgYnkgYWRkaW5nIGFcblx0ICAgIC8vIHByb3BlcnR5Y2hhbmdlIGhhbmRsZXIgYW5kIGxvb2tpbmcgZm9yIGV2ZW50cyB3aXRoIHByb3BlcnR5TmFtZVxuXHQgICAgLy8gZXF1YWwgdG8gJ3ZhbHVlJ1xuXHQgICAgLy8gSW4gSUU5LCBwcm9wZXJ0eWNoYW5nZSBmaXJlcyBmb3IgbW9zdCBpbnB1dCBldmVudHMgYnV0IGlzIGJ1Z2d5IGFuZFxuXHQgICAgLy8gZG9lc24ndCBmaXJlIHdoZW4gdGV4dCBpcyBkZWxldGVkLCBidXQgY29udmVuaWVudGx5LCBzZWxlY3Rpb25jaGFuZ2Vcblx0ICAgIC8vIGFwcGVhcnMgdG8gZmlyZSBpbiBhbGwgb2YgdGhlIHJlbWFpbmluZyBjYXNlcyBzbyB3ZSBjYXRjaCB0aG9zZSBhbmRcblx0ICAgIC8vIGZvcndhcmQgdGhlIGV2ZW50IGlmIHRoZSB2YWx1ZSBoYXMgY2hhbmdlZFxuXHQgICAgLy8gSW4gZWl0aGVyIGNhc2UsIHdlIGRvbid0IHdhbnQgdG8gY2FsbCB0aGUgZXZlbnQgaGFuZGxlciBpZiB0aGUgdmFsdWVcblx0ICAgIC8vIGlzIGNoYW5nZWQgZnJvbSBKUyBzbyB3ZSByZWRlZmluZSBhIHNldHRlciBmb3IgYC52YWx1ZWAgdGhhdCB1cGRhdGVzXG5cdCAgICAvLyBvdXIgYWN0aXZlRWxlbWVudFZhbHVlIHZhcmlhYmxlLCBhbGxvd2luZyB1cyB0byBpZ25vcmUgdGhvc2UgY2hhbmdlc1xuXHQgICAgLy9cblx0ICAgIC8vIHN0b3BXYXRjaGluZygpIHNob3VsZCBiZSBhIG5vb3AgaGVyZSBidXQgd2UgY2FsbCBpdCBqdXN0IGluIGNhc2Ugd2Vcblx0ICAgIC8vIG1pc3NlZCBhIGJsdXIgZXZlbnQgc29tZWhvdy5cblx0ICAgIHN0b3BXYXRjaGluZ0ZvclZhbHVlQ2hhbmdlKCk7XG5cdCAgICBzdGFydFdhdGNoaW5nRm9yVmFsdWVDaGFuZ2UodG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQpO1xuXHQgIH0gZWxzZSBpZiAodG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcEJsdXIpIHtcblx0ICAgIHN0b3BXYXRjaGluZ0ZvclZhbHVlQ2hhbmdlKCk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvLyBGb3IgSUU4IGFuZCBJRTkuXG5cdGZ1bmN0aW9uIGdldFRhcmdldElERm9ySW5wdXRFdmVudElFKHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQpIHtcblx0ICBpZiAodG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcFNlbGVjdGlvbkNoYW5nZSB8fCB0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wS2V5VXAgfHwgdG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcEtleURvd24pIHtcblx0ICAgIC8vIE9uIHRoZSBzZWxlY3Rpb25jaGFuZ2UgZXZlbnQsIHRoZSB0YXJnZXQgaXMganVzdCBkb2N1bWVudCB3aGljaCBpc24ndFxuXHQgICAgLy8gaGVscGZ1bCBmb3IgdXMgc28ganVzdCBjaGVjayBhY3RpdmVFbGVtZW50IGluc3RlYWQuXG5cdCAgICAvL1xuXHQgICAgLy8gOTklIG9mIHRoZSB0aW1lLCBrZXlkb3duIGFuZCBrZXl1cCBhcmVuJ3QgbmVjZXNzYXJ5LiBJRTggZmFpbHMgdG8gZmlyZVxuXHQgICAgLy8gcHJvcGVydHljaGFuZ2Ugb24gdGhlIGZpcnN0IGlucHV0IGV2ZW50IGFmdGVyIHNldHRpbmcgYHZhbHVlYCBmcm9tIGFcblx0ICAgIC8vIHNjcmlwdCBhbmQgZmlyZXMgb25seSBrZXlkb3duLCBrZXlwcmVzcywga2V5dXAuIENhdGNoaW5nIGtleXVwIHVzdWFsbHlcblx0ICAgIC8vIGdldHMgaXQgYW5kIGNhdGNoaW5nIGtleWRvd24gbGV0cyB1cyBmaXJlIGFuIGV2ZW50IGZvciB0aGUgZmlyc3Rcblx0ICAgIC8vIGtleXN0cm9rZSBpZiB1c2VyIGRvZXMgYSBrZXkgcmVwZWF0IChpdCdsbCBiZSBhIGxpdHRsZSBkZWxheWVkOiByaWdodFxuXHQgICAgLy8gYmVmb3JlIHRoZSBzZWNvbmQga2V5c3Ryb2tlKS4gT3RoZXIgaW5wdXQgbWV0aG9kcyAoZS5nLiwgcGFzdGUpIHNlZW0gdG9cblx0ICAgIC8vIGZpcmUgc2VsZWN0aW9uY2hhbmdlIG5vcm1hbGx5LlxuXHQgICAgaWYgKGFjdGl2ZUVsZW1lbnQgJiYgYWN0aXZlRWxlbWVudC52YWx1ZSAhPT0gYWN0aXZlRWxlbWVudFZhbHVlKSB7XG5cdCAgICAgIGFjdGl2ZUVsZW1lbnRWYWx1ZSA9IGFjdGl2ZUVsZW1lbnQudmFsdWU7XG5cdCAgICAgIHJldHVybiBhY3RpdmVFbGVtZW50SUQ7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogU0VDVElPTjogaGFuZGxlIGBjbGlja2AgZXZlbnRcblx0ICovXG5cdGZ1bmN0aW9uIHNob3VsZFVzZUNsaWNrRXZlbnQoZWxlbSkge1xuXHQgIC8vIFVzZSB0aGUgYGNsaWNrYCBldmVudCB0byBkZXRlY3QgY2hhbmdlcyB0byBjaGVja2JveCBhbmQgcmFkaW8gaW5wdXRzLlxuXHQgIC8vIFRoaXMgYXBwcm9hY2ggd29ya3MgYWNyb3NzIGFsbCBicm93c2Vycywgd2hlcmVhcyBgY2hhbmdlYCBkb2VzIG5vdCBmaXJlXG5cdCAgLy8gdW50aWwgYGJsdXJgIGluIElFOC5cblx0ICByZXR1cm4gZWxlbS5ub2RlTmFtZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdpbnB1dCcgJiYgKGVsZW0udHlwZSA9PT0gJ2NoZWNrYm94JyB8fCBlbGVtLnR5cGUgPT09ICdyYWRpbycpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXRUYXJnZXRJREZvckNsaWNrRXZlbnQodG9wTGV2ZWxUeXBlLCB0b3BMZXZlbFRhcmdldCwgdG9wTGV2ZWxUYXJnZXRJRCkge1xuXHQgIGlmICh0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wQ2xpY2spIHtcblx0ICAgIHJldHVybiB0b3BMZXZlbFRhcmdldElEO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFRoaXMgcGx1Z2luIGNyZWF0ZXMgYW4gYG9uQ2hhbmdlYCBldmVudCB0aGF0IG5vcm1hbGl6ZXMgY2hhbmdlIGV2ZW50c1xuXHQgKiBhY3Jvc3MgZm9ybSBlbGVtZW50cy4gVGhpcyBldmVudCBmaXJlcyBhdCBhIHRpbWUgd2hlbiBpdCdzIHBvc3NpYmxlIHRvXG5cdCAqIGNoYW5nZSB0aGUgZWxlbWVudCdzIHZhbHVlIHdpdGhvdXQgc2VlaW5nIGEgZmxpY2tlci5cblx0ICpcblx0ICogU3VwcG9ydGVkIGVsZW1lbnRzIGFyZTpcblx0ICogLSBpbnB1dCAoc2VlIGBpc1RleHRJbnB1dEVsZW1lbnRgKVxuXHQgKiAtIHRleHRhcmVhXG5cdCAqIC0gc2VsZWN0XG5cdCAqL1xuXHR2YXIgQ2hhbmdlRXZlbnRQbHVnaW4gPSB7XG5cdFxuXHQgIGV2ZW50VHlwZXM6IGV2ZW50VHlwZXMsXG5cdFxuXHQgIC8qKlxuXHQgICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFR5cGUgUmVjb3JkIGZyb20gYEV2ZW50Q29uc3RhbnRzYC5cblx0ICAgKiBAcGFyYW0ge0RPTUV2ZW50VGFyZ2V0fSB0b3BMZXZlbFRhcmdldCBUaGUgbGlzdGVuaW5nIGNvbXBvbmVudCByb290IG5vZGUuXG5cdCAgICogQHBhcmFtIHtzdHJpbmd9IHRvcExldmVsVGFyZ2V0SUQgSUQgb2YgYHRvcExldmVsVGFyZ2V0YC5cblx0ICAgKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG5cdCAgICogQHJldHVybiB7Kn0gQW4gYWNjdW11bGF0aW9uIG9mIHN5bnRoZXRpYyBldmVudHMuXG5cdCAgICogQHNlZSB7RXZlbnRQbHVnaW5IdWIuZXh0cmFjdEV2ZW50c31cblx0ICAgKi9cblx0ICBleHRyYWN0RXZlbnRzOiBmdW5jdGlvbiAodG9wTGV2ZWxUeXBlLCB0b3BMZXZlbFRhcmdldCwgdG9wTGV2ZWxUYXJnZXRJRCwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KSB7XG5cdFxuXHQgICAgdmFyIGdldFRhcmdldElERnVuYywgaGFuZGxlRXZlbnRGdW5jO1xuXHQgICAgaWYgKHNob3VsZFVzZUNoYW5nZUV2ZW50KHRvcExldmVsVGFyZ2V0KSkge1xuXHQgICAgICBpZiAoZG9lc0NoYW5nZUV2ZW50QnViYmxlKSB7XG5cdCAgICAgICAgZ2V0VGFyZ2V0SURGdW5jID0gZ2V0VGFyZ2V0SURGb3JDaGFuZ2VFdmVudDtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBoYW5kbGVFdmVudEZ1bmMgPSBoYW5kbGVFdmVudHNGb3JDaGFuZ2VFdmVudElFODtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIGlmIChpc1RleHRJbnB1dEVsZW1lbnQodG9wTGV2ZWxUYXJnZXQpKSB7XG5cdCAgICAgIGlmIChpc0lucHV0RXZlbnRTdXBwb3J0ZWQpIHtcblx0ICAgICAgICBnZXRUYXJnZXRJREZ1bmMgPSBnZXRUYXJnZXRJREZvcklucHV0RXZlbnQ7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgZ2V0VGFyZ2V0SURGdW5jID0gZ2V0VGFyZ2V0SURGb3JJbnB1dEV2ZW50SUU7XG5cdCAgICAgICAgaGFuZGxlRXZlbnRGdW5jID0gaGFuZGxlRXZlbnRzRm9ySW5wdXRFdmVudElFO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2UgaWYgKHNob3VsZFVzZUNsaWNrRXZlbnQodG9wTGV2ZWxUYXJnZXQpKSB7XG5cdCAgICAgIGdldFRhcmdldElERnVuYyA9IGdldFRhcmdldElERm9yQ2xpY2tFdmVudDtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoZ2V0VGFyZ2V0SURGdW5jKSB7XG5cdCAgICAgIHZhciB0YXJnZXRJRCA9IGdldFRhcmdldElERnVuYyh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElEKTtcblx0ICAgICAgaWYgKHRhcmdldElEKSB7XG5cdCAgICAgICAgdmFyIGV2ZW50ID0gU3ludGhldGljRXZlbnQuZ2V0UG9vbGVkKGV2ZW50VHlwZXMuY2hhbmdlLCB0YXJnZXRJRCwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcblx0ICAgICAgICBldmVudC50eXBlID0gJ2NoYW5nZSc7XG5cdCAgICAgICAgRXZlbnRQcm9wYWdhdG9ycy5hY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzKGV2ZW50KTtcblx0ICAgICAgICByZXR1cm4gZXZlbnQ7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBpZiAoaGFuZGxlRXZlbnRGdW5jKSB7XG5cdCAgICAgIGhhbmRsZUV2ZW50RnVuYyh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElEKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBDaGFuZ2VFdmVudFBsdWdpbjtcblxuLyoqKi8gfSksXG4vKiA4MSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgZ2V0RXZlbnRUYXJnZXRcblx0ICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHQvKipcblx0ICogR2V0cyB0aGUgdGFyZ2V0IG5vZGUgZnJvbSBhIG5hdGl2ZSBicm93c2VyIGV2ZW50IGJ5IGFjY291bnRpbmcgZm9yXG5cdCAqIGluY29uc2lzdGVuY2llcyBpbiBicm93c2VyIERPTSBBUElzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG5cdCAqIEByZXR1cm4ge0RPTUV2ZW50VGFyZ2V0fSBUYXJnZXQgbm9kZS5cblx0ICovXG5cdGZ1bmN0aW9uIGdldEV2ZW50VGFyZ2V0KG5hdGl2ZUV2ZW50KSB7XG5cdCAgdmFyIHRhcmdldCA9IG5hdGl2ZUV2ZW50LnRhcmdldCB8fCBuYXRpdmVFdmVudC5zcmNFbGVtZW50IHx8IHdpbmRvdztcblx0ICAvLyBTYWZhcmkgbWF5IGZpcmUgZXZlbnRzIG9uIHRleHQgbm9kZXMgKE5vZGUuVEVYVF9OT0RFIGlzIDMpLlxuXHQgIC8vIEBzZWUgaHR0cDovL3d3dy5xdWlya3Ntb2RlLm9yZy9qcy9ldmVudHNfcHJvcGVydGllcy5odG1sXG5cdCAgcmV0dXJuIHRhcmdldC5ub2RlVHlwZSA9PT0gMyA/IHRhcmdldC5wYXJlbnROb2RlIDogdGFyZ2V0O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGdldEV2ZW50VGFyZ2V0O1xuXG4vKioqLyB9KSxcbi8qIDgyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBpc1RleHRJbnB1dEVsZW1lbnRcblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHQvKipcblx0ICogQHNlZSBodHRwOi8vd3d3LndoYXR3Zy5vcmcvc3BlY3Mvd2ViLWFwcHMvY3VycmVudC13b3JrL211bHRpcGFnZS90aGUtaW5wdXQtZWxlbWVudC5odG1sI2lucHV0LXR5cGUtYXR0ci1zdW1tYXJ5XG5cdCAqL1xuXHR2YXIgc3VwcG9ydGVkSW5wdXRUeXBlcyA9IHtcblx0ICAnY29sb3InOiB0cnVlLFxuXHQgICdkYXRlJzogdHJ1ZSxcblx0ICAnZGF0ZXRpbWUnOiB0cnVlLFxuXHQgICdkYXRldGltZS1sb2NhbCc6IHRydWUsXG5cdCAgJ2VtYWlsJzogdHJ1ZSxcblx0ICAnbW9udGgnOiB0cnVlLFxuXHQgICdudW1iZXInOiB0cnVlLFxuXHQgICdwYXNzd29yZCc6IHRydWUsXG5cdCAgJ3JhbmdlJzogdHJ1ZSxcblx0ICAnc2VhcmNoJzogdHJ1ZSxcblx0ICAndGVsJzogdHJ1ZSxcblx0ICAndGV4dCc6IHRydWUsXG5cdCAgJ3RpbWUnOiB0cnVlLFxuXHQgICd1cmwnOiB0cnVlLFxuXHQgICd3ZWVrJzogdHJ1ZVxuXHR9O1xuXHRcblx0ZnVuY3Rpb24gaXNUZXh0SW5wdXRFbGVtZW50KGVsZW0pIHtcblx0ICB2YXIgbm9kZU5hbWUgPSBlbGVtICYmIGVsZW0ubm9kZU5hbWUgJiYgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHQgIHJldHVybiBub2RlTmFtZSAmJiAobm9kZU5hbWUgPT09ICdpbnB1dCcgJiYgc3VwcG9ydGVkSW5wdXRUeXBlc1tlbGVtLnR5cGVdIHx8IG5vZGVOYW1lID09PSAndGV4dGFyZWEnKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpc1RleHRJbnB1dEVsZW1lbnQ7XG5cbi8qKiovIH0pLFxuLyogODMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIENsaWVudFJlYWN0Um9vdEluZGV4XG5cdCAqIEB0eXBlY2hlY2tzXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIG5leHRSZWFjdFJvb3RJbmRleCA9IDA7XG5cdFxuXHR2YXIgQ2xpZW50UmVhY3RSb290SW5kZXggPSB7XG5cdCAgY3JlYXRlUmVhY3RSb290SW5kZXg6IGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiBuZXh0UmVhY3RSb290SW5kZXgrKztcblx0ICB9XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IENsaWVudFJlYWN0Um9vdEluZGV4O1xuXG4vKioqLyB9KSxcbi8qIDg0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBEZWZhdWx0RXZlbnRQbHVnaW5PcmRlclxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBrZXlPZiA9IF9fd2VicGFja19yZXF1aXJlX18oNzkpO1xuXHRcblx0LyoqXG5cdCAqIE1vZHVsZSB0aGF0IGlzIGluamVjdGFibGUgaW50byBgRXZlbnRQbHVnaW5IdWJgLCB0aGF0IHNwZWNpZmllcyBhXG5cdCAqIGRldGVybWluaXN0aWMgb3JkZXJpbmcgb2YgYEV2ZW50UGx1Z2luYHMuIEEgY29udmVuaWVudCB3YXkgdG8gcmVhc29uIGFib3V0XG5cdCAqIHBsdWdpbnMsIHdpdGhvdXQgaGF2aW5nIHRvIHBhY2thZ2UgZXZlcnkgb25lIG9mIHRoZW0uIFRoaXMgaXMgYmV0dGVyIHRoYW5cblx0ICogaGF2aW5nIHBsdWdpbnMgYmUgb3JkZXJlZCBpbiB0aGUgc2FtZSBvcmRlciB0aGF0IHRoZXkgYXJlIGluamVjdGVkIGJlY2F1c2Vcblx0ICogdGhhdCBvcmRlcmluZyB3b3VsZCBiZSBpbmZsdWVuY2VkIGJ5IHRoZSBwYWNrYWdpbmcgb3JkZXIuXG5cdCAqIGBSZXNwb25kZXJFdmVudFBsdWdpbmAgbXVzdCBvY2N1ciBiZWZvcmUgYFNpbXBsZUV2ZW50UGx1Z2luYCBzbyB0aGF0XG5cdCAqIHByZXZlbnRpbmcgZGVmYXVsdCBvbiBldmVudHMgaXMgY29udmVuaWVudCBpbiBgU2ltcGxlRXZlbnRQbHVnaW5gIGhhbmRsZXJzLlxuXHQgKi9cblx0dmFyIERlZmF1bHRFdmVudFBsdWdpbk9yZGVyID0gW2tleU9mKHsgUmVzcG9uZGVyRXZlbnRQbHVnaW46IG51bGwgfSksIGtleU9mKHsgU2ltcGxlRXZlbnRQbHVnaW46IG51bGwgfSksIGtleU9mKHsgVGFwRXZlbnRQbHVnaW46IG51bGwgfSksIGtleU9mKHsgRW50ZXJMZWF2ZUV2ZW50UGx1Z2luOiBudWxsIH0pLCBrZXlPZih7IENoYW5nZUV2ZW50UGx1Z2luOiBudWxsIH0pLCBrZXlPZih7IFNlbGVjdEV2ZW50UGx1Z2luOiBudWxsIH0pLCBrZXlPZih7IEJlZm9yZUlucHV0RXZlbnRQbHVnaW46IG51bGwgfSldO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBEZWZhdWx0RXZlbnRQbHVnaW5PcmRlcjtcblxuLyoqKi8gfSksXG4vKiA4NSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgRW50ZXJMZWF2ZUV2ZW50UGx1Z2luXG5cdCAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIEV2ZW50Q29uc3RhbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMCk7XG5cdHZhciBFdmVudFByb3BhZ2F0b3JzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Myk7XG5cdHZhciBTeW50aGV0aWNNb3VzZUV2ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4Nik7XG5cdFxuXHR2YXIgUmVhY3RNb3VudCA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpO1xuXHR2YXIga2V5T2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc5KTtcblx0XG5cdHZhciB0b3BMZXZlbFR5cGVzID0gRXZlbnRDb25zdGFudHMudG9wTGV2ZWxUeXBlcztcblx0dmFyIGdldEZpcnN0UmVhY3RET00gPSBSZWFjdE1vdW50LmdldEZpcnN0UmVhY3RET007XG5cdFxuXHR2YXIgZXZlbnRUeXBlcyA9IHtcblx0ICBtb3VzZUVudGVyOiB7XG5cdCAgICByZWdpc3RyYXRpb25OYW1lOiBrZXlPZih7IG9uTW91c2VFbnRlcjogbnVsbCB9KSxcblx0ICAgIGRlcGVuZGVuY2llczogW3RvcExldmVsVHlwZXMudG9wTW91c2VPdXQsIHRvcExldmVsVHlwZXMudG9wTW91c2VPdmVyXVxuXHQgIH0sXG5cdCAgbW91c2VMZWF2ZToge1xuXHQgICAgcmVnaXN0cmF0aW9uTmFtZToga2V5T2YoeyBvbk1vdXNlTGVhdmU6IG51bGwgfSksXG5cdCAgICBkZXBlbmRlbmNpZXM6IFt0b3BMZXZlbFR5cGVzLnRvcE1vdXNlT3V0LCB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlT3Zlcl1cblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgZXh0cmFjdGVkRXZlbnRzID0gW251bGwsIG51bGxdO1xuXHRcblx0dmFyIEVudGVyTGVhdmVFdmVudFBsdWdpbiA9IHtcblx0XG5cdCAgZXZlbnRUeXBlczogZXZlbnRUeXBlcyxcblx0XG5cdCAgLyoqXG5cdCAgICogRm9yIGFsbW9zdCBldmVyeSBpbnRlcmFjdGlvbiB3ZSBjYXJlIGFib3V0LCB0aGVyZSB3aWxsIGJlIGJvdGggYSB0b3AtbGV2ZWxcblx0ICAgKiBgbW91c2VvdmVyYCBhbmQgYG1vdXNlb3V0YCBldmVudCB0aGF0IG9jY3Vycy4gT25seSB1c2UgYG1vdXNlb3V0YCBzbyB0aGF0XG5cdCAgICogd2UgZG8gbm90IGV4dHJhY3QgZHVwbGljYXRlIGV2ZW50cy4gSG93ZXZlciwgbW92aW5nIHRoZSBtb3VzZSBpbnRvIHRoZVxuXHQgICAqIGJyb3dzZXIgZnJvbSBvdXRzaWRlIHdpbGwgbm90IGZpcmUgYSBgbW91c2VvdXRgIGV2ZW50LiBJbiB0aGlzIGNhc2UsIHdlIHVzZVxuXHQgICAqIHRoZSBgbW91c2VvdmVyYCB0b3AtbGV2ZWwgZXZlbnQuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlIFJlY29yZCBmcm9tIGBFdmVudENvbnN0YW50c2AuXG5cdCAgICogQHBhcmFtIHtET01FdmVudFRhcmdldH0gdG9wTGV2ZWxUYXJnZXQgVGhlIGxpc3RlbmluZyBjb21wb25lbnQgcm9vdCBub2RlLlxuXHQgICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFRhcmdldElEIElEIG9mIGB0b3BMZXZlbFRhcmdldGAuXG5cdCAgICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuXHQgICAqIEByZXR1cm4geyp9IEFuIGFjY3VtdWxhdGlvbiBvZiBzeW50aGV0aWMgZXZlbnRzLlxuXHQgICAqIEBzZWUge0V2ZW50UGx1Z2luSHViLmV4dHJhY3RFdmVudHN9XG5cdCAgICovXG5cdCAgZXh0cmFjdEV2ZW50czogZnVuY3Rpb24gKHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuXHQgICAgaWYgKHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BNb3VzZU92ZXIgJiYgKG5hdGl2ZUV2ZW50LnJlbGF0ZWRUYXJnZXQgfHwgbmF0aXZlRXZlbnQuZnJvbUVsZW1lbnQpKSB7XG5cdCAgICAgIHJldHVybiBudWxsO1xuXHQgICAgfVxuXHQgICAgaWYgKHRvcExldmVsVHlwZSAhPT0gdG9wTGV2ZWxUeXBlcy50b3BNb3VzZU91dCAmJiB0b3BMZXZlbFR5cGUgIT09IHRvcExldmVsVHlwZXMudG9wTW91c2VPdmVyKSB7XG5cdCAgICAgIC8vIE11c3Qgbm90IGJlIGEgbW91c2UgaW4gb3IgbW91c2Ugb3V0IC0gaWdub3JpbmcuXG5cdCAgICAgIHJldHVybiBudWxsO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciB3aW47XG5cdCAgICBpZiAodG9wTGV2ZWxUYXJnZXQud2luZG93ID09PSB0b3BMZXZlbFRhcmdldCkge1xuXHQgICAgICAvLyBgdG9wTGV2ZWxUYXJnZXRgIGlzIHByb2JhYmx5IGEgd2luZG93IG9iamVjdC5cblx0ICAgICAgd2luID0gdG9wTGV2ZWxUYXJnZXQ7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyBUT0RPOiBGaWd1cmUgb3V0IHdoeSBgb3duZXJEb2N1bWVudGAgaXMgc29tZXRpbWVzIHVuZGVmaW5lZCBpbiBJRTguXG5cdCAgICAgIHZhciBkb2MgPSB0b3BMZXZlbFRhcmdldC5vd25lckRvY3VtZW50O1xuXHQgICAgICBpZiAoZG9jKSB7XG5cdCAgICAgICAgd2luID0gZG9jLmRlZmF1bHRWaWV3IHx8IGRvYy5wYXJlbnRXaW5kb3c7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgd2luID0gd2luZG93O1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGZyb207XG5cdCAgICB2YXIgdG87XG5cdCAgICB2YXIgZnJvbUlEID0gJyc7XG5cdCAgICB2YXIgdG9JRCA9ICcnO1xuXHQgICAgaWYgKHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BNb3VzZU91dCkge1xuXHQgICAgICBmcm9tID0gdG9wTGV2ZWxUYXJnZXQ7XG5cdCAgICAgIGZyb21JRCA9IHRvcExldmVsVGFyZ2V0SUQ7XG5cdCAgICAgIHRvID0gZ2V0Rmlyc3RSZWFjdERPTShuYXRpdmVFdmVudC5yZWxhdGVkVGFyZ2V0IHx8IG5hdGl2ZUV2ZW50LnRvRWxlbWVudCk7XG5cdCAgICAgIGlmICh0bykge1xuXHQgICAgICAgIHRvSUQgPSBSZWFjdE1vdW50LmdldElEKHRvKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0byA9IHdpbjtcblx0ICAgICAgfVxuXHQgICAgICB0byA9IHRvIHx8IHdpbjtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGZyb20gPSB3aW47XG5cdCAgICAgIHRvID0gdG9wTGV2ZWxUYXJnZXQ7XG5cdCAgICAgIHRvSUQgPSB0b3BMZXZlbFRhcmdldElEO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChmcm9tID09PSB0bykge1xuXHQgICAgICAvLyBOb3RoaW5nIHBlcnRhaW5zIHRvIG91ciBtYW5hZ2VkIGNvbXBvbmVudHMuXG5cdCAgICAgIHJldHVybiBudWxsO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBsZWF2ZSA9IFN5bnRoZXRpY01vdXNlRXZlbnQuZ2V0UG9vbGVkKGV2ZW50VHlwZXMubW91c2VMZWF2ZSwgZnJvbUlELCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xuXHQgICAgbGVhdmUudHlwZSA9ICdtb3VzZWxlYXZlJztcblx0ICAgIGxlYXZlLnRhcmdldCA9IGZyb207XG5cdCAgICBsZWF2ZS5yZWxhdGVkVGFyZ2V0ID0gdG87XG5cdFxuXHQgICAgdmFyIGVudGVyID0gU3ludGhldGljTW91c2VFdmVudC5nZXRQb29sZWQoZXZlbnRUeXBlcy5tb3VzZUVudGVyLCB0b0lELCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xuXHQgICAgZW50ZXIudHlwZSA9ICdtb3VzZWVudGVyJztcblx0ICAgIGVudGVyLnRhcmdldCA9IHRvO1xuXHQgICAgZW50ZXIucmVsYXRlZFRhcmdldCA9IGZyb207XG5cdFxuXHQgICAgRXZlbnRQcm9wYWdhdG9ycy5hY2N1bXVsYXRlRW50ZXJMZWF2ZURpc3BhdGNoZXMobGVhdmUsIGVudGVyLCBmcm9tSUQsIHRvSUQpO1xuXHRcblx0ICAgIGV4dHJhY3RlZEV2ZW50c1swXSA9IGxlYXZlO1xuXHQgICAgZXh0cmFjdGVkRXZlbnRzWzFdID0gZW50ZXI7XG5cdFxuXHQgICAgcmV0dXJuIGV4dHJhY3RlZEV2ZW50cztcblx0ICB9XG5cdFxuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBFbnRlckxlYXZlRXZlbnRQbHVnaW47XG5cbi8qKiovIH0pLFxuLyogODYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIFN5bnRoZXRpY01vdXNlRXZlbnRcblx0ICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgU3ludGhldGljVUlFdmVudCA9IF9fd2VicGFja19yZXF1aXJlX18oODcpO1xuXHR2YXIgVmlld3BvcnRNZXRyaWNzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOCk7XG5cdFxuXHR2YXIgZ2V0RXZlbnRNb2RpZmllclN0YXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4OCk7XG5cdFxuXHQvKipcblx0ICogQGludGVyZmFjZSBNb3VzZUV2ZW50XG5cdCAqIEBzZWUgaHR0cDovL3d3dy53My5vcmcvVFIvRE9NLUxldmVsLTMtRXZlbnRzL1xuXHQgKi9cblx0dmFyIE1vdXNlRXZlbnRJbnRlcmZhY2UgPSB7XG5cdCAgc2NyZWVuWDogbnVsbCxcblx0ICBzY3JlZW5ZOiBudWxsLFxuXHQgIGNsaWVudFg6IG51bGwsXG5cdCAgY2xpZW50WTogbnVsbCxcblx0ICBjdHJsS2V5OiBudWxsLFxuXHQgIHNoaWZ0S2V5OiBudWxsLFxuXHQgIGFsdEtleTogbnVsbCxcblx0ICBtZXRhS2V5OiBudWxsLFxuXHQgIGdldE1vZGlmaWVyU3RhdGU6IGdldEV2ZW50TW9kaWZpZXJTdGF0ZSxcblx0ICBidXR0b246IGZ1bmN0aW9uIChldmVudCkge1xuXHQgICAgLy8gV2Via2l0LCBGaXJlZm94LCBJRTkrXG5cdCAgICAvLyB3aGljaDogIDEgMiAzXG5cdCAgICAvLyBidXR0b246IDAgMSAyIChzdGFuZGFyZClcblx0ICAgIHZhciBidXR0b24gPSBldmVudC5idXR0b247XG5cdCAgICBpZiAoJ3doaWNoJyBpbiBldmVudCkge1xuXHQgICAgICByZXR1cm4gYnV0dG9uO1xuXHQgICAgfVxuXHQgICAgLy8gSUU8OVxuXHQgICAgLy8gd2hpY2g6ICB1bmRlZmluZWRcblx0ICAgIC8vIGJ1dHRvbjogMCAwIDBcblx0ICAgIC8vIGJ1dHRvbjogMSA0IDIgKG9ubW91c2V1cClcblx0ICAgIHJldHVybiBidXR0b24gPT09IDIgPyAyIDogYnV0dG9uID09PSA0ID8gMSA6IDA7XG5cdCAgfSxcblx0ICBidXR0b25zOiBudWxsLFxuXHQgIHJlbGF0ZWRUYXJnZXQ6IGZ1bmN0aW9uIChldmVudCkge1xuXHQgICAgcmV0dXJuIGV2ZW50LnJlbGF0ZWRUYXJnZXQgfHwgKGV2ZW50LmZyb21FbGVtZW50ID09PSBldmVudC5zcmNFbGVtZW50ID8gZXZlbnQudG9FbGVtZW50IDogZXZlbnQuZnJvbUVsZW1lbnQpO1xuXHQgIH0sXG5cdCAgLy8gXCJQcm9wcmlldGFyeVwiIEludGVyZmFjZS5cblx0ICBwYWdlWDogZnVuY3Rpb24gKGV2ZW50KSB7XG5cdCAgICByZXR1cm4gJ3BhZ2VYJyBpbiBldmVudCA/IGV2ZW50LnBhZ2VYIDogZXZlbnQuY2xpZW50WCArIFZpZXdwb3J0TWV0cmljcy5jdXJyZW50U2Nyb2xsTGVmdDtcblx0ICB9LFxuXHQgIHBhZ2VZOiBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgIHJldHVybiAncGFnZVknIGluIGV2ZW50ID8gZXZlbnQucGFnZVkgOiBldmVudC5jbGllbnRZICsgVmlld3BvcnRNZXRyaWNzLmN1cnJlbnRTY3JvbGxUb3A7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBkaXNwYXRjaENvbmZpZyBDb25maWd1cmF0aW9uIHVzZWQgdG8gZGlzcGF0Y2ggdGhpcyBldmVudC5cblx0ICogQHBhcmFtIHtzdHJpbmd9IGRpc3BhdGNoTWFya2VyIE1hcmtlciBpZGVudGlmeWluZyB0aGUgZXZlbnQgdGFyZ2V0LlxuXHQgKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG5cdCAqIEBleHRlbmRzIHtTeW50aGV0aWNVSUV2ZW50fVxuXHQgKi9cblx0ZnVuY3Rpb24gU3ludGhldGljTW91c2VFdmVudChkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuXHQgIFN5bnRoZXRpY1VJRXZlbnQuY2FsbCh0aGlzLCBkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG5cdH1cblx0XG5cdFN5bnRoZXRpY1VJRXZlbnQuYXVnbWVudENsYXNzKFN5bnRoZXRpY01vdXNlRXZlbnQsIE1vdXNlRXZlbnRJbnRlcmZhY2UpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBTeW50aGV0aWNNb3VzZUV2ZW50O1xuXG4vKioqLyB9KSxcbi8qIDg3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBTeW50aGV0aWNVSUV2ZW50XG5cdCAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIFN5bnRoZXRpY0V2ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Nyk7XG5cdFxuXHR2YXIgZ2V0RXZlbnRUYXJnZXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgxKTtcblx0XG5cdC8qKlxuXHQgKiBAaW50ZXJmYWNlIFVJRXZlbnRcblx0ICogQHNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi9ET00tTGV2ZWwtMy1FdmVudHMvXG5cdCAqL1xuXHR2YXIgVUlFdmVudEludGVyZmFjZSA9IHtcblx0ICB2aWV3OiBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgIGlmIChldmVudC52aWV3KSB7XG5cdCAgICAgIHJldHVybiBldmVudC52aWV3O1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciB0YXJnZXQgPSBnZXRFdmVudFRhcmdldChldmVudCk7XG5cdCAgICBpZiAodGFyZ2V0ICE9IG51bGwgJiYgdGFyZ2V0LndpbmRvdyA9PT0gdGFyZ2V0KSB7XG5cdCAgICAgIC8vIHRhcmdldCBpcyBhIHdpbmRvdyBvYmplY3Rcblx0ICAgICAgcmV0dXJuIHRhcmdldDtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgZG9jID0gdGFyZ2V0Lm93bmVyRG9jdW1lbnQ7XG5cdCAgICAvLyBUT0RPOiBGaWd1cmUgb3V0IHdoeSBgb3duZXJEb2N1bWVudGAgaXMgc29tZXRpbWVzIHVuZGVmaW5lZCBpbiBJRTguXG5cdCAgICBpZiAoZG9jKSB7XG5cdCAgICAgIHJldHVybiBkb2MuZGVmYXVsdFZpZXcgfHwgZG9jLnBhcmVudFdpbmRvdztcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiB3aW5kb3c7XG5cdCAgICB9XG5cdCAgfSxcblx0ICBkZXRhaWw6IGZ1bmN0aW9uIChldmVudCkge1xuXHQgICAgcmV0dXJuIGV2ZW50LmRldGFpbCB8fCAwO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBAcGFyYW0ge29iamVjdH0gZGlzcGF0Y2hDb25maWcgQ29uZmlndXJhdGlvbiB1c2VkIHRvIGRpc3BhdGNoIHRoaXMgZXZlbnQuXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBkaXNwYXRjaE1hcmtlciBNYXJrZXIgaWRlbnRpZnlpbmcgdGhlIGV2ZW50IHRhcmdldC5cblx0ICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuXHQgKiBAZXh0ZW5kcyB7U3ludGhldGljRXZlbnR9XG5cdCAqL1xuXHRmdW5jdGlvbiBTeW50aGV0aWNVSUV2ZW50KGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KSB7XG5cdCAgU3ludGhldGljRXZlbnQuY2FsbCh0aGlzLCBkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG5cdH1cblx0XG5cdFN5bnRoZXRpY0V2ZW50LmF1Z21lbnRDbGFzcyhTeW50aGV0aWNVSUV2ZW50LCBVSUV2ZW50SW50ZXJmYWNlKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gU3ludGhldGljVUlFdmVudDtcblxuLyoqKi8gfSksXG4vKiA4OCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgZ2V0RXZlbnRNb2RpZmllclN0YXRlXG5cdCAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0LyoqXG5cdCAqIFRyYW5zbGF0aW9uIGZyb20gbW9kaWZpZXIga2V5IHRvIHRoZSBhc3NvY2lhdGVkIHByb3BlcnR5IGluIHRoZSBldmVudC5cblx0ICogQHNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi9ET00tTGV2ZWwtMy1FdmVudHMvI2tleXMtTW9kaWZpZXJzXG5cdCAqL1xuXHRcblx0dmFyIG1vZGlmaWVyS2V5VG9Qcm9wID0ge1xuXHQgICdBbHQnOiAnYWx0S2V5Jyxcblx0ICAnQ29udHJvbCc6ICdjdHJsS2V5Jyxcblx0ICAnTWV0YSc6ICdtZXRhS2V5Jyxcblx0ICAnU2hpZnQnOiAnc2hpZnRLZXknXG5cdH07XG5cdFxuXHQvLyBJRTggZG9lcyBub3QgaW1wbGVtZW50IGdldE1vZGlmaWVyU3RhdGUgc28gd2Ugc2ltcGx5IG1hcCBpdCB0byB0aGUgb25seVxuXHQvLyBtb2RpZmllciBrZXlzIGV4cG9zZWQgYnkgdGhlIGV2ZW50IGl0c2VsZiwgZG9lcyBub3Qgc3VwcG9ydCBMb2NrLWtleXMuXG5cdC8vIEN1cnJlbnRseSwgYWxsIG1ham9yIGJyb3dzZXJzIGV4Y2VwdCBDaHJvbWUgc2VlbXMgdG8gc3VwcG9ydCBMb2NrLWtleXMuXG5cdGZ1bmN0aW9uIG1vZGlmaWVyU3RhdGVHZXR0ZXIoa2V5QXJnKSB7XG5cdCAgdmFyIHN5bnRoZXRpY0V2ZW50ID0gdGhpcztcblx0ICB2YXIgbmF0aXZlRXZlbnQgPSBzeW50aGV0aWNFdmVudC5uYXRpdmVFdmVudDtcblx0ICBpZiAobmF0aXZlRXZlbnQuZ2V0TW9kaWZpZXJTdGF0ZSkge1xuXHQgICAgcmV0dXJuIG5hdGl2ZUV2ZW50LmdldE1vZGlmaWVyU3RhdGUoa2V5QXJnKTtcblx0ICB9XG5cdCAgdmFyIGtleVByb3AgPSBtb2RpZmllcktleVRvUHJvcFtrZXlBcmddO1xuXHQgIHJldHVybiBrZXlQcm9wID8gISFuYXRpdmVFdmVudFtrZXlQcm9wXSA6IGZhbHNlO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXRFdmVudE1vZGlmaWVyU3RhdGUobmF0aXZlRXZlbnQpIHtcblx0ICByZXR1cm4gbW9kaWZpZXJTdGF0ZUdldHRlcjtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBnZXRFdmVudE1vZGlmaWVyU3RhdGU7XG5cbi8qKiovIH0pLFxuLyogODkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIEhUTUxET01Qcm9wZXJ0eUNvbmZpZ1xuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBET01Qcm9wZXJ0eSA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpO1xuXHR2YXIgRXhlY3V0aW9uRW52aXJvbm1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHRcblx0dmFyIE1VU1RfVVNFX0FUVFJJQlVURSA9IERPTVByb3BlcnR5LmluamVjdGlvbi5NVVNUX1VTRV9BVFRSSUJVVEU7XG5cdHZhciBNVVNUX1VTRV9QUk9QRVJUWSA9IERPTVByb3BlcnR5LmluamVjdGlvbi5NVVNUX1VTRV9QUk9QRVJUWTtcblx0dmFyIEhBU19CT09MRUFOX1ZBTFVFID0gRE9NUHJvcGVydHkuaW5qZWN0aW9uLkhBU19CT09MRUFOX1ZBTFVFO1xuXHR2YXIgSEFTX1NJREVfRUZGRUNUUyA9IERPTVByb3BlcnR5LmluamVjdGlvbi5IQVNfU0lERV9FRkZFQ1RTO1xuXHR2YXIgSEFTX05VTUVSSUNfVkFMVUUgPSBET01Qcm9wZXJ0eS5pbmplY3Rpb24uSEFTX05VTUVSSUNfVkFMVUU7XG5cdHZhciBIQVNfUE9TSVRJVkVfTlVNRVJJQ19WQUxVRSA9IERPTVByb3BlcnR5LmluamVjdGlvbi5IQVNfUE9TSVRJVkVfTlVNRVJJQ19WQUxVRTtcblx0dmFyIEhBU19PVkVSTE9BREVEX0JPT0xFQU5fVkFMVUUgPSBET01Qcm9wZXJ0eS5pbmplY3Rpb24uSEFTX09WRVJMT0FERURfQk9PTEVBTl9WQUxVRTtcblx0XG5cdHZhciBoYXNTVkc7XG5cdGlmIChFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00pIHtcblx0ICB2YXIgaW1wbGVtZW50YXRpb24gPSBkb2N1bWVudC5pbXBsZW1lbnRhdGlvbjtcblx0ICBoYXNTVkcgPSBpbXBsZW1lbnRhdGlvbiAmJiBpbXBsZW1lbnRhdGlvbi5oYXNGZWF0dXJlICYmIGltcGxlbWVudGF0aW9uLmhhc0ZlYXR1cmUoJ2h0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjQmFzaWNTdHJ1Y3R1cmUnLCAnMS4xJyk7XG5cdH1cblx0XG5cdHZhciBIVE1MRE9NUHJvcGVydHlDb25maWcgPSB7XG5cdCAgaXNDdXN0b21BdHRyaWJ1dGU6IFJlZ0V4cC5wcm90b3R5cGUudGVzdC5iaW5kKC9eKGRhdGF8YXJpYSktW2Etel9dW2EtelxcZF8uXFwtXSokLyksXG5cdCAgUHJvcGVydGllczoge1xuXHQgICAgLyoqXG5cdCAgICAgKiBTdGFuZGFyZCBQcm9wZXJ0aWVzXG5cdCAgICAgKi9cblx0ICAgIGFjY2VwdDogbnVsbCxcblx0ICAgIGFjY2VwdENoYXJzZXQ6IG51bGwsXG5cdCAgICBhY2Nlc3NLZXk6IG51bGwsXG5cdCAgICBhY3Rpb246IG51bGwsXG5cdCAgICBhbGxvd0Z1bGxTY3JlZW46IE1VU1RfVVNFX0FUVFJJQlVURSB8IEhBU19CT09MRUFOX1ZBTFVFLFxuXHQgICAgYWxsb3dUcmFuc3BhcmVuY3k6IE1VU1RfVVNFX0FUVFJJQlVURSxcblx0ICAgIGFsdDogbnVsbCxcblx0ICAgIGFzeW5jOiBIQVNfQk9PTEVBTl9WQUxVRSxcblx0ICAgIGF1dG9Db21wbGV0ZTogbnVsbCxcblx0ICAgIC8vIGF1dG9Gb2N1cyBpcyBwb2x5ZmlsbGVkL25vcm1hbGl6ZWQgYnkgQXV0b0ZvY3VzVXRpbHNcblx0ICAgIC8vIGF1dG9Gb2N1czogSEFTX0JPT0xFQU5fVkFMVUUsXG5cdCAgICBhdXRvUGxheTogSEFTX0JPT0xFQU5fVkFMVUUsXG5cdCAgICBjYXB0dXJlOiBNVVNUX1VTRV9BVFRSSUJVVEUgfCBIQVNfQk9PTEVBTl9WQUxVRSxcblx0ICAgIGNlbGxQYWRkaW5nOiBudWxsLFxuXHQgICAgY2VsbFNwYWNpbmc6IG51bGwsXG5cdCAgICBjaGFyU2V0OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG5cdCAgICBjaGFsbGVuZ2U6IE1VU1RfVVNFX0FUVFJJQlVURSxcblx0ICAgIGNoZWNrZWQ6IE1VU1RfVVNFX1BST1BFUlRZIHwgSEFTX0JPT0xFQU5fVkFMVUUsXG5cdCAgICBjbGFzc0lEOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG5cdCAgICAvLyBUbyBzZXQgY2xhc3NOYW1lIG9uIFNWRyBlbGVtZW50cywgaXQncyBuZWNlc3NhcnkgdG8gdXNlIC5zZXRBdHRyaWJ1dGU7XG5cdCAgICAvLyB0aGlzIHdvcmtzIG9uIEhUTUwgZWxlbWVudHMgdG9vIGluIGFsbCBicm93c2VycyBleGNlcHQgSUU4LiBDb252ZW5pZW50bHksXG5cdCAgICAvLyBJRTggZG9lc24ndCBzdXBwb3J0IFNWRyBhbmQgc28gd2UgY2FuIHNpbXBseSB1c2UgdGhlIGF0dHJpYnV0ZSBpblxuXHQgICAgLy8gYnJvd3NlcnMgdGhhdCBzdXBwb3J0IFNWRyBhbmQgdGhlIHByb3BlcnR5IGluIGJyb3dzZXJzIHRoYXQgZG9uJ3QsXG5cdCAgICAvLyByZWdhcmRsZXNzIG9mIHdoZXRoZXIgdGhlIGVsZW1lbnQgaXMgSFRNTCBvciBTVkcuXG5cdCAgICBjbGFzc05hbWU6IGhhc1NWRyA/IE1VU1RfVVNFX0FUVFJJQlVURSA6IE1VU1RfVVNFX1BST1BFUlRZLFxuXHQgICAgY29sczogTVVTVF9VU0VfQVRUUklCVVRFIHwgSEFTX1BPU0lUSVZFX05VTUVSSUNfVkFMVUUsXG5cdCAgICBjb2xTcGFuOiBudWxsLFxuXHQgICAgY29udGVudDogbnVsbCxcblx0ICAgIGNvbnRlbnRFZGl0YWJsZTogbnVsbCxcblx0ICAgIGNvbnRleHRNZW51OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG5cdCAgICBjb250cm9sczogTVVTVF9VU0VfUFJPUEVSVFkgfCBIQVNfQk9PTEVBTl9WQUxVRSxcblx0ICAgIGNvb3JkczogbnVsbCxcblx0ICAgIGNyb3NzT3JpZ2luOiBudWxsLFxuXHQgICAgZGF0YTogbnVsbCwgLy8gRm9yIGA8b2JqZWN0IC8+YCBhY3RzIGFzIGBzcmNgLlxuXHQgICAgZGF0ZVRpbWU6IE1VU1RfVVNFX0FUVFJJQlVURSxcblx0ICAgICdkZWZhdWx0JzogSEFTX0JPT0xFQU5fVkFMVUUsXG5cdCAgICBkZWZlcjogSEFTX0JPT0xFQU5fVkFMVUUsXG5cdCAgICBkaXI6IG51bGwsXG5cdCAgICBkaXNhYmxlZDogTVVTVF9VU0VfQVRUUklCVVRFIHwgSEFTX0JPT0xFQU5fVkFMVUUsXG5cdCAgICBkb3dubG9hZDogSEFTX09WRVJMT0FERURfQk9PTEVBTl9WQUxVRSxcblx0ICAgIGRyYWdnYWJsZTogbnVsbCxcblx0ICAgIGVuY1R5cGU6IG51bGwsXG5cdCAgICBmb3JtOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG5cdCAgICBmb3JtQWN0aW9uOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG5cdCAgICBmb3JtRW5jVHlwZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuXHQgICAgZm9ybU1ldGhvZDogTVVTVF9VU0VfQVRUUklCVVRFLFxuXHQgICAgZm9ybU5vVmFsaWRhdGU6IEhBU19CT09MRUFOX1ZBTFVFLFxuXHQgICAgZm9ybVRhcmdldDogTVVTVF9VU0VfQVRUUklCVVRFLFxuXHQgICAgZnJhbWVCb3JkZXI6IE1VU1RfVVNFX0FUVFJJQlVURSxcblx0ICAgIGhlYWRlcnM6IG51bGwsXG5cdCAgICBoZWlnaHQ6IE1VU1RfVVNFX0FUVFJJQlVURSxcblx0ICAgIGhpZGRlbjogTVVTVF9VU0VfQVRUUklCVVRFIHwgSEFTX0JPT0xFQU5fVkFMVUUsXG5cdCAgICBoaWdoOiBudWxsLFxuXHQgICAgaHJlZjogbnVsbCxcblx0ICAgIGhyZWZMYW5nOiBudWxsLFxuXHQgICAgaHRtbEZvcjogbnVsbCxcblx0ICAgIGh0dHBFcXVpdjogbnVsbCxcblx0ICAgIGljb246IG51bGwsXG5cdCAgICBpZDogTVVTVF9VU0VfUFJPUEVSVFksXG5cdCAgICBpbnB1dE1vZGU6IE1VU1RfVVNFX0FUVFJJQlVURSxcblx0ICAgIGludGVncml0eTogbnVsbCxcblx0ICAgIGlzOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG5cdCAgICBrZXlQYXJhbXM6IE1VU1RfVVNFX0FUVFJJQlVURSxcblx0ICAgIGtleVR5cGU6IE1VU1RfVVNFX0FUVFJJQlVURSxcblx0ICAgIGtpbmQ6IG51bGwsXG5cdCAgICBsYWJlbDogbnVsbCxcblx0ICAgIGxhbmc6IG51bGwsXG5cdCAgICBsaXN0OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG5cdCAgICBsb29wOiBNVVNUX1VTRV9QUk9QRVJUWSB8IEhBU19CT09MRUFOX1ZBTFVFLFxuXHQgICAgbG93OiBudWxsLFxuXHQgICAgbWFuaWZlc3Q6IE1VU1RfVVNFX0FUVFJJQlVURSxcblx0ICAgIG1hcmdpbkhlaWdodDogbnVsbCxcblx0ICAgIG1hcmdpbldpZHRoOiBudWxsLFxuXHQgICAgbWF4OiBudWxsLFxuXHQgICAgbWF4TGVuZ3RoOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG5cdCAgICBtZWRpYTogTVVTVF9VU0VfQVRUUklCVVRFLFxuXHQgICAgbWVkaWFHcm91cDogbnVsbCxcblx0ICAgIG1ldGhvZDogbnVsbCxcblx0ICAgIG1pbjogbnVsbCxcblx0ICAgIG1pbkxlbmd0aDogTVVTVF9VU0VfQVRUUklCVVRFLFxuXHQgICAgbXVsdGlwbGU6IE1VU1RfVVNFX1BST1BFUlRZIHwgSEFTX0JPT0xFQU5fVkFMVUUsXG5cdCAgICBtdXRlZDogTVVTVF9VU0VfUFJPUEVSVFkgfCBIQVNfQk9PTEVBTl9WQUxVRSxcblx0ICAgIG5hbWU6IG51bGwsXG5cdCAgICBub25jZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuXHQgICAgbm9WYWxpZGF0ZTogSEFTX0JPT0xFQU5fVkFMVUUsXG5cdCAgICBvcGVuOiBIQVNfQk9PTEVBTl9WQUxVRSxcblx0ICAgIG9wdGltdW06IG51bGwsXG5cdCAgICBwYXR0ZXJuOiBudWxsLFxuXHQgICAgcGxhY2Vob2xkZXI6IG51bGwsXG5cdCAgICBwb3N0ZXI6IG51bGwsXG5cdCAgICBwcmVsb2FkOiBudWxsLFxuXHQgICAgcmFkaW9Hcm91cDogbnVsbCxcblx0ICAgIHJlYWRPbmx5OiBNVVNUX1VTRV9QUk9QRVJUWSB8IEhBU19CT09MRUFOX1ZBTFVFLFxuXHQgICAgcmVsOiBudWxsLFxuXHQgICAgcmVxdWlyZWQ6IEhBU19CT09MRUFOX1ZBTFVFLFxuXHQgICAgcmV2ZXJzZWQ6IEhBU19CT09MRUFOX1ZBTFVFLFxuXHQgICAgcm9sZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuXHQgICAgcm93czogTVVTVF9VU0VfQVRUUklCVVRFIHwgSEFTX1BPU0lUSVZFX05VTUVSSUNfVkFMVUUsXG5cdCAgICByb3dTcGFuOiBudWxsLFxuXHQgICAgc2FuZGJveDogbnVsbCxcblx0ICAgIHNjb3BlOiBudWxsLFxuXHQgICAgc2NvcGVkOiBIQVNfQk9PTEVBTl9WQUxVRSxcblx0ICAgIHNjcm9sbGluZzogbnVsbCxcblx0ICAgIHNlYW1sZXNzOiBNVVNUX1VTRV9BVFRSSUJVVEUgfCBIQVNfQk9PTEVBTl9WQUxVRSxcblx0ICAgIHNlbGVjdGVkOiBNVVNUX1VTRV9QUk9QRVJUWSB8IEhBU19CT09MRUFOX1ZBTFVFLFxuXHQgICAgc2hhcGU6IG51bGwsXG5cdCAgICBzaXplOiBNVVNUX1VTRV9BVFRSSUJVVEUgfCBIQVNfUE9TSVRJVkVfTlVNRVJJQ19WQUxVRSxcblx0ICAgIHNpemVzOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG5cdCAgICBzcGFuOiBIQVNfUE9TSVRJVkVfTlVNRVJJQ19WQUxVRSxcblx0ICAgIHNwZWxsQ2hlY2s6IG51bGwsXG5cdCAgICBzcmM6IG51bGwsXG5cdCAgICBzcmNEb2M6IE1VU1RfVVNFX1BST1BFUlRZLFxuXHQgICAgc3JjTGFuZzogbnVsbCxcblx0ICAgIHNyY1NldDogTVVTVF9VU0VfQVRUUklCVVRFLFxuXHQgICAgc3RhcnQ6IEhBU19OVU1FUklDX1ZBTFVFLFxuXHQgICAgc3RlcDogbnVsbCxcblx0ICAgIHN0eWxlOiBudWxsLFxuXHQgICAgc3VtbWFyeTogbnVsbCxcblx0ICAgIHRhYkluZGV4OiBudWxsLFxuXHQgICAgdGFyZ2V0OiBudWxsLFxuXHQgICAgdGl0bGU6IG51bGwsXG5cdCAgICB0eXBlOiBudWxsLFxuXHQgICAgdXNlTWFwOiBudWxsLFxuXHQgICAgdmFsdWU6IE1VU1RfVVNFX1BST1BFUlRZIHwgSEFTX1NJREVfRUZGRUNUUyxcblx0ICAgIHdpZHRoOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG5cdCAgICB3bW9kZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuXHQgICAgd3JhcDogbnVsbCxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIFJERmEgUHJvcGVydGllc1xuXHQgICAgICovXG5cdCAgICBhYm91dDogTVVTVF9VU0VfQVRUUklCVVRFLFxuXHQgICAgZGF0YXR5cGU6IE1VU1RfVVNFX0FUVFJJQlVURSxcblx0ICAgIGlubGlzdDogTVVTVF9VU0VfQVRUUklCVVRFLFxuXHQgICAgcHJlZml4OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG5cdCAgICAvLyBwcm9wZXJ0eSBpcyBhbHNvIHN1cHBvcnRlZCBmb3IgT3BlbkdyYXBoIGluIG1ldGEgdGFncy5cblx0ICAgIHByb3BlcnR5OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG5cdCAgICByZXNvdXJjZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuXHQgICAgJ3R5cGVvZic6IE1VU1RfVVNFX0FUVFJJQlVURSxcblx0ICAgIHZvY2FiOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBOb24tc3RhbmRhcmQgUHJvcGVydGllc1xuXHQgICAgICovXG5cdCAgICAvLyBhdXRvQ2FwaXRhbGl6ZSBhbmQgYXV0b0NvcnJlY3QgYXJlIHN1cHBvcnRlZCBpbiBNb2JpbGUgU2FmYXJpIGZvclxuXHQgICAgLy8ga2V5Ym9hcmQgaGludHMuXG5cdCAgICBhdXRvQ2FwaXRhbGl6ZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuXHQgICAgYXV0b0NvcnJlY3Q6IE1VU1RfVVNFX0FUVFJJQlVURSxcblx0ICAgIC8vIGF1dG9TYXZlIGFsbG93cyBXZWJLaXQvQmxpbmsgdG8gcGVyc2lzdCB2YWx1ZXMgb2YgaW5wdXQgZmllbGRzIG9uIHBhZ2UgcmVsb2Fkc1xuXHQgICAgYXV0b1NhdmU6IG51bGwsXG5cdCAgICAvLyBjb2xvciBpcyBmb3IgU2FmYXJpIG1hc2staWNvbiBsaW5rXG5cdCAgICBjb2xvcjogbnVsbCxcblx0ICAgIC8vIGl0ZW1Qcm9wLCBpdGVtU2NvcGUsIGl0ZW1UeXBlIGFyZSBmb3Jcblx0ICAgIC8vIE1pY3JvZGF0YSBzdXBwb3J0LiBTZWUgaHR0cDovL3NjaGVtYS5vcmcvZG9jcy9ncy5odG1sXG5cdCAgICBpdGVtUHJvcDogTVVTVF9VU0VfQVRUUklCVVRFLFxuXHQgICAgaXRlbVNjb3BlOiBNVVNUX1VTRV9BVFRSSUJVVEUgfCBIQVNfQk9PTEVBTl9WQUxVRSxcblx0ICAgIGl0ZW1UeXBlOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG5cdCAgICAvLyBpdGVtSUQgYW5kIGl0ZW1SZWYgYXJlIGZvciBNaWNyb2RhdGEgc3VwcG9ydCBhcyB3ZWxsIGJ1dFxuXHQgICAgLy8gb25seSBzcGVjaWZpZWQgaW4gdGhlIHRoZSBXSEFUV0cgc3BlYyBkb2N1bWVudC4gU2VlXG5cdCAgICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9taWNyb2RhdGEuaHRtbCNtaWNyb2RhdGEtZG9tLWFwaVxuXHQgICAgaXRlbUlEOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG5cdCAgICBpdGVtUmVmOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG5cdCAgICAvLyByZXN1bHRzIHNob3cgbG9va2luZyBnbGFzcyBpY29uIGFuZCByZWNlbnQgc2VhcmNoZXMgb24gaW5wdXRcblx0ICAgIC8vIHNlYXJjaCBmaWVsZHMgaW4gV2ViS2l0L0JsaW5rXG5cdCAgICByZXN1bHRzOiBudWxsLFxuXHQgICAgLy8gSUUtb25seSBhdHRyaWJ1dGUgdGhhdCBzcGVjaWZpZXMgc2VjdXJpdHkgcmVzdHJpY3Rpb25zIG9uIGFuIGlmcmFtZVxuXHQgICAgLy8gYXMgYW4gYWx0ZXJuYXRpdmUgdG8gdGhlIHNhbmRib3ggYXR0cmlidXRlIG9uIElFPDEwXG5cdCAgICBzZWN1cml0eTogTVVTVF9VU0VfQVRUUklCVVRFLFxuXHQgICAgLy8gSUUtb25seSBhdHRyaWJ1dGUgdGhhdCBjb250cm9scyBmb2N1cyBiZWhhdmlvclxuXHQgICAgdW5zZWxlY3RhYmxlOiBNVVNUX1VTRV9BVFRSSUJVVEVcblx0ICB9LFxuXHQgIERPTUF0dHJpYnV0ZU5hbWVzOiB7XG5cdCAgICBhY2NlcHRDaGFyc2V0OiAnYWNjZXB0LWNoYXJzZXQnLFxuXHQgICAgY2xhc3NOYW1lOiAnY2xhc3MnLFxuXHQgICAgaHRtbEZvcjogJ2ZvcicsXG5cdCAgICBodHRwRXF1aXY6ICdodHRwLWVxdWl2J1xuXHQgIH0sXG5cdCAgRE9NUHJvcGVydHlOYW1lczoge1xuXHQgICAgYXV0b0NvbXBsZXRlOiAnYXV0b2NvbXBsZXRlJyxcblx0ICAgIGF1dG9Gb2N1czogJ2F1dG9mb2N1cycsXG5cdCAgICBhdXRvUGxheTogJ2F1dG9wbGF5Jyxcblx0ICAgIGF1dG9TYXZlOiAnYXV0b3NhdmUnLFxuXHQgICAgLy8gYGVuY29kaW5nYCBpcyBlcXVpdmFsZW50IHRvIGBlbmN0eXBlYCwgSUU4IGxhY2tzIGFuIGBlbmN0eXBlYCBzZXR0ZXIuXG5cdCAgICAvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9odG1sNS9mb3Jtcy5odG1sI2RvbS1mcy1lbmNvZGluZ1xuXHQgICAgZW5jVHlwZTogJ2VuY29kaW5nJyxcblx0ICAgIGhyZWZMYW5nOiAnaHJlZmxhbmcnLFxuXHQgICAgcmFkaW9Hcm91cDogJ3JhZGlvZ3JvdXAnLFxuXHQgICAgc3BlbGxDaGVjazogJ3NwZWxsY2hlY2snLFxuXHQgICAgc3JjRG9jOiAnc3JjZG9jJyxcblx0ICAgIHNyY1NldDogJ3NyY3NldCdcblx0ICB9XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IEhUTUxET01Qcm9wZXJ0eUNvbmZpZztcblxuLyoqKi8gfSksXG4vKiA5MCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzKSB7LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBSZWFjdEJyb3dzZXJDb21wb25lbnRNaXhpblxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBSZWFjdEluc3RhbmNlTWFwID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Nyk7XG5cdFxuXHR2YXIgZmluZERPTU5vZGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkxKTtcblx0dmFyIHdhcm5pbmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTtcblx0XG5cdHZhciBkaWRXYXJuS2V5ID0gJ19nZXRET01Ob2RlRGlkV2Fybic7XG5cdFxuXHR2YXIgUmVhY3RCcm93c2VyQ29tcG9uZW50TWl4aW4gPSB7XG5cdCAgLyoqXG5cdCAgICogUmV0dXJucyB0aGUgRE9NIG5vZGUgcmVuZGVyZWQgYnkgdGhpcyBjb21wb25lbnQuXG5cdCAgICpcblx0ICAgKiBAcmV0dXJuIHtET01FbGVtZW50fSBUaGUgcm9vdCBub2RlIG9mIHRoaXMgY29tcG9uZW50LlxuXHQgICAqIEBmaW5hbFxuXHQgICAqIEBwcm90ZWN0ZWRcblx0ICAgKi9cblx0ICBnZXRET01Ob2RlOiBmdW5jdGlvbiAoKSB7XG5cdCAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyh0aGlzLmNvbnN0cnVjdG9yW2RpZFdhcm5LZXldLCAnJXMuZ2V0RE9NTm9kZSguLi4pIGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgJyArICdSZWFjdERPTS5maW5kRE9NTm9kZShpbnN0YW5jZSkgaW5zdGVhZC4nLCBSZWFjdEluc3RhbmNlTWFwLmdldCh0aGlzKS5nZXROYW1lKCkgfHwgdGhpcy50YWdOYW1lIHx8ICdVbmtub3duJykgOiB1bmRlZmluZWQ7XG5cdCAgICB0aGlzLmNvbnN0cnVjdG9yW2RpZFdhcm5LZXldID0gdHJ1ZTtcblx0ICAgIHJldHVybiBmaW5kRE9NTm9kZSh0aGlzKTtcblx0ICB9XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFJlYWN0QnJvd3NlckNvbXBvbmVudE1peGluO1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg0KSkpXG5cbi8qKiovIH0pLFxuLyogOTEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgey8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgZmluZERPTU5vZGVcblx0ICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgUmVhY3RDdXJyZW50T3duZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXHR2YXIgUmVhY3RJbnN0YW5jZU1hcCA9IF9fd2VicGFja19yZXF1aXJlX18oNDcpO1xuXHR2YXIgUmVhY3RNb3VudCA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpO1xuXHRcblx0dmFyIGludmFyaWFudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHR2YXIgd2FybmluZyA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHRcblx0LyoqXG5cdCAqIFJldHVybnMgdGhlIERPTSBub2RlIHJlbmRlcmVkIGJ5IHRoaXMgZWxlbWVudC5cblx0ICpcblx0ICogQHBhcmFtIHtSZWFjdENvbXBvbmVudHxET01FbGVtZW50fSBjb21wb25lbnRPckVsZW1lbnRcblx0ICogQHJldHVybiB7P0RPTUVsZW1lbnR9IFRoZSByb290IG5vZGUgb2YgdGhpcyBlbGVtZW50LlxuXHQgKi9cblx0ZnVuY3Rpb24gZmluZERPTU5vZGUoY29tcG9uZW50T3JFbGVtZW50KSB7XG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgIHZhciBvd25lciA9IFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQ7XG5cdCAgICBpZiAob3duZXIgIT09IG51bGwpIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcob3duZXIuX3dhcm5lZEFib3V0UmVmc0luUmVuZGVyLCAnJXMgaXMgYWNjZXNzaW5nIGdldERPTU5vZGUgb3IgZmluZERPTU5vZGUgaW5zaWRlIGl0cyByZW5kZXIoKS4gJyArICdyZW5kZXIoKSBzaG91bGQgYmUgYSBwdXJlIGZ1bmN0aW9uIG9mIHByb3BzIGFuZCBzdGF0ZS4gSXQgc2hvdWxkICcgKyAnbmV2ZXIgYWNjZXNzIHNvbWV0aGluZyB0aGF0IHJlcXVpcmVzIHN0YWxlIGRhdGEgZnJvbSB0aGUgcHJldmlvdXMgJyArICdyZW5kZXIsIHN1Y2ggYXMgcmVmcy4gTW92ZSB0aGlzIGxvZ2ljIHRvIGNvbXBvbmVudERpZE1vdW50IGFuZCAnICsgJ2NvbXBvbmVudERpZFVwZGF0ZSBpbnN0ZWFkLicsIG93bmVyLmdldE5hbWUoKSB8fCAnQSBjb21wb25lbnQnKSA6IHVuZGVmaW5lZDtcblx0ICAgICAgb3duZXIuX3dhcm5lZEFib3V0UmVmc0luUmVuZGVyID0gdHJ1ZTtcblx0ICAgIH1cblx0ICB9XG5cdCAgaWYgKGNvbXBvbmVudE9yRWxlbWVudCA9PSBudWxsKSB7XG5cdCAgICByZXR1cm4gbnVsbDtcblx0ICB9XG5cdCAgaWYgKGNvbXBvbmVudE9yRWxlbWVudC5ub2RlVHlwZSA9PT0gMSkge1xuXHQgICAgcmV0dXJuIGNvbXBvbmVudE9yRWxlbWVudDtcblx0ICB9XG5cdCAgaWYgKFJlYWN0SW5zdGFuY2VNYXAuaGFzKGNvbXBvbmVudE9yRWxlbWVudCkpIHtcblx0ICAgIHJldHVybiBSZWFjdE1vdW50LmdldE5vZGVGcm9tSW5zdGFuY2UoY29tcG9uZW50T3JFbGVtZW50KTtcblx0ICB9XG5cdCAgIShjb21wb25lbnRPckVsZW1lbnQucmVuZGVyID09IG51bGwgfHwgdHlwZW9mIGNvbXBvbmVudE9yRWxlbWVudC5yZW5kZXIgIT09ICdmdW5jdGlvbicpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2ZpbmRET01Ob2RlIHdhcyBjYWxsZWQgb24gYW4gdW5tb3VudGVkIGNvbXBvbmVudC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdCAgIHRydWUgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRWxlbWVudCBhcHBlYXJzIHRvIGJlIG5laXRoZXIgUmVhY3RDb21wb25lbnQgbm9yIERPTU5vZGUgKGtleXM6ICVzKScsIE9iamVjdC5rZXlzKGNvbXBvbmVudE9yRWxlbWVudCkpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmaW5kRE9NTm9kZTtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oNCkpKVxuXG4vKioqLyB9KSxcbi8qIDkyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBSZWFjdERlZmF1bHRCYXRjaGluZ1N0cmF0ZWd5XG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIFJlYWN0VXBkYXRlcyA9IF9fd2VicGFja19yZXF1aXJlX18oNTQpO1xuXHR2YXIgVHJhbnNhY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU3KTtcblx0XG5cdHZhciBhc3NpZ24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KTtcblx0dmFyIGVtcHR5RnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblx0XG5cdHZhciBSRVNFVF9CQVRDSEVEX1VQREFURVMgPSB7XG5cdCAgaW5pdGlhbGl6ZTogZW1wdHlGdW5jdGlvbixcblx0ICBjbG9zZTogZnVuY3Rpb24gKCkge1xuXHQgICAgUmVhY3REZWZhdWx0QmF0Y2hpbmdTdHJhdGVneS5pc0JhdGNoaW5nVXBkYXRlcyA9IGZhbHNlO1xuXHQgIH1cblx0fTtcblx0XG5cdHZhciBGTFVTSF9CQVRDSEVEX1VQREFURVMgPSB7XG5cdCAgaW5pdGlhbGl6ZTogZW1wdHlGdW5jdGlvbixcblx0ICBjbG9zZTogUmVhY3RVcGRhdGVzLmZsdXNoQmF0Y2hlZFVwZGF0ZXMuYmluZChSZWFjdFVwZGF0ZXMpXG5cdH07XG5cdFxuXHR2YXIgVFJBTlNBQ1RJT05fV1JBUFBFUlMgPSBbRkxVU0hfQkFUQ0hFRF9VUERBVEVTLCBSRVNFVF9CQVRDSEVEX1VQREFURVNdO1xuXHRcblx0ZnVuY3Rpb24gUmVhY3REZWZhdWx0QmF0Y2hpbmdTdHJhdGVneVRyYW5zYWN0aW9uKCkge1xuXHQgIHRoaXMucmVpbml0aWFsaXplVHJhbnNhY3Rpb24oKTtcblx0fVxuXHRcblx0YXNzaWduKFJlYWN0RGVmYXVsdEJhdGNoaW5nU3RyYXRlZ3lUcmFuc2FjdGlvbi5wcm90b3R5cGUsIFRyYW5zYWN0aW9uLk1peGluLCB7XG5cdCAgZ2V0VHJhbnNhY3Rpb25XcmFwcGVyczogZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuIFRSQU5TQUNUSU9OX1dSQVBQRVJTO1xuXHQgIH1cblx0fSk7XG5cdFxuXHR2YXIgdHJhbnNhY3Rpb24gPSBuZXcgUmVhY3REZWZhdWx0QmF0Y2hpbmdTdHJhdGVneVRyYW5zYWN0aW9uKCk7XG5cdFxuXHR2YXIgUmVhY3REZWZhdWx0QmF0Y2hpbmdTdHJhdGVneSA9IHtcblx0ICBpc0JhdGNoaW5nVXBkYXRlczogZmFsc2UsXG5cdFxuXHQgIC8qKlxuXHQgICAqIENhbGwgdGhlIHByb3ZpZGVkIGZ1bmN0aW9uIGluIGEgY29udGV4dCB3aXRoaW4gd2hpY2ggY2FsbHMgdG8gYHNldFN0YXRlYFxuXHQgICAqIGFuZCBmcmllbmRzIGFyZSBiYXRjaGVkIHN1Y2ggdGhhdCBjb21wb25lbnRzIGFyZW4ndCB1cGRhdGVkIHVubmVjZXNzYXJpbHkuXG5cdCAgICovXG5cdCAgYmF0Y2hlZFVwZGF0ZXM6IGZ1bmN0aW9uIChjYWxsYmFjaywgYSwgYiwgYywgZCwgZSkge1xuXHQgICAgdmFyIGFscmVhZHlCYXRjaGluZ1VwZGF0ZXMgPSBSZWFjdERlZmF1bHRCYXRjaGluZ1N0cmF0ZWd5LmlzQmF0Y2hpbmdVcGRhdGVzO1xuXHRcblx0ICAgIFJlYWN0RGVmYXVsdEJhdGNoaW5nU3RyYXRlZ3kuaXNCYXRjaGluZ1VwZGF0ZXMgPSB0cnVlO1xuXHRcblx0ICAgIC8vIFRoZSBjb2RlIGlzIHdyaXR0ZW4gdGhpcyB3YXkgdG8gYXZvaWQgZXh0cmEgYWxsb2NhdGlvbnNcblx0ICAgIGlmIChhbHJlYWR5QmF0Y2hpbmdVcGRhdGVzKSB7XG5cdCAgICAgIGNhbGxiYWNrKGEsIGIsIGMsIGQsIGUpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdHJhbnNhY3Rpb24ucGVyZm9ybShjYWxsYmFjaywgbnVsbCwgYSwgYiwgYywgZCwgZSk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBSZWFjdERlZmF1bHRCYXRjaGluZ1N0cmF0ZWd5O1xuXG4vKioqLyB9KSxcbi8qIDkzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MpIHsvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RE9NQ29tcG9uZW50XG5cdCAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG5cdCAqL1xuXHRcblx0LyogZ2xvYmFsIGhhc093blByb3BlcnR5OnRydWUgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBBdXRvRm9jdXNVdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oOTQpO1xuXHR2YXIgQ1NTUHJvcGVydHlPcGVyYXRpb25zID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5Nik7XG5cdHZhciBET01Qcm9wZXJ0eSA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpO1xuXHR2YXIgRE9NUHJvcGVydHlPcGVyYXRpb25zID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMik7XG5cdHZhciBFdmVudENvbnN0YW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oMzApO1xuXHR2YXIgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSk7XG5cdHZhciBSZWFjdENvbXBvbmVudEJyb3dzZXJFbnZpcm9ubWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpO1xuXHR2YXIgUmVhY3RET01CdXR0b24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwNCk7XG5cdHZhciBSZWFjdERPTUlucHV0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDUpO1xuXHR2YXIgUmVhY3RET01PcHRpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwOSk7XG5cdHZhciBSZWFjdERPTVNlbGVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTEyKTtcblx0dmFyIFJlYWN0RE9NVGV4dGFyZWEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExMyk7XG5cdHZhciBSZWFjdE1vdW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCk7XG5cdHZhciBSZWFjdE11bHRpQ2hpbGQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExNCk7XG5cdHZhciBSZWFjdFBlcmYgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblx0dmFyIFJlYWN0VXBkYXRlUXVldWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUzKTtcblx0XG5cdHZhciBhc3NpZ24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KTtcblx0dmFyIGNhbkRlZmluZVByb3BlcnR5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Myk7XG5cdHZhciBlc2NhcGVUZXh0Q29udGVudEZvckJyb3dzZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTtcblx0dmFyIGludmFyaWFudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHR2YXIgaXNFdmVudFN1cHBvcnRlZCA9IF9fd2VicGFja19yZXF1aXJlX18oNDApO1xuXHR2YXIga2V5T2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc5KTtcblx0dmFyIHNldElubmVySFRNTCA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpO1xuXHR2YXIgc2V0VGV4dENvbnRlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblx0dmFyIHNoYWxsb3dFcXVhbCA9IF9fd2VicGFja19yZXF1aXJlX18oMTE3KTtcblx0dmFyIHZhbGlkYXRlRE9NTmVzdGluZyA9IF9fd2VicGFja19yZXF1aXJlX18oNzApO1xuXHR2YXIgd2FybmluZyA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHRcblx0dmFyIGRlbGV0ZUxpc3RlbmVyID0gUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLmRlbGV0ZUxpc3RlbmVyO1xuXHR2YXIgbGlzdGVuVG8gPSBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIubGlzdGVuVG87XG5cdHZhciByZWdpc3RyYXRpb25OYW1lTW9kdWxlcyA9IFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5yZWdpc3RyYXRpb25OYW1lTW9kdWxlcztcblx0XG5cdC8vIEZvciBxdWlja2x5IG1hdGNoaW5nIGNoaWxkcmVuIHR5cGUsIHRvIHRlc3QgaWYgY2FuIGJlIHRyZWF0ZWQgYXMgY29udGVudC5cblx0dmFyIENPTlRFTlRfVFlQRVMgPSB7ICdzdHJpbmcnOiB0cnVlLCAnbnVtYmVyJzogdHJ1ZSB9O1xuXHRcblx0dmFyIENISUxEUkVOID0ga2V5T2YoeyBjaGlsZHJlbjogbnVsbCB9KTtcblx0dmFyIFNUWUxFID0ga2V5T2YoeyBzdHlsZTogbnVsbCB9KTtcblx0dmFyIEhUTUwgPSBrZXlPZih7IF9faHRtbDogbnVsbCB9KTtcblx0XG5cdHZhciBFTEVNRU5UX05PREVfVFlQRSA9IDE7XG5cdFxuXHRmdW5jdGlvbiBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0oaW50ZXJuYWxJbnN0YW5jZSkge1xuXHQgIGlmIChpbnRlcm5hbEluc3RhbmNlKSB7XG5cdCAgICB2YXIgb3duZXIgPSBpbnRlcm5hbEluc3RhbmNlLl9jdXJyZW50RWxlbWVudC5fb3duZXIgfHwgbnVsbDtcblx0ICAgIGlmIChvd25lcikge1xuXHQgICAgICB2YXIgbmFtZSA9IG93bmVyLmdldE5hbWUoKTtcblx0ICAgICAgaWYgKG5hbWUpIHtcblx0ICAgICAgICByZXR1cm4gJyBUaGlzIERPTSBub2RlIHdhcyByZW5kZXJlZCBieSBgJyArIG5hbWUgKyAnYC4nO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiAnJztcblx0fVxuXHRcblx0dmFyIGxlZ2FjeVByb3BzRGVzY3JpcHRvcjtcblx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICBsZWdhY3lQcm9wc0Rlc2NyaXB0b3IgPSB7XG5cdCAgICBwcm9wczoge1xuXHQgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcblx0ICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGNvbXBvbmVudCA9IHRoaXMuX3JlYWN0SW50ZXJuYWxDb21wb25lbnQ7XG5cdCAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdSZWFjdERPTUNvbXBvbmVudDogRG8gbm90IGFjY2VzcyAucHJvcHMgb2YgYSBET00gbm9kZTsgaW5zdGVhZCwgJyArICdyZWNyZWF0ZSB0aGUgcHJvcHMgYXMgYHJlbmRlcmAgZGlkIG9yaWdpbmFsbHkgb3IgcmVhZCB0aGUgRE9NICcgKyAncHJvcGVydGllcy9hdHRyaWJ1dGVzIGRpcmVjdGx5IGZyb20gdGhpcyBub2RlIChlLmcuLCAnICsgJ3RoaXMucmVmcy5ib3guY2xhc3NOYW1lKS4lcycsIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShjb21wb25lbnQpKSA6IHVuZGVmaW5lZDtcblx0ICAgICAgICByZXR1cm4gY29tcG9uZW50Ll9jdXJyZW50RWxlbWVudC5wcm9wcztcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGxlZ2FjeUdldERPTU5vZGUoKSB7XG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgIHZhciBjb21wb25lbnQgPSB0aGlzLl9yZWFjdEludGVybmFsQ29tcG9uZW50O1xuXHQgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdSZWFjdERPTUNvbXBvbmVudDogRG8gbm90IGFjY2VzcyAuZ2V0RE9NTm9kZSgpIG9mIGEgRE9NIG5vZGU7ICcgKyAnaW5zdGVhZCwgdXNlIHRoZSBub2RlIGRpcmVjdGx5LiVzJywgZ2V0RGVjbGFyYXRpb25FcnJvckFkZGVuZHVtKGNvbXBvbmVudCkpIDogdW5kZWZpbmVkO1xuXHQgIH1cblx0ICByZXR1cm4gdGhpcztcblx0fVxuXHRcblx0ZnVuY3Rpb24gbGVnYWN5SXNNb3VudGVkKCkge1xuXHQgIHZhciBjb21wb25lbnQgPSB0aGlzLl9yZWFjdEludGVybmFsQ29tcG9uZW50O1xuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ1JlYWN0RE9NQ29tcG9uZW50OiBEbyBub3QgYWNjZXNzIC5pc01vdW50ZWQoKSBvZiBhIERPTSBub2RlLiVzJywgZ2V0RGVjbGFyYXRpb25FcnJvckFkZGVuZHVtKGNvbXBvbmVudCkpIDogdW5kZWZpbmVkO1xuXHQgIH1cblx0ICByZXR1cm4gISFjb21wb25lbnQ7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGxlZ2FjeVNldFN0YXRlRXRjKCkge1xuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICB2YXIgY29tcG9uZW50ID0gdGhpcy5fcmVhY3RJbnRlcm5hbENvbXBvbmVudDtcblx0ICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnUmVhY3RET01Db21wb25lbnQ6IERvIG5vdCBhY2Nlc3MgLnNldFN0YXRlKCksIC5yZXBsYWNlU3RhdGUoKSwgb3IgJyArICcuZm9yY2VVcGRhdGUoKSBvZiBhIERPTSBub2RlLiBUaGlzIGlzIGEgbm8tb3AuJXMnLCBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0oY29tcG9uZW50KSkgOiB1bmRlZmluZWQ7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBsZWdhY3lTZXRQcm9wcyhwYXJ0aWFsUHJvcHMsIGNhbGxiYWNrKSB7XG5cdCAgdmFyIGNvbXBvbmVudCA9IHRoaXMuX3JlYWN0SW50ZXJuYWxDb21wb25lbnQ7XG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnUmVhY3RET01Db21wb25lbnQ6IERvIG5vdCBhY2Nlc3MgLnNldFByb3BzKCkgb2YgYSBET00gbm9kZS4gJyArICdJbnN0ZWFkLCBjYWxsIFJlYWN0RE9NLnJlbmRlciBhZ2FpbiBhdCB0aGUgdG9wIGxldmVsLiVzJywgZ2V0RGVjbGFyYXRpb25FcnJvckFkZGVuZHVtKGNvbXBvbmVudCkpIDogdW5kZWZpbmVkO1xuXHQgIH1cblx0ICBpZiAoIWNvbXBvbmVudCkge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICBSZWFjdFVwZGF0ZVF1ZXVlLmVucXVldWVTZXRQcm9wc0ludGVybmFsKGNvbXBvbmVudCwgcGFydGlhbFByb3BzKTtcblx0ICBpZiAoY2FsbGJhY2spIHtcblx0ICAgIFJlYWN0VXBkYXRlUXVldWUuZW5xdWV1ZUNhbGxiYWNrSW50ZXJuYWwoY29tcG9uZW50LCBjYWxsYmFjayk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBsZWdhY3lSZXBsYWNlUHJvcHMocGFydGlhbFByb3BzLCBjYWxsYmFjaykge1xuXHQgIHZhciBjb21wb25lbnQgPSB0aGlzLl9yZWFjdEludGVybmFsQ29tcG9uZW50O1xuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ1JlYWN0RE9NQ29tcG9uZW50OiBEbyBub3QgYWNjZXNzIC5yZXBsYWNlUHJvcHMoKSBvZiBhIERPTSBub2RlLiAnICsgJ0luc3RlYWQsIGNhbGwgUmVhY3RET00ucmVuZGVyIGFnYWluIGF0IHRoZSB0b3AgbGV2ZWwuJXMnLCBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0oY29tcG9uZW50KSkgOiB1bmRlZmluZWQ7XG5cdCAgfVxuXHQgIGlmICghY29tcG9uZW50KSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIFJlYWN0VXBkYXRlUXVldWUuZW5xdWV1ZVJlcGxhY2VQcm9wc0ludGVybmFsKGNvbXBvbmVudCwgcGFydGlhbFByb3BzKTtcblx0ICBpZiAoY2FsbGJhY2spIHtcblx0ICAgIFJlYWN0VXBkYXRlUXVldWUuZW5xdWV1ZUNhbGxiYWNrSW50ZXJuYWwoY29tcG9uZW50LCBjYWxsYmFjayk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBmcmllbmRseVN0cmluZ2lmeShvYmopIHtcblx0ICBpZiAodHlwZW9mIG9iaiA9PT0gJ29iamVjdCcpIHtcblx0ICAgIGlmIChBcnJheS5pc0FycmF5KG9iaikpIHtcblx0ICAgICAgcmV0dXJuICdbJyArIG9iai5tYXAoZnJpZW5kbHlTdHJpbmdpZnkpLmpvaW4oJywgJykgKyAnXSc7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB2YXIgcGFpcnMgPSBbXTtcblx0ICAgICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuXHQgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XG5cdCAgICAgICAgICB2YXIga2V5RXNjYXBlZCA9IC9eW2EteiRfXVtcXHckX10qJC9pLnRlc3Qoa2V5KSA/IGtleSA6IEpTT04uc3RyaW5naWZ5KGtleSk7XG5cdCAgICAgICAgICBwYWlycy5wdXNoKGtleUVzY2FwZWQgKyAnOiAnICsgZnJpZW5kbHlTdHJpbmdpZnkob2JqW2tleV0pKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuICd7JyArIHBhaXJzLmpvaW4oJywgJykgKyAnfSc7XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmICh0eXBlb2Ygb2JqID09PSAnc3RyaW5nJykge1xuXHQgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG9iaik7XG5cdCAgfSBlbHNlIGlmICh0eXBlb2Ygb2JqID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICByZXR1cm4gJ1tmdW5jdGlvbiBvYmplY3RdJztcblx0ICB9XG5cdCAgLy8gRGlmZmVycyBmcm9tIEpTT04uc3RyaW5naWZ5IGluIHRoYXQgdW5kZWZpbmVkIGJlY2F1c2VzIHVuZGVmaW5lZCBhbmQgdGhhdFxuXHQgIC8vIGluZiBhbmQgbmFuIGRvbid0IGJlY29tZSBudWxsXG5cdCAgcmV0dXJuIFN0cmluZyhvYmopO1xuXHR9XG5cdFxuXHR2YXIgc3R5bGVNdXRhdGlvbldhcm5pbmcgPSB7fTtcblx0XG5cdGZ1bmN0aW9uIGNoZWNrQW5kV2FybkZvck11dGF0ZWRTdHlsZShzdHlsZTEsIHN0eWxlMiwgY29tcG9uZW50KSB7XG5cdCAgaWYgKHN0eWxlMSA9PSBudWxsIHx8IHN0eWxlMiA9PSBudWxsKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIGlmIChzaGFsbG93RXF1YWwoc3R5bGUxLCBzdHlsZTIpKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHRcblx0ICB2YXIgY29tcG9uZW50TmFtZSA9IGNvbXBvbmVudC5fdGFnO1xuXHQgIHZhciBvd25lciA9IGNvbXBvbmVudC5fY3VycmVudEVsZW1lbnQuX293bmVyO1xuXHQgIHZhciBvd25lck5hbWU7XG5cdCAgaWYgKG93bmVyKSB7XG5cdCAgICBvd25lck5hbWUgPSBvd25lci5nZXROYW1lKCk7XG5cdCAgfVxuXHRcblx0ICB2YXIgaGFzaCA9IG93bmVyTmFtZSArICd8JyArIGNvbXBvbmVudE5hbWU7XG5cdFxuXHQgIGlmIChzdHlsZU11dGF0aW9uV2FybmluZy5oYXNPd25Qcm9wZXJ0eShoYXNoKSkge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0XG5cdCAgc3R5bGVNdXRhdGlvbldhcm5pbmdbaGFzaF0gPSB0cnVlO1xuXHRcblx0ICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ2Alc2Agd2FzIHBhc3NlZCBhIHN0eWxlIG9iamVjdCB0aGF0IGhhcyBwcmV2aW91c2x5IGJlZW4gbXV0YXRlZC4gJyArICdNdXRhdGluZyBgc3R5bGVgIGlzIGRlcHJlY2F0ZWQuIENvbnNpZGVyIGNsb25pbmcgaXQgYmVmb3JlaGFuZC4gQ2hlY2sgJyArICd0aGUgYHJlbmRlcmAgJXMuIFByZXZpb3VzIHN0eWxlOiAlcy4gTXV0YXRlZCBzdHlsZTogJXMuJywgY29tcG9uZW50TmFtZSwgb3duZXIgPyAnb2YgYCcgKyBvd25lck5hbWUgKyAnYCcgOiAndXNpbmcgPCcgKyBjb21wb25lbnROYW1lICsgJz4nLCBmcmllbmRseVN0cmluZ2lmeShzdHlsZTEpLCBmcmllbmRseVN0cmluZ2lmeShzdHlsZTIpKSA6IHVuZGVmaW5lZDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBjb21wb25lbnRcblx0ICogQHBhcmFtIHs/b2JqZWN0fSBwcm9wc1xuXHQgKi9cblx0ZnVuY3Rpb24gYXNzZXJ0VmFsaWRQcm9wcyhjb21wb25lbnQsIHByb3BzKSB7XG5cdCAgaWYgKCFwcm9wcykge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICAvLyBOb3RlIHRoZSB1c2Ugb2YgYD09YCB3aGljaCBjaGVja3MgZm9yIG51bGwgb3IgdW5kZWZpbmVkLlxuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICBpZiAodm9pZEVsZW1lbnRUYWdzW2NvbXBvbmVudC5fdGFnXSkge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhwcm9wcy5jaGlsZHJlbiA9PSBudWxsICYmIHByb3BzLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MID09IG51bGwsICclcyBpcyBhIHZvaWQgZWxlbWVudCB0YWcgYW5kIG11c3Qgbm90IGhhdmUgYGNoaWxkcmVuYCBvciAnICsgJ3VzZSBgcHJvcHMuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUxgLiVzJywgY29tcG9uZW50Ll90YWcsIGNvbXBvbmVudC5fY3VycmVudEVsZW1lbnQuX293bmVyID8gJyBDaGVjayB0aGUgcmVuZGVyIG1ldGhvZCBvZiAnICsgY29tcG9uZW50Ll9jdXJyZW50RWxlbWVudC5fb3duZXIuZ2V0TmFtZSgpICsgJy4nIDogJycpIDogdW5kZWZpbmVkO1xuXHQgICAgfVxuXHQgIH1cblx0ICBpZiAocHJvcHMuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwgIT0gbnVsbCkge1xuXHQgICAgIShwcm9wcy5jaGlsZHJlbiA9PSBudWxsKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdDYW4gb25seSBzZXQgb25lIG9mIGBjaGlsZHJlbmAgb3IgYHByb3BzLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MYC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdCAgICAhKHR5cGVvZiBwcm9wcy5kYW5nZXJvdXNseVNldElubmVySFRNTCA9PT0gJ29iamVjdCcgJiYgSFRNTCBpbiBwcm9wcy5kYW5nZXJvdXNseVNldElubmVySFRNTCkgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnYHByb3BzLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MYCBtdXN0IGJlIGluIHRoZSBmb3JtIGB7X19odG1sOiAuLi59YC4gJyArICdQbGVhc2UgdmlzaXQgaHR0cHM6Ly9mYi5tZS9yZWFjdC1pbnZhcmlhbnQtZGFuZ2Vyb3VzbHktc2V0LWlubmVyLWh0bWwgJyArICdmb3IgbW9yZSBpbmZvcm1hdGlvbi4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdCAgfVxuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhwcm9wcy5pbm5lckhUTUwgPT0gbnVsbCwgJ0RpcmVjdGx5IHNldHRpbmcgcHJvcGVydHkgYGlubmVySFRNTGAgaXMgbm90IHBlcm1pdHRlZC4gJyArICdGb3IgbW9yZSBpbmZvcm1hdGlvbiwgbG9va3VwIGRvY3VtZW50YXRpb24gb24gYGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MYC4nKSA6IHVuZGVmaW5lZDtcblx0ICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKCFwcm9wcy5jb250ZW50RWRpdGFibGUgfHwgcHJvcHMuY2hpbGRyZW4gPT0gbnVsbCwgJ0EgY29tcG9uZW50IGlzIGBjb250ZW50RWRpdGFibGVgIGFuZCBjb250YWlucyBgY2hpbGRyZW5gIG1hbmFnZWQgYnkgJyArICdSZWFjdC4gSXQgaXMgbm93IHlvdXIgcmVzcG9uc2liaWxpdHkgdG8gZ3VhcmFudGVlIHRoYXQgbm9uZSBvZiAnICsgJ3Rob3NlIG5vZGVzIGFyZSB1bmV4cGVjdGVkbHkgbW9kaWZpZWQgb3IgZHVwbGljYXRlZC4gVGhpcyBpcyAnICsgJ3Byb2JhYmx5IG5vdCBpbnRlbnRpb25hbC4nKSA6IHVuZGVmaW5lZDtcblx0ICB9XG5cdCAgIShwcm9wcy5zdHlsZSA9PSBudWxsIHx8IHR5cGVvZiBwcm9wcy5zdHlsZSA9PT0gJ29iamVjdCcpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1RoZSBgc3R5bGVgIHByb3AgZXhwZWN0cyBhIG1hcHBpbmcgZnJvbSBzdHlsZSBwcm9wZXJ0aWVzIHRvIHZhbHVlcywgJyArICdub3QgYSBzdHJpbmcuIEZvciBleGFtcGxlLCBzdHlsZT17e21hcmdpblJpZ2h0OiBzcGFjaW5nICsgXFwnZW1cXCd9fSB3aGVuICcgKyAndXNpbmcgSlNYLiVzJywgZ2V0RGVjbGFyYXRpb25FcnJvckFkZGVuZHVtKGNvbXBvbmVudCkpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZW5xdWV1ZVB1dExpc3RlbmVyKGlkLCByZWdpc3RyYXRpb25OYW1lLCBsaXN0ZW5lciwgdHJhbnNhY3Rpb24pIHtcblx0ICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgLy8gSUU4IGhhcyBubyBBUEkgZm9yIGV2ZW50IGNhcHR1cmluZyBhbmQgdGhlIGBvblNjcm9sbGAgZXZlbnQgZG9lc24ndFxuXHQgICAgLy8gYnViYmxlLlxuXHQgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcocmVnaXN0cmF0aW9uTmFtZSAhPT0gJ29uU2Nyb2xsJyB8fCBpc0V2ZW50U3VwcG9ydGVkKCdzY3JvbGwnLCB0cnVlKSwgJ1RoaXMgYnJvd3NlciBkb2VzblxcJ3Qgc3VwcG9ydCB0aGUgYG9uU2Nyb2xsYCBldmVudCcpIDogdW5kZWZpbmVkO1xuXHQgIH1cblx0ICB2YXIgY29udGFpbmVyID0gUmVhY3RNb3VudC5maW5kUmVhY3RDb250YWluZXJGb3JJRChpZCk7XG5cdCAgaWYgKGNvbnRhaW5lcikge1xuXHQgICAgdmFyIGRvYyA9IGNvbnRhaW5lci5ub2RlVHlwZSA9PT0gRUxFTUVOVF9OT0RFX1RZUEUgPyBjb250YWluZXIub3duZXJEb2N1bWVudCA6IGNvbnRhaW5lcjtcblx0ICAgIGxpc3RlblRvKHJlZ2lzdHJhdGlvbk5hbWUsIGRvYyk7XG5cdCAgfVxuXHQgIHRyYW5zYWN0aW9uLmdldFJlYWN0TW91bnRSZWFkeSgpLmVucXVldWUocHV0TGlzdGVuZXIsIHtcblx0ICAgIGlkOiBpZCxcblx0ICAgIHJlZ2lzdHJhdGlvbk5hbWU6IHJlZ2lzdHJhdGlvbk5hbWUsXG5cdCAgICBsaXN0ZW5lcjogbGlzdGVuZXJcblx0ICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcHV0TGlzdGVuZXIoKSB7XG5cdCAgdmFyIGxpc3RlbmVyVG9QdXQgPSB0aGlzO1xuXHQgIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5wdXRMaXN0ZW5lcihsaXN0ZW5lclRvUHV0LmlkLCBsaXN0ZW5lclRvUHV0LnJlZ2lzdHJhdGlvbk5hbWUsIGxpc3RlbmVyVG9QdXQubGlzdGVuZXIpO1xuXHR9XG5cdFxuXHQvLyBUaGVyZSBhcmUgc28gbWFueSBtZWRpYSBldmVudHMsIGl0IG1ha2VzIHNlbnNlIHRvIGp1c3Rcblx0Ly8gbWFpbnRhaW4gYSBsaXN0IHJhdGhlciB0aGFuIGNyZWF0ZSBhIGB0cmFwQnViYmxlZEV2ZW50YCBmb3IgZWFjaFxuXHR2YXIgbWVkaWFFdmVudHMgPSB7XG5cdCAgdG9wQWJvcnQ6ICdhYm9ydCcsXG5cdCAgdG9wQ2FuUGxheTogJ2NhbnBsYXknLFxuXHQgIHRvcENhblBsYXlUaHJvdWdoOiAnY2FucGxheXRocm91Z2gnLFxuXHQgIHRvcER1cmF0aW9uQ2hhbmdlOiAnZHVyYXRpb25jaGFuZ2UnLFxuXHQgIHRvcEVtcHRpZWQ6ICdlbXB0aWVkJyxcblx0ICB0b3BFbmNyeXB0ZWQ6ICdlbmNyeXB0ZWQnLFxuXHQgIHRvcEVuZGVkOiAnZW5kZWQnLFxuXHQgIHRvcEVycm9yOiAnZXJyb3InLFxuXHQgIHRvcExvYWRlZERhdGE6ICdsb2FkZWRkYXRhJyxcblx0ICB0b3BMb2FkZWRNZXRhZGF0YTogJ2xvYWRlZG1ldGFkYXRhJyxcblx0ICB0b3BMb2FkU3RhcnQ6ICdsb2Fkc3RhcnQnLFxuXHQgIHRvcFBhdXNlOiAncGF1c2UnLFxuXHQgIHRvcFBsYXk6ICdwbGF5Jyxcblx0ICB0b3BQbGF5aW5nOiAncGxheWluZycsXG5cdCAgdG9wUHJvZ3Jlc3M6ICdwcm9ncmVzcycsXG5cdCAgdG9wUmF0ZUNoYW5nZTogJ3JhdGVjaGFuZ2UnLFxuXHQgIHRvcFNlZWtlZDogJ3NlZWtlZCcsXG5cdCAgdG9wU2Vla2luZzogJ3NlZWtpbmcnLFxuXHQgIHRvcFN0YWxsZWQ6ICdzdGFsbGVkJyxcblx0ICB0b3BTdXNwZW5kOiAnc3VzcGVuZCcsXG5cdCAgdG9wVGltZVVwZGF0ZTogJ3RpbWV1cGRhdGUnLFxuXHQgIHRvcFZvbHVtZUNoYW5nZTogJ3ZvbHVtZWNoYW5nZScsXG5cdCAgdG9wV2FpdGluZzogJ3dhaXRpbmcnXG5cdH07XG5cdFxuXHRmdW5jdGlvbiB0cmFwQnViYmxlZEV2ZW50c0xvY2FsKCkge1xuXHQgIHZhciBpbnN0ID0gdGhpcztcblx0ICAvLyBJZiBhIGNvbXBvbmVudCByZW5kZXJzIHRvIG51bGwgb3IgaWYgYW5vdGhlciBjb21wb25lbnQgZmF0YWxzIGFuZCBjYXVzZXNcblx0ICAvLyB0aGUgc3RhdGUgb2YgdGhlIHRyZWUgdG8gYmUgY29ycnVwdGVkLCBgbm9kZWAgaGVyZSBjYW4gYmUgbnVsbC5cblx0ICAhaW5zdC5fcm9vdE5vZGVJRCA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdNdXN0IGJlIG1vdW50ZWQgdG8gdHJhcCBldmVudHMnKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdCAgdmFyIG5vZGUgPSBSZWFjdE1vdW50LmdldE5vZGUoaW5zdC5fcm9vdE5vZGVJRCk7XG5cdCAgIW5vZGUgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAndHJhcEJ1YmJsZWRFdmVudCguLi4pOiBSZXF1aXJlcyBub2RlIHRvIGJlIHJlbmRlcmVkLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0XG5cdCAgc3dpdGNoIChpbnN0Ll90YWcpIHtcblx0ICAgIGNhc2UgJ2lmcmFtZSc6XG5cdCAgICAgIGluc3QuX3dyYXBwZXJTdGF0ZS5saXN0ZW5lcnMgPSBbUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLnRyYXBCdWJibGVkRXZlbnQoRXZlbnRDb25zdGFudHMudG9wTGV2ZWxUeXBlcy50b3BMb2FkLCAnbG9hZCcsIG5vZGUpXTtcblx0ICAgICAgYnJlYWs7XG5cdCAgICBjYXNlICd2aWRlbyc6XG5cdCAgICBjYXNlICdhdWRpbyc6XG5cdFxuXHQgICAgICBpbnN0Ll93cmFwcGVyU3RhdGUubGlzdGVuZXJzID0gW107XG5cdCAgICAgIC8vIGNyZWF0ZSBsaXN0ZW5lciBmb3IgZWFjaCBtZWRpYSBldmVudFxuXHQgICAgICBmb3IgKHZhciBldmVudCBpbiBtZWRpYUV2ZW50cykge1xuXHQgICAgICAgIGlmIChtZWRpYUV2ZW50cy5oYXNPd25Qcm9wZXJ0eShldmVudCkpIHtcblx0ICAgICAgICAgIGluc3QuX3dyYXBwZXJTdGF0ZS5saXN0ZW5lcnMucHVzaChSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIudHJhcEJ1YmJsZWRFdmVudChFdmVudENvbnN0YW50cy50b3BMZXZlbFR5cGVzW2V2ZW50XSwgbWVkaWFFdmVudHNbZXZlbnRdLCBub2RlKSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICBicmVhaztcblx0ICAgIGNhc2UgJ2ltZyc6XG5cdCAgICAgIGluc3QuX3dyYXBwZXJTdGF0ZS5saXN0ZW5lcnMgPSBbUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLnRyYXBCdWJibGVkRXZlbnQoRXZlbnRDb25zdGFudHMudG9wTGV2ZWxUeXBlcy50b3BFcnJvciwgJ2Vycm9yJywgbm9kZSksIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci50cmFwQnViYmxlZEV2ZW50KEV2ZW50Q29uc3RhbnRzLnRvcExldmVsVHlwZXMudG9wTG9hZCwgJ2xvYWQnLCBub2RlKV07XG5cdCAgICAgIGJyZWFrO1xuXHQgICAgY2FzZSAnZm9ybSc6XG5cdCAgICAgIGluc3QuX3dyYXBwZXJTdGF0ZS5saXN0ZW5lcnMgPSBbUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLnRyYXBCdWJibGVkRXZlbnQoRXZlbnRDb25zdGFudHMudG9wTGV2ZWxUeXBlcy50b3BSZXNldCwgJ3Jlc2V0Jywgbm9kZSksIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci50cmFwQnViYmxlZEV2ZW50KEV2ZW50Q29uc3RhbnRzLnRvcExldmVsVHlwZXMudG9wU3VibWl0LCAnc3VibWl0Jywgbm9kZSldO1xuXHQgICAgICBicmVhaztcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1vdW50UmVhZHlJbnB1dFdyYXBwZXIoKSB7XG5cdCAgUmVhY3RET01JbnB1dC5tb3VudFJlYWR5V3JhcHBlcih0aGlzKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcG9zdFVwZGF0ZVNlbGVjdFdyYXBwZXIoKSB7XG5cdCAgUmVhY3RET01TZWxlY3QucG9zdFVwZGF0ZVdyYXBwZXIodGhpcyk7XG5cdH1cblx0XG5cdC8vIEZvciBIVE1MLCBjZXJ0YWluIHRhZ3Mgc2hvdWxkIG9taXQgdGhlaXIgY2xvc2UgdGFnLiBXZSBrZWVwIGEgd2hpdGVsaXN0IGZvclxuXHQvLyB0aG9zZSBzcGVjaWFsIGNhc2VkIHRhZ3MuXG5cdFxuXHR2YXIgb21pdHRlZENsb3NlVGFncyA9IHtcblx0ICAnYXJlYSc6IHRydWUsXG5cdCAgJ2Jhc2UnOiB0cnVlLFxuXHQgICdicic6IHRydWUsXG5cdCAgJ2NvbCc6IHRydWUsXG5cdCAgJ2VtYmVkJzogdHJ1ZSxcblx0ICAnaHInOiB0cnVlLFxuXHQgICdpbWcnOiB0cnVlLFxuXHQgICdpbnB1dCc6IHRydWUsXG5cdCAgJ2tleWdlbic6IHRydWUsXG5cdCAgJ2xpbmsnOiB0cnVlLFxuXHQgICdtZXRhJzogdHJ1ZSxcblx0ICAncGFyYW0nOiB0cnVlLFxuXHQgICdzb3VyY2UnOiB0cnVlLFxuXHQgICd0cmFjayc6IHRydWUsXG5cdCAgJ3dicic6IHRydWVcblx0fTtcblx0XG5cdC8vIE5PVEU6IG1lbnVpdGVtJ3MgY2xvc2UgdGFnIHNob3VsZCBiZSBvbWl0dGVkLCBidXQgdGhhdCBjYXVzZXMgcHJvYmxlbXMuXG5cdHZhciBuZXdsaW5lRWF0aW5nVGFncyA9IHtcblx0ICAnbGlzdGluZyc6IHRydWUsXG5cdCAgJ3ByZSc6IHRydWUsXG5cdCAgJ3RleHRhcmVhJzogdHJ1ZVxuXHR9O1xuXHRcblx0Ly8gRm9yIEhUTUwsIGNlcnRhaW4gdGFncyBjYW5ub3QgaGF2ZSBjaGlsZHJlbi4gVGhpcyBoYXMgdGhlIHNhbWUgcHVycG9zZSBhc1xuXHQvLyBgb21pdHRlZENsb3NlVGFnc2AgZXhjZXB0IHRoYXQgYG1lbnVpdGVtYCBzaG91bGQgc3RpbGwgaGF2ZSBpdHMgY2xvc2luZyB0YWcuXG5cdFxuXHR2YXIgdm9pZEVsZW1lbnRUYWdzID0gYXNzaWduKHtcblx0ICAnbWVudWl0ZW0nOiB0cnVlXG5cdH0sIG9taXR0ZWRDbG9zZVRhZ3MpO1xuXHRcblx0Ly8gV2UgYWNjZXB0IGFueSB0YWcgdG8gYmUgcmVuZGVyZWQgYnV0IHNpbmNlIHRoaXMgZ2V0cyBpbmplY3RlZCBpbnRvIGFyYml0cmFyeVxuXHQvLyBIVE1MLCB3ZSB3YW50IHRvIG1ha2Ugc3VyZSB0aGF0IGl0J3MgYSBzYWZlIHRhZy5cblx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvUkVDLXhtbC8jTlQtTmFtZVxuXHRcblx0dmFyIFZBTElEX1RBR19SRUdFWCA9IC9eW2EtekEtWl1bYS16QS1aOl9cXC5cXC1cXGRdKiQvOyAvLyBTaW1wbGlmaWVkIHN1YnNldFxuXHR2YXIgdmFsaWRhdGVkVGFnQ2FjaGUgPSB7fTtcblx0dmFyIGhhc093blByb3BlcnR5ID0gKHt9KS5oYXNPd25Qcm9wZXJ0eTtcblx0XG5cdGZ1bmN0aW9uIHZhbGlkYXRlRGFuZ2Vyb3VzVGFnKHRhZykge1xuXHQgIGlmICghaGFzT3duUHJvcGVydHkuY2FsbCh2YWxpZGF0ZWRUYWdDYWNoZSwgdGFnKSkge1xuXHQgICAgIVZBTElEX1RBR19SRUdFWC50ZXN0KHRhZykgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnSW52YWxpZCB0YWc6ICVzJywgdGFnKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdCAgICB2YWxpZGF0ZWRUYWdDYWNoZVt0YWddID0gdHJ1ZTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHByb2Nlc3NDaGlsZENvbnRleHREZXYoY29udGV4dCwgaW5zdCkge1xuXHQgIC8vIFBhc3MgZG93biBvdXIgdGFnIG5hbWUgdG8gY2hpbGQgY29tcG9uZW50cyBmb3IgdmFsaWRhdGlvbiBwdXJwb3Nlc1xuXHQgIGNvbnRleHQgPSBhc3NpZ24oe30sIGNvbnRleHQpO1xuXHQgIHZhciBpbmZvID0gY29udGV4dFt2YWxpZGF0ZURPTU5lc3RpbmcuYW5jZXN0b3JJbmZvQ29udGV4dEtleV07XG5cdCAgY29udGV4dFt2YWxpZGF0ZURPTU5lc3RpbmcuYW5jZXN0b3JJbmZvQ29udGV4dEtleV0gPSB2YWxpZGF0ZURPTU5lc3RpbmcudXBkYXRlZEFuY2VzdG9ySW5mbyhpbmZvLCBpbnN0Ll90YWcsIGluc3QpO1xuXHQgIHJldHVybiBjb250ZXh0O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc0N1c3RvbUNvbXBvbmVudCh0YWdOYW1lLCBwcm9wcykge1xuXHQgIHJldHVybiB0YWdOYW1lLmluZGV4T2YoJy0nKSA+PSAwIHx8IHByb3BzLmlzICE9IG51bGw7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgbmV3IFJlYWN0IGNsYXNzIHRoYXQgaXMgaWRlbXBvdGVudCBhbmQgY2FwYWJsZSBvZiBjb250YWluaW5nIG90aGVyXG5cdCAqIFJlYWN0IGNvbXBvbmVudHMuIEl0IGFjY2VwdHMgZXZlbnQgbGlzdGVuZXJzIGFuZCBET00gcHJvcGVydGllcyB0aGF0IGFyZVxuXHQgKiB2YWxpZCBhY2NvcmRpbmcgdG8gYERPTVByb3BlcnR5YC5cblx0ICpcblx0ICogIC0gRXZlbnQgbGlzdGVuZXJzOiBgb25DbGlja2AsIGBvbk1vdXNlRG93bmAsIGV0Yy5cblx0ICogIC0gRE9NIHByb3BlcnRpZXM6IGBjbGFzc05hbWVgLCBgbmFtZWAsIGB0aXRsZWAsIGV0Yy5cblx0ICpcblx0ICogVGhlIGBzdHlsZWAgcHJvcGVydHkgZnVuY3Rpb25zIGRpZmZlcmVudGx5IGZyb20gdGhlIERPTSBBUEkuIEl0IGFjY2VwdHMgYW5cblx0ICogb2JqZWN0IG1hcHBpbmcgb2Ygc3R5bGUgcHJvcGVydGllcyB0byB2YWx1ZXMuXG5cdCAqXG5cdCAqIEBjb25zdHJ1Y3RvciBSZWFjdERPTUNvbXBvbmVudFxuXHQgKiBAZXh0ZW5kcyBSZWFjdE11bHRpQ2hpbGRcblx0ICovXG5cdGZ1bmN0aW9uIFJlYWN0RE9NQ29tcG9uZW50KHRhZykge1xuXHQgIHZhbGlkYXRlRGFuZ2Vyb3VzVGFnKHRhZyk7XG5cdCAgdGhpcy5fdGFnID0gdGFnLnRvTG93ZXJDYXNlKCk7XG5cdCAgdGhpcy5fcmVuZGVyZWRDaGlsZHJlbiA9IG51bGw7XG5cdCAgdGhpcy5fcHJldmlvdXNTdHlsZSA9IG51bGw7XG5cdCAgdGhpcy5fcHJldmlvdXNTdHlsZUNvcHkgPSBudWxsO1xuXHQgIHRoaXMuX3Jvb3ROb2RlSUQgPSBudWxsO1xuXHQgIHRoaXMuX3dyYXBwZXJTdGF0ZSA9IG51bGw7XG5cdCAgdGhpcy5fdG9wTGV2ZWxXcmFwcGVyID0gbnVsbDtcblx0ICB0aGlzLl9ub2RlV2l0aExlZ2FjeVByb3BlcnRpZXMgPSBudWxsO1xuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICB0aGlzLl91bnByb2Nlc3NlZENvbnRleHREZXYgPSBudWxsO1xuXHQgICAgdGhpcy5fcHJvY2Vzc2VkQ29udGV4dERldiA9IG51bGw7XG5cdCAgfVxuXHR9XG5cdFxuXHRSZWFjdERPTUNvbXBvbmVudC5kaXNwbGF5TmFtZSA9ICdSZWFjdERPTUNvbXBvbmVudCc7XG5cdFxuXHRSZWFjdERPTUNvbXBvbmVudC5NaXhpbiA9IHtcblx0XG5cdCAgY29uc3RydWN0OiBmdW5jdGlvbiAoZWxlbWVudCkge1xuXHQgICAgdGhpcy5fY3VycmVudEVsZW1lbnQgPSBlbGVtZW50O1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIEdlbmVyYXRlcyByb290IHRhZyBtYXJrdXAgdGhlbiByZWN1cnNlcy4gVGhpcyBtZXRob2QgaGFzIHNpZGUgZWZmZWN0cyBhbmRcblx0ICAgKiBpcyBub3QgaWRlbXBvdGVudC5cblx0ICAgKlxuXHQgICAqIEBpbnRlcm5hbFxuXHQgICAqIEBwYXJhbSB7c3RyaW5nfSByb290SUQgVGhlIHJvb3QgRE9NIElEIGZvciB0aGlzIG5vZGUuXG5cdCAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufFJlYWN0U2VydmVyUmVuZGVyaW5nVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG5cdCAgICogQHBhcmFtIHtvYmplY3R9IGNvbnRleHRcblx0ICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBjb21wdXRlZCBtYXJrdXAuXG5cdCAgICovXG5cdCAgbW91bnRDb21wb25lbnQ6IGZ1bmN0aW9uIChyb290SUQsIHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG5cdCAgICB0aGlzLl9yb290Tm9kZUlEID0gcm9vdElEO1xuXHRcblx0ICAgIHZhciBwcm9wcyA9IHRoaXMuX2N1cnJlbnRFbGVtZW50LnByb3BzO1xuXHRcblx0ICAgIHN3aXRjaCAodGhpcy5fdGFnKSB7XG5cdCAgICAgIGNhc2UgJ2lmcmFtZSc6XG5cdCAgICAgIGNhc2UgJ2ltZyc6XG5cdCAgICAgIGNhc2UgJ2Zvcm0nOlxuXHQgICAgICBjYXNlICd2aWRlbyc6XG5cdCAgICAgIGNhc2UgJ2F1ZGlvJzpcblx0ICAgICAgICB0aGlzLl93cmFwcGVyU3RhdGUgPSB7XG5cdCAgICAgICAgICBsaXN0ZW5lcnM6IG51bGxcblx0ICAgICAgICB9O1xuXHQgICAgICAgIHRyYW5zYWN0aW9uLmdldFJlYWN0TW91bnRSZWFkeSgpLmVucXVldWUodHJhcEJ1YmJsZWRFdmVudHNMb2NhbCwgdGhpcyk7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIGNhc2UgJ2J1dHRvbic6XG5cdCAgICAgICAgcHJvcHMgPSBSZWFjdERPTUJ1dHRvbi5nZXROYXRpdmVQcm9wcyh0aGlzLCBwcm9wcywgY29udGV4dCk7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIGNhc2UgJ2lucHV0Jzpcblx0ICAgICAgICBSZWFjdERPTUlucHV0Lm1vdW50V3JhcHBlcih0aGlzLCBwcm9wcywgY29udGV4dCk7XG5cdCAgICAgICAgcHJvcHMgPSBSZWFjdERPTUlucHV0LmdldE5hdGl2ZVByb3BzKHRoaXMsIHByb3BzLCBjb250ZXh0KTtcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgY2FzZSAnb3B0aW9uJzpcblx0ICAgICAgICBSZWFjdERPTU9wdGlvbi5tb3VudFdyYXBwZXIodGhpcywgcHJvcHMsIGNvbnRleHQpO1xuXHQgICAgICAgIHByb3BzID0gUmVhY3RET01PcHRpb24uZ2V0TmF0aXZlUHJvcHModGhpcywgcHJvcHMsIGNvbnRleHQpO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICBjYXNlICdzZWxlY3QnOlxuXHQgICAgICAgIFJlYWN0RE9NU2VsZWN0Lm1vdW50V3JhcHBlcih0aGlzLCBwcm9wcywgY29udGV4dCk7XG5cdCAgICAgICAgcHJvcHMgPSBSZWFjdERPTVNlbGVjdC5nZXROYXRpdmVQcm9wcyh0aGlzLCBwcm9wcywgY29udGV4dCk7XG5cdCAgICAgICAgY29udGV4dCA9IFJlYWN0RE9NU2VsZWN0LnByb2Nlc3NDaGlsZENvbnRleHQodGhpcywgcHJvcHMsIGNvbnRleHQpO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICBjYXNlICd0ZXh0YXJlYSc6XG5cdCAgICAgICAgUmVhY3RET01UZXh0YXJlYS5tb3VudFdyYXBwZXIodGhpcywgcHJvcHMsIGNvbnRleHQpO1xuXHQgICAgICAgIHByb3BzID0gUmVhY3RET01UZXh0YXJlYS5nZXROYXRpdmVQcm9wcyh0aGlzLCBwcm9wcywgY29udGV4dCk7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICB9XG5cdFxuXHQgICAgYXNzZXJ0VmFsaWRQcm9wcyh0aGlzLCBwcm9wcyk7XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICBpZiAoY29udGV4dFt2YWxpZGF0ZURPTU5lc3RpbmcuYW5jZXN0b3JJbmZvQ29udGV4dEtleV0pIHtcblx0ICAgICAgICB2YWxpZGF0ZURPTU5lc3RpbmcodGhpcy5fdGFnLCB0aGlzLCBjb250ZXh0W3ZhbGlkYXRlRE9NTmVzdGluZy5hbmNlc3RvckluZm9Db250ZXh0S2V5XSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICB0aGlzLl91bnByb2Nlc3NlZENvbnRleHREZXYgPSBjb250ZXh0O1xuXHQgICAgICB0aGlzLl9wcm9jZXNzZWRDb250ZXh0RGV2ID0gcHJvY2Vzc0NoaWxkQ29udGV4dERldihjb250ZXh0LCB0aGlzKTtcblx0ICAgICAgY29udGV4dCA9IHRoaXMuX3Byb2Nlc3NlZENvbnRleHREZXY7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIG1vdW50SW1hZ2U7XG5cdCAgICBpZiAodHJhbnNhY3Rpb24udXNlQ3JlYXRlRWxlbWVudCkge1xuXHQgICAgICB2YXIgb3duZXJEb2N1bWVudCA9IGNvbnRleHRbUmVhY3RNb3VudC5vd25lckRvY3VtZW50Q29udGV4dEtleV07XG5cdCAgICAgIHZhciBlbCA9IG93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0aGlzLl9jdXJyZW50RWxlbWVudC50eXBlKTtcblx0ICAgICAgRE9NUHJvcGVydHlPcGVyYXRpb25zLnNldEF0dHJpYnV0ZUZvcklEKGVsLCB0aGlzLl9yb290Tm9kZUlEKTtcblx0ICAgICAgLy8gUG9wdWxhdGUgbm9kZSBjYWNoZVxuXHQgICAgICBSZWFjdE1vdW50LmdldElEKGVsKTtcblx0ICAgICAgdGhpcy5fdXBkYXRlRE9NUHJvcGVydGllcyh7fSwgcHJvcHMsIHRyYW5zYWN0aW9uLCBlbCk7XG5cdCAgICAgIHRoaXMuX2NyZWF0ZUluaXRpYWxDaGlsZHJlbih0cmFuc2FjdGlvbiwgcHJvcHMsIGNvbnRleHQsIGVsKTtcblx0ICAgICAgbW91bnRJbWFnZSA9IGVsO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdmFyIHRhZ09wZW4gPSB0aGlzLl9jcmVhdGVPcGVuVGFnTWFya3VwQW5kUHV0TGlzdGVuZXJzKHRyYW5zYWN0aW9uLCBwcm9wcyk7XG5cdCAgICAgIHZhciB0YWdDb250ZW50ID0gdGhpcy5fY3JlYXRlQ29udGVudE1hcmt1cCh0cmFuc2FjdGlvbiwgcHJvcHMsIGNvbnRleHQpO1xuXHQgICAgICBpZiAoIXRhZ0NvbnRlbnQgJiYgb21pdHRlZENsb3NlVGFnc1t0aGlzLl90YWddKSB7XG5cdCAgICAgICAgbW91bnRJbWFnZSA9IHRhZ09wZW4gKyAnLz4nO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIG1vdW50SW1hZ2UgPSB0YWdPcGVuICsgJz4nICsgdGFnQ29udGVudCArICc8LycgKyB0aGlzLl9jdXJyZW50RWxlbWVudC50eXBlICsgJz4nO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgc3dpdGNoICh0aGlzLl90YWcpIHtcblx0ICAgICAgY2FzZSAnaW5wdXQnOlxuXHQgICAgICAgIHRyYW5zYWN0aW9uLmdldFJlYWN0TW91bnRSZWFkeSgpLmVucXVldWUobW91bnRSZWFkeUlucHV0V3JhcHBlciwgdGhpcyk7XG5cdCAgICAgIC8vIGZhbGxzIHRocm91Z2hcblx0ICAgICAgY2FzZSAnYnV0dG9uJzpcblx0ICAgICAgY2FzZSAnc2VsZWN0Jzpcblx0ICAgICAgY2FzZSAndGV4dGFyZWEnOlxuXHQgICAgICAgIGlmIChwcm9wcy5hdXRvRm9jdXMpIHtcblx0ICAgICAgICAgIHRyYW5zYWN0aW9uLmdldFJlYWN0TW91bnRSZWFkeSgpLmVucXVldWUoQXV0b0ZvY3VzVXRpbHMuZm9jdXNET01Db21wb25lbnQsIHRoaXMpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBicmVhaztcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gbW91bnRJbWFnZTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBDcmVhdGVzIG1hcmt1cCBmb3IgdGhlIG9wZW4gdGFnIGFuZCBhbGwgYXR0cmlidXRlcy5cblx0ICAgKlxuXHQgICAqIFRoaXMgbWV0aG9kIGhhcyBzaWRlIGVmZmVjdHMgYmVjYXVzZSBldmVudHMgZ2V0IHJlZ2lzdGVyZWQuXG5cdCAgICpcblx0ICAgKiBJdGVyYXRpbmcgb3ZlciBvYmplY3QgcHJvcGVydGllcyBpcyBmYXN0ZXIgdGhhbiBpdGVyYXRpbmcgb3ZlciBhcnJheXMuXG5cdCAgICogQHNlZSBodHRwOi8vanNwZXJmLmNvbS9vYmotdnMtYXJyLWl0ZXJhdGlvblxuXHQgICAqXG5cdCAgICogQHByaXZhdGVcblx0ICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb258UmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cblx0ICAgKiBAcGFyYW0ge29iamVjdH0gcHJvcHNcblx0ICAgKiBAcmV0dXJuIHtzdHJpbmd9IE1hcmt1cCBvZiBvcGVuaW5nIHRhZy5cblx0ICAgKi9cblx0ICBfY3JlYXRlT3BlblRhZ01hcmt1cEFuZFB1dExpc3RlbmVyczogZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBwcm9wcykge1xuXHQgICAgdmFyIHJldCA9ICc8JyArIHRoaXMuX2N1cnJlbnRFbGVtZW50LnR5cGU7XG5cdFxuXHQgICAgZm9yICh2YXIgcHJvcEtleSBpbiBwcm9wcykge1xuXHQgICAgICBpZiAoIXByb3BzLmhhc093blByb3BlcnR5KHByb3BLZXkpKSB7XG5cdCAgICAgICAgY29udGludWU7XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIHByb3BWYWx1ZSA9IHByb3BzW3Byb3BLZXldO1xuXHQgICAgICBpZiAocHJvcFZhbHVlID09IG51bGwpIHtcblx0ICAgICAgICBjb250aW51ZTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAocmVnaXN0cmF0aW9uTmFtZU1vZHVsZXMuaGFzT3duUHJvcGVydHkocHJvcEtleSkpIHtcblx0ICAgICAgICBpZiAocHJvcFZhbHVlKSB7XG5cdCAgICAgICAgICBlbnF1ZXVlUHV0TGlzdGVuZXIodGhpcy5fcm9vdE5vZGVJRCwgcHJvcEtleSwgcHJvcFZhbHVlLCB0cmFuc2FjdGlvbik7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGlmIChwcm9wS2V5ID09PSBTVFlMRSkge1xuXHQgICAgICAgICAgaWYgKHByb3BWYWx1ZSkge1xuXHQgICAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgICAgICAgIC8vIFNlZSBgX3VwZGF0ZURPTVByb3BlcnRpZXNgLiBzdHlsZSBibG9ja1xuXHQgICAgICAgICAgICAgIHRoaXMuX3ByZXZpb3VzU3R5bGUgPSBwcm9wVmFsdWU7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgcHJvcFZhbHVlID0gdGhpcy5fcHJldmlvdXNTdHlsZUNvcHkgPSBhc3NpZ24oe30sIHByb3BzLnN0eWxlKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIHByb3BWYWx1ZSA9IENTU1Byb3BlcnR5T3BlcmF0aW9ucy5jcmVhdGVNYXJrdXBGb3JTdHlsZXMocHJvcFZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIG1hcmt1cCA9IG51bGw7XG5cdCAgICAgICAgaWYgKHRoaXMuX3RhZyAhPSBudWxsICYmIGlzQ3VzdG9tQ29tcG9uZW50KHRoaXMuX3RhZywgcHJvcHMpKSB7XG5cdCAgICAgICAgICBpZiAocHJvcEtleSAhPT0gQ0hJTERSRU4pIHtcblx0ICAgICAgICAgICAgbWFya3VwID0gRE9NUHJvcGVydHlPcGVyYXRpb25zLmNyZWF0ZU1hcmt1cEZvckN1c3RvbUF0dHJpYnV0ZShwcm9wS2V5LCBwcm9wVmFsdWUpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBtYXJrdXAgPSBET01Qcm9wZXJ0eU9wZXJhdGlvbnMuY3JlYXRlTWFya3VwRm9yUHJvcGVydHkocHJvcEtleSwgcHJvcFZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKG1hcmt1cCkge1xuXHQgICAgICAgICAgcmV0ICs9ICcgJyArIG1hcmt1cDtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICAvLyBGb3Igc3RhdGljIHBhZ2VzLCBubyBuZWVkIHRvIHB1dCBSZWFjdCBJRCBhbmQgY2hlY2tzdW0uIFNhdmVzIGxvdHMgb2Zcblx0ICAgIC8vIGJ5dGVzLlxuXHQgICAgaWYgKHRyYW5zYWN0aW9uLnJlbmRlclRvU3RhdGljTWFya3VwKSB7XG5cdCAgICAgIHJldHVybiByZXQ7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIG1hcmt1cEZvcklEID0gRE9NUHJvcGVydHlPcGVyYXRpb25zLmNyZWF0ZU1hcmt1cEZvcklEKHRoaXMuX3Jvb3ROb2RlSUQpO1xuXHQgICAgcmV0dXJuIHJldCArICcgJyArIG1hcmt1cEZvcklEO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIENyZWF0ZXMgbWFya3VwIGZvciB0aGUgY29udGVudCBiZXR3ZWVuIHRoZSB0YWdzLlxuXHQgICAqXG5cdCAgICogQHByaXZhdGVcblx0ICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb258UmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cblx0ICAgKiBAcGFyYW0ge29iamVjdH0gcHJvcHNcblx0ICAgKiBAcGFyYW0ge29iamVjdH0gY29udGV4dFxuXHQgICAqIEByZXR1cm4ge3N0cmluZ30gQ29udGVudCBtYXJrdXAuXG5cdCAgICovXG5cdCAgX2NyZWF0ZUNvbnRlbnRNYXJrdXA6IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgcHJvcHMsIGNvbnRleHQpIHtcblx0ICAgIHZhciByZXQgPSAnJztcblx0XG5cdCAgICAvLyBJbnRlbnRpb25hbCB1c2Ugb2YgIT0gdG8gYXZvaWQgY2F0Y2hpbmcgemVyby9mYWxzZS5cblx0ICAgIHZhciBpbm5lckhUTUwgPSBwcm9wcy5kYW5nZXJvdXNseVNldElubmVySFRNTDtcblx0ICAgIGlmIChpbm5lckhUTUwgIT0gbnVsbCkge1xuXHQgICAgICBpZiAoaW5uZXJIVE1MLl9faHRtbCAhPSBudWxsKSB7XG5cdCAgICAgICAgcmV0ID0gaW5uZXJIVE1MLl9faHRtbDtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdmFyIGNvbnRlbnRUb1VzZSA9IENPTlRFTlRfVFlQRVNbdHlwZW9mIHByb3BzLmNoaWxkcmVuXSA/IHByb3BzLmNoaWxkcmVuIDogbnVsbDtcblx0ICAgICAgdmFyIGNoaWxkcmVuVG9Vc2UgPSBjb250ZW50VG9Vc2UgIT0gbnVsbCA/IG51bGwgOiBwcm9wcy5jaGlsZHJlbjtcblx0ICAgICAgaWYgKGNvbnRlbnRUb1VzZSAhPSBudWxsKSB7XG5cdCAgICAgICAgLy8gVE9ETzogVmFsaWRhdGUgdGhhdCB0ZXh0IGlzIGFsbG93ZWQgYXMgYSBjaGlsZCBvZiB0aGlzIG5vZGVcblx0ICAgICAgICByZXQgPSBlc2NhcGVUZXh0Q29udGVudEZvckJyb3dzZXIoY29udGVudFRvVXNlKTtcblx0ICAgICAgfSBlbHNlIGlmIChjaGlsZHJlblRvVXNlICE9IG51bGwpIHtcblx0ICAgICAgICB2YXIgbW91bnRJbWFnZXMgPSB0aGlzLm1vdW50Q2hpbGRyZW4oY2hpbGRyZW5Ub1VzZSwgdHJhbnNhY3Rpb24sIGNvbnRleHQpO1xuXHQgICAgICAgIHJldCA9IG1vdW50SW1hZ2VzLmpvaW4oJycpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBpZiAobmV3bGluZUVhdGluZ1RhZ3NbdGhpcy5fdGFnXSAmJiByZXQuY2hhckF0KDApID09PSAnXFxuJykge1xuXHQgICAgICAvLyB0ZXh0L2h0bWwgaWdub3JlcyB0aGUgZmlyc3QgY2hhcmFjdGVyIGluIHRoZXNlIHRhZ3MgaWYgaXQncyBhIG5ld2xpbmVcblx0ICAgICAgLy8gUHJlZmVyIHRvIGJyZWFrIGFwcGxpY2F0aW9uL3htbCBvdmVyIHRleHQvaHRtbCAoZm9yIG5vdykgYnkgYWRkaW5nXG5cdCAgICAgIC8vIGEgbmV3bGluZSBzcGVjaWZpY2FsbHkgdG8gZ2V0IGVhdGVuIGJ5IHRoZSBwYXJzZXIuIChBbHRlcm5hdGVseSBmb3Jcblx0ICAgICAgLy8gdGV4dGFyZWFzLCByZXBsYWNpbmcgXCJeXFxuXCIgd2l0aCBcIlxcclxcblwiIGRvZXNuJ3QgZ2V0IGVhdGVuLCBhbmQgdGhlIGZpcnN0XG5cdCAgICAgIC8vIFxcciBpcyBub3JtYWxpemVkIG91dCBieSBIVE1MVGV4dEFyZWFFbGVtZW50I3ZhbHVlLilcblx0ICAgICAgLy8gU2VlOiA8aHR0cDovL3d3dy53My5vcmcvVFIvaHRtbC1wb2x5Z2xvdC8jbmV3bGluZXMtaW4tdGV4dGFyZWEtYW5kLXByZT5cblx0ICAgICAgLy8gU2VlOiA8aHR0cDovL3d3dy53My5vcmcvVFIvaHRtbDUvc3ludGF4Lmh0bWwjZWxlbWVudC1yZXN0cmljdGlvbnM+XG5cdCAgICAgIC8vIFNlZTogPGh0dHA6Ly93d3cudzMub3JnL1RSL2h0bWw1L3N5bnRheC5odG1sI25ld2xpbmVzPlxuXHQgICAgICAvLyBTZWU6IFBhcnNpbmcgb2YgXCJ0ZXh0YXJlYVwiIFwibGlzdGluZ1wiIGFuZCBcInByZVwiIGVsZW1lbnRzXG5cdCAgICAgIC8vICBmcm9tIDxodHRwOi8vd3d3LnczLm9yZy9UUi9odG1sNS9zeW50YXguaHRtbCNwYXJzaW5nLW1haW4taW5ib2R5PlxuXHQgICAgICByZXR1cm4gJ1xcbicgKyByZXQ7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gcmV0O1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIF9jcmVhdGVJbml0aWFsQ2hpbGRyZW46IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgcHJvcHMsIGNvbnRleHQsIGVsKSB7XG5cdCAgICAvLyBJbnRlbnRpb25hbCB1c2Ugb2YgIT0gdG8gYXZvaWQgY2F0Y2hpbmcgemVyby9mYWxzZS5cblx0ICAgIHZhciBpbm5lckhUTUwgPSBwcm9wcy5kYW5nZXJvdXNseVNldElubmVySFRNTDtcblx0ICAgIGlmIChpbm5lckhUTUwgIT0gbnVsbCkge1xuXHQgICAgICBpZiAoaW5uZXJIVE1MLl9faHRtbCAhPSBudWxsKSB7XG5cdCAgICAgICAgc2V0SW5uZXJIVE1MKGVsLCBpbm5lckhUTUwuX19odG1sKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdmFyIGNvbnRlbnRUb1VzZSA9IENPTlRFTlRfVFlQRVNbdHlwZW9mIHByb3BzLmNoaWxkcmVuXSA/IHByb3BzLmNoaWxkcmVuIDogbnVsbDtcblx0ICAgICAgdmFyIGNoaWxkcmVuVG9Vc2UgPSBjb250ZW50VG9Vc2UgIT0gbnVsbCA/IG51bGwgOiBwcm9wcy5jaGlsZHJlbjtcblx0ICAgICAgaWYgKGNvbnRlbnRUb1VzZSAhPSBudWxsKSB7XG5cdCAgICAgICAgLy8gVE9ETzogVmFsaWRhdGUgdGhhdCB0ZXh0IGlzIGFsbG93ZWQgYXMgYSBjaGlsZCBvZiB0aGlzIG5vZGVcblx0ICAgICAgICBzZXRUZXh0Q29udGVudChlbCwgY29udGVudFRvVXNlKTtcblx0ICAgICAgfSBlbHNlIGlmIChjaGlsZHJlblRvVXNlICE9IG51bGwpIHtcblx0ICAgICAgICB2YXIgbW91bnRJbWFnZXMgPSB0aGlzLm1vdW50Q2hpbGRyZW4oY2hpbGRyZW5Ub1VzZSwgdHJhbnNhY3Rpb24sIGNvbnRleHQpO1xuXHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbW91bnRJbWFnZXMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgIGVsLmFwcGVuZENoaWxkKG1vdW50SW1hZ2VzW2ldKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBSZWNlaXZlcyBhIG5leHQgZWxlbWVudCBhbmQgdXBkYXRlcyB0aGUgY29tcG9uZW50LlxuXHQgICAqXG5cdCAgICogQGludGVybmFsXG5cdCAgICogQHBhcmFtIHtSZWFjdEVsZW1lbnR9IG5leHRFbGVtZW50XG5cdCAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufFJlYWN0U2VydmVyUmVuZGVyaW5nVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG5cdCAgICogQHBhcmFtIHtvYmplY3R9IGNvbnRleHRcblx0ICAgKi9cblx0ICByZWNlaXZlQ29tcG9uZW50OiBmdW5jdGlvbiAobmV4dEVsZW1lbnQsIHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG5cdCAgICB2YXIgcHJldkVsZW1lbnQgPSB0aGlzLl9jdXJyZW50RWxlbWVudDtcblx0ICAgIHRoaXMuX2N1cnJlbnRFbGVtZW50ID0gbmV4dEVsZW1lbnQ7XG5cdCAgICB0aGlzLnVwZGF0ZUNvbXBvbmVudCh0cmFuc2FjdGlvbiwgcHJldkVsZW1lbnQsIG5leHRFbGVtZW50LCBjb250ZXh0KTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBVcGRhdGVzIGEgbmF0aXZlIERPTSBjb21wb25lbnQgYWZ0ZXIgaXQgaGFzIGFscmVhZHkgYmVlbiBhbGxvY2F0ZWQgYW5kXG5cdCAgICogYXR0YWNoZWQgdG8gdGhlIERPTS4gUmVjb25jaWxlcyB0aGUgcm9vdCBET00gbm9kZSwgdGhlbiByZWN1cnNlcy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cblx0ICAgKiBAcGFyYW0ge1JlYWN0RWxlbWVudH0gcHJldkVsZW1lbnRcblx0ICAgKiBAcGFyYW0ge1JlYWN0RWxlbWVudH0gbmV4dEVsZW1lbnRcblx0ICAgKiBAaW50ZXJuYWxcblx0ICAgKiBAb3ZlcnJpZGFibGVcblx0ICAgKi9cblx0ICB1cGRhdGVDb21wb25lbnQ6IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgcHJldkVsZW1lbnQsIG5leHRFbGVtZW50LCBjb250ZXh0KSB7XG5cdCAgICB2YXIgbGFzdFByb3BzID0gcHJldkVsZW1lbnQucHJvcHM7XG5cdCAgICB2YXIgbmV4dFByb3BzID0gdGhpcy5fY3VycmVudEVsZW1lbnQucHJvcHM7XG5cdFxuXHQgICAgc3dpdGNoICh0aGlzLl90YWcpIHtcblx0ICAgICAgY2FzZSAnYnV0dG9uJzpcblx0ICAgICAgICBsYXN0UHJvcHMgPSBSZWFjdERPTUJ1dHRvbi5nZXROYXRpdmVQcm9wcyh0aGlzLCBsYXN0UHJvcHMpO1xuXHQgICAgICAgIG5leHRQcm9wcyA9IFJlYWN0RE9NQnV0dG9uLmdldE5hdGl2ZVByb3BzKHRoaXMsIG5leHRQcm9wcyk7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIGNhc2UgJ2lucHV0Jzpcblx0ICAgICAgICBSZWFjdERPTUlucHV0LnVwZGF0ZVdyYXBwZXIodGhpcyk7XG5cdCAgICAgICAgbGFzdFByb3BzID0gUmVhY3RET01JbnB1dC5nZXROYXRpdmVQcm9wcyh0aGlzLCBsYXN0UHJvcHMpO1xuXHQgICAgICAgIG5leHRQcm9wcyA9IFJlYWN0RE9NSW5wdXQuZ2V0TmF0aXZlUHJvcHModGhpcywgbmV4dFByb3BzKTtcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgY2FzZSAnb3B0aW9uJzpcblx0ICAgICAgICBsYXN0UHJvcHMgPSBSZWFjdERPTU9wdGlvbi5nZXROYXRpdmVQcm9wcyh0aGlzLCBsYXN0UHJvcHMpO1xuXHQgICAgICAgIG5leHRQcm9wcyA9IFJlYWN0RE9NT3B0aW9uLmdldE5hdGl2ZVByb3BzKHRoaXMsIG5leHRQcm9wcyk7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIGNhc2UgJ3NlbGVjdCc6XG5cdCAgICAgICAgbGFzdFByb3BzID0gUmVhY3RET01TZWxlY3QuZ2V0TmF0aXZlUHJvcHModGhpcywgbGFzdFByb3BzKTtcblx0ICAgICAgICBuZXh0UHJvcHMgPSBSZWFjdERPTVNlbGVjdC5nZXROYXRpdmVQcm9wcyh0aGlzLCBuZXh0UHJvcHMpO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICBjYXNlICd0ZXh0YXJlYSc6XG5cdCAgICAgICAgUmVhY3RET01UZXh0YXJlYS51cGRhdGVXcmFwcGVyKHRoaXMpO1xuXHQgICAgICAgIGxhc3RQcm9wcyA9IFJlYWN0RE9NVGV4dGFyZWEuZ2V0TmF0aXZlUHJvcHModGhpcywgbGFzdFByb3BzKTtcblx0ICAgICAgICBuZXh0UHJvcHMgPSBSZWFjdERPTVRleHRhcmVhLmdldE5hdGl2ZVByb3BzKHRoaXMsIG5leHRQcm9wcyk7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgLy8gSWYgdGhlIGNvbnRleHQgaXMgcmVmZXJlbmNlLWVxdWFsIHRvIHRoZSBvbGQgb25lLCBwYXNzIGRvd24gdGhlIHNhbWVcblx0ICAgICAgLy8gcHJvY2Vzc2VkIG9iamVjdCBzbyB0aGUgdXBkYXRlIGJhaWxvdXQgaW4gUmVhY3RSZWNvbmNpbGVyIGJlaGF2ZXNcblx0ICAgICAgLy8gY29ycmVjdGx5IChhbmQgaWRlbnRpY2FsbHkgaW4gZGV2IGFuZCBwcm9kKS4gU2VlICM1MDA1LlxuXHQgICAgICBpZiAodGhpcy5fdW5wcm9jZXNzZWRDb250ZXh0RGV2ICE9PSBjb250ZXh0KSB7XG5cdCAgICAgICAgdGhpcy5fdW5wcm9jZXNzZWRDb250ZXh0RGV2ID0gY29udGV4dDtcblx0ICAgICAgICB0aGlzLl9wcm9jZXNzZWRDb250ZXh0RGV2ID0gcHJvY2Vzc0NoaWxkQ29udGV4dERldihjb250ZXh0LCB0aGlzKTtcblx0ICAgICAgfVxuXHQgICAgICBjb250ZXh0ID0gdGhpcy5fcHJvY2Vzc2VkQ29udGV4dERldjtcblx0ICAgIH1cblx0XG5cdCAgICBhc3NlcnRWYWxpZFByb3BzKHRoaXMsIG5leHRQcm9wcyk7XG5cdCAgICB0aGlzLl91cGRhdGVET01Qcm9wZXJ0aWVzKGxhc3RQcm9wcywgbmV4dFByb3BzLCB0cmFuc2FjdGlvbiwgbnVsbCk7XG5cdCAgICB0aGlzLl91cGRhdGVET01DaGlsZHJlbihsYXN0UHJvcHMsIG5leHRQcm9wcywgdHJhbnNhY3Rpb24sIGNvbnRleHQpO1xuXHRcblx0ICAgIGlmICghY2FuRGVmaW5lUHJvcGVydHkgJiYgdGhpcy5fbm9kZVdpdGhMZWdhY3lQcm9wZXJ0aWVzKSB7XG5cdCAgICAgIHRoaXMuX25vZGVXaXRoTGVnYWN5UHJvcGVydGllcy5wcm9wcyA9IG5leHRQcm9wcztcblx0ICAgIH1cblx0XG5cdCAgICBpZiAodGhpcy5fdGFnID09PSAnc2VsZWN0Jykge1xuXHQgICAgICAvLyA8c2VsZWN0PiB2YWx1ZSB1cGRhdGUgbmVlZHMgdG8gb2NjdXIgYWZ0ZXIgPG9wdGlvbj4gY2hpbGRyZW5cblx0ICAgICAgLy8gcmVjb25jaWxpYXRpb25cblx0ICAgICAgdHJhbnNhY3Rpb24uZ2V0UmVhY3RNb3VudFJlYWR5KCkuZW5xdWV1ZShwb3N0VXBkYXRlU2VsZWN0V3JhcHBlciwgdGhpcyk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogUmVjb25jaWxlcyB0aGUgcHJvcGVydGllcyBieSBkZXRlY3RpbmcgZGlmZmVyZW5jZXMgaW4gcHJvcGVydHkgdmFsdWVzIGFuZFxuXHQgICAqIHVwZGF0aW5nIHRoZSBET00gYXMgbmVjZXNzYXJ5LiBUaGlzIGZ1bmN0aW9uIGlzIHByb2JhYmx5IHRoZSBzaW5nbGUgbW9zdFxuXHQgICAqIGNyaXRpY2FsIHBhdGggZm9yIHBlcmZvcm1hbmNlIG9wdGltaXphdGlvbi5cblx0ICAgKlxuXHQgICAqIFRPRE86IEJlbmNobWFyayB3aGV0aGVyIGNoZWNraW5nIGZvciBjaGFuZ2VkIHZhbHVlcyBpbiBtZW1vcnkgYWN0dWFsbHlcblx0ICAgKiAgICAgICBpbXByb3ZlcyBwZXJmb3JtYW5jZSAoZXNwZWNpYWxseSBzdGF0aWNhbGx5IHBvc2l0aW9uZWQgZWxlbWVudHMpLlxuXHQgICAqIFRPRE86IEJlbmNobWFyayB0aGUgZWZmZWN0cyBvZiBwdXR0aW5nIHRoaXMgYXQgdGhlIHRvcCBzaW5jZSA5OSUgb2YgcHJvcHNcblx0ICAgKiAgICAgICBkbyBub3QgY2hhbmdlIGZvciBhIGdpdmVuIHJlY29uY2lsaWF0aW9uLlxuXHQgICAqIFRPRE86IEJlbmNobWFyayBhcmVhcyB0aGF0IGNhbiBiZSBpbXByb3ZlZCB3aXRoIGNhY2hpbmcuXG5cdCAgICpcblx0ICAgKiBAcHJpdmF0ZVxuXHQgICAqIEBwYXJhbSB7b2JqZWN0fSBsYXN0UHJvcHNcblx0ICAgKiBAcGFyYW0ge29iamVjdH0gbmV4dFByb3BzXG5cdCAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuXHQgICAqIEBwYXJhbSB7P0RPTUVsZW1lbnR9IG5vZGVcblx0ICAgKi9cblx0ICBfdXBkYXRlRE9NUHJvcGVydGllczogZnVuY3Rpb24gKGxhc3RQcm9wcywgbmV4dFByb3BzLCB0cmFuc2FjdGlvbiwgbm9kZSkge1xuXHQgICAgdmFyIHByb3BLZXk7XG5cdCAgICB2YXIgc3R5bGVOYW1lO1xuXHQgICAgdmFyIHN0eWxlVXBkYXRlcztcblx0ICAgIGZvciAocHJvcEtleSBpbiBsYXN0UHJvcHMpIHtcblx0ICAgICAgaWYgKG5leHRQcm9wcy5oYXNPd25Qcm9wZXJ0eShwcm9wS2V5KSB8fCAhbGFzdFByb3BzLmhhc093blByb3BlcnR5KHByb3BLZXkpKSB7XG5cdCAgICAgICAgY29udGludWU7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKHByb3BLZXkgPT09IFNUWUxFKSB7XG5cdCAgICAgICAgdmFyIGxhc3RTdHlsZSA9IHRoaXMuX3ByZXZpb3VzU3R5bGVDb3B5O1xuXHQgICAgICAgIGZvciAoc3R5bGVOYW1lIGluIGxhc3RTdHlsZSkge1xuXHQgICAgICAgICAgaWYgKGxhc3RTdHlsZS5oYXNPd25Qcm9wZXJ0eShzdHlsZU5hbWUpKSB7XG5cdCAgICAgICAgICAgIHN0eWxlVXBkYXRlcyA9IHN0eWxlVXBkYXRlcyB8fCB7fTtcblx0ICAgICAgICAgICAgc3R5bGVVcGRhdGVzW3N0eWxlTmFtZV0gPSAnJztcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5fcHJldmlvdXNTdHlsZUNvcHkgPSBudWxsO1xuXHQgICAgICB9IGVsc2UgaWYgKHJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzLmhhc093blByb3BlcnR5KHByb3BLZXkpKSB7XG5cdCAgICAgICAgaWYgKGxhc3RQcm9wc1twcm9wS2V5XSkge1xuXHQgICAgICAgICAgLy8gT25seSBjYWxsIGRlbGV0ZUxpc3RlbmVyIGlmIHRoZXJlIHdhcyBhIGxpc3RlbmVyIHByZXZpb3VzbHkgb3Jcblx0ICAgICAgICAgIC8vIGVsc2Ugd2lsbERlbGV0ZUxpc3RlbmVyIGdldHMgY2FsbGVkIHdoZW4gdGhlcmUgd2Fzbid0IGFjdHVhbGx5IGFcblx0ICAgICAgICAgIC8vIGxpc3RlbmVyIChlLmcuLCBvbkNsaWNrPXtudWxsfSlcblx0ICAgICAgICAgIGRlbGV0ZUxpc3RlbmVyKHRoaXMuX3Jvb3ROb2RlSUQsIHByb3BLZXkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIGlmIChET01Qcm9wZXJ0eS5wcm9wZXJ0aWVzW3Byb3BLZXldIHx8IERPTVByb3BlcnR5LmlzQ3VzdG9tQXR0cmlidXRlKHByb3BLZXkpKSB7XG5cdCAgICAgICAgaWYgKCFub2RlKSB7XG5cdCAgICAgICAgICBub2RlID0gUmVhY3RNb3VudC5nZXROb2RlKHRoaXMuX3Jvb3ROb2RlSUQpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBET01Qcm9wZXJ0eU9wZXJhdGlvbnMuZGVsZXRlVmFsdWVGb3JQcm9wZXJ0eShub2RlLCBwcm9wS2V5KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgZm9yIChwcm9wS2V5IGluIG5leHRQcm9wcykge1xuXHQgICAgICB2YXIgbmV4dFByb3AgPSBuZXh0UHJvcHNbcHJvcEtleV07XG5cdCAgICAgIHZhciBsYXN0UHJvcCA9IHByb3BLZXkgPT09IFNUWUxFID8gdGhpcy5fcHJldmlvdXNTdHlsZUNvcHkgOiBsYXN0UHJvcHNbcHJvcEtleV07XG5cdCAgICAgIGlmICghbmV4dFByb3BzLmhhc093blByb3BlcnR5KHByb3BLZXkpIHx8IG5leHRQcm9wID09PSBsYXN0UHJvcCkge1xuXHQgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChwcm9wS2V5ID09PSBTVFlMRSkge1xuXHQgICAgICAgIGlmIChuZXh0UHJvcCkge1xuXHQgICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgICAgICAgY2hlY2tBbmRXYXJuRm9yTXV0YXRlZFN0eWxlKHRoaXMuX3ByZXZpb3VzU3R5bGVDb3B5LCB0aGlzLl9wcmV2aW91c1N0eWxlLCB0aGlzKTtcblx0ICAgICAgICAgICAgdGhpcy5fcHJldmlvdXNTdHlsZSA9IG5leHRQcm9wO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgbmV4dFByb3AgPSB0aGlzLl9wcmV2aW91c1N0eWxlQ29weSA9IGFzc2lnbih7fSwgbmV4dFByb3ApO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICB0aGlzLl9wcmV2aW91c1N0eWxlQ29weSA9IG51bGw7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChsYXN0UHJvcCkge1xuXHQgICAgICAgICAgLy8gVW5zZXQgc3R5bGVzIG9uIGBsYXN0UHJvcGAgYnV0IG5vdCBvbiBgbmV4dFByb3BgLlxuXHQgICAgICAgICAgZm9yIChzdHlsZU5hbWUgaW4gbGFzdFByb3ApIHtcblx0ICAgICAgICAgICAgaWYgKGxhc3RQcm9wLmhhc093blByb3BlcnR5KHN0eWxlTmFtZSkgJiYgKCFuZXh0UHJvcCB8fCAhbmV4dFByb3AuaGFzT3duUHJvcGVydHkoc3R5bGVOYW1lKSkpIHtcblx0ICAgICAgICAgICAgICBzdHlsZVVwZGF0ZXMgPSBzdHlsZVVwZGF0ZXMgfHwge307XG5cdCAgICAgICAgICAgICAgc3R5bGVVcGRhdGVzW3N0eWxlTmFtZV0gPSAnJztcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgLy8gVXBkYXRlIHN0eWxlcyB0aGF0IGNoYW5nZWQgc2luY2UgYGxhc3RQcm9wYC5cblx0ICAgICAgICAgIGZvciAoc3R5bGVOYW1lIGluIG5leHRQcm9wKSB7XG5cdCAgICAgICAgICAgIGlmIChuZXh0UHJvcC5oYXNPd25Qcm9wZXJ0eShzdHlsZU5hbWUpICYmIGxhc3RQcm9wW3N0eWxlTmFtZV0gIT09IG5leHRQcm9wW3N0eWxlTmFtZV0pIHtcblx0ICAgICAgICAgICAgICBzdHlsZVVwZGF0ZXMgPSBzdHlsZVVwZGF0ZXMgfHwge307XG5cdCAgICAgICAgICAgICAgc3R5bGVVcGRhdGVzW3N0eWxlTmFtZV0gPSBuZXh0UHJvcFtzdHlsZU5hbWVdO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIC8vIFJlbGllcyBvbiBgdXBkYXRlU3R5bGVzQnlJRGAgbm90IG11dGF0aW5nIGBzdHlsZVVwZGF0ZXNgLlxuXHQgICAgICAgICAgc3R5bGVVcGRhdGVzID0gbmV4dFByb3A7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2UgaWYgKHJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzLmhhc093blByb3BlcnR5KHByb3BLZXkpKSB7XG5cdCAgICAgICAgaWYgKG5leHRQcm9wKSB7XG5cdCAgICAgICAgICBlbnF1ZXVlUHV0TGlzdGVuZXIodGhpcy5fcm9vdE5vZGVJRCwgcHJvcEtleSwgbmV4dFByb3AsIHRyYW5zYWN0aW9uKTtcblx0ICAgICAgICB9IGVsc2UgaWYgKGxhc3RQcm9wKSB7XG5cdCAgICAgICAgICBkZWxldGVMaXN0ZW5lcih0aGlzLl9yb290Tm9kZUlELCBwcm9wS2V5KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSBpZiAoaXNDdXN0b21Db21wb25lbnQodGhpcy5fdGFnLCBuZXh0UHJvcHMpKSB7XG5cdCAgICAgICAgaWYgKCFub2RlKSB7XG5cdCAgICAgICAgICBub2RlID0gUmVhY3RNb3VudC5nZXROb2RlKHRoaXMuX3Jvb3ROb2RlSUQpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAocHJvcEtleSA9PT0gQ0hJTERSRU4pIHtcblx0ICAgICAgICAgIG5leHRQcm9wID0gbnVsbDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgRE9NUHJvcGVydHlPcGVyYXRpb25zLnNldFZhbHVlRm9yQXR0cmlidXRlKG5vZGUsIHByb3BLZXksIG5leHRQcm9wKTtcblx0ICAgICAgfSBlbHNlIGlmIChET01Qcm9wZXJ0eS5wcm9wZXJ0aWVzW3Byb3BLZXldIHx8IERPTVByb3BlcnR5LmlzQ3VzdG9tQXR0cmlidXRlKHByb3BLZXkpKSB7XG5cdCAgICAgICAgaWYgKCFub2RlKSB7XG5cdCAgICAgICAgICBub2RlID0gUmVhY3RNb3VudC5nZXROb2RlKHRoaXMuX3Jvb3ROb2RlSUQpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICAvLyBJZiB3ZSdyZSB1cGRhdGluZyB0byBudWxsIG9yIHVuZGVmaW5lZCwgd2Ugc2hvdWxkIHJlbW92ZSB0aGUgcHJvcGVydHlcblx0ICAgICAgICAvLyBmcm9tIHRoZSBET00gbm9kZSBpbnN0ZWFkIG9mIGluYWR2ZXJ0YW50bHkgc2V0dGluZyB0byBhIHN0cmluZy4gVGhpc1xuXHQgICAgICAgIC8vIGJyaW5ncyB1cyBpbiBsaW5lIHdpdGggdGhlIHNhbWUgYmVoYXZpb3Igd2UgaGF2ZSBvbiBpbml0aWFsIHJlbmRlci5cblx0ICAgICAgICBpZiAobmV4dFByb3AgIT0gbnVsbCkge1xuXHQgICAgICAgICAgRE9NUHJvcGVydHlPcGVyYXRpb25zLnNldFZhbHVlRm9yUHJvcGVydHkobm9kZSwgcHJvcEtleSwgbmV4dFByb3ApO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBET01Qcm9wZXJ0eU9wZXJhdGlvbnMuZGVsZXRlVmFsdWVGb3JQcm9wZXJ0eShub2RlLCBwcm9wS2V5KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGlmIChzdHlsZVVwZGF0ZXMpIHtcblx0ICAgICAgaWYgKCFub2RlKSB7XG5cdCAgICAgICAgbm9kZSA9IFJlYWN0TW91bnQuZ2V0Tm9kZSh0aGlzLl9yb290Tm9kZUlEKTtcblx0ICAgICAgfVxuXHQgICAgICBDU1NQcm9wZXJ0eU9wZXJhdGlvbnMuc2V0VmFsdWVGb3JTdHlsZXMobm9kZSwgc3R5bGVVcGRhdGVzKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBSZWNvbmNpbGVzIHRoZSBjaGlsZHJlbiB3aXRoIHRoZSB2YXJpb3VzIHByb3BlcnRpZXMgdGhhdCBhZmZlY3QgdGhlXG5cdCAgICogY2hpbGRyZW4gY29udGVudC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7b2JqZWN0fSBsYXN0UHJvcHNcblx0ICAgKiBAcGFyYW0ge29iamVjdH0gbmV4dFByb3BzXG5cdCAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuXHQgICAqIEBwYXJhbSB7b2JqZWN0fSBjb250ZXh0XG5cdCAgICovXG5cdCAgX3VwZGF0ZURPTUNoaWxkcmVuOiBmdW5jdGlvbiAobGFzdFByb3BzLCBuZXh0UHJvcHMsIHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG5cdCAgICB2YXIgbGFzdENvbnRlbnQgPSBDT05URU5UX1RZUEVTW3R5cGVvZiBsYXN0UHJvcHMuY2hpbGRyZW5dID8gbGFzdFByb3BzLmNoaWxkcmVuIDogbnVsbDtcblx0ICAgIHZhciBuZXh0Q29udGVudCA9IENPTlRFTlRfVFlQRVNbdHlwZW9mIG5leHRQcm9wcy5jaGlsZHJlbl0gPyBuZXh0UHJvcHMuY2hpbGRyZW4gOiBudWxsO1xuXHRcblx0ICAgIHZhciBsYXN0SHRtbCA9IGxhc3RQcm9wcy5kYW5nZXJvdXNseVNldElubmVySFRNTCAmJiBsYXN0UHJvcHMuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwuX19odG1sO1xuXHQgICAgdmFyIG5leHRIdG1sID0gbmV4dFByb3BzLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MICYmIG5leHRQcm9wcy5kYW5nZXJvdXNseVNldElubmVySFRNTC5fX2h0bWw7XG5cdFxuXHQgICAgLy8gTm90ZSB0aGUgdXNlIG9mIGAhPWAgd2hpY2ggY2hlY2tzIGZvciBudWxsIG9yIHVuZGVmaW5lZC5cblx0ICAgIHZhciBsYXN0Q2hpbGRyZW4gPSBsYXN0Q29udGVudCAhPSBudWxsID8gbnVsbCA6IGxhc3RQcm9wcy5jaGlsZHJlbjtcblx0ICAgIHZhciBuZXh0Q2hpbGRyZW4gPSBuZXh0Q29udGVudCAhPSBudWxsID8gbnVsbCA6IG5leHRQcm9wcy5jaGlsZHJlbjtcblx0XG5cdCAgICAvLyBJZiB3ZSdyZSBzd2l0Y2hpbmcgZnJvbSBjaGlsZHJlbiB0byBjb250ZW50L2h0bWwgb3IgdmljZSB2ZXJzYSwgcmVtb3ZlXG5cdCAgICAvLyB0aGUgb2xkIGNvbnRlbnRcblx0ICAgIHZhciBsYXN0SGFzQ29udGVudE9ySHRtbCA9IGxhc3RDb250ZW50ICE9IG51bGwgfHwgbGFzdEh0bWwgIT0gbnVsbDtcblx0ICAgIHZhciBuZXh0SGFzQ29udGVudE9ySHRtbCA9IG5leHRDb250ZW50ICE9IG51bGwgfHwgbmV4dEh0bWwgIT0gbnVsbDtcblx0ICAgIGlmIChsYXN0Q2hpbGRyZW4gIT0gbnVsbCAmJiBuZXh0Q2hpbGRyZW4gPT0gbnVsbCkge1xuXHQgICAgICB0aGlzLnVwZGF0ZUNoaWxkcmVuKG51bGwsIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcblx0ICAgIH0gZWxzZSBpZiAobGFzdEhhc0NvbnRlbnRPckh0bWwgJiYgIW5leHRIYXNDb250ZW50T3JIdG1sKSB7XG5cdCAgICAgIHRoaXMudXBkYXRlVGV4dENvbnRlbnQoJycpO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChuZXh0Q29udGVudCAhPSBudWxsKSB7XG5cdCAgICAgIGlmIChsYXN0Q29udGVudCAhPT0gbmV4dENvbnRlbnQpIHtcblx0ICAgICAgICB0aGlzLnVwZGF0ZVRleHRDb250ZW50KCcnICsgbmV4dENvbnRlbnQpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2UgaWYgKG5leHRIdG1sICE9IG51bGwpIHtcblx0ICAgICAgaWYgKGxhc3RIdG1sICE9PSBuZXh0SHRtbCkge1xuXHQgICAgICAgIHRoaXMudXBkYXRlTWFya3VwKCcnICsgbmV4dEh0bWwpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2UgaWYgKG5leHRDaGlsZHJlbiAhPSBudWxsKSB7XG5cdCAgICAgIHRoaXMudXBkYXRlQ2hpbGRyZW4obmV4dENoaWxkcmVuLCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogRGVzdHJveXMgYWxsIGV2ZW50IHJlZ2lzdHJhdGlvbnMgZm9yIHRoaXMgaW5zdGFuY2UuIERvZXMgbm90IHJlbW92ZSBmcm9tXG5cdCAgICogdGhlIERPTS4gVGhhdCBtdXN0IGJlIGRvbmUgYnkgdGhlIHBhcmVudC5cblx0ICAgKlxuXHQgICAqIEBpbnRlcm5hbFxuXHQgICAqL1xuXHQgIHVubW91bnRDb21wb25lbnQ6IGZ1bmN0aW9uICgpIHtcblx0ICAgIHN3aXRjaCAodGhpcy5fdGFnKSB7XG5cdCAgICAgIGNhc2UgJ2lmcmFtZSc6XG5cdCAgICAgIGNhc2UgJ2ltZyc6XG5cdCAgICAgIGNhc2UgJ2Zvcm0nOlxuXHQgICAgICBjYXNlICd2aWRlbyc6XG5cdCAgICAgIGNhc2UgJ2F1ZGlvJzpcblx0ICAgICAgICB2YXIgbGlzdGVuZXJzID0gdGhpcy5fd3JhcHBlclN0YXRlLmxpc3RlbmVycztcblx0ICAgICAgICBpZiAobGlzdGVuZXJzKSB7XG5cdCAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3RlbmVycy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICBsaXN0ZW5lcnNbaV0ucmVtb3ZlKCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICBjYXNlICdpbnB1dCc6XG5cdCAgICAgICAgUmVhY3RET01JbnB1dC51bm1vdW50V3JhcHBlcih0aGlzKTtcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgY2FzZSAnaHRtbCc6XG5cdCAgICAgIGNhc2UgJ2hlYWQnOlxuXHQgICAgICBjYXNlICdib2R5Jzpcblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBDb21wb25lbnRzIGxpa2UgPGh0bWw+IDxoZWFkPiBhbmQgPGJvZHk+IGNhbid0IGJlIHJlbW92ZWQgb3IgYWRkZWRcblx0ICAgICAgICAgKiBlYXNpbHkgaW4gYSBjcm9zcy1icm93c2VyIHdheSwgaG93ZXZlciBpdCdzIHZhbHVhYmxlIHRvIGJlIGFibGUgdG9cblx0ICAgICAgICAgKiB0YWtlIGFkdmFudGFnZSBvZiBSZWFjdCdzIHJlY29uY2lsaWF0aW9uIGZvciBzdHlsaW5nIGFuZCA8dGl0bGU+XG5cdCAgICAgICAgICogbWFuYWdlbWVudC4gU28gd2UganVzdCBkb2N1bWVudCBpdCBhbmQgdGhyb3cgaW4gZGFuZ2Vyb3VzIGNhc2VzLlxuXHQgICAgICAgICAqL1xuXHQgICAgICAgICB0cnVlID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJzwlcz4gdHJpZWQgdG8gdW5tb3VudC4gQmVjYXVzZSBvZiBjcm9zcy1icm93c2VyIHF1aXJrcyBpdCBpcyAnICsgJ2ltcG9zc2libGUgdG8gdW5tb3VudCBzb21lIHRvcC1sZXZlbCBjb21wb25lbnRzIChlZyA8aHRtbD4sICcgKyAnPGhlYWQ+LCBhbmQgPGJvZHk+KSByZWxpYWJseSBhbmQgZWZmaWNpZW50bHkuIFRvIGZpeCB0aGlzLCBoYXZlIGEgJyArICdzaW5nbGUgdG9wLWxldmVsIGNvbXBvbmVudCB0aGF0IG5ldmVyIHVubW91bnRzIHJlbmRlciB0aGVzZSAnICsgJ2VsZW1lbnRzLicsIHRoaXMuX3RhZykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMudW5tb3VudENoaWxkcmVuKCk7XG5cdCAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuZGVsZXRlQWxsTGlzdGVuZXJzKHRoaXMuX3Jvb3ROb2RlSUQpO1xuXHQgICAgUmVhY3RDb21wb25lbnRCcm93c2VyRW52aXJvbm1lbnQudW5tb3VudElERnJvbUVudmlyb25tZW50KHRoaXMuX3Jvb3ROb2RlSUQpO1xuXHQgICAgdGhpcy5fcm9vdE5vZGVJRCA9IG51bGw7XG5cdCAgICB0aGlzLl93cmFwcGVyU3RhdGUgPSBudWxsO1xuXHQgICAgaWYgKHRoaXMuX25vZGVXaXRoTGVnYWN5UHJvcGVydGllcykge1xuXHQgICAgICB2YXIgbm9kZSA9IHRoaXMuX25vZGVXaXRoTGVnYWN5UHJvcGVydGllcztcblx0ICAgICAgbm9kZS5fcmVhY3RJbnRlcm5hbENvbXBvbmVudCA9IG51bGw7XG5cdCAgICAgIHRoaXMuX25vZGVXaXRoTGVnYWN5UHJvcGVydGllcyA9IG51bGw7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgZ2V0UHVibGljSW5zdGFuY2U6IGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmICghdGhpcy5fbm9kZVdpdGhMZWdhY3lQcm9wZXJ0aWVzKSB7XG5cdCAgICAgIHZhciBub2RlID0gUmVhY3RNb3VudC5nZXROb2RlKHRoaXMuX3Jvb3ROb2RlSUQpO1xuXHRcblx0ICAgICAgbm9kZS5fcmVhY3RJbnRlcm5hbENvbXBvbmVudCA9IHRoaXM7XG5cdCAgICAgIG5vZGUuZ2V0RE9NTm9kZSA9IGxlZ2FjeUdldERPTU5vZGU7XG5cdCAgICAgIG5vZGUuaXNNb3VudGVkID0gbGVnYWN5SXNNb3VudGVkO1xuXHQgICAgICBub2RlLnNldFN0YXRlID0gbGVnYWN5U2V0U3RhdGVFdGM7XG5cdCAgICAgIG5vZGUucmVwbGFjZVN0YXRlID0gbGVnYWN5U2V0U3RhdGVFdGM7XG5cdCAgICAgIG5vZGUuZm9yY2VVcGRhdGUgPSBsZWdhY3lTZXRTdGF0ZUV0Yztcblx0ICAgICAgbm9kZS5zZXRQcm9wcyA9IGxlZ2FjeVNldFByb3BzO1xuXHQgICAgICBub2RlLnJlcGxhY2VQcm9wcyA9IGxlZ2FjeVJlcGxhY2VQcm9wcztcblx0XG5cdCAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgICAgaWYgKGNhbkRlZmluZVByb3BlcnR5KSB7XG5cdCAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhub2RlLCBsZWdhY3lQcm9wc0Rlc2NyaXB0b3IpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAvLyB1cGRhdGVDb21wb25lbnQgd2lsbCB1cGRhdGUgdGhpcyBwcm9wZXJ0eSBvbiBzdWJzZXF1ZW50IHJlbmRlcnNcblx0ICAgICAgICAgIG5vZGUucHJvcHMgPSB0aGlzLl9jdXJyZW50RWxlbWVudC5wcm9wcztcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgLy8gdXBkYXRlQ29tcG9uZW50IHdpbGwgdXBkYXRlIHRoaXMgcHJvcGVydHkgb24gc3Vic2VxdWVudCByZW5kZXJzXG5cdCAgICAgICAgbm9kZS5wcm9wcyA9IHRoaXMuX2N1cnJlbnRFbGVtZW50LnByb3BzO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB0aGlzLl9ub2RlV2l0aExlZ2FjeVByb3BlcnRpZXMgPSBub2RlO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHRoaXMuX25vZGVXaXRoTGVnYWN5UHJvcGVydGllcztcblx0ICB9XG5cdFxuXHR9O1xuXHRcblx0UmVhY3RQZXJmLm1lYXN1cmVNZXRob2RzKFJlYWN0RE9NQ29tcG9uZW50LCAnUmVhY3RET01Db21wb25lbnQnLCB7XG5cdCAgbW91bnRDb21wb25lbnQ6ICdtb3VudENvbXBvbmVudCcsXG5cdCAgdXBkYXRlQ29tcG9uZW50OiAndXBkYXRlQ29tcG9uZW50J1xuXHR9KTtcblx0XG5cdGFzc2lnbihSZWFjdERPTUNvbXBvbmVudC5wcm90b3R5cGUsIFJlYWN0RE9NQ29tcG9uZW50Lk1peGluLCBSZWFjdE11bHRpQ2hpbGQuTWl4aW4pO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBSZWFjdERPTUNvbXBvbmVudDtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oNCkpKVxuXG4vKioqLyB9KSxcbi8qIDk0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBBdXRvRm9jdXNVdGlsc1xuXHQgKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBSZWFjdE1vdW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCk7XG5cdFxuXHR2YXIgZmluZERPTU5vZGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkxKTtcblx0dmFyIGZvY3VzTm9kZSA9IF9fd2VicGFja19yZXF1aXJlX18oOTUpO1xuXHRcblx0dmFyIE1peGluID0ge1xuXHQgIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAodGhpcy5wcm9wcy5hdXRvRm9jdXMpIHtcblx0ICAgICAgZm9jdXNOb2RlKGZpbmRET01Ob2RlKHRoaXMpKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgQXV0b0ZvY3VzVXRpbHMgPSB7XG5cdCAgTWl4aW46IE1peGluLFxuXHRcblx0ICBmb2N1c0RPTUNvbXBvbmVudDogZnVuY3Rpb24gKCkge1xuXHQgICAgZm9jdXNOb2RlKFJlYWN0TW91bnQuZ2V0Tm9kZSh0aGlzLl9yb290Tm9kZUlEKSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBBdXRvRm9jdXNVdGlscztcblxuLyoqKi8gfSksXG4vKiA5NSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgZm9jdXNOb2RlXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0LyoqXG5cdCAqIEBwYXJhbSB7RE9NRWxlbWVudH0gbm9kZSBpbnB1dC90ZXh0YXJlYSB0byBmb2N1c1xuXHQgKi9cblx0ZnVuY3Rpb24gZm9jdXNOb2RlKG5vZGUpIHtcblx0ICAvLyBJRTggY2FuIHRocm93IFwiQ2FuJ3QgbW92ZSBmb2N1cyB0byB0aGUgY29udHJvbCBiZWNhdXNlIGl0IGlzIGludmlzaWJsZSxcblx0ICAvLyBub3QgZW5hYmxlZCwgb3Igb2YgYSB0eXBlIHRoYXQgZG9lcyBub3QgYWNjZXB0IHRoZSBmb2N1cy5cIiBmb3IgYWxsIGtpbmRzIG9mXG5cdCAgLy8gcmVhc29ucyB0aGF0IGFyZSB0b28gZXhwZW5zaXZlIGFuZCBmcmFnaWxlIHRvIHRlc3QuXG5cdCAgdHJ5IHtcblx0ICAgIG5vZGUuZm9jdXMoKTtcblx0ICB9IGNhdGNoIChlKSB7fVxuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZvY3VzTm9kZTtcblxuLyoqKi8gfSksXG4vKiA5NiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzKSB7LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBDU1NQcm9wZXJ0eU9wZXJhdGlvbnNcblx0ICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgQ1NTUHJvcGVydHkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk3KTtcblx0dmFyIEV4ZWN1dGlvbkVudmlyb25tZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0dmFyIFJlYWN0UGVyZiA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHRcblx0dmFyIGNhbWVsaXplU3R5bGVOYW1lID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5OCk7XG5cdHZhciBkYW5nZXJvdXNTdHlsZVZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDApO1xuXHR2YXIgaHlwaGVuYXRlU3R5bGVOYW1lID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDEpO1xuXHR2YXIgbWVtb2l6ZVN0cmluZ09ubHkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwMyk7XG5cdHZhciB3YXJuaW5nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cdFxuXHR2YXIgcHJvY2Vzc1N0eWxlTmFtZSA9IG1lbW9pemVTdHJpbmdPbmx5KGZ1bmN0aW9uIChzdHlsZU5hbWUpIHtcblx0ICByZXR1cm4gaHlwaGVuYXRlU3R5bGVOYW1lKHN0eWxlTmFtZSk7XG5cdH0pO1xuXHRcblx0dmFyIGhhc1Nob3J0aGFuZFByb3BlcnR5QnVnID0gZmFsc2U7XG5cdHZhciBzdHlsZUZsb2F0QWNjZXNzb3IgPSAnY3NzRmxvYXQnO1xuXHRpZiAoRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NKSB7XG5cdCAgdmFyIHRlbXBTdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLnN0eWxlO1xuXHQgIHRyeSB7XG5cdCAgICAvLyBJRTggdGhyb3dzIFwiSW52YWxpZCBhcmd1bWVudC5cIiBpZiByZXNldHRpbmcgc2hvcnRoYW5kIHN0eWxlIHByb3BlcnRpZXMuXG5cdCAgICB0ZW1wU3R5bGUuZm9udCA9ICcnO1xuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIGhhc1Nob3J0aGFuZFByb3BlcnR5QnVnID0gdHJ1ZTtcblx0ICB9XG5cdCAgLy8gSUU4IG9ubHkgc3VwcG9ydHMgYWNjZXNzaW5nIGNzc0Zsb2F0IChzdGFuZGFyZCkgYXMgc3R5bGVGbG9hdFxuXHQgIGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuY3NzRmxvYXQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgc3R5bGVGbG9hdEFjY2Vzc29yID0gJ3N0eWxlRmxvYXQnO1xuXHQgIH1cblx0fVxuXHRcblx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAvLyAnbXNUcmFuc2Zvcm0nIGlzIGNvcnJlY3QsIGJ1dCB0aGUgb3RoZXIgcHJlZml4ZXMgc2hvdWxkIGJlIGNhcGl0YWxpemVkXG5cdCAgdmFyIGJhZFZlbmRvcmVkU3R5bGVOYW1lUGF0dGVybiA9IC9eKD86d2Via2l0fG1venxvKVtBLVpdLztcblx0XG5cdCAgLy8gc3R5bGUgdmFsdWVzIHNob3VsZG4ndCBjb250YWluIGEgc2VtaWNvbG9uXG5cdCAgdmFyIGJhZFN0eWxlVmFsdWVXaXRoU2VtaWNvbG9uUGF0dGVybiA9IC87XFxzKiQvO1xuXHRcblx0ICB2YXIgd2FybmVkU3R5bGVOYW1lcyA9IHt9O1xuXHQgIHZhciB3YXJuZWRTdHlsZVZhbHVlcyA9IHt9O1xuXHRcblx0ICB2YXIgd2Fybkh5cGhlbmF0ZWRTdHlsZU5hbWUgPSBmdW5jdGlvbiAobmFtZSkge1xuXHQgICAgaWYgKHdhcm5lZFN0eWxlTmFtZXMuaGFzT3duUHJvcGVydHkobmFtZSkgJiYgd2FybmVkU3R5bGVOYW1lc1tuYW1lXSkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgd2FybmVkU3R5bGVOYW1lc1tuYW1lXSA9IHRydWU7XG5cdCAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ1Vuc3VwcG9ydGVkIHN0eWxlIHByb3BlcnR5ICVzLiBEaWQgeW91IG1lYW4gJXM/JywgbmFtZSwgY2FtZWxpemVTdHlsZU5hbWUobmFtZSkpIDogdW5kZWZpbmVkO1xuXHQgIH07XG5cdFxuXHQgIHZhciB3YXJuQmFkVmVuZG9yZWRTdHlsZU5hbWUgPSBmdW5jdGlvbiAobmFtZSkge1xuXHQgICAgaWYgKHdhcm5lZFN0eWxlTmFtZXMuaGFzT3duUHJvcGVydHkobmFtZSkgJiYgd2FybmVkU3R5bGVOYW1lc1tuYW1lXSkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgd2FybmVkU3R5bGVOYW1lc1tuYW1lXSA9IHRydWU7XG5cdCAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ1Vuc3VwcG9ydGVkIHZlbmRvci1wcmVmaXhlZCBzdHlsZSBwcm9wZXJ0eSAlcy4gRGlkIHlvdSBtZWFuICVzPycsIG5hbWUsIG5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBuYW1lLnNsaWNlKDEpKSA6IHVuZGVmaW5lZDtcblx0ICB9O1xuXHRcblx0ICB2YXIgd2FyblN0eWxlVmFsdWVXaXRoU2VtaWNvbG9uID0gZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XG5cdCAgICBpZiAod2FybmVkU3R5bGVWYWx1ZXMuaGFzT3duUHJvcGVydHkodmFsdWUpICYmIHdhcm5lZFN0eWxlVmFsdWVzW3ZhbHVlXSkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgd2FybmVkU3R5bGVWYWx1ZXNbdmFsdWVdID0gdHJ1ZTtcblx0ICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnU3R5bGUgcHJvcGVydHkgdmFsdWVzIHNob3VsZG5cXCd0IGNvbnRhaW4gYSBzZW1pY29sb24uICcgKyAnVHJ5IFwiJXM6ICVzXCIgaW5zdGVhZC4nLCBuYW1lLCB2YWx1ZS5yZXBsYWNlKGJhZFN0eWxlVmFsdWVXaXRoU2VtaWNvbG9uUGF0dGVybiwgJycpKSA6IHVuZGVmaW5lZDtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuXHQgICAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICAgKi9cblx0ICB2YXIgd2FyblZhbGlkU3R5bGUgPSBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcblx0ICAgIGlmIChuYW1lLmluZGV4T2YoJy0nKSA+IC0xKSB7XG5cdCAgICAgIHdhcm5IeXBoZW5hdGVkU3R5bGVOYW1lKG5hbWUpO1xuXHQgICAgfSBlbHNlIGlmIChiYWRWZW5kb3JlZFN0eWxlTmFtZVBhdHRlcm4udGVzdChuYW1lKSkge1xuXHQgICAgICB3YXJuQmFkVmVuZG9yZWRTdHlsZU5hbWUobmFtZSk7XG5cdCAgICB9IGVsc2UgaWYgKGJhZFN0eWxlVmFsdWVXaXRoU2VtaWNvbG9uUGF0dGVybi50ZXN0KHZhbHVlKSkge1xuXHQgICAgICB3YXJuU3R5bGVWYWx1ZVdpdGhTZW1pY29sb24obmFtZSwgdmFsdWUpO1xuXHQgICAgfVxuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBPcGVyYXRpb25zIGZvciBkZWFsaW5nIHdpdGggQ1NTIHByb3BlcnRpZXMuXG5cdCAqL1xuXHR2YXIgQ1NTUHJvcGVydHlPcGVyYXRpb25zID0ge1xuXHRcblx0ICAvKipcblx0ICAgKiBTZXJpYWxpemVzIGEgbWFwcGluZyBvZiBzdHlsZSBwcm9wZXJ0aWVzIGZvciB1c2UgYXMgaW5saW5lIHN0eWxlczpcblx0ICAgKlxuXHQgICAqICAgPiBjcmVhdGVNYXJrdXBGb3JTdHlsZXMoe3dpZHRoOiAnMjAwcHgnLCBoZWlnaHQ6IDB9KVxuXHQgICAqICAgXCJ3aWR0aDoyMDBweDtoZWlnaHQ6MDtcIlxuXHQgICAqXG5cdCAgICogVW5kZWZpbmVkIHZhbHVlcyBhcmUgaWdub3JlZCBzbyB0aGF0IGRlY2xhcmF0aXZlIHByb2dyYW1taW5nIGlzIGVhc2llci5cblx0ICAgKiBUaGUgcmVzdWx0IHNob3VsZCBiZSBIVE1MLWVzY2FwZWQgYmVmb3JlIGluc2VydGlvbiBpbnRvIHRoZSBET00uXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge29iamVjdH0gc3R5bGVzXG5cdCAgICogQHJldHVybiB7P3N0cmluZ31cblx0ICAgKi9cblx0ICBjcmVhdGVNYXJrdXBGb3JTdHlsZXM6IGZ1bmN0aW9uIChzdHlsZXMpIHtcblx0ICAgIHZhciBzZXJpYWxpemVkID0gJyc7XG5cdCAgICBmb3IgKHZhciBzdHlsZU5hbWUgaW4gc3R5bGVzKSB7XG5cdCAgICAgIGlmICghc3R5bGVzLmhhc093blByb3BlcnR5KHN0eWxlTmFtZSkpIHtcblx0ICAgICAgICBjb250aW51ZTtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgc3R5bGVWYWx1ZSA9IHN0eWxlc1tzdHlsZU5hbWVdO1xuXHQgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgIHdhcm5WYWxpZFN0eWxlKHN0eWxlTmFtZSwgc3R5bGVWYWx1ZSk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKHN0eWxlVmFsdWUgIT0gbnVsbCkge1xuXHQgICAgICAgIHNlcmlhbGl6ZWQgKz0gcHJvY2Vzc1N0eWxlTmFtZShzdHlsZU5hbWUpICsgJzonO1xuXHQgICAgICAgIHNlcmlhbGl6ZWQgKz0gZGFuZ2Vyb3VzU3R5bGVWYWx1ZShzdHlsZU5hbWUsIHN0eWxlVmFsdWUpICsgJzsnO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gc2VyaWFsaXplZCB8fCBudWxsO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFNldHMgdGhlIHZhbHVlIGZvciBtdWx0aXBsZSBzdHlsZXMgb24gYSBub2RlLiAgSWYgYSB2YWx1ZSBpcyBzcGVjaWZpZWQgYXNcblx0ICAgKiAnJyAoZW1wdHkgc3RyaW5nKSwgdGhlIGNvcnJlc3BvbmRpbmcgc3R5bGUgcHJvcGVydHkgd2lsbCBiZSB1bnNldC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gbm9kZVxuXHQgICAqIEBwYXJhbSB7b2JqZWN0fSBzdHlsZXNcblx0ICAgKi9cblx0ICBzZXRWYWx1ZUZvclN0eWxlczogZnVuY3Rpb24gKG5vZGUsIHN0eWxlcykge1xuXHQgICAgdmFyIHN0eWxlID0gbm9kZS5zdHlsZTtcblx0ICAgIGZvciAodmFyIHN0eWxlTmFtZSBpbiBzdHlsZXMpIHtcblx0ICAgICAgaWYgKCFzdHlsZXMuaGFzT3duUHJvcGVydHkoc3R5bGVOYW1lKSkge1xuXHQgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgICAgd2FyblZhbGlkU3R5bGUoc3R5bGVOYW1lLCBzdHlsZXNbc3R5bGVOYW1lXSk7XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIHN0eWxlVmFsdWUgPSBkYW5nZXJvdXNTdHlsZVZhbHVlKHN0eWxlTmFtZSwgc3R5bGVzW3N0eWxlTmFtZV0pO1xuXHQgICAgICBpZiAoc3R5bGVOYW1lID09PSAnZmxvYXQnKSB7XG5cdCAgICAgICAgc3R5bGVOYW1lID0gc3R5bGVGbG9hdEFjY2Vzc29yO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChzdHlsZVZhbHVlKSB7XG5cdCAgICAgICAgc3R5bGVbc3R5bGVOYW1lXSA9IHN0eWxlVmFsdWU7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdmFyIGV4cGFuc2lvbiA9IGhhc1Nob3J0aGFuZFByb3BlcnR5QnVnICYmIENTU1Byb3BlcnR5LnNob3J0aGFuZFByb3BlcnR5RXhwYW5zaW9uc1tzdHlsZU5hbWVdO1xuXHQgICAgICAgIGlmIChleHBhbnNpb24pIHtcblx0ICAgICAgICAgIC8vIFNob3J0aGFuZCBwcm9wZXJ0eSB0aGF0IElFOCB3b24ndCBsaWtlIHVuc2V0dGluZywgc28gdW5zZXQgZWFjaFxuXHQgICAgICAgICAgLy8gY29tcG9uZW50IHRvIHBsYWNhdGUgaXRcblx0ICAgICAgICAgIGZvciAodmFyIGluZGl2aWR1YWxTdHlsZU5hbWUgaW4gZXhwYW5zaW9uKSB7XG5cdCAgICAgICAgICAgIHN0eWxlW2luZGl2aWR1YWxTdHlsZU5hbWVdID0gJyc7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHN0eWxlW3N0eWxlTmFtZV0gPSAnJztcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHR9O1xuXHRcblx0UmVhY3RQZXJmLm1lYXN1cmVNZXRob2RzKENTU1Byb3BlcnR5T3BlcmF0aW9ucywgJ0NTU1Byb3BlcnR5T3BlcmF0aW9ucycsIHtcblx0ICBzZXRWYWx1ZUZvclN0eWxlczogJ3NldFZhbHVlRm9yU3R5bGVzJ1xuXHR9KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gQ1NTUHJvcGVydHlPcGVyYXRpb25zO1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg0KSkpXG5cbi8qKiovIH0pLFxuLyogOTcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIENTU1Byb3BlcnR5XG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0LyoqXG5cdCAqIENTUyBwcm9wZXJ0aWVzIHdoaWNoIGFjY2VwdCBudW1iZXJzIGJ1dCBhcmUgbm90IGluIHVuaXRzIG9mIFwicHhcIi5cblx0ICovXG5cdHZhciBpc1VuaXRsZXNzTnVtYmVyID0ge1xuXHQgIGFuaW1hdGlvbkl0ZXJhdGlvbkNvdW50OiB0cnVlLFxuXHQgIGJveEZsZXg6IHRydWUsXG5cdCAgYm94RmxleEdyb3VwOiB0cnVlLFxuXHQgIGJveE9yZGluYWxHcm91cDogdHJ1ZSxcblx0ICBjb2x1bW5Db3VudDogdHJ1ZSxcblx0ICBmbGV4OiB0cnVlLFxuXHQgIGZsZXhHcm93OiB0cnVlLFxuXHQgIGZsZXhQb3NpdGl2ZTogdHJ1ZSxcblx0ICBmbGV4U2hyaW5rOiB0cnVlLFxuXHQgIGZsZXhOZWdhdGl2ZTogdHJ1ZSxcblx0ICBmbGV4T3JkZXI6IHRydWUsXG5cdCAgZm9udFdlaWdodDogdHJ1ZSxcblx0ICBsaW5lQ2xhbXA6IHRydWUsXG5cdCAgbGluZUhlaWdodDogdHJ1ZSxcblx0ICBvcGFjaXR5OiB0cnVlLFxuXHQgIG9yZGVyOiB0cnVlLFxuXHQgIG9ycGhhbnM6IHRydWUsXG5cdCAgdGFiU2l6ZTogdHJ1ZSxcblx0ICB3aWRvd3M6IHRydWUsXG5cdCAgekluZGV4OiB0cnVlLFxuXHQgIHpvb206IHRydWUsXG5cdFxuXHQgIC8vIFNWRy1yZWxhdGVkIHByb3BlcnRpZXNcblx0ICBmaWxsT3BhY2l0eTogdHJ1ZSxcblx0ICBzdG9wT3BhY2l0eTogdHJ1ZSxcblx0ICBzdHJva2VEYXNob2Zmc2V0OiB0cnVlLFxuXHQgIHN0cm9rZU9wYWNpdHk6IHRydWUsXG5cdCAgc3Ryb2tlV2lkdGg6IHRydWVcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gcHJlZml4IHZlbmRvci1zcGVjaWZpYyBwcmVmaXgsIGVnOiBXZWJraXRcblx0ICogQHBhcmFtIHtzdHJpbmd9IGtleSBzdHlsZSBuYW1lLCBlZzogdHJhbnNpdGlvbkR1cmF0aW9uXG5cdCAqIEByZXR1cm4ge3N0cmluZ30gc3R5bGUgbmFtZSBwcmVmaXhlZCB3aXRoIGBwcmVmaXhgLCBwcm9wZXJseSBjYW1lbENhc2VkLCBlZzpcblx0ICogV2Via2l0VHJhbnNpdGlvbkR1cmF0aW9uXG5cdCAqL1xuXHRmdW5jdGlvbiBwcmVmaXhLZXkocHJlZml4LCBrZXkpIHtcblx0ICByZXR1cm4gcHJlZml4ICsga2V5LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsga2V5LnN1YnN0cmluZygxKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFN1cHBvcnQgc3R5bGUgbmFtZXMgdGhhdCBtYXkgY29tZSBwYXNzZWQgaW4gcHJlZml4ZWQgYnkgYWRkaW5nIHBlcm11dGF0aW9uc1xuXHQgKiBvZiB2ZW5kb3IgcHJlZml4ZXMuXG5cdCAqL1xuXHR2YXIgcHJlZml4ZXMgPSBbJ1dlYmtpdCcsICdtcycsICdNb3onLCAnTyddO1xuXHRcblx0Ly8gVXNpbmcgT2JqZWN0LmtleXMgaGVyZSwgb3IgZWxzZSB0aGUgdmFuaWxsYSBmb3ItaW4gbG9vcCBtYWtlcyBJRTggZ28gaW50byBhblxuXHQvLyBpbmZpbml0ZSBsb29wLCBiZWNhdXNlIGl0IGl0ZXJhdGVzIG92ZXIgdGhlIG5ld2x5IGFkZGVkIHByb3BzIHRvby5cblx0T2JqZWN0LmtleXMoaXNVbml0bGVzc051bWJlcikuZm9yRWFjaChmdW5jdGlvbiAocHJvcCkge1xuXHQgIHByZWZpeGVzLmZvckVhY2goZnVuY3Rpb24gKHByZWZpeCkge1xuXHQgICAgaXNVbml0bGVzc051bWJlcltwcmVmaXhLZXkocHJlZml4LCBwcm9wKV0gPSBpc1VuaXRsZXNzTnVtYmVyW3Byb3BdO1xuXHQgIH0pO1xuXHR9KTtcblx0XG5cdC8qKlxuXHQgKiBNb3N0IHN0eWxlIHByb3BlcnRpZXMgY2FuIGJlIHVuc2V0IGJ5IGRvaW5nIC5zdHlsZVtwcm9wXSA9ICcnIGJ1dCBJRThcblx0ICogZG9lc24ndCBsaWtlIGRvaW5nIHRoYXQgd2l0aCBzaG9ydGhhbmQgcHJvcGVydGllcyBzbyBmb3IgdGhlIHByb3BlcnRpZXMgdGhhdFxuXHQgKiBJRTggYnJlYWtzIG9uLCB3aGljaCBhcmUgbGlzdGVkIGhlcmUsIHdlIGluc3RlYWQgdW5zZXQgZWFjaCBvZiB0aGVcblx0ICogaW5kaXZpZHVhbCBwcm9wZXJ0aWVzLiBTZWUgaHR0cDovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvMTIzODUuXG5cdCAqIFRoZSA0LXZhbHVlICdjbG9jaycgcHJvcGVydGllcyBsaWtlIG1hcmdpbiwgcGFkZGluZywgYm9yZGVyLXdpZHRoIHNlZW0gdG9cblx0ICogYmVoYXZlIHdpdGhvdXQgYW55IHByb2JsZW1zLiBDdXJpb3VzbHksIGxpc3Qtc3R5bGUgd29ya3MgdG9vIHdpdGhvdXQgYW55XG5cdCAqIHNwZWNpYWwgcHJvZGRpbmcuXG5cdCAqL1xuXHR2YXIgc2hvcnRoYW5kUHJvcGVydHlFeHBhbnNpb25zID0ge1xuXHQgIGJhY2tncm91bmQ6IHtcblx0ICAgIGJhY2tncm91bmRBdHRhY2htZW50OiB0cnVlLFxuXHQgICAgYmFja2dyb3VuZENvbG9yOiB0cnVlLFxuXHQgICAgYmFja2dyb3VuZEltYWdlOiB0cnVlLFxuXHQgICAgYmFja2dyb3VuZFBvc2l0aW9uWDogdHJ1ZSxcblx0ICAgIGJhY2tncm91bmRQb3NpdGlvblk6IHRydWUsXG5cdCAgICBiYWNrZ3JvdW5kUmVwZWF0OiB0cnVlXG5cdCAgfSxcblx0ICBiYWNrZ3JvdW5kUG9zaXRpb246IHtcblx0ICAgIGJhY2tncm91bmRQb3NpdGlvblg6IHRydWUsXG5cdCAgICBiYWNrZ3JvdW5kUG9zaXRpb25ZOiB0cnVlXG5cdCAgfSxcblx0ICBib3JkZXI6IHtcblx0ICAgIGJvcmRlcldpZHRoOiB0cnVlLFxuXHQgICAgYm9yZGVyU3R5bGU6IHRydWUsXG5cdCAgICBib3JkZXJDb2xvcjogdHJ1ZVxuXHQgIH0sXG5cdCAgYm9yZGVyQm90dG9tOiB7XG5cdCAgICBib3JkZXJCb3R0b21XaWR0aDogdHJ1ZSxcblx0ICAgIGJvcmRlckJvdHRvbVN0eWxlOiB0cnVlLFxuXHQgICAgYm9yZGVyQm90dG9tQ29sb3I6IHRydWVcblx0ICB9LFxuXHQgIGJvcmRlckxlZnQ6IHtcblx0ICAgIGJvcmRlckxlZnRXaWR0aDogdHJ1ZSxcblx0ICAgIGJvcmRlckxlZnRTdHlsZTogdHJ1ZSxcblx0ICAgIGJvcmRlckxlZnRDb2xvcjogdHJ1ZVxuXHQgIH0sXG5cdCAgYm9yZGVyUmlnaHQ6IHtcblx0ICAgIGJvcmRlclJpZ2h0V2lkdGg6IHRydWUsXG5cdCAgICBib3JkZXJSaWdodFN0eWxlOiB0cnVlLFxuXHQgICAgYm9yZGVyUmlnaHRDb2xvcjogdHJ1ZVxuXHQgIH0sXG5cdCAgYm9yZGVyVG9wOiB7XG5cdCAgICBib3JkZXJUb3BXaWR0aDogdHJ1ZSxcblx0ICAgIGJvcmRlclRvcFN0eWxlOiB0cnVlLFxuXHQgICAgYm9yZGVyVG9wQ29sb3I6IHRydWVcblx0ICB9LFxuXHQgIGZvbnQ6IHtcblx0ICAgIGZvbnRTdHlsZTogdHJ1ZSxcblx0ICAgIGZvbnRWYXJpYW50OiB0cnVlLFxuXHQgICAgZm9udFdlaWdodDogdHJ1ZSxcblx0ICAgIGZvbnRTaXplOiB0cnVlLFxuXHQgICAgbGluZUhlaWdodDogdHJ1ZSxcblx0ICAgIGZvbnRGYW1pbHk6IHRydWVcblx0ICB9LFxuXHQgIG91dGxpbmU6IHtcblx0ICAgIG91dGxpbmVXaWR0aDogdHJ1ZSxcblx0ICAgIG91dGxpbmVTdHlsZTogdHJ1ZSxcblx0ICAgIG91dGxpbmVDb2xvcjogdHJ1ZVxuXHQgIH1cblx0fTtcblx0XG5cdHZhciBDU1NQcm9wZXJ0eSA9IHtcblx0ICBpc1VuaXRsZXNzTnVtYmVyOiBpc1VuaXRsZXNzTnVtYmVyLFxuXHQgIHNob3J0aGFuZFByb3BlcnR5RXhwYW5zaW9uczogc2hvcnRoYW5kUHJvcGVydHlFeHBhbnNpb25zXG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IENTU1Byb3BlcnR5O1xuXG4vKioqLyB9KSxcbi8qIDk4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBjYW1lbGl6ZVN0eWxlTmFtZVxuXHQgKiBAdHlwZWNoZWNrc1xuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBjYW1lbGl6ZSA9IF9fd2VicGFja19yZXF1aXJlX18oOTkpO1xuXHRcblx0dmFyIG1zUGF0dGVybiA9IC9eLW1zLS87XG5cdFxuXHQvKipcblx0ICogQ2FtZWxjYXNlcyBhIGh5cGhlbmF0ZWQgQ1NTIHByb3BlcnR5IG5hbWUsIGZvciBleGFtcGxlOlxuXHQgKlxuXHQgKiAgID4gY2FtZWxpemVTdHlsZU5hbWUoJ2JhY2tncm91bmQtY29sb3InKVxuXHQgKiAgIDwgXCJiYWNrZ3JvdW5kQ29sb3JcIlxuXHQgKiAgID4gY2FtZWxpemVTdHlsZU5hbWUoJy1tb3otdHJhbnNpdGlvbicpXG5cdCAqICAgPCBcIk1velRyYW5zaXRpb25cIlxuXHQgKiAgID4gY2FtZWxpemVTdHlsZU5hbWUoJy1tcy10cmFuc2l0aW9uJylcblx0ICogICA8IFwibXNUcmFuc2l0aW9uXCJcblx0ICpcblx0ICogQXMgQW5kaSBTbWl0aCBzdWdnZXN0c1xuXHQgKiAoaHR0cDovL3d3dy5hbmRpc21pdGguY29tL2Jsb2cvMjAxMi8wMi9tb2Rlcm5penItcHJlZml4ZWQvKSwgYW4gYC1tc2AgcHJlZml4XG5cdCAqIGlzIGNvbnZlcnRlZCB0byBsb3dlcmNhc2UgYG1zYC5cblx0ICpcblx0ICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZ1xuXHQgKiBAcmV0dXJuIHtzdHJpbmd9XG5cdCAqL1xuXHRmdW5jdGlvbiBjYW1lbGl6ZVN0eWxlTmFtZShzdHJpbmcpIHtcblx0ICByZXR1cm4gY2FtZWxpemUoc3RyaW5nLnJlcGxhY2UobXNQYXR0ZXJuLCAnbXMtJykpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGNhbWVsaXplU3R5bGVOYW1lO1xuXG4vKioqLyB9KSxcbi8qIDk5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBjYW1lbGl6ZVxuXHQgKiBAdHlwZWNoZWNrc1xuXHQgKi9cblx0XG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0dmFyIF9oeXBoZW5QYXR0ZXJuID0gLy0oLikvZztcblx0XG5cdC8qKlxuXHQgKiBDYW1lbGNhc2VzIGEgaHlwaGVuYXRlZCBzdHJpbmcsIGZvciBleGFtcGxlOlxuXHQgKlxuXHQgKiAgID4gY2FtZWxpemUoJ2JhY2tncm91bmQtY29sb3InKVxuXHQgKiAgIDwgXCJiYWNrZ3JvdW5kQ29sb3JcIlxuXHQgKlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nXG5cdCAqIEByZXR1cm4ge3N0cmluZ31cblx0ICovXG5cdGZ1bmN0aW9uIGNhbWVsaXplKHN0cmluZykge1xuXHQgIHJldHVybiBzdHJpbmcucmVwbGFjZShfaHlwaGVuUGF0dGVybiwgZnVuY3Rpb24gKF8sIGNoYXJhY3Rlcikge1xuXHQgICAgcmV0dXJuIGNoYXJhY3Rlci50b1VwcGVyQ2FzZSgpO1xuXHQgIH0pO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGNhbWVsaXplO1xuXG4vKioqLyB9KSxcbi8qIDEwMCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgZGFuZ2Vyb3VzU3R5bGVWYWx1ZVxuXHQgKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBDU1NQcm9wZXJ0eSA9IF9fd2VicGFja19yZXF1aXJlX18oOTcpO1xuXHRcblx0dmFyIGlzVW5pdGxlc3NOdW1iZXIgPSBDU1NQcm9wZXJ0eS5pc1VuaXRsZXNzTnVtYmVyO1xuXHRcblx0LyoqXG5cdCAqIENvbnZlcnQgYSB2YWx1ZSBpbnRvIHRoZSBwcm9wZXIgY3NzIHdyaXRhYmxlIHZhbHVlLiBUaGUgc3R5bGUgbmFtZSBgbmFtZWBcblx0ICogc2hvdWxkIGJlIGxvZ2ljYWwgKG5vIGh5cGhlbnMpLCBhcyBzcGVjaWZpZWRcblx0ICogaW4gYENTU1Byb3BlcnR5LmlzVW5pdGxlc3NOdW1iZXJgLlxuXHQgKlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBDU1MgcHJvcGVydHkgbmFtZSBzdWNoIGFzIGB0b3BNYXJnaW5gLlxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIENTUyBwcm9wZXJ0eSB2YWx1ZSBzdWNoIGFzIGAxMHB4YC5cblx0ICogQHJldHVybiB7c3RyaW5nfSBOb3JtYWxpemVkIHN0eWxlIHZhbHVlIHdpdGggZGltZW5zaW9ucyBhcHBsaWVkLlxuXHQgKi9cblx0ZnVuY3Rpb24gZGFuZ2Vyb3VzU3R5bGVWYWx1ZShuYW1lLCB2YWx1ZSkge1xuXHQgIC8vIE5vdGUgdGhhdCB3ZSd2ZSByZW1vdmVkIGVzY2FwZVRleHRGb3JCcm93c2VyKCkgY2FsbHMgaGVyZSBzaW5jZSB0aGVcblx0ICAvLyB3aG9sZSBzdHJpbmcgd2lsbCBiZSBlc2NhcGVkIHdoZW4gdGhlIGF0dHJpYnV0ZSBpcyBpbmplY3RlZCBpbnRvXG5cdCAgLy8gdGhlIG1hcmt1cC4gSWYgeW91IHByb3ZpZGUgdW5zYWZlIHVzZXIgZGF0YSBoZXJlIHRoZXkgY2FuIGluamVjdFxuXHQgIC8vIGFyYml0cmFyeSBDU1Mgd2hpY2ggbWF5IGJlIHByb2JsZW1hdGljIChJIGNvdWxkbid0IHJlcHJvIHRoaXMpOlxuXHQgIC8vIGh0dHBzOi8vd3d3Lm93YXNwLm9yZy9pbmRleC5waHAvWFNTX0ZpbHRlcl9FdmFzaW9uX0NoZWF0X1NoZWV0XG5cdCAgLy8gaHR0cDovL3d3dy50aGVzcGFubmVyLmNvLnVrLzIwMDcvMTEvMjYvdWx0aW1hdGUteHNzLWNzcy1pbmplY3Rpb24vXG5cdCAgLy8gVGhpcyBpcyBub3QgYW4gWFNTIGhvbGUgYnV0IGluc3RlYWQgYSBwb3RlbnRpYWwgQ1NTIGluamVjdGlvbiBpc3N1ZVxuXHQgIC8vIHdoaWNoIGhhcyBsZWFkIHRvIGEgZ3JlYXRlciBkaXNjdXNzaW9uIGFib3V0IGhvdyB3ZSdyZSBnb2luZyB0b1xuXHQgIC8vIHRydXN0IFVSTHMgbW92aW5nIGZvcndhcmQuIFNlZSAjMjExNTkwMVxuXHRcblx0ICB2YXIgaXNFbXB0eSA9IHZhbHVlID09IG51bGwgfHwgdHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbicgfHwgdmFsdWUgPT09ICcnO1xuXHQgIGlmIChpc0VtcHR5KSB7XG5cdCAgICByZXR1cm4gJyc7XG5cdCAgfVxuXHRcblx0ICB2YXIgaXNOb25OdW1lcmljID0gaXNOYU4odmFsdWUpO1xuXHQgIGlmIChpc05vbk51bWVyaWMgfHwgdmFsdWUgPT09IDAgfHwgaXNVbml0bGVzc051bWJlci5oYXNPd25Qcm9wZXJ0eShuYW1lKSAmJiBpc1VuaXRsZXNzTnVtYmVyW25hbWVdKSB7XG5cdCAgICByZXR1cm4gJycgKyB2YWx1ZTsgLy8gY2FzdCB0byBzdHJpbmdcblx0ICB9XG5cdFxuXHQgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG5cdCAgICB2YWx1ZSA9IHZhbHVlLnRyaW0oKTtcblx0ICB9XG5cdCAgcmV0dXJuIHZhbHVlICsgJ3B4Jztcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBkYW5nZXJvdXNTdHlsZVZhbHVlO1xuXG4vKioqLyB9KSxcbi8qIDEwMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgaHlwaGVuYXRlU3R5bGVOYW1lXG5cdCAqIEB0eXBlY2hlY2tzXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGh5cGhlbmF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTAyKTtcblx0XG5cdHZhciBtc1BhdHRlcm4gPSAvXm1zLS87XG5cdFxuXHQvKipcblx0ICogSHlwaGVuYXRlcyBhIGNhbWVsY2FzZWQgQ1NTIHByb3BlcnR5IG5hbWUsIGZvciBleGFtcGxlOlxuXHQgKlxuXHQgKiAgID4gaHlwaGVuYXRlU3R5bGVOYW1lKCdiYWNrZ3JvdW5kQ29sb3InKVxuXHQgKiAgIDwgXCJiYWNrZ3JvdW5kLWNvbG9yXCJcblx0ICogICA+IGh5cGhlbmF0ZVN0eWxlTmFtZSgnTW96VHJhbnNpdGlvbicpXG5cdCAqICAgPCBcIi1tb3otdHJhbnNpdGlvblwiXG5cdCAqICAgPiBoeXBoZW5hdGVTdHlsZU5hbWUoJ21zVHJhbnNpdGlvbicpXG5cdCAqICAgPCBcIi1tcy10cmFuc2l0aW9uXCJcblx0ICpcblx0ICogQXMgTW9kZXJuaXpyIHN1Z2dlc3RzIChodHRwOi8vbW9kZXJuaXpyLmNvbS9kb2NzLyNwcmVmaXhlZCksIGFuIGBtc2AgcHJlZml4XG5cdCAqIGlzIGNvbnZlcnRlZCB0byBgLW1zLWAuXG5cdCAqXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmdcblx0ICogQHJldHVybiB7c3RyaW5nfVxuXHQgKi9cblx0ZnVuY3Rpb24gaHlwaGVuYXRlU3R5bGVOYW1lKHN0cmluZykge1xuXHQgIHJldHVybiBoeXBoZW5hdGUoc3RyaW5nKS5yZXBsYWNlKG1zUGF0dGVybiwgJy1tcy0nKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBoeXBoZW5hdGVTdHlsZU5hbWU7XG5cbi8qKiovIH0pLFxuLyogMTAyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBoeXBoZW5hdGVcblx0ICogQHR5cGVjaGVja3Ncblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgX3VwcGVyY2FzZVBhdHRlcm4gPSAvKFtBLVpdKS9nO1xuXHRcblx0LyoqXG5cdCAqIEh5cGhlbmF0ZXMgYSBjYW1lbGNhc2VkIHN0cmluZywgZm9yIGV4YW1wbGU6XG5cdCAqXG5cdCAqICAgPiBoeXBoZW5hdGUoJ2JhY2tncm91bmRDb2xvcicpXG5cdCAqICAgPCBcImJhY2tncm91bmQtY29sb3JcIlxuXHQgKlxuXHQgKiBGb3IgQ1NTIHN0eWxlIG5hbWVzLCB1c2UgYGh5cGhlbmF0ZVN0eWxlTmFtZWAgaW5zdGVhZCB3aGljaCB3b3JrcyBwcm9wZXJseVxuXHQgKiB3aXRoIGFsbCB2ZW5kb3IgcHJlZml4ZXMsIGluY2x1ZGluZyBgbXNgLlxuXHQgKlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nXG5cdCAqIEByZXR1cm4ge3N0cmluZ31cblx0ICovXG5cdGZ1bmN0aW9uIGh5cGhlbmF0ZShzdHJpbmcpIHtcblx0ICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoX3VwcGVyY2FzZVBhdHRlcm4sICctJDEnKS50b0xvd2VyQ2FzZSgpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGh5cGhlbmF0ZTtcblxuLyoqKi8gfSksXG4vKiAxMDMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIG1lbW9pemVTdHJpbmdPbmx5XG5cdCAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0LyoqXG5cdCAqIE1lbW9pemVzIHRoZSByZXR1cm4gdmFsdWUgb2YgYSBmdW5jdGlvbiB0aGF0IGFjY2VwdHMgb25lIHN0cmluZyBhcmd1bWVudC5cblx0ICpcblx0ICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2tcblx0ICogQHJldHVybiB7ZnVuY3Rpb259XG5cdCAqL1xuXHRmdW5jdGlvbiBtZW1vaXplU3RyaW5nT25seShjYWxsYmFjaykge1xuXHQgIHZhciBjYWNoZSA9IHt9O1xuXHQgIHJldHVybiBmdW5jdGlvbiAoc3RyaW5nKSB7XG5cdCAgICBpZiAoIWNhY2hlLmhhc093blByb3BlcnR5KHN0cmluZykpIHtcblx0ICAgICAgY2FjaGVbc3RyaW5nXSA9IGNhbGxiYWNrLmNhbGwodGhpcywgc3RyaW5nKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBjYWNoZVtzdHJpbmddO1xuXHQgIH07XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gbWVtb2l6ZVN0cmluZ09ubHk7XG5cbi8qKiovIH0pLFxuLyogMTA0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBSZWFjdERPTUJ1dHRvblxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBtb3VzZUxpc3RlbmVyTmFtZXMgPSB7XG5cdCAgb25DbGljazogdHJ1ZSxcblx0ICBvbkRvdWJsZUNsaWNrOiB0cnVlLFxuXHQgIG9uTW91c2VEb3duOiB0cnVlLFxuXHQgIG9uTW91c2VNb3ZlOiB0cnVlLFxuXHQgIG9uTW91c2VVcDogdHJ1ZSxcblx0XG5cdCAgb25DbGlja0NhcHR1cmU6IHRydWUsXG5cdCAgb25Eb3VibGVDbGlja0NhcHR1cmU6IHRydWUsXG5cdCAgb25Nb3VzZURvd25DYXB0dXJlOiB0cnVlLFxuXHQgIG9uTW91c2VNb3ZlQ2FwdHVyZTogdHJ1ZSxcblx0ICBvbk1vdXNlVXBDYXB0dXJlOiB0cnVlXG5cdH07XG5cdFxuXHQvKipcblx0ICogSW1wbGVtZW50cyBhIDxidXR0b24+IG5hdGl2ZSBjb21wb25lbnQgdGhhdCBkb2VzIG5vdCByZWNlaXZlIG1vdXNlIGV2ZW50c1xuXHQgKiB3aGVuIGBkaXNhYmxlZGAgaXMgc2V0LlxuXHQgKi9cblx0dmFyIFJlYWN0RE9NQnV0dG9uID0ge1xuXHQgIGdldE5hdGl2ZVByb3BzOiBmdW5jdGlvbiAoaW5zdCwgcHJvcHMsIGNvbnRleHQpIHtcblx0ICAgIGlmICghcHJvcHMuZGlzYWJsZWQpIHtcblx0ICAgICAgcmV0dXJuIHByb3BzO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIENvcHkgdGhlIHByb3BzLCBleGNlcHQgdGhlIG1vdXNlIGxpc3RlbmVyc1xuXHQgICAgdmFyIG5hdGl2ZVByb3BzID0ge307XG5cdCAgICBmb3IgKHZhciBrZXkgaW4gcHJvcHMpIHtcblx0ICAgICAgaWYgKHByb3BzLmhhc093blByb3BlcnR5KGtleSkgJiYgIW1vdXNlTGlzdGVuZXJOYW1lc1trZXldKSB7XG5cdCAgICAgICAgbmF0aXZlUHJvcHNba2V5XSA9IHByb3BzW2tleV07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gbmF0aXZlUHJvcHM7XG5cdCAgfVxuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBSZWFjdERPTUJ1dHRvbjtcblxuLyoqKi8gfSksXG4vKiAxMDUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgey8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RET01JbnB1dFxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBSZWFjdERPTUlET3BlcmF0aW9ucyA9IF9fd2VicGFja19yZXF1aXJlX18oMjcpO1xuXHR2YXIgTGlua2VkVmFsdWVVdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTA2KTtcblx0dmFyIFJlYWN0TW91bnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4KTtcblx0dmFyIFJlYWN0VXBkYXRlcyA9IF9fd2VicGFja19yZXF1aXJlX18oNTQpO1xuXHRcblx0dmFyIGFzc2lnbiA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpO1xuXHR2YXIgaW52YXJpYW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7XG5cdFxuXHR2YXIgaW5zdGFuY2VzQnlSZWFjdElEID0ge307XG5cdFxuXHRmdW5jdGlvbiBmb3JjZVVwZGF0ZUlmTW91bnRlZCgpIHtcblx0ICBpZiAodGhpcy5fcm9vdE5vZGVJRCkge1xuXHQgICAgLy8gRE9NIGNvbXBvbmVudCBpcyBzdGlsbCBtb3VudGVkOyB1cGRhdGVcblx0ICAgIFJlYWN0RE9NSW5wdXQudXBkYXRlV3JhcHBlcih0aGlzKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBJbXBsZW1lbnRzIGFuIDxpbnB1dD4gbmF0aXZlIGNvbXBvbmVudCB0aGF0IGFsbG93cyBzZXR0aW5nIHRoZXNlIG9wdGlvbmFsXG5cdCAqIHByb3BzOiBgY2hlY2tlZGAsIGB2YWx1ZWAsIGBkZWZhdWx0Q2hlY2tlZGAsIGFuZCBgZGVmYXVsdFZhbHVlYC5cblx0ICpcblx0ICogSWYgYGNoZWNrZWRgIG9yIGB2YWx1ZWAgYXJlIG5vdCBzdXBwbGllZCAob3IgbnVsbC91bmRlZmluZWQpLCB1c2VyIGFjdGlvbnNcblx0ICogdGhhdCBhZmZlY3QgdGhlIGNoZWNrZWQgc3RhdGUgb3IgdmFsdWUgd2lsbCB0cmlnZ2VyIHVwZGF0ZXMgdG8gdGhlIGVsZW1lbnQuXG5cdCAqXG5cdCAqIElmIHRoZXkgYXJlIHN1cHBsaWVkIChhbmQgbm90IG51bGwvdW5kZWZpbmVkKSwgdGhlIHJlbmRlcmVkIGVsZW1lbnQgd2lsbCBub3Rcblx0ICogdHJpZ2dlciB1cGRhdGVzIHRvIHRoZSBlbGVtZW50LiBJbnN0ZWFkLCB0aGUgcHJvcHMgbXVzdCBjaGFuZ2UgaW4gb3JkZXIgZm9yXG5cdCAqIHRoZSByZW5kZXJlZCBlbGVtZW50IHRvIGJlIHVwZGF0ZWQuXG5cdCAqXG5cdCAqIFRoZSByZW5kZXJlZCBlbGVtZW50IHdpbGwgYmUgaW5pdGlhbGl6ZWQgYXMgdW5jaGVja2VkIChvciBgZGVmYXVsdENoZWNrZWRgKVxuXHQgKiB3aXRoIGFuIGVtcHR5IHZhbHVlIChvciBgZGVmYXVsdFZhbHVlYCkuXG5cdCAqXG5cdCAqIEBzZWUgaHR0cDovL3d3dy53My5vcmcvVFIvMjAxMi9XRC1odG1sNS0yMDEyMTAyNS90aGUtaW5wdXQtZWxlbWVudC5odG1sXG5cdCAqL1xuXHR2YXIgUmVhY3RET01JbnB1dCA9IHtcblx0ICBnZXROYXRpdmVQcm9wczogZnVuY3Rpb24gKGluc3QsIHByb3BzLCBjb250ZXh0KSB7XG5cdCAgICB2YXIgdmFsdWUgPSBMaW5rZWRWYWx1ZVV0aWxzLmdldFZhbHVlKHByb3BzKTtcblx0ICAgIHZhciBjaGVja2VkID0gTGlua2VkVmFsdWVVdGlscy5nZXRDaGVja2VkKHByb3BzKTtcblx0XG5cdCAgICB2YXIgbmF0aXZlUHJvcHMgPSBhc3NpZ24oe30sIHByb3BzLCB7XG5cdCAgICAgIGRlZmF1bHRDaGVja2VkOiB1bmRlZmluZWQsXG5cdCAgICAgIGRlZmF1bHRWYWx1ZTogdW5kZWZpbmVkLFxuXHQgICAgICB2YWx1ZTogdmFsdWUgIT0gbnVsbCA/IHZhbHVlIDogaW5zdC5fd3JhcHBlclN0YXRlLmluaXRpYWxWYWx1ZSxcblx0ICAgICAgY2hlY2tlZDogY2hlY2tlZCAhPSBudWxsID8gY2hlY2tlZCA6IGluc3QuX3dyYXBwZXJTdGF0ZS5pbml0aWFsQ2hlY2tlZCxcblx0ICAgICAgb25DaGFuZ2U6IGluc3QuX3dyYXBwZXJTdGF0ZS5vbkNoYW5nZVxuXHQgICAgfSk7XG5cdFxuXHQgICAgcmV0dXJuIG5hdGl2ZVByb3BzO1xuXHQgIH0sXG5cdFxuXHQgIG1vdW50V3JhcHBlcjogZnVuY3Rpb24gKGluc3QsIHByb3BzKSB7XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICBMaW5rZWRWYWx1ZVV0aWxzLmNoZWNrUHJvcFR5cGVzKCdpbnB1dCcsIHByb3BzLCBpbnN0Ll9jdXJyZW50RWxlbWVudC5fb3duZXIpO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBkZWZhdWx0VmFsdWUgPSBwcm9wcy5kZWZhdWx0VmFsdWU7XG5cdCAgICBpbnN0Ll93cmFwcGVyU3RhdGUgPSB7XG5cdCAgICAgIGluaXRpYWxDaGVja2VkOiBwcm9wcy5kZWZhdWx0Q2hlY2tlZCB8fCBmYWxzZSxcblx0ICAgICAgaW5pdGlhbFZhbHVlOiBkZWZhdWx0VmFsdWUgIT0gbnVsbCA/IGRlZmF1bHRWYWx1ZSA6IG51bGwsXG5cdCAgICAgIG9uQ2hhbmdlOiBfaGFuZGxlQ2hhbmdlLmJpbmQoaW5zdClcblx0ICAgIH07XG5cdCAgfSxcblx0XG5cdCAgbW91bnRSZWFkeVdyYXBwZXI6IGZ1bmN0aW9uIChpbnN0KSB7XG5cdCAgICAvLyBDYW4ndCBiZSBpbiBtb3VudFdyYXBwZXIgb3IgZWxzZSBzZXJ2ZXIgcmVuZGVyaW5nIGxlYWtzLlxuXHQgICAgaW5zdGFuY2VzQnlSZWFjdElEW2luc3QuX3Jvb3ROb2RlSURdID0gaW5zdDtcblx0ICB9LFxuXHRcblx0ICB1bm1vdW50V3JhcHBlcjogZnVuY3Rpb24gKGluc3QpIHtcblx0ICAgIGRlbGV0ZSBpbnN0YW5jZXNCeVJlYWN0SURbaW5zdC5fcm9vdE5vZGVJRF07XG5cdCAgfSxcblx0XG5cdCAgdXBkYXRlV3JhcHBlcjogZnVuY3Rpb24gKGluc3QpIHtcblx0ICAgIHZhciBwcm9wcyA9IGluc3QuX2N1cnJlbnRFbGVtZW50LnByb3BzO1xuXHRcblx0ICAgIC8vIFRPRE86IFNob3VsZG4ndCB0aGlzIGJlIGdldENoZWNrZWQocHJvcHMpP1xuXHQgICAgdmFyIGNoZWNrZWQgPSBwcm9wcy5jaGVja2VkO1xuXHQgICAgaWYgKGNoZWNrZWQgIT0gbnVsbCkge1xuXHQgICAgICBSZWFjdERPTUlET3BlcmF0aW9ucy51cGRhdGVQcm9wZXJ0eUJ5SUQoaW5zdC5fcm9vdE5vZGVJRCwgJ2NoZWNrZWQnLCBjaGVja2VkIHx8IGZhbHNlKTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgdmFsdWUgPSBMaW5rZWRWYWx1ZVV0aWxzLmdldFZhbHVlKHByb3BzKTtcblx0ICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7XG5cdCAgICAgIC8vIENhc3QgYHZhbHVlYCB0byBhIHN0cmluZyB0byBlbnN1cmUgdGhlIHZhbHVlIGlzIHNldCBjb3JyZWN0bHkuIFdoaWxlXG5cdCAgICAgIC8vIGJyb3dzZXJzIHR5cGljYWxseSBkbyB0aGlzIGFzIG5lY2Vzc2FyeSwganNkb20gZG9lc24ndC5cblx0ICAgICAgUmVhY3RET01JRE9wZXJhdGlvbnMudXBkYXRlUHJvcGVydHlCeUlEKGluc3QuX3Jvb3ROb2RlSUQsICd2YWx1ZScsICcnICsgdmFsdWUpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdGZ1bmN0aW9uIF9oYW5kbGVDaGFuZ2UoZXZlbnQpIHtcblx0ICB2YXIgcHJvcHMgPSB0aGlzLl9jdXJyZW50RWxlbWVudC5wcm9wcztcblx0XG5cdCAgdmFyIHJldHVyblZhbHVlID0gTGlua2VkVmFsdWVVdGlscy5leGVjdXRlT25DaGFuZ2UocHJvcHMsIGV2ZW50KTtcblx0XG5cdCAgLy8gSGVyZSB3ZSB1c2UgYXNhcCB0byB3YWl0IHVudGlsIGFsbCB1cGRhdGVzIGhhdmUgcHJvcGFnYXRlZCwgd2hpY2hcblx0ICAvLyBpcyBpbXBvcnRhbnQgd2hlbiB1c2luZyBjb250cm9sbGVkIGNvbXBvbmVudHMgd2l0aGluIGxheWVyczpcblx0ICAvLyBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QvaXNzdWVzLzE2OThcblx0ICBSZWFjdFVwZGF0ZXMuYXNhcChmb3JjZVVwZGF0ZUlmTW91bnRlZCwgdGhpcyk7XG5cdFxuXHQgIHZhciBuYW1lID0gcHJvcHMubmFtZTtcblx0ICBpZiAocHJvcHMudHlwZSA9PT0gJ3JhZGlvJyAmJiBuYW1lICE9IG51bGwpIHtcblx0ICAgIHZhciByb290Tm9kZSA9IFJlYWN0TW91bnQuZ2V0Tm9kZSh0aGlzLl9yb290Tm9kZUlEKTtcblx0ICAgIHZhciBxdWVyeVJvb3QgPSByb290Tm9kZTtcblx0XG5cdCAgICB3aGlsZSAocXVlcnlSb290LnBhcmVudE5vZGUpIHtcblx0ICAgICAgcXVlcnlSb290ID0gcXVlcnlSb290LnBhcmVudE5vZGU7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gSWYgYHJvb3ROb2RlLmZvcm1gIHdhcyBub24tbnVsbCwgdGhlbiB3ZSBjb3VsZCB0cnkgYGZvcm0uZWxlbWVudHNgLFxuXHQgICAgLy8gYnV0IHRoYXQgc29tZXRpbWVzIGJlaGF2ZXMgc3RyYW5nZWx5IGluIElFOC4gV2UgY291bGQgYWxzbyB0cnkgdXNpbmdcblx0ICAgIC8vIGBmb3JtLmdldEVsZW1lbnRzQnlOYW1lYCwgYnV0IHRoYXQgd2lsbCBvbmx5IHJldHVybiBkaXJlY3QgY2hpbGRyZW5cblx0ICAgIC8vIGFuZCB3b24ndCBpbmNsdWRlIGlucHV0cyB0aGF0IHVzZSB0aGUgSFRNTDUgYGZvcm09YCBhdHRyaWJ1dGUuIFNpbmNlXG5cdCAgICAvLyB0aGUgaW5wdXQgbWlnaHQgbm90IGV2ZW4gYmUgaW4gYSBmb3JtLCBsZXQncyBqdXN0IHVzZSB0aGUgZ2xvYmFsXG5cdCAgICAvLyBgcXVlcnlTZWxlY3RvckFsbGAgdG8gZW5zdXJlIHdlIGRvbid0IG1pc3MgYW55dGhpbmcuXG5cdCAgICB2YXIgZ3JvdXAgPSBxdWVyeVJvb3QucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbbmFtZT0nICsgSlNPTi5zdHJpbmdpZnkoJycgKyBuYW1lKSArICddW3R5cGU9XCJyYWRpb1wiXScpO1xuXHRcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ3JvdXAubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIG90aGVyTm9kZSA9IGdyb3VwW2ldO1xuXHQgICAgICBpZiAob3RoZXJOb2RlID09PSByb290Tm9kZSB8fCBvdGhlck5vZGUuZm9ybSAhPT0gcm9vdE5vZGUuZm9ybSkge1xuXHQgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICB9XG5cdCAgICAgIC8vIFRoaXMgd2lsbCB0aHJvdyBpZiByYWRpbyBidXR0b25zIHJlbmRlcmVkIGJ5IGRpZmZlcmVudCBjb3BpZXMgb2YgUmVhY3Rcblx0ICAgICAgLy8gYW5kIHRoZSBzYW1lIG5hbWUgYXJlIHJlbmRlcmVkIGludG8gdGhlIHNhbWUgZm9ybSAoc2FtZSBhcyAjMTkzOSkuXG5cdCAgICAgIC8vIFRoYXQncyBwcm9iYWJseSBva2F5OyB3ZSBkb24ndCBzdXBwb3J0IGl0IGp1c3QgYXMgd2UgZG9uJ3Qgc3VwcG9ydFxuXHQgICAgICAvLyBtaXhpbmcgUmVhY3Qgd2l0aCBub24tUmVhY3QuXG5cdCAgICAgIHZhciBvdGhlcklEID0gUmVhY3RNb3VudC5nZXRJRChvdGhlck5vZGUpO1xuXHQgICAgICAhb3RoZXJJRCA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdERPTUlucHV0OiBNaXhpbmcgUmVhY3QgYW5kIG5vbi1SZWFjdCByYWRpbyBpbnB1dHMgd2l0aCB0aGUgJyArICdzYW1lIGBuYW1lYCBpcyBub3Qgc3VwcG9ydGVkLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0ICAgICAgdmFyIG90aGVySW5zdGFuY2UgPSBpbnN0YW5jZXNCeVJlYWN0SURbb3RoZXJJRF07XG5cdCAgICAgICFvdGhlckluc3RhbmNlID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0RE9NSW5wdXQ6IFVua25vd24gcmFkaW8gYnV0dG9uIElEICVzLicsIG90aGVySUQpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0ICAgICAgLy8gSWYgdGhpcyBpcyBhIGNvbnRyb2xsZWQgcmFkaW8gYnV0dG9uIGdyb3VwLCBmb3JjaW5nIHRoZSBpbnB1dCB0aGF0XG5cdCAgICAgIC8vIHdhcyBwcmV2aW91c2x5IGNoZWNrZWQgdG8gdXBkYXRlIHdpbGwgY2F1c2UgaXQgdG8gYmUgY29tZSByZS1jaGVja2VkXG5cdCAgICAgIC8vIGFzIGFwcHJvcHJpYXRlLlxuXHQgICAgICBSZWFjdFVwZGF0ZXMuYXNhcChmb3JjZVVwZGF0ZUlmTW91bnRlZCwgb3RoZXJJbnN0YW5jZSk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gcmV0dXJuVmFsdWU7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gUmVhY3RET01JbnB1dDtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oNCkpKVxuXG4vKioqLyB9KSxcbi8qIDEwNiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzKSB7LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBMaW5rZWRWYWx1ZVV0aWxzXG5cdCAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIFJlYWN0UHJvcFR5cGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDcpO1xuXHR2YXIgUmVhY3RQcm9wVHlwZUxvY2F0aW9ucyA9IF9fd2VicGFja19yZXF1aXJlX18oNjUpO1xuXHRcblx0dmFyIGludmFyaWFudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHR2YXIgd2FybmluZyA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHRcblx0dmFyIGhhc1JlYWRPbmx5VmFsdWUgPSB7XG5cdCAgJ2J1dHRvbic6IHRydWUsXG5cdCAgJ2NoZWNrYm94JzogdHJ1ZSxcblx0ICAnaW1hZ2UnOiB0cnVlLFxuXHQgICdoaWRkZW4nOiB0cnVlLFxuXHQgICdyYWRpbyc6IHRydWUsXG5cdCAgJ3Jlc2V0JzogdHJ1ZSxcblx0ICAnc3VibWl0JzogdHJ1ZVxuXHR9O1xuXHRcblx0ZnVuY3Rpb24gX2Fzc2VydFNpbmdsZUxpbmsoaW5wdXRQcm9wcykge1xuXHQgICEoaW5wdXRQcm9wcy5jaGVja2VkTGluayA9PSBudWxsIHx8IGlucHV0UHJvcHMudmFsdWVMaW5rID09IG51bGwpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0Nhbm5vdCBwcm92aWRlIGEgY2hlY2tlZExpbmsgYW5kIGEgdmFsdWVMaW5rLiBJZiB5b3Ugd2FudCB0byB1c2UgJyArICdjaGVja2VkTGluaywgeW91IHByb2JhYmx5IGRvblxcJ3Qgd2FudCB0byB1c2UgdmFsdWVMaW5rIGFuZCB2aWNlIHZlcnNhLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0fVxuXHRmdW5jdGlvbiBfYXNzZXJ0VmFsdWVMaW5rKGlucHV0UHJvcHMpIHtcblx0ICBfYXNzZXJ0U2luZ2xlTGluayhpbnB1dFByb3BzKTtcblx0ICAhKGlucHV0UHJvcHMudmFsdWUgPT0gbnVsbCAmJiBpbnB1dFByb3BzLm9uQ2hhbmdlID09IG51bGwpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0Nhbm5vdCBwcm92aWRlIGEgdmFsdWVMaW5rIGFuZCBhIHZhbHVlIG9yIG9uQ2hhbmdlIGV2ZW50LiBJZiB5b3Ugd2FudCAnICsgJ3RvIHVzZSB2YWx1ZSBvciBvbkNoYW5nZSwgeW91IHByb2JhYmx5IGRvblxcJ3Qgd2FudCB0byB1c2UgdmFsdWVMaW5rLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2Fzc2VydENoZWNrZWRMaW5rKGlucHV0UHJvcHMpIHtcblx0ICBfYXNzZXJ0U2luZ2xlTGluayhpbnB1dFByb3BzKTtcblx0ICAhKGlucHV0UHJvcHMuY2hlY2tlZCA9PSBudWxsICYmIGlucHV0UHJvcHMub25DaGFuZ2UgPT0gbnVsbCkgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnQ2Fubm90IHByb3ZpZGUgYSBjaGVja2VkTGluayBhbmQgYSBjaGVja2VkIHByb3BlcnR5IG9yIG9uQ2hhbmdlIGV2ZW50LiAnICsgJ0lmIHlvdSB3YW50IHRvIHVzZSBjaGVja2VkIG9yIG9uQ2hhbmdlLCB5b3UgcHJvYmFibHkgZG9uXFwndCB3YW50IHRvICcgKyAndXNlIGNoZWNrZWRMaW5rJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXHR9XG5cdFxuXHR2YXIgcHJvcFR5cGVzID0ge1xuXHQgIHZhbHVlOiBmdW5jdGlvbiAocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lKSB7XG5cdCAgICBpZiAoIXByb3BzW3Byb3BOYW1lXSB8fCBoYXNSZWFkT25seVZhbHVlW3Byb3BzLnR5cGVdIHx8IHByb3BzLm9uQ2hhbmdlIHx8IHByb3BzLnJlYWRPbmx5IHx8IHByb3BzLmRpc2FibGVkKSB7XG5cdCAgICAgIHJldHVybiBudWxsO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIG5ldyBFcnJvcignWW91IHByb3ZpZGVkIGEgYHZhbHVlYCBwcm9wIHRvIGEgZm9ybSBmaWVsZCB3aXRob3V0IGFuICcgKyAnYG9uQ2hhbmdlYCBoYW5kbGVyLiBUaGlzIHdpbGwgcmVuZGVyIGEgcmVhZC1vbmx5IGZpZWxkLiBJZiAnICsgJ3RoZSBmaWVsZCBzaG91bGQgYmUgbXV0YWJsZSB1c2UgYGRlZmF1bHRWYWx1ZWAuIE90aGVyd2lzZSwgJyArICdzZXQgZWl0aGVyIGBvbkNoYW5nZWAgb3IgYHJlYWRPbmx5YC4nKTtcblx0ICB9LFxuXHQgIGNoZWNrZWQ6IGZ1bmN0aW9uIChwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUpIHtcblx0ICAgIGlmICghcHJvcHNbcHJvcE5hbWVdIHx8IHByb3BzLm9uQ2hhbmdlIHx8IHByb3BzLnJlYWRPbmx5IHx8IHByb3BzLmRpc2FibGVkKSB7XG5cdCAgICAgIHJldHVybiBudWxsO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIG5ldyBFcnJvcignWW91IHByb3ZpZGVkIGEgYGNoZWNrZWRgIHByb3AgdG8gYSBmb3JtIGZpZWxkIHdpdGhvdXQgYW4gJyArICdgb25DaGFuZ2VgIGhhbmRsZXIuIFRoaXMgd2lsbCByZW5kZXIgYSByZWFkLW9ubHkgZmllbGQuIElmICcgKyAndGhlIGZpZWxkIHNob3VsZCBiZSBtdXRhYmxlIHVzZSBgZGVmYXVsdENoZWNrZWRgLiBPdGhlcndpc2UsICcgKyAnc2V0IGVpdGhlciBgb25DaGFuZ2VgIG9yIGByZWFkT25seWAuJyk7XG5cdCAgfSxcblx0ICBvbkNoYW5nZTogUmVhY3RQcm9wVHlwZXMuZnVuY1xuXHR9O1xuXHRcblx0dmFyIGxvZ2dlZFR5cGVGYWlsdXJlcyA9IHt9O1xuXHRmdW5jdGlvbiBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0ob3duZXIpIHtcblx0ICBpZiAob3duZXIpIHtcblx0ICAgIHZhciBuYW1lID0gb3duZXIuZ2V0TmFtZSgpO1xuXHQgICAgaWYgKG5hbWUpIHtcblx0ICAgICAgcmV0dXJuICcgQ2hlY2sgdGhlIHJlbmRlciBtZXRob2Qgb2YgYCcgKyBuYW1lICsgJ2AuJztcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuICcnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUHJvdmlkZSBhIGxpbmtlZCBgdmFsdWVgIGF0dHJpYnV0ZSBmb3IgY29udHJvbGxlZCBmb3Jtcy4gWW91IHNob3VsZCBub3QgdXNlXG5cdCAqIHRoaXMgb3V0c2lkZSBvZiB0aGUgUmVhY3RET00gY29udHJvbGxlZCBmb3JtIGNvbXBvbmVudHMuXG5cdCAqL1xuXHR2YXIgTGlua2VkVmFsdWVVdGlscyA9IHtcblx0ICBjaGVja1Byb3BUeXBlczogZnVuY3Rpb24gKHRhZ05hbWUsIHByb3BzLCBvd25lcikge1xuXHQgICAgZm9yICh2YXIgcHJvcE5hbWUgaW4gcHJvcFR5cGVzKSB7XG5cdCAgICAgIGlmIChwcm9wVHlwZXMuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpKSB7XG5cdCAgICAgICAgdmFyIGVycm9yID0gcHJvcFR5cGVzW3Byb3BOYW1lXShwcm9wcywgcHJvcE5hbWUsIHRhZ05hbWUsIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnMucHJvcCwgbnVsbCwgJ1NFQ1JFVF9ET19OT1RfUEFTU19USElTX09SX1lPVV9XSUxMX0JFX0ZJUkVEJyk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgIShlcnJvci5tZXNzYWdlIGluIGxvZ2dlZFR5cGVGYWlsdXJlcykpIHtcblx0ICAgICAgICAvLyBPbmx5IG1vbml0b3IgdGhpcyBmYWlsdXJlIG9uY2UgYmVjYXVzZSB0aGVyZSB0ZW5kcyB0byBiZSBhIGxvdCBvZiB0aGVcblx0ICAgICAgICAvLyBzYW1lIGVycm9yLlxuXHQgICAgICAgIGxvZ2dlZFR5cGVGYWlsdXJlc1tlcnJvci5tZXNzYWdlXSA9IHRydWU7XG5cdFxuXHQgICAgICAgIHZhciBhZGRlbmR1bSA9IGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShvd25lcik7XG5cdCAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdGYWlsZWQgZm9ybSBwcm9wVHlwZTogJXMlcycsIGVycm9yLm1lc3NhZ2UsIGFkZGVuZHVtKSA6IHVuZGVmaW5lZDtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIEBwYXJhbSB7b2JqZWN0fSBpbnB1dFByb3BzIFByb3BzIGZvciBmb3JtIGNvbXBvbmVudFxuXHQgICAqIEByZXR1cm4geyp9IGN1cnJlbnQgdmFsdWUgb2YgdGhlIGlucHV0IGVpdGhlciBmcm9tIHZhbHVlIHByb3Agb3IgbGluay5cblx0ICAgKi9cblx0ICBnZXRWYWx1ZTogZnVuY3Rpb24gKGlucHV0UHJvcHMpIHtcblx0ICAgIGlmIChpbnB1dFByb3BzLnZhbHVlTGluaykge1xuXHQgICAgICBfYXNzZXJ0VmFsdWVMaW5rKGlucHV0UHJvcHMpO1xuXHQgICAgICByZXR1cm4gaW5wdXRQcm9wcy52YWx1ZUxpbmsudmFsdWU7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gaW5wdXRQcm9wcy52YWx1ZTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBAcGFyYW0ge29iamVjdH0gaW5wdXRQcm9wcyBQcm9wcyBmb3IgZm9ybSBjb21wb25lbnRcblx0ICAgKiBAcmV0dXJuIHsqfSBjdXJyZW50IGNoZWNrZWQgc3RhdHVzIG9mIHRoZSBpbnB1dCBlaXRoZXIgZnJvbSBjaGVja2VkIHByb3Bcblx0ICAgKiAgICAgICAgICAgICBvciBsaW5rLlxuXHQgICAqL1xuXHQgIGdldENoZWNrZWQ6IGZ1bmN0aW9uIChpbnB1dFByb3BzKSB7XG5cdCAgICBpZiAoaW5wdXRQcm9wcy5jaGVja2VkTGluaykge1xuXHQgICAgICBfYXNzZXJ0Q2hlY2tlZExpbmsoaW5wdXRQcm9wcyk7XG5cdCAgICAgIHJldHVybiBpbnB1dFByb3BzLmNoZWNrZWRMaW5rLnZhbHVlO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGlucHV0UHJvcHMuY2hlY2tlZDtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBAcGFyYW0ge29iamVjdH0gaW5wdXRQcm9wcyBQcm9wcyBmb3IgZm9ybSBjb21wb25lbnRcblx0ICAgKiBAcGFyYW0ge1N5bnRoZXRpY0V2ZW50fSBldmVudCBjaGFuZ2UgZXZlbnQgdG8gaGFuZGxlXG5cdCAgICovXG5cdCAgZXhlY3V0ZU9uQ2hhbmdlOiBmdW5jdGlvbiAoaW5wdXRQcm9wcywgZXZlbnQpIHtcblx0ICAgIGlmIChpbnB1dFByb3BzLnZhbHVlTGluaykge1xuXHQgICAgICBfYXNzZXJ0VmFsdWVMaW5rKGlucHV0UHJvcHMpO1xuXHQgICAgICByZXR1cm4gaW5wdXRQcm9wcy52YWx1ZUxpbmsucmVxdWVzdENoYW5nZShldmVudC50YXJnZXQudmFsdWUpO1xuXHQgICAgfSBlbHNlIGlmIChpbnB1dFByb3BzLmNoZWNrZWRMaW5rKSB7XG5cdCAgICAgIF9hc3NlcnRDaGVja2VkTGluayhpbnB1dFByb3BzKTtcblx0ICAgICAgcmV0dXJuIGlucHV0UHJvcHMuY2hlY2tlZExpbmsucmVxdWVzdENoYW5nZShldmVudC50YXJnZXQuY2hlY2tlZCk7XG5cdCAgICB9IGVsc2UgaWYgKGlucHV0UHJvcHMub25DaGFuZ2UpIHtcblx0ICAgICAgcmV0dXJuIGlucHV0UHJvcHMub25DaGFuZ2UuY2FsbCh1bmRlZmluZWQsIGV2ZW50KTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IExpbmtlZFZhbHVlVXRpbHM7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpKSlcblxuLyoqKi8gfSksXG4vKiAxMDcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0UHJvcFR5cGVzXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIFJlYWN0RWxlbWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oNDIpO1xuXHR2YXIgUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY2KTtcblx0XG5cdHZhciBlbXB0eUZ1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdHZhciBnZXRJdGVyYXRvckZuID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDgpO1xuXHRcblx0LyoqXG5cdCAqIENvbGxlY3Rpb24gb2YgbWV0aG9kcyB0aGF0IGFsbG93IGRlY2xhcmF0aW9uIGFuZCB2YWxpZGF0aW9uIG9mIHByb3BzIHRoYXQgYXJlXG5cdCAqIHN1cHBsaWVkIHRvIFJlYWN0IGNvbXBvbmVudHMuIEV4YW1wbGUgdXNhZ2U6XG5cdCAqXG5cdCAqICAgdmFyIFByb3BzID0gcmVxdWlyZSgnUmVhY3RQcm9wVHlwZXMnKTtcblx0ICogICB2YXIgTXlBcnRpY2xlID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuXHQgKiAgICAgcHJvcFR5cGVzOiB7XG5cdCAqICAgICAgIC8vIEFuIG9wdGlvbmFsIHN0cmluZyBwcm9wIG5hbWVkIFwiZGVzY3JpcHRpb25cIi5cblx0ICogICAgICAgZGVzY3JpcHRpb246IFByb3BzLnN0cmluZyxcblx0ICpcblx0ICogICAgICAgLy8gQSByZXF1aXJlZCBlbnVtIHByb3AgbmFtZWQgXCJjYXRlZ29yeVwiLlxuXHQgKiAgICAgICBjYXRlZ29yeTogUHJvcHMub25lT2YoWydOZXdzJywnUGhvdG9zJ10pLmlzUmVxdWlyZWQsXG5cdCAqXG5cdCAqICAgICAgIC8vIEEgcHJvcCBuYW1lZCBcImRpYWxvZ1wiIHRoYXQgcmVxdWlyZXMgYW4gaW5zdGFuY2Ugb2YgRGlhbG9nLlxuXHQgKiAgICAgICBkaWFsb2c6IFByb3BzLmluc3RhbmNlT2YoRGlhbG9nKS5pc1JlcXVpcmVkXG5cdCAqICAgICB9LFxuXHQgKiAgICAgcmVuZGVyOiBmdW5jdGlvbigpIHsgLi4uIH1cblx0ICogICB9KTtcblx0ICpcblx0ICogQSBtb3JlIGZvcm1hbCBzcGVjaWZpY2F0aW9uIG9mIGhvdyB0aGVzZSBtZXRob2RzIGFyZSB1c2VkOlxuXHQgKlxuXHQgKiAgIHR5cGUgOj0gYXJyYXl8Ym9vbHxmdW5jfG9iamVjdHxudW1iZXJ8c3RyaW5nfG9uZU9mKFsuLi5dKXxpbnN0YW5jZU9mKC4uLilcblx0ICogICBkZWNsIDo9IFJlYWN0UHJvcFR5cGVzLnt0eXBlfSguaXNSZXF1aXJlZCk/XG5cdCAqXG5cdCAqIEVhY2ggYW5kIGV2ZXJ5IGRlY2xhcmF0aW9uIHByb2R1Y2VzIGEgZnVuY3Rpb24gd2l0aCB0aGUgc2FtZSBzaWduYXR1cmUuIFRoaXNcblx0ICogYWxsb3dzIHRoZSBjcmVhdGlvbiBvZiBjdXN0b20gdmFsaWRhdGlvbiBmdW5jdGlvbnMuIEZvciBleGFtcGxlOlxuXHQgKlxuXHQgKiAgdmFyIE15TGluayA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcblx0ICogICAgcHJvcFR5cGVzOiB7XG5cdCAqICAgICAgLy8gQW4gb3B0aW9uYWwgc3RyaW5nIG9yIFVSSSBwcm9wIG5hbWVkIFwiaHJlZlwiLlxuXHQgKiAgICAgIGhyZWY6IGZ1bmN0aW9uKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSkge1xuXHQgKiAgICAgICAgdmFyIHByb3BWYWx1ZSA9IHByb3BzW3Byb3BOYW1lXTtcblx0ICogICAgICAgIGlmIChwcm9wVmFsdWUgIT0gbnVsbCAmJiB0eXBlb2YgcHJvcFZhbHVlICE9PSAnc3RyaW5nJyAmJlxuXHQgKiAgICAgICAgICAgICEocHJvcFZhbHVlIGluc3RhbmNlb2YgVVJJKSkge1xuXHQgKiAgICAgICAgICByZXR1cm4gbmV3IEVycm9yKFxuXHQgKiAgICAgICAgICAgICdFeHBlY3RlZCBhIHN0cmluZyBvciBhbiBVUkkgZm9yICcgKyBwcm9wTmFtZSArICcgaW4gJyArXG5cdCAqICAgICAgICAgICAgY29tcG9uZW50TmFtZVxuXHQgKiAgICAgICAgICApO1xuXHQgKiAgICAgICAgfVxuXHQgKiAgICAgIH1cblx0ICogICAgfSxcblx0ICogICAgcmVuZGVyOiBmdW5jdGlvbigpIHsuLi59XG5cdCAqICB9KTtcblx0ICpcblx0ICogQGludGVybmFsXG5cdCAqL1xuXHRcblx0dmFyIEFOT05ZTU9VUyA9ICc8PGFub255bW91cz4+Jztcblx0XG5cdHZhciBSZWFjdFByb3BUeXBlcyA9IHtcblx0ICBhcnJheTogY3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXIoJ2FycmF5JyksXG5cdCAgYm9vbDogY3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXIoJ2Jvb2xlYW4nKSxcblx0ICBmdW5jOiBjcmVhdGVQcmltaXRpdmVUeXBlQ2hlY2tlcignZnVuY3Rpb24nKSxcblx0ICBudW1iZXI6IGNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyKCdudW1iZXInKSxcblx0ICBvYmplY3Q6IGNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyKCdvYmplY3QnKSxcblx0ICBzdHJpbmc6IGNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyKCdzdHJpbmcnKSxcblx0XG5cdCAgYW55OiBjcmVhdGVBbnlUeXBlQ2hlY2tlcigpLFxuXHQgIGFycmF5T2Y6IGNyZWF0ZUFycmF5T2ZUeXBlQ2hlY2tlcixcblx0ICBlbGVtZW50OiBjcmVhdGVFbGVtZW50VHlwZUNoZWNrZXIoKSxcblx0ICBpbnN0YW5jZU9mOiBjcmVhdGVJbnN0YW5jZVR5cGVDaGVja2VyLFxuXHQgIG5vZGU6IGNyZWF0ZU5vZGVDaGVja2VyKCksXG5cdCAgb2JqZWN0T2Y6IGNyZWF0ZU9iamVjdE9mVHlwZUNoZWNrZXIsXG5cdCAgb25lT2Y6IGNyZWF0ZUVudW1UeXBlQ2hlY2tlcixcblx0ICBvbmVPZlR5cGU6IGNyZWF0ZVVuaW9uVHlwZUNoZWNrZXIsXG5cdCAgc2hhcGU6IGNyZWF0ZVNoYXBlVHlwZUNoZWNrZXJcblx0fTtcblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKSB7XG5cdCAgZnVuY3Rpb24gY2hlY2tUeXBlKGlzUmVxdWlyZWQsIHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSkge1xuXHQgICAgY29tcG9uZW50TmFtZSA9IGNvbXBvbmVudE5hbWUgfHwgQU5PTllNT1VTO1xuXHQgICAgcHJvcEZ1bGxOYW1lID0gcHJvcEZ1bGxOYW1lIHx8IHByb3BOYW1lO1xuXHQgICAgaWYgKHByb3BzW3Byb3BOYW1lXSA9PSBudWxsKSB7XG5cdCAgICAgIHZhciBsb2NhdGlvbk5hbWUgPSBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lc1tsb2NhdGlvbl07XG5cdCAgICAgIGlmIChpc1JlcXVpcmVkKSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBFcnJvcignUmVxdWlyZWQgJyArIGxvY2F0aW9uTmFtZSArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCB3YXMgbm90IHNwZWNpZmllZCBpbiAnICsgKCdgJyArIGNvbXBvbmVudE5hbWUgKyAnYC4nKSk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIG51bGw7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHZhciBjaGFpbmVkQ2hlY2tUeXBlID0gY2hlY2tUeXBlLmJpbmQobnVsbCwgZmFsc2UpO1xuXHQgIGNoYWluZWRDaGVja1R5cGUuaXNSZXF1aXJlZCA9IGNoZWNrVHlwZS5iaW5kKG51bGwsIHRydWUpO1xuXHRcblx0ICByZXR1cm4gY2hhaW5lZENoZWNrVHlwZTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXIoZXhwZWN0ZWRUeXBlKSB7XG5cdCAgZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKSB7XG5cdCAgICB2YXIgcHJvcFZhbHVlID0gcHJvcHNbcHJvcE5hbWVdO1xuXHQgICAgdmFyIHByb3BUeXBlID0gZ2V0UHJvcFR5cGUocHJvcFZhbHVlKTtcblx0ICAgIGlmIChwcm9wVHlwZSAhPT0gZXhwZWN0ZWRUeXBlKSB7XG5cdCAgICAgIHZhciBsb2NhdGlvbk5hbWUgPSBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lc1tsb2NhdGlvbl07XG5cdCAgICAgIC8vIGBwcm9wVmFsdWVgIGJlaW5nIGluc3RhbmNlIG9mLCBzYXksIGRhdGUvcmVnZXhwLCBwYXNzIHRoZSAnb2JqZWN0J1xuXHQgICAgICAvLyBjaGVjaywgYnV0IHdlIGNhbiBvZmZlciBhIG1vcmUgcHJlY2lzZSBlcnJvciBtZXNzYWdlIGhlcmUgcmF0aGVyIHRoYW5cblx0ICAgICAgLy8gJ29mIHR5cGUgYG9iamVjdGAnLlxuXHQgICAgICB2YXIgcHJlY2lzZVR5cGUgPSBnZXRQcmVjaXNlVHlwZShwcm9wVmFsdWUpO1xuXHRcblx0ICAgICAgcmV0dXJuIG5ldyBFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb25OYW1lICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIG9mIHR5cGUgJyArICgnYCcgKyBwcmVjaXNlVHlwZSArICdgIHN1cHBsaWVkIHRvIGAnICsgY29tcG9uZW50TmFtZSArICdgLCBleHBlY3RlZCAnKSArICgnYCcgKyBleHBlY3RlZFR5cGUgKyAnYC4nKSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gbnVsbDtcblx0ICB9XG5cdCAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlQW55VHlwZUNoZWNrZXIoKSB7XG5cdCAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKGVtcHR5RnVuY3Rpb24udGhhdFJldHVybnMobnVsbCkpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVBcnJheU9mVHlwZUNoZWNrZXIodHlwZUNoZWNrZXIpIHtcblx0ICBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpIHtcblx0ICAgIHZhciBwcm9wVmFsdWUgPSBwcm9wc1twcm9wTmFtZV07XG5cdCAgICBpZiAoIUFycmF5LmlzQXJyYXkocHJvcFZhbHVlKSkge1xuXHQgICAgICB2YXIgbG9jYXRpb25OYW1lID0gUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXNbbG9jYXRpb25dO1xuXHQgICAgICB2YXIgcHJvcFR5cGUgPSBnZXRQcm9wVHlwZShwcm9wVmFsdWUpO1xuXHQgICAgICByZXR1cm4gbmV3IEVycm9yKCdJbnZhbGlkICcgKyBsb2NhdGlvbk5hbWUgKyAnIGAnICsgcHJvcEZ1bGxOYW1lICsgJ2Agb2YgdHlwZSAnICsgKCdgJyArIHByb3BUeXBlICsgJ2Agc3VwcGxpZWQgdG8gYCcgKyBjb21wb25lbnROYW1lICsgJ2AsIGV4cGVjdGVkIGFuIGFycmF5LicpKTtcblx0ICAgIH1cblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcFZhbHVlLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBlcnJvciA9IHR5cGVDaGVja2VyKHByb3BWYWx1ZSwgaSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSArICdbJyArIGkgKyAnXScsICdTRUNSRVRfRE9fTk9UX1BBU1NfVEhJU19PUl9ZT1VfV0lMTF9CRV9GSVJFRCcpO1xuXHQgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuXHQgICAgICAgIHJldHVybiBlcnJvcjtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIG51bGw7XG5cdCAgfVxuXHQgIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnRUeXBlQ2hlY2tlcigpIHtcblx0ICBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpIHtcblx0ICAgIGlmICghUmVhY3RFbGVtZW50LmlzVmFsaWRFbGVtZW50KHByb3BzW3Byb3BOYW1lXSkpIHtcblx0ICAgICAgdmFyIGxvY2F0aW9uTmFtZSA9IFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXTtcblx0ICAgICAgcmV0dXJuIG5ldyBFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb25OYW1lICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIHN1cHBsaWVkIHRvICcgKyAoJ2AnICsgY29tcG9uZW50TmFtZSArICdgLCBleHBlY3RlZCBhIHNpbmdsZSBSZWFjdEVsZW1lbnQuJykpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIG51bGw7XG5cdCAgfVxuXHQgIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUluc3RhbmNlVHlwZUNoZWNrZXIoZXhwZWN0ZWRDbGFzcykge1xuXHQgIGZ1bmN0aW9uIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSkge1xuXHQgICAgaWYgKCEocHJvcHNbcHJvcE5hbWVdIGluc3RhbmNlb2YgZXhwZWN0ZWRDbGFzcykpIHtcblx0ICAgICAgdmFyIGxvY2F0aW9uTmFtZSA9IFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXTtcblx0ICAgICAgdmFyIGV4cGVjdGVkQ2xhc3NOYW1lID0gZXhwZWN0ZWRDbGFzcy5uYW1lIHx8IEFOT05ZTU9VUztcblx0ICAgICAgdmFyIGFjdHVhbENsYXNzTmFtZSA9IGdldENsYXNzTmFtZShwcm9wc1twcm9wTmFtZV0pO1xuXHQgICAgICByZXR1cm4gbmV3IEVycm9yKCdJbnZhbGlkICcgKyBsb2NhdGlvbk5hbWUgKyAnIGAnICsgcHJvcEZ1bGxOYW1lICsgJ2Agb2YgdHlwZSAnICsgKCdgJyArIGFjdHVhbENsYXNzTmFtZSArICdgIHN1cHBsaWVkIHRvIGAnICsgY29tcG9uZW50TmFtZSArICdgLCBleHBlY3RlZCAnKSArICgnaW5zdGFuY2Ugb2YgYCcgKyBleHBlY3RlZENsYXNzTmFtZSArICdgLicpKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBudWxsO1xuXHQgIH1cblx0ICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVFbnVtVHlwZUNoZWNrZXIoZXhwZWN0ZWRWYWx1ZXMpIHtcblx0ICBpZiAoIUFycmF5LmlzQXJyYXkoZXhwZWN0ZWRWYWx1ZXMpKSB7XG5cdCAgICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIoZnVuY3Rpb24gKCkge1xuXHQgICAgICByZXR1cm4gbmV3IEVycm9yKCdJbnZhbGlkIGFyZ3VtZW50IHN1cHBsaWVkIHRvIG9uZU9mLCBleHBlY3RlZCBhbiBpbnN0YW5jZSBvZiBhcnJheS4nKTtcblx0ICAgIH0pO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKSB7XG5cdCAgICB2YXIgcHJvcFZhbHVlID0gcHJvcHNbcHJvcE5hbWVdO1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBleHBlY3RlZFZhbHVlcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICBpZiAocHJvcFZhbHVlID09PSBleHBlY3RlZFZhbHVlc1tpXSkge1xuXHQgICAgICAgIHJldHVybiBudWxsO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGxvY2F0aW9uTmFtZSA9IFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXTtcblx0ICAgIHZhciB2YWx1ZXNTdHJpbmcgPSBKU09OLnN0cmluZ2lmeShleHBlY3RlZFZhbHVlcyk7XG5cdCAgICByZXR1cm4gbmV3IEVycm9yKCdJbnZhbGlkICcgKyBsb2NhdGlvbk5hbWUgKyAnIGAnICsgcHJvcEZ1bGxOYW1lICsgJ2Agb2YgdmFsdWUgYCcgKyBwcm9wVmFsdWUgKyAnYCAnICsgKCdzdXBwbGllZCB0byBgJyArIGNvbXBvbmVudE5hbWUgKyAnYCwgZXhwZWN0ZWQgb25lIG9mICcgKyB2YWx1ZXNTdHJpbmcgKyAnLicpKTtcblx0ICB9XG5cdCAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlT2JqZWN0T2ZUeXBlQ2hlY2tlcih0eXBlQ2hlY2tlcikge1xuXHQgIGZ1bmN0aW9uIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSkge1xuXHQgICAgdmFyIHByb3BWYWx1ZSA9IHByb3BzW3Byb3BOYW1lXTtcblx0ICAgIHZhciBwcm9wVHlwZSA9IGdldFByb3BUeXBlKHByb3BWYWx1ZSk7XG5cdCAgICBpZiAocHJvcFR5cGUgIT09ICdvYmplY3QnKSB7XG5cdCAgICAgIHZhciBsb2NhdGlvbk5hbWUgPSBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lc1tsb2NhdGlvbl07XG5cdCAgICAgIHJldHVybiBuZXcgRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uTmFtZSArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBvZiB0eXBlICcgKyAoJ2AnICsgcHJvcFR5cGUgKyAnYCBzdXBwbGllZCB0byBgJyArIGNvbXBvbmVudE5hbWUgKyAnYCwgZXhwZWN0ZWQgYW4gb2JqZWN0LicpKTtcblx0ICAgIH1cblx0ICAgIGZvciAodmFyIGtleSBpbiBwcm9wVmFsdWUpIHtcblx0ICAgICAgaWYgKHByb3BWYWx1ZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG5cdCAgICAgICAgdmFyIGVycm9yID0gdHlwZUNoZWNrZXIocHJvcFZhbHVlLCBrZXksIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUgKyAnLicgKyBrZXksICdTRUNSRVRfRE9fTk9UX1BBU1NfVEhJU19PUl9ZT1VfV0lMTF9CRV9GSVJFRCcpO1xuXHQgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG5cdCAgICAgICAgICByZXR1cm4gZXJyb3I7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gbnVsbDtcblx0ICB9XG5cdCAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlVW5pb25UeXBlQ2hlY2tlcihhcnJheU9mVHlwZUNoZWNrZXJzKSB7XG5cdCAgaWYgKCFBcnJheS5pc0FycmF5KGFycmF5T2ZUeXBlQ2hlY2tlcnMpKSB7XG5cdCAgICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIoZnVuY3Rpb24gKCkge1xuXHQgICAgICByZXR1cm4gbmV3IEVycm9yKCdJbnZhbGlkIGFyZ3VtZW50IHN1cHBsaWVkIHRvIG9uZU9mVHlwZSwgZXhwZWN0ZWQgYW4gaW5zdGFuY2Ugb2YgYXJyYXkuJyk7XG5cdCAgICB9KTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSkge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheU9mVHlwZUNoZWNrZXJzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBjaGVja2VyID0gYXJyYXlPZlR5cGVDaGVja2Vyc1tpXTtcblx0ICAgICAgaWYgKGNoZWNrZXIocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lLCAnU0VDUkVUX0RPX05PVF9QQVNTX1RISVNfT1JfWU9VX1dJTExfQkVfRklSRUQnKSA9PSBudWxsKSB7XG5cdCAgICAgICAgcmV0dXJuIG51bGw7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICB2YXIgbG9jYXRpb25OYW1lID0gUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXNbbG9jYXRpb25dO1xuXHQgICAgcmV0dXJuIG5ldyBFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb25OYW1lICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIHN1cHBsaWVkIHRvICcgKyAoJ2AnICsgY29tcG9uZW50TmFtZSArICdgLicpKTtcblx0ICB9XG5cdCAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlTm9kZUNoZWNrZXIoKSB7XG5cdCAgZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKSB7XG5cdCAgICBpZiAoIWlzTm9kZShwcm9wc1twcm9wTmFtZV0pKSB7XG5cdCAgICAgIHZhciBsb2NhdGlvbk5hbWUgPSBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lc1tsb2NhdGlvbl07XG5cdCAgICAgIHJldHVybiBuZXcgRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uTmFtZSArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBzdXBwbGllZCB0byAnICsgKCdgJyArIGNvbXBvbmVudE5hbWUgKyAnYCwgZXhwZWN0ZWQgYSBSZWFjdE5vZGUuJykpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIG51bGw7XG5cdCAgfVxuXHQgIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZVNoYXBlVHlwZUNoZWNrZXIoc2hhcGVUeXBlcykge1xuXHQgIGZ1bmN0aW9uIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSkge1xuXHQgICAgdmFyIHByb3BWYWx1ZSA9IHByb3BzW3Byb3BOYW1lXTtcblx0ICAgIHZhciBwcm9wVHlwZSA9IGdldFByb3BUeXBlKHByb3BWYWx1ZSk7XG5cdCAgICBpZiAocHJvcFR5cGUgIT09ICdvYmplY3QnKSB7XG5cdCAgICAgIHZhciBsb2NhdGlvbk5hbWUgPSBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lc1tsb2NhdGlvbl07XG5cdCAgICAgIHJldHVybiBuZXcgRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uTmFtZSArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBvZiB0eXBlIGAnICsgcHJvcFR5cGUgKyAnYCAnICsgKCdzdXBwbGllZCB0byBgJyArIGNvbXBvbmVudE5hbWUgKyAnYCwgZXhwZWN0ZWQgYG9iamVjdGAuJykpO1xuXHQgICAgfVxuXHQgICAgZm9yICh2YXIga2V5IGluIHNoYXBlVHlwZXMpIHtcblx0ICAgICAgdmFyIGNoZWNrZXIgPSBzaGFwZVR5cGVzW2tleV07XG5cdCAgICAgIGlmICghY2hlY2tlcikge1xuXHQgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBlcnJvciA9IGNoZWNrZXIocHJvcFZhbHVlLCBrZXksIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUgKyAnLicgKyBrZXksICdTRUNSRVRfRE9fTk9UX1BBU1NfVEhJU19PUl9ZT1VfV0lMTF9CRV9GSVJFRCcpO1xuXHQgICAgICBpZiAoZXJyb3IpIHtcblx0ICAgICAgICByZXR1cm4gZXJyb3I7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiBudWxsO1xuXHQgIH1cblx0ICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc05vZGUocHJvcFZhbHVlKSB7XG5cdCAgc3dpdGNoICh0eXBlb2YgcHJvcFZhbHVlKSB7XG5cdCAgICBjYXNlICdudW1iZXInOlxuXHQgICAgY2FzZSAnc3RyaW5nJzpcblx0ICAgIGNhc2UgJ3VuZGVmaW5lZCc6XG5cdCAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgY2FzZSAnYm9vbGVhbic6XG5cdCAgICAgIHJldHVybiAhcHJvcFZhbHVlO1xuXHQgICAgY2FzZSAnb2JqZWN0Jzpcblx0ICAgICAgaWYgKEFycmF5LmlzQXJyYXkocHJvcFZhbHVlKSkge1xuXHQgICAgICAgIHJldHVybiBwcm9wVmFsdWUuZXZlcnkoaXNOb2RlKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAocHJvcFZhbHVlID09PSBudWxsIHx8IFJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChwcm9wVmFsdWUpKSB7XG5cdCAgICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBpdGVyYXRvckZuID0gZ2V0SXRlcmF0b3JGbihwcm9wVmFsdWUpO1xuXHQgICAgICBpZiAoaXRlcmF0b3JGbikge1xuXHQgICAgICAgIHZhciBpdGVyYXRvciA9IGl0ZXJhdG9yRm4uY2FsbChwcm9wVmFsdWUpO1xuXHQgICAgICAgIHZhciBzdGVwO1xuXHQgICAgICAgIGlmIChpdGVyYXRvckZuICE9PSBwcm9wVmFsdWUuZW50cmllcykge1xuXHQgICAgICAgICAgd2hpbGUgKCEoc3RlcCA9IGl0ZXJhdG9yLm5leHQoKSkuZG9uZSkge1xuXHQgICAgICAgICAgICBpZiAoIWlzTm9kZShzdGVwLnZhbHVlKSkge1xuXHQgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAvLyBJdGVyYXRvciB3aWxsIHByb3ZpZGUgZW50cnkgW2ssdl0gdHVwbGVzIHJhdGhlciB0aGFuIHZhbHVlcy5cblx0ICAgICAgICAgIHdoaWxlICghKHN0ZXAgPSBpdGVyYXRvci5uZXh0KCkpLmRvbmUpIHtcblx0ICAgICAgICAgICAgdmFyIGVudHJ5ID0gc3RlcC52YWx1ZTtcblx0ICAgICAgICAgICAgaWYgKGVudHJ5KSB7XG5cdCAgICAgICAgICAgICAgaWYgKCFpc05vZGUoZW50cnlbMV0pKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICBkZWZhdWx0OlxuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHR9XG5cdFxuXHQvLyBFcXVpdmFsZW50IG9mIGB0eXBlb2ZgIGJ1dCB3aXRoIHNwZWNpYWwgaGFuZGxpbmcgZm9yIGFycmF5IGFuZCByZWdleHAuXG5cdGZ1bmN0aW9uIGdldFByb3BUeXBlKHByb3BWYWx1ZSkge1xuXHQgIHZhciBwcm9wVHlwZSA9IHR5cGVvZiBwcm9wVmFsdWU7XG5cdCAgaWYgKEFycmF5LmlzQXJyYXkocHJvcFZhbHVlKSkge1xuXHQgICAgcmV0dXJuICdhcnJheSc7XG5cdCAgfVxuXHQgIGlmIChwcm9wVmFsdWUgaW5zdGFuY2VvZiBSZWdFeHApIHtcblx0ICAgIC8vIE9sZCB3ZWJraXRzIChhdCBsZWFzdCB1bnRpbCBBbmRyb2lkIDQuMCkgcmV0dXJuICdmdW5jdGlvbicgcmF0aGVyIHRoYW5cblx0ICAgIC8vICdvYmplY3QnIGZvciB0eXBlb2YgYSBSZWdFeHAuIFdlJ2xsIG5vcm1hbGl6ZSB0aGlzIGhlcmUgc28gdGhhdCAvYmxhL1xuXHQgICAgLy8gcGFzc2VzIFByb3BUeXBlcy5vYmplY3QuXG5cdCAgICByZXR1cm4gJ29iamVjdCc7XG5cdCAgfVxuXHQgIHJldHVybiBwcm9wVHlwZTtcblx0fVxuXHRcblx0Ly8gVGhpcyBoYW5kbGVzIG1vcmUgdHlwZXMgdGhhbiBgZ2V0UHJvcFR5cGVgLiBPbmx5IHVzZWQgZm9yIGVycm9yIG1lc3NhZ2VzLlxuXHQvLyBTZWUgYGNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyYC5cblx0ZnVuY3Rpb24gZ2V0UHJlY2lzZVR5cGUocHJvcFZhbHVlKSB7XG5cdCAgdmFyIHByb3BUeXBlID0gZ2V0UHJvcFR5cGUocHJvcFZhbHVlKTtcblx0ICBpZiAocHJvcFR5cGUgPT09ICdvYmplY3QnKSB7XG5cdCAgICBpZiAocHJvcFZhbHVlIGluc3RhbmNlb2YgRGF0ZSkge1xuXHQgICAgICByZXR1cm4gJ2RhdGUnO1xuXHQgICAgfSBlbHNlIGlmIChwcm9wVmFsdWUgaW5zdGFuY2VvZiBSZWdFeHApIHtcblx0ICAgICAgcmV0dXJuICdyZWdleHAnO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gcHJvcFR5cGU7XG5cdH1cblx0XG5cdC8vIFJldHVybnMgY2xhc3MgbmFtZSBvZiB0aGUgb2JqZWN0LCBpZiBhbnkuXG5cdGZ1bmN0aW9uIGdldENsYXNzTmFtZShwcm9wVmFsdWUpIHtcblx0ICBpZiAoIXByb3BWYWx1ZS5jb25zdHJ1Y3RvciB8fCAhcHJvcFZhbHVlLmNvbnN0cnVjdG9yLm5hbWUpIHtcblx0ICAgIHJldHVybiAnPDxhbm9ueW1vdXM+Pic7XG5cdCAgfVxuXHQgIHJldHVybiBwcm9wVmFsdWUuY29uc3RydWN0b3IubmFtZTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBSZWFjdFByb3BUeXBlcztcblxuLyoqKi8gfSksXG4vKiAxMDggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIGdldEl0ZXJhdG9yRm5cblx0ICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHQvKiBnbG9iYWwgU3ltYm9sICovXG5cdHZhciBJVEVSQVRPUl9TWU1CT0wgPSB0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIFN5bWJvbC5pdGVyYXRvcjtcblx0dmFyIEZBVVhfSVRFUkFUT1JfU1lNQk9MID0gJ0BAaXRlcmF0b3InOyAvLyBCZWZvcmUgU3ltYm9sIHNwZWMuXG5cdFxuXHQvKipcblx0ICogUmV0dXJucyB0aGUgaXRlcmF0b3IgbWV0aG9kIGZ1bmN0aW9uIGNvbnRhaW5lZCBvbiB0aGUgaXRlcmFibGUgb2JqZWN0LlxuXHQgKlxuXHQgKiBCZSBzdXJlIHRvIGludm9rZSB0aGUgZnVuY3Rpb24gd2l0aCB0aGUgaXRlcmFibGUgYXMgY29udGV4dDpcblx0ICpcblx0ICogICAgIHZhciBpdGVyYXRvckZuID0gZ2V0SXRlcmF0b3JGbihteUl0ZXJhYmxlKTtcblx0ICogICAgIGlmIChpdGVyYXRvckZuKSB7XG5cdCAqICAgICAgIHZhciBpdGVyYXRvciA9IGl0ZXJhdG9yRm4uY2FsbChteUl0ZXJhYmxlKTtcblx0ICogICAgICAgLi4uXG5cdCAqICAgICB9XG5cdCAqXG5cdCAqIEBwYXJhbSB7P29iamVjdH0gbWF5YmVJdGVyYWJsZVxuXHQgKiBAcmV0dXJuIHs/ZnVuY3Rpb259XG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRJdGVyYXRvckZuKG1heWJlSXRlcmFibGUpIHtcblx0ICB2YXIgaXRlcmF0b3JGbiA9IG1heWJlSXRlcmFibGUgJiYgKElURVJBVE9SX1NZTUJPTCAmJiBtYXliZUl0ZXJhYmxlW0lURVJBVE9SX1NZTUJPTF0gfHwgbWF5YmVJdGVyYWJsZVtGQVVYX0lURVJBVE9SX1NZTUJPTF0pO1xuXHQgIGlmICh0eXBlb2YgaXRlcmF0b3JGbiA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgcmV0dXJuIGl0ZXJhdG9yRm47XG5cdCAgfVxuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGdldEl0ZXJhdG9yRm47XG5cbi8qKiovIH0pLFxuLyogMTA5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MpIHsvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RE9NT3B0aW9uXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIFJlYWN0Q2hpbGRyZW4gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExMCk7XG5cdHZhciBSZWFjdERPTVNlbGVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTEyKTtcblx0XG5cdHZhciBhc3NpZ24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KTtcblx0dmFyIHdhcm5pbmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTtcblx0XG5cdHZhciB2YWx1ZUNvbnRleHRLZXkgPSBSZWFjdERPTVNlbGVjdC52YWx1ZUNvbnRleHRLZXk7XG5cdFxuXHQvKipcblx0ICogSW1wbGVtZW50cyBhbiA8b3B0aW9uPiBuYXRpdmUgY29tcG9uZW50IHRoYXQgd2FybnMgd2hlbiBgc2VsZWN0ZWRgIGlzIHNldC5cblx0ICovXG5cdHZhciBSZWFjdERPTU9wdGlvbiA9IHtcblx0ICBtb3VudFdyYXBwZXI6IGZ1bmN0aW9uIChpbnN0LCBwcm9wcywgY29udGV4dCkge1xuXHQgICAgLy8gVE9ETyAoeXVuZ3N0ZXJzKTogUmVtb3ZlIHN1cHBvcnQgZm9yIGBzZWxlY3RlZGAgaW4gPG9wdGlvbj4uXG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhwcm9wcy5zZWxlY3RlZCA9PSBudWxsLCAnVXNlIHRoZSBgZGVmYXVsdFZhbHVlYCBvciBgdmFsdWVgIHByb3BzIG9uIDxzZWxlY3Q+IGluc3RlYWQgb2YgJyArICdzZXR0aW5nIGBzZWxlY3RlZGAgb24gPG9wdGlvbj4uJykgOiB1bmRlZmluZWQ7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gTG9vayB1cCB3aGV0aGVyIHRoaXMgb3B0aW9uIGlzICdzZWxlY3RlZCcgdmlhIGNvbnRleHRcblx0ICAgIHZhciBzZWxlY3RWYWx1ZSA9IGNvbnRleHRbdmFsdWVDb250ZXh0S2V5XTtcblx0XG5cdCAgICAvLyBJZiBjb250ZXh0IGtleSBpcyBudWxsIChlLmcuLCBubyBzcGVjaWZpZWQgdmFsdWUgb3IgYWZ0ZXIgaW5pdGlhbCBtb3VudClcblx0ICAgIC8vIG9yIG1pc3NpbmcgKGUuZy4sIGZvciA8ZGF0YWxpc3Q+KSwgd2UgZG9uJ3QgY2hhbmdlIHByb3BzLnNlbGVjdGVkXG5cdCAgICB2YXIgc2VsZWN0ZWQgPSBudWxsO1xuXHQgICAgaWYgKHNlbGVjdFZhbHVlICE9IG51bGwpIHtcblx0ICAgICAgc2VsZWN0ZWQgPSBmYWxzZTtcblx0ICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc2VsZWN0VmFsdWUpKSB7XG5cdCAgICAgICAgLy8gbXVsdGlwbGVcblx0ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGVjdFZhbHVlLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICBpZiAoJycgKyBzZWxlY3RWYWx1ZVtpXSA9PT0gJycgKyBwcm9wcy52YWx1ZSkge1xuXHQgICAgICAgICAgICBzZWxlY3RlZCA9IHRydWU7XG5cdCAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBzZWxlY3RlZCA9ICcnICsgc2VsZWN0VmFsdWUgPT09ICcnICsgcHJvcHMudmFsdWU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBpbnN0Ll93cmFwcGVyU3RhdGUgPSB7IHNlbGVjdGVkOiBzZWxlY3RlZCB9O1xuXHQgIH0sXG5cdFxuXHQgIGdldE5hdGl2ZVByb3BzOiBmdW5jdGlvbiAoaW5zdCwgcHJvcHMsIGNvbnRleHQpIHtcblx0ICAgIHZhciBuYXRpdmVQcm9wcyA9IGFzc2lnbih7IHNlbGVjdGVkOiB1bmRlZmluZWQsIGNoaWxkcmVuOiB1bmRlZmluZWQgfSwgcHJvcHMpO1xuXHRcblx0ICAgIC8vIFJlYWQgc3RhdGUgb25seSBmcm9tIGluaXRpYWwgbW91bnQgYmVjYXVzZSA8c2VsZWN0PiB1cGRhdGVzIHZhbHVlXG5cdCAgICAvLyBtYW51YWxseTsgd2UgbmVlZCB0aGUgaW5pdGlhbCBzdGF0ZSBvbmx5IGZvciBzZXJ2ZXIgcmVuZGVyaW5nXG5cdCAgICBpZiAoaW5zdC5fd3JhcHBlclN0YXRlLnNlbGVjdGVkICE9IG51bGwpIHtcblx0ICAgICAgbmF0aXZlUHJvcHMuc2VsZWN0ZWQgPSBpbnN0Ll93cmFwcGVyU3RhdGUuc2VsZWN0ZWQ7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGNvbnRlbnQgPSAnJztcblx0XG5cdCAgICAvLyBGbGF0dGVuIGNoaWxkcmVuIGFuZCB3YXJuIGlmIHRoZXkgYXJlbid0IHN0cmluZ3Mgb3IgbnVtYmVycztcblx0ICAgIC8vIGludmFsaWQgdHlwZXMgYXJlIGlnbm9yZWQuXG5cdCAgICBSZWFjdENoaWxkcmVuLmZvckVhY2gocHJvcHMuY2hpbGRyZW4sIGZ1bmN0aW9uIChjaGlsZCkge1xuXHQgICAgICBpZiAoY2hpbGQgPT0gbnVsbCkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgICBpZiAodHlwZW9mIGNoaWxkID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgY2hpbGQgPT09ICdudW1iZXInKSB7XG5cdCAgICAgICAgY29udGVudCArPSBjaGlsZDtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ09ubHkgc3RyaW5ncyBhbmQgbnVtYmVycyBhcmUgc3VwcG9ydGVkIGFzIDxvcHRpb24+IGNoaWxkcmVuLicpIDogdW5kZWZpbmVkO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0XG5cdCAgICBpZiAoY29udGVudCkge1xuXHQgICAgICBuYXRpdmVQcm9wcy5jaGlsZHJlbiA9IGNvbnRlbnQ7XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIG5hdGl2ZVByb3BzO1xuXHQgIH1cblx0XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFJlYWN0RE9NT3B0aW9uO1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg0KSkpXG5cbi8qKiovIH0pLFxuLyogMTEwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBSZWFjdENoaWxkcmVuXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIFBvb2xlZENsYXNzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Nik7XG5cdHZhciBSZWFjdEVsZW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyKTtcblx0XG5cdHZhciBlbXB0eUZ1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdHZhciB0cmF2ZXJzZUFsbENoaWxkcmVuID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTEpO1xuXHRcblx0dmFyIHR3b0FyZ3VtZW50UG9vbGVyID0gUG9vbGVkQ2xhc3MudHdvQXJndW1lbnRQb29sZXI7XG5cdHZhciBmb3VyQXJndW1lbnRQb29sZXIgPSBQb29sZWRDbGFzcy5mb3VyQXJndW1lbnRQb29sZXI7XG5cdFxuXHR2YXIgdXNlclByb3ZpZGVkS2V5RXNjYXBlUmVnZXggPSAvXFwvKD8hXFwvKS9nO1xuXHRmdW5jdGlvbiBlc2NhcGVVc2VyUHJvdmlkZWRLZXkodGV4dCkge1xuXHQgIHJldHVybiAoJycgKyB0ZXh0KS5yZXBsYWNlKHVzZXJQcm92aWRlZEtleUVzY2FwZVJlZ2V4LCAnLy8nKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFBvb2xlZENsYXNzIHJlcHJlc2VudGluZyB0aGUgYm9va2tlZXBpbmcgYXNzb2NpYXRlZCB3aXRoIHBlcmZvcm1pbmcgYSBjaGlsZFxuXHQgKiB0cmF2ZXJzYWwuIEFsbG93cyBhdm9pZGluZyBiaW5kaW5nIGNhbGxiYWNrcy5cblx0ICpcblx0ICogQGNvbnN0cnVjdG9yIEZvckVhY2hCb29rS2VlcGluZ1xuXHQgKiBAcGFyYW0geyFmdW5jdGlvbn0gZm9yRWFjaEZ1bmN0aW9uIEZ1bmN0aW9uIHRvIHBlcmZvcm0gdHJhdmVyc2FsIHdpdGguXG5cdCAqIEBwYXJhbSB7Pyp9IGZvckVhY2hDb250ZXh0IENvbnRleHQgdG8gcGVyZm9ybSBjb250ZXh0IHdpdGguXG5cdCAqL1xuXHRmdW5jdGlvbiBGb3JFYWNoQm9va0tlZXBpbmcoZm9yRWFjaEZ1bmN0aW9uLCBmb3JFYWNoQ29udGV4dCkge1xuXHQgIHRoaXMuZnVuYyA9IGZvckVhY2hGdW5jdGlvbjtcblx0ICB0aGlzLmNvbnRleHQgPSBmb3JFYWNoQ29udGV4dDtcblx0ICB0aGlzLmNvdW50ID0gMDtcblx0fVxuXHRGb3JFYWNoQm9va0tlZXBpbmcucHJvdG90eXBlLmRlc3RydWN0b3IgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdGhpcy5mdW5jID0gbnVsbDtcblx0ICB0aGlzLmNvbnRleHQgPSBudWxsO1xuXHQgIHRoaXMuY291bnQgPSAwO1xuXHR9O1xuXHRQb29sZWRDbGFzcy5hZGRQb29saW5nVG8oRm9yRWFjaEJvb2tLZWVwaW5nLCB0d29Bcmd1bWVudFBvb2xlcik7XG5cdFxuXHRmdW5jdGlvbiBmb3JFYWNoU2luZ2xlQ2hpbGQoYm9va0tlZXBpbmcsIGNoaWxkLCBuYW1lKSB7XG5cdCAgdmFyIGZ1bmMgPSBib29rS2VlcGluZy5mdW5jO1xuXHQgIHZhciBjb250ZXh0ID0gYm9va0tlZXBpbmcuY29udGV4dDtcblx0XG5cdCAgZnVuYy5jYWxsKGNvbnRleHQsIGNoaWxkLCBib29rS2VlcGluZy5jb3VudCsrKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEl0ZXJhdGVzIHRocm91Z2ggY2hpbGRyZW4gdGhhdCBhcmUgdHlwaWNhbGx5IHNwZWNpZmllZCBhcyBgcHJvcHMuY2hpbGRyZW5gLlxuXHQgKlxuXHQgKiBUaGUgcHJvdmlkZWQgZm9yRWFjaEZ1bmMoY2hpbGQsIGluZGV4KSB3aWxsIGJlIGNhbGxlZCBmb3IgZWFjaFxuXHQgKiBsZWFmIGNoaWxkLlxuXHQgKlxuXHQgKiBAcGFyYW0gez8qfSBjaGlsZHJlbiBDaGlsZHJlbiB0cmVlIGNvbnRhaW5lci5cblx0ICogQHBhcmFtIHtmdW5jdGlvbigqLCBpbnQpfSBmb3JFYWNoRnVuY1xuXHQgKiBAcGFyYW0geyp9IGZvckVhY2hDb250ZXh0IENvbnRleHQgZm9yIGZvckVhY2hDb250ZXh0LlxuXHQgKi9cblx0ZnVuY3Rpb24gZm9yRWFjaENoaWxkcmVuKGNoaWxkcmVuLCBmb3JFYWNoRnVuYywgZm9yRWFjaENvbnRleHQpIHtcblx0ICBpZiAoY2hpbGRyZW4gPT0gbnVsbCkge1xuXHQgICAgcmV0dXJuIGNoaWxkcmVuO1xuXHQgIH1cblx0ICB2YXIgdHJhdmVyc2VDb250ZXh0ID0gRm9yRWFjaEJvb2tLZWVwaW5nLmdldFBvb2xlZChmb3JFYWNoRnVuYywgZm9yRWFjaENvbnRleHQpO1xuXHQgIHRyYXZlcnNlQWxsQ2hpbGRyZW4oY2hpbGRyZW4sIGZvckVhY2hTaW5nbGVDaGlsZCwgdHJhdmVyc2VDb250ZXh0KTtcblx0ICBGb3JFYWNoQm9va0tlZXBpbmcucmVsZWFzZSh0cmF2ZXJzZUNvbnRleHQpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUG9vbGVkQ2xhc3MgcmVwcmVzZW50aW5nIHRoZSBib29ra2VlcGluZyBhc3NvY2lhdGVkIHdpdGggcGVyZm9ybWluZyBhIGNoaWxkXG5cdCAqIG1hcHBpbmcuIEFsbG93cyBhdm9pZGluZyBiaW5kaW5nIGNhbGxiYWNrcy5cblx0ICpcblx0ICogQGNvbnN0cnVjdG9yIE1hcEJvb2tLZWVwaW5nXG5cdCAqIEBwYXJhbSB7ISp9IG1hcFJlc3VsdCBPYmplY3QgY29udGFpbmluZyB0aGUgb3JkZXJlZCBtYXAgb2YgcmVzdWx0cy5cblx0ICogQHBhcmFtIHshZnVuY3Rpb259IG1hcEZ1bmN0aW9uIEZ1bmN0aW9uIHRvIHBlcmZvcm0gbWFwcGluZyB3aXRoLlxuXHQgKiBAcGFyYW0gez8qfSBtYXBDb250ZXh0IENvbnRleHQgdG8gcGVyZm9ybSBtYXBwaW5nIHdpdGguXG5cdCAqL1xuXHRmdW5jdGlvbiBNYXBCb29rS2VlcGluZyhtYXBSZXN1bHQsIGtleVByZWZpeCwgbWFwRnVuY3Rpb24sIG1hcENvbnRleHQpIHtcblx0ICB0aGlzLnJlc3VsdCA9IG1hcFJlc3VsdDtcblx0ICB0aGlzLmtleVByZWZpeCA9IGtleVByZWZpeDtcblx0ICB0aGlzLmZ1bmMgPSBtYXBGdW5jdGlvbjtcblx0ICB0aGlzLmNvbnRleHQgPSBtYXBDb250ZXh0O1xuXHQgIHRoaXMuY291bnQgPSAwO1xuXHR9XG5cdE1hcEJvb2tLZWVwaW5nLnByb3RvdHlwZS5kZXN0cnVjdG9yID0gZnVuY3Rpb24gKCkge1xuXHQgIHRoaXMucmVzdWx0ID0gbnVsbDtcblx0ICB0aGlzLmtleVByZWZpeCA9IG51bGw7XG5cdCAgdGhpcy5mdW5jID0gbnVsbDtcblx0ICB0aGlzLmNvbnRleHQgPSBudWxsO1xuXHQgIHRoaXMuY291bnQgPSAwO1xuXHR9O1xuXHRQb29sZWRDbGFzcy5hZGRQb29saW5nVG8oTWFwQm9va0tlZXBpbmcsIGZvdXJBcmd1bWVudFBvb2xlcik7XG5cdFxuXHRmdW5jdGlvbiBtYXBTaW5nbGVDaGlsZEludG9Db250ZXh0KGJvb2tLZWVwaW5nLCBjaGlsZCwgY2hpbGRLZXkpIHtcblx0ICB2YXIgcmVzdWx0ID0gYm9va0tlZXBpbmcucmVzdWx0O1xuXHQgIHZhciBrZXlQcmVmaXggPSBib29rS2VlcGluZy5rZXlQcmVmaXg7XG5cdCAgdmFyIGZ1bmMgPSBib29rS2VlcGluZy5mdW5jO1xuXHQgIHZhciBjb250ZXh0ID0gYm9va0tlZXBpbmcuY29udGV4dDtcblx0XG5cdCAgdmFyIG1hcHBlZENoaWxkID0gZnVuYy5jYWxsKGNvbnRleHQsIGNoaWxkLCBib29rS2VlcGluZy5jb3VudCsrKTtcblx0ICBpZiAoQXJyYXkuaXNBcnJheShtYXBwZWRDaGlsZCkpIHtcblx0ICAgIG1hcEludG9XaXRoS2V5UHJlZml4SW50ZXJuYWwobWFwcGVkQ2hpbGQsIHJlc3VsdCwgY2hpbGRLZXksIGVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNBcmd1bWVudCk7XG5cdCAgfSBlbHNlIGlmIChtYXBwZWRDaGlsZCAhPSBudWxsKSB7XG5cdCAgICBpZiAoUmVhY3RFbGVtZW50LmlzVmFsaWRFbGVtZW50KG1hcHBlZENoaWxkKSkge1xuXHQgICAgICBtYXBwZWRDaGlsZCA9IFJlYWN0RWxlbWVudC5jbG9uZUFuZFJlcGxhY2VLZXkobWFwcGVkQ2hpbGQsXG5cdCAgICAgIC8vIEtlZXAgYm90aCB0aGUgKG1hcHBlZCkgYW5kIG9sZCBrZXlzIGlmIHRoZXkgZGlmZmVyLCBqdXN0IGFzXG5cdCAgICAgIC8vIHRyYXZlcnNlQWxsQ2hpbGRyZW4gdXNlZCB0byBkbyBmb3Igb2JqZWN0cyBhcyBjaGlsZHJlblxuXHQgICAgICBrZXlQcmVmaXggKyAobWFwcGVkQ2hpbGQgIT09IGNoaWxkID8gZXNjYXBlVXNlclByb3ZpZGVkS2V5KG1hcHBlZENoaWxkLmtleSB8fCAnJykgKyAnLycgOiAnJykgKyBjaGlsZEtleSk7XG5cdCAgICB9XG5cdCAgICByZXN1bHQucHVzaChtYXBwZWRDaGlsZCk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYXBJbnRvV2l0aEtleVByZWZpeEludGVybmFsKGNoaWxkcmVuLCBhcnJheSwgcHJlZml4LCBmdW5jLCBjb250ZXh0KSB7XG5cdCAgdmFyIGVzY2FwZWRQcmVmaXggPSAnJztcblx0ICBpZiAocHJlZml4ICE9IG51bGwpIHtcblx0ICAgIGVzY2FwZWRQcmVmaXggPSBlc2NhcGVVc2VyUHJvdmlkZWRLZXkocHJlZml4KSArICcvJztcblx0ICB9XG5cdCAgdmFyIHRyYXZlcnNlQ29udGV4dCA9IE1hcEJvb2tLZWVwaW5nLmdldFBvb2xlZChhcnJheSwgZXNjYXBlZFByZWZpeCwgZnVuYywgY29udGV4dCk7XG5cdCAgdHJhdmVyc2VBbGxDaGlsZHJlbihjaGlsZHJlbiwgbWFwU2luZ2xlQ2hpbGRJbnRvQ29udGV4dCwgdHJhdmVyc2VDb250ZXh0KTtcblx0ICBNYXBCb29rS2VlcGluZy5yZWxlYXNlKHRyYXZlcnNlQ29udGV4dCk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBNYXBzIGNoaWxkcmVuIHRoYXQgYXJlIHR5cGljYWxseSBzcGVjaWZpZWQgYXMgYHByb3BzLmNoaWxkcmVuYC5cblx0ICpcblx0ICogVGhlIHByb3ZpZGVkIG1hcEZ1bmN0aW9uKGNoaWxkLCBrZXksIGluZGV4KSB3aWxsIGJlIGNhbGxlZCBmb3IgZWFjaFxuXHQgKiBsZWFmIGNoaWxkLlxuXHQgKlxuXHQgKiBAcGFyYW0gez8qfSBjaGlsZHJlbiBDaGlsZHJlbiB0cmVlIGNvbnRhaW5lci5cblx0ICogQHBhcmFtIHtmdW5jdGlvbigqLCBpbnQpfSBmdW5jIFRoZSBtYXAgZnVuY3Rpb24uXG5cdCAqIEBwYXJhbSB7Kn0gY29udGV4dCBDb250ZXh0IGZvciBtYXBGdW5jdGlvbi5cblx0ICogQHJldHVybiB7b2JqZWN0fSBPYmplY3QgY29udGFpbmluZyB0aGUgb3JkZXJlZCBtYXAgb2YgcmVzdWx0cy5cblx0ICovXG5cdGZ1bmN0aW9uIG1hcENoaWxkcmVuKGNoaWxkcmVuLCBmdW5jLCBjb250ZXh0KSB7XG5cdCAgaWYgKGNoaWxkcmVuID09IG51bGwpIHtcblx0ICAgIHJldHVybiBjaGlsZHJlbjtcblx0ICB9XG5cdCAgdmFyIHJlc3VsdCA9IFtdO1xuXHQgIG1hcEludG9XaXRoS2V5UHJlZml4SW50ZXJuYWwoY2hpbGRyZW4sIHJlc3VsdCwgbnVsbCwgZnVuYywgY29udGV4dCk7XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZm9yRWFjaFNpbmdsZUNoaWxkRHVtbXkodHJhdmVyc2VDb250ZXh0LCBjaGlsZCwgbmFtZSkge1xuXHQgIHJldHVybiBudWxsO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ291bnQgdGhlIG51bWJlciBvZiBjaGlsZHJlbiB0aGF0IGFyZSB0eXBpY2FsbHkgc3BlY2lmaWVkIGFzXG5cdCAqIGBwcm9wcy5jaGlsZHJlbmAuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Pyp9IGNoaWxkcmVuIENoaWxkcmVuIHRyZWUgY29udGFpbmVyLlxuXHQgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBudW1iZXIgb2YgY2hpbGRyZW4uXG5cdCAqL1xuXHRmdW5jdGlvbiBjb3VudENoaWxkcmVuKGNoaWxkcmVuLCBjb250ZXh0KSB7XG5cdCAgcmV0dXJuIHRyYXZlcnNlQWxsQ2hpbGRyZW4oY2hpbGRyZW4sIGZvckVhY2hTaW5nbGVDaGlsZER1bW15LCBudWxsKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZsYXR0ZW4gYSBjaGlsZHJlbiBvYmplY3QgKHR5cGljYWxseSBzcGVjaWZpZWQgYXMgYHByb3BzLmNoaWxkcmVuYCkgYW5kXG5cdCAqIHJldHVybiBhbiBhcnJheSB3aXRoIGFwcHJvcHJpYXRlbHkgcmUta2V5ZWQgY2hpbGRyZW4uXG5cdCAqL1xuXHRmdW5jdGlvbiB0b0FycmF5KGNoaWxkcmVuKSB7XG5cdCAgdmFyIHJlc3VsdCA9IFtdO1xuXHQgIG1hcEludG9XaXRoS2V5UHJlZml4SW50ZXJuYWwoY2hpbGRyZW4sIHJlc3VsdCwgbnVsbCwgZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc0FyZ3VtZW50KTtcblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9XG5cdFxuXHR2YXIgUmVhY3RDaGlsZHJlbiA9IHtcblx0ICBmb3JFYWNoOiBmb3JFYWNoQ2hpbGRyZW4sXG5cdCAgbWFwOiBtYXBDaGlsZHJlbixcblx0ICBtYXBJbnRvV2l0aEtleVByZWZpeEludGVybmFsOiBtYXBJbnRvV2l0aEtleVByZWZpeEludGVybmFsLFxuXHQgIGNvdW50OiBjb3VudENoaWxkcmVuLFxuXHQgIHRvQXJyYXk6IHRvQXJyYXlcblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gUmVhY3RDaGlsZHJlbjtcblxuLyoqKi8gfSksXG4vKiAxMTEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgey8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgdHJhdmVyc2VBbGxDaGlsZHJlblxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBSZWFjdEN1cnJlbnRPd25lciA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cdHZhciBSZWFjdEVsZW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyKTtcblx0dmFyIFJlYWN0SW5zdGFuY2VIYW5kbGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7XG5cdFxuXHR2YXIgZ2V0SXRlcmF0b3JGbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTA4KTtcblx0dmFyIGludmFyaWFudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHR2YXIgd2FybmluZyA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHRcblx0dmFyIFNFUEFSQVRPUiA9IFJlYWN0SW5zdGFuY2VIYW5kbGVzLlNFUEFSQVRPUjtcblx0dmFyIFNVQlNFUEFSQVRPUiA9ICc6Jztcblx0XG5cdC8qKlxuXHQgKiBUT0RPOiBUZXN0IHRoYXQgYSBzaW5nbGUgY2hpbGQgYW5kIGFuIGFycmF5IHdpdGggb25lIGl0ZW0gaGF2ZSB0aGUgc2FtZSBrZXlcblx0ICogcGF0dGVybi5cblx0ICovXG5cdFxuXHR2YXIgdXNlclByb3ZpZGVkS2V5RXNjYXBlckxvb2t1cCA9IHtcblx0ICAnPSc6ICc9MCcsXG5cdCAgJy4nOiAnPTEnLFxuXHQgICc6JzogJz0yJ1xuXHR9O1xuXHRcblx0dmFyIHVzZXJQcm92aWRlZEtleUVzY2FwZVJlZ2V4ID0gL1s9LjpdL2c7XG5cdFxuXHR2YXIgZGlkV2FybkFib3V0TWFwcyA9IGZhbHNlO1xuXHRcblx0ZnVuY3Rpb24gdXNlclByb3ZpZGVkS2V5RXNjYXBlcihtYXRjaCkge1xuXHQgIHJldHVybiB1c2VyUHJvdmlkZWRLZXlFc2NhcGVyTG9va3VwW21hdGNoXTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEdlbmVyYXRlIGEga2V5IHN0cmluZyB0aGF0IGlkZW50aWZpZXMgYSBjb21wb25lbnQgd2l0aGluIGEgc2V0LlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IGNvbXBvbmVudCBBIGNvbXBvbmVudCB0aGF0IGNvdWxkIGNvbnRhaW4gYSBtYW51YWwga2V5LlxuXHQgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggSW5kZXggdGhhdCBpcyB1c2VkIGlmIGEgbWFudWFsIGtleSBpcyBub3QgcHJvdmlkZWQuXG5cdCAqIEByZXR1cm4ge3N0cmluZ31cblx0ICovXG5cdGZ1bmN0aW9uIGdldENvbXBvbmVudEtleShjb21wb25lbnQsIGluZGV4KSB7XG5cdCAgaWYgKGNvbXBvbmVudCAmJiBjb21wb25lbnQua2V5ICE9IG51bGwpIHtcblx0ICAgIC8vIEV4cGxpY2l0IGtleVxuXHQgICAgcmV0dXJuIHdyYXBVc2VyUHJvdmlkZWRLZXkoY29tcG9uZW50LmtleSk7XG5cdCAgfVxuXHQgIC8vIEltcGxpY2l0IGtleSBkZXRlcm1pbmVkIGJ5IHRoZSBpbmRleCBpbiB0aGUgc2V0XG5cdCAgcmV0dXJuIGluZGV4LnRvU3RyaW5nKDM2KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEVzY2FwZSBhIGNvbXBvbmVudCBrZXkgc28gdGhhdCBpdCBpcyBzYWZlIHRvIHVzZSBpbiBhIHJlYWN0aWQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gdGV4dCBDb21wb25lbnQga2V5IHRvIGJlIGVzY2FwZWQuXG5cdCAqIEByZXR1cm4ge3N0cmluZ30gQW4gZXNjYXBlZCBzdHJpbmcuXG5cdCAqL1xuXHRmdW5jdGlvbiBlc2NhcGVVc2VyUHJvdmlkZWRLZXkodGV4dCkge1xuXHQgIHJldHVybiAoJycgKyB0ZXh0KS5yZXBsYWNlKHVzZXJQcm92aWRlZEtleUVzY2FwZVJlZ2V4LCB1c2VyUHJvdmlkZWRLZXlFc2NhcGVyKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFdyYXAgYSBga2V5YCB2YWx1ZSBleHBsaWNpdGx5IHByb3ZpZGVkIGJ5IHRoZSB1c2VyIHRvIGRpc3Rpbmd1aXNoIGl0IGZyb21cblx0ICogaW1wbGljaXRseS1nZW5lcmF0ZWQga2V5cyBnZW5lcmF0ZWQgYnkgYSBjb21wb25lbnQncyBpbmRleCBpbiBpdHMgcGFyZW50LlxuXHQgKlxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFZhbHVlIG9mIGEgdXNlci1wcm92aWRlZCBga2V5YCBhdHRyaWJ1dGVcblx0ICogQHJldHVybiB7c3RyaW5nfVxuXHQgKi9cblx0ZnVuY3Rpb24gd3JhcFVzZXJQcm92aWRlZEtleShrZXkpIHtcblx0ICByZXR1cm4gJyQnICsgZXNjYXBlVXNlclByb3ZpZGVkS2V5KGtleSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBAcGFyYW0gez8qfSBjaGlsZHJlbiBDaGlsZHJlbiB0cmVlIGNvbnRhaW5lci5cblx0ICogQHBhcmFtIHshc3RyaW5nfSBuYW1lU29GYXIgTmFtZSBvZiB0aGUga2V5IHBhdGggc28gZmFyLlxuXHQgKiBAcGFyYW0geyFmdW5jdGlvbn0gY2FsbGJhY2sgQ2FsbGJhY2sgdG8gaW52b2tlIHdpdGggZWFjaCBjaGlsZCBmb3VuZC5cblx0ICogQHBhcmFtIHs/Kn0gdHJhdmVyc2VDb250ZXh0IFVzZWQgdG8gcGFzcyBpbmZvcm1hdGlvbiB0aHJvdWdob3V0IHRoZSB0cmF2ZXJzYWxcblx0ICogcHJvY2Vzcy5cblx0ICogQHJldHVybiB7IW51bWJlcn0gVGhlIG51bWJlciBvZiBjaGlsZHJlbiBpbiB0aGlzIHN1YnRyZWUuXG5cdCAqL1xuXHRmdW5jdGlvbiB0cmF2ZXJzZUFsbENoaWxkcmVuSW1wbChjaGlsZHJlbiwgbmFtZVNvRmFyLCBjYWxsYmFjaywgdHJhdmVyc2VDb250ZXh0KSB7XG5cdCAgdmFyIHR5cGUgPSB0eXBlb2YgY2hpbGRyZW47XG5cdFxuXHQgIGlmICh0eXBlID09PSAndW5kZWZpbmVkJyB8fCB0eXBlID09PSAnYm9vbGVhbicpIHtcblx0ICAgIC8vIEFsbCBvZiB0aGUgYWJvdmUgYXJlIHBlcmNlaXZlZCBhcyBudWxsLlxuXHQgICAgY2hpbGRyZW4gPSBudWxsO1xuXHQgIH1cblx0XG5cdCAgaWYgKGNoaWxkcmVuID09PSBudWxsIHx8IHR5cGUgPT09ICdzdHJpbmcnIHx8IHR5cGUgPT09ICdudW1iZXInIHx8IFJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChjaGlsZHJlbikpIHtcblx0ICAgIGNhbGxiYWNrKHRyYXZlcnNlQ29udGV4dCwgY2hpbGRyZW4sXG5cdCAgICAvLyBJZiBpdCdzIHRoZSBvbmx5IGNoaWxkLCB0cmVhdCB0aGUgbmFtZSBhcyBpZiBpdCB3YXMgd3JhcHBlZCBpbiBhbiBhcnJheVxuXHQgICAgLy8gc28gdGhhdCBpdCdzIGNvbnNpc3RlbnQgaWYgdGhlIG51bWJlciBvZiBjaGlsZHJlbiBncm93cy5cblx0ICAgIG5hbWVTb0ZhciA9PT0gJycgPyBTRVBBUkFUT1IgKyBnZXRDb21wb25lbnRLZXkoY2hpbGRyZW4sIDApIDogbmFtZVNvRmFyKTtcblx0ICAgIHJldHVybiAxO1xuXHQgIH1cblx0XG5cdCAgdmFyIGNoaWxkO1xuXHQgIHZhciBuZXh0TmFtZTtcblx0ICB2YXIgc3VidHJlZUNvdW50ID0gMDsgLy8gQ291bnQgb2YgY2hpbGRyZW4gZm91bmQgaW4gdGhlIGN1cnJlbnQgc3VidHJlZS5cblx0ICB2YXIgbmV4dE5hbWVQcmVmaXggPSBuYW1lU29GYXIgPT09ICcnID8gU0VQQVJBVE9SIDogbmFtZVNvRmFyICsgU1VCU0VQQVJBVE9SO1xuXHRcblx0ICBpZiAoQXJyYXkuaXNBcnJheShjaGlsZHJlbikpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgY2hpbGQgPSBjaGlsZHJlbltpXTtcblx0ICAgICAgbmV4dE5hbWUgPSBuZXh0TmFtZVByZWZpeCArIGdldENvbXBvbmVudEtleShjaGlsZCwgaSk7XG5cdCAgICAgIHN1YnRyZWVDb3VudCArPSB0cmF2ZXJzZUFsbENoaWxkcmVuSW1wbChjaGlsZCwgbmV4dE5hbWUsIGNhbGxiYWNrLCB0cmF2ZXJzZUNvbnRleHQpO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgaXRlcmF0b3JGbiA9IGdldEl0ZXJhdG9yRm4oY2hpbGRyZW4pO1xuXHQgICAgaWYgKGl0ZXJhdG9yRm4pIHtcblx0ICAgICAgdmFyIGl0ZXJhdG9yID0gaXRlcmF0b3JGbi5jYWxsKGNoaWxkcmVuKTtcblx0ICAgICAgdmFyIHN0ZXA7XG5cdCAgICAgIGlmIChpdGVyYXRvckZuICE9PSBjaGlsZHJlbi5lbnRyaWVzKSB7XG5cdCAgICAgICAgdmFyIGlpID0gMDtcblx0ICAgICAgICB3aGlsZSAoIShzdGVwID0gaXRlcmF0b3IubmV4dCgpKS5kb25lKSB7XG5cdCAgICAgICAgICBjaGlsZCA9IHN0ZXAudmFsdWU7XG5cdCAgICAgICAgICBuZXh0TmFtZSA9IG5leHROYW1lUHJlZml4ICsgZ2V0Q29tcG9uZW50S2V5KGNoaWxkLCBpaSsrKTtcblx0ICAgICAgICAgIHN1YnRyZWVDb3VudCArPSB0cmF2ZXJzZUFsbENoaWxkcmVuSW1wbChjaGlsZCwgbmV4dE5hbWUsIGNhbGxiYWNrLCB0cmF2ZXJzZUNvbnRleHQpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZGlkV2FybkFib3V0TWFwcywgJ1VzaW5nIE1hcHMgYXMgY2hpbGRyZW4gaXMgbm90IHlldCBmdWxseSBzdXBwb3J0ZWQuIEl0IGlzIGFuICcgKyAnZXhwZXJpbWVudGFsIGZlYXR1cmUgdGhhdCBtaWdodCBiZSByZW1vdmVkLiBDb252ZXJ0IGl0IHRvIGEgJyArICdzZXF1ZW5jZSAvIGl0ZXJhYmxlIG9mIGtleWVkIFJlYWN0RWxlbWVudHMgaW5zdGVhZC4nKSA6IHVuZGVmaW5lZDtcblx0ICAgICAgICAgIGRpZFdhcm5BYm91dE1hcHMgPSB0cnVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgICAvLyBJdGVyYXRvciB3aWxsIHByb3ZpZGUgZW50cnkgW2ssdl0gdHVwbGVzIHJhdGhlciB0aGFuIHZhbHVlcy5cblx0ICAgICAgICB3aGlsZSAoIShzdGVwID0gaXRlcmF0b3IubmV4dCgpKS5kb25lKSB7XG5cdCAgICAgICAgICB2YXIgZW50cnkgPSBzdGVwLnZhbHVlO1xuXHQgICAgICAgICAgaWYgKGVudHJ5KSB7XG5cdCAgICAgICAgICAgIGNoaWxkID0gZW50cnlbMV07XG5cdCAgICAgICAgICAgIG5leHROYW1lID0gbmV4dE5hbWVQcmVmaXggKyB3cmFwVXNlclByb3ZpZGVkS2V5KGVudHJ5WzBdKSArIFNVQlNFUEFSQVRPUiArIGdldENvbXBvbmVudEtleShjaGlsZCwgMCk7XG5cdCAgICAgICAgICAgIHN1YnRyZWVDb3VudCArPSB0cmF2ZXJzZUFsbENoaWxkcmVuSW1wbChjaGlsZCwgbmV4dE5hbWUsIGNhbGxiYWNrLCB0cmF2ZXJzZUNvbnRleHQpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIGlmICh0eXBlID09PSAnb2JqZWN0Jykge1xuXHQgICAgICB2YXIgYWRkZW5kdW0gPSAnJztcblx0ICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgICBhZGRlbmR1bSA9ICcgSWYgeW91IG1lYW50IHRvIHJlbmRlciBhIGNvbGxlY3Rpb24gb2YgY2hpbGRyZW4sIHVzZSBhbiBhcnJheSAnICsgJ2luc3RlYWQgb3Igd3JhcCB0aGUgb2JqZWN0IHVzaW5nIGNyZWF0ZUZyYWdtZW50KG9iamVjdCkgZnJvbSB0aGUgJyArICdSZWFjdCBhZGQtb25zLic7XG5cdCAgICAgICAgaWYgKGNoaWxkcmVuLl9pc1JlYWN0RWxlbWVudCkge1xuXHQgICAgICAgICAgYWRkZW5kdW0gPSAnIEl0IGxvb2tzIGxpa2UgeW91XFwncmUgdXNpbmcgYW4gZWxlbWVudCBjcmVhdGVkIGJ5IGEgZGlmZmVyZW50ICcgKyAndmVyc2lvbiBvZiBSZWFjdC4gTWFrZSBzdXJlIHRvIHVzZSBvbmx5IG9uZSBjb3B5IG9mIFJlYWN0Lic7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50KSB7XG5cdCAgICAgICAgICB2YXIgbmFtZSA9IFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQuZ2V0TmFtZSgpO1xuXHQgICAgICAgICAgaWYgKG5hbWUpIHtcblx0ICAgICAgICAgICAgYWRkZW5kdW0gKz0gJyBDaGVjayB0aGUgcmVuZGVyIG1ldGhvZCBvZiBgJyArIG5hbWUgKyAnYC4nO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICB2YXIgY2hpbGRyZW5TdHJpbmcgPSBTdHJpbmcoY2hpbGRyZW4pO1xuXHQgICAgICAgdHJ1ZSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdPYmplY3RzIGFyZSBub3QgdmFsaWQgYXMgYSBSZWFjdCBjaGlsZCAoZm91bmQ6ICVzKS4lcycsIGNoaWxkcmVuU3RyaW5nID09PSAnW29iamVjdCBPYmplY3RdJyA/ICdvYmplY3Qgd2l0aCBrZXlzIHsnICsgT2JqZWN0LmtleXMoY2hpbGRyZW4pLmpvaW4oJywgJykgKyAnfScgOiBjaGlsZHJlblN0cmluZywgYWRkZW5kdW0pIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybiBzdWJ0cmVlQ291bnQ7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBUcmF2ZXJzZXMgY2hpbGRyZW4gdGhhdCBhcmUgdHlwaWNhbGx5IHNwZWNpZmllZCBhcyBgcHJvcHMuY2hpbGRyZW5gLCBidXRcblx0ICogbWlnaHQgYWxzbyBiZSBzcGVjaWZpZWQgdGhyb3VnaCBhdHRyaWJ1dGVzOlxuXHQgKlxuXHQgKiAtIGB0cmF2ZXJzZUFsbENoaWxkcmVuKHRoaXMucHJvcHMuY2hpbGRyZW4sIC4uLilgXG5cdCAqIC0gYHRyYXZlcnNlQWxsQ2hpbGRyZW4odGhpcy5wcm9wcy5sZWZ0UGFuZWxDaGlsZHJlbiwgLi4uKWBcblx0ICpcblx0ICogVGhlIGB0cmF2ZXJzZUNvbnRleHRgIGlzIGFuIG9wdGlvbmFsIGFyZ3VtZW50IHRoYXQgaXMgcGFzc2VkIHRocm91Z2ggdGhlXG5cdCAqIGVudGlyZSB0cmF2ZXJzYWwuIEl0IGNhbiBiZSB1c2VkIHRvIHN0b3JlIGFjY3VtdWxhdGlvbnMgb3IgYW55dGhpbmcgZWxzZSB0aGF0XG5cdCAqIHRoZSBjYWxsYmFjayBtaWdodCBmaW5kIHJlbGV2YW50LlxuXHQgKlxuXHQgKiBAcGFyYW0gez8qfSBjaGlsZHJlbiBDaGlsZHJlbiB0cmVlIG9iamVjdC5cblx0ICogQHBhcmFtIHshZnVuY3Rpb259IGNhbGxiYWNrIFRvIGludm9rZSB1cG9uIHRyYXZlcnNpbmcgZWFjaCBjaGlsZC5cblx0ICogQHBhcmFtIHs/Kn0gdHJhdmVyc2VDb250ZXh0IENvbnRleHQgZm9yIHRyYXZlcnNhbC5cblx0ICogQHJldHVybiB7IW51bWJlcn0gVGhlIG51bWJlciBvZiBjaGlsZHJlbiBpbiB0aGlzIHN1YnRyZWUuXG5cdCAqL1xuXHRmdW5jdGlvbiB0cmF2ZXJzZUFsbENoaWxkcmVuKGNoaWxkcmVuLCBjYWxsYmFjaywgdHJhdmVyc2VDb250ZXh0KSB7XG5cdCAgaWYgKGNoaWxkcmVuID09IG51bGwpIHtcblx0ICAgIHJldHVybiAwO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHRyYXZlcnNlQWxsQ2hpbGRyZW5JbXBsKGNoaWxkcmVuLCAnJywgY2FsbGJhY2ssIHRyYXZlcnNlQ29udGV4dCk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gdHJhdmVyc2VBbGxDaGlsZHJlbjtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oNCkpKVxuXG4vKioqLyB9KSxcbi8qIDExMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzKSB7LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBSZWFjdERPTVNlbGVjdFxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBMaW5rZWRWYWx1ZVV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDYpO1xuXHR2YXIgUmVhY3RNb3VudCA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpO1xuXHR2YXIgUmVhY3RVcGRhdGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NCk7XG5cdFxuXHR2YXIgYXNzaWduID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7XG5cdHZhciB3YXJuaW5nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cdFxuXHR2YXIgdmFsdWVDb250ZXh0S2V5ID0gJ19fUmVhY3RET01TZWxlY3RfdmFsdWUkJyArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnNsaWNlKDIpO1xuXHRcblx0ZnVuY3Rpb24gdXBkYXRlT3B0aW9uc0lmUGVuZGluZ1VwZGF0ZUFuZE1vdW50ZWQoKSB7XG5cdCAgaWYgKHRoaXMuX3Jvb3ROb2RlSUQgJiYgdGhpcy5fd3JhcHBlclN0YXRlLnBlbmRpbmdVcGRhdGUpIHtcblx0ICAgIHRoaXMuX3dyYXBwZXJTdGF0ZS5wZW5kaW5nVXBkYXRlID0gZmFsc2U7XG5cdFxuXHQgICAgdmFyIHByb3BzID0gdGhpcy5fY3VycmVudEVsZW1lbnQucHJvcHM7XG5cdCAgICB2YXIgdmFsdWUgPSBMaW5rZWRWYWx1ZVV0aWxzLmdldFZhbHVlKHByb3BzKTtcblx0XG5cdCAgICBpZiAodmFsdWUgIT0gbnVsbCkge1xuXHQgICAgICB1cGRhdGVPcHRpb25zKHRoaXMsIEJvb2xlYW4ocHJvcHMubXVsdGlwbGUpLCB2YWx1ZSk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0ob3duZXIpIHtcblx0ICBpZiAob3duZXIpIHtcblx0ICAgIHZhciBuYW1lID0gb3duZXIuZ2V0TmFtZSgpO1xuXHQgICAgaWYgKG5hbWUpIHtcblx0ICAgICAgcmV0dXJuICcgQ2hlY2sgdGhlIHJlbmRlciBtZXRob2Qgb2YgYCcgKyBuYW1lICsgJ2AuJztcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuICcnO1xuXHR9XG5cdFxuXHR2YXIgdmFsdWVQcm9wTmFtZXMgPSBbJ3ZhbHVlJywgJ2RlZmF1bHRWYWx1ZSddO1xuXHRcblx0LyoqXG5cdCAqIFZhbGlkYXRpb24gZnVuY3Rpb24gZm9yIGB2YWx1ZWAgYW5kIGBkZWZhdWx0VmFsdWVgLlxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0ZnVuY3Rpb24gY2hlY2tTZWxlY3RQcm9wVHlwZXMoaW5zdCwgcHJvcHMpIHtcblx0ICB2YXIgb3duZXIgPSBpbnN0Ll9jdXJyZW50RWxlbWVudC5fb3duZXI7XG5cdCAgTGlua2VkVmFsdWVVdGlscy5jaGVja1Byb3BUeXBlcygnc2VsZWN0JywgcHJvcHMsIG93bmVyKTtcblx0XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWx1ZVByb3BOYW1lcy5sZW5ndGg7IGkrKykge1xuXHQgICAgdmFyIHByb3BOYW1lID0gdmFsdWVQcm9wTmFtZXNbaV07XG5cdCAgICBpZiAocHJvcHNbcHJvcE5hbWVdID09IG51bGwpIHtcblx0ICAgICAgY29udGludWU7XG5cdCAgICB9XG5cdCAgICBpZiAocHJvcHMubXVsdGlwbGUpIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoQXJyYXkuaXNBcnJheShwcm9wc1twcm9wTmFtZV0pLCAnVGhlIGAlc2AgcHJvcCBzdXBwbGllZCB0byA8c2VsZWN0PiBtdXN0IGJlIGFuIGFycmF5IGlmICcgKyAnYG11bHRpcGxlYCBpcyB0cnVlLiVzJywgcHJvcE5hbWUsIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShvd25lcikpIDogdW5kZWZpbmVkO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoIUFycmF5LmlzQXJyYXkocHJvcHNbcHJvcE5hbWVdKSwgJ1RoZSBgJXNgIHByb3Agc3VwcGxpZWQgdG8gPHNlbGVjdD4gbXVzdCBiZSBhIHNjYWxhciAnICsgJ3ZhbHVlIGlmIGBtdWx0aXBsZWAgaXMgZmFsc2UuJXMnLCBwcm9wTmFtZSwgZ2V0RGVjbGFyYXRpb25FcnJvckFkZGVuZHVtKG93bmVyKSkgOiB1bmRlZmluZWQ7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQHBhcmFtIHtSZWFjdERPTUNvbXBvbmVudH0gaW5zdFxuXHQgKiBAcGFyYW0ge2Jvb2xlYW59IG11bHRpcGxlXG5cdCAqIEBwYXJhbSB7Kn0gcHJvcFZhbHVlIEEgc3RyaW5nYWJsZSAod2l0aCBgbXVsdGlwbGVgLCBhIGxpc3Qgb2Ygc3RyaW5nYWJsZXMpLlxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0ZnVuY3Rpb24gdXBkYXRlT3B0aW9ucyhpbnN0LCBtdWx0aXBsZSwgcHJvcFZhbHVlKSB7XG5cdCAgdmFyIHNlbGVjdGVkVmFsdWUsIGk7XG5cdCAgdmFyIG9wdGlvbnMgPSBSZWFjdE1vdW50LmdldE5vZGUoaW5zdC5fcm9vdE5vZGVJRCkub3B0aW9ucztcblx0XG5cdCAgaWYgKG11bHRpcGxlKSB7XG5cdCAgICBzZWxlY3RlZFZhbHVlID0ge307XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgcHJvcFZhbHVlLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHNlbGVjdGVkVmFsdWVbJycgKyBwcm9wVmFsdWVbaV1dID0gdHJ1ZTtcblx0ICAgIH1cblx0ICAgIGZvciAoaSA9IDA7IGkgPCBvcHRpb25zLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBzZWxlY3RlZCA9IHNlbGVjdGVkVmFsdWUuaGFzT3duUHJvcGVydHkob3B0aW9uc1tpXS52YWx1ZSk7XG5cdCAgICAgIGlmIChvcHRpb25zW2ldLnNlbGVjdGVkICE9PSBzZWxlY3RlZCkge1xuXHQgICAgICAgIG9wdGlvbnNbaV0uc2VsZWN0ZWQgPSBzZWxlY3RlZDtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICAvLyBEbyBub3Qgc2V0IGBzZWxlY3QudmFsdWVgIGFzIGV4YWN0IGJlaGF2aW9yIGlzbid0IGNvbnNpc3RlbnQgYWNyb3NzIGFsbFxuXHQgICAgLy8gYnJvd3NlcnMgZm9yIGFsbCBjYXNlcy5cblx0ICAgIHNlbGVjdGVkVmFsdWUgPSAnJyArIHByb3BWYWx1ZTtcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBvcHRpb25zLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIGlmIChvcHRpb25zW2ldLnZhbHVlID09PSBzZWxlY3RlZFZhbHVlKSB7XG5cdCAgICAgICAgb3B0aW9uc1tpXS5zZWxlY3RlZCA9IHRydWU7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBpZiAob3B0aW9ucy5sZW5ndGgpIHtcblx0ICAgICAgb3B0aW9uc1swXS5zZWxlY3RlZCA9IHRydWU7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogSW1wbGVtZW50cyBhIDxzZWxlY3Q+IG5hdGl2ZSBjb21wb25lbnQgdGhhdCBhbGxvd3Mgb3B0aW9uYWxseSBzZXR0aW5nIHRoZVxuXHQgKiBwcm9wcyBgdmFsdWVgIGFuZCBgZGVmYXVsdFZhbHVlYC4gSWYgYG11bHRpcGxlYCBpcyBmYWxzZSwgdGhlIHByb3AgbXVzdCBiZSBhXG5cdCAqIHN0cmluZ2FibGUuIElmIGBtdWx0aXBsZWAgaXMgdHJ1ZSwgdGhlIHByb3AgbXVzdCBiZSBhbiBhcnJheSBvZiBzdHJpbmdhYmxlcy5cblx0ICpcblx0ICogSWYgYHZhbHVlYCBpcyBub3Qgc3VwcGxpZWQgKG9yIG51bGwvdW5kZWZpbmVkKSwgdXNlciBhY3Rpb25zIHRoYXQgY2hhbmdlIHRoZVxuXHQgKiBzZWxlY3RlZCBvcHRpb24gd2lsbCB0cmlnZ2VyIHVwZGF0ZXMgdG8gdGhlIHJlbmRlcmVkIG9wdGlvbnMuXG5cdCAqXG5cdCAqIElmIGl0IGlzIHN1cHBsaWVkIChhbmQgbm90IG51bGwvdW5kZWZpbmVkKSwgdGhlIHJlbmRlcmVkIG9wdGlvbnMgd2lsbCBub3Rcblx0ICogdXBkYXRlIGluIHJlc3BvbnNlIHRvIHVzZXIgYWN0aW9ucy4gSW5zdGVhZCwgdGhlIGB2YWx1ZWAgcHJvcCBtdXN0IGNoYW5nZSBpblxuXHQgKiBvcmRlciBmb3IgdGhlIHJlbmRlcmVkIG9wdGlvbnMgdG8gdXBkYXRlLlxuXHQgKlxuXHQgKiBJZiBgZGVmYXVsdFZhbHVlYCBpcyBwcm92aWRlZCwgYW55IG9wdGlvbnMgd2l0aCB0aGUgc3VwcGxpZWQgdmFsdWVzIHdpbGwgYmVcblx0ICogc2VsZWN0ZWQuXG5cdCAqL1xuXHR2YXIgUmVhY3RET01TZWxlY3QgPSB7XG5cdCAgdmFsdWVDb250ZXh0S2V5OiB2YWx1ZUNvbnRleHRLZXksXG5cdFxuXHQgIGdldE5hdGl2ZVByb3BzOiBmdW5jdGlvbiAoaW5zdCwgcHJvcHMsIGNvbnRleHQpIHtcblx0ICAgIHJldHVybiBhc3NpZ24oe30sIHByb3BzLCB7XG5cdCAgICAgIG9uQ2hhbmdlOiBpbnN0Ll93cmFwcGVyU3RhdGUub25DaGFuZ2UsXG5cdCAgICAgIHZhbHVlOiB1bmRlZmluZWRcblx0ICAgIH0pO1xuXHQgIH0sXG5cdFxuXHQgIG1vdW50V3JhcHBlcjogZnVuY3Rpb24gKGluc3QsIHByb3BzKSB7XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICBjaGVja1NlbGVjdFByb3BUeXBlcyhpbnN0LCBwcm9wcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIHZhbHVlID0gTGlua2VkVmFsdWVVdGlscy5nZXRWYWx1ZShwcm9wcyk7XG5cdCAgICBpbnN0Ll93cmFwcGVyU3RhdGUgPSB7XG5cdCAgICAgIHBlbmRpbmdVcGRhdGU6IGZhbHNlLFxuXHQgICAgICBpbml0aWFsVmFsdWU6IHZhbHVlICE9IG51bGwgPyB2YWx1ZSA6IHByb3BzLmRlZmF1bHRWYWx1ZSxcblx0ICAgICAgb25DaGFuZ2U6IF9oYW5kbGVDaGFuZ2UuYmluZChpbnN0KSxcblx0ICAgICAgd2FzTXVsdGlwbGU6IEJvb2xlYW4ocHJvcHMubXVsdGlwbGUpXG5cdCAgICB9O1xuXHQgIH0sXG5cdFxuXHQgIHByb2Nlc3NDaGlsZENvbnRleHQ6IGZ1bmN0aW9uIChpbnN0LCBwcm9wcywgY29udGV4dCkge1xuXHQgICAgLy8gUGFzcyBkb3duIGluaXRpYWwgdmFsdWUgc28gaW5pdGlhbCBnZW5lcmF0ZWQgbWFya3VwIGhhcyBjb3JyZWN0XG5cdCAgICAvLyBgc2VsZWN0ZWRgIGF0dHJpYnV0ZXNcblx0ICAgIHZhciBjaGlsZENvbnRleHQgPSBhc3NpZ24oe30sIGNvbnRleHQpO1xuXHQgICAgY2hpbGRDb250ZXh0W3ZhbHVlQ29udGV4dEtleV0gPSBpbnN0Ll93cmFwcGVyU3RhdGUuaW5pdGlhbFZhbHVlO1xuXHQgICAgcmV0dXJuIGNoaWxkQ29udGV4dDtcblx0ICB9LFxuXHRcblx0ICBwb3N0VXBkYXRlV3JhcHBlcjogZnVuY3Rpb24gKGluc3QpIHtcblx0ICAgIHZhciBwcm9wcyA9IGluc3QuX2N1cnJlbnRFbGVtZW50LnByb3BzO1xuXHRcblx0ICAgIC8vIEFmdGVyIHRoZSBpbml0aWFsIG1vdW50LCB3ZSBjb250cm9sIHNlbGVjdGVkLW5lc3MgbWFudWFsbHkgc28gZG9uJ3QgcGFzc1xuXHQgICAgLy8gdGhlIGNvbnRleHQgdmFsdWUgZG93blxuXHQgICAgaW5zdC5fd3JhcHBlclN0YXRlLmluaXRpYWxWYWx1ZSA9IHVuZGVmaW5lZDtcblx0XG5cdCAgICB2YXIgd2FzTXVsdGlwbGUgPSBpbnN0Ll93cmFwcGVyU3RhdGUud2FzTXVsdGlwbGU7XG5cdCAgICBpbnN0Ll93cmFwcGVyU3RhdGUud2FzTXVsdGlwbGUgPSBCb29sZWFuKHByb3BzLm11bHRpcGxlKTtcblx0XG5cdCAgICB2YXIgdmFsdWUgPSBMaW5rZWRWYWx1ZVV0aWxzLmdldFZhbHVlKHByb3BzKTtcblx0ICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7XG5cdCAgICAgIGluc3QuX3dyYXBwZXJTdGF0ZS5wZW5kaW5nVXBkYXRlID0gZmFsc2U7XG5cdCAgICAgIHVwZGF0ZU9wdGlvbnMoaW5zdCwgQm9vbGVhbihwcm9wcy5tdWx0aXBsZSksIHZhbHVlKTtcblx0ICAgIH0gZWxzZSBpZiAod2FzTXVsdGlwbGUgIT09IEJvb2xlYW4ocHJvcHMubXVsdGlwbGUpKSB7XG5cdCAgICAgIC8vIEZvciBzaW1wbGljaXR5LCByZWFwcGx5IGBkZWZhdWx0VmFsdWVgIGlmIGBtdWx0aXBsZWAgaXMgdG9nZ2xlZC5cblx0ICAgICAgaWYgKHByb3BzLmRlZmF1bHRWYWx1ZSAhPSBudWxsKSB7XG5cdCAgICAgICAgdXBkYXRlT3B0aW9ucyhpbnN0LCBCb29sZWFuKHByb3BzLm11bHRpcGxlKSwgcHJvcHMuZGVmYXVsdFZhbHVlKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyBSZXZlcnQgdGhlIHNlbGVjdCBiYWNrIHRvIGl0cyBkZWZhdWx0IHVuc2VsZWN0ZWQgc3RhdGUuXG5cdCAgICAgICAgdXBkYXRlT3B0aW9ucyhpbnN0LCBCb29sZWFuKHByb3BzLm11bHRpcGxlKSwgcHJvcHMubXVsdGlwbGUgPyBbXSA6ICcnKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdGZ1bmN0aW9uIF9oYW5kbGVDaGFuZ2UoZXZlbnQpIHtcblx0ICB2YXIgcHJvcHMgPSB0aGlzLl9jdXJyZW50RWxlbWVudC5wcm9wcztcblx0ICB2YXIgcmV0dXJuVmFsdWUgPSBMaW5rZWRWYWx1ZVV0aWxzLmV4ZWN1dGVPbkNoYW5nZShwcm9wcywgZXZlbnQpO1xuXHRcblx0ICB0aGlzLl93cmFwcGVyU3RhdGUucGVuZGluZ1VwZGF0ZSA9IHRydWU7XG5cdCAgUmVhY3RVcGRhdGVzLmFzYXAodXBkYXRlT3B0aW9uc0lmUGVuZGluZ1VwZGF0ZUFuZE1vdW50ZWQsIHRoaXMpO1xuXHQgIHJldHVybiByZXR1cm5WYWx1ZTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBSZWFjdERPTVNlbGVjdDtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oNCkpKVxuXG4vKioqLyB9KSxcbi8qIDExMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzKSB7LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBSZWFjdERPTVRleHRhcmVhXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIExpbmtlZFZhbHVlVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwNik7XG5cdHZhciBSZWFjdERPTUlET3BlcmF0aW9ucyA9IF9fd2VicGFja19yZXF1aXJlX18oMjcpO1xuXHR2YXIgUmVhY3RVcGRhdGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NCk7XG5cdFxuXHR2YXIgYXNzaWduID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7XG5cdHZhciBpbnZhcmlhbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblx0dmFyIHdhcm5pbmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTtcblx0XG5cdGZ1bmN0aW9uIGZvcmNlVXBkYXRlSWZNb3VudGVkKCkge1xuXHQgIGlmICh0aGlzLl9yb290Tm9kZUlEKSB7XG5cdCAgICAvLyBET00gY29tcG9uZW50IGlzIHN0aWxsIG1vdW50ZWQ7IHVwZGF0ZVxuXHQgICAgUmVhY3RET01UZXh0YXJlYS51cGRhdGVXcmFwcGVyKHRoaXMpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEltcGxlbWVudHMgYSA8dGV4dGFyZWE+IG5hdGl2ZSBjb21wb25lbnQgdGhhdCBhbGxvd3Mgc2V0dGluZyBgdmFsdWVgLCBhbmRcblx0ICogYGRlZmF1bHRWYWx1ZWAuIFRoaXMgZGlmZmVycyBmcm9tIHRoZSB0cmFkaXRpb25hbCBET00gQVBJIGJlY2F1c2UgdmFsdWUgaXNcblx0ICogdXN1YWxseSBzZXQgYXMgUENEQVRBIGNoaWxkcmVuLlxuXHQgKlxuXHQgKiBJZiBgdmFsdWVgIGlzIG5vdCBzdXBwbGllZCAob3IgbnVsbC91bmRlZmluZWQpLCB1c2VyIGFjdGlvbnMgdGhhdCBhZmZlY3QgdGhlXG5cdCAqIHZhbHVlIHdpbGwgdHJpZ2dlciB1cGRhdGVzIHRvIHRoZSBlbGVtZW50LlxuXHQgKlxuXHQgKiBJZiBgdmFsdWVgIGlzIHN1cHBsaWVkIChhbmQgbm90IG51bGwvdW5kZWZpbmVkKSwgdGhlIHJlbmRlcmVkIGVsZW1lbnQgd2lsbFxuXHQgKiBub3QgdHJpZ2dlciB1cGRhdGVzIHRvIHRoZSBlbGVtZW50LiBJbnN0ZWFkLCB0aGUgYHZhbHVlYCBwcm9wIG11c3QgY2hhbmdlIGluXG5cdCAqIG9yZGVyIGZvciB0aGUgcmVuZGVyZWQgZWxlbWVudCB0byBiZSB1cGRhdGVkLlxuXHQgKlxuXHQgKiBUaGUgcmVuZGVyZWQgZWxlbWVudCB3aWxsIGJlIGluaXRpYWxpemVkIHdpdGggYW4gZW1wdHkgdmFsdWUsIHRoZSBwcm9wXG5cdCAqIGBkZWZhdWx0VmFsdWVgIGlmIHNwZWNpZmllZCwgb3IgdGhlIGNoaWxkcmVuIGNvbnRlbnQgKGRlcHJlY2F0ZWQpLlxuXHQgKi9cblx0dmFyIFJlYWN0RE9NVGV4dGFyZWEgPSB7XG5cdCAgZ2V0TmF0aXZlUHJvcHM6IGZ1bmN0aW9uIChpbnN0LCBwcm9wcywgY29udGV4dCkge1xuXHQgICAgIShwcm9wcy5kYW5nZXJvdXNseVNldElubmVySFRNTCA9PSBudWxsKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUxgIGRvZXMgbm90IG1ha2Ugc2Vuc2Ugb24gPHRleHRhcmVhPi4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdFxuXHQgICAgLy8gQWx3YXlzIHNldCBjaGlsZHJlbiB0byB0aGUgc2FtZSB0aGluZy4gSW4gSUU5LCB0aGUgc2VsZWN0aW9uIHJhbmdlIHdpbGxcblx0ICAgIC8vIGdldCByZXNldCBpZiBgdGV4dENvbnRlbnRgIGlzIG11dGF0ZWQuXG5cdCAgICB2YXIgbmF0aXZlUHJvcHMgPSBhc3NpZ24oe30sIHByb3BzLCB7XG5cdCAgICAgIGRlZmF1bHRWYWx1ZTogdW5kZWZpbmVkLFxuXHQgICAgICB2YWx1ZTogdW5kZWZpbmVkLFxuXHQgICAgICBjaGlsZHJlbjogaW5zdC5fd3JhcHBlclN0YXRlLmluaXRpYWxWYWx1ZSxcblx0ICAgICAgb25DaGFuZ2U6IGluc3QuX3dyYXBwZXJTdGF0ZS5vbkNoYW5nZVxuXHQgICAgfSk7XG5cdFxuXHQgICAgcmV0dXJuIG5hdGl2ZVByb3BzO1xuXHQgIH0sXG5cdFxuXHQgIG1vdW50V3JhcHBlcjogZnVuY3Rpb24gKGluc3QsIHByb3BzKSB7XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICBMaW5rZWRWYWx1ZVV0aWxzLmNoZWNrUHJvcFR5cGVzKCd0ZXh0YXJlYScsIHByb3BzLCBpbnN0Ll9jdXJyZW50RWxlbWVudC5fb3duZXIpO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBkZWZhdWx0VmFsdWUgPSBwcm9wcy5kZWZhdWx0VmFsdWU7XG5cdCAgICAvLyBUT0RPICh5dW5nc3RlcnMpOiBSZW1vdmUgc3VwcG9ydCBmb3IgY2hpbGRyZW4gY29udGVudCBpbiA8dGV4dGFyZWE+LlxuXHQgICAgdmFyIGNoaWxkcmVuID0gcHJvcHMuY2hpbGRyZW47XG5cdCAgICBpZiAoY2hpbGRyZW4gIT0gbnVsbCkge1xuXHQgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnVXNlIHRoZSBgZGVmYXVsdFZhbHVlYCBvciBgdmFsdWVgIHByb3BzIGluc3RlYWQgb2Ygc2V0dGluZyAnICsgJ2NoaWxkcmVuIG9uIDx0ZXh0YXJlYT4uJykgOiB1bmRlZmluZWQ7XG5cdCAgICAgIH1cblx0ICAgICAgIShkZWZhdWx0VmFsdWUgPT0gbnVsbCkgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnSWYgeW91IHN1cHBseSBgZGVmYXVsdFZhbHVlYCBvbiBhIDx0ZXh0YXJlYT4sIGRvIG5vdCBwYXNzIGNoaWxkcmVuLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0ICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY2hpbGRyZW4pKSB7XG5cdCAgICAgICAgIShjaGlsZHJlbi5sZW5ndGggPD0gMSkgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnPHRleHRhcmVhPiBjYW4gb25seSBoYXZlIGF0IG1vc3Qgb25lIGNoaWxkLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0ICAgICAgICBjaGlsZHJlbiA9IGNoaWxkcmVuWzBdO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBkZWZhdWx0VmFsdWUgPSAnJyArIGNoaWxkcmVuO1xuXHQgICAgfVxuXHQgICAgaWYgKGRlZmF1bHRWYWx1ZSA9PSBudWxsKSB7XG5cdCAgICAgIGRlZmF1bHRWYWx1ZSA9ICcnO1xuXHQgICAgfVxuXHQgICAgdmFyIHZhbHVlID0gTGlua2VkVmFsdWVVdGlscy5nZXRWYWx1ZShwcm9wcyk7XG5cdFxuXHQgICAgaW5zdC5fd3JhcHBlclN0YXRlID0ge1xuXHQgICAgICAvLyBXZSBzYXZlIHRoZSBpbml0aWFsIHZhbHVlIHNvIHRoYXQgYFJlYWN0RE9NQ29tcG9uZW50YCBkb2Vzbid0IHVwZGF0ZVxuXHQgICAgICAvLyBgdGV4dENvbnRlbnRgICh1bm5lY2Vzc2FyeSBzaW5jZSB3ZSB1cGRhdGUgdmFsdWUpLlxuXHQgICAgICAvLyBUaGUgaW5pdGlhbCB2YWx1ZSBjYW4gYmUgYSBib29sZWFuIG9yIG9iamVjdCBzbyB0aGF0J3Mgd2h5IGl0J3Ncblx0ICAgICAgLy8gZm9yY2VkIHRvIGJlIGEgc3RyaW5nLlxuXHQgICAgICBpbml0aWFsVmFsdWU6ICcnICsgKHZhbHVlICE9IG51bGwgPyB2YWx1ZSA6IGRlZmF1bHRWYWx1ZSksXG5cdCAgICAgIG9uQ2hhbmdlOiBfaGFuZGxlQ2hhbmdlLmJpbmQoaW5zdClcblx0ICAgIH07XG5cdCAgfSxcblx0XG5cdCAgdXBkYXRlV3JhcHBlcjogZnVuY3Rpb24gKGluc3QpIHtcblx0ICAgIHZhciBwcm9wcyA9IGluc3QuX2N1cnJlbnRFbGVtZW50LnByb3BzO1xuXHQgICAgdmFyIHZhbHVlID0gTGlua2VkVmFsdWVVdGlscy5nZXRWYWx1ZShwcm9wcyk7XG5cdCAgICBpZiAodmFsdWUgIT0gbnVsbCkge1xuXHQgICAgICAvLyBDYXN0IGB2YWx1ZWAgdG8gYSBzdHJpbmcgdG8gZW5zdXJlIHRoZSB2YWx1ZSBpcyBzZXQgY29ycmVjdGx5LiBXaGlsZVxuXHQgICAgICAvLyBicm93c2VycyB0eXBpY2FsbHkgZG8gdGhpcyBhcyBuZWNlc3NhcnksIGpzZG9tIGRvZXNuJ3QuXG5cdCAgICAgIFJlYWN0RE9NSURPcGVyYXRpb25zLnVwZGF0ZVByb3BlcnR5QnlJRChpbnN0Ll9yb290Tm9kZUlELCAndmFsdWUnLCAnJyArIHZhbHVlKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBfaGFuZGxlQ2hhbmdlKGV2ZW50KSB7XG5cdCAgdmFyIHByb3BzID0gdGhpcy5fY3VycmVudEVsZW1lbnQucHJvcHM7XG5cdCAgdmFyIHJldHVyblZhbHVlID0gTGlua2VkVmFsdWVVdGlscy5leGVjdXRlT25DaGFuZ2UocHJvcHMsIGV2ZW50KTtcblx0ICBSZWFjdFVwZGF0ZXMuYXNhcChmb3JjZVVwZGF0ZUlmTW91bnRlZCwgdGhpcyk7XG5cdCAgcmV0dXJuIHJldHVyblZhbHVlO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFJlYWN0RE9NVGV4dGFyZWE7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpKSlcblxuLyoqKi8gfSksXG4vKiAxMTQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgey8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RNdWx0aUNoaWxkXG5cdCAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIFJlYWN0Q29tcG9uZW50RW52aXJvbm1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY0KTtcblx0dmFyIFJlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG5cdFxuXHR2YXIgUmVhY3RDdXJyZW50T3duZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXHR2YXIgUmVhY3RSZWNvbmNpbGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7XG5cdHZhciBSZWFjdENoaWxkUmVjb25jaWxlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTE1KTtcblx0XG5cdHZhciBmbGF0dGVuQ2hpbGRyZW4gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExNik7XG5cdFxuXHQvKipcblx0ICogVXBkYXRpbmcgY2hpbGRyZW4gb2YgYSBjb21wb25lbnQgbWF5IHRyaWdnZXIgcmVjdXJzaXZlIHVwZGF0ZXMuIFRoZSBkZXB0aCBpc1xuXHQgKiB1c2VkIHRvIGJhdGNoIHJlY3Vyc2l2ZSB1cGRhdGVzIHRvIHJlbmRlciBtYXJrdXAgbW9yZSBlZmZpY2llbnRseS5cblx0ICpcblx0ICogQHR5cGUge251bWJlcn1cblx0ICogQHByaXZhdGVcblx0ICovXG5cdHZhciB1cGRhdGVEZXB0aCA9IDA7XG5cdFxuXHQvKipcblx0ICogUXVldWUgb2YgdXBkYXRlIGNvbmZpZ3VyYXRpb24gb2JqZWN0cy5cblx0ICpcblx0ICogRWFjaCBvYmplY3QgaGFzIGEgYHR5cGVgIHByb3BlcnR5IHRoYXQgaXMgaW4gYFJlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzYC5cblx0ICpcblx0ICogQHR5cGUge2FycmF5PG9iamVjdD59XG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHR2YXIgdXBkYXRlUXVldWUgPSBbXTtcblx0XG5cdC8qKlxuXHQgKiBRdWV1ZSBvZiBtYXJrdXAgdG8gYmUgcmVuZGVyZWQuXG5cdCAqXG5cdCAqIEB0eXBlIHthcnJheTxzdHJpbmc+fVxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0dmFyIG1hcmt1cFF1ZXVlID0gW107XG5cdFxuXHQvKipcblx0ICogRW5xdWV1ZXMgbWFya3VwIHRvIGJlIHJlbmRlcmVkIGFuZCBpbnNlcnRlZCBhdCBhIHN1cHBsaWVkIGluZGV4LlxuXHQgKlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gcGFyZW50SUQgSUQgb2YgdGhlIHBhcmVudCBjb21wb25lbnQuXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBtYXJrdXAgTWFya3VwIHRoYXQgcmVuZGVycyBpbnRvIGFuIGVsZW1lbnQuXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSB0b0luZGV4IERlc3RpbmF0aW9uIGluZGV4LlxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0ZnVuY3Rpb24gZW5xdWV1ZUluc2VydE1hcmt1cChwYXJlbnRJRCwgbWFya3VwLCB0b0luZGV4KSB7XG5cdCAgLy8gTk9URTogTnVsbCB2YWx1ZXMgcmVkdWNlIGhpZGRlbiBjbGFzc2VzLlxuXHQgIHVwZGF0ZVF1ZXVlLnB1c2goe1xuXHQgICAgcGFyZW50SUQ6IHBhcmVudElELFxuXHQgICAgcGFyZW50Tm9kZTogbnVsbCxcblx0ICAgIHR5cGU6IFJlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzLklOU0VSVF9NQVJLVVAsXG5cdCAgICBtYXJrdXBJbmRleDogbWFya3VwUXVldWUucHVzaChtYXJrdXApIC0gMSxcblx0ICAgIGNvbnRlbnQ6IG51bGwsXG5cdCAgICBmcm9tSW5kZXg6IG51bGwsXG5cdCAgICB0b0luZGV4OiB0b0luZGV4XG5cdCAgfSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBFbnF1ZXVlcyBtb3ZpbmcgYW4gZXhpc3RpbmcgZWxlbWVudCB0byBhbm90aGVyIGluZGV4LlxuXHQgKlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gcGFyZW50SUQgSUQgb2YgdGhlIHBhcmVudCBjb21wb25lbnQuXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBmcm9tSW5kZXggU291cmNlIGluZGV4IG9mIHRoZSBleGlzdGluZyBlbGVtZW50LlxuXHQgKiBAcGFyYW0ge251bWJlcn0gdG9JbmRleCBEZXN0aW5hdGlvbiBpbmRleCBvZiB0aGUgZWxlbWVudC5cblx0ICogQHByaXZhdGVcblx0ICovXG5cdGZ1bmN0aW9uIGVucXVldWVNb3ZlKHBhcmVudElELCBmcm9tSW5kZXgsIHRvSW5kZXgpIHtcblx0ICAvLyBOT1RFOiBOdWxsIHZhbHVlcyByZWR1Y2UgaGlkZGVuIGNsYXNzZXMuXG5cdCAgdXBkYXRlUXVldWUucHVzaCh7XG5cdCAgICBwYXJlbnRJRDogcGFyZW50SUQsXG5cdCAgICBwYXJlbnROb2RlOiBudWxsLFxuXHQgICAgdHlwZTogUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMuTU9WRV9FWElTVElORyxcblx0ICAgIG1hcmt1cEluZGV4OiBudWxsLFxuXHQgICAgY29udGVudDogbnVsbCxcblx0ICAgIGZyb21JbmRleDogZnJvbUluZGV4LFxuXHQgICAgdG9JbmRleDogdG9JbmRleFxuXHQgIH0pO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRW5xdWV1ZXMgcmVtb3ZpbmcgYW4gZWxlbWVudCBhdCBhbiBpbmRleC5cblx0ICpcblx0ICogQHBhcmFtIHtzdHJpbmd9IHBhcmVudElEIElEIG9mIHRoZSBwYXJlbnQgY29tcG9uZW50LlxuXHQgKiBAcGFyYW0ge251bWJlcn0gZnJvbUluZGV4IEluZGV4IG9mIHRoZSBlbGVtZW50IHRvIHJlbW92ZS5cblx0ICogQHByaXZhdGVcblx0ICovXG5cdGZ1bmN0aW9uIGVucXVldWVSZW1vdmUocGFyZW50SUQsIGZyb21JbmRleCkge1xuXHQgIC8vIE5PVEU6IE51bGwgdmFsdWVzIHJlZHVjZSBoaWRkZW4gY2xhc3Nlcy5cblx0ICB1cGRhdGVRdWV1ZS5wdXNoKHtcblx0ICAgIHBhcmVudElEOiBwYXJlbnRJRCxcblx0ICAgIHBhcmVudE5vZGU6IG51bGwsXG5cdCAgICB0eXBlOiBSZWFjdE11bHRpQ2hpbGRVcGRhdGVUeXBlcy5SRU1PVkVfTk9ERSxcblx0ICAgIG1hcmt1cEluZGV4OiBudWxsLFxuXHQgICAgY29udGVudDogbnVsbCxcblx0ICAgIGZyb21JbmRleDogZnJvbUluZGV4LFxuXHQgICAgdG9JbmRleDogbnVsbFxuXHQgIH0pO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRW5xdWV1ZXMgc2V0dGluZyB0aGUgbWFya3VwIG9mIGEgbm9kZS5cblx0ICpcblx0ICogQHBhcmFtIHtzdHJpbmd9IHBhcmVudElEIElEIG9mIHRoZSBwYXJlbnQgY29tcG9uZW50LlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gbWFya3VwIE1hcmt1cCB0aGF0IHJlbmRlcnMgaW50byBhbiBlbGVtZW50LlxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0ZnVuY3Rpb24gZW5xdWV1ZVNldE1hcmt1cChwYXJlbnRJRCwgbWFya3VwKSB7XG5cdCAgLy8gTk9URTogTnVsbCB2YWx1ZXMgcmVkdWNlIGhpZGRlbiBjbGFzc2VzLlxuXHQgIHVwZGF0ZVF1ZXVlLnB1c2goe1xuXHQgICAgcGFyZW50SUQ6IHBhcmVudElELFxuXHQgICAgcGFyZW50Tm9kZTogbnVsbCxcblx0ICAgIHR5cGU6IFJlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzLlNFVF9NQVJLVVAsXG5cdCAgICBtYXJrdXBJbmRleDogbnVsbCxcblx0ICAgIGNvbnRlbnQ6IG1hcmt1cCxcblx0ICAgIGZyb21JbmRleDogbnVsbCxcblx0ICAgIHRvSW5kZXg6IG51bGxcblx0ICB9KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEVucXVldWVzIHNldHRpbmcgdGhlIHRleHQgY29udGVudC5cblx0ICpcblx0ICogQHBhcmFtIHtzdHJpbmd9IHBhcmVudElEIElEIG9mIHRoZSBwYXJlbnQgY29tcG9uZW50LlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gdGV4dENvbnRlbnQgVGV4dCBjb250ZW50IHRvIHNldC5cblx0ICogQHByaXZhdGVcblx0ICovXG5cdGZ1bmN0aW9uIGVucXVldWVUZXh0Q29udGVudChwYXJlbnRJRCwgdGV4dENvbnRlbnQpIHtcblx0ICAvLyBOT1RFOiBOdWxsIHZhbHVlcyByZWR1Y2UgaGlkZGVuIGNsYXNzZXMuXG5cdCAgdXBkYXRlUXVldWUucHVzaCh7XG5cdCAgICBwYXJlbnRJRDogcGFyZW50SUQsXG5cdCAgICBwYXJlbnROb2RlOiBudWxsLFxuXHQgICAgdHlwZTogUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMuVEVYVF9DT05URU5ULFxuXHQgICAgbWFya3VwSW5kZXg6IG51bGwsXG5cdCAgICBjb250ZW50OiB0ZXh0Q29udGVudCxcblx0ICAgIGZyb21JbmRleDogbnVsbCxcblx0ICAgIHRvSW5kZXg6IG51bGxcblx0ICB9KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFByb2Nlc3NlcyBhbnkgZW5xdWV1ZWQgdXBkYXRlcy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICovXG5cdGZ1bmN0aW9uIHByb2Nlc3NRdWV1ZSgpIHtcblx0ICBpZiAodXBkYXRlUXVldWUubGVuZ3RoKSB7XG5cdCAgICBSZWFjdENvbXBvbmVudEVudmlyb25tZW50LnByb2Nlc3NDaGlsZHJlblVwZGF0ZXModXBkYXRlUXVldWUsIG1hcmt1cFF1ZXVlKTtcblx0ICAgIGNsZWFyUXVldWUoKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDbGVhcnMgYW55IGVucXVldWVkIHVwZGF0ZXMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHRmdW5jdGlvbiBjbGVhclF1ZXVlKCkge1xuXHQgIHVwZGF0ZVF1ZXVlLmxlbmd0aCA9IDA7XG5cdCAgbWFya3VwUXVldWUubGVuZ3RoID0gMDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFJlYWN0TXVsdGlDaGlsZCBhcmUgY2FwYWJsZSBvZiByZWNvbmNpbGluZyBtdWx0aXBsZSBjaGlsZHJlbi5cblx0ICpcblx0ICogQGNsYXNzIFJlYWN0TXVsdGlDaGlsZFxuXHQgKiBAaW50ZXJuYWxcblx0ICovXG5cdHZhciBSZWFjdE11bHRpQ2hpbGQgPSB7XG5cdFxuXHQgIC8qKlxuXHQgICAqIFByb3ZpZGVzIGNvbW1vbiBmdW5jdGlvbmFsaXR5IGZvciBjb21wb25lbnRzIHRoYXQgbXVzdCByZWNvbmNpbGUgbXVsdGlwbGVcblx0ICAgKiBjaGlsZHJlbi4gVGhpcyBpcyB1c2VkIGJ5IGBSZWFjdERPTUNvbXBvbmVudGAgdG8gbW91bnQsIHVwZGF0ZSwgYW5kXG5cdCAgICogdW5tb3VudCBjaGlsZCBjb21wb25lbnRzLlxuXHQgICAqXG5cdCAgICogQGxlbmRzIHtSZWFjdE11bHRpQ2hpbGQucHJvdG90eXBlfVxuXHQgICAqL1xuXHQgIE1peGluOiB7XG5cdFxuXHQgICAgX3JlY29uY2lsZXJJbnN0YW50aWF0ZUNoaWxkcmVuOiBmdW5jdGlvbiAobmVzdGVkQ2hpbGRyZW4sIHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG5cdCAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgICAgaWYgKHRoaXMuX2N1cnJlbnRFbGVtZW50KSB7XG5cdCAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50ID0gdGhpcy5fY3VycmVudEVsZW1lbnQuX293bmVyO1xuXHQgICAgICAgICAgICByZXR1cm4gUmVhY3RDaGlsZFJlY29uY2lsZXIuaW5zdGFudGlhdGVDaGlsZHJlbihuZXN0ZWRDaGlsZHJlbiwgdHJhbnNhY3Rpb24sIGNvbnRleHQpO1xuXHQgICAgICAgICAgfSBmaW5hbGx5IHtcblx0ICAgICAgICAgICAgUmVhY3RDdXJyZW50T3duZXIuY3VycmVudCA9IG51bGw7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBSZWFjdENoaWxkUmVjb25jaWxlci5pbnN0YW50aWF0ZUNoaWxkcmVuKG5lc3RlZENoaWxkcmVuLCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG5cdCAgICB9LFxuXHRcblx0ICAgIF9yZWNvbmNpbGVyVXBkYXRlQ2hpbGRyZW46IGZ1bmN0aW9uIChwcmV2Q2hpbGRyZW4sIG5leHROZXN0ZWRDaGlsZHJlbkVsZW1lbnRzLCB0cmFuc2FjdGlvbiwgY29udGV4dCkge1xuXHQgICAgICB2YXIgbmV4dENoaWxkcmVuO1xuXHQgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgIGlmICh0aGlzLl9jdXJyZW50RWxlbWVudCkge1xuXHQgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgUmVhY3RDdXJyZW50T3duZXIuY3VycmVudCA9IHRoaXMuX2N1cnJlbnRFbGVtZW50Ll9vd25lcjtcblx0ICAgICAgICAgICAgbmV4dENoaWxkcmVuID0gZmxhdHRlbkNoaWxkcmVuKG5leHROZXN0ZWRDaGlsZHJlbkVsZW1lbnRzKTtcblx0ICAgICAgICAgIH0gZmluYWxseSB7XG5cdCAgICAgICAgICAgIFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQgPSBudWxsO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgcmV0dXJuIFJlYWN0Q2hpbGRSZWNvbmNpbGVyLnVwZGF0ZUNoaWxkcmVuKHByZXZDaGlsZHJlbiwgbmV4dENoaWxkcmVuLCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIG5leHRDaGlsZHJlbiA9IGZsYXR0ZW5DaGlsZHJlbihuZXh0TmVzdGVkQ2hpbGRyZW5FbGVtZW50cyk7XG5cdCAgICAgIHJldHVybiBSZWFjdENoaWxkUmVjb25jaWxlci51cGRhdGVDaGlsZHJlbihwcmV2Q2hpbGRyZW4sIG5leHRDaGlsZHJlbiwgdHJhbnNhY3Rpb24sIGNvbnRleHQpO1xuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIEdlbmVyYXRlcyBhIFwibW91bnQgaW1hZ2VcIiBmb3IgZWFjaCBvZiB0aGUgc3VwcGxpZWQgY2hpbGRyZW4uIEluIHRoZSBjYXNlXG5cdCAgICAgKiBvZiBgUmVhY3RET01Db21wb25lbnRgLCBhIG1vdW50IGltYWdlIGlzIGEgc3RyaW5nIG9mIG1hcmt1cC5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0gez9vYmplY3R9IG5lc3RlZENoaWxkcmVuIE5lc3RlZCBjaGlsZCBtYXBzLlxuXHQgICAgICogQHJldHVybiB7YXJyYXl9IEFuIGFycmF5IG9mIG1vdW50ZWQgcmVwcmVzZW50YXRpb25zLlxuXHQgICAgICogQGludGVybmFsXG5cdCAgICAgKi9cblx0ICAgIG1vdW50Q2hpbGRyZW46IGZ1bmN0aW9uIChuZXN0ZWRDaGlsZHJlbiwgdHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcblx0ICAgICAgdmFyIGNoaWxkcmVuID0gdGhpcy5fcmVjb25jaWxlckluc3RhbnRpYXRlQ2hpbGRyZW4obmVzdGVkQ2hpbGRyZW4sIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcblx0ICAgICAgdGhpcy5fcmVuZGVyZWRDaGlsZHJlbiA9IGNoaWxkcmVuO1xuXHQgICAgICB2YXIgbW91bnRJbWFnZXMgPSBbXTtcblx0ICAgICAgdmFyIGluZGV4ID0gMDtcblx0ICAgICAgZm9yICh2YXIgbmFtZSBpbiBjaGlsZHJlbikge1xuXHQgICAgICAgIGlmIChjaGlsZHJlbi5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuXHQgICAgICAgICAgdmFyIGNoaWxkID0gY2hpbGRyZW5bbmFtZV07XG5cdCAgICAgICAgICAvLyBJbmxpbmVkIGZvciBwZXJmb3JtYW5jZSwgc2VlIGBSZWFjdEluc3RhbmNlSGFuZGxlcy5jcmVhdGVSZWFjdElEYC5cblx0ICAgICAgICAgIHZhciByb290SUQgPSB0aGlzLl9yb290Tm9kZUlEICsgbmFtZTtcblx0ICAgICAgICAgIHZhciBtb3VudEltYWdlID0gUmVhY3RSZWNvbmNpbGVyLm1vdW50Q29tcG9uZW50KGNoaWxkLCByb290SUQsIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcblx0ICAgICAgICAgIGNoaWxkLl9tb3VudEluZGV4ID0gaW5kZXgrKztcblx0ICAgICAgICAgIG1vdW50SW1hZ2VzLnB1c2gobW91bnRJbWFnZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBtb3VudEltYWdlcztcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBSZXBsYWNlcyBhbnkgcmVuZGVyZWQgY2hpbGRyZW4gd2l0aCBhIHRleHQgY29udGVudCBzdHJpbmcuXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtzdHJpbmd9IG5leHRDb250ZW50IFN0cmluZyBvZiBjb250ZW50LlxuXHQgICAgICogQGludGVybmFsXG5cdCAgICAgKi9cblx0ICAgIHVwZGF0ZVRleHRDb250ZW50OiBmdW5jdGlvbiAobmV4dENvbnRlbnQpIHtcblx0ICAgICAgdXBkYXRlRGVwdGgrKztcblx0ICAgICAgdmFyIGVycm9yVGhyb3duID0gdHJ1ZTtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICB2YXIgcHJldkNoaWxkcmVuID0gdGhpcy5fcmVuZGVyZWRDaGlsZHJlbjtcblx0ICAgICAgICAvLyBSZW1vdmUgYW55IHJlbmRlcmVkIGNoaWxkcmVuLlxuXHQgICAgICAgIFJlYWN0Q2hpbGRSZWNvbmNpbGVyLnVubW91bnRDaGlsZHJlbihwcmV2Q2hpbGRyZW4pO1xuXHQgICAgICAgIC8vIFRPRE86IFRoZSBzZXRUZXh0Q29udGVudCBvcGVyYXRpb24gc2hvdWxkIGJlIGVub3VnaFxuXHQgICAgICAgIGZvciAodmFyIG5hbWUgaW4gcHJldkNoaWxkcmVuKSB7XG5cdCAgICAgICAgICBpZiAocHJldkNoaWxkcmVuLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG5cdCAgICAgICAgICAgIHRoaXMuX3VubW91bnRDaGlsZChwcmV2Q2hpbGRyZW5bbmFtZV0pO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICAvLyBTZXQgbmV3IHRleHQgY29udGVudC5cblx0ICAgICAgICB0aGlzLnNldFRleHRDb250ZW50KG5leHRDb250ZW50KTtcblx0ICAgICAgICBlcnJvclRocm93biA9IGZhbHNlO1xuXHQgICAgICB9IGZpbmFsbHkge1xuXHQgICAgICAgIHVwZGF0ZURlcHRoLS07XG5cdCAgICAgICAgaWYgKCF1cGRhdGVEZXB0aCkge1xuXHQgICAgICAgICAgaWYgKGVycm9yVGhyb3duKSB7XG5cdCAgICAgICAgICAgIGNsZWFyUXVldWUoKTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHByb2Nlc3NRdWV1ZSgpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIFJlcGxhY2VzIGFueSByZW5kZXJlZCBjaGlsZHJlbiB3aXRoIGEgbWFya3VwIHN0cmluZy5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmV4dE1hcmt1cCBTdHJpbmcgb2YgbWFya3VwLlxuXHQgICAgICogQGludGVybmFsXG5cdCAgICAgKi9cblx0ICAgIHVwZGF0ZU1hcmt1cDogZnVuY3Rpb24gKG5leHRNYXJrdXApIHtcblx0ICAgICAgdXBkYXRlRGVwdGgrKztcblx0ICAgICAgdmFyIGVycm9yVGhyb3duID0gdHJ1ZTtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICB2YXIgcHJldkNoaWxkcmVuID0gdGhpcy5fcmVuZGVyZWRDaGlsZHJlbjtcblx0ICAgICAgICAvLyBSZW1vdmUgYW55IHJlbmRlcmVkIGNoaWxkcmVuLlxuXHQgICAgICAgIFJlYWN0Q2hpbGRSZWNvbmNpbGVyLnVubW91bnRDaGlsZHJlbihwcmV2Q2hpbGRyZW4pO1xuXHQgICAgICAgIGZvciAodmFyIG5hbWUgaW4gcHJldkNoaWxkcmVuKSB7XG5cdCAgICAgICAgICBpZiAocHJldkNoaWxkcmVuLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG5cdCAgICAgICAgICAgIHRoaXMuX3VubW91bnRDaGlsZEJ5TmFtZShwcmV2Q2hpbGRyZW5bbmFtZV0sIG5hbWUpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLnNldE1hcmt1cChuZXh0TWFya3VwKTtcblx0ICAgICAgICBlcnJvclRocm93biA9IGZhbHNlO1xuXHQgICAgICB9IGZpbmFsbHkge1xuXHQgICAgICAgIHVwZGF0ZURlcHRoLS07XG5cdCAgICAgICAgaWYgKCF1cGRhdGVEZXB0aCkge1xuXHQgICAgICAgICAgaWYgKGVycm9yVGhyb3duKSB7XG5cdCAgICAgICAgICAgIGNsZWFyUXVldWUoKTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHByb2Nlc3NRdWV1ZSgpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIFVwZGF0ZXMgdGhlIHJlbmRlcmVkIGNoaWxkcmVuIHdpdGggbmV3IGNoaWxkcmVuLlxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7P29iamVjdH0gbmV4dE5lc3RlZENoaWxkcmVuRWxlbWVudHMgTmVzdGVkIGNoaWxkIGVsZW1lbnQgbWFwcy5cblx0ICAgICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cblx0ICAgICAqIEBpbnRlcm5hbFxuXHQgICAgICovXG5cdCAgICB1cGRhdGVDaGlsZHJlbjogZnVuY3Rpb24gKG5leHROZXN0ZWRDaGlsZHJlbkVsZW1lbnRzLCB0cmFuc2FjdGlvbiwgY29udGV4dCkge1xuXHQgICAgICB1cGRhdGVEZXB0aCsrO1xuXHQgICAgICB2YXIgZXJyb3JUaHJvd24gPSB0cnVlO1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIHRoaXMuX3VwZGF0ZUNoaWxkcmVuKG5leHROZXN0ZWRDaGlsZHJlbkVsZW1lbnRzLCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG5cdCAgICAgICAgZXJyb3JUaHJvd24gPSBmYWxzZTtcblx0ICAgICAgfSBmaW5hbGx5IHtcblx0ICAgICAgICB1cGRhdGVEZXB0aC0tO1xuXHQgICAgICAgIGlmICghdXBkYXRlRGVwdGgpIHtcblx0ICAgICAgICAgIGlmIChlcnJvclRocm93bikge1xuXHQgICAgICAgICAgICBjbGVhclF1ZXVlKCk7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBwcm9jZXNzUXVldWUoKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBJbXByb3ZlIHBlcmZvcm1hbmNlIGJ5IGlzb2xhdGluZyB0aGlzIGhvdCBjb2RlIHBhdGggZnJvbSB0aGUgdHJ5L2NhdGNoXG5cdCAgICAgKiBibG9jayBpbiBgdXBkYXRlQ2hpbGRyZW5gLlxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7P29iamVjdH0gbmV4dE5lc3RlZENoaWxkcmVuRWxlbWVudHMgTmVzdGVkIGNoaWxkIGVsZW1lbnQgbWFwcy5cblx0ICAgICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cblx0ICAgICAqIEBmaW5hbFxuXHQgICAgICogQHByb3RlY3RlZFxuXHQgICAgICovXG5cdCAgICBfdXBkYXRlQ2hpbGRyZW46IGZ1bmN0aW9uIChuZXh0TmVzdGVkQ2hpbGRyZW5FbGVtZW50cywgdHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcblx0ICAgICAgdmFyIHByZXZDaGlsZHJlbiA9IHRoaXMuX3JlbmRlcmVkQ2hpbGRyZW47XG5cdCAgICAgIHZhciBuZXh0Q2hpbGRyZW4gPSB0aGlzLl9yZWNvbmNpbGVyVXBkYXRlQ2hpbGRyZW4ocHJldkNoaWxkcmVuLCBuZXh0TmVzdGVkQ2hpbGRyZW5FbGVtZW50cywgdHJhbnNhY3Rpb24sIGNvbnRleHQpO1xuXHQgICAgICB0aGlzLl9yZW5kZXJlZENoaWxkcmVuID0gbmV4dENoaWxkcmVuO1xuXHQgICAgICBpZiAoIW5leHRDaGlsZHJlbiAmJiAhcHJldkNoaWxkcmVuKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBuYW1lO1xuXHQgICAgICAvLyBgbmV4dEluZGV4YCB3aWxsIGluY3JlbWVudCBmb3IgZWFjaCBjaGlsZCBpbiBgbmV4dENoaWxkcmVuYCwgYnV0XG5cdCAgICAgIC8vIGBsYXN0SW5kZXhgIHdpbGwgYmUgdGhlIGxhc3QgaW5kZXggdmlzaXRlZCBpbiBgcHJldkNoaWxkcmVuYC5cblx0ICAgICAgdmFyIGxhc3RJbmRleCA9IDA7XG5cdCAgICAgIHZhciBuZXh0SW5kZXggPSAwO1xuXHQgICAgICBmb3IgKG5hbWUgaW4gbmV4dENoaWxkcmVuKSB7XG5cdCAgICAgICAgaWYgKCFuZXh0Q2hpbGRyZW4uaGFzT3duUHJvcGVydHkobmFtZSkpIHtcblx0ICAgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgcHJldkNoaWxkID0gcHJldkNoaWxkcmVuICYmIHByZXZDaGlsZHJlbltuYW1lXTtcblx0ICAgICAgICB2YXIgbmV4dENoaWxkID0gbmV4dENoaWxkcmVuW25hbWVdO1xuXHQgICAgICAgIGlmIChwcmV2Q2hpbGQgPT09IG5leHRDaGlsZCkge1xuXHQgICAgICAgICAgdGhpcy5tb3ZlQ2hpbGQocHJldkNoaWxkLCBuZXh0SW5kZXgsIGxhc3RJbmRleCk7XG5cdCAgICAgICAgICBsYXN0SW5kZXggPSBNYXRoLm1heChwcmV2Q2hpbGQuX21vdW50SW5kZXgsIGxhc3RJbmRleCk7XG5cdCAgICAgICAgICBwcmV2Q2hpbGQuX21vdW50SW5kZXggPSBuZXh0SW5kZXg7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIGlmIChwcmV2Q2hpbGQpIHtcblx0ICAgICAgICAgICAgLy8gVXBkYXRlIGBsYXN0SW5kZXhgIGJlZm9yZSBgX21vdW50SW5kZXhgIGdldHMgdW5zZXQgYnkgdW5tb3VudGluZy5cblx0ICAgICAgICAgICAgbGFzdEluZGV4ID0gTWF0aC5tYXgocHJldkNoaWxkLl9tb3VudEluZGV4LCBsYXN0SW5kZXgpO1xuXHQgICAgICAgICAgICB0aGlzLl91bm1vdW50Q2hpbGQocHJldkNoaWxkKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIC8vIFRoZSBjaGlsZCBtdXN0IGJlIGluc3RhbnRpYXRlZCBiZWZvcmUgaXQncyBtb3VudGVkLlxuXHQgICAgICAgICAgdGhpcy5fbW91bnRDaGlsZEJ5TmFtZUF0SW5kZXgobmV4dENoaWxkLCBuYW1lLCBuZXh0SW5kZXgsIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgbmV4dEluZGV4Kys7XG5cdCAgICAgIH1cblx0ICAgICAgLy8gUmVtb3ZlIGNoaWxkcmVuIHRoYXQgYXJlIG5vIGxvbmdlciBwcmVzZW50LlxuXHQgICAgICBmb3IgKG5hbWUgaW4gcHJldkNoaWxkcmVuKSB7XG5cdCAgICAgICAgaWYgKHByZXZDaGlsZHJlbi5oYXNPd25Qcm9wZXJ0eShuYW1lKSAmJiAhKG5leHRDaGlsZHJlbiAmJiBuZXh0Q2hpbGRyZW4uaGFzT3duUHJvcGVydHkobmFtZSkpKSB7XG5cdCAgICAgICAgICB0aGlzLl91bm1vdW50Q2hpbGQocHJldkNoaWxkcmVuW25hbWVdKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBVbm1vdW50cyBhbGwgcmVuZGVyZWQgY2hpbGRyZW4uIFRoaXMgc2hvdWxkIGJlIHVzZWQgdG8gY2xlYW4gdXAgY2hpbGRyZW5cblx0ICAgICAqIHdoZW4gdGhpcyBjb21wb25lbnQgaXMgdW5tb3VudGVkLlxuXHQgICAgICpcblx0ICAgICAqIEBpbnRlcm5hbFxuXHQgICAgICovXG5cdCAgICB1bm1vdW50Q2hpbGRyZW46IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIHJlbmRlcmVkQ2hpbGRyZW4gPSB0aGlzLl9yZW5kZXJlZENoaWxkcmVuO1xuXHQgICAgICBSZWFjdENoaWxkUmVjb25jaWxlci51bm1vdW50Q2hpbGRyZW4ocmVuZGVyZWRDaGlsZHJlbik7XG5cdCAgICAgIHRoaXMuX3JlbmRlcmVkQ2hpbGRyZW4gPSBudWxsO1xuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIE1vdmVzIGEgY2hpbGQgY29tcG9uZW50IHRvIHRoZSBzdXBwbGllZCBpbmRleC5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBjaGlsZCBDb21wb25lbnQgdG8gbW92ZS5cblx0ICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0b0luZGV4IERlc3RpbmF0aW9uIGluZGV4IG9mIHRoZSBlbGVtZW50LlxuXHQgICAgICogQHBhcmFtIHtudW1iZXJ9IGxhc3RJbmRleCBMYXN0IGluZGV4IHZpc2l0ZWQgb2YgdGhlIHNpYmxpbmdzIG9mIGBjaGlsZGAuXG5cdCAgICAgKiBAcHJvdGVjdGVkXG5cdCAgICAgKi9cblx0ICAgIG1vdmVDaGlsZDogZnVuY3Rpb24gKGNoaWxkLCB0b0luZGV4LCBsYXN0SW5kZXgpIHtcblx0ICAgICAgLy8gSWYgdGhlIGluZGV4IG9mIGBjaGlsZGAgaXMgbGVzcyB0aGFuIGBsYXN0SW5kZXhgLCB0aGVuIGl0IG5lZWRzIHRvXG5cdCAgICAgIC8vIGJlIG1vdmVkLiBPdGhlcndpc2UsIHdlIGRvIG5vdCBuZWVkIHRvIG1vdmUgaXQgYmVjYXVzZSBhIGNoaWxkIHdpbGwgYmVcblx0ICAgICAgLy8gaW5zZXJ0ZWQgb3IgbW92ZWQgYmVmb3JlIGBjaGlsZGAuXG5cdCAgICAgIGlmIChjaGlsZC5fbW91bnRJbmRleCA8IGxhc3RJbmRleCkge1xuXHQgICAgICAgIGVucXVldWVNb3ZlKHRoaXMuX3Jvb3ROb2RlSUQsIGNoaWxkLl9tb3VudEluZGV4LCB0b0luZGV4KTtcblx0ICAgICAgfVxuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIENyZWF0ZXMgYSBjaGlsZCBjb21wb25lbnQuXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gY2hpbGQgQ29tcG9uZW50IHRvIGNyZWF0ZS5cblx0ICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtb3VudEltYWdlIE1hcmt1cCB0byBpbnNlcnQuXG5cdCAgICAgKiBAcHJvdGVjdGVkXG5cdCAgICAgKi9cblx0ICAgIGNyZWF0ZUNoaWxkOiBmdW5jdGlvbiAoY2hpbGQsIG1vdW50SW1hZ2UpIHtcblx0ICAgICAgZW5xdWV1ZUluc2VydE1hcmt1cCh0aGlzLl9yb290Tm9kZUlELCBtb3VudEltYWdlLCBjaGlsZC5fbW91bnRJbmRleCk7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogUmVtb3ZlcyBhIGNoaWxkIGNvbXBvbmVudC5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBjaGlsZCBDaGlsZCB0byByZW1vdmUuXG5cdCAgICAgKiBAcHJvdGVjdGVkXG5cdCAgICAgKi9cblx0ICAgIHJlbW92ZUNoaWxkOiBmdW5jdGlvbiAoY2hpbGQpIHtcblx0ICAgICAgZW5xdWV1ZVJlbW92ZSh0aGlzLl9yb290Tm9kZUlELCBjaGlsZC5fbW91bnRJbmRleCk7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogU2V0cyB0aGlzIHRleHQgY29udGVudCBzdHJpbmcuXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtzdHJpbmd9IHRleHRDb250ZW50IFRleHQgY29udGVudCB0byBzZXQuXG5cdCAgICAgKiBAcHJvdGVjdGVkXG5cdCAgICAgKi9cblx0ICAgIHNldFRleHRDb250ZW50OiBmdW5jdGlvbiAodGV4dENvbnRlbnQpIHtcblx0ICAgICAgZW5xdWV1ZVRleHRDb250ZW50KHRoaXMuX3Jvb3ROb2RlSUQsIHRleHRDb250ZW50KTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBTZXRzIHRoaXMgbWFya3VwIHN0cmluZy5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge3N0cmluZ30gbWFya3VwIE1hcmt1cCB0byBzZXQuXG5cdCAgICAgKiBAcHJvdGVjdGVkXG5cdCAgICAgKi9cblx0ICAgIHNldE1hcmt1cDogZnVuY3Rpb24gKG1hcmt1cCkge1xuXHQgICAgICBlbnF1ZXVlU2V0TWFya3VwKHRoaXMuX3Jvb3ROb2RlSUQsIG1hcmt1cCk7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogTW91bnRzIGEgY2hpbGQgd2l0aCB0aGUgc3VwcGxpZWQgbmFtZS5cblx0ICAgICAqXG5cdCAgICAgKiBOT1RFOiBUaGlzIGlzIHBhcnQgb2YgYHVwZGF0ZUNoaWxkcmVuYCBhbmQgaXMgaGVyZSBmb3IgcmVhZGFiaWxpdHkuXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gY2hpbGQgQ29tcG9uZW50IHRvIG1vdW50LlxuXHQgICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgTmFtZSBvZiB0aGUgY2hpbGQuXG5cdCAgICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggSW5kZXggYXQgd2hpY2ggdG8gaW5zZXJ0IHRoZSBjaGlsZC5cblx0ICAgICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cblx0ICAgICAqIEBwcml2YXRlXG5cdCAgICAgKi9cblx0ICAgIF9tb3VudENoaWxkQnlOYW1lQXRJbmRleDogZnVuY3Rpb24gKGNoaWxkLCBuYW1lLCBpbmRleCwgdHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcblx0ICAgICAgLy8gSW5saW5lZCBmb3IgcGVyZm9ybWFuY2UsIHNlZSBgUmVhY3RJbnN0YW5jZUhhbmRsZXMuY3JlYXRlUmVhY3RJRGAuXG5cdCAgICAgIHZhciByb290SUQgPSB0aGlzLl9yb290Tm9kZUlEICsgbmFtZTtcblx0ICAgICAgdmFyIG1vdW50SW1hZ2UgPSBSZWFjdFJlY29uY2lsZXIubW91bnRDb21wb25lbnQoY2hpbGQsIHJvb3RJRCwgdHJhbnNhY3Rpb24sIGNvbnRleHQpO1xuXHQgICAgICBjaGlsZC5fbW91bnRJbmRleCA9IGluZGV4O1xuXHQgICAgICB0aGlzLmNyZWF0ZUNoaWxkKGNoaWxkLCBtb3VudEltYWdlKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBVbm1vdW50cyBhIHJlbmRlcmVkIGNoaWxkLlxuXHQgICAgICpcblx0ICAgICAqIE5PVEU6IFRoaXMgaXMgcGFydCBvZiBgdXBkYXRlQ2hpbGRyZW5gIGFuZCBpcyBoZXJlIGZvciByZWFkYWJpbGl0eS5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBjaGlsZCBDb21wb25lbnQgdG8gdW5tb3VudC5cblx0ICAgICAqIEBwcml2YXRlXG5cdCAgICAgKi9cblx0ICAgIF91bm1vdW50Q2hpbGQ6IGZ1bmN0aW9uIChjaGlsZCkge1xuXHQgICAgICB0aGlzLnJlbW92ZUNoaWxkKGNoaWxkKTtcblx0ICAgICAgY2hpbGQuX21vdW50SW5kZXggPSBudWxsO1xuXHQgICAgfVxuXHRcblx0ICB9XG5cdFxuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBSZWFjdE11bHRpQ2hpbGQ7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpKSlcblxuLyoqKi8gfSksXG4vKiAxMTUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgey8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxNC0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RDaGlsZFJlY29uY2lsZXJcblx0ICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgUmVhY3RSZWNvbmNpbGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7XG5cdFxuXHR2YXIgaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudCA9IF9fd2VicGFja19yZXF1aXJlX18oNjIpO1xuXHR2YXIgc2hvdWxkVXBkYXRlUmVhY3RDb21wb25lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY3KTtcblx0dmFyIHRyYXZlcnNlQWxsQ2hpbGRyZW4gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExMSk7XG5cdHZhciB3YXJuaW5nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cdFxuXHRmdW5jdGlvbiBpbnN0YW50aWF0ZUNoaWxkKGNoaWxkSW5zdGFuY2VzLCBjaGlsZCwgbmFtZSkge1xuXHQgIC8vIFdlIGZvdW5kIGEgY29tcG9uZW50IGluc3RhbmNlLlxuXHQgIHZhciBrZXlVbmlxdWUgPSBjaGlsZEluc3RhbmNlc1tuYW1lXSA9PT0gdW5kZWZpbmVkO1xuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhrZXlVbmlxdWUsICdmbGF0dGVuQ2hpbGRyZW4oLi4uKTogRW5jb3VudGVyZWQgdHdvIGNoaWxkcmVuIHdpdGggdGhlIHNhbWUga2V5LCAnICsgJ2Alc2AuIENoaWxkIGtleXMgbXVzdCBiZSB1bmlxdWU7IHdoZW4gdHdvIGNoaWxkcmVuIHNoYXJlIGEga2V5LCBvbmx5ICcgKyAndGhlIGZpcnN0IGNoaWxkIHdpbGwgYmUgdXNlZC4nLCBuYW1lKSA6IHVuZGVmaW5lZDtcblx0ICB9XG5cdCAgaWYgKGNoaWxkICE9IG51bGwgJiYga2V5VW5pcXVlKSB7XG5cdCAgICBjaGlsZEluc3RhbmNlc1tuYW1lXSA9IGluc3RhbnRpYXRlUmVhY3RDb21wb25lbnQoY2hpbGQsIG51bGwpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFJlYWN0Q2hpbGRSZWNvbmNpbGVyIHByb3ZpZGVzIGhlbHBlcnMgZm9yIGluaXRpYWxpemluZyBvciB1cGRhdGluZyBhIHNldCBvZlxuXHQgKiBjaGlsZHJlbi4gSXRzIG91dHB1dCBpcyBzdWl0YWJsZSBmb3IgcGFzc2luZyBpdCBvbnRvIFJlYWN0TXVsdGlDaGlsZCB3aGljaFxuXHQgKiBkb2VzIGRpZmZlZCByZW9yZGVyaW5nIGFuZCBpbnNlcnRpb24uXG5cdCAqL1xuXHR2YXIgUmVhY3RDaGlsZFJlY29uY2lsZXIgPSB7XG5cdCAgLyoqXG5cdCAgICogR2VuZXJhdGVzIGEgXCJtb3VudCBpbWFnZVwiIGZvciBlYWNoIG9mIHRoZSBzdXBwbGllZCBjaGlsZHJlbi4gSW4gdGhlIGNhc2Vcblx0ICAgKiBvZiBgUmVhY3RET01Db21wb25lbnRgLCBhIG1vdW50IGltYWdlIGlzIGEgc3RyaW5nIG9mIG1hcmt1cC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7P29iamVjdH0gbmVzdGVkQ2hpbGROb2RlcyBOZXN0ZWQgY2hpbGQgbWFwcy5cblx0ICAgKiBAcmV0dXJuIHs/b2JqZWN0fSBBIHNldCBvZiBjaGlsZCBpbnN0YW5jZXMuXG5cdCAgICogQGludGVybmFsXG5cdCAgICovXG5cdCAgaW5zdGFudGlhdGVDaGlsZHJlbjogZnVuY3Rpb24gKG5lc3RlZENoaWxkTm9kZXMsIHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG5cdCAgICBpZiAobmVzdGVkQ2hpbGROb2RlcyA9PSBudWxsKSB7XG5cdCAgICAgIHJldHVybiBudWxsO1xuXHQgICAgfVxuXHQgICAgdmFyIGNoaWxkSW5zdGFuY2VzID0ge307XG5cdCAgICB0cmF2ZXJzZUFsbENoaWxkcmVuKG5lc3RlZENoaWxkTm9kZXMsIGluc3RhbnRpYXRlQ2hpbGQsIGNoaWxkSW5zdGFuY2VzKTtcblx0ICAgIHJldHVybiBjaGlsZEluc3RhbmNlcztcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBVcGRhdGVzIHRoZSByZW5kZXJlZCBjaGlsZHJlbiBhbmQgcmV0dXJucyBhIG5ldyBzZXQgb2YgY2hpbGRyZW4uXG5cdCAgICpcblx0ICAgKiBAcGFyYW0gez9vYmplY3R9IHByZXZDaGlsZHJlbiBQcmV2aW91c2x5IGluaXRpYWxpemVkIHNldCBvZiBjaGlsZHJlbi5cblx0ICAgKiBAcGFyYW0gez9vYmplY3R9IG5leHRDaGlsZHJlbiBGbGF0IGNoaWxkIGVsZW1lbnQgbWFwcy5cblx0ICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG5cdCAgICogQHBhcmFtIHtvYmplY3R9IGNvbnRleHRcblx0ICAgKiBAcmV0dXJuIHs/b2JqZWN0fSBBIG5ldyBzZXQgb2YgY2hpbGQgaW5zdGFuY2VzLlxuXHQgICAqIEBpbnRlcm5hbFxuXHQgICAqL1xuXHQgIHVwZGF0ZUNoaWxkcmVuOiBmdW5jdGlvbiAocHJldkNoaWxkcmVuLCBuZXh0Q2hpbGRyZW4sIHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG5cdCAgICAvLyBXZSBjdXJyZW50bHkgZG9uJ3QgaGF2ZSBhIHdheSB0byB0cmFjayBtb3ZlcyBoZXJlIGJ1dCBpZiB3ZSB1c2UgaXRlcmF0b3JzXG5cdCAgICAvLyBpbnN0ZWFkIG9mIGZvci4uaW4gd2UgY2FuIHppcCB0aGUgaXRlcmF0b3JzIGFuZCBjaGVjayBpZiBhbiBpdGVtIGhhc1xuXHQgICAgLy8gbW92ZWQuXG5cdCAgICAvLyBUT0RPOiBJZiBub3RoaW5nIGhhcyBjaGFuZ2VkLCByZXR1cm4gdGhlIHByZXZDaGlsZHJlbiBvYmplY3Qgc28gdGhhdCB3ZVxuXHQgICAgLy8gY2FuIHF1aWNrbHkgYmFpbG91dCBpZiBub3RoaW5nIGhhcyBjaGFuZ2VkLlxuXHQgICAgaWYgKCFuZXh0Q2hpbGRyZW4gJiYgIXByZXZDaGlsZHJlbikge1xuXHQgICAgICByZXR1cm4gbnVsbDtcblx0ICAgIH1cblx0ICAgIHZhciBuYW1lO1xuXHQgICAgZm9yIChuYW1lIGluIG5leHRDaGlsZHJlbikge1xuXHQgICAgICBpZiAoIW5leHRDaGlsZHJlbi5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuXHQgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBwcmV2Q2hpbGQgPSBwcmV2Q2hpbGRyZW4gJiYgcHJldkNoaWxkcmVuW25hbWVdO1xuXHQgICAgICB2YXIgcHJldkVsZW1lbnQgPSBwcmV2Q2hpbGQgJiYgcHJldkNoaWxkLl9jdXJyZW50RWxlbWVudDtcblx0ICAgICAgdmFyIG5leHRFbGVtZW50ID0gbmV4dENoaWxkcmVuW25hbWVdO1xuXHQgICAgICBpZiAocHJldkNoaWxkICE9IG51bGwgJiYgc2hvdWxkVXBkYXRlUmVhY3RDb21wb25lbnQocHJldkVsZW1lbnQsIG5leHRFbGVtZW50KSkge1xuXHQgICAgICAgIFJlYWN0UmVjb25jaWxlci5yZWNlaXZlQ29tcG9uZW50KHByZXZDaGlsZCwgbmV4dEVsZW1lbnQsIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcblx0ICAgICAgICBuZXh0Q2hpbGRyZW5bbmFtZV0gPSBwcmV2Q2hpbGQ7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgaWYgKHByZXZDaGlsZCkge1xuXHQgICAgICAgICAgUmVhY3RSZWNvbmNpbGVyLnVubW91bnRDb21wb25lbnQocHJldkNoaWxkLCBuYW1lKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgLy8gVGhlIGNoaWxkIG11c3QgYmUgaW5zdGFudGlhdGVkIGJlZm9yZSBpdCdzIG1vdW50ZWQuXG5cdCAgICAgICAgdmFyIG5leHRDaGlsZEluc3RhbmNlID0gaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudChuZXh0RWxlbWVudCwgbnVsbCk7XG5cdCAgICAgICAgbmV4dENoaWxkcmVuW25hbWVdID0gbmV4dENoaWxkSW5zdGFuY2U7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIC8vIFVubW91bnQgY2hpbGRyZW4gdGhhdCBhcmUgbm8gbG9uZ2VyIHByZXNlbnQuXG5cdCAgICBmb3IgKG5hbWUgaW4gcHJldkNoaWxkcmVuKSB7XG5cdCAgICAgIGlmIChwcmV2Q2hpbGRyZW4uaGFzT3duUHJvcGVydHkobmFtZSkgJiYgIShuZXh0Q2hpbGRyZW4gJiYgbmV4dENoaWxkcmVuLmhhc093blByb3BlcnR5KG5hbWUpKSkge1xuXHQgICAgICAgIFJlYWN0UmVjb25jaWxlci51bm1vdW50Q29tcG9uZW50KHByZXZDaGlsZHJlbltuYW1lXSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiBuZXh0Q2hpbGRyZW47XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogVW5tb3VudHMgYWxsIHJlbmRlcmVkIGNoaWxkcmVuLiBUaGlzIHNob3VsZCBiZSB1c2VkIHRvIGNsZWFuIHVwIGNoaWxkcmVuXG5cdCAgICogd2hlbiB0aGlzIGNvbXBvbmVudCBpcyB1bm1vdW50ZWQuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0gez9vYmplY3R9IHJlbmRlcmVkQ2hpbGRyZW4gUHJldmlvdXNseSBpbml0aWFsaXplZCBzZXQgb2YgY2hpbGRyZW4uXG5cdCAgICogQGludGVybmFsXG5cdCAgICovXG5cdCAgdW5tb3VudENoaWxkcmVuOiBmdW5jdGlvbiAocmVuZGVyZWRDaGlsZHJlbikge1xuXHQgICAgZm9yICh2YXIgbmFtZSBpbiByZW5kZXJlZENoaWxkcmVuKSB7XG5cdCAgICAgIGlmIChyZW5kZXJlZENoaWxkcmVuLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG5cdCAgICAgICAgdmFyIHJlbmRlcmVkQ2hpbGQgPSByZW5kZXJlZENoaWxkcmVuW25hbWVdO1xuXHQgICAgICAgIFJlYWN0UmVjb25jaWxlci51bm1vdW50Q29tcG9uZW50KHJlbmRlcmVkQ2hpbGQpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gUmVhY3RDaGlsZFJlY29uY2lsZXI7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpKSlcblxuLyoqKi8gfSksXG4vKiAxMTYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgey8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgZmxhdHRlbkNoaWxkcmVuXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHRyYXZlcnNlQWxsQ2hpbGRyZW4gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExMSk7XG5cdHZhciB3YXJuaW5nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cdFxuXHQvKipcblx0ICogQHBhcmFtIHtmdW5jdGlvbn0gdHJhdmVyc2VDb250ZXh0IENvbnRleHQgcGFzc2VkIHRocm91Z2ggdHJhdmVyc2FsLlxuXHQgKiBAcGFyYW0gez9SZWFjdENvbXBvbmVudH0gY2hpbGQgUmVhY3QgY2hpbGQgY29tcG9uZW50LlxuXHQgKiBAcGFyYW0geyFzdHJpbmd9IG5hbWUgU3RyaW5nIG5hbWUgb2Yga2V5IHBhdGggdG8gY2hpbGQuXG5cdCAqL1xuXHRmdW5jdGlvbiBmbGF0dGVuU2luZ2xlQ2hpbGRJbnRvQ29udGV4dCh0cmF2ZXJzZUNvbnRleHQsIGNoaWxkLCBuYW1lKSB7XG5cdCAgLy8gV2UgZm91bmQgYSBjb21wb25lbnQgaW5zdGFuY2UuXG5cdCAgdmFyIHJlc3VsdCA9IHRyYXZlcnNlQ29udGV4dDtcblx0ICB2YXIga2V5VW5pcXVlID0gcmVzdWx0W25hbWVdID09PSB1bmRlZmluZWQ7XG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGtleVVuaXF1ZSwgJ2ZsYXR0ZW5DaGlsZHJlbiguLi4pOiBFbmNvdW50ZXJlZCB0d28gY2hpbGRyZW4gd2l0aCB0aGUgc2FtZSBrZXksICcgKyAnYCVzYC4gQ2hpbGQga2V5cyBtdXN0IGJlIHVuaXF1ZTsgd2hlbiB0d28gY2hpbGRyZW4gc2hhcmUgYSBrZXksIG9ubHkgJyArICd0aGUgZmlyc3QgY2hpbGQgd2lsbCBiZSB1c2VkLicsIG5hbWUpIDogdW5kZWZpbmVkO1xuXHQgIH1cblx0ICBpZiAoa2V5VW5pcXVlICYmIGNoaWxkICE9IG51bGwpIHtcblx0ICAgIHJlc3VsdFtuYW1lXSA9IGNoaWxkO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEZsYXR0ZW5zIGNoaWxkcmVuIHRoYXQgYXJlIHR5cGljYWxseSBzcGVjaWZpZWQgYXMgYHByb3BzLmNoaWxkcmVuYC4gQW55IG51bGxcblx0ICogY2hpbGRyZW4gd2lsbCBub3QgYmUgaW5jbHVkZWQgaW4gdGhlIHJlc3VsdGluZyBvYmplY3QuXG5cdCAqIEByZXR1cm4geyFvYmplY3R9IGZsYXR0ZW5lZCBjaGlsZHJlbiBrZXllZCBieSBuYW1lLlxuXHQgKi9cblx0ZnVuY3Rpb24gZmxhdHRlbkNoaWxkcmVuKGNoaWxkcmVuKSB7XG5cdCAgaWYgKGNoaWxkcmVuID09IG51bGwpIHtcblx0ICAgIHJldHVybiBjaGlsZHJlbjtcblx0ICB9XG5cdCAgdmFyIHJlc3VsdCA9IHt9O1xuXHQgIHRyYXZlcnNlQWxsQ2hpbGRyZW4oY2hpbGRyZW4sIGZsYXR0ZW5TaW5nbGVDaGlsZEludG9Db250ZXh0LCByZXN1bHQpO1xuXHQgIHJldHVybiByZXN1bHQ7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZmxhdHRlbkNoaWxkcmVuO1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg0KSkpXG5cbi8qKiovIH0pLFxuLyogMTE3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBzaGFsbG93RXF1YWxcblx0ICogQHR5cGVjaGVja3Ncblx0ICogXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblx0XG5cdC8qKlxuXHQgKiBQZXJmb3JtcyBlcXVhbGl0eSBieSBpdGVyYXRpbmcgdGhyb3VnaCBrZXlzIG9uIGFuIG9iamVjdCBhbmQgcmV0dXJuaW5nIGZhbHNlXG5cdCAqIHdoZW4gYW55IGtleSBoYXMgdmFsdWVzIHdoaWNoIGFyZSBub3Qgc3RyaWN0bHkgZXF1YWwgYmV0d2VlbiB0aGUgYXJndW1lbnRzLlxuXHQgKiBSZXR1cm5zIHRydWUgd2hlbiB0aGUgdmFsdWVzIG9mIGFsbCBrZXlzIGFyZSBzdHJpY3RseSBlcXVhbC5cblx0ICovXG5cdGZ1bmN0aW9uIHNoYWxsb3dFcXVhbChvYmpBLCBvYmpCKSB7XG5cdCAgaWYgKG9iakEgPT09IG9iakIpIHtcblx0ICAgIHJldHVybiB0cnVlO1xuXHQgIH1cblx0XG5cdCAgaWYgKHR5cGVvZiBvYmpBICE9PSAnb2JqZWN0JyB8fCBvYmpBID09PSBudWxsIHx8IHR5cGVvZiBvYmpCICE9PSAnb2JqZWN0JyB8fCBvYmpCID09PSBudWxsKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHRcblx0ICB2YXIga2V5c0EgPSBPYmplY3Qua2V5cyhvYmpBKTtcblx0ICB2YXIga2V5c0IgPSBPYmplY3Qua2V5cyhvYmpCKTtcblx0XG5cdCAgaWYgKGtleXNBLmxlbmd0aCAhPT0ga2V5c0IubGVuZ3RoKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHRcblx0ICAvLyBUZXN0IGZvciBBJ3Mga2V5cyBkaWZmZXJlbnQgZnJvbSBCLlxuXHQgIHZhciBiSGFzT3duUHJvcGVydHkgPSBoYXNPd25Qcm9wZXJ0eS5iaW5kKG9iakIpO1xuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5c0EubGVuZ3RoOyBpKyspIHtcblx0ICAgIGlmICghYkhhc093blByb3BlcnR5KGtleXNBW2ldKSB8fCBvYmpBW2tleXNBW2ldXSAhPT0gb2JqQltrZXlzQVtpXV0pIHtcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHRydWU7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gc2hhbGxvd0VxdWFsO1xuXG4vKioqLyB9KSxcbi8qIDExOCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RFdmVudExpc3RlbmVyXG5cdCAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIEV2ZW50TGlzdGVuZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExOSk7XG5cdHZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdHZhciBQb29sZWRDbGFzcyA9IF9fd2VicGFja19yZXF1aXJlX18oNTYpO1xuXHR2YXIgUmVhY3RJbnN0YW5jZUhhbmRsZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblx0dmFyIFJlYWN0TW91bnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4KTtcblx0dmFyIFJlYWN0VXBkYXRlcyA9IF9fd2VicGFja19yZXF1aXJlX18oNTQpO1xuXHRcblx0dmFyIGFzc2lnbiA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpO1xuXHR2YXIgZ2V0RXZlbnRUYXJnZXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgxKTtcblx0dmFyIGdldFVuYm91bmRlZFNjcm9sbFBvc2l0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjApO1xuXHRcblx0dmFyIERPQ1VNRU5UX0ZSQUdNRU5UX05PREVfVFlQRSA9IDExO1xuXHRcblx0LyoqXG5cdCAqIEZpbmRzIHRoZSBwYXJlbnQgUmVhY3QgY29tcG9uZW50IG9mIGBub2RlYC5cblx0ICpcblx0ICogQHBhcmFtIHsqfSBub2RlXG5cdCAqIEByZXR1cm4gez9ET01FdmVudFRhcmdldH0gUGFyZW50IGNvbnRhaW5lciwgb3IgYG51bGxgIGlmIHRoZSBzcGVjaWZpZWQgbm9kZVxuXHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzIG5vdCBuZXN0ZWQuXG5cdCAqL1xuXHRmdW5jdGlvbiBmaW5kUGFyZW50KG5vZGUpIHtcblx0ICAvLyBUT0RPOiBJdCBtYXkgYmUgYSBnb29kIGlkZWEgdG8gY2FjaGUgdGhpcyB0byBwcmV2ZW50IHVubmVjZXNzYXJ5IERPTVxuXHQgIC8vIHRyYXZlcnNhbCwgYnV0IGNhY2hpbmcgaXMgZGlmZmljdWx0IHRvIGRvIGNvcnJlY3RseSB3aXRob3V0IHVzaW5nIGFcblx0ICAvLyBtdXRhdGlvbiBvYnNlcnZlciB0byBsaXN0ZW4gZm9yIGFsbCBET00gY2hhbmdlcy5cblx0ICB2YXIgbm9kZUlEID0gUmVhY3RNb3VudC5nZXRJRChub2RlKTtcblx0ICB2YXIgcm9vdElEID0gUmVhY3RJbnN0YW5jZUhhbmRsZXMuZ2V0UmVhY3RSb290SURGcm9tTm9kZUlEKG5vZGVJRCk7XG5cdCAgdmFyIGNvbnRhaW5lciA9IFJlYWN0TW91bnQuZmluZFJlYWN0Q29udGFpbmVyRm9ySUQocm9vdElEKTtcblx0ICB2YXIgcGFyZW50ID0gUmVhY3RNb3VudC5nZXRGaXJzdFJlYWN0RE9NKGNvbnRhaW5lcik7XG5cdCAgcmV0dXJuIHBhcmVudDtcblx0fVxuXHRcblx0Ly8gVXNlZCB0byBzdG9yZSBhbmNlc3RvciBoaWVyYXJjaHkgaW4gdG9wIGxldmVsIGNhbGxiYWNrXG5cdGZ1bmN0aW9uIFRvcExldmVsQ2FsbGJhY2tCb29rS2VlcGluZyh0b3BMZXZlbFR5cGUsIG5hdGl2ZUV2ZW50KSB7XG5cdCAgdGhpcy50b3BMZXZlbFR5cGUgPSB0b3BMZXZlbFR5cGU7XG5cdCAgdGhpcy5uYXRpdmVFdmVudCA9IG5hdGl2ZUV2ZW50O1xuXHQgIHRoaXMuYW5jZXN0b3JzID0gW107XG5cdH1cblx0YXNzaWduKFRvcExldmVsQ2FsbGJhY2tCb29rS2VlcGluZy5wcm90b3R5cGUsIHtcblx0ICBkZXN0cnVjdG9yOiBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLnRvcExldmVsVHlwZSA9IG51bGw7XG5cdCAgICB0aGlzLm5hdGl2ZUV2ZW50ID0gbnVsbDtcblx0ICAgIHRoaXMuYW5jZXN0b3JzLmxlbmd0aCA9IDA7XG5cdCAgfVxuXHR9KTtcblx0UG9vbGVkQ2xhc3MuYWRkUG9vbGluZ1RvKFRvcExldmVsQ2FsbGJhY2tCb29rS2VlcGluZywgUG9vbGVkQ2xhc3MudHdvQXJndW1lbnRQb29sZXIpO1xuXHRcblx0ZnVuY3Rpb24gaGFuZGxlVG9wTGV2ZWxJbXBsKGJvb2tLZWVwaW5nKSB7XG5cdCAgLy8gVE9ETzogUmUtZW5hYmxlIGV2ZW50LnBhdGggaGFuZGxpbmdcblx0ICAvL1xuXHQgIC8vIGlmIChib29rS2VlcGluZy5uYXRpdmVFdmVudC5wYXRoICYmIGJvb2tLZWVwaW5nLm5hdGl2ZUV2ZW50LnBhdGgubGVuZ3RoID4gMSkge1xuXHQgIC8vICAgLy8gTmV3IGJyb3dzZXJzIGhhdmUgYSBwYXRoIGF0dHJpYnV0ZSBvbiBuYXRpdmUgZXZlbnRzXG5cdCAgLy8gICBoYW5kbGVUb3BMZXZlbFdpdGhQYXRoKGJvb2tLZWVwaW5nKTtcblx0ICAvLyB9IGVsc2Uge1xuXHQgIC8vICAgLy8gTGVnYWN5IGJyb3dzZXJzIGRvbid0IGhhdmUgYSBwYXRoIGF0dHJpYnV0ZSBvbiBuYXRpdmUgZXZlbnRzXG5cdCAgLy8gICBoYW5kbGVUb3BMZXZlbFdpdGhvdXRQYXRoKGJvb2tLZWVwaW5nKTtcblx0ICAvLyB9XG5cdFxuXHQgIHZvaWQgaGFuZGxlVG9wTGV2ZWxXaXRoUGF0aDsgLy8gdGVtcG9yYXJpbHkgdW51c2VkXG5cdCAgaGFuZGxlVG9wTGV2ZWxXaXRob3V0UGF0aChib29rS2VlcGluZyk7XG5cdH1cblx0XG5cdC8vIExlZ2FjeSBicm93c2VycyBkb24ndCBoYXZlIGEgcGF0aCBhdHRyaWJ1dGUgb24gbmF0aXZlIGV2ZW50c1xuXHRmdW5jdGlvbiBoYW5kbGVUb3BMZXZlbFdpdGhvdXRQYXRoKGJvb2tLZWVwaW5nKSB7XG5cdCAgdmFyIHRvcExldmVsVGFyZ2V0ID0gUmVhY3RNb3VudC5nZXRGaXJzdFJlYWN0RE9NKGdldEV2ZW50VGFyZ2V0KGJvb2tLZWVwaW5nLm5hdGl2ZUV2ZW50KSkgfHwgd2luZG93O1xuXHRcblx0ICAvLyBMb29wIHRocm91Z2ggdGhlIGhpZXJhcmNoeSwgaW4gY2FzZSB0aGVyZSdzIGFueSBuZXN0ZWQgY29tcG9uZW50cy5cblx0ICAvLyBJdCdzIGltcG9ydGFudCB0aGF0IHdlIGJ1aWxkIHRoZSBhcnJheSBvZiBhbmNlc3RvcnMgYmVmb3JlIGNhbGxpbmcgYW55XG5cdCAgLy8gZXZlbnQgaGFuZGxlcnMsIGJlY2F1c2UgZXZlbnQgaGFuZGxlcnMgY2FuIG1vZGlmeSB0aGUgRE9NLCBsZWFkaW5nIHRvXG5cdCAgLy8gaW5jb25zaXN0ZW5jaWVzIHdpdGggUmVhY3RNb3VudCdzIG5vZGUgY2FjaGUuIFNlZSAjMTEwNS5cblx0ICB2YXIgYW5jZXN0b3IgPSB0b3BMZXZlbFRhcmdldDtcblx0ICB3aGlsZSAoYW5jZXN0b3IpIHtcblx0ICAgIGJvb2tLZWVwaW5nLmFuY2VzdG9ycy5wdXNoKGFuY2VzdG9yKTtcblx0ICAgIGFuY2VzdG9yID0gZmluZFBhcmVudChhbmNlc3Rvcik7XG5cdCAgfVxuXHRcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IGJvb2tLZWVwaW5nLmFuY2VzdG9ycy5sZW5ndGg7IGkrKykge1xuXHQgICAgdG9wTGV2ZWxUYXJnZXQgPSBib29rS2VlcGluZy5hbmNlc3RvcnNbaV07XG5cdCAgICB2YXIgdG9wTGV2ZWxUYXJnZXRJRCA9IFJlYWN0TW91bnQuZ2V0SUQodG9wTGV2ZWxUYXJnZXQpIHx8ICcnO1xuXHQgICAgUmVhY3RFdmVudExpc3RlbmVyLl9oYW5kbGVUb3BMZXZlbChib29rS2VlcGluZy50b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElELCBib29rS2VlcGluZy5uYXRpdmVFdmVudCwgZ2V0RXZlbnRUYXJnZXQoYm9va0tlZXBpbmcubmF0aXZlRXZlbnQpKTtcblx0ICB9XG5cdH1cblx0XG5cdC8vIE5ldyBicm93c2VycyBoYXZlIGEgcGF0aCBhdHRyaWJ1dGUgb24gbmF0aXZlIGV2ZW50c1xuXHRmdW5jdGlvbiBoYW5kbGVUb3BMZXZlbFdpdGhQYXRoKGJvb2tLZWVwaW5nKSB7XG5cdCAgdmFyIHBhdGggPSBib29rS2VlcGluZy5uYXRpdmVFdmVudC5wYXRoO1xuXHQgIHZhciBjdXJyZW50TmF0aXZlVGFyZ2V0ID0gcGF0aFswXTtcblx0ICB2YXIgZXZlbnRzRmlyZWQgPSAwO1xuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgcGF0aC5sZW5ndGg7IGkrKykge1xuXHQgICAgdmFyIGN1cnJlbnRQYXRoRWxlbWVudCA9IHBhdGhbaV07XG5cdCAgICBpZiAoY3VycmVudFBhdGhFbGVtZW50Lm5vZGVUeXBlID09PSBET0NVTUVOVF9GUkFHTUVOVF9OT0RFX1RZUEUpIHtcblx0ICAgICAgY3VycmVudE5hdGl2ZVRhcmdldCA9IHBhdGhbaSArIDFdO1xuXHQgICAgfVxuXHQgICAgLy8gVE9ETzogc2xvd1xuXHQgICAgdmFyIHJlYWN0UGFyZW50ID0gUmVhY3RNb3VudC5nZXRGaXJzdFJlYWN0RE9NKGN1cnJlbnRQYXRoRWxlbWVudCk7XG5cdCAgICBpZiAocmVhY3RQYXJlbnQgPT09IGN1cnJlbnRQYXRoRWxlbWVudCkge1xuXHQgICAgICB2YXIgY3VycmVudFBhdGhFbGVtZW50SUQgPSBSZWFjdE1vdW50LmdldElEKGN1cnJlbnRQYXRoRWxlbWVudCk7XG5cdCAgICAgIHZhciBuZXdSb290SUQgPSBSZWFjdEluc3RhbmNlSGFuZGxlcy5nZXRSZWFjdFJvb3RJREZyb21Ob2RlSUQoY3VycmVudFBhdGhFbGVtZW50SUQpO1xuXHQgICAgICBib29rS2VlcGluZy5hbmNlc3RvcnMucHVzaChjdXJyZW50UGF0aEVsZW1lbnQpO1xuXHRcblx0ICAgICAgdmFyIHRvcExldmVsVGFyZ2V0SUQgPSBSZWFjdE1vdW50LmdldElEKGN1cnJlbnRQYXRoRWxlbWVudCkgfHwgJyc7XG5cdCAgICAgIGV2ZW50c0ZpcmVkKys7XG5cdCAgICAgIFJlYWN0RXZlbnRMaXN0ZW5lci5faGFuZGxlVG9wTGV2ZWwoYm9va0tlZXBpbmcudG9wTGV2ZWxUeXBlLCBjdXJyZW50UGF0aEVsZW1lbnQsIHRvcExldmVsVGFyZ2V0SUQsIGJvb2tLZWVwaW5nLm5hdGl2ZUV2ZW50LCBjdXJyZW50TmF0aXZlVGFyZ2V0KTtcblx0XG5cdCAgICAgIC8vIEp1bXAgdG8gdGhlIHJvb3Qgb2YgdGhpcyBSZWFjdCByZW5kZXIgdHJlZVxuXHQgICAgICB3aGlsZSAoY3VycmVudFBhdGhFbGVtZW50SUQgIT09IG5ld1Jvb3RJRCkge1xuXHQgICAgICAgIGkrKztcblx0ICAgICAgICBjdXJyZW50UGF0aEVsZW1lbnQgPSBwYXRoW2ldO1xuXHQgICAgICAgIGN1cnJlbnRQYXRoRWxlbWVudElEID0gUmVhY3RNb3VudC5nZXRJRChjdXJyZW50UGF0aEVsZW1lbnQpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIGlmIChldmVudHNGaXJlZCA9PT0gMCkge1xuXHQgICAgUmVhY3RFdmVudExpc3RlbmVyLl9oYW5kbGVUb3BMZXZlbChib29rS2VlcGluZy50b3BMZXZlbFR5cGUsIHdpbmRvdywgJycsIGJvb2tLZWVwaW5nLm5hdGl2ZUV2ZW50LCBnZXRFdmVudFRhcmdldChib29rS2VlcGluZy5uYXRpdmVFdmVudCkpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gc2Nyb2xsVmFsdWVNb25pdG9yKGNiKSB7XG5cdCAgdmFyIHNjcm9sbFBvc2l0aW9uID0gZ2V0VW5ib3VuZGVkU2Nyb2xsUG9zaXRpb24od2luZG93KTtcblx0ICBjYihzY3JvbGxQb3NpdGlvbik7XG5cdH1cblx0XG5cdHZhciBSZWFjdEV2ZW50TGlzdGVuZXIgPSB7XG5cdCAgX2VuYWJsZWQ6IHRydWUsXG5cdCAgX2hhbmRsZVRvcExldmVsOiBudWxsLFxuXHRcblx0ICBXSU5ET1dfSEFORExFOiBFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gPyB3aW5kb3cgOiBudWxsLFxuXHRcblx0ICBzZXRIYW5kbGVUb3BMZXZlbDogZnVuY3Rpb24gKGhhbmRsZVRvcExldmVsKSB7XG5cdCAgICBSZWFjdEV2ZW50TGlzdGVuZXIuX2hhbmRsZVRvcExldmVsID0gaGFuZGxlVG9wTGV2ZWw7XG5cdCAgfSxcblx0XG5cdCAgc2V0RW5hYmxlZDogZnVuY3Rpb24gKGVuYWJsZWQpIHtcblx0ICAgIFJlYWN0RXZlbnRMaXN0ZW5lci5fZW5hYmxlZCA9ICEhZW5hYmxlZDtcblx0ICB9LFxuXHRcblx0ICBpc0VuYWJsZWQ6IGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiBSZWFjdEV2ZW50TGlzdGVuZXIuX2VuYWJsZWQ7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogVHJhcHMgdG9wLWxldmVsIGV2ZW50cyBieSB1c2luZyBldmVudCBidWJibGluZy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFR5cGUgUmVjb3JkIGZyb20gYEV2ZW50Q29uc3RhbnRzYC5cblx0ICAgKiBAcGFyYW0ge3N0cmluZ30gaGFuZGxlckJhc2VOYW1lIEV2ZW50IG5hbWUgKGUuZy4gXCJjbGlja1wiKS5cblx0ICAgKiBAcGFyYW0ge29iamVjdH0gaGFuZGxlIEVsZW1lbnQgb24gd2hpY2ggdG8gYXR0YWNoIGxpc3RlbmVyLlxuXHQgICAqIEByZXR1cm4gez9vYmplY3R9IEFuIG9iamVjdCB3aXRoIGEgcmVtb3ZlIGZ1bmN0aW9uIHdoaWNoIHdpbGwgZm9yY2VmdWxseVxuXHQgICAqICAgICAgICAgICAgICAgICAgcmVtb3ZlIHRoZSBsaXN0ZW5lci5cblx0ICAgKiBAaW50ZXJuYWxcblx0ICAgKi9cblx0ICB0cmFwQnViYmxlZEV2ZW50OiBmdW5jdGlvbiAodG9wTGV2ZWxUeXBlLCBoYW5kbGVyQmFzZU5hbWUsIGhhbmRsZSkge1xuXHQgICAgdmFyIGVsZW1lbnQgPSBoYW5kbGU7XG5cdCAgICBpZiAoIWVsZW1lbnQpIHtcblx0ICAgICAgcmV0dXJuIG51bGw7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gRXZlbnRMaXN0ZW5lci5saXN0ZW4oZWxlbWVudCwgaGFuZGxlckJhc2VOYW1lLCBSZWFjdEV2ZW50TGlzdGVuZXIuZGlzcGF0Y2hFdmVudC5iaW5kKG51bGwsIHRvcExldmVsVHlwZSkpO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFRyYXBzIGEgdG9wLWxldmVsIGV2ZW50IGJ5IHVzaW5nIGV2ZW50IGNhcHR1cmluZy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFR5cGUgUmVjb3JkIGZyb20gYEV2ZW50Q29uc3RhbnRzYC5cblx0ICAgKiBAcGFyYW0ge3N0cmluZ30gaGFuZGxlckJhc2VOYW1lIEV2ZW50IG5hbWUgKGUuZy4gXCJjbGlja1wiKS5cblx0ICAgKiBAcGFyYW0ge29iamVjdH0gaGFuZGxlIEVsZW1lbnQgb24gd2hpY2ggdG8gYXR0YWNoIGxpc3RlbmVyLlxuXHQgICAqIEByZXR1cm4gez9vYmplY3R9IEFuIG9iamVjdCB3aXRoIGEgcmVtb3ZlIGZ1bmN0aW9uIHdoaWNoIHdpbGwgZm9yY2VmdWxseVxuXHQgICAqICAgICAgICAgICAgICAgICAgcmVtb3ZlIHRoZSBsaXN0ZW5lci5cblx0ICAgKiBAaW50ZXJuYWxcblx0ICAgKi9cblx0ICB0cmFwQ2FwdHVyZWRFdmVudDogZnVuY3Rpb24gKHRvcExldmVsVHlwZSwgaGFuZGxlckJhc2VOYW1lLCBoYW5kbGUpIHtcblx0ICAgIHZhciBlbGVtZW50ID0gaGFuZGxlO1xuXHQgICAgaWYgKCFlbGVtZW50KSB7XG5cdCAgICAgIHJldHVybiBudWxsO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIEV2ZW50TGlzdGVuZXIuY2FwdHVyZShlbGVtZW50LCBoYW5kbGVyQmFzZU5hbWUsIFJlYWN0RXZlbnRMaXN0ZW5lci5kaXNwYXRjaEV2ZW50LmJpbmQobnVsbCwgdG9wTGV2ZWxUeXBlKSk7XG5cdCAgfSxcblx0XG5cdCAgbW9uaXRvclNjcm9sbFZhbHVlOiBmdW5jdGlvbiAocmVmcmVzaCkge1xuXHQgICAgdmFyIGNhbGxiYWNrID0gc2Nyb2xsVmFsdWVNb25pdG9yLmJpbmQobnVsbCwgcmVmcmVzaCk7XG5cdCAgICBFdmVudExpc3RlbmVyLmxpc3Rlbih3aW5kb3csICdzY3JvbGwnLCBjYWxsYmFjayk7XG5cdCAgfSxcblx0XG5cdCAgZGlzcGF0Y2hFdmVudDogZnVuY3Rpb24gKHRvcExldmVsVHlwZSwgbmF0aXZlRXZlbnQpIHtcblx0ICAgIGlmICghUmVhY3RFdmVudExpc3RlbmVyLl9lbmFibGVkKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgYm9va0tlZXBpbmcgPSBUb3BMZXZlbENhbGxiYWNrQm9va0tlZXBpbmcuZ2V0UG9vbGVkKHRvcExldmVsVHlwZSwgbmF0aXZlRXZlbnQpO1xuXHQgICAgdHJ5IHtcblx0ICAgICAgLy8gRXZlbnQgcXVldWUgYmVpbmcgcHJvY2Vzc2VkIGluIHRoZSBzYW1lIGN5Y2xlIGFsbG93c1xuXHQgICAgICAvLyBgcHJldmVudERlZmF1bHRgLlxuXHQgICAgICBSZWFjdFVwZGF0ZXMuYmF0Y2hlZFVwZGF0ZXMoaGFuZGxlVG9wTGV2ZWxJbXBsLCBib29rS2VlcGluZyk7XG5cdCAgICB9IGZpbmFsbHkge1xuXHQgICAgICBUb3BMZXZlbENhbGxiYWNrQm9va0tlZXBpbmcucmVsZWFzZShib29rS2VlcGluZyk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBSZWFjdEV2ZW50TGlzdGVuZXI7XG5cbi8qKiovIH0pLFxuLyogMTE5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MpIHsvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICpcblx0ICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcblx0ICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuXHQgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblx0ICpcblx0ICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cdCAqXG5cdCAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcblx0ICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuXHQgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblx0ICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuXHQgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIEV2ZW50TGlzdGVuZXJcblx0ICogQHR5cGVjaGVja3Ncblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgZW1wdHlGdW5jdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHRcblx0LyoqXG5cdCAqIFVwc3RyZWFtIHZlcnNpb24gb2YgZXZlbnQgbGlzdGVuZXIuIERvZXMgbm90IHRha2UgaW50byBhY2NvdW50IHNwZWNpZmljXG5cdCAqIG5hdHVyZSBvZiBwbGF0Zm9ybS5cblx0ICovXG5cdHZhciBFdmVudExpc3RlbmVyID0ge1xuXHQgIC8qKlxuXHQgICAqIExpc3RlbiB0byBET00gZXZlbnRzIGR1cmluZyB0aGUgYnViYmxlIHBoYXNlLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtET01FdmVudFRhcmdldH0gdGFyZ2V0IERPTSBlbGVtZW50IHRvIHJlZ2lzdGVyIGxpc3RlbmVyIG9uLlxuXHQgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFR5cGUgRXZlbnQgdHlwZSwgZS5nLiAnY2xpY2snIG9yICdtb3VzZW92ZXInLlxuXHQgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIENhbGxiYWNrIGZ1bmN0aW9uLlxuXHQgICAqIEByZXR1cm4ge29iamVjdH0gT2JqZWN0IHdpdGggYSBgcmVtb3ZlYCBtZXRob2QuXG5cdCAgICovXG5cdCAgbGlzdGVuOiBmdW5jdGlvbiAodGFyZ2V0LCBldmVudFR5cGUsIGNhbGxiYWNrKSB7XG5cdCAgICBpZiAodGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIpIHtcblx0ICAgICAgdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBjYWxsYmFjaywgZmFsc2UpO1xuXHQgICAgICByZXR1cm4ge1xuXHQgICAgICAgIHJlbW92ZTogZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgdGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBjYWxsYmFjaywgZmFsc2UpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfTtcblx0ICAgIH0gZWxzZSBpZiAodGFyZ2V0LmF0dGFjaEV2ZW50KSB7XG5cdCAgICAgIHRhcmdldC5hdHRhY2hFdmVudCgnb24nICsgZXZlbnRUeXBlLCBjYWxsYmFjayk7XG5cdCAgICAgIHJldHVybiB7XG5cdCAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICB0YXJnZXQuZGV0YWNoRXZlbnQoJ29uJyArIGV2ZW50VHlwZSwgY2FsbGJhY2spO1xuXHQgICAgICAgIH1cblx0ICAgICAgfTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBMaXN0ZW4gdG8gRE9NIGV2ZW50cyBkdXJpbmcgdGhlIGNhcHR1cmUgcGhhc2UuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0RPTUV2ZW50VGFyZ2V0fSB0YXJnZXQgRE9NIGVsZW1lbnQgdG8gcmVnaXN0ZXIgbGlzdGVuZXIgb24uXG5cdCAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50VHlwZSBFdmVudCB0eXBlLCBlLmcuICdjbGljaycgb3IgJ21vdXNlb3ZlcicuXG5cdCAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sgQ2FsbGJhY2sgZnVuY3Rpb24uXG5cdCAgICogQHJldHVybiB7b2JqZWN0fSBPYmplY3Qgd2l0aCBhIGByZW1vdmVgIG1ldGhvZC5cblx0ICAgKi9cblx0ICBjYXB0dXJlOiBmdW5jdGlvbiAodGFyZ2V0LCBldmVudFR5cGUsIGNhbGxiYWNrKSB7XG5cdCAgICBpZiAodGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIpIHtcblx0ICAgICAgdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBjYWxsYmFjaywgdHJ1ZSk7XG5cdCAgICAgIHJldHVybiB7XG5cdCAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGNhbGxiYWNrLCB0cnVlKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH07XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0F0dGVtcHRlZCB0byBsaXN0ZW4gdG8gZXZlbnRzIGR1cmluZyB0aGUgY2FwdHVyZSBwaGFzZSBvbiBhICcgKyAnYnJvd3NlciB0aGF0IGRvZXMgbm90IHN1cHBvcnQgdGhlIGNhcHR1cmUgcGhhc2UuIFlvdXIgYXBwbGljYXRpb24gJyArICd3aWxsIG5vdCByZWNlaXZlIHNvbWUgZXZlbnRzLicpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB7XG5cdCAgICAgICAgcmVtb3ZlOiBlbXB0eUZ1bmN0aW9uXG5cdCAgICAgIH07XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgcmVnaXN0ZXJEZWZhdWx0OiBmdW5jdGlvbiAoKSB7fVxuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBFdmVudExpc3RlbmVyO1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg0KSkpXG5cbi8qKiovIH0pLFxuLyogMTIwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBnZXRVbmJvdW5kZWRTY3JvbGxQb3NpdGlvblxuXHQgKiBAdHlwZWNoZWNrc1xuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8qKlxuXHQgKiBHZXRzIHRoZSBzY3JvbGwgcG9zaXRpb24gb2YgdGhlIHN1cHBsaWVkIGVsZW1lbnQgb3Igd2luZG93LlxuXHQgKlxuXHQgKiBUaGUgcmV0dXJuIHZhbHVlcyBhcmUgdW5ib3VuZGVkLCB1bmxpa2UgYGdldFNjcm9sbFBvc2l0aW9uYC4gVGhpcyBtZWFucyB0aGV5XG5cdCAqIG1heSBiZSBuZWdhdGl2ZSBvciBleGNlZWQgdGhlIGVsZW1lbnQgYm91bmRhcmllcyAod2hpY2ggaXMgcG9zc2libGUgdXNpbmdcblx0ICogaW5lcnRpYWwgc2Nyb2xsaW5nKS5cblx0ICpcblx0ICogQHBhcmFtIHtET01XaW5kb3d8RE9NRWxlbWVudH0gc2Nyb2xsYWJsZVxuXHQgKiBAcmV0dXJuIHtvYmplY3R9IE1hcCB3aXRoIGB4YCBhbmQgYHlgIGtleXMuXG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRVbmJvdW5kZWRTY3JvbGxQb3NpdGlvbihzY3JvbGxhYmxlKSB7XG5cdCAgaWYgKHNjcm9sbGFibGUgPT09IHdpbmRvdykge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgeDogd2luZG93LnBhZ2VYT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0LFxuXHQgICAgICB5OiB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcFxuXHQgICAgfTtcblx0ICB9XG5cdCAgcmV0dXJuIHtcblx0ICAgIHg6IHNjcm9sbGFibGUuc2Nyb2xsTGVmdCxcblx0ICAgIHk6IHNjcm9sbGFibGUuc2Nyb2xsVG9wXG5cdCAgfTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBnZXRVbmJvdW5kZWRTY3JvbGxQb3NpdGlvbjtcblxuLyoqKi8gfSksXG4vKiAxMjEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0SW5qZWN0aW9uXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIERPTVByb3BlcnR5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMyk7XG5cdHZhciBFdmVudFBsdWdpbkh1YiA9IF9fd2VicGFja19yZXF1aXJlX18oMzEpO1xuXHR2YXIgUmVhY3RDb21wb25lbnRFbnZpcm9ubWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oNjQpO1xuXHR2YXIgUmVhY3RDbGFzcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIyKTtcblx0dmFyIFJlYWN0RW1wdHlDb21wb25lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY4KTtcblx0dmFyIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjkpO1xuXHR2YXIgUmVhY3ROYXRpdmVDb21wb25lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY5KTtcblx0dmFyIFJlYWN0UGVyZiA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHR2YXIgUmVhY3RSb290SW5kZXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2KTtcblx0dmFyIFJlYWN0VXBkYXRlcyA9IF9fd2VicGFja19yZXF1aXJlX18oNTQpO1xuXHRcblx0dmFyIFJlYWN0SW5qZWN0aW9uID0ge1xuXHQgIENvbXBvbmVudDogUmVhY3RDb21wb25lbnRFbnZpcm9ubWVudC5pbmplY3Rpb24sXG5cdCAgQ2xhc3M6IFJlYWN0Q2xhc3MuaW5qZWN0aW9uLFxuXHQgIERPTVByb3BlcnR5OiBET01Qcm9wZXJ0eS5pbmplY3Rpb24sXG5cdCAgRW1wdHlDb21wb25lbnQ6IFJlYWN0RW1wdHlDb21wb25lbnQuaW5qZWN0aW9uLFxuXHQgIEV2ZW50UGx1Z2luSHViOiBFdmVudFBsdWdpbkh1Yi5pbmplY3Rpb24sXG5cdCAgRXZlbnRFbWl0dGVyOiBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuaW5qZWN0aW9uLFxuXHQgIE5hdGl2ZUNvbXBvbmVudDogUmVhY3ROYXRpdmVDb21wb25lbnQuaW5qZWN0aW9uLFxuXHQgIFBlcmY6IFJlYWN0UGVyZi5pbmplY3Rpb24sXG5cdCAgUm9vdEluZGV4OiBSZWFjdFJvb3RJbmRleC5pbmplY3Rpb24sXG5cdCAgVXBkYXRlczogUmVhY3RVcGRhdGVzLmluamVjdGlvblxuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBSZWFjdEluamVjdGlvbjtcblxuLyoqKi8gfSksXG4vKiAxMjIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgey8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RDbGFzc1xuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBSZWFjdENvbXBvbmVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTIzKTtcblx0dmFyIFJlYWN0RWxlbWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oNDIpO1xuXHR2YXIgUmVhY3RQcm9wVHlwZUxvY2F0aW9ucyA9IF9fd2VicGFja19yZXF1aXJlX18oNjUpO1xuXHR2YXIgUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY2KTtcblx0dmFyIFJlYWN0Tm9vcFVwZGF0ZVF1ZXVlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjQpO1xuXHRcblx0dmFyIGFzc2lnbiA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpO1xuXHR2YXIgZW1wdHlPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU4KTtcblx0dmFyIGludmFyaWFudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHR2YXIga2V5TWlycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7XG5cdHZhciBrZXlPZiA9IF9fd2VicGFja19yZXF1aXJlX18oNzkpO1xuXHR2YXIgd2FybmluZyA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHRcblx0dmFyIE1JWElOU19LRVkgPSBrZXlPZih7IG1peGluczogbnVsbCB9KTtcblx0XG5cdC8qKlxuXHQgKiBQb2xpY2llcyB0aGF0IGRlc2NyaWJlIG1ldGhvZHMgaW4gYFJlYWN0Q2xhc3NJbnRlcmZhY2VgLlxuXHQgKi9cblx0dmFyIFNwZWNQb2xpY3kgPSBrZXlNaXJyb3Ioe1xuXHQgIC8qKlxuXHQgICAqIFRoZXNlIG1ldGhvZHMgbWF5IGJlIGRlZmluZWQgb25seSBvbmNlIGJ5IHRoZSBjbGFzcyBzcGVjaWZpY2F0aW9uIG9yIG1peGluLlxuXHQgICAqL1xuXHQgIERFRklORV9PTkNFOiBudWxsLFxuXHQgIC8qKlxuXHQgICAqIFRoZXNlIG1ldGhvZHMgbWF5IGJlIGRlZmluZWQgYnkgYm90aCB0aGUgY2xhc3Mgc3BlY2lmaWNhdGlvbiBhbmQgbWl4aW5zLlxuXHQgICAqIFN1YnNlcXVlbnQgZGVmaW5pdGlvbnMgd2lsbCBiZSBjaGFpbmVkLiBUaGVzZSBtZXRob2RzIG11c3QgcmV0dXJuIHZvaWQuXG5cdCAgICovXG5cdCAgREVGSU5FX01BTlk6IG51bGwsXG5cdCAgLyoqXG5cdCAgICogVGhlc2UgbWV0aG9kcyBhcmUgb3ZlcnJpZGluZyB0aGUgYmFzZSBjbGFzcy5cblx0ICAgKi9cblx0ICBPVkVSUklERV9CQVNFOiBudWxsLFxuXHQgIC8qKlxuXHQgICAqIFRoZXNlIG1ldGhvZHMgYXJlIHNpbWlsYXIgdG8gREVGSU5FX01BTlksIGV4Y2VwdCB3ZSBhc3N1bWUgdGhleSByZXR1cm5cblx0ICAgKiBvYmplY3RzLiBXZSB0cnkgdG8gbWVyZ2UgdGhlIGtleXMgb2YgdGhlIHJldHVybiB2YWx1ZXMgb2YgYWxsIHRoZSBtaXhlZCBpblxuXHQgICAqIGZ1bmN0aW9ucy4gSWYgdGhlcmUgaXMgYSBrZXkgY29uZmxpY3Qgd2UgdGhyb3cuXG5cdCAgICovXG5cdCAgREVGSU5FX01BTllfTUVSR0VEOiBudWxsXG5cdH0pO1xuXHRcblx0dmFyIGluamVjdGVkTWl4aW5zID0gW107XG5cdFxuXHR2YXIgd2FybmVkU2V0UHJvcHMgPSBmYWxzZTtcblx0ZnVuY3Rpb24gd2FyblNldFByb3BzKCkge1xuXHQgIGlmICghd2FybmVkU2V0UHJvcHMpIHtcblx0ICAgIHdhcm5lZFNldFByb3BzID0gdHJ1ZTtcblx0ICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnc2V0UHJvcHMoLi4uKSBhbmQgcmVwbGFjZVByb3BzKC4uLikgYXJlIGRlcHJlY2F0ZWQuICcgKyAnSW5zdGVhZCwgY2FsbCByZW5kZXIgYWdhaW4gYXQgdGhlIHRvcCBsZXZlbC4nKSA6IHVuZGVmaW5lZDtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb21wb3NpdGUgY29tcG9uZW50cyBhcmUgaGlnaGVyLWxldmVsIGNvbXBvbmVudHMgdGhhdCBjb21wb3NlIG90aGVyIGNvbXBvc2l0ZVxuXHQgKiBvciBuYXRpdmUgY29tcG9uZW50cy5cblx0ICpcblx0ICogVG8gY3JlYXRlIGEgbmV3IHR5cGUgb2YgYFJlYWN0Q2xhc3NgLCBwYXNzIGEgc3BlY2lmaWNhdGlvbiBvZlxuXHQgKiB5b3VyIG5ldyBjbGFzcyB0byBgUmVhY3QuY3JlYXRlQ2xhc3NgLiBUaGUgb25seSByZXF1aXJlbWVudCBvZiB5b3VyIGNsYXNzXG5cdCAqIHNwZWNpZmljYXRpb24gaXMgdGhhdCB5b3UgaW1wbGVtZW50IGEgYHJlbmRlcmAgbWV0aG9kLlxuXHQgKlxuXHQgKiAgIHZhciBNeUNvbXBvbmVudCA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcblx0ICogICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG5cdCAqICAgICAgIHJldHVybiA8ZGl2PkhlbGxvIFdvcmxkPC9kaXY+O1xuXHQgKiAgICAgfVxuXHQgKiAgIH0pO1xuXHQgKlxuXHQgKiBUaGUgY2xhc3Mgc3BlY2lmaWNhdGlvbiBzdXBwb3J0cyBhIHNwZWNpZmljIHByb3RvY29sIG9mIG1ldGhvZHMgdGhhdCBoYXZlXG5cdCAqIHNwZWNpYWwgbWVhbmluZyAoZS5nLiBgcmVuZGVyYCkuIFNlZSBgUmVhY3RDbGFzc0ludGVyZmFjZWAgZm9yXG5cdCAqIG1vcmUgdGhlIGNvbXByZWhlbnNpdmUgcHJvdG9jb2wuIEFueSBvdGhlciBwcm9wZXJ0aWVzIGFuZCBtZXRob2RzIGluIHRoZVxuXHQgKiBjbGFzcyBzcGVjaWZpY2F0aW9uIHdpbGwgYmUgYXZhaWxhYmxlIG9uIHRoZSBwcm90b3R5cGUuXG5cdCAqXG5cdCAqIEBpbnRlcmZhY2UgUmVhY3RDbGFzc0ludGVyZmFjZVxuXHQgKiBAaW50ZXJuYWxcblx0ICovXG5cdHZhciBSZWFjdENsYXNzSW50ZXJmYWNlID0ge1xuXHRcblx0ICAvKipcblx0ICAgKiBBbiBhcnJheSBvZiBNaXhpbiBvYmplY3RzIHRvIGluY2x1ZGUgd2hlbiBkZWZpbmluZyB5b3VyIGNvbXBvbmVudC5cblx0ICAgKlxuXHQgICAqIEB0eXBlIHthcnJheX1cblx0ICAgKiBAb3B0aW9uYWxcblx0ICAgKi9cblx0ICBtaXhpbnM6IFNwZWNQb2xpY3kuREVGSU5FX01BTlksXG5cdFxuXHQgIC8qKlxuXHQgICAqIEFuIG9iamVjdCBjb250YWluaW5nIHByb3BlcnRpZXMgYW5kIG1ldGhvZHMgdGhhdCBzaG91bGQgYmUgZGVmaW5lZCBvblxuXHQgICAqIHRoZSBjb21wb25lbnQncyBjb25zdHJ1Y3RvciBpbnN0ZWFkIG9mIGl0cyBwcm90b3R5cGUgKHN0YXRpYyBtZXRob2RzKS5cblx0ICAgKlxuXHQgICAqIEB0eXBlIHtvYmplY3R9XG5cdCAgICogQG9wdGlvbmFsXG5cdCAgICovXG5cdCAgc3RhdGljczogU3BlY1BvbGljeS5ERUZJTkVfTUFOWSxcblx0XG5cdCAgLyoqXG5cdCAgICogRGVmaW5pdGlvbiBvZiBwcm9wIHR5cGVzIGZvciB0aGlzIGNvbXBvbmVudC5cblx0ICAgKlxuXHQgICAqIEB0eXBlIHtvYmplY3R9XG5cdCAgICogQG9wdGlvbmFsXG5cdCAgICovXG5cdCAgcHJvcFR5cGVzOiBTcGVjUG9saWN5LkRFRklORV9NQU5ZLFxuXHRcblx0ICAvKipcblx0ICAgKiBEZWZpbml0aW9uIG9mIGNvbnRleHQgdHlwZXMgZm9yIHRoaXMgY29tcG9uZW50LlxuXHQgICAqXG5cdCAgICogQHR5cGUge29iamVjdH1cblx0ICAgKiBAb3B0aW9uYWxcblx0ICAgKi9cblx0ICBjb250ZXh0VHlwZXM6IFNwZWNQb2xpY3kuREVGSU5FX01BTlksXG5cdFxuXHQgIC8qKlxuXHQgICAqIERlZmluaXRpb24gb2YgY29udGV4dCB0eXBlcyB0aGlzIGNvbXBvbmVudCBzZXRzIGZvciBpdHMgY2hpbGRyZW4uXG5cdCAgICpcblx0ICAgKiBAdHlwZSB7b2JqZWN0fVxuXHQgICAqIEBvcHRpb25hbFxuXHQgICAqL1xuXHQgIGNoaWxkQ29udGV4dFR5cGVzOiBTcGVjUG9saWN5LkRFRklORV9NQU5ZLFxuXHRcblx0ICAvLyA9PT09IERlZmluaXRpb24gbWV0aG9kcyA9PT09XG5cdFxuXHQgIC8qKlxuXHQgICAqIEludm9rZWQgd2hlbiB0aGUgY29tcG9uZW50IGlzIG1vdW50ZWQuIFZhbHVlcyBpbiB0aGUgbWFwcGluZyB3aWxsIGJlIHNldCBvblxuXHQgICAqIGB0aGlzLnByb3BzYCBpZiB0aGF0IHByb3AgaXMgbm90IHNwZWNpZmllZCAoaS5lLiB1c2luZyBhbiBgaW5gIGNoZWNrKS5cblx0ICAgKlxuXHQgICAqIFRoaXMgbWV0aG9kIGlzIGludm9rZWQgYmVmb3JlIGBnZXRJbml0aWFsU3RhdGVgIGFuZCB0aGVyZWZvcmUgY2Fubm90IHJlbHlcblx0ICAgKiBvbiBgdGhpcy5zdGF0ZWAgb3IgdXNlIGB0aGlzLnNldFN0YXRlYC5cblx0ICAgKlxuXHQgICAqIEByZXR1cm4ge29iamVjdH1cblx0ICAgKiBAb3B0aW9uYWxcblx0ICAgKi9cblx0ICBnZXREZWZhdWx0UHJvcHM6IFNwZWNQb2xpY3kuREVGSU5FX01BTllfTUVSR0VELFxuXHRcblx0ICAvKipcblx0ICAgKiBJbnZva2VkIG9uY2UgYmVmb3JlIHRoZSBjb21wb25lbnQgaXMgbW91bnRlZC4gVGhlIHJldHVybiB2YWx1ZSB3aWxsIGJlIHVzZWRcblx0ICAgKiBhcyB0aGUgaW5pdGlhbCB2YWx1ZSBvZiBgdGhpcy5zdGF0ZWAuXG5cdCAgICpcblx0ICAgKiAgIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG5cdCAgICogICAgIHJldHVybiB7XG5cdCAgICogICAgICAgaXNPbjogZmFsc2UsXG5cdCAgICogICAgICAgZm9vQmF6OiBuZXcgQmF6Rm9vKClcblx0ICAgKiAgICAgfVxuXHQgICAqICAgfVxuXHQgICAqXG5cdCAgICogQHJldHVybiB7b2JqZWN0fVxuXHQgICAqIEBvcHRpb25hbFxuXHQgICAqL1xuXHQgIGdldEluaXRpYWxTdGF0ZTogU3BlY1BvbGljeS5ERUZJTkVfTUFOWV9NRVJHRUQsXG5cdFxuXHQgIC8qKlxuXHQgICAqIEByZXR1cm4ge29iamVjdH1cblx0ICAgKiBAb3B0aW9uYWxcblx0ICAgKi9cblx0ICBnZXRDaGlsZENvbnRleHQ6IFNwZWNQb2xpY3kuREVGSU5FX01BTllfTUVSR0VELFxuXHRcblx0ICAvKipcblx0ICAgKiBVc2VzIHByb3BzIGZyb20gYHRoaXMucHJvcHNgIGFuZCBzdGF0ZSBmcm9tIGB0aGlzLnN0YXRlYCB0byByZW5kZXIgdGhlXG5cdCAgICogc3RydWN0dXJlIG9mIHRoZSBjb21wb25lbnQuXG5cdCAgICpcblx0ICAgKiBObyBndWFyYW50ZWVzIGFyZSBtYWRlIGFib3V0IHdoZW4gb3IgaG93IG9mdGVuIHRoaXMgbWV0aG9kIGlzIGludm9rZWQsIHNvXG5cdCAgICogaXQgbXVzdCBub3QgaGF2ZSBzaWRlIGVmZmVjdHMuXG5cdCAgICpcblx0ICAgKiAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG5cdCAgICogICAgIHZhciBuYW1lID0gdGhpcy5wcm9wcy5uYW1lO1xuXHQgICAqICAgICByZXR1cm4gPGRpdj5IZWxsbywge25hbWV9ITwvZGl2Pjtcblx0ICAgKiAgIH1cblx0ICAgKlxuXHQgICAqIEByZXR1cm4ge1JlYWN0Q29tcG9uZW50fVxuXHQgICAqIEBub3NpZGVlZmZlY3RzXG5cdCAgICogQHJlcXVpcmVkXG5cdCAgICovXG5cdCAgcmVuZGVyOiBTcGVjUG9saWN5LkRFRklORV9PTkNFLFxuXHRcblx0ICAvLyA9PT09IERlbGVnYXRlIG1ldGhvZHMgPT09PVxuXHRcblx0ICAvKipcblx0ICAgKiBJbnZva2VkIHdoZW4gdGhlIGNvbXBvbmVudCBpcyBpbml0aWFsbHkgY3JlYXRlZCBhbmQgYWJvdXQgdG8gYmUgbW91bnRlZC5cblx0ICAgKiBUaGlzIG1heSBoYXZlIHNpZGUgZWZmZWN0cywgYnV0IGFueSBleHRlcm5hbCBzdWJzY3JpcHRpb25zIG9yIGRhdGEgY3JlYXRlZFxuXHQgICAqIGJ5IHRoaXMgbWV0aG9kIG11c3QgYmUgY2xlYW5lZCB1cCBpbiBgY29tcG9uZW50V2lsbFVubW91bnRgLlxuXHQgICAqXG5cdCAgICogQG9wdGlvbmFsXG5cdCAgICovXG5cdCAgY29tcG9uZW50V2lsbE1vdW50OiBTcGVjUG9saWN5LkRFRklORV9NQU5ZLFxuXHRcblx0ICAvKipcblx0ICAgKiBJbnZva2VkIHdoZW4gdGhlIGNvbXBvbmVudCBoYXMgYmVlbiBtb3VudGVkIGFuZCBoYXMgYSBET00gcmVwcmVzZW50YXRpb24uXG5cdCAgICogSG93ZXZlciwgdGhlcmUgaXMgbm8gZ3VhcmFudGVlIHRoYXQgdGhlIERPTSBub2RlIGlzIGluIHRoZSBkb2N1bWVudC5cblx0ICAgKlxuXHQgICAqIFVzZSB0aGlzIGFzIGFuIG9wcG9ydHVuaXR5IHRvIG9wZXJhdGUgb24gdGhlIERPTSB3aGVuIHRoZSBjb21wb25lbnQgaGFzXG5cdCAgICogYmVlbiBtb3VudGVkIChpbml0aWFsaXplZCBhbmQgcmVuZGVyZWQpIGZvciB0aGUgZmlyc3QgdGltZS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gcm9vdE5vZGUgRE9NIGVsZW1lbnQgcmVwcmVzZW50aW5nIHRoZSBjb21wb25lbnQuXG5cdCAgICogQG9wdGlvbmFsXG5cdCAgICovXG5cdCAgY29tcG9uZW50RGlkTW91bnQ6IFNwZWNQb2xpY3kuREVGSU5FX01BTlksXG5cdFxuXHQgIC8qKlxuXHQgICAqIEludm9rZWQgYmVmb3JlIHRoZSBjb21wb25lbnQgcmVjZWl2ZXMgbmV3IHByb3BzLlxuXHQgICAqXG5cdCAgICogVXNlIHRoaXMgYXMgYW4gb3Bwb3J0dW5pdHkgdG8gcmVhY3QgdG8gYSBwcm9wIHRyYW5zaXRpb24gYnkgdXBkYXRpbmcgdGhlXG5cdCAgICogc3RhdGUgdXNpbmcgYHRoaXMuc2V0U3RhdGVgLiBDdXJyZW50IHByb3BzIGFyZSBhY2Nlc3NlZCB2aWEgYHRoaXMucHJvcHNgLlxuXHQgICAqXG5cdCAgICogICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzOiBmdW5jdGlvbihuZXh0UHJvcHMsIG5leHRDb250ZXh0KSB7XG5cdCAgICogICAgIHRoaXMuc2V0U3RhdGUoe1xuXHQgICAqICAgICAgIGxpa2VzSW5jcmVhc2luZzogbmV4dFByb3BzLmxpa2VDb3VudCA+IHRoaXMucHJvcHMubGlrZUNvdW50XG5cdCAgICogICAgIH0pO1xuXHQgICAqICAgfVxuXHQgICAqXG5cdCAgICogTk9URTogVGhlcmUgaXMgbm8gZXF1aXZhbGVudCBgY29tcG9uZW50V2lsbFJlY2VpdmVTdGF0ZWAuIEFuIGluY29taW5nIHByb3Bcblx0ICAgKiB0cmFuc2l0aW9uIG1heSBjYXVzZSBhIHN0YXRlIGNoYW5nZSwgYnV0IHRoZSBvcHBvc2l0ZSBpcyBub3QgdHJ1ZS4gSWYgeW91XG5cdCAgICogbmVlZCBpdCwgeW91IGFyZSBwcm9iYWJseSBsb29raW5nIGZvciBgY29tcG9uZW50V2lsbFVwZGF0ZWAuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge29iamVjdH0gbmV4dFByb3BzXG5cdCAgICogQG9wdGlvbmFsXG5cdCAgICovXG5cdCAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wczogU3BlY1BvbGljeS5ERUZJTkVfTUFOWSxcblx0XG5cdCAgLyoqXG5cdCAgICogSW52b2tlZCB3aGlsZSBkZWNpZGluZyBpZiB0aGUgY29tcG9uZW50IHNob3VsZCBiZSB1cGRhdGVkIGFzIGEgcmVzdWx0IG9mXG5cdCAgICogcmVjZWl2aW5nIG5ldyBwcm9wcywgc3RhdGUgYW5kL29yIGNvbnRleHQuXG5cdCAgICpcblx0ICAgKiBVc2UgdGhpcyBhcyBhbiBvcHBvcnR1bml0eSB0byBgcmV0dXJuIGZhbHNlYCB3aGVuIHlvdSdyZSBjZXJ0YWluIHRoYXQgdGhlXG5cdCAgICogdHJhbnNpdGlvbiB0byB0aGUgbmV3IHByb3BzL3N0YXRlL2NvbnRleHQgd2lsbCBub3QgcmVxdWlyZSBhIGNvbXBvbmVudFxuXHQgICAqIHVwZGF0ZS5cblx0ICAgKlxuXHQgICAqICAgc2hvdWxkQ29tcG9uZW50VXBkYXRlOiBmdW5jdGlvbihuZXh0UHJvcHMsIG5leHRTdGF0ZSwgbmV4dENvbnRleHQpIHtcblx0ICAgKiAgICAgcmV0dXJuICFlcXVhbChuZXh0UHJvcHMsIHRoaXMucHJvcHMpIHx8XG5cdCAgICogICAgICAgIWVxdWFsKG5leHRTdGF0ZSwgdGhpcy5zdGF0ZSkgfHxcblx0ICAgKiAgICAgICAhZXF1YWwobmV4dENvbnRleHQsIHRoaXMuY29udGV4dCk7XG5cdCAgICogICB9XG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge29iamVjdH0gbmV4dFByb3BzXG5cdCAgICogQHBhcmFtIHs/b2JqZWN0fSBuZXh0U3RhdGVcblx0ICAgKiBAcGFyYW0gez9vYmplY3R9IG5leHRDb250ZXh0XG5cdCAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgY29tcG9uZW50IHNob3VsZCB1cGRhdGUuXG5cdCAgICogQG9wdGlvbmFsXG5cdCAgICovXG5cdCAgc2hvdWxkQ29tcG9uZW50VXBkYXRlOiBTcGVjUG9saWN5LkRFRklORV9PTkNFLFxuXHRcblx0ICAvKipcblx0ICAgKiBJbnZva2VkIHdoZW4gdGhlIGNvbXBvbmVudCBpcyBhYm91dCB0byB1cGRhdGUgZHVlIHRvIGEgdHJhbnNpdGlvbiBmcm9tXG5cdCAgICogYHRoaXMucHJvcHNgLCBgdGhpcy5zdGF0ZWAgYW5kIGB0aGlzLmNvbnRleHRgIHRvIGBuZXh0UHJvcHNgLCBgbmV4dFN0YXRlYFxuXHQgICAqIGFuZCBgbmV4dENvbnRleHRgLlxuXHQgICAqXG5cdCAgICogVXNlIHRoaXMgYXMgYW4gb3Bwb3J0dW5pdHkgdG8gcGVyZm9ybSBwcmVwYXJhdGlvbiBiZWZvcmUgYW4gdXBkYXRlIG9jY3Vycy5cblx0ICAgKlxuXHQgICAqIE5PVEU6IFlvdSAqKmNhbm5vdCoqIHVzZSBgdGhpcy5zZXRTdGF0ZSgpYCBpbiB0aGlzIG1ldGhvZC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7b2JqZWN0fSBuZXh0UHJvcHNcblx0ICAgKiBAcGFyYW0gez9vYmplY3R9IG5leHRTdGF0ZVxuXHQgICAqIEBwYXJhbSB7P29iamVjdH0gbmV4dENvbnRleHRcblx0ICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG5cdCAgICogQG9wdGlvbmFsXG5cdCAgICovXG5cdCAgY29tcG9uZW50V2lsbFVwZGF0ZTogU3BlY1BvbGljeS5ERUZJTkVfTUFOWSxcblx0XG5cdCAgLyoqXG5cdCAgICogSW52b2tlZCB3aGVuIHRoZSBjb21wb25lbnQncyBET00gcmVwcmVzZW50YXRpb24gaGFzIGJlZW4gdXBkYXRlZC5cblx0ICAgKlxuXHQgICAqIFVzZSB0aGlzIGFzIGFuIG9wcG9ydHVuaXR5IHRvIG9wZXJhdGUgb24gdGhlIERPTSB3aGVuIHRoZSBjb21wb25lbnQgaGFzXG5cdCAgICogYmVlbiB1cGRhdGVkLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtvYmplY3R9IHByZXZQcm9wc1xuXHQgICAqIEBwYXJhbSB7P29iamVjdH0gcHJldlN0YXRlXG5cdCAgICogQHBhcmFtIHs/b2JqZWN0fSBwcmV2Q29udGV4dFxuXHQgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gcm9vdE5vZGUgRE9NIGVsZW1lbnQgcmVwcmVzZW50aW5nIHRoZSBjb21wb25lbnQuXG5cdCAgICogQG9wdGlvbmFsXG5cdCAgICovXG5cdCAgY29tcG9uZW50RGlkVXBkYXRlOiBTcGVjUG9saWN5LkRFRklORV9NQU5ZLFxuXHRcblx0ICAvKipcblx0ICAgKiBJbnZva2VkIHdoZW4gdGhlIGNvbXBvbmVudCBpcyBhYm91dCB0byBiZSByZW1vdmVkIGZyb20gaXRzIHBhcmVudCBhbmQgaGF2ZVxuXHQgICAqIGl0cyBET00gcmVwcmVzZW50YXRpb24gZGVzdHJveWVkLlxuXHQgICAqXG5cdCAgICogVXNlIHRoaXMgYXMgYW4gb3Bwb3J0dW5pdHkgdG8gZGVhbGxvY2F0ZSBhbnkgZXh0ZXJuYWwgcmVzb3VyY2VzLlxuXHQgICAqXG5cdCAgICogTk9URTogVGhlcmUgaXMgbm8gYGNvbXBvbmVudERpZFVubW91bnRgIHNpbmNlIHlvdXIgY29tcG9uZW50IHdpbGwgaGF2ZSBiZWVuXG5cdCAgICogZGVzdHJveWVkIGJ5IHRoYXQgcG9pbnQuXG5cdCAgICpcblx0ICAgKiBAb3B0aW9uYWxcblx0ICAgKi9cblx0ICBjb21wb25lbnRXaWxsVW5tb3VudDogU3BlY1BvbGljeS5ERUZJTkVfTUFOWSxcblx0XG5cdCAgLy8gPT09PSBBZHZhbmNlZCBtZXRob2RzID09PT1cblx0XG5cdCAgLyoqXG5cdCAgICogVXBkYXRlcyB0aGUgY29tcG9uZW50J3MgY3VycmVudGx5IG1vdW50ZWQgRE9NIHJlcHJlc2VudGF0aW9uLlxuXHQgICAqXG5cdCAgICogQnkgZGVmYXVsdCwgdGhpcyBpbXBsZW1lbnRzIFJlYWN0J3MgcmVuZGVyaW5nIGFuZCByZWNvbmNpbGlhdGlvbiBhbGdvcml0aG0uXG5cdCAgICogU29waGlzdGljYXRlZCBjbGllbnRzIG1heSB3aXNoIHRvIG92ZXJyaWRlIHRoaXMuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG5cdCAgICogQGludGVybmFsXG5cdCAgICogQG92ZXJyaWRhYmxlXG5cdCAgICovXG5cdCAgdXBkYXRlQ29tcG9uZW50OiBTcGVjUG9saWN5Lk9WRVJSSURFX0JBU0Vcblx0XG5cdH07XG5cdFxuXHQvKipcblx0ICogTWFwcGluZyBmcm9tIGNsYXNzIHNwZWNpZmljYXRpb24ga2V5cyB0byBzcGVjaWFsIHByb2Nlc3NpbmcgZnVuY3Rpb25zLlxuXHQgKlxuXHQgKiBBbHRob3VnaCB0aGVzZSBhcmUgZGVjbGFyZWQgbGlrZSBpbnN0YW5jZSBwcm9wZXJ0aWVzIGluIHRoZSBzcGVjaWZpY2F0aW9uXG5cdCAqIHdoZW4gZGVmaW5pbmcgY2xhc3NlcyB1c2luZyBgUmVhY3QuY3JlYXRlQ2xhc3NgLCB0aGV5IGFyZSBhY3R1YWxseSBzdGF0aWNcblx0ICogYW5kIGFyZSBhY2Nlc3NpYmxlIG9uIHRoZSBjb25zdHJ1Y3RvciBpbnN0ZWFkIG9mIHRoZSBwcm90b3R5cGUuIERlc3BpdGVcblx0ICogYmVpbmcgc3RhdGljLCB0aGV5IG11c3QgYmUgZGVmaW5lZCBvdXRzaWRlIG9mIHRoZSBcInN0YXRpY3NcIiBrZXkgdW5kZXJcblx0ICogd2hpY2ggYWxsIG90aGVyIHN0YXRpYyBtZXRob2RzIGFyZSBkZWZpbmVkLlxuXHQgKi9cblx0dmFyIFJFU0VSVkVEX1NQRUNfS0VZUyA9IHtcblx0ICBkaXNwbGF5TmFtZTogZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBkaXNwbGF5TmFtZSkge1xuXHQgICAgQ29uc3RydWN0b3IuZGlzcGxheU5hbWUgPSBkaXNwbGF5TmFtZTtcblx0ICB9LFxuXHQgIG1peGluczogZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBtaXhpbnMpIHtcblx0ICAgIGlmIChtaXhpbnMpIHtcblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtaXhpbnMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBtaXhTcGVjSW50b0NvbXBvbmVudChDb25zdHJ1Y3RvciwgbWl4aW5zW2ldKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgY2hpbGRDb250ZXh0VHlwZXM6IGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgY2hpbGRDb250ZXh0VHlwZXMpIHtcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgIHZhbGlkYXRlVHlwZURlZihDb25zdHJ1Y3RvciwgY2hpbGRDb250ZXh0VHlwZXMsIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnMuY2hpbGRDb250ZXh0KTtcblx0ICAgIH1cblx0ICAgIENvbnN0cnVjdG9yLmNoaWxkQ29udGV4dFR5cGVzID0gYXNzaWduKHt9LCBDb25zdHJ1Y3Rvci5jaGlsZENvbnRleHRUeXBlcywgY2hpbGRDb250ZXh0VHlwZXMpO1xuXHQgIH0sXG5cdCAgY29udGV4dFR5cGVzOiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIGNvbnRleHRUeXBlcykge1xuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgdmFsaWRhdGVUeXBlRGVmKENvbnN0cnVjdG9yLCBjb250ZXh0VHlwZXMsIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnMuY29udGV4dCk7XG5cdCAgICB9XG5cdCAgICBDb25zdHJ1Y3Rvci5jb250ZXh0VHlwZXMgPSBhc3NpZ24oe30sIENvbnN0cnVjdG9yLmNvbnRleHRUeXBlcywgY29udGV4dFR5cGVzKTtcblx0ICB9LFxuXHQgIC8qKlxuXHQgICAqIFNwZWNpYWwgY2FzZSBnZXREZWZhdWx0UHJvcHMgd2hpY2ggc2hvdWxkIG1vdmUgaW50byBzdGF0aWNzIGJ1dCByZXF1aXJlc1xuXHQgICAqIGF1dG9tYXRpYyBtZXJnaW5nLlxuXHQgICAqL1xuXHQgIGdldERlZmF1bHRQcm9wczogZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBnZXREZWZhdWx0UHJvcHMpIHtcblx0ICAgIGlmIChDb25zdHJ1Y3Rvci5nZXREZWZhdWx0UHJvcHMpIHtcblx0ICAgICAgQ29uc3RydWN0b3IuZ2V0RGVmYXVsdFByb3BzID0gY3JlYXRlTWVyZ2VkUmVzdWx0RnVuY3Rpb24oQ29uc3RydWN0b3IuZ2V0RGVmYXVsdFByb3BzLCBnZXREZWZhdWx0UHJvcHMpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgQ29uc3RydWN0b3IuZ2V0RGVmYXVsdFByb3BzID0gZ2V0RGVmYXVsdFByb3BzO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgcHJvcFR5cGVzOiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3BUeXBlcykge1xuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgdmFsaWRhdGVUeXBlRGVmKENvbnN0cnVjdG9yLCBwcm9wVHlwZXMsIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnMucHJvcCk7XG5cdCAgICB9XG5cdCAgICBDb25zdHJ1Y3Rvci5wcm9wVHlwZXMgPSBhc3NpZ24oe30sIENvbnN0cnVjdG9yLnByb3BUeXBlcywgcHJvcFR5cGVzKTtcblx0ICB9LFxuXHQgIHN0YXRpY3M6IGZ1bmN0aW9uIChDb25zdHJ1Y3Rvciwgc3RhdGljcykge1xuXHQgICAgbWl4U3RhdGljU3BlY0ludG9Db21wb25lbnQoQ29uc3RydWN0b3IsIHN0YXRpY3MpO1xuXHQgIH0sXG5cdCAgYXV0b2JpbmQ6IGZ1bmN0aW9uICgpIHt9IH07XG5cdFxuXHQvLyBub29wXG5cdGZ1bmN0aW9uIHZhbGlkYXRlVHlwZURlZihDb25zdHJ1Y3RvciwgdHlwZURlZiwgbG9jYXRpb24pIHtcblx0ICBmb3IgKHZhciBwcm9wTmFtZSBpbiB0eXBlRGVmKSB7XG5cdCAgICBpZiAodHlwZURlZi5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkpIHtcblx0ICAgICAgLy8gdXNlIGEgd2FybmluZyBpbnN0ZWFkIG9mIGFuIGludmFyaWFudCBzbyBjb21wb25lbnRzXG5cdCAgICAgIC8vIGRvbid0IHNob3cgdXAgaW4gcHJvZCBidXQgbm90IGluIF9fREVWX19cblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcodHlwZW9mIHR5cGVEZWZbcHJvcE5hbWVdID09PSAnZnVuY3Rpb24nLCAnJXM6ICVzIHR5cGUgYCVzYCBpcyBpbnZhbGlkOyBpdCBtdXN0IGJlIGEgZnVuY3Rpb24sIHVzdWFsbHkgZnJvbSAnICsgJ1JlYWN0LlByb3BUeXBlcy4nLCBDb25zdHJ1Y3Rvci5kaXNwbGF5TmFtZSB8fCAnUmVhY3RDbGFzcycsIFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXSwgcHJvcE5hbWUpIDogdW5kZWZpbmVkO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gdmFsaWRhdGVNZXRob2RPdmVycmlkZShwcm90bywgbmFtZSkge1xuXHQgIHZhciBzcGVjUG9saWN5ID0gUmVhY3RDbGFzc0ludGVyZmFjZS5oYXNPd25Qcm9wZXJ0eShuYW1lKSA/IFJlYWN0Q2xhc3NJbnRlcmZhY2VbbmFtZV0gOiBudWxsO1xuXHRcblx0ICAvLyBEaXNhbGxvdyBvdmVycmlkaW5nIG9mIGJhc2UgY2xhc3MgbWV0aG9kcyB1bmxlc3MgZXhwbGljaXRseSBhbGxvd2VkLlxuXHQgIGlmIChSZWFjdENsYXNzTWl4aW4uaGFzT3duUHJvcGVydHkobmFtZSkpIHtcblx0ICAgICEoc3BlY1BvbGljeSA9PT0gU3BlY1BvbGljeS5PVkVSUklERV9CQVNFKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdENsYXNzSW50ZXJmYWNlOiBZb3UgYXJlIGF0dGVtcHRpbmcgdG8gb3ZlcnJpZGUgJyArICdgJXNgIGZyb20geW91ciBjbGFzcyBzcGVjaWZpY2F0aW9uLiBFbnN1cmUgdGhhdCB5b3VyIG1ldGhvZCBuYW1lcyAnICsgJ2RvIG5vdCBvdmVybGFwIHdpdGggUmVhY3QgbWV0aG9kcy4nLCBuYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdCAgfVxuXHRcblx0ICAvLyBEaXNhbGxvdyBkZWZpbmluZyBtZXRob2RzIG1vcmUgdGhhbiBvbmNlIHVubGVzcyBleHBsaWNpdGx5IGFsbG93ZWQuXG5cdCAgaWYgKHByb3RvLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG5cdCAgICAhKHNwZWNQb2xpY3kgPT09IFNwZWNQb2xpY3kuREVGSU5FX01BTlkgfHwgc3BlY1BvbGljeSA9PT0gU3BlY1BvbGljeS5ERUZJTkVfTUFOWV9NRVJHRUQpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0Q2xhc3NJbnRlcmZhY2U6IFlvdSBhcmUgYXR0ZW1wdGluZyB0byBkZWZpbmUgJyArICdgJXNgIG9uIHlvdXIgY29tcG9uZW50IG1vcmUgdGhhbiBvbmNlLiBUaGlzIGNvbmZsaWN0IG1heSBiZSBkdWUgJyArICd0byBhIG1peGluLicsIG5hbWUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBNaXhpbiBoZWxwZXIgd2hpY2ggaGFuZGxlcyBwb2xpY3kgdmFsaWRhdGlvbiBhbmQgcmVzZXJ2ZWRcblx0ICogc3BlY2lmaWNhdGlvbiBrZXlzIHdoZW4gYnVpbGRpbmcgUmVhY3QgY2xhc3NzZXMuXG5cdCAqL1xuXHRmdW5jdGlvbiBtaXhTcGVjSW50b0NvbXBvbmVudChDb25zdHJ1Y3Rvciwgc3BlYykge1xuXHQgIGlmICghc3BlYykge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0XG5cdCAgISh0eXBlb2Ygc3BlYyAhPT0gJ2Z1bmN0aW9uJykgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RDbGFzczogWW91XFwncmUgYXR0ZW1wdGluZyB0byAnICsgJ3VzZSBhIGNvbXBvbmVudCBjbGFzcyBhcyBhIG1peGluLiBJbnN0ZWFkLCBqdXN0IHVzZSBhIHJlZ3VsYXIgb2JqZWN0LicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0ICAhIVJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChzcGVjKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdENsYXNzOiBZb3VcXCdyZSBhdHRlbXB0aW5nIHRvICcgKyAndXNlIGEgY29tcG9uZW50IGFzIGEgbWl4aW4uIEluc3RlYWQsIGp1c3QgdXNlIGEgcmVndWxhciBvYmplY3QuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXHRcblx0ICB2YXIgcHJvdG8gPSBDb25zdHJ1Y3Rvci5wcm90b3R5cGU7XG5cdFxuXHQgIC8vIEJ5IGhhbmRsaW5nIG1peGlucyBiZWZvcmUgYW55IG90aGVyIHByb3BlcnRpZXMsIHdlIGVuc3VyZSB0aGUgc2FtZVxuXHQgIC8vIGNoYWluaW5nIG9yZGVyIGlzIGFwcGxpZWQgdG8gbWV0aG9kcyB3aXRoIERFRklORV9NQU5ZIHBvbGljeSwgd2hldGhlclxuXHQgIC8vIG1peGlucyBhcmUgbGlzdGVkIGJlZm9yZSBvciBhZnRlciB0aGVzZSBtZXRob2RzIGluIHRoZSBzcGVjLlxuXHQgIGlmIChzcGVjLmhhc093blByb3BlcnR5KE1JWElOU19LRVkpKSB7XG5cdCAgICBSRVNFUlZFRF9TUEVDX0tFWVMubWl4aW5zKENvbnN0cnVjdG9yLCBzcGVjLm1peGlucyk7XG5cdCAgfVxuXHRcblx0ICBmb3IgKHZhciBuYW1lIGluIHNwZWMpIHtcblx0ICAgIGlmICghc3BlYy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuXHQgICAgICBjb250aW51ZTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAobmFtZSA9PT0gTUlYSU5TX0tFWSkge1xuXHQgICAgICAvLyBXZSBoYXZlIGFscmVhZHkgaGFuZGxlZCBtaXhpbnMgaW4gYSBzcGVjaWFsIGNhc2UgYWJvdmUuXG5cdCAgICAgIGNvbnRpbnVlO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBwcm9wZXJ0eSA9IHNwZWNbbmFtZV07XG5cdCAgICB2YWxpZGF0ZU1ldGhvZE92ZXJyaWRlKHByb3RvLCBuYW1lKTtcblx0XG5cdCAgICBpZiAoUkVTRVJWRURfU1BFQ19LRVlTLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG5cdCAgICAgIFJFU0VSVkVEX1NQRUNfS0VZU1tuYW1lXShDb25zdHJ1Y3RvciwgcHJvcGVydHkpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgLy8gU2V0dXAgbWV0aG9kcyBvbiBwcm90b3R5cGU6XG5cdCAgICAgIC8vIFRoZSBmb2xsb3dpbmcgbWVtYmVyIG1ldGhvZHMgc2hvdWxkIG5vdCBiZSBhdXRvbWF0aWNhbGx5IGJvdW5kOlxuXHQgICAgICAvLyAxLiBFeHBlY3RlZCBSZWFjdENsYXNzIG1ldGhvZHMgKGluIHRoZSBcImludGVyZmFjZVwiKS5cblx0ICAgICAgLy8gMi4gT3ZlcnJpZGRlbiBtZXRob2RzICh0aGF0IHdlcmUgbWl4ZWQgaW4pLlxuXHQgICAgICB2YXIgaXNSZWFjdENsYXNzTWV0aG9kID0gUmVhY3RDbGFzc0ludGVyZmFjZS5oYXNPd25Qcm9wZXJ0eShuYW1lKTtcblx0ICAgICAgdmFyIGlzQWxyZWFkeURlZmluZWQgPSBwcm90by5oYXNPd25Qcm9wZXJ0eShuYW1lKTtcblx0ICAgICAgdmFyIGlzRnVuY3Rpb24gPSB0eXBlb2YgcHJvcGVydHkgPT09ICdmdW5jdGlvbic7XG5cdCAgICAgIHZhciBzaG91bGRBdXRvQmluZCA9IGlzRnVuY3Rpb24gJiYgIWlzUmVhY3RDbGFzc01ldGhvZCAmJiAhaXNBbHJlYWR5RGVmaW5lZCAmJiBzcGVjLmF1dG9iaW5kICE9PSBmYWxzZTtcblx0XG5cdCAgICAgIGlmIChzaG91bGRBdXRvQmluZCkge1xuXHQgICAgICAgIGlmICghcHJvdG8uX19yZWFjdEF1dG9CaW5kTWFwKSB7XG5cdCAgICAgICAgICBwcm90by5fX3JlYWN0QXV0b0JpbmRNYXAgPSB7fTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcHJvdG8uX19yZWFjdEF1dG9CaW5kTWFwW25hbWVdID0gcHJvcGVydHk7XG5cdCAgICAgICAgcHJvdG9bbmFtZV0gPSBwcm9wZXJ0eTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBpZiAoaXNBbHJlYWR5RGVmaW5lZCkge1xuXHQgICAgICAgICAgdmFyIHNwZWNQb2xpY3kgPSBSZWFjdENsYXNzSW50ZXJmYWNlW25hbWVdO1xuXHRcblx0ICAgICAgICAgIC8vIFRoZXNlIGNhc2VzIHNob3VsZCBhbHJlYWR5IGJlIGNhdWdodCBieSB2YWxpZGF0ZU1ldGhvZE92ZXJyaWRlLlxuXHQgICAgICAgICAgIShpc1JlYWN0Q2xhc3NNZXRob2QgJiYgKHNwZWNQb2xpY3kgPT09IFNwZWNQb2xpY3kuREVGSU5FX01BTllfTUVSR0VEIHx8IHNwZWNQb2xpY3kgPT09IFNwZWNQb2xpY3kuREVGSU5FX01BTlkpKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdENsYXNzOiBVbmV4cGVjdGVkIHNwZWMgcG9saWN5ICVzIGZvciBrZXkgJXMgJyArICd3aGVuIG1peGluZyBpbiBjb21wb25lbnQgc3BlY3MuJywgc3BlY1BvbGljeSwgbmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXHRcblx0ICAgICAgICAgIC8vIEZvciBtZXRob2RzIHdoaWNoIGFyZSBkZWZpbmVkIG1vcmUgdGhhbiBvbmNlLCBjYWxsIHRoZSBleGlzdGluZ1xuXHQgICAgICAgICAgLy8gbWV0aG9kcyBiZWZvcmUgY2FsbGluZyB0aGUgbmV3IHByb3BlcnR5LCBtZXJnaW5nIGlmIGFwcHJvcHJpYXRlLlxuXHQgICAgICAgICAgaWYgKHNwZWNQb2xpY3kgPT09IFNwZWNQb2xpY3kuREVGSU5FX01BTllfTUVSR0VEKSB7XG5cdCAgICAgICAgICAgIHByb3RvW25hbWVdID0gY3JlYXRlTWVyZ2VkUmVzdWx0RnVuY3Rpb24ocHJvdG9bbmFtZV0sIHByb3BlcnR5KTtcblx0ICAgICAgICAgIH0gZWxzZSBpZiAoc3BlY1BvbGljeSA9PT0gU3BlY1BvbGljeS5ERUZJTkVfTUFOWSkge1xuXHQgICAgICAgICAgICBwcm90b1tuYW1lXSA9IGNyZWF0ZUNoYWluZWRGdW5jdGlvbihwcm90b1tuYW1lXSwgcHJvcGVydHkpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBwcm90b1tuYW1lXSA9IHByb3BlcnR5O1xuXHQgICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgICAgICAgLy8gQWRkIHZlcmJvc2UgZGlzcGxheU5hbWUgdG8gdGhlIGZ1bmN0aW9uLCB3aGljaCBoZWxwcyB3aGVuIGxvb2tpbmdcblx0ICAgICAgICAgICAgLy8gYXQgcHJvZmlsaW5nIHRvb2xzLlxuXHQgICAgICAgICAgICBpZiAodHlwZW9mIHByb3BlcnR5ID09PSAnZnVuY3Rpb24nICYmIHNwZWMuZGlzcGxheU5hbWUpIHtcblx0ICAgICAgICAgICAgICBwcm90b1tuYW1lXS5kaXNwbGF5TmFtZSA9IHNwZWMuZGlzcGxheU5hbWUgKyAnXycgKyBuYW1lO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBtaXhTdGF0aWNTcGVjSW50b0NvbXBvbmVudChDb25zdHJ1Y3Rvciwgc3RhdGljcykge1xuXHQgIGlmICghc3RhdGljcykge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICBmb3IgKHZhciBuYW1lIGluIHN0YXRpY3MpIHtcblx0ICAgIHZhciBwcm9wZXJ0eSA9IHN0YXRpY3NbbmFtZV07XG5cdCAgICBpZiAoIXN0YXRpY3MuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcblx0ICAgICAgY29udGludWU7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGlzUmVzZXJ2ZWQgPSAobmFtZSBpbiBSRVNFUlZFRF9TUEVDX0tFWVMpO1xuXHQgICAgISFpc1Jlc2VydmVkID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0Q2xhc3M6IFlvdSBhcmUgYXR0ZW1wdGluZyB0byBkZWZpbmUgYSByZXNlcnZlZCAnICsgJ3Byb3BlcnR5LCBgJXNgLCB0aGF0IHNob3VsZG5cXCd0IGJlIG9uIHRoZSBcInN0YXRpY3NcIiBrZXkuIERlZmluZSBpdCAnICsgJ2FzIGFuIGluc3RhbmNlIHByb3BlcnR5IGluc3RlYWQ7IGl0IHdpbGwgc3RpbGwgYmUgYWNjZXNzaWJsZSBvbiB0aGUgJyArICdjb25zdHJ1Y3Rvci4nLCBuYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdFxuXHQgICAgdmFyIGlzSW5oZXJpdGVkID0gKG5hbWUgaW4gQ29uc3RydWN0b3IpO1xuXHQgICAgISFpc0luaGVyaXRlZCA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdENsYXNzOiBZb3UgYXJlIGF0dGVtcHRpbmcgdG8gZGVmaW5lICcgKyAnYCVzYCBvbiB5b3VyIGNvbXBvbmVudCBtb3JlIHRoYW4gb25jZS4gVGhpcyBjb25mbGljdCBtYXkgYmUgJyArICdkdWUgdG8gYSBtaXhpbi4nLCBuYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdCAgICBDb25zdHJ1Y3RvcltuYW1lXSA9IHByb3BlcnR5O1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIE1lcmdlIHR3byBvYmplY3RzLCBidXQgdGhyb3cgaWYgYm90aCBjb250YWluIHRoZSBzYW1lIGtleS5cblx0ICpcblx0ICogQHBhcmFtIHtvYmplY3R9IG9uZSBUaGUgZmlyc3Qgb2JqZWN0LCB3aGljaCBpcyBtdXRhdGVkLlxuXHQgKiBAcGFyYW0ge29iamVjdH0gdHdvIFRoZSBzZWNvbmQgb2JqZWN0XG5cdCAqIEByZXR1cm4ge29iamVjdH0gb25lIGFmdGVyIGl0IGhhcyBiZWVuIG11dGF0ZWQgdG8gY29udGFpbiBldmVyeXRoaW5nIGluIHR3by5cblx0ICovXG5cdGZ1bmN0aW9uIG1lcmdlSW50b1dpdGhOb0R1cGxpY2F0ZUtleXMob25lLCB0d28pIHtcblx0ICAhKG9uZSAmJiB0d28gJiYgdHlwZW9mIG9uZSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHR3byA9PT0gJ29iamVjdCcpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ21lcmdlSW50b1dpdGhOb0R1cGxpY2F0ZUtleXMoKTogQ2Fubm90IG1lcmdlIG5vbi1vYmplY3RzLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0XG5cdCAgZm9yICh2YXIga2V5IGluIHR3bykge1xuXHQgICAgaWYgKHR3by5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG5cdCAgICAgICEob25lW2tleV0gPT09IHVuZGVmaW5lZCkgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnbWVyZ2VJbnRvV2l0aE5vRHVwbGljYXRlS2V5cygpOiAnICsgJ1RyaWVkIHRvIG1lcmdlIHR3byBvYmplY3RzIHdpdGggdGhlIHNhbWUga2V5OiBgJXNgLiBUaGlzIGNvbmZsaWN0ICcgKyAnbWF5IGJlIGR1ZSB0byBhIG1peGluOyBpbiBwYXJ0aWN1bGFyLCB0aGlzIG1heSBiZSBjYXVzZWQgYnkgdHdvICcgKyAnZ2V0SW5pdGlhbFN0YXRlKCkgb3IgZ2V0RGVmYXVsdFByb3BzKCkgbWV0aG9kcyByZXR1cm5pbmcgb2JqZWN0cyAnICsgJ3dpdGggY2xhc2hpbmcga2V5cy4nLCBrZXkpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0ICAgICAgb25lW2tleV0gPSB0d29ba2V5XTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIG9uZTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGludm9rZXMgdHdvIGZ1bmN0aW9ucyBhbmQgbWVyZ2VzIHRoZWlyIHJldHVybiB2YWx1ZXMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb259IG9uZSBGdW5jdGlvbiB0byBpbnZva2UgZmlyc3QuXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb259IHR3byBGdW5jdGlvbiB0byBpbnZva2Ugc2Vjb25kLlxuXHQgKiBAcmV0dXJuIHtmdW5jdGlvbn0gRnVuY3Rpb24gdGhhdCBpbnZva2VzIHRoZSB0d28gYXJndW1lbnQgZnVuY3Rpb25zLlxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0ZnVuY3Rpb24gY3JlYXRlTWVyZ2VkUmVzdWx0RnVuY3Rpb24ob25lLCB0d28pIHtcblx0ICByZXR1cm4gZnVuY3Rpb24gbWVyZ2VkUmVzdWx0KCkge1xuXHQgICAgdmFyIGEgPSBvbmUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgIHZhciBiID0gdHdvLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICBpZiAoYSA9PSBudWxsKSB7XG5cdCAgICAgIHJldHVybiBiO1xuXHQgICAgfSBlbHNlIGlmIChiID09IG51bGwpIHtcblx0ICAgICAgcmV0dXJuIGE7XG5cdCAgICB9XG5cdCAgICB2YXIgYyA9IHt9O1xuXHQgICAgbWVyZ2VJbnRvV2l0aE5vRHVwbGljYXRlS2V5cyhjLCBhKTtcblx0ICAgIG1lcmdlSW50b1dpdGhOb0R1cGxpY2F0ZUtleXMoYywgYik7XG5cdCAgICByZXR1cm4gYztcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgaW52b2tlcyB0d28gZnVuY3Rpb25zIGFuZCBpZ25vcmVzIHRoZWlyIHJldHVybiB2YWxlcy5cblx0ICpcblx0ICogQHBhcmFtIHtmdW5jdGlvbn0gb25lIEZ1bmN0aW9uIHRvIGludm9rZSBmaXJzdC5cblx0ICogQHBhcmFtIHtmdW5jdGlvbn0gdHdvIEZ1bmN0aW9uIHRvIGludm9rZSBzZWNvbmQuXG5cdCAqIEByZXR1cm4ge2Z1bmN0aW9ufSBGdW5jdGlvbiB0aGF0IGludm9rZXMgdGhlIHR3byBhcmd1bWVudCBmdW5jdGlvbnMuXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHRmdW5jdGlvbiBjcmVhdGVDaGFpbmVkRnVuY3Rpb24ob25lLCB0d28pIHtcblx0ICByZXR1cm4gZnVuY3Rpb24gY2hhaW5lZEZ1bmN0aW9uKCkge1xuXHQgICAgb25lLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICB0d28uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogQmluZHMgYSBtZXRob2QgdG8gdGhlIGNvbXBvbmVudC5cblx0ICpcblx0ICogQHBhcmFtIHtvYmplY3R9IGNvbXBvbmVudCBDb21wb25lbnQgd2hvc2UgbWV0aG9kIGlzIGdvaW5nIHRvIGJlIGJvdW5kLlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBtZXRob2QgTWV0aG9kIHRvIGJlIGJvdW5kLlxuXHQgKiBAcmV0dXJuIHtmdW5jdGlvbn0gVGhlIGJvdW5kIG1ldGhvZC5cblx0ICovXG5cdGZ1bmN0aW9uIGJpbmRBdXRvQmluZE1ldGhvZChjb21wb25lbnQsIG1ldGhvZCkge1xuXHQgIHZhciBib3VuZE1ldGhvZCA9IG1ldGhvZC5iaW5kKGNvbXBvbmVudCk7XG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgIGJvdW5kTWV0aG9kLl9fcmVhY3RCb3VuZENvbnRleHQgPSBjb21wb25lbnQ7XG5cdCAgICBib3VuZE1ldGhvZC5fX3JlYWN0Qm91bmRNZXRob2QgPSBtZXRob2Q7XG5cdCAgICBib3VuZE1ldGhvZC5fX3JlYWN0Qm91bmRBcmd1bWVudHMgPSBudWxsO1xuXHQgICAgdmFyIGNvbXBvbmVudE5hbWUgPSBjb21wb25lbnQuY29uc3RydWN0b3IuZGlzcGxheU5hbWU7XG5cdCAgICB2YXIgX2JpbmQgPSBib3VuZE1ldGhvZC5iaW5kO1xuXHQgICAgLyogZXNsaW50LWRpc2FibGUgYmxvY2stc2NvcGVkLXZhciwgbm8tdW5kZWYgKi9cblx0ICAgIGJvdW5kTWV0aG9kLmJpbmQgPSBmdW5jdGlvbiAobmV3VGhpcykge1xuXHQgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcblx0ICAgICAgICBhcmdzW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gVXNlciBpcyB0cnlpbmcgdG8gYmluZCgpIGFuIGF1dG9ib3VuZCBtZXRob2Q7IHdlIGVmZmVjdGl2ZWx5IHdpbGxcblx0ICAgICAgLy8gaWdub3JlIHRoZSB2YWx1ZSBvZiBcInRoaXNcIiB0aGF0IHRoZSB1c2VyIGlzIHRyeWluZyB0byB1c2UsIHNvXG5cdCAgICAgIC8vIGxldCdzIHdhcm4uXG5cdCAgICAgIGlmIChuZXdUaGlzICE9PSBjb21wb25lbnQgJiYgbmV3VGhpcyAhPT0gbnVsbCkge1xuXHQgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnYmluZCgpOiBSZWFjdCBjb21wb25lbnQgbWV0aG9kcyBtYXkgb25seSBiZSBib3VuZCB0byB0aGUgJyArICdjb21wb25lbnQgaW5zdGFuY2UuIFNlZSAlcycsIGNvbXBvbmVudE5hbWUpIDogdW5kZWZpbmVkO1xuXHQgICAgICB9IGVsc2UgaWYgKCFhcmdzLmxlbmd0aCkge1xuXHQgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnYmluZCgpOiBZb3UgYXJlIGJpbmRpbmcgYSBjb21wb25lbnQgbWV0aG9kIHRvIHRoZSBjb21wb25lbnQuICcgKyAnUmVhY3QgZG9lcyB0aGlzIGZvciB5b3UgYXV0b21hdGljYWxseSBpbiBhIGhpZ2gtcGVyZm9ybWFuY2UgJyArICd3YXksIHNvIHlvdSBjYW4gc2FmZWx5IHJlbW92ZSB0aGlzIGNhbGwuIFNlZSAlcycsIGNvbXBvbmVudE5hbWUpIDogdW5kZWZpbmVkO1xuXHQgICAgICAgIHJldHVybiBib3VuZE1ldGhvZDtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgcmVib3VuZE1ldGhvZCA9IF9iaW5kLmFwcGx5KGJvdW5kTWV0aG9kLCBhcmd1bWVudHMpO1xuXHQgICAgICByZWJvdW5kTWV0aG9kLl9fcmVhY3RCb3VuZENvbnRleHQgPSBjb21wb25lbnQ7XG5cdCAgICAgIHJlYm91bmRNZXRob2QuX19yZWFjdEJvdW5kTWV0aG9kID0gbWV0aG9kO1xuXHQgICAgICByZWJvdW5kTWV0aG9kLl9fcmVhY3RCb3VuZEFyZ3VtZW50cyA9IGFyZ3M7XG5cdCAgICAgIHJldHVybiByZWJvdW5kTWV0aG9kO1xuXHQgICAgICAvKiBlc2xpbnQtZW5hYmxlICovXG5cdCAgICB9O1xuXHQgIH1cblx0ICByZXR1cm4gYm91bmRNZXRob2Q7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBCaW5kcyBhbGwgYXV0by1ib3VuZCBtZXRob2RzIGluIGEgY29tcG9uZW50LlxuXHQgKlxuXHQgKiBAcGFyYW0ge29iamVjdH0gY29tcG9uZW50IENvbXBvbmVudCB3aG9zZSBtZXRob2QgaXMgZ29pbmcgdG8gYmUgYm91bmQuXG5cdCAqL1xuXHRmdW5jdGlvbiBiaW5kQXV0b0JpbmRNZXRob2RzKGNvbXBvbmVudCkge1xuXHQgIGZvciAodmFyIGF1dG9CaW5kS2V5IGluIGNvbXBvbmVudC5fX3JlYWN0QXV0b0JpbmRNYXApIHtcblx0ICAgIGlmIChjb21wb25lbnQuX19yZWFjdEF1dG9CaW5kTWFwLmhhc093blByb3BlcnR5KGF1dG9CaW5kS2V5KSkge1xuXHQgICAgICB2YXIgbWV0aG9kID0gY29tcG9uZW50Ll9fcmVhY3RBdXRvQmluZE1hcFthdXRvQmluZEtleV07XG5cdCAgICAgIGNvbXBvbmVudFthdXRvQmluZEtleV0gPSBiaW5kQXV0b0JpbmRNZXRob2QoY29tcG9uZW50LCBtZXRob2QpO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEFkZCBtb3JlIHRvIHRoZSBSZWFjdENsYXNzIGJhc2UgY2xhc3MuIFRoZXNlIGFyZSBhbGwgbGVnYWN5IGZlYXR1cmVzIGFuZFxuXHQgKiB0aGVyZWZvcmUgbm90IGFscmVhZHkgcGFydCBvZiB0aGUgbW9kZXJuIFJlYWN0Q29tcG9uZW50LlxuXHQgKi9cblx0dmFyIFJlYWN0Q2xhc3NNaXhpbiA9IHtcblx0XG5cdCAgLyoqXG5cdCAgICogVE9ETzogVGhpcyB3aWxsIGJlIGRlcHJlY2F0ZWQgYmVjYXVzZSBzdGF0ZSBzaG91bGQgYWx3YXlzIGtlZXAgYSBjb25zaXN0ZW50XG5cdCAgICogdHlwZSBzaWduYXR1cmUgYW5kIHRoZSBvbmx5IHVzZSBjYXNlIGZvciB0aGlzLCBpcyB0byBhdm9pZCB0aGF0LlxuXHQgICAqL1xuXHQgIHJlcGxhY2VTdGF0ZTogZnVuY3Rpb24gKG5ld1N0YXRlLCBjYWxsYmFjaykge1xuXHQgICAgdGhpcy51cGRhdGVyLmVucXVldWVSZXBsYWNlU3RhdGUodGhpcywgbmV3U3RhdGUpO1xuXHQgICAgaWYgKGNhbGxiYWNrKSB7XG5cdCAgICAgIHRoaXMudXBkYXRlci5lbnF1ZXVlQ2FsbGJhY2sodGhpcywgY2FsbGJhY2spO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIENoZWNrcyB3aGV0aGVyIG9yIG5vdCB0aGlzIGNvbXBvc2l0ZSBjb21wb25lbnQgaXMgbW91bnRlZC5cblx0ICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIG1vdW50ZWQsIGZhbHNlIG90aGVyd2lzZS5cblx0ICAgKiBAcHJvdGVjdGVkXG5cdCAgICogQGZpbmFsXG5cdCAgICovXG5cdCAgaXNNb3VudGVkOiBmdW5jdGlvbiAoKSB7XG5cdCAgICByZXR1cm4gdGhpcy51cGRhdGVyLmlzTW91bnRlZCh0aGlzKTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBTZXRzIGEgc3Vic2V0IG9mIHRoZSBwcm9wcy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7b2JqZWN0fSBwYXJ0aWFsUHJvcHMgU3Vic2V0IG9mIHRoZSBuZXh0IHByb3BzLlxuXHQgICAqIEBwYXJhbSB7P2Z1bmN0aW9ufSBjYWxsYmFjayBDYWxsZWQgYWZ0ZXIgcHJvcHMgYXJlIHVwZGF0ZWQuXG5cdCAgICogQGZpbmFsXG5cdCAgICogQHB1YmxpY1xuXHQgICAqIEBkZXByZWNhdGVkXG5cdCAgICovXG5cdCAgc2V0UHJvcHM6IGZ1bmN0aW9uIChwYXJ0aWFsUHJvcHMsIGNhbGxiYWNrKSB7XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICB3YXJuU2V0UHJvcHMoKTtcblx0ICAgIH1cblx0ICAgIHRoaXMudXBkYXRlci5lbnF1ZXVlU2V0UHJvcHModGhpcywgcGFydGlhbFByb3BzKTtcblx0ICAgIGlmIChjYWxsYmFjaykge1xuXHQgICAgICB0aGlzLnVwZGF0ZXIuZW5xdWV1ZUNhbGxiYWNrKHRoaXMsIGNhbGxiYWNrKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBSZXBsYWNlIGFsbCB0aGUgcHJvcHMuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge29iamVjdH0gbmV3UHJvcHMgU3Vic2V0IG9mIHRoZSBuZXh0IHByb3BzLlxuXHQgICAqIEBwYXJhbSB7P2Z1bmN0aW9ufSBjYWxsYmFjayBDYWxsZWQgYWZ0ZXIgcHJvcHMgYXJlIHVwZGF0ZWQuXG5cdCAgICogQGZpbmFsXG5cdCAgICogQHB1YmxpY1xuXHQgICAqIEBkZXByZWNhdGVkXG5cdCAgICovXG5cdCAgcmVwbGFjZVByb3BzOiBmdW5jdGlvbiAobmV3UHJvcHMsIGNhbGxiYWNrKSB7XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICB3YXJuU2V0UHJvcHMoKTtcblx0ICAgIH1cblx0ICAgIHRoaXMudXBkYXRlci5lbnF1ZXVlUmVwbGFjZVByb3BzKHRoaXMsIG5ld1Byb3BzKTtcblx0ICAgIGlmIChjYWxsYmFjaykge1xuXHQgICAgICB0aGlzLnVwZGF0ZXIuZW5xdWV1ZUNhbGxiYWNrKHRoaXMsIGNhbGxiYWNrKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgUmVhY3RDbGFzc0NvbXBvbmVudCA9IGZ1bmN0aW9uICgpIHt9O1xuXHRhc3NpZ24oUmVhY3RDbGFzc0NvbXBvbmVudC5wcm90b3R5cGUsIFJlYWN0Q29tcG9uZW50LnByb3RvdHlwZSwgUmVhY3RDbGFzc01peGluKTtcblx0XG5cdC8qKlxuXHQgKiBNb2R1bGUgZm9yIGNyZWF0aW5nIGNvbXBvc2l0ZSBjb21wb25lbnRzLlxuXHQgKlxuXHQgKiBAY2xhc3MgUmVhY3RDbGFzc1xuXHQgKi9cblx0dmFyIFJlYWN0Q2xhc3MgPSB7XG5cdFxuXHQgIC8qKlxuXHQgICAqIENyZWF0ZXMgYSBjb21wb3NpdGUgY29tcG9uZW50IGNsYXNzIGdpdmVuIGEgY2xhc3Mgc3BlY2lmaWNhdGlvbi5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7b2JqZWN0fSBzcGVjIENsYXNzIHNwZWNpZmljYXRpb24gKHdoaWNoIG11c3QgZGVmaW5lIGByZW5kZXJgKS5cblx0ICAgKiBAcmV0dXJuIHtmdW5jdGlvbn0gQ29tcG9uZW50IGNvbnN0cnVjdG9yIGZ1bmN0aW9uLlxuXHQgICAqIEBwdWJsaWNcblx0ICAgKi9cblx0ICBjcmVhdGVDbGFzczogZnVuY3Rpb24gKHNwZWMpIHtcblx0ICAgIHZhciBDb25zdHJ1Y3RvciA9IGZ1bmN0aW9uIChwcm9wcywgY29udGV4dCwgdXBkYXRlcikge1xuXHQgICAgICAvLyBUaGlzIGNvbnN0cnVjdG9yIGlzIG92ZXJyaWRkZW4gYnkgbW9ja3MuIFRoZSBhcmd1bWVudCBpcyB1c2VkXG5cdCAgICAgIC8vIGJ5IG1vY2tzIHRvIGFzc2VydCBvbiB3aGF0IGdldHMgbW91bnRlZC5cblx0XG5cdCAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcodGhpcyBpbnN0YW5jZW9mIENvbnN0cnVjdG9yLCAnU29tZXRoaW5nIGlzIGNhbGxpbmcgYSBSZWFjdCBjb21wb25lbnQgZGlyZWN0bHkuIFVzZSBhIGZhY3Rvcnkgb3IgJyArICdKU1ggaW5zdGVhZC4gU2VlOiBodHRwczovL2ZiLm1lL3JlYWN0LWxlZ2FjeWZhY3RvcnknKSA6IHVuZGVmaW5lZDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gV2lyZSB1cCBhdXRvLWJpbmRpbmdcblx0ICAgICAgaWYgKHRoaXMuX19yZWFjdEF1dG9CaW5kTWFwKSB7XG5cdCAgICAgICAgYmluZEF1dG9CaW5kTWV0aG9kcyh0aGlzKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdGhpcy5wcm9wcyA9IHByb3BzO1xuXHQgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuXHQgICAgICB0aGlzLnJlZnMgPSBlbXB0eU9iamVjdDtcblx0ICAgICAgdGhpcy51cGRhdGVyID0gdXBkYXRlciB8fCBSZWFjdE5vb3BVcGRhdGVRdWV1ZTtcblx0XG5cdCAgICAgIHRoaXMuc3RhdGUgPSBudWxsO1xuXHRcblx0ICAgICAgLy8gUmVhY3RDbGFzc2VzIGRvZXNuJ3QgaGF2ZSBjb25zdHJ1Y3RvcnMuIEluc3RlYWQsIHRoZXkgdXNlIHRoZVxuXHQgICAgICAvLyBnZXRJbml0aWFsU3RhdGUgYW5kIGNvbXBvbmVudFdpbGxNb3VudCBtZXRob2RzIGZvciBpbml0aWFsaXphdGlvbi5cblx0XG5cdCAgICAgIHZhciBpbml0aWFsU3RhdGUgPSB0aGlzLmdldEluaXRpYWxTdGF0ZSA/IHRoaXMuZ2V0SW5pdGlhbFN0YXRlKCkgOiBudWxsO1xuXHQgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgIC8vIFdlIGFsbG93IGF1dG8tbW9ja3MgdG8gcHJvY2VlZCBhcyBpZiB0aGV5J3JlIHJldHVybmluZyBudWxsLlxuXHQgICAgICAgIGlmICh0eXBlb2YgaW5pdGlhbFN0YXRlID09PSAndW5kZWZpbmVkJyAmJiB0aGlzLmdldEluaXRpYWxTdGF0ZS5faXNNb2NrRnVuY3Rpb24pIHtcblx0ICAgICAgICAgIC8vIFRoaXMgaXMgcHJvYmFibHkgYmFkIHByYWN0aWNlLiBDb25zaWRlciB3YXJuaW5nIGhlcmUgYW5kXG5cdCAgICAgICAgICAvLyBkZXByZWNhdGluZyB0aGlzIGNvbnZlbmllbmNlLlxuXHQgICAgICAgICAgaW5pdGlhbFN0YXRlID0gbnVsbDtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgISh0eXBlb2YgaW5pdGlhbFN0YXRlID09PSAnb2JqZWN0JyAmJiAhQXJyYXkuaXNBcnJheShpbml0aWFsU3RhdGUpKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICclcy5nZXRJbml0aWFsU3RhdGUoKTogbXVzdCByZXR1cm4gYW4gb2JqZWN0IG9yIG51bGwnLCBDb25zdHJ1Y3Rvci5kaXNwbGF5TmFtZSB8fCAnUmVhY3RDb21wb3NpdGVDb21wb25lbnQnKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdFxuXHQgICAgICB0aGlzLnN0YXRlID0gaW5pdGlhbFN0YXRlO1xuXHQgICAgfTtcblx0ICAgIENvbnN0cnVjdG9yLnByb3RvdHlwZSA9IG5ldyBSZWFjdENsYXNzQ29tcG9uZW50KCk7XG5cdCAgICBDb25zdHJ1Y3Rvci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDb25zdHJ1Y3Rvcjtcblx0XG5cdCAgICBpbmplY3RlZE1peGlucy5mb3JFYWNoKG1peFNwZWNJbnRvQ29tcG9uZW50LmJpbmQobnVsbCwgQ29uc3RydWN0b3IpKTtcblx0XG5cdCAgICBtaXhTcGVjSW50b0NvbXBvbmVudChDb25zdHJ1Y3Rvciwgc3BlYyk7XG5cdFxuXHQgICAgLy8gSW5pdGlhbGl6ZSB0aGUgZGVmYXVsdFByb3BzIHByb3BlcnR5IGFmdGVyIGFsbCBtaXhpbnMgaGF2ZSBiZWVuIG1lcmdlZC5cblx0ICAgIGlmIChDb25zdHJ1Y3Rvci5nZXREZWZhdWx0UHJvcHMpIHtcblx0ICAgICAgQ29uc3RydWN0b3IuZGVmYXVsdFByb3BzID0gQ29uc3RydWN0b3IuZ2V0RGVmYXVsdFByb3BzKCk7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgLy8gVGhpcyBpcyBhIHRhZyB0byBpbmRpY2F0ZSB0aGF0IHRoZSB1c2Ugb2YgdGhlc2UgbWV0aG9kIG5hbWVzIGlzIG9rLFxuXHQgICAgICAvLyBzaW5jZSBpdCdzIHVzZWQgd2l0aCBjcmVhdGVDbGFzcy4gSWYgaXQncyBub3QsIHRoZW4gaXQncyBsaWtlbHkgYVxuXHQgICAgICAvLyBtaXN0YWtlIHNvIHdlJ2xsIHdhcm4geW91IHRvIHVzZSB0aGUgc3RhdGljIHByb3BlcnR5LCBwcm9wZXJ0eVxuXHQgICAgICAvLyBpbml0aWFsaXplciBvciBjb25zdHJ1Y3RvciByZXNwZWN0aXZlbHkuXG5cdCAgICAgIGlmIChDb25zdHJ1Y3Rvci5nZXREZWZhdWx0UHJvcHMpIHtcblx0ICAgICAgICBDb25zdHJ1Y3Rvci5nZXREZWZhdWx0UHJvcHMuaXNSZWFjdENsYXNzQXBwcm92ZWQgPSB7fTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoQ29uc3RydWN0b3IucHJvdG90eXBlLmdldEluaXRpYWxTdGF0ZSkge1xuXHQgICAgICAgIENvbnN0cnVjdG9yLnByb3RvdHlwZS5nZXRJbml0aWFsU3RhdGUuaXNSZWFjdENsYXNzQXBwcm92ZWQgPSB7fTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgICFDb25zdHJ1Y3Rvci5wcm90b3R5cGUucmVuZGVyID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2NyZWF0ZUNsYXNzKC4uLik6IENsYXNzIHNwZWNpZmljYXRpb24gbXVzdCBpbXBsZW1lbnQgYSBgcmVuZGVyYCBtZXRob2QuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXHRcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKCFDb25zdHJ1Y3Rvci5wcm90b3R5cGUuY29tcG9uZW50U2hvdWxkVXBkYXRlLCAnJXMgaGFzIGEgbWV0aG9kIGNhbGxlZCAnICsgJ2NvbXBvbmVudFNob3VsZFVwZGF0ZSgpLiBEaWQgeW91IG1lYW4gc2hvdWxkQ29tcG9uZW50VXBkYXRlKCk/ICcgKyAnVGhlIG5hbWUgaXMgcGhyYXNlZCBhcyBhIHF1ZXN0aW9uIGJlY2F1c2UgdGhlIGZ1bmN0aW9uIGlzICcgKyAnZXhwZWN0ZWQgdG8gcmV0dXJuIGEgdmFsdWUuJywgc3BlYy5kaXNwbGF5TmFtZSB8fCAnQSBjb21wb25lbnQnKSA6IHVuZGVmaW5lZDtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoIUNvbnN0cnVjdG9yLnByb3RvdHlwZS5jb21wb25lbnRXaWxsUmVjaWV2ZVByb3BzLCAnJXMgaGFzIGEgbWV0aG9kIGNhbGxlZCAnICsgJ2NvbXBvbmVudFdpbGxSZWNpZXZlUHJvcHMoKS4gRGlkIHlvdSBtZWFuIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMoKT8nLCBzcGVjLmRpc3BsYXlOYW1lIHx8ICdBIGNvbXBvbmVudCcpIDogdW5kZWZpbmVkO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIFJlZHVjZSB0aW1lIHNwZW50IGRvaW5nIGxvb2t1cHMgYnkgc2V0dGluZyB0aGVzZSBvbiB0aGUgcHJvdG90eXBlLlxuXHQgICAgZm9yICh2YXIgbWV0aG9kTmFtZSBpbiBSZWFjdENsYXNzSW50ZXJmYWNlKSB7XG5cdCAgICAgIGlmICghQ29uc3RydWN0b3IucHJvdG90eXBlW21ldGhvZE5hbWVdKSB7XG5cdCAgICAgICAgQ29uc3RydWN0b3IucHJvdG90eXBlW21ldGhvZE5hbWVdID0gbnVsbDtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBDb25zdHJ1Y3Rvcjtcblx0ICB9LFxuXHRcblx0ICBpbmplY3Rpb246IHtcblx0ICAgIGluamVjdE1peGluOiBmdW5jdGlvbiAobWl4aW4pIHtcblx0ICAgICAgaW5qZWN0ZWRNaXhpbnMucHVzaChtaXhpbik7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gUmVhY3RDbGFzcztcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oNCkpKVxuXG4vKioqLyB9KSxcbi8qIDEyMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzKSB7LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBSZWFjdENvbXBvbmVudFxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBSZWFjdE5vb3BVcGRhdGVRdWV1ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTI0KTtcblx0XG5cdHZhciBjYW5EZWZpbmVQcm9wZXJ0eSA9IF9fd2VicGFja19yZXF1aXJlX18oNDMpO1xuXHR2YXIgZW1wdHlPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU4KTtcblx0dmFyIGludmFyaWFudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHR2YXIgd2FybmluZyA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHRcblx0LyoqXG5cdCAqIEJhc2UgY2xhc3MgaGVscGVycyBmb3IgdGhlIHVwZGF0aW5nIHN0YXRlIG9mIGEgY29tcG9uZW50LlxuXHQgKi9cblx0ZnVuY3Rpb24gUmVhY3RDb21wb25lbnQocHJvcHMsIGNvbnRleHQsIHVwZGF0ZXIpIHtcblx0ICB0aGlzLnByb3BzID0gcHJvcHM7XG5cdCAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcblx0ICB0aGlzLnJlZnMgPSBlbXB0eU9iamVjdDtcblx0ICAvLyBXZSBpbml0aWFsaXplIHRoZSBkZWZhdWx0IHVwZGF0ZXIgYnV0IHRoZSByZWFsIG9uZSBnZXRzIGluamVjdGVkIGJ5IHRoZVxuXHQgIC8vIHJlbmRlcmVyLlxuXHQgIHRoaXMudXBkYXRlciA9IHVwZGF0ZXIgfHwgUmVhY3ROb29wVXBkYXRlUXVldWU7XG5cdH1cblx0XG5cdFJlYWN0Q29tcG9uZW50LnByb3RvdHlwZS5pc1JlYWN0Q29tcG9uZW50ID0ge307XG5cdFxuXHQvKipcblx0ICogU2V0cyBhIHN1YnNldCBvZiB0aGUgc3RhdGUuIEFsd2F5cyB1c2UgdGhpcyB0byBtdXRhdGVcblx0ICogc3RhdGUuIFlvdSBzaG91bGQgdHJlYXQgYHRoaXMuc3RhdGVgIGFzIGltbXV0YWJsZS5cblx0ICpcblx0ICogVGhlcmUgaXMgbm8gZ3VhcmFudGVlIHRoYXQgYHRoaXMuc3RhdGVgIHdpbGwgYmUgaW1tZWRpYXRlbHkgdXBkYXRlZCwgc29cblx0ICogYWNjZXNzaW5nIGB0aGlzLnN0YXRlYCBhZnRlciBjYWxsaW5nIHRoaXMgbWV0aG9kIG1heSByZXR1cm4gdGhlIG9sZCB2YWx1ZS5cblx0ICpcblx0ICogVGhlcmUgaXMgbm8gZ3VhcmFudGVlIHRoYXQgY2FsbHMgdG8gYHNldFN0YXRlYCB3aWxsIHJ1biBzeW5jaHJvbm91c2x5LFxuXHQgKiBhcyB0aGV5IG1heSBldmVudHVhbGx5IGJlIGJhdGNoZWQgdG9nZXRoZXIuICBZb3UgY2FuIHByb3ZpZGUgYW4gb3B0aW9uYWxcblx0ICogY2FsbGJhY2sgdGhhdCB3aWxsIGJlIGV4ZWN1dGVkIHdoZW4gdGhlIGNhbGwgdG8gc2V0U3RhdGUgaXMgYWN0dWFsbHlcblx0ICogY29tcGxldGVkLlxuXHQgKlxuXHQgKiBXaGVuIGEgZnVuY3Rpb24gaXMgcHJvdmlkZWQgdG8gc2V0U3RhdGUsIGl0IHdpbGwgYmUgY2FsbGVkIGF0IHNvbWUgcG9pbnQgaW5cblx0ICogdGhlIGZ1dHVyZSAobm90IHN5bmNocm9ub3VzbHkpLiBJdCB3aWxsIGJlIGNhbGxlZCB3aXRoIHRoZSB1cCB0byBkYXRlXG5cdCAqIGNvbXBvbmVudCBhcmd1bWVudHMgKHN0YXRlLCBwcm9wcywgY29udGV4dCkuIFRoZXNlIHZhbHVlcyBjYW4gYmUgZGlmZmVyZW50XG5cdCAqIGZyb20gdGhpcy4qIGJlY2F1c2UgeW91ciBmdW5jdGlvbiBtYXkgYmUgY2FsbGVkIGFmdGVyIHJlY2VpdmVQcm9wcyBidXQgYmVmb3JlXG5cdCAqIHNob3VsZENvbXBvbmVudFVwZGF0ZSwgYW5kIHRoaXMgbmV3IHN0YXRlLCBwcm9wcywgYW5kIGNvbnRleHQgd2lsbCBub3QgeWV0IGJlXG5cdCAqIGFzc2lnbmVkIHRvIHRoaXMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7b2JqZWN0fGZ1bmN0aW9ufSBwYXJ0aWFsU3RhdGUgTmV4dCBwYXJ0aWFsIHN0YXRlIG9yIGZ1bmN0aW9uIHRvXG5cdCAqICAgICAgICBwcm9kdWNlIG5leHQgcGFydGlhbCBzdGF0ZSB0byBiZSBtZXJnZWQgd2l0aCBjdXJyZW50IHN0YXRlLlxuXHQgKiBAcGFyYW0gez9mdW5jdGlvbn0gY2FsbGJhY2sgQ2FsbGVkIGFmdGVyIHN0YXRlIGlzIHVwZGF0ZWQuXG5cdCAqIEBmaW5hbFxuXHQgKiBAcHJvdGVjdGVkXG5cdCAqL1xuXHRSZWFjdENvbXBvbmVudC5wcm90b3R5cGUuc2V0U3RhdGUgPSBmdW5jdGlvbiAocGFydGlhbFN0YXRlLCBjYWxsYmFjaykge1xuXHQgICEodHlwZW9mIHBhcnRpYWxTdGF0ZSA9PT0gJ29iamVjdCcgfHwgdHlwZW9mIHBhcnRpYWxTdGF0ZSA9PT0gJ2Z1bmN0aW9uJyB8fCBwYXJ0aWFsU3RhdGUgPT0gbnVsbCkgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnc2V0U3RhdGUoLi4uKTogdGFrZXMgYW4gb2JqZWN0IG9mIHN0YXRlIHZhcmlhYmxlcyB0byB1cGRhdGUgb3IgYSAnICsgJ2Z1bmN0aW9uIHdoaWNoIHJldHVybnMgYW4gb2JqZWN0IG9mIHN0YXRlIHZhcmlhYmxlcy4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKHBhcnRpYWxTdGF0ZSAhPSBudWxsLCAnc2V0U3RhdGUoLi4uKTogWW91IHBhc3NlZCBhbiB1bmRlZmluZWQgb3IgbnVsbCBzdGF0ZSBvYmplY3Q7ICcgKyAnaW5zdGVhZCwgdXNlIGZvcmNlVXBkYXRlKCkuJykgOiB1bmRlZmluZWQ7XG5cdCAgfVxuXHQgIHRoaXMudXBkYXRlci5lbnF1ZXVlU2V0U3RhdGUodGhpcywgcGFydGlhbFN0YXRlKTtcblx0ICBpZiAoY2FsbGJhY2spIHtcblx0ICAgIHRoaXMudXBkYXRlci5lbnF1ZXVlQ2FsbGJhY2sodGhpcywgY2FsbGJhY2spO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBGb3JjZXMgYW4gdXBkYXRlLiBUaGlzIHNob3VsZCBvbmx5IGJlIGludm9rZWQgd2hlbiBpdCBpcyBrbm93biB3aXRoXG5cdCAqIGNlcnRhaW50eSB0aGF0IHdlIGFyZSAqKm5vdCoqIGluIGEgRE9NIHRyYW5zYWN0aW9uLlxuXHQgKlxuXHQgKiBZb3UgbWF5IHdhbnQgdG8gY2FsbCB0aGlzIHdoZW4geW91IGtub3cgdGhhdCBzb21lIGRlZXBlciBhc3BlY3Qgb2YgdGhlXG5cdCAqIGNvbXBvbmVudCdzIHN0YXRlIGhhcyBjaGFuZ2VkIGJ1dCBgc2V0U3RhdGVgIHdhcyBub3QgY2FsbGVkLlxuXHQgKlxuXHQgKiBUaGlzIHdpbGwgbm90IGludm9rZSBgc2hvdWxkQ29tcG9uZW50VXBkYXRlYCwgYnV0IGl0IHdpbGwgaW52b2tlXG5cdCAqIGBjb21wb25lbnRXaWxsVXBkYXRlYCBhbmQgYGNvbXBvbmVudERpZFVwZGF0ZWAuXG5cdCAqXG5cdCAqIEBwYXJhbSB7P2Z1bmN0aW9ufSBjYWxsYmFjayBDYWxsZWQgYWZ0ZXIgdXBkYXRlIGlzIGNvbXBsZXRlLlxuXHQgKiBAZmluYWxcblx0ICogQHByb3RlY3RlZFxuXHQgKi9cblx0UmVhY3RDb21wb25lbnQucHJvdG90eXBlLmZvcmNlVXBkYXRlID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG5cdCAgdGhpcy51cGRhdGVyLmVucXVldWVGb3JjZVVwZGF0ZSh0aGlzKTtcblx0ICBpZiAoY2FsbGJhY2spIHtcblx0ICAgIHRoaXMudXBkYXRlci5lbnF1ZXVlQ2FsbGJhY2sodGhpcywgY2FsbGJhY2spO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBEZXByZWNhdGVkIEFQSXMuIFRoZXNlIEFQSXMgdXNlZCB0byBleGlzdCBvbiBjbGFzc2ljIFJlYWN0IGNsYXNzZXMgYnV0IHNpbmNlXG5cdCAqIHdlIHdvdWxkIGxpa2UgdG8gZGVwcmVjYXRlIHRoZW0sIHdlJ3JlIG5vdCBnb2luZyB0byBtb3ZlIHRoZW0gb3ZlciB0byB0aGlzXG5cdCAqIG1vZGVybiBiYXNlIGNsYXNzLiBJbnN0ZWFkLCB3ZSBkZWZpbmUgYSBnZXR0ZXIgdGhhdCB3YXJucyBpZiBpdCdzIGFjY2Vzc2VkLlxuXHQgKi9cblx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICB2YXIgZGVwcmVjYXRlZEFQSXMgPSB7XG5cdCAgICBnZXRET01Ob2RlOiBbJ2dldERPTU5vZGUnLCAnVXNlIFJlYWN0RE9NLmZpbmRET01Ob2RlKGNvbXBvbmVudCkgaW5zdGVhZC4nXSxcblx0ICAgIGlzTW91bnRlZDogWydpc01vdW50ZWQnLCAnSW5zdGVhZCwgbWFrZSBzdXJlIHRvIGNsZWFuIHVwIHN1YnNjcmlwdGlvbnMgYW5kIHBlbmRpbmcgcmVxdWVzdHMgaW4gJyArICdjb21wb25lbnRXaWxsVW5tb3VudCB0byBwcmV2ZW50IG1lbW9yeSBsZWFrcy4nXSxcblx0ICAgIHJlcGxhY2VQcm9wczogWydyZXBsYWNlUHJvcHMnLCAnSW5zdGVhZCwgY2FsbCByZW5kZXIgYWdhaW4gYXQgdGhlIHRvcCBsZXZlbC4nXSxcblx0ICAgIHJlcGxhY2VTdGF0ZTogWydyZXBsYWNlU3RhdGUnLCAnUmVmYWN0b3IgeW91ciBjb2RlIHRvIHVzZSBzZXRTdGF0ZSBpbnN0ZWFkIChzZWUgJyArICdodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QvaXNzdWVzLzMyMzYpLiddLFxuXHQgICAgc2V0UHJvcHM6IFsnc2V0UHJvcHMnLCAnSW5zdGVhZCwgY2FsbCByZW5kZXIgYWdhaW4gYXQgdGhlIHRvcCBsZXZlbC4nXVxuXHQgIH07XG5cdCAgdmFyIGRlZmluZURlcHJlY2F0aW9uV2FybmluZyA9IGZ1bmN0aW9uIChtZXRob2ROYW1lLCBpbmZvKSB7XG5cdCAgICBpZiAoY2FuRGVmaW5lUHJvcGVydHkpIHtcblx0ICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlYWN0Q29tcG9uZW50LnByb3RvdHlwZSwgbWV0aG9kTmFtZSwge1xuXHQgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICclcyguLi4pIGlzIGRlcHJlY2F0ZWQgaW4gcGxhaW4gSmF2YVNjcmlwdCBSZWFjdCBjbGFzc2VzLiAlcycsIGluZm9bMF0sIGluZm9bMV0pIDogdW5kZWZpbmVkO1xuXHQgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH07XG5cdCAgZm9yICh2YXIgZm5OYW1lIGluIGRlcHJlY2F0ZWRBUElzKSB7XG5cdCAgICBpZiAoZGVwcmVjYXRlZEFQSXMuaGFzT3duUHJvcGVydHkoZm5OYW1lKSkge1xuXHQgICAgICBkZWZpbmVEZXByZWNhdGlvbldhcm5pbmcoZm5OYW1lLCBkZXByZWNhdGVkQVBJc1tmbk5hbWVdKTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gUmVhY3RDb21wb25lbnQ7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpKSlcblxuLyoqKi8gfSksXG4vKiAxMjQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgey8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0Tm9vcFVwZGF0ZVF1ZXVlXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHdhcm5pbmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTtcblx0XG5cdGZ1bmN0aW9uIHdhcm5URFoocHVibGljSW5zdGFuY2UsIGNhbGxlck5hbWUpIHtcblx0ICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICclcyguLi4pOiBDYW4gb25seSB1cGRhdGUgYSBtb3VudGVkIG9yIG1vdW50aW5nIGNvbXBvbmVudC4gJyArICdUaGlzIHVzdWFsbHkgbWVhbnMgeW91IGNhbGxlZCAlcygpIG9uIGFuIHVubW91bnRlZCBjb21wb25lbnQuICcgKyAnVGhpcyBpcyBhIG5vLW9wLiBQbGVhc2UgY2hlY2sgdGhlIGNvZGUgZm9yIHRoZSAlcyBjb21wb25lbnQuJywgY2FsbGVyTmFtZSwgY2FsbGVyTmFtZSwgcHVibGljSW5zdGFuY2UuY29uc3RydWN0b3IgJiYgcHVibGljSW5zdGFuY2UuY29uc3RydWN0b3IuZGlzcGxheU5hbWUgfHwgJycpIDogdW5kZWZpbmVkO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFRoaXMgaXMgdGhlIGFic3RyYWN0IEFQSSBmb3IgYW4gdXBkYXRlIHF1ZXVlLlxuXHQgKi9cblx0dmFyIFJlYWN0Tm9vcFVwZGF0ZVF1ZXVlID0ge1xuXHRcblx0ICAvKipcblx0ICAgKiBDaGVja3Mgd2hldGhlciBvciBub3QgdGhpcyBjb21wb3NpdGUgY29tcG9uZW50IGlzIG1vdW50ZWQuXG5cdCAgICogQHBhcmFtIHtSZWFjdENsYXNzfSBwdWJsaWNJbnN0YW5jZSBUaGUgaW5zdGFuY2Ugd2Ugd2FudCB0byB0ZXN0LlxuXHQgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgbW91bnRlZCwgZmFsc2Ugb3RoZXJ3aXNlLlxuXHQgICAqIEBwcm90ZWN0ZWRcblx0ICAgKiBAZmluYWxcblx0ICAgKi9cblx0ICBpc01vdW50ZWQ6IGZ1bmN0aW9uIChwdWJsaWNJbnN0YW5jZSkge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIEVucXVldWUgYSBjYWxsYmFjayB0aGF0IHdpbGwgYmUgZXhlY3V0ZWQgYWZ0ZXIgYWxsIHRoZSBwZW5kaW5nIHVwZGF0ZXNcblx0ICAgKiBoYXZlIHByb2Nlc3NlZC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7UmVhY3RDbGFzc30gcHVibGljSW5zdGFuY2UgVGhlIGluc3RhbmNlIHRvIHVzZSBhcyBgdGhpc2AgY29udGV4dC5cblx0ICAgKiBAcGFyYW0gez9mdW5jdGlvbn0gY2FsbGJhY2sgQ2FsbGVkIGFmdGVyIHN0YXRlIGlzIHVwZGF0ZWQuXG5cdCAgICogQGludGVybmFsXG5cdCAgICovXG5cdCAgZW5xdWV1ZUNhbGxiYWNrOiBmdW5jdGlvbiAocHVibGljSW5zdGFuY2UsIGNhbGxiYWNrKSB7fSxcblx0XG5cdCAgLyoqXG5cdCAgICogRm9yY2VzIGFuIHVwZGF0ZS4gVGhpcyBzaG91bGQgb25seSBiZSBpbnZva2VkIHdoZW4gaXQgaXMga25vd24gd2l0aFxuXHQgICAqIGNlcnRhaW50eSB0aGF0IHdlIGFyZSAqKm5vdCoqIGluIGEgRE9NIHRyYW5zYWN0aW9uLlxuXHQgICAqXG5cdCAgICogWW91IG1heSB3YW50IHRvIGNhbGwgdGhpcyB3aGVuIHlvdSBrbm93IHRoYXQgc29tZSBkZWVwZXIgYXNwZWN0IG9mIHRoZVxuXHQgICAqIGNvbXBvbmVudCdzIHN0YXRlIGhhcyBjaGFuZ2VkIGJ1dCBgc2V0U3RhdGVgIHdhcyBub3QgY2FsbGVkLlxuXHQgICAqXG5cdCAgICogVGhpcyB3aWxsIG5vdCBpbnZva2UgYHNob3VsZENvbXBvbmVudFVwZGF0ZWAsIGJ1dCBpdCB3aWxsIGludm9rZVxuXHQgICAqIGBjb21wb25lbnRXaWxsVXBkYXRlYCBhbmQgYGNvbXBvbmVudERpZFVwZGF0ZWAuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1JlYWN0Q2xhc3N9IHB1YmxpY0luc3RhbmNlIFRoZSBpbnN0YW5jZSB0aGF0IHNob3VsZCByZXJlbmRlci5cblx0ICAgKiBAaW50ZXJuYWxcblx0ICAgKi9cblx0ICBlbnF1ZXVlRm9yY2VVcGRhdGU6IGZ1bmN0aW9uIChwdWJsaWNJbnN0YW5jZSkge1xuXHQgICAgd2FyblREWihwdWJsaWNJbnN0YW5jZSwgJ2ZvcmNlVXBkYXRlJyk7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogUmVwbGFjZXMgYWxsIG9mIHRoZSBzdGF0ZS4gQWx3YXlzIHVzZSB0aGlzIG9yIGBzZXRTdGF0ZWAgdG8gbXV0YXRlIHN0YXRlLlxuXHQgICAqIFlvdSBzaG91bGQgdHJlYXQgYHRoaXMuc3RhdGVgIGFzIGltbXV0YWJsZS5cblx0ICAgKlxuXHQgICAqIFRoZXJlIGlzIG5vIGd1YXJhbnRlZSB0aGF0IGB0aGlzLnN0YXRlYCB3aWxsIGJlIGltbWVkaWF0ZWx5IHVwZGF0ZWQsIHNvXG5cdCAgICogYWNjZXNzaW5nIGB0aGlzLnN0YXRlYCBhZnRlciBjYWxsaW5nIHRoaXMgbWV0aG9kIG1heSByZXR1cm4gdGhlIG9sZCB2YWx1ZS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7UmVhY3RDbGFzc30gcHVibGljSW5zdGFuY2UgVGhlIGluc3RhbmNlIHRoYXQgc2hvdWxkIHJlcmVuZGVyLlxuXHQgICAqIEBwYXJhbSB7b2JqZWN0fSBjb21wbGV0ZVN0YXRlIE5leHQgc3RhdGUuXG5cdCAgICogQGludGVybmFsXG5cdCAgICovXG5cdCAgZW5xdWV1ZVJlcGxhY2VTdGF0ZTogZnVuY3Rpb24gKHB1YmxpY0luc3RhbmNlLCBjb21wbGV0ZVN0YXRlKSB7XG5cdCAgICB3YXJuVERaKHB1YmxpY0luc3RhbmNlLCAncmVwbGFjZVN0YXRlJyk7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogU2V0cyBhIHN1YnNldCBvZiB0aGUgc3RhdGUuIFRoaXMgb25seSBleGlzdHMgYmVjYXVzZSBfcGVuZGluZ1N0YXRlIGlzXG5cdCAgICogaW50ZXJuYWwuIFRoaXMgcHJvdmlkZXMgYSBtZXJnaW5nIHN0cmF0ZWd5IHRoYXQgaXMgbm90IGF2YWlsYWJsZSB0byBkZWVwXG5cdCAgICogcHJvcGVydGllcyB3aGljaCBpcyBjb25mdXNpbmcuIFRPRE86IEV4cG9zZSBwZW5kaW5nU3RhdGUgb3IgZG9uJ3QgdXNlIGl0XG5cdCAgICogZHVyaW5nIHRoZSBtZXJnZS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7UmVhY3RDbGFzc30gcHVibGljSW5zdGFuY2UgVGhlIGluc3RhbmNlIHRoYXQgc2hvdWxkIHJlcmVuZGVyLlxuXHQgICAqIEBwYXJhbSB7b2JqZWN0fSBwYXJ0aWFsU3RhdGUgTmV4dCBwYXJ0aWFsIHN0YXRlIHRvIGJlIG1lcmdlZCB3aXRoIHN0YXRlLlxuXHQgICAqIEBpbnRlcm5hbFxuXHQgICAqL1xuXHQgIGVucXVldWVTZXRTdGF0ZTogZnVuY3Rpb24gKHB1YmxpY0luc3RhbmNlLCBwYXJ0aWFsU3RhdGUpIHtcblx0ICAgIHdhcm5URFoocHVibGljSW5zdGFuY2UsICdzZXRTdGF0ZScpO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFNldHMgYSBzdWJzZXQgb2YgdGhlIHByb3BzLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtSZWFjdENsYXNzfSBwdWJsaWNJbnN0YW5jZSBUaGUgaW5zdGFuY2UgdGhhdCBzaG91bGQgcmVyZW5kZXIuXG5cdCAgICogQHBhcmFtIHtvYmplY3R9IHBhcnRpYWxQcm9wcyBTdWJzZXQgb2YgdGhlIG5leHQgcHJvcHMuXG5cdCAgICogQGludGVybmFsXG5cdCAgICovXG5cdCAgZW5xdWV1ZVNldFByb3BzOiBmdW5jdGlvbiAocHVibGljSW5zdGFuY2UsIHBhcnRpYWxQcm9wcykge1xuXHQgICAgd2FyblREWihwdWJsaWNJbnN0YW5jZSwgJ3NldFByb3BzJyk7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogUmVwbGFjZXMgYWxsIG9mIHRoZSBwcm9wcy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7UmVhY3RDbGFzc30gcHVibGljSW5zdGFuY2UgVGhlIGluc3RhbmNlIHRoYXQgc2hvdWxkIHJlcmVuZGVyLlxuXHQgICAqIEBwYXJhbSB7b2JqZWN0fSBwcm9wcyBOZXcgcHJvcHMuXG5cdCAgICogQGludGVybmFsXG5cdCAgICovXG5cdCAgZW5xdWV1ZVJlcGxhY2VQcm9wczogZnVuY3Rpb24gKHB1YmxpY0luc3RhbmNlLCBwcm9wcykge1xuXHQgICAgd2FyblREWihwdWJsaWNJbnN0YW5jZSwgJ3JlcGxhY2VQcm9wcycpO1xuXHQgIH1cblx0XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFJlYWN0Tm9vcFVwZGF0ZVF1ZXVlO1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg0KSkpXG5cbi8qKiovIH0pLFxuLyogMTI1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uXG5cdCAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIENhbGxiYWNrUXVldWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU1KTtcblx0dmFyIFBvb2xlZENsYXNzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Nik7XG5cdHZhciBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KTtcblx0dmFyIFJlYWN0RE9NRmVhdHVyZUZsYWdzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBSZWFjdElucHV0U2VsZWN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjYpO1xuXHR2YXIgVHJhbnNhY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU3KTtcblx0XG5cdHZhciBhc3NpZ24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KTtcblx0XG5cdC8qKlxuXHQgKiBFbnN1cmVzIHRoYXQsIHdoZW4gcG9zc2libGUsIHRoZSBzZWxlY3Rpb24gcmFuZ2UgKGN1cnJlbnRseSBzZWxlY3RlZCB0ZXh0XG5cdCAqIGlucHV0KSBpcyBub3QgZGlzdHVyYmVkIGJ5IHBlcmZvcm1pbmcgdGhlIHRyYW5zYWN0aW9uLlxuXHQgKi9cblx0dmFyIFNFTEVDVElPTl9SRVNUT1JBVElPTiA9IHtcblx0ICAvKipcblx0ICAgKiBAcmV0dXJuIHtTZWxlY3Rpb259IFNlbGVjdGlvbiBpbmZvcm1hdGlvbi5cblx0ICAgKi9cblx0ICBpbml0aWFsaXplOiBSZWFjdElucHV0U2VsZWN0aW9uLmdldFNlbGVjdGlvbkluZm9ybWF0aW9uLFxuXHQgIC8qKlxuXHQgICAqIEBwYXJhbSB7U2VsZWN0aW9ufSBzZWwgU2VsZWN0aW9uIGluZm9ybWF0aW9uIHJldHVybmVkIGZyb20gYGluaXRpYWxpemVgLlxuXHQgICAqL1xuXHQgIGNsb3NlOiBSZWFjdElucHV0U2VsZWN0aW9uLnJlc3RvcmVTZWxlY3Rpb25cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBTdXBwcmVzc2VzIGV2ZW50cyAoYmx1ci9mb2N1cykgdGhhdCBjb3VsZCBiZSBpbmFkdmVydGVudGx5IGRpc3BhdGNoZWQgZHVlIHRvXG5cdCAqIGhpZ2ggbGV2ZWwgRE9NIG1hbmlwdWxhdGlvbnMgKGxpa2UgdGVtcG9yYXJpbHkgcmVtb3ZpbmcgYSB0ZXh0IGlucHV0IGZyb20gdGhlXG5cdCAqIERPTSkuXG5cdCAqL1xuXHR2YXIgRVZFTlRfU1VQUFJFU1NJT04gPSB7XG5cdCAgLyoqXG5cdCAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIGVuYWJsZWQgc3RhdHVzIG9mIGBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXJgIGJlZm9yZVxuXHQgICAqIHRoZSByZWNvbmNpbGlhdGlvbi5cblx0ICAgKi9cblx0ICBpbml0aWFsaXplOiBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgY3VycmVudGx5RW5hYmxlZCA9IFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5pc0VuYWJsZWQoKTtcblx0ICAgIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5zZXRFbmFibGVkKGZhbHNlKTtcblx0ICAgIHJldHVybiBjdXJyZW50bHlFbmFibGVkO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIEBwYXJhbSB7Ym9vbGVhbn0gcHJldmlvdXNseUVuYWJsZWQgRW5hYmxlZCBzdGF0dXMgb2Zcblx0ICAgKiAgIGBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXJgIGJlZm9yZSB0aGUgcmVjb25jaWxpYXRpb24gb2NjdXJyZWQuIGBjbG9zZWBcblx0ICAgKiAgIHJlc3RvcmVzIHRoZSBwcmV2aW91cyB2YWx1ZS5cblx0ICAgKi9cblx0ICBjbG9zZTogZnVuY3Rpb24gKHByZXZpb3VzbHlFbmFibGVkKSB7XG5cdCAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuc2V0RW5hYmxlZChwcmV2aW91c2x5RW5hYmxlZCk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFByb3ZpZGVzIGEgcXVldWUgZm9yIGNvbGxlY3RpbmcgYGNvbXBvbmVudERpZE1vdW50YCBhbmRcblx0ICogYGNvbXBvbmVudERpZFVwZGF0ZWAgY2FsbGJhY2tzIGR1cmluZyB0aGUgdGhlIHRyYW5zYWN0aW9uLlxuXHQgKi9cblx0dmFyIE9OX0RPTV9SRUFEWV9RVUVVRUlORyA9IHtcblx0ICAvKipcblx0ICAgKiBJbml0aWFsaXplcyB0aGUgaW50ZXJuYWwgYG9uRE9NUmVhZHlgIHF1ZXVlLlxuXHQgICAqL1xuXHQgIGluaXRpYWxpemU6IGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMucmVhY3RNb3VudFJlYWR5LnJlc2V0KCk7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogQWZ0ZXIgRE9NIGlzIGZsdXNoZWQsIGludm9rZSBhbGwgcmVnaXN0ZXJlZCBgb25ET01SZWFkeWAgY2FsbGJhY2tzLlxuXHQgICAqL1xuXHQgIGNsb3NlOiBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLnJlYWN0TW91bnRSZWFkeS5ub3RpZnlBbGwoKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogRXhlY3V0ZWQgd2l0aGluIHRoZSBzY29wZSBvZiB0aGUgYFRyYW5zYWN0aW9uYCBpbnN0YW5jZS4gQ29uc2lkZXIgdGhlc2UgYXNcblx0ICogYmVpbmcgbWVtYmVyIG1ldGhvZHMsIGJ1dCB3aXRoIGFuIGltcGxpZWQgb3JkZXJpbmcgd2hpbGUgYmVpbmcgaXNvbGF0ZWQgZnJvbVxuXHQgKiBlYWNoIG90aGVyLlxuXHQgKi9cblx0dmFyIFRSQU5TQUNUSU9OX1dSQVBQRVJTID0gW1NFTEVDVElPTl9SRVNUT1JBVElPTiwgRVZFTlRfU1VQUFJFU1NJT04sIE9OX0RPTV9SRUFEWV9RVUVVRUlOR107XG5cdFxuXHQvKipcblx0ICogQ3VycmVudGx5OlxuXHQgKiAtIFRoZSBvcmRlciB0aGF0IHRoZXNlIGFyZSBsaXN0ZWQgaW4gdGhlIHRyYW5zYWN0aW9uIGlzIGNyaXRpY2FsOlxuXHQgKiAtIFN1cHByZXNzZXMgZXZlbnRzLlxuXHQgKiAtIFJlc3RvcmVzIHNlbGVjdGlvbiByYW5nZS5cblx0ICpcblx0ICogRnV0dXJlOlxuXHQgKiAtIFJlc3RvcmUgZG9jdW1lbnQvb3ZlcmZsb3cgc2Nyb2xsIHBvc2l0aW9ucyB0aGF0IHdlcmUgdW5pbnRlbnRpb25hbGx5XG5cdCAqICAgbW9kaWZpZWQgdmlhIERPTSBpbnNlcnRpb25zIGFib3ZlIHRoZSB0b3Agdmlld3BvcnQgYm91bmRhcnkuXG5cdCAqIC0gSW1wbGVtZW50L2ludGVncmF0ZSB3aXRoIGN1c3RvbWl6ZWQgY29uc3RyYWludCBiYXNlZCBsYXlvdXQgc3lzdGVtIGFuZCBrZWVwXG5cdCAqICAgdHJhY2sgb2Ygd2hpY2ggZGltZW5zaW9ucyBtdXN0IGJlIHJlbWVhc3VyZWQuXG5cdCAqXG5cdCAqIEBjbGFzcyBSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uXG5cdCAqL1xuXHRmdW5jdGlvbiBSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uKGZvcmNlSFRNTCkge1xuXHQgIHRoaXMucmVpbml0aWFsaXplVHJhbnNhY3Rpb24oKTtcblx0ICAvLyBPbmx5IHNlcnZlci1zaWRlIHJlbmRlcmluZyByZWFsbHkgbmVlZHMgdGhpcyBvcHRpb24gKHNlZVxuXHQgIC8vIGBSZWFjdFNlcnZlclJlbmRlcmluZ2ApLCBidXQgc2VydmVyLXNpZGUgdXNlc1xuXHQgIC8vIGBSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9uYCBpbnN0ZWFkLiBUaGlzIG9wdGlvbiBpcyBoZXJlIHNvIHRoYXQgaXQnc1xuXHQgIC8vIGFjY2Vzc2libGUgYW5kIGRlZmF1bHRzIHRvIGZhbHNlIHdoZW4gYFJlYWN0RE9NQ29tcG9uZW50YCBhbmRcblx0ICAvLyBgUmVhY3RUZXh0Q29tcG9uZW50YCBjaGVja3MgaXQgaW4gYG1vdW50Q29tcG9uZW50YC5gXG5cdCAgdGhpcy5yZW5kZXJUb1N0YXRpY01hcmt1cCA9IGZhbHNlO1xuXHQgIHRoaXMucmVhY3RNb3VudFJlYWR5ID0gQ2FsbGJhY2tRdWV1ZS5nZXRQb29sZWQobnVsbCk7XG5cdCAgdGhpcy51c2VDcmVhdGVFbGVtZW50ID0gIWZvcmNlSFRNTCAmJiBSZWFjdERPTUZlYXR1cmVGbGFncy51c2VDcmVhdGVFbGVtZW50O1xuXHR9XG5cdFxuXHR2YXIgTWl4aW4gPSB7XG5cdCAgLyoqXG5cdCAgICogQHNlZSBUcmFuc2FjdGlvblxuXHQgICAqIEBhYnN0cmFjdFxuXHQgICAqIEBmaW5hbFxuXHQgICAqIEByZXR1cm4ge2FycmF5PG9iamVjdD59IExpc3Qgb2Ygb3BlcmF0aW9uIHdyYXAgcHJvY2VkdXJlcy5cblx0ICAgKiAgIFRPRE86IGNvbnZlcnQgdG8gYXJyYXk8VHJhbnNhY3Rpb25XcmFwcGVyPlxuXHQgICAqL1xuXHQgIGdldFRyYW5zYWN0aW9uV3JhcHBlcnM6IGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiBUUkFOU0FDVElPTl9XUkFQUEVSUztcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBAcmV0dXJuIHtvYmplY3R9IFRoZSBxdWV1ZSB0byBjb2xsZWN0IGBvbkRPTVJlYWR5YCBjYWxsYmFja3Mgd2l0aC5cblx0ICAgKi9cblx0ICBnZXRSZWFjdE1vdW50UmVhZHk6IGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiB0aGlzLnJlYWN0TW91bnRSZWFkeTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBgUG9vbGVkQ2xhc3NgIGxvb2tzIGZvciB0aGlzLCBhbmQgd2lsbCBpbnZva2UgdGhpcyBiZWZvcmUgYWxsb3dpbmcgdGhpc1xuXHQgICAqIGluc3RhbmNlIHRvIGJlIHJldXNlZC5cblx0ICAgKi9cblx0ICBkZXN0cnVjdG9yOiBmdW5jdGlvbiAoKSB7XG5cdCAgICBDYWxsYmFja1F1ZXVlLnJlbGVhc2UodGhpcy5yZWFjdE1vdW50UmVhZHkpO1xuXHQgICAgdGhpcy5yZWFjdE1vdW50UmVhZHkgPSBudWxsO1xuXHQgIH1cblx0fTtcblx0XG5cdGFzc2lnbihSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uLnByb3RvdHlwZSwgVHJhbnNhY3Rpb24uTWl4aW4sIE1peGluKTtcblx0XG5cdFBvb2xlZENsYXNzLmFkZFBvb2xpbmdUbyhSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gUmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbjtcblxuLyoqKi8gfSksXG4vKiAxMjYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0SW5wdXRTZWxlY3Rpb25cblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgUmVhY3RET01TZWxlY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyNyk7XG5cdFxuXHR2YXIgY29udGFpbnNOb2RlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OSk7XG5cdHZhciBmb2N1c05vZGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk1KTtcblx0dmFyIGdldEFjdGl2ZUVsZW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyOSk7XG5cdFxuXHRmdW5jdGlvbiBpc0luRG9jdW1lbnQobm9kZSkge1xuXHQgIHJldHVybiBjb250YWluc05vZGUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCBub2RlKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEBSZWFjdElucHV0U2VsZWN0aW9uOiBSZWFjdCBpbnB1dCBzZWxlY3Rpb24gbW9kdWxlLiBCYXNlZCBvbiBTZWxlY3Rpb24uanMsXG5cdCAqIGJ1dCBtb2RpZmllZCB0byBiZSBzdWl0YWJsZSBmb3IgcmVhY3QgYW5kIGhhcyBhIGNvdXBsZSBvZiBidWcgZml4ZXMgKGRvZXNuJ3Rcblx0ICogYXNzdW1lIGJ1dHRvbnMgaGF2ZSByYW5nZSBzZWxlY3Rpb25zIGFsbG93ZWQpLlxuXHQgKiBJbnB1dCBzZWxlY3Rpb24gbW9kdWxlIGZvciBSZWFjdC5cblx0ICovXG5cdHZhciBSZWFjdElucHV0U2VsZWN0aW9uID0ge1xuXHRcblx0ICBoYXNTZWxlY3Rpb25DYXBhYmlsaXRpZXM6IGZ1bmN0aW9uIChlbGVtKSB7XG5cdCAgICB2YXIgbm9kZU5hbWUgPSBlbGVtICYmIGVsZW0ubm9kZU5hbWUgJiYgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHQgICAgcmV0dXJuIG5vZGVOYW1lICYmIChub2RlTmFtZSA9PT0gJ2lucHV0JyAmJiBlbGVtLnR5cGUgPT09ICd0ZXh0JyB8fCBub2RlTmFtZSA9PT0gJ3RleHRhcmVhJyB8fCBlbGVtLmNvbnRlbnRFZGl0YWJsZSA9PT0gJ3RydWUnKTtcblx0ICB9LFxuXHRcblx0ICBnZXRTZWxlY3Rpb25JbmZvcm1hdGlvbjogZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIGZvY3VzZWRFbGVtID0gZ2V0QWN0aXZlRWxlbWVudCgpO1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgZm9jdXNlZEVsZW06IGZvY3VzZWRFbGVtLFxuXHQgICAgICBzZWxlY3Rpb25SYW5nZTogUmVhY3RJbnB1dFNlbGVjdGlvbi5oYXNTZWxlY3Rpb25DYXBhYmlsaXRpZXMoZm9jdXNlZEVsZW0pID8gUmVhY3RJbnB1dFNlbGVjdGlvbi5nZXRTZWxlY3Rpb24oZm9jdXNlZEVsZW0pIDogbnVsbFxuXHQgICAgfTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBAcmVzdG9yZVNlbGVjdGlvbjogSWYgYW55IHNlbGVjdGlvbiBpbmZvcm1hdGlvbiB3YXMgcG90ZW50aWFsbHkgbG9zdCxcblx0ICAgKiByZXN0b3JlIGl0LiBUaGlzIGlzIHVzZWZ1bCB3aGVuIHBlcmZvcm1pbmcgb3BlcmF0aW9ucyB0aGF0IGNvdWxkIHJlbW92ZSBkb21cblx0ICAgKiBub2RlcyBhbmQgcGxhY2UgdGhlbSBiYWNrIGluLCByZXN1bHRpbmcgaW4gZm9jdXMgYmVpbmcgbG9zdC5cblx0ICAgKi9cblx0ICByZXN0b3JlU2VsZWN0aW9uOiBmdW5jdGlvbiAocHJpb3JTZWxlY3Rpb25JbmZvcm1hdGlvbikge1xuXHQgICAgdmFyIGN1ckZvY3VzZWRFbGVtID0gZ2V0QWN0aXZlRWxlbWVudCgpO1xuXHQgICAgdmFyIHByaW9yRm9jdXNlZEVsZW0gPSBwcmlvclNlbGVjdGlvbkluZm9ybWF0aW9uLmZvY3VzZWRFbGVtO1xuXHQgICAgdmFyIHByaW9yU2VsZWN0aW9uUmFuZ2UgPSBwcmlvclNlbGVjdGlvbkluZm9ybWF0aW9uLnNlbGVjdGlvblJhbmdlO1xuXHQgICAgaWYgKGN1ckZvY3VzZWRFbGVtICE9PSBwcmlvckZvY3VzZWRFbGVtICYmIGlzSW5Eb2N1bWVudChwcmlvckZvY3VzZWRFbGVtKSkge1xuXHQgICAgICBpZiAoUmVhY3RJbnB1dFNlbGVjdGlvbi5oYXNTZWxlY3Rpb25DYXBhYmlsaXRpZXMocHJpb3JGb2N1c2VkRWxlbSkpIHtcblx0ICAgICAgICBSZWFjdElucHV0U2VsZWN0aW9uLnNldFNlbGVjdGlvbihwcmlvckZvY3VzZWRFbGVtLCBwcmlvclNlbGVjdGlvblJhbmdlKTtcblx0ICAgICAgfVxuXHQgICAgICBmb2N1c05vZGUocHJpb3JGb2N1c2VkRWxlbSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogQGdldFNlbGVjdGlvbjogR2V0cyB0aGUgc2VsZWN0aW9uIGJvdW5kcyBvZiBhIGZvY3VzZWQgdGV4dGFyZWEsIGlucHV0IG9yXG5cdCAgICogY29udGVudEVkaXRhYmxlIG5vZGUuXG5cdCAgICogLUBpbnB1dDogTG9vayB1cCBzZWxlY3Rpb24gYm91bmRzIG9mIHRoaXMgaW5wdXRcblx0ICAgKiAtQHJldHVybiB7c3RhcnQ6IHNlbGVjdGlvblN0YXJ0LCBlbmQ6IHNlbGVjdGlvbkVuZH1cblx0ICAgKi9cblx0ICBnZXRTZWxlY3Rpb246IGZ1bmN0aW9uIChpbnB1dCkge1xuXHQgICAgdmFyIHNlbGVjdGlvbjtcblx0XG5cdCAgICBpZiAoJ3NlbGVjdGlvblN0YXJ0JyBpbiBpbnB1dCkge1xuXHQgICAgICAvLyBNb2Rlcm4gYnJvd3NlciB3aXRoIGlucHV0IG9yIHRleHRhcmVhLlxuXHQgICAgICBzZWxlY3Rpb24gPSB7XG5cdCAgICAgICAgc3RhcnQ6IGlucHV0LnNlbGVjdGlvblN0YXJ0LFxuXHQgICAgICAgIGVuZDogaW5wdXQuc2VsZWN0aW9uRW5kXG5cdCAgICAgIH07XG5cdCAgICB9IGVsc2UgaWYgKGRvY3VtZW50LnNlbGVjdGlvbiAmJiAoaW5wdXQubm9kZU5hbWUgJiYgaW5wdXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2lucHV0JykpIHtcblx0ICAgICAgLy8gSUU4IGlucHV0LlxuXHQgICAgICB2YXIgcmFuZ2UgPSBkb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKTtcblx0ICAgICAgLy8gVGhlcmUgY2FuIG9ubHkgYmUgb25lIHNlbGVjdGlvbiBwZXIgZG9jdW1lbnQgaW4gSUUsIHNvIGl0IG11c3Rcblx0ICAgICAgLy8gYmUgaW4gb3VyIGVsZW1lbnQuXG5cdCAgICAgIGlmIChyYW5nZS5wYXJlbnRFbGVtZW50KCkgPT09IGlucHV0KSB7XG5cdCAgICAgICAgc2VsZWN0aW9uID0ge1xuXHQgICAgICAgICAgc3RhcnQ6IC1yYW5nZS5tb3ZlU3RhcnQoJ2NoYXJhY3RlcicsIC1pbnB1dC52YWx1ZS5sZW5ndGgpLFxuXHQgICAgICAgICAgZW5kOiAtcmFuZ2UubW92ZUVuZCgnY2hhcmFjdGVyJywgLWlucHV0LnZhbHVlLmxlbmd0aClcblx0ICAgICAgICB9O1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyBDb250ZW50IGVkaXRhYmxlIG9yIG9sZCBJRSB0ZXh0YXJlYS5cblx0ICAgICAgc2VsZWN0aW9uID0gUmVhY3RET01TZWxlY3Rpb24uZ2V0T2Zmc2V0cyhpbnB1dCk7XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIHNlbGVjdGlvbiB8fCB7IHN0YXJ0OiAwLCBlbmQ6IDAgfTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBAc2V0U2VsZWN0aW9uOiBTZXRzIHRoZSBzZWxlY3Rpb24gYm91bmRzIG9mIGEgdGV4dGFyZWEgb3IgaW5wdXQgYW5kIGZvY3VzZXNcblx0ICAgKiB0aGUgaW5wdXQuXG5cdCAgICogLUBpbnB1dCAgICAgU2V0IHNlbGVjdGlvbiBib3VuZHMgb2YgdGhpcyBpbnB1dCBvciB0ZXh0YXJlYVxuXHQgICAqIC1Ab2Zmc2V0cyAgIE9iamVjdCBvZiBzYW1lIGZvcm0gdGhhdCBpcyByZXR1cm5lZCBmcm9tIGdldCpcblx0ICAgKi9cblx0ICBzZXRTZWxlY3Rpb246IGZ1bmN0aW9uIChpbnB1dCwgb2Zmc2V0cykge1xuXHQgICAgdmFyIHN0YXJ0ID0gb2Zmc2V0cy5zdGFydDtcblx0ICAgIHZhciBlbmQgPSBvZmZzZXRzLmVuZDtcblx0ICAgIGlmICh0eXBlb2YgZW5kID09PSAndW5kZWZpbmVkJykge1xuXHQgICAgICBlbmQgPSBzdGFydDtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoJ3NlbGVjdGlvblN0YXJ0JyBpbiBpbnB1dCkge1xuXHQgICAgICBpbnB1dC5zZWxlY3Rpb25TdGFydCA9IHN0YXJ0O1xuXHQgICAgICBpbnB1dC5zZWxlY3Rpb25FbmQgPSBNYXRoLm1pbihlbmQsIGlucHV0LnZhbHVlLmxlbmd0aCk7XG5cdCAgICB9IGVsc2UgaWYgKGRvY3VtZW50LnNlbGVjdGlvbiAmJiAoaW5wdXQubm9kZU5hbWUgJiYgaW5wdXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2lucHV0JykpIHtcblx0ICAgICAgdmFyIHJhbmdlID0gaW5wdXQuY3JlYXRlVGV4dFJhbmdlKCk7XG5cdCAgICAgIHJhbmdlLmNvbGxhcHNlKHRydWUpO1xuXHQgICAgICByYW5nZS5tb3ZlU3RhcnQoJ2NoYXJhY3RlcicsIHN0YXJ0KTtcblx0ICAgICAgcmFuZ2UubW92ZUVuZCgnY2hhcmFjdGVyJywgZW5kIC0gc3RhcnQpO1xuXHQgICAgICByYW5nZS5zZWxlY3QoKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIFJlYWN0RE9NU2VsZWN0aW9uLnNldE9mZnNldHMoaW5wdXQsIG9mZnNldHMpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gUmVhY3RJbnB1dFNlbGVjdGlvbjtcblxuLyoqKi8gfSksXG4vKiAxMjcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RE9NU2VsZWN0aW9uXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIEV4ZWN1dGlvbkVudmlyb25tZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0XG5cdHZhciBnZXROb2RlRm9yQ2hhcmFjdGVyT2Zmc2V0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjgpO1xuXHR2YXIgZ2V0VGV4dENvbnRlbnRBY2Nlc3NvciA9IF9fd2VicGFja19yZXF1aXJlX18oNzUpO1xuXHRcblx0LyoqXG5cdCAqIFdoaWxlIGBpc0NvbGxhcHNlZGAgaXMgYXZhaWxhYmxlIG9uIHRoZSBTZWxlY3Rpb24gb2JqZWN0IGFuZCBgY29sbGFwc2VkYFxuXHQgKiBpcyBhdmFpbGFibGUgb24gdGhlIFJhbmdlIG9iamVjdCwgSUUxMSBzb21ldGltZXMgZ2V0cyB0aGVtIHdyb25nLlxuXHQgKiBJZiB0aGUgYW5jaG9yL2ZvY3VzIG5vZGVzIGFuZCBvZmZzZXRzIGFyZSB0aGUgc2FtZSwgdGhlIHJhbmdlIGlzIGNvbGxhcHNlZC5cblx0ICovXG5cdGZ1bmN0aW9uIGlzQ29sbGFwc2VkKGFuY2hvck5vZGUsIGFuY2hvck9mZnNldCwgZm9jdXNOb2RlLCBmb2N1c09mZnNldCkge1xuXHQgIHJldHVybiBhbmNob3JOb2RlID09PSBmb2N1c05vZGUgJiYgYW5jaG9yT2Zmc2V0ID09PSBmb2N1c09mZnNldDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEdldCB0aGUgYXBwcm9wcmlhdGUgYW5jaG9yIGFuZCBmb2N1cyBub2RlL29mZnNldCBwYWlycyBmb3IgSUUuXG5cdCAqXG5cdCAqIFRoZSBjYXRjaCBoZXJlIGlzIHRoYXQgSUUncyBzZWxlY3Rpb24gQVBJIGRvZXNuJ3QgcHJvdmlkZSBpbmZvcm1hdGlvblxuXHQgKiBhYm91dCB3aGV0aGVyIHRoZSBzZWxlY3Rpb24gaXMgZm9yd2FyZCBvciBiYWNrd2FyZCwgc28gd2UgaGF2ZSB0b1xuXHQgKiBiZWhhdmUgYXMgdGhvdWdoIGl0J3MgYWx3YXlzIGZvcndhcmQuXG5cdCAqXG5cdCAqIElFIHRleHQgZGlmZmVycyBmcm9tIG1vZGVybiBzZWxlY3Rpb24gaW4gdGhhdCBpdCBiZWhhdmVzIGFzIHRob3VnaFxuXHQgKiBibG9jayBlbGVtZW50cyBlbmQgd2l0aCBhIG5ldyBsaW5lLiBUaGlzIG1lYW5zIGNoYXJhY3RlciBvZmZzZXRzIHdpbGxcblx0ICogZGlmZmVyIGJldHdlZW4gdGhlIHR3byBBUElzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IG5vZGVcblx0ICogQHJldHVybiB7b2JqZWN0fVxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0SUVPZmZzZXRzKG5vZGUpIHtcblx0ICB2YXIgc2VsZWN0aW9uID0gZG9jdW1lbnQuc2VsZWN0aW9uO1xuXHQgIHZhciBzZWxlY3RlZFJhbmdlID0gc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCk7XG5cdCAgdmFyIHNlbGVjdGVkTGVuZ3RoID0gc2VsZWN0ZWRSYW5nZS50ZXh0Lmxlbmd0aDtcblx0XG5cdCAgLy8gRHVwbGljYXRlIHNlbGVjdGlvbiBzbyB3ZSBjYW4gbW92ZSByYW5nZSB3aXRob3V0IGJyZWFraW5nIHVzZXIgc2VsZWN0aW9uLlxuXHQgIHZhciBmcm9tU3RhcnQgPSBzZWxlY3RlZFJhbmdlLmR1cGxpY2F0ZSgpO1xuXHQgIGZyb21TdGFydC5tb3ZlVG9FbGVtZW50VGV4dChub2RlKTtcblx0ICBmcm9tU3RhcnQuc2V0RW5kUG9pbnQoJ0VuZFRvU3RhcnQnLCBzZWxlY3RlZFJhbmdlKTtcblx0XG5cdCAgdmFyIHN0YXJ0T2Zmc2V0ID0gZnJvbVN0YXJ0LnRleHQubGVuZ3RoO1xuXHQgIHZhciBlbmRPZmZzZXQgPSBzdGFydE9mZnNldCArIHNlbGVjdGVkTGVuZ3RoO1xuXHRcblx0ICByZXR1cm4ge1xuXHQgICAgc3RhcnQ6IHN0YXJ0T2Zmc2V0LFxuXHQgICAgZW5kOiBlbmRPZmZzZXRcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogQHBhcmFtIHtET01FbGVtZW50fSBub2RlXG5cdCAqIEByZXR1cm4gez9vYmplY3R9XG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRNb2Rlcm5PZmZzZXRzKG5vZGUpIHtcblx0ICB2YXIgc2VsZWN0aW9uID0gd2luZG93LmdldFNlbGVjdGlvbiAmJiB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG5cdFxuXHQgIGlmICghc2VsZWN0aW9uIHx8IHNlbGVjdGlvbi5yYW5nZUNvdW50ID09PSAwKSB7XG5cdCAgICByZXR1cm4gbnVsbDtcblx0ICB9XG5cdFxuXHQgIHZhciBhbmNob3JOb2RlID0gc2VsZWN0aW9uLmFuY2hvck5vZGU7XG5cdCAgdmFyIGFuY2hvck9mZnNldCA9IHNlbGVjdGlvbi5hbmNob3JPZmZzZXQ7XG5cdCAgdmFyIGZvY3VzTm9kZSA9IHNlbGVjdGlvbi5mb2N1c05vZGU7XG5cdCAgdmFyIGZvY3VzT2Zmc2V0ID0gc2VsZWN0aW9uLmZvY3VzT2Zmc2V0O1xuXHRcblx0ICB2YXIgY3VycmVudFJhbmdlID0gc2VsZWN0aW9uLmdldFJhbmdlQXQoMCk7XG5cdFxuXHQgIC8vIEluIEZpcmVmb3gsIHJhbmdlLnN0YXJ0Q29udGFpbmVyIGFuZCByYW5nZS5lbmRDb250YWluZXIgY2FuIGJlIFwiYW5vbnltb3VzXG5cdCAgLy8gZGl2c1wiLCBlLmcuIHRoZSB1cC9kb3duIGJ1dHRvbnMgb24gYW4gPGlucHV0IHR5cGU9XCJudW1iZXJcIj4uIEFub255bW91c1xuXHQgIC8vIGRpdnMgZG8gbm90IHNlZW0gdG8gZXhwb3NlIHByb3BlcnRpZXMsIHRyaWdnZXJpbmcgYSBcIlBlcm1pc3Npb24gZGVuaWVkXG5cdCAgLy8gZXJyb3JcIiBpZiBhbnkgb2YgaXRzIHByb3BlcnRpZXMgYXJlIGFjY2Vzc2VkLiBUaGUgb25seSBzZWVtaW5nbHkgcG9zc2libGVcblx0ICAvLyB3YXkgdG8gYXZvaWQgZXJyb3JpbmcgaXMgdG8gYWNjZXNzIGEgcHJvcGVydHkgdGhhdCB0eXBpY2FsbHkgd29ya3MgZm9yXG5cdCAgLy8gbm9uLWFub255bW91cyBkaXZzIGFuZCBjYXRjaCBhbnkgZXJyb3IgdGhhdCBtYXkgb3RoZXJ3aXNlIGFyaXNlLiBTZWVcblx0ICAvLyBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD0yMDg0Mjdcblx0ICB0cnkge1xuXHQgICAgLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLWV4cHJlc3Npb25zICovXG5cdCAgICBjdXJyZW50UmFuZ2Uuc3RhcnRDb250YWluZXIubm9kZVR5cGU7XG5cdCAgICBjdXJyZW50UmFuZ2UuZW5kQ29udGFpbmVyLm5vZGVUeXBlO1xuXHQgICAgLyogZXNsaW50LWVuYWJsZSBuby11bnVzZWQtZXhwcmVzc2lvbnMgKi9cblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICByZXR1cm4gbnVsbDtcblx0ICB9XG5cdFxuXHQgIC8vIElmIHRoZSBub2RlIGFuZCBvZmZzZXQgdmFsdWVzIGFyZSB0aGUgc2FtZSwgdGhlIHNlbGVjdGlvbiBpcyBjb2xsYXBzZWQuXG5cdCAgLy8gYFNlbGVjdGlvbi5pc0NvbGxhcHNlZGAgaXMgYXZhaWxhYmxlIG5hdGl2ZWx5LCBidXQgSUUgc29tZXRpbWVzIGdldHNcblx0ICAvLyB0aGlzIHZhbHVlIHdyb25nLlxuXHQgIHZhciBpc1NlbGVjdGlvbkNvbGxhcHNlZCA9IGlzQ29sbGFwc2VkKHNlbGVjdGlvbi5hbmNob3JOb2RlLCBzZWxlY3Rpb24uYW5jaG9yT2Zmc2V0LCBzZWxlY3Rpb24uZm9jdXNOb2RlLCBzZWxlY3Rpb24uZm9jdXNPZmZzZXQpO1xuXHRcblx0ICB2YXIgcmFuZ2VMZW5ndGggPSBpc1NlbGVjdGlvbkNvbGxhcHNlZCA/IDAgOiBjdXJyZW50UmFuZ2UudG9TdHJpbmcoKS5sZW5ndGg7XG5cdFxuXHQgIHZhciB0ZW1wUmFuZ2UgPSBjdXJyZW50UmFuZ2UuY2xvbmVSYW5nZSgpO1xuXHQgIHRlbXBSYW5nZS5zZWxlY3ROb2RlQ29udGVudHMobm9kZSk7XG5cdCAgdGVtcFJhbmdlLnNldEVuZChjdXJyZW50UmFuZ2Uuc3RhcnRDb250YWluZXIsIGN1cnJlbnRSYW5nZS5zdGFydE9mZnNldCk7XG5cdFxuXHQgIHZhciBpc1RlbXBSYW5nZUNvbGxhcHNlZCA9IGlzQ29sbGFwc2VkKHRlbXBSYW5nZS5zdGFydENvbnRhaW5lciwgdGVtcFJhbmdlLnN0YXJ0T2Zmc2V0LCB0ZW1wUmFuZ2UuZW5kQ29udGFpbmVyLCB0ZW1wUmFuZ2UuZW5kT2Zmc2V0KTtcblx0XG5cdCAgdmFyIHN0YXJ0ID0gaXNUZW1wUmFuZ2VDb2xsYXBzZWQgPyAwIDogdGVtcFJhbmdlLnRvU3RyaW5nKCkubGVuZ3RoO1xuXHQgIHZhciBlbmQgPSBzdGFydCArIHJhbmdlTGVuZ3RoO1xuXHRcblx0ICAvLyBEZXRlY3Qgd2hldGhlciB0aGUgc2VsZWN0aW9uIGlzIGJhY2t3YXJkLlxuXHQgIHZhciBkZXRlY3Rpb25SYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG5cdCAgZGV0ZWN0aW9uUmFuZ2Uuc2V0U3RhcnQoYW5jaG9yTm9kZSwgYW5jaG9yT2Zmc2V0KTtcblx0ICBkZXRlY3Rpb25SYW5nZS5zZXRFbmQoZm9jdXNOb2RlLCBmb2N1c09mZnNldCk7XG5cdCAgdmFyIGlzQmFja3dhcmQgPSBkZXRlY3Rpb25SYW5nZS5jb2xsYXBzZWQ7XG5cdFxuXHQgIHJldHVybiB7XG5cdCAgICBzdGFydDogaXNCYWNrd2FyZCA/IGVuZCA6IHN0YXJ0LFxuXHQgICAgZW5kOiBpc0JhY2t3YXJkID8gc3RhcnQgOiBlbmRcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogQHBhcmFtIHtET01FbGVtZW50fERPTVRleHROb2RlfSBub2RlXG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBvZmZzZXRzXG5cdCAqL1xuXHRmdW5jdGlvbiBzZXRJRU9mZnNldHMobm9kZSwgb2Zmc2V0cykge1xuXHQgIHZhciByYW5nZSA9IGRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpLmR1cGxpY2F0ZSgpO1xuXHQgIHZhciBzdGFydCwgZW5kO1xuXHRcblx0ICBpZiAodHlwZW9mIG9mZnNldHMuZW5kID09PSAndW5kZWZpbmVkJykge1xuXHQgICAgc3RhcnQgPSBvZmZzZXRzLnN0YXJ0O1xuXHQgICAgZW5kID0gc3RhcnQ7XG5cdCAgfSBlbHNlIGlmIChvZmZzZXRzLnN0YXJ0ID4gb2Zmc2V0cy5lbmQpIHtcblx0ICAgIHN0YXJ0ID0gb2Zmc2V0cy5lbmQ7XG5cdCAgICBlbmQgPSBvZmZzZXRzLnN0YXJ0O1xuXHQgIH0gZWxzZSB7XG5cdCAgICBzdGFydCA9IG9mZnNldHMuc3RhcnQ7XG5cdCAgICBlbmQgPSBvZmZzZXRzLmVuZDtcblx0ICB9XG5cdFxuXHQgIHJhbmdlLm1vdmVUb0VsZW1lbnRUZXh0KG5vZGUpO1xuXHQgIHJhbmdlLm1vdmVTdGFydCgnY2hhcmFjdGVyJywgc3RhcnQpO1xuXHQgIHJhbmdlLnNldEVuZFBvaW50KCdFbmRUb1N0YXJ0JywgcmFuZ2UpO1xuXHQgIHJhbmdlLm1vdmVFbmQoJ2NoYXJhY3RlcicsIGVuZCAtIHN0YXJ0KTtcblx0ICByYW5nZS5zZWxlY3QoKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEluIG1vZGVybiBub24tSUUgYnJvd3NlcnMsIHdlIGNhbiBzdXBwb3J0IGJvdGggZm9yd2FyZCBhbmQgYmFja3dhcmRcblx0ICogc2VsZWN0aW9ucy5cblx0ICpcblx0ICogTm90ZTogSUUxMCsgc3VwcG9ydHMgdGhlIFNlbGVjdGlvbiBvYmplY3QsIGJ1dCBpdCBkb2VzIG5vdCBzdXBwb3J0XG5cdCAqIHRoZSBgZXh0ZW5kYCBtZXRob2QsIHdoaWNoIG1lYW5zIHRoYXQgZXZlbiBpbiBtb2Rlcm4gSUUsIGl0J3Mgbm90IHBvc3NpYmxlXG5cdCAqIHRvIHByb2dyYW1hdGljYWxseSBjcmVhdGUgYSBiYWNrd2FyZCBzZWxlY3Rpb24uIFRodXMsIGZvciBhbGwgSUVcblx0ICogdmVyc2lvbnMsIHdlIHVzZSB0aGUgb2xkIElFIEFQSSB0byBjcmVhdGUgb3VyIHNlbGVjdGlvbnMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RE9NRWxlbWVudHxET01UZXh0Tm9kZX0gbm9kZVxuXHQgKiBAcGFyYW0ge29iamVjdH0gb2Zmc2V0c1xuXHQgKi9cblx0ZnVuY3Rpb24gc2V0TW9kZXJuT2Zmc2V0cyhub2RlLCBvZmZzZXRzKSB7XG5cdCAgaWYgKCF3aW5kb3cuZ2V0U2VsZWN0aW9uKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHRcblx0ICB2YXIgc2VsZWN0aW9uID0gd2luZG93LmdldFNlbGVjdGlvbigpO1xuXHQgIHZhciBsZW5ndGggPSBub2RlW2dldFRleHRDb250ZW50QWNjZXNzb3IoKV0ubGVuZ3RoO1xuXHQgIHZhciBzdGFydCA9IE1hdGgubWluKG9mZnNldHMuc3RhcnQsIGxlbmd0aCk7XG5cdCAgdmFyIGVuZCA9IHR5cGVvZiBvZmZzZXRzLmVuZCA9PT0gJ3VuZGVmaW5lZCcgPyBzdGFydCA6IE1hdGgubWluKG9mZnNldHMuZW5kLCBsZW5ndGgpO1xuXHRcblx0ICAvLyBJRSAxMSB1c2VzIG1vZGVybiBzZWxlY3Rpb24sIGJ1dCBkb2Vzbid0IHN1cHBvcnQgdGhlIGV4dGVuZCBtZXRob2QuXG5cdCAgLy8gRmxpcCBiYWNrd2FyZCBzZWxlY3Rpb25zLCBzbyB3ZSBjYW4gc2V0IHdpdGggYSBzaW5nbGUgcmFuZ2UuXG5cdCAgaWYgKCFzZWxlY3Rpb24uZXh0ZW5kICYmIHN0YXJ0ID4gZW5kKSB7XG5cdCAgICB2YXIgdGVtcCA9IGVuZDtcblx0ICAgIGVuZCA9IHN0YXJ0O1xuXHQgICAgc3RhcnQgPSB0ZW1wO1xuXHQgIH1cblx0XG5cdCAgdmFyIHN0YXJ0TWFya2VyID0gZ2V0Tm9kZUZvckNoYXJhY3Rlck9mZnNldChub2RlLCBzdGFydCk7XG5cdCAgdmFyIGVuZE1hcmtlciA9IGdldE5vZGVGb3JDaGFyYWN0ZXJPZmZzZXQobm9kZSwgZW5kKTtcblx0XG5cdCAgaWYgKHN0YXJ0TWFya2VyICYmIGVuZE1hcmtlcikge1xuXHQgICAgdmFyIHJhbmdlID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtcblx0ICAgIHJhbmdlLnNldFN0YXJ0KHN0YXJ0TWFya2VyLm5vZGUsIHN0YXJ0TWFya2VyLm9mZnNldCk7XG5cdCAgICBzZWxlY3Rpb24ucmVtb3ZlQWxsUmFuZ2VzKCk7XG5cdFxuXHQgICAgaWYgKHN0YXJ0ID4gZW5kKSB7XG5cdCAgICAgIHNlbGVjdGlvbi5hZGRSYW5nZShyYW5nZSk7XG5cdCAgICAgIHNlbGVjdGlvbi5leHRlbmQoZW5kTWFya2VyLm5vZGUsIGVuZE1hcmtlci5vZmZzZXQpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmFuZ2Uuc2V0RW5kKGVuZE1hcmtlci5ub2RlLCBlbmRNYXJrZXIub2Zmc2V0KTtcblx0ICAgICAgc2VsZWN0aW9uLmFkZFJhbmdlKHJhbmdlKTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdHZhciB1c2VJRU9mZnNldHMgPSBFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gJiYgJ3NlbGVjdGlvbicgaW4gZG9jdW1lbnQgJiYgISgnZ2V0U2VsZWN0aW9uJyBpbiB3aW5kb3cpO1xuXHRcblx0dmFyIFJlYWN0RE9NU2VsZWN0aW9uID0ge1xuXHQgIC8qKlxuXHQgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gbm9kZVxuXHQgICAqL1xuXHQgIGdldE9mZnNldHM6IHVzZUlFT2Zmc2V0cyA/IGdldElFT2Zmc2V0cyA6IGdldE1vZGVybk9mZnNldHMsXG5cdFxuXHQgIC8qKlxuXHQgICAqIEBwYXJhbSB7RE9NRWxlbWVudHxET01UZXh0Tm9kZX0gbm9kZVxuXHQgICAqIEBwYXJhbSB7b2JqZWN0fSBvZmZzZXRzXG5cdCAgICovXG5cdCAgc2V0T2Zmc2V0czogdXNlSUVPZmZzZXRzID8gc2V0SUVPZmZzZXRzIDogc2V0TW9kZXJuT2Zmc2V0c1xuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBSZWFjdERPTVNlbGVjdGlvbjtcblxuLyoqKi8gfSksXG4vKiAxMjggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIGdldE5vZGVGb3JDaGFyYWN0ZXJPZmZzZXRcblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHQvKipcblx0ICogR2l2ZW4gYW55IG5vZGUgcmV0dXJuIHRoZSBmaXJzdCBsZWFmIG5vZGUgd2l0aG91dCBjaGlsZHJlbi5cblx0ICpcblx0ICogQHBhcmFtIHtET01FbGVtZW50fERPTVRleHROb2RlfSBub2RlXG5cdCAqIEByZXR1cm4ge0RPTUVsZW1lbnR8RE9NVGV4dE5vZGV9XG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRMZWFmTm9kZShub2RlKSB7XG5cdCAgd2hpbGUgKG5vZGUgJiYgbm9kZS5maXJzdENoaWxkKSB7XG5cdCAgICBub2RlID0gbm9kZS5maXJzdENoaWxkO1xuXHQgIH1cblx0ICByZXR1cm4gbm9kZTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEdldCB0aGUgbmV4dCBzaWJsaW5nIHdpdGhpbiBhIGNvbnRhaW5lci4gVGhpcyB3aWxsIHdhbGsgdXAgdGhlXG5cdCAqIERPTSBpZiBhIG5vZGUncyBzaWJsaW5ncyBoYXZlIGJlZW4gZXhoYXVzdGVkLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0RPTUVsZW1lbnR8RE9NVGV4dE5vZGV9IG5vZGVcblx0ICogQHJldHVybiB7P0RPTUVsZW1lbnR8RE9NVGV4dE5vZGV9XG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRTaWJsaW5nTm9kZShub2RlKSB7XG5cdCAgd2hpbGUgKG5vZGUpIHtcblx0ICAgIGlmIChub2RlLm5leHRTaWJsaW5nKSB7XG5cdCAgICAgIHJldHVybiBub2RlLm5leHRTaWJsaW5nO1xuXHQgICAgfVxuXHQgICAgbm9kZSA9IG5vZGUucGFyZW50Tm9kZTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBHZXQgb2JqZWN0IGRlc2NyaWJpbmcgdGhlIG5vZGVzIHdoaWNoIGNvbnRhaW4gY2hhcmFjdGVycyBhdCBvZmZzZXQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RE9NRWxlbWVudHxET01UZXh0Tm9kZX0gcm9vdFxuXHQgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0XG5cdCAqIEByZXR1cm4gez9vYmplY3R9XG5cdCAqL1xuXHRmdW5jdGlvbiBnZXROb2RlRm9yQ2hhcmFjdGVyT2Zmc2V0KHJvb3QsIG9mZnNldCkge1xuXHQgIHZhciBub2RlID0gZ2V0TGVhZk5vZGUocm9vdCk7XG5cdCAgdmFyIG5vZGVTdGFydCA9IDA7XG5cdCAgdmFyIG5vZGVFbmQgPSAwO1xuXHRcblx0ICB3aGlsZSAobm9kZSkge1xuXHQgICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IDMpIHtcblx0ICAgICAgbm9kZUVuZCA9IG5vZGVTdGFydCArIG5vZGUudGV4dENvbnRlbnQubGVuZ3RoO1xuXHRcblx0ICAgICAgaWYgKG5vZGVTdGFydCA8PSBvZmZzZXQgJiYgbm9kZUVuZCA+PSBvZmZzZXQpIHtcblx0ICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgbm9kZTogbm9kZSxcblx0ICAgICAgICAgIG9mZnNldDogb2Zmc2V0IC0gbm9kZVN0YXJ0XG5cdCAgICAgICAgfTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgbm9kZVN0YXJ0ID0gbm9kZUVuZDtcblx0ICAgIH1cblx0XG5cdCAgICBub2RlID0gZ2V0TGVhZk5vZGUoZ2V0U2libGluZ05vZGUobm9kZSkpO1xuXHQgIH1cblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBnZXROb2RlRm9yQ2hhcmFjdGVyT2Zmc2V0O1xuXG4vKioqLyB9KSxcbi8qIDEyOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgZ2V0QWN0aXZlRWxlbWVudFxuXHQgKiBAdHlwZWNoZWNrc1xuXHQgKi9cblx0XG5cdC8qIGVzbGludC1kaXNhYmxlIGZiLXd3dy90eXBlb2YtdW5kZWZpbmVkICovXG5cdFxuXHQvKipcblx0ICogU2FtZSBhcyBkb2N1bWVudC5hY3RpdmVFbGVtZW50IGJ1dCB3cmFwcyBpbiBhIHRyeS1jYXRjaCBibG9jay4gSW4gSUUgaXQgaXNcblx0ICogbm90IHNhZmUgdG8gY2FsbCBkb2N1bWVudC5hY3RpdmVFbGVtZW50IGlmIHRoZXJlIGlzIG5vdGhpbmcgZm9jdXNlZC5cblx0ICpcblx0ICogVGhlIGFjdGl2ZUVsZW1lbnQgd2lsbCBiZSBudWxsIG9ubHkgaWYgdGhlIGRvY3VtZW50IG9yIGRvY3VtZW50IGJvZHkgaXMgbm90XG5cdCAqIHlldCBkZWZpbmVkLlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0ZnVuY3Rpb24gZ2V0QWN0aXZlRWxlbWVudCgpIC8qP0RPTUVsZW1lbnQqL3tcblx0ICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJykge1xuXHQgICAgcmV0dXJuIG51bGw7XG5cdCAgfVxuXHQgIHRyeSB7XG5cdCAgICByZXR1cm4gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCB8fCBkb2N1bWVudC5ib2R5O1xuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIHJldHVybiBkb2N1bWVudC5ib2R5O1xuXHQgIH1cblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBnZXRBY3RpdmVFbGVtZW50O1xuXG4vKioqLyB9KSxcbi8qIDEzMCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgU2VsZWN0RXZlbnRQbHVnaW5cblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgRXZlbnRDb25zdGFudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKTtcblx0dmFyIEV2ZW50UHJvcGFnYXRvcnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDczKTtcblx0dmFyIEV4ZWN1dGlvbkVudmlyb25tZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0dmFyIFJlYWN0SW5wdXRTZWxlY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyNik7XG5cdHZhciBTeW50aGV0aWNFdmVudCA9IF9fd2VicGFja19yZXF1aXJlX18oNzcpO1xuXHRcblx0dmFyIGdldEFjdGl2ZUVsZW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyOSk7XG5cdHZhciBpc1RleHRJbnB1dEVsZW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgyKTtcblx0dmFyIGtleU9mID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3OSk7XG5cdHZhciBzaGFsbG93RXF1YWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExNyk7XG5cdFxuXHR2YXIgdG9wTGV2ZWxUeXBlcyA9IEV2ZW50Q29uc3RhbnRzLnRvcExldmVsVHlwZXM7XG5cdFxuXHR2YXIgc2tpcFNlbGVjdGlvbkNoYW5nZUV2ZW50ID0gRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NICYmICdkb2N1bWVudE1vZGUnIGluIGRvY3VtZW50ICYmIGRvY3VtZW50LmRvY3VtZW50TW9kZSA8PSAxMTtcblx0XG5cdHZhciBldmVudFR5cGVzID0ge1xuXHQgIHNlbGVjdDoge1xuXHQgICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcblx0ICAgICAgYnViYmxlZDoga2V5T2YoeyBvblNlbGVjdDogbnVsbCB9KSxcblx0ICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25TZWxlY3RDYXB0dXJlOiBudWxsIH0pXG5cdCAgICB9LFxuXHQgICAgZGVwZW5kZW5jaWVzOiBbdG9wTGV2ZWxUeXBlcy50b3BCbHVyLCB0b3BMZXZlbFR5cGVzLnRvcENvbnRleHRNZW51LCB0b3BMZXZlbFR5cGVzLnRvcEZvY3VzLCB0b3BMZXZlbFR5cGVzLnRvcEtleURvd24sIHRvcExldmVsVHlwZXMudG9wTW91c2VEb3duLCB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlVXAsIHRvcExldmVsVHlwZXMudG9wU2VsZWN0aW9uQ2hhbmdlXVxuXHQgIH1cblx0fTtcblx0XG5cdHZhciBhY3RpdmVFbGVtZW50ID0gbnVsbDtcblx0dmFyIGFjdGl2ZUVsZW1lbnRJRCA9IG51bGw7XG5cdHZhciBsYXN0U2VsZWN0aW9uID0gbnVsbDtcblx0dmFyIG1vdXNlRG93biA9IGZhbHNlO1xuXHRcblx0Ly8gVHJhY2sgd2hldGhlciBhIGxpc3RlbmVyIGV4aXN0cyBmb3IgdGhpcyBwbHVnaW4uIElmIG5vbmUgZXhpc3QsIHdlIGRvXG5cdC8vIG5vdCBleHRyYWN0IGV2ZW50cy5cblx0dmFyIGhhc0xpc3RlbmVyID0gZmFsc2U7XG5cdHZhciBPTl9TRUxFQ1RfS0VZID0ga2V5T2YoeyBvblNlbGVjdDogbnVsbCB9KTtcblx0XG5cdC8qKlxuXHQgKiBHZXQgYW4gb2JqZWN0IHdoaWNoIGlzIGEgdW5pcXVlIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBjdXJyZW50IHNlbGVjdGlvbi5cblx0ICpcblx0ICogVGhlIHJldHVybiB2YWx1ZSB3aWxsIG5vdCBiZSBjb25zaXN0ZW50IGFjcm9zcyBub2RlcyBvciBicm93c2VycywgYnV0XG5cdCAqIHR3byBpZGVudGljYWwgc2VsZWN0aW9ucyBvbiB0aGUgc2FtZSBub2RlIHdpbGwgcmV0dXJuIGlkZW50aWNhbCBvYmplY3RzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IG5vZGVcblx0ICogQHJldHVybiB7b2JqZWN0fVxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0U2VsZWN0aW9uKG5vZGUpIHtcblx0ICBpZiAoJ3NlbGVjdGlvblN0YXJ0JyBpbiBub2RlICYmIFJlYWN0SW5wdXRTZWxlY3Rpb24uaGFzU2VsZWN0aW9uQ2FwYWJpbGl0aWVzKG5vZGUpKSB7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICBzdGFydDogbm9kZS5zZWxlY3Rpb25TdGFydCxcblx0ICAgICAgZW5kOiBub2RlLnNlbGVjdGlvbkVuZFxuXHQgICAgfTtcblx0ICB9IGVsc2UgaWYgKHdpbmRvdy5nZXRTZWxlY3Rpb24pIHtcblx0ICAgIHZhciBzZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICBhbmNob3JOb2RlOiBzZWxlY3Rpb24uYW5jaG9yTm9kZSxcblx0ICAgICAgYW5jaG9yT2Zmc2V0OiBzZWxlY3Rpb24uYW5jaG9yT2Zmc2V0LFxuXHQgICAgICBmb2N1c05vZGU6IHNlbGVjdGlvbi5mb2N1c05vZGUsXG5cdCAgICAgIGZvY3VzT2Zmc2V0OiBzZWxlY3Rpb24uZm9jdXNPZmZzZXRcblx0ICAgIH07XG5cdCAgfSBlbHNlIGlmIChkb2N1bWVudC5zZWxlY3Rpb24pIHtcblx0ICAgIHZhciByYW5nZSA9IGRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpO1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgcGFyZW50RWxlbWVudDogcmFuZ2UucGFyZW50RWxlbWVudCgpLFxuXHQgICAgICB0ZXh0OiByYW5nZS50ZXh0LFxuXHQgICAgICB0b3A6IHJhbmdlLmJvdW5kaW5nVG9wLFxuXHQgICAgICBsZWZ0OiByYW5nZS5ib3VuZGluZ0xlZnRcblx0ICAgIH07XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogUG9sbCBzZWxlY3Rpb24gdG8gc2VlIHdoZXRoZXIgaXQncyBjaGFuZ2VkLlxuXHQgKlxuXHQgKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnRcblx0ICogQHJldHVybiB7P1N5bnRoZXRpY0V2ZW50fVxuXHQgKi9cblx0ZnVuY3Rpb24gY29uc3RydWN0U2VsZWN0RXZlbnQobmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KSB7XG5cdCAgLy8gRW5zdXJlIHdlIGhhdmUgdGhlIHJpZ2h0IGVsZW1lbnQsIGFuZCB0aGF0IHRoZSB1c2VyIGlzIG5vdCBkcmFnZ2luZyBhXG5cdCAgLy8gc2VsZWN0aW9uICh0aGlzIG1hdGNoZXMgbmF0aXZlIGBzZWxlY3RgIGV2ZW50IGJlaGF2aW9yKS4gSW4gSFRNTDUsIHNlbGVjdFxuXHQgIC8vIGZpcmVzIG9ubHkgb24gaW5wdXQgYW5kIHRleHRhcmVhIHRodXMgaWYgdGhlcmUncyBubyBmb2N1c2VkIGVsZW1lbnQgd2Vcblx0ICAvLyB3b24ndCBkaXNwYXRjaC5cblx0ICBpZiAobW91c2VEb3duIHx8IGFjdGl2ZUVsZW1lbnQgPT0gbnVsbCB8fCBhY3RpdmVFbGVtZW50ICE9PSBnZXRBY3RpdmVFbGVtZW50KCkpIHtcblx0ICAgIHJldHVybiBudWxsO1xuXHQgIH1cblx0XG5cdCAgLy8gT25seSBmaXJlIHdoZW4gc2VsZWN0aW9uIGhhcyBhY3R1YWxseSBjaGFuZ2VkLlxuXHQgIHZhciBjdXJyZW50U2VsZWN0aW9uID0gZ2V0U2VsZWN0aW9uKGFjdGl2ZUVsZW1lbnQpO1xuXHQgIGlmICghbGFzdFNlbGVjdGlvbiB8fCAhc2hhbGxvd0VxdWFsKGxhc3RTZWxlY3Rpb24sIGN1cnJlbnRTZWxlY3Rpb24pKSB7XG5cdCAgICBsYXN0U2VsZWN0aW9uID0gY3VycmVudFNlbGVjdGlvbjtcblx0XG5cdCAgICB2YXIgc3ludGhldGljRXZlbnQgPSBTeW50aGV0aWNFdmVudC5nZXRQb29sZWQoZXZlbnRUeXBlcy5zZWxlY3QsIGFjdGl2ZUVsZW1lbnRJRCwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcblx0XG5cdCAgICBzeW50aGV0aWNFdmVudC50eXBlID0gJ3NlbGVjdCc7XG5cdCAgICBzeW50aGV0aWNFdmVudC50YXJnZXQgPSBhY3RpdmVFbGVtZW50O1xuXHRcblx0ICAgIEV2ZW50UHJvcGFnYXRvcnMuYWNjdW11bGF0ZVR3b1BoYXNlRGlzcGF0Y2hlcyhzeW50aGV0aWNFdmVudCk7XG5cdFxuXHQgICAgcmV0dXJuIHN5bnRoZXRpY0V2ZW50O1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIG51bGw7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBUaGlzIHBsdWdpbiBjcmVhdGVzIGFuIGBvblNlbGVjdGAgZXZlbnQgdGhhdCBub3JtYWxpemVzIHNlbGVjdCBldmVudHNcblx0ICogYWNyb3NzIGZvcm0gZWxlbWVudHMuXG5cdCAqXG5cdCAqIFN1cHBvcnRlZCBlbGVtZW50cyBhcmU6XG5cdCAqIC0gaW5wdXQgKHNlZSBgaXNUZXh0SW5wdXRFbGVtZW50YClcblx0ICogLSB0ZXh0YXJlYVxuXHQgKiAtIGNvbnRlbnRFZGl0YWJsZVxuXHQgKlxuXHQgKiBUaGlzIGRpZmZlcnMgZnJvbSBuYXRpdmUgYnJvd3NlciBpbXBsZW1lbnRhdGlvbnMgaW4gdGhlIGZvbGxvd2luZyB3YXlzOlxuXHQgKiAtIEZpcmVzIG9uIGNvbnRlbnRFZGl0YWJsZSBmaWVsZHMgYXMgd2VsbCBhcyBpbnB1dHMuXG5cdCAqIC0gRmlyZXMgZm9yIGNvbGxhcHNlZCBzZWxlY3Rpb24uXG5cdCAqIC0gRmlyZXMgYWZ0ZXIgdXNlciBpbnB1dC5cblx0ICovXG5cdHZhciBTZWxlY3RFdmVudFBsdWdpbiA9IHtcblx0XG5cdCAgZXZlbnRUeXBlczogZXZlbnRUeXBlcyxcblx0XG5cdCAgLyoqXG5cdCAgICogQHBhcmFtIHtzdHJpbmd9IHRvcExldmVsVHlwZSBSZWNvcmQgZnJvbSBgRXZlbnRDb25zdGFudHNgLlxuXHQgICAqIEBwYXJhbSB7RE9NRXZlbnRUYXJnZXR9IHRvcExldmVsVGFyZ2V0IFRoZSBsaXN0ZW5pbmcgY29tcG9uZW50IHJvb3Qgbm9kZS5cblx0ICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUYXJnZXRJRCBJRCBvZiBgdG9wTGV2ZWxUYXJnZXRgLlxuXHQgICAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cblx0ICAgKiBAcmV0dXJuIHsqfSBBbiBhY2N1bXVsYXRpb24gb2Ygc3ludGhldGljIGV2ZW50cy5cblx0ICAgKiBAc2VlIHtFdmVudFBsdWdpbkh1Yi5leHRyYWN0RXZlbnRzfVxuXHQgICAqL1xuXHQgIGV4dHJhY3RFdmVudHM6IGZ1bmN0aW9uICh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElELCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpIHtcblx0ICAgIGlmICghaGFzTGlzdGVuZXIpIHtcblx0ICAgICAgcmV0dXJuIG51bGw7XG5cdCAgICB9XG5cdFxuXHQgICAgc3dpdGNoICh0b3BMZXZlbFR5cGUpIHtcblx0ICAgICAgLy8gVHJhY2sgdGhlIGlucHV0IG5vZGUgdGhhdCBoYXMgZm9jdXMuXG5cdCAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BGb2N1czpcblx0ICAgICAgICBpZiAoaXNUZXh0SW5wdXRFbGVtZW50KHRvcExldmVsVGFyZ2V0KSB8fCB0b3BMZXZlbFRhcmdldC5jb250ZW50RWRpdGFibGUgPT09ICd0cnVlJykge1xuXHQgICAgICAgICAgYWN0aXZlRWxlbWVudCA9IHRvcExldmVsVGFyZ2V0O1xuXHQgICAgICAgICAgYWN0aXZlRWxlbWVudElEID0gdG9wTGV2ZWxUYXJnZXRJRDtcblx0ICAgICAgICAgIGxhc3RTZWxlY3Rpb24gPSBudWxsO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBicmVhaztcblx0ICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEJsdXI6XG5cdCAgICAgICAgYWN0aXZlRWxlbWVudCA9IG51bGw7XG5cdCAgICAgICAgYWN0aXZlRWxlbWVudElEID0gbnVsbDtcblx0ICAgICAgICBsYXN0U2VsZWN0aW9uID0gbnVsbDtcblx0ICAgICAgICBicmVhaztcblx0XG5cdCAgICAgIC8vIERvbid0IGZpcmUgdGhlIGV2ZW50IHdoaWxlIHRoZSB1c2VyIGlzIGRyYWdnaW5nLiBUaGlzIG1hdGNoZXMgdGhlXG5cdCAgICAgIC8vIHNlbWFudGljcyBvZiB0aGUgbmF0aXZlIHNlbGVjdCBldmVudC5cblx0ICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlRG93bjpcblx0ICAgICAgICBtb3VzZURvd24gPSB0cnVlO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQ29udGV4dE1lbnU6XG5cdCAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BNb3VzZVVwOlxuXHQgICAgICAgIG1vdXNlRG93biA9IGZhbHNlO1xuXHQgICAgICAgIHJldHVybiBjb25zdHJ1Y3RTZWxlY3RFdmVudChuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xuXHRcblx0ICAgICAgLy8gQ2hyb21lIGFuZCBJRSBmaXJlIG5vbi1zdGFuZGFyZCBldmVudCB3aGVuIHNlbGVjdGlvbiBpcyBjaGFuZ2VkIChhbmRcblx0ICAgICAgLy8gc29tZXRpbWVzIHdoZW4gaXQgaGFzbid0KS4gSUUncyBldmVudCBmaXJlcyBvdXQgb2Ygb3JkZXIgd2l0aCByZXNwZWN0XG5cdCAgICAgIC8vIHRvIGtleSBhbmQgaW5wdXQgZXZlbnRzIG9uIGRlbGV0aW9uLCBzbyB3ZSBkaXNjYXJkIGl0LlxuXHQgICAgICAvL1xuXHQgICAgICAvLyBGaXJlZm94IGRvZXNuJ3Qgc3VwcG9ydCBzZWxlY3Rpb25jaGFuZ2UsIHNvIGNoZWNrIHNlbGVjdGlvbiBzdGF0dXNcblx0ICAgICAgLy8gYWZ0ZXIgZWFjaCBrZXkgZW50cnkuIFRoZSBzZWxlY3Rpb24gY2hhbmdlcyBhZnRlciBrZXlkb3duIGFuZCBiZWZvcmVcblx0ICAgICAgLy8ga2V5dXAsIGJ1dCB3ZSBjaGVjayBvbiBrZXlkb3duIGFzIHdlbGwgaW4gdGhlIGNhc2Ugb2YgaG9sZGluZyBkb3duIGFcblx0ICAgICAgLy8ga2V5LCB3aGVuIG11bHRpcGxlIGtleWRvd24gZXZlbnRzIGFyZSBmaXJlZCBidXQgb25seSBvbmUga2V5dXAgaXMuXG5cdCAgICAgIC8vIFRoaXMgaXMgYWxzbyBvdXIgYXBwcm9hY2ggZm9yIElFIGhhbmRsaW5nLCBmb3IgdGhlIHJlYXNvbiBhYm92ZS5cblx0ICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFNlbGVjdGlvbkNoYW5nZTpcblx0ICAgICAgICBpZiAoc2tpcFNlbGVjdGlvbkNoYW5nZUV2ZW50KSB7XG5cdCAgICAgICAgICBicmVhaztcblx0ICAgICAgICB9XG5cdCAgICAgIC8vIGZhbGxzIHRocm91Z2hcblx0ICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEtleURvd246XG5cdCAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BLZXlVcDpcblx0ICAgICAgICByZXR1cm4gY29uc3RydWN0U2VsZWN0RXZlbnQobmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gbnVsbDtcblx0ICB9LFxuXHRcblx0ICBkaWRQdXRMaXN0ZW5lcjogZnVuY3Rpb24gKGlkLCByZWdpc3RyYXRpb25OYW1lLCBsaXN0ZW5lcikge1xuXHQgICAgaWYgKHJlZ2lzdHJhdGlvbk5hbWUgPT09IE9OX1NFTEVDVF9LRVkpIHtcblx0ICAgICAgaGFzTGlzdGVuZXIgPSB0cnVlO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gU2VsZWN0RXZlbnRQbHVnaW47XG5cbi8qKiovIH0pLFxuLyogMTMxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBTZXJ2ZXJSZWFjdFJvb3RJbmRleFxuXHQgKiBAdHlwZWNoZWNrc1xuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8qKlxuXHQgKiBTaXplIG9mIHRoZSByZWFjdFJvb3QgSUQgc3BhY2UuIFdlIGdlbmVyYXRlIHJhbmRvbSBudW1iZXJzIGZvciBSZWFjdCByb290XG5cdCAqIElEcyBhbmQgaWYgdGhlcmUncyBhIGNvbGxpc2lvbiB0aGUgZXZlbnRzIGFuZCBET00gdXBkYXRlIHN5c3RlbSB3aWxsXG5cdCAqIGdldCBjb25mdXNlZC4gSW4gdGhlIGZ1dHVyZSB3ZSBuZWVkIGEgd2F5IHRvIGdlbmVyYXRlIEdVSURzIGJ1dCBmb3Jcblx0ICogbm93IHRoaXMgd2lsbCB3b3JrIG9uIGEgc21hbGxlciBzY2FsZS5cblx0ICovXG5cdHZhciBHTE9CQUxfTU9VTlRfUE9JTlRfTUFYID0gTWF0aC5wb3coMiwgNTMpO1xuXHRcblx0dmFyIFNlcnZlclJlYWN0Um9vdEluZGV4ID0ge1xuXHQgIGNyZWF0ZVJlYWN0Um9vdEluZGV4OiBmdW5jdGlvbiAoKSB7XG5cdCAgICByZXR1cm4gTWF0aC5jZWlsKE1hdGgucmFuZG9tKCkgKiBHTE9CQUxfTU9VTlRfUE9JTlRfTUFYKTtcblx0ICB9XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFNlcnZlclJlYWN0Um9vdEluZGV4O1xuXG4vKioqLyB9KSxcbi8qIDEzMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzKSB7LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBTaW1wbGVFdmVudFBsdWdpblxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBFdmVudENvbnN0YW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oMzApO1xuXHR2YXIgRXZlbnRMaXN0ZW5lciA9IF9fd2VicGFja19yZXF1aXJlX18oMTE5KTtcblx0dmFyIEV2ZW50UHJvcGFnYXRvcnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDczKTtcblx0dmFyIFJlYWN0TW91bnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4KTtcblx0dmFyIFN5bnRoZXRpY0NsaXBib2FyZEV2ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzMpO1xuXHR2YXIgU3ludGhldGljRXZlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc3KTtcblx0dmFyIFN5bnRoZXRpY0ZvY3VzRXZlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzNCk7XG5cdHZhciBTeW50aGV0aWNLZXlib2FyZEV2ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzUpO1xuXHR2YXIgU3ludGhldGljTW91c2VFdmVudCA9IF9fd2VicGFja19yZXF1aXJlX18oODYpO1xuXHR2YXIgU3ludGhldGljRHJhZ0V2ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzgpO1xuXHR2YXIgU3ludGhldGljVG91Y2hFdmVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTM5KTtcblx0dmFyIFN5bnRoZXRpY1VJRXZlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg3KTtcblx0dmFyIFN5bnRoZXRpY1doZWVsRXZlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0MCk7XG5cdFxuXHR2YXIgZW1wdHlGdW5jdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHR2YXIgZ2V0RXZlbnRDaGFyQ29kZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTM2KTtcblx0dmFyIGludmFyaWFudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHR2YXIga2V5T2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc5KTtcblx0XG5cdHZhciB0b3BMZXZlbFR5cGVzID0gRXZlbnRDb25zdGFudHMudG9wTGV2ZWxUeXBlcztcblx0XG5cdHZhciBldmVudFR5cGVzID0ge1xuXHQgIGFib3J0OiB7XG5cdCAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuXHQgICAgICBidWJibGVkOiBrZXlPZih7IG9uQWJvcnQ6IHRydWUgfSksXG5cdCAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uQWJvcnRDYXB0dXJlOiB0cnVlIH0pXG5cdCAgICB9XG5cdCAgfSxcblx0ICBibHVyOiB7XG5cdCAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuXHQgICAgICBidWJibGVkOiBrZXlPZih7IG9uQmx1cjogdHJ1ZSB9KSxcblx0ICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25CbHVyQ2FwdHVyZTogdHJ1ZSB9KVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgY2FuUGxheToge1xuXHQgICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcblx0ICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkNhblBsYXk6IHRydWUgfSksXG5cdCAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uQ2FuUGxheUNhcHR1cmU6IHRydWUgfSlcblx0ICAgIH1cblx0ICB9LFxuXHQgIGNhblBsYXlUaHJvdWdoOiB7XG5cdCAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuXHQgICAgICBidWJibGVkOiBrZXlPZih7IG9uQ2FuUGxheVRocm91Z2g6IHRydWUgfSksXG5cdCAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uQ2FuUGxheVRocm91Z2hDYXB0dXJlOiB0cnVlIH0pXG5cdCAgICB9XG5cdCAgfSxcblx0ICBjbGljazoge1xuXHQgICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcblx0ICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkNsaWNrOiB0cnVlIH0pLFxuXHQgICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkNsaWNrQ2FwdHVyZTogdHJ1ZSB9KVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgY29udGV4dE1lbnU6IHtcblx0ICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG5cdCAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Db250ZXh0TWVudTogdHJ1ZSB9KSxcblx0ICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Db250ZXh0TWVudUNhcHR1cmU6IHRydWUgfSlcblx0ICAgIH1cblx0ICB9LFxuXHQgIGNvcHk6IHtcblx0ICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG5cdCAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Db3B5OiB0cnVlIH0pLFxuXHQgICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkNvcHlDYXB0dXJlOiB0cnVlIH0pXG5cdCAgICB9XG5cdCAgfSxcblx0ICBjdXQ6IHtcblx0ICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG5cdCAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25DdXQ6IHRydWUgfSksXG5cdCAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uQ3V0Q2FwdHVyZTogdHJ1ZSB9KVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgZG91YmxlQ2xpY2s6IHtcblx0ICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG5cdCAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Eb3VibGVDbGljazogdHJ1ZSB9KSxcblx0ICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Eb3VibGVDbGlja0NhcHR1cmU6IHRydWUgfSlcblx0ICAgIH1cblx0ICB9LFxuXHQgIGRyYWc6IHtcblx0ICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG5cdCAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25EcmFnOiB0cnVlIH0pLFxuXHQgICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkRyYWdDYXB0dXJlOiB0cnVlIH0pXG5cdCAgICB9XG5cdCAgfSxcblx0ICBkcmFnRW5kOiB7XG5cdCAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuXHQgICAgICBidWJibGVkOiBrZXlPZih7IG9uRHJhZ0VuZDogdHJ1ZSB9KSxcblx0ICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25EcmFnRW5kQ2FwdHVyZTogdHJ1ZSB9KVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgZHJhZ0VudGVyOiB7XG5cdCAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuXHQgICAgICBidWJibGVkOiBrZXlPZih7IG9uRHJhZ0VudGVyOiB0cnVlIH0pLFxuXHQgICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkRyYWdFbnRlckNhcHR1cmU6IHRydWUgfSlcblx0ICAgIH1cblx0ICB9LFxuXHQgIGRyYWdFeGl0OiB7XG5cdCAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuXHQgICAgICBidWJibGVkOiBrZXlPZih7IG9uRHJhZ0V4aXQ6IHRydWUgfSksXG5cdCAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uRHJhZ0V4aXRDYXB0dXJlOiB0cnVlIH0pXG5cdCAgICB9XG5cdCAgfSxcblx0ICBkcmFnTGVhdmU6IHtcblx0ICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG5cdCAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25EcmFnTGVhdmU6IHRydWUgfSksXG5cdCAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uRHJhZ0xlYXZlQ2FwdHVyZTogdHJ1ZSB9KVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgZHJhZ092ZXI6IHtcblx0ICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG5cdCAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25EcmFnT3ZlcjogdHJ1ZSB9KSxcblx0ICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25EcmFnT3ZlckNhcHR1cmU6IHRydWUgfSlcblx0ICAgIH1cblx0ICB9LFxuXHQgIGRyYWdTdGFydDoge1xuXHQgICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcblx0ICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkRyYWdTdGFydDogdHJ1ZSB9KSxcblx0ICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25EcmFnU3RhcnRDYXB0dXJlOiB0cnVlIH0pXG5cdCAgICB9XG5cdCAgfSxcblx0ICBkcm9wOiB7XG5cdCAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuXHQgICAgICBidWJibGVkOiBrZXlPZih7IG9uRHJvcDogdHJ1ZSB9KSxcblx0ICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Ecm9wQ2FwdHVyZTogdHJ1ZSB9KVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgZHVyYXRpb25DaGFuZ2U6IHtcblx0ICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG5cdCAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25EdXJhdGlvbkNoYW5nZTogdHJ1ZSB9KSxcblx0ICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25EdXJhdGlvbkNoYW5nZUNhcHR1cmU6IHRydWUgfSlcblx0ICAgIH1cblx0ICB9LFxuXHQgIGVtcHRpZWQ6IHtcblx0ICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG5cdCAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25FbXB0aWVkOiB0cnVlIH0pLFxuXHQgICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkVtcHRpZWRDYXB0dXJlOiB0cnVlIH0pXG5cdCAgICB9XG5cdCAgfSxcblx0ICBlbmNyeXB0ZWQ6IHtcblx0ICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG5cdCAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25FbmNyeXB0ZWQ6IHRydWUgfSksXG5cdCAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uRW5jcnlwdGVkQ2FwdHVyZTogdHJ1ZSB9KVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgZW5kZWQ6IHtcblx0ICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG5cdCAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25FbmRlZDogdHJ1ZSB9KSxcblx0ICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25FbmRlZENhcHR1cmU6IHRydWUgfSlcblx0ICAgIH1cblx0ICB9LFxuXHQgIGVycm9yOiB7XG5cdCAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuXHQgICAgICBidWJibGVkOiBrZXlPZih7IG9uRXJyb3I6IHRydWUgfSksXG5cdCAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uRXJyb3JDYXB0dXJlOiB0cnVlIH0pXG5cdCAgICB9XG5cdCAgfSxcblx0ICBmb2N1czoge1xuXHQgICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcblx0ICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkZvY3VzOiB0cnVlIH0pLFxuXHQgICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkZvY3VzQ2FwdHVyZTogdHJ1ZSB9KVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgaW5wdXQ6IHtcblx0ICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG5cdCAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25JbnB1dDogdHJ1ZSB9KSxcblx0ICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25JbnB1dENhcHR1cmU6IHRydWUgfSlcblx0ICAgIH1cblx0ICB9LFxuXHQgIGtleURvd246IHtcblx0ICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG5cdCAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25LZXlEb3duOiB0cnVlIH0pLFxuXHQgICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbktleURvd25DYXB0dXJlOiB0cnVlIH0pXG5cdCAgICB9XG5cdCAgfSxcblx0ICBrZXlQcmVzczoge1xuXHQgICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcblx0ICAgICAgYnViYmxlZDoga2V5T2YoeyBvbktleVByZXNzOiB0cnVlIH0pLFxuXHQgICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbktleVByZXNzQ2FwdHVyZTogdHJ1ZSB9KVxuXHQgICAgfVxuXHQgIH0sXG5cdCAga2V5VXA6IHtcblx0ICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG5cdCAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25LZXlVcDogdHJ1ZSB9KSxcblx0ICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25LZXlVcENhcHR1cmU6IHRydWUgfSlcblx0ICAgIH1cblx0ICB9LFxuXHQgIGxvYWQ6IHtcblx0ICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG5cdCAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Mb2FkOiB0cnVlIH0pLFxuXHQgICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkxvYWRDYXB0dXJlOiB0cnVlIH0pXG5cdCAgICB9XG5cdCAgfSxcblx0ICBsb2FkZWREYXRhOiB7XG5cdCAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuXHQgICAgICBidWJibGVkOiBrZXlPZih7IG9uTG9hZGVkRGF0YTogdHJ1ZSB9KSxcblx0ICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Mb2FkZWREYXRhQ2FwdHVyZTogdHJ1ZSB9KVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgbG9hZGVkTWV0YWRhdGE6IHtcblx0ICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG5cdCAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Mb2FkZWRNZXRhZGF0YTogdHJ1ZSB9KSxcblx0ICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Mb2FkZWRNZXRhZGF0YUNhcHR1cmU6IHRydWUgfSlcblx0ICAgIH1cblx0ICB9LFxuXHQgIGxvYWRTdGFydDoge1xuXHQgICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcblx0ICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkxvYWRTdGFydDogdHJ1ZSB9KSxcblx0ICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Mb2FkU3RhcnRDYXB0dXJlOiB0cnVlIH0pXG5cdCAgICB9XG5cdCAgfSxcblx0ICAvLyBOb3RlOiBXZSBkbyBub3QgYWxsb3cgbGlzdGVuaW5nIHRvIG1vdXNlT3ZlciBldmVudHMuIEluc3RlYWQsIHVzZSB0aGVcblx0ICAvLyBvbk1vdXNlRW50ZXIvb25Nb3VzZUxlYXZlIGNyZWF0ZWQgYnkgYEVudGVyTGVhdmVFdmVudFBsdWdpbmAuXG5cdCAgbW91c2VEb3duOiB7XG5cdCAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuXHQgICAgICBidWJibGVkOiBrZXlPZih7IG9uTW91c2VEb3duOiB0cnVlIH0pLFxuXHQgICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbk1vdXNlRG93bkNhcHR1cmU6IHRydWUgfSlcblx0ICAgIH1cblx0ICB9LFxuXHQgIG1vdXNlTW92ZToge1xuXHQgICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcblx0ICAgICAgYnViYmxlZDoga2V5T2YoeyBvbk1vdXNlTW92ZTogdHJ1ZSB9KSxcblx0ICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Nb3VzZU1vdmVDYXB0dXJlOiB0cnVlIH0pXG5cdCAgICB9XG5cdCAgfSxcblx0ICBtb3VzZU91dDoge1xuXHQgICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcblx0ICAgICAgYnViYmxlZDoga2V5T2YoeyBvbk1vdXNlT3V0OiB0cnVlIH0pLFxuXHQgICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbk1vdXNlT3V0Q2FwdHVyZTogdHJ1ZSB9KVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgbW91c2VPdmVyOiB7XG5cdCAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuXHQgICAgICBidWJibGVkOiBrZXlPZih7IG9uTW91c2VPdmVyOiB0cnVlIH0pLFxuXHQgICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbk1vdXNlT3ZlckNhcHR1cmU6IHRydWUgfSlcblx0ICAgIH1cblx0ICB9LFxuXHQgIG1vdXNlVXA6IHtcblx0ICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG5cdCAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Nb3VzZVVwOiB0cnVlIH0pLFxuXHQgICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbk1vdXNlVXBDYXB0dXJlOiB0cnVlIH0pXG5cdCAgICB9XG5cdCAgfSxcblx0ICBwYXN0ZToge1xuXHQgICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcblx0ICAgICAgYnViYmxlZDoga2V5T2YoeyBvblBhc3RlOiB0cnVlIH0pLFxuXHQgICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblBhc3RlQ2FwdHVyZTogdHJ1ZSB9KVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgcGF1c2U6IHtcblx0ICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG5cdCAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25QYXVzZTogdHJ1ZSB9KSxcblx0ICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25QYXVzZUNhcHR1cmU6IHRydWUgfSlcblx0ICAgIH1cblx0ICB9LFxuXHQgIHBsYXk6IHtcblx0ICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG5cdCAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25QbGF5OiB0cnVlIH0pLFxuXHQgICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblBsYXlDYXB0dXJlOiB0cnVlIH0pXG5cdCAgICB9XG5cdCAgfSxcblx0ICBwbGF5aW5nOiB7XG5cdCAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuXHQgICAgICBidWJibGVkOiBrZXlPZih7IG9uUGxheWluZzogdHJ1ZSB9KSxcblx0ICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25QbGF5aW5nQ2FwdHVyZTogdHJ1ZSB9KVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgcHJvZ3Jlc3M6IHtcblx0ICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG5cdCAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Qcm9ncmVzczogdHJ1ZSB9KSxcblx0ICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Qcm9ncmVzc0NhcHR1cmU6IHRydWUgfSlcblx0ICAgIH1cblx0ICB9LFxuXHQgIHJhdGVDaGFuZ2U6IHtcblx0ICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG5cdCAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25SYXRlQ2hhbmdlOiB0cnVlIH0pLFxuXHQgICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblJhdGVDaGFuZ2VDYXB0dXJlOiB0cnVlIH0pXG5cdCAgICB9XG5cdCAgfSxcblx0ICByZXNldDoge1xuXHQgICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcblx0ICAgICAgYnViYmxlZDoga2V5T2YoeyBvblJlc2V0OiB0cnVlIH0pLFxuXHQgICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblJlc2V0Q2FwdHVyZTogdHJ1ZSB9KVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgc2Nyb2xsOiB7XG5cdCAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuXHQgICAgICBidWJibGVkOiBrZXlPZih7IG9uU2Nyb2xsOiB0cnVlIH0pLFxuXHQgICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblNjcm9sbENhcHR1cmU6IHRydWUgfSlcblx0ICAgIH1cblx0ICB9LFxuXHQgIHNlZWtlZDoge1xuXHQgICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcblx0ICAgICAgYnViYmxlZDoga2V5T2YoeyBvblNlZWtlZDogdHJ1ZSB9KSxcblx0ICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25TZWVrZWRDYXB0dXJlOiB0cnVlIH0pXG5cdCAgICB9XG5cdCAgfSxcblx0ICBzZWVraW5nOiB7XG5cdCAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuXHQgICAgICBidWJibGVkOiBrZXlPZih7IG9uU2Vla2luZzogdHJ1ZSB9KSxcblx0ICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25TZWVraW5nQ2FwdHVyZTogdHJ1ZSB9KVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgc3RhbGxlZDoge1xuXHQgICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcblx0ICAgICAgYnViYmxlZDoga2V5T2YoeyBvblN0YWxsZWQ6IHRydWUgfSksXG5cdCAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uU3RhbGxlZENhcHR1cmU6IHRydWUgfSlcblx0ICAgIH1cblx0ICB9LFxuXHQgIHN1Ym1pdDoge1xuXHQgICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcblx0ICAgICAgYnViYmxlZDoga2V5T2YoeyBvblN1Ym1pdDogdHJ1ZSB9KSxcblx0ICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25TdWJtaXRDYXB0dXJlOiB0cnVlIH0pXG5cdCAgICB9XG5cdCAgfSxcblx0ICBzdXNwZW5kOiB7XG5cdCAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuXHQgICAgICBidWJibGVkOiBrZXlPZih7IG9uU3VzcGVuZDogdHJ1ZSB9KSxcblx0ICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25TdXNwZW5kQ2FwdHVyZTogdHJ1ZSB9KVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgdGltZVVwZGF0ZToge1xuXHQgICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcblx0ICAgICAgYnViYmxlZDoga2V5T2YoeyBvblRpbWVVcGRhdGU6IHRydWUgfSksXG5cdCAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uVGltZVVwZGF0ZUNhcHR1cmU6IHRydWUgfSlcblx0ICAgIH1cblx0ICB9LFxuXHQgIHRvdWNoQ2FuY2VsOiB7XG5cdCAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuXHQgICAgICBidWJibGVkOiBrZXlPZih7IG9uVG91Y2hDYW5jZWw6IHRydWUgfSksXG5cdCAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uVG91Y2hDYW5jZWxDYXB0dXJlOiB0cnVlIH0pXG5cdCAgICB9XG5cdCAgfSxcblx0ICB0b3VjaEVuZDoge1xuXHQgICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcblx0ICAgICAgYnViYmxlZDoga2V5T2YoeyBvblRvdWNoRW5kOiB0cnVlIH0pLFxuXHQgICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblRvdWNoRW5kQ2FwdHVyZTogdHJ1ZSB9KVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgdG91Y2hNb3ZlOiB7XG5cdCAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuXHQgICAgICBidWJibGVkOiBrZXlPZih7IG9uVG91Y2hNb3ZlOiB0cnVlIH0pLFxuXHQgICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblRvdWNoTW92ZUNhcHR1cmU6IHRydWUgfSlcblx0ICAgIH1cblx0ICB9LFxuXHQgIHRvdWNoU3RhcnQ6IHtcblx0ICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG5cdCAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Ub3VjaFN0YXJ0OiB0cnVlIH0pLFxuXHQgICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblRvdWNoU3RhcnRDYXB0dXJlOiB0cnVlIH0pXG5cdCAgICB9XG5cdCAgfSxcblx0ICB2b2x1bWVDaGFuZ2U6IHtcblx0ICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG5cdCAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Wb2x1bWVDaGFuZ2U6IHRydWUgfSksXG5cdCAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uVm9sdW1lQ2hhbmdlQ2FwdHVyZTogdHJ1ZSB9KVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgd2FpdGluZzoge1xuXHQgICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcblx0ICAgICAgYnViYmxlZDoga2V5T2YoeyBvbldhaXRpbmc6IHRydWUgfSksXG5cdCAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uV2FpdGluZ0NhcHR1cmU6IHRydWUgfSlcblx0ICAgIH1cblx0ICB9LFxuXHQgIHdoZWVsOiB7XG5cdCAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuXHQgICAgICBidWJibGVkOiBrZXlPZih7IG9uV2hlZWw6IHRydWUgfSksXG5cdCAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uV2hlZWxDYXB0dXJlOiB0cnVlIH0pXG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIHRvcExldmVsRXZlbnRzVG9EaXNwYXRjaENvbmZpZyA9IHtcblx0ICB0b3BBYm9ydDogZXZlbnRUeXBlcy5hYm9ydCxcblx0ICB0b3BCbHVyOiBldmVudFR5cGVzLmJsdXIsXG5cdCAgdG9wQ2FuUGxheTogZXZlbnRUeXBlcy5jYW5QbGF5LFxuXHQgIHRvcENhblBsYXlUaHJvdWdoOiBldmVudFR5cGVzLmNhblBsYXlUaHJvdWdoLFxuXHQgIHRvcENsaWNrOiBldmVudFR5cGVzLmNsaWNrLFxuXHQgIHRvcENvbnRleHRNZW51OiBldmVudFR5cGVzLmNvbnRleHRNZW51LFxuXHQgIHRvcENvcHk6IGV2ZW50VHlwZXMuY29weSxcblx0ICB0b3BDdXQ6IGV2ZW50VHlwZXMuY3V0LFxuXHQgIHRvcERvdWJsZUNsaWNrOiBldmVudFR5cGVzLmRvdWJsZUNsaWNrLFxuXHQgIHRvcERyYWc6IGV2ZW50VHlwZXMuZHJhZyxcblx0ICB0b3BEcmFnRW5kOiBldmVudFR5cGVzLmRyYWdFbmQsXG5cdCAgdG9wRHJhZ0VudGVyOiBldmVudFR5cGVzLmRyYWdFbnRlcixcblx0ICB0b3BEcmFnRXhpdDogZXZlbnRUeXBlcy5kcmFnRXhpdCxcblx0ICB0b3BEcmFnTGVhdmU6IGV2ZW50VHlwZXMuZHJhZ0xlYXZlLFxuXHQgIHRvcERyYWdPdmVyOiBldmVudFR5cGVzLmRyYWdPdmVyLFxuXHQgIHRvcERyYWdTdGFydDogZXZlbnRUeXBlcy5kcmFnU3RhcnQsXG5cdCAgdG9wRHJvcDogZXZlbnRUeXBlcy5kcm9wLFxuXHQgIHRvcER1cmF0aW9uQ2hhbmdlOiBldmVudFR5cGVzLmR1cmF0aW9uQ2hhbmdlLFxuXHQgIHRvcEVtcHRpZWQ6IGV2ZW50VHlwZXMuZW1wdGllZCxcblx0ICB0b3BFbmNyeXB0ZWQ6IGV2ZW50VHlwZXMuZW5jcnlwdGVkLFxuXHQgIHRvcEVuZGVkOiBldmVudFR5cGVzLmVuZGVkLFxuXHQgIHRvcEVycm9yOiBldmVudFR5cGVzLmVycm9yLFxuXHQgIHRvcEZvY3VzOiBldmVudFR5cGVzLmZvY3VzLFxuXHQgIHRvcElucHV0OiBldmVudFR5cGVzLmlucHV0LFxuXHQgIHRvcEtleURvd246IGV2ZW50VHlwZXMua2V5RG93bixcblx0ICB0b3BLZXlQcmVzczogZXZlbnRUeXBlcy5rZXlQcmVzcyxcblx0ICB0b3BLZXlVcDogZXZlbnRUeXBlcy5rZXlVcCxcblx0ICB0b3BMb2FkOiBldmVudFR5cGVzLmxvYWQsXG5cdCAgdG9wTG9hZGVkRGF0YTogZXZlbnRUeXBlcy5sb2FkZWREYXRhLFxuXHQgIHRvcExvYWRlZE1ldGFkYXRhOiBldmVudFR5cGVzLmxvYWRlZE1ldGFkYXRhLFxuXHQgIHRvcExvYWRTdGFydDogZXZlbnRUeXBlcy5sb2FkU3RhcnQsXG5cdCAgdG9wTW91c2VEb3duOiBldmVudFR5cGVzLm1vdXNlRG93bixcblx0ICB0b3BNb3VzZU1vdmU6IGV2ZW50VHlwZXMubW91c2VNb3ZlLFxuXHQgIHRvcE1vdXNlT3V0OiBldmVudFR5cGVzLm1vdXNlT3V0LFxuXHQgIHRvcE1vdXNlT3ZlcjogZXZlbnRUeXBlcy5tb3VzZU92ZXIsXG5cdCAgdG9wTW91c2VVcDogZXZlbnRUeXBlcy5tb3VzZVVwLFxuXHQgIHRvcFBhc3RlOiBldmVudFR5cGVzLnBhc3RlLFxuXHQgIHRvcFBhdXNlOiBldmVudFR5cGVzLnBhdXNlLFxuXHQgIHRvcFBsYXk6IGV2ZW50VHlwZXMucGxheSxcblx0ICB0b3BQbGF5aW5nOiBldmVudFR5cGVzLnBsYXlpbmcsXG5cdCAgdG9wUHJvZ3Jlc3M6IGV2ZW50VHlwZXMucHJvZ3Jlc3MsXG5cdCAgdG9wUmF0ZUNoYW5nZTogZXZlbnRUeXBlcy5yYXRlQ2hhbmdlLFxuXHQgIHRvcFJlc2V0OiBldmVudFR5cGVzLnJlc2V0LFxuXHQgIHRvcFNjcm9sbDogZXZlbnRUeXBlcy5zY3JvbGwsXG5cdCAgdG9wU2Vla2VkOiBldmVudFR5cGVzLnNlZWtlZCxcblx0ICB0b3BTZWVraW5nOiBldmVudFR5cGVzLnNlZWtpbmcsXG5cdCAgdG9wU3RhbGxlZDogZXZlbnRUeXBlcy5zdGFsbGVkLFxuXHQgIHRvcFN1Ym1pdDogZXZlbnRUeXBlcy5zdWJtaXQsXG5cdCAgdG9wU3VzcGVuZDogZXZlbnRUeXBlcy5zdXNwZW5kLFxuXHQgIHRvcFRpbWVVcGRhdGU6IGV2ZW50VHlwZXMudGltZVVwZGF0ZSxcblx0ICB0b3BUb3VjaENhbmNlbDogZXZlbnRUeXBlcy50b3VjaENhbmNlbCxcblx0ICB0b3BUb3VjaEVuZDogZXZlbnRUeXBlcy50b3VjaEVuZCxcblx0ICB0b3BUb3VjaE1vdmU6IGV2ZW50VHlwZXMudG91Y2hNb3ZlLFxuXHQgIHRvcFRvdWNoU3RhcnQ6IGV2ZW50VHlwZXMudG91Y2hTdGFydCxcblx0ICB0b3BWb2x1bWVDaGFuZ2U6IGV2ZW50VHlwZXMudm9sdW1lQ2hhbmdlLFxuXHQgIHRvcFdhaXRpbmc6IGV2ZW50VHlwZXMud2FpdGluZyxcblx0ICB0b3BXaGVlbDogZXZlbnRUeXBlcy53aGVlbFxuXHR9O1xuXHRcblx0Zm9yICh2YXIgdHlwZSBpbiB0b3BMZXZlbEV2ZW50c1RvRGlzcGF0Y2hDb25maWcpIHtcblx0ICB0b3BMZXZlbEV2ZW50c1RvRGlzcGF0Y2hDb25maWdbdHlwZV0uZGVwZW5kZW5jaWVzID0gW3R5cGVdO1xuXHR9XG5cdFxuXHR2YXIgT05fQ0xJQ0tfS0VZID0ga2V5T2YoeyBvbkNsaWNrOiBudWxsIH0pO1xuXHR2YXIgb25DbGlja0xpc3RlbmVycyA9IHt9O1xuXHRcblx0dmFyIFNpbXBsZUV2ZW50UGx1Z2luID0ge1xuXHRcblx0ICBldmVudFR5cGVzOiBldmVudFR5cGVzLFxuXHRcblx0ICAvKipcblx0ICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlIFJlY29yZCBmcm9tIGBFdmVudENvbnN0YW50c2AuXG5cdCAgICogQHBhcmFtIHtET01FdmVudFRhcmdldH0gdG9wTGV2ZWxUYXJnZXQgVGhlIGxpc3RlbmluZyBjb21wb25lbnQgcm9vdCBub2RlLlxuXHQgICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFRhcmdldElEIElEIG9mIGB0b3BMZXZlbFRhcmdldGAuXG5cdCAgICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuXHQgICAqIEByZXR1cm4geyp9IEFuIGFjY3VtdWxhdGlvbiBvZiBzeW50aGV0aWMgZXZlbnRzLlxuXHQgICAqIEBzZWUge0V2ZW50UGx1Z2luSHViLmV4dHJhY3RFdmVudHN9XG5cdCAgICovXG5cdCAgZXh0cmFjdEV2ZW50czogZnVuY3Rpb24gKHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuXHQgICAgdmFyIGRpc3BhdGNoQ29uZmlnID0gdG9wTGV2ZWxFdmVudHNUb0Rpc3BhdGNoQ29uZmlnW3RvcExldmVsVHlwZV07XG5cdCAgICBpZiAoIWRpc3BhdGNoQ29uZmlnKSB7XG5cdCAgICAgIHJldHVybiBudWxsO1xuXHQgICAgfVxuXHQgICAgdmFyIEV2ZW50Q29uc3RydWN0b3I7XG5cdCAgICBzd2l0Y2ggKHRvcExldmVsVHlwZSkge1xuXHQgICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQWJvcnQ6XG5cdCAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BDYW5QbGF5OlxuXHQgICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQ2FuUGxheVRocm91Z2g6XG5cdCAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BEdXJhdGlvbkNoYW5nZTpcblx0ICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEVtcHRpZWQ6XG5cdCAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BFbmNyeXB0ZWQ6XG5cdCAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BFbmRlZDpcblx0ICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEVycm9yOlxuXHQgICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wSW5wdXQ6XG5cdCAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BMb2FkOlxuXHQgICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wTG9hZGVkRGF0YTpcblx0ICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcExvYWRlZE1ldGFkYXRhOlxuXHQgICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wTG9hZFN0YXJ0OlxuXHQgICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wUGF1c2U6XG5cdCAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BQbGF5OlxuXHQgICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wUGxheWluZzpcblx0ICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFByb2dyZXNzOlxuXHQgICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wUmF0ZUNoYW5nZTpcblx0ICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFJlc2V0OlxuXHQgICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wU2Vla2VkOlxuXHQgICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wU2Vla2luZzpcblx0ICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFN0YWxsZWQ6XG5cdCAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BTdWJtaXQ6XG5cdCAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BTdXNwZW5kOlxuXHQgICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wVGltZVVwZGF0ZTpcblx0ICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFZvbHVtZUNoYW5nZTpcblx0ICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFdhaXRpbmc6XG5cdCAgICAgICAgLy8gSFRNTCBFdmVudHNcblx0ICAgICAgICAvLyBAc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL2h0bWw1L2luZGV4Lmh0bWwjZXZlbnRzLTBcblx0ICAgICAgICBFdmVudENvbnN0cnVjdG9yID0gU3ludGhldGljRXZlbnQ7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BLZXlQcmVzczpcblx0ICAgICAgICAvLyBGaXJlRm94IGNyZWF0ZXMgYSBrZXlwcmVzcyBldmVudCBmb3IgZnVuY3Rpb24ga2V5cyB0b28uIFRoaXMgcmVtb3Zlc1xuXHQgICAgICAgIC8vIHRoZSB1bndhbnRlZCBrZXlwcmVzcyBldmVudHMuIEVudGVyIGlzIGhvd2V2ZXIgYm90aCBwcmludGFibGUgYW5kXG5cdCAgICAgICAgLy8gbm9uLXByaW50YWJsZS4gT25lIHdvdWxkIGV4cGVjdCBUYWIgdG8gYmUgYXMgd2VsbCAoYnV0IGl0IGlzbid0KS5cblx0ICAgICAgICBpZiAoZ2V0RXZlbnRDaGFyQ29kZShuYXRpdmVFdmVudCkgPT09IDApIHtcblx0ICAgICAgICAgIHJldHVybiBudWxsO1xuXHQgICAgICAgIH1cblx0ICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuXHQgICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wS2V5RG93bjpcblx0ICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEtleVVwOlxuXHQgICAgICAgIEV2ZW50Q29uc3RydWN0b3IgPSBTeW50aGV0aWNLZXlib2FyZEV2ZW50O1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQmx1cjpcblx0ICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEZvY3VzOlxuXHQgICAgICAgIEV2ZW50Q29uc3RydWN0b3IgPSBTeW50aGV0aWNGb2N1c0V2ZW50O1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQ2xpY2s6XG5cdCAgICAgICAgLy8gRmlyZWZveCBjcmVhdGVzIGEgY2xpY2sgZXZlbnQgb24gcmlnaHQgbW91c2UgY2xpY2tzLiBUaGlzIHJlbW92ZXMgdGhlXG5cdCAgICAgICAgLy8gdW53YW50ZWQgY2xpY2sgZXZlbnRzLlxuXHQgICAgICAgIGlmIChuYXRpdmVFdmVudC5idXR0b24gPT09IDIpIHtcblx0ICAgICAgICAgIHJldHVybiBudWxsO1xuXHQgICAgICAgIH1cblx0ICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuXHQgICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQ29udGV4dE1lbnU6XG5cdCAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BEb3VibGVDbGljazpcblx0ICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlRG93bjpcblx0ICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlTW92ZTpcblx0ICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlT3V0OlxuXHQgICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wTW91c2VPdmVyOlxuXHQgICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wTW91c2VVcDpcblx0ICAgICAgICBFdmVudENvbnN0cnVjdG9yID0gU3ludGhldGljTW91c2VFdmVudDtcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcERyYWc6XG5cdCAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BEcmFnRW5kOlxuXHQgICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wRHJhZ0VudGVyOlxuXHQgICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wRHJhZ0V4aXQ6XG5cdCAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BEcmFnTGVhdmU6XG5cdCAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BEcmFnT3Zlcjpcblx0ICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcERyYWdTdGFydDpcblx0ICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcERyb3A6XG5cdCAgICAgICAgRXZlbnRDb25zdHJ1Y3RvciA9IFN5bnRoZXRpY0RyYWdFdmVudDtcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFRvdWNoQ2FuY2VsOlxuXHQgICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wVG91Y2hFbmQ6XG5cdCAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BUb3VjaE1vdmU6XG5cdCAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BUb3VjaFN0YXJ0OlxuXHQgICAgICAgIEV2ZW50Q29uc3RydWN0b3IgPSBTeW50aGV0aWNUb3VjaEV2ZW50O1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wU2Nyb2xsOlxuXHQgICAgICAgIEV2ZW50Q29uc3RydWN0b3IgPSBTeW50aGV0aWNVSUV2ZW50O1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wV2hlZWw6XG5cdCAgICAgICAgRXZlbnRDb25zdHJ1Y3RvciA9IFN5bnRoZXRpY1doZWVsRXZlbnQ7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BDb3B5OlxuXHQgICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQ3V0OlxuXHQgICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wUGFzdGU6XG5cdCAgICAgICAgRXZlbnRDb25zdHJ1Y3RvciA9IFN5bnRoZXRpY0NsaXBib2FyZEV2ZW50O1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgfVxuXHQgICAgIUV2ZW50Q29uc3RydWN0b3IgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnU2ltcGxlRXZlbnRQbHVnaW46IFVuaGFuZGxlZCBldmVudCB0eXBlLCBgJXNgLicsIHRvcExldmVsVHlwZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXHQgICAgdmFyIGV2ZW50ID0gRXZlbnRDb25zdHJ1Y3Rvci5nZXRQb29sZWQoZGlzcGF0Y2hDb25maWcsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG5cdCAgICBFdmVudFByb3BhZ2F0b3JzLmFjY3VtdWxhdGVUd29QaGFzZURpc3BhdGNoZXMoZXZlbnQpO1xuXHQgICAgcmV0dXJuIGV2ZW50O1xuXHQgIH0sXG5cdFxuXHQgIGRpZFB1dExpc3RlbmVyOiBmdW5jdGlvbiAoaWQsIHJlZ2lzdHJhdGlvbk5hbWUsIGxpc3RlbmVyKSB7XG5cdCAgICAvLyBNb2JpbGUgU2FmYXJpIGRvZXMgbm90IGZpcmUgcHJvcGVybHkgYnViYmxlIGNsaWNrIGV2ZW50cyBvblxuXHQgICAgLy8gbm9uLWludGVyYWN0aXZlIGVsZW1lbnRzLCB3aGljaCBtZWFucyBkZWxlZ2F0ZWQgY2xpY2sgbGlzdGVuZXJzIGRvIG5vdFxuXHQgICAgLy8gZmlyZS4gVGhlIHdvcmthcm91bmQgZm9yIHRoaXMgYnVnIGludm9sdmVzIGF0dGFjaGluZyBhbiBlbXB0eSBjbGlja1xuXHQgICAgLy8gbGlzdGVuZXIgb24gdGhlIHRhcmdldCBub2RlLlxuXHQgICAgaWYgKHJlZ2lzdHJhdGlvbk5hbWUgPT09IE9OX0NMSUNLX0tFWSkge1xuXHQgICAgICB2YXIgbm9kZSA9IFJlYWN0TW91bnQuZ2V0Tm9kZShpZCk7XG5cdCAgICAgIGlmICghb25DbGlja0xpc3RlbmVyc1tpZF0pIHtcblx0ICAgICAgICBvbkNsaWNrTGlzdGVuZXJzW2lkXSA9IEV2ZW50TGlzdGVuZXIubGlzdGVuKG5vZGUsICdjbGljaycsIGVtcHR5RnVuY3Rpb24pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgd2lsbERlbGV0ZUxpc3RlbmVyOiBmdW5jdGlvbiAoaWQsIHJlZ2lzdHJhdGlvbk5hbWUpIHtcblx0ICAgIGlmIChyZWdpc3RyYXRpb25OYW1lID09PSBPTl9DTElDS19LRVkpIHtcblx0ICAgICAgb25DbGlja0xpc3RlbmVyc1tpZF0ucmVtb3ZlKCk7XG5cdCAgICAgIGRlbGV0ZSBvbkNsaWNrTGlzdGVuZXJzW2lkXTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBTaW1wbGVFdmVudFBsdWdpbjtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oNCkpKVxuXG4vKioqLyB9KSxcbi8qIDEzMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgU3ludGhldGljQ2xpcGJvYXJkRXZlbnRcblx0ICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgU3ludGhldGljRXZlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc3KTtcblx0XG5cdC8qKlxuXHQgKiBAaW50ZXJmYWNlIEV2ZW50XG5cdCAqIEBzZWUgaHR0cDovL3d3dy53My5vcmcvVFIvY2xpcGJvYXJkLWFwaXMvXG5cdCAqL1xuXHR2YXIgQ2xpcGJvYXJkRXZlbnRJbnRlcmZhY2UgPSB7XG5cdCAgY2xpcGJvYXJkRGF0YTogZnVuY3Rpb24gKGV2ZW50KSB7XG5cdCAgICByZXR1cm4gJ2NsaXBib2FyZERhdGEnIGluIGV2ZW50ID8gZXZlbnQuY2xpcGJvYXJkRGF0YSA6IHdpbmRvdy5jbGlwYm9hcmREYXRhO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBAcGFyYW0ge29iamVjdH0gZGlzcGF0Y2hDb25maWcgQ29uZmlndXJhdGlvbiB1c2VkIHRvIGRpc3BhdGNoIHRoaXMgZXZlbnQuXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBkaXNwYXRjaE1hcmtlciBNYXJrZXIgaWRlbnRpZnlpbmcgdGhlIGV2ZW50IHRhcmdldC5cblx0ICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuXHQgKiBAZXh0ZW5kcyB7U3ludGhldGljVUlFdmVudH1cblx0ICovXG5cdGZ1bmN0aW9uIFN5bnRoZXRpY0NsaXBib2FyZEV2ZW50KGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KSB7XG5cdCAgU3ludGhldGljRXZlbnQuY2FsbCh0aGlzLCBkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG5cdH1cblx0XG5cdFN5bnRoZXRpY0V2ZW50LmF1Z21lbnRDbGFzcyhTeW50aGV0aWNDbGlwYm9hcmRFdmVudCwgQ2xpcGJvYXJkRXZlbnRJbnRlcmZhY2UpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBTeW50aGV0aWNDbGlwYm9hcmRFdmVudDtcblxuLyoqKi8gfSksXG4vKiAxMzQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIFN5bnRoZXRpY0ZvY3VzRXZlbnRcblx0ICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgU3ludGhldGljVUlFdmVudCA9IF9fd2VicGFja19yZXF1aXJlX18oODcpO1xuXHRcblx0LyoqXG5cdCAqIEBpbnRlcmZhY2UgRm9jdXNFdmVudFxuXHQgKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL0RPTS1MZXZlbC0zLUV2ZW50cy9cblx0ICovXG5cdHZhciBGb2N1c0V2ZW50SW50ZXJmYWNlID0ge1xuXHQgIHJlbGF0ZWRUYXJnZXQ6IG51bGxcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBAcGFyYW0ge29iamVjdH0gZGlzcGF0Y2hDb25maWcgQ29uZmlndXJhdGlvbiB1c2VkIHRvIGRpc3BhdGNoIHRoaXMgZXZlbnQuXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBkaXNwYXRjaE1hcmtlciBNYXJrZXIgaWRlbnRpZnlpbmcgdGhlIGV2ZW50IHRhcmdldC5cblx0ICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuXHQgKiBAZXh0ZW5kcyB7U3ludGhldGljVUlFdmVudH1cblx0ICovXG5cdGZ1bmN0aW9uIFN5bnRoZXRpY0ZvY3VzRXZlbnQoZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpIHtcblx0ICBTeW50aGV0aWNVSUV2ZW50LmNhbGwodGhpcywgZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xuXHR9XG5cdFxuXHRTeW50aGV0aWNVSUV2ZW50LmF1Z21lbnRDbGFzcyhTeW50aGV0aWNGb2N1c0V2ZW50LCBGb2N1c0V2ZW50SW50ZXJmYWNlKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gU3ludGhldGljRm9jdXNFdmVudDtcblxuLyoqKi8gfSksXG4vKiAxMzUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIFN5bnRoZXRpY0tleWJvYXJkRXZlbnRcblx0ICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgU3ludGhldGljVUlFdmVudCA9IF9fd2VicGFja19yZXF1aXJlX18oODcpO1xuXHRcblx0dmFyIGdldEV2ZW50Q2hhckNvZGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzNik7XG5cdHZhciBnZXRFdmVudEtleSA9IF9fd2VicGFja19yZXF1aXJlX18oMTM3KTtcblx0dmFyIGdldEV2ZW50TW9kaWZpZXJTdGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oODgpO1xuXHRcblx0LyoqXG5cdCAqIEBpbnRlcmZhY2UgS2V5Ym9hcmRFdmVudFxuXHQgKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL0RPTS1MZXZlbC0zLUV2ZW50cy9cblx0ICovXG5cdHZhciBLZXlib2FyZEV2ZW50SW50ZXJmYWNlID0ge1xuXHQgIGtleTogZ2V0RXZlbnRLZXksXG5cdCAgbG9jYXRpb246IG51bGwsXG5cdCAgY3RybEtleTogbnVsbCxcblx0ICBzaGlmdEtleTogbnVsbCxcblx0ICBhbHRLZXk6IG51bGwsXG5cdCAgbWV0YUtleTogbnVsbCxcblx0ICByZXBlYXQ6IG51bGwsXG5cdCAgbG9jYWxlOiBudWxsLFxuXHQgIGdldE1vZGlmaWVyU3RhdGU6IGdldEV2ZW50TW9kaWZpZXJTdGF0ZSxcblx0ICAvLyBMZWdhY3kgSW50ZXJmYWNlXG5cdCAgY2hhckNvZGU6IGZ1bmN0aW9uIChldmVudCkge1xuXHQgICAgLy8gYGNoYXJDb2RlYCBpcyB0aGUgcmVzdWx0IG9mIGEgS2V5UHJlc3MgZXZlbnQgYW5kIHJlcHJlc2VudHMgdGhlIHZhbHVlIG9mXG5cdCAgICAvLyB0aGUgYWN0dWFsIHByaW50YWJsZSBjaGFyYWN0ZXIuXG5cdFxuXHQgICAgLy8gS2V5UHJlc3MgaXMgZGVwcmVjYXRlZCwgYnV0IGl0cyByZXBsYWNlbWVudCBpcyBub3QgeWV0IGZpbmFsIGFuZCBub3Rcblx0ICAgIC8vIGltcGxlbWVudGVkIGluIGFueSBtYWpvciBicm93c2VyLiBPbmx5IEtleVByZXNzIGhhcyBjaGFyQ29kZS5cblx0ICAgIGlmIChldmVudC50eXBlID09PSAna2V5cHJlc3MnKSB7XG5cdCAgICAgIHJldHVybiBnZXRFdmVudENoYXJDb2RlKGV2ZW50KTtcblx0ICAgIH1cblx0ICAgIHJldHVybiAwO1xuXHQgIH0sXG5cdCAga2V5Q29kZTogZnVuY3Rpb24gKGV2ZW50KSB7XG5cdCAgICAvLyBga2V5Q29kZWAgaXMgdGhlIHJlc3VsdCBvZiBhIEtleURvd24vVXAgZXZlbnQgYW5kIHJlcHJlc2VudHMgdGhlIHZhbHVlIG9mXG5cdCAgICAvLyBwaHlzaWNhbCBrZXlib2FyZCBrZXkuXG5cdFxuXHQgICAgLy8gVGhlIGFjdHVhbCBtZWFuaW5nIG9mIHRoZSB2YWx1ZSBkZXBlbmRzIG9uIHRoZSB1c2Vycycga2V5Ym9hcmQgbGF5b3V0XG5cdCAgICAvLyB3aGljaCBjYW5ub3QgYmUgZGV0ZWN0ZWQuIEFzc3VtaW5nIHRoYXQgaXQgaXMgYSBVUyBrZXlib2FyZCBsYXlvdXRcblx0ICAgIC8vIHByb3ZpZGVzIGEgc3VycHJpc2luZ2x5IGFjY3VyYXRlIG1hcHBpbmcgZm9yIFVTIGFuZCBFdXJvcGVhbiB1c2Vycy5cblx0ICAgIC8vIER1ZSB0byB0aGlzLCBpdCBpcyBsZWZ0IHRvIHRoZSB1c2VyIHRvIGltcGxlbWVudCBhdCB0aGlzIHRpbWUuXG5cdCAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ2tleWRvd24nIHx8IGV2ZW50LnR5cGUgPT09ICdrZXl1cCcpIHtcblx0ICAgICAgcmV0dXJuIGV2ZW50LmtleUNvZGU7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gMDtcblx0ICB9LFxuXHQgIHdoaWNoOiBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgIC8vIGB3aGljaGAgaXMgYW4gYWxpYXMgZm9yIGVpdGhlciBga2V5Q29kZWAgb3IgYGNoYXJDb2RlYCBkZXBlbmRpbmcgb24gdGhlXG5cdCAgICAvLyB0eXBlIG9mIHRoZSBldmVudC5cblx0ICAgIGlmIChldmVudC50eXBlID09PSAna2V5cHJlc3MnKSB7XG5cdCAgICAgIHJldHVybiBnZXRFdmVudENoYXJDb2RlKGV2ZW50KTtcblx0ICAgIH1cblx0ICAgIGlmIChldmVudC50eXBlID09PSAna2V5ZG93bicgfHwgZXZlbnQudHlwZSA9PT0gJ2tleXVwJykge1xuXHQgICAgICByZXR1cm4gZXZlbnQua2V5Q29kZTtcblx0ICAgIH1cblx0ICAgIHJldHVybiAwO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBAcGFyYW0ge29iamVjdH0gZGlzcGF0Y2hDb25maWcgQ29uZmlndXJhdGlvbiB1c2VkIHRvIGRpc3BhdGNoIHRoaXMgZXZlbnQuXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBkaXNwYXRjaE1hcmtlciBNYXJrZXIgaWRlbnRpZnlpbmcgdGhlIGV2ZW50IHRhcmdldC5cblx0ICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuXHQgKiBAZXh0ZW5kcyB7U3ludGhldGljVUlFdmVudH1cblx0ICovXG5cdGZ1bmN0aW9uIFN5bnRoZXRpY0tleWJvYXJkRXZlbnQoZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpIHtcblx0ICBTeW50aGV0aWNVSUV2ZW50LmNhbGwodGhpcywgZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xuXHR9XG5cdFxuXHRTeW50aGV0aWNVSUV2ZW50LmF1Z21lbnRDbGFzcyhTeW50aGV0aWNLZXlib2FyZEV2ZW50LCBLZXlib2FyZEV2ZW50SW50ZXJmYWNlKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gU3ludGhldGljS2V5Ym9hcmRFdmVudDtcblxuLyoqKi8gfSksXG4vKiAxMzYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIGdldEV2ZW50Q2hhckNvZGVcblx0ICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHQvKipcblx0ICogYGNoYXJDb2RlYCByZXByZXNlbnRzIHRoZSBhY3R1YWwgXCJjaGFyYWN0ZXIgY29kZVwiIGFuZCBpcyBzYWZlIHRvIHVzZSB3aXRoXG5cdCAqIGBTdHJpbmcuZnJvbUNoYXJDb2RlYC4gQXMgc3VjaCwgb25seSBrZXlzIHRoYXQgY29ycmVzcG9uZCB0byBwcmludGFibGVcblx0ICogY2hhcmFjdGVycyBwcm9kdWNlIGEgdmFsaWQgYGNoYXJDb2RlYCwgdGhlIG9ubHkgZXhjZXB0aW9uIHRvIHRoaXMgaXMgRW50ZXIuXG5cdCAqIFRoZSBUYWIta2V5IGlzIGNvbnNpZGVyZWQgbm9uLXByaW50YWJsZSBhbmQgZG9lcyBub3QgaGF2ZSBhIGBjaGFyQ29kZWAsXG5cdCAqIHByZXN1bWFibHkgYmVjYXVzZSBpdCBkb2VzIG5vdCBwcm9kdWNlIGEgdGFiLWNoYXJhY3RlciBpbiBicm93c2Vycy5cblx0ICpcblx0ICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuXHQgKiBAcmV0dXJuIHtudW1iZXJ9IE5vcm1hbGl6ZWQgYGNoYXJDb2RlYCBwcm9wZXJ0eS5cblx0ICovXG5cdGZ1bmN0aW9uIGdldEV2ZW50Q2hhckNvZGUobmF0aXZlRXZlbnQpIHtcblx0ICB2YXIgY2hhckNvZGU7XG5cdCAgdmFyIGtleUNvZGUgPSBuYXRpdmVFdmVudC5rZXlDb2RlO1xuXHRcblx0ICBpZiAoJ2NoYXJDb2RlJyBpbiBuYXRpdmVFdmVudCkge1xuXHQgICAgY2hhckNvZGUgPSBuYXRpdmVFdmVudC5jaGFyQ29kZTtcblx0XG5cdCAgICAvLyBGRiBkb2VzIG5vdCBzZXQgYGNoYXJDb2RlYCBmb3IgdGhlIEVudGVyLWtleSwgY2hlY2sgYWdhaW5zdCBga2V5Q29kZWAuXG5cdCAgICBpZiAoY2hhckNvZGUgPT09IDAgJiYga2V5Q29kZSA9PT0gMTMpIHtcblx0ICAgICAgY2hhckNvZGUgPSAxMztcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgLy8gSUU4IGRvZXMgbm90IGltcGxlbWVudCBgY2hhckNvZGVgLCBidXQgYGtleUNvZGVgIGhhcyB0aGUgY29ycmVjdCB2YWx1ZS5cblx0ICAgIGNoYXJDb2RlID0ga2V5Q29kZTtcblx0ICB9XG5cdFxuXHQgIC8vIFNvbWUgbm9uLXByaW50YWJsZSBrZXlzIGFyZSByZXBvcnRlZCBpbiBgY2hhckNvZGVgL2BrZXlDb2RlYCwgZGlzY2FyZCB0aGVtLlxuXHQgIC8vIE11c3Qgbm90IGRpc2NhcmQgdGhlIChub24tKXByaW50YWJsZSBFbnRlci1rZXkuXG5cdCAgaWYgKGNoYXJDb2RlID49IDMyIHx8IGNoYXJDb2RlID09PSAxMykge1xuXHQgICAgcmV0dXJuIGNoYXJDb2RlO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIDA7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZ2V0RXZlbnRDaGFyQ29kZTtcblxuLyoqKi8gfSksXG4vKiAxMzcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIGdldEV2ZW50S2V5XG5cdCAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGdldEV2ZW50Q2hhckNvZGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzNik7XG5cdFxuXHQvKipcblx0ICogTm9ybWFsaXphdGlvbiBvZiBkZXByZWNhdGVkIEhUTUw1IGBrZXlgIHZhbHVlc1xuXHQgKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9LZXlib2FyZEV2ZW50I0tleV9uYW1lc1xuXHQgKi9cblx0dmFyIG5vcm1hbGl6ZUtleSA9IHtcblx0ICAnRXNjJzogJ0VzY2FwZScsXG5cdCAgJ1NwYWNlYmFyJzogJyAnLFxuXHQgICdMZWZ0JzogJ0Fycm93TGVmdCcsXG5cdCAgJ1VwJzogJ0Fycm93VXAnLFxuXHQgICdSaWdodCc6ICdBcnJvd1JpZ2h0Jyxcblx0ICAnRG93bic6ICdBcnJvd0Rvd24nLFxuXHQgICdEZWwnOiAnRGVsZXRlJyxcblx0ICAnV2luJzogJ09TJyxcblx0ICAnTWVudSc6ICdDb250ZXh0TWVudScsXG5cdCAgJ0FwcHMnOiAnQ29udGV4dE1lbnUnLFxuXHQgICdTY3JvbGwnOiAnU2Nyb2xsTG9jaycsXG5cdCAgJ01velByaW50YWJsZUtleSc6ICdVbmlkZW50aWZpZWQnXG5cdH07XG5cdFxuXHQvKipcblx0ICogVHJhbnNsYXRpb24gZnJvbSBsZWdhY3kgYGtleUNvZGVgIHRvIEhUTUw1IGBrZXlgXG5cdCAqIE9ubHkgc3BlY2lhbCBrZXlzIHN1cHBvcnRlZCwgYWxsIG90aGVycyBkZXBlbmQgb24ga2V5Ym9hcmQgbGF5b3V0IG9yIGJyb3dzZXJcblx0ICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvS2V5Ym9hcmRFdmVudCNLZXlfbmFtZXNcblx0ICovXG5cdHZhciB0cmFuc2xhdGVUb0tleSA9IHtcblx0ICA4OiAnQmFja3NwYWNlJyxcblx0ICA5OiAnVGFiJyxcblx0ICAxMjogJ0NsZWFyJyxcblx0ICAxMzogJ0VudGVyJyxcblx0ICAxNjogJ1NoaWZ0Jyxcblx0ICAxNzogJ0NvbnRyb2wnLFxuXHQgIDE4OiAnQWx0Jyxcblx0ICAxOTogJ1BhdXNlJyxcblx0ICAyMDogJ0NhcHNMb2NrJyxcblx0ICAyNzogJ0VzY2FwZScsXG5cdCAgMzI6ICcgJyxcblx0ICAzMzogJ1BhZ2VVcCcsXG5cdCAgMzQ6ICdQYWdlRG93bicsXG5cdCAgMzU6ICdFbmQnLFxuXHQgIDM2OiAnSG9tZScsXG5cdCAgMzc6ICdBcnJvd0xlZnQnLFxuXHQgIDM4OiAnQXJyb3dVcCcsXG5cdCAgMzk6ICdBcnJvd1JpZ2h0Jyxcblx0ICA0MDogJ0Fycm93RG93bicsXG5cdCAgNDU6ICdJbnNlcnQnLFxuXHQgIDQ2OiAnRGVsZXRlJyxcblx0ICAxMTI6ICdGMScsIDExMzogJ0YyJywgMTE0OiAnRjMnLCAxMTU6ICdGNCcsIDExNjogJ0Y1JywgMTE3OiAnRjYnLFxuXHQgIDExODogJ0Y3JywgMTE5OiAnRjgnLCAxMjA6ICdGOScsIDEyMTogJ0YxMCcsIDEyMjogJ0YxMScsIDEyMzogJ0YxMicsXG5cdCAgMTQ0OiAnTnVtTG9jaycsXG5cdCAgMTQ1OiAnU2Nyb2xsTG9jaycsXG5cdCAgMjI0OiAnTWV0YSdcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG5cdCAqIEByZXR1cm4ge3N0cmluZ30gTm9ybWFsaXplZCBga2V5YCBwcm9wZXJ0eS5cblx0ICovXG5cdGZ1bmN0aW9uIGdldEV2ZW50S2V5KG5hdGl2ZUV2ZW50KSB7XG5cdCAgaWYgKG5hdGl2ZUV2ZW50LmtleSkge1xuXHQgICAgLy8gTm9ybWFsaXplIGluY29uc2lzdGVudCB2YWx1ZXMgcmVwb3J0ZWQgYnkgYnJvd3NlcnMgZHVlIHRvXG5cdCAgICAvLyBpbXBsZW1lbnRhdGlvbnMgb2YgYSB3b3JraW5nIGRyYWZ0IHNwZWNpZmljYXRpb24uXG5cdFxuXHQgICAgLy8gRmlyZUZveCBpbXBsZW1lbnRzIGBrZXlgIGJ1dCByZXR1cm5zIGBNb3pQcmludGFibGVLZXlgIGZvciBhbGxcblx0ICAgIC8vIHByaW50YWJsZSBjaGFyYWN0ZXJzIChub3JtYWxpemVkIHRvIGBVbmlkZW50aWZpZWRgKSwgaWdub3JlIGl0LlxuXHQgICAgdmFyIGtleSA9IG5vcm1hbGl6ZUtleVtuYXRpdmVFdmVudC5rZXldIHx8IG5hdGl2ZUV2ZW50LmtleTtcblx0ICAgIGlmIChrZXkgIT09ICdVbmlkZW50aWZpZWQnKSB7XG5cdCAgICAgIHJldHVybiBrZXk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvLyBCcm93c2VyIGRvZXMgbm90IGltcGxlbWVudCBga2V5YCwgcG9seWZpbGwgYXMgbXVjaCBvZiBpdCBhcyB3ZSBjYW4uXG5cdCAgaWYgKG5hdGl2ZUV2ZW50LnR5cGUgPT09ICdrZXlwcmVzcycpIHtcblx0ICAgIHZhciBjaGFyQ29kZSA9IGdldEV2ZW50Q2hhckNvZGUobmF0aXZlRXZlbnQpO1xuXHRcblx0ICAgIC8vIFRoZSBlbnRlci1rZXkgaXMgdGVjaG5pY2FsbHkgYm90aCBwcmludGFibGUgYW5kIG5vbi1wcmludGFibGUgYW5kIGNhblxuXHQgICAgLy8gdGh1cyBiZSBjYXB0dXJlZCBieSBga2V5cHJlc3NgLCBubyBvdGhlciBub24tcHJpbnRhYmxlIGtleSBzaG91bGQuXG5cdCAgICByZXR1cm4gY2hhckNvZGUgPT09IDEzID8gJ0VudGVyJyA6IFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpO1xuXHQgIH1cblx0ICBpZiAobmF0aXZlRXZlbnQudHlwZSA9PT0gJ2tleWRvd24nIHx8IG5hdGl2ZUV2ZW50LnR5cGUgPT09ICdrZXl1cCcpIHtcblx0ICAgIC8vIFdoaWxlIHVzZXIga2V5Ym9hcmQgbGF5b3V0IGRldGVybWluZXMgdGhlIGFjdHVhbCBtZWFuaW5nIG9mIGVhY2hcblx0ICAgIC8vIGBrZXlDb2RlYCB2YWx1ZSwgYWxtb3N0IGFsbCBmdW5jdGlvbiBrZXlzIGhhdmUgYSB1bml2ZXJzYWwgdmFsdWUuXG5cdCAgICByZXR1cm4gdHJhbnNsYXRlVG9LZXlbbmF0aXZlRXZlbnQua2V5Q29kZV0gfHwgJ1VuaWRlbnRpZmllZCc7XG5cdCAgfVxuXHQgIHJldHVybiAnJztcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBnZXRFdmVudEtleTtcblxuLyoqKi8gfSksXG4vKiAxMzggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIFN5bnRoZXRpY0RyYWdFdmVudFxuXHQgKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBTeW50aGV0aWNNb3VzZUV2ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4Nik7XG5cdFxuXHQvKipcblx0ICogQGludGVyZmFjZSBEcmFnRXZlbnRcblx0ICogQHNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi9ET00tTGV2ZWwtMy1FdmVudHMvXG5cdCAqL1xuXHR2YXIgRHJhZ0V2ZW50SW50ZXJmYWNlID0ge1xuXHQgIGRhdGFUcmFuc2ZlcjogbnVsbFxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBkaXNwYXRjaENvbmZpZyBDb25maWd1cmF0aW9uIHVzZWQgdG8gZGlzcGF0Y2ggdGhpcyBldmVudC5cblx0ICogQHBhcmFtIHtzdHJpbmd9IGRpc3BhdGNoTWFya2VyIE1hcmtlciBpZGVudGlmeWluZyB0aGUgZXZlbnQgdGFyZ2V0LlxuXHQgKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG5cdCAqIEBleHRlbmRzIHtTeW50aGV0aWNVSUV2ZW50fVxuXHQgKi9cblx0ZnVuY3Rpb24gU3ludGhldGljRHJhZ0V2ZW50KGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KSB7XG5cdCAgU3ludGhldGljTW91c2VFdmVudC5jYWxsKHRoaXMsIGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcblx0fVxuXHRcblx0U3ludGhldGljTW91c2VFdmVudC5hdWdtZW50Q2xhc3MoU3ludGhldGljRHJhZ0V2ZW50LCBEcmFnRXZlbnRJbnRlcmZhY2UpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBTeW50aGV0aWNEcmFnRXZlbnQ7XG5cbi8qKiovIH0pLFxuLyogMTM5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBTeW50aGV0aWNUb3VjaEV2ZW50XG5cdCAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIFN5bnRoZXRpY1VJRXZlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg3KTtcblx0XG5cdHZhciBnZXRFdmVudE1vZGlmaWVyU3RhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg4KTtcblx0XG5cdC8qKlxuXHQgKiBAaW50ZXJmYWNlIFRvdWNoRXZlbnRcblx0ICogQHNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi90b3VjaC1ldmVudHMvXG5cdCAqL1xuXHR2YXIgVG91Y2hFdmVudEludGVyZmFjZSA9IHtcblx0ICB0b3VjaGVzOiBudWxsLFxuXHQgIHRhcmdldFRvdWNoZXM6IG51bGwsXG5cdCAgY2hhbmdlZFRvdWNoZXM6IG51bGwsXG5cdCAgYWx0S2V5OiBudWxsLFxuXHQgIG1ldGFLZXk6IG51bGwsXG5cdCAgY3RybEtleTogbnVsbCxcblx0ICBzaGlmdEtleTogbnVsbCxcblx0ICBnZXRNb2RpZmllclN0YXRlOiBnZXRFdmVudE1vZGlmaWVyU3RhdGVcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBAcGFyYW0ge29iamVjdH0gZGlzcGF0Y2hDb25maWcgQ29uZmlndXJhdGlvbiB1c2VkIHRvIGRpc3BhdGNoIHRoaXMgZXZlbnQuXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBkaXNwYXRjaE1hcmtlciBNYXJrZXIgaWRlbnRpZnlpbmcgdGhlIGV2ZW50IHRhcmdldC5cblx0ICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuXHQgKiBAZXh0ZW5kcyB7U3ludGhldGljVUlFdmVudH1cblx0ICovXG5cdGZ1bmN0aW9uIFN5bnRoZXRpY1RvdWNoRXZlbnQoZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpIHtcblx0ICBTeW50aGV0aWNVSUV2ZW50LmNhbGwodGhpcywgZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xuXHR9XG5cdFxuXHRTeW50aGV0aWNVSUV2ZW50LmF1Z21lbnRDbGFzcyhTeW50aGV0aWNUb3VjaEV2ZW50LCBUb3VjaEV2ZW50SW50ZXJmYWNlKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gU3ludGhldGljVG91Y2hFdmVudDtcblxuLyoqKi8gfSksXG4vKiAxNDAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIFN5bnRoZXRpY1doZWVsRXZlbnRcblx0ICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgU3ludGhldGljTW91c2VFdmVudCA9IF9fd2VicGFja19yZXF1aXJlX18oODYpO1xuXHRcblx0LyoqXG5cdCAqIEBpbnRlcmZhY2UgV2hlZWxFdmVudFxuXHQgKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL0RPTS1MZXZlbC0zLUV2ZW50cy9cblx0ICovXG5cdHZhciBXaGVlbEV2ZW50SW50ZXJmYWNlID0ge1xuXHQgIGRlbHRhWDogZnVuY3Rpb24gKGV2ZW50KSB7XG5cdCAgICByZXR1cm4gJ2RlbHRhWCcgaW4gZXZlbnQgPyBldmVudC5kZWx0YVggOlxuXHQgICAgLy8gRmFsbGJhY2sgdG8gYHdoZWVsRGVsdGFYYCBmb3IgV2Via2l0IGFuZCBub3JtYWxpemUgKHJpZ2h0IGlzIHBvc2l0aXZlKS5cblx0ICAgICd3aGVlbERlbHRhWCcgaW4gZXZlbnQgPyAtZXZlbnQud2hlZWxEZWx0YVggOiAwO1xuXHQgIH0sXG5cdCAgZGVsdGFZOiBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgIHJldHVybiAnZGVsdGFZJyBpbiBldmVudCA/IGV2ZW50LmRlbHRhWSA6XG5cdCAgICAvLyBGYWxsYmFjayB0byBgd2hlZWxEZWx0YVlgIGZvciBXZWJraXQgYW5kIG5vcm1hbGl6ZSAoZG93biBpcyBwb3NpdGl2ZSkuXG5cdCAgICAnd2hlZWxEZWx0YVknIGluIGV2ZW50ID8gLWV2ZW50LndoZWVsRGVsdGFZIDpcblx0ICAgIC8vIEZhbGxiYWNrIHRvIGB3aGVlbERlbHRhYCBmb3IgSUU8OSBhbmQgbm9ybWFsaXplIChkb3duIGlzIHBvc2l0aXZlKS5cblx0ICAgICd3aGVlbERlbHRhJyBpbiBldmVudCA/IC1ldmVudC53aGVlbERlbHRhIDogMDtcblx0ICB9LFxuXHQgIGRlbHRhWjogbnVsbCxcblx0XG5cdCAgLy8gQnJvd3NlcnMgd2l0aG91dCBcImRlbHRhTW9kZVwiIGlzIHJlcG9ydGluZyBpbiByYXcgd2hlZWwgZGVsdGEgd2hlcmUgb25lXG5cdCAgLy8gbm90Y2ggb24gdGhlIHNjcm9sbCBpcyBhbHdheXMgKy8tIDEyMCwgcm91Z2hseSBlcXVpdmFsZW50IHRvIHBpeGVscy5cblx0ICAvLyBBIGdvb2QgYXBwcm94aW1hdGlvbiBvZiBET01fREVMVEFfTElORSAoMSkgaXMgNSUgb2Ygdmlld3BvcnQgc2l6ZSBvclxuXHQgIC8vIH40MCBwaXhlbHMsIGZvciBET01fREVMVEFfU0NSRUVOICgyKSBpdCBpcyA4Ny41JSBvZiB2aWV3cG9ydCBzaXplLlxuXHQgIGRlbHRhTW9kZTogbnVsbFxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBkaXNwYXRjaENvbmZpZyBDb25maWd1cmF0aW9uIHVzZWQgdG8gZGlzcGF0Y2ggdGhpcyBldmVudC5cblx0ICogQHBhcmFtIHtzdHJpbmd9IGRpc3BhdGNoTWFya2VyIE1hcmtlciBpZGVudGlmeWluZyB0aGUgZXZlbnQgdGFyZ2V0LlxuXHQgKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG5cdCAqIEBleHRlbmRzIHtTeW50aGV0aWNNb3VzZUV2ZW50fVxuXHQgKi9cblx0ZnVuY3Rpb24gU3ludGhldGljV2hlZWxFdmVudChkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuXHQgIFN5bnRoZXRpY01vdXNlRXZlbnQuY2FsbCh0aGlzLCBkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG5cdH1cblx0XG5cdFN5bnRoZXRpY01vdXNlRXZlbnQuYXVnbWVudENsYXNzKFN5bnRoZXRpY1doZWVsRXZlbnQsIFdoZWVsRXZlbnRJbnRlcmZhY2UpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBTeW50aGV0aWNXaGVlbEV2ZW50O1xuXG4vKioqLyB9KSxcbi8qIDE0MSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgU1ZHRE9NUHJvcGVydHlDb25maWdcblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgRE9NUHJvcGVydHkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKTtcblx0XG5cdHZhciBNVVNUX1VTRV9BVFRSSUJVVEUgPSBET01Qcm9wZXJ0eS5pbmplY3Rpb24uTVVTVF9VU0VfQVRUUklCVVRFO1xuXHRcblx0dmFyIE5TID0ge1xuXHQgIHhsaW5rOiAnaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluaycsXG5cdCAgeG1sOiAnaHR0cDovL3d3dy53My5vcmcvWE1MLzE5OTgvbmFtZXNwYWNlJ1xuXHR9O1xuXHRcblx0dmFyIFNWR0RPTVByb3BlcnR5Q29uZmlnID0ge1xuXHQgIFByb3BlcnRpZXM6IHtcblx0ICAgIGNsaXBQYXRoOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG5cdCAgICBjeDogTVVTVF9VU0VfQVRUUklCVVRFLFxuXHQgICAgY3k6IE1VU1RfVVNFX0FUVFJJQlVURSxcblx0ICAgIGQ6IE1VU1RfVVNFX0FUVFJJQlVURSxcblx0ICAgIGR4OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG5cdCAgICBkeTogTVVTVF9VU0VfQVRUUklCVVRFLFxuXHQgICAgZmlsbDogTVVTVF9VU0VfQVRUUklCVVRFLFxuXHQgICAgZmlsbE9wYWNpdHk6IE1VU1RfVVNFX0FUVFJJQlVURSxcblx0ICAgIGZvbnRGYW1pbHk6IE1VU1RfVVNFX0FUVFJJQlVURSxcblx0ICAgIGZvbnRTaXplOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG5cdCAgICBmeDogTVVTVF9VU0VfQVRUUklCVVRFLFxuXHQgICAgZnk6IE1VU1RfVVNFX0FUVFJJQlVURSxcblx0ICAgIGdyYWRpZW50VHJhbnNmb3JtOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG5cdCAgICBncmFkaWVudFVuaXRzOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG5cdCAgICBtYXJrZXJFbmQ6IE1VU1RfVVNFX0FUVFJJQlVURSxcblx0ICAgIG1hcmtlck1pZDogTVVTVF9VU0VfQVRUUklCVVRFLFxuXHQgICAgbWFya2VyU3RhcnQ6IE1VU1RfVVNFX0FUVFJJQlVURSxcblx0ICAgIG9mZnNldDogTVVTVF9VU0VfQVRUUklCVVRFLFxuXHQgICAgb3BhY2l0eTogTVVTVF9VU0VfQVRUUklCVVRFLFxuXHQgICAgcGF0dGVybkNvbnRlbnRVbml0czogTVVTVF9VU0VfQVRUUklCVVRFLFxuXHQgICAgcGF0dGVyblVuaXRzOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG5cdCAgICBwb2ludHM6IE1VU1RfVVNFX0FUVFJJQlVURSxcblx0ICAgIHByZXNlcnZlQXNwZWN0UmF0aW86IE1VU1RfVVNFX0FUVFJJQlVURSxcblx0ICAgIHI6IE1VU1RfVVNFX0FUVFJJQlVURSxcblx0ICAgIHJ4OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG5cdCAgICByeTogTVVTVF9VU0VfQVRUUklCVVRFLFxuXHQgICAgc3ByZWFkTWV0aG9kOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG5cdCAgICBzdG9wQ29sb3I6IE1VU1RfVVNFX0FUVFJJQlVURSxcblx0ICAgIHN0b3BPcGFjaXR5OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG5cdCAgICBzdHJva2U6IE1VU1RfVVNFX0FUVFJJQlVURSxcblx0ICAgIHN0cm9rZURhc2hhcnJheTogTVVTVF9VU0VfQVRUUklCVVRFLFxuXHQgICAgc3Ryb2tlTGluZWNhcDogTVVTVF9VU0VfQVRUUklCVVRFLFxuXHQgICAgc3Ryb2tlT3BhY2l0eTogTVVTVF9VU0VfQVRUUklCVVRFLFxuXHQgICAgc3Ryb2tlV2lkdGg6IE1VU1RfVVNFX0FUVFJJQlVURSxcblx0ICAgIHRleHRBbmNob3I6IE1VU1RfVVNFX0FUVFJJQlVURSxcblx0ICAgIHRyYW5zZm9ybTogTVVTVF9VU0VfQVRUUklCVVRFLFxuXHQgICAgdmVyc2lvbjogTVVTVF9VU0VfQVRUUklCVVRFLFxuXHQgICAgdmlld0JveDogTVVTVF9VU0VfQVRUUklCVVRFLFxuXHQgICAgeDE6IE1VU1RfVVNFX0FUVFJJQlVURSxcblx0ICAgIHgyOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG5cdCAgICB4OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG5cdCAgICB4bGlua0FjdHVhdGU6IE1VU1RfVVNFX0FUVFJJQlVURSxcblx0ICAgIHhsaW5rQXJjcm9sZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuXHQgICAgeGxpbmtIcmVmOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG5cdCAgICB4bGlua1JvbGU6IE1VU1RfVVNFX0FUVFJJQlVURSxcblx0ICAgIHhsaW5rU2hvdzogTVVTVF9VU0VfQVRUUklCVVRFLFxuXHQgICAgeGxpbmtUaXRsZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuXHQgICAgeGxpbmtUeXBlOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG5cdCAgICB4bWxCYXNlOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG5cdCAgICB4bWxMYW5nOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG5cdCAgICB4bWxTcGFjZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuXHQgICAgeTE6IE1VU1RfVVNFX0FUVFJJQlVURSxcblx0ICAgIHkyOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG5cdCAgICB5OiBNVVNUX1VTRV9BVFRSSUJVVEVcblx0ICB9LFxuXHQgIERPTUF0dHJpYnV0ZU5hbWVzcGFjZXM6IHtcblx0ICAgIHhsaW5rQWN0dWF0ZTogTlMueGxpbmssXG5cdCAgICB4bGlua0FyY3JvbGU6IE5TLnhsaW5rLFxuXHQgICAgeGxpbmtIcmVmOiBOUy54bGluayxcblx0ICAgIHhsaW5rUm9sZTogTlMueGxpbmssXG5cdCAgICB4bGlua1Nob3c6IE5TLnhsaW5rLFxuXHQgICAgeGxpbmtUaXRsZTogTlMueGxpbmssXG5cdCAgICB4bGlua1R5cGU6IE5TLnhsaW5rLFxuXHQgICAgeG1sQmFzZTogTlMueG1sLFxuXHQgICAgeG1sTGFuZzogTlMueG1sLFxuXHQgICAgeG1sU3BhY2U6IE5TLnhtbFxuXHQgIH0sXG5cdCAgRE9NQXR0cmlidXRlTmFtZXM6IHtcblx0ICAgIGNsaXBQYXRoOiAnY2xpcC1wYXRoJyxcblx0ICAgIGZpbGxPcGFjaXR5OiAnZmlsbC1vcGFjaXR5Jyxcblx0ICAgIGZvbnRGYW1pbHk6ICdmb250LWZhbWlseScsXG5cdCAgICBmb250U2l6ZTogJ2ZvbnQtc2l6ZScsXG5cdCAgICBncmFkaWVudFRyYW5zZm9ybTogJ2dyYWRpZW50VHJhbnNmb3JtJyxcblx0ICAgIGdyYWRpZW50VW5pdHM6ICdncmFkaWVudFVuaXRzJyxcblx0ICAgIG1hcmtlckVuZDogJ21hcmtlci1lbmQnLFxuXHQgICAgbWFya2VyTWlkOiAnbWFya2VyLW1pZCcsXG5cdCAgICBtYXJrZXJTdGFydDogJ21hcmtlci1zdGFydCcsXG5cdCAgICBwYXR0ZXJuQ29udGVudFVuaXRzOiAncGF0dGVybkNvbnRlbnRVbml0cycsXG5cdCAgICBwYXR0ZXJuVW5pdHM6ICdwYXR0ZXJuVW5pdHMnLFxuXHQgICAgcHJlc2VydmVBc3BlY3RSYXRpbzogJ3ByZXNlcnZlQXNwZWN0UmF0aW8nLFxuXHQgICAgc3ByZWFkTWV0aG9kOiAnc3ByZWFkTWV0aG9kJyxcblx0ICAgIHN0b3BDb2xvcjogJ3N0b3AtY29sb3InLFxuXHQgICAgc3RvcE9wYWNpdHk6ICdzdG9wLW9wYWNpdHknLFxuXHQgICAgc3Ryb2tlRGFzaGFycmF5OiAnc3Ryb2tlLWRhc2hhcnJheScsXG5cdCAgICBzdHJva2VMaW5lY2FwOiAnc3Ryb2tlLWxpbmVjYXAnLFxuXHQgICAgc3Ryb2tlT3BhY2l0eTogJ3N0cm9rZS1vcGFjaXR5Jyxcblx0ICAgIHN0cm9rZVdpZHRoOiAnc3Ryb2tlLXdpZHRoJyxcblx0ICAgIHRleHRBbmNob3I6ICd0ZXh0LWFuY2hvcicsXG5cdCAgICB2aWV3Qm94OiAndmlld0JveCcsXG5cdCAgICB4bGlua0FjdHVhdGU6ICd4bGluazphY3R1YXRlJyxcblx0ICAgIHhsaW5rQXJjcm9sZTogJ3hsaW5rOmFyY3JvbGUnLFxuXHQgICAgeGxpbmtIcmVmOiAneGxpbms6aHJlZicsXG5cdCAgICB4bGlua1JvbGU6ICd4bGluazpyb2xlJyxcblx0ICAgIHhsaW5rU2hvdzogJ3hsaW5rOnNob3cnLFxuXHQgICAgeGxpbmtUaXRsZTogJ3hsaW5rOnRpdGxlJyxcblx0ICAgIHhsaW5rVHlwZTogJ3hsaW5rOnR5cGUnLFxuXHQgICAgeG1sQmFzZTogJ3htbDpiYXNlJyxcblx0ICAgIHhtbExhbmc6ICd4bWw6bGFuZycsXG5cdCAgICB4bWxTcGFjZTogJ3htbDpzcGFjZSdcblx0ICB9XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFNWR0RPTVByb3BlcnR5Q29uZmlnO1xuXG4vKioqLyB9KSxcbi8qIDE0MiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3REZWZhdWx0UGVyZlxuXHQgKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBET01Qcm9wZXJ0eSA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpO1xuXHR2YXIgUmVhY3REZWZhdWx0UGVyZkFuYWx5c2lzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDMpO1xuXHR2YXIgUmVhY3RNb3VudCA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpO1xuXHR2YXIgUmVhY3RQZXJmID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7XG5cdFxuXHR2YXIgcGVyZm9ybWFuY2VOb3cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0NCk7XG5cdFxuXHRmdW5jdGlvbiByb3VuZEZsb2F0KHZhbCkge1xuXHQgIHJldHVybiBNYXRoLmZsb29yKHZhbCAqIDEwMCkgLyAxMDA7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFkZFZhbHVlKG9iaiwga2V5LCB2YWwpIHtcblx0ICBvYmpba2V5XSA9IChvYmpba2V5XSB8fCAwKSArIHZhbDtcblx0fVxuXHRcblx0dmFyIFJlYWN0RGVmYXVsdFBlcmYgPSB7XG5cdCAgX2FsbE1lYXN1cmVtZW50czogW10sIC8vIGxhc3QgaXRlbSBpbiB0aGUgbGlzdCBpcyB0aGUgY3VycmVudCBvbmVcblx0ICBfbW91bnRTdGFjazogWzBdLFxuXHQgIF9pbmplY3RlZDogZmFsc2UsXG5cdFxuXHQgIHN0YXJ0OiBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAoIVJlYWN0RGVmYXVsdFBlcmYuX2luamVjdGVkKSB7XG5cdCAgICAgIFJlYWN0UGVyZi5pbmplY3Rpb24uaW5qZWN0TWVhc3VyZShSZWFjdERlZmF1bHRQZXJmLm1lYXN1cmUpO1xuXHQgICAgfVxuXHRcblx0ICAgIFJlYWN0RGVmYXVsdFBlcmYuX2FsbE1lYXN1cmVtZW50cy5sZW5ndGggPSAwO1xuXHQgICAgUmVhY3RQZXJmLmVuYWJsZU1lYXN1cmUgPSB0cnVlO1xuXHQgIH0sXG5cdFxuXHQgIHN0b3A6IGZ1bmN0aW9uICgpIHtcblx0ICAgIFJlYWN0UGVyZi5lbmFibGVNZWFzdXJlID0gZmFsc2U7XG5cdCAgfSxcblx0XG5cdCAgZ2V0TGFzdE1lYXN1cmVtZW50czogZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuIFJlYWN0RGVmYXVsdFBlcmYuX2FsbE1lYXN1cmVtZW50cztcblx0ICB9LFxuXHRcblx0ICBwcmludEV4Y2x1c2l2ZTogZnVuY3Rpb24gKG1lYXN1cmVtZW50cykge1xuXHQgICAgbWVhc3VyZW1lbnRzID0gbWVhc3VyZW1lbnRzIHx8IFJlYWN0RGVmYXVsdFBlcmYuX2FsbE1lYXN1cmVtZW50cztcblx0ICAgIHZhciBzdW1tYXJ5ID0gUmVhY3REZWZhdWx0UGVyZkFuYWx5c2lzLmdldEV4Y2x1c2l2ZVN1bW1hcnkobWVhc3VyZW1lbnRzKTtcblx0ICAgIGNvbnNvbGUudGFibGUoc3VtbWFyeS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAnQ29tcG9uZW50IGNsYXNzIG5hbWUnOiBpdGVtLmNvbXBvbmVudE5hbWUsXG5cdCAgICAgICAgJ1RvdGFsIGluY2x1c2l2ZSB0aW1lIChtcyknOiByb3VuZEZsb2F0KGl0ZW0uaW5jbHVzaXZlKSxcblx0ICAgICAgICAnRXhjbHVzaXZlIG1vdW50IHRpbWUgKG1zKSc6IHJvdW5kRmxvYXQoaXRlbS5leGNsdXNpdmUpLFxuXHQgICAgICAgICdFeGNsdXNpdmUgcmVuZGVyIHRpbWUgKG1zKSc6IHJvdW5kRmxvYXQoaXRlbS5yZW5kZXIpLFxuXHQgICAgICAgICdNb3VudCB0aW1lIHBlciBpbnN0YW5jZSAobXMpJzogcm91bmRGbG9hdChpdGVtLmV4Y2x1c2l2ZSAvIGl0ZW0uY291bnQpLFxuXHQgICAgICAgICdSZW5kZXIgdGltZSBwZXIgaW5zdGFuY2UgKG1zKSc6IHJvdW5kRmxvYXQoaXRlbS5yZW5kZXIgLyBpdGVtLmNvdW50KSxcblx0ICAgICAgICAnSW5zdGFuY2VzJzogaXRlbS5jb3VudFxuXHQgICAgICB9O1xuXHQgICAgfSkpO1xuXHQgICAgLy8gVE9ETzogUmVhY3REZWZhdWx0UGVyZkFuYWx5c2lzLmdldFRvdGFsVGltZSgpIGRvZXMgbm90IHJldHVybiB0aGUgY29ycmVjdFxuXHQgICAgLy8gbnVtYmVyLlxuXHQgIH0sXG5cdFxuXHQgIHByaW50SW5jbHVzaXZlOiBmdW5jdGlvbiAobWVhc3VyZW1lbnRzKSB7XG5cdCAgICBtZWFzdXJlbWVudHMgPSBtZWFzdXJlbWVudHMgfHwgUmVhY3REZWZhdWx0UGVyZi5fYWxsTWVhc3VyZW1lbnRzO1xuXHQgICAgdmFyIHN1bW1hcnkgPSBSZWFjdERlZmF1bHRQZXJmQW5hbHlzaXMuZ2V0SW5jbHVzaXZlU3VtbWFyeShtZWFzdXJlbWVudHMpO1xuXHQgICAgY29uc29sZS50YWJsZShzdW1tYXJ5Lm1hcChmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICByZXR1cm4ge1xuXHQgICAgICAgICdPd25lciA+IGNvbXBvbmVudCc6IGl0ZW0uY29tcG9uZW50TmFtZSxcblx0ICAgICAgICAnSW5jbHVzaXZlIHRpbWUgKG1zKSc6IHJvdW5kRmxvYXQoaXRlbS50aW1lKSxcblx0ICAgICAgICAnSW5zdGFuY2VzJzogaXRlbS5jb3VudFxuXHQgICAgICB9O1xuXHQgICAgfSkpO1xuXHQgICAgY29uc29sZS5sb2coJ1RvdGFsIHRpbWU6JywgUmVhY3REZWZhdWx0UGVyZkFuYWx5c2lzLmdldFRvdGFsVGltZShtZWFzdXJlbWVudHMpLnRvRml4ZWQoMikgKyAnIG1zJyk7XG5cdCAgfSxcblx0XG5cdCAgZ2V0TWVhc3VyZW1lbnRzU3VtbWFyeU1hcDogZnVuY3Rpb24gKG1lYXN1cmVtZW50cykge1xuXHQgICAgdmFyIHN1bW1hcnkgPSBSZWFjdERlZmF1bHRQZXJmQW5hbHlzaXMuZ2V0SW5jbHVzaXZlU3VtbWFyeShtZWFzdXJlbWVudHMsIHRydWUpO1xuXHQgICAgcmV0dXJuIHN1bW1hcnkubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgIHJldHVybiB7XG5cdCAgICAgICAgJ093bmVyID4gY29tcG9uZW50JzogaXRlbS5jb21wb25lbnROYW1lLFxuXHQgICAgICAgICdXYXN0ZWQgdGltZSAobXMpJzogaXRlbS50aW1lLFxuXHQgICAgICAgICdJbnN0YW5jZXMnOiBpdGVtLmNvdW50XG5cdCAgICAgIH07XG5cdCAgICB9KTtcblx0ICB9LFxuXHRcblx0ICBwcmludFdhc3RlZDogZnVuY3Rpb24gKG1lYXN1cmVtZW50cykge1xuXHQgICAgbWVhc3VyZW1lbnRzID0gbWVhc3VyZW1lbnRzIHx8IFJlYWN0RGVmYXVsdFBlcmYuX2FsbE1lYXN1cmVtZW50cztcblx0ICAgIGNvbnNvbGUudGFibGUoUmVhY3REZWZhdWx0UGVyZi5nZXRNZWFzdXJlbWVudHNTdW1tYXJ5TWFwKG1lYXN1cmVtZW50cykpO1xuXHQgICAgY29uc29sZS5sb2coJ1RvdGFsIHRpbWU6JywgUmVhY3REZWZhdWx0UGVyZkFuYWx5c2lzLmdldFRvdGFsVGltZShtZWFzdXJlbWVudHMpLnRvRml4ZWQoMikgKyAnIG1zJyk7XG5cdCAgfSxcblx0XG5cdCAgcHJpbnRET006IGZ1bmN0aW9uIChtZWFzdXJlbWVudHMpIHtcblx0ICAgIG1lYXN1cmVtZW50cyA9IG1lYXN1cmVtZW50cyB8fCBSZWFjdERlZmF1bHRQZXJmLl9hbGxNZWFzdXJlbWVudHM7XG5cdCAgICB2YXIgc3VtbWFyeSA9IFJlYWN0RGVmYXVsdFBlcmZBbmFseXNpcy5nZXRET01TdW1tYXJ5KG1lYXN1cmVtZW50cyk7XG5cdCAgICBjb25zb2xlLnRhYmxlKHN1bW1hcnkubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgIHZhciByZXN1bHQgPSB7fTtcblx0ICAgICAgcmVzdWx0W0RPTVByb3BlcnR5LklEX0FUVFJJQlVURV9OQU1FXSA9IGl0ZW0uaWQ7XG5cdCAgICAgIHJlc3VsdC50eXBlID0gaXRlbS50eXBlO1xuXHQgICAgICByZXN1bHQuYXJncyA9IEpTT04uc3RyaW5naWZ5KGl0ZW0uYXJncyk7XG5cdCAgICAgIHJldHVybiByZXN1bHQ7XG5cdCAgICB9KSk7XG5cdCAgICBjb25zb2xlLmxvZygnVG90YWwgdGltZTonLCBSZWFjdERlZmF1bHRQZXJmQW5hbHlzaXMuZ2V0VG90YWxUaW1lKG1lYXN1cmVtZW50cykudG9GaXhlZCgyKSArICcgbXMnKTtcblx0ICB9LFxuXHRcblx0ICBfcmVjb3JkV3JpdGU6IGZ1bmN0aW9uIChpZCwgZm5OYW1lLCB0b3RhbFRpbWUsIGFyZ3MpIHtcblx0ICAgIC8vIFRPRE86IHRvdGFsVGltZSBpc24ndCB0aGF0IHVzZWZ1bCBzaW5jZSBpdCBkb2Vzbid0IGNvdW50IHBhaW50cy9yZWZsb3dzXG5cdCAgICB2YXIgd3JpdGVzID0gUmVhY3REZWZhdWx0UGVyZi5fYWxsTWVhc3VyZW1lbnRzW1JlYWN0RGVmYXVsdFBlcmYuX2FsbE1lYXN1cmVtZW50cy5sZW5ndGggLSAxXS53cml0ZXM7XG5cdCAgICB3cml0ZXNbaWRdID0gd3JpdGVzW2lkXSB8fCBbXTtcblx0ICAgIHdyaXRlc1tpZF0ucHVzaCh7XG5cdCAgICAgIHR5cGU6IGZuTmFtZSxcblx0ICAgICAgdGltZTogdG90YWxUaW1lLFxuXHQgICAgICBhcmdzOiBhcmdzXG5cdCAgICB9KTtcblx0ICB9LFxuXHRcblx0ICBtZWFzdXJlOiBmdW5jdGlvbiAobW9kdWxlTmFtZSwgZm5OYW1lLCBmdW5jKSB7XG5cdCAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuXHQgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuXHQgICAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciB0b3RhbFRpbWU7XG5cdCAgICAgIHZhciBydjtcblx0ICAgICAgdmFyIHN0YXJ0O1xuXHRcblx0ICAgICAgaWYgKGZuTmFtZSA9PT0gJ19yZW5kZXJOZXdSb290Q29tcG9uZW50JyB8fCBmbk5hbWUgPT09ICdmbHVzaEJhdGNoZWRVcGRhdGVzJykge1xuXHQgICAgICAgIC8vIEEgXCJtZWFzdXJlbWVudFwiIGlzIGEgc2V0IG9mIG1ldHJpY3MgcmVjb3JkZWQgZm9yIGVhY2ggZmx1c2guIFdlIHdhbnRcblx0ICAgICAgICAvLyB0byBncm91cCB0aGUgbWV0cmljcyBmb3IgYSBnaXZlbiBmbHVzaCB0b2dldGhlciBzbyB3ZSBjYW4gbG9vayBhdCB0aGVcblx0ICAgICAgICAvLyBjb21wb25lbnRzIHRoYXQgcmVuZGVyZWQgYW5kIHRoZSBET00gb3BlcmF0aW9ucyB0aGF0IGFjdHVhbGx5XG5cdCAgICAgICAgLy8gaGFwcGVuZWQgdG8gZGV0ZXJtaW5lIHRoZSBhbW91bnQgb2YgXCJ3YXN0ZWQgd29ya1wiIHBlcmZvcm1lZC5cblx0ICAgICAgICBSZWFjdERlZmF1bHRQZXJmLl9hbGxNZWFzdXJlbWVudHMucHVzaCh7XG5cdCAgICAgICAgICBleGNsdXNpdmU6IHt9LFxuXHQgICAgICAgICAgaW5jbHVzaXZlOiB7fSxcblx0ICAgICAgICAgIHJlbmRlcjoge30sXG5cdCAgICAgICAgICBjb3VudHM6IHt9LFxuXHQgICAgICAgICAgd3JpdGVzOiB7fSxcblx0ICAgICAgICAgIGRpc3BsYXlOYW1lczoge30sXG5cdCAgICAgICAgICB0b3RhbFRpbWU6IDAsXG5cdCAgICAgICAgICBjcmVhdGVkOiB7fVxuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIHN0YXJ0ID0gcGVyZm9ybWFuY2VOb3coKTtcblx0ICAgICAgICBydiA9IGZ1bmMuYXBwbHkodGhpcywgYXJncyk7XG5cdCAgICAgICAgUmVhY3REZWZhdWx0UGVyZi5fYWxsTWVhc3VyZW1lbnRzW1JlYWN0RGVmYXVsdFBlcmYuX2FsbE1lYXN1cmVtZW50cy5sZW5ndGggLSAxXS50b3RhbFRpbWUgPSBwZXJmb3JtYW5jZU5vdygpIC0gc3RhcnQ7XG5cdCAgICAgICAgcmV0dXJuIHJ2O1xuXHQgICAgICB9IGVsc2UgaWYgKGZuTmFtZSA9PT0gJ19tb3VudEltYWdlSW50b05vZGUnIHx8IG1vZHVsZU5hbWUgPT09ICdSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXInIHx8IG1vZHVsZU5hbWUgPT09ICdSZWFjdERPTUlET3BlcmF0aW9ucycgfHwgbW9kdWxlTmFtZSA9PT0gJ0NTU1Byb3BlcnR5T3BlcmF0aW9ucycgfHwgbW9kdWxlTmFtZSA9PT0gJ0RPTUNoaWxkcmVuT3BlcmF0aW9ucycgfHwgbW9kdWxlTmFtZSA9PT0gJ0RPTVByb3BlcnR5T3BlcmF0aW9ucycpIHtcblx0ICAgICAgICBzdGFydCA9IHBlcmZvcm1hbmNlTm93KCk7XG5cdCAgICAgICAgcnYgPSBmdW5jLmFwcGx5KHRoaXMsIGFyZ3MpO1xuXHQgICAgICAgIHRvdGFsVGltZSA9IHBlcmZvcm1hbmNlTm93KCkgLSBzdGFydDtcblx0XG5cdCAgICAgICAgaWYgKGZuTmFtZSA9PT0gJ19tb3VudEltYWdlSW50b05vZGUnKSB7XG5cdCAgICAgICAgICB2YXIgbW91bnRJRCA9IFJlYWN0TW91bnQuZ2V0SUQoYXJnc1sxXSk7XG5cdCAgICAgICAgICBSZWFjdERlZmF1bHRQZXJmLl9yZWNvcmRXcml0ZShtb3VudElELCBmbk5hbWUsIHRvdGFsVGltZSwgYXJnc1swXSk7XG5cdCAgICAgICAgfSBlbHNlIGlmIChmbk5hbWUgPT09ICdkYW5nZXJvdXNseVByb2Nlc3NDaGlsZHJlblVwZGF0ZXMnKSB7XG5cdCAgICAgICAgICAvLyBzcGVjaWFsIGZvcm1hdFxuXHQgICAgICAgICAgYXJnc1swXS5mb3JFYWNoKGZ1bmN0aW9uICh1cGRhdGUpIHtcblx0ICAgICAgICAgICAgdmFyIHdyaXRlQXJncyA9IHt9O1xuXHQgICAgICAgICAgICBpZiAodXBkYXRlLmZyb21JbmRleCAhPT0gbnVsbCkge1xuXHQgICAgICAgICAgICAgIHdyaXRlQXJncy5mcm9tSW5kZXggPSB1cGRhdGUuZnJvbUluZGV4O1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGlmICh1cGRhdGUudG9JbmRleCAhPT0gbnVsbCkge1xuXHQgICAgICAgICAgICAgIHdyaXRlQXJncy50b0luZGV4ID0gdXBkYXRlLnRvSW5kZXg7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgaWYgKHVwZGF0ZS50ZXh0Q29udGVudCAhPT0gbnVsbCkge1xuXHQgICAgICAgICAgICAgIHdyaXRlQXJncy50ZXh0Q29udGVudCA9IHVwZGF0ZS50ZXh0Q29udGVudDtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBpZiAodXBkYXRlLm1hcmt1cEluZGV4ICE9PSBudWxsKSB7XG5cdCAgICAgICAgICAgICAgd3JpdGVBcmdzLm1hcmt1cCA9IGFyZ3NbMV1bdXBkYXRlLm1hcmt1cEluZGV4XTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBSZWFjdERlZmF1bHRQZXJmLl9yZWNvcmRXcml0ZSh1cGRhdGUucGFyZW50SUQsIHVwZGF0ZS50eXBlLCB0b3RhbFRpbWUsIHdyaXRlQXJncyk7XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgLy8gYmFzaWMgZm9ybWF0XG5cdCAgICAgICAgICB2YXIgaWQgPSBhcmdzWzBdO1xuXHQgICAgICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgICAgICAgaWQgPSBSZWFjdE1vdW50LmdldElEKGFyZ3NbMF0pO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgUmVhY3REZWZhdWx0UGVyZi5fcmVjb3JkV3JpdGUoaWQsIGZuTmFtZSwgdG90YWxUaW1lLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmdzLCAxKSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiBydjtcblx0ICAgICAgfSBlbHNlIGlmIChtb2R1bGVOYW1lID09PSAnUmVhY3RDb21wb3NpdGVDb21wb25lbnQnICYmIChmbk5hbWUgPT09ICdtb3VudENvbXBvbmVudCcgfHwgZm5OYW1lID09PSAndXBkYXRlQ29tcG9uZW50JyB8fCAvLyBUT0RPOiByZWNlaXZlQ29tcG9uZW50KCk/XG5cdCAgICAgIGZuTmFtZSA9PT0gJ19yZW5kZXJWYWxpZGF0ZWRDb21wb25lbnQnKSkge1xuXHRcblx0ICAgICAgICBpZiAodGhpcy5fY3VycmVudEVsZW1lbnQudHlwZSA9PT0gUmVhY3RNb3VudC5Ub3BMZXZlbFdyYXBwZXIpIHtcblx0ICAgICAgICAgIHJldHVybiBmdW5jLmFwcGx5KHRoaXMsIGFyZ3MpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdmFyIHJvb3ROb2RlSUQgPSBmbk5hbWUgPT09ICdtb3VudENvbXBvbmVudCcgPyBhcmdzWzBdIDogdGhpcy5fcm9vdE5vZGVJRDtcblx0ICAgICAgICB2YXIgaXNSZW5kZXIgPSBmbk5hbWUgPT09ICdfcmVuZGVyVmFsaWRhdGVkQ29tcG9uZW50Jztcblx0ICAgICAgICB2YXIgaXNNb3VudCA9IGZuTmFtZSA9PT0gJ21vdW50Q29tcG9uZW50Jztcblx0XG5cdCAgICAgICAgdmFyIG1vdW50U3RhY2sgPSBSZWFjdERlZmF1bHRQZXJmLl9tb3VudFN0YWNrO1xuXHQgICAgICAgIHZhciBlbnRyeSA9IFJlYWN0RGVmYXVsdFBlcmYuX2FsbE1lYXN1cmVtZW50c1tSZWFjdERlZmF1bHRQZXJmLl9hbGxNZWFzdXJlbWVudHMubGVuZ3RoIC0gMV07XG5cdFxuXHQgICAgICAgIGlmIChpc1JlbmRlcikge1xuXHQgICAgICAgICAgYWRkVmFsdWUoZW50cnkuY291bnRzLCByb290Tm9kZUlELCAxKTtcblx0ICAgICAgICB9IGVsc2UgaWYgKGlzTW91bnQpIHtcblx0ICAgICAgICAgIGVudHJ5LmNyZWF0ZWRbcm9vdE5vZGVJRF0gPSB0cnVlO1xuXHQgICAgICAgICAgbW91bnRTdGFjay5wdXNoKDApO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgc3RhcnQgPSBwZXJmb3JtYW5jZU5vdygpO1xuXHQgICAgICAgIHJ2ID0gZnVuYy5hcHBseSh0aGlzLCBhcmdzKTtcblx0ICAgICAgICB0b3RhbFRpbWUgPSBwZXJmb3JtYW5jZU5vdygpIC0gc3RhcnQ7XG5cdFxuXHQgICAgICAgIGlmIChpc1JlbmRlcikge1xuXHQgICAgICAgICAgYWRkVmFsdWUoZW50cnkucmVuZGVyLCByb290Tm9kZUlELCB0b3RhbFRpbWUpO1xuXHQgICAgICAgIH0gZWxzZSBpZiAoaXNNb3VudCkge1xuXHQgICAgICAgICAgdmFyIHN1Yk1vdW50VGltZSA9IG1vdW50U3RhY2sucG9wKCk7XG5cdCAgICAgICAgICBtb3VudFN0YWNrW21vdW50U3RhY2subGVuZ3RoIC0gMV0gKz0gdG90YWxUaW1lO1xuXHQgICAgICAgICAgYWRkVmFsdWUoZW50cnkuZXhjbHVzaXZlLCByb290Tm9kZUlELCB0b3RhbFRpbWUgLSBzdWJNb3VudFRpbWUpO1xuXHQgICAgICAgICAgYWRkVmFsdWUoZW50cnkuaW5jbHVzaXZlLCByb290Tm9kZUlELCB0b3RhbFRpbWUpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBhZGRWYWx1ZShlbnRyeS5pbmNsdXNpdmUsIHJvb3ROb2RlSUQsIHRvdGFsVGltZSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBlbnRyeS5kaXNwbGF5TmFtZXNbcm9vdE5vZGVJRF0gPSB7XG5cdCAgICAgICAgICBjdXJyZW50OiB0aGlzLmdldE5hbWUoKSxcblx0ICAgICAgICAgIG93bmVyOiB0aGlzLl9jdXJyZW50RWxlbWVudC5fb3duZXIgPyB0aGlzLl9jdXJyZW50RWxlbWVudC5fb3duZXIuZ2V0TmFtZSgpIDogJzxyb290Pidcblx0ICAgICAgICB9O1xuXHRcblx0ICAgICAgICByZXR1cm4gcnY7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkodGhpcywgYXJncyk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgfVxuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBSZWFjdERlZmF1bHRQZXJmO1xuXG4vKioqLyB9KSxcbi8qIDE0MyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3REZWZhdWx0UGVyZkFuYWx5c2lzXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGFzc2lnbiA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpO1xuXHRcblx0Ly8gRG9uJ3QgdHJ5IHRvIHNhdmUgdXNlcnMgbGVzcyB0aGFuIDEuMm1zIChhIG51bWJlciBJIG1hZGUgdXApXG5cdHZhciBET05UX0NBUkVfVEhSRVNIT0xEID0gMS4yO1xuXHR2YXIgRE9NX09QRVJBVElPTl9UWVBFUyA9IHtcblx0ICAnX21vdW50SW1hZ2VJbnRvTm9kZSc6ICdzZXQgaW5uZXJIVE1MJyxcblx0ICBJTlNFUlRfTUFSS1VQOiAnc2V0IGlubmVySFRNTCcsXG5cdCAgTU9WRV9FWElTVElORzogJ21vdmUnLFxuXHQgIFJFTU9WRV9OT0RFOiAncmVtb3ZlJyxcblx0ICBTRVRfTUFSS1VQOiAnc2V0IGlubmVySFRNTCcsXG5cdCAgVEVYVF9DT05URU5UOiAnc2V0IHRleHRDb250ZW50Jyxcblx0ICAnc2V0VmFsdWVGb3JQcm9wZXJ0eSc6ICd1cGRhdGUgYXR0cmlidXRlJyxcblx0ICAnc2V0VmFsdWVGb3JBdHRyaWJ1dGUnOiAndXBkYXRlIGF0dHJpYnV0ZScsXG5cdCAgJ2RlbGV0ZVZhbHVlRm9yUHJvcGVydHknOiAncmVtb3ZlIGF0dHJpYnV0ZScsXG5cdCAgJ3NldFZhbHVlRm9yU3R5bGVzJzogJ3VwZGF0ZSBzdHlsZXMnLFxuXHQgICdyZXBsYWNlTm9kZVdpdGhNYXJrdXAnOiAncmVwbGFjZScsXG5cdCAgJ3VwZGF0ZVRleHRDb250ZW50JzogJ3NldCB0ZXh0Q29udGVudCdcblx0fTtcblx0XG5cdGZ1bmN0aW9uIGdldFRvdGFsVGltZShtZWFzdXJlbWVudHMpIHtcblx0ICAvLyBUT0RPOiByZXR1cm4gbnVtYmVyIG9mIERPTSBvcHM/IGNvdWxkIGJlIG1pc2xlYWRpbmcuXG5cdCAgLy8gVE9ETzogbWVhc3VyZSBkcm9wcGVkIGZyYW1lcyBhZnRlciByZWNvbmNpbGU/XG5cdCAgLy8gVE9ETzogbG9nIHRvdGFsIHRpbWUgb2YgZWFjaCByZWNvbmNpbGUgYW5kIHRoZSB0b3AtbGV2ZWwgY29tcG9uZW50XG5cdCAgLy8gY2xhc3MgdGhhdCB0cmlnZ2VyZWQgaXQuXG5cdCAgdmFyIHRvdGFsVGltZSA9IDA7XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZWFzdXJlbWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciBtZWFzdXJlbWVudCA9IG1lYXN1cmVtZW50c1tpXTtcblx0ICAgIHRvdGFsVGltZSArPSBtZWFzdXJlbWVudC50b3RhbFRpbWU7XG5cdCAgfVxuXHQgIHJldHVybiB0b3RhbFRpbWU7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdldERPTVN1bW1hcnkobWVhc3VyZW1lbnRzKSB7XG5cdCAgdmFyIGl0ZW1zID0gW107XG5cdCAgbWVhc3VyZW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKG1lYXN1cmVtZW50KSB7XG5cdCAgICBPYmplY3Qua2V5cyhtZWFzdXJlbWVudC53cml0ZXMpLmZvckVhY2goZnVuY3Rpb24gKGlkKSB7XG5cdCAgICAgIG1lYXN1cmVtZW50LndyaXRlc1tpZF0uZm9yRWFjaChmdW5jdGlvbiAod3JpdGUpIHtcblx0ICAgICAgICBpdGVtcy5wdXNoKHtcblx0ICAgICAgICAgIGlkOiBpZCxcblx0ICAgICAgICAgIHR5cGU6IERPTV9PUEVSQVRJT05fVFlQRVNbd3JpdGUudHlwZV0gfHwgd3JpdGUudHlwZSxcblx0ICAgICAgICAgIGFyZ3M6IHdyaXRlLmFyZ3Ncblx0ICAgICAgICB9KTtcblx0ICAgICAgfSk7XG5cdCAgICB9KTtcblx0ICB9KTtcblx0ICByZXR1cm4gaXRlbXM7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdldEV4Y2x1c2l2ZVN1bW1hcnkobWVhc3VyZW1lbnRzKSB7XG5cdCAgdmFyIGNhbmRpZGF0ZXMgPSB7fTtcblx0ICB2YXIgZGlzcGxheU5hbWU7XG5cdFxuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVhc3VyZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICB2YXIgbWVhc3VyZW1lbnQgPSBtZWFzdXJlbWVudHNbaV07XG5cdCAgICB2YXIgYWxsSURzID0gYXNzaWduKHt9LCBtZWFzdXJlbWVudC5leGNsdXNpdmUsIG1lYXN1cmVtZW50LmluY2x1c2l2ZSk7XG5cdFxuXHQgICAgZm9yICh2YXIgaWQgaW4gYWxsSURzKSB7XG5cdCAgICAgIGRpc3BsYXlOYW1lID0gbWVhc3VyZW1lbnQuZGlzcGxheU5hbWVzW2lkXS5jdXJyZW50O1xuXHRcblx0ICAgICAgY2FuZGlkYXRlc1tkaXNwbGF5TmFtZV0gPSBjYW5kaWRhdGVzW2Rpc3BsYXlOYW1lXSB8fCB7XG5cdCAgICAgICAgY29tcG9uZW50TmFtZTogZGlzcGxheU5hbWUsXG5cdCAgICAgICAgaW5jbHVzaXZlOiAwLFxuXHQgICAgICAgIGV4Y2x1c2l2ZTogMCxcblx0ICAgICAgICByZW5kZXI6IDAsXG5cdCAgICAgICAgY291bnQ6IDBcblx0ICAgICAgfTtcblx0ICAgICAgaWYgKG1lYXN1cmVtZW50LnJlbmRlcltpZF0pIHtcblx0ICAgICAgICBjYW5kaWRhdGVzW2Rpc3BsYXlOYW1lXS5yZW5kZXIgKz0gbWVhc3VyZW1lbnQucmVuZGVyW2lkXTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAobWVhc3VyZW1lbnQuZXhjbHVzaXZlW2lkXSkge1xuXHQgICAgICAgIGNhbmRpZGF0ZXNbZGlzcGxheU5hbWVdLmV4Y2x1c2l2ZSArPSBtZWFzdXJlbWVudC5leGNsdXNpdmVbaWRdO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChtZWFzdXJlbWVudC5pbmNsdXNpdmVbaWRdKSB7XG5cdCAgICAgICAgY2FuZGlkYXRlc1tkaXNwbGF5TmFtZV0uaW5jbHVzaXZlICs9IG1lYXN1cmVtZW50LmluY2x1c2l2ZVtpZF07XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKG1lYXN1cmVtZW50LmNvdW50c1tpZF0pIHtcblx0ICAgICAgICBjYW5kaWRhdGVzW2Rpc3BsYXlOYW1lXS5jb3VudCArPSBtZWFzdXJlbWVudC5jb3VudHNbaWRdO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvLyBOb3cgbWFrZSBhIHNvcnRlZCBhcnJheSB3aXRoIHRoZSByZXN1bHRzLlxuXHQgIHZhciBhcnIgPSBbXTtcblx0ICBmb3IgKGRpc3BsYXlOYW1lIGluIGNhbmRpZGF0ZXMpIHtcblx0ICAgIGlmIChjYW5kaWRhdGVzW2Rpc3BsYXlOYW1lXS5leGNsdXNpdmUgPj0gRE9OVF9DQVJFX1RIUkVTSE9MRCkge1xuXHQgICAgICBhcnIucHVzaChjYW5kaWRhdGVzW2Rpc3BsYXlOYW1lXSk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBhcnIuc29ydChmdW5jdGlvbiAoYSwgYikge1xuXHQgICAgcmV0dXJuIGIuZXhjbHVzaXZlIC0gYS5leGNsdXNpdmU7XG5cdCAgfSk7XG5cdFxuXHQgIHJldHVybiBhcnI7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdldEluY2x1c2l2ZVN1bW1hcnkobWVhc3VyZW1lbnRzLCBvbmx5Q2xlYW4pIHtcblx0ICB2YXIgY2FuZGlkYXRlcyA9IHt9O1xuXHQgIHZhciBpbmNsdXNpdmVLZXk7XG5cdFxuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVhc3VyZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICB2YXIgbWVhc3VyZW1lbnQgPSBtZWFzdXJlbWVudHNbaV07XG5cdCAgICB2YXIgYWxsSURzID0gYXNzaWduKHt9LCBtZWFzdXJlbWVudC5leGNsdXNpdmUsIG1lYXN1cmVtZW50LmluY2x1c2l2ZSk7XG5cdCAgICB2YXIgY2xlYW5Db21wb25lbnRzO1xuXHRcblx0ICAgIGlmIChvbmx5Q2xlYW4pIHtcblx0ICAgICAgY2xlYW5Db21wb25lbnRzID0gZ2V0VW5jaGFuZ2VkQ29tcG9uZW50cyhtZWFzdXJlbWVudCk7XG5cdCAgICB9XG5cdFxuXHQgICAgZm9yICh2YXIgaWQgaW4gYWxsSURzKSB7XG5cdCAgICAgIGlmIChvbmx5Q2xlYW4gJiYgIWNsZWFuQ29tcG9uZW50c1tpZF0pIHtcblx0ICAgICAgICBjb250aW51ZTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIGRpc3BsYXlOYW1lID0gbWVhc3VyZW1lbnQuZGlzcGxheU5hbWVzW2lkXTtcblx0XG5cdCAgICAgIC8vIEluY2x1c2l2ZSB0aW1lIGlzIG5vdCB1c2VmdWwgZm9yIG1hbnkgY29tcG9uZW50cyB3aXRob3V0IGtub3dpbmcgd2hlcmVcblx0ICAgICAgLy8gdGhleSBhcmUgaW5zdGFudGlhdGVkLiBTbyB3ZSBhZ2dyZWdhdGUgaW5jbHVzaXZlIHRpbWUgd2l0aCBib3RoIHRoZVxuXHQgICAgICAvLyBvd25lciBhbmQgY3VycmVudCBkaXNwbGF5TmFtZSBhcyB0aGUga2V5LlxuXHQgICAgICBpbmNsdXNpdmVLZXkgPSBkaXNwbGF5TmFtZS5vd25lciArICcgPiAnICsgZGlzcGxheU5hbWUuY3VycmVudDtcblx0XG5cdCAgICAgIGNhbmRpZGF0ZXNbaW5jbHVzaXZlS2V5XSA9IGNhbmRpZGF0ZXNbaW5jbHVzaXZlS2V5XSB8fCB7XG5cdCAgICAgICAgY29tcG9uZW50TmFtZTogaW5jbHVzaXZlS2V5LFxuXHQgICAgICAgIHRpbWU6IDAsXG5cdCAgICAgICAgY291bnQ6IDBcblx0ICAgICAgfTtcblx0XG5cdCAgICAgIGlmIChtZWFzdXJlbWVudC5pbmNsdXNpdmVbaWRdKSB7XG5cdCAgICAgICAgY2FuZGlkYXRlc1tpbmNsdXNpdmVLZXldLnRpbWUgKz0gbWVhc3VyZW1lbnQuaW5jbHVzaXZlW2lkXTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAobWVhc3VyZW1lbnQuY291bnRzW2lkXSkge1xuXHQgICAgICAgIGNhbmRpZGF0ZXNbaW5jbHVzaXZlS2V5XS5jb3VudCArPSBtZWFzdXJlbWVudC5jb3VudHNbaWRdO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvLyBOb3cgbWFrZSBhIHNvcnRlZCBhcnJheSB3aXRoIHRoZSByZXN1bHRzLlxuXHQgIHZhciBhcnIgPSBbXTtcblx0ICBmb3IgKGluY2x1c2l2ZUtleSBpbiBjYW5kaWRhdGVzKSB7XG5cdCAgICBpZiAoY2FuZGlkYXRlc1tpbmNsdXNpdmVLZXldLnRpbWUgPj0gRE9OVF9DQVJFX1RIUkVTSE9MRCkge1xuXHQgICAgICBhcnIucHVzaChjYW5kaWRhdGVzW2luY2x1c2l2ZUtleV0pO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgYXJyLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcblx0ICAgIHJldHVybiBiLnRpbWUgLSBhLnRpbWU7XG5cdCAgfSk7XG5cdFxuXHQgIHJldHVybiBhcnI7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdldFVuY2hhbmdlZENvbXBvbmVudHMobWVhc3VyZW1lbnQpIHtcblx0ICAvLyBGb3IgYSBnaXZlbiByZWNvbmNpbGUsIGxvb2sgYXQgd2hpY2ggY29tcG9uZW50cyBkaWQgbm90IGFjdHVhbGx5XG5cdCAgLy8gcmVuZGVyIGFueXRoaW5nIHRvIHRoZSBET00gYW5kIHJldHVybiBhIG1hcHBpbmcgb2YgdGhlaXIgSUQgdG9cblx0ICAvLyB0aGUgYW1vdW50IG9mIHRpbWUgaXQgdG9vayB0byByZW5kZXIgdGhlIGVudGlyZSBzdWJ0cmVlLlxuXHQgIHZhciBjbGVhbkNvbXBvbmVudHMgPSB7fTtcblx0ICB2YXIgZGlydHlMZWFmSURzID0gT2JqZWN0LmtleXMobWVhc3VyZW1lbnQud3JpdGVzKTtcblx0ICB2YXIgYWxsSURzID0gYXNzaWduKHt9LCBtZWFzdXJlbWVudC5leGNsdXNpdmUsIG1lYXN1cmVtZW50LmluY2x1c2l2ZSk7XG5cdFxuXHQgIGZvciAodmFyIGlkIGluIGFsbElEcykge1xuXHQgICAgdmFyIGlzRGlydHkgPSBmYWxzZTtcblx0ICAgIC8vIEZvciBlYWNoIGNvbXBvbmVudCB0aGF0IHJlbmRlcmVkLCBzZWUgaWYgYSBjb21wb25lbnQgdGhhdCB0cmlnZ2VyZWRcblx0ICAgIC8vIGEgRE9NIG9wIGlzIGluIGl0cyBzdWJ0cmVlLlxuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkaXJ0eUxlYWZJRHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgaWYgKGRpcnR5TGVhZklEc1tpXS5pbmRleE9mKGlkKSA9PT0gMCkge1xuXHQgICAgICAgIGlzRGlydHkgPSB0cnVlO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICAvLyBjaGVjayBpZiBjb21wb25lbnQgbmV3bHkgY3JlYXRlZFxuXHQgICAgaWYgKG1lYXN1cmVtZW50LmNyZWF0ZWRbaWRdKSB7XG5cdCAgICAgIGlzRGlydHkgPSB0cnVlO1xuXHQgICAgfVxuXHQgICAgaWYgKCFpc0RpcnR5ICYmIG1lYXN1cmVtZW50LmNvdW50c1tpZF0gPiAwKSB7XG5cdCAgICAgIGNsZWFuQ29tcG9uZW50c1tpZF0gPSB0cnVlO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gY2xlYW5Db21wb25lbnRzO1xuXHR9XG5cdFxuXHR2YXIgUmVhY3REZWZhdWx0UGVyZkFuYWx5c2lzID0ge1xuXHQgIGdldEV4Y2x1c2l2ZVN1bW1hcnk6IGdldEV4Y2x1c2l2ZVN1bW1hcnksXG5cdCAgZ2V0SW5jbHVzaXZlU3VtbWFyeTogZ2V0SW5jbHVzaXZlU3VtbWFyeSxcblx0ICBnZXRET01TdW1tYXJ5OiBnZXRET01TdW1tYXJ5LFxuXHQgIGdldFRvdGFsVGltZTogZ2V0VG90YWxUaW1lXG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFJlYWN0RGVmYXVsdFBlcmZBbmFseXNpcztcblxuLyoqKi8gfSksXG4vKiAxNDQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIHBlcmZvcm1hbmNlTm93XG5cdCAqIEB0eXBlY2hlY2tzXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHBlcmZvcm1hbmNlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDUpO1xuXHRcblx0dmFyIHBlcmZvcm1hbmNlTm93O1xuXHRcblx0LyoqXG5cdCAqIERldGVjdCBpZiB3ZSBjYW4gdXNlIGB3aW5kb3cucGVyZm9ybWFuY2Uubm93KClgIGFuZCBncmFjZWZ1bGx5IGZhbGxiYWNrIHRvXG5cdCAqIGBEYXRlLm5vdygpYCBpZiBpdCBkb2Vzbid0IGV4aXN0LiBXZSBuZWVkIHRvIHN1cHBvcnQgRmlyZWZveCA8IDE1IGZvciBub3dcblx0ICogYmVjYXVzZSBvZiBGYWNlYm9vaydzIHRlc3RpbmcgaW5mcmFzdHJ1Y3R1cmUuXG5cdCAqL1xuXHRpZiAocGVyZm9ybWFuY2Uubm93KSB7XG5cdCAgcGVyZm9ybWFuY2VOb3cgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICByZXR1cm4gcGVyZm9ybWFuY2Uubm93KCk7XG5cdCAgfTtcblx0fSBlbHNlIHtcblx0ICBwZXJmb3JtYW5jZU5vdyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiBEYXRlLm5vdygpO1xuXHQgIH07XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gcGVyZm9ybWFuY2VOb3c7XG5cbi8qKiovIH0pLFxuLyogMTQ1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBwZXJmb3JtYW5jZVxuXHQgKiBAdHlwZWNoZWNrc1xuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdFxuXHR2YXIgcGVyZm9ybWFuY2U7XG5cdFxuXHRpZiAoRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NKSB7XG5cdCAgcGVyZm9ybWFuY2UgPSB3aW5kb3cucGVyZm9ybWFuY2UgfHwgd2luZG93Lm1zUGVyZm9ybWFuY2UgfHwgd2luZG93LndlYmtpdFBlcmZvcm1hbmNlO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHBlcmZvcm1hbmNlIHx8IHt9O1xuXG4vKioqLyB9KSxcbi8qIDE0NiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RWZXJzaW9uXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSAnMC4xNC45JztcblxuLyoqKi8gfSksXG4vKiAxNDcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0KiBAcHJvdmlkZXNNb2R1bGUgcmVuZGVyU3VidHJlZUludG9Db250YWluZXJcblx0Ki9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBSZWFjdE1vdW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFJlYWN0TW91bnQucmVuZGVyU3VidHJlZUludG9Db250YWluZXI7XG5cbi8qKiovIH0pLFxuLyogMTQ4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBSZWFjdERPTVNlcnZlclxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBSZWFjdERlZmF1bHRJbmplY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcxKTtcblx0dmFyIFJlYWN0U2VydmVyUmVuZGVyaW5nID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDkpO1xuXHR2YXIgUmVhY3RWZXJzaW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDYpO1xuXHRcblx0UmVhY3REZWZhdWx0SW5qZWN0aW9uLmluamVjdCgpO1xuXHRcblx0dmFyIFJlYWN0RE9NU2VydmVyID0ge1xuXHQgIHJlbmRlclRvU3RyaW5nOiBSZWFjdFNlcnZlclJlbmRlcmluZy5yZW5kZXJUb1N0cmluZyxcblx0ICByZW5kZXJUb1N0YXRpY01hcmt1cDogUmVhY3RTZXJ2ZXJSZW5kZXJpbmcucmVuZGVyVG9TdGF0aWNNYXJrdXAsXG5cdCAgdmVyc2lvbjogUmVhY3RWZXJzaW9uXG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFJlYWN0RE9NU2VydmVyO1xuXG4vKioqLyB9KSxcbi8qIDE0OSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzKSB7LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG5cdCAqIEBwcm92aWRlc01vZHVsZSBSZWFjdFNlcnZlclJlbmRlcmluZ1xuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIFJlYWN0RGVmYXVsdEJhdGNoaW5nU3RyYXRlZ3kgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkyKTtcblx0dmFyIFJlYWN0RWxlbWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oNDIpO1xuXHR2YXIgUmVhY3RJbnN0YW5jZUhhbmRsZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblx0dmFyIFJlYWN0TWFya3VwQ2hlY2tzdW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4KTtcblx0dmFyIFJlYWN0U2VydmVyQmF0Y2hpbmdTdHJhdGVneSA9IF9fd2VicGFja19yZXF1aXJlX18oMTUwKTtcblx0dmFyIFJlYWN0U2VydmVyUmVuZGVyaW5nVHJhbnNhY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1MSk7XG5cdHZhciBSZWFjdFVwZGF0ZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU0KTtcblx0XG5cdHZhciBlbXB0eU9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNTgpO1xuXHR2YXIgaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudCA9IF9fd2VicGFja19yZXF1aXJlX18oNjIpO1xuXHR2YXIgaW52YXJpYW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7XG5cdFxuXHQvKipcblx0ICogQHBhcmFtIHtSZWFjdEVsZW1lbnR9IGVsZW1lbnRcblx0ICogQHJldHVybiB7c3RyaW5nfSB0aGUgSFRNTCBtYXJrdXBcblx0ICovXG5cdGZ1bmN0aW9uIHJlbmRlclRvU3RyaW5nKGVsZW1lbnQpIHtcblx0ICAhUmVhY3RFbGVtZW50LmlzVmFsaWRFbGVtZW50KGVsZW1lbnQpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ3JlbmRlclRvU3RyaW5nKCk6IFlvdSBtdXN0IHBhc3MgYSB2YWxpZCBSZWFjdEVsZW1lbnQuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXHRcblx0ICB2YXIgdHJhbnNhY3Rpb247XG5cdCAgdHJ5IHtcblx0ICAgIFJlYWN0VXBkYXRlcy5pbmplY3Rpb24uaW5qZWN0QmF0Y2hpbmdTdHJhdGVneShSZWFjdFNlcnZlckJhdGNoaW5nU3RyYXRlZ3kpO1xuXHRcblx0ICAgIHZhciBpZCA9IFJlYWN0SW5zdGFuY2VIYW5kbGVzLmNyZWF0ZVJlYWN0Um9vdElEKCk7XG5cdCAgICB0cmFuc2FjdGlvbiA9IFJlYWN0U2VydmVyUmVuZGVyaW5nVHJhbnNhY3Rpb24uZ2V0UG9vbGVkKGZhbHNlKTtcblx0XG5cdCAgICByZXR1cm4gdHJhbnNhY3Rpb24ucGVyZm9ybShmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBjb21wb25lbnRJbnN0YW5jZSA9IGluc3RhbnRpYXRlUmVhY3RDb21wb25lbnQoZWxlbWVudCwgbnVsbCk7XG5cdCAgICAgIHZhciBtYXJrdXAgPSBjb21wb25lbnRJbnN0YW5jZS5tb3VudENvbXBvbmVudChpZCwgdHJhbnNhY3Rpb24sIGVtcHR5T2JqZWN0KTtcblx0ICAgICAgcmV0dXJuIFJlYWN0TWFya3VwQ2hlY2tzdW0uYWRkQ2hlY2tzdW1Ub01hcmt1cChtYXJrdXApO1xuXHQgICAgfSwgbnVsbCk7XG5cdCAgfSBmaW5hbGx5IHtcblx0ICAgIFJlYWN0U2VydmVyUmVuZGVyaW5nVHJhbnNhY3Rpb24ucmVsZWFzZSh0cmFuc2FjdGlvbik7XG5cdCAgICAvLyBSZXZlcnQgdG8gdGhlIERPTSBiYXRjaGluZyBzdHJhdGVneSBzaW5jZSB0aGVzZSB0d28gcmVuZGVyZXJzXG5cdCAgICAvLyBjdXJyZW50bHkgc2hhcmUgdGhlc2Ugc3RhdGVmdWwgbW9kdWxlcy5cblx0ICAgIFJlYWN0VXBkYXRlcy5pbmplY3Rpb24uaW5qZWN0QmF0Y2hpbmdTdHJhdGVneShSZWFjdERlZmF1bHRCYXRjaGluZ1N0cmF0ZWd5KTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBAcGFyYW0ge1JlYWN0RWxlbWVudH0gZWxlbWVudFxuXHQgKiBAcmV0dXJuIHtzdHJpbmd9IHRoZSBIVE1MIG1hcmt1cCwgd2l0aG91dCB0aGUgZXh0cmEgUmVhY3QgSUQgYW5kIGNoZWNrc3VtXG5cdCAqIChmb3IgZ2VuZXJhdGluZyBzdGF0aWMgcGFnZXMpXG5cdCAqL1xuXHRmdW5jdGlvbiByZW5kZXJUb1N0YXRpY01hcmt1cChlbGVtZW50KSB7XG5cdCAgIVJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChlbGVtZW50KSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdyZW5kZXJUb1N0YXRpY01hcmt1cCgpOiBZb3UgbXVzdCBwYXNzIGEgdmFsaWQgUmVhY3RFbGVtZW50LicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0XG5cdCAgdmFyIHRyYW5zYWN0aW9uO1xuXHQgIHRyeSB7XG5cdCAgICBSZWFjdFVwZGF0ZXMuaW5qZWN0aW9uLmluamVjdEJhdGNoaW5nU3RyYXRlZ3koUmVhY3RTZXJ2ZXJCYXRjaGluZ1N0cmF0ZWd5KTtcblx0XG5cdCAgICB2YXIgaWQgPSBSZWFjdEluc3RhbmNlSGFuZGxlcy5jcmVhdGVSZWFjdFJvb3RJRCgpO1xuXHQgICAgdHJhbnNhY3Rpb24gPSBSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9uLmdldFBvb2xlZCh0cnVlKTtcblx0XG5cdCAgICByZXR1cm4gdHJhbnNhY3Rpb24ucGVyZm9ybShmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBjb21wb25lbnRJbnN0YW5jZSA9IGluc3RhbnRpYXRlUmVhY3RDb21wb25lbnQoZWxlbWVudCwgbnVsbCk7XG5cdCAgICAgIHJldHVybiBjb21wb25lbnRJbnN0YW5jZS5tb3VudENvbXBvbmVudChpZCwgdHJhbnNhY3Rpb24sIGVtcHR5T2JqZWN0KTtcblx0ICAgIH0sIG51bGwpO1xuXHQgIH0gZmluYWxseSB7XG5cdCAgICBSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9uLnJlbGVhc2UodHJhbnNhY3Rpb24pO1xuXHQgICAgLy8gUmV2ZXJ0IHRvIHRoZSBET00gYmF0Y2hpbmcgc3RyYXRlZ3kgc2luY2UgdGhlc2UgdHdvIHJlbmRlcmVyc1xuXHQgICAgLy8gY3VycmVudGx5IHNoYXJlIHRoZXNlIHN0YXRlZnVsIG1vZHVsZXMuXG5cdCAgICBSZWFjdFVwZGF0ZXMuaW5qZWN0aW9uLmluamVjdEJhdGNoaW5nU3RyYXRlZ3koUmVhY3REZWZhdWx0QmF0Y2hpbmdTdHJhdGVneSk7XG5cdCAgfVxuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHtcblx0ICByZW5kZXJUb1N0cmluZzogcmVuZGVyVG9TdHJpbmcsXG5cdCAgcmVuZGVyVG9TdGF0aWNNYXJrdXA6IHJlbmRlclRvU3RhdGljTWFya3VwXG5cdH07XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpKSlcblxuLyoqKi8gfSksXG4vKiAxNTAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogQ29weXJpZ2h0IDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0U2VydmVyQmF0Y2hpbmdTdHJhdGVneVxuXHQgKiBAdHlwZWNoZWNrc1xuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBSZWFjdFNlcnZlckJhdGNoaW5nU3RyYXRlZ3kgPSB7XG5cdCAgaXNCYXRjaGluZ1VwZGF0ZXM6IGZhbHNlLFxuXHQgIGJhdGNoZWRVcGRhdGVzOiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcblx0ICAgIC8vIERvbid0IGRvIGFueXRoaW5nIGhlcmUuIER1cmluZyB0aGUgc2VydmVyIHJlbmRlcmluZyB3ZSBkb24ndCB3YW50IHRvXG5cdCAgICAvLyBzY2hlZHVsZSBhbnkgdXBkYXRlcy4gV2Ugd2lsbCBzaW1wbHkgaWdub3JlIHRoZW0uXG5cdCAgfVxuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBSZWFjdFNlcnZlckJhdGNoaW5nU3RyYXRlZ3k7XG5cbi8qKiovIH0pLFxuLyogMTUxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAyMDE0LTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9uXG5cdCAqIEB0eXBlY2hlY2tzXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIFBvb2xlZENsYXNzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Nik7XG5cdHZhciBDYWxsYmFja1F1ZXVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NSk7XG5cdHZhciBUcmFuc2FjdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oNTcpO1xuXHRcblx0dmFyIGFzc2lnbiA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpO1xuXHR2YXIgZW1wdHlGdW5jdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHRcblx0LyoqXG5cdCAqIFByb3ZpZGVzIGEgYENhbGxiYWNrUXVldWVgIHF1ZXVlIGZvciBjb2xsZWN0aW5nIGBvbkRPTVJlYWR5YCBjYWxsYmFja3Ncblx0ICogZHVyaW5nIHRoZSBwZXJmb3JtaW5nIG9mIHRoZSB0cmFuc2FjdGlvbi5cblx0ICovXG5cdHZhciBPTl9ET01fUkVBRFlfUVVFVUVJTkcgPSB7XG5cdCAgLyoqXG5cdCAgICogSW5pdGlhbGl6ZXMgdGhlIGludGVybmFsIGBvbkRPTVJlYWR5YCBxdWV1ZS5cblx0ICAgKi9cblx0ICBpbml0aWFsaXplOiBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLnJlYWN0TW91bnRSZWFkeS5yZXNldCgpO1xuXHQgIH0sXG5cdFxuXHQgIGNsb3NlOiBlbXB0eUZ1bmN0aW9uXG5cdH07XG5cdFxuXHQvKipcblx0ICogRXhlY3V0ZWQgd2l0aGluIHRoZSBzY29wZSBvZiB0aGUgYFRyYW5zYWN0aW9uYCBpbnN0YW5jZS4gQ29uc2lkZXIgdGhlc2UgYXNcblx0ICogYmVpbmcgbWVtYmVyIG1ldGhvZHMsIGJ1dCB3aXRoIGFuIGltcGxpZWQgb3JkZXJpbmcgd2hpbGUgYmVpbmcgaXNvbGF0ZWQgZnJvbVxuXHQgKiBlYWNoIG90aGVyLlxuXHQgKi9cblx0dmFyIFRSQU5TQUNUSU9OX1dSQVBQRVJTID0gW09OX0RPTV9SRUFEWV9RVUVVRUlOR107XG5cdFxuXHQvKipcblx0ICogQGNsYXNzIFJlYWN0U2VydmVyUmVuZGVyaW5nVHJhbnNhY3Rpb25cblx0ICogQHBhcmFtIHtib29sZWFufSByZW5kZXJUb1N0YXRpY01hcmt1cFxuXHQgKi9cblx0ZnVuY3Rpb24gUmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvbihyZW5kZXJUb1N0YXRpY01hcmt1cCkge1xuXHQgIHRoaXMucmVpbml0aWFsaXplVHJhbnNhY3Rpb24oKTtcblx0ICB0aGlzLnJlbmRlclRvU3RhdGljTWFya3VwID0gcmVuZGVyVG9TdGF0aWNNYXJrdXA7XG5cdCAgdGhpcy5yZWFjdE1vdW50UmVhZHkgPSBDYWxsYmFja1F1ZXVlLmdldFBvb2xlZChudWxsKTtcblx0ICB0aGlzLnVzZUNyZWF0ZUVsZW1lbnQgPSBmYWxzZTtcblx0fVxuXHRcblx0dmFyIE1peGluID0ge1xuXHQgIC8qKlxuXHQgICAqIEBzZWUgVHJhbnNhY3Rpb25cblx0ICAgKiBAYWJzdHJhY3Rcblx0ICAgKiBAZmluYWxcblx0ICAgKiBAcmV0dXJuIHthcnJheX0gRW1wdHkgbGlzdCBvZiBvcGVyYXRpb24gd3JhcCBwcm9jZWR1cmVzLlxuXHQgICAqL1xuXHQgIGdldFRyYW5zYWN0aW9uV3JhcHBlcnM6IGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiBUUkFOU0FDVElPTl9XUkFQUEVSUztcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBAcmV0dXJuIHtvYmplY3R9IFRoZSBxdWV1ZSB0byBjb2xsZWN0IGBvbkRPTVJlYWR5YCBjYWxsYmFja3Mgd2l0aC5cblx0ICAgKi9cblx0ICBnZXRSZWFjdE1vdW50UmVhZHk6IGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiB0aGlzLnJlYWN0TW91bnRSZWFkeTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBgUG9vbGVkQ2xhc3NgIGxvb2tzIGZvciB0aGlzLCBhbmQgd2lsbCBpbnZva2UgdGhpcyBiZWZvcmUgYWxsb3dpbmcgdGhpc1xuXHQgICAqIGluc3RhbmNlIHRvIGJlIHJldXNlZC5cblx0ICAgKi9cblx0ICBkZXN0cnVjdG9yOiBmdW5jdGlvbiAoKSB7XG5cdCAgICBDYWxsYmFja1F1ZXVlLnJlbGVhc2UodGhpcy5yZWFjdE1vdW50UmVhZHkpO1xuXHQgICAgdGhpcy5yZWFjdE1vdW50UmVhZHkgPSBudWxsO1xuXHQgIH1cblx0fTtcblx0XG5cdGFzc2lnbihSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9uLnByb3RvdHlwZSwgVHJhbnNhY3Rpb24uTWl4aW4sIE1peGluKTtcblx0XG5cdFBvb2xlZENsYXNzLmFkZFBvb2xpbmdUbyhSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9uKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gUmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvbjtcblxuLyoqKi8gfSksXG4vKiAxNTIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgey8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RJc29tb3JwaGljXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIFJlYWN0Q2hpbGRyZW4gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExMCk7XG5cdHZhciBSZWFjdENvbXBvbmVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTIzKTtcblx0dmFyIFJlYWN0Q2xhc3MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyMik7XG5cdHZhciBSZWFjdERPTUZhY3RvcmllcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTUzKTtcblx0dmFyIFJlYWN0RWxlbWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oNDIpO1xuXHR2YXIgUmVhY3RFbGVtZW50VmFsaWRhdG9yID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTQpO1xuXHR2YXIgUmVhY3RQcm9wVHlwZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwNyk7XG5cdHZhciBSZWFjdFZlcnNpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0Nik7XG5cdFxuXHR2YXIgYXNzaWduID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7XG5cdHZhciBvbmx5Q2hpbGQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1Nik7XG5cdFxuXHR2YXIgY3JlYXRlRWxlbWVudCA9IFJlYWN0RWxlbWVudC5jcmVhdGVFbGVtZW50O1xuXHR2YXIgY3JlYXRlRmFjdG9yeSA9IFJlYWN0RWxlbWVudC5jcmVhdGVGYWN0b3J5O1xuXHR2YXIgY2xvbmVFbGVtZW50ID0gUmVhY3RFbGVtZW50LmNsb25lRWxlbWVudDtcblx0XG5cdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgY3JlYXRlRWxlbWVudCA9IFJlYWN0RWxlbWVudFZhbGlkYXRvci5jcmVhdGVFbGVtZW50O1xuXHQgIGNyZWF0ZUZhY3RvcnkgPSBSZWFjdEVsZW1lbnRWYWxpZGF0b3IuY3JlYXRlRmFjdG9yeTtcblx0ICBjbG9uZUVsZW1lbnQgPSBSZWFjdEVsZW1lbnRWYWxpZGF0b3IuY2xvbmVFbGVtZW50O1xuXHR9XG5cdFxuXHR2YXIgUmVhY3QgPSB7XG5cdFxuXHQgIC8vIE1vZGVyblxuXHRcblx0ICBDaGlsZHJlbjoge1xuXHQgICAgbWFwOiBSZWFjdENoaWxkcmVuLm1hcCxcblx0ICAgIGZvckVhY2g6IFJlYWN0Q2hpbGRyZW4uZm9yRWFjaCxcblx0ICAgIGNvdW50OiBSZWFjdENoaWxkcmVuLmNvdW50LFxuXHQgICAgdG9BcnJheTogUmVhY3RDaGlsZHJlbi50b0FycmF5LFxuXHQgICAgb25seTogb25seUNoaWxkXG5cdCAgfSxcblx0XG5cdCAgQ29tcG9uZW50OiBSZWFjdENvbXBvbmVudCxcblx0XG5cdCAgY3JlYXRlRWxlbWVudDogY3JlYXRlRWxlbWVudCxcblx0ICBjbG9uZUVsZW1lbnQ6IGNsb25lRWxlbWVudCxcblx0ICBpc1ZhbGlkRWxlbWVudDogUmVhY3RFbGVtZW50LmlzVmFsaWRFbGVtZW50LFxuXHRcblx0ICAvLyBDbGFzc2ljXG5cdFxuXHQgIFByb3BUeXBlczogUmVhY3RQcm9wVHlwZXMsXG5cdCAgY3JlYXRlQ2xhc3M6IFJlYWN0Q2xhc3MuY3JlYXRlQ2xhc3MsXG5cdCAgY3JlYXRlRmFjdG9yeTogY3JlYXRlRmFjdG9yeSxcblx0ICBjcmVhdGVNaXhpbjogZnVuY3Rpb24gKG1peGluKSB7XG5cdCAgICAvLyBDdXJyZW50bHkgYSBub29wLiBXaWxsIGJlIHVzZWQgdG8gdmFsaWRhdGUgYW5kIHRyYWNlIG1peGlucy5cblx0ICAgIHJldHVybiBtaXhpbjtcblx0ICB9LFxuXHRcblx0ICAvLyBUaGlzIGxvb2tzIERPTSBzcGVjaWZpYyBidXQgdGhlc2UgYXJlIGFjdHVhbGx5IGlzb21vcnBoaWMgaGVscGVyc1xuXHQgIC8vIHNpbmNlIHRoZXkgYXJlIGp1c3QgZ2VuZXJhdGluZyBET00gc3RyaW5ncy5cblx0ICBET006IFJlYWN0RE9NRmFjdG9yaWVzLFxuXHRcblx0ICB2ZXJzaW9uOiBSZWFjdFZlcnNpb24sXG5cdFxuXHQgIC8vIEhvb2sgZm9yIEpTWCBzcHJlYWQsIGRvbid0IHVzZSB0aGlzIGZvciBhbnl0aGluZyBlbHNlLlxuXHQgIF9fc3ByZWFkOiBhc3NpZ25cblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gUmVhY3Q7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpKSlcblxuLyoqKi8gfSksXG4vKiAxNTMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgey8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RET01GYWN0b3JpZXNcblx0ICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgUmVhY3RFbGVtZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Mik7XG5cdHZhciBSZWFjdEVsZW1lbnRWYWxpZGF0b3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1NCk7XG5cdFxuXHR2YXIgbWFwT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTUpO1xuXHRcblx0LyoqXG5cdCAqIENyZWF0ZSBhIGZhY3RvcnkgdGhhdCBjcmVhdGVzIEhUTUwgdGFnIGVsZW1lbnRzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gdGFnIFRhZyBuYW1lIChlLmcuIGBkaXZgKS5cblx0ICogQHByaXZhdGVcblx0ICovXG5cdGZ1bmN0aW9uIGNyZWF0ZURPTUZhY3RvcnkodGFnKSB7XG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgIHJldHVybiBSZWFjdEVsZW1lbnRWYWxpZGF0b3IuY3JlYXRlRmFjdG9yeSh0YWcpO1xuXHQgIH1cblx0ICByZXR1cm4gUmVhY3RFbGVtZW50LmNyZWF0ZUZhY3RvcnkodGFnKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBtYXBwaW5nIGZyb20gc3VwcG9ydGVkIEhUTUwgdGFncyB0byBgUmVhY3RET01Db21wb25lbnRgIGNsYXNzZXMuXG5cdCAqIFRoaXMgaXMgYWxzbyBhY2Nlc3NpYmxlIHZpYSBgUmVhY3QuRE9NYC5cblx0ICpcblx0ICogQHB1YmxpY1xuXHQgKi9cblx0dmFyIFJlYWN0RE9NRmFjdG9yaWVzID0gbWFwT2JqZWN0KHtcblx0ICBhOiAnYScsXG5cdCAgYWJicjogJ2FiYnInLFxuXHQgIGFkZHJlc3M6ICdhZGRyZXNzJyxcblx0ICBhcmVhOiAnYXJlYScsXG5cdCAgYXJ0aWNsZTogJ2FydGljbGUnLFxuXHQgIGFzaWRlOiAnYXNpZGUnLFxuXHQgIGF1ZGlvOiAnYXVkaW8nLFxuXHQgIGI6ICdiJyxcblx0ICBiYXNlOiAnYmFzZScsXG5cdCAgYmRpOiAnYmRpJyxcblx0ICBiZG86ICdiZG8nLFxuXHQgIGJpZzogJ2JpZycsXG5cdCAgYmxvY2txdW90ZTogJ2Jsb2NrcXVvdGUnLFxuXHQgIGJvZHk6ICdib2R5Jyxcblx0ICBicjogJ2JyJyxcblx0ICBidXR0b246ICdidXR0b24nLFxuXHQgIGNhbnZhczogJ2NhbnZhcycsXG5cdCAgY2FwdGlvbjogJ2NhcHRpb24nLFxuXHQgIGNpdGU6ICdjaXRlJyxcblx0ICBjb2RlOiAnY29kZScsXG5cdCAgY29sOiAnY29sJyxcblx0ICBjb2xncm91cDogJ2NvbGdyb3VwJyxcblx0ICBkYXRhOiAnZGF0YScsXG5cdCAgZGF0YWxpc3Q6ICdkYXRhbGlzdCcsXG5cdCAgZGQ6ICdkZCcsXG5cdCAgZGVsOiAnZGVsJyxcblx0ICBkZXRhaWxzOiAnZGV0YWlscycsXG5cdCAgZGZuOiAnZGZuJyxcblx0ICBkaWFsb2c6ICdkaWFsb2cnLFxuXHQgIGRpdjogJ2RpdicsXG5cdCAgZGw6ICdkbCcsXG5cdCAgZHQ6ICdkdCcsXG5cdCAgZW06ICdlbScsXG5cdCAgZW1iZWQ6ICdlbWJlZCcsXG5cdCAgZmllbGRzZXQ6ICdmaWVsZHNldCcsXG5cdCAgZmlnY2FwdGlvbjogJ2ZpZ2NhcHRpb24nLFxuXHQgIGZpZ3VyZTogJ2ZpZ3VyZScsXG5cdCAgZm9vdGVyOiAnZm9vdGVyJyxcblx0ICBmb3JtOiAnZm9ybScsXG5cdCAgaDE6ICdoMScsXG5cdCAgaDI6ICdoMicsXG5cdCAgaDM6ICdoMycsXG5cdCAgaDQ6ICdoNCcsXG5cdCAgaDU6ICdoNScsXG5cdCAgaDY6ICdoNicsXG5cdCAgaGVhZDogJ2hlYWQnLFxuXHQgIGhlYWRlcjogJ2hlYWRlcicsXG5cdCAgaGdyb3VwOiAnaGdyb3VwJyxcblx0ICBocjogJ2hyJyxcblx0ICBodG1sOiAnaHRtbCcsXG5cdCAgaTogJ2knLFxuXHQgIGlmcmFtZTogJ2lmcmFtZScsXG5cdCAgaW1nOiAnaW1nJyxcblx0ICBpbnB1dDogJ2lucHV0Jyxcblx0ICBpbnM6ICdpbnMnLFxuXHQgIGtiZDogJ2tiZCcsXG5cdCAga2V5Z2VuOiAna2V5Z2VuJyxcblx0ICBsYWJlbDogJ2xhYmVsJyxcblx0ICBsZWdlbmQ6ICdsZWdlbmQnLFxuXHQgIGxpOiAnbGknLFxuXHQgIGxpbms6ICdsaW5rJyxcblx0ICBtYWluOiAnbWFpbicsXG5cdCAgbWFwOiAnbWFwJyxcblx0ICBtYXJrOiAnbWFyaycsXG5cdCAgbWVudTogJ21lbnUnLFxuXHQgIG1lbnVpdGVtOiAnbWVudWl0ZW0nLFxuXHQgIG1ldGE6ICdtZXRhJyxcblx0ICBtZXRlcjogJ21ldGVyJyxcblx0ICBuYXY6ICduYXYnLFxuXHQgIG5vc2NyaXB0OiAnbm9zY3JpcHQnLFxuXHQgIG9iamVjdDogJ29iamVjdCcsXG5cdCAgb2w6ICdvbCcsXG5cdCAgb3B0Z3JvdXA6ICdvcHRncm91cCcsXG5cdCAgb3B0aW9uOiAnb3B0aW9uJyxcblx0ICBvdXRwdXQ6ICdvdXRwdXQnLFxuXHQgIHA6ICdwJyxcblx0ICBwYXJhbTogJ3BhcmFtJyxcblx0ICBwaWN0dXJlOiAncGljdHVyZScsXG5cdCAgcHJlOiAncHJlJyxcblx0ICBwcm9ncmVzczogJ3Byb2dyZXNzJyxcblx0ICBxOiAncScsXG5cdCAgcnA6ICdycCcsXG5cdCAgcnQ6ICdydCcsXG5cdCAgcnVieTogJ3J1YnknLFxuXHQgIHM6ICdzJyxcblx0ICBzYW1wOiAnc2FtcCcsXG5cdCAgc2NyaXB0OiAnc2NyaXB0Jyxcblx0ICBzZWN0aW9uOiAnc2VjdGlvbicsXG5cdCAgc2VsZWN0OiAnc2VsZWN0Jyxcblx0ICBzbWFsbDogJ3NtYWxsJyxcblx0ICBzb3VyY2U6ICdzb3VyY2UnLFxuXHQgIHNwYW46ICdzcGFuJyxcblx0ICBzdHJvbmc6ICdzdHJvbmcnLFxuXHQgIHN0eWxlOiAnc3R5bGUnLFxuXHQgIHN1YjogJ3N1YicsXG5cdCAgc3VtbWFyeTogJ3N1bW1hcnknLFxuXHQgIHN1cDogJ3N1cCcsXG5cdCAgdGFibGU6ICd0YWJsZScsXG5cdCAgdGJvZHk6ICd0Ym9keScsXG5cdCAgdGQ6ICd0ZCcsXG5cdCAgdGV4dGFyZWE6ICd0ZXh0YXJlYScsXG5cdCAgdGZvb3Q6ICd0Zm9vdCcsXG5cdCAgdGg6ICd0aCcsXG5cdCAgdGhlYWQ6ICd0aGVhZCcsXG5cdCAgdGltZTogJ3RpbWUnLFxuXHQgIHRpdGxlOiAndGl0bGUnLFxuXHQgIHRyOiAndHInLFxuXHQgIHRyYWNrOiAndHJhY2snLFxuXHQgIHU6ICd1Jyxcblx0ICB1bDogJ3VsJyxcblx0ICAndmFyJzogJ3ZhcicsXG5cdCAgdmlkZW86ICd2aWRlbycsXG5cdCAgd2JyOiAnd2JyJyxcblx0XG5cdCAgLy8gU1ZHXG5cdCAgY2lyY2xlOiAnY2lyY2xlJyxcblx0ICBjbGlwUGF0aDogJ2NsaXBQYXRoJyxcblx0ICBkZWZzOiAnZGVmcycsXG5cdCAgZWxsaXBzZTogJ2VsbGlwc2UnLFxuXHQgIGc6ICdnJyxcblx0ICBpbWFnZTogJ2ltYWdlJyxcblx0ICBsaW5lOiAnbGluZScsXG5cdCAgbGluZWFyR3JhZGllbnQ6ICdsaW5lYXJHcmFkaWVudCcsXG5cdCAgbWFzazogJ21hc2snLFxuXHQgIHBhdGg6ICdwYXRoJyxcblx0ICBwYXR0ZXJuOiAncGF0dGVybicsXG5cdCAgcG9seWdvbjogJ3BvbHlnb24nLFxuXHQgIHBvbHlsaW5lOiAncG9seWxpbmUnLFxuXHQgIHJhZGlhbEdyYWRpZW50OiAncmFkaWFsR3JhZGllbnQnLFxuXHQgIHJlY3Q6ICdyZWN0Jyxcblx0ICBzdG9wOiAnc3RvcCcsXG5cdCAgc3ZnOiAnc3ZnJyxcblx0ICB0ZXh0OiAndGV4dCcsXG5cdCAgdHNwYW46ICd0c3Bhbidcblx0XG5cdH0sIGNyZWF0ZURPTUZhY3RvcnkpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBSZWFjdERPTUZhY3Rvcmllcztcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oNCkpKVxuXG4vKioqLyB9KSxcbi8qIDE1NCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzKSB7LyoqXG5cdCAqIENvcHlyaWdodCAyMDE0LTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBSZWFjdEVsZW1lbnRWYWxpZGF0b3Jcblx0ICovXG5cdFxuXHQvKipcblx0ICogUmVhY3RFbGVtZW50VmFsaWRhdG9yIHByb3ZpZGVzIGEgd3JhcHBlciBhcm91bmQgYSBlbGVtZW50IGZhY3Rvcnlcblx0ICogd2hpY2ggdmFsaWRhdGVzIHRoZSBwcm9wcyBwYXNzZWQgdG8gdGhlIGVsZW1lbnQuIFRoaXMgaXMgaW50ZW5kZWQgdG8gYmVcblx0ICogdXNlZCBvbmx5IGluIERFViBhbmQgY291bGQgYmUgcmVwbGFjZWQgYnkgYSBzdGF0aWMgdHlwZSBjaGVja2VyIGZvciBsYW5ndWFnZXNcblx0ICogdGhhdCBzdXBwb3J0IGl0LlxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBSZWFjdEVsZW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyKTtcblx0dmFyIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY1KTtcblx0dmFyIFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Nik7XG5cdHZhciBSZWFjdEN1cnJlbnRPd25lciA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cdFxuXHR2YXIgY2FuRGVmaW5lUHJvcGVydHkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQzKTtcblx0dmFyIGdldEl0ZXJhdG9yRm4gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwOCk7XG5cdHZhciBpbnZhcmlhbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblx0dmFyIHdhcm5pbmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTtcblx0XG5cdGZ1bmN0aW9uIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bSgpIHtcblx0ICBpZiAoUmVhY3RDdXJyZW50T3duZXIuY3VycmVudCkge1xuXHQgICAgdmFyIG5hbWUgPSBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50LmdldE5hbWUoKTtcblx0ICAgIGlmIChuYW1lKSB7XG5cdCAgICAgIHJldHVybiAnIENoZWNrIHRoZSByZW5kZXIgbWV0aG9kIG9mIGAnICsgbmFtZSArICdgLic7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiAnJztcblx0fVxuXHRcblx0LyoqXG5cdCAqIFdhcm4gaWYgdGhlcmUncyBubyBrZXkgZXhwbGljaXRseSBzZXQgb24gZHluYW1pYyBhcnJheXMgb2YgY2hpbGRyZW4gb3Jcblx0ICogb2JqZWN0IGtleXMgYXJlIG5vdCB2YWxpZC4gVGhpcyBhbGxvd3MgdXMgdG8ga2VlcCB0cmFjayBvZiBjaGlsZHJlbiBiZXR3ZWVuXG5cdCAqIHVwZGF0ZXMuXG5cdCAqL1xuXHR2YXIgb3duZXJIYXNLZXlVc2VXYXJuaW5nID0ge307XG5cdFxuXHR2YXIgbG9nZ2VkVHlwZUZhaWx1cmVzID0ge307XG5cdFxuXHQvKipcblx0ICogV2FybiBpZiB0aGUgZWxlbWVudCBkb2Vzbid0IGhhdmUgYW4gZXhwbGljaXQga2V5IGFzc2lnbmVkIHRvIGl0LlxuXHQgKiBUaGlzIGVsZW1lbnQgaXMgaW4gYW4gYXJyYXkuIFRoZSBhcnJheSBjb3VsZCBncm93IGFuZCBzaHJpbmsgb3IgYmVcblx0ICogcmVvcmRlcmVkLiBBbGwgY2hpbGRyZW4gdGhhdCBoYXZlbid0IGFscmVhZHkgYmVlbiB2YWxpZGF0ZWQgYXJlIHJlcXVpcmVkIHRvXG5cdCAqIGhhdmUgYSBcImtleVwiIHByb3BlcnR5IGFzc2lnbmVkIHRvIGl0LlxuXHQgKlxuXHQgKiBAaW50ZXJuYWxcblx0ICogQHBhcmFtIHtSZWFjdEVsZW1lbnR9IGVsZW1lbnQgRWxlbWVudCB0aGF0IHJlcXVpcmVzIGEga2V5LlxuXHQgKiBAcGFyYW0geyp9IHBhcmVudFR5cGUgZWxlbWVudCdzIHBhcmVudCdzIHR5cGUuXG5cdCAqL1xuXHRmdW5jdGlvbiB2YWxpZGF0ZUV4cGxpY2l0S2V5KGVsZW1lbnQsIHBhcmVudFR5cGUpIHtcblx0ICBpZiAoIWVsZW1lbnQuX3N0b3JlIHx8IGVsZW1lbnQuX3N0b3JlLnZhbGlkYXRlZCB8fCBlbGVtZW50LmtleSAhPSBudWxsKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIGVsZW1lbnQuX3N0b3JlLnZhbGlkYXRlZCA9IHRydWU7XG5cdFxuXHQgIHZhciBhZGRlbmRhID0gZ2V0QWRkZW5kYUZvcktleVVzZSgndW5pcXVlS2V5JywgZWxlbWVudCwgcGFyZW50VHlwZSk7XG5cdCAgaWYgKGFkZGVuZGEgPT09IG51bGwpIHtcblx0ICAgIC8vIHdlIGFscmVhZHkgc2hvd2VkIHRoZSB3YXJuaW5nXG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnRWFjaCBjaGlsZCBpbiBhbiBhcnJheSBvciBpdGVyYXRvciBzaG91bGQgaGF2ZSBhIHVuaXF1ZSBcImtleVwiIHByb3AuJyArICclcyVzJXMnLCBhZGRlbmRhLnBhcmVudE9yT3duZXIgfHwgJycsIGFkZGVuZGEuY2hpbGRPd25lciB8fCAnJywgYWRkZW5kYS51cmwgfHwgJycpIDogdW5kZWZpbmVkO1xuXHR9XG5cdFxuXHQvKipcblx0ICogU2hhcmVkIHdhcm5pbmcgYW5kIG1vbml0b3JpbmcgY29kZSBmb3IgdGhlIGtleSB3YXJuaW5ncy5cblx0ICpcblx0ICogQGludGVybmFsXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlVHlwZSBBIGtleSB1c2VkIGZvciBkZS1kdXBpbmcgd2FybmluZ3MuXG5cdCAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBlbGVtZW50IENvbXBvbmVudCB0aGF0IHJlcXVpcmVzIGEga2V5LlxuXHQgKiBAcGFyYW0geyp9IHBhcmVudFR5cGUgZWxlbWVudCdzIHBhcmVudCdzIHR5cGUuXG5cdCAqIEByZXR1cm5zIHs/b2JqZWN0fSBBIHNldCBvZiBhZGRlbmRhIHRvIHVzZSBpbiB0aGUgd2FybmluZyBtZXNzYWdlLCBvciBudWxsXG5cdCAqIGlmIHRoZSB3YXJuaW5nIGhhcyBhbHJlYWR5IGJlZW4gc2hvd24gYmVmb3JlIChhbmQgc2hvdWxkbid0IGJlIHNob3duIGFnYWluKS5cblx0ICovXG5cdGZ1bmN0aW9uIGdldEFkZGVuZGFGb3JLZXlVc2UobWVzc2FnZVR5cGUsIGVsZW1lbnQsIHBhcmVudFR5cGUpIHtcblx0ICB2YXIgYWRkZW5kdW0gPSBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0oKTtcblx0ICBpZiAoIWFkZGVuZHVtKSB7XG5cdCAgICB2YXIgcGFyZW50TmFtZSA9IHR5cGVvZiBwYXJlbnRUeXBlID09PSAnc3RyaW5nJyA/IHBhcmVudFR5cGUgOiBwYXJlbnRUeXBlLmRpc3BsYXlOYW1lIHx8IHBhcmVudFR5cGUubmFtZTtcblx0ICAgIGlmIChwYXJlbnROYW1lKSB7XG5cdCAgICAgIGFkZGVuZHVtID0gJyBDaGVjayB0aGUgdG9wLWxldmVsIHJlbmRlciBjYWxsIHVzaW5nIDwnICsgcGFyZW50TmFtZSArICc+Lic7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICB2YXIgbWVtb2l6ZXIgPSBvd25lckhhc0tleVVzZVdhcm5pbmdbbWVzc2FnZVR5cGVdIHx8IChvd25lckhhc0tleVVzZVdhcm5pbmdbbWVzc2FnZVR5cGVdID0ge30pO1xuXHQgIGlmIChtZW1vaXplclthZGRlbmR1bV0pIHtcblx0ICAgIHJldHVybiBudWxsO1xuXHQgIH1cblx0ICBtZW1vaXplclthZGRlbmR1bV0gPSB0cnVlO1xuXHRcblx0ICB2YXIgYWRkZW5kYSA9IHtcblx0ICAgIHBhcmVudE9yT3duZXI6IGFkZGVuZHVtLFxuXHQgICAgdXJsOiAnIFNlZSBodHRwczovL2ZiLm1lL3JlYWN0LXdhcm5pbmcta2V5cyBmb3IgbW9yZSBpbmZvcm1hdGlvbi4nLFxuXHQgICAgY2hpbGRPd25lcjogbnVsbFxuXHQgIH07XG5cdFxuXHQgIC8vIFVzdWFsbHkgdGhlIGN1cnJlbnQgb3duZXIgaXMgdGhlIG9mZmVuZGVyLCBidXQgaWYgaXQgYWNjZXB0cyBjaGlsZHJlbiBhcyBhXG5cdCAgLy8gcHJvcGVydHksIGl0IG1heSBiZSB0aGUgY3JlYXRvciBvZiB0aGUgY2hpbGQgdGhhdCdzIHJlc3BvbnNpYmxlIGZvclxuXHQgIC8vIGFzc2lnbmluZyBpdCBhIGtleS5cblx0ICBpZiAoZWxlbWVudCAmJiBlbGVtZW50Ll9vd25lciAmJiBlbGVtZW50Ll9vd25lciAhPT0gUmVhY3RDdXJyZW50T3duZXIuY3VycmVudCkge1xuXHQgICAgLy8gR2l2ZSB0aGUgY29tcG9uZW50IHRoYXQgb3JpZ2luYWxseSBjcmVhdGVkIHRoaXMgY2hpbGQuXG5cdCAgICBhZGRlbmRhLmNoaWxkT3duZXIgPSAnIEl0IHdhcyBwYXNzZWQgYSBjaGlsZCBmcm9tICcgKyBlbGVtZW50Ll9vd25lci5nZXROYW1lKCkgKyAnLic7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gYWRkZW5kYTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEVuc3VyZSB0aGF0IGV2ZXJ5IGVsZW1lbnQgZWl0aGVyIGlzIHBhc3NlZCBpbiBhIHN0YXRpYyBsb2NhdGlvbiwgaW4gYW5cblx0ICogYXJyYXkgd2l0aCBhbiBleHBsaWNpdCBrZXlzIHByb3BlcnR5IGRlZmluZWQsIG9yIGluIGFuIG9iamVjdCBsaXRlcmFsXG5cdCAqIHdpdGggdmFsaWQga2V5IHByb3BlcnR5LlxuXHQgKlxuXHQgKiBAaW50ZXJuYWxcblx0ICogQHBhcmFtIHtSZWFjdE5vZGV9IG5vZGUgU3RhdGljYWxseSBwYXNzZWQgY2hpbGQgb2YgYW55IHR5cGUuXG5cdCAqIEBwYXJhbSB7Kn0gcGFyZW50VHlwZSBub2RlJ3MgcGFyZW50J3MgdHlwZS5cblx0ICovXG5cdGZ1bmN0aW9uIHZhbGlkYXRlQ2hpbGRLZXlzKG5vZGUsIHBhcmVudFR5cGUpIHtcblx0ICBpZiAodHlwZW9mIG5vZGUgIT09ICdvYmplY3QnKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIGlmIChBcnJheS5pc0FycmF5KG5vZGUpKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGUubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIGNoaWxkID0gbm9kZVtpXTtcblx0ICAgICAgaWYgKFJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChjaGlsZCkpIHtcblx0ICAgICAgICB2YWxpZGF0ZUV4cGxpY2l0S2V5KGNoaWxkLCBwYXJlbnRUeXBlKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAoUmVhY3RFbGVtZW50LmlzVmFsaWRFbGVtZW50KG5vZGUpKSB7XG5cdCAgICAvLyBUaGlzIGVsZW1lbnQgd2FzIHBhc3NlZCBpbiBhIHZhbGlkIGxvY2F0aW9uLlxuXHQgICAgaWYgKG5vZGUuX3N0b3JlKSB7XG5cdCAgICAgIG5vZGUuX3N0b3JlLnZhbGlkYXRlZCA9IHRydWU7XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmIChub2RlKSB7XG5cdCAgICB2YXIgaXRlcmF0b3JGbiA9IGdldEl0ZXJhdG9yRm4obm9kZSk7XG5cdCAgICAvLyBFbnRyeSBpdGVyYXRvcnMgcHJvdmlkZSBpbXBsaWNpdCBrZXlzLlxuXHQgICAgaWYgKGl0ZXJhdG9yRm4pIHtcblx0ICAgICAgaWYgKGl0ZXJhdG9yRm4gIT09IG5vZGUuZW50cmllcykge1xuXHQgICAgICAgIHZhciBpdGVyYXRvciA9IGl0ZXJhdG9yRm4uY2FsbChub2RlKTtcblx0ICAgICAgICB2YXIgc3RlcDtcblx0ICAgICAgICB3aGlsZSAoIShzdGVwID0gaXRlcmF0b3IubmV4dCgpKS5kb25lKSB7XG5cdCAgICAgICAgICBpZiAoUmVhY3RFbGVtZW50LmlzVmFsaWRFbGVtZW50KHN0ZXAudmFsdWUpKSB7XG5cdCAgICAgICAgICAgIHZhbGlkYXRlRXhwbGljaXRLZXkoc3RlcC52YWx1ZSwgcGFyZW50VHlwZSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQXNzZXJ0IHRoYXQgdGhlIHByb3BzIGFyZSB2YWxpZFxuXHQgKlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gY29tcG9uZW50TmFtZSBOYW1lIG9mIHRoZSBjb21wb25lbnQgZm9yIGVycm9yIG1lc3NhZ2VzLlxuXHQgKiBAcGFyYW0ge29iamVjdH0gcHJvcFR5cGVzIE1hcCBvZiBwcm9wIG5hbWUgdG8gYSBSZWFjdFByb3BUeXBlXG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBwcm9wc1xuXHQgKiBAcGFyYW0ge3N0cmluZ30gbG9jYXRpb24gZS5nLiBcInByb3BcIiwgXCJjb250ZXh0XCIsIFwiY2hpbGQgY29udGV4dFwiXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHRmdW5jdGlvbiBjaGVja1Byb3BUeXBlcyhjb21wb25lbnROYW1lLCBwcm9wVHlwZXMsIHByb3BzLCBsb2NhdGlvbikge1xuXHQgIGZvciAodmFyIHByb3BOYW1lIGluIHByb3BUeXBlcykge1xuXHQgICAgaWYgKHByb3BUeXBlcy5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkpIHtcblx0ICAgICAgdmFyIGVycm9yO1xuXHQgICAgICAvLyBQcm9wIHR5cGUgdmFsaWRhdGlvbiBtYXkgdGhyb3cuIEluIGNhc2UgdGhleSBkbywgd2UgZG9uJ3Qgd2FudCB0b1xuXHQgICAgICAvLyBmYWlsIHRoZSByZW5kZXIgcGhhc2Ugd2hlcmUgaXQgZGlkbid0IGZhaWwgYmVmb3JlLiBTbyB3ZSBsb2cgaXQuXG5cdCAgICAgIC8vIEFmdGVyIHRoZXNlIGhhdmUgYmVlbiBjbGVhbmVkIHVwLCB3ZSdsbCBsZXQgdGhlbSB0aHJvdy5cblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICAvLyBUaGlzIGlzIGludGVudGlvbmFsbHkgYW4gaW52YXJpYW50IHRoYXQgZ2V0cyBjYXVnaHQuIEl0J3MgdGhlIHNhbWVcblx0ICAgICAgICAvLyBiZWhhdmlvciBhcyB3aXRob3V0IHRoaXMgc3RhdGVtZW50IGV4Y2VwdCB3aXRoIGEgYmV0dGVyIG1lc3NhZ2UuXG5cdCAgICAgICAgISh0eXBlb2YgcHJvcFR5cGVzW3Byb3BOYW1lXSA9PT0gJ2Z1bmN0aW9uJykgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnJXM6ICVzIHR5cGUgYCVzYCBpcyBpbnZhbGlkOyBpdCBtdXN0IGJlIGEgZnVuY3Rpb24sIHVzdWFsbHkgZnJvbSAnICsgJ1JlYWN0LlByb3BUeXBlcy4nLCBjb21wb25lbnROYW1lIHx8ICdSZWFjdCBjbGFzcycsIFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXSwgcHJvcE5hbWUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0ICAgICAgICBlcnJvciA9IHByb3BUeXBlc1twcm9wTmFtZV0ocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgbnVsbCwgJ1NFQ1JFVF9ET19OT1RfUEFTU19USElTX09SX1lPVV9XSUxMX0JFX0ZJUkVEJyk7XG5cdCAgICAgIH0gY2F0Y2ggKGV4KSB7XG5cdCAgICAgICAgZXJyb3IgPSBleDtcblx0ICAgICAgfVxuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyghZXJyb3IgfHwgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciwgJyVzOiB0eXBlIHNwZWNpZmljYXRpb24gb2YgJXMgYCVzYCBpcyBpbnZhbGlkOyB0aGUgdHlwZSBjaGVja2VyICcgKyAnZnVuY3Rpb24gbXVzdCByZXR1cm4gYG51bGxgIG9yIGFuIGBFcnJvcmAgYnV0IHJldHVybmVkIGEgJXMuICcgKyAnWW91IG1heSBoYXZlIGZvcmdvdHRlbiB0byBwYXNzIGFuIGFyZ3VtZW50IHRvIHRoZSB0eXBlIGNoZWNrZXIgJyArICdjcmVhdG9yIChhcnJheU9mLCBpbnN0YW5jZU9mLCBvYmplY3RPZiwgb25lT2YsIG9uZU9mVHlwZSwgYW5kICcgKyAnc2hhcGUgYWxsIHJlcXVpcmUgYW4gYXJndW1lbnQpLicsIGNvbXBvbmVudE5hbWUgfHwgJ1JlYWN0IGNsYXNzJywgUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXNbbG9jYXRpb25dLCBwcm9wTmFtZSwgdHlwZW9mIGVycm9yKSA6IHVuZGVmaW5lZDtcblx0ICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgIShlcnJvci5tZXNzYWdlIGluIGxvZ2dlZFR5cGVGYWlsdXJlcykpIHtcblx0ICAgICAgICAvLyBPbmx5IG1vbml0b3IgdGhpcyBmYWlsdXJlIG9uY2UgYmVjYXVzZSB0aGVyZSB0ZW5kcyB0byBiZSBhIGxvdCBvZiB0aGVcblx0ICAgICAgICAvLyBzYW1lIGVycm9yLlxuXHQgICAgICAgIGxvZ2dlZFR5cGVGYWlsdXJlc1tlcnJvci5tZXNzYWdlXSA9IHRydWU7XG5cdFxuXHQgICAgICAgIHZhciBhZGRlbmR1bSA9IGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bSgpO1xuXHQgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnRmFpbGVkIHByb3BUeXBlOiAlcyVzJywgZXJyb3IubWVzc2FnZSwgYWRkZW5kdW0pIDogdW5kZWZpbmVkO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogR2l2ZW4gYW4gZWxlbWVudCwgdmFsaWRhdGUgdGhhdCBpdHMgcHJvcHMgZm9sbG93IHRoZSBwcm9wVHlwZXMgZGVmaW5pdGlvbixcblx0ICogcHJvdmlkZWQgYnkgdGhlIHR5cGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBlbGVtZW50XG5cdCAqL1xuXHRmdW5jdGlvbiB2YWxpZGF0ZVByb3BUeXBlcyhlbGVtZW50KSB7XG5cdCAgdmFyIGNvbXBvbmVudENsYXNzID0gZWxlbWVudC50eXBlO1xuXHQgIGlmICh0eXBlb2YgY29tcG9uZW50Q2xhc3MgIT09ICdmdW5jdGlvbicpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgdmFyIG5hbWUgPSBjb21wb25lbnRDbGFzcy5kaXNwbGF5TmFtZSB8fCBjb21wb25lbnRDbGFzcy5uYW1lO1xuXHQgIGlmIChjb21wb25lbnRDbGFzcy5wcm9wVHlwZXMpIHtcblx0ICAgIGNoZWNrUHJvcFR5cGVzKG5hbWUsIGNvbXBvbmVudENsYXNzLnByb3BUeXBlcywgZWxlbWVudC5wcm9wcywgUmVhY3RQcm9wVHlwZUxvY2F0aW9ucy5wcm9wKTtcblx0ICB9XG5cdCAgaWYgKHR5cGVvZiBjb21wb25lbnRDbGFzcy5nZXREZWZhdWx0UHJvcHMgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGNvbXBvbmVudENsYXNzLmdldERlZmF1bHRQcm9wcy5pc1JlYWN0Q2xhc3NBcHByb3ZlZCwgJ2dldERlZmF1bHRQcm9wcyBpcyBvbmx5IHVzZWQgb24gY2xhc3NpYyBSZWFjdC5jcmVhdGVDbGFzcyAnICsgJ2RlZmluaXRpb25zLiBVc2UgYSBzdGF0aWMgcHJvcGVydHkgbmFtZWQgYGRlZmF1bHRQcm9wc2AgaW5zdGVhZC4nKSA6IHVuZGVmaW5lZDtcblx0ICB9XG5cdH1cblx0XG5cdHZhciBSZWFjdEVsZW1lbnRWYWxpZGF0b3IgPSB7XG5cdFxuXHQgIGNyZWF0ZUVsZW1lbnQ6IGZ1bmN0aW9uICh0eXBlLCBwcm9wcywgY2hpbGRyZW4pIHtcblx0ICAgIHZhciB2YWxpZFR5cGUgPSB0eXBlb2YgdHlwZSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIHR5cGUgPT09ICdmdW5jdGlvbic7XG5cdCAgICAvLyBXZSB3YXJuIGluIHRoaXMgY2FzZSBidXQgZG9uJ3QgdGhyb3cuIFdlIGV4cGVjdCB0aGUgZWxlbWVudCBjcmVhdGlvbiB0b1xuXHQgICAgLy8gc3VjY2VlZCBhbmQgdGhlcmUgd2lsbCBsaWtlbHkgYmUgZXJyb3JzIGluIHJlbmRlci5cblx0ICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKHZhbGlkVHlwZSwgJ1JlYWN0LmNyZWF0ZUVsZW1lbnQ6IHR5cGUgc2hvdWxkIG5vdCBiZSBudWxsLCB1bmRlZmluZWQsIGJvb2xlYW4sIG9yICcgKyAnbnVtYmVyLiBJdCBzaG91bGQgYmUgYSBzdHJpbmcgKGZvciBET00gZWxlbWVudHMpIG9yIGEgUmVhY3RDbGFzcyAnICsgJyhmb3IgY29tcG9zaXRlIGNvbXBvbmVudHMpLiVzJywgZ2V0RGVjbGFyYXRpb25FcnJvckFkZGVuZHVtKCkpIDogdW5kZWZpbmVkO1xuXHRcblx0ICAgIHZhciBlbGVtZW50ID0gUmVhY3RFbGVtZW50LmNyZWF0ZUVsZW1lbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XG5cdCAgICAvLyBUaGUgcmVzdWx0IGNhbiBiZSBudWxsaXNoIGlmIGEgbW9jayBvciBhIGN1c3RvbSBmdW5jdGlvbiBpcyB1c2VkLlxuXHQgICAgLy8gVE9ETzogRHJvcCB0aGlzIHdoZW4gdGhlc2UgYXJlIG5vIGxvbmdlciBhbGxvd2VkIGFzIHRoZSB0eXBlIGFyZ3VtZW50LlxuXHQgICAgaWYgKGVsZW1lbnQgPT0gbnVsbCkge1xuXHQgICAgICByZXR1cm4gZWxlbWVudDtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBTa2lwIGtleSB3YXJuaW5nIGlmIHRoZSB0eXBlIGlzbid0IHZhbGlkIHNpbmNlIG91ciBrZXkgdmFsaWRhdGlvbiBsb2dpY1xuXHQgICAgLy8gZG9lc24ndCBleHBlY3QgYSBub24tc3RyaW5nL2Z1bmN0aW9uIHR5cGUgYW5kIGNhbiB0aHJvdyBjb25mdXNpbmcgZXJyb3JzLlxuXHQgICAgLy8gV2UgZG9uJ3Qgd2FudCBleGNlcHRpb24gYmVoYXZpb3IgdG8gZGlmZmVyIGJldHdlZW4gZGV2IGFuZCBwcm9kLlxuXHQgICAgLy8gKFJlbmRlcmluZyB3aWxsIHRocm93IHdpdGggYSBoZWxwZnVsIG1lc3NhZ2UgYW5kIGFzIHNvb24gYXMgdGhlIHR5cGUgaXNcblx0ICAgIC8vIGZpeGVkLCB0aGUga2V5IHdhcm5pbmdzIHdpbGwgYXBwZWFyLilcblx0ICAgIGlmICh2YWxpZFR5cGUpIHtcblx0ICAgICAgZm9yICh2YXIgaSA9IDI7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICB2YWxpZGF0ZUNoaWxkS2V5cyhhcmd1bWVudHNbaV0sIHR5cGUpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgdmFsaWRhdGVQcm9wVHlwZXMoZWxlbWVudCk7XG5cdFxuXHQgICAgcmV0dXJuIGVsZW1lbnQ7XG5cdCAgfSxcblx0XG5cdCAgY3JlYXRlRmFjdG9yeTogZnVuY3Rpb24gKHR5cGUpIHtcblx0ICAgIHZhciB2YWxpZGF0ZWRGYWN0b3J5ID0gUmVhY3RFbGVtZW50VmFsaWRhdG9yLmNyZWF0ZUVsZW1lbnQuYmluZChudWxsLCB0eXBlKTtcblx0ICAgIC8vIExlZ2FjeSBob29rIFRPRE86IFdhcm4gaWYgdGhpcyBpcyBhY2Nlc3NlZFxuXHQgICAgdmFsaWRhdGVkRmFjdG9yeS50eXBlID0gdHlwZTtcblx0XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICBpZiAoY2FuRGVmaW5lUHJvcGVydHkpIHtcblx0ICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodmFsaWRhdGVkRmFjdG9yeSwgJ3R5cGUnLCB7XG5cdCAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcblx0ICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ0ZhY3RvcnkudHlwZSBpcyBkZXByZWNhdGVkLiBBY2Nlc3MgdGhlIGNsYXNzIGRpcmVjdGx5ICcgKyAnYmVmb3JlIHBhc3NpbmcgaXQgdG8gY3JlYXRlRmFjdG9yeS4nKSA6IHVuZGVmaW5lZDtcblx0ICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICd0eXBlJywge1xuXHQgICAgICAgICAgICAgIHZhbHVlOiB0eXBlXG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICByZXR1cm4gdHlwZTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiB2YWxpZGF0ZWRGYWN0b3J5O1xuXHQgIH0sXG5cdFxuXHQgIGNsb25lRWxlbWVudDogZnVuY3Rpb24gKGVsZW1lbnQsIHByb3BzLCBjaGlsZHJlbikge1xuXHQgICAgdmFyIG5ld0VsZW1lbnQgPSBSZWFjdEVsZW1lbnQuY2xvbmVFbGVtZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICBmb3IgKHZhciBpID0gMjsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YWxpZGF0ZUNoaWxkS2V5cyhhcmd1bWVudHNbaV0sIG5ld0VsZW1lbnQudHlwZSk7XG5cdCAgICB9XG5cdCAgICB2YWxpZGF0ZVByb3BUeXBlcyhuZXdFbGVtZW50KTtcblx0ICAgIHJldHVybiBuZXdFbGVtZW50O1xuXHQgIH1cblx0XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFJlYWN0RWxlbWVudFZhbGlkYXRvcjtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oNCkpKVxuXG4vKioqLyB9KSxcbi8qIDE1NSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgbWFwT2JqZWN0XG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblx0XG5cdC8qKlxuXHQgKiBFeGVjdXRlcyB0aGUgcHJvdmlkZWQgYGNhbGxiYWNrYCBvbmNlIGZvciBlYWNoIGVudW1lcmFibGUgb3duIHByb3BlcnR5IGluIHRoZVxuXHQgKiBvYmplY3QgYW5kIGNvbnN0cnVjdHMgYSBuZXcgb2JqZWN0IGZyb20gdGhlIHJlc3VsdHMuIFRoZSBgY2FsbGJhY2tgIGlzXG5cdCAqIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM6XG5cdCAqXG5cdCAqICAtIHRoZSBwcm9wZXJ0eSB2YWx1ZVxuXHQgKiAgLSB0aGUgcHJvcGVydHkgbmFtZVxuXHQgKiAgLSB0aGUgb2JqZWN0IGJlaW5nIHRyYXZlcnNlZFxuXHQgKlxuXHQgKiBQcm9wZXJ0aWVzIHRoYXQgYXJlIGFkZGVkIGFmdGVyIHRoZSBjYWxsIHRvIGBtYXBPYmplY3RgIHdpbGwgbm90IGJlIHZpc2l0ZWRcblx0ICogYnkgYGNhbGxiYWNrYC4gSWYgdGhlIHZhbHVlcyBvZiBleGlzdGluZyBwcm9wZXJ0aWVzIGFyZSBjaGFuZ2VkLCB0aGUgdmFsdWVcblx0ICogcGFzc2VkIHRvIGBjYWxsYmFja2Agd2lsbCBiZSB0aGUgdmFsdWUgYXQgdGhlIHRpbWUgYG1hcE9iamVjdGAgdmlzaXRzIHRoZW0uXG5cdCAqIFByb3BlcnRpZXMgdGhhdCBhcmUgZGVsZXRlZCBiZWZvcmUgYmVpbmcgdmlzaXRlZCBhcmUgbm90IHZpc2l0ZWQuXG5cdCAqXG5cdCAqIEBncmVwIGZ1bmN0aW9uIG9iamVjdE1hcCgpXG5cdCAqIEBncmVwIGZ1bmN0aW9uIG9iak1hcCgpXG5cdCAqXG5cdCAqIEBwYXJhbSB7P29iamVjdH0gb2JqZWN0XG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrXG5cdCAqIEBwYXJhbSB7Kn0gY29udGV4dFxuXHQgKiBAcmV0dXJuIHs/b2JqZWN0fVxuXHQgKi9cblx0ZnVuY3Rpb24gbWFwT2JqZWN0KG9iamVjdCwgY2FsbGJhY2ssIGNvbnRleHQpIHtcblx0ICBpZiAoIW9iamVjdCkge1xuXHQgICAgcmV0dXJuIG51bGw7XG5cdCAgfVxuXHQgIHZhciByZXN1bHQgPSB7fTtcblx0ICBmb3IgKHZhciBuYW1lIGluIG9iamVjdCkge1xuXHQgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBuYW1lKSkge1xuXHQgICAgICByZXN1bHRbbmFtZV0gPSBjYWxsYmFjay5jYWxsKGNvbnRleHQsIG9iamVjdFtuYW1lXSwgbmFtZSwgb2JqZWN0KTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBtYXBPYmplY3Q7XG5cbi8qKiovIH0pLFxuLyogMTU2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MpIHsvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIG9ubHlDaGlsZFxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIFJlYWN0RWxlbWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oNDIpO1xuXHRcblx0dmFyIGludmFyaWFudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHRcblx0LyoqXG5cdCAqIFJldHVybnMgdGhlIGZpcnN0IGNoaWxkIGluIGEgY29sbGVjdGlvbiBvZiBjaGlsZHJlbiBhbmQgdmVyaWZpZXMgdGhhdCB0aGVyZVxuXHQgKiBpcyBvbmx5IG9uZSBjaGlsZCBpbiB0aGUgY29sbGVjdGlvbi4gVGhlIGN1cnJlbnQgaW1wbGVtZW50YXRpb24gb2YgdGhpc1xuXHQgKiBmdW5jdGlvbiBhc3N1bWVzIHRoYXQgYSBzaW5nbGUgY2hpbGQgZ2V0cyBwYXNzZWQgd2l0aG91dCBhIHdyYXBwZXIsIGJ1dCB0aGVcblx0ICogcHVycG9zZSBvZiB0aGlzIGhlbHBlciBmdW5jdGlvbiBpcyB0byBhYnN0cmFjdCBhd2F5IHRoZSBwYXJ0aWN1bGFyIHN0cnVjdHVyZVxuXHQgKiBvZiBjaGlsZHJlbi5cblx0ICpcblx0ICogQHBhcmFtIHs/b2JqZWN0fSBjaGlsZHJlbiBDaGlsZCBjb2xsZWN0aW9uIHN0cnVjdHVyZS5cblx0ICogQHJldHVybiB7UmVhY3RDb21wb25lbnR9IFRoZSBmaXJzdCBhbmQgb25seSBgUmVhY3RDb21wb25lbnRgIGNvbnRhaW5lZCBpbiB0aGVcblx0ICogc3RydWN0dXJlLlxuXHQgKi9cblx0ZnVuY3Rpb24gb25seUNoaWxkKGNoaWxkcmVuKSB7XG5cdCAgIVJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChjaGlsZHJlbikgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnb25seUNoaWxkIG11c3QgYmUgcGFzc2VkIGEgY2hpbGRyZW4gd2l0aCBleGFjdGx5IG9uZSBjaGlsZC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdCAgcmV0dXJuIGNoaWxkcmVuO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IG9ubHlDaGlsZDtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oNCkpKVxuXG4vKioqLyB9KSxcbi8qIDE1NyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzKSB7LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBkZXByZWNhdGVkXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGFzc2lnbiA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpO1xuXHR2YXIgd2FybmluZyA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHRcblx0LyoqXG5cdCAqIFRoaXMgd2lsbCBsb2cgYSBzaW5nbGUgZGVwcmVjYXRpb24gbm90aWNlIHBlciBmdW5jdGlvbiBhbmQgZm9yd2FyZCB0aGUgY2FsbFxuXHQgKiBvbiB0byB0aGUgbmV3IEFQSS5cblx0ICpcblx0ICogQHBhcmFtIHtzdHJpbmd9IGZuTmFtZSBUaGUgbmFtZSBvZiB0aGUgZnVuY3Rpb25cblx0ICogQHBhcmFtIHtzdHJpbmd9IG5ld01vZHVsZSBUaGUgbW9kdWxlIHRoYXQgZm4gd2lsbCBleGlzdCBpblxuXHQgKiBAcGFyYW0ge3N0cmluZ30gbmV3UGFja2FnZSBUaGUgbW9kdWxlIHRoYXQgZm4gd2lsbCBleGlzdCBpblxuXHQgKiBAcGFyYW0geyp9IGN0eCBUaGUgY29udGV4dCB0aGlzIGZvcndhcmRlZCBjYWxsIHNob3VsZCBydW4gaW5cblx0ICogQHBhcmFtIHtmdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIGZvcndhcmQgb24gdG9cblx0ICogQHJldHVybiB7ZnVuY3Rpb259IFRoZSBmdW5jdGlvbiB0aGF0IHdpbGwgd2FybiBvbmNlIGFuZCB0aGVuIGNhbGwgZm5cblx0ICovXG5cdGZ1bmN0aW9uIGRlcHJlY2F0ZWQoZm5OYW1lLCBuZXdNb2R1bGUsIG5ld1BhY2thZ2UsIGN0eCwgZm4pIHtcblx0ICB2YXIgd2FybmVkID0gZmFsc2U7XG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgIHZhciBuZXdGbiA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcod2FybmVkLFxuXHQgICAgICAvLyBSZXF1aXJlIGV4YW1wbGVzIGluIHRoaXMgc3RyaW5nIG11c3QgYmUgc3BsaXQgdG8gcHJldmVudCBSZWFjdCdzXG5cdCAgICAgIC8vIGJ1aWxkIHRvb2xzIGZyb20gbWlzdGFraW5nIHRoZW0gZm9yIHJlYWwgcmVxdWlyZXMuXG5cdCAgICAgIC8vIE90aGVyd2lzZSB0aGUgYnVpbGQgdG9vbHMgd2lsbCBhdHRlbXB0IHRvIGJ1aWxkIGEgJyVzJyBtb2R1bGUuXG5cdCAgICAgICdSZWFjdC4lcyBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlICVzLiVzIGZyb20gcmVxdWlyZScgKyAnKFxcJyVzXFwnKSAnICsgJ2luc3RlYWQuJywgZm5OYW1lLCBuZXdNb2R1bGUsIGZuTmFtZSwgbmV3UGFja2FnZSkgOiB1bmRlZmluZWQ7XG5cdCAgICAgIHdhcm5lZCA9IHRydWU7XG5cdCAgICAgIHJldHVybiBmbi5hcHBseShjdHgsIGFyZ3VtZW50cyk7XG5cdCAgICB9O1xuXHQgICAgLy8gV2UgbmVlZCB0byBtYWtlIHN1cmUgYWxsIHByb3BlcnRpZXMgb2YgdGhlIG9yaWdpbmFsIGZuIGFyZSBjb3BpZWQgb3Zlci5cblx0ICAgIC8vIEluIHBhcnRpY3VsYXIsIHRoaXMgaXMgbmVlZGVkIHRvIHN1cHBvcnQgUHJvcFR5cGVzXG5cdCAgICByZXR1cm4gYXNzaWduKG5ld0ZuLCBmbik7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gZm47XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZGVwcmVjYXRlZDtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oNCkpKVxuXG4vKioqLyB9KSxcbi8qIDE1OCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblxuXG4vKioqLyB9KSxcbi8qIDE1OSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0dmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblx0XG5cdHZhciBfYm9keSA9IF9fd2VicGFja19yZXF1aXJlX18oMTYwKTtcblx0XG5cdHZhciBfYm9keTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ib2R5KTtcblx0XG5cdHZhciBfdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxMyk7XG5cdFxuXHR2YXIgX3JlY2lwZVN0b3JlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMjkpO1xuXHRcblx0dmFyIF9yZWNpcGVTdG9yZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWNpcGVTdG9yZSk7XG5cdFxuXHR2YXIgX2FjdGlvbnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4Nik7XG5cdFxuXHR2YXIgX2FjdGlvbnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYWN0aW9ucyk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHR2YXIgU2l0ZUNvbnRhaW5lciA9IGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG5cdCAgICBfaW5oZXJpdHMoU2l0ZUNvbnRhaW5lciwgX0NvbXBvbmVudCk7XG5cdFxuXHQgICAgZnVuY3Rpb24gU2l0ZUNvbnRhaW5lcigpIHtcblx0ICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU2l0ZUNvbnRhaW5lcik7XG5cdFxuXHQgICAgICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoU2l0ZUNvbnRhaW5lci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFNpdGVDb250YWluZXIpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcblx0ICAgIH1cblx0XG5cdCAgICBfY3JlYXRlQ2xhc3MoU2l0ZUNvbnRhaW5lciwgW3tcblx0ICAgICAgICBrZXk6ICdyZW5kZXInLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG5cdCAgICAgICAgICAgIHZhciBvcGVuQ29udGVudCA9IG51bGw7XG5cdCAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zdGF0ZS5vcGVuLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5vcGVuW2ldLmFjdGl2ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIG9wZW5Db250ZW50ID0gdGhpcy5zdGF0ZS5vcGVuW2ldO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIC8vY29uc29sZS5sb2cob3BlbkNvbnRlbnQpO1xuXHQgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHRoaXMuc3RhdGUpO1xuXHQgICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2JvZHkyLmRlZmF1bHQsIHtcblx0ICAgICAgICAgICAgICAgIHNPcGVuQ29udGVudDogb3BlbkNvbnRlbnQsXG5cdCAgICAgICAgICAgICAgICBzT3Blbkxpc3Q6IHRoaXMuc3RhdGUub3Blbixcblx0ICAgICAgICAgICAgICAgIHNVc2VyOiB0aGlzLnN0YXRlLnVzZXIsXG5cdCAgICAgICAgICAgICAgICBzQXV0aGVudGljYXRlOiB0aGlzLnN0YXRlLmF1dGhlbnRpY2F0ZSxcblx0ICAgICAgICAgICAgICAgIHNOb3RpZnk6IHRoaXMuc3RhdGUubm90aWZ5LFxuXHRcblx0ICAgICAgICAgICAgICAgIGFOZXdSZWNpcGU6IF9hY3Rpb25zMi5kZWZhdWx0Lm5ld1JlY2lwZSxcblx0ICAgICAgICAgICAgICAgIGFTYXZlUmVjaXBlOiBfYWN0aW9uczIuZGVmYXVsdC5zYXZlUmVjaXBlLFxuXHQgICAgICAgICAgICAgICAgYUdldFJlY2lwZTogX2FjdGlvbnMyLmRlZmF1bHQuZ2V0UmVjaXBlLFxuXHQgICAgICAgICAgICAgICAgYUNsb3NlUmVjaXBlOiBfYWN0aW9uczIuZGVmYXVsdC5jbG9zZVJlY2lwZSxcblx0ICAgICAgICAgICAgICAgIGFBZGRJbmdyZWRpZW50OiBfYWN0aW9uczIuZGVmYXVsdC5hZGRJbmdyZWRpZW50LFxuXHQgICAgICAgICAgICAgICAgYUFkZFN0ZXA6IF9hY3Rpb25zMi5kZWZhdWx0LmFkZFN0ZXAsXG5cdCAgICAgICAgICAgICAgICBhVXBkYXRlVmFsdWU6IF9hY3Rpb25zMi5kZWZhdWx0LnVwZGF0ZVZhbHVlLFxuXHRcblx0ICAgICAgICAgICAgICAgIGFOb3RpZnk6IF9hY3Rpb25zMi5kZWZhdWx0Lm5vdGlmeSxcblx0ICAgICAgICAgICAgICAgIGFBdXRoZW50aWNhdGU6IF9hY3Rpb25zMi5kZWZhdWx0LmF1dGhlbnRpY2F0ZSxcblx0ICAgICAgICAgICAgICAgIGFPcGVuQ29udGVudDogX2FjdGlvbnMyLmRlZmF1bHQub3BlbkNvbnRlbnQsXG5cdCAgICAgICAgICAgICAgICBhU2VydmVyUmVxdWVzdDogX2FjdGlvbnMyLmRlZmF1bHQuc2VydmVyUmVxdWVzdCxcblx0ICAgICAgICAgICAgICAgIGFVcGRhdGVVc2VyU3RhdHVzOiBfYWN0aW9uczIuZGVmYXVsdC51cGRhdGVVc2VyU3RhdHVzLFxuXHQgICAgICAgICAgICAgICAgYVJlZ2lzdGVyOiBfYWN0aW9uczIuZGVmYXVsdC5yZWdpc3Rlcixcblx0ICAgICAgICAgICAgICAgIGFMb2dpbjogX2FjdGlvbnMyLmRlZmF1bHQubG9naW4sXG5cdCAgICAgICAgICAgICAgICBhTG9nb3V0OiBfYWN0aW9uczIuZGVmYXVsdC5sb2dvdXQsXG5cdCAgICAgICAgICAgICAgICBhVXBkYXRlUGFzc3dvcmQ6IF9hY3Rpb25zMi5kZWZhdWx0LnVwZGF0ZVBhc3N3b3JkXG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgIH1dLCBbe1xuXHQgICAgICAgIGtleTogJ2dldFN0b3JlcycsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFN0b3JlcygpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIFtfcmVjaXBlU3RvcmUyLmRlZmF1bHRdO1xuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdjYWxjdWxhdGVTdGF0ZScsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNhbGN1bGF0ZVN0YXRlKHByZXZTdGF0ZSkge1xuXHQgICAgICAgICAgICByZXR1cm4gX3JlY2lwZVN0b3JlMi5kZWZhdWx0LmdldFN0YXRlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgfV0pO1xuXHRcblx0ICAgIHJldHVybiBTaXRlQ29udGFpbmVyO1xuXHR9KF9yZWFjdC5Db21wb25lbnQpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gX3V0aWxzLkNvbnRhaW5lci5jcmVhdGUoU2l0ZUNvbnRhaW5lcik7XG5cbi8qKiovIH0pLFxuLyogMTYwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0dmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cdFxuXHR2YXIgX3JlYWN0RG9tID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTgpO1xuXHRcblx0dmFyIF9yZWFjdERvbTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdERvbSk7XG5cdFxuXHR2YXIgX2hlYWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTYxKTtcblx0XG5cdHZhciBfaGVhZGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2hlYWRlcik7XG5cdFxuXHR2YXIgX25hdmlnYXRpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5Nik7XG5cdFxuXHR2YXIgX25hdmlnYXRpb24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbmF2aWdhdGlvbik7XG5cdFxuXHR2YXIgX3JlY2lwZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTYzKTtcblx0XG5cdHZhciBfcmVjaXBlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlY2lwZSk7XG5cdFxuXHR2YXIgX2hvbWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5OSk7XG5cdFxuXHR2YXIgX2hvbWUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaG9tZSk7XG5cdFxuXHR2YXIgX3VzZXJTZXR0aW5ncyA9IF9fd2VicGFja19yZXF1aXJlX18oMjAyKTtcblx0XG5cdHZhciBfdXNlclNldHRpbmdzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3VzZXJTZXR0aW5ncyk7XG5cdFxuXHR2YXIgX2F1dGhlbnRpY2F0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMDUpO1xuXHRcblx0dmFyIF9hdXRoZW50aWNhdGlvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9hdXRoZW50aWNhdGlvbik7XG5cdFxuXHR2YXIgX25vdGlmeSA9IF9fd2VicGFja19yZXF1aXJlX18oMjA4KTtcblx0XG5cdHZhciBfbm90aWZ5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX25vdGlmeSk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0X193ZWJwYWNrX3JlcXVpcmVfXygyMTEpO1xuXHRcblx0dmFyIEJvZHkgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlQ2xhc3Moe1xuXHQgICAgZGlzcGxheU5hbWU6ICdCb2R5Jyxcblx0XG5cdCAgICBhcHBBdXRoZW50aWNhdGU6IG51bGwsXG5cdCAgICBhcHBCb2R5OiBudWxsLFxuXHQgICAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbiBnZXRJbml0aWFsU3RhdGUoKSB7XG5cdCAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgc2hvd0xvZ2luOiBmYWxzZSxcblx0ICAgICAgICAgICAgc2hvd1JlZ2lzdGVyOiBmYWxzZVxuXHQgICAgICAgIH07XG5cdCAgICB9LFxuXHQgICAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuXHQgICAgICAgIHRoaXMuYXBwQXV0aGVudGljYXRlID0gX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKHRoaXMpLnF1ZXJ5U2VsZWN0b3IoXCIuYXBwLWF1dGhlbnRpY2F0ZVwiKTtcblx0ICAgICAgICB0aGlzLmFwcEJvZHkgPSBfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUodGhpcykucXVlcnlTZWxlY3RvcihcIi5hcHAtYm9keVwiKTtcblx0ICAgICAgICB0aGlzLmhhbmRsZUxvYWQoKTtcblx0ICAgIH0sXG5cdCAgICBjb21wb25lbnREaWRVcGRhdGU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcblx0ICAgICAgICB0aGlzLmhhbmRsZUxvYWQoKTtcblx0ICAgIH0sXG5cdCAgICBoYW5kbGVMb2FkOiBmdW5jdGlvbiBoYW5kbGVMb2FkKCkge1xuXHQgICAgICAgIGlmICh0aGlzLnByb3BzLnNBdXRoZW50aWNhdGUuYWN0aXZlKSB7XG5cdCAgICAgICAgICAgIHRoaXMuYXBwQXV0aGVudGljYXRlLmNsYXNzTGlzdC5hZGQoXCJzaG93XCIpO1xuXHQgICAgICAgICAgICB0aGlzLmFwcEJvZHkuY2xhc3NMaXN0LmFkZChcImhpZGVcIik7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgLy8gUmV2ZXJzZSB0aGUgYW5pbWF0aW9uIGRlbGF5XG5cdCAgICAgICAgICAgIHRoaXMuYXBwQXV0aGVudGljYXRlLmNsYXNzTGlzdC5hZGQoXCJoaWRlXCIpO1xuXHQgICAgICAgICAgICB0aGlzLmFwcEJvZHkuY2xhc3NMaXN0LmFkZChcInNob3dcIik7XG5cdFxuXHQgICAgICAgICAgICAvLyBQdWxsIG9mZiBjbGFzc2VzIHRoYXQgYW5pbWF0ZSBcblx0ICAgICAgICAgICAgdGhpcy5hcHBBdXRoZW50aWNhdGUuY2xhc3NMaXN0LnJlbW92ZShcInNob3dcIik7XG5cdCAgICAgICAgICAgIHRoaXMuYXBwQm9keS5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZVwiKTtcblx0XG5cdCAgICAgICAgICAgIC8vIENsZWFuIHVwIHdoZW4gYW5pbWF0aW9ucyBhcmUgZmluaXNoZWRcblx0ICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgIHNlbGYuYXBwQXV0aGVudGljYXRlLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRlXCIpO1xuXHQgICAgICAgICAgICAgICAgc2VsZi5hcHBCb2R5LmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93XCIpO1xuXHQgICAgICAgICAgICB9LCAxMDAwKTtcblx0ICAgICAgICB9XG5cdCAgICB9LFxuXHQgICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG5cdCAgICAgICAgdmFyIG9wZW5Db250ZW50O1xuXHQgICAgICAgIGlmICh0aGlzLnByb3BzLnNPcGVuQ29udGVudC5pZCA9PSBcImhvbWVcIikge1xuXHQgICAgICAgICAgICBvcGVuQ29udGVudCA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ob21lMi5kZWZhdWx0LCB7XG5cdCAgICAgICAgICAgICAgICBzSG9tZTogdGhpcy5wcm9wcy5zT3BlbkNvbnRlbnQsXG5cdCAgICAgICAgICAgICAgICBhR2V0UmVjaXBlOiB0aGlzLnByb3BzLmFHZXRSZWNpcGVcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLnNPcGVuQ29udGVudC5pZCA9PSBcInVzZXJcIikge1xuXHQgICAgICAgICAgICBvcGVuQ29udGVudCA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF91c2VyU2V0dGluZ3MyLmRlZmF1bHQsIHtcblx0ICAgICAgICAgICAgICAgIHNVc2VyOiB0aGlzLnByb3BzLnNVc2VyLFxuXHQgICAgICAgICAgICAgICAgYVVwZGF0ZVVzZXJTdGF0dXM6IHRoaXMucHJvcHMuYVVwZGF0ZVVzZXJTdGF0dXNcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgb3BlbkNvbnRlbnQgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVjaXBlMi5kZWZhdWx0LCB7XG5cdCAgICAgICAgICAgICAgICByZWNpcGU6IHRoaXMucHJvcHMuc09wZW5Db250ZW50LnJlY2lwZSxcblx0ICAgICAgICAgICAgICAgIHNVc2VyOiB0aGlzLnByb3BzLnNVc2VyLFxuXHQgICAgICAgICAgICAgICAgYVNhdmVSZWNpcGU6IHRoaXMucHJvcHMuYVNhdmVSZWNpcGUsXG5cdCAgICAgICAgICAgICAgICBhQWRkSW5ncmVkaWVudDogdGhpcy5wcm9wcy5hQWRkSW5ncmVkaWVudCxcblx0ICAgICAgICAgICAgICAgIGFBZGRTdGVwOiB0aGlzLnByb3BzLmFBZGRTdGVwLFxuXHQgICAgICAgICAgICAgICAgYVVwZGF0ZVZhbHVlOiB0aGlzLnByb3BzLmFVcGRhdGVWYWx1ZSxcblx0ICAgICAgICAgICAgICAgIGFTZXJ2ZXJSZXF1ZXN0OiB0aGlzLnByb3BzLmFTZXJ2ZXJSZXF1ZXN0LFxuXHQgICAgICAgICAgICAgICAgYUdldFJlY2lwZTogdGhpcy5wcm9wcy5hR2V0UmVjaXBlLFxuXHQgICAgICAgICAgICAgICAgYU5vdGlmeTogdGhpcy5wcm9wcy5hTm90aWZ5XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAnc2VjdGlvbicsXG5cdCAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnYXBwJyB9LFxuXHQgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfbm90aWZ5Mi5kZWZhdWx0LCB7XG5cdCAgICAgICAgICAgICAgICBzTm90aWZ5OiB0aGlzLnByb3BzLnNOb3RpZnksXG5cdCAgICAgICAgICAgICAgICBhTm90aWZ5OiB0aGlzLnByb3BzLmFOb3RpZnlcblx0ICAgICAgICAgICAgfSksXG5cdCAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgJ3NlY3Rpb24nLFxuXHQgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdhcHAtYXV0aGVudGljYXRlJyB9LFxuXHQgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2F1dGhlbnRpY2F0aW9uMi5kZWZhdWx0LCB7XG5cdCAgICAgICAgICAgICAgICAgICAgc0F1dGhlbnRpY2F0ZTogdGhpcy5wcm9wcy5zQXV0aGVudGljYXRlLFxuXHQgICAgICAgICAgICAgICAgICAgIGFBdXRoZW50aWNhdGU6IHRoaXMucHJvcHMuYUF1dGhlbnRpY2F0ZSxcblx0ICAgICAgICAgICAgICAgICAgICBhUmVnaXN0ZXI6IHRoaXMucHJvcHMuYVJlZ2lzdGVyLFxuXHQgICAgICAgICAgICAgICAgICAgIGFMb2dpbjogdGhpcy5wcm9wcy5hTG9naW4sXG5cdCAgICAgICAgICAgICAgICAgICAgYVVwZGF0ZVBhc3N3b3JkOiB0aGlzLnByb3BzLmFVcGRhdGVQYXNzd29yZCxcblx0ICAgICAgICAgICAgICAgICAgICBhTm90aWZ5OiB0aGlzLnByb3BzLmFOb3RpZnlcblx0ICAgICAgICAgICAgICAgIH0pXG5cdCAgICAgICAgICAgICksXG5cdCAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgJ3NlY3Rpb24nLFxuXHQgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdhcHAtYm9keScgfSxcblx0ICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9uYXZpZ2F0aW9uMi5kZWZhdWx0LCB7XG5cdCAgICAgICAgICAgICAgICAgICAgc09wZW5MaXN0OiB0aGlzLnByb3BzLnNPcGVuTGlzdCxcblx0ICAgICAgICAgICAgICAgICAgICBzVXNlcjogdGhpcy5wcm9wcy5zVXNlcixcblx0ICAgICAgICAgICAgICAgICAgICBhT3BlbkNvbnRlbnQ6IHRoaXMucHJvcHMuYU9wZW5Db250ZW50LFxuXHQgICAgICAgICAgICAgICAgICAgIGFOZXdSZWNpcGU6IHRoaXMucHJvcHMuYU5ld1JlY2lwZSxcblx0ICAgICAgICAgICAgICAgICAgICBhQ2xvc2VSZWNpcGU6IHRoaXMucHJvcHMuYUNsb3NlUmVjaXBlXG5cdCAgICAgICAgICAgICAgICB9KSxcblx0ICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuXHQgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnc2l0ZS1ib2R5JyB9LFxuXHQgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9oZWFkZXIyLmRlZmF1bHQsIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgc1VzZXI6IHRoaXMucHJvcHMuc1VzZXIsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGFBdXRoZW50aWNhdGU6IHRoaXMucHJvcHMuYUF1dGhlbnRpY2F0ZSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgYUdldFJlY2lwZTogdGhpcy5wcm9wcy5hR2V0UmVjaXBlLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBhU2VydmVyUmVxdWVzdDogdGhpcy5wcm9wcy5hU2VydmVyUmVxdWVzdCxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgYUxvZ291dDogdGhpcy5wcm9wcy5hTG9nb3V0XG5cdCAgICAgICAgICAgICAgICAgICAgfSksXG5cdCAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICdtYWluJyxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdvcGVuLWNvbnRlbnQnIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5Db250ZW50XG5cdCAgICAgICAgICAgICAgICAgICAgKVxuXHQgICAgICAgICAgICAgICAgKVxuXHQgICAgICAgICAgICApXG5cdCAgICAgICAgKTtcblx0ICAgIH1cblx0fSk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBCb2R5O1xuXG4vKioqLyB9KSxcbi8qIDE2MSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdHZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXHRcblx0dmFyIF9yZWFjdERvbSA9IF9fd2VicGFja19yZXF1aXJlX18oMTU4KTtcblx0XG5cdHZhciBfcmVhY3REb20yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3REb20pO1xuXHRcblx0dmFyIF9zZWFyY2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2Mik7XG5cdFxuXHR2YXIgX3NlYXJjaDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zZWFyY2gpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdF9fd2VicGFja19yZXF1aXJlX18oMTk0KTtcblx0XG5cdHZhciBIZWFkZXIgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlQ2xhc3Moe1xuXHQgICAgZGlzcGxheU5hbWU6ICdIZWFkZXInLFxuXHRcblx0ICAgIHVzZXJNZW51OiBudWxsLFxuXHQgICAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuXHQgICAgICAgIHRoaXMudXNlck1lbnUgPSBfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUodGhpcykucXVlcnlTZWxlY3RvcihcIi51c2VyLW1lbnVcIik7XG5cdCAgICB9LFxuXHQgICAgaGFuZGxlRGlzbWlzc09uQ2xpY2s6IGZ1bmN0aW9uIGhhbmRsZURpc21pc3NPbkNsaWNrKGUpIHtcblx0ICAgICAgICB2YXIgY3VycmVudE5vZGUgPSBlLnRhcmdldDtcblx0ICAgICAgICB2YXIgaXNGcm9tTWVudSA9IGZhbHNlO1xuXHQgICAgICAgIHdoaWxlIChjdXJyZW50Tm9kZSAmJiBjdXJyZW50Tm9kZSAhPSBkb2N1bWVudC5ib2R5KSB7XG5cdCAgICAgICAgICAgIGlmIChjdXJyZW50Tm9kZSA9PSB0aGlzLnVzZXJNZW51KSB7XG5cdCAgICAgICAgICAgICAgICBpc0Zyb21NZW51ID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGN1cnJlbnROb2RlID0gY3VycmVudE5vZGUucGFyZW50Tm9kZTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmICghaXNGcm9tTWVudSkge1xuXHQgICAgICAgICAgICB0aGlzLnVzZXJNZW51LmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93LW1lbnVcIik7XG5cdCAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5oYW5kbGVEaXNtaXNzT25DbGljayk7XG5cdCAgICAgICAgfVxuXHQgICAgfSxcblx0ICAgIGhhbmRsZVVzZXJNZW51Q2xpY2s6IGZ1bmN0aW9uIGhhbmRsZVVzZXJNZW51Q2xpY2soZSkge1xuXHQgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFxuXHQgICAgICAgIGlmICh0aGlzLnVzZXJNZW51LmNsYXNzTGlzdC5jb250YWlucyhcInNob3ctbWVudVwiKSkge1xuXHQgICAgICAgICAgICB0aGlzLnVzZXJNZW51LmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93LW1lbnVcIik7XG5cdCAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5oYW5kbGVEaXNtaXNzT25DbGljayk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgdGhpcy51c2VyTWVudS5jbGFzc0xpc3QuYWRkKFwic2hvdy1tZW51XCIpO1xuXHQgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuaGFuZGxlRGlzbWlzc09uQ2xpY2spO1xuXHQgICAgICAgIH1cblx0ICAgIH0sXG5cdCAgICBoYW5kbGVBdXRoZW50aWNhdGU6IGZ1bmN0aW9uIGhhbmRsZUF1dGhlbnRpY2F0ZShlKSB7XG5cdCAgICAgICAgdGhpcy5wcm9wcy5hQXV0aGVudGljYXRlKHRydWUsIFwibG9naW5cIik7XG5cdCAgICB9LFxuXHQgICAgaGFuZGxlTG9nb3V0OiBmdW5jdGlvbiBoYW5kbGVMb2dvdXQoZSkge1xuXHQgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFxuXHQgICAgICAgIHRoaXMucHJvcHMuYUxvZ291dCgpO1xuXHQgICAgfSxcblx0ICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuXHQgICAgICAgIHZhciB1c2VyTWVudSA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAnbmF2Jyxcblx0ICAgICAgICAgICAgeyBjbGFzc05hbWU6ICd1c2VyLW1lbnUnIH0sXG5cdCAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgJ2EnLFxuXHQgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICd1c2VyLWxhYmVsJywgb25DbGljazogdGhpcy5oYW5kbGVBdXRoZW50aWNhdGUgfSxcblx0ICAgICAgICAgICAgICAgICdMb2cgaW4nXG5cdCAgICAgICAgICAgIClcblx0ICAgICAgICApO1xuXHRcblx0ICAgICAgICBpZiAodGhpcy5wcm9wcy5zVXNlciAhPSBudWxsKSB7XG5cdCAgICAgICAgICAgIHVzZXJNZW51ID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAnbmF2Jyxcblx0ICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAndXNlci1tZW51JyB9LFxuXHQgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgJ2EnLFxuXHQgICAgICAgICAgICAgICAgICAgIHsgb25DbGljazogdGhpcy5oYW5kbGVVc2VyTWVudUNsaWNrIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICdsYWJlbCcsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAndXNlci1sYWJlbCcgfSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5zVXNlci5maXJzdE5hbWUgKyBcIiBcIiArIHRoaXMucHJvcHMuc1VzZXIubGFzdE5hbWVcblx0ICAgICAgICAgICAgICAgICAgICApLFxuXHQgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ3RpLWFuZ2xlLWRvd24nIH0pXG5cdCAgICAgICAgICAgICAgICApLFxuXHQgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdtZW51LW9wdGlvbnMnIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICdhJyxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdpdGVtJywgb25DbGljazogdGhpcy5oYW5kbGVMb2dvdXQgfSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgJ0xvZyBvdXQnXG5cdCAgICAgICAgICAgICAgICAgICAgKVxuXHQgICAgICAgICAgICAgICAgKVxuXHQgICAgICAgICAgICApO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAnaGVhZGVyJyxcblx0ICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdoZWFkZXItY29udGVudCcgfSxcblx0ICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3NlYXJjaDIuZGVmYXVsdCwge1xuXHQgICAgICAgICAgICAgICAgYUdldFJlY2lwZTogdGhpcy5wcm9wcy5hR2V0UmVjaXBlLFxuXHQgICAgICAgICAgICAgICAgYVNlcnZlclJlcXVlc3Q6IHRoaXMucHJvcHMuYVNlcnZlclJlcXVlc3Rcblx0ICAgICAgICAgICAgfSksXG5cdCAgICAgICAgICAgIHVzZXJNZW51XG5cdCAgICAgICAgKTtcblx0ICAgIH1cblx0fSk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBIZWFkZXI7XG5cbi8qKiovIH0pLFxuLyogMTYyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0dmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cdFxuXHR2YXIgX3JlYWN0RG9tID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTgpO1xuXHRcblx0dmFyIF9yZWFjdERvbTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdERvbSk7XG5cdFxuXHR2YXIgX3JlY2lwZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTYzKTtcblx0XG5cdHZhciBfcmVjaXBlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlY2lwZSk7XG5cdFxuXHR2YXIgX2FjdGlvbnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4Nik7XG5cdFxuXHR2YXIgX2FjdGlvbnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYWN0aW9ucyk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0X193ZWJwYWNrX3JlcXVpcmVfXygxOTIpO1xuXHRcblx0dmFyIFNlYXJjaCA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVDbGFzcyh7XG5cdCAgICBkaXNwbGF5TmFtZTogJ1NlYXJjaCcsXG5cdFxuXHQgICAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbiBnZXRJbml0aWFsU3RhdGUoKSB7XG5cdCAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgZnVsbExpc3Q6IFtdLFxuXHQgICAgICAgICAgICBmaWx0ZXJlZExpc3Q6IFtdLFxuXHQgICAgICAgICAgICBzZWFyY2hUZXJtczogW10sXG5cdCAgICAgICAgICAgIGFjdGl2ZUluZGV4OiAwXG5cdCAgICAgICAgfTtcblx0ICAgIH0sXG5cdCAgICBnZXRSZWdFeE9iajogZnVuY3Rpb24gZ2V0UmVnRXhPYmooc2VhcmNoUmVnRXgpIHtcblx0ICAgICAgICB2YXIgcmV0dXJuT2JqID0gbnVsbDtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICByZXR1cm5PYmogPSBuZXcgUmVnRXhwKHNlYXJjaFJlZ0V4LCBcImlcIik7XG5cdCAgICAgICAgfSBjYXRjaCAoZSkge31cblx0ICAgICAgICByZXR1cm4gcmV0dXJuT2JqO1xuXHQgICAgfSxcblx0ICAgIGdldEhpZ2hsaWdodGVkVGl0bGU6IGZ1bmN0aW9uIGdldEhpZ2hsaWdodGVkVGl0bGUodGl0bGUpIHtcblx0ICAgICAgICB2YXIgdGl0bGVIVE1MID0gdGl0bGU7XG5cdCAgICAgICAgdmFyIHdoZXJlVG9TdGFydCA9IDA7XG5cdCAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB0aGlzLnN0YXRlLnNlYXJjaFRlcm1zLmxlbmd0aDsgeCsrKSB7XG5cdCAgICAgICAgICAgIHZhciB0ZXJtID0gdGhpcy5zdGF0ZS5zZWFyY2hUZXJtc1t4XTtcblx0ICAgICAgICAgICAgaWYgKHRlcm0gPT0gXCJcIikgY29udGludWU7XG5cdCAgICAgICAgICAgIHZhciByZWdFeE9iaiA9IHRoaXMuZ2V0UmVnRXhPYmoodGVybSk7XG5cdCAgICAgICAgICAgIHZhciBtYXRjaCA9IHRpdGxlSFRNTC5zdWJzdHJpbmcod2hlcmVUb1N0YXJ0LCB0aXRsZUhUTUwubGVuZ3RoKS5tYXRjaChyZWdFeE9iaik7XG5cdCAgICAgICAgICAgIHZhciByZXBsYWNlbWVudCA9IFwiPHNwYW4gY2xhc3M9J2hpZ2hsaWdodCc+XCIgKyBtYXRjaFswXSArIFwiPC9zcGFuPlwiO1xuXHRcblx0ICAgICAgICAgICAgdmFyIGJlZm9yZVN0cmluZyA9IHRpdGxlSFRNTC5zdWJzdHJpbmcoMCwgd2hlcmVUb1N0YXJ0KTtcblx0ICAgICAgICAgICAgdmFyIGFmdGVyU3RyaW5nID0gdGl0bGVIVE1MLnN1YnN0cmluZyh3aGVyZVRvU3RhcnQsIHRpdGxlSFRNTC5sZW5ndGgpO1xuXHRcblx0ICAgICAgICAgICAgdGl0bGVIVE1MID0gYmVmb3JlU3RyaW5nICsgYWZ0ZXJTdHJpbmcucmVwbGFjZShyZWdFeE9iaiwgcmVwbGFjZW1lbnQpO1xuXHQgICAgICAgICAgICB3aGVyZVRvU3RhcnQgKz0gbWF0Y2guaW5kZXggKyByZXBsYWNlbWVudC5sZW5ndGg7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiB7IF9faHRtbDogdGl0bGVIVE1MIH07XG5cdCAgICB9LFxuXHQgICAgZ2V0UmVjaXBlSFRNTDogZnVuY3Rpb24gZ2V0UmVjaXBlSFRNTChyZWNpcGUsIGluZGV4KSB7XG5cdCAgICAgICAgdmFyIHJvd0NsYXNzZXMgPSBcInJvd1wiO1xuXHQgICAgICAgIGlmICh0aGlzLnN0YXRlLmFjdGl2ZUluZGV4ID09IGluZGV4KSB7XG5cdCAgICAgICAgICAgIHJvd0NsYXNzZXMgKz0gXCIgYWN0aXZlXCI7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICAgIHsgY2xhc3NOYW1lOiByb3dDbGFzc2VzLCBrZXk6IHJlY2lwZS5pZCwgJ2RhdGEtaWQnOiByZWNpcGUuaWQsIG9uQ2xpY2s6IHRoaXMuc2VsZWN0IH0sXG5cdCAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3Jvdy1jb250ZW50JyB9LFxuXHQgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2ltZycsIHsgY2xhc3NOYW1lOiAnaW1hZ2UnLCBzcmM6IHJlY2lwZS5waWN0dXJlICsgXCI/XCIgKyByZWNpcGUuZGF0ZU1vZGlmaWVkIH0pLFxuXHQgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdkZXRhaWxzJyB9LFxuXHQgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ3RpdGxlJywgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw6IHRoaXMuZ2V0SGlnaGxpZ2h0ZWRUaXRsZShyZWNpcGUudGl0bGUpIH0pLFxuXHQgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAnZGl2Jyxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdhdXRob3InIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJlY2lwZS5maXJzdE5hbWUgKyBcIiBcIiArIHJlY2lwZS5sYXN0TmFtZVxuXHQgICAgICAgICAgICAgICAgICAgIClcblx0ICAgICAgICAgICAgICAgIClcblx0ICAgICAgICAgICAgKVxuXHQgICAgICAgICk7XG5cdCAgICB9LFxuXHQgICAgY2hhbmdlOiBmdW5jdGlvbiBjaGFuZ2UoZSkge1xuXHQgICAgICAgIHZhciBzZWFyY2hUZXJtcyA9IGUudGFyZ2V0LnZhbHVlLnJlcGxhY2UoL1tcXC1cXFtcXF1cXC9cXHtcXH1cXChcXClcXCpcXCtcXD9cXC5cXFxcXFxeXFwkXFx8XS9nLCBcIlxcXFwkJlwiKS5zcGxpdChcIiBcIik7XG5cdCAgICAgICAgdmFyIHNlYXJjaFJlZ0V4U3RyaW5nID0gXCJcIjtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlYXJjaFRlcm1zLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgIHNlYXJjaFJlZ0V4U3RyaW5nICs9IHNlYXJjaFRlcm1zW2ldICsgXCIuKlwiO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgcmVnRXhPYmogPSB0aGlzLmdldFJlZ0V4T2JqKHNlYXJjaFJlZ0V4U3RyaW5nKTtcblx0XG5cdCAgICAgICAgdmFyIGZpbHRlcmVkTGlzdCA9IFtdO1xuXHQgICAgICAgIGlmIChyZWdFeE9iaiAhPT0gbnVsbCkge1xuXHRcblx0ICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB0aGlzLnN0YXRlLmZ1bGxMaXN0Lmxlbmd0aDsgeCsrKSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgY3VycmVudFJlY2lwZSA9IHRoaXMuc3RhdGUuZnVsbExpc3RbeF07XG5cdCAgICAgICAgICAgICAgICBpZiAocmVnRXhPYmoudGVzdChjdXJyZW50UmVjaXBlLnRpdGxlKSkge1xuXHQgICAgICAgICAgICAgICAgICAgIGZpbHRlcmVkTGlzdC5wdXNoKGN1cnJlbnRSZWNpcGUpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgZmlsdGVyZWRMaXN0ID0gdGhpcy5zdGF0ZS5mdWxsTGlzdC5zbGljZSgwKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBmaWx0ZXJlZExpc3Q6IGZpbHRlcmVkTGlzdCwgc2VhcmNoVGVybXM6IHNlYXJjaFRlcm1zLCBhY3RpdmVJbmRleDogMCB9KTtcblx0ICAgIH0sXG5cdCAgICBmb2N1czogZnVuY3Rpb24gZm9jdXMoKSB7XG5cdCAgICAgICAgdmFyIG1lID0gdGhpcztcblx0ICAgICAgICB0aGlzLnByb3BzLmFTZXJ2ZXJSZXF1ZXN0KHtcblx0ICAgICAgICAgICAgYWN0aW9uOiAnR0VUX0xJU1QnXG5cdCAgICAgICAgfSwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdCAgICAgICAgICAgIG1lLnNldFN0YXRlKHsgZnVsbExpc3Q6IHJlc3BvbnNlLnNsaWNlKDApLCBmaWx0ZXJlZExpc3Q6IHJlc3BvbnNlLnNsaWNlKDApIH0pO1xuXHQgICAgICAgICAgICB2YXIgcmVzdWx0cyA9IF9yZWFjdERvbTIuZGVmYXVsdC5maW5kRE9NTm9kZShtZSkucXVlcnlTZWxlY3RvcihcIi5yZXN1bHRzXCIpO1xuXHQgICAgICAgICAgICB2YXIgcG9zID0gcmVzdWx0cy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0ICAgICAgICAgICAgcmVzdWx0cy5zdHlsZS5tYXhIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQgLSBwb3MudG9wICsgXCJweFwiO1xuXHRcblx0ICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCBtZS5rZXl1cCwgZmFsc2UpO1xuXHQgICAgICAgICAgICBfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUobWUpLmNsYXNzTGlzdC5hZGQoXCJzaG93XCIpO1xuXHQgICAgICAgIH0sIHRydWUpO1xuXHQgICAgfSxcblx0ICAgIGJsdXI6IGZ1bmN0aW9uIGJsdXIoKSB7XG5cdCAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGFjdGl2ZUluZGV4OiAwIH0pO1xuXHQgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5rZXl1cCwgZmFsc2UpO1xuXHQgICAgICAgIF9yZWFjdERvbTIuZGVmYXVsdC5maW5kRE9NTm9kZSh0aGlzKS5jbGFzc0xpc3QucmVtb3ZlKFwic2hvd1wiKTtcblx0ICAgIH0sXG5cdCAgICBzZWxlY3Q6IGZ1bmN0aW9uIHNlbGVjdChlKSB7XG5cdCAgICAgICAgdmFyIGVsZW1lbnQgPSBlLnRhcmdldDtcblx0ICAgICAgICB3aGlsZSAoIWVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicm93XCIpKSB7XG5cdCAgICAgICAgICAgIGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudEVsZW1lbnQ7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciBpZCA9IGVsZW1lbnQuZGF0YXNldC5pZDtcblx0ICAgICAgICB0aGlzLnByb3BzLmFHZXRSZWNpcGUoaWQpO1xuXHQgICAgfSxcblx0ICAgIGtleXVwOiBmdW5jdGlvbiBrZXl1cChlKSB7XG5cdCAgICAgICAgaWYgKGUua2V5Q29kZSA9PSA0MCkge1xuXHQgICAgICAgICAgICB2YXIgbmV3SW5kZXggPSB0aGlzLnN0YXRlLmFjdGl2ZUluZGV4ICsgMTtcblx0ICAgICAgICAgICAgaWYgKG5ld0luZGV4IDwgdGhpcy5zdGF0ZS5maWx0ZXJlZExpc3QubGVuZ3RoKSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcblx0ICAgICAgICAgICAgICAgICAgICBhY3RpdmVJbmRleDogbmV3SW5kZXhcblx0ICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSBlbHNlIGlmIChlLmtleUNvZGUgPT0gMzgpIHtcblx0ICAgICAgICAgICAgdmFyIG5ld0luZGV4ID0gdGhpcy5zdGF0ZS5hY3RpdmVJbmRleCAtIDE7XG5cdCAgICAgICAgICAgIGlmIChuZXdJbmRleCA+PSAwKSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcblx0ICAgICAgICAgICAgICAgICAgICBhY3RpdmVJbmRleDogbmV3SW5kZXhcblx0ICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSBlbHNlIGlmIChlLmtleUNvZGUgPT0gMTMpIHtcblx0ICAgICAgICAgICAgX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKHRoaXMpLnF1ZXJ5U2VsZWN0b3IoXCIucmVzdWx0cyAuYWN0aXZlXCIpLmNsaWNrKCk7XG5cdCAgICAgICAgICAgIF9yZWFjdERvbTIuZGVmYXVsdC5maW5kRE9NTm9kZSh0aGlzKS5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIikuYmx1cigpO1xuXHQgICAgICAgIH1cblx0ICAgIH0sXG5cdCAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0ICAgICAgICB2YXIga2V5ID0gMDtcblx0ICAgICAgICB2YXIgbWUgPSB0aGlzO1xuXHQgICAgICAgIHZhciBsaXN0ID0gdGhpcy5zdGF0ZS5maWx0ZXJlZExpc3QubWFwKGZ1bmN0aW9uIChyZWNpcGUsIGluZGV4KSB7XG5cdCAgICAgICAgICAgIHJldHVybiBtZS5nZXRSZWNpcGVIVE1MKHJlY2lwZSwgaW5kZXgpO1xuXHQgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICdkaXYnLFxuXHQgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3NlYXJjaCcgfSxcblx0ICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JywgeyBwbGFjZWhvbGRlcjogJ1NlYXJjaC4uLicsXG5cdCAgICAgICAgICAgICAgICBvbkZvY3VzOiB0aGlzLmZvY3VzLFxuXHQgICAgICAgICAgICAgICAgb25CbHVyOiB0aGlzLmJsdXIsXG5cdCAgICAgICAgICAgICAgICBvbkNoYW5nZTogdGhpcy5jaGFuZ2UgfSksXG5cdCAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3Jlc3VsdHMnIH0sXG5cdCAgICAgICAgICAgICAgICBsaXN0XG5cdCAgICAgICAgICAgIClcblx0ICAgICAgICApO1xuXHQgICAgfVxuXHR9KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFNlYXJjaDtcblxuLyoqKi8gfSksXG4vKiAxNjMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblx0XG5cdHZhciBfc3RlcHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2NCk7XG5cdFxuXHR2YXIgX3N0ZXBzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3N0ZXBzKTtcblx0XG5cdHZhciBfaW5ncmVkaWVudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2OSk7XG5cdFxuXHR2YXIgX2luZ3JlZGllbnRzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luZ3JlZGllbnRzKTtcblx0XG5cdHZhciBfcmVjaXBlSGVhZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzUpO1xuXHRcblx0dmFyIF9yZWNpcGVIZWFkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVjaXBlSGVhZGVyKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDE4NCk7XG5cdFxuXHR2YXIgUmVjaXBlID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUNsYXNzKHtcblx0ICAgIGRpc3BsYXlOYW1lOiAnUmVjaXBlJyxcblx0XG5cdCAgICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZSgpIHtcblx0ICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICBlZGl0YWJsZTogZmFsc2UsXG5cdCAgICAgICAgICAgIHZhbGlkYXRlOiBmYWxzZVxuXHQgICAgICAgIH07XG5cdCAgICB9LFxuXHQgICAgZWRpdDogZnVuY3Rpb24gZWRpdCgpIHtcblx0ICAgICAgICB0aGlzLnNldFN0YXRlKHsgZWRpdGFibGU6IHRydWUgfSk7XG5cdCAgICB9LFxuXHQgICAgc2F2ZTogZnVuY3Rpb24gc2F2ZSgpIHtcblx0ICAgICAgICB0aGlzLnNldFN0YXRlKHsgdmFsaWRhdGU6IHRydWUgfSk7XG5cdCAgICAgICAgdmFyIGlzVmFsaWQgPSB0aGlzLnZhbGlkYXRlKHRoaXMucHJvcHMucmVjaXBlKTtcblx0ICAgICAgICBpZiAoaXNWYWxpZCkge1xuXHQgICAgICAgICAgICB0aGlzLnByb3BzLmFTYXZlUmVjaXBlKHRoaXMucHJvcHMucmVjaXBlKTtcblx0XG5cdCAgICAgICAgICAgIC8qIGlmICh0aGlzLnByb3BzLnJlY2lwZS5waWN0dXJlLmluZGV4T2YoXCJuby1pbWFnZS11cGxvYWRlZFwiKSA9PSAtMSkge1xuXHQgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuYVVwZGF0ZVZhbHVlKCdwaWN0dXJlJywgXCJpbWFnZXMvcmVjaXBlcy9yZWNpcGVfXCIgKyB0aGlzLnByb3BzLnJlY2lwZS5pZCArIFwiLnBuZ1wiKTtcblx0ICAgICAgICAgICAgIH0qL1xuXHRcblx0ICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGVkaXRhYmxlOiBmYWxzZSwgdmFsaWRhdGU6IGZhbHNlIH0pO1xuXHQgICAgICAgICAgICB0aGlzLnByb3BzLmFHZXRSZWNpcGUodGhpcy5wcm9wcy5yZWNpcGUuaWQpO1xuXHQgICAgICAgICAgICB0aGlzLnByb3BzLmFOb3RpZnkodHJ1ZSwgXCJzdWNjZXNzXCIsIFwiUmVjaXBlIHN1Y2Nlc3NmdWxseSBzYXZlZC5cIiwgNTAwKTtcblx0ICAgICAgICB9XG5cdCAgICB9LFxuXHQgICAgY2FuY2VsOiBmdW5jdGlvbiBjYW5jZWwoKSB7XG5cdCAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGVkaXRhYmxlOiBmYWxzZSwgdmFsaWRhdGU6IGZhbHNlIH0pO1xuXHQgICAgICAgIHRoaXMucHJvcHMuYUdldFJlY2lwZSh0aGlzLnByb3BzLnJlY2lwZS5pZCk7XG5cdCAgICB9LFxuXHQgICAgdmFsaWRhdGU6IGZ1bmN0aW9uIHZhbGlkYXRlKHJlY2lwZSkge1xuXHQgICAgICAgIHZhciBlcnJvcnMgPSBbXTtcblx0ICAgICAgICBpZiAocmVjaXBlLnRpdGxlID09IFwiXCIpIHtcblx0ICAgICAgICAgICAgZXJyb3JzLnB1c2goXCJSZWNpcGUgdGl0bGUgaXMgcmVxdWlyZWRcIik7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAocmVjaXBlLnNlcnZpbmdzID09IFwiXCIpIHtcblx0ICAgICAgICAgICAgZXJyb3JzLnB1c2goXCJSZWNpcGUgc2VydmluZ3MgYXJlIHJlcXVpcmVkXCIpO1xuXHQgICAgICAgIH0gZWxzZSBpZiAocmVjaXBlLnNlcnZpbmdzIDwgMCkge1xuXHQgICAgICAgICAgICBlcnJvcnMucHVzaChcIlJlY2lwZSBzZXJ2aW5ncyBtdXN0IGJlIHBvc2l0aXZlXCIpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKHJlY2lwZS5pbmdyZWRpZW50cy5sZW5ndGggPT0gMCkge1xuXHQgICAgICAgICAgICBlcnJvcnMucHVzaChcIkF0bGVhc3Qgb25lIGluZ3JlZGllbnQgbXVzdCBiZSBzdXBwbGllZFwiKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIHF1YW50aXR5RmxhZ2dlZCA9IGZhbHNlO1xuXHQgICAgICAgIHZhciB1bml0RmxhZ2dlZCA9IGZhbHNlO1xuXHQgICAgICAgIHZhciBuYW1lRmxhZ2dlZCA9IGZhbHNlO1xuXHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVjaXBlLmluZ3JlZGllbnRzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgIHZhciBpbmdyZWRpZW50ID0gcmVjaXBlLmluZ3JlZGllbnRzW2ldO1xuXHQgICAgICAgICAgICBpZiAoaW5ncmVkaWVudC5xdWFudGl0eSA9PSBcIlwiICYmICFxdWFudGl0eUZsYWdnZWQpIHtcblx0ICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKFwiSW5ncmVkaWVudCBxdWFudGl0eSBpcyByZXF1aXJlZFwiKTtcblx0ICAgICAgICAgICAgICAgIHF1YW50aXR5RmxhZ2dlZCA9IHRydWU7XG5cdCAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5ncmVkaWVudC5xdWFudGl0eSA8IDAgJiYgIXF1YW50aXR5RmxhZ2dlZCkge1xuXHQgICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goXCJJbmdyZWRpZW50IHF1YW50aXR5IG11c3QgYmUgcG9zaXRpdmVcIik7XG5cdCAgICAgICAgICAgICAgICBxdWFudGl0eUZsYWdnZWQgPSB0cnVlO1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICBpZiAoaW5ncmVkaWVudC51bml0cyA9PSBcIlwiICYmICF1bml0RmxhZ2dlZCkge1xuXHQgICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goXCJJbmdyZWRpZW50IHVuaXRzIGFyZSByZXF1aXJlZFwiKTtcblx0ICAgICAgICAgICAgICAgIHVuaXRGbGFnZ2VkID0gdHJ1ZTtcblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgaWYgKGluZ3JlZGllbnQuaW5ncmVkaWVudE5hbWUgPT0gXCJcIiAmJiAhbmFtZUZsYWdnZWQpIHtcblx0ICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKFwiSW5ncmVkaWVudCBuYW1lIGlzIHJlcXVpcmVkXCIpO1xuXHQgICAgICAgICAgICAgICAgbmFtZUZsYWdnZWQgPSB0cnVlO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAocmVjaXBlLnN0ZXBzLnNwbGl0KFwifFwiKS5sZW5ndGggPT0gMCkge1xuXHQgICAgICAgICAgICBlcnJvcnMucHVzaChcIkF0bGVhc3Qgb25lIHN0ZXAgbXVzdCBiZSBzdXBwbGllZFwiKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIHN0ZXBzID0gcmVjaXBlLnN0ZXBzLnNwbGl0KFwifFwiKTtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ZXBzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgIHZhciBzdGVwID0gc3RlcHNbaV07XG5cdCAgICAgICAgICAgIGlmIChzdGVwID09IFwiXCIpIHtcblx0ICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKFwiU3RlcCBpbnN0cnVjdGlvbnMgYXJlIHJlcXVpcmVkXCIpO1xuXHQgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmIChlcnJvcnMubGVuZ3RoID4gMCkge1xuXHQgICAgICAgICAgICB2YXIga2V5ID0gMDtcblx0ICAgICAgICAgICAgdmFyIG1lc3NhZ2VJbm5lciA9IGVycm9ycy5tYXAoZnVuY3Rpb24gKG1zZykge1xuXHQgICAgICAgICAgICAgICAga2V5ICs9IDE7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgJ2xpJyxcblx0ICAgICAgICAgICAgICAgICAgICB7IGtleToga2V5IH0sXG5cdCAgICAgICAgICAgICAgICAgICAgbXNnXG5cdCAgICAgICAgICAgICAgICApO1xuXHQgICAgICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgICAgIHZhciBtZXNzYWdlID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAnZGl2Jyxcblx0ICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAndmFsaWRhdGlvbicgfSxcblx0ICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICdoMycsXG5cdCAgICAgICAgICAgICAgICAgICAgbnVsbCxcblx0ICAgICAgICAgICAgICAgICAgICAnUGxlYXNlIGNvcnJlY3QgZmxhZ2dlZCBmaWVsZHMnXG5cdCAgICAgICAgICAgICAgICApLFxuXHQgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgJ3VsJyxcblx0ICAgICAgICAgICAgICAgICAgICBudWxsLFxuXHQgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VJbm5lclxuXHQgICAgICAgICAgICAgICAgKVxuXHQgICAgICAgICAgICApO1xuXHRcblx0ICAgICAgICAgICAgdGhpcy5wcm9wcy5hTm90aWZ5KHRydWUsIFwiZXJyb3JcIiwgbWVzc2FnZSwgbnVsbCk7XG5cdCAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgICAgICB9XG5cdCAgICB9LFxuXHQgICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG5cdCAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAnbWFpbicsXG5cdCAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnZnVsbC1yZWNpcGUnIH0sXG5cdCAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWNpcGVIZWFkZXIyLmRlZmF1bHQsIHtcblx0ICAgICAgICAgICAgICAgIHJlY2lwZTogdGhpcy5wcm9wcy5yZWNpcGUsXG5cdCAgICAgICAgICAgICAgICBlZGl0OiB0aGlzLmVkaXQsXG5cdCAgICAgICAgICAgICAgICBzYXZlOiB0aGlzLnNhdmUsXG5cdCAgICAgICAgICAgICAgICBjYW5jZWw6IHRoaXMuY2FuY2VsLFxuXHQgICAgICAgICAgICAgICAgYVVwZGF0ZVZhbHVlOiB0aGlzLnByb3BzLmFVcGRhdGVWYWx1ZSxcblx0ICAgICAgICAgICAgICAgIGVkaXRhYmxlOiB0aGlzLnN0YXRlLmVkaXRhYmxlLFxuXHQgICAgICAgICAgICAgICAgdmFsaWRhdGU6IHRoaXMuc3RhdGUudmFsaWRhdGUsXG5cdCAgICAgICAgICAgICAgICBzVXNlcjogdGhpcy5wcm9wcy5zVXNlclxuXHQgICAgICAgICAgICB9KSxcblx0ICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAnbWFpbicsXG5cdCAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3JlY2lwZS1ib2R5JyB9LFxuXHQgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2luZ3JlZGllbnRzMi5kZWZhdWx0LCB7XG5cdCAgICAgICAgICAgICAgICAgICAgaW5ncmVkaWVudHM6IHRoaXMucHJvcHMucmVjaXBlLmluZ3JlZGllbnRzLFxuXHQgICAgICAgICAgICAgICAgICAgIGFVcGRhdGVWYWx1ZTogdGhpcy5wcm9wcy5hVXBkYXRlVmFsdWUsXG5cdCAgICAgICAgICAgICAgICAgICAgYUFkZEluZ3JlZGllbnQ6IHRoaXMucHJvcHMuYUFkZEluZ3JlZGllbnQsXG5cdCAgICAgICAgICAgICAgICAgICAgZWRpdGFibGU6IHRoaXMuc3RhdGUuZWRpdGFibGUsXG5cdCAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGU6IHRoaXMuc3RhdGUudmFsaWRhdGUsXG5cdCAgICAgICAgICAgICAgICAgICAgYVNlcnZlclJlcXVlc3Q6IHRoaXMucHJvcHMuYVNlcnZlclJlcXVlc3Rcblx0ICAgICAgICAgICAgICAgIH0pLFxuXHQgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3N0ZXBzMi5kZWZhdWx0LCB7XG5cdCAgICAgICAgICAgICAgICAgICAgc3RlcHM6IHRoaXMucHJvcHMucmVjaXBlLnN0ZXBzLFxuXHQgICAgICAgICAgICAgICAgICAgIGFVcGRhdGVWYWx1ZTogdGhpcy5wcm9wcy5hVXBkYXRlVmFsdWUsXG5cdCAgICAgICAgICAgICAgICAgICAgYUFkZFN0ZXA6IHRoaXMucHJvcHMuYUFkZFN0ZXAsXG5cdCAgICAgICAgICAgICAgICAgICAgZWRpdGFibGU6IHRoaXMuc3RhdGUuZWRpdGFibGUsXG5cdCAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGU6IHRoaXMuc3RhdGUudmFsaWRhdGVcblx0ICAgICAgICAgICAgICAgIH0pXG5cdCAgICAgICAgICAgIClcblx0ICAgICAgICApO1xuXHQgICAgfVxuXHR9KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFJlY2lwZTtcblxuLyoqKi8gfSksXG4vKiAxNjQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblx0XG5cdHZhciBfcmVhY3REb20gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1OCk7XG5cdFxuXHR2YXIgX3JlYWN0RG9tMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0RG9tKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDE2NSk7XG5cdFxuXHR2YXIgU3RlcHMgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlQ2xhc3Moe1xuXHQgICAgZGlzcGxheU5hbWU6ICdTdGVwcycsXG5cdFxuXHQgICAgcmVuZGVyRGlzcGxheTogZnVuY3Rpb24gcmVuZGVyRGlzcGxheShzdGVwcykge1xuXHQgICAgICAgIHZhciBrZXkgPSAwO1xuXHQgICAgICAgIHJldHVybiBzdGVwcy5tYXAoZnVuY3Rpb24gKHN0ZXApIHtcblx0ICAgICAgICAgICAgaWYgKHN0ZXAgPT0gXCJcIikge1xuXHQgICAgICAgICAgICAgICAgc3RlcCA9IFwiUGxlYXNlIGVudGVyIGEgc3RlcCBkZXNjcmlwdGlvbi4uLlwiO1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAnbGknLFxuXHQgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdpbmRpdmlkdWFsLXN0ZXAnLCBrZXk6IGtleSsrIH0sXG5cdCAgICAgICAgICAgICAgICBzdGVwXG5cdCAgICAgICAgICAgICk7XG5cdCAgICAgICAgfSk7XG5cdCAgICB9LFxuXHQgICAgcmVuZGVyRm9ybTogZnVuY3Rpb24gcmVuZGVyRm9ybShzdGVwcykge1xuXHQgICAgICAgIHZhciBtZSA9IHRoaXM7XG5cdCAgICAgICAgdmFyIGtleSA9IC0xO1xuXHQgICAgICAgIHJldHVybiBzdGVwcy5tYXAoZnVuY3Rpb24gKHN0ZXApIHtcblx0ICAgICAgICAgICAga2V5ICs9IDE7XG5cdCAgICAgICAgICAgIHZhciBzdGVwQ2xhc3Nlcztcblx0ICAgICAgICAgICAgaWYgKG1lLnByb3BzLnZhbGlkYXRlKSB7XG5cdCAgICAgICAgICAgICAgICBpZiAoc3RlcCA9PSBudWxsIHx8IHN0ZXAgPT0gXCJcIikge1xuXHQgICAgICAgICAgICAgICAgICAgIHN0ZXBDbGFzc2VzID0gXCJyZXF1aXJlZFwiO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICdsaScsXG5cdCAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2luZGl2aWR1YWwtc3RlcCcsIGtleToga2V5LCAnZGF0YS1pbmRleCc6IGtleSB9LFxuXHQgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdzdGVwLWNvbnRlbnQnIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJywge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc3RlcCxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdQbGVhc2UgZW50ZXIgYSBzdGVwIGRlc2NyaXB0aW9uLi4uJyxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBzdGVwQ2xhc3Nlcyxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IG1lLnVwZGF0ZVN0ZXAgfSksXG5cdCAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2EnLCB7IGNsYXNzTmFtZTogJ3RpLXRyYXNoJywgb25DbGljazogbWUuZGVsZXRlU3RlcCB9KVxuXHQgICAgICAgICAgICAgICAgKVxuXHQgICAgICAgICAgICApO1xuXHQgICAgICAgIH0pO1xuXHQgICAgfSxcblx0ICAgIHVwZGF0ZVN0ZXA6IGZ1bmN0aW9uIHVwZGF0ZVN0ZXAoZSkge1xuXHQgICAgICAgIHZhciBuZXdTdGVwcyA9IFwiXCI7XG5cdCAgICAgICAgdmFyIGxpc3QgPSBfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUodGhpcykucXVlcnlTZWxlY3RvcihcIi5zdGVwcy1saXN0XCIpLmNoaWxkTm9kZXM7XG5cdFxuXHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICB2YXIgdmFsdWUgPSBsaXN0W2ldLnF1ZXJ5U2VsZWN0b3IoXCJ0ZXh0YXJlYVwiKS52YWx1ZTtcblx0ICAgICAgICAgICAgbmV3U3RlcHMgKz0gdmFsdWU7XG5cdFxuXHQgICAgICAgICAgICBpZiAoaSA8IGxpc3QubGVuZ3RoIC0gMSkge1xuXHQgICAgICAgICAgICAgICAgbmV3U3RlcHMgKz0gXCJ8XCI7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHRoaXMucHJvcHMuYVVwZGF0ZVZhbHVlKFwic3RlcHNcIiwgbmV3U3RlcHMpO1xuXHQgICAgfSxcblx0ICAgIGRlbGV0ZVN0ZXA6IGZ1bmN0aW9uIGRlbGV0ZVN0ZXAoZSkge1xuXHQgICAgICAgIHZhciBpdGVtVG9DaGVjayA9IGUudGFyZ2V0O1xuXHQgICAgICAgIHdoaWxlIChpdGVtVG9DaGVjayAmJiAhaXRlbVRvQ2hlY2suY2xhc3NMaXN0LmNvbnRhaW5zKFwiaW5kaXZpZHVhbC1zdGVwXCIpKSB7XG5cdCAgICAgICAgICAgIGl0ZW1Ub0NoZWNrID0gaXRlbVRvQ2hlY2sucGFyZW50Tm9kZTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHZhciBsaXN0ID0gX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKHRoaXMpLnF1ZXJ5U2VsZWN0b3IoXCIuc3RlcHMtbGlzdFwiKS5jaGlsZE5vZGVzO1xuXHQgICAgICAgIHZhciBpdGVtVG9SZW1vdmUgPSBudWxsO1xuXHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICBpZiAobGlzdFtpXSA9PT0gaXRlbVRvQ2hlY2spIHtcblx0ICAgICAgICAgICAgICAgIGl0ZW1Ub1JlbW92ZSA9IGk7XG5cdCAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKGl0ZW1Ub1JlbW92ZSAhPSBudWxsKSB7XG5cdCAgICAgICAgICAgIHZhciBzdGVwcyA9IHRoaXMucHJvcHMuc3RlcHMuc3BsaXQoXCJ8XCIpO1xuXHQgICAgICAgICAgICBzdGVwcy5zcGxpY2UoaXRlbVRvUmVtb3ZlLCAxKTtcblx0XG5cdCAgICAgICAgICAgIHRoaXMucHJvcHMuYVVwZGF0ZVZhbHVlKFwic3RlcHNcIiwgc3RlcHMuam9pbihcInxcIikpO1xuXHQgICAgICAgIH1cblx0ICAgIH0sXG5cdCAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0ICAgICAgICB2YXIgbGlzdDtcblx0ICAgICAgICB2YXIga2V5ID0gMDtcblx0ICAgICAgICB2YXIgc3RlcHMgPSBbXCJcIl07XG5cdCAgICAgICAgaWYgKHRoaXMucHJvcHMuc3RlcHMgIT0gbnVsbCkge1xuXHQgICAgICAgICAgICBzdGVwcyA9IHRoaXMucHJvcHMuc3RlcHMuc3BsaXQoXCJ8XCIpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgYWRkTGluaztcblx0ICAgICAgICBpZiAodGhpcy5wcm9wcy5lZGl0YWJsZSkge1xuXHQgICAgICAgICAgICBsaXN0ID0gdGhpcy5yZW5kZXJGb3JtKHN0ZXBzKTtcblx0ICAgICAgICAgICAgYWRkTGluayA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2FkZC1uZXcnLCBvbkNsaWNrOiB0aGlzLnByb3BzLmFBZGRTdGVwIH0sXG5cdCAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnYScsIHsgY2xhc3NOYW1lOiAndGktcGx1cycgfSksXG5cdCAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICAgICAnbGFiZWwnLFxuXHQgICAgICAgICAgICAgICAgICAgIG51bGwsXG5cdCAgICAgICAgICAgICAgICAgICAgJ0FkZCBzdGVwJ1xuXHQgICAgICAgICAgICAgICAgKVxuXHQgICAgICAgICAgICApO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGxpc3QgPSB0aGlzLnJlbmRlckRpc3BsYXkoc3RlcHMpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAnc2VjdGlvbicsXG5cdCAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncmVjaXBlLXN0ZXBzJyB9LFxuXHQgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICdsYWJlbCcsXG5cdCAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2RhdGEtbGFiZWwnIH0sXG5cdCAgICAgICAgICAgICAgICAnRGlyZWN0aW9ucydcblx0ICAgICAgICAgICAgKSxcblx0ICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAnb2wnLFxuXHQgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdzdGVwcy1saXN0JyB9LFxuXHQgICAgICAgICAgICAgICAgbGlzdFxuXHQgICAgICAgICAgICApLFxuXHQgICAgICAgICAgICBhZGRMaW5rXG5cdCAgICAgICAgKTtcblx0ICAgIH1cblx0fSk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBTdGVwcztcblxuLyoqKi8gfSksXG4vKiAxNjUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHQvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXHRcblx0Ly8gbG9hZCB0aGUgc3R5bGVzXG5cdHZhciBjb250ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjYpO1xuXHRpZiAodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cdC8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cblx0dmFyIHVwZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTY4KShjb250ZW50LCB7fSk7XG5cdGlmIChjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuXHRpZiAoZmFsc2UpIHtcblx0XHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdGlmICghY29udGVudC5sb2NhbHMpIHtcblx0XHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi9zdGVwcy5zY3NzXCIsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi9zdGVwcy5zY3NzXCIpO1xuXHRcdFx0XHRpZiAodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uICgpIHtcblx0XHRcdHVwZGF0ZSgpO1xuXHRcdH0pO1xuXHR9XG5cbi8qKiovIH0pLFxuLyogMTY2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0ZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjcpKCk7XG5cdC8vIGltcG9ydHNcblx0XG5cdFxuXHQvLyBtb2R1bGVcblx0ZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLnJlY2lwZS1zdGVwcyAuc3RlcHMtbGlzdCAuaW5kaXZpZHVhbC1zdGVwe3BhZGRpbmc6NXB4fS5yZWNpcGUtc3RlcHMgLnN0ZXBzLWxpc3QgLnN0ZXAtY29udGVudHt3aWR0aDoxMDAlO2Rpc3BsYXk6aW5saW5lLWZsZXg7ZmxleC1kaXJlY3Rpb246cm93O2FsaWduLWl0ZW1zOmNlbnRlcn0ucmVjaXBlLXN0ZXBzIC5zdGVwcy1saXN0IC5zdGVwLWNvbnRlbnQgdGV4dGFyZWF7d2lkdGg6MTAwJTtyZXNpemU6dmVydGljYWx9XCIsIFwiXCJdKTtcblx0XG5cdC8vIGV4cG9ydHNcblxuXG4vKioqLyB9KSxcbi8qIDE2NyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qXHJcblx0XHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxyXG5cdFx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxyXG5cdCovXHJcblx0Ly8gY3NzIGJhc2UgY29kZSwgaW5qZWN0ZWQgYnkgdGhlIGNzcy1sb2FkZXJcclxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGxpc3QgPSBbXTtcclxuXHRcclxuXHRcdC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcclxuXHRcdGxpc3QudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcclxuXHRcdFx0dmFyIHJlc3VsdCA9IFtdO1xyXG5cdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdHZhciBpdGVtID0gdGhpc1tpXTtcclxuXHRcdFx0XHRpZihpdGVtWzJdKSB7XHJcblx0XHRcdFx0XHRyZXN1bHQucHVzaChcIkBtZWRpYSBcIiArIGl0ZW1bMl0gKyBcIntcIiArIGl0ZW1bMV0gKyBcIn1cIik7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHJlc3VsdC5wdXNoKGl0ZW1bMV0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gcmVzdWx0LmpvaW4oXCJcIik7XHJcblx0XHR9O1xyXG5cdFxyXG5cdFx0Ly8gaW1wb3J0IGEgbGlzdCBvZiBtb2R1bGVzIGludG8gdGhlIGxpc3RcclxuXHRcdGxpc3QuaSA9IGZ1bmN0aW9uKG1vZHVsZXMsIG1lZGlhUXVlcnkpIHtcclxuXHRcdFx0aWYodHlwZW9mIG1vZHVsZXMgPT09IFwic3RyaW5nXCIpXHJcblx0XHRcdFx0bW9kdWxlcyA9IFtbbnVsbCwgbW9kdWxlcywgXCJcIl1dO1xyXG5cdFx0XHR2YXIgYWxyZWFkeUltcG9ydGVkTW9kdWxlcyA9IHt9O1xyXG5cdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdHZhciBpZCA9IHRoaXNbaV1bMF07XHJcblx0XHRcdFx0aWYodHlwZW9mIGlkID09PSBcIm51bWJlclwiKVxyXG5cdFx0XHRcdFx0YWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpZF0gPSB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHRcdGZvcihpID0gMDsgaSA8IG1vZHVsZXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHR2YXIgaXRlbSA9IG1vZHVsZXNbaV07XHJcblx0XHRcdFx0Ly8gc2tpcCBhbHJlYWR5IGltcG9ydGVkIG1vZHVsZVxyXG5cdFx0XHRcdC8vIHRoaXMgaW1wbGVtZW50YXRpb24gaXMgbm90IDEwMCUgcGVyZmVjdCBmb3Igd2VpcmQgbWVkaWEgcXVlcnkgY29tYmluYXRpb25zXHJcblx0XHRcdFx0Ly8gIHdoZW4gYSBtb2R1bGUgaXMgaW1wb3J0ZWQgbXVsdGlwbGUgdGltZXMgd2l0aCBkaWZmZXJlbnQgbWVkaWEgcXVlcmllcy5cclxuXHRcdFx0XHQvLyAgSSBob3BlIHRoaXMgd2lsbCBuZXZlciBvY2N1ciAoSGV5IHRoaXMgd2F5IHdlIGhhdmUgc21hbGxlciBidW5kbGVzKVxyXG5cdFx0XHRcdGlmKHR5cGVvZiBpdGVtWzBdICE9PSBcIm51bWJlclwiIHx8ICFhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2l0ZW1bMF1dKSB7XHJcblx0XHRcdFx0XHRpZihtZWRpYVF1ZXJ5ICYmICFpdGVtWzJdKSB7XHJcblx0XHRcdFx0XHRcdGl0ZW1bMl0gPSBtZWRpYVF1ZXJ5O1xyXG5cdFx0XHRcdFx0fSBlbHNlIGlmKG1lZGlhUXVlcnkpIHtcclxuXHRcdFx0XHRcdFx0aXRlbVsyXSA9IFwiKFwiICsgaXRlbVsyXSArIFwiKSBhbmQgKFwiICsgbWVkaWFRdWVyeSArIFwiKVwiO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0bGlzdC5wdXNoKGl0ZW0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHRcdHJldHVybiBsaXN0O1xyXG5cdH07XHJcblxuXG4vKioqLyB9KSxcbi8qIDE2OCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qXG5cdFx0TUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcblx0XHRBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG5cdCovXG5cdHZhciBzdHlsZXNJbkRvbSA9IHt9LFxuXHRcdG1lbW9pemUgPSBmdW5jdGlvbihmbikge1xuXHRcdFx0dmFyIG1lbW87XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRpZiAodHlwZW9mIG1lbW8gPT09IFwidW5kZWZpbmVkXCIpIG1lbW8gPSBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHRcdFx0XHRyZXR1cm4gbWVtbztcblx0XHRcdH07XG5cdFx0fSxcblx0XHRpc09sZElFID0gbWVtb2l6ZShmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiAvbXNpZSBbNi05XVxcYi8udGVzdChzZWxmLm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSk7XG5cdFx0fSksXG5cdFx0Z2V0SGVhZEVsZW1lbnQgPSBtZW1vaXplKGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBkb2N1bWVudC5oZWFkIHx8IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXTtcblx0XHR9KSxcblx0XHRzaW5nbGV0b25FbGVtZW50ID0gbnVsbCxcblx0XHRzaW5nbGV0b25Db3VudGVyID0gMCxcblx0XHRzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcCA9IFtdO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihsaXN0LCBvcHRpb25zKSB7XG5cdFx0aWYoZmFsc2UpIHtcblx0XHRcdGlmKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJvYmplY3RcIikgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHN0eWxlLWxvYWRlciBjYW5ub3QgYmUgdXNlZCBpbiBhIG5vbi1icm93c2VyIGVudmlyb25tZW50XCIpO1xuXHRcdH1cblx0XG5cdFx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cdFx0Ly8gRm9yY2Ugc2luZ2xlLXRhZyBzb2x1dGlvbiBvbiBJRTYtOSwgd2hpY2ggaGFzIGEgaGFyZCBsaW1pdCBvbiB0aGUgIyBvZiA8c3R5bGU+XG5cdFx0Ly8gdGFncyBpdCB3aWxsIGFsbG93IG9uIGEgcGFnZVxuXHRcdGlmICh0eXBlb2Ygb3B0aW9ucy5zaW5nbGV0b24gPT09IFwidW5kZWZpbmVkXCIpIG9wdGlvbnMuc2luZ2xldG9uID0gaXNPbGRJRSgpO1xuXHRcblx0XHQvLyBCeSBkZWZhdWx0LCBhZGQgPHN0eWxlPiB0YWdzIHRvIHRoZSBib3R0b20gb2YgPGhlYWQ+LlxuXHRcdGlmICh0eXBlb2Ygb3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJ1bmRlZmluZWRcIikgb3B0aW9ucy5pbnNlcnRBdCA9IFwiYm90dG9tXCI7XG5cdFxuXHRcdHZhciBzdHlsZXMgPSBsaXN0VG9TdHlsZXMobGlzdCk7XG5cdFx0YWRkU3R5bGVzVG9Eb20oc3R5bGVzLCBvcHRpb25zKTtcblx0XG5cdFx0cmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZShuZXdMaXN0KSB7XG5cdFx0XHR2YXIgbWF5UmVtb3ZlID0gW107XG5cdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHZhciBpdGVtID0gc3R5bGVzW2ldO1xuXHRcdFx0XHR2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXTtcblx0XHRcdFx0ZG9tU3R5bGUucmVmcy0tO1xuXHRcdFx0XHRtYXlSZW1vdmUucHVzaChkb21TdHlsZSk7XG5cdFx0XHR9XG5cdFx0XHRpZihuZXdMaXN0KSB7XG5cdFx0XHRcdHZhciBuZXdTdHlsZXMgPSBsaXN0VG9TdHlsZXMobmV3TGlzdCk7XG5cdFx0XHRcdGFkZFN0eWxlc1RvRG9tKG5ld1N0eWxlcywgb3B0aW9ucyk7XG5cdFx0XHR9XG5cdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgbWF5UmVtb3ZlLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHZhciBkb21TdHlsZSA9IG1heVJlbW92ZVtpXTtcblx0XHRcdFx0aWYoZG9tU3R5bGUucmVmcyA9PT0gMCkge1xuXHRcdFx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKylcblx0XHRcdFx0XHRcdGRvbVN0eWxlLnBhcnRzW2pdKCk7XG5cdFx0XHRcdFx0ZGVsZXRlIHN0eWxlc0luRG9tW2RvbVN0eWxlLmlkXTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFkZFN0eWxlc1RvRG9tKHN0eWxlcywgb3B0aW9ucykge1xuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBpdGVtID0gc3R5bGVzW2ldO1xuXHRcdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XG5cdFx0XHRpZihkb21TdHlsZSkge1xuXHRcdFx0XHRkb21TdHlsZS5yZWZzKys7XG5cdFx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRcdGRvbVN0eWxlLnBhcnRzW2pdKGl0ZW0ucGFydHNbal0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGZvcig7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdFx0ZG9tU3R5bGUucGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZhciBwYXJ0cyA9IFtdO1xuXHRcdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgaXRlbS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRcdHBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHN0eWxlc0luRG9tW2l0ZW0uaWRdID0ge2lkOiBpdGVtLmlkLCByZWZzOiAxLCBwYXJ0czogcGFydHN9O1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gbGlzdFRvU3R5bGVzKGxpc3QpIHtcblx0XHR2YXIgc3R5bGVzID0gW107XG5cdFx0dmFyIG5ld1N0eWxlcyA9IHt9O1xuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgaXRlbSA9IGxpc3RbaV07XG5cdFx0XHR2YXIgaWQgPSBpdGVtWzBdO1xuXHRcdFx0dmFyIGNzcyA9IGl0ZW1bMV07XG5cdFx0XHR2YXIgbWVkaWEgPSBpdGVtWzJdO1xuXHRcdFx0dmFyIHNvdXJjZU1hcCA9IGl0ZW1bM107XG5cdFx0XHR2YXIgcGFydCA9IHtjc3M6IGNzcywgbWVkaWE6IG1lZGlhLCBzb3VyY2VNYXA6IHNvdXJjZU1hcH07XG5cdFx0XHRpZighbmV3U3R5bGVzW2lkXSlcblx0XHRcdFx0c3R5bGVzLnB1c2gobmV3U3R5bGVzW2lkXSA9IHtpZDogaWQsIHBhcnRzOiBbcGFydF19KTtcblx0XHRcdGVsc2Vcblx0XHRcdFx0bmV3U3R5bGVzW2lkXS5wYXJ0cy5wdXNoKHBhcnQpO1xuXHRcdH1cblx0XHRyZXR1cm4gc3R5bGVzO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucywgc3R5bGVFbGVtZW50KSB7XG5cdFx0dmFyIGhlYWQgPSBnZXRIZWFkRWxlbWVudCgpO1xuXHRcdHZhciBsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcCA9IHN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wW3N0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wLmxlbmd0aCAtIDFdO1xuXHRcdGlmIChvcHRpb25zLmluc2VydEF0ID09PSBcInRvcFwiKSB7XG5cdFx0XHRpZighbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3ApIHtcblx0XHRcdFx0aGVhZC5pbnNlcnRCZWZvcmUoc3R5bGVFbGVtZW50LCBoZWFkLmZpcnN0Q2hpbGQpO1xuXHRcdFx0fSBlbHNlIGlmKGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wLm5leHRTaWJsaW5nKSB7XG5cdFx0XHRcdGhlYWQuaW5zZXJ0QmVmb3JlKHN0eWxlRWxlbWVudCwgbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AubmV4dFNpYmxpbmcpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsZW1lbnQpO1xuXHRcdFx0fVxuXHRcdFx0c3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3AucHVzaChzdHlsZUVsZW1lbnQpO1xuXHRcdH0gZWxzZSBpZiAob3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJib3R0b21cIikge1xuXHRcdFx0aGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsZW1lbnQpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHZhbHVlIGZvciBwYXJhbWV0ZXIgJ2luc2VydEF0Jy4gTXVzdCBiZSAndG9wJyBvciAnYm90dG9tJy5cIik7XG5cdFx0fVxuXHR9XG5cdFxuXHRmdW5jdGlvbiByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGVFbGVtZW50KSB7XG5cdFx0c3R5bGVFbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3R5bGVFbGVtZW50KTtcblx0XHR2YXIgaWR4ID0gc3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3AuaW5kZXhPZihzdHlsZUVsZW1lbnQpO1xuXHRcdGlmKGlkeCA+PSAwKSB7XG5cdFx0XHRzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcC5zcGxpY2UoaWR4LCAxKTtcblx0XHR9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZVN0eWxlRWxlbWVudChvcHRpb25zKSB7XG5cdFx0dmFyIHN0eWxlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcblx0XHRzdHlsZUVsZW1lbnQudHlwZSA9IFwidGV4dC9jc3NcIjtcblx0XHRpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucywgc3R5bGVFbGVtZW50KTtcblx0XHRyZXR1cm4gc3R5bGVFbGVtZW50O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVMaW5rRWxlbWVudChvcHRpb25zKSB7XG5cdFx0dmFyIGxpbmtFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7XG5cdFx0bGlua0VsZW1lbnQucmVsID0gXCJzdHlsZXNoZWV0XCI7XG5cdFx0aW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIGxpbmtFbGVtZW50KTtcblx0XHRyZXR1cm4gbGlua0VsZW1lbnQ7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFkZFN0eWxlKG9iaiwgb3B0aW9ucykge1xuXHRcdHZhciBzdHlsZUVsZW1lbnQsIHVwZGF0ZSwgcmVtb3ZlO1xuXHRcblx0XHRpZiAob3B0aW9ucy5zaW5nbGV0b24pIHtcblx0XHRcdHZhciBzdHlsZUluZGV4ID0gc2luZ2xldG9uQ291bnRlcisrO1xuXHRcdFx0c3R5bGVFbGVtZW50ID0gc2luZ2xldG9uRWxlbWVudCB8fCAoc2luZ2xldG9uRWxlbWVudCA9IGNyZWF0ZVN0eWxlRWxlbWVudChvcHRpb25zKSk7XG5cdFx0XHR1cGRhdGUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGVFbGVtZW50LCBzdHlsZUluZGV4LCBmYWxzZSk7XG5cdFx0XHRyZW1vdmUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGVFbGVtZW50LCBzdHlsZUluZGV4LCB0cnVlKTtcblx0XHR9IGVsc2UgaWYob2JqLnNvdXJjZU1hcCAmJlxuXHRcdFx0dHlwZW9mIFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0XHR0eXBlb2YgVVJMLmNyZWF0ZU9iamVjdFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0XHR0eXBlb2YgVVJMLnJldm9rZU9iamVjdFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0XHR0eXBlb2YgQmxvYiA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0XHR0eXBlb2YgYnRvYSA9PT0gXCJmdW5jdGlvblwiKSB7XG5cdFx0XHRzdHlsZUVsZW1lbnQgPSBjcmVhdGVMaW5rRWxlbWVudChvcHRpb25zKTtcblx0XHRcdHVwZGF0ZSA9IHVwZGF0ZUxpbmsuYmluZChudWxsLCBzdHlsZUVsZW1lbnQpO1xuXHRcdFx0cmVtb3ZlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZUVsZW1lbnQpO1xuXHRcdFx0XHRpZihzdHlsZUVsZW1lbnQuaHJlZilcblx0XHRcdFx0XHRVUkwucmV2b2tlT2JqZWN0VVJMKHN0eWxlRWxlbWVudC5ocmVmKTtcblx0XHRcdH07XG5cdFx0fSBlbHNlIHtcblx0XHRcdHN0eWxlRWxlbWVudCA9IGNyZWF0ZVN0eWxlRWxlbWVudChvcHRpb25zKTtcblx0XHRcdHVwZGF0ZSA9IGFwcGx5VG9UYWcuYmluZChudWxsLCBzdHlsZUVsZW1lbnQpO1xuXHRcdFx0cmVtb3ZlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZUVsZW1lbnQpO1xuXHRcdFx0fTtcblx0XHR9XG5cdFxuXHRcdHVwZGF0ZShvYmopO1xuXHRcblx0XHRyZXR1cm4gZnVuY3Rpb24gdXBkYXRlU3R5bGUobmV3T2JqKSB7XG5cdFx0XHRpZihuZXdPYmopIHtcblx0XHRcdFx0aWYobmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJiBuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJiBuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwKVxuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0dXBkYXRlKG9iaiA9IG5ld09iaik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZW1vdmUoKTtcblx0XHRcdH1cblx0XHR9O1xuXHR9XG5cdFxuXHR2YXIgcmVwbGFjZVRleHQgPSAoZnVuY3Rpb24gKCkge1xuXHRcdHZhciB0ZXh0U3RvcmUgPSBbXTtcblx0XG5cdFx0cmV0dXJuIGZ1bmN0aW9uIChpbmRleCwgcmVwbGFjZW1lbnQpIHtcblx0XHRcdHRleHRTdG9yZVtpbmRleF0gPSByZXBsYWNlbWVudDtcblx0XHRcdHJldHVybiB0ZXh0U3RvcmUuZmlsdGVyKEJvb2xlYW4pLmpvaW4oJ1xcbicpO1xuXHRcdH07XG5cdH0pKCk7XG5cdFxuXHRmdW5jdGlvbiBhcHBseVRvU2luZ2xldG9uVGFnKHN0eWxlRWxlbWVudCwgaW5kZXgsIHJlbW92ZSwgb2JqKSB7XG5cdFx0dmFyIGNzcyA9IHJlbW92ZSA/IFwiXCIgOiBvYmouY3NzO1xuXHRcblx0XHRpZiAoc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQpIHtcblx0XHRcdHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0LmNzc1RleHQgPSByZXBsYWNlVGV4dChpbmRleCwgY3NzKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dmFyIGNzc05vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpO1xuXHRcdFx0dmFyIGNoaWxkTm9kZXMgPSBzdHlsZUVsZW1lbnQuY2hpbGROb2Rlcztcblx0XHRcdGlmIChjaGlsZE5vZGVzW2luZGV4XSkgc3R5bGVFbGVtZW50LnJlbW92ZUNoaWxkKGNoaWxkTm9kZXNbaW5kZXhdKTtcblx0XHRcdGlmIChjaGlsZE5vZGVzLmxlbmd0aCkge1xuXHRcdFx0XHRzdHlsZUVsZW1lbnQuaW5zZXJ0QmVmb3JlKGNzc05vZGUsIGNoaWxkTm9kZXNbaW5kZXhdKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHN0eWxlRWxlbWVudC5hcHBlbmRDaGlsZChjc3NOb2RlKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFwcGx5VG9UYWcoc3R5bGVFbGVtZW50LCBvYmopIHtcblx0XHR2YXIgY3NzID0gb2JqLmNzcztcblx0XHR2YXIgbWVkaWEgPSBvYmoubWVkaWE7XG5cdFxuXHRcdGlmKG1lZGlhKSB7XG5cdFx0XHRzdHlsZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwibWVkaWFcIiwgbWVkaWEpXG5cdFx0fVxuXHRcblx0XHRpZihzdHlsZUVsZW1lbnQuc3R5bGVTaGVldCkge1xuXHRcdFx0c3R5bGVFbGVtZW50LnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcblx0XHR9IGVsc2Uge1xuXHRcdFx0d2hpbGUoc3R5bGVFbGVtZW50LmZpcnN0Q2hpbGQpIHtcblx0XHRcdFx0c3R5bGVFbGVtZW50LnJlbW92ZUNoaWxkKHN0eWxlRWxlbWVudC5maXJzdENoaWxkKTtcblx0XHRcdH1cblx0XHRcdHN0eWxlRWxlbWVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcblx0XHR9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHVwZGF0ZUxpbmsobGlua0VsZW1lbnQsIG9iaikge1xuXHRcdHZhciBjc3MgPSBvYmouY3NzO1xuXHRcdHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuXHRcblx0XHRpZihzb3VyY2VNYXApIHtcblx0XHRcdC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI2NjAzODc1XG5cdFx0XHRjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiICsgYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSArIFwiICovXCI7XG5cdFx0fVxuXHRcblx0XHR2YXIgYmxvYiA9IG5ldyBCbG9iKFtjc3NdLCB7IHR5cGU6IFwidGV4dC9jc3NcIiB9KTtcblx0XG5cdFx0dmFyIG9sZFNyYyA9IGxpbmtFbGVtZW50LmhyZWY7XG5cdFxuXHRcdGxpbmtFbGVtZW50LmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuXHRcblx0XHRpZihvbGRTcmMpXG5cdFx0XHRVUkwucmV2b2tlT2JqZWN0VVJMKG9sZFNyYyk7XG5cdH1cblxuXG4vKioqLyB9KSxcbi8qIDE2OSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdHZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXHRcblx0dmFyIF9yZWFjdERvbSA9IF9fd2VicGFja19yZXF1aXJlX18oMTU4KTtcblx0XG5cdHZhciBfcmVhY3REb20yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3REb20pO1xuXHRcblx0dmFyIF9hdXRvY29tcGxldGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3MCk7XG5cdFxuXHR2YXIgX2F1dG9jb21wbGV0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9hdXRvY29tcGxldGUpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdF9fd2VicGFja19yZXF1aXJlX18oMTczKTtcblx0XG5cdHZhciBJbmdyZWRpZW50cyA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVDbGFzcyh7XG5cdCAgICBkaXNwbGF5TmFtZTogJ0luZ3JlZGllbnRzJyxcblx0XG5cdCAgICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZSgpIHtcblx0ICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICBpbmdyZWRpZW50czogW10sXG5cdCAgICAgICAgICAgIHVuaXRzOiBbXVxuXHQgICAgICAgIH07XG5cdCAgICB9LFxuXHQgICAgY29tcG9uZW50V2lsbE1vdW50OiBmdW5jdGlvbiBjb21wb25lbnRXaWxsTW91bnQoKSB7XG5cdCAgICAgICAgdmFyIG1lID0gdGhpcztcblx0ICAgICAgICB0aGlzLnByb3BzLmFTZXJ2ZXJSZXF1ZXN0KHtcblx0ICAgICAgICAgICAgYWN0aW9uOiAnR0VUX0RBVEFfSU5HUkVESUVOVFMnXG5cdCAgICAgICAgfSwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdCAgICAgICAgICAgIG1lLnNldFN0YXRlKHsgaW5ncmVkaWVudHM6IHJlc3BvbnNlIH0pO1xuXHQgICAgICAgIH0sIHRydWUpO1xuXHRcblx0ICAgICAgICB0aGlzLnByb3BzLmFTZXJ2ZXJSZXF1ZXN0KHtcblx0ICAgICAgICAgICAgYWN0aW9uOiAnR0VUX0RBVEFfVU5JVFMnXG5cdCAgICAgICAgfSwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdCAgICAgICAgICAgIG1lLnNldFN0YXRlKHsgdW5pdHM6IHJlc3BvbnNlIH0pO1xuXHQgICAgICAgIH0sIHRydWUpO1xuXHQgICAgfSxcblx0ICAgIHNhdmVJbmdyZWRpZW50czogZnVuY3Rpb24gc2F2ZUluZ3JlZGllbnRzKGUsIGtleSkge1xuXHQgICAgICAgIHZhciB2YWx1ZSA9IGUudGFyZ2V0LnZhbHVlO1xuXHQgICAgICAgIHZhciBpbmdLZXkgPSBudWxsO1xuXHQgICAgICAgIHZhciBjdXJyZW50RWxlbWVudCA9IGUuY3VycmVudFRhcmdldDtcblx0ICAgICAgICB3aGlsZSAoaW5nS2V5ID09IG51bGwpIHtcblx0ICAgICAgICAgICAgaWYgKGN1cnJlbnRFbGVtZW50LmRhdGFzZXQuaW5nS2V5ICE9IG51bGwpIHtcblx0ICAgICAgICAgICAgICAgIGluZ0tleSA9IGN1cnJlbnRFbGVtZW50LmRhdGFzZXQuaW5nS2V5O1xuXHQgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICBjdXJyZW50RWxlbWVudCA9IGN1cnJlbnRFbGVtZW50LnBhcmVudE5vZGU7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHZhciB0ZW1wSW5ncmVkaWVudHNMaXN0ID0gdGhpcy5wcm9wcy5pbmdyZWRpZW50cztcblx0XG5cdCAgICAgICAgdGVtcEluZ3JlZGllbnRzTGlzdFtpbmdLZXldW2tleV0gPSB2YWx1ZTtcblx0XG5cdCAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG5cdCAgICAgICAgICAgIGN1cnJlbnRJbmdyZWRpZW50czogdGVtcEluZ3JlZGllbnRzTGlzdFxuXHQgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICB0aGlzLnByb3BzLmFVcGRhdGVWYWx1ZShcImluZ3JlZGllbnRzXCIsIHRoaXMucHJvcHMuaW5ncmVkaWVudHMpO1xuXHQgICAgfSxcblx0ICAgIHVwZGF0ZVF1YW50aXR5OiBmdW5jdGlvbiB1cGRhdGVRdWFudGl0eShlKSB7XG5cdCAgICAgICAgdGhpcy5zYXZlSW5ncmVkaWVudHMoZSwgXCJxdWFudGl0eVwiKTtcblx0ICAgIH0sXG5cdCAgICB1cGRhdGVVbml0OiBmdW5jdGlvbiB1cGRhdGVVbml0KGUpIHtcblx0ICAgICAgICB0aGlzLnNhdmVJbmdyZWRpZW50cyhlLCBcInVuaXRzXCIpO1xuXHQgICAgfSxcblx0ICAgIHVwZGF0ZUluZ3JlZGllbnROYW1lOiBmdW5jdGlvbiB1cGRhdGVJbmdyZWRpZW50TmFtZShlKSB7XG5cdCAgICAgICAgdGhpcy5zYXZlSW5ncmVkaWVudHMoZSwgXCJpbmdyZWRpZW50TmFtZVwiKTtcblx0ICAgIH0sXG5cdCAgICBkZWxldGVJbmdyZWRpZW50OiBmdW5jdGlvbiBkZWxldGVJbmdyZWRpZW50KGUpIHtcblx0ICAgICAgICB2YXIgaW5kZXggPSBlLnRhcmdldC5wYXJlbnROb2RlLmRhdGFzZXQuaW5nS2V5O1xuXHQgICAgICAgIHZhciBpbmdyZWRpZW50cyA9IHRoaXMucHJvcHMuaW5ncmVkaWVudHM7XG5cdFxuXHQgICAgICAgIGlmIChpbmRleCA9PSAwICYmIGluZ3JlZGllbnRzLmxlbmd0aCA9PSAxKSB7XG5cdCAgICAgICAgICAgIGluZ3JlZGllbnRzWzBdLnF1YW50aXR5ID0gXCJcIjtcblx0ICAgICAgICAgICAgaW5ncmVkaWVudHNbMF0udW5pdHMgPSBcIlwiO1xuXHQgICAgICAgICAgICBpbmdyZWRpZW50c1swXS5pbmdyZWRpZW50TmFtZSA9IFwiXCI7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgaW5ncmVkaWVudHMuc3BsaWNlKGluZGV4LCAxKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHRoaXMucHJvcHMuYVVwZGF0ZVZhbHVlKFwiaW5ncmVkaWVudHNcIiwgaW5ncmVkaWVudHMpO1xuXHQgICAgfSxcblx0ICAgIHJlbmRlckRpc3BsYXk6IGZ1bmN0aW9uIHJlbmRlckRpc3BsYXkoKSB7XG5cdCAgICAgICAgdmFyIGtleSA9IDA7XG5cdCAgICAgICAgdmFyIGxpc3QgPSB0aGlzLnByb3BzLmluZ3JlZGllbnRzLm1hcChmdW5jdGlvbiAoaW5nKSB7XG5cdCAgICAgICAgICAgIGlmIChpbmcuaW5ncmVkaWVudE5hbWUgPT0gXCJcIikge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICdsaScsXG5cdCAgICAgICAgICAgICAgICAgICAgeyBrZXk6IGtleSsrIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgJ1BsZWFzZSBlbnRlciBpbmdyZWRpZW50Li4uJ1xuXHQgICAgICAgICAgICAgICAgKTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICAgICAnbGknLFxuXHQgICAgICAgICAgICAgICAgICAgIHsga2V5OiBrZXkrKyB9LFxuXHQgICAgICAgICAgICAgICAgICAgIGluZy5xdWFudGl0eSArIFwiIFwiICsgaW5nLnVuaXRzICsgXCIgXCIgKyBpbmcuaW5ncmVkaWVudE5hbWVcblx0ICAgICAgICAgICAgICAgICk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAndWwnLFxuXHQgICAgICAgICAgICBudWxsLFxuXHQgICAgICAgICAgICBsaXN0XG5cdCAgICAgICAgKTtcblx0ICAgIH0sXG5cdCAgICByZW5kZXJGb3JtOiBmdW5jdGlvbiByZW5kZXJGb3JtKCkge1xuXHQgICAgICAgIHZhciBrZXkgPSAtMTtcblx0ICAgICAgICB2YXIgbWUgPSB0aGlzO1xuXHQgICAgICAgIHZhciBpbmdyZWRpZW50TGlzdCA9IFtdO1xuXHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zdGF0ZS5pbmdyZWRpZW50cy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICBpbmdyZWRpZW50TGlzdC5wdXNoKHRoaXMuc3RhdGUuaW5ncmVkaWVudHNbaV0uaW5ncmVkaWVudE5hbWUpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdmFyIGxpc3QgPSB0aGlzLnByb3BzLmluZ3JlZGllbnRzLm1hcChmdW5jdGlvbiAoaW5nKSB7XG5cdCAgICAgICAgICAgIHZhciBxdWFudGl0eUNsYXNzZXMgPSBcInF1YW50aXR5XCI7XG5cdCAgICAgICAgICAgIHZhciB1bml0c0NsYXNzZXMgPSBcInVuaXRzXCI7XG5cdCAgICAgICAgICAgIHZhciBpbmdyZWRpZW50Q2xhc3NlcyA9IFwibmFtZVwiO1xuXHRcblx0ICAgICAgICAgICAgaWYgKG1lLnByb3BzLnZhbGlkYXRlKSB7XG5cdCAgICAgICAgICAgICAgICBpZiAoaW5nLnF1YW50aXR5ID09IG51bGwgfHwgaW5nLnF1YW50aXR5ID09IFwiXCIgfHwgaW5nLnF1YW50aXR5IDwgMCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHF1YW50aXR5Q2xhc3NlcyArPSBcIiByZXF1aXJlZFwiO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgaWYgKGluZy51bml0cyA9PSBudWxsIHx8IGluZy51bml0cyA9PSBcIlwiKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdW5pdHNDbGFzc2VzICs9IFwiIHJlcXVpcmVkXCI7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICBpZiAoaW5nLmluZ3JlZGllbnROYW1lID09IG51bGwgfHwgaW5nLmluZ3JlZGllbnROYW1lID09IFwiXCIpIHtcblx0ICAgICAgICAgICAgICAgICAgICBpbmdyZWRpZW50Q2xhc3NlcyArPSBcIiByZXF1aXJlZFwiO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGtleSsrO1xuXHQgICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAnbGknLFxuXHQgICAgICAgICAgICAgICAgeyBrZXk6IGtleSwgJ2RhdGEtaW5nLWtleSc6IGtleSwgY2xhc3NOYW1lOiAnaW5ncmVkaWVudCBjb2x1bW4gY29sdW1uLTMnIH0sXG5cdCAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7IHZhbHVlOiBpbmcucXVhbnRpdHksXG5cdCAgICAgICAgICAgICAgICAgICAgdHlwZTogJ251bWJlcicsXG5cdCAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdRdWFudGl0eS4uLicsXG5cdCAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBxdWFudGl0eUNsYXNzZXMsXG5cdCAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IG1lLnVwZGF0ZVF1YW50aXR5XG5cdCAgICAgICAgICAgICAgICB9KSxcblx0ICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9hdXRvY29tcGxldGUyLmRlZmF1bHQsIHsgdmFsdWU6IGluZy51bml0cyxcblx0ICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogJ1VuaXQuLi4nLFxuXHQgICAgICAgICAgICAgICAgICAgIGN1c3RvbUNsYXNzOiB1bml0c0NsYXNzZXMsXG5cdCAgICAgICAgICAgICAgICAgICAgc291cmNlOiBtZS5zdGF0ZS51bml0cyxcblx0ICAgICAgICAgICAgICAgICAgICBjaGFuZ2U6IG1lLnVwZGF0ZVVuaXQgfSksXG5cdCAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfYXV0b2NvbXBsZXRlMi5kZWZhdWx0LCB7IHZhbHVlOiBpbmcuaW5ncmVkaWVudE5hbWUsXG5cdCAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdJbmdyZWRpZW50Li4uJyxcblx0ICAgICAgICAgICAgICAgICAgICBjdXN0b21DbGFzczogaW5ncmVkaWVudENsYXNzZXMsXG5cdCAgICAgICAgICAgICAgICAgICAgc291cmNlOiBpbmdyZWRpZW50TGlzdCxcblx0ICAgICAgICAgICAgICAgICAgICBjaGFuZ2U6IG1lLnVwZGF0ZUluZ3JlZGllbnROYW1lIH0pLFxuXHQgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2EnLCB7IGNsYXNzTmFtZTogJ3RpLXRyYXNoJywgb25DbGljazogbWUuZGVsZXRlSW5ncmVkaWVudCB9KVxuXHQgICAgICAgICAgICApO1xuXHQgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICd1bCcsXG5cdCAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnZWRpdGFibGUnIH0sXG5cdCAgICAgICAgICAgIGxpc3QsXG5cdCAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgJ2xpJyxcblx0ICAgICAgICAgICAgICAgIHsgb25DbGljazogdGhpcy5wcm9wcy5hQWRkSW5ncmVkaWVudCwgY2xhc3NOYW1lOiAnYWRkLW5ldycgfSxcblx0ICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdhJywgeyBjbGFzc05hbWU6ICd0aS1wbHVzJyB9KSxcblx0ICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICdsYWJlbCcsXG5cdCAgICAgICAgICAgICAgICAgICAgbnVsbCxcblx0ICAgICAgICAgICAgICAgICAgICAnQWRkIGluZ3JlZGllbnQnXG5cdCAgICAgICAgICAgICAgICApXG5cdCAgICAgICAgICAgIClcblx0ICAgICAgICApO1xuXHQgICAgfSxcblx0ICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuXHQgICAgICAgIHZhciBsaXN0O1xuXHQgICAgICAgIGlmICh0aGlzLnByb3BzLmVkaXRhYmxlKSB7XG5cdCAgICAgICAgICAgIGxpc3QgPSB0aGlzLnJlbmRlckZvcm0oKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBsaXN0ID0gdGhpcy5yZW5kZXJEaXNwbGF5KCk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICdzZWN0aW9uJyxcblx0ICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdyZWNpcGUtaW5ncmVkaWVudHMnIH0sXG5cdCAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgJ2xhYmVsJyxcblx0ICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnZGF0YS1sYWJlbCcgfSxcblx0ICAgICAgICAgICAgICAgICdJbmdyZWRpZW50cydcblx0ICAgICAgICAgICAgKSxcblx0ICAgICAgICAgICAgbGlzdFxuXHQgICAgICAgICk7XG5cdCAgICB9XG5cdH0pO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gSW5ncmVkaWVudHM7XG5cbi8qKiovIH0pLFxuLyogMTcwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0dmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cdFxuXHR2YXIgX3JlYWN0RG9tID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTgpO1xuXHRcblx0dmFyIF9yZWFjdERvbTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdERvbSk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0X193ZWJwYWNrX3JlcXVpcmVfXygxNzEpO1xuXHRcblx0dmFyIEF1dG9Db21wbGV0ZSA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVDbGFzcyh7XG5cdCAgICBkaXNwbGF5TmFtZTogJ0F1dG9Db21wbGV0ZScsXG5cdFxuXHQgICAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbiBnZXRJbml0aWFsU3RhdGUoKSB7XG5cdCAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgZnVsbExpc3Q6IHRoaXMucHJvcHMuc291cmNlLFxuXHQgICAgICAgICAgICBmaWx0ZXJlZExpc3Q6IFtdLFxuXHQgICAgICAgICAgICBzZWFyY2hUZXJtczogW10sXG5cdCAgICAgICAgICAgIGFjdGl2ZUluZGV4OiAwXG5cdCAgICAgICAgfTtcblx0ICAgIH0sXG5cdCAgICBnZXRJdGVtSFRNTDogZnVuY3Rpb24gZ2V0SXRlbUhUTUwoaXRlbSkge1xuXHQgICAgICAgIHZhciBpdGVtSFRNTCA9IGl0ZW07XG5cdCAgICAgICAgdmFyIHdoZXJlVG9TdGFydCA9IDA7XG5cdFxuXHQgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdGhpcy5zdGF0ZS5zZWFyY2hUZXJtcy5sZW5ndGg7IHgrKykge1xuXHQgICAgICAgICAgICB2YXIgdGVybSA9IHRoaXMuc3RhdGUuc2VhcmNoVGVybXNbeF07XG5cdCAgICAgICAgICAgIGlmICh0ZXJtID09IFwiXCIpIGNvbnRpbnVlO1xuXHQgICAgICAgICAgICB2YXIgcmVwbGFjZW1lbnQgPSBcIlwiO1xuXHQgICAgICAgICAgICB2YXIgcmVnRXhPYmogPSB0aGlzLmdldFJlZ0V4T2JqKHRlcm0pO1xuXHQgICAgICAgICAgICB2YXIgbWF0Y2ggPSBpdGVtSFRNTC5zdWJzdHJpbmcod2hlcmVUb1N0YXJ0LCBpdGVtSFRNTC5sZW5ndGgpLm1hdGNoKHJlZ0V4T2JqKTtcblx0ICAgICAgICAgICAgdmFyIGJlZm9yZVN0cmluZyA9IGl0ZW1IVE1MLnN1YnN0cmluZygwLCB3aGVyZVRvU3RhcnQpO1xuXHQgICAgICAgICAgICB2YXIgYWZ0ZXJTdHJpbmcgPSBpdGVtSFRNTC5zdWJzdHJpbmcod2hlcmVUb1N0YXJ0LCBpdGVtSFRNTC5sZW5ndGgpO1xuXHRcblx0ICAgICAgICAgICAgaWYgKG1hdGNoICE9IG51bGwpIHtcblx0ICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50ID0gXCI8c3BhbiBjbGFzcz0naGlnaGxpZ2h0Jz5cIiArIG1hdGNoWzBdICsgXCI8L3NwYW4+XCI7XG5cdCAgICAgICAgICAgICAgICB3aGVyZVRvU3RhcnQgKz0gbWF0Y2guaW5kZXggKyByZXBsYWNlbWVudC5sZW5ndGg7XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIGl0ZW1IVE1MID0gYmVmb3JlU3RyaW5nICsgYWZ0ZXJTdHJpbmcucmVwbGFjZShyZWdFeE9iaiwgcmVwbGFjZW1lbnQpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICBfX2h0bWw6IGl0ZW1IVE1MXG5cdCAgICAgICAgfTtcblx0ICAgIH0sXG5cdCAgICBnZXRSZWdFeE9iajogZnVuY3Rpb24gZ2V0UmVnRXhPYmooc2VhcmNoUmVnRXgpIHtcblx0ICAgICAgICB2YXIgcmV0dXJuT2JqID0gbnVsbDtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICByZXR1cm5PYmogPSBuZXcgUmVnRXhwKHNlYXJjaFJlZ0V4LCBcImlcIik7XG5cdCAgICAgICAgfSBjYXRjaCAoZSkge31cblx0ICAgICAgICByZXR1cm4gcmV0dXJuT2JqO1xuXHQgICAgfSxcblx0ICAgIHJlc2l6ZTogZnVuY3Rpb24gcmVzaXplKCkge1xuXHQgICAgICAgIHZhciByZXN1bHRzID0gX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKHRoaXMpLnF1ZXJ5U2VsZWN0b3IoXCIucmVzdWx0c1wiKTtcblx0ICAgICAgICB2YXIgY29tcG9uZW50UG9zID0gX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKHRoaXMpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHQgICAgICAgIHZhciBwb3MgPSByZXN1bHRzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHQgICAgICAgIHJlc3VsdHMuc3R5bGUubWF4SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0IC0gcG9zLnRvcCArIFwicHhcIjtcblx0ICAgICAgICByZXN1bHRzLnN0eWxlLnRvcCA9IGNvbXBvbmVudFBvcy5oZWlnaHQgKyBcInB4XCI7XG5cdCAgICB9LFxuXHQgICAga2V5dXA6IGZ1bmN0aW9uIGtleXVwKGUpIHtcblx0ICAgICAgICBpZiAoZS5rZXlDb2RlID09IDQwKSB7XG5cdCAgICAgICAgICAgIHZhciBuZXdJbmRleCA9IHRoaXMuc3RhdGUuYWN0aXZlSW5kZXggKyAxO1xuXHQgICAgICAgICAgICBpZiAobmV3SW5kZXggPCB0aGlzLnN0YXRlLmZpbHRlcmVkTGlzdC5sZW5ndGgpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuXHQgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUluZGV4OiBuZXdJbmRleFxuXHQgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PSAzOCkge1xuXHQgICAgICAgICAgICB2YXIgbmV3SW5kZXggPSB0aGlzLnN0YXRlLmFjdGl2ZUluZGV4IC0gMTtcblx0ICAgICAgICAgICAgaWYgKG5ld0luZGV4ID49IDApIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuXHQgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUluZGV4OiBuZXdJbmRleFxuXHQgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PSAxMykge1xuXHQgICAgICAgICAgICB2YXIgaXRlbXMgPSBfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUodGhpcykucXVlcnlTZWxlY3RvcihcIi5yZXN1bHRzXCIpLmNoaWxkTm9kZXM7XG5cdCAgICAgICAgICAgIGl0ZW1zW3RoaXMuc3RhdGUuYWN0aXZlSW5kZXhdLmNsaWNrKCk7XG5cdCAgICAgICAgICAgIF9yZWFjdERvbTIuZGVmYXVsdC5maW5kRE9NTm9kZSh0aGlzKS5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIikuYmx1cigpO1xuXHQgICAgICAgIH1cblx0ICAgIH0sXG5cdCAgICBjaGFuZ2U6IGZ1bmN0aW9uIGNoYW5nZShlKSB7XG5cdCAgICAgICAgdmFyIHZhbHVlID0gX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKHRoaXMpLnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKS52YWx1ZTtcblx0ICAgICAgICB2YXIgcmVzdWx0cyA9IF9yZWFjdERvbTIuZGVmYXVsdC5maW5kRE9NTm9kZSh0aGlzKS5xdWVyeVNlbGVjdG9yKFwiLnJlc3VsdHNcIik7XG5cdFxuXHQgICAgICAgIHZhciBzZWFyY2hUZXJtcyA9IHZhbHVlLnJlcGxhY2UoL1tcXC1cXFtcXF1cXC9cXHtcXH1cXChcXClcXCpcXCtcXD9cXC5cXFxcXFxeXFwkXFx8XS9nLCBcIlxcXFwkJlwiKS5zcGxpdChcIiBcIik7XG5cdCAgICAgICAgdmFyIHNlYXJjaFJlZ0V4U3RyaW5nID0gXCJcIjtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlYXJjaFRlcm1zLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgIHNlYXJjaFJlZ0V4U3RyaW5nICs9IHNlYXJjaFRlcm1zW2ldICsgXCIuKlwiO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdmFyIHJlZ0V4T2JqID0gdGhpcy5nZXRSZWdFeE9iaihzZWFyY2hSZWdFeFN0cmluZyk7XG5cdFxuXHQgICAgICAgIHZhciBmaWx0ZXJlZExpc3QgPSBbXTtcblx0ICAgICAgICBpZiAocmVnRXhPYmogIT09IG51bGwpIHtcblx0ICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB0aGlzLnN0YXRlLmZ1bGxMaXN0Lmxlbmd0aDsgeCsrKSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgY3VycmVudEl0ZW0gPSB0aGlzLnN0YXRlLmZ1bGxMaXN0W3hdO1xuXHQgICAgICAgICAgICAgICAgaWYgKHJlZ0V4T2JqLnRlc3QoY3VycmVudEl0ZW0pKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgZmlsdGVyZWRMaXN0LnB1c2goY3VycmVudEl0ZW0pO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgZmlsdGVyZWRMaXN0ID0gdGhpcy5zdGF0ZS5mdWxsTGlzdC5zbGljZSgwKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuXHQgICAgICAgICAgICBmaWx0ZXJlZExpc3Q6IGZpbHRlcmVkTGlzdCxcblx0ICAgICAgICAgICAgZnVsbExpc3Q6IHRoaXMucHJvcHMuc291cmNlLFxuXHQgICAgICAgICAgICBzZWFyY2hUZXJtczogc2VhcmNoVGVybXNcblx0ICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgdGhpcy5yZXNpemUoKTtcblx0ICAgICAgICB0aGlzLnByb3BzLmNoYW5nZShlKTtcblx0ICAgIH0sXG5cdCAgICBmb2N1czogZnVuY3Rpb24gZm9jdXMoZSkge1xuXHQgICAgICAgIHRoaXMuY2hhbmdlKGUpO1xuXHRcblx0ICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCB0aGlzLnJlc2l6ZSwgdHJ1ZSk7XG5cdCAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdGhpcy5yZXNpemUsIGZhbHNlKTtcblx0ICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMua2V5dXAsIGZhbHNlKTtcblx0XG5cdCAgICAgICAgX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKHRoaXMpLmNsYXNzTGlzdC5hZGQoXCJzaG93XCIpO1xuXHQgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuXHQgICAgICAgICAgICBhY3RpdmVJbmRleDogMFxuXHQgICAgICAgIH0pO1xuXHQgICAgfSxcblx0ICAgIGJsdXI6IGZ1bmN0aW9uIGJsdXIoZSkge1xuXHQgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIHRoaXMucmVzaXplLCB0cnVlKTtcblx0ICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCB0aGlzLnJlc2l6ZSwgZmFsc2UpO1xuXHQgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5rZXl1cCwgZmFsc2UpO1xuXHRcblx0ICAgICAgICBfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUodGhpcykuY2xhc3NMaXN0LnJlbW92ZShcInNob3dcIik7XG5cdCAgICB9LFxuXHQgICAgc2VsZWN0OiBmdW5jdGlvbiBzZWxlY3QoZSkge1xuXHQgICAgICAgIHZhciBjdXJyZW50RWxlbWVudCA9IGUudGFyZ2V0O1xuXHQgICAgICAgIHdoaWxlIChjdXJyZW50RWxlbWVudCAhPSBudWxsKSB7XG5cdCAgICAgICAgICAgIGlmIChjdXJyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJpdGVtXCIpKSB7XG5cdCAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICBfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUodGhpcykucXVlcnlTZWxlY3RvcihcImlucHV0XCIpLnZhbHVlID0gY3VycmVudEVsZW1lbnQuaW5uZXJUZXh0O1xuXHQgICAgICAgIGUudGFyZ2V0ID0gX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKHRoaXMpLnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKTtcblx0ICAgICAgICB0aGlzLmNoYW5nZShlKTtcblx0ICAgIH0sXG5cdCAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0ICAgICAgICB2YXIgbWUgPSB0aGlzO1xuXHQgICAgICAgIHZhciBrZXkgPSAtMTtcblx0ICAgICAgICB2YXIgbGlzdCA9IHRoaXMuc3RhdGUuZmlsdGVyZWRMaXN0Lm1hcChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcblx0ICAgICAgICAgICAgdmFyIGl0ZW1DbGFzcyA9IFwiaXRlbVwiO1xuXHQgICAgICAgICAgICBpZiAoaW5kZXggPT0gbWUuc3RhdGUuYWN0aXZlSW5kZXgpIHtcblx0ICAgICAgICAgICAgICAgIGl0ZW1DbGFzcyArPSBcIiBhY3RpdmVcIjtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsga2V5OiBrZXkrKywgY2xhc3NOYW1lOiBpdGVtQ2xhc3MsXG5cdCAgICAgICAgICAgICAgICBvbkNsaWNrOiBtZS5zZWxlY3QsXG5cdCAgICAgICAgICAgICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTDogbWUuZ2V0SXRlbUhUTUwoaXRlbSkgfSk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgdmFyIGN1c3RvbUNsYXNzID0gXCJhdXRvY29tcGxldGUgXCIgKyB0aGlzLnByb3BzLmN1c3RvbUNsYXNzO1xuXHQgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBjdXN0b21DbGFzcyB9LFxuXHQgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7IHZhbHVlOiB0aGlzLnByb3BzLnZhbHVlLFxuXHQgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IHRoaXMucHJvcHMucGxhY2Vob2xkZXIsXG5cdCAgICAgICAgICAgICAgICBvbkNoYW5nZTogdGhpcy5jaGFuZ2UsXG5cdCAgICAgICAgICAgICAgICBvbkZvY3VzOiB0aGlzLmZvY3VzLFxuXHQgICAgICAgICAgICAgICAgb25CbHVyOiB0aGlzLmJsdXIgfSksXG5cdCAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3Jlc3VsdHMnIH0sXG5cdCAgICAgICAgICAgICAgICBsaXN0XG5cdCAgICAgICAgICAgIClcblx0ICAgICAgICApO1xuXHQgICAgfVxuXHR9KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IEF1dG9Db21wbGV0ZTtcblxuLyoqKi8gfSksXG4vKiAxNzEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHQvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXHRcblx0Ly8gbG9hZCB0aGUgc3R5bGVzXG5cdHZhciBjb250ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzIpO1xuXHRpZiAodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cdC8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cblx0dmFyIHVwZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTY4KShjb250ZW50LCB7fSk7XG5cdGlmIChjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuXHRpZiAoZmFsc2UpIHtcblx0XHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdGlmICghY29udGVudC5sb2NhbHMpIHtcblx0XHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi9hdXRvY29tcGxldGUuc2Nzc1wiLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vYXV0b2NvbXBsZXRlLnNjc3NcIik7XG5cdFx0XHRcdGlmICh0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24gKCkge1xuXHRcdFx0dXBkYXRlKCk7XG5cdFx0fSk7XG5cdH1cblxuLyoqKi8gfSksXG4vKiAxNzIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2NykoKTtcblx0Ly8gaW1wb3J0c1xuXHRcblx0XG5cdC8vIG1vZHVsZVxuXHRleHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuYXV0b2NvbXBsZXRle3Bvc2l0aW9uOnJlbGF0aXZlfS5hdXRvY29tcGxldGUuc2hvdyBpbnB1dHtib3JkZXItcmFkaXVzOjVweCA1cHggMCAwfS5hdXRvY29tcGxldGUuc2hvdyAucmVzdWx0c3t0cmFuc2Zvcm06cGVyc3BlY3RpdmUoMCkgcm90YXRlWCgwZGVnKX0uYXV0b2NvbXBsZXRlIC5yZXN1bHRze2NvbG9yOiM1ODU2NTg7YmFja2dyb3VuZC1jb2xvcjojZmZmO2JveC1zaGFkb3c6NXB4IDVweCAxMHB4ICMwMDA7cG9zaXRpb246YWJzb2x1dGU7bGVmdDowO3JpZ2h0OjA7dHJhbnNmb3JtOnBlcnNwZWN0aXZlKDgwMHB4KSByb3RhdGVYKC05MGRlZyk7dHJhbnNmb3JtLW9yaWdpbjp0b3A7dHJhbnNpdGlvbjphbGwgLjVzIGxpbmVhcjt6LWluZGV4OjEwO292ZXJmbG93OnNjcm9sbH0uYXV0b2NvbXBsZXRlIC5yZXN1bHRzIC5pdGVte3BhZGRpbmc6NXB4O2JvcmRlci1ib3R0b206MXB4IHNvbGlkICMyZTJjMmQ7Y3Vyc29yOnBvaW50ZXJ9LmF1dG9jb21wbGV0ZSAucmVzdWx0cyAuaXRlbSAuaGlnaGxpZ2h0e2ZvbnQtd2VpZ2h0OjcwMDtmb250LXNpemU6MjBweDtjb2xvcjojMmUyYzJkfS5hdXRvY29tcGxldGUgLnJlc3VsdHMgLml0ZW06bGFzdC1jaGlsZHtib3JkZXItYm90dG9tOm5vbmV9LmF1dG9jb21wbGV0ZSAucmVzdWx0cyAuaXRlbS5hY3RpdmUsLmF1dG9jb21wbGV0ZSAucmVzdWx0cyAuaXRlbTpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiMyZTJjMmQ7Y29sb3I6I2IzYWZhZn0uYXV0b2NvbXBsZXRlIC5yZXN1bHRzIC5pdGVtLmFjdGl2ZSAuaGlnaGxpZ2h0LC5hdXRvY29tcGxldGUgLnJlc3VsdHMgLml0ZW06aG92ZXIgLmhpZ2hsaWdodHtjb2xvcjojZjFmMWYxfVwiLCBcIlwiXSk7XG5cdFxuXHQvLyBleHBvcnRzXG5cblxuLyoqKi8gfSksXG4vKiAxNzMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHQvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXHRcblx0Ly8gbG9hZCB0aGUgc3R5bGVzXG5cdHZhciBjb250ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzQpO1xuXHRpZiAodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cdC8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cblx0dmFyIHVwZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTY4KShjb250ZW50LCB7fSk7XG5cdGlmIChjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuXHRpZiAoZmFsc2UpIHtcblx0XHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdGlmICghY29udGVudC5sb2NhbHMpIHtcblx0XHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi9pbmdyZWRpZW50cy5zY3NzXCIsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi9pbmdyZWRpZW50cy5zY3NzXCIpO1xuXHRcdFx0XHRpZiAodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uICgpIHtcblx0XHRcdHVwZGF0ZSgpO1xuXHRcdH0pO1xuXHR9XG5cbi8qKiovIH0pLFxuLyogMTc0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0ZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjcpKCk7XG5cdC8vIGltcG9ydHNcblx0XG5cdFxuXHQvLyBtb2R1bGVcblx0ZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLnJlY2lwZS1pbmdyZWRpZW50cyB1bHtwYWRkaW5nOjB9LnJlY2lwZS1pbmdyZWRpZW50cyB1bCBsaXtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO3BhZGRpbmc6NXB4fS5yZWNpcGUtaW5ncmVkaWVudHMgdWwgbGkgaW5wdXQucmVxdWlyZWR7YmFja2dyb3VuZC1jb2xvcjojZjk2NjY2fS5yZWNpcGUtaW5ncmVkaWVudHMgdWwgbGkgLnF1YW50aXR5e3dpZHRoOjVlbTt0ZXh0LWFsaWduOmNlbnRlcn0ucmVjaXBlLWluZ3JlZGllbnRzIHVsIGxpIC51bml0c3tkaXNwbGF5OmZsZXg7d2lkdGg6OGVtO21hcmdpbjowIDVweH0ucmVjaXBlLWluZ3JlZGllbnRzIHVsIGxpIC51bml0cyBpbnB1dHt3aWR0aDoxMDAlfS5yZWNpcGUtaW5ncmVkaWVudHMgdWwgbGkgLm5hbWV7ZmxleDoxO2Rpc3BsYXk6ZmxleDttYXJnaW4tcmlnaHQ6NXB4fS5yZWNpcGUtaW5ncmVkaWVudHMgdWwgbGkgLm5hbWUgaW5wdXR7ZmxleDoxfS5yZWNpcGUtaW5ncmVkaWVudHMgdWwgLnRpLXRyYXNoe2FsaWduLXNlbGY6Y2VudGVyfVwiLCBcIlwiXSk7XG5cdFxuXHQvLyBleHBvcnRzXG5cblxuLyoqKi8gfSksXG4vKiAxNzUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblx0XG5cdHZhciBfY3JvcHBlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTc2KTtcblx0XG5cdHZhciBfY3JvcHBlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcm9wcGVyKTtcblx0XG5cdHZhciBfdGltZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTc5KTtcblx0XG5cdHZhciBfdGltZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90aW1lKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDE4Mik7XG5cdFxuXHR2YXIgUmVjaXBlSGVhZGVyID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUNsYXNzKHtcblx0ICAgIGRpc3BsYXlOYW1lOiAnUmVjaXBlSGVhZGVyJyxcblx0XG5cdCAgICB1cGRhdGVUaXRsZTogZnVuY3Rpb24gdXBkYXRlVGl0bGUoZSkge1xuXHQgICAgICAgIHRoaXMucHJvcHMuYVVwZGF0ZVZhbHVlKFwidGl0bGVcIiwgZS50YXJnZXQudmFsdWUpO1xuXHQgICAgfSxcblx0ICAgIHVwZGF0ZVByZXBUaW1lOiBmdW5jdGlvbiB1cGRhdGVQcmVwVGltZSh0aW1lKSB7XG5cdCAgICAgICAgdGhpcy5wcm9wcy5hVXBkYXRlVmFsdWUoJ3ByZXBUaW1lJywgdGltZSk7XG5cdCAgICB9LFxuXHQgICAgdXBkYXRlQ29va1RpbWU6IGZ1bmN0aW9uIHVwZGF0ZUNvb2tUaW1lKHRpbWUpIHtcblx0ICAgICAgICB0aGlzLnByb3BzLmFVcGRhdGVWYWx1ZSgnY29va1RpbWUnLCB0aW1lKTtcblx0ICAgIH0sXG5cdCAgICB1cGRhdGVTZXJ2aW5nczogZnVuY3Rpb24gdXBkYXRlU2VydmluZ3MoZSkge1xuXHQgICAgICAgIHRoaXMucHJvcHMuYVVwZGF0ZVZhbHVlKCdzZXJ2aW5ncycsIGUudGFyZ2V0LnZhbHVlKTtcblx0ICAgIH0sXG5cdCAgICBhZnRlckltYWdlQ3JvcDogZnVuY3Rpb24gYWZ0ZXJJbWFnZUNyb3AoaW1hZ2VVcmwpIHtcblx0ICAgICAgICB0aGlzLnByb3BzLmFVcGRhdGVWYWx1ZSgncGljdHVyZScsIGltYWdlVXJsKTtcblx0ICAgIH0sXG5cdCAgICBoYW5kbGVQdWJsaWNDaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZVB1YmxpY0NoYW5nZShlKSB7XG5cdCAgICAgICAgdGhpcy5wcm9wcy5hVXBkYXRlVmFsdWUoJ3B1YmxpYycsIGUudGFyZ2V0LmNoZWNrZWQpO1xuXHQgICAgfSxcblx0ICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuXHQgICAgICAgIC8vIFNwbGl0IHRpbWVzdGFtcCBpbnRvIFsgWSwgTSwgRCwgaCwgbSwgcyBdXG5cdCAgICAgICAgdmFyIHRpbWUgPSB0aGlzLnByb3BzLnJlY2lwZS5kYXRlTW9kaWZpZWQuc3BsaXQoL1stIDpdLyk7XG5cdFxuXHQgICAgICAgIC8vIEFwcGx5IGVhY2ggZWxlbWVudCB0byB0aGUgRGF0ZSBmdW5jdGlvblxuXHQgICAgICAgIHZhciBjcmVhdGVkID0gbmV3IERhdGUoRGF0ZS5VVEModGltZVswXSwgdGltZVsxXSAtIDEsIHRpbWVbMl0sIHRpbWVbM10sIHRpbWVbNF0sIHRpbWVbNV0pKTtcblx0XG5cdCAgICAgICAgdmFyIGluZm9DbGFzc2VzID0gdGhpcy5wcm9wcy5lZGl0YWJsZSA/IFwicmVjaXBlLWluZm8gZWRpdGFibGVcIiA6IFwicmVjaXBlLWluZm9cIjtcblx0XG5cdCAgICAgICAgaWYgKHRoaXMucHJvcHMucmVjaXBlLnB1YmxpYykge1xuXHQgICAgICAgICAgICB2YXIgcHVibGljTm90ZSA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgJ2xhYmVsJyxcblx0ICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncHVibGljLW5vdGUnIH0sXG5cdCAgICAgICAgICAgICAgICAnVGhpcyByZWNpcGUgaXMgcHVibGljIChFdmVyeW9uZSBjYW4gdmlldyknXG5cdCAgICAgICAgICAgICk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgdmFyIHB1YmxpY05vdGUgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICdsYWJlbCcsXG5cdCAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3B1YmxpYy1ub3RlJyB9LFxuXHQgICAgICAgICAgICAgICAgJ1RoaXMgcmVjaXBlIGlzIHByaXZhdGUgKE9ubHkgeW91IGNhbiB2aWV3KSdcblx0ICAgICAgICAgICAgKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIHRpdGxlID0gdGhpcy5wcm9wcy5yZWNpcGUudGl0bGU7XG5cdCAgICAgICAgaWYgKCF0aGlzLnByb3BzLmVkaXRhYmxlICYmICh0aXRsZSA9PSBcIlwiIHx8IHRpdGxlID09IFwiTmV3Li4uXCIpKSB7XG5cdCAgICAgICAgICAgIHRpdGxlID0gXCJQbGVhc2UgZW50ZXIgYSBuZXcgdGl0bGUgLi4uXCI7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciB0aXRsZUNsYXNzZXMgPSBcInRpdGxlXCI7XG5cdCAgICAgICAgaWYgKHRoaXMucHJvcHMudmFsaWRhdGUgJiYgKHRoaXMucHJvcHMucmVjaXBlLnRpdGxlID09IG51bGwgfHwgdGhpcy5wcm9wcy5yZWNpcGUudGl0bGUgPT0gXCJcIikpIHtcblx0ICAgICAgICAgICAgdGl0bGVDbGFzc2VzICs9IFwiIHJlcXVpcmVkXCI7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciB1bmlxdWVJZCA9IFwiaWQtXCIgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblx0XG5cdCAgICAgICAgdmFyIGNvbnRyb2xzID0gXCJcIjtcblx0ICAgICAgICBpZiAodGhpcy5wcm9wcy5zVXNlciAhPSBudWxsICYmIHRoaXMucHJvcHMuc1VzZXIudXNlcklkID09IHRoaXMucHJvcHMucmVjaXBlLmNyZWF0b3IpIHtcblx0ICAgICAgICAgICAgY29udHJvbHMgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICdkaXYnLFxuXHQgICAgICAgICAgICAgICAgbnVsbCxcblx0ICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICd0aS1zYXZlJywgb25DbGljazogdGhpcy5wcm9wcy5zYXZlIH0pLFxuXHQgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ3RpLWNsb3NlJywgb25DbGljazogdGhpcy5wcm9wcy5jYW5jZWwgfSksXG5cdCAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAndGktcGVuY2lsJywgb25DbGljazogdGhpcy5wcm9wcy5lZGl0IH0pXG5cdCAgICAgICAgICAgICk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB2YXIgc2VydmluZ3MgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgJ3NwYW4nLFxuXHQgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3RleHQnIH0sXG5cdCAgICAgICAgICAgIHRoaXMucHJvcHMucmVjaXBlLnNlcnZpbmdzXG5cdCAgICAgICAgKTtcblx0ICAgICAgICBpZiAodGhpcy5wcm9wcy5lZGl0YWJsZSkge1xuXHQgICAgICAgICAgICB2YXIgc2VydmluZ3NDbGFzc2VzID0gXCJzZXJ2aW5nLXZhbHVlXCI7XG5cdCAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLnZhbGlkYXRlICYmICh0aGlzLnByb3BzLnJlY2lwZS5zZXJ2aW5ncyA9PSBudWxsIHx8IHRoaXMucHJvcHMucmVjaXBlLnNlcnZpbmdzID09IFwiXCIgfHwgdGhpcy5wcm9wcy5yZWNpcGUuc2VydmluZ3MgPCAwKSkge1xuXHQgICAgICAgICAgICAgICAgc2VydmluZ3NDbGFzc2VzICs9IFwiIHJlcXVpcmVkXCI7XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIHNlcnZpbmdzID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JywgeyB0eXBlOiAnbnVtYmVyJyxcblx0ICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogc2VydmluZ3NDbGFzc2VzLFxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMucHJvcHMucmVjaXBlLnNlcnZpbmdzLFxuXHQgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHRoaXMudXBkYXRlU2VydmluZ3Ncblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICdoZWFkZXInLFxuXHQgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3JlY2lwZS1oZWFkZXInIH0sXG5cdCAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogaW5mb0NsYXNzZXMgfSxcblx0ICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuXHQgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncmVjaXBlLXRpdGxlJyB9LFxuXHQgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHsgY2xhc3NOYW1lOiB0aXRsZUNsYXNzZXMsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnByb3BzLnJlY2lwZS50aXRsZSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdQbGVhc2UgZW50ZXIgYSBuZXcgdGl0bGUgLi4uJyxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHRoaXMudXBkYXRlVGl0bGVcblx0ICAgICAgICAgICAgICAgICAgICB9KSxcblx0ICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICAgICAgICAgJ3NwYW4nLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogdGl0bGVDbGFzc2VzIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlXG5cdCAgICAgICAgICAgICAgICAgICAgKSxcblx0ICAgICAgICAgICAgICAgICAgICBjb250cm9sc1xuXHQgICAgICAgICAgICAgICAgKSxcblx0ICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuXHQgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAndGltZS1pbmZvJyB9LFxuXHQgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICd0aS10aW1lcicgfSksXG5cdCAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICdzcGFuJyxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwcmVwLXRpbWUnIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2xhYmVsJyxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAnUHJlcCdcblx0ICAgICAgICAgICAgICAgICAgICAgICAgKSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3RpbWUyLmRlZmF1bHQsIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnByb3BzLnJlY2lwZS5wcmVwVGltZSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1c3RvbUNsYXNzOiAncHJlcC10aW1lJyxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRhYmxlOiB0aGlzLnByb3BzLmVkaXRhYmxlLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlOiB0aGlzLnVwZGF0ZVByZXBUaW1lXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH0pXG5cdCAgICAgICAgICAgICAgICAgICAgKSxcblx0ICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICAgICAgICAgJ3NwYW4nLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2Nvb2stdGltZScgfSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbGFiZWwnLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb29rJ1xuXHQgICAgICAgICAgICAgICAgICAgICAgICApLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfdGltZTIuZGVmYXVsdCwge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMucHJvcHMucmVjaXBlLmNvb2tUaW1lLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tQ2xhc3M6ICdjb29rLXRpbWUnLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRpdGFibGU6IHRoaXMucHJvcHMuZWRpdGFibGUsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGU6IHRoaXMudXBkYXRlQ29va1RpbWVcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfSlcblx0ICAgICAgICAgICAgICAgICAgICApLFxuXHQgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICd0aS1waWUtY2hhcnQnIH0pLFxuXHQgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAnc3BhbicsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnc2VydmluZ3MnIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpbmdzLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICdsYWJlbCcsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3NlcnZpbmdzJ1xuXHQgICAgICAgICAgICAgICAgICAgICAgICApXG5cdCAgICAgICAgICAgICAgICAgICAgKVxuXHQgICAgICAgICAgICAgICAgKSxcblx0ICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuXHQgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnYWRkaXRpb24taW5mbycgfSxcblx0ICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICAgICAgICAgJ3NwYW4nLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2F1dGhvcicgfSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5yZWNpcGUuZmlyc3ROYW1lICsgXCIgXCIgKyB0aGlzLnByb3BzLnJlY2lwZS5sYXN0TmFtZVxuXHQgICAgICAgICAgICAgICAgICAgICksXG5cdCAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICdzcGFuJyxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdjcmVhdGlvbi1kYXRlJyB9LFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAnICgnLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVkLnRvRGF0ZVN0cmluZygpLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAnKSdcblx0ICAgICAgICAgICAgICAgICAgICApXG5cdCAgICAgICAgICAgICAgICApLFxuXHQgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwdWJsaWMtb3B0aW9uJyB9LFxuXHQgICAgICAgICAgICAgICAgICAgIHB1YmxpY05vdGUsXG5cdCAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICdsYWJlbCcsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAndG9nZ2xlLWxhYmVsJyB9LFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAnTWFrZSByZWNpcGUgcHVibGljJ1xuXHQgICAgICAgICAgICAgICAgICAgICksXG5cdCAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICdsYWJlbCcsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHsgaWQ6IHVuaXF1ZUlkLCBjbGFzc05hbWU6ICd0b2dnbGUtc3dpdGNoJyB9LFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7IGh0bWxGb3I6IHVuaXF1ZUlkLCB0eXBlOiAnY2hlY2tib3gnLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZDogdGhpcy5wcm9wcy5yZWNpcGUucHVibGljLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHRoaXMuaGFuZGxlUHVibGljQ2hhbmdlXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnc2xpZGVyJyB9KVxuXHQgICAgICAgICAgICAgICAgICAgIClcblx0ICAgICAgICAgICAgICAgIClcblx0ICAgICAgICAgICAgKSxcblx0ICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2Nyb3BwZXIyLmRlZmF1bHQsIHtcblx0ICAgICAgICAgICAgICAgIGltYWdlOiB0aGlzLnByb3BzLnJlY2lwZS5waWN0dXJlICsgXCI/XCIgKyB0aGlzLnByb3BzLnJlY2lwZS5kYXRlTW9kaWZpZWQsXG5cdCAgICAgICAgICAgICAgICBlZGl0YWJsZTogdGhpcy5wcm9wcy5lZGl0YWJsZSxcblx0ICAgICAgICAgICAgICAgIG9uQWZ0ZXJDcm9wOiB0aGlzLmFmdGVySW1hZ2VDcm9wXG5cdCAgICAgICAgICAgIH0pXG5cdCAgICAgICAgKTtcblx0ICAgIH1cblx0fSk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBSZWNpcGVIZWFkZXI7XG5cbi8qKiovIH0pLFxuLyogMTc2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0dmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cdFxuXHR2YXIgX3JlYWN0RG9tID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTgpO1xuXHRcblx0dmFyIF9yZWFjdERvbTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdERvbSk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0X193ZWJwYWNrX3JlcXVpcmVfXygxNzcpO1xuXHRcblx0dmFyIENyb3BwZXIgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlQ2xhc3Moe1xuXHQgICAgZGlzcGxheU5hbWU6ICdDcm9wcGVyJyxcblx0XG5cdCAgICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZSgpIHtcblx0ICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICBkcmFnZ2luZzogZmFsc2UsXG5cdCAgICAgICAgICAgIHpvb21IZWxkOiBmYWxzZSxcblx0ICAgICAgICAgICAgem9vbVRpbWVyOiBudWxsLFxuXHQgICAgICAgICAgICB6b29taW5nSW50ZXJ2YWw6IG51bGwsXG5cdCAgICAgICAgICAgIHpvb21EaXJlY3Rpb246IG51bGwsXG5cdCAgICAgICAgICAgIGltYWdlOiB7fSxcblx0ICAgICAgICAgICAgbW91c2U6IHtcblx0ICAgICAgICAgICAgICAgIHg6IG51bGwsXG5cdCAgICAgICAgICAgICAgICB5OiBudWxsXG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHByZXZpZXc6IG51bGwsXG5cdCAgICAgICAgICAgIGN1cnJlbnRVcmw6IG51bGwsXG5cdCAgICAgICAgICAgIHpvb206IDFcblx0ICAgICAgICB9O1xuXHQgICAgfSxcblx0ICAgIGNvbXBvbmVudERpZFVwZGF0ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKCkge1xuXHQgICAgICAgIHZhciBjb250ZXh0ID0gX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKHRoaXMpLnF1ZXJ5U2VsZWN0b3IoXCIuY2FudmFzXCIpLmdldENvbnRleHQoXCIyZFwiKTtcblx0ICAgICAgICBjb250ZXh0LmNsZWFyUmVjdCgwLCAwLCB0aGlzLnByb3BzLndpZHRoLCB0aGlzLnByb3BzLmhlaWdodCk7XG5cdCAgICAgICAgdGhpcy5hZGRJbWFnZVRvQ2FudmFzKGNvbnRleHQsIHRoaXMuc3RhdGUuaW1hZ2UpO1xuXHQgICAgfSxcblx0ICAgIGlzRGF0YVVSTDogZnVuY3Rpb24gaXNEYXRhVVJMKHMpIHtcblx0ICAgICAgICByZXR1cm4gISFzLm1hdGNoKC9eXFxzKmRhdGE6KFthLXpdK1xcL1thLXpdKyg7W2EtelxcLV0rXFw9W2EtelxcLV0rKT8pPyg7YmFzZTY0KT8sW2EtejAtOVxcIVxcJFxcJlxcJ1xcLFxcKFxcKVxcKlxcK1xcLFxcO1xcPVxcLVxcLlxcX1xcflxcOlxcQFxcL1xcP1xcJVxcc10qXFxzKiQvaSk7XG5cdCAgICB9LFxuXHQgICAgZml0SW1hZ2VUb0NhbnZhczogZnVuY3Rpb24gZml0SW1hZ2VUb0NhbnZhcyh3aWR0aCwgaGVpZ2h0KSB7XG5cdCAgICAgICAgdmFyIHNjYWxlZEhlaWdodCwgc2NhbGVkV2lkdGg7XG5cdFxuXHQgICAgICAgIHZhciBjYW52YXNBc3BlY3RSYXRpbyA9IHRoaXMucHJvcHMuaGVpZ2h0IC8gdGhpcy5wcm9wcy53aWR0aDtcblx0ICAgICAgICB2YXIgaW1hZ2VBc3BlY3RSYXRpbyA9IGhlaWdodCAvIHdpZHRoO1xuXHRcblx0ICAgICAgICBpZiAoY2FudmFzQXNwZWN0UmF0aW8gPiBpbWFnZUFzcGVjdFJhdGlvKSB7XG5cdCAgICAgICAgICAgIHNjYWxlZEhlaWdodCA9IHRoaXMucHJvcHMuaGVpZ2h0O1xuXHQgICAgICAgICAgICB2YXIgc2NhbGVSYXRpbyA9IHNjYWxlZEhlaWdodCAvIGhlaWdodDtcblx0ICAgICAgICAgICAgc2NhbGVkV2lkdGggPSB3aWR0aCAqIHNjYWxlUmF0aW87XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgc2NhbGVkV2lkdGggPSB0aGlzLnByb3BzLndpZHRoO1xuXHQgICAgICAgICAgICB2YXIgX3NjYWxlUmF0aW8gPSBzY2FsZWRXaWR0aCAvIHdpZHRoO1xuXHQgICAgICAgICAgICBzY2FsZWRIZWlnaHQgPSBoZWlnaHQgKiBfc2NhbGVSYXRpbztcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiB7IHdpZHRoOiBzY2FsZWRXaWR0aCwgaGVpZ2h0OiBzY2FsZWRIZWlnaHQgfTtcblx0ICAgIH0sXG5cdCAgICBwcmVwYXJlSW1hZ2U6IGZ1bmN0aW9uIHByZXBhcmVJbWFnZShpbWFnZVVyaSwgY2FsbGJhY2spIHtcblx0ICAgICAgICB2YXIgbWUgPSB0aGlzO1xuXHQgICAgICAgIHZhciBpbWcgPSBuZXcgSW1hZ2UoKTtcblx0ICAgICAgICBpZiAoIXRoaXMuaXNEYXRhVVJMKGltYWdlVXJpKSkgaW1nLmNyb3NzT3JpZ2luID0gJ2Fub255bW91cyc7XG5cdCAgICAgICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgdmFyIHNjYWxlZEltYWdlID0gbWUuZml0SW1hZ2VUb0NhbnZhcyhpbWcud2lkdGgsIGltZy5oZWlnaHQpO1xuXHQgICAgICAgICAgICBzY2FsZWRJbWFnZS5yZXNvdXJjZSA9IGltZztcblx0ICAgICAgICAgICAgc2NhbGVkSW1hZ2UueCA9IDA7XG5cdCAgICAgICAgICAgIHNjYWxlZEltYWdlLnkgPSAwO1xuXHQgICAgICAgICAgICBtZS5zZXRTdGF0ZSh7IGRyYWdnaW5nOiBmYWxzZSwgaW1hZ2U6IHNjYWxlZEltYWdlLCBwcmV2aWV3OiBtZS50b0RhdGFVUkwoKSB9KTtcblx0ICAgICAgICAgICAgY2FsbGJhY2soKTtcblx0ICAgICAgICB9O1xuXHQgICAgICAgIGltZy5zcmMgPSBpbWFnZVVyaTtcblx0ICAgIH0sXG5cdCAgICBwcmV2ZW50U2VsZWN0aW9uOiBmdW5jdGlvbiBwcmV2ZW50U2VsZWN0aW9uKGUpIHtcblx0ICAgICAgICBpZiAodGhpcy5zdGF0ZS5kcmFnZ2luZykge1xuXHQgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cdCAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgICB9XG5cdCAgICB9LFxuXHQgICAgYm91bmRlZENvb3JkczogZnVuY3Rpb24gYm91bmRlZENvb3Jkcyh4LCB5LCBkeCwgZHkpIHtcblx0ICAgICAgICB2YXIgbmV3WCA9IHggLSBkeDtcblx0ICAgICAgICB2YXIgbmV3WSA9IHkgLSBkeTtcblx0XG5cdCAgICAgICAgdmFyIHNjYWxlZFdpZHRoID0gdGhpcy5zdGF0ZS5pbWFnZS53aWR0aCAqIHRoaXMuc3RhdGUuem9vbTtcblx0ICAgICAgICB2YXIgZHcgPSAoc2NhbGVkV2lkdGggLSB0aGlzLnN0YXRlLmltYWdlLndpZHRoKSAvIDI7XG5cdCAgICAgICAgdmFyIGltYWdlTGVmdEVkZ2UgPSB0aGlzLnN0YXRlLmltYWdlLnggLSBkdztcblx0ICAgICAgICB2YXIgaW1hZ2VSaWdodEVkZ2UgPSBpbWFnZUxlZnRFZGdlICsgc2NhbGVkV2lkdGg7XG5cdFxuXHQgICAgICAgIHZhciByaWdodEVkZ2UgPSB0aGlzLnByb3BzLndpZHRoO1xuXHQgICAgICAgIHZhciBsZWZ0RWRnZSA9IDA7XG5cdFxuXHQgICAgICAgIGlmIChuZXdYIC0gZHcgPiAwKSB7XG5cdCAgICAgICAgICAgIHggPSBkdztcblx0ICAgICAgICB9IGVsc2UgaWYgKG5ld1ggPCAtc2NhbGVkV2lkdGggKyByaWdodEVkZ2UpIHtcblx0ICAgICAgICAgICAgeCA9IHJpZ2h0RWRnZSAtIHNjYWxlZFdpZHRoO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHggPSBuZXdYO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdmFyIHNjYWxlZEhlaWdodCA9IHRoaXMuc3RhdGUuaW1hZ2UuaGVpZ2h0ICogdGhpcy5zdGF0ZS56b29tO1xuXHQgICAgICAgIHZhciBkaCA9IChzY2FsZWRIZWlnaHQgLSB0aGlzLnN0YXRlLmltYWdlLmhlaWdodCkgLyAyO1xuXHQgICAgICAgIHZhciBpbWFnZVRvcEVkZ2UgPSB0aGlzLnN0YXRlLmltYWdlLnkgLSBkaDtcblx0ICAgICAgICB2YXIgaW1hZ2VCb3R0b21FZGdlID0gaW1hZ2VUb3BFZGdlICsgc2NhbGVkSGVpZ2h0O1xuXHRcblx0ICAgICAgICB2YXIgYm90dG9tRWRnZSA9IHRoaXMucHJvcHMuaGVpZ2h0O1xuXHQgICAgICAgIHZhciB0b3BFZGdlID0gMDtcblx0ICAgICAgICBpZiAobmV3WSAtIGRoID4gMCkge1xuXHQgICAgICAgICAgICB5ID0gZGg7XG5cdCAgICAgICAgfSBlbHNlIGlmIChuZXdZIDwgLXNjYWxlZEhlaWdodCArIGJvdHRvbUVkZ2UpIHtcblx0ICAgICAgICAgICAgeSA9IGJvdHRvbUVkZ2UgLSBzY2FsZWRIZWlnaHQ7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgeSA9IG5ld1k7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm4geyB4OiB4LCB5OiB5IH07XG5cdCAgICB9LFxuXHQgICAgYWRkSW1hZ2VUb0NhbnZhczogZnVuY3Rpb24gYWRkSW1hZ2VUb0NhbnZhcyhjb250ZXh0LCBpbWFnZSkge1xuXHQgICAgICAgIGlmICghaW1hZ2UucmVzb3VyY2UpIHJldHVybjtcblx0ICAgICAgICBjb250ZXh0LnNhdmUoKTtcblx0ICAgICAgICBjb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IFwiZGVzdGluYXRpb24tb3ZlclwiO1xuXHQgICAgICAgIHZhciBzY2FsZWRXaWR0aCA9IHRoaXMuc3RhdGUuaW1hZ2Uud2lkdGggKiB0aGlzLnN0YXRlLnpvb207XG5cdCAgICAgICAgdmFyIHNjYWxlZEhlaWdodCA9IHRoaXMuc3RhdGUuaW1hZ2UuaGVpZ2h0ICogdGhpcy5zdGF0ZS56b29tO1xuXHRcblx0ICAgICAgICB2YXIgeCA9IGltYWdlLnggLSAoc2NhbGVkV2lkdGggLSB0aGlzLnN0YXRlLmltYWdlLndpZHRoKSAvIDI7XG5cdCAgICAgICAgdmFyIHkgPSBpbWFnZS55IC0gKHNjYWxlZEhlaWdodCAtIHRoaXMuc3RhdGUuaW1hZ2UuaGVpZ2h0KSAvIDI7XG5cdFxuXHQgICAgICAgIC8vIG5lZWQgdG8gbWFrZSBzdXJlIHdlIGFyZW4ndCBnb2luZyBvdXQgb2YgYm91bmRzIGhlcmUuLi5cblx0ICAgICAgICB4ID0gTWF0aC5taW4oeCwgMCk7XG5cdCAgICAgICAgeSA9IE1hdGgubWluKHksIDApO1xuXHQgICAgICAgIHkgPSBzY2FsZWRIZWlnaHQgKyB5ID49IHRoaXMucHJvcHMuaGVpZ2h0ID8geSA6IHkgKyAodGhpcy5wcm9wcy5oZWlnaHQgLSAoc2NhbGVkSGVpZ2h0ICsgeSkpO1xuXHQgICAgICAgIHggPSBzY2FsZWRXaWR0aCArIHggPj0gdGhpcy5wcm9wcy53aWR0aCA/IHggOiB4ICsgKHRoaXMucHJvcHMud2lkdGggLSAoc2NhbGVkV2lkdGggKyB4KSk7XG5cdFxuXHQgICAgICAgIGNvbnRleHQuZHJhd0ltYWdlKGltYWdlLnJlc291cmNlLCB4LCB5LCBpbWFnZS53aWR0aCAqIHRoaXMuc3RhdGUuem9vbSwgaW1hZ2UuaGVpZ2h0ICogdGhpcy5zdGF0ZS56b29tKTtcblx0ICAgICAgICBjb250ZXh0LnJlc3RvcmUoKTtcblx0ICAgIH0sXG5cdCAgICB0b0RhdGFVUkw6IGZ1bmN0aW9uIHRvRGF0YVVSTCgpIHtcblx0ICAgICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcblx0ICAgICAgICB2YXIgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG5cdFxuXHQgICAgICAgIGNhbnZhcy53aWR0aCA9IHRoaXMucHJvcHMud2lkdGg7XG5cdCAgICAgICAgY2FudmFzLmhlaWdodCA9IHRoaXMucHJvcHMuaGVpZ2h0O1xuXHRcblx0ICAgICAgICB0aGlzLmFkZEltYWdlVG9DYW52YXMoY29udGV4dCwge1xuXHQgICAgICAgICAgICByZXNvdXJjZTogdGhpcy5zdGF0ZS5pbWFnZS5yZXNvdXJjZSxcblx0ICAgICAgICAgICAgeDogdGhpcy5zdGF0ZS5pbWFnZS54LFxuXHQgICAgICAgICAgICB5OiB0aGlzLnN0YXRlLmltYWdlLnksXG5cdCAgICAgICAgICAgIGhlaWdodDogdGhpcy5zdGF0ZS5pbWFnZS5oZWlnaHQsXG5cdCAgICAgICAgICAgIHdpZHRoOiB0aGlzLnN0YXRlLmltYWdlLndpZHRoXG5cdCAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgIHJldHVybiBjYW52YXMudG9EYXRhVVJMKCk7XG5cdCAgICB9LFxuXHQgICAgaGFuZGxlQ2xvc2U6IGZ1bmN0aW9uIGhhbmRsZUNsb3NlKGUpIHtcblx0ICAgICAgICB2YXIgY2FudmFzID0gX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKHRoaXMpLnF1ZXJ5U2VsZWN0b3IoXCIuY2FudmFzXCIpO1xuXHQgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMuaGFuZGxlTW91c2VNb3ZlKTtcblx0ICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgdGhpcy5oYW5kbGVNb3VzZVVwKTtcblx0ICAgICAgICBjYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLmhhbmRsZU1vdXNlRG93bik7XG5cdFxuXHQgICAgICAgIF9yZWFjdERvbTIuZGVmYXVsdC5maW5kRE9NTm9kZSh0aGlzKS5jbGFzc0xpc3QucmVtb3ZlKFwic2hvd1wiKTtcblx0ICAgIH0sXG5cdCAgICBoYW5kbGVNb3VzZURvd246IGZ1bmN0aW9uIGhhbmRsZU1vdXNlRG93bihlKSB7XG5cdCAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG5cdCAgICAgICAgICAgIGltYWdlOiB0aGlzLnN0YXRlLmltYWdlLFxuXHQgICAgICAgICAgICBkcmFnZ2luZzogdHJ1ZSxcblx0ICAgICAgICAgICAgbW91c2U6IHtcblx0ICAgICAgICAgICAgICAgIHg6IG51bGwsXG5cdCAgICAgICAgICAgICAgICB5OiBudWxsXG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblx0ICAgIH0sXG5cdCAgICBoYW5kbGVNb3VzZVVwOiBmdW5jdGlvbiBoYW5kbGVNb3VzZVVwKGUpIHtcblx0ICAgICAgICB0aGlzLnNldFN0YXRlKHsgZHJhZ2dpbmc6IGZhbHNlLCBwcmV2aWV3OiB0aGlzLnRvRGF0YVVSTCgpIH0pO1xuXHQgICAgfSxcblx0ICAgIGhhbmRsZU1vdXNlTW92ZTogZnVuY3Rpb24gaGFuZGxlTW91c2VNb3ZlKGUpIHtcblx0ICAgICAgICBpZiAoIXRoaXMuc3RhdGUuZHJhZ2dpbmcpIHJldHVybjtcblx0XG5cdCAgICAgICAgdmFyIG1vdXNlWCA9IGUuY2xpZW50WDtcblx0ICAgICAgICB2YXIgbW91c2VZID0gZS5jbGllbnRZO1xuXHQgICAgICAgIHZhciBpbWFnZVggPSB0aGlzLnN0YXRlLmltYWdlLng7XG5cdCAgICAgICAgdmFyIGltYWdlWSA9IHRoaXMuc3RhdGUuaW1hZ2UueTtcblx0XG5cdCAgICAgICAgdmFyIG5ld0ltYWdlID0gdGhpcy5zdGF0ZS5pbWFnZTtcblx0XG5cdCAgICAgICAgaWYgKHRoaXMuc3RhdGUubW91c2UueCAmJiB0aGlzLnN0YXRlLm1vdXNlLnkpIHtcblx0ICAgICAgICAgICAgdmFyIGR4ID0gdGhpcy5zdGF0ZS5tb3VzZS54IC0gbW91c2VYO1xuXHQgICAgICAgICAgICB2YXIgZHkgPSB0aGlzLnN0YXRlLm1vdXNlLnkgLSBtb3VzZVk7XG5cdFxuXHQgICAgICAgICAgICB2YXIgYm91bmRlZCA9IHRoaXMuYm91bmRlZENvb3JkcyhpbWFnZVgsIGltYWdlWSwgZHgsIGR5KTtcblx0XG5cdCAgICAgICAgICAgIG5ld0ltYWdlLnggPSBib3VuZGVkLng7XG5cdCAgICAgICAgICAgIG5ld0ltYWdlLnkgPSBib3VuZGVkLnk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB0aGlzLnNldFN0YXRlKHtcblx0ICAgICAgICAgICAgaW1hZ2U6IHRoaXMuc3RhdGUuaW1hZ2UsXG5cdCAgICAgICAgICAgIG1vdXNlOiB7XG5cdCAgICAgICAgICAgICAgICB4OiBtb3VzZVgsXG5cdCAgICAgICAgICAgICAgICB5OiBtb3VzZVlcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHQgICAgfSxcblx0ICAgIGhhbmRsZVVwbG9hZDogZnVuY3Rpb24gaGFuZGxlVXBsb2FkKGUpIHtcblx0ICAgICAgICB2YXIgbWUgPSB0aGlzO1xuXHRcblx0ICAgICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcblx0ICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ltZycsIGUudGFyZ2V0LmZpbGVzWzBdKTtcblx0ICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2FjdGlvbicsICdVUExPQURfSU1BR0UnKTtcblx0XG5cdCAgICAgICAgZS50YXJnZXQudmFsdWUgPSBcIlwiO1xuXHRcblx0ICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cdCAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgLy8gVE9ETzogTWF5YmUgaGFuZGxlIG90aGVyIHN0YXRlc1xuXHQgICAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT0gNCkge1xuXHQgICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gSlNPTi5wYXJzZSh0aGlzLnJlc3BvbnNlVGV4dCk7XG5cdCAgICAgICAgICAgICAgICB2YXIgbG9hZGluZyA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIF9yZWFjdERvbTIuZGVmYXVsdC5maW5kRE9NTm9kZShtZSkuY2xhc3NMaXN0LmFkZChcImxvYWRpbmdcIik7XG5cdCAgICAgICAgICAgICAgICB9LCAxMDApO1xuXHRcblx0ICAgICAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IGZ1bmN0aW9uIGNhbGxiYWNrKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBjYW52YXMgPSBfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUobWUpLnF1ZXJ5U2VsZWN0b3IoXCIuY2FudmFzXCIpO1xuXHQgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIG1lLmhhbmRsZU1vdXNlTW92ZSwgZmFsc2UpO1xuXHQgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBtZS5oYW5kbGVNb3VzZVVwLCBmYWxzZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgbWUuaGFuZGxlTW91c2VEb3duLCBmYWxzZSk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgIF9yZWFjdERvbTIuZGVmYXVsdC5maW5kRE9NTm9kZShtZSkuY2xhc3NMaXN0LmFkZChcInNob3dcIik7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChsb2FkaW5nKTtcblx0ICAgICAgICAgICAgICAgICAgICBfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUobWUpLmNsYXNzTGlzdC5yZW1vdmUoXCJsb2FkaW5nXCIpO1xuXHQgICAgICAgICAgICAgICAgfTtcblx0XG5cdCAgICAgICAgICAgICAgICBtZS5wcmVwYXJlSW1hZ2UocmVzcG9uc2UudXJsLCBjYWxsYmFjayk7XG5cdCAgICAgICAgICAgICAgICBtZS5zZXRTdGF0ZSh7IGN1cnJlbnRVcmw6IHJlc3BvbnNlLnVybCwgem9vbTogMSB9KTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH07XG5cdFxuXHQgICAgICAgIHhoci5vcGVuKCdQT1NUJywgJ3Byb2Nlc3NBY3Rpb24ucGhwJywgdHJ1ZSk7XG5cdFxuXHQgICAgICAgIHhoci5zZW5kKGZvcm1EYXRhKTtcblx0ICAgIH0sXG5cdCAgICBoYW5kbGVDcm9wOiBmdW5jdGlvbiBoYW5kbGVDcm9wKCkge1xuXHQgICAgICAgIHZhciBkYXRhID0gdGhpcy50b0RhdGFVUkwoKTtcblx0ICAgICAgICB2YXIgbWUgPSB0aGlzO1xuXHRcblx0ICAgICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcblx0ICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ltYWdlJywgZGF0YSk7XG5cdCAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdhY3Rpb24nLCAnQ1JPUF9JTUFHRScpO1xuXHQgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgndXJsJywgdGhpcy5zdGF0ZS5jdXJyZW50VXJsKTtcblx0XG5cdCAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXHRcblx0ICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAvLyBUT0RPOiBNYXliZSBoYW5kbGUgb3RoZXIgc3RhdGVzXG5cdCAgICAgICAgICAgIC8vIFN1Y2Nlc3MgaXMgNFxuXHQgICAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT0gNCkge1xuXHQgICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gSlNPTi5wYXJzZSh0aGlzLnJlc3BvbnNlVGV4dCk7XG5cdCAgICAgICAgICAgICAgICBtZS5wcm9wcy5vbkFmdGVyQ3JvcChyZXNwb25zZS51cmwpO1xuXHQgICAgICAgICAgICAgICAgbWUuaGFuZGxlQ2xvc2UoKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH07XG5cdFxuXHQgICAgICAgIHhoci5vcGVuKCdQT1NUJywgJ3Byb2Nlc3NBY3Rpb24ucGhwJywgdHJ1ZSk7XG5cdCAgICAgICAgeGhyLnNlbmQoZm9ybURhdGEpO1xuXHQgICAgfSxcblx0ICAgIGhhbmRsZVpvb21Nb3VzZURvd246IGZ1bmN0aW9uIGhhbmRsZVpvb21Nb3VzZURvd24oZSkge1xuXHQgICAgICAgIHZhciBtZSA9IHRoaXM7XG5cdCAgICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInpvb20taW5cIikpIHtcblx0ICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHpvb21EaXJlY3Rpb246IFwiaW5cIiB9KTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgem9vbURpcmVjdGlvbjogXCJvdXRcIiB9KTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHZhciB0aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICB2YXIgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChtZS5oYW5kbGVab29tLCAyNSk7XG5cdFxuXHQgICAgICAgICAgICBtZS5zZXRTdGF0ZSh7IHpvb21pbmdJbnRlcnZhbDogaW50ZXJ2YWwgfSk7XG5cdCAgICAgICAgfSwgNTAwKTtcblx0XG5cdCAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHpvb21UaW1lcjogdGltZXIsIHpvb21IZWxkOiB0cnVlIH0pO1xuXHQgICAgfSxcblx0ICAgIGhhbmRsZVpvb21Nb3VzZVVwOiBmdW5jdGlvbiBoYW5kbGVab29tTW91c2VVcChlKSB7XG5cdCAgICAgICAgaWYgKHRoaXMuc3RhdGUuem9vbVRpbWVyKSB7XG5cdCAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnN0YXRlLnpvb21UaW1lcik7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAodGhpcy5zdGF0ZS56b29taW5nSW50ZXJ2YWwpIHtcblx0ICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnN0YXRlLnpvb21pbmdJbnRlcnZhbCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuc2V0U3RhdGUoeyB6b29tVGltZXI6IG51bGwsIHpvb21pbmdJbnRlcnZhbDogbnVsbCwgem9vbUhlbGQ6IGZhbHNlLCB6b29tRGlyZWN0aW9uOiBudWxsIH0pO1xuXHQgICAgfSxcblx0ICAgIGhhbmRsZVpvb206IGZ1bmN0aW9uIGhhbmRsZVpvb20oZSkge1xuXHQgICAgICAgIGlmIChlICYmIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInpvb20taW5cIikgfHwgdGhpcy5zdGF0ZS56b29tRGlyZWN0aW9uID09IFwiaW5cIikge1xuXHQgICAgICAgICAgICB2YXIgbmV3Wm9vbSA9IHRoaXMuc3RhdGUuem9vbSArIDAuMDE7XG5cdFxuXHQgICAgICAgICAgICBpZiAobmV3Wm9vbSA8PSAzKSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgem9vbTogbmV3Wm9vbSB9KTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHZhciBuZXdab29tID0gdGhpcy5zdGF0ZS56b29tIC0gMC4wMTtcblx0XG5cdCAgICAgICAgICAgIGlmIChuZXdab29tID49IDEpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyB6b29tOiBuZXdab29tIH0pO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfSxcblx0ICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuXHQgICAgICAgIHZhciBmaWxlSWQgPSBcImZpbGUtXCIgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblx0ICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICdkaXYnLFxuXHQgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2Nyb3BwZXInIH0sXG5cdCAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2Rpc3BsYXknIH0sXG5cdCAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmVkaXRhYmxlICYmIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuXHQgICAgICAgICAgICAgICAgICAgIG51bGwsXG5cdCAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJywgeyBodG1sRm9yOiBmaWxlSWQsIGNsYXNzTmFtZTogJ3RpLXNldHRpbmdzJyB9KSxcblx0ICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7IGlkOiBmaWxlSWQsIHR5cGU6ICdmaWxlJywgYWNjZXB0OiAnaW1hZ2UvKicsIG9uQ2hhbmdlOiB0aGlzLmhhbmRsZVVwbG9hZCB9KVxuXHQgICAgICAgICAgICAgICAgKSxcblx0ICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdpbWcnLCB7IGNsYXNzTmFtZTogJ2Rpc3BsYXknLCBzcmM6IHRoaXMucHJvcHMuaW1hZ2UgfSlcblx0ICAgICAgICAgICAgKSxcblx0ICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAnZGl2Jyxcblx0ICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY29udGFpbmVyJyB9LFxuXHQgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnbWFzaycgfSksXG5cdCAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICAgICAnZGl2Jyxcblx0ICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NvbnRlbnQnIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3Rvb2xiYXInIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdhJywgeyBjbGFzc05hbWU6ICd0aS1taW51cyB6b29tLW91dCcsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmhhbmRsZVpvb20sXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbk1vdXNlRG93bjogdGhpcy5oYW5kbGVab29tTW91c2VEb3duLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Nb3VzZVVwOiB0aGlzLmhhbmRsZVpvb21Nb3VzZVVwIH0pLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnYScsIHsgY2xhc3NOYW1lOiAndGktcGx1cyB6b29tLWluJyxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuaGFuZGxlWm9vbSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uTW91c2VEb3duOiB0aGlzLmhhbmRsZVpvb21Nb3VzZURvd24sXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbk1vdXNlVXA6IHRoaXMuaGFuZGxlWm9vbU1vdXNlVXAgfSksXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdhJywgeyBjbGFzc05hbWU6ICd0aS1jaGVjaycsIG9uQ2xpY2s6IHRoaXMuaGFuZGxlQ3JvcCB9KSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2EnLCB7IGNsYXNzTmFtZTogJ3RpLWNsb3NlJywgb25DbGljazogdGhpcy5oYW5kbGVDbG9zZSB9KVxuXHQgICAgICAgICAgICAgICAgICAgICksXG5cdCAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycsIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnY2FudmFzJyxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHRoaXMucHJvcHMud2lkdGgsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogdGhpcy5wcm9wcy5oZWlnaHQgfSlcblx0ICAgICAgICAgICAgICAgIClcblx0ICAgICAgICAgICAgKVxuXHQgICAgICAgICk7XG5cdCAgICB9XG5cdH0pO1xuXHRcblx0Q3JvcHBlci5wcm9wVHlwZXMgPSB7XG5cdCAgICBpbWFnZTogX3JlYWN0Mi5kZWZhdWx0LlByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcblx0ICAgIHdpZHRoOiBfcmVhY3QyLmRlZmF1bHQuUHJvcFR5cGVzLm51bWJlcixcblx0ICAgIGhlaWdodDogX3JlYWN0Mi5kZWZhdWx0LlByb3BUeXBlcy5udW1iZXIsXG5cdCAgICB6b29tOiBfcmVhY3QyLmRlZmF1bHQuUHJvcFR5cGVzLm51bWJlcixcblx0ICAgIGVkaXRhYmxlOiBfcmVhY3QyLmRlZmF1bHQuUHJvcFR5cGVzLmJvb2wsXG5cdCAgICBvbkFmdGVyQ3JvcDogX3JlYWN0Mi5kZWZhdWx0LlByb3BUeXBlcy5mdW5jXG5cdH07XG5cdFxuXHRDcm9wcGVyLmRlZmF1bHRQcm9wcyA9IHtcblx0ICAgIHdpZHRoOiA0MDAsXG5cdCAgICBoZWlnaHQ6IDQwMCxcblx0ICAgIHpvb206IDEsXG5cdCAgICBlZGl0YWJsZTogdHJ1ZSxcblx0ICAgIG9uQWZ0ZXJDcm9wOiBmdW5jdGlvbiBvbkFmdGVyQ3JvcCh1cmwpIHt9XG5cdH07XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBDcm9wcGVyO1xuXG4vKioqLyB9KSxcbi8qIDE3NyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cdFxuXHQvLyBsb2FkIHRoZSBzdHlsZXNcblx0dmFyIGNvbnRlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3OCk7XG5cdGlmICh0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblx0Ly8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxuXHR2YXIgdXBkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjgpKGNvbnRlbnQsIHt9KTtcblx0aWYgKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuXHQvLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5cdGlmIChmYWxzZSkge1xuXHRcdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0aWYgKCFjb250ZW50LmxvY2Fscykge1xuXHRcdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuL2Nyb3BwZXIuc2Nzc1wiLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vY3JvcHBlci5zY3NzXCIpO1xuXHRcdFx0XHRpZiAodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uICgpIHtcblx0XHRcdHVwZGF0ZSgpO1xuXHRcdH0pO1xuXHR9XG5cbi8qKiovIH0pLFxuLyogMTc4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0ZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjcpKCk7XG5cdC8vIGltcG9ydHNcblx0XG5cdFxuXHQvLyBtb2R1bGVcblx0ZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmNyb3BwZXIgLmRpc3BsYXl7cG9zaXRpb246cmVsYXRpdmV9LmNyb3BwZXIgLmRpc3BsYXkgLnRpLXNldHRpbmdze3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO3JpZ2h0OjA7cGFkZGluZzo1cHg7bWFyZ2luOjEwcHg7Zm9udC1zaXplOjJlbTtmb250LXdlaWdodDo3MDA7Y29sb3I6aHNsYSgwLDAlLDEwMCUsLjc1KTtiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMCwwLDAsLjc1KTt6LWluZGV4OjF9LmNyb3BwZXIgLmRpc3BsYXkgLnRpLXNldHRpbmdzOmhvdmVye2NvbG9yOiNmZmZ9LmNyb3BwZXIgLmNvbnRhaW5lciwuY3JvcHBlciAuZGlzcGxheSBpbnB1dFt0eXBlPWZpbGVde2Rpc3BsYXk6bm9uZX0uY3JvcHBlciAuY29udGFpbmVyIC5tYXNre3Bvc2l0aW9uOmZpeGVkO3RvcDowO2xlZnQ6MDtib3R0b206MDtyaWdodDowO2JhY2tncm91bmQtY29sb3I6IzAwMDtvcGFjaXR5Oi44NTt6LWluZGV4OjUwMDB9LmNyb3BwZXIgLmNvbnRhaW5lciAuY2FudmFze2N1cnNvcjptb3ZlfS5jcm9wcGVyIC5jb250YWluZXIgLmNvbnRlbnR7cG9zaXRpb246YWJzb2x1dGU7dG9wOjUwJTtsZWZ0OjUwJTttYXJnaW4tdG9wOi0yMDBweDttYXJnaW4tbGVmdDotMjAwcHg7d2lkdGg6NDAwcHg7aGVpZ2h0OjQwMHB4O3otaW5kZXg6NTAwMX0uY3JvcHBlciAuY29udGFpbmVyIC5jb250ZW50IC50b29sYmFye3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO3JpZ2h0OjA7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDAsMCwwLC43NSk7bWFyZ2luOjEwcHg7dGV4dC1hbGlnbjpjZW50ZXJ9LmNyb3BwZXIgLmNvbnRhaW5lciAuY29udGVudCAudG9vbGJhciBhe2NvbG9yOiNmMWYxZjE7b3BhY2l0eTouNzU7ZGlzcGxheTppbmxpbmUtYmxvY2s7cGFkZGluZzo1cHg7Zm9udC1zaXplOjJlbTtmb250LXdlaWdodDo3MDB9LmNyb3BwZXIgLmNvbnRhaW5lciAuY29udGVudCAudG9vbGJhciBhOmhvdmVye29wYWNpdHk6MX0uY3JvcHBlciAuY29udGFpbmVyIC5jb250ZW50IC50b29sYmFyIC50aS1jaGVja3tjb2xvcjojMTNjYzEzfS5jcm9wcGVyIC5jb250YWluZXIgLmNvbnRlbnQgLnRvb2xiYXIgLnRpLWNsb3Nle2NvbG9yOnJlZH0uY3JvcHBlci5zaG93IC5jb250YWluZXJ7ZGlzcGxheTpibG9ja31cIiwgXCJcIl0pO1xuXHRcblx0Ly8gZXhwb3J0c1xuXG5cbi8qKiovIH0pLFxuLyogMTc5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0dmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cdFxuXHR2YXIgX3JlYWN0RG9tID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTgpO1xuXHRcblx0dmFyIF9yZWFjdERvbTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdERvbSk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0X193ZWJwYWNrX3JlcXVpcmVfXygxODApO1xuXHRcblx0dmFyIFRpbWUgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlQ2xhc3Moe1xuXHQgICAgZGlzcGxheU5hbWU6ICdUaW1lJyxcblx0XG5cdCAgICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZSgpIHtcblx0ICAgICAgICB2YXIgcGFyc2VkID0gdGhpcy5wcm9wcy52YWx1ZS5zcGxpdChcIjpcIik7XG5cdCAgICAgICAgdmFyIHN0YXRlID0ge1xuXHQgICAgICAgICAgICBzZWxlY3RlZEhvdXI6IHBhcnNlZFswXSxcblx0ICAgICAgICAgICAgc2VsZWN0ZWRNaW51dGU6IHBhcnNlZFsxXSxcblx0ICAgICAgICAgICAgaG91ckxpc3Q6IFtdLFxuXHQgICAgICAgICAgICBtaW51dGVMaXN0OiBbXVxuXHQgICAgICAgIH07XG5cdFxuXHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IDI0OyBpKyspIHtcblx0ICAgICAgICAgICAgdmFyIHZhbHVlID0gaSA8IDEwID8gXCIwXCIgKyBpIDogaTtcblx0ICAgICAgICAgICAgc3RhdGUuaG91ckxpc3QucHVzaCh2YWx1ZS50b1N0cmluZygpKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjA7IGkrKykge1xuXHQgICAgICAgICAgICB2YXIgdmFsdWUgPSBpIDwgMTAgPyBcIjBcIiArIGkgOiBpO1xuXHQgICAgICAgICAgICBzdGF0ZS5taW51dGVMaXN0LnB1c2godmFsdWUudG9TdHJpbmcoKSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiBzdGF0ZTtcblx0ICAgIH0sXG5cdCAgICBzY3JvbGxJbnRvVmlldzogZnVuY3Rpb24gc2Nyb2xsSW50b1ZpZXcoc2VsZWN0b3IpIHtcblx0ICAgICAgICB2YXIgdGltZSA9IHRoaXM7XG5cdCAgICAgICAgdmFyIHJlc3VsdHMgPSBfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUodGhpcykucXVlcnlTZWxlY3RvcihcIi5yZXN1bHRzXCIpO1xuXHQgICAgICAgIHJlc3VsdHMucXVlcnlTZWxlY3RvcihzZWxlY3Rvcikuc2Nyb2xsVG9wID0gMDtcblx0ICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgdmFyIHJlc3VsdHNQb3MgPSByZXN1bHRzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHRcblx0ICAgICAgICAgICAgdmFyIGFjdGl2ZSA9IHJlc3VsdHMucXVlcnlTZWxlY3RvcihzZWxlY3RvciArIFwiIC5pdGVtLmFjdGl2ZVwiKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0ICAgICAgICAgICAgaWYgKGFjdGl2ZS50b3AgPiByZXN1bHRzUG9zLmJvdHRvbSkge1xuXHQgICAgICAgICAgICAgICAgdmFyIHNjcm9sbERpZmYgPSBhY3RpdmUudG9wIC0gcmVzdWx0c1Bvcy50b3A7XG5cdCAgICAgICAgICAgICAgICB0aW1lLnNjcm9sbFRvKHJlc3VsdHMucXVlcnlTZWxlY3RvcihzZWxlY3RvciksIHNjcm9sbERpZmYsIDEwMDApO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSwgNTAwKTtcblx0ICAgIH0sXG5cdCAgICBzY3JvbGxUbzogZnVuY3Rpb24gc2Nyb2xsVG8oZWxlbWVudCwgdG8sIGR1cmF0aW9uKSB7XG5cdCAgICAgICAgaWYgKGR1cmF0aW9uIDw9IDApIHJldHVybjtcblx0ICAgICAgICB2YXIgZGlmZmVyZW5jZSA9IHRvIC0gZWxlbWVudC5zY3JvbGxUb3A7XG5cdCAgICAgICAgdmFyIHBlclRpY2sgPSBkaWZmZXJlbmNlIC8gZHVyYXRpb24gKiAxMDtcblx0ICAgICAgICB2YXIgbWUgPSB0aGlzO1xuXHRcblx0ICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgZWxlbWVudC5zY3JvbGxUb3AgPSBlbGVtZW50LnNjcm9sbFRvcCArIHBlclRpY2s7XG5cdCAgICAgICAgICAgIGlmIChlbGVtZW50LnNjcm9sbFRvcCA9PT0gdG8pIHJldHVybjtcblx0ICAgICAgICAgICAgbWUuc2Nyb2xsVG8oZWxlbWVudCwgdG8sIGR1cmF0aW9uIC0gMTApO1xuXHQgICAgICAgIH0sIDEwKTtcblx0ICAgIH0sXG5cdCAgICBkaXNtaXNzOiBmdW5jdGlvbiBkaXNtaXNzKGUsIHNraXApIHtcblx0ICAgICAgICB2YXIgY3VycmVudCA9IGUudGFyZ2V0O1xuXHQgICAgICAgIHdoaWxlIChjdXJyZW50ICE9IG51bGwpIHtcblx0ICAgICAgICAgICAgaWYgKGN1cnJlbnQgPT0gX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKHRoaXMpLnF1ZXJ5U2VsZWN0b3IoXCIucmVzdWx0c1wiKSkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LnBhcmVudE5vZGU7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuZGlzbWlzcywgdHJ1ZSk7XG5cdCAgICAgICAgX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKHRoaXMpLmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93XCIpO1xuXHQgICAgfSxcblx0ICAgIGZvY3VzOiBmdW5jdGlvbiBmb2N1cyhlKSB7XG5cdCAgICAgICAgdmFyIHRpbWUgPSB0aGlzO1xuXHQgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRpbWUuZGlzbWlzcywgdHJ1ZSk7XG5cdCAgICAgICAgfSwgNTAwKTtcblx0ICAgICAgICBfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUodGhpcykuY2xhc3NMaXN0LmFkZChcInNob3dcIik7XG5cdFxuXHQgICAgICAgIHRoaXMuc2Nyb2xsSW50b1ZpZXcoXCIuaG91cnNcIik7XG5cdCAgICAgICAgdGhpcy5zY3JvbGxJbnRvVmlldyhcIi5taW51dGVzXCIpO1xuXHQgICAgfSxcblx0ICAgIHNlbGVjdDogZnVuY3Rpb24gc2VsZWN0KGUsIHN0YXRlKSB7XG5cdCAgICAgICAgdmFyIGlucHV0ID0gX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKHRoaXMpLnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKTtcblx0ICAgICAgICB2YXIgdmFsdWUgPSBbXCIwMFwiLCBcIjAwXCJdO1xuXHQgICAgICAgIGlmIChzdGF0ZS5zZWxlY3RlZEhvdXIgIT0gbnVsbCkge1xuXHQgICAgICAgICAgICB2YWx1ZVswXSA9IHN0YXRlLnNlbGVjdGVkSG91cjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHN0YXRlLnNlbGVjdGVkTWludXRlICE9IG51bGwpIHtcblx0ICAgICAgICAgICAgdmFsdWVbMV0gPSBzdGF0ZS5zZWxlY3RlZE1pbnV0ZTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHRoaXMucHJvcHMudXBkYXRlKHZhbHVlLmpvaW4oXCI6XCIpKTtcblx0ICAgICAgICB0aGlzLnNldFN0YXRlKHN0YXRlKTtcblx0ICAgIH0sXG5cdCAgICBzZWxlY3RNaW51dGU6IGZ1bmN0aW9uIHNlbGVjdE1pbnV0ZShlKSB7XG5cdCAgICAgICAgdmFyIHN0YXRlID0ge1xuXHQgICAgICAgICAgICBzZWxlY3RlZEhvdXI6IHRoaXMuc3RhdGUuc2VsZWN0ZWRIb3VyLFxuXHQgICAgICAgICAgICBzZWxlY3RlZE1pbnV0ZTogZS50YXJnZXQuaW5uZXJUZXh0XG5cdCAgICAgICAgfTtcblx0XG5cdCAgICAgICAgdGhpcy5zZWxlY3QoZSwgc3RhdGUpO1xuXHQgICAgfSxcblx0ICAgIHNlbGVjdEhvdXI6IGZ1bmN0aW9uIHNlbGVjdEhvdXIoZSkge1xuXHQgICAgICAgIHZhciBzdGF0ZSA9IHtcblx0ICAgICAgICAgICAgc2VsZWN0ZWRIb3VyOiBlLnRhcmdldC5pbm5lclRleHQsXG5cdCAgICAgICAgICAgIHNlbGVjdGVkTWludXRlOiB0aGlzLnN0YXRlLnNlbGVjdGVkTWludXRlXG5cdCAgICAgICAgfTtcblx0XG5cdCAgICAgICAgdGhpcy5zZWxlY3QoZSwgc3RhdGUpO1xuXHQgICAgfSxcblx0ICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuXHQgICAgICAgIHZhciBtZSA9IHRoaXM7XG5cdCAgICAgICAgdmFyIGhvdXJzID0gdGhpcy5zdGF0ZS5ob3VyTGlzdC5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgICAgICAgdmFyIGl0ZW1DbGFzcyA9IFwiaXRlbVwiO1xuXHQgICAgICAgICAgICB2YXIgc2Nyb2xsID0gZmFsc2U7XG5cdCAgICAgICAgICAgIGlmIChpdGVtID09IG1lLnN0YXRlLnNlbGVjdGVkSG91cikge1xuXHQgICAgICAgICAgICAgICAgaXRlbUNsYXNzICs9IFwiIGFjdGl2ZVwiO1xuXHQgICAgICAgICAgICAgICAgc2Nyb2xsID0gdHJ1ZTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAnbGknLFxuXHQgICAgICAgICAgICAgICAgeyBrZXk6IGl0ZW0sIGNsYXNzTmFtZTogaXRlbUNsYXNzLCBvbkNsaWNrOiBtZS5zZWxlY3RIb3VyIH0sXG5cdCAgICAgICAgICAgICAgICBpdGVtXG5cdCAgICAgICAgICAgICk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgdmFyIG1pbnV0ZXMgPSB0aGlzLnN0YXRlLm1pbnV0ZUxpc3QubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICAgIHZhciBpdGVtQ2xhc3MgPSBcIml0ZW1cIjtcblx0ICAgICAgICAgICAgdmFyIHNjcm9sbCA9IGZhbHNlO1xuXHQgICAgICAgICAgICBpZiAoaXRlbSA9PSBtZS5zdGF0ZS5zZWxlY3RlZE1pbnV0ZSkge1xuXHQgICAgICAgICAgICAgICAgaXRlbUNsYXNzICs9IFwiIGFjdGl2ZVwiO1xuXHQgICAgICAgICAgICAgICAgc2Nyb2xsID0gdHJ1ZTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAnbGknLFxuXHQgICAgICAgICAgICAgICAgeyBrZXk6IGl0ZW0sIGNsYXNzTmFtZTogaXRlbUNsYXNzLCBvbkNsaWNrOiBtZS5zZWxlY3RNaW51dGUgfSxcblx0ICAgICAgICAgICAgICAgIGl0ZW1cblx0ICAgICAgICAgICAgKTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgICB2YXIgY3VzdG9tQ2xhc3MgPSBcInRpbWUtcGlja2VyIFwiICsgdGhpcy5wcm9wcy5jdXN0b21DbGFzcztcblx0ICAgICAgICB2YXIgdmFsdWUgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgJ3NwYW4nLFxuXHQgICAgICAgICAgICBudWxsLFxuXHQgICAgICAgICAgICB0aGlzLnByb3BzLnZhbHVlXG5cdCAgICAgICAgKTtcblx0ICAgICAgICBpZiAodGhpcy5wcm9wcy5lZGl0YWJsZSkge1xuXHQgICAgICAgICAgICB2YWx1ZSA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHsgcmVhZE9ubHk6ICd0cnVlJyxcblx0ICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnByb3BzLnZhbHVlLFxuXHQgICAgICAgICAgICAgICAgb25Gb2N1czogdGhpcy5mb2N1c1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAnZGl2Jyxcblx0ICAgICAgICAgICAgeyBjbGFzc05hbWU6IGN1c3RvbUNsYXNzIH0sXG5cdCAgICAgICAgICAgIHZhbHVlLFxuXHQgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICdkaXYnLFxuXHQgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdyZXN1bHRzJyB9LFxuXHQgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgJ3VsJyxcblx0ICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2hvdXJzJyB9LFxuXHQgICAgICAgICAgICAgICAgICAgIGhvdXJzXG5cdCAgICAgICAgICAgICAgICApLFxuXHQgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgJ3VsJyxcblx0ICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ21pbnV0ZXMnIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgbWludXRlc1xuXHQgICAgICAgICAgICAgICAgKVxuXHQgICAgICAgICAgICApXG5cdCAgICAgICAgKTtcblx0ICAgIH1cblx0fSk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBUaW1lO1xuXG4vKioqLyB9KSxcbi8qIDE4MCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cdFxuXHQvLyBsb2FkIHRoZSBzdHlsZXNcblx0dmFyIGNvbnRlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4MSk7XG5cdGlmICh0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblx0Ly8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxuXHR2YXIgdXBkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjgpKGNvbnRlbnQsIHt9KTtcblx0aWYgKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuXHQvLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5cdGlmIChmYWxzZSkge1xuXHRcdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0aWYgKCFjb250ZW50LmxvY2Fscykge1xuXHRcdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuL3RpbWUuc2Nzc1wiLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vdGltZS5zY3NzXCIpO1xuXHRcdFx0XHRpZiAodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uICgpIHtcblx0XHRcdHVwZGF0ZSgpO1xuXHRcdH0pO1xuXHR9XG5cbi8qKiovIH0pLFxuLyogMTgxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0ZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjcpKCk7XG5cdC8vIGltcG9ydHNcblx0XG5cdFxuXHQvLyBtb2R1bGVcblx0ZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLnRpbWUtcGlja2Vye3Bvc2l0aW9uOnJlbGF0aXZlO3dpZHRoOjU4cHg7aGVpZ2h0OjI0cHh9LnRpbWUtcGlja2VyIGlucHV0e3dpZHRoOjQwcHg7dHJhbnNpdGlvbjp3aWR0aCAuNXM7bWFyZ2luOjA7Y3Vyc29yOnBvaW50ZXJ9LnRpbWUtcGlja2VyLnNob3cgaW5wdXR7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7Ym90dG9tOjA7ei1pbmRleDoxO3dpZHRoOjEwN3B4O2JvcmRlci1yYWRpdXM6NXB4IDVweCAwIDA7Ym9yZGVyLWJvdHRvbTpub25lO2JveC1zaGFkb3c6NXB4IDVweCAxMHB4ICMwMDB9LnRpbWUtcGlja2VyLnNob3cgLnJlc3VsdHN7dHJhbnNmb3JtOnBlcnNwZWN0aXZlKDApIHJvdGF0ZVgoMGRlZyl9LnRpbWUtcGlja2VyIC5yZXN1bHRze2NvbG9yOiM1ODU2NTg7YmFja2dyb3VuZC1jb2xvcjojZmZmO2JveC1zaGFkb3c6NXB4IDVweCAxMHB4ICMwMDA7cG9zaXRpb246YWJzb2x1dGU7dG9wOjEwMCU7dHJhbnNmb3JtOnBlcnNwZWN0aXZlKDgwMHB4KSByb3RhdGVYKC05MGRlZyk7dHJhbnNmb3JtLW9yaWdpbjp0b3A7dHJhbnNpdGlvbjphbGwgLjVzIGxpbmVhcjt6LWluZGV4OjI7b3ZlcmZsb3c6aGlkZGVuO2hlaWdodDoxODBweDtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246cm93O2FsaWduLWl0ZW1zOnN0cmV0Y2g7Ym9yZGVyOjFweCBzb2xpZCAjNTg1NjU4fS50aW1lLXBpY2tlciAucmVzdWx0cyAuaG91cnN7Ym9yZGVyLXJpZ2h0OjFweCBzb2xpZCAjNTg1NjU4fS50aW1lLXBpY2tlciAucmVzdWx0cyAuaG91cnMsLnRpbWUtcGlja2VyIC5yZXN1bHRzIC5taW51dGVze3dpZHRoOjU2cHg7b3ZlcmZsb3cteTpzY3JvbGw7bWFyZ2luOjA7cGFkZGluZzowfS50aW1lLXBpY2tlciAucmVzdWx0cyAuaXRlbXtwYWRkaW5nOjVweDtwYWRkaW5nOjVweCA1cHggNXB4IDE2cHg7Y3Vyc29yOnBvaW50ZXJ9LnRpbWUtcGlja2VyIC5yZXN1bHRzIC5pdGVtOmxhc3QtY2hpbGR7Ym9yZGVyLWJvdHRvbTpub25lfS50aW1lLXBpY2tlciAucmVzdWx0cyAuaXRlbS5hY3RpdmUsLnRpbWUtcGlja2VyIC5yZXN1bHRzIC5pdGVtOmhvdmVye2JhY2tncm91bmQtY29sb3I6IzJlMmMyZDtjb2xvcjojYjNhZmFmfVwiLCBcIlwiXSk7XG5cdFxuXHQvLyBleHBvcnRzXG5cblxuLyoqKi8gfSksXG4vKiAxODIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHQvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXHRcblx0Ly8gbG9hZCB0aGUgc3R5bGVzXG5cdHZhciBjb250ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODMpO1xuXHRpZiAodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cdC8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cblx0dmFyIHVwZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTY4KShjb250ZW50LCB7fSk7XG5cdGlmIChjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuXHRpZiAoZmFsc2UpIHtcblx0XHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdGlmICghY29udGVudC5sb2NhbHMpIHtcblx0XHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi9yZWNpcGVIZWFkZXIuc2Nzc1wiLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vcmVjaXBlSGVhZGVyLnNjc3NcIik7XG5cdFx0XHRcdGlmICh0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24gKCkge1xuXHRcdFx0dXBkYXRlKCk7XG5cdFx0fSk7XG5cdH1cblxuLyoqKi8gfSksXG4vKiAxODMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2NykoKTtcblx0Ly8gaW1wb3J0c1xuXHRcblx0XG5cdC8vIG1vZHVsZVxuXHRleHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIucmVjaXBlLWhlYWRlcntkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246cm93O2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO2FsaWduLWl0ZW1zOmZsZXgtc3RhcnR9LnJlY2lwZS1oZWFkZXIgLnJlY2lwZS1pbmZve2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47cGFkZGluZzo1MHB4IDI1cHggNTBweCA3NXB4O3dpZHRoOjEwMCV9LnJlY2lwZS1oZWFkZXIgLnJlY2lwZS1pbmZvIC5yZWNpcGUtdGl0bGV7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcn0ucmVjaXBlLWhlYWRlciAucmVjaXBlLWluZm8uZWRpdGFibGUgLnB1YmxpYy1ub3RlLC5yZWNpcGUtaGVhZGVyIC5yZWNpcGUtaW5mby5lZGl0YWJsZSAudGktcGVuY2lsLC5yZWNpcGUtaGVhZGVyIC5yZWNpcGUtaW5mby5lZGl0YWJsZSAudGl0bGV7ZGlzcGxheTpub25lfS5yZWNpcGUtaGVhZGVyIC5yZWNpcGUtaW5mby5lZGl0YWJsZSAudGktY2xvc2UsLnJlY2lwZS1oZWFkZXIgLnJlY2lwZS1pbmZvLmVkaXRhYmxlIC50aS1zYXZlLC5yZWNpcGUtaGVhZGVyIC5yZWNpcGUtaW5mby5lZGl0YWJsZSAudG9nZ2xlLWxhYmVsLC5yZWNpcGUtaGVhZGVyIC5yZWNpcGUtaW5mby5lZGl0YWJsZSAudG9nZ2xlLXN3aXRjaCwucmVjaXBlLWhlYWRlciAucmVjaXBlLWluZm8uZWRpdGFibGUgaW5wdXQudGl0bGV7ZGlzcGxheTppbmxpbmUtYmxvY2t9LnJlY2lwZS1oZWFkZXIgLnJlY2lwZS1pbmZvIC50aS1wZW5jaWwsLnJlY2lwZS1oZWFkZXIgLnJlY2lwZS1pbmZvIC50aS1zYXZle3BhZGRpbmctbGVmdDoxMHB4fS5yZWNpcGUtaGVhZGVyIC5yZWNpcGUtaW5mbyAudGktY2xvc2UsLnJlY2lwZS1oZWFkZXIgLnJlY2lwZS1pbmZvIC50aS1wZW5jaWwsLnJlY2lwZS1oZWFkZXIgLnJlY2lwZS1pbmZvIC50aS1zYXZle2NvbG9yOiM1ODU2NTg7Zm9udC1zaXplOjIuMjVlbX0ucmVjaXBlLWhlYWRlciAucmVjaXBlLWluZm8gLnRpLWNsb3NlOmhvdmVyLC5yZWNpcGUtaGVhZGVyIC5yZWNpcGUtaW5mbyAudGktcGVuY2lsOmhvdmVyLC5yZWNpcGUtaGVhZGVyIC5yZWNpcGUtaW5mbyAudGktc2F2ZTpob3Zlcntjb2xvcjojMmUyYzJkfS5yZWNpcGUtaGVhZGVyIC5yZWNpcGUtaW5mbyAudGl0bGV7Y29sb3I6IzJlMmMyZDtmb250LXNpemU6Mi4yNWVtO2Rpc3BsYXk6ZmxleDtwYWRkaW5nOjVweDtib3JkZXI6MXB4IHNvbGlkIHRyYW5zcGFyZW50O2ZvbnQtZmFtaWx5OlRlbnNvTWVkaXVtLFRlbnNvTGlnaHQsSGVsdmV0aWNhIE5ldWUsSGVsdmV0aWNhLEFyaWFsLHNhbnMtc2VyaWZ9LnJlY2lwZS1oZWFkZXIgLnJlY2lwZS1pbmZvIGlucHV0LnRpdGxle2JvcmRlcjoxcHggc29saWQgIzJlMmMyZDtmbGV4OjE7ZGlzcGxheTpub25lfS5yZWNpcGUtaGVhZGVyIC5yZWNpcGUtaW5mbyAudGktc2F2ZXtwYWRkaW5nLXJpZ2h0OjEwcHh9LnJlY2lwZS1oZWFkZXIgLnJlY2lwZS1pbmZvIC50aS1jbG9zZSwucmVjaXBlLWhlYWRlciAucmVjaXBlLWluZm8gLnRpLXNhdmV7ZGlzcGxheTpub25lfS5yZWNpcGUtaGVhZGVyIC5yZWNpcGUtaW5mbyAuYWRkaXRpb24taW5mbywucmVjaXBlLWhlYWRlciAucmVjaXBlLWluZm8gLnB1YmxpYy1vcHRpb257Zm9udC1zaXplOi43NWVtO2NvbG9yOiM1ODU2NTg7cGFkZGluZzo1cHggMCAwIDlweDtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246cm93O2FsaWduLWl0ZW1zOmNlbnRlcn0ucmVjaXBlLWhlYWRlciAucmVjaXBlLWluZm8gLnB1YmxpYy1vcHRpb257aGVpZ2h0OjMwcHh9LnJlY2lwZS1oZWFkZXIgLnJlY2lwZS1pbmZvIC50b2dnbGUtc3dpdGNoe3RyYW5zZm9ybTpzY2FsZSguNSk7ZGlzcGxheTpub25lfS5yZWNpcGUtaGVhZGVyIC5yZWNpcGUtaW5mbyAudG9nZ2xlLWxhYmVse2Rpc3BsYXk6bm9uZX0ucmVjaXBlLWhlYWRlciAucmVjaXBlLWluZm8gLmF1dGhvcntwYWRkaW5nLXJpZ2h0OjVweH0ucmVjaXBlLWhlYWRlciAucmVjaXBlLWluZm8gLnRpbWUtaW5mb3toZWlnaHQ6NTBweDtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246cm93O2p1c3RpZnktY29udGVudDpmbGV4LXN0YXJ0O2FsaWduLWl0ZW1zOmNlbnRlcjtmb250LXNpemU6Ljc1ZW07Y29sb3I6IzU4NTY1ODtwYWRkaW5nOjAgN3B4fS5yZWNpcGUtaGVhZGVyIC5yZWNpcGUtaW5mbyAudGltZS1pbmZvIC5zZXJ2aW5nLXZhbHVle3dpZHRoOjNlbX0ucmVjaXBlLWhlYWRlciAucmVjaXBlLWluZm8gLnRpbWUtaW5mbyAuY29vay10aW1lLC5yZWNpcGUtaGVhZGVyIC5yZWNpcGUtaW5mbyAudGltZS1pbmZvIC5wcmVwLXRpbWV7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO3BhZGRpbmctcmlnaHQ6MTBweH0ucmVjaXBlLWhlYWRlciAucmVjaXBlLWluZm8gLnRpbWUtaW5mbyAuY29vay10aW1lPnNwYW4sLnJlY2lwZS1oZWFkZXIgLnJlY2lwZS1pbmZvIC50aW1lLWluZm8gLnByZXAtdGltZT5zcGFue2Rpc3BsYXk6aW5saW5lLWJsb2NrfS5yZWNpcGUtaGVhZGVyIC5yZWNpcGUtaW5mbyAudGltZS1pbmZvIC50aW1lLXBpY2tlci5wcmVwLXRpbWV7ei1pbmRleDozfS5yZWNpcGUtaGVhZGVyIC5yZWNpcGUtaW5mbyAudGltZS1pbmZvIC50aS1waWUtY2hhcnQsLnJlY2lwZS1oZWFkZXIgLnJlY2lwZS1pbmZvIC50aW1lLWluZm8gLnRpLXRpbWVye2ZvbnQtc2l6ZToxLjNlbTtwYWRkaW5nLXJpZ2h0OjEwcHg7Y3Vyc29yOmRlZmF1bHR9LnJlY2lwZS1oZWFkZXIgLnJlY2lwZS1pbmZvIC50aW1lLWluZm8gLnNlcnZpbmdzPmxhYmVse3BhZGRpbmctbGVmdDo1cHh9QG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLWRldmljZS13aWR0aDozMjBweCkgYW5kIChtYXgtZGV2aWNlLXdpZHRoOjQ4MHB4KXsucmVjaXBlLWhlYWRlcntkaXNwbGF5OmJsb2NrO3Bvc2l0aW9uOnJlbGF0aXZlO21hcmdpbjowIDEwcHg7aGVpZ2h0OjMwMHB4fS5yZWNpcGUtaGVhZGVyIC5jcm9wcGVyLC5yZWNpcGUtaGVhZGVyIC5yZWNpcGUtaW5mb3twb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtyaWdodDowO2JvdHRvbTowO2xlZnQ6MH0ucmVjaXBlLWhlYWRlciAucmVjaXBlLWluZm97cGFkZGluZzoyNXB4O3otaW5kZXg6Mn0ucmVjaXBlLWhlYWRlciAuY3JvcHBlcnt6LWluZGV4OjE7b3ZlcmZsb3c6aGlkZGVufS5yZWNpcGUtaGVhZGVyIC5jcm9wcGVyIC5kaXNwbGF5e3dpZHRoOjEwMCV9fVwiLCBcIlwiXSk7XG5cdFxuXHQvLyBleHBvcnRzXG5cblxuLyoqKi8gfSksXG4vKiAxODQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHQvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXHRcblx0Ly8gbG9hZCB0aGUgc3R5bGVzXG5cdHZhciBjb250ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODUpO1xuXHRpZiAodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cdC8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cblx0dmFyIHVwZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTY4KShjb250ZW50LCB7fSk7XG5cdGlmIChjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuXHRpZiAoZmFsc2UpIHtcblx0XHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdGlmICghY29udGVudC5sb2NhbHMpIHtcblx0XHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi9yZWNpcGUuc2Nzc1wiLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vcmVjaXBlLnNjc3NcIik7XG5cdFx0XHRcdGlmICh0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24gKCkge1xuXHRcdFx0dXBkYXRlKCk7XG5cdFx0fSk7XG5cdH1cblxuLyoqKi8gfSksXG4vKiAxODUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2NykoKTtcblx0Ly8gaW1wb3J0c1xuXHRcblx0XG5cdC8vIG1vZHVsZVxuXHRleHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuZnVsbC1yZWNpcGUgLmF1dG9jb21wbGV0ZS5yZXF1aXJlZCBpbnB1dCwuZnVsbC1yZWNpcGUgaW5wdXQucmVxdWlyZWQsLmZ1bGwtcmVjaXBlIHRleHRhcmVhLnJlcXVpcmVke2JhY2tncm91bmQtY29sb3I6I2Y5NjY2Nn0uZnVsbC1yZWNpcGUgLnJlY2lwZS1pbWFnZXN7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2FsaWduLWl0ZW1zOmNlbnRlcjtwYWRkaW5nOjEwcHggMH0uZnVsbC1yZWNpcGUgLnJlY2lwZS1ib2R5e3BhZGRpbmc6MTBweDttYXJnaW46MDtkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47YWxpZ24taXRlbXM6c3RyZXRjaH0uZnVsbC1yZWNpcGUgLnJlY2lwZS1ib2R5PnNlY3Rpb257Y29sb3I6IzJlMmMyZDtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7ZmxleDoxO3BhZGRpbmc6MTBweH0uZnVsbC1yZWNpcGUgLnJlY2lwZS1ib2R5PnNlY3Rpb246Zmlyc3QtY2hpbGR7bWFyZ2luLXJpZ2h0OjEwcHh9LmZ1bGwtcmVjaXBlIC5hZGQtbmV3e2NvbG9yOiM1ODU2NTg7ZGlzcGxheTppbmxpbmUtZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Y3Vyc29yOnBvaW50ZXJ9LmZ1bGwtcmVjaXBlIC5hZGQtbmV3OmhvdmVye2NvbG9yOiMyZTJjMmR9LmZ1bGwtcmVjaXBlIC5hZGQtbmV3OmhvdmVyIGxhYmVse3RleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmV9LmZ1bGwtcmVjaXBlIC5hZGQtbmV3IC50aS1wbHVze3BhZGRpbmctcmlnaHQ6NXB4fS5mdWxsLXJlY2lwZSAuYWRkLW5ldyBsYWJlbHtjdXJzb3I6cG9pbnRlcn1AbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4tZGV2aWNlLXdpZHRoOjMyMHB4KSBhbmQgKG1heC1kZXZpY2Utd2lkdGg6NDgwcHgpey5mdWxsLXJlY2lwZSAucmVjaXBlLWJvZHl7ZmxleC1kaXJlY3Rpb246Y29sdW1ufS5mdWxsLXJlY2lwZSAucmVjaXBlLWJvZHk+c2VjdGlvbjpmaXJzdC1jaGlsZHttYXJnaW4tcmlnaHQ6MH19XCIsIFwiXCJdKTtcblx0XG5cdC8vIGV4cG9ydHNcblxuXG4vKioqLyB9KSxcbi8qIDE4NiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2FjdGlvblR5cGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODcpO1xuXHRcblx0dmFyIF9hY3Rpb25UeXBlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9hY3Rpb25UeXBlcyk7XG5cdFxuXHR2YXIgX2Rpc3BhdGNoZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4OCk7XG5cdFxuXHR2YXIgX2Rpc3BhdGNoZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGlzcGF0Y2hlcik7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0dmFyIEFjdGlvbnMgPSB7XG5cdCAgICBzYXZlUmVjaXBlOiBmdW5jdGlvbiBzYXZlUmVjaXBlKGRhdGEpIHtcblx0ICAgICAgICBfZGlzcGF0Y2hlcjIuZGVmYXVsdC5kaXNwYXRjaCh7XG5cdCAgICAgICAgICAgIGFjdGlvbjogX2FjdGlvblR5cGVzMi5kZWZhdWx0LlNBVkVfUkVDSVBFLFxuXHQgICAgICAgICAgICByZWNpcGU6IGRhdGFcblx0ICAgICAgICB9KTtcblx0ICAgIH0sXG5cdCAgICBnZXRSZWNpcGU6IGZ1bmN0aW9uIGdldFJlY2lwZShkYXRhKSB7XG5cdCAgICAgICAgX2Rpc3BhdGNoZXIyLmRlZmF1bHQuZGlzcGF0Y2goe1xuXHQgICAgICAgICAgICBhY3Rpb246IF9hY3Rpb25UeXBlczIuZGVmYXVsdC5HRVRfUkVDSVBFLFxuXHQgICAgICAgICAgICBpZDogZGF0YVxuXHQgICAgICAgIH0pO1xuXHQgICAgfSxcblx0ICAgIG5ld1JlY2lwZTogZnVuY3Rpb24gbmV3UmVjaXBlKCkge1xuXHQgICAgICAgIF9kaXNwYXRjaGVyMi5kZWZhdWx0LmRpc3BhdGNoKHtcblx0ICAgICAgICAgICAgYWN0aW9uOiBfYWN0aW9uVHlwZXMyLmRlZmF1bHQuTkVXX1JFQ0lQRVxuXHQgICAgICAgIH0pO1xuXHQgICAgfSxcblx0ICAgIGNsb3NlUmVjaXBlOiBmdW5jdGlvbiBjbG9zZVJlY2lwZShpZCkge1xuXHQgICAgICAgIF9kaXNwYXRjaGVyMi5kZWZhdWx0LmRpc3BhdGNoKHtcblx0ICAgICAgICAgICAgYWN0aW9uOiBfYWN0aW9uVHlwZXMyLmRlZmF1bHQuQ0xPU0VfUkVDSVBFLFxuXHQgICAgICAgICAgICBpZDogaWRcblx0ICAgICAgICB9KTtcblx0ICAgIH0sXG5cdCAgICBhZGRJbmdyZWRpZW50OiBmdW5jdGlvbiBhZGRJbmdyZWRpZW50KCkge1xuXHQgICAgICAgIF9kaXNwYXRjaGVyMi5kZWZhdWx0LmRpc3BhdGNoKHtcblx0ICAgICAgICAgICAgYWN0aW9uOiBfYWN0aW9uVHlwZXMyLmRlZmF1bHQuQUREX0lOR1JFRElFTlRcblx0ICAgICAgICB9KTtcblx0ICAgIH0sXG5cdCAgICBhZGRTdGVwOiBmdW5jdGlvbiBhZGRTdGVwKCkge1xuXHQgICAgICAgIF9kaXNwYXRjaGVyMi5kZWZhdWx0LmRpc3BhdGNoKHtcblx0ICAgICAgICAgICAgYWN0aW9uOiBfYWN0aW9uVHlwZXMyLmRlZmF1bHQuQUREX1NURVBcblx0ICAgICAgICB9KTtcblx0ICAgIH0sXG5cdCAgICBkZWxldGVTdGVwOiBmdW5jdGlvbiBkZWxldGVTdGVwKGRhdGEpIHtcblx0ICAgICAgICBfZGlzcGF0Y2hlcjIuZGVmYXVsdC5kaXNwYXRjaCh7XG5cdCAgICAgICAgICAgIGFjdGlvbjogX2FjdGlvblR5cGVzMi5kZWZhdWx0LkRFTEVURV9TVEVQLFxuXHQgICAgICAgICAgICBpbmRleDogZGF0YVxuXHQgICAgICAgIH0pO1xuXHQgICAgfSxcblx0ICAgIGRlbGV0ZUluZ3JlZGllbnQ6IGZ1bmN0aW9uIGRlbGV0ZUluZ3JlZGllbnQoZGF0YSkge1xuXHQgICAgICAgIF9kaXNwYXRjaGVyMi5kZWZhdWx0LmRpc3BhdGNoKHtcblx0ICAgICAgICAgICAgYWN0aW9uOiBfYWN0aW9uVHlwZXMyLmRlZmF1bHQuREVMRVRFX0lOR1JFRElFTlQsXG5cdCAgICAgICAgICAgIGluZGV4OiBkYXRhXG5cdCAgICAgICAgfSk7XG5cdCAgICB9LFxuXHQgICAgdXBkYXRlVmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZVZhbHVlKGtleSwgdmFsdWUpIHtcblx0ICAgICAgICBfZGlzcGF0Y2hlcjIuZGVmYXVsdC5kaXNwYXRjaCh7XG5cdCAgICAgICAgICAgIGFjdGlvbjogX2FjdGlvblR5cGVzMi5kZWZhdWx0LlVQREFURV9WQUxVRSxcblx0ICAgICAgICAgICAga2V5OiBrZXksXG5cdCAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVxuXHQgICAgICAgIH0pO1xuXHQgICAgfSxcblx0ICAgIG9wZW5Db250ZW50OiBmdW5jdGlvbiBvcGVuQ29udGVudChpZCkge1xuXHQgICAgICAgIF9kaXNwYXRjaGVyMi5kZWZhdWx0LmRpc3BhdGNoKHtcblx0ICAgICAgICAgICAgYWN0aW9uOiBfYWN0aW9uVHlwZXMyLmRlZmF1bHQuT1BFTl9DT05URU5ULFxuXHQgICAgICAgICAgICBrZXk6IGlkXG5cdCAgICAgICAgfSk7XG5cdCAgICB9LFxuXHQgICAgc2VydmVyUmVxdWVzdDogZnVuY3Rpb24gc2VydmVyUmVxdWVzdChkYXRhLCBjYWxsYmFjaywgYXN5bmMpIHtcblx0ICAgICAgICBfZGlzcGF0Y2hlcjIuZGVmYXVsdC5kaXNwYXRjaCh7XG5cdCAgICAgICAgICAgIGFjdGlvbjogX2FjdGlvblR5cGVzMi5kZWZhdWx0LlNFUlZFUl9SRVFVRVNULFxuXHQgICAgICAgICAgICBkYXRhOiBkYXRhLFxuXHQgICAgICAgICAgICBhc3luYzogYXN5bmMsXG5cdCAgICAgICAgICAgIGNhbGxiYWNrOiBjYWxsYmFja1xuXHQgICAgICAgIH0pO1xuXHQgICAgfSxcblx0ICAgIGF1dGhlbnRpY2F0ZTogZnVuY3Rpb24gYXV0aGVudGljYXRlKGFjdGl2ZSwgdHlwZSkge1xuXHQgICAgICAgIF9kaXNwYXRjaGVyMi5kZWZhdWx0LmRpc3BhdGNoKHtcblx0ICAgICAgICAgICAgYWN0aW9uOiBfYWN0aW9uVHlwZXMyLmRlZmF1bHQuQVVUSEVOVElDQVRFLFxuXHQgICAgICAgICAgICBhY3RpdmU6IGFjdGl2ZSxcblx0ICAgICAgICAgICAgdHlwZTogdHlwZVxuXHQgICAgICAgIH0pO1xuXHQgICAgfSxcblx0ICAgIHJlZ2lzdGVyOiBmdW5jdGlvbiByZWdpc3RlcihmaXJzdE5hbWUsIGxhc3ROYW1lLCB1c2VybmFtZSwgZW1haWwsIGNhbGxiYWNrKSB7XG5cdCAgICAgICAgX2Rpc3BhdGNoZXIyLmRlZmF1bHQuZGlzcGF0Y2goe1xuXHQgICAgICAgICAgICBhY3Rpb246IF9hY3Rpb25UeXBlczIuZGVmYXVsdC5SRUdJU1RFUixcblx0ICAgICAgICAgICAgZmlyc3ROYW1lOiBmaXJzdE5hbWUsXG5cdCAgICAgICAgICAgIGxhc3ROYW1lOiBsYXN0TmFtZSxcblx0ICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLFxuXHQgICAgICAgICAgICBlbWFpbDogZW1haWwsXG5cdCAgICAgICAgICAgIGNhbGxiYWNrOiBjYWxsYmFja1xuXHQgICAgICAgIH0pO1xuXHQgICAgfSxcblx0ICAgIHVwZGF0ZVVzZXJTdGF0dXM6IGZ1bmN0aW9uIHVwZGF0ZVVzZXJTdGF0dXModXNlcklkLCBzdGF0dXMpIHtcblx0ICAgICAgICBfZGlzcGF0Y2hlcjIuZGVmYXVsdC5kaXNwYXRjaCh7XG5cdCAgICAgICAgICAgIGFjdGlvbjogX2FjdGlvblR5cGVzMi5kZWZhdWx0LlVQREFURV9VU0VSX1NUQVRVUyxcblx0ICAgICAgICAgICAgdXNlcklkOiB1c2VySWQsXG5cdCAgICAgICAgICAgIHN0YXR1czogc3RhdHVzXG5cdCAgICAgICAgfSk7XG5cdCAgICB9LFxuXHQgICAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZCwgY2FsbGJhY2spIHtcblx0ICAgICAgICBfZGlzcGF0Y2hlcjIuZGVmYXVsdC5kaXNwYXRjaCh7XG5cdCAgICAgICAgICAgIGFjdGlvbjogX2FjdGlvblR5cGVzMi5kZWZhdWx0LkxPR0lOLFxuXHQgICAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsXG5cdCAgICAgICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZCxcblx0ICAgICAgICAgICAgY2FsbGJhY2s6IGNhbGxiYWNrXG5cdCAgICAgICAgfSk7XG5cdCAgICB9LFxuXHQgICAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoKSB7XG5cdCAgICAgICAgX2Rpc3BhdGNoZXIyLmRlZmF1bHQuZGlzcGF0Y2goe1xuXHQgICAgICAgICAgICBhY3Rpb246IF9hY3Rpb25UeXBlczIuZGVmYXVsdC5MT0dPVVRcblx0ICAgICAgICB9KTtcblx0ICAgIH0sXG5cdCAgICB1cGRhdGVQYXNzd29yZDogZnVuY3Rpb24gdXBkYXRlUGFzc3dvcmQodXNlcklkLCBvbGRQYXNzd29yZCwgbmV3UGFzc3dvcmQpIHtcblx0ICAgICAgICBfZGlzcGF0Y2hlcjIuZGVmYXVsdC5kaXNwYXRjaCh7XG5cdCAgICAgICAgICAgIGFjdGlvbjogX2FjdGlvblR5cGVzMi5kZWZhdWx0LlVQREFURV9QQVNTV09SRCxcblx0ICAgICAgICAgICAgdXNlcklkOiB1c2VySWQsXG5cdCAgICAgICAgICAgIG9sZFBhc3N3b3JkOiBvbGRQYXNzd29yZCxcblx0ICAgICAgICAgICAgbmV3UGFzc3dvcmQ6IG5ld1Bhc3N3b3JkXG5cdCAgICAgICAgfSk7XG5cdCAgICB9LFxuXHQgICAgbm90aWZ5OiBmdW5jdGlvbiBub3RpZnkoYWN0aXZlLCB0eXBlLCBtZXNzYWdlLCB0aW1lcikge1xuXHQgICAgICAgIF9kaXNwYXRjaGVyMi5kZWZhdWx0LmRpc3BhdGNoKHtcblx0ICAgICAgICAgICAgYWN0aW9uOiBfYWN0aW9uVHlwZXMyLmRlZmF1bHQuTk9USUZZLFxuXHQgICAgICAgICAgICBhY3RpdmU6IGFjdGl2ZSxcblx0ICAgICAgICAgICAgdHlwZTogdHlwZSxcblx0ICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcblx0ICAgICAgICAgICAgdGltZXI6IHRpbWVyXG5cdCAgICAgICAgfSk7XG5cdCAgICB9XG5cdH07XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBBY3Rpb25zO1xuXG4vKioqLyB9KSxcbi8qIDE4NyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdHZhciBBY3Rpb25UeXBlcyA9IHtcblx0ICAgIFNBVkVfUkVDSVBFOiAnU0FWRV9SRUNJUEUnLFxuXHQgICAgR0VUX1JFQ0lQRTogJ0dFVF9SRUNJUEUnLFxuXHQgICAgTkVXX1JFQ0lQRTogJ05FV19SRUNJUEUnLFxuXHQgICAgQUREX0lOR1JFRElFTlQ6ICdBRERfSU5HUkVESUVOVCcsXG5cdCAgICBBRERfU1RFUDogJ0FERF9TVEVQJyxcblx0ICAgIFVQREFURV9WQUxVRTogJ1VQREFURV9WQUxVRScsXG5cdCAgICBTRVJWRVJfUkVRVUVTVDogXCJTRVJWRVJfUkVRVUVTVFwiLFxuXHQgICAgT1BFTl9DT05URU5UOiBcIk9QRU5fQ09OVEVOVFwiLFxuXHQgICAgQ0xPU0VfUkVDSVBFOiBcIkNMT1NFX1JFQ0lQRVwiLFxuXHQgICAgQVVUSEVOVElDQVRFOiBcIkFVVEhFTlRJQ0FURVwiLFxuXHQgICAgVVBEQVRFX1VTRVJfU1RBVFVTOiBcIlVQREFURV9VU0VSX1NUQVRVU1wiLFxuXHQgICAgTE9HSU46IFwiTE9HSU5cIixcblx0ICAgIExPR09VVDogXCJMT0dPVVRcIixcblx0ICAgIFVQREFURV9QQVNTV09SRDogXCJVUERBVEVfUEFTU1dPUkRcIixcblx0ICAgIFJFR0lTVEVSOiBcIlJFR0lTVEVSXCIsXG5cdCAgICBOT1RJRlk6IFwiTk9USUZZXCJcblx0fTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IEFjdGlvblR5cGVzO1xuXG4vKioqLyB9KSxcbi8qIDE4OCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9mbHV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODkpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gbmV3IF9mbHV4LkRpc3BhdGNoZXIoKTtcblxuLyoqKi8gfSksXG4vKiAxODkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogQ29weXJpZ2h0IChjKSAyMDE0LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqL1xuXHRcblx0bW9kdWxlLmV4cG9ydHMuRGlzcGF0Y2hlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTkwKTtcblxuXG4vKioqLyB9KSxcbi8qIDE5MCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzKSB7LyoqXG5cdCAqIENvcHlyaWdodCAoYykgMjAxNC1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgRGlzcGF0Y2hlclxuXHQgKiBcblx0ICogQHByZXZlbnRNdW5nZVxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdGV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbicpOyB9IH1cblx0XG5cdHZhciBpbnZhcmlhbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5MSk7XG5cdFxuXHR2YXIgX3ByZWZpeCA9ICdJRF8nO1xuXHRcblx0LyoqXG5cdCAqIERpc3BhdGNoZXIgaXMgdXNlZCB0byBicm9hZGNhc3QgcGF5bG9hZHMgdG8gcmVnaXN0ZXJlZCBjYWxsYmFja3MuIFRoaXMgaXNcblx0ICogZGlmZmVyZW50IGZyb20gZ2VuZXJpYyBwdWItc3ViIHN5c3RlbXMgaW4gdHdvIHdheXM6XG5cdCAqXG5cdCAqICAgMSkgQ2FsbGJhY2tzIGFyZSBub3Qgc3Vic2NyaWJlZCB0byBwYXJ0aWN1bGFyIGV2ZW50cy4gRXZlcnkgcGF5bG9hZCBpc1xuXHQgKiAgICAgIGRpc3BhdGNoZWQgdG8gZXZlcnkgcmVnaXN0ZXJlZCBjYWxsYmFjay5cblx0ICogICAyKSBDYWxsYmFja3MgY2FuIGJlIGRlZmVycmVkIGluIHdob2xlIG9yIHBhcnQgdW50aWwgb3RoZXIgY2FsbGJhY2tzIGhhdmVcblx0ICogICAgICBiZWVuIGV4ZWN1dGVkLlxuXHQgKlxuXHQgKiBGb3IgZXhhbXBsZSwgY29uc2lkZXIgdGhpcyBoeXBvdGhldGljYWwgZmxpZ2h0IGRlc3RpbmF0aW9uIGZvcm0sIHdoaWNoXG5cdCAqIHNlbGVjdHMgYSBkZWZhdWx0IGNpdHkgd2hlbiBhIGNvdW50cnkgaXMgc2VsZWN0ZWQ6XG5cdCAqXG5cdCAqICAgdmFyIGZsaWdodERpc3BhdGNoZXIgPSBuZXcgRGlzcGF0Y2hlcigpO1xuXHQgKlxuXHQgKiAgIC8vIEtlZXBzIHRyYWNrIG9mIHdoaWNoIGNvdW50cnkgaXMgc2VsZWN0ZWRcblx0ICogICB2YXIgQ291bnRyeVN0b3JlID0ge2NvdW50cnk6IG51bGx9O1xuXHQgKlxuXHQgKiAgIC8vIEtlZXBzIHRyYWNrIG9mIHdoaWNoIGNpdHkgaXMgc2VsZWN0ZWRcblx0ICogICB2YXIgQ2l0eVN0b3JlID0ge2NpdHk6IG51bGx9O1xuXHQgKlxuXHQgKiAgIC8vIEtlZXBzIHRyYWNrIG9mIHRoZSBiYXNlIGZsaWdodCBwcmljZSBvZiB0aGUgc2VsZWN0ZWQgY2l0eVxuXHQgKiAgIHZhciBGbGlnaHRQcmljZVN0b3JlID0ge3ByaWNlOiBudWxsfVxuXHQgKlxuXHQgKiBXaGVuIGEgdXNlciBjaGFuZ2VzIHRoZSBzZWxlY3RlZCBjaXR5LCB3ZSBkaXNwYXRjaCB0aGUgcGF5bG9hZDpcblx0ICpcblx0ICogICBmbGlnaHREaXNwYXRjaGVyLmRpc3BhdGNoKHtcblx0ICogICAgIGFjdGlvblR5cGU6ICdjaXR5LXVwZGF0ZScsXG5cdCAqICAgICBzZWxlY3RlZENpdHk6ICdwYXJpcydcblx0ICogICB9KTtcblx0ICpcblx0ICogVGhpcyBwYXlsb2FkIGlzIGRpZ2VzdGVkIGJ5IGBDaXR5U3RvcmVgOlxuXHQgKlxuXHQgKiAgIGZsaWdodERpc3BhdGNoZXIucmVnaXN0ZXIoZnVuY3Rpb24ocGF5bG9hZCkge1xuXHQgKiAgICAgaWYgKHBheWxvYWQuYWN0aW9uVHlwZSA9PT0gJ2NpdHktdXBkYXRlJykge1xuXHQgKiAgICAgICBDaXR5U3RvcmUuY2l0eSA9IHBheWxvYWQuc2VsZWN0ZWRDaXR5O1xuXHQgKiAgICAgfVxuXHQgKiAgIH0pO1xuXHQgKlxuXHQgKiBXaGVuIHRoZSB1c2VyIHNlbGVjdHMgYSBjb3VudHJ5LCB3ZSBkaXNwYXRjaCB0aGUgcGF5bG9hZDpcblx0ICpcblx0ICogICBmbGlnaHREaXNwYXRjaGVyLmRpc3BhdGNoKHtcblx0ICogICAgIGFjdGlvblR5cGU6ICdjb3VudHJ5LXVwZGF0ZScsXG5cdCAqICAgICBzZWxlY3RlZENvdW50cnk6ICdhdXN0cmFsaWEnXG5cdCAqICAgfSk7XG5cdCAqXG5cdCAqIFRoaXMgcGF5bG9hZCBpcyBkaWdlc3RlZCBieSBib3RoIHN0b3Jlczpcblx0ICpcblx0ICogICBDb3VudHJ5U3RvcmUuZGlzcGF0Y2hUb2tlbiA9IGZsaWdodERpc3BhdGNoZXIucmVnaXN0ZXIoZnVuY3Rpb24ocGF5bG9hZCkge1xuXHQgKiAgICAgaWYgKHBheWxvYWQuYWN0aW9uVHlwZSA9PT0gJ2NvdW50cnktdXBkYXRlJykge1xuXHQgKiAgICAgICBDb3VudHJ5U3RvcmUuY291bnRyeSA9IHBheWxvYWQuc2VsZWN0ZWRDb3VudHJ5O1xuXHQgKiAgICAgfVxuXHQgKiAgIH0pO1xuXHQgKlxuXHQgKiBXaGVuIHRoZSBjYWxsYmFjayB0byB1cGRhdGUgYENvdW50cnlTdG9yZWAgaXMgcmVnaXN0ZXJlZCwgd2Ugc2F2ZSBhIHJlZmVyZW5jZVxuXHQgKiB0byB0aGUgcmV0dXJuZWQgdG9rZW4uIFVzaW5nIHRoaXMgdG9rZW4gd2l0aCBgd2FpdEZvcigpYCwgd2UgY2FuIGd1YXJhbnRlZVxuXHQgKiB0aGF0IGBDb3VudHJ5U3RvcmVgIGlzIHVwZGF0ZWQgYmVmb3JlIHRoZSBjYWxsYmFjayB0aGF0IHVwZGF0ZXMgYENpdHlTdG9yZWBcblx0ICogbmVlZHMgdG8gcXVlcnkgaXRzIGRhdGEuXG5cdCAqXG5cdCAqICAgQ2l0eVN0b3JlLmRpc3BhdGNoVG9rZW4gPSBmbGlnaHREaXNwYXRjaGVyLnJlZ2lzdGVyKGZ1bmN0aW9uKHBheWxvYWQpIHtcblx0ICogICAgIGlmIChwYXlsb2FkLmFjdGlvblR5cGUgPT09ICdjb3VudHJ5LXVwZGF0ZScpIHtcblx0ICogICAgICAgLy8gYENvdW50cnlTdG9yZS5jb3VudHJ5YCBtYXkgbm90IGJlIHVwZGF0ZWQuXG5cdCAqICAgICAgIGZsaWdodERpc3BhdGNoZXIud2FpdEZvcihbQ291bnRyeVN0b3JlLmRpc3BhdGNoVG9rZW5dKTtcblx0ICogICAgICAgLy8gYENvdW50cnlTdG9yZS5jb3VudHJ5YCBpcyBub3cgZ3VhcmFudGVlZCB0byBiZSB1cGRhdGVkLlxuXHQgKlxuXHQgKiAgICAgICAvLyBTZWxlY3QgdGhlIGRlZmF1bHQgY2l0eSBmb3IgdGhlIG5ldyBjb3VudHJ5XG5cdCAqICAgICAgIENpdHlTdG9yZS5jaXR5ID0gZ2V0RGVmYXVsdENpdHlGb3JDb3VudHJ5KENvdW50cnlTdG9yZS5jb3VudHJ5KTtcblx0ICogICAgIH1cblx0ICogICB9KTtcblx0ICpcblx0ICogVGhlIHVzYWdlIG9mIGB3YWl0Rm9yKClgIGNhbiBiZSBjaGFpbmVkLCBmb3IgZXhhbXBsZTpcblx0ICpcblx0ICogICBGbGlnaHRQcmljZVN0b3JlLmRpc3BhdGNoVG9rZW4gPVxuXHQgKiAgICAgZmxpZ2h0RGlzcGF0Y2hlci5yZWdpc3RlcihmdW5jdGlvbihwYXlsb2FkKSB7XG5cdCAqICAgICAgIHN3aXRjaCAocGF5bG9hZC5hY3Rpb25UeXBlKSB7XG5cdCAqICAgICAgICAgY2FzZSAnY291bnRyeS11cGRhdGUnOlxuXHQgKiAgICAgICAgIGNhc2UgJ2NpdHktdXBkYXRlJzpcblx0ICogICAgICAgICAgIGZsaWdodERpc3BhdGNoZXIud2FpdEZvcihbQ2l0eVN0b3JlLmRpc3BhdGNoVG9rZW5dKTtcblx0ICogICAgICAgICAgIEZsaWdodFByaWNlU3RvcmUucHJpY2UgPVxuXHQgKiAgICAgICAgICAgICBnZXRGbGlnaHRQcmljZVN0b3JlKENvdW50cnlTdG9yZS5jb3VudHJ5LCBDaXR5U3RvcmUuY2l0eSk7XG5cdCAqICAgICAgICAgICBicmVhaztcblx0ICogICAgIH1cblx0ICogICB9KTtcblx0ICpcblx0ICogVGhlIGBjb3VudHJ5LXVwZGF0ZWAgcGF5bG9hZCB3aWxsIGJlIGd1YXJhbnRlZWQgdG8gaW52b2tlIHRoZSBzdG9yZXMnXG5cdCAqIHJlZ2lzdGVyZWQgY2FsbGJhY2tzIGluIG9yZGVyOiBgQ291bnRyeVN0b3JlYCwgYENpdHlTdG9yZWAsIHRoZW5cblx0ICogYEZsaWdodFByaWNlU3RvcmVgLlxuXHQgKi9cblx0XG5cdHZhciBEaXNwYXRjaGVyID0gKGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBEaXNwYXRjaGVyKCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERpc3BhdGNoZXIpO1xuXHRcblx0ICAgIHRoaXMuX2NhbGxiYWNrcyA9IHt9O1xuXHQgICAgdGhpcy5faXNEaXNwYXRjaGluZyA9IGZhbHNlO1xuXHQgICAgdGhpcy5faXNIYW5kbGVkID0ge307XG5cdCAgICB0aGlzLl9pc1BlbmRpbmcgPSB7fTtcblx0ICAgIHRoaXMuX2xhc3RJRCA9IDE7XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBSZWdpc3RlcnMgYSBjYWxsYmFjayB0byBiZSBpbnZva2VkIHdpdGggZXZlcnkgZGlzcGF0Y2hlZCBwYXlsb2FkLiBSZXR1cm5zXG5cdCAgICogYSB0b2tlbiB0aGF0IGNhbiBiZSB1c2VkIHdpdGggYHdhaXRGb3IoKWAuXG5cdCAgICovXG5cdFxuXHQgIERpc3BhdGNoZXIucHJvdG90eXBlLnJlZ2lzdGVyID0gZnVuY3Rpb24gcmVnaXN0ZXIoY2FsbGJhY2spIHtcblx0ICAgIHZhciBpZCA9IF9wcmVmaXggKyB0aGlzLl9sYXN0SUQrKztcblx0ICAgIHRoaXMuX2NhbGxiYWNrc1tpZF0gPSBjYWxsYmFjaztcblx0ICAgIHJldHVybiBpZDtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBSZW1vdmVzIGEgY2FsbGJhY2sgYmFzZWQgb24gaXRzIHRva2VuLlxuXHQgICAqL1xuXHRcblx0ICBEaXNwYXRjaGVyLnByb3RvdHlwZS51bnJlZ2lzdGVyID0gZnVuY3Rpb24gdW5yZWdpc3RlcihpZCkge1xuXHQgICAgIXRoaXMuX2NhbGxiYWNrc1tpZF0gPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRGlzcGF0Y2hlci51bnJlZ2lzdGVyKC4uLik6IGAlc2AgZG9lcyBub3QgbWFwIHRvIGEgcmVnaXN0ZXJlZCBjYWxsYmFjay4nLCBpZCkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXHQgICAgZGVsZXRlIHRoaXMuX2NhbGxiYWNrc1tpZF07XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogV2FpdHMgZm9yIHRoZSBjYWxsYmFja3Mgc3BlY2lmaWVkIHRvIGJlIGludm9rZWQgYmVmb3JlIGNvbnRpbnVpbmcgZXhlY3V0aW9uXG5cdCAgICogb2YgdGhlIGN1cnJlbnQgY2FsbGJhY2suIFRoaXMgbWV0aG9kIHNob3VsZCBvbmx5IGJlIHVzZWQgYnkgYSBjYWxsYmFjayBpblxuXHQgICAqIHJlc3BvbnNlIHRvIGEgZGlzcGF0Y2hlZCBwYXlsb2FkLlxuXHQgICAqL1xuXHRcblx0ICBEaXNwYXRjaGVyLnByb3RvdHlwZS53YWl0Rm9yID0gZnVuY3Rpb24gd2FpdEZvcihpZHMpIHtcblx0ICAgICF0aGlzLl9pc0Rpc3BhdGNoaW5nID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0Rpc3BhdGNoZXIud2FpdEZvciguLi4pOiBNdXN0IGJlIGludm9rZWQgd2hpbGUgZGlzcGF0Y2hpbmcuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXHQgICAgZm9yICh2YXIgaWkgPSAwOyBpaSA8IGlkcy5sZW5ndGg7IGlpKyspIHtcblx0ICAgICAgdmFyIGlkID0gaWRzW2lpXTtcblx0ICAgICAgaWYgKHRoaXMuX2lzUGVuZGluZ1tpZF0pIHtcblx0ICAgICAgICAhdGhpcy5faXNIYW5kbGVkW2lkXSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdEaXNwYXRjaGVyLndhaXRGb3IoLi4uKTogQ2lyY3VsYXIgZGVwZW5kZW5jeSBkZXRlY3RlZCB3aGlsZSAnICsgJ3dhaXRpbmcgZm9yIGAlc2AuJywgaWQpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0ICAgICAgICBjb250aW51ZTtcblx0ICAgICAgfVxuXHQgICAgICAhdGhpcy5fY2FsbGJhY2tzW2lkXSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdEaXNwYXRjaGVyLndhaXRGb3IoLi4uKTogYCVzYCBkb2VzIG5vdCBtYXAgdG8gYSByZWdpc3RlcmVkIGNhbGxiYWNrLicsIGlkKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdCAgICAgIHRoaXMuX2ludm9rZUNhbGxiYWNrKGlkKTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBEaXNwYXRjaGVzIGEgcGF5bG9hZCB0byBhbGwgcmVnaXN0ZXJlZCBjYWxsYmFja3MuXG5cdCAgICovXG5cdFxuXHQgIERpc3BhdGNoZXIucHJvdG90eXBlLmRpc3BhdGNoID0gZnVuY3Rpb24gZGlzcGF0Y2gocGF5bG9hZCkge1xuXHQgICAgISF0aGlzLl9pc0Rpc3BhdGNoaW5nID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0Rpc3BhdGNoLmRpc3BhdGNoKC4uLik6IENhbm5vdCBkaXNwYXRjaCBpbiB0aGUgbWlkZGxlIG9mIGEgZGlzcGF0Y2guJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXHQgICAgdGhpcy5fc3RhcnREaXNwYXRjaGluZyhwYXlsb2FkKTtcblx0ICAgIHRyeSB7XG5cdCAgICAgIGZvciAodmFyIGlkIGluIHRoaXMuX2NhbGxiYWNrcykge1xuXHQgICAgICAgIGlmICh0aGlzLl9pc1BlbmRpbmdbaWRdKSB7XG5cdCAgICAgICAgICBjb250aW51ZTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5faW52b2tlQ2FsbGJhY2soaWQpO1xuXHQgICAgICB9XG5cdCAgICB9IGZpbmFsbHkge1xuXHQgICAgICB0aGlzLl9zdG9wRGlzcGF0Y2hpbmcoKTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBJcyB0aGlzIERpc3BhdGNoZXIgY3VycmVudGx5IGRpc3BhdGNoaW5nLlxuXHQgICAqL1xuXHRcblx0ICBEaXNwYXRjaGVyLnByb3RvdHlwZS5pc0Rpc3BhdGNoaW5nID0gZnVuY3Rpb24gaXNEaXNwYXRjaGluZygpIHtcblx0ICAgIHJldHVybiB0aGlzLl9pc0Rpc3BhdGNoaW5nO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIENhbGwgdGhlIGNhbGxiYWNrIHN0b3JlZCB3aXRoIHRoZSBnaXZlbiBpZC4gQWxzbyBkbyBzb21lIGludGVybmFsXG5cdCAgICogYm9va2tlZXBpbmcuXG5cdCAgICpcblx0ICAgKiBAaW50ZXJuYWxcblx0ICAgKi9cblx0XG5cdCAgRGlzcGF0Y2hlci5wcm90b3R5cGUuX2ludm9rZUNhbGxiYWNrID0gZnVuY3Rpb24gX2ludm9rZUNhbGxiYWNrKGlkKSB7XG5cdCAgICB0aGlzLl9pc1BlbmRpbmdbaWRdID0gdHJ1ZTtcblx0ICAgIHRoaXMuX2NhbGxiYWNrc1tpZF0odGhpcy5fcGVuZGluZ1BheWxvYWQpO1xuXHQgICAgdGhpcy5faXNIYW5kbGVkW2lkXSA9IHRydWU7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogU2V0IHVwIGJvb2trZWVwaW5nIG5lZWRlZCB3aGVuIGRpc3BhdGNoaW5nLlxuXHQgICAqXG5cdCAgICogQGludGVybmFsXG5cdCAgICovXG5cdFxuXHQgIERpc3BhdGNoZXIucHJvdG90eXBlLl9zdGFydERpc3BhdGNoaW5nID0gZnVuY3Rpb24gX3N0YXJ0RGlzcGF0Y2hpbmcocGF5bG9hZCkge1xuXHQgICAgZm9yICh2YXIgaWQgaW4gdGhpcy5fY2FsbGJhY2tzKSB7XG5cdCAgICAgIHRoaXMuX2lzUGVuZGluZ1tpZF0gPSBmYWxzZTtcblx0ICAgICAgdGhpcy5faXNIYW5kbGVkW2lkXSA9IGZhbHNlO1xuXHQgICAgfVxuXHQgICAgdGhpcy5fcGVuZGluZ1BheWxvYWQgPSBwYXlsb2FkO1xuXHQgICAgdGhpcy5faXNEaXNwYXRjaGluZyA9IHRydWU7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogQ2xlYXIgYm9va2tlZXBpbmcgdXNlZCBmb3IgZGlzcGF0Y2hpbmcuXG5cdCAgICpcblx0ICAgKiBAaW50ZXJuYWxcblx0ICAgKi9cblx0XG5cdCAgRGlzcGF0Y2hlci5wcm90b3R5cGUuX3N0b3BEaXNwYXRjaGluZyA9IGZ1bmN0aW9uIF9zdG9wRGlzcGF0Y2hpbmcoKSB7XG5cdCAgICBkZWxldGUgdGhpcy5fcGVuZGluZ1BheWxvYWQ7XG5cdCAgICB0aGlzLl9pc0Rpc3BhdGNoaW5nID0gZmFsc2U7XG5cdCAgfTtcblx0XG5cdCAgcmV0dXJuIERpc3BhdGNoZXI7XG5cdH0pKCk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IERpc3BhdGNoZXI7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpKSlcblxuLyoqKi8gfSksXG4vKiAxOTEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgey8qKlxuXHQgKiBDb3B5cmlnaHQgKGMpIDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cblx0ICpcblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHQvKipcblx0ICogVXNlIGludmFyaWFudCgpIHRvIGFzc2VydCBzdGF0ZSB3aGljaCB5b3VyIHByb2dyYW0gYXNzdW1lcyB0byBiZSB0cnVlLlxuXHQgKlxuXHQgKiBQcm92aWRlIHNwcmludGYtc3R5bGUgZm9ybWF0IChvbmx5ICVzIGlzIHN1cHBvcnRlZCkgYW5kIGFyZ3VtZW50c1xuXHQgKiB0byBwcm92aWRlIGluZm9ybWF0aW9uIGFib3V0IHdoYXQgYnJva2UgYW5kIHdoYXQgeW91IHdlcmVcblx0ICogZXhwZWN0aW5nLlxuXHQgKlxuXHQgKiBUaGUgaW52YXJpYW50IG1lc3NhZ2Ugd2lsbCBiZSBzdHJpcHBlZCBpbiBwcm9kdWN0aW9uLCBidXQgdGhlIGludmFyaWFudFxuXHQgKiB3aWxsIHJlbWFpbiB0byBlbnN1cmUgbG9naWMgZG9lcyBub3QgZGlmZmVyIGluIHByb2R1Y3Rpb24uXG5cdCAqL1xuXHRcblx0dmFyIHZhbGlkYXRlRm9ybWF0ID0gZnVuY3Rpb24gdmFsaWRhdGVGb3JtYXQoZm9ybWF0KSB7fTtcblx0XG5cdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgdmFsaWRhdGVGb3JtYXQgPSBmdW5jdGlvbiB2YWxpZGF0ZUZvcm1hdChmb3JtYXQpIHtcblx0ICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFyaWFudCByZXF1aXJlcyBhbiBlcnJvciBtZXNzYWdlIGFyZ3VtZW50Jyk7XG5cdCAgICB9XG5cdCAgfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaW52YXJpYW50KGNvbmRpdGlvbiwgZm9ybWF0LCBhLCBiLCBjLCBkLCBlLCBmKSB7XG5cdCAgdmFsaWRhdGVGb3JtYXQoZm9ybWF0KTtcblx0XG5cdCAgaWYgKCFjb25kaXRpb24pIHtcblx0ICAgIHZhciBlcnJvcjtcblx0ICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICBlcnJvciA9IG5ldyBFcnJvcignTWluaWZpZWQgZXhjZXB0aW9uIG9jY3VycmVkOyB1c2UgdGhlIG5vbi1taW5pZmllZCBkZXYgZW52aXJvbm1lbnQgJyArICdmb3IgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZSBhbmQgYWRkaXRpb25hbCBoZWxwZnVsIHdhcm5pbmdzLicpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdmFyIGFyZ3MgPSBbYSwgYiwgYywgZCwgZSwgZl07XG5cdCAgICAgIHZhciBhcmdJbmRleCA9IDA7XG5cdCAgICAgIGVycm9yID0gbmV3IEVycm9yKGZvcm1hdC5yZXBsYWNlKC8lcy9nLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIGFyZ3NbYXJnSW5kZXgrK107XG5cdCAgICAgIH0pKTtcblx0ICAgICAgZXJyb3IubmFtZSA9ICdJbnZhcmlhbnQgVmlvbGF0aW9uJztcblx0ICAgIH1cblx0XG5cdCAgICBlcnJvci5mcmFtZXNUb1BvcCA9IDE7IC8vIHdlIGRvbid0IGNhcmUgYWJvdXQgaW52YXJpYW50J3Mgb3duIGZyYW1lXG5cdCAgICB0aHJvdyBlcnJvcjtcblx0ICB9XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaW52YXJpYW50O1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg0KSkpXG5cbi8qKiovIH0pLFxuLyogMTkyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0Ly8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblx0XG5cdC8vIGxvYWQgdGhlIHN0eWxlc1xuXHR2YXIgY29udGVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTkzKTtcblx0aWYgKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXHQvLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG5cdHZhciB1cGRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2OCkoY29udGVudCwge30pO1xuXHRpZiAoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cdC8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcblx0aWYgKGZhbHNlKSB7XG5cdFx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRpZiAoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vc2VhcmNoLnNjc3NcIiwgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuL3NlYXJjaC5zY3NzXCIpO1xuXHRcdFx0XHRpZiAodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uICgpIHtcblx0XHRcdHVwZGF0ZSgpO1xuXHRcdH0pO1xuXHR9XG5cbi8qKiovIH0pLFxuLyogMTkzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0ZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjcpKCk7XG5cdC8vIGltcG9ydHNcblx0XG5cdFxuXHQvLyBtb2R1bGVcblx0ZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLnNlYXJjaD5pbnB1dHtmb250LXNpemU6MTZweDtoZWlnaHQ6MjBweDt3aWR0aDo1NDBweDtjb2xvcjojMmUyYzJkO2JvcmRlci1yYWRpdXM6NHB4O2JhY2tncm91bmQtaW1hZ2U6dXJsKFxcXCJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJRQUFBQVFDQVlBQUFBV0dGOGJBQUFBQm1KTFIwUUFxZ0NxQUtvaE9LNElBQUFBQ1hCSVdYTUFBQXNUQUFBTEV3RUFtcHdZQUFBQUIzUkpUVVVINEFzUkJCd3g5VVZGY2dBQUFTQkpSRUZVT011dGxMMUtBMEVVaGIrTlZ1NHJCSVFRT3p2ekVnWXRvdUFybk5ydFhTVHBJbWg5WDBHSUZnRjlDbHN0RkYwaGo2QldDalozWkpEc1RFQlBNejk3K0RoMzdzNFVSREt6RXFpQmZhRHYyMC9BSEJoTGVpZWpJb0lkQUxPTS8xRFNWY3JRV1FLN0FRYVNDa2tGTVBBOWdKbVpqWklKdmN3M1gxZVNMcFlaemV3WU9QZGxLZW1qTFdFZGtyWEJBUHhiU0hxYUtublA1elY1QmM5UkNyamxDZTV5dE1pem1XektmNm9EUFBxaDcrVE1rYWRKQWVjK0g2OFFZT0xqWlFvWVFFTXpxeExwS21BMzErWEN6U01nM0lCYjRDUTB3TXVjUkxBRzZFdjZ5bDI5R05xbXhqdThBSHFTUGx1N0xPa2FLSUV6NFBVWFpBcHMrSU94QUxyQXM1bXR0eVpjVldhMkJydzQ5RjdTOXAvK1F6KzdIdkFRdlFFLytnWUxLVjZ0NmkyQjdnQUFBQUJKUlU1RXJrSmdnZz09XFxcIik7YmFja2dyb3VuZC1wb3NpdGlvbjoxMDAlIDZweDtiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7Ym9yZGVyLWNvbG9yOiMyZTJjMmQ7YmFja2dyb3VuZC1jb2xvcjojZmZmO3BhZGRpbmc6NXB4fS5zZWFyY2g+aW5wdXQ6Zm9jdXN7b3V0bGluZTpub25lfS5zZWFyY2guc2hvdyBpbnB1dHtib3JkZXItcmFkaXVzOjVweCA1cHggMCAwfS5zZWFyY2guc2hvdyAucmVzdWx0c3t0cmFuc2Zvcm06cGVyc3BlY3RpdmUoMCkgcm90YXRlWCgwZGVnKX0uc2VhcmNoIC5yZXN1bHRze3dpZHRoOjU1MnB4O2JhY2tncm91bmQtY29sb3I6I2ZmZjtib3gtc2hhZG93OjVweCA1cHggMTBweCAjMDAwO3Bvc2l0aW9uOmFic29sdXRlO2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47anVzdGlmeS1jb250ZW50OmZsZXgtc3RhcnQ7dHJhbnNmb3JtOnBlcnNwZWN0aXZlKDgwMHB4KSByb3RhdGVYKC05MGRlZyk7dHJhbnNmb3JtLW9yaWdpbjp0b3A7dHJhbnNpdGlvbjphbGwgLjVzIGxpbmVhcjt6LWluZGV4OjEwO292ZXJmbG93OnNjcm9sbH0uc2VhcmNoIC5yZXN1bHRzIC5yb3ctY29udGVudHtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246cm93O2p1c3RpZnktY29udGVudDpmbGV4LXN0YXJ0O2FsaWduLWl0ZW1zOnN0cmV0Y2g7bWFyZ2luOjAgMTBweDtwYWRkaW5nOjVweCAwO2N1cnNvcjpwb2ludGVyfS5zZWFyY2ggLnJlc3VsdHMgLnJvdy1jb250ZW50IC5kZXRhaWxze3BhZGRpbmctbGVmdDoyMHB4O2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47anVzdGlmeS1jb250ZW50OmNlbnRlcn0uc2VhcmNoIC5yZXN1bHRzIC5yb3ctY29udGVudCAuZGV0YWlscyAudGl0bGV7Zm9udC1zaXplOjIwcHg7Y29sb3I6IzJlMmMyZH0uc2VhcmNoIC5yZXN1bHRzIC5yb3ctY29udGVudCAuZGV0YWlscyAudGl0bGUgLmhpZ2hsaWdodHtmb250LXdlaWdodDo3MDA7Zm9udC1zaXplOjIwcHh9LnNlYXJjaCAucmVzdWx0cyAucm93LWNvbnRlbnQgLmRldGFpbHMgLmF1dGhvcntmb250LXNpemU6MTRweDtjb2xvcjojNTg1NjU4fS5zZWFyY2ggLnJlc3VsdHMgLnJvdy1jb250ZW50IC5pbWFnZXt3aWR0aDo1MHB4O2hlaWdodDo1MHB4fS5zZWFyY2ggLnJlc3VsdHMgLnJvd3tib3JkZXItdG9wOjFweCBzb2xpZCAjM2EzNTNjO2JvcmRlci1ib3R0b206MXB4IHNvbGlkICMzYTM1M2N9LnNlYXJjaCAucmVzdWx0cyAucm93LmFjdGl2ZSwuc2VhcmNoIC5yZXN1bHRzIC5yb3c6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojM2EzNTNjfS5zZWFyY2ggLnJlc3VsdHMgLnJvdy5hY3RpdmUgLnRpdGxlLC5zZWFyY2ggLnJlc3VsdHMgLnJvdzpob3ZlciAudGl0bGV7Y29sb3I6I2YxZjFmMX0uc2VhcmNoIC5yZXN1bHRzIC5yb3cuYWN0aXZlIC5hdXRob3IsLnNlYXJjaCAucmVzdWx0cyAucm93OmhvdmVyIC5hdXRob3J7Y29sb3I6I2IzYWZhZn0uc2VhcmNoIC5yZXN1bHRzIC5yb3c6bGFzdC1jaGlsZCAucm93LWNvbnRlbnR7Ym9yZGVyLWJvdHRvbTpub25lO3BhZGRpbmctYm90dG9tOjEwcHh9LnNlYXJjaCAucmVzdWx0cyAucm93OmZpcnN0LWNoaWxkIC5yb3ctY29udGVudHtib3JkZXItdG9wOm5vbmU7cGFkZGluZy10b3A6MTBweH1cIiwgXCJcIl0pO1xuXHRcblx0Ly8gZXhwb3J0c1xuXG5cbi8qKiovIH0pLFxuLyogMTk0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0Ly8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblx0XG5cdC8vIGxvYWQgdGhlIHN0eWxlc1xuXHR2YXIgY29udGVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTk1KTtcblx0aWYgKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXHQvLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG5cdHZhciB1cGRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2OCkoY29udGVudCwge30pO1xuXHRpZiAoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cdC8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcblx0aWYgKGZhbHNlKSB7XG5cdFx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRpZiAoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vaGVhZGVyLnNjc3NcIiwgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuL2hlYWRlci5zY3NzXCIpO1xuXHRcdFx0XHRpZiAodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uICgpIHtcblx0XHRcdHVwZGF0ZSgpO1xuXHRcdH0pO1xuXHR9XG5cbi8qKiovIH0pLFxuLyogMTk1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0ZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjcpKCk7XG5cdC8vIGltcG9ydHNcblx0XG5cdFxuXHQvLyBtb2R1bGVcblx0ZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmhlYWRlci1jb250ZW50e2JhY2tncm91bmQtY29sb3I6I2ZmZjtoZWlnaHQ6NjBweDtwYWRkaW5nOjAgMjVweDtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246cm93O2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO2FsaWduLWl0ZW1zOmNlbnRlcn0uaGVhZGVyLWNvbnRlbnQgLnVzZXItbWVudXtwb3NpdGlvbjpyZWxhdGl2ZTtjb2xvcjojNTg1NjU4O2N1cnNvcjpwb2ludGVyfS5oZWFkZXItY29udGVudCAudXNlci1tZW51IC51c2VyLWxhYmVse3BhZGRpbmctcmlnaHQ6MTBweDtjdXJzb3I6cG9pbnRlcn0uaGVhZGVyLWNvbnRlbnQgLnVzZXItbWVudSAudXNlci1sYWJlbDpob3Zlcnt0ZXh0LWRlY29yYXRpb246dW5kZXJsaW5lO2NvbG9yOiMyZTJjMmR9LmhlYWRlci1jb250ZW50IC51c2VyLW1lbnUuc2hvdy1tZW51IC5tZW51LW9wdGlvbnN7dHJhbnNmb3JtOnBlcnNwZWN0aXZlKDApIHJvdGF0ZVgoMGRlZyl9LmhlYWRlci1jb250ZW50IC51c2VyLW1lbnUgLm1lbnUtb3B0aW9uc3tkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2JhY2tncm91bmQtY29sb3I6I2ZmZjtib3gtc2hhZG93OjVweCA1cHggMTBweCAjMDAwO3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6MDtyaWdodDowO3RyYW5zZm9ybTpwZXJzcGVjdGl2ZSg4MDBweCkgcm90YXRlWCgtOTBkZWcpO3RyYW5zZm9ybS1vcmlnaW46dG9wO3RyYW5zaXRpb246YWxsIC41cyBsaW5lYXI7ei1pbmRleDoxMH0uaGVhZGVyLWNvbnRlbnQgLnVzZXItbWVudSAubWVudS1vcHRpb25zIC5pdGVte3BhZGRpbmc6NXB4O2JvcmRlci1ib3R0b206MXB4IHNvbGlkICMyZTJjMmQ7Y3Vyc29yOnBvaW50ZXJ9LmhlYWRlci1jb250ZW50IC51c2VyLW1lbnUgLm1lbnUtb3B0aW9ucyAuaXRlbTpsYXN0LWNoaWxke2JvcmRlci1ib3R0b206bm9uZX0uaGVhZGVyLWNvbnRlbnQgLnVzZXItbWVudSAubWVudS1vcHRpb25zIC5pdGVtOmhvdmVye2JhY2tncm91bmQtY29sb3I6IzJlMmMyZDtjb2xvcjojYjNhZmFmfS5oZWFkZXItY29udGVudCAudXNlci1tZW51IC5tZW51LW9wdGlvbnMgLml0ZW06aG92ZXIgLmhpZ2hsaWdodHtjb2xvcjojZjFmMWYxfVwiLCBcIlwiXSk7XG5cdFxuXHQvLyBleHBvcnRzXG5cblxuLyoqKi8gfSksXG4vKiAxOTYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblx0XG5cdHZhciBfcmVhY3REb20gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1OCk7XG5cdFxuXHR2YXIgX3JlYWN0RG9tMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0RG9tKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDE5Nyk7XG5cdFxuXHR2YXIgTmF2aWdhdGlvbiA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVDbGFzcyh7XG5cdCAgICBkaXNwbGF5TmFtZTogJ05hdmlnYXRpb24nLFxuXHRcblx0ICAgIHRvZ2dsZTogZnVuY3Rpb24gdG9nZ2xlKCkge1xuXHQgICAgICAgIGlmIChfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUodGhpcykuY2xhc3NMaXN0LmNvbnRhaW5zKFwic2hvd1wiKSkge1xuXHQgICAgICAgICAgICBfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUodGhpcykuY2xhc3NMaXN0LnJlbW92ZShcInNob3dcIik7XG5cdCAgICAgICAgICAgIF9yZWFjdERvbTIuZGVmYXVsdC5maW5kRE9NTm9kZSh0aGlzKS5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGlkZSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKHRoaXMpLmNsYXNzTGlzdC5hZGQoXCJzaG93XCIpO1xuXHQgICAgICAgICAgICBfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUodGhpcykuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hpZGUpO1xuXHQgICAgICAgIH1cblx0ICAgIH0sXG5cdCAgICBfaGlkZTogZnVuY3Rpb24gX2hpZGUoKSB7XG5cdCAgICAgICAgX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKHRoaXMpLmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93XCIpO1xuXHQgICAgfSxcblx0ICAgIF9nZXRJZDogZnVuY3Rpb24gX2dldElkKGVsZW1lbnQpIHtcblx0ICAgICAgICB2YXIgY3VycmVudEVsZW1lbnQgPSBlbGVtZW50O1xuXHQgICAgICAgIHdoaWxlICghY3VycmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibGlua1wiKSkge1xuXHQgICAgICAgICAgICBjdXJyZW50RWxlbWVudCA9IGN1cnJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQ7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiBjdXJyZW50RWxlbWVudC5kYXRhc2V0LmlkO1xuXHQgICAgfSxcblx0ICAgIGhhbmRsZUNsaWNrOiBmdW5jdGlvbiBoYW5kbGVDbGljayhlKSB7XG5cdCAgICAgICAgdGhpcy5wcm9wcy5hT3BlbkNvbnRlbnQodGhpcy5fZ2V0SWQoZS50YXJnZXQpKTtcblx0ICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHQgICAgfSxcblx0ICAgIGhhbmRsZUNsb3NlOiBmdW5jdGlvbiBoYW5kbGVDbG9zZShlKSB7XG5cdCAgICAgICAgdGhpcy5wcm9wcy5hQ2xvc2VSZWNpcGUodGhpcy5fZ2V0SWQoZS50YXJnZXQpKTtcblx0ICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHQgICAgfSxcblx0ICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuXHQgICAgICAgIHZhciBuYXYgPSB0aGlzO1xuXHQgICAgICAgIHZhciBsaXN0ID0gdGhpcy5wcm9wcy5zT3Blbkxpc3QubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICAgIHZhciBjbGFzc2VzID0gXCJsaW5rIGhvdmVyXCI7XG5cdCAgICAgICAgICAgIGlmIChpdGVtLmFjdGl2ZSkge1xuXHQgICAgICAgICAgICAgICAgY2xhc3NlcyA9IFwibGluayBob3ZlciBhY3RpdmVcIjtcblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgaWYgKGl0ZW0uaWQgPT0gXCJob21lXCIpIHtcblx0ICAgICAgICAgICAgICAgIGNsYXNzZXMgKz0gXCIgdGktaG9tZVwiO1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICdsaScsXG5cdCAgICAgICAgICAgICAgICAgICAgeyBrZXk6IGl0ZW0uaWQsIGNsYXNzTmFtZTogY2xhc3NlcywgJ2RhdGEtaWQnOiAnaG9tZScsIG9uQ2xpY2s6IG5hdi5oYW5kbGVDbGljayB9LFxuXHQgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAnc3BhbicsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAndGV4dCcgfSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgJ0hvbWUnXG5cdCAgICAgICAgICAgICAgICAgICAgKVxuXHQgICAgICAgICAgICAgICAgKTtcblx0ICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVtLmlkID09IFwibmV3XCIpIHtcblx0ICAgICAgICAgICAgICAgIGlmIChuYXYucHJvcHMuc1VzZXIgIT0gbnVsbCkge1xuXHQgICAgICAgICAgICAgICAgICAgIGNsYXNzZXMgKz0gXCIgdGktcGx1c1wiO1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICAgICAgICAgJ2xpJyxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgeyBrZXk6IGl0ZW0uaWQsIGNsYXNzTmFtZTogY2xhc3NlcywgJ2RhdGEtaWQnOiAnbmV3Jywgb25DbGljazogbmF2LnByb3BzLmFOZXdSZWNpcGUgfSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc3BhbicsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3RleHQnIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAnTmV3J1xuXHQgICAgICAgICAgICAgICAgICAgICAgICApXG5cdCAgICAgICAgICAgICAgICAgICAgKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVtLmlkID09IFwidXNlclwiKSB7XG5cdCAgICAgICAgICAgICAgICBpZiAobmF2LnByb3BzLnNVc2VyICE9IG51bGwpIHtcblx0ICAgICAgICAgICAgICAgICAgICBjbGFzc2VzICs9IFwiIHRpLXVzZXJcIjtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICdsaScsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHsga2V5OiBpdGVtLmlkLCBjbGFzc05hbWU6IGNsYXNzZXMsICdkYXRhLWlkJzogJ3VzZXInLCBvbkNsaWNrOiBuYXYuaGFuZGxlQ2xpY2sgfSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc3BhbicsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3RleHQnIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAnVXNlciBzZXR0aW5ncydcblx0ICAgICAgICAgICAgICAgICAgICAgICAgKVxuXHQgICAgICAgICAgICAgICAgICAgICk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgdGl0bGUgPSBpdGVtLnJlY2lwZS50aXRsZTtcblx0ICAgICAgICAgICAgICAgIGlmICh0aXRsZSA9PSBcIlwiKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdGl0bGUgPSBcIk5ldy4uLlwiO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICdsaScsXG5cdCAgICAgICAgICAgICAgICAgICAgeyBrZXk6IGl0ZW0uaWQsICdkYXRhLWlkJzogaXRlbS5pZCwgY2xhc3NOYW1lOiBjbGFzc2VzLCBvbkNsaWNrOiBuYXYuaGFuZGxlQ2xpY2sgfSxcblx0ICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaW1nJywgeyBjbGFzc05hbWU6ICdpbWFnZScsIHNyYzogaXRlbS5yZWNpcGUucGljdHVyZSArIFwiP1wiICsgaXRlbS5yZWNpcGUuZGF0ZU1vZGlmaWVkIH0pLFxuXHQgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAnc3BhbicsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAndGV4dCB0cnVuY2F0ZScsIHRpdGxlOiB0aXRsZSB9LFxuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZVxuXHQgICAgICAgICAgICAgICAgICAgICksXG5cdCAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2EnLCB7IGNsYXNzTmFtZTogJ3RpLWNsb3NlJywgb25DbGljazogbmF2LmhhbmRsZUNsb3NlIH0pLFxuXHQgICAgICAgICAgICAgICAgICAgIGNsb3NlXG5cdCAgICAgICAgICAgICAgICApO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgJ25hdicsXG5cdCAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnbmF2aWdhdGlvbicgfSxcblx0ICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAndWwnLFxuXHQgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICduYXZpZ2F0aW9uLWNvbnRlbnQnIH0sXG5cdCAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICAgICAnbGknLFxuXHQgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnbGluaycgfSxcblx0ICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnYScsIHsgY2xhc3NOYW1lOiAndG9nZ2xlJywgb25DbGljazogdGhpcy50b2dnbGUgfSlcblx0ICAgICAgICAgICAgICAgICksXG5cdCAgICAgICAgICAgICAgICBsaXN0XG5cdCAgICAgICAgICAgIClcblx0ICAgICAgICApO1xuXHQgICAgfVxuXHR9KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IE5hdmlnYXRpb247XG5cbi8qKiovIH0pLFxuLyogMTk3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0Ly8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblx0XG5cdC8vIGxvYWQgdGhlIHN0eWxlc1xuXHR2YXIgY29udGVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTk4KTtcblx0aWYgKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXHQvLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG5cdHZhciB1cGRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2OCkoY29udGVudCwge30pO1xuXHRpZiAoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cdC8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcblx0aWYgKGZhbHNlKSB7XG5cdFx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRpZiAoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vbmF2aWdhdGlvbi5zY3NzXCIsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi9uYXZpZ2F0aW9uLnNjc3NcIik7XG5cdFx0XHRcdGlmICh0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24gKCkge1xuXHRcdFx0dXBkYXRlKCk7XG5cdFx0fSk7XG5cdH1cblxuLyoqKi8gfSksXG4vKiAxOTggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2NykoKTtcblx0Ly8gaW1wb3J0c1xuXHRcblx0XG5cdC8vIG1vZHVsZVxuXHRleHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIubmF2aWdhdGlvbnt3aWR0aDo1MHB4O2JhY2tncm91bmQtY29sb3I6IzNhMzUzYzt0cmFuc2l0aW9uOndpZHRoIC41c30ubmF2aWdhdGlvbiAubmF2aWdhdGlvbi1jb250ZW50e3Bvc2l0aW9uOnJlbGF0aXZlO2ZsZXgtZGlyZWN0aW9uOnJvdztqdXN0aWZ5LWNvbnRlbnQ6ZmxleC1zdGFydDthbGlnbi1pdGVtczpzdHJldGNoO2hlaWdodDoxMDAlO2xpc3Qtc3R5bGUtdHlwZTpub25lO21hcmdpbjowO3BhZGRpbmc6MDtvdmVyZmxvdzpoaWRkZW59Lm5hdmlnYXRpb24gLm5hdmlnYXRpb24tY29udGVudCAubGlua3toZWlnaHQ6MzVweDtkaXNwbGF5OmZsZXg7cG9zaXRpb246cmVsYXRpdmU7YWxpZ24taXRlbXM6Y2VudGVyO2xpbmUtaGVpZ2h0OjM1cHg7Y29sb3I6I2YxZjFmMTtwYWRkaW5nOjVweCAwIDVweCAxMHB4O29wYWNpdHk6Ljc1O2N1cnNvcjpwb2ludGVyfS5uYXZpZ2F0aW9uIC5uYXZpZ2F0aW9uLWNvbnRlbnQgLmxpbmsgLnRpLWNsb3Nle3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO3JpZ2h0OjA7Zm9udC1zaXplOi41NWVtO3BhZGRpbmc6M3B4O21hcmdpbjoxcHg7Ym9yZGVyLXJhZGl1czoxMHB4O2JhY2tncm91bmQtY29sb3I6IzAwMDtjb2xvcjojYjNhZmFmfS5uYXZpZ2F0aW9uIC5uYXZpZ2F0aW9uLWNvbnRlbnQgLmxpbmsgLnRpLWNsb3NlOmhvdmVye2NvbG9yOiNmMWYxZjF9Lm5hdmlnYXRpb24gLm5hdmlnYXRpb24tY29udGVudCAubGluazpmaXJzdC1jaGlsZHtkaXNwbGF5OmJsb2NrO3BhZGRpbmc6MH0ubmF2aWdhdGlvbiAubmF2aWdhdGlvbi1jb250ZW50IC5saW5rPi5pbWFnZXt3aWR0aDozMHB4O2hlaWdodDozMHB4O21pbi13aWR0aDozMHB4fS5uYXZpZ2F0aW9uIC5uYXZpZ2F0aW9uLWNvbnRlbnQgLmxpbms+LnRleHR7b3BhY2l0eTowO3BhZGRpbmctbGVmdDoxMHB4fS5uYXZpZ2F0aW9uIC5uYXZpZ2F0aW9uLWNvbnRlbnQgLmxpbms+LnRleHQudHJ1bmNhdGV7d2lkdGg6MTUwcHg7d2hpdGUtc3BhY2U6bm93cmFwO3RleHQtcmVuZGVyaW5nOmF1dG87LXdlYmtpdC1mb250LXNtb290aGluZzphbnRpYWxpYXNlZDtkaXNwbGF5OmlubGluZS1ibG9jaztvdmVyZmxvdzpoaWRkZW47dGV4dC1vdmVyZmxvdzplbGxpcHNpczt0cmFuc2l0aW9uOmFsbCAuNXN9Lm5hdmlnYXRpb24gLm5hdmlnYXRpb24tY29udGVudCAubGluay5hY3RpdmUsLm5hdmlnYXRpb24gLm5hdmlnYXRpb24tY29udGVudCAubGluay5ob3Zlcjpob3ZlciwubmF2aWdhdGlvbiAubmF2aWdhdGlvbi1jb250ZW50IC5saW5rOmZpcnN0LWNoaWxke2JhY2tncm91bmQtY29sb3I6IzJlMmMyZDtvcGFjaXR5OjF9Lm5hdmlnYXRpb24gLm5hdmlnYXRpb24tY29udGVudCAubGluay5hY3RpdmV7Ym9yZGVyLWxlZnQ6M3B4IHNvbGlkICNkZWRhMWQ7cGFkZGluZy1sZWZ0OjdweH0ubmF2aWdhdGlvbiAubmF2aWdhdGlvbi1jb250ZW50IC5saW5rOmJlZm9yZXtmb250LXNpemU6MjZweDtwYWRkaW5nLXJpZ2h0OjVweH0ubmF2aWdhdGlvbiAubmF2aWdhdGlvbi1jb250ZW50IC50b2dnbGV7cGFkZGluZzowO3dpZHRoOjUwcHg7ZmxvYXQ6cmlnaHQ7ZGlzcGxheTpibG9jaztoZWlnaHQ6MzVweH0ubmF2aWdhdGlvbiAubmF2aWdhdGlvbi1jb250ZW50IC50b2dnbGU6YWZ0ZXIsLm5hdmlnYXRpb24gLm5hdmlnYXRpb24tY29udGVudCAudG9nZ2xlOmJlZm9yZXtjb250ZW50OlxcXCIgXFxcIjt0cmFuc2l0aW9uOmFsbCAuNXMgbGluZWFyO2JhY2tncm91bmQtY29sb3I6I2YxZjFmMTtwb3NpdGlvbjphYnNvbHV0ZTtyaWdodDoxNXB4O3dpZHRoOjI1cHg7aGVpZ2h0OjNweDtwYWRkaW5nOjB9Lm5hdmlnYXRpb24gLm5hdmlnYXRpb24tY29udGVudCAudG9nZ2xlOmJlZm9yZXt0b3A6MTBweH0ubmF2aWdhdGlvbiAubmF2aWdhdGlvbi1jb250ZW50IC50b2dnbGU6YWZ0ZXJ7dG9wOjIwcHh9Lm5hdmlnYXRpb24uc2hvd3t3aWR0aDoyMDBweH0ubmF2aWdhdGlvbi5zaG93IC50b2dnbGV7d2lkdGg6MzVweH0ubmF2aWdhdGlvbi5zaG93IC50b2dnbGU6YWZ0ZXIsLm5hdmlnYXRpb24uc2hvdyAudG9nZ2xlOmJlZm9yZXtyaWdodDoxMnB4O3dpZHRoOjE1cHh9Lm5hdmlnYXRpb24uc2hvdyAudG9nZ2xlOmJlZm9yZXt0cmFuc2Zvcm06cm90YXRlKC00NWRlZyl9Lm5hdmlnYXRpb24uc2hvdyAudG9nZ2xlOmFmdGVye3RyYW5zZm9ybTpyb3RhdGUoNDVkZWcpO3RvcDoxOXB4fS5uYXZpZ2F0aW9uLnNob3cgLmxpbms+LnRleHR7b3BhY2l0eToxfUBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi1kZXZpY2Utd2lkdGg6MzIwcHgpIGFuZCAobWF4LWRldmljZS13aWR0aDo0ODBweCl7Lm5hdmlnYXRpb257ei1pbmRleDoxMDtoZWlnaHQ6ODBweDt0cmFuc2l0aW9uOmhlaWdodCAuNXN9Lm5hdmlnYXRpb24gLm5hdmlnYXRpb24tY29udGVudCAubGlua3toZWlnaHQ6ODBweDtsaW5lLWhlaWdodDo4MHB4fS5uYXZpZ2F0aW9uIC5uYXZpZ2F0aW9uLWNvbnRlbnQgLmxpbmsgLnRpLWNsb3Nle21hcmdpbjoxMHB4O2ZvbnQtc2l6ZTouNzVlbX0ubmF2aWdhdGlvbiAubmF2aWdhdGlvbi1jb250ZW50IC5saW5rPi5pbWFnZXt3aWR0aDo2MHB4O2hlaWdodDo2MHB4fS5uYXZpZ2F0aW9uIC5uYXZpZ2F0aW9uLWNvbnRlbnQgLmxpbms+LnRleHQudHJ1bmNhdGV7d2lkdGg6YXV0b30ubmF2aWdhdGlvbiAubmF2aWdhdGlvbi1jb250ZW50IC50b2dnbGV7d2lkdGg6OTBweDtoZWlnaHQ6ODBweH0ubmF2aWdhdGlvbiAubmF2aWdhdGlvbi1jb250ZW50IC50b2dnbGU6YWZ0ZXIsLm5hdmlnYXRpb24gLm5hdmlnYXRpb24tY29udGVudCAudG9nZ2xlOmJlZm9yZXtyaWdodDoxNXB4O3dpZHRoOjUwcHg7aGVpZ2h0OjRweH0ubmF2aWdhdGlvbiAubmF2aWdhdGlvbi1jb250ZW50IC50b2dnbGU6YmVmb3Jle3RvcDozMHB4fS5uYXZpZ2F0aW9uIC5uYXZpZ2F0aW9uLWNvbnRlbnQgLnRvZ2dsZTphZnRlcnt0b3A6NTBweH0ubmF2aWdhdGlvbi5zaG93e2hlaWdodDoxMDAlfS5uYXZpZ2F0aW9uLnNob3cgLnRvZ2dsZXt3aWR0aDoxMTBweH0ubmF2aWdhdGlvbi5zaG93IC50b2dnbGU6YWZ0ZXIsLm5hdmlnYXRpb24uc2hvdyAudG9nZ2xlOmJlZm9yZXt0b3A6MzVweDt3aWR0aDo0MHB4fS5uYXZpZ2F0aW9uLnNob3cgLnRvZ2dsZTpiZWZvcmV7dHJhbnNmb3JtOnJvdGF0ZSg0NWRlZyk7cmlnaHQ6NTBweH0ubmF2aWdhdGlvbi5zaG93IC50b2dnbGU6YWZ0ZXJ7dHJhbnNmb3JtOnJvdGF0ZSgtNDVkZWcpO3JpZ2h0OjIycHh9Lm5hdmlnYXRpb24gLnRpLWNsb3Nle3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO3JpZ2h0OjA7Zm9udC1zaXplOjEwcHg7cGFkZGluZzozcHg7bWFyZ2luOjFweDtib3JkZXItcmFkaXVzOjEwcHg7YmFja2dyb3VuZC1jb2xvcjojMDAwO2NvbG9yOiNiM2FmYWZ9Lm5hdmlnYXRpb24gLnRpLWNsb3NlOmhvdmVye2NvbG9yOiNmMWYxZjF9fVwiLCBcIlwiXSk7XG5cdFxuXHQvLyBleHBvcnRzXG5cblxuLyoqKi8gfSksXG4vKiAxOTkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblx0XG5cdHZhciBfcmVhY3REb20gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1OCk7XG5cdFxuXHR2YXIgX3JlYWN0RG9tMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0RG9tKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDIwMCk7XG5cdFxuXHR2YXIgSG9tZSA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVDbGFzcyh7XG5cdCAgICBkaXNwbGF5TmFtZTogJ0hvbWUnLFxuXHRcblx0ICAgIGhhbmRsZUNsaWNrOiBmdW5jdGlvbiBoYW5kbGVDbGljayhlKSB7XG5cdCAgICAgICAgdmFyIHJlY2lwZSA9IGUudGFyZ2V0O1xuXHRcblx0ICAgICAgICB3aGlsZSAocmVjaXBlICYmICFyZWNpcGUuY2xhc3NMaXN0LmNvbnRhaW5zKFwicmVjaXBlXCIpKSB7XG5cdCAgICAgICAgICAgIHJlY2lwZSA9IHJlY2lwZS5wYXJlbnROb2RlO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdGhpcy5wcm9wcy5hR2V0UmVjaXBlKHJlY2lwZS5kYXRhc2V0LmlkKTtcblx0ICAgIH0sXG5cdCAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0ICAgICAgICB2YXIgaG9tZSA9IHRoaXM7XG5cdCAgICAgICAgdmFyIHJlY2VudEZlZWQgPSB0aGlzLnByb3BzLnNIb21lLnJlY2VudEZlZWQubWFwKGZ1bmN0aW9uIChyZWNpcGUpIHtcblx0ICAgICAgICAgICAgLy8gU3BsaXQgdGltZXN0YW1wIGludG8gWyBZLCBNLCBELCBoLCBtLCBzIF1cblx0ICAgICAgICAgICAgdmFyIHRpbWUgPSByZWNpcGUuZGF0ZU1vZGlmaWVkLnNwbGl0KC9bLSA6XS8pO1xuXHQgICAgICAgICAgICAvLyBBcHBseSBlYWNoIGVsZW1lbnQgdG8gdGhlIERhdGUgZnVuY3Rpb25cblx0ICAgICAgICAgICAgdmFyIGNyZWF0ZWQgPSBuZXcgRGF0ZShEYXRlLlVUQyh0aW1lWzBdLCB0aW1lWzFdIC0gMSwgdGltZVsyXSwgdGltZVszXSwgdGltZVs0XSwgdGltZVs1XSkpO1xuXHRcblx0ICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3JlY2lwZScsIGtleTogcmVjaXBlLmlkLCAnZGF0YS1pZCc6IHJlY2lwZS5pZCwgb25DbGljazogaG9tZS5oYW5kbGVDbGljayB9LFxuXHQgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICd0aXRsZScgfSxcblx0ICAgICAgICAgICAgICAgICAgICByZWNpcGUudGl0bGVcblx0ICAgICAgICAgICAgICAgICksXG5cdCAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaW1nJywgeyBzcmM6IHJlY2lwZS5waWN0dXJlICsgXCI/XCIgKyByZWNpcGUuZGF0ZU1vZGlmaWVkIH0pLFxuXHQgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdhZGRpdGlvbmFsLWluZm8nIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICdzcGFuJyxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdhdXRob3InIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJlY2lwZS5maXJzdE5hbWUgKyBcIiBcIiArIHJlY2lwZS5sYXN0TmFtZVxuXHQgICAgICAgICAgICAgICAgICAgICksXG5cdCAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICdzcGFuJyxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdjcmVhdGlvbi1kYXRlJyB9LFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAnKCcsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZWQudG9EYXRlU3RyaW5nKCksXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICcpJ1xuXHQgICAgICAgICAgICAgICAgICAgIClcblx0ICAgICAgICAgICAgICAgIClcblx0ICAgICAgICAgICAgKTtcblx0ICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAnbWFpbicsXG5cdCAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnaG9tZS1jb250ZW50JyB9LFxuXHQgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICdoMScsXG5cdCAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3NpdGUtdGl0bGUnIH0sXG5cdCAgICAgICAgICAgICAgICAnRGVBbmdlbGlzIEhvbWUgUmVjaXBlcydcblx0ICAgICAgICAgICAgKSxcblx0ICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAnZGl2Jyxcblx0ICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncmVjZW50LXdyYXBwZXInIH0sXG5cdCAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICAgICAnaDInLFxuXHQgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncmVjZW50LXRpdGxlJyB9LFxuXHQgICAgICAgICAgICAgICAgICAgICdSZWNlbnRseSBFbnRlcmVkIFJlY2lwZXMnXG5cdCAgICAgICAgICAgICAgICApLFxuXHQgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdyZWNlbnQtZmVlZCcgfSxcblx0ICAgICAgICAgICAgICAgICAgICByZWNlbnRGZWVkXG5cdCAgICAgICAgICAgICAgICApXG5cdCAgICAgICAgICAgIClcblx0ICAgICAgICApO1xuXHQgICAgfVxuXHR9KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IEhvbWU7XG5cbi8qKiovIH0pLFxuLyogMjAwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0Ly8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblx0XG5cdC8vIGxvYWQgdGhlIHN0eWxlc1xuXHR2YXIgY29udGVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMjAxKTtcblx0aWYgKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXHQvLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG5cdHZhciB1cGRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2OCkoY29udGVudCwge30pO1xuXHRpZiAoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cdC8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcblx0aWYgKGZhbHNlKSB7XG5cdFx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRpZiAoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vaG9tZS5zY3NzXCIsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi9ob21lLnNjc3NcIik7XG5cdFx0XHRcdGlmICh0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24gKCkge1xuXHRcdFx0dXBkYXRlKCk7XG5cdFx0fSk7XG5cdH1cblxuLyoqKi8gfSksXG4vKiAyMDEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2NykoKTtcblx0Ly8gaW1wb3J0c1xuXHRcblx0XG5cdC8vIG1vZHVsZVxuXHRleHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuaG9tZS1jb250ZW50e3BhZGRpbmc6MjVweH0uaG9tZS1jb250ZW50IC5zaXRlLXRpdGxle2NvbG9yOiMyZTJjMmQ7Zm9udC1zaXplOjIuMjVlbTtwYWRkaW5nLWxlZnQ6MTBweDttYXJnaW46MCAwIDI1cHh9LmhvbWUtY29udGVudCAucmVjZW50LXdyYXBwZXJ7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjthbGlnbi1pdGVtczpjZW50ZXJ9LmhvbWUtY29udGVudCAucmVjZW50LXdyYXBwZXIgLnJlY2VudC10aXRsZXtmb250LXNpemU6MS4yZW07Y29sb3I6IzU4NTY1ODttYXJnaW46MCAwIDVweH0uaG9tZS1jb250ZW50IC5yZWNlbnQtZmVlZHtkaXNwbGF5OmZsZXg7Ym9yZGVyLXRvcDoxcHggc29saWQgIzU4NTY1ODtib3JkZXItYm90dG9tOjFweCBzb2xpZCAjNTg1NjU4fS5ob21lLWNvbnRlbnQgLnJlY2VudC1mZWVkIC5yZWNpcGV7cG9zaXRpb246cmVsYXRpdmU7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjthbGlnbi1pdGVtczpjZW50ZXI7bWFyZ2luOjEwcHg7bWF4LXdpZHRoOjQwMHB4O3RyYW5zaXRpb246dHJhbnNmb3JtIC41cztjdXJzb3I6cG9pbnRlcn0uaG9tZS1jb250ZW50IC5yZWNlbnQtZmVlZCAucmVjaXBlOmhvdmVye3RyYW5zZm9ybTpzY2FsZSgxLjAyNSk7Ym94LXNoYWRvdzo1cHggNXB4IDVweCAjODg4fS5ob21lLWNvbnRlbnQgLnJlY2VudC1mZWVkIC5yZWNpcGUgLmFkZGl0aW9uYWwtaW5mbywuaG9tZS1jb250ZW50IC5yZWNlbnQtZmVlZCAucmVjaXBlIC50aXRsZXtwb3NpdGlvbjphYnNvbHV0ZTtiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMCwwLDAsLjc1KTtsZWZ0OjA7cmlnaHQ6MDt0ZXh0LWFsaWduOmNlbnRlcjtwYWRkaW5nOjVweH0uaG9tZS1jb250ZW50IC5yZWNlbnQtZmVlZCAucmVjaXBlIC5hZGRpdGlvbmFsLWluZm8gLmF1dGhvciwuaG9tZS1jb250ZW50IC5yZWNlbnQtZmVlZCAucmVjaXBlIC50aXRsZSAuYXV0aG9ye3BhZGRpbmctcmlnaHQ6MTBweH0uaG9tZS1jb250ZW50IC5yZWNlbnQtZmVlZCAucmVjaXBlIC50aXRsZXtjb2xvcjojZjFmMWYxO3RvcDowfS5ob21lLWNvbnRlbnQgLnJlY2VudC1mZWVkIC5yZWNpcGUgLmFkZGl0aW9uYWwtaW5mb3tjb2xvcjojYjNhZmFmO2ZvbnQtc2l6ZTouNzVlbTtib3R0b206MH0uaG9tZS1jb250ZW50IC5yZWNlbnQtZmVlZCAucmVjaXBlIGltZ3t3aWR0aDoxMDAlfUBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi1kZXZpY2Utd2lkdGg6MzIwcHgpIGFuZCAobWF4LWRldmljZS13aWR0aDo0ODBweCl7LmhvbWUtY29udGVudCAucmVjZW50LWZlZWR7d2lkdGg6MTAwJTtmbGV4LWRpcmVjdGlvbjpjb2x1bW59LmhvbWUtY29udGVudCAucmVjZW50LWZlZWQgLnJlY2lwZXttYXgtd2lkdGg6MTAwJX0uaG9tZS1jb250ZW50IC5yZWNlbnQtZmVlZCAucmVjaXBlOmhvdmVye3RyYW5zZm9ybTpub25lO2JveC1zaGFkb3c6bm9uZX19XCIsIFwiXCJdKTtcblx0XG5cdC8vIGV4cG9ydHNcblxuXG4vKioqLyB9KSxcbi8qIDIwMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdHZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXHRcblx0dmFyIF9yZWFjdERvbSA9IF9fd2VicGFja19yZXF1aXJlX18oMTU4KTtcblx0XG5cdHZhciBfcmVhY3REb20yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3REb20pO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdF9fd2VicGFja19yZXF1aXJlX18oMjAzKTtcblx0XG5cdHZhciBVc2VyU2V0dGluZ3MgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlQ2xhc3Moe1xuXHQgICAgZGlzcGxheU5hbWU6ICdVc2VyU2V0dGluZ3MnLFxuXHRcblx0ICAgIF9nZXRVc2VySWQ6IGZ1bmN0aW9uIF9nZXRVc2VySWQoZSkge1xuXHQgICAgICAgIHZhciBjdXJyZW50RWxlbWVudCA9IGUudGFyZ2V0O1xuXHQgICAgICAgIHZhciB1c2VyTmFtZTtcblx0ICAgICAgICB3aGlsZSAoY3VycmVudEVsZW1lbnQgIT0gbnVsbCkge1xuXHQgICAgICAgICAgICBpZiAoY3VycmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiaXRlbVwiKSkge1xuXHQgICAgICAgICAgICAgICAgY29uc29sZS5sb2coY3VycmVudEVsZW1lbnQpO1xuXHQgICAgICAgICAgICAgICAgY29uc29sZS5sb2coY3VycmVudEVsZW1lbnQuZGF0YXNldC51c2VyaWQpO1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRFbGVtZW50LmRhdGFzZXQudXNlcmlkO1xuXHQgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgY3VycmVudEVsZW1lbnQgPSBjdXJyZW50RWxlbWVudC5wYXJlbnROb2RlO1xuXHQgICAgICAgIH1cblx0ICAgIH0sXG5cdCAgICBhY2NlcHQ6IGZ1bmN0aW9uIGFjY2VwdChlKSB7XG5cdCAgICAgICAgdGhpcy5wcm9wcy5hVXBkYXRlVXNlclN0YXR1cyh0aGlzLl9nZXRVc2VySWQoZSksIFwicGVuZGluZ1wiKTtcblx0ICAgIH0sXG5cdCAgICBkZWNsaW5lOiBmdW5jdGlvbiBkZWNsaW5lKGUpIHtcblx0ICAgICAgICB0aGlzLnByb3BzLmFVcGRhdGVVc2VyU3RhdHVzKHRoaXMuX2dldFVzZXJJZChlKSwgXCJkZWxldGVkXCIpO1xuXHQgICAgfSxcblx0ICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuXHQgICAgICAgIHZhciBzZXR0aW5nID0gdGhpcztcblx0ICAgICAgICB2YXIgYWRtaW47XG5cdCAgICAgICAgaWYgKHRoaXMucHJvcHMuc1VzZXIucm9sZVR5cGUgPT0gXCJhZG1pblwiKSB7XG5cdCAgICAgICAgICAgIHZhciByZXF1ZXN0cyA9IHRoaXMucHJvcHMuc1VzZXIucmVxdWVzdHMubWFwKGZ1bmN0aW9uICh1c2VyKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgJ2xpJyxcblx0ICAgICAgICAgICAgICAgICAgICB7IGtleTogdXNlci51c2VySWQsIGNsYXNzTmFtZTogJ2l0ZW0nLCAnZGF0YS11c2VyaWQnOiB1c2VyLnVzZXJJZCB9LFxuXHQgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAnc3BhbicsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnbmFtZScgfSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdXNlci5maXJzdE5hbWUgKyBcIiBcIiArIHVzZXIubGFzdE5hbWVcblx0ICAgICAgICAgICAgICAgICAgICApLFxuXHQgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAnc3BhbicsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnaW5mbycgfSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgJygnLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICB1c2VyLnVzZXJOYW1lICsgXCIgLSBcIiArIHVzZXIuZW1haWwsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICcpJ1xuXHQgICAgICAgICAgICAgICAgICAgICksXG5cdCAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICdzcGFuJyxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdjb250cm9scycgfSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYnV0dG9uJyxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnYWNjZXB0Jywgb25DbGljazogc2V0dGluZy5hY2NlcHQgfSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBY2NlcHQnXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICksXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2J1dHRvbicsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3JlamVjdCcsIG9uQ2xpY2s6IHNldHRpbmcuZGVjbGluZSB9LFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1JlamVjdCdcblx0ICAgICAgICAgICAgICAgICAgICAgICAgKVxuXHQgICAgICAgICAgICAgICAgICAgIClcblx0ICAgICAgICAgICAgICAgICk7XG5cdCAgICAgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICAgICAgYWRtaW4gPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICdkaXYnLFxuXHQgICAgICAgICAgICAgICAgbnVsbCxcblx0ICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICdoMicsXG5cdCAgICAgICAgICAgICAgICAgICAgbnVsbCxcblx0ICAgICAgICAgICAgICAgICAgICAnQ3VycmVudCByZXF1ZXN0cydcblx0ICAgICAgICAgICAgICAgICksXG5cdCAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICAgICAndWwnLFxuXHQgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncmVxdWVzdC1saXN0JyB9LFxuXHQgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RzXG5cdCAgICAgICAgICAgICAgICApXG5cdCAgICAgICAgICAgICk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICdtYWluJyxcblx0ICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdzZXR0aW5ncy1jb250ZW50JyB9LFxuXHQgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICdoMScsXG5cdCAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NvbnRlbnQtdGl0bGUnIH0sXG5cdCAgICAgICAgICAgICAgICAnVXNlciBTZXR0aW5ncydcblx0ICAgICAgICAgICAgKSxcblx0ICAgICAgICAgICAgYWRtaW5cblx0ICAgICAgICApO1xuXHQgICAgfVxuXHR9KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFVzZXJTZXR0aW5ncztcblxuLyoqKi8gfSksXG4vKiAyMDMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHQvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXHRcblx0Ly8gbG9hZCB0aGUgc3R5bGVzXG5cdHZhciBjb250ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMDQpO1xuXHRpZiAodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cdC8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cblx0dmFyIHVwZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTY4KShjb250ZW50LCB7fSk7XG5cdGlmIChjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuXHRpZiAoZmFsc2UpIHtcblx0XHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdGlmICghY29udGVudC5sb2NhbHMpIHtcblx0XHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi91c2VyU2V0dGluZ3Muc2Nzc1wiLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vdXNlclNldHRpbmdzLnNjc3NcIik7XG5cdFx0XHRcdGlmICh0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24gKCkge1xuXHRcdFx0dXBkYXRlKCk7XG5cdFx0fSk7XG5cdH1cblxuLyoqKi8gfSksXG4vKiAyMDQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2NykoKTtcblx0Ly8gaW1wb3J0c1xuXHRcblx0XG5cdC8vIG1vZHVsZVxuXHRleHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuc2V0dGluZ3MtY29udGVudHtwYWRkaW5nOjI1cHh9LnNldHRpbmdzLWNvbnRlbnQgLmNvbnRlbnQtdGl0bGV7Y29sb3I6IzJlMmMyZDtmb250LXNpemU6MzBweDtwYWRkaW5nLWxlZnQ6MTBweDttYXJnaW46MCAwIDI1cHh9LnNldHRpbmdzLWNvbnRlbnQgLnJlcXVlc3QtbGlzdHtsaXN0LXN0eWxlOm5vbmU7Y29sb3I6IzJlMmMyZDtwYWRkaW5nLWxlZnQ6MTBweH0uc2V0dGluZ3MtY29udGVudCAucmVxdWVzdC1saXN0IC5pdGVte3BhZGRpbmc6NXB4IDEwcHg7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgIzJlMmMyZDtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246cm93O2FsaWduLXNlbGY6Y2VudGVyfS5zZXR0aW5ncy1jb250ZW50IC5yZXF1ZXN0LWxpc3QgLml0ZW0+KntkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyfS5zZXR0aW5ncy1jb250ZW50IC5yZXF1ZXN0LWxpc3QgLml0ZW06bGFzdC1jaGlsZHtib3JkZXItYm90dG9tOm5vbmV9LnNldHRpbmdzLWNvbnRlbnQgLnJlcXVlc3QtbGlzdCAuaXRlbSAuaW5mb3tjb2xvcjojNTg1NjU4O3BhZGRpbmctbGVmdDoyMHB4O2ZvbnQtc2l6ZTouOGVtfS5zZXR0aW5ncy1jb250ZW50IC5yZXF1ZXN0LWxpc3QgLml0ZW0gLmNvbnRyb2xze2ZsZXg6MTtkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OmZsZXgtZW5kfS5zZXR0aW5ncy1jb250ZW50IC5yZXF1ZXN0LWxpc3QgLml0ZW0gLmNvbnRyb2xzIGJ1dHRvbntiYWNrZ3JvdW5kLWNvbG9yOiMzYTM1M2M7Ym9yZGVyOm5vbmU7Y29sb3I6I2YxZjFmMTtwYWRkaW5nOjVweCAxNXB4O21hcmdpbi1sZWZ0OjE1cHg7Y3Vyc29yOnBvaW50ZXJ9LnNldHRpbmdzLWNvbnRlbnQgLnJlcXVlc3QtbGlzdCAuaXRlbSAuY29udHJvbHMgYnV0dG9uOmhvdmVye2JhY2tncm91bmQtY29sb3I6IzJlMmMyZH1cIiwgXCJcIl0pO1xuXHRcblx0Ly8gZXhwb3J0c1xuXG5cbi8qKiovIH0pLFxuLyogMjA1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0dmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cdFxuXHR2YXIgX3JlYWN0RG9tID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTgpO1xuXHRcblx0dmFyIF9yZWFjdERvbTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdERvbSk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0X193ZWJwYWNrX3JlcXVpcmVfXygyMDYpO1xuXHRcblx0dmFyIEF1dGhlbnRpY2F0aW9uID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUNsYXNzKHtcblx0ICAgIGRpc3BsYXlOYW1lOiAnQXV0aGVudGljYXRpb24nLFxuXHRcblx0ICAgIGFwcEF1dGhlbnRpY2F0ZUZvcm06IG51bGwsXG5cdCAgICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZSgpIHtcblx0ICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICBmaXJzdE5hbWU6IFwiXCIsXG5cdCAgICAgICAgICAgIGxhc3ROYW1lOiBcIlwiLFxuXHQgICAgICAgICAgICB1c2VybmFtZTogXCJcIixcblx0ICAgICAgICAgICAgZW1haWw6IFwiXCIsXG5cdCAgICAgICAgICAgIGVtYWlsQ29uZmlybTogXCJcIixcblx0ICAgICAgICAgICAgb2xkUGFzc3dvcmQ6IFwiXCIsXG5cdCAgICAgICAgICAgIG5ld1Bhc3N3b3JkOiBcIlwiLFxuXHQgICAgICAgICAgICBjb25maXJtUGFzc3dvcmQ6IFwiXCJcblx0ICAgICAgICB9O1xuXHQgICAgfSxcblx0ICAgIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcblx0ICAgICAgICB0aGlzLmFwcEF1dGhlbnRpY2F0ZUZvcm0gPSBfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUodGhpcykucXVlcnlTZWxlY3RvcihcIi5hcHAtYXV0aGVudGljYXRlLWZvcm1cIik7XG5cdCAgICAgICAgdGhpcy5oYW5kbGVMb2FkKCk7XG5cdCAgICB9LFxuXHQgICAgY29tcG9uZW50RGlkVXBkYXRlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUoKSB7XG5cdCAgICAgICAgdGhpcy5oYW5kbGVMb2FkKCk7XG5cdCAgICB9LFxuXHQgICAgaGFuZGxlTG9hZDogZnVuY3Rpb24gaGFuZGxlTG9hZCgpIHtcblx0ICAgICAgICBpZiAodGhpcy5wcm9wcy5zQXV0aGVudGljYXRlLmFjdGl2ZSkge1xuXHQgICAgICAgICAgICB0aGlzLmFwcEF1dGhlbnRpY2F0ZUZvcm0ucXVlcnlTZWxlY3RvcihcImlucHV0XCIpLmZvY3VzKCk7XG5cdCAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5oYW5kbGVLZXlVcCwgdHJ1ZSk7XG5cdCAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLnNBdXRoZW50aWNhdGUudHlwZSA9PSBcInJlc2V0XCIpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMuYXBwQXV0aGVudGljYXRlRm9ybS5xdWVyeVNlbGVjdG9yKFwiLnVzZXJuYW1lXCIpLnZhbHVlID0gdGhpcy5wcm9wcy5zQXV0aGVudGljYXRlLnVzZXI7XG5cdCAgICAgICAgICAgICAgICB0aGlzLmFwcEF1dGhlbnRpY2F0ZUZvcm0ucXVlcnlTZWxlY3RvcihcIi5vbGQtcGFzc3dvcmRcIikudmFsdWUgPSB0aGlzLnByb3BzLnNBdXRoZW50aWNhdGUua2V5O1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLmhhbmRsZUtleVVwLCB0cnVlKTtcblx0ICAgICAgICB9XG5cdCAgICB9LFxuXHQgICAgdmFsaWRhdGVFbWFpbDogZnVuY3Rpb24gdmFsaWRhdGVFbWFpbChlbWFpbCkge1xuXHQgICAgICAgIHZhciByZSA9IC9eKChbXjw+KClcXFtcXF1cXFxcLiw7Olxcc0BcIl0rKFxcLltePD4oKVxcW1xcXVxcXFwuLDs6XFxzQFwiXSspKil8KFwiLitcIikpQCgoXFxbWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcXSl8KChbYS16QS1aXFwtMC05XStcXC4pK1thLXpBLVpdezIsfSkpJC87XG5cdCAgICAgICAgcmV0dXJuIHJlLnRlc3QoZW1haWwpO1xuXHQgICAgfSxcblx0ICAgIHZhbGlkYXRlOiBmdW5jdGlvbiB2YWxpZGF0ZShmaXJzdE5hbWUsIGxhc3ROYW1lLCB1c2VybmFtZSwgZW1haWwsIGVtYWlsQ29uZmlybSwgb2xkUGFzc3dvcmQsIG5ld1Bhc3N3b3JkLCBjb25maXJtUGFzc3dvcmQpIHtcblx0ICAgICAgICB2YXIgZXJyb3JzID0gW107XG5cdCAgICAgICAgdmFyIG5ld1N0YXRlID0ge1xuXHQgICAgICAgICAgICBmaXJzdE5hbWU6IFwiXCIsXG5cdCAgICAgICAgICAgIGxhc3ROYW1lOiBcIlwiLFxuXHQgICAgICAgICAgICB1c2VybmFtZTogXCJcIixcblx0ICAgICAgICAgICAgZW1haWw6IFwiXCIsXG5cdCAgICAgICAgICAgIGVtYWlsQ29uZmlybTogXCJcIixcblx0ICAgICAgICAgICAgb2xkUGFzc3dvcmQ6IFwiXCIsXG5cdCAgICAgICAgICAgIG5ld1Bhc3N3b3JkOiBcIlwiLFxuXHQgICAgICAgICAgICBjb25maXJtUGFzc3dvcmQ6IFwiXCJcblx0ICAgICAgICB9O1xuXHRcblx0ICAgICAgICBpZiAoZmlyc3ROYW1lICE9IG51bGwgJiYgZmlyc3ROYW1lID09IFwiXCIpIHtcblx0ICAgICAgICAgICAgZXJyb3JzLnB1c2goXCJGaXJzdCBuYW1lIGlzIHJlcXVpcmVkXCIpO1xuXHQgICAgICAgICAgICBuZXdTdGF0ZS5maXJzdE5hbWUgPSBcImVycm9yIFwiO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKGxhc3ROYW1lICE9IG51bGwgJiYgbGFzdE5hbWUgPT0gXCJcIikge1xuXHQgICAgICAgICAgICBlcnJvcnMucHVzaChcIkxhc3QgbmFtZSBpcyByZXF1aXJlZFwiKTtcblx0ICAgICAgICAgICAgbmV3U3RhdGUubGFzdE5hbWUgPSBcImVycm9yIFwiO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKHVzZXJuYW1lICE9IG51bGwgJiYgdXNlcm5hbWUgPT0gXCJcIikge1xuXHQgICAgICAgICAgICBlcnJvcnMucHVzaChcIlVzZXJuYW1lIGlzIHJlcXVpcmVkXCIpO1xuXHQgICAgICAgICAgICBuZXdTdGF0ZS51c2VybmFtZSA9IFwiZXJyb3IgXCI7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAoZW1haWwgIT0gbnVsbCkge1xuXHQgICAgICAgICAgICBpZiAoZW1haWwgPT0gXCJcIikge1xuXHQgICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goXCJFbWFpbCBpcyByZXF1aXJlZFwiKTtcblx0ICAgICAgICAgICAgICAgIG5ld1N0YXRlLmVtYWlsID0gXCJlcnJvciBcIjtcblx0ICAgICAgICAgICAgfSBlbHNlIGlmICghdGhpcy52YWxpZGF0ZUVtYWlsKGVtYWlsKSkge1xuXHQgICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goXCJQbGVhc2UgZW50ZXIgdmFsaWQgZW1haWxcIik7XG5cdCAgICAgICAgICAgICAgICBuZXdTdGF0ZS5lbWFpbCA9IFwiZXJyb3IgXCI7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmIChlbWFpbENvbmZpcm0gIT0gbnVsbCkge1xuXHQgICAgICAgICAgICBpZiAoZW1haWxDb25maXJtID09IFwiXCIpIHtcblx0ICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKFwiRW1haWwgY29uZmlybWF0aW9uIGlzIHJlcXVpcmVkXCIpO1xuXHQgICAgICAgICAgICAgICAgbmV3U3RhdGUuZW1haWxDb25maXJtID0gXCJlcnJvciBcIjtcblx0ICAgICAgICAgICAgfSBlbHNlIGlmICghdGhpcy52YWxpZGF0ZUVtYWlsKGVtYWlsQ29uZmlybSkpIHtcblx0ICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKFwiUGxlYXNlIGVudGVyIHZhbGlkIGNvbmZpcm1hdGlvbiBlbWFpbFwiKTtcblx0ICAgICAgICAgICAgICAgIG5ld1N0YXRlLmVtYWlsQ29uZmlybSA9IFwiZXJyb3IgXCI7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmIChlbWFpbCAhPSBudWxsICYmIGVtYWlsICE9IFwiXCIgJiYgZW1haWxDb25maXJtICE9IG51bGwgJiYgZW1haWxDb25maXJtICE9IFwiXCIgJiYgZW1haWwgIT0gZW1haWxDb25maXJtKSB7XG5cdCAgICAgICAgICAgIGVycm9ycy5wdXNoKFwiRW1haWwgYWRkcmVzc2VzIGRvIG5vdCBtYXRjaFwiKTtcblx0ICAgICAgICAgICAgbmV3U3RhdGUuZW1haWwgPSBcImVycm9yIFwiO1xuXHQgICAgICAgICAgICBuZXdTdGF0ZS5lbWFpbENvbmZpcm0gPSBcImVycm9yIFwiO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKG9sZFBhc3N3b3JkICE9IG51bGwgJiYgb2xkUGFzc3dvcmQgPT0gXCJcIikge1xuXHQgICAgICAgICAgICBlcnJvcnMucHVzaChcIlBhc3N3b3JkIGlzIHJlcXVpcmVkXCIpO1xuXHQgICAgICAgICAgICBuZXdTdGF0ZS5vbGRQYXNzd29yZCA9IFwiZXJyb3IgXCI7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAobmV3UGFzc3dvcmQgIT0gbnVsbCAmJiBuZXdQYXNzd29yZCA9PSBcIlwiKSB7XG5cdCAgICAgICAgICAgIGVycm9ycy5wdXNoKFwiTmV3IHBhc3N3b3JkIGlzIHJlcXVpcmVkXCIpO1xuXHQgICAgICAgICAgICBuZXdTdGF0ZS5uZXdQYXNzd29yZCA9IFwiZXJyb3IgXCI7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAob2xkUGFzc3dvcmQgIT0gbnVsbCAmJiBvbGRQYXNzd29yZCAhPSBcIlwiICYmIG5ld1Bhc3N3b3JkICE9IG51bGwgJiYgbmV3UGFzc3dvcmQgIT0gXCJcIiAmJiBvbGRQYXNzd29yZCA9PSBuZXdQYXNzd29yZCkge1xuXHQgICAgICAgICAgICBlcnJvcnMucHVzaChcIlBsZWFzZSBwaWNrIGEgbmV3IHBhc3N3b3JkXCIpO1xuXHQgICAgICAgICAgICBuZXdTdGF0ZS5vbGRQYXNzd29yZCA9IFwiZXJyb3IgXCI7XG5cdCAgICAgICAgICAgIG5ld1N0YXRlLm5ld1Bhc3N3b3JkID0gXCJlcnJvciBcIjtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHRoaXMuc2V0U3RhdGUobmV3U3RhdGUpO1xuXHQgICAgICAgIGlmIChlcnJvcnMubGVuZ3RoID4gMCkge1xuXHQgICAgICAgICAgICB2YXIga2V5ID0gMDtcblx0ICAgICAgICAgICAgdmFyIG1lc3NhZ2VJbm5lciA9IGVycm9ycy5tYXAoZnVuY3Rpb24gKG1zZykge1xuXHQgICAgICAgICAgICAgICAga2V5ICs9IDE7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgJ2xpJyxcblx0ICAgICAgICAgICAgICAgICAgICB7IGtleToga2V5IH0sXG5cdCAgICAgICAgICAgICAgICAgICAgbXNnXG5cdCAgICAgICAgICAgICAgICApO1xuXHQgICAgICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgICAgIHZhciBtZXNzYWdlID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAnZGl2Jyxcblx0ICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAndmFsaWRhdGlvbicgfSxcblx0ICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICdoMycsXG5cdCAgICAgICAgICAgICAgICAgICAgbnVsbCxcblx0ICAgICAgICAgICAgICAgICAgICAnUGxlYXNlIGNvcnJlY3QgZmxhZ2dlZCBmaWVsZHMnXG5cdCAgICAgICAgICAgICAgICApLFxuXHQgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgJ3VsJyxcblx0ICAgICAgICAgICAgICAgICAgICBudWxsLFxuXHQgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VJbm5lclxuXHQgICAgICAgICAgICAgICAgKVxuXHQgICAgICAgICAgICApO1xuXHRcblx0ICAgICAgICAgICAgdGhpcy5wcm9wcy5hTm90aWZ5KHRydWUsIFwiZXJyb3JcIiwgbWVzc2FnZSwgbnVsbCk7XG5cdCAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgICAgICB9XG5cdCAgICB9LFxuXHQgICAgaGFuZGxlSGlkZTogZnVuY3Rpb24gaGFuZGxlSGlkZSgpIHtcblx0ICAgICAgICB2YXIgZmllbGRzID0gW1wiLmZpcnN0LW5hbWVcIiwgXCIubGFzdC1uYW1lXCIsIFwiLnVzZXJuYW1lXCIsIFwiLmVtYWlsXCIsIFwiLmVtYWlsLWNvbmZpcm1cIiwgXCIucGFzc3dvcmRcIiwgXCIub2xkLXBhc3N3b3JkXCIsIFwiLm5ldy1wYXNzd29yZFwiLCBcIi5jb25maXJtLXBhc3N3b3JkXCJdO1xuXHRcblx0ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZpZWxkcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmFwcEF1dGhlbnRpY2F0ZUZvcm0ucXVlcnlTZWxlY3RvcihmaWVsZHNbaV0pO1xuXHQgICAgICAgICAgICBpZiAoZmllbGQgIT0gbnVsbCkge1xuXHQgICAgICAgICAgICAgICAgZmllbGQudmFsdWUgPSBcIlwiO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB0aGlzLnNldFN0YXRlKHtcblx0ICAgICAgICAgICAgZmlyc3ROYW1lOiBcIlwiLFxuXHQgICAgICAgICAgICBsYXN0TmFtZTogXCJcIixcblx0ICAgICAgICAgICAgdXNlcm5hbWU6IFwiXCIsXG5cdCAgICAgICAgICAgIGVtYWlsOiBcIlwiLFxuXHQgICAgICAgICAgICBlbWFpbENvbmZpcm06IFwiXCIsXG5cdCAgICAgICAgICAgIG9sZFBhc3N3b3JkOiBcIlwiLFxuXHQgICAgICAgICAgICBuZXdQYXNzd29yZDogXCJcIixcblx0ICAgICAgICAgICAgY29uZmlybVBhc3N3b3JkOiBcIlwiXG5cdCAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgIHRoaXMucHJvcHMuYUF1dGhlbnRpY2F0ZShmYWxzZSk7XG5cdCAgICB9LFxuXHQgICAgaGFuZGxlU2hvd1JlZ2lzdGVyOiBmdW5jdGlvbiBoYW5kbGVTaG93UmVnaXN0ZXIoKSB7XG5cdCAgICAgICAgdGhpcy5wcm9wcy5hQXV0aGVudGljYXRlKHRydWUsIFwicmVnaXN0ZXJcIik7XG5cdCAgICB9LFxuXHQgICAgaGFuZGxlU2hvd0xvZ2luOiBmdW5jdGlvbiBoYW5kbGVTaG93TG9naW4oKSB7XG5cdCAgICAgICAgdGhpcy5wcm9wcy5hQXV0aGVudGljYXRlKHRydWUsIFwibG9naW5cIik7XG5cdCAgICB9LFxuXHQgICAgaGFuZGxlTG9naW46IGZ1bmN0aW9uIGhhbmRsZUxvZ2luKCkge1xuXHQgICAgICAgIHZhciBhdXRoID0gdGhpcztcblx0ICAgICAgICB2YXIgdXNlcm5hbWUgPSB0aGlzLmFwcEF1dGhlbnRpY2F0ZUZvcm0ucXVlcnlTZWxlY3RvcihcIi51c2VybmFtZVwiKS52YWx1ZTtcblx0ICAgICAgICB2YXIgcGFzc3dvcmQgPSB0aGlzLmFwcEF1dGhlbnRpY2F0ZUZvcm0ucXVlcnlTZWxlY3RvcihcIi5wYXNzd29yZFwiKS52YWx1ZTtcblx0XG5cdCAgICAgICAgdmFyIGNhbGxiYWNrID0gZnVuY3Rpb24gY2FsbGJhY2socmVzcG9uc2UpIHtcblx0ICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PSBcImZhaWxcIikge1xuXHQgICAgICAgICAgICAgICAgYXV0aC5zZXRTdGF0ZSh7IHVzZXJuYW1lOiBcImVycm9yIFwiLCBvbGRQYXNzd29yZDogXCJlcnJvciBcIiB9KTtcblx0ICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICd2YWxpZGF0aW9uJyB9LFxuXHQgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAnaDMnLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAnQW4gZXJyb3Igb2NjdXJlZCBkdXJyaW5nIGxvZ2luJ1xuXHQgICAgICAgICAgICAgICAgICAgICksXG5cdCAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICdwJyxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UubWVzc2FnZVxuXHQgICAgICAgICAgICAgICAgICAgIClcblx0ICAgICAgICAgICAgICAgICk7XG5cdFxuXHQgICAgICAgICAgICAgICAgYXV0aC5wcm9wcy5hTm90aWZ5KHRydWUsIFwiZXJyb3JcIiwgbWVzc2FnZSwgbnVsbCk7XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICBhdXRoLmhhbmRsZUhpZGUoKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH07XG5cdFxuXHQgICAgICAgIHZhciBpc1ZhbGlkID0gdGhpcy52YWxpZGF0ZShudWxsLCBudWxsLCB1c2VybmFtZSwgbnVsbCwgbnVsbCwgcGFzc3dvcmQsIG51bGwsIG51bGwpO1xuXHQgICAgICAgIGlmIChpc1ZhbGlkKSB7XG5cdCAgICAgICAgICAgIHRoaXMucHJvcHMuYUxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZCwgY2FsbGJhY2spO1xuXHQgICAgICAgIH1cblx0ICAgIH0sXG5cdCAgICBoYW5kbGVSZXNldDogZnVuY3Rpb24gaGFuZGxlUmVzZXQoKSB7XG5cdCAgICAgICAgdmFyIHVzZXJuYW1lID0gdGhpcy5hcHBBdXRoZW50aWNhdGVGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIudXNlcm5hbWVcIikudmFsdWU7XG5cdCAgICAgICAgdmFyIG9sZFBhc3N3b3JkID0gdGhpcy5hcHBBdXRoZW50aWNhdGVGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIub2xkLXBhc3N3b3JkXCIpLnZhbHVlO1xuXHQgICAgICAgIHZhciBuZXdQYXNzd29yZCA9IHRoaXMuYXBwQXV0aGVudGljYXRlRm9ybS5xdWVyeVNlbGVjdG9yKFwiLm5ldy1wYXNzd29yZFwiKS52YWx1ZTtcblx0ICAgICAgICB2YXIgY29uZmlybVBhc3N3b3JkID0gdGhpcy5hcHBBdXRoZW50aWNhdGVGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIuY29uZmlybS1wYXNzd29yZFwiKS52YWx1ZTtcblx0XG5cdCAgICAgICAgdmFyIGlzVmFsaWQgPSB0aGlzLnZhbGlkYXRlKG51bGwsIG51bGwsIHVzZXJuYW1lLCBudWxsLCBudWxsLCBvbGRQYXNzd29yZCwgbmV3UGFzc3dvcmQsIGNvbmZpcm1QYXNzd29yZCk7XG5cdCAgICAgICAgaWYgKGlzVmFsaWQpIHtcblx0ICAgICAgICAgICAgdGhpcy5wcm9wcy5hVXBkYXRlUGFzc3dvcmQodGhpcy5wcm9wcy5zQXV0aGVudGljYXRlLnVzZXJJZCwgb2xkUGFzc3dvcmQsIG5ld1Bhc3N3b3JkKTtcblx0ICAgICAgICB9XG5cdCAgICB9LFxuXHQgICAgaGFuZGxlUmVnaXN0ZXI6IGZ1bmN0aW9uIGhhbmRsZVJlZ2lzdGVyKCkge1xuXHQgICAgICAgIHZhciBhdXRoID0gdGhpcztcblx0ICAgICAgICB2YXIgZmlyc3ROYW1lID0gdGhpcy5hcHBBdXRoZW50aWNhdGVGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIuZmlyc3QtbmFtZVwiKS52YWx1ZTtcblx0ICAgICAgICB2YXIgbGFzdE5hbWUgPSB0aGlzLmFwcEF1dGhlbnRpY2F0ZUZvcm0ucXVlcnlTZWxlY3RvcihcIi5sYXN0LW5hbWVcIikudmFsdWU7XG5cdCAgICAgICAgdmFyIHVzZXJuYW1lID0gdGhpcy5hcHBBdXRoZW50aWNhdGVGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIudXNlcm5hbWVcIikudmFsdWU7XG5cdCAgICAgICAgdmFyIGVtYWlsID0gdGhpcy5hcHBBdXRoZW50aWNhdGVGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIuZW1haWxcIikudmFsdWU7XG5cdCAgICAgICAgdmFyIGVtYWlsQ29uZmlybSA9IHRoaXMuYXBwQXV0aGVudGljYXRlRm9ybS5xdWVyeVNlbGVjdG9yKFwiLmVtYWlsLWNvbmZpcm1cIikudmFsdWU7XG5cdFxuXHQgICAgICAgIHZhciBjYWxsYmFjayA9IGZ1bmN0aW9uIGNhbGxiYWNrKHJlc3BvbnNlKSB7XG5cdCAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT0gXCJmYWlsXCIpIHtcblx0ICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5maWVsZCA9PSBcInVzZXJuYW1lXCIpIHtcblx0ICAgICAgICAgICAgICAgICAgICBhdXRoLnNldFN0YXRlKHsgdXNlcm5hbWU6IFwiZXJyb3IgXCIgfSk7XG5cdCAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmZpZWxkID09IFwiZW1haWxcIikge1xuXHQgICAgICAgICAgICAgICAgICAgIGF1dGguc2V0U3RhdGUoeyBlbWFpbDogXCJlcnJvciBcIiB9KTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICd2YWxpZGF0aW9uJyB9LFxuXHQgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAnaDMnLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAnQW4gZXJyb3Igb2NjdXJlZCBkdXJyaW5nIHJlZ2lzdHJhdGlvbidcblx0ICAgICAgICAgICAgICAgICAgICApLFxuXHQgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAncCcsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLm1lc3NhZ2Vcblx0ICAgICAgICAgICAgICAgICAgICApXG5cdCAgICAgICAgICAgICAgICApO1xuXHRcblx0ICAgICAgICAgICAgICAgIGF1dGgucHJvcHMuYU5vdGlmeSh0cnVlLCBcImVycm9yXCIsIG1lc3NhZ2UsIG51bGwpO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgYXV0aC5oYW5kbGVIaWRlKCk7XG5cdFxuXHQgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICAgICAnZGl2Jyxcblx0ICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3ZhbGlkYXRpb24nIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICdoMycsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICdUaGFuayB5b3UgZm9yIHJlZ2lzdGVyaW5nJ1xuXHQgICAgICAgICAgICAgICAgICAgICksXG5cdCAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICdwJyxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgJ0FuIGFkbWluaXN0cmF0b3Igd2lsbCByZXZpZXcgeW91IHJlZ2lzdHJhdGlvbiBhcyBzb29uIGFzIHBvc3NpYmxlLiBPbmNlIHJldmlld2VkIHlvdSB3aWxsIHJlY2VpdmUgYW4gZW1haWwgd2l0aCBhIGxpbmsgdG8gY29tcGxldGUgcmVnaXN0cmF0aW9uLicsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdicicsIG51bGwpLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnYnInLCBudWxsKSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgJ1RoYW5rIHlvdSBmb3IgeW91ciBwYXRpZW5jZSEnXG5cdCAgICAgICAgICAgICAgICAgICAgKVxuXHQgICAgICAgICAgICAgICAgKTtcblx0XG5cdCAgICAgICAgICAgICAgICBhdXRoLnByb3BzLmFOb3RpZnkodHJ1ZSwgXCJtZXNzYWdlXCIsIG1lc3NhZ2UsIG51bGwpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfTtcblx0XG5cdCAgICAgICAgdmFyIGlzVmFsaWQgPSB0aGlzLnZhbGlkYXRlKGZpcnN0TmFtZSwgbGFzdE5hbWUsIHVzZXJuYW1lLCBlbWFpbCwgZW1haWxDb25maXJtLCBudWxsLCBudWxsLCBudWxsKTtcblx0ICAgICAgICBpZiAoaXNWYWxpZCkge1xuXHQgICAgICAgICAgICB0aGlzLnByb3BzLmFSZWdpc3RlcihmaXJzdE5hbWUsIGxhc3ROYW1lLCB1c2VybmFtZSwgZW1haWwsIGNhbGxiYWNrKTtcblx0ICAgICAgICB9XG5cdCAgICB9LFxuXHQgICAgaGFuZGxlS2V5VXA6IGZ1bmN0aW9uIGhhbmRsZUtleVVwKGUpIHtcblx0ICAgICAgICBpZiAoZS5rZXlDb2RlID09IDEzKSB7XG5cdCAgICAgICAgICAgIF9yZWFjdERvbTIuZGVmYXVsdC5maW5kRE9NTm9kZSh0aGlzKS5xdWVyeVNlbGVjdG9yKFwiLnN1Ym1pdC1idXR0b25cIikuY2xpY2soKTtcblx0ICAgICAgICB9XG5cdCAgICB9LFxuXHQgICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG5cdCAgICAgICAgaWYgKHRoaXMucHJvcHMuc0F1dGhlbnRpY2F0ZS50eXBlID09IFwicmVnaXN0ZXJcIikge1xuXHQgICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAnZGl2Jyxcblx0ICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnYXBwLWF1dGhlbnRpY2F0ZS1pbm5lcicgfSxcblx0ICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICdoZWFkZXInLFxuXHQgICAgICAgICAgICAgICAgICAgIG51bGwsXG5cdCAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICdsYWJlbCcsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICdSZWdpc3Rlcidcblx0ICAgICAgICAgICAgICAgICAgICApLFxuXHQgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdhJywgeyBjbGFzc05hbWU6ICd0aS1jbG9zZScsIG9uQ2xpY2s6IHRoaXMuaGFuZGxlSGlkZSB9KVxuXHQgICAgICAgICAgICAgICAgKSxcblx0ICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuXHQgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnYXBwLWF1dGhlbnRpY2F0ZS1mb3JtJyB9LFxuXHQgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHsgcGxhY2Vob2xkZXI6ICdGaXJzdCBuYW1lJywgY2xhc3NOYW1lOiB0aGlzLnN0YXRlLmZpcnN0TmFtZSArIFwiZmlyc3QtbmFtZVwiLCB0eXBlOiAndGV4dCcgfSksXG5cdCAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JywgeyBwbGFjZWhvbGRlcjogJ0xhc3QgbmFtZScsIGNsYXNzTmFtZTogdGhpcy5zdGF0ZS5sYXN0TmFtZSArIFwibGFzdC1uYW1lXCIsIHR5cGU6ICd0ZXh0JyB9KSxcblx0ICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7IHBsYWNlaG9sZGVyOiAnVXNlcm5hbWUnLCBjbGFzc05hbWU6IHRoaXMuc3RhdGUudXNlcm5hbWUgKyBcInVzZXJuYW1lXCIsIHR5cGU6ICd0ZXh0JyB9KSxcblx0ICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7IHBsYWNlaG9sZGVyOiAnRW1haWwnLCBjbGFzc05hbWU6IHRoaXMuc3RhdGUuZW1haWwgKyBcImVtYWlsXCIsIHR5cGU6ICdlbWFpbCcgfSksXG5cdCAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JywgeyBwbGFjZWhvbGRlcjogJ0NvbmZpcm0gZW1haWwnLCBjbGFzc05hbWU6IHRoaXMuc3RhdGUuZW1haWxDb25maXJtICsgXCIgZW1haWwtY29uZmlybVwiLCB0eXBlOiAnZW1haWwnIH0pXG5cdCAgICAgICAgICAgICAgICApLFxuXHQgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgJ2Zvb3RlcicsXG5cdCAgICAgICAgICAgICAgICAgICAgbnVsbCxcblx0ICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICAgICAgICAgJ2J1dHRvbicsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnc3VibWl0LWJ1dHRvbicsIG9uQ2xpY2s6IHRoaXMuaGFuZGxlUmVnaXN0ZXIgfSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgJ1JlZ2lzdGVyJ1xuXHQgICAgICAgICAgICAgICAgICAgICksXG5cdCAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2Zvb3Rlci1ub3RlJyB9LFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICdsYWJlbCcsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0FscmVhZHkgaGF2ZSBhbiBhY2NvdW50PyAnXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICksXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2EnLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBvbkNsaWNrOiB0aGlzLmhhbmRsZVNob3dMb2dpbiB9LFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0xvZ2luJ1xuXHQgICAgICAgICAgICAgICAgICAgICAgICApXG5cdCAgICAgICAgICAgICAgICAgICAgKVxuXHQgICAgICAgICAgICAgICAgKVxuXHQgICAgICAgICAgICApO1xuXHQgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5zQXV0aGVudGljYXRlLnR5cGUgPT0gXCJyZXNldFwiKSB7XG5cdCAgICAgICAgICAgIHZhciBkaXNhYmxlZCA9IGZhbHNlO1xuXHQgICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5zQXV0aGVudGljYXRlLmtleSAhPSBcIlwiKSB7XG5cdCAgICAgICAgICAgICAgICBkaXNhYmxlZCA9IHRydWU7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2FwcC1hdXRoZW50aWNhdGUtaW5uZXInIH0sXG5cdCAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICAgICAnaGVhZGVyJyxcblx0ICAgICAgICAgICAgICAgICAgICBudWxsLFxuXHQgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAnbGFiZWwnLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAnUmVzZXQgcGFzc3dvcmQnXG5cdCAgICAgICAgICAgICAgICAgICAgKSxcblx0ICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnYScsIHsgY2xhc3NOYW1lOiAndGktY2xvc2UnLCBvbkNsaWNrOiB0aGlzLmhhbmRsZUhpZGUgfSlcblx0ICAgICAgICAgICAgICAgICksXG5cdCAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICAgICAnZGl2Jyxcblx0ICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2FwcC1hdXRoZW50aWNhdGUtZm9ybScgfSxcblx0ICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7IHBsYWNlaG9sZGVyOiAnVXNlcm5hbWUnLCBjbGFzc05hbWU6IHRoaXMuc3RhdGUudXNlcm5hbWUgKyBcInVzZXJuYW1lXCIsIHR5cGU6ICd0ZXh0JywgZGlzYWJsZWQ6IGRpc2FibGVkIH0pLFxuXHQgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHsgcGxhY2Vob2xkZXI6ICdDdXJyZW50IHBhc3N3b3JkJywgY2xhc3NOYW1lOiB0aGlzLnN0YXRlLm9sZFBhc3N3b3JkICsgXCJvbGQtcGFzc3dvcmRcIiwgdHlwZTogJ3Bhc3N3b3JkJywgZGlzYWJsZWQ6IGRpc2FibGVkIH0pLFxuXHQgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHsgcGxhY2Vob2xkZXI6ICdOZXcgcGFzc3dvcmQnLCBjbGFzc05hbWU6IHRoaXMuc3RhdGUubmV3UGFzc3dvcmQgKyBcIm5ldy1wYXNzd29yZFwiLCB0eXBlOiAncGFzc3dvcmQnIH0pLFxuXHQgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHsgcGxhY2Vob2xkZXI6ICdDb25maXJtIHBhc3N3b3JkJywgY2xhc3NOYW1lOiB0aGlzLnN0YXRlLmNvbmZpcm1QYXNzd29yZCArIFwiY29uZmlybS1wYXNzd29yZFwiLCB0eXBlOiAncGFzc3dvcmQnIH0pXG5cdCAgICAgICAgICAgICAgICApLFxuXHQgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgJ2Zvb3RlcicsXG5cdCAgICAgICAgICAgICAgICAgICAgbnVsbCxcblx0ICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICAgICAgICAgJ2J1dHRvbicsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnc3VibWl0LWJ1dHRvbicsIG9uQ2xpY2s6IHRoaXMuaGFuZGxlUmVzZXQgfSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgJ1Jlc2V0J1xuXHQgICAgICAgICAgICAgICAgICAgICksXG5cdCAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2Zvb3Rlci1ub3RlJyB9LFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICdsYWJlbCcsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0FscmVhZHkgaGF2ZSBhbiBhY2NvdW50PyAnXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICksXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2EnLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBvbkNsaWNrOiB0aGlzLmhhbmRsZVNob3dMb2dpbiB9LFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0xvZ2luJ1xuXHQgICAgICAgICAgICAgICAgICAgICAgICApXG5cdCAgICAgICAgICAgICAgICAgICAgKVxuXHQgICAgICAgICAgICAgICAgKVxuXHQgICAgICAgICAgICApO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICdkaXYnLFxuXHQgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdhcHAtYXV0aGVudGljYXRlLWlubmVyJyB9LFxuXHQgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgJ2hlYWRlcicsXG5cdCAgICAgICAgICAgICAgICAgICAgbnVsbCxcblx0ICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICAgICAgICAgJ2xhYmVsJyxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgJ0xvZ2luJ1xuXHQgICAgICAgICAgICAgICAgICAgICksXG5cdCAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2EnLCB7IGNsYXNzTmFtZTogJ3RpLWNsb3NlJywgb25DbGljazogdGhpcy5oYW5kbGVIaWRlIH0pXG5cdCAgICAgICAgICAgICAgICApLFxuXHQgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdhcHAtYXV0aGVudGljYXRlLWZvcm0nIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JywgeyBwbGFjZWhvbGRlcjogJ1VzZXJuYW1lJywgY2xhc3NOYW1lOiB0aGlzLnN0YXRlLnVzZXJuYW1lICsgXCJ1c2VybmFtZVwiLCB0eXBlOiAndGV4dCcgfSksXG5cdCAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JywgeyBwbGFjZWhvbGRlcjogJ1Bhc3N3b3JkJywgY2xhc3NOYW1lOiB0aGlzLnN0YXRlLm9sZFBhc3N3b3JkICsgXCJwYXNzd29yZFwiLCB0eXBlOiAncGFzc3dvcmQnIH0pXG5cdCAgICAgICAgICAgICAgICApLFxuXHQgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgJ2Zvb3RlcicsXG5cdCAgICAgICAgICAgICAgICAgICAgbnVsbCxcblx0ICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICAgICAgICAgJ2J1dHRvbicsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnc3VibWl0LWJ1dHRvbicsIG9uQ2xpY2s6IHRoaXMuaGFuZGxlTG9naW4gfSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgJ0xvZ2luJ1xuXHQgICAgICAgICAgICAgICAgICAgICksXG5cdCAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2Zvb3Rlci1ub3RlJyB9LFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICdsYWJlbCcsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0RvblxcJ3QgaGF2ZSBhbiBhY2NvdW50PyAnXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICksXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2EnLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBvbkNsaWNrOiB0aGlzLmhhbmRsZVNob3dSZWdpc3RlciB9LFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1JlZ2lzdGVyJ1xuXHQgICAgICAgICAgICAgICAgICAgICAgICApXG5cdCAgICAgICAgICAgICAgICAgICAgKVxuXHQgICAgICAgICAgICAgICAgKVxuXHQgICAgICAgICAgICApO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0fSk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBBdXRoZW50aWNhdGlvbjtcblxuLyoqKi8gfSksXG4vKiAyMDYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHQvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXHRcblx0Ly8gbG9hZCB0aGUgc3R5bGVzXG5cdHZhciBjb250ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMDcpO1xuXHRpZiAodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cdC8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cblx0dmFyIHVwZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTY4KShjb250ZW50LCB7fSk7XG5cdGlmIChjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuXHRpZiAoZmFsc2UpIHtcblx0XHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdGlmICghY29udGVudC5sb2NhbHMpIHtcblx0XHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi9hdXRoZW50aWNhdGlvbi5zY3NzXCIsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi9hdXRoZW50aWNhdGlvbi5zY3NzXCIpO1xuXHRcdFx0XHRpZiAodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uICgpIHtcblx0XHRcdHVwZGF0ZSgpO1xuXHRcdH0pO1xuXHR9XG5cbi8qKiovIH0pLFxuLyogMjA3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0ZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjcpKCk7XG5cdC8vIGltcG9ydHNcblx0XG5cdFxuXHQvLyBtb2R1bGVcblx0ZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmFwcC1hdXRoZW50aWNhdGUtaW5uZXJ7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjthbGlnbi1pdGVtczpjZW50ZXI7dHJhbnNpdGlvbjpoZWlnaHQgLjVzO3dpZHRoOjMwMHB4O2JhY2tncm91bmQtY29sb3I6I2ZmZjtib3gtc2hhZG93OjVweCA1cHggNXB4ICMyZTJjMmR9LmFwcC1hdXRoZW50aWNhdGUtaW5uZXIgLmFwcC1hdXRoZW50aWNhdGUtZm9ybXthbGlnbi1jb250ZW50OnN0cmV0Y2g7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtwYWRkaW5nOjI1cHggMDt3aWR0aDoxMDAlfS5hcHAtYXV0aGVudGljYXRlLWlubmVyIC5hcHAtYXV0aGVudGljYXRlLWZvcm0gaW5wdXR7bWFyZ2luOjVweCAxMHB4fS5hcHAtYXV0aGVudGljYXRlLWlubmVyIGZvb3RlciwuYXBwLWF1dGhlbnRpY2F0ZS1pbm5lciBoZWFkZXJ7ZGlzcGxheTpmbGV4O3dpZHRoOjEwMCU7YmFja2dyb3VuZC1jb2xvcjojZWJlYmVkfS5hcHAtYXV0aGVudGljYXRlLWlubmVyIGhlYWRlcntqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjtwYWRkaW5nOjEwcHggMDtib3JkZXItYm90dG9tOjFweCBzb2xpZCAjMmUyYzJkO2NvbG9yOiMyZTJjMmR9LmFwcC1hdXRoZW50aWNhdGUtaW5uZXIgaGVhZGVyIGxhYmVse3BhZGRpbmctbGVmdDoxMHB4fS5hcHAtYXV0aGVudGljYXRlLWlubmVyIGhlYWRlciAudGktY2xvc2V7cGFkZGluZy1yaWdodDoxMHB4O29wYWNpdHk6Ljc1fS5hcHAtYXV0aGVudGljYXRlLWlubmVyIGhlYWRlciAudGktY2xvc2U6aG92ZXJ7b3BhY2l0eToxfS5hcHAtYXV0aGVudGljYXRlLWlubmVyIGZvb3RlcnthbGlnbi1pdGVtczpjZW50ZXI7ZmxleC1kaXJlY3Rpb246Y29sdW1uO3BhZGRpbmc6MTBweCAwO2JvcmRlci10b3A6MXB4IHNvbGlkICMyZTJjMmR9LmFwcC1hdXRoZW50aWNhdGUtaW5uZXIgZm9vdGVyIC5mb290ZXItbm90ZXtjb2xvcjojNTg1NjU4O2ZvbnQtc2l6ZTouNzVlbTtwYWRkaW5nLXRvcDo1cHh9LmFwcC1hdXRoZW50aWNhdGUtaW5uZXIgZm9vdGVyIC5mb290ZXItbm90ZSBhe2NvbG9yOiM1ODU2NTg7Y3Vyc29yOnBvaW50ZXJ9LmFwcC1hdXRoZW50aWNhdGUtaW5uZXIgZm9vdGVyIC5mb290ZXItbm90ZSBhOmhvdmVye2NvbG9yOiMyZTJjMmQ7dGV4dC1kZWNvcmF0aW9uOnVuZGVybGluZX0uYXBwLWF1dGhlbnRpY2F0ZS1pbm5lciBmb290ZXIgYnV0dG9ue2JhY2tncm91bmQtY29sb3I6IzNhMzUzYztib3JkZXI6bm9uZTtjb2xvcjojZjFmMWYxO3BhZGRpbmc6NXB4IDE1cHg7Y3Vyc29yOnBvaW50ZXJ9LmFwcC1hdXRoZW50aWNhdGUtaW5uZXIgZm9vdGVyIGJ1dHRvbjpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiMyZTJjMmR9XCIsIFwiXCJdKTtcblx0XG5cdC8vIGV4cG9ydHNcblxuXG4vKioqLyB9KSxcbi8qIDIwOCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHR2YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdHZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXHRcblx0dmFyIF9yZWFjdERvbSA9IF9fd2VicGFja19yZXF1aXJlX18oMTU4KTtcblx0XG5cdHZhciBfcmVhY3REb20yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3REb20pO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdF9fd2VicGFja19yZXF1aXJlX18oMjA5KTtcblx0XG5cdHZhciBOb3RpZnkgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlQ2xhc3Moe1xuXHQgICAgZGlzcGxheU5hbWU6ICdOb3RpZnknLFxuXHRcblx0ICAgIHRpbWVyOiBudWxsLFxuXHQgICAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuXHQgICAgICAgIHRoaXMuaGFuZGxlTG9hZCgpO1xuXHQgICAgfSxcblx0ICAgIGNvbXBvbmVudERpZFVwZGF0ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKCkge1xuXHQgICAgICAgIHRoaXMuaGFuZGxlTG9hZCgpO1xuXHQgICAgfSxcblx0ICAgIGhhbmRsZUxvYWQ6IGZ1bmN0aW9uIGhhbmRsZUxvYWQoKSB7XG5cdCAgICAgICAgaWYgKHRoaXMucHJvcHMuc05vdGlmeS5hY3RpdmUgJiYgdGhpcy5wcm9wcy5zTm90aWZ5LnRpbWVyICE9IG51bGwpIHtcblx0ICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpO1xuXHQgICAgICAgICAgICB0aGlzLnRpbWVyID0gc2V0VGltZW91dCh0aGlzLmhhbmRsZUhpZGUsIHRoaXMucHJvcHMuc05vdGlmeS50aW1lciArIDUwMCk7XG5cdCAgICAgICAgfVxuXHQgICAgfSxcblx0ICAgIGhhbmRsZUhpZGU6IGZ1bmN0aW9uIGhhbmRsZUhpZGUoKSB7XG5cdCAgICAgICAgdGhpcy5wcm9wcy5hTm90aWZ5KGZhbHNlLCBudWxsLCBudWxsLCB0aGlzLnByb3BzLnNOb3RpZnkudGltZXIpO1xuXHQgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5oYW5kbGVIaWRlLCB0cnVlKTtcblx0ICAgIH0sXG5cdCAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0ICAgICAgICB2YXIgb3V0ZXJDbGFzc2VzID0gXCJhcHAtbm90aWZ5XCI7XG5cdCAgICAgICAgaWYgKHRoaXMucHJvcHMuc05vdGlmeS5hY3RpdmUpIHtcblx0ICAgICAgICAgICAgb3V0ZXJDbGFzc2VzICs9IFwiIHNob3dcIjtcblx0ICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmhhbmRsZUhpZGUsIHRydWUpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdmFyIGNsb3NlID0gXCJcIjtcblx0ICAgICAgICBpZiAodGhpcy5wcm9wcy5zTm90aWZ5LnRpbWVyID09IG51bGwpIHtcblx0ICAgICAgICAgICAgY2xvc2UgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnYScsIHsgY2xhc3NOYW1lOiAndGktY2xvc2UnLCBvbkNsaWNrOiB0aGlzLmhhbmRsZUhpZGUgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciBtZXNzYWdlID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICdwJyxcblx0ICAgICAgICAgICAgbnVsbCxcblx0ICAgICAgICAgICAgdGhpcy5wcm9wcy5zTm90aWZ5Lm1lc3NhZ2Vcblx0ICAgICAgICApO1xuXHQgICAgICAgIGlmIChfdHlwZW9mKHRoaXMucHJvcHMuc05vdGlmeS5tZXNzYWdlKSA9PSBcIm9iamVjdFwiKSB7XG5cdCAgICAgICAgICAgIG1lc3NhZ2UgPSB0aGlzLnByb3BzLnNOb3RpZnkubWVzc2FnZTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHZhciBjb250ZW50Q2xhc3NlcyA9IFwibm90aWZ5LWNvbnRlbnQgXCIgKyB0aGlzLnByb3BzLnNOb3RpZnkudHlwZTtcblx0ICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICdkaXYnLFxuXHQgICAgICAgICAgICB7IGNsYXNzTmFtZTogb3V0ZXJDbGFzc2VzIH0sXG5cdCAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogY29udGVudENsYXNzZXMgfSxcblx0ICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuXHQgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnbm90aWZ5LW1lc3NhZ2UnIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgY2xvc2UsXG5cdCAgICAgICAgICAgICAgICAgICAgbWVzc2FnZVxuXHQgICAgICAgICAgICAgICAgKVxuXHQgICAgICAgICAgICApXG5cdCAgICAgICAgKTtcblx0ICAgIH1cblx0fSk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBOb3RpZnk7XG5cbi8qKiovIH0pLFxuLyogMjA5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0Ly8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblx0XG5cdC8vIGxvYWQgdGhlIHN0eWxlc1xuXHR2YXIgY29udGVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMjEwKTtcblx0aWYgKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXHQvLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG5cdHZhciB1cGRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2OCkoY29udGVudCwge30pO1xuXHRpZiAoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cdC8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcblx0aWYgKGZhbHNlKSB7XG5cdFx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRpZiAoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vbm90aWZ5LnNjc3NcIiwgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuL25vdGlmeS5zY3NzXCIpO1xuXHRcdFx0XHRpZiAodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uICgpIHtcblx0XHRcdHVwZGF0ZSgpO1xuXHRcdH0pO1xuXHR9XG5cbi8qKiovIH0pLFxuLyogMjEwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0ZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjcpKCk7XG5cdC8vIGltcG9ydHNcblx0XG5cdFxuXHQvLyBtb2R1bGVcblx0ZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmFwcC1ub3RpZnl7ZGlzcGxheTpmbGV4O3Bvc2l0aW9uOmFic29sdXRlO2p1c3RpZnktY29udGVudDpjZW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyO3dpZHRoOjEwMCU7ei1pbmRleDoxO3RvcDotMTAwJTtjb2xvcjojZjFmMWYxO3RyYW5zaXRpb246dG9wIDFzfS5hcHAtbm90aWZ5LnNob3d7dG9wOjI1cHg7YW5pbWF0aW9uOnNob3dOb3RpZnkgLjVzfS5hcHAtbm90aWZ5IC5ub3RpZnktY29udGVudHtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO2FsaWduLWl0ZW1zOmNlbnRlcjttYXgtd2lkdGg6NjAwcHg7Y29sb3I6IzJlMmMyZDtib3gtc2hhZG93OjVweCA1cHggNXB4ICM4ODh9LmFwcC1ub3RpZnkgLm5vdGlmeS1jb250ZW50IHB7bWFyZ2luOjB9LmFwcC1ub3RpZnkgLm5vdGlmeS1jb250ZW50Lm1lc3NhZ2V7YmFja2dyb3VuZC1jb2xvcjojZjlmOGNjfS5hcHAtbm90aWZ5IC5ub3RpZnktY29udGVudC5lcnJvcntiYWNrZ3JvdW5kLWNvbG9yOiNmOTY2NjZ9LmFwcC1ub3RpZnkgLm5vdGlmeS1jb250ZW50LnN1Y2Nlc3N7YmFja2dyb3VuZC1jb2xvcjojYjFmZmI1fS5hcHAtbm90aWZ5IC5ub3RpZnktY29udGVudCAubm90aWZ5LW1lc3NhZ2V7cGFkZGluZzoyMHB4fS5hcHAtbm90aWZ5IC5ub3RpZnktY29udGVudCAudGktY2xvc2V7ZmxvYXQ6cmlnaHQ7cGFkZGluZzowIDAgMTBweCAxMHB4O29wYWNpdHk6Ljc1fS5hcHAtbm90aWZ5IC5ub3RpZnktY29udGVudCAudGktY2xvc2U6aG92ZXJ7b3BhY2l0eToxfUBrZXlmcmFtZXMgc2hvd05vdGlmeXswJXt0b3A6LTEwMCV9NzAle3RvcDoyNXB4fTcwJXt0cmFuc2Zvcm06dHJhbnNsYXRlWSgwKX04NSV7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoMTVweCl9dG97dHJhbnNmb3JtOnRyYW5zbGF0ZVkoMCl9fVwiLCBcIlwiXSk7XG5cdFxuXHQvLyBleHBvcnRzXG5cblxuLyoqKi8gfSksXG4vKiAyMTEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHQvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXHRcblx0Ly8gbG9hZCB0aGUgc3R5bGVzXG5cdHZhciBjb250ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMTIpO1xuXHRpZiAodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cdC8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cblx0dmFyIHVwZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTY4KShjb250ZW50LCB7fSk7XG5cdGlmIChjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuXHRpZiAoZmFsc2UpIHtcblx0XHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdGlmICghY29udGVudC5sb2NhbHMpIHtcblx0XHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi9tYWluLnNjc3NcIiwgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuL21haW4uc2Nzc1wiKTtcblx0XHRcdFx0aWYgKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbiAoKSB7XG5cdFx0XHR1cGRhdGUoKTtcblx0XHR9KTtcblx0fVxuXG4vKioqLyB9KSxcbi8qIDIxMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTY3KSgpO1xuXHQvLyBpbXBvcnRzXG5cdFxuXHRcblx0Ly8gbW9kdWxlXG5cdGV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcImJvZHl7b3ZlcmZsb3c6aGlkZGVuO21hcmdpbjowO2ZvbnQtZmFtaWx5OlRlbnNvTWVkaXVtLFRlbnNvTGlnaHQsSGVsdmV0aWNhIE5ldWUsSGVsdmV0aWNhLEFyaWFsLHNhbnMtc2VyaWY7Zm9udC1zaXplOjE4cHg7YmFja2dyb3VuZC1jb2xvcjojM2EzNTNjfWJvZHkgKntmb250LWZhbWlseTppbmhlcml0O2ZvbnQtc2l6ZTppbmhlcml0O291dGxpbmUtY29sb3I6I2RlZGExZH1ib2R5IGlucHV0LGJvZHkgc2VsZWN0LGJvZHkgdGV4dGFyZWF7Ym9yZGVyLXJhZGl1czo0cHg7Ym9yZGVyOjFweCBzb2xpZCAjMmUyYzJkO3BhZGRpbmc6M3B4fS5hcHAgLmFwcC1hdXRoZW50aWNhdGV7ZGlzcGxheTpmbGV4O3Bvc2l0aW9uOmFic29sdXRlO2p1c3RpZnktY29udGVudDpjZW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyO3RyYW5zZm9ybTpwZXJzcGVjdGl2ZSg4MDBweCkgcm90YXRlWCg5MGRlZyk7dHJhbnNpdGlvbi1wcm9wZXJ0eTphbGw7dHJhbnNpdGlvbi1kdXJhdGlvbjoxczt0cmFuc2l0aW9uLWRlbGF5Oi41czt0cmFuc2Zvcm0tb3JpZ2luOmJvdHRvbTt3aWR0aDoxMDAlO2hlaWdodDoxMDAlfS5hcHAgLmFwcC1hdXRoZW50aWNhdGUuc2hvd3t0cmFuc2Zvcm06cGVyc3BlY3RpdmUoMCkgcm90YXRlWCgwZGVnKX0uYXBwIC5hcHAtYXV0aGVudGljYXRlLmhpZGV7dHJhbnNpdGlvbi1kZWxheTowc30uYXBwIC5hcHAtYm9keXtkaXNwbGF5OmZsZXg7dHJhbnNmb3JtOnBlcnNwZWN0aXZlKDApIHJvdGF0ZVgoMGRlZyk7dHJhbnNpdGlvbi1wcm9wZXJ0eTphbGw7dHJhbnNpdGlvbi1kdXJhdGlvbjouNXM7dHJhbnNmb3JtLW9yaWdpbjpib3R0b219LmFwcCAuYXBwLWJvZHkuaGlkZXt0cmFuc2Zvcm06cGVyc3BlY3RpdmUoODAwcHgpIHJvdGF0ZVgoOTBkZWcpfS5hcHAgLmFwcC1ib2R5LnNob3d7dHJhbnNpdGlvbi1kZWxheToxc30uYXBwIC5hcHAtYm9keSAuc2l0ZS1ib2R5e2ZsZXg6MTtoZWlnaHQ6MTAwdmg7YmFja2dyb3VuZC1jb2xvcjojZWJlYmVkfS5hcHAgLmFwcC1ib2R5IC5zaXRlLWJvZHk+Lm9wZW4tY29udGVudHtvdmVyZmxvdzpzY3JvbGw7cGFkZGluZzowO21hcmdpbi1ib3R0b206NTBweDtoZWlnaHQ6Y2FsYygxMDAlIC0gNjBweCl9aW5wdXQuZXJyb3J7YmFja2dyb3VuZC1jb2xvcjojZjk2NjY2fS52YWxpZGF0aW9ue2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW59LnZhbGlkYXRpb24gaDN7bWFyZ2luOjB9LnZhbGlkYXRpb24gdWx7bWFyZ2luOjEwcHggMDtwYWRkaW5nLWxlZnQ6MjBweH0udG9nZ2xlLXN3aXRjaHtwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmlubGluZS1ibG9jazt3aWR0aDo2MHB4O2hlaWdodDozNHB4fS50b2dnbGUtc3dpdGNoIGlucHV0e2Rpc3BsYXk6bm9uZX0udG9nZ2xlLXN3aXRjaCBpbnB1dDpjaGVja2VkKy5zbGlkZXJ7YmFja2dyb3VuZC1jb2xvcjojZGVkYTFkfS50b2dnbGUtc3dpdGNoIGlucHV0OmNoZWNrZWQrLnNsaWRlcjpiZWZvcmV7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWCgyNnB4KTt0cmFuc2Zvcm06dHJhbnNsYXRlWCgyNnB4KX0udG9nZ2xlLXN3aXRjaCAuc2xpZGVye3Bvc2l0aW9uOmFic29sdXRlO2N1cnNvcjpwb2ludGVyO3RvcDowO2xlZnQ6MDtyaWdodDowO2JvdHRvbTowO2JhY2tncm91bmQtY29sb3I6I2NjYzt0cmFuc2l0aW9uOi40cztib3JkZXItcmFkaXVzOjM0cHh9LnRvZ2dsZS1zd2l0Y2ggLnNsaWRlcjpiZWZvcmV7cG9zaXRpb246YWJzb2x1dGU7Y29udGVudDpcXFwiXFxcIjtoZWlnaHQ6MjZweDt3aWR0aDoyNnB4O2xlZnQ6NHB4O2JvdHRvbTo0cHg7YmFja2dyb3VuZC1jb2xvcjojZmZmO3RyYW5zaXRpb246LjRzO2JvcmRlci1yYWRpdXM6NTAlfS5sb2FkaW5nOmJlZm9yZXtjb250ZW50OlxcXCJcXFwiO3Bvc2l0aW9uOmZpeGVkO3otaW5kZXg6OTk5OTk5OTk5OTk5OTk5O3RvcDowO2xlZnQ6MDtib3R0b206MDtyaWdodDowO2JhY2tncm91bmQtY29sb3I6IzAwMDtvcGFjaXR5Oi44NTtiYWNrZ3JvdW5kLWltYWdlOnVybChcXFwiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQRDk0Yld3Z2RtVnljMmx2YmowaU1TNHdJaUJsYm1OdlpHbHVaejBpZFhSbUxUZ2lQejRLUEhOMlp5QjNhV1IwYUQwbk1UazJjSGduSUdobGFXZG9kRDBuTVRrMmNIZ25JSGh0Ykc1elBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHlNREF3TDNOMlp5SWdkbWxsZDBKdmVEMGlNQ0F3SURFd01DQXhNREFpSUhCeVpYTmxjblpsUVhOd1pXTjBVbUYwYVc4OUluaE5hV1JaVFdsa0lpQmpiR0Z6Y3owaWRXbHNMWE53YVc0aVBnb2dJRHh5WldOMElIZzlJakFpSUhrOUlqQWlJSGRwWkhSb1BTSXhNREFpSUdobGFXZG9kRDBpTVRBd0lpQm1hV3hzUFNKdWIyNWxJaUJqYkdGemN6MGlZbXNpUGp3dmNtVmpkRDRLSUNBOFp5QjBjbUZ1YzJadmNtMDlJblJ5WVc1emJHRjBaU2cxTUNBMU1Da2lQZ29nSUNBZ1BHY2dkSEpoYm5ObWIzSnRQU0p5YjNSaGRHVW9NQ2tnZEhKaGJuTnNZWFJsS0RNMElEQXBJajRLSUNBZ0lDQWdQR05wY21Oc1pTQmplRDBpTUNJZ1kzazlJakFpSUhJOUlqZ2lJR1pwYkd3OUlpTmtaV1JoTVdRaVBnb2dJQ0FnSUNBZ0lEeGhibWx0WVhSbElHRjBkSEpwWW5WMFpVNWhiV1U5SW05d1lXTnBkSGtpSUdaeWIyMDlJakVpSUhSdlBTSXdMakVpSUdKbFoybHVQU0l3Y3lJZ1pIVnlQU0l4Y3lJZ2NtVndaV0YwUTI5MWJuUTlJbWx1WkdWbWFXNXBkR1VpUGp3dllXNXBiV0YwWlQ0S0lDQWdJQ0FnSUNBOFlXNXBiV0YwWlZSeVlXNXpabTl5YlNCaGRIUnlhV0oxZEdWT1lXMWxQU0owY21GdWMyWnZjbTBpSUhSNWNHVTlJbk5qWVd4bElpQm1jbTl0UFNJeExqWWlJSFJ2UFNJeElpQmlaV2RwYmowaU1ITWlJR1IxY2owaU1YTWlJSEpsY0dWaGRFTnZkVzUwUFNKcGJtUmxabWx1YVhSbElqNDhMMkZ1YVcxaGRHVlVjbUZ1YzJadmNtMCtDaUFnSUNBZ0lEd3ZZMmx5WTJ4bFBnb2dJQ0FnUEM5blBnb2dJQ0FnUEdjZ2RISmhibk5tYjNKdFBTSnliM1JoZEdVb05EVXBJSFJ5WVc1emJHRjBaU2d6TkNBd0tTSStDaUFnSUNBZ0lEeGphWEpqYkdVZ1kzZzlJakFpSUdONVBTSXdJaUJ5UFNJNElpQm1hV3hzUFNJalpHVmtZVEZrSWo0S0lDQWdJQ0FnSUNBOFlXNXBiV0YwWlNCaGRIUnlhV0oxZEdWT1lXMWxQU0p2Y0dGamFYUjVJaUJtY205dFBTSXhJaUIwYnowaU1DNHhJaUJpWldkcGJqMGlNQzR4TW5NaUlHUjFjajBpTVhNaUlISmxjR1ZoZEVOdmRXNTBQU0pwYm1SbFptbHVhWFJsSWo0OEwyRnVhVzFoZEdVK0NpQWdJQ0FnSUNBZ1BHRnVhVzFoZEdWVWNtRnVjMlp2Y20wZ1lYUjBjbWxpZFhSbFRtRnRaVDBpZEhKaGJuTm1iM0p0SWlCMGVYQmxQU0p6WTJGc1pTSWdabkp2YlQwaU1TNDJJaUIwYnowaU1TSWdZbVZuYVc0OUlqQXVNVEp6SWlCa2RYSTlJakZ6SWlCeVpYQmxZWFJEYjNWdWREMGlhVzVrWldacGJtbDBaU0krUEM5aGJtbHRZWFJsVkhKaGJuTm1iM0p0UGdvZ0lDQWdJQ0E4TDJOcGNtTnNaVDRLSUNBZ0lEd3ZaejRLSUNBZ0lEeG5JSFJ5WVc1elptOXliVDBpY205MFlYUmxLRGt3S1NCMGNtRnVjMnhoZEdVb016UWdNQ2tpUGdvZ0lDQWdJQ0E4WTJseVkyeGxJR040UFNJd0lpQmplVDBpTUNJZ2NqMGlPQ0lnWm1sc2JEMGlJMlJsWkdFeFpDSStDaUFnSUNBZ0lDQWdQR0Z1YVcxaGRHVWdZWFIwY21saWRYUmxUbUZ0WlQwaWIzQmhZMmwwZVNJZ1puSnZiVDBpTVNJZ2RHODlJakF1TVNJZ1ltVm5hVzQ5SWpBdU1qVnpJaUJrZFhJOUlqRnpJaUJ5WlhCbFlYUkRiM1Z1ZEQwaWFXNWtaV1pwYm1sMFpTSStQQzloYm1sdFlYUmxQZ29nSUNBZ0lDQWdJRHhoYm1sdFlYUmxWSEpoYm5ObWIzSnRJR0YwZEhKcFluVjBaVTVoYldVOUluUnlZVzV6Wm05eWJTSWdkSGx3WlQwaWMyTmhiR1VpSUdaeWIyMDlJakV1TmlJZ2RHODlJakVpSUdKbFoybHVQU0l3TGpJMWN5SWdaSFZ5UFNJeGN5SWdjbVZ3WldGMFEyOTFiblE5SW1sdVpHVm1hVzVwZEdVaVBqd3ZZVzVwYldGMFpWUnlZVzV6Wm05eWJUNEtJQ0FnSUNBZ1BDOWphWEpqYkdVK0NpQWdJQ0E4TDJjK0NpQWdJQ0E4WnlCMGNtRnVjMlp2Y20wOUluSnZkR0YwWlNneE16VXBJSFJ5WVc1emJHRjBaU2d6TkNBd0tTSStDaUFnSUNBZ0lEeGphWEpqYkdVZ1kzZzlJakFpSUdONVBTSXdJaUJ5UFNJNElpQm1hV3hzUFNJalpHVmtZVEZrSWo0S0lDQWdJQ0FnSUNBOFlXNXBiV0YwWlNCaGRIUnlhV0oxZEdWT1lXMWxQU0p2Y0dGamFYUjVJaUJtY205dFBTSXhJaUIwYnowaU1DNHhJaUJpWldkcGJqMGlNQzR6TjNNaUlHUjFjajBpTVhNaUlISmxjR1ZoZEVOdmRXNTBQU0pwYm1SbFptbHVhWFJsSWo0OEwyRnVhVzFoZEdVK0NpQWdJQ0FnSUNBZ1BHRnVhVzFoZEdWVWNtRnVjMlp2Y20wZ1lYUjBjbWxpZFhSbFRtRnRaVDBpZEhKaGJuTm1iM0p0SWlCMGVYQmxQU0p6WTJGc1pTSWdabkp2YlQwaU1TNDJJaUIwYnowaU1TSWdZbVZuYVc0OUlqQXVNemR6SWlCa2RYSTlJakZ6SWlCeVpYQmxZWFJEYjNWdWREMGlhVzVrWldacGJtbDBaU0krUEM5aGJtbHRZWFJsVkhKaGJuTm1iM0p0UGdvZ0lDQWdJQ0E4TDJOcGNtTnNaVDRLSUNBZ0lEd3ZaejRLSUNBZ0lEeG5JSFJ5WVc1elptOXliVDBpY205MFlYUmxLREU0TUNrZ2RISmhibk5zWVhSbEtETTBJREFwSWo0S0lDQWdJQ0FnUEdOcGNtTnNaU0JqZUQwaU1DSWdZM2s5SWpBaUlISTlJamdpSUdacGJHdzlJaU5rWldSaE1XUWlQZ29nSUNBZ0lDQWdJRHhoYm1sdFlYUmxJR0YwZEhKcFluVjBaVTVoYldVOUltOXdZV05wZEhraUlHWnliMjA5SWpFaUlIUnZQU0l3TGpFaUlHSmxaMmx1UFNJd0xqVnpJaUJrZFhJOUlqRnpJaUJ5WlhCbFlYUkRiM1Z1ZEQwaWFXNWtaV1pwYm1sMFpTSStQQzloYm1sdFlYUmxQZ29nSUNBZ0lDQWdJRHhoYm1sdFlYUmxWSEpoYm5ObWIzSnRJR0YwZEhKcFluVjBaVTVoYldVOUluUnlZVzV6Wm05eWJTSWdkSGx3WlQwaWMyTmhiR1VpSUdaeWIyMDlJakV1TmlJZ2RHODlJakVpSUdKbFoybHVQU0l3TGpWeklpQmtkWEk5SWpGeklpQnlaWEJsWVhSRGIzVnVkRDBpYVc1a1pXWnBibWwwWlNJK1BDOWhibWx0WVhSbFZISmhibk5tYjNKdFBnb2dJQ0FnSUNBOEwyTnBjbU5zWlQ0S0lDQWdJRHd2Wno0S0lDQWdJRHhuSUhSeVlXNXpabTl5YlQwaWNtOTBZWFJsS0RJeU5Ta2dkSEpoYm5Oc1lYUmxLRE0wSURBcElqNEtJQ0FnSUNBZ1BHTnBjbU5zWlNCamVEMGlNQ0lnWTNrOUlqQWlJSEk5SWpnaUlHWnBiR3c5SWlOa1pXUmhNV1FpUGdvZ0lDQWdJQ0FnSUR4aGJtbHRZWFJsSUdGMGRISnBZblYwWlU1aGJXVTlJbTl3WVdOcGRIa2lJR1p5YjIwOUlqRWlJSFJ2UFNJd0xqRWlJR0psWjJsdVBTSXdMall5Y3lJZ1pIVnlQU0l4Y3lJZ2NtVndaV0YwUTI5MWJuUTlJbWx1WkdWbWFXNXBkR1VpUGp3dllXNXBiV0YwWlQ0S0lDQWdJQ0FnSUNBOFlXNXBiV0YwWlZSeVlXNXpabTl5YlNCaGRIUnlhV0oxZEdWT1lXMWxQU0owY21GdWMyWnZjbTBpSUhSNWNHVTlJbk5qWVd4bElpQm1jbTl0UFNJeExqWWlJSFJ2UFNJeElpQmlaV2RwYmowaU1DNDJNbk1pSUdSMWNqMGlNWE1pSUhKbGNHVmhkRU52ZFc1MFBTSnBibVJsWm1sdWFYUmxJajQ4TDJGdWFXMWhkR1ZVY21GdWMyWnZjbTArQ2lBZ0lDQWdJRHd2WTJseVkyeGxQZ29nSUNBZ1BDOW5QZ29nSUNBZ1BHY2dkSEpoYm5ObWIzSnRQU0p5YjNSaGRHVW9NamN3S1NCMGNtRnVjMnhoZEdVb016UWdNQ2tpUGdvZ0lDQWdJQ0E4WTJseVkyeGxJR040UFNJd0lpQmplVDBpTUNJZ2NqMGlPQ0lnWm1sc2JEMGlJMlJsWkdFeFpDSStDaUFnSUNBZ0lDQWdQR0Z1YVcxaGRHVWdZWFIwY21saWRYUmxUbUZ0WlQwaWIzQmhZMmwwZVNJZ1puSnZiVDBpTVNJZ2RHODlJakF1TVNJZ1ltVm5hVzQ5SWpBdU56VnpJaUJrZFhJOUlqRnpJaUJ5WlhCbFlYUkRiM1Z1ZEQwaWFXNWtaV1pwYm1sMFpTSStQQzloYm1sdFlYUmxQZ29nSUNBZ0lDQWdJRHhoYm1sdFlYUmxWSEpoYm5ObWIzSnRJR0YwZEhKcFluVjBaVTVoYldVOUluUnlZVzV6Wm05eWJTSWdkSGx3WlQwaWMyTmhiR1VpSUdaeWIyMDlJakV1TmlJZ2RHODlJakVpSUdKbFoybHVQU0l3TGpjMWN5SWdaSFZ5UFNJeGN5SWdjbVZ3WldGMFEyOTFiblE5SW1sdVpHVm1hVzVwZEdVaVBqd3ZZVzVwYldGMFpWUnlZVzV6Wm05eWJUNEtJQ0FnSUNBZ1BDOWphWEpqYkdVK0NpQWdJQ0E4TDJjK0NpQWdJQ0E4WnlCMGNtRnVjMlp2Y20wOUluSnZkR0YwWlNnek1UVXBJSFJ5WVc1emJHRjBaU2d6TkNBd0tTSStDaUFnSUNBZ0lEeGphWEpqYkdVZ1kzZzlJakFpSUdONVBTSXdJaUJ5UFNJNElpQm1hV3hzUFNJalpHVmtZVEZrSWo0S0lDQWdJQ0FnSUNBOFlXNXBiV0YwWlNCaGRIUnlhV0oxZEdWT1lXMWxQU0p2Y0dGamFYUjVJaUJtY205dFBTSXhJaUIwYnowaU1DNHhJaUJpWldkcGJqMGlNQzQ0TjNNaUlHUjFjajBpTVhNaUlISmxjR1ZoZEVOdmRXNTBQU0pwYm1SbFptbHVhWFJsSWo0OEwyRnVhVzFoZEdVK0NpQWdJQ0FnSUNBZ1BHRnVhVzFoZEdWVWNtRnVjMlp2Y20wZ1lYUjBjbWxpZFhSbFRtRnRaVDBpZEhKaGJuTm1iM0p0SWlCMGVYQmxQU0p6WTJGc1pTSWdabkp2YlQwaU1TNDJJaUIwYnowaU1TSWdZbVZuYVc0OUlqQXVPRGR6SWlCa2RYSTlJakZ6SWlCeVpYQmxZWFJEYjNWdWREMGlhVzVrWldacGJtbDBaU0krUEM5aGJtbHRZWFJsVkhKaGJuTm1iM0p0UGdvZ0lDQWdJQ0E4TDJOcGNtTnNaVDRLSUNBZ0lEd3ZaejRLSUNBOEwyYytDand2YzNablBnPT1cXFwiKTtiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjo1MCV9QG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLWRldmljZS13aWR0aDozMjBweCkgYW5kIChtYXgtZGV2aWNlLXdpZHRoOjQ4MHB4KXtib2R5e2ZvbnQtc2l6ZTozNnB4fS5hcHAgLmFwcC1ib2R5e3Bvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6YmxvY2s7aGVpZ2h0OjEwMHZofS5hcHAgLmFwcC1ib2R5IC5zaXRlLWJvZHl7cG9zaXRpb246YWJzb2x1dGU7Ym90dG9tOjgwcHg7cmlnaHQ6MDtsZWZ0OjA7dG9wOjA7aGVpZ2h0OmF1dG99LmFwcCAuYXBwLWJvZHkgLnNpdGUtYm9keSAub3Blbi1jb250ZW50e3Bvc2l0aW9uOmFic29sdXRlO2JvdHRvbTowO3RvcDo2MHB4O3JpZ2h0OjA7bGVmdDowO21hcmdpbi1ib3R0b206MTBweDtoZWlnaHQ6YXV0b30uYXBwIC5hcHAtYm9keSAubmF2aWdhdGlvbntwb3NpdGlvbjpmaXhlZDtib3R0b206MDt3aWR0aDoxMDAlfX1cIiwgXCJcIl0pO1xuXHRcblx0Ly8gZXhwb3J0c1xuXG5cbi8qKiovIH0pLFxuLyogMjEzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAoYykgMjAxNC1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKi9cblx0XG5cdG1vZHVsZS5leHBvcnRzLkNvbnRhaW5lciA9IF9fd2VicGFja19yZXF1aXJlX18oMjE0KTtcblx0bW9kdWxlLmV4cG9ydHMuTWl4aW4gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxOCk7XG5cdG1vZHVsZS5leHBvcnRzLlJlZHVjZVN0b3JlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMTkpO1xuXHRtb2R1bGUuZXhwb3J0cy5TdG9yZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjIwKTtcblxuXG4vKioqLyB9KSxcbi8qIDIxNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzKSB7LyoqXG5cdCAqIENvcHlyaWdodCAoYykgMjAxNC1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgRmx1eENvbnRhaW5lclxuXHQgKiBcblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24nKTsgfSB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAnZnVuY3Rpb24nICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAnICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXHRcblx0dmFyIEZsdXhDb250YWluZXJTdWJzY3JpcHRpb25zID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMTUpO1xuXHR2YXIgUmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0dmFyIGludmFyaWFudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTkxKTtcblx0dmFyIHNoYWxsb3dFcXVhbCA9IF9fd2VicGFja19yZXF1aXJlX18oMjE3KTtcblx0XG5cdHZhciBDb21wb25lbnQgPSBSZWFjdC5Db21wb25lbnQ7XG5cdFxuXHR2YXIgREVGQVVMVF9PUFRJT05TID0ge1xuXHQgIHB1cmU6IHRydWUsXG5cdCAgd2l0aFByb3BzOiBmYWxzZSxcblx0ICB3aXRoQ29udGV4dDogZmFsc2Vcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBBIEZsdXhDb250YWluZXIgaXMgdXNlZCB0byBzdWJzY3JpYmUgYSByZWFjdCBjb21wb25lbnQgdG8gbXVsdGlwbGUgc3RvcmVzLlxuXHQgKiBUaGUgc3RvcmVzIHRoYXQgYXJlIHVzZWQgbXVzdCBiZSByZXR1cm5lZCBmcm9tIGEgc3RhdGljIGBnZXRTdG9yZXMoKWAgbWV0aG9kLlxuXHQgKlxuXHQgKiBUaGUgY29tcG9uZW50IHJlY2VpdmVzIGluZm9ybWF0aW9uIGZyb20gdGhlIHN0b3JlcyB2aWEgc3RhdGUuIFRoZSBzdGF0ZVxuXHQgKiBpcyBnZW5lcmF0ZWQgdXNpbmcgYSBzdGF0aWMgYGNhbGN1bGF0ZVN0YXRlKClgIG1ldGhvZCB0aGF0IGVhY2ggY29udGFpbmVyXG5cdCAqIG11c3QgaW1wbGVtZW50LiBBIHNpbXBsZSBjb250YWluZXIgbWF5IGxvb2sgbGlrZTpcblx0ICpcblx0ICogICBjbGFzcyBGb29Db250YWluZXIgZXh0ZW5kcyBDb21wb25lbnQge1xuXHQgKiAgICAgc3RhdGljIGdldFN0b3JlcygpIHtcblx0ICogICAgICAgcmV0dXJuIFtGb29TdG9yZV07XG5cdCAqICAgICB9XG5cdCAqXG5cdCAqICAgICBzdGF0aWMgY2FsY3VsYXRlU3RhdGUoKSB7XG5cdCAqICAgICAgIHJldHVybiB7XG5cdCAqICAgICAgICAgZm9vOiBGb29TdG9yZS5nZXRTdGF0ZSgpLFxuXHQgKiAgICAgICB9O1xuXHQgKiAgICAgfVxuXHQgKlxuXHQgKiAgICAgcmVuZGVyKCkge1xuXHQgKiAgICAgICByZXR1cm4gPEZvb1ZpZXcgey4uLnRoaXMuc3RhdGV9IC8+O1xuXHQgKiAgICAgfVxuXHQgKiAgIH1cblx0ICpcblx0ICogICBtb2R1bGUuZXhwb3J0cyA9IEZsdXhDb250YWluZXIuY3JlYXRlKEZvb0NvbnRhaW5lcik7XG5cdCAqXG5cdCAqIEZsdXggY29udGFpbmVyIGFsc28gc3VwcG9ydHMgc29tZSBvdGhlciwgbW9yZSBhZHZhbmNlZCB1c2UgY2FzZXMuIElmIHlvdSBuZWVkXG5cdCAqIHRvIGJhc2UgeW91ciBzdGF0ZSBvZmYgb2YgcHJvcHMgYXMgd2VsbDpcblx0ICpcblx0ICogICBjbGFzcyBGb29Db250YWluZXIgZXh0ZW5kcyBDb21wb25lbnQge1xuXHQgKiAgICAgLi4uXG5cdCAqXG5cdCAqICAgICBzdGF0aWMgY2FsY3VsYXRlU3RhdGUocHJldlN0YXRlLCBwcm9wcykge1xuXHQgKiAgICAgICByZXR1cm4ge1xuXHQgKiAgICAgICAgIGZvbzogRm9vU3RvcmUuZ2V0U3BlY2lmaWNGb28ocHJvcHMuaWQpLFxuXHQgKiAgICAgICB9O1xuXHQgKiAgICAgfVxuXHQgKlxuXHQgKiAgICAgLi4uXG5cdCAqICAgfVxuXHQgKlxuXHQgKiAgIG1vZHVsZS5leHBvcnRzID0gRmx1eENvbnRhaW5lci5jcmVhdGUoRm9vQ29udGFpbmVyLCB7d2l0aFByb3BzOiB0cnVlfSk7XG5cdCAqXG5cdCAqIE9yIGlmIHlvdXIgc3RvcmVzIGFyZSBwYXNzZWQgdGhyb3VnaCB5b3VyIHByb3BzOlxuXHQgKlxuXHQgKiAgIGNsYXNzIEZvb0NvbnRhaW5lciBleHRlbmRzIENvbXBvbmVudCB7XG5cdCAqICAgICAuLi5cblx0ICpcblx0ICogICAgIHN0YXRpYyBnZXRTdG9yZXMocHJvcHMpIHtcblx0ICogICAgICAgY29uc3Qge0JhclN0b3JlLCBGb29TdG9yZX0gPSBwcm9wcy5zdG9yZXM7XG5cdCAqICAgICAgIHJldHVybiBbQmFyU3RvcmUsIEZvb1N0b3JlXTtcblx0ICogICAgIH1cblx0ICpcblx0ICogICAgIHN0YXRpYyBjYWxjdWxhdGVTdGF0ZShwcmV2U3RhdGUsIHByb3BzKSB7XG5cdCAqICAgICAgIGNvbnN0IHtCYXJTdG9yZSwgRm9vU3RvcmV9ID0gcHJvcHMuc3RvcmVzO1xuXHQgKiAgICAgICByZXR1cm4ge1xuXHQgKiAgICAgICAgIGJhcjogQmFyU3RvcmUuZ2V0U3RhdGUoKSxcblx0ICogICAgICAgICBmb286IEZvb1N0b3JlLmdldFN0YXRlKCksXG5cdCAqICAgICAgIH07XG5cdCAqICAgICB9XG5cdCAqXG5cdCAqICAgICAuLi5cblx0ICogICB9XG5cdCAqXG5cdCAqICAgbW9kdWxlLmV4cG9ydHMgPSBGbHV4Q29udGFpbmVyLmNyZWF0ZShGb29Db250YWluZXIsIHt3aXRoUHJvcHM6IHRydWV9KTtcblx0ICovXG5cdGZ1bmN0aW9uIGNyZWF0ZShCYXNlLCBvcHRpb25zKSB7XG5cdCAgZW5mb3JjZUludGVyZmFjZShCYXNlKTtcblx0XG5cdCAgLy8gQ29uc3RydWN0IHRoZSBvcHRpb25zIHVzaW5nIGRlZmF1bHQsIG92ZXJyaWRlIHdpdGggdXNlciB2YWx1ZXMgYXMgbmVjZXNzYXJ5LlxuXHQgIHZhciByZWFsT3B0aW9ucyA9IF9leHRlbmRzKHt9LCBERUZBVUxUX09QVElPTlMsIG9wdGlvbnMgfHwge30pO1xuXHRcblx0ICB2YXIgZ2V0U3RhdGUgPSBmdW5jdGlvbiAoc3RhdGUsIG1heWJlUHJvcHMsIG1heWJlQ29udGV4dCkge1xuXHQgICAgdmFyIHByb3BzID0gcmVhbE9wdGlvbnMud2l0aFByb3BzID8gbWF5YmVQcm9wcyA6IHVuZGVmaW5lZDtcblx0ICAgIHZhciBjb250ZXh0ID0gcmVhbE9wdGlvbnMud2l0aENvbnRleHQgPyBtYXliZUNvbnRleHQgOiB1bmRlZmluZWQ7XG5cdCAgICByZXR1cm4gQmFzZS5jYWxjdWxhdGVTdGF0ZShzdGF0ZSwgcHJvcHMsIGNvbnRleHQpO1xuXHQgIH07XG5cdFxuXHQgIHZhciBnZXRTdG9yZXMgPSBmdW5jdGlvbiAobWF5YmVQcm9wcywgbWF5YmVDb250ZXh0KSB7XG5cdCAgICB2YXIgcHJvcHMgPSByZWFsT3B0aW9ucy53aXRoUHJvcHMgPyBtYXliZVByb3BzIDogdW5kZWZpbmVkO1xuXHQgICAgdmFyIGNvbnRleHQgPSByZWFsT3B0aW9ucy53aXRoQ29udGV4dCA/IG1heWJlQ29udGV4dCA6IHVuZGVmaW5lZDtcblx0ICAgIHJldHVybiBCYXNlLmdldFN0b3Jlcyhwcm9wcywgY29udGV4dCk7XG5cdCAgfTtcblx0XG5cdCAgLy8gQnVpbGQgdGhlIGNvbnRhaW5lciBjbGFzcy5cblx0XG5cdCAgdmFyIENvbnRhaW5lckNsYXNzID0gKGZ1bmN0aW9uIChfQmFzZSkge1xuXHQgICAgX2luaGVyaXRzKENvbnRhaW5lckNsYXNzLCBfQmFzZSk7XG5cdFxuXHQgICAgZnVuY3Rpb24gQ29udGFpbmVyQ2xhc3MocHJvcHMsIGNvbnRleHQpIHtcblx0ICAgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb250YWluZXJDbGFzcyk7XG5cdFxuXHQgICAgICBfQmFzZS5jYWxsKHRoaXMsIHByb3BzLCBjb250ZXh0KTtcblx0ICAgICAgdGhpcy5fZmx1eENvbnRhaW5lclN1YnNjcmlwdGlvbnMgPSBuZXcgRmx1eENvbnRhaW5lclN1YnNjcmlwdGlvbnMoKTtcblx0ICAgICAgdGhpcy5fZmx1eENvbnRhaW5lclN1YnNjcmlwdGlvbnMuc2V0U3RvcmVzKGdldFN0b3Jlcyhwcm9wcykpO1xuXHQgICAgICB0aGlzLl9mbHV4Q29udGFpbmVyU3Vic2NyaXB0aW9ucy5hZGRMaXN0ZW5lcihmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgX3RoaXMuc2V0U3RhdGUoZnVuY3Rpb24gKHByZXZTdGF0ZSwgY3VycmVudFByb3BzKSB7XG5cdCAgICAgICAgICByZXR1cm4gZ2V0U3RhdGUocHJldlN0YXRlLCBjdXJyZW50UHJvcHMsIGNvbnRleHQpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9KTtcblx0ICAgICAgdmFyIGNhbGN1bGF0ZWRTdGF0ZSA9IGdldFN0YXRlKHVuZGVmaW5lZCwgcHJvcHMsIGNvbnRleHQpO1xuXHQgICAgICB0aGlzLnN0YXRlID0gX2V4dGVuZHMoe30sIHRoaXMuc3RhdGUgfHwge30sIGNhbGN1bGF0ZWRTdGF0ZSk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gTWFrZSBzdXJlIHdlIG92ZXJyaWRlIHNob3VsZENvbXBvbmVudFVwZGF0ZSBvbmx5IGlmIHRoZSBwdXJlIG9wdGlvbiBpc1xuXHQgICAgLy8gc3BlY2lmaWVkLiBXZSBjYW4ndCBvdmVycmlkZSB0aGlzIGFib3ZlIGJlY2F1c2Ugd2UgZG9uJ3Qgd2FudCB0byBvdmVycmlkZVxuXHQgICAgLy8gdGhlIGRlZmF1bHQgYmVoYXZpb3Igb24gYWNjaWRlbnQuIFN1cGVyIHdvcmtzIHdlaXJkIHdpdGggcmVhY3QgRVM2IGNsYXNzZXMuXG5cdFxuXHQgICAgQ29udGFpbmVyQ2xhc3MucHJvdG90eXBlLmNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgPSBmdW5jdGlvbiBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcywgbmV4dENvbnRleHQpIHtcblx0ICAgICAgaWYgKF9CYXNlLnByb3RvdHlwZS5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKSB7XG5cdCAgICAgICAgX0Jhc2UucHJvdG90eXBlLmNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMuY2FsbCh0aGlzLCBuZXh0UHJvcHMsIG5leHRDb250ZXh0KTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKHJlYWxPcHRpb25zLndpdGhQcm9wcyB8fCByZWFsT3B0aW9ucy53aXRoQ29udGV4dCkge1xuXHQgICAgICAgIC8vIFVwZGF0ZSBib3RoIHN0b3JlcyBhbmQgc3RhdGUuXG5cdCAgICAgICAgdGhpcy5fZmx1eENvbnRhaW5lclN1YnNjcmlwdGlvbnMuc2V0U3RvcmVzKGdldFN0b3JlcyhuZXh0UHJvcHMsIG5leHRDb250ZXh0KSk7XG5cdCAgICAgICAgdGhpcy5zZXRTdGF0ZShmdW5jdGlvbiAocHJldlN0YXRlKSB7XG5cdCAgICAgICAgICByZXR1cm4gZ2V0U3RhdGUocHJldlN0YXRlLCBuZXh0UHJvcHMsIG5leHRDb250ZXh0KTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICBDb250YWluZXJDbGFzcy5wcm90b3R5cGUuY29tcG9uZW50V2lsbFVubW91bnQgPSBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcblx0ICAgICAgaWYgKF9CYXNlLnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudCkge1xuXHQgICAgICAgIF9CYXNlLnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudC5jYWxsKHRoaXMpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB0aGlzLl9mbHV4Q29udGFpbmVyU3Vic2NyaXB0aW9ucy5yZXNldCgpO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gQ29udGFpbmVyQ2xhc3M7XG5cdCAgfSkoQmFzZSk7XG5cdFxuXHQgIHZhciBjb250YWluZXIgPSByZWFsT3B0aW9ucy5wdXJlID8gY3JlYXRlUHVyZUNvbXBvbmVudChDb250YWluZXJDbGFzcykgOiBDb250YWluZXJDbGFzcztcblx0XG5cdCAgLy8gVXBkYXRlIHRoZSBuYW1lIG9mIHRoZSBjb250YWluZXIgYmVmb3JlIHJldHVybmluZ1xuXHQgIHZhciBjb21wb25lbnROYW1lID0gQmFzZS5kaXNwbGF5TmFtZSB8fCBCYXNlLm5hbWU7XG5cdCAgY29udGFpbmVyLmRpc3BsYXlOYW1lID0gJ0ZsdXhDb250YWluZXIoJyArIGNvbXBvbmVudE5hbWUgKyAnKSc7XG5cdCAgcmV0dXJuIGNvbnRhaW5lcjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlUHVyZUNvbXBvbmVudChCYXNlQ29tcG9uZW50KSB7XG5cdCAgdmFyIFB1cmVDb21wb25lbnQgPSAoZnVuY3Rpb24gKF9CYXNlQ29tcG9uZW50KSB7XG5cdCAgICBfaW5oZXJpdHMoUHVyZUNvbXBvbmVudCwgX0Jhc2VDb21wb25lbnQpO1xuXHRcblx0ICAgIGZ1bmN0aW9uIFB1cmVDb21wb25lbnQoKSB7XG5cdCAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQdXJlQ29tcG9uZW50KTtcblx0XG5cdCAgICAgIF9CYXNlQ29tcG9uZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICB9XG5cdFxuXHQgICAgUHVyZUNvbXBvbmVudC5wcm90b3R5cGUuc2hvdWxkQ29tcG9uZW50VXBkYXRlID0gZnVuY3Rpb24gc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5leHRQcm9wcywgbmV4dFN0YXRlKSB7XG5cdCAgICAgIHJldHVybiAhc2hhbGxvd0VxdWFsKHRoaXMucHJvcHMsIG5leHRQcm9wcykgfHwgIXNoYWxsb3dFcXVhbCh0aGlzLnN0YXRlLCBuZXh0U3RhdGUpO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gUHVyZUNvbXBvbmVudDtcblx0ICB9KShCYXNlQ29tcG9uZW50KTtcblx0XG5cdCAgcmV0dXJuIFB1cmVDb21wb25lbnQ7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGVuZm9yY2VJbnRlcmZhY2Uobykge1xuXHQgICFvLmdldFN0b3JlcyA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdDb21wb25lbnRzIHRoYXQgdXNlIEZsdXhDb250YWluZXIgbXVzdCBpbXBsZW1lbnQgYHN0YXRpYyBnZXRTdG9yZXMoKWAnKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdCAgIW8uY2FsY3VsYXRlU3RhdGUgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnQ29tcG9uZW50cyB0aGF0IHVzZSBGbHV4Q29udGFpbmVyIG11c3QgaW1wbGVtZW50IGBzdGF0aWMgY2FsY3VsYXRlU3RhdGUoKWAnKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBUaGlzIGlzIGEgd2F5IHRvIGNvbm5lY3Qgc3RvcmVzIHRvIGEgZnVuY3Rpb25hbCBzdGF0ZWxlc3Mgdmlldy4gSGVyZSdzIGFcblx0ICogc2ltcGxlIGV4YW1wbGU6XG5cdCAqXG5cdCAqICAgLy8gRm9vVmlldy5qc1xuXHQgKlxuXHQgKiAgIGZ1bmN0aW9uIEZvb1ZpZXcocHJvcHMpIHtcblx0ICogICAgIHJldHVybiA8ZGl2Pntwcm9wcy52YWx1ZX08L2Rpdj47XG5cdCAqICAgfVxuXHQgKlxuXHQgKiAgIG1vZHVsZS5leHBvcnRzID0gRm9vVmlldztcblx0ICpcblx0ICpcblx0ICogICAvLyBGb29Db250YWluZXIuanNcblx0ICpcblx0ICogICBmdW5jdGlvbiBnZXRTdG9yZXMoKSB7XG5cdCAqICAgICByZXR1cm4gW0Zvb1N0b3JlXTtcblx0ICogICB9XG5cdCAqXG5cdCAqICAgZnVuY3Rpb24gY2FsY3VsYXRlU3RhdGUoKSB7XG5cdCAqICAgICByZXR1cm4ge1xuXHQgKiAgICAgICB2YWx1ZTogRm9vU3RvcmUuZ2V0U3RhdGUoKTtcblx0ICogICAgIH07XG5cdCAqICAgfVxuXHQgKlxuXHQgKiAgIG1vZHVsZS5leHBvcnRzID0gRmx1eENvbnRhaW5lci5jcmVhdGVGdW5jdGlvbmFsKFxuXHQgKiAgICAgRm9vVmlldyxcblx0ICogICAgIGdldFN0b3Jlcyxcblx0ICogICAgIGNhbGN1bGF0ZVN0YXRlLFxuXHQgKiAgICk7XG5cdCAqXG5cdCAqL1xuXHRmdW5jdGlvbiBjcmVhdGVGdW5jdGlvbmFsKHZpZXdGbiwgX2dldFN0b3JlcywgX2NhbGN1bGF0ZVN0YXRlLCBvcHRpb25zKSB7XG5cdCAgdmFyIEZ1bmN0aW9uYWxDb250YWluZXIgPSAoZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcblx0ICAgIF9pbmhlcml0cyhGdW5jdGlvbmFsQ29udGFpbmVyLCBfQ29tcG9uZW50KTtcblx0XG5cdCAgICBmdW5jdGlvbiBGdW5jdGlvbmFsQ29udGFpbmVyKCkge1xuXHQgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRnVuY3Rpb25hbENvbnRhaW5lcik7XG5cdFxuXHQgICAgICBfQ29tcG9uZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gVXBkYXRlIHRoZSBuYW1lIG9mIHRoZSBjb21wb25lbnQgYmVmb3JlIGNyZWF0aW5nIHRoZSBjb250YWluZXIuXG5cdFxuXHQgICAgRnVuY3Rpb25hbENvbnRhaW5lci5nZXRTdG9yZXMgPSBmdW5jdGlvbiBnZXRTdG9yZXMocHJvcHMsIGNvbnRleHQpIHtcblx0ICAgICAgcmV0dXJuIF9nZXRTdG9yZXMocHJvcHMsIGNvbnRleHQpO1xuXHQgICAgfTtcblx0XG5cdCAgICBGdW5jdGlvbmFsQ29udGFpbmVyLmNhbGN1bGF0ZVN0YXRlID0gZnVuY3Rpb24gY2FsY3VsYXRlU3RhdGUocHJldlN0YXRlLCBwcm9wcywgY29udGV4dCkge1xuXHQgICAgICByZXR1cm4gX2NhbGN1bGF0ZVN0YXRlKHByZXZTdGF0ZSwgcHJvcHMsIGNvbnRleHQpO1xuXHQgICAgfTtcblx0XG5cdCAgICBGdW5jdGlvbmFsQ29udGFpbmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoKSB7XG5cdCAgICAgIHJldHVybiB2aWV3Rm4odGhpcy5zdGF0ZSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIHJldHVybiBGdW5jdGlvbmFsQ29udGFpbmVyO1xuXHQgIH0pKENvbXBvbmVudCk7XG5cdFxuXHQgIHZhciB2aWV3Rm5OYW1lID0gdmlld0ZuLmRpc3BsYXlOYW1lIHx8IHZpZXdGbi5uYW1lIHx8ICdGdW5jdGlvbmFsQ29udGFpbmVyJztcblx0ICBGdW5jdGlvbmFsQ29udGFpbmVyLmRpc3BsYXlOYW1lID0gdmlld0ZuTmFtZTtcblx0ICByZXR1cm4gY3JlYXRlKEZ1bmN0aW9uYWxDb250YWluZXIsIG9wdGlvbnMpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHsgY3JlYXRlOiBjcmVhdGUsIGNyZWF0ZUZ1bmN0aW9uYWw6IGNyZWF0ZUZ1bmN0aW9uYWwgfTtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oNCkpKVxuXG4vKioqLyB9KSxcbi8qIDIxNSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzKSB7LyoqXG5cdCAqIENvcHlyaWdodCAoYykgMjAxNC1wcmVzZW50LCBGYWNlYm9vaywgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgRmx1eENvbnRhaW5lclN1YnNjcmlwdGlvbnNcblx0ICogXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24nKTsgfSB9XG5cdFxuXHR2YXIgRmx1eFN0b3JlR3JvdXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxNik7XG5cdFxuXHRmdW5jdGlvbiBzaGFsbG93QXJyYXlFcXVhbChhLCBiKSB7XG5cdCAgaWYgKGEgPT09IGIpIHtcblx0ICAgIHJldHVybiB0cnVlO1xuXHQgIH1cblx0ICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKykge1xuXHQgICAgaWYgKGFbaV0gIT09IGJbaV0pIHtcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gdHJ1ZTtcblx0fVxuXHRcblx0dmFyIEZsdXhDb250YWluZXJTdWJzY3JpcHRpb25zID0gKGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBGbHV4Q29udGFpbmVyU3Vic2NyaXB0aW9ucygpIHtcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBGbHV4Q29udGFpbmVyU3Vic2NyaXB0aW9ucyk7XG5cdFxuXHQgICAgdGhpcy5fY2FsbGJhY2tzID0gW107XG5cdCAgfVxuXHRcblx0ICBGbHV4Q29udGFpbmVyU3Vic2NyaXB0aW9ucy5wcm90b3R5cGUuc2V0U3RvcmVzID0gZnVuY3Rpb24gc2V0U3RvcmVzKHN0b3Jlcykge1xuXHQgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICBpZiAodGhpcy5fc3RvcmVzICYmIHNoYWxsb3dBcnJheUVxdWFsKHRoaXMuX3N0b3Jlcywgc3RvcmVzKSkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICB0aGlzLl9zdG9yZXMgPSBzdG9yZXM7XG5cdCAgICB0aGlzLl9yZXNldFRva2VucygpO1xuXHQgICAgdGhpcy5fcmVzZXRTdG9yZUdyb3VwKCk7XG5cdFxuXHQgICAgdmFyIGNoYW5nZWQgPSBmYWxzZTtcblx0ICAgIHZhciBjaGFuZ2VkU3RvcmVzID0gW107XG5cdFxuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgLy8gS2VlcCB0cmFjayBvZiB0aGUgc3RvcmVzIHRoYXQgY2hhbmdlZCBmb3IgZGVidWdnaW5nIHB1cnBvc2VzIG9ubHlcblx0ICAgICAgdGhpcy5fdG9rZW5zID0gc3RvcmVzLm1hcChmdW5jdGlvbiAoc3RvcmUpIHtcblx0ICAgICAgICByZXR1cm4gc3RvcmUuYWRkTGlzdGVuZXIoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgY2hhbmdlZCA9IHRydWU7XG5cdCAgICAgICAgICBjaGFuZ2VkU3RvcmVzLnB1c2goc3RvcmUpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9KTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIHNldENoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZTtcblx0ICAgICAgICB9O1xuXHQgICAgICAgIF90aGlzLl90b2tlbnMgPSBzdG9yZXMubWFwKGZ1bmN0aW9uIChzdG9yZSkge1xuXHQgICAgICAgICAgcmV0dXJuIHN0b3JlLmFkZExpc3RlbmVyKHNldENoYW5nZWQpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9KSgpO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBjYWxsQ2FsbGJhY2tzID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICBpZiAoY2hhbmdlZCkge1xuXHQgICAgICAgIF90aGlzLl9jYWxsYmFja3MuZm9yRWFjaChmdW5jdGlvbiAoZm4pIHtcblx0ICAgICAgICAgIHJldHVybiBmbigpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIGNoYW5nZWQgPSBmYWxzZTtcblx0ICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgICAgLy8gVW5jb21tZW50IHRoaXMgdG8gcHJpbnQgdGhlIHN0b3JlcyB0aGF0IGNoYW5nZWQuXG5cdCAgICAgICAgICAvLyBjb25zb2xlLmxvZyhjaGFuZ2VkU3RvcmVzKTtcblx0ICAgICAgICAgIGNoYW5nZWRTdG9yZXMgPSBbXTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgICB0aGlzLl9zdG9yZUdyb3VwID0gbmV3IEZsdXhTdG9yZUdyb3VwKHN0b3JlcywgY2FsbENhbGxiYWNrcyk7XG5cdCAgfTtcblx0XG5cdCAgRmx1eENvbnRhaW5lclN1YnNjcmlwdGlvbnMucHJvdG90eXBlLmFkZExpc3RlbmVyID0gZnVuY3Rpb24gYWRkTGlzdGVuZXIoZm4pIHtcblx0ICAgIHRoaXMuX2NhbGxiYWNrcy5wdXNoKGZuKTtcblx0ICB9O1xuXHRcblx0ICBGbHV4Q29udGFpbmVyU3Vic2NyaXB0aW9ucy5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiByZXNldCgpIHtcblx0ICAgIHRoaXMuX3Jlc2V0VG9rZW5zKCk7XG5cdCAgICB0aGlzLl9yZXNldFN0b3JlR3JvdXAoKTtcblx0ICAgIHRoaXMuX3Jlc2V0Q2FsbGJhY2tzKCk7XG5cdCAgICB0aGlzLl9yZXNldFN0b3JlcygpO1xuXHQgIH07XG5cdFxuXHQgIEZsdXhDb250YWluZXJTdWJzY3JpcHRpb25zLnByb3RvdHlwZS5fcmVzZXRUb2tlbnMgPSBmdW5jdGlvbiBfcmVzZXRUb2tlbnMoKSB7XG5cdCAgICBpZiAodGhpcy5fdG9rZW5zKSB7XG5cdCAgICAgIHRoaXMuX3Rva2Vucy5mb3JFYWNoKGZ1bmN0aW9uICh0b2tlbikge1xuXHQgICAgICAgIHJldHVybiB0b2tlbi5yZW1vdmUoKTtcblx0ICAgICAgfSk7XG5cdCAgICAgIHRoaXMuX3Rva2VucyA9IG51bGw7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgRmx1eENvbnRhaW5lclN1YnNjcmlwdGlvbnMucHJvdG90eXBlLl9yZXNldFN0b3JlR3JvdXAgPSBmdW5jdGlvbiBfcmVzZXRTdG9yZUdyb3VwKCkge1xuXHQgICAgaWYgKHRoaXMuX3N0b3JlR3JvdXApIHtcblx0ICAgICAgdGhpcy5fc3RvcmVHcm91cC5yZWxlYXNlKCk7XG5cdCAgICAgIHRoaXMuX3N0b3JlR3JvdXAgPSBudWxsO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIEZsdXhDb250YWluZXJTdWJzY3JpcHRpb25zLnByb3RvdHlwZS5fcmVzZXRTdG9yZXMgPSBmdW5jdGlvbiBfcmVzZXRTdG9yZXMoKSB7XG5cdCAgICB0aGlzLl9zdG9yZXMgPSBudWxsO1xuXHQgIH07XG5cdFxuXHQgIEZsdXhDb250YWluZXJTdWJzY3JpcHRpb25zLnByb3RvdHlwZS5fcmVzZXRDYWxsYmFja3MgPSBmdW5jdGlvbiBfcmVzZXRDYWxsYmFja3MoKSB7XG5cdCAgICB0aGlzLl9jYWxsYmFja3MgPSBbXTtcblx0ICB9O1xuXHRcblx0ICByZXR1cm4gRmx1eENvbnRhaW5lclN1YnNjcmlwdGlvbnM7XG5cdH0pKCk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IEZsdXhDb250YWluZXJTdWJzY3JpcHRpb25zO1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg0KSkpXG5cbi8qKiovIH0pLFxuLyogMjE2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MpIHsvKipcblx0ICogQ29weXJpZ2h0IChjKSAyMDE0LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBGbHV4U3RvcmVHcm91cFxuXHQgKiBcblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbicpOyB9IH1cblx0XG5cdHZhciBpbnZhcmlhbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5MSk7XG5cdFxuXHQvKipcblx0ICogRmx1eFN0b3JlR3JvdXAgYWxsb3dzIHlvdSB0byBleGVjdXRlIGEgY2FsbGJhY2sgb24gZXZlcnkgZGlzcGF0Y2ggYWZ0ZXJcblx0ICogd2FpdGluZyBmb3IgZWFjaCBvZiB0aGUgZ2l2ZW4gc3RvcmVzLlxuXHQgKi9cblx0XG5cdHZhciBGbHV4U3RvcmVHcm91cCA9IChmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gRmx1eFN0b3JlR3JvdXAoc3RvcmVzLCBjYWxsYmFjaykge1xuXHQgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRmx1eFN0b3JlR3JvdXApO1xuXHRcblx0ICAgIHRoaXMuX2Rpc3BhdGNoZXIgPSBfZ2V0VW5pZm9ybURpc3BhdGNoZXIoc3RvcmVzKTtcblx0XG5cdCAgICAvLyBQcmVjb21wdXRlIHN0b3JlIHRva2Vucy5cblx0ICAgIHZhciBzdG9yZVRva2VucyA9IHN0b3Jlcy5tYXAoZnVuY3Rpb24gKHN0b3JlKSB7XG5cdCAgICAgIHJldHVybiBzdG9yZS5nZXREaXNwYXRjaFRva2VuKCk7XG5cdCAgICB9KTtcblx0XG5cdCAgICAvLyBSZWdpc3RlciB3aXRoIHRoZSBkaXNwYXRjaGVyLlxuXHQgICAgdGhpcy5fZGlzcGF0Y2hUb2tlbiA9IHRoaXMuX2Rpc3BhdGNoZXIucmVnaXN0ZXIoZnVuY3Rpb24gKHBheWxvYWQpIHtcblx0ICAgICAgX3RoaXMuX2Rpc3BhdGNoZXIud2FpdEZvcihzdG9yZVRva2Vucyk7XG5cdCAgICAgIGNhbGxiYWNrKCk7XG5cdCAgICB9KTtcblx0ICB9XG5cdFxuXHQgIEZsdXhTdG9yZUdyb3VwLnByb3RvdHlwZS5yZWxlYXNlID0gZnVuY3Rpb24gcmVsZWFzZSgpIHtcblx0ICAgIHRoaXMuX2Rpc3BhdGNoZXIudW5yZWdpc3Rlcih0aGlzLl9kaXNwYXRjaFRva2VuKTtcblx0ICB9O1xuXHRcblx0ICByZXR1cm4gRmx1eFN0b3JlR3JvdXA7XG5cdH0pKCk7XG5cdFxuXHRmdW5jdGlvbiBfZ2V0VW5pZm9ybURpc3BhdGNoZXIoc3RvcmVzKSB7XG5cdCAgIShzdG9yZXMgJiYgc3RvcmVzLmxlbmd0aCkgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnTXVzdCBwcm92aWRlIGF0IGxlYXN0IG9uZSBzdG9yZSB0byBGbHV4U3RvcmVHcm91cCcpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0ICB2YXIgZGlzcGF0Y2hlciA9IHN0b3Jlc1swXS5nZXREaXNwYXRjaGVyKCk7XG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgIGZvciAodmFyIF9pdGVyYXRvciA9IHN0b3JlcywgX2lzQXJyYXkgPSBBcnJheS5pc0FycmF5KF9pdGVyYXRvciksIF9pID0gMCwgX2l0ZXJhdG9yID0gX2lzQXJyYXkgPyBfaXRlcmF0b3IgOiBfaXRlcmF0b3JbU3ltYm9sLml0ZXJhdG9yXSgpOzspIHtcblx0ICAgICAgdmFyIF9yZWY7XG5cdFxuXHQgICAgICBpZiAoX2lzQXJyYXkpIHtcblx0ICAgICAgICBpZiAoX2kgPj0gX2l0ZXJhdG9yLmxlbmd0aCkgYnJlYWs7XG5cdCAgICAgICAgX3JlZiA9IF9pdGVyYXRvcltfaSsrXTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBfaSA9IF9pdGVyYXRvci5uZXh0KCk7XG5cdCAgICAgICAgaWYgKF9pLmRvbmUpIGJyZWFrO1xuXHQgICAgICAgIF9yZWYgPSBfaS52YWx1ZTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIHN0b3JlID0gX3JlZjtcblx0XG5cdCAgICAgICEoc3RvcmUuZ2V0RGlzcGF0Y2hlcigpID09PSBkaXNwYXRjaGVyKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdBbGwgc3RvcmVzIGluIGEgRmx1eFN0b3JlR3JvdXAgbXVzdCB1c2UgdGhlIHNhbWUgZGlzcGF0Y2hlcicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIGRpc3BhdGNoZXI7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gRmx1eFN0b3JlR3JvdXA7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpKSlcblxuLyoqKi8gfSksXG4vKiAyMTcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogQ29weXJpZ2h0IChjKSAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG5cdCAqXG5cdCAqIEB0eXBlY2hlY2tzXG5cdCAqIFxuXHQgKi9cblx0XG5cdC8qZXNsaW50LWRpc2FibGUgbm8tc2VsZi1jb21wYXJlICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXHRcblx0LyoqXG5cdCAqIGlubGluZWQgT2JqZWN0LmlzIHBvbHlmaWxsIHRvIGF2b2lkIHJlcXVpcmluZyBjb25zdW1lcnMgc2hpcCB0aGVpciBvd25cblx0ICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2lzXG5cdCAqL1xuXHRmdW5jdGlvbiBpcyh4LCB5KSB7XG5cdCAgLy8gU2FtZVZhbHVlIGFsZ29yaXRobVxuXHQgIGlmICh4ID09PSB5KSB7XG5cdCAgICAvLyBTdGVwcyAxLTUsIDctMTBcblx0ICAgIC8vIFN0ZXBzIDYuYi02LmU6ICswICE9IC0wXG5cdCAgICAvLyBBZGRlZCB0aGUgbm9uemVybyB5IGNoZWNrIHRvIG1ha2UgRmxvdyBoYXBweSwgYnV0IGl0IGlzIHJlZHVuZGFudFxuXHQgICAgcmV0dXJuIHggIT09IDAgfHwgeSAhPT0gMCB8fCAxIC8geCA9PT0gMSAvIHk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIC8vIFN0ZXAgNi5hOiBOYU4gPT0gTmFOXG5cdCAgICByZXR1cm4geCAhPT0geCAmJiB5ICE9PSB5O1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFBlcmZvcm1zIGVxdWFsaXR5IGJ5IGl0ZXJhdGluZyB0aHJvdWdoIGtleXMgb24gYW4gb2JqZWN0IGFuZCByZXR1cm5pbmcgZmFsc2Vcblx0ICogd2hlbiBhbnkga2V5IGhhcyB2YWx1ZXMgd2hpY2ggYXJlIG5vdCBzdHJpY3RseSBlcXVhbCBiZXR3ZWVuIHRoZSBhcmd1bWVudHMuXG5cdCAqIFJldHVybnMgdHJ1ZSB3aGVuIHRoZSB2YWx1ZXMgb2YgYWxsIGtleXMgYXJlIHN0cmljdGx5IGVxdWFsLlxuXHQgKi9cblx0ZnVuY3Rpb24gc2hhbGxvd0VxdWFsKG9iakEsIG9iakIpIHtcblx0ICBpZiAoaXMob2JqQSwgb2JqQikpIHtcblx0ICAgIHJldHVybiB0cnVlO1xuXHQgIH1cblx0XG5cdCAgaWYgKHR5cGVvZiBvYmpBICE9PSAnb2JqZWN0JyB8fCBvYmpBID09PSBudWxsIHx8IHR5cGVvZiBvYmpCICE9PSAnb2JqZWN0JyB8fCBvYmpCID09PSBudWxsKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHRcblx0ICB2YXIga2V5c0EgPSBPYmplY3Qua2V5cyhvYmpBKTtcblx0ICB2YXIga2V5c0IgPSBPYmplY3Qua2V5cyhvYmpCKTtcblx0XG5cdCAgaWYgKGtleXNBLmxlbmd0aCAhPT0ga2V5c0IubGVuZ3RoKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHRcblx0ICAvLyBUZXN0IGZvciBBJ3Mga2V5cyBkaWZmZXJlbnQgZnJvbSBCLlxuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5c0EubGVuZ3RoOyBpKyspIHtcblx0ICAgIGlmICghaGFzT3duUHJvcGVydHkuY2FsbChvYmpCLCBrZXlzQVtpXSkgfHwgIWlzKG9iakFba2V5c0FbaV1dLCBvYmpCW2tleXNBW2ldXSkpIHtcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHRydWU7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gc2hhbGxvd0VxdWFsO1xuXG4vKioqLyB9KSxcbi8qIDIxOCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzKSB7LyoqXG5cdCAqIENvcHlyaWdodCAoYykgMjAxNC1wcmVzZW50LCBGYWNlYm9vaywgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgRmx1eE1peGluTGVnYWN5XG5cdCAqIFxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBGbHV4U3RvcmVHcm91cCA9IF9fd2VicGFja19yZXF1aXJlX18oMjE2KTtcblx0XG5cdHZhciBpbnZhcmlhbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5MSk7XG5cdFxuXHQvKipcblx0ICogYEZsdXhDb250YWluZXJgIHNob3VsZCBiZSBwcmVmZXJyZWQgb3ZlciB0aGlzIG1peGluLCBidXQgaXQgcmVxdWlyZXMgdXNpbmdcblx0ICogcmVhY3Qgd2l0aCBjbGFzc2VzLiBTbyB0aGlzIG1peGluIGlzIHByb3ZpZGVkIHdoZXJlIGl0IGlzIG5vdCB5ZXQgcG9zc2libGVcblx0ICogdG8gY29udmVydCBhIGNvbnRhaW5lciB0byBiZSBhIGNsYXNzLlxuXHQgKlxuXHQgKiBUaGlzIG1peGluIHNob3VsZCBiZSB1c2VkIGZvciBSZWFjdCBjb21wb25lbnRzIHRoYXQgaGF2ZSBzdGF0ZSBiYXNlZCBwdXJlbHlcblx0ICogb24gc3RvcmVzLiBgdGhpcy5wcm9wc2Agd2lsbCBub3QgYmUgYXZhaWxhYmxlIGluc2lkZSBvZiBgY2FsY3VsYXRlU3RhdGUoKWAuXG5cdCAqXG5cdCAqIFRoaXMgbWl4aW4gd2lsbCBvbmx5IGBzZXRTdGF0ZWAgbm90IHJlcGxhY2UgaXQsIHNvIHlvdSBzaG91bGQgYWx3YXlzIHJldHVyblxuXHQgKiBldmVyeSBrZXkgaW4geW91ciBzdGF0ZSB1bmxlc3MgeW91IGtub3cgd2hhdCB5b3UgYXJlIGRvaW5nLiBDb25zaWRlciB0aGlzOlxuXHQgKlxuXHQgKiAgIHZhciBGb28gPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG5cdCAqICAgICBtaXhpbnM6IFtcblx0ICogICAgICAgRmx1eE1peGluTGVnYWN5KFtGb29TdG9yZV0pXG5cdCAqICAgICBdLFxuXHQgKlxuXHQgKiAgICAgc3RhdGljczoge1xuXHQgKiAgICAgICBjYWxjdWxhdGVTdGF0ZShwcmV2U3RhdGUpIHtcblx0ICogICAgICAgICBpZiAoIXByZXZTdGF0ZSkge1xuXHQgKiAgICAgICAgICAgcmV0dXJuIHtcblx0ICogICAgICAgICAgICAgZm9vOiBGb29TdG9yZS5nZXRGb28oKSxcblx0ICogICAgICAgICAgIH07XG5cdCAqICAgICAgICAgfVxuXHQgKlxuXHQgKiAgICAgICAgIHJldHVybiB7XG5cdCAqICAgICAgICAgICBiYXI6IEZvb1N0b3JlLmdldEJhcigpLFxuXHQgKiAgICAgICAgIH07XG5cdCAqICAgICAgIH1cblx0ICogICAgIH0sXG5cdCAqICAgfSk7XG5cdCAqXG5cdCAqIE9uIHRoZSBzZWNvbmQgY2FsY3VsYXRlU3RhdGUgd2hlbiBwcmV2U3RhdGUgaXMgbm90IG51bGwsIHRoZSBzdGF0ZSB3aWxsIGJlXG5cdCAqIHVwZGF0ZWQgdG8gY29udGFpbiB0aGUgcHJldmlvdXMgZm9vIEFORCB0aGUgYmFyIHRoYXQgd2FzIGp1c3QgcmV0dXJuZWQuIE9ubHlcblx0ICogcmV0dXJuaW5nIGJhciB3aWxsIG5vdCBkZWxldGUgZm9vLlxuXHQgKlxuXHQgKi9cblx0ZnVuY3Rpb24gRmx1eE1peGluTGVnYWN5KHN0b3Jlcykge1xuXHQgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8geyB3aXRoUHJvcHM6IGZhbHNlIH0gOiBhcmd1bWVudHNbMV07XG5cdFxuXHQgIHN0b3JlcyA9IHN0b3Jlcy5maWx0ZXIoZnVuY3Rpb24gKHN0b3JlKSB7XG5cdCAgICByZXR1cm4gISFzdG9yZTtcblx0ICB9KTtcblx0XG5cdCAgcmV0dXJuIHtcblx0ICAgIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24gKCkge1xuXHQgICAgICBlbmZvcmNlSW50ZXJmYWNlKHRoaXMpO1xuXHQgICAgICByZXR1cm4gb3B0aW9ucy53aXRoUHJvcHMgPyB0aGlzLmNvbnN0cnVjdG9yLmNhbGN1bGF0ZVN0YXRlKG51bGwsIHRoaXMucHJvcHMpIDogdGhpcy5jb25zdHJ1Y3Rvci5jYWxjdWxhdGVTdGF0ZShudWxsLCB1bmRlZmluZWQpO1xuXHQgICAgfSxcblx0XG5cdCAgICBjb21wb25lbnRXaWxsTW91bnQ6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICAgIC8vIFRoaXMgdHJhY2tzIHdoZW4gYW55IHN0b3JlIGhhcyBjaGFuZ2VkIGFuZCB3ZSBtYXkgbmVlZCB0byB1cGRhdGUuXG5cdCAgICAgIHZhciBjaGFuZ2VkID0gZmFsc2U7XG5cdCAgICAgIHZhciBzZXRDaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGNoYW5nZWQgPSB0cnVlO1xuXHQgICAgICB9O1xuXHRcblx0ICAgICAgLy8gVGhpcyBhZGRzIHN1YnNjcmlwdGlvbnMgdG8gc3RvcmVzLiBXaGVuIGEgc3RvcmUgY2hhbmdlcyBhbGwgd2UgZG8gaXNcblx0ICAgICAgLy8gc2V0IGNoYW5nZWQgdG8gdHJ1ZS5cblx0ICAgICAgdGhpcy5fZmx1eE1peGluU3Vic2NyaXB0aW9ucyA9IHN0b3Jlcy5tYXAoZnVuY3Rpb24gKHN0b3JlKSB7XG5cdCAgICAgICAgcmV0dXJuIHN0b3JlLmFkZExpc3RlbmVyKHNldENoYW5nZWQpO1xuXHQgICAgICB9KTtcblx0XG5cdCAgICAgIC8vIFRoaXMgY2FsbGJhY2sgaXMgY2FsbGVkIGFmdGVyIHRoZSBkaXNwYXRjaCBvZiB0aGUgcmVsZXZhbnQgc3RvcmVzLiBJZlxuXHQgICAgICAvLyBhbnkgaGF2ZSByZXBvcnRlZCBhIGNoYW5nZSB3ZSB1cGRhdGUgdGhlIHN0YXRlLCB0aGVuIHJlc2V0IGNoYW5nZWQuXG5cdCAgICAgIHZhciBjYWxsYmFjayA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAoY2hhbmdlZCkge1xuXHQgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoZnVuY3Rpb24gKHByZXZTdGF0ZSkge1xuXHQgICAgICAgICAgICByZXR1cm4gb3B0aW9ucy53aXRoUHJvcHMgPyBfdGhpcy5jb25zdHJ1Y3Rvci5jYWxjdWxhdGVTdGF0ZShwcmV2U3RhdGUsIF90aGlzLnByb3BzKSA6IF90aGlzLmNvbnN0cnVjdG9yLmNhbGN1bGF0ZVN0YXRlKHByZXZTdGF0ZSwgdW5kZWZpbmVkKTtcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjaGFuZ2VkID0gZmFsc2U7XG5cdCAgICAgIH07XG5cdCAgICAgIHRoaXMuX2ZsdXhNaXhpblN0b3JlR3JvdXAgPSBuZXcgRmx1eFN0b3JlR3JvdXAoc3RvcmVzLCBjYWxsYmFjayk7XG5cdCAgICB9LFxuXHRcblx0ICAgIGNvbXBvbmVudFdpbGxVbm1vdW50OiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHRoaXMuX2ZsdXhNaXhpblN0b3JlR3JvdXAucmVsZWFzZSgpO1xuXHQgICAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSB0aGlzLl9mbHV4TWl4aW5TdWJzY3JpcHRpb25zLCBfaXNBcnJheSA9IEFycmF5LmlzQXJyYXkoX2l0ZXJhdG9yKSwgX2kgPSAwLCBfaXRlcmF0b3IgPSBfaXNBcnJheSA/IF9pdGVyYXRvciA6IF9pdGVyYXRvcltTeW1ib2wuaXRlcmF0b3JdKCk7Oykge1xuXHQgICAgICAgIHZhciBfcmVmO1xuXHRcblx0ICAgICAgICBpZiAoX2lzQXJyYXkpIHtcblx0ICAgICAgICAgIGlmIChfaSA+PSBfaXRlcmF0b3IubGVuZ3RoKSBicmVhaztcblx0ICAgICAgICAgIF9yZWYgPSBfaXRlcmF0b3JbX2krK107XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIF9pID0gX2l0ZXJhdG9yLm5leHQoKTtcblx0ICAgICAgICAgIGlmIChfaS5kb25lKSBicmVhaztcblx0ICAgICAgICAgIF9yZWYgPSBfaS52YWx1ZTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBfcmVmO1xuXHRcblx0ICAgICAgICBzdWJzY3JpcHRpb24ucmVtb3ZlKCk7XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5fZmx1eE1peGluU3Vic2NyaXB0aW9ucyA9IFtdO1xuXHQgICAgfVxuXHQgIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGVuZm9yY2VJbnRlcmZhY2Uobykge1xuXHQgICFvLmNvbnN0cnVjdG9yLmNhbGN1bGF0ZVN0YXRlID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0NvbXBvbmVudHMgdGhhdCB1c2UgRmx1eE1peGluTGVnYWN5IG11c3QgaW1wbGVtZW50ICcgKyAnYGNhbGN1bGF0ZVN0YXRlKClgIG9uIHRoZSBzdGF0aWNzIG9iamVjdCcpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBGbHV4TWl4aW5MZWdhY3k7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpKSlcblxuLyoqKi8gfSksXG4vKiAyMTkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgey8qKlxuXHQgKiBDb3B5cmlnaHQgKGMpIDIwMTQtcHJlc2VudCwgRmFjZWJvb2ssIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIEZsdXhSZWR1Y2VTdG9yZVxuXHQgKiBcblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbicpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICdmdW5jdGlvbicgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICcgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHR2YXIgRmx1eFN0b3JlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMjApO1xuXHRcblx0dmFyIGFic3RyYWN0TWV0aG9kID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMjgpO1xuXHR2YXIgaW52YXJpYW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOTEpO1xuXHRcblx0LyoqXG5cdCAqIFRoaXMgaXMgdGhlIGJhc2ljIGJ1aWxkaW5nIGJsb2NrIG9mIGEgRmx1eCBhcHBsaWNhdGlvbi4gQWxsIG9mIHlvdXIgc3RvcmVzXG5cdCAqIHNob3VsZCBleHRlbmQgdGhpcyBjbGFzcy5cblx0ICpcblx0ICogICBjbGFzcyBDb3VudGVyU3RvcmUgZXh0ZW5kcyBGbHV4UmVkdWNlU3RvcmU8bnVtYmVyPiB7XG5cdCAqICAgICBnZXRJbml0aWFsU3RhdGUoKTogbnVtYmVyIHtcblx0ICogICAgICAgcmV0dXJuIDE7XG5cdCAqICAgICB9XG5cdCAqXG5cdCAqICAgICByZWR1Y2Uoc3RhdGU6IG51bWJlciwgYWN0aW9uOiBPYmplY3QpOiBudW1iZXIge1xuXHQgKiAgICAgICBzd2l0Y2goYWN0aW9uLnR5cGUpIHtcblx0ICogICAgICAgICBjYXNlOiAnYWRkJzpcblx0ICogICAgICAgICAgIHJldHVybiBzdGF0ZSArIGFjdGlvbi52YWx1ZTtcblx0ICogICAgICAgICBjYXNlOiAnZG91YmxlJzpcblx0ICogICAgICAgICAgIHJldHVybiBzdGF0ZSAqIDI7XG5cdCAqICAgICAgICAgZGVmYXVsdDpcblx0ICogICAgICAgICAgIHJldHVybiBzdGF0ZTtcblx0ICogICAgICAgfVxuXHQgKiAgICAgfVxuXHQgKiAgIH1cblx0ICovXG5cdFxuXHR2YXIgRmx1eFJlZHVjZVN0b3JlID0gKGZ1bmN0aW9uIChfRmx1eFN0b3JlKSB7XG5cdCAgX2luaGVyaXRzKEZsdXhSZWR1Y2VTdG9yZSwgX0ZsdXhTdG9yZSk7XG5cdFxuXHQgIGZ1bmN0aW9uIEZsdXhSZWR1Y2VTdG9yZShkaXNwYXRjaGVyKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRmx1eFJlZHVjZVN0b3JlKTtcblx0XG5cdCAgICBfRmx1eFN0b3JlLmNhbGwodGhpcywgZGlzcGF0Y2hlcik7XG5cdCAgICB0aGlzLl9zdGF0ZSA9IHRoaXMuZ2V0SW5pdGlhbFN0YXRlKCk7XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBHZXR0ZXIgdGhhdCBleHBvc2VzIHRoZSBlbnRpcmUgc3RhdGUgb2YgdGhpcyBzdG9yZS4gSWYgeW91ciBzdGF0ZSBpcyBub3Rcblx0ICAgKiBpbW11dGFibGUgeW91IHNob3VsZCBvdmVycmlkZSB0aGlzIGFuZCBub3QgZXhwb3NlIF9zdGF0ZSBkaXJlY3RseS5cblx0ICAgKi9cblx0XG5cdCAgRmx1eFJlZHVjZVN0b3JlLnByb3RvdHlwZS5nZXRTdGF0ZSA9IGZ1bmN0aW9uIGdldFN0YXRlKCkge1xuXHQgICAgcmV0dXJuIHRoaXMuX3N0YXRlO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIENvbnN0cnVjdHMgdGhlIGluaXRpYWwgc3RhdGUgZm9yIHRoaXMgc3RvcmUuIFRoaXMgaXMgY2FsbGVkIG9uY2UgZHVyaW5nXG5cdCAgICogY29uc3RydWN0aW9uIG9mIHRoZSBzdG9yZS5cblx0ICAgKi9cblx0XG5cdCAgRmx1eFJlZHVjZVN0b3JlLnByb3RvdHlwZS5nZXRJbml0aWFsU3RhdGUgPSBmdW5jdGlvbiBnZXRJbml0aWFsU3RhdGUoKSB7XG5cdCAgICByZXR1cm4gYWJzdHJhY3RNZXRob2QoJ0ZsdXhSZWR1Y2VTdG9yZScsICdnZXRJbml0aWFsU3RhdGUnKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBVc2VkIHRvIHJlZHVjZSBhIHN0cmVhbSBvZiBhY3Rpb25zIGNvbWluZyBmcm9tIHRoZSBkaXNwYXRjaGVyIGludG8gYVxuXHQgICAqIHNpbmdsZSBzdGF0ZSBvYmplY3QuXG5cdCAgICovXG5cdFxuXHQgIEZsdXhSZWR1Y2VTdG9yZS5wcm90b3R5cGUucmVkdWNlID0gZnVuY3Rpb24gcmVkdWNlKHN0YXRlLCBhY3Rpb24pIHtcblx0ICAgIHJldHVybiBhYnN0cmFjdE1ldGhvZCgnRmx1eFJlZHVjZVN0b3JlJywgJ3JlZHVjZScpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIENoZWNrcyBpZiB0d28gdmVyc2lvbnMgb2Ygc3RhdGUgYXJlIHRoZSBzYW1lLiBZb3UgZG8gbm90IG5lZWQgdG8gb3ZlcnJpZGVcblx0ICAgKiB0aGlzIGlmIHlvdXIgc3RhdGUgaXMgaW1tdXRhYmxlLlxuXHQgICAqL1xuXHRcblx0ICBGbHV4UmVkdWNlU3RvcmUucHJvdG90eXBlLmFyZUVxdWFsID0gZnVuY3Rpb24gYXJlRXF1YWwob25lLCB0d28pIHtcblx0ICAgIHJldHVybiBvbmUgPT09IHR3bztcblx0ICB9O1xuXHRcblx0ICBGbHV4UmVkdWNlU3RvcmUucHJvdG90eXBlLl9faW52b2tlT25EaXNwYXRjaCA9IGZ1bmN0aW9uIF9faW52b2tlT25EaXNwYXRjaChhY3Rpb24pIHtcblx0ICAgIHRoaXMuX19jaGFuZ2VkID0gZmFsc2U7XG5cdFxuXHQgICAgLy8gUmVkdWNlIHRoZSBzdHJlYW0gb2YgaW5jb21pbmcgYWN0aW9ucyB0byBzdGF0ZSwgdXBkYXRlIHdoZW4gbmVjZXNzYXJ5LlxuXHQgICAgdmFyIHN0YXJ0aW5nU3RhdGUgPSB0aGlzLl9zdGF0ZTtcblx0ICAgIHZhciBlbmRpbmdTdGF0ZSA9IHRoaXMucmVkdWNlKHN0YXJ0aW5nU3RhdGUsIGFjdGlvbik7XG5cdFxuXHQgICAgLy8gVGhpcyBtZWFucyB5b3VyIGVuZGluZyBzdGF0ZSBzaG91bGQgbmV2ZXIgYmUgdW5kZWZpbmVkLlxuXHQgICAgIShlbmRpbmdTdGF0ZSAhPT0gdW5kZWZpbmVkKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICclcyByZXR1cm5lZCB1bmRlZmluZWQgZnJvbSByZWR1Y2UoLi4uKSwgZGlkIHlvdSBmb3JnZXQgdG8gcmV0dXJuICcgKyAnc3RhdGUgaW4gdGhlIGRlZmF1bHQgY2FzZT8gKHVzZSBudWxsIGlmIHRoaXMgd2FzIGludGVudGlvbmFsKScsIHRoaXMuY29uc3RydWN0b3IubmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXHRcblx0ICAgIGlmICghdGhpcy5hcmVFcXVhbChzdGFydGluZ1N0YXRlLCBlbmRpbmdTdGF0ZSkpIHtcblx0ICAgICAgdGhpcy5fc3RhdGUgPSBlbmRpbmdTdGF0ZTtcblx0XG5cdCAgICAgIC8vIGBfX2VtaXRDaGFuZ2UoKWAgc2V0cyBgdGhpcy5fX2NoYW5nZWRgIHRvIHRydWUgYW5kIHRoZW4gdGhlIGFjdHVhbFxuXHQgICAgICAvLyBjaGFuZ2Ugd2lsbCBiZSBmaXJlZCBmcm9tIHRoZSBlbWl0dGVyIGF0IHRoZSBlbmQgb2YgdGhlIGRpc3BhdGNoLCB0aGlzXG5cdCAgICAgIC8vIGlzIHJlcXVpcmVkIGluIG9yZGVyIHRvIHN1cHBvcnQgbWV0aG9kcyBsaWtlIGBoYXNDaGFuZ2VkKClgXG5cdCAgICAgIHRoaXMuX19lbWl0Q2hhbmdlKCk7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHRoaXMuX19jaGFuZ2VkKSB7XG5cdCAgICAgIHRoaXMuX19lbWl0dGVyLmVtaXQodGhpcy5fX2NoYW5nZUV2ZW50KTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICByZXR1cm4gRmx1eFJlZHVjZVN0b3JlO1xuXHR9KShGbHV4U3RvcmUpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBGbHV4UmVkdWNlU3RvcmU7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpKSlcblxuLyoqKi8gfSksXG4vKiAyMjAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgey8qKlxuXHQgKiBDb3B5cmlnaHQgKGMpIDIwMTQtcHJlc2VudCwgRmFjZWJvb2ssIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIEZsdXhTdG9yZVxuXHQgKiBcblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbicpOyB9IH1cblx0XG5cdHZhciBfcmVxdWlyZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjIxKTtcblx0XG5cdHZhciBFdmVudEVtaXR0ZXIgPSBfcmVxdWlyZS5FdmVudEVtaXR0ZXI7XG5cdFxuXHR2YXIgaW52YXJpYW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOTEpO1xuXHRcblx0LyoqXG5cdCAqIFRoaXMgY2xhc3MgcmVwcmVzZW50cyB0aGUgbW9zdCBiYXNpYyBmdW5jdGlvbmFsaXR5IGZvciBhIEZsdXhTdG9yZS4gRG8gbm90XG5cdCAqIGV4dGVuZCB0aGlzIHN0b3JlIGRpcmVjdGx5OyBpbnN0ZWFkIGV4dGVuZCBGbHV4UmVkdWNlU3RvcmUgd2hlbiBjcmVhdGluZyBhXG5cdCAqIG5ldyBzdG9yZS5cblx0ICovXG5cdFxuXHR2YXIgRmx1eFN0b3JlID0gKGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBGbHV4U3RvcmUoZGlzcGF0Y2hlcikge1xuXHQgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRmx1eFN0b3JlKTtcblx0XG5cdCAgICB0aGlzLl9fY2xhc3NOYW1lID0gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lO1xuXHRcblx0ICAgIHRoaXMuX19jaGFuZ2VkID0gZmFsc2U7XG5cdCAgICB0aGlzLl9fY2hhbmdlRXZlbnQgPSAnY2hhbmdlJztcblx0ICAgIHRoaXMuX19kaXNwYXRjaGVyID0gZGlzcGF0Y2hlcjtcblx0ICAgIHRoaXMuX19lbWl0dGVyID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXHQgICAgdGhpcy5fZGlzcGF0Y2hUb2tlbiA9IGRpc3BhdGNoZXIucmVnaXN0ZXIoZnVuY3Rpb24gKHBheWxvYWQpIHtcblx0ICAgICAgX3RoaXMuX19pbnZva2VPbkRpc3BhdGNoKHBheWxvYWQpO1xuXHQgICAgfSk7XG5cdCAgfVxuXHRcblx0ICBGbHV4U3RvcmUucHJvdG90eXBlLmFkZExpc3RlbmVyID0gZnVuY3Rpb24gYWRkTGlzdGVuZXIoY2FsbGJhY2spIHtcblx0ICAgIHJldHVybiB0aGlzLl9fZW1pdHRlci5hZGRMaXN0ZW5lcih0aGlzLl9fY2hhbmdlRXZlbnQsIGNhbGxiYWNrKTtcblx0ICB9O1xuXHRcblx0ICBGbHV4U3RvcmUucHJvdG90eXBlLmdldERpc3BhdGNoZXIgPSBmdW5jdGlvbiBnZXREaXNwYXRjaGVyKCkge1xuXHQgICAgcmV0dXJuIHRoaXMuX19kaXNwYXRjaGVyO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFRoaXMgZXhwb3NlcyBhIHVuaXF1ZSBzdHJpbmcgdG8gaWRlbnRpZnkgZWFjaCBzdG9yZSdzIHJlZ2lzdGVyZWQgY2FsbGJhY2suXG5cdCAgICogVGhpcyBpcyB1c2VkIHdpdGggdGhlIGRpc3BhdGNoZXIncyB3YWl0Rm9yIG1ldGhvZCB0byBkZWNsYXJhdGl2ZWx5IGRlcGVuZFxuXHQgICAqIG9uIG90aGVyIHN0b3JlcyB1cGRhdGluZyB0aGVtc2VsdmVzIGZpcnN0LlxuXHQgICAqL1xuXHRcblx0ICBGbHV4U3RvcmUucHJvdG90eXBlLmdldERpc3BhdGNoVG9rZW4gPSBmdW5jdGlvbiBnZXREaXNwYXRjaFRva2VuKCkge1xuXHQgICAgcmV0dXJuIHRoaXMuX2Rpc3BhdGNoVG9rZW47XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBzdG9yZSBoYXMgY2hhbmdlZCBkdXJpbmcgdGhlIG1vc3QgcmVjZW50IGRpc3BhdGNoLlxuXHQgICAqL1xuXHRcblx0ICBGbHV4U3RvcmUucHJvdG90eXBlLmhhc0NoYW5nZWQgPSBmdW5jdGlvbiBoYXNDaGFuZ2VkKCkge1xuXHQgICAgIXRoaXMuX19kaXNwYXRjaGVyLmlzRGlzcGF0Y2hpbmcoKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICclcy5oYXNDaGFuZ2VkKCk6IE11c3QgYmUgaW52b2tlZCB3aGlsZSBkaXNwYXRjaGluZy4nLCB0aGlzLl9fY2xhc3NOYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdCAgICByZXR1cm4gdGhpcy5fX2NoYW5nZWQ7XG5cdCAgfTtcblx0XG5cdCAgRmx1eFN0b3JlLnByb3RvdHlwZS5fX2VtaXRDaGFuZ2UgPSBmdW5jdGlvbiBfX2VtaXRDaGFuZ2UoKSB7XG5cdCAgICAhdGhpcy5fX2Rpc3BhdGNoZXIuaXNEaXNwYXRjaGluZygpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJyVzLl9fZW1pdENoYW5nZSgpOiBNdXN0IGJlIGludm9rZWQgd2hpbGUgZGlzcGF0Y2hpbmcuJywgdGhpcy5fX2NsYXNzTmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXHQgICAgdGhpcy5fX2NoYW5nZWQgPSB0cnVlO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFRoaXMgbWV0aG9kIGVuY2Fwc3VsYXRlcyBhbGwgbG9naWMgZm9yIGludm9raW5nIF9fb25EaXNwYXRjaC4gSXQgc2hvdWxkXG5cdCAgICogYmUgdXNlZCBmb3IgdGhpbmdzIGxpa2UgY2F0Y2hpbmcgY2hhbmdlcyBhbmQgZW1pdHRpbmcgdGhlbSBhZnRlciB0aGVcblx0ICAgKiBzdWJjbGFzcyBoYXMgaGFuZGxlZCBhIHBheWxvYWQuXG5cdCAgICovXG5cdFxuXHQgIEZsdXhTdG9yZS5wcm90b3R5cGUuX19pbnZva2VPbkRpc3BhdGNoID0gZnVuY3Rpb24gX19pbnZva2VPbkRpc3BhdGNoKHBheWxvYWQpIHtcblx0ICAgIHRoaXMuX19jaGFuZ2VkID0gZmFsc2U7XG5cdCAgICB0aGlzLl9fb25EaXNwYXRjaChwYXlsb2FkKTtcblx0ICAgIGlmICh0aGlzLl9fY2hhbmdlZCkge1xuXHQgICAgICB0aGlzLl9fZW1pdHRlci5lbWl0KHRoaXMuX19jaGFuZ2VFdmVudCk7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogVGhlIGNhbGxiYWNrIHRoYXQgd2lsbCBiZSByZWdpc3RlcmVkIHdpdGggdGhlIGRpc3BhdGNoZXIgZHVyaW5nXG5cdCAgICogaW5zdGFudGlhdGlvbi4gU3ViY2xhc3NlcyBtdXN0IG92ZXJyaWRlIHRoaXMgbWV0aG9kLiBUaGlzIGNhbGxiYWNrIGlzIHRoZVxuXHQgICAqIG9ubHkgd2F5IHRoZSBzdG9yZSByZWNlaXZlcyBuZXcgZGF0YS5cblx0ICAgKi9cblx0XG5cdCAgRmx1eFN0b3JlLnByb3RvdHlwZS5fX29uRGlzcGF0Y2ggPSBmdW5jdGlvbiBfX29uRGlzcGF0Y2gocGF5bG9hZCkge1xuXHQgICAgIHRydWUgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnJXMgaGFzIG5vdCBvdmVycmlkZGVuIEZsdXhTdG9yZS5fX29uRGlzcGF0Y2goKSwgd2hpY2ggaXMgcmVxdWlyZWQnLCB0aGlzLl9fY2xhc3NOYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdCAgfTtcblx0XG5cdCAgcmV0dXJuIEZsdXhTdG9yZTtcblx0fSkoKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gRmx1eFN0b3JlO1xuXHRcblx0Ly8gcHJpdmF0ZVxuXHRcblx0Ly8gcHJvdGVjdGVkLCBhdmFpbGFibGUgdG8gc3ViY2xhc3Nlc1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg0KSkpXG5cbi8qKiovIH0pLFxuLyogMjIxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAoYykgMjAxNC1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKi9cblx0XG5cdHZhciBmYmVtaXR0ZXIgPSB7XG5cdCAgRXZlbnRFbWl0dGVyOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyMiksXG5cdCAgRW1pdHRlclN1YnNjcmlwdGlvbiA6IF9fd2VicGFja19yZXF1aXJlX18oMjIzKVxuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmYmVtaXR0ZXI7XG5cblxuLyoqKi8gfSksXG4vKiAyMjIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgey8qKlxuXHQgKiBDb3B5cmlnaHQgKGMpIDIwMTQtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIEJhc2VFdmVudEVtaXR0ZXJcblx0ICogQHR5cGVjaGVja3Ncblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbicpOyB9IH1cblx0XG5cdHZhciBFbWl0dGVyU3Vic2NyaXB0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMjMpO1xuXHR2YXIgRXZlbnRTdWJzY3JpcHRpb25WZW5kb3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyNSk7XG5cdFxuXHR2YXIgZW1wdHlGdW5jdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMjI3KTtcblx0dmFyIGludmFyaWFudCA9IF9fd2VicGFja19yZXF1aXJlX18oMjI2KTtcblx0XG5cdC8qKlxuXHQgKiBAY2xhc3MgQmFzZUV2ZW50RW1pdHRlclxuXHQgKiBAZGVzY3JpcHRpb25cblx0ICogQW4gRXZlbnRFbWl0dGVyIGlzIHJlc3BvbnNpYmxlIGZvciBtYW5hZ2luZyBhIHNldCBvZiBsaXN0ZW5lcnMgYW5kIHB1Ymxpc2hpbmdcblx0ICogZXZlbnRzIHRvIHRoZW0gd2hlbiBpdCBpcyB0b2xkIHRoYXQgc3VjaCBldmVudHMgaGFwcGVuZWQuIEluIGFkZGl0aW9uIHRvIHRoZVxuXHQgKiBkYXRhIGZvciB0aGUgZ2l2ZW4gZXZlbnQgaXQgYWxzbyBzZW5kcyBhIGV2ZW50IGNvbnRyb2wgb2JqZWN0IHdoaWNoIGFsbG93c1xuXHQgKiB0aGUgbGlzdGVuZXJzL2hhbmRsZXJzIHRvIHByZXZlbnQgdGhlIGRlZmF1bHQgYmVoYXZpb3Igb2YgdGhlIGdpdmVuIGV2ZW50LlxuXHQgKlxuXHQgKiBUaGUgZW1pdHRlciBpcyBkZXNpZ25lZCB0byBiZSBnZW5lcmljIGVub3VnaCB0byBzdXBwb3J0IGFsbCB0aGUgZGlmZmVyZW50XG5cdCAqIGNvbnRleHRzIGluIHdoaWNoIG9uZSBtaWdodCB3YW50IHRvIGVtaXQgZXZlbnRzLiBJdCBpcyBhIHNpbXBsZSBtdWx0aWNhc3Rcblx0ICogbWVjaGFuaXNtIG9uIHRvcCBvZiB3aGljaCBleHRyYSBmdW5jdGlvbmFsaXR5IGNhbiBiZSBjb21wb3NlZC4gRm9yIGV4YW1wbGUsIGFcblx0ICogbW9yZSBhZHZhbmNlZCBlbWl0dGVyIG1heSB1c2UgYW4gRXZlbnRIb2xkZXIgYW5kIEV2ZW50RmFjdG9yeS5cblx0ICovXG5cdFxuXHR2YXIgQmFzZUV2ZW50RW1pdHRlciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgLyoqXG5cdCAgICogQGNvbnN0cnVjdG9yXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIEJhc2VFdmVudEVtaXR0ZXIoKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQmFzZUV2ZW50RW1pdHRlcik7XG5cdFxuXHQgICAgdGhpcy5fc3Vic2NyaWJlciA9IG5ldyBFdmVudFN1YnNjcmlwdGlvblZlbmRvcigpO1xuXHQgICAgdGhpcy5fY3VycmVudFN1YnNjcmlwdGlvbiA9IG51bGw7XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBBZGRzIGEgbGlzdGVuZXIgdG8gYmUgaW52b2tlZCB3aGVuIGV2ZW50cyBvZiB0aGUgc3BlY2lmaWVkIHR5cGUgYXJlXG5cdCAgICogZW1pdHRlZC4gQW4gb3B0aW9uYWwgY2FsbGluZyBjb250ZXh0IG1heSBiZSBwcm92aWRlZC4gVGhlIGRhdGEgYXJndW1lbnRzXG5cdCAgICogZW1pdHRlZCB3aWxsIGJlIHBhc3NlZCB0byB0aGUgbGlzdGVuZXIgZnVuY3Rpb24uXG5cdCAgICpcblx0ICAgKiBUT0RPOiBBbm5vdGF0ZSB0aGUgbGlzdGVuZXIgYXJnJ3MgdHlwZS4gVGhpcyBpcyB0cmlja3kgYmVjYXVzZSBsaXN0ZW5lcnNcblx0ICAgKiAgICAgICBjYW4gYmUgaW52b2tlZCB3aXRoIHZhcmFyZ3MuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRUeXBlIC0gTmFtZSBvZiB0aGUgZXZlbnQgdG8gbGlzdGVuIHRvXG5cdCAgICogQHBhcmFtIHtmdW5jdGlvbn0gbGlzdGVuZXIgLSBGdW5jdGlvbiB0byBpbnZva2Ugd2hlbiB0aGUgc3BlY2lmaWVkIGV2ZW50IGlzXG5cdCAgICogICBlbWl0dGVkXG5cdCAgICogQHBhcmFtIHsqfSBjb250ZXh0IC0gT3B0aW9uYWwgY29udGV4dCBvYmplY3QgdG8gdXNlIHdoZW4gaW52b2tpbmcgdGhlXG5cdCAgICogICBsaXN0ZW5lclxuXHQgICAqL1xuXHRcblx0ICBCYXNlRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uIGFkZExpc3RlbmVyKGV2ZW50VHlwZSwgbGlzdGVuZXIsIGNvbnRleHQpIHtcblx0ICAgIHJldHVybiB0aGlzLl9zdWJzY3JpYmVyLmFkZFN1YnNjcmlwdGlvbihldmVudFR5cGUsIG5ldyBFbWl0dGVyU3Vic2NyaXB0aW9uKHRoaXMuX3N1YnNjcmliZXIsIGxpc3RlbmVyLCBjb250ZXh0KSk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogU2ltaWxhciB0byBhZGRMaXN0ZW5lciwgZXhjZXB0IHRoYXQgdGhlIGxpc3RlbmVyIGlzIHJlbW92ZWQgYWZ0ZXIgaXQgaXNcblx0ICAgKiBpbnZva2VkIG9uY2UuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRUeXBlIC0gTmFtZSBvZiB0aGUgZXZlbnQgdG8gbGlzdGVuIHRvXG5cdCAgICogQHBhcmFtIHtmdW5jdGlvbn0gbGlzdGVuZXIgLSBGdW5jdGlvbiB0byBpbnZva2Ugb25seSBvbmNlIHdoZW4gdGhlXG5cdCAgICogICBzcGVjaWZpZWQgZXZlbnQgaXMgZW1pdHRlZFxuXHQgICAqIEBwYXJhbSB7Kn0gY29udGV4dCAtIE9wdGlvbmFsIGNvbnRleHQgb2JqZWN0IHRvIHVzZSB3aGVuIGludm9raW5nIHRoZVxuXHQgICAqICAgbGlzdGVuZXJcblx0ICAgKi9cblx0XG5cdCAgQmFzZUV2ZW50RW1pdHRlci5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uIG9uY2UoZXZlbnRUeXBlLCBsaXN0ZW5lciwgY29udGV4dCkge1xuXHQgICAgdmFyIGVtaXR0ZXIgPSB0aGlzO1xuXHQgICAgcmV0dXJuIHRoaXMuYWRkTGlzdGVuZXIoZXZlbnRUeXBlLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGVtaXR0ZXIucmVtb3ZlQ3VycmVudExpc3RlbmVyKCk7XG5cdCAgICAgIGxpc3RlbmVyLmFwcGx5KGNvbnRleHQsIGFyZ3VtZW50cyk7XG5cdCAgICB9KTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBSZW1vdmVzIGFsbCBvZiB0aGUgcmVnaXN0ZXJlZCBsaXN0ZW5lcnMsIGluY2x1ZGluZyB0aG9zZSByZWdpc3RlcmVkIGFzXG5cdCAgICogbGlzdGVuZXIgbWFwcy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7P3N0cmluZ30gZXZlbnRUeXBlIC0gT3B0aW9uYWwgbmFtZSBvZiB0aGUgZXZlbnQgd2hvc2UgcmVnaXN0ZXJlZFxuXHQgICAqICAgbGlzdGVuZXJzIHRvIHJlbW92ZVxuXHQgICAqL1xuXHRcblx0ICBCYXNlRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBmdW5jdGlvbiByZW1vdmVBbGxMaXN0ZW5lcnMoZXZlbnRUeXBlKSB7XG5cdCAgICB0aGlzLl9zdWJzY3JpYmVyLnJlbW92ZUFsbFN1YnNjcmlwdGlvbnMoZXZlbnRUeXBlKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBQcm92aWRlcyBhbiBBUEkgdGhhdCBjYW4gYmUgY2FsbGVkIGR1cmluZyBhbiBldmVudGluZyBjeWNsZSB0byByZW1vdmUgdGhlXG5cdCAgICogbGFzdCBsaXN0ZW5lciB0aGF0IHdhcyBpbnZva2VkLiBUaGlzIGFsbG93cyBhIGRldmVsb3BlciB0byBwcm92aWRlIGFuIGV2ZW50XG5cdCAgICogb2JqZWN0IHRoYXQgY2FuIHJlbW92ZSB0aGUgbGlzdGVuZXIgKG9yIGxpc3RlbmVyIG1hcCkgZHVyaW5nIHRoZVxuXHQgICAqIGludm9jYXRpb24uXG5cdCAgICpcblx0ICAgKiBJZiBpdCBpcyBjYWxsZWQgd2hlbiBub3QgaW5zaWRlIG9mIGFuIGVtaXR0aW5nIGN5Y2xlIGl0IHdpbGwgdGhyb3cuXG5cdCAgICpcblx0ICAgKiBAdGhyb3dzIHtFcnJvcn0gV2hlbiBjYWxsZWQgbm90IGR1cmluZyBhbiBldmVudGluZyBjeWNsZVxuXHQgICAqXG5cdCAgICogQGV4YW1wbGVcblx0ICAgKiAgIHZhciBzdWJzY3JpcHRpb24gPSBlbWl0dGVyLmFkZExpc3RlbmVyTWFwKHtcblx0ICAgKiAgICAgc29tZUV2ZW50OiBmdW5jdGlvbihkYXRhLCBldmVudCkge1xuXHQgICAqICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuXHQgICAqICAgICAgIGVtaXR0ZXIucmVtb3ZlQ3VycmVudExpc3RlbmVyKCk7XG5cdCAgICogICAgIH1cblx0ICAgKiAgIH0pO1xuXHQgICAqXG5cdCAgICogICBlbWl0dGVyLmVtaXQoJ3NvbWVFdmVudCcsICdhYmMnKTsgLy8gbG9ncyAnYWJjJ1xuXHQgICAqICAgZW1pdHRlci5lbWl0KCdzb21lRXZlbnQnLCAnZGVmJyk7IC8vIGRvZXMgbm90IGxvZyBhbnl0aGluZ1xuXHQgICAqL1xuXHRcblx0ICBCYXNlRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVDdXJyZW50TGlzdGVuZXIgPSBmdW5jdGlvbiByZW1vdmVDdXJyZW50TGlzdGVuZXIoKSB7XG5cdCAgICAhISF0aGlzLl9jdXJyZW50U3Vic2NyaXB0aW9uID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ05vdCBpbiBhbiBlbWl0dGluZyBjeWNsZTsgdGhlcmUgaXMgbm8gY3VycmVudCBzdWJzY3JpcHRpb24nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdCAgICB0aGlzLl9zdWJzY3JpYmVyLnJlbW92ZVN1YnNjcmlwdGlvbih0aGlzLl9jdXJyZW50U3Vic2NyaXB0aW9uKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIGxpc3RlbmVycyB0aGF0IGFyZSBjdXJyZW50bHkgcmVnaXN0ZXJlZCBmb3IgdGhlIGdpdmVuXG5cdCAgICogZXZlbnQuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRUeXBlIC0gTmFtZSBvZiB0aGUgZXZlbnQgdG8gcXVlcnlcblx0ICAgKiBAcmV0dXJuIHthcnJheX1cblx0ICAgKi9cblx0XG5cdCAgQmFzZUV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJzID0gZnVuY3Rpb24gbGlzdGVuZXJzKGV2ZW50VHlwZSkgLyogVE9ETzogQXJyYXk8RXZlbnRTdWJzY3JpcHRpb24+ICove1xuXHQgICAgdmFyIHN1YnNjcmlwdGlvbnMgPSB0aGlzLl9zdWJzY3JpYmVyLmdldFN1YnNjcmlwdGlvbnNGb3JUeXBlKGV2ZW50VHlwZSk7XG5cdCAgICByZXR1cm4gc3Vic2NyaXB0aW9ucyA/IHN1YnNjcmlwdGlvbnMuZmlsdGVyKGVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNUcnVlKS5tYXAoZnVuY3Rpb24gKHN1YnNjcmlwdGlvbikge1xuXHQgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uLmxpc3RlbmVyO1xuXHQgICAgfSkgOiBbXTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBFbWl0cyBhbiBldmVudCBvZiB0aGUgZ2l2ZW4gdHlwZSB3aXRoIHRoZSBnaXZlbiBkYXRhLiBBbGwgaGFuZGxlcnMgb2YgdGhhdFxuXHQgICAqIHBhcnRpY3VsYXIgdHlwZSB3aWxsIGJlIG5vdGlmaWVkLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50VHlwZSAtIE5hbWUgb2YgdGhlIGV2ZW50IHRvIGVtaXRcblx0ICAgKiBAcGFyYW0geyp9IEFyYml0cmFyeSBhcmd1bWVudHMgdG8gYmUgcGFzc2VkIHRvIGVhY2ggcmVnaXN0ZXJlZCBsaXN0ZW5lclxuXHQgICAqXG5cdCAgICogQGV4YW1wbGVcblx0ICAgKiAgIGVtaXR0ZXIuYWRkTGlzdGVuZXIoJ3NvbWVFdmVudCcsIGZ1bmN0aW9uKG1lc3NhZ2UpIHtcblx0ICAgKiAgICAgY29uc29sZS5sb2cobWVzc2FnZSk7XG5cdCAgICogICB9KTtcblx0ICAgKlxuXHQgICAqICAgZW1pdHRlci5lbWl0KCdzb21lRXZlbnQnLCAnYWJjJyk7IC8vIGxvZ3MgJ2FiYydcblx0ICAgKi9cblx0XG5cdCAgQmFzZUV2ZW50RW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uIGVtaXQoZXZlbnRUeXBlKSB7XG5cdCAgICB2YXIgc3Vic2NyaXB0aW9ucyA9IHRoaXMuX3N1YnNjcmliZXIuZ2V0U3Vic2NyaXB0aW9uc0ZvclR5cGUoZXZlbnRUeXBlKTtcblx0ICAgIGlmIChzdWJzY3JpcHRpb25zKSB7XG5cdCAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoc3Vic2NyaXB0aW9ucyk7XG5cdCAgICAgIGZvciAodmFyIGlpID0gMDsgaWkgPCBrZXlzLmxlbmd0aDsgaWkrKykge1xuXHQgICAgICAgIHZhciBrZXkgPSBrZXlzW2lpXTtcblx0ICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gc3Vic2NyaXB0aW9uc1trZXldO1xuXHQgICAgICAgIC8vIFRoZSBzdWJzY3JpcHRpb24gbWF5IGhhdmUgYmVlbiByZW1vdmVkIGR1cmluZyB0aGlzIGV2ZW50IGxvb3AuXG5cdCAgICAgICAgaWYgKHN1YnNjcmlwdGlvbikge1xuXHQgICAgICAgICAgdGhpcy5fY3VycmVudFN1YnNjcmlwdGlvbiA9IHN1YnNjcmlwdGlvbjtcblx0ICAgICAgICAgIHRoaXMuX19lbWl0VG9TdWJzY3JpcHRpb24uYXBwbHkodGhpcywgW3N1YnNjcmlwdGlvbl0uY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5fY3VycmVudFN1YnNjcmlwdGlvbiA9IG51bGw7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogUHJvdmlkZXMgYSBob29rIHRvIG92ZXJyaWRlIGhvdyB0aGUgZW1pdHRlciBlbWl0cyBhbiBldmVudCB0byBhIHNwZWNpZmljXG5cdCAgICogc3Vic2NyaXB0aW9uLiBUaGlzIGFsbG93cyB5b3UgdG8gc2V0IHVwIGxvZ2dpbmcgYW5kIGVycm9yIGJvdW5kYXJpZXNcblx0ICAgKiBzcGVjaWZpYyB0byB5b3VyIGVudmlyb25tZW50LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtFbWl0dGVyU3Vic2NyaXB0aW9ufSBzdWJzY3JpcHRpb25cblx0ICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRUeXBlXG5cdCAgICogQHBhcmFtIHsqfSBBcmJpdHJhcnkgYXJndW1lbnRzIHRvIGJlIHBhc3NlZCB0byBlYWNoIHJlZ2lzdGVyZWQgbGlzdGVuZXJcblx0ICAgKi9cblx0XG5cdCAgQmFzZUV2ZW50RW1pdHRlci5wcm90b3R5cGUuX19lbWl0VG9TdWJzY3JpcHRpb24gPSBmdW5jdGlvbiBfX2VtaXRUb1N1YnNjcmlwdGlvbihzdWJzY3JpcHRpb24sIGV2ZW50VHlwZSkge1xuXHQgICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpO1xuXHQgICAgc3Vic2NyaXB0aW9uLmxpc3RlbmVyLmFwcGx5KHN1YnNjcmlwdGlvbi5jb250ZXh0LCBhcmdzKTtcblx0ICB9O1xuXHRcblx0ICByZXR1cm4gQmFzZUV2ZW50RW1pdHRlcjtcblx0fSkoKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gQmFzZUV2ZW50RW1pdHRlcjtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oNCkpKVxuXG4vKioqLyB9KSxcbi8qIDIyMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBDb3B5cmlnaHQgKGMpIDIwMTQtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICogXG5cdCAqIEBwcm92aWRlc01vZHVsZSBFbWl0dGVyU3Vic2NyaXB0aW9uXG5cdCAqIEB0eXBlY2hlY2tzXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24nKTsgfSB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAnZnVuY3Rpb24nICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAnICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXHRcblx0dmFyIEV2ZW50U3Vic2NyaXB0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMjQpO1xuXHRcblx0LyoqXG5cdCAqIEVtaXR0ZXJTdWJzY3JpcHRpb24gcmVwcmVzZW50cyBhIHN1YnNjcmlwdGlvbiB3aXRoIGxpc3RlbmVyIGFuZCBjb250ZXh0IGRhdGEuXG5cdCAqL1xuXHRcblx0dmFyIEVtaXR0ZXJTdWJzY3JpcHRpb24gPSAoZnVuY3Rpb24gKF9FdmVudFN1YnNjcmlwdGlvbikge1xuXHQgIF9pbmhlcml0cyhFbWl0dGVyU3Vic2NyaXB0aW9uLCBfRXZlbnRTdWJzY3JpcHRpb24pO1xuXHRcblx0ICAvKipcblx0ICAgKiBAcGFyYW0ge0V2ZW50U3Vic2NyaXB0aW9uVmVuZG9yfSBzdWJzY3JpYmVyIC0gVGhlIHN1YnNjcmliZXIgdGhhdCBjb250cm9sc1xuXHQgICAqICAgdGhpcyBzdWJzY3JpcHRpb25cblx0ICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBsaXN0ZW5lciAtIEZ1bmN0aW9uIHRvIGludm9rZSB3aGVuIHRoZSBzcGVjaWZpZWQgZXZlbnQgaXNcblx0ICAgKiAgIGVtaXR0ZWRcblx0ICAgKiBAcGFyYW0geyp9IGNvbnRleHQgLSBPcHRpb25hbCBjb250ZXh0IG9iamVjdCB0byB1c2Ugd2hlbiBpbnZva2luZyB0aGVcblx0ICAgKiAgIGxpc3RlbmVyXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIEVtaXR0ZXJTdWJzY3JpcHRpb24oc3Vic2NyaWJlciwgbGlzdGVuZXIsIGNvbnRleHQpIHtcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBFbWl0dGVyU3Vic2NyaXB0aW9uKTtcblx0XG5cdCAgICBfRXZlbnRTdWJzY3JpcHRpb24uY2FsbCh0aGlzLCBzdWJzY3JpYmVyKTtcblx0ICAgIHRoaXMubGlzdGVuZXIgPSBsaXN0ZW5lcjtcblx0ICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gRW1pdHRlclN1YnNjcmlwdGlvbjtcblx0fSkoRXZlbnRTdWJzY3JpcHRpb24pO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBFbWl0dGVyU3Vic2NyaXB0aW9uO1xuXG4vKioqLyB9KSxcbi8qIDIyNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBDb3B5cmlnaHQgKGMpIDIwMTQtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIEV2ZW50U3Vic2NyaXB0aW9uXG5cdCAqIEB0eXBlY2hlY2tzXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0LyoqXG5cdCAqIEV2ZW50U3Vic2NyaXB0aW9uIHJlcHJlc2VudHMgYSBzdWJzY3JpcHRpb24gdG8gYSBwYXJ0aWN1bGFyIGV2ZW50LiBJdCBjYW5cblx0ICogcmVtb3ZlIGl0cyBvd24gc3Vic2NyaXB0aW9uLlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uJyk7IH0gfVxuXHRcblx0dmFyIEV2ZW50U3Vic2NyaXB0aW9uID0gKGZ1bmN0aW9uICgpIHtcblx0XG5cdCAgLyoqXG5cdCAgICogQHBhcmFtIHtFdmVudFN1YnNjcmlwdGlvblZlbmRvcn0gc3Vic2NyaWJlciB0aGUgc3Vic2NyaWJlciB0aGF0IGNvbnRyb2xzXG5cdCAgICogICB0aGlzIHN1YnNjcmlwdGlvbi5cblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gRXZlbnRTdWJzY3JpcHRpb24oc3Vic2NyaWJlcikge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEV2ZW50U3Vic2NyaXB0aW9uKTtcblx0XG5cdCAgICB0aGlzLnN1YnNjcmliZXIgPSBzdWJzY3JpYmVyO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogUmVtb3ZlcyB0aGlzIHN1YnNjcmlwdGlvbiBmcm9tIHRoZSBzdWJzY3JpYmVyIHRoYXQgY29udHJvbHMgaXQuXG5cdCAgICovXG5cdFxuXHQgIEV2ZW50U3Vic2NyaXB0aW9uLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiByZW1vdmUoKSB7XG5cdCAgICBpZiAodGhpcy5zdWJzY3JpYmVyKSB7XG5cdCAgICAgIHRoaXMuc3Vic2NyaWJlci5yZW1vdmVTdWJzY3JpcHRpb24odGhpcyk7XG5cdCAgICAgIHRoaXMuc3Vic2NyaWJlciA9IG51bGw7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgcmV0dXJuIEV2ZW50U3Vic2NyaXB0aW9uO1xuXHR9KSgpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBFdmVudFN1YnNjcmlwdGlvbjtcblxuLyoqKi8gfSksXG4vKiAyMjUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgey8qKlxuXHQgKiBDb3B5cmlnaHQgKGMpIDIwMTQtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICogXG5cdCAqIEBwcm92aWRlc01vZHVsZSBFdmVudFN1YnNjcmlwdGlvblZlbmRvclxuXHQgKiBAdHlwZWNoZWNrc1xuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uJyk7IH0gfVxuXHRcblx0dmFyIGludmFyaWFudCA9IF9fd2VicGFja19yZXF1aXJlX18oMjI2KTtcblx0XG5cdC8qKlxuXHQgKiBFdmVudFN1YnNjcmlwdGlvblZlbmRvciBzdG9yZXMgYSBzZXQgb2YgRXZlbnRTdWJzY3JpcHRpb25zIHRoYXQgYXJlXG5cdCAqIHN1YnNjcmliZWQgdG8gYSBwYXJ0aWN1bGFyIGV2ZW50IHR5cGUuXG5cdCAqL1xuXHRcblx0dmFyIEV2ZW50U3Vic2NyaXB0aW9uVmVuZG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBFdmVudFN1YnNjcmlwdGlvblZlbmRvcigpIHtcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBFdmVudFN1YnNjcmlwdGlvblZlbmRvcik7XG5cdFxuXHQgICAgdGhpcy5fc3Vic2NyaXB0aW9uc0ZvclR5cGUgPSB7fTtcblx0ICAgIHRoaXMuX2N1cnJlbnRTdWJzY3JpcHRpb24gPSBudWxsO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogQWRkcyBhIHN1YnNjcmlwdGlvbiBrZXllZCBieSBhbiBldmVudCB0eXBlLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50VHlwZVxuXHQgICAqIEBwYXJhbSB7RXZlbnRTdWJzY3JpcHRpb259IHN1YnNjcmlwdGlvblxuXHQgICAqL1xuXHRcblx0ICBFdmVudFN1YnNjcmlwdGlvblZlbmRvci5wcm90b3R5cGUuYWRkU3Vic2NyaXB0aW9uID0gZnVuY3Rpb24gYWRkU3Vic2NyaXB0aW9uKGV2ZW50VHlwZSwgc3Vic2NyaXB0aW9uKSB7XG5cdCAgICAhKHN1YnNjcmlwdGlvbi5zdWJzY3JpYmVyID09PSB0aGlzKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdUaGUgc3Vic2NyaWJlciBvZiB0aGUgc3Vic2NyaXB0aW9uIGlzIGluY29ycmVjdGx5IHNldC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdCAgICBpZiAoIXRoaXMuX3N1YnNjcmlwdGlvbnNGb3JUeXBlW2V2ZW50VHlwZV0pIHtcblx0ICAgICAgdGhpcy5fc3Vic2NyaXB0aW9uc0ZvclR5cGVbZXZlbnRUeXBlXSA9IFtdO1xuXHQgICAgfVxuXHQgICAgdmFyIGtleSA9IHRoaXMuX3N1YnNjcmlwdGlvbnNGb3JUeXBlW2V2ZW50VHlwZV0ubGVuZ3RoO1xuXHQgICAgdGhpcy5fc3Vic2NyaXB0aW9uc0ZvclR5cGVbZXZlbnRUeXBlXS5wdXNoKHN1YnNjcmlwdGlvbik7XG5cdCAgICBzdWJzY3JpcHRpb24uZXZlbnRUeXBlID0gZXZlbnRUeXBlO1xuXHQgICAgc3Vic2NyaXB0aW9uLmtleSA9IGtleTtcblx0ICAgIHJldHVybiBzdWJzY3JpcHRpb247XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogUmVtb3ZlcyBhIGJ1bGsgc2V0IG9mIHRoZSBzdWJzY3JpcHRpb25zLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHs/c3RyaW5nfSBldmVudFR5cGUgLSBPcHRpb25hbCBuYW1lIG9mIHRoZSBldmVudCB0eXBlIHdob3NlXG5cdCAgICogICByZWdpc3RlcmVkIHN1cHNjcmlwdGlvbnMgdG8gcmVtb3ZlLCBpZiBudWxsIHJlbW92ZSBhbGwgc3Vic2NyaXB0aW9ucy5cblx0ICAgKi9cblx0XG5cdCAgRXZlbnRTdWJzY3JpcHRpb25WZW5kb3IucHJvdG90eXBlLnJlbW92ZUFsbFN1YnNjcmlwdGlvbnMgPSBmdW5jdGlvbiByZW1vdmVBbGxTdWJzY3JpcHRpb25zKGV2ZW50VHlwZSkge1xuXHQgICAgaWYgKGV2ZW50VHlwZSA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgIHRoaXMuX3N1YnNjcmlwdGlvbnNGb3JUeXBlID0ge307XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBkZWxldGUgdGhpcy5fc3Vic2NyaXB0aW9uc0ZvclR5cGVbZXZlbnRUeXBlXTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBSZW1vdmVzIGEgc3BlY2lmaWMgc3Vic2NyaXB0aW9uLiBJbnN0ZWFkIG9mIGNhbGxpbmcgdGhpcyBmdW5jdGlvbiwgY2FsbFxuXHQgICAqIGBzdWJzY3JpcHRpb24ucmVtb3ZlKClgIGRpcmVjdGx5LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtvYmplY3R9IHN1YnNjcmlwdGlvblxuXHQgICAqL1xuXHRcblx0ICBFdmVudFN1YnNjcmlwdGlvblZlbmRvci5wcm90b3R5cGUucmVtb3ZlU3Vic2NyaXB0aW9uID0gZnVuY3Rpb24gcmVtb3ZlU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbikge1xuXHQgICAgdmFyIGV2ZW50VHlwZSA9IHN1YnNjcmlwdGlvbi5ldmVudFR5cGU7XG5cdCAgICB2YXIga2V5ID0gc3Vic2NyaXB0aW9uLmtleTtcblx0XG5cdCAgICB2YXIgc3Vic2NyaXB0aW9uc0ZvclR5cGUgPSB0aGlzLl9zdWJzY3JpcHRpb25zRm9yVHlwZVtldmVudFR5cGVdO1xuXHQgICAgaWYgKHN1YnNjcmlwdGlvbnNGb3JUeXBlKSB7XG5cdCAgICAgIGRlbGV0ZSBzdWJzY3JpcHRpb25zRm9yVHlwZVtrZXldO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJldHVybnMgdGhlIGFycmF5IG9mIHN1YnNjcmlwdGlvbnMgdGhhdCBhcmUgY3VycmVudGx5IHJlZ2lzdGVyZWQgZm9yIHRoZVxuXHQgICAqIGdpdmVuIGV2ZW50IHR5cGUuXG5cdCAgICpcblx0ICAgKiBOb3RlOiBUaGlzIGFycmF5IGNhbiBiZSBwb3RlbnRpYWxseSBzcGFyc2UgYXMgc3Vic2NyaXB0aW9ucyBhcmUgZGVsZXRlZFxuXHQgICAqIGZyb20gaXQgd2hlbiB0aGV5IGFyZSByZW1vdmVkLlxuXHQgICAqXG5cdCAgICogVE9ETzogVGhpcyByZXR1cm5zIGEgbnVsbGFibGUgYXJyYXkuIHdhdD9cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFR5cGVcblx0ICAgKiBAcmV0dXJuIHs/YXJyYXl9XG5cdCAgICovXG5cdFxuXHQgIEV2ZW50U3Vic2NyaXB0aW9uVmVuZG9yLnByb3RvdHlwZS5nZXRTdWJzY3JpcHRpb25zRm9yVHlwZSA9IGZ1bmN0aW9uIGdldFN1YnNjcmlwdGlvbnNGb3JUeXBlKGV2ZW50VHlwZSkge1xuXHQgICAgcmV0dXJuIHRoaXMuX3N1YnNjcmlwdGlvbnNGb3JUeXBlW2V2ZW50VHlwZV07XG5cdCAgfTtcblx0XG5cdCAgcmV0dXJuIEV2ZW50U3Vic2NyaXB0aW9uVmVuZG9yO1xuXHR9KSgpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBFdmVudFN1YnNjcmlwdGlvblZlbmRvcjtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oNCkpKVxuXG4vKioqLyB9KSxcbi8qIDIyNiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzKSB7LyoqXG5cdCAqIENvcHlyaWdodCAoYykgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuXHQgKlxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8qKlxuXHQgKiBVc2UgaW52YXJpYW50KCkgdG8gYXNzZXJ0IHN0YXRlIHdoaWNoIHlvdXIgcHJvZ3JhbSBhc3N1bWVzIHRvIGJlIHRydWUuXG5cdCAqXG5cdCAqIFByb3ZpZGUgc3ByaW50Zi1zdHlsZSBmb3JtYXQgKG9ubHkgJXMgaXMgc3VwcG9ydGVkKSBhbmQgYXJndW1lbnRzXG5cdCAqIHRvIHByb3ZpZGUgaW5mb3JtYXRpb24gYWJvdXQgd2hhdCBicm9rZSBhbmQgd2hhdCB5b3Ugd2VyZVxuXHQgKiBleHBlY3RpbmcuXG5cdCAqXG5cdCAqIFRoZSBpbnZhcmlhbnQgbWVzc2FnZSB3aWxsIGJlIHN0cmlwcGVkIGluIHByb2R1Y3Rpb24sIGJ1dCB0aGUgaW52YXJpYW50XG5cdCAqIHdpbGwgcmVtYWluIHRvIGVuc3VyZSBsb2dpYyBkb2VzIG5vdCBkaWZmZXIgaW4gcHJvZHVjdGlvbi5cblx0ICovXG5cdFxuXHR2YXIgdmFsaWRhdGVGb3JtYXQgPSBmdW5jdGlvbiB2YWxpZGF0ZUZvcm1hdChmb3JtYXQpIHt9O1xuXHRcblx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICB2YWxpZGF0ZUZvcm1hdCA9IGZ1bmN0aW9uIHZhbGlkYXRlRm9ybWF0KGZvcm1hdCkge1xuXHQgICAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgIHRocm93IG5ldyBFcnJvcignaW52YXJpYW50IHJlcXVpcmVzIGFuIGVycm9yIG1lc3NhZ2UgYXJndW1lbnQnKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpbnZhcmlhbnQoY29uZGl0aW9uLCBmb3JtYXQsIGEsIGIsIGMsIGQsIGUsIGYpIHtcblx0ICB2YWxpZGF0ZUZvcm1hdChmb3JtYXQpO1xuXHRcblx0ICBpZiAoIWNvbmRpdGlvbikge1xuXHQgICAgdmFyIGVycm9yO1xuXHQgICAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgIGVycm9yID0gbmV3IEVycm9yKCdNaW5pZmllZCBleGNlcHRpb24gb2NjdXJyZWQ7IHVzZSB0aGUgbm9uLW1pbmlmaWVkIGRldiBlbnZpcm9ubWVudCAnICsgJ2ZvciB0aGUgZnVsbCBlcnJvciBtZXNzYWdlIGFuZCBhZGRpdGlvbmFsIGhlbHBmdWwgd2FybmluZ3MuJyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB2YXIgYXJncyA9IFthLCBiLCBjLCBkLCBlLCBmXTtcblx0ICAgICAgdmFyIGFyZ0luZGV4ID0gMDtcblx0ICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoZm9ybWF0LnJlcGxhY2UoLyVzL2csIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gYXJnc1thcmdJbmRleCsrXTtcblx0ICAgICAgfSkpO1xuXHQgICAgICBlcnJvci5uYW1lID0gJ0ludmFyaWFudCBWaW9sYXRpb24nO1xuXHQgICAgfVxuXHRcblx0ICAgIGVycm9yLmZyYW1lc1RvUG9wID0gMTsgLy8gd2UgZG9uJ3QgY2FyZSBhYm91dCBpbnZhcmlhbnQncyBvd24gZnJhbWVcblx0ICAgIHRocm93IGVycm9yO1xuXHQgIH1cblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpbnZhcmlhbnQ7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpKSlcblxuLyoqKi8gfSksXG4vKiAyMjcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdC8qKlxuXHQgKiBDb3B5cmlnaHQgKGMpIDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cblx0ICpcblx0ICogXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbWFrZUVtcHR5RnVuY3Rpb24oYXJnKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiBhcmc7XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFRoaXMgZnVuY3Rpb24gYWNjZXB0cyBhbmQgZGlzY2FyZHMgaW5wdXRzOyBpdCBoYXMgbm8gc2lkZSBlZmZlY3RzLiBUaGlzIGlzXG5cdCAqIHByaW1hcmlseSB1c2VmdWwgaWRpb21hdGljYWxseSBmb3Igb3ZlcnJpZGFibGUgZnVuY3Rpb24gZW5kcG9pbnRzIHdoaWNoXG5cdCAqIGFsd2F5cyBuZWVkIHRvIGJlIGNhbGxhYmxlLCBzaW5jZSBKUyBsYWNrcyBhIG51bGwtY2FsbCBpZGlvbSBhbGEgQ29jb2EuXG5cdCAqL1xuXHR2YXIgZW1wdHlGdW5jdGlvbiA9IGZ1bmN0aW9uIGVtcHR5RnVuY3Rpb24oKSB7fTtcblx0XG5cdGVtcHR5RnVuY3Rpb24udGhhdFJldHVybnMgPSBtYWtlRW1wdHlGdW5jdGlvbjtcblx0ZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc0ZhbHNlID0gbWFrZUVtcHR5RnVuY3Rpb24oZmFsc2UpO1xuXHRlbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zVHJ1ZSA9IG1ha2VFbXB0eUZ1bmN0aW9uKHRydWUpO1xuXHRlbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zTnVsbCA9IG1ha2VFbXB0eUZ1bmN0aW9uKG51bGwpO1xuXHRlbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zVGhpcyA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4gdGhpcztcblx0fTtcblx0ZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc0FyZ3VtZW50ID0gZnVuY3Rpb24gKGFyZykge1xuXHQgIHJldHVybiBhcmc7XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGVtcHR5RnVuY3Rpb247XG5cbi8qKiovIH0pLFxuLyogMjI4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MpIHsvKipcblx0ICogQ29weXJpZ2h0IChjKSAyMDE0LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBhYnN0cmFjdE1ldGhvZFxuXHQgKiBcblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgaW52YXJpYW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOTEpO1xuXHRcblx0ZnVuY3Rpb24gYWJzdHJhY3RNZXRob2QoY2xhc3NOYW1lLCBtZXRob2ROYW1lKSB7XG5cdCAgIHRydWUgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnU3ViY2xhc3NlcyBvZiAlcyBtdXN0IG92ZXJyaWRlICVzKCkgd2l0aCB0aGVpciBvd24gaW1wbGVtZW50YXRpb24uJywgY2xhc3NOYW1lLCBtZXRob2ROYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYWJzdHJhY3RNZXRob2Q7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpKSlcblxuLyoqKi8gfSksXG4vKiAyMjkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdHZhciBfaW1tdXRhYmxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMzApO1xuXHRcblx0dmFyIF9pbW11dGFibGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW1tdXRhYmxlKTtcblx0XG5cdHZhciBfdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxMyk7XG5cdFxuXHR2YXIgX2FjdGlvblR5cGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODcpO1xuXHRcblx0dmFyIF9hY3Rpb25UeXBlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9hY3Rpb25UeXBlcyk7XG5cdFxuXHR2YXIgX2Rpc3BhdGNoZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4OCk7XG5cdFxuXHR2YXIgX2Rpc3BhdGNoZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGlzcGF0Y2hlcik7XG5cdFxuXHR2YXIgX2pzTWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzMSk7XG5cdFxuXHR2YXIgX2pzTWQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfanNNZCk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHR2YXIgUmVjaXBlU3RvcmUgPSBmdW5jdGlvbiAoX1JlZHVjZVN0b3JlKSB7XG5cdCAgICBfaW5oZXJpdHMoUmVjaXBlU3RvcmUsIF9SZWR1Y2VTdG9yZSk7XG5cdFxuXHQgICAgZnVuY3Rpb24gUmVjaXBlU3RvcmUoKSB7XG5cdCAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlY2lwZVN0b3JlKTtcblx0XG5cdCAgICAgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChSZWNpcGVTdG9yZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFJlY2lwZVN0b3JlKSkuY2FsbCh0aGlzLCBfZGlzcGF0Y2hlcjIuZGVmYXVsdCkpO1xuXHQgICAgfVxuXHRcblx0ICAgIF9jcmVhdGVDbGFzcyhSZWNpcGVTdG9yZSwgW3tcblx0ICAgICAgICBrZXk6ICdnZXRJbml0aWFsU3RhdGUnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbml0aWFsU3RhdGUoKSB7XG5cdCAgICAgICAgICAgIHZhciBuZXdSZWNpcGUgPSB7IGlkOiBcIm5ld1wiIH07XG5cdCAgICAgICAgICAgIHZhciB1c2VyU2V0dGluZ3MgPSB7IGlkOiBcInVzZXJcIiwgYWN0aXZlOiBmYWxzZSB9O1xuXHQgICAgICAgICAgICB2YXIgbm90aWZ5ID0geyBhY3RpdmU6IGZhbHNlLCB0aW1lcjogbnVsbCwgbWVzc2FnZTogXCJcIiwgdHlwZTogXCJcIiB9O1xuXHRcblx0ICAgICAgICAgICAgLy8gR2V0IGhvbWUgZmVlZCBvbiBpbml0aWFsIGxvYWRcblx0ICAgICAgICAgICAgdmFyIGhvbWUgPSB7IGlkOiBcImhvbWVcIiwgYWN0aXZlOiB0cnVlLCByZWNlbnRGZWVkOiBbXSB9O1xuXHQgICAgICAgICAgICB0aGlzLl9wcm9jZXNzQWN0aW9uKHsgYWN0aW9uOiBcIkdFVF9EQVRBX1JFQ0VOVF9GRUVEXCIgfSwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdCAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgIT0gbnVsbCkge1xuXHQgICAgICAgICAgICAgICAgICAgIGhvbWUucmVjZW50RmVlZCA9IHJlc3BvbnNlO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LCBmYWxzZSk7XG5cdFxuXHQgICAgICAgICAgICAvLyBTZWUgaWYgdGhlIHVzZXIgaXMgYWxyZWFkeSBsb2dnZWQgaW5cblx0ICAgICAgICAgICAgdmFyIHVzZXIgPSBudWxsO1xuXHQgICAgICAgICAgICB0aGlzLl9wcm9jZXNzQWN0aW9uKHsgYWN0aW9uOiBcIkxPR0lOXCIgfSwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdCAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgIT0gbnVsbCAmJiByZXNwb25zZS5zdGF0dXMgPT0gXCJzdWNjZXNzXCIpIHtcblx0ICAgICAgICAgICAgICAgICAgICB1c2VyID0gcmVzcG9uc2UudXNlcjtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSwgZmFsc2UpO1xuXHRcblx0ICAgICAgICAgICAgdmFyIGF1dGhlbnRpY2F0ZSA9IHsgYWN0aXZlOiBmYWxzZSwgdHlwZTogXCJsb2dpblwiIH07XG5cdCAgICAgICAgICAgIGlmIChsb2NhdGlvbi5oYXNoICYmIGxvY2F0aW9uLmhhc2guaW5kZXhPZihcImtleVwiKSAhPSAtMSAmJiBsb2NhdGlvbi5oYXNoLmluZGV4T2YoXCJpZFwiKSAhPSAtMSAmJiBsb2NhdGlvbi5oYXNoLmluZGV4T2YoXCJuYW1lXCIpICE9IC0xKSB7XG5cdCAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGUuYWN0aXZlID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICAgIGF1dGhlbnRpY2F0ZS50eXBlID0gXCJyZXNldFwiO1xuXHRcblx0ICAgICAgICAgICAgICAgIC8vIFRyaW0gb2ZmIHRoZSBmaXJzdCBjaGFyZWN0ZXIgYW5kIHNwbGl0IG9uIHZhbHVlc1xuXHQgICAgICAgICAgICAgICAgdmFyIHBhaXJzID0gbG9jYXRpb24uaGFzaC5zbGljZSgxKS5zcGxpdChcIiZcIik7XG5cdCAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhaXJzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IHBhaXJzW2ldLnNwbGl0KFwiPVwiKVswXTtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBwYWlyc1tpXS5zcGxpdChcIj1cIilbMV07XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKGtleSA9PSBcIm5hbWVcIikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGUudXNlciA9IHZhbHVlO1xuXHQgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoa2V5ID09IFwiaWRcIikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGUudXNlcklkID0gdmFsdWU7XG5cdCAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChrZXkgPT0gXCJrZXlcIikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGUua2V5ID0gdmFsdWU7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgICAgIGxvY2F0aW9uLmhhc2ggPSBcIlwiO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGU6IGF1dGhlbnRpY2F0ZSxcblx0ICAgICAgICAgICAgICAgIHVzZXI6IHVzZXIsXG5cdCAgICAgICAgICAgICAgICBub3RpZnk6IG5vdGlmeSxcblx0ICAgICAgICAgICAgICAgIG9wZW46IFtob21lLCB1c2VyU2V0dGluZ3MsIG5ld1JlY2lwZV1cblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnX3Byb2Nlc3NBY3Rpb24nLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcHJvY2Vzc0FjdGlvbihhY3Rpb24sIGNhbGxiYWNrLCBhc3luYykge1xuXHQgICAgICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cdFxuXHQgICAgICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgLy8gU3VjY2VzcyBpcyA0XG5cdCAgICAgICAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT0gNCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciByZXNwb25zZSA9IEpTT04ucGFyc2UodGhpcy5yZXNwb25zZVRleHQpO1xuXHQgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT0gXCJmdW5jdGlvblwiKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHJlc3BvbnNlKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH07XG5cdFxuXHQgICAgICAgICAgICB4aHIub3BlbignUE9TVCcsICdwcm9jZXNzQWN0aW9uLnBocCcsIGFzeW5jKTtcblx0ICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XG5cdCAgICAgICAgICAgIHhoci5zZW5kKEpTT04uc3RyaW5naWZ5KGFjdGlvbikpO1xuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdfcHJvY2Vzc0NvbnRlbnQnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcHJvY2Vzc0NvbnRlbnQobGlzdCwgaXRlbSkge1xuXHQgICAgICAgICAgICB2YXIgbmV3SXRlbSA9IHtcblx0ICAgICAgICAgICAgICAgIGlkOiBpdGVtLmlkLFxuXHQgICAgICAgICAgICAgICAgYWN0aXZlOiB0cnVlLFxuXHQgICAgICAgICAgICAgICAgcmVjaXBlOiBpdGVtXG5cdCAgICAgICAgICAgIH07XG5cdFxuXHQgICAgICAgICAgICB2YXIgaXNPcGVuID0gZmFsc2U7XG5cdCAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICAgICAgbGlzdFtpXS5hY3RpdmUgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgIGlmIChsaXN0W2ldLmlkID09IGl0ZW0uaWQpIHtcblx0ICAgICAgICAgICAgICAgICAgICBsaXN0W2ldID0gbmV3SXRlbTtcblx0ICAgICAgICAgICAgICAgICAgICBpc09wZW4gPSB0cnVlO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICBpZiAoIWlzT3Blbikge1xuXHQgICAgICAgICAgICAgICAgbGlzdC5wdXNoKG5ld0l0ZW0pO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ19vcGVuQ29udGVudCcsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9vcGVuQ29udGVudChsaXN0LCBrZXkpIHtcblx0ICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgICAgICBsaXN0W2ldLmFjdGl2ZSA9IGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgaWYgKGxpc3RbaV0uaWQgPT0ga2V5KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgbGlzdFtpXS5hY3RpdmUgPSB0cnVlO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ191cGRhdGVBY3RpdmVSZWNpcGUnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfdXBkYXRlQWN0aXZlUmVjaXBlKGNhbGxiYWNrKSB7XG5cdCAgICAgICAgICAgIHZhciByZWNpcGUgPSB7fTtcblx0ICAgICAgICAgICAgdmFyIGN1cnJTdGF0ZSA9IHRoaXMuZ2V0U3RhdGUoKTtcblx0XG5cdCAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY3VyclN0YXRlLm9wZW4ubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgICAgIGlmIChjdXJyU3RhdGUub3BlbltpXS5hY3RpdmUpIHtcblx0ICAgICAgICAgICAgICAgICAgICBjdXJyU3RhdGUub3BlbltpXS5yZWNpcGUgPSBjYWxsYmFjayhjdXJyU3RhdGUub3BlbltpXS5yZWNpcGUpO1xuXHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICByZXR1cm4gY3VyclN0YXRlO1xuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdyZWR1Y2UnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZWR1Y2Uoc3RhdGUsIGFjdGlvbikge1xuXHQgICAgICAgICAgICBzd2l0Y2ggKGFjdGlvbi5hY3Rpb24pIHtcblx0ICAgICAgICAgICAgICAgIGNhc2UgX2FjdGlvblR5cGVzMi5kZWZhdWx0Lk5PVElGWTpcblx0ICAgICAgICAgICAgICAgICAgICBzdGF0ZS5ub3RpZnkgPSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZTogYWN0aW9uLmFjdGl2ZSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGltZXI6IGFjdGlvbi50aW1lcixcblx0ICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYWN0aW9uLm1lc3NhZ2UgPyBhY3Rpb24ubWVzc2FnZSA6IHN0YXRlLm5vdGlmeS5tZXNzYWdlLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBhY3Rpb24udHlwZSA/IGFjdGlvbi50eXBlIDogc3RhdGUubm90aWZ5LnR5cGVcblx0ICAgICAgICAgICAgICAgICAgICB9O1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2ltbXV0YWJsZTIuZGVmYXVsdC5mcm9tSlMoc3RhdGUpLnRvSlMoKTtcblx0ICAgICAgICAgICAgICAgIGNhc2UgX2FjdGlvblR5cGVzMi5kZWZhdWx0LkFVVEhFTlRJQ0FURTpcblx0ICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aW9uLmFjdGl2ZSAhPSBudWxsKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLmF1dGhlbnRpY2F0ZS5hY3RpdmUgPSBhY3Rpb24uYWN0aXZlO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aW9uLnR5cGUgIT0gbnVsbCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5hdXRoZW50aWNhdGUudHlwZSA9IGFjdGlvbi50eXBlO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2ltbXV0YWJsZTIuZGVmYXVsdC5mcm9tSlMoc3RhdGUpLnRvSlMoKTtcblx0ICAgICAgICAgICAgICAgIGNhc2UgX2FjdGlvblR5cGVzMi5kZWZhdWx0LlVQREFURV9VU0VSX1NUQVRVUzpcblx0ICAgICAgICAgICAgICAgICAgICBhY3Rpb24udXJsID0gbG9jYXRpb24ub3JpZ2luO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuX3Byb2Nlc3NBY3Rpb24oYWN0aW9uLCBudWxsLCB0cnVlKTtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RhdGU7XG5cdCAgICAgICAgICAgICAgICBjYXNlIF9hY3Rpb25UeXBlczIuZGVmYXVsdC5VUERBVEVfUEFTU1dPUkQ6XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIHN0b3JlID0gdGhpcztcblx0ICAgICAgICAgICAgICAgICAgICBhY3Rpb24ubmV3UGFzc3dvcmQgPSAoMCwgX2pzTWQyLmRlZmF1bHQpKGFjdGlvbi5uZXdQYXNzd29yZCk7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGNhbGxiYWNrID0gZnVuY3Rpb24gY2FsbGJhY2socmVzcG9uc2UpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlICE9IG51bGwpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLnVzZXIgPSByZXNwb25zZTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLmF1dGhlbnRpY2F0ZS5hY3RpdmUgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgIH07XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuX3Byb2Nlc3NBY3Rpb24oYWN0aW9uLCBjYWxsYmFjaywgZmFsc2UpO1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBfaW1tdXRhYmxlMi5kZWZhdWx0LmZyb21KUyhzdGF0ZSkudG9KUygpO1xuXHQgICAgICAgICAgICAgICAgY2FzZSBfYWN0aW9uVHlwZXMyLmRlZmF1bHQuUkVHSVNURVI6XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIHN0b3JlID0gdGhpcztcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgY2FsbGJhY2sgPSBmdW5jdGlvbiBjYWxsYmFjayhyZXNwb25zZSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFjdGlvbi5jYWxsYmFjayA9PSBcImZ1bmN0aW9uXCIpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbi5jYWxsYmFjayhyZXNwb25zZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAwKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgIH07XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuX3Byb2Nlc3NBY3Rpb24oYWN0aW9uLCBjYWxsYmFjaywgZmFsc2UpO1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBfaW1tdXRhYmxlMi5kZWZhdWx0LmZyb21KUyhzdGF0ZSkudG9KUygpO1xuXHQgICAgICAgICAgICAgICAgY2FzZSBfYWN0aW9uVHlwZXMyLmRlZmF1bHQuTE9HSU46XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIHN0b3JlID0gdGhpcztcblx0ICAgICAgICAgICAgICAgICAgICBhY3Rpb24ucGFzc3dvcmQgPSAoMCwgX2pzTWQyLmRlZmF1bHQpKGFjdGlvbi5wYXNzd29yZCk7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGNhbGxiYWNrID0gZnVuY3Rpb24gY2FsbGJhY2socmVzcG9uc2UpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PSBcInN1Y2Nlc3NcIikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUudXNlciA9IHJlc3BvbnNlLnVzZXI7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhY3Rpb24uY2FsbGJhY2sgPT0gXCJmdW5jdGlvblwiKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb24uY2FsbGJhY2socmVzcG9uc2UpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMCk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICB9O1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLl9wcm9jZXNzQWN0aW9uKGFjdGlvbiwgY2FsbGJhY2ssIGZhbHNlKTtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2ltbXV0YWJsZTIuZGVmYXVsdC5mcm9tSlMoc3RhdGUpLnRvSlMoKTtcblx0ICAgICAgICAgICAgICAgIGNhc2UgX2FjdGlvblR5cGVzMi5kZWZhdWx0LkxPR09VVDpcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgc3RvcmUgPSB0aGlzO1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IGZ1bmN0aW9uIGNhbGxiYWNrKCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9IHN0b3JlLmdldEluaXRpYWxTdGF0ZSgpO1xuXHQgICAgICAgICAgICAgICAgICAgIH07XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuX3Byb2Nlc3NBY3Rpb24oYWN0aW9uLCBjYWxsYmFjaywgZmFsc2UpO1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBfaW1tdXRhYmxlMi5kZWZhdWx0LmZyb21KUyhzdGF0ZSkudG9KUygpO1xuXHQgICAgICAgICAgICAgICAgY2FzZSBfYWN0aW9uVHlwZXMyLmRlZmF1bHQuT1BFTl9DT05URU5UOlxuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuX29wZW5Db250ZW50KHN0YXRlLm9wZW4sIGFjdGlvbi5rZXkpO1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBfaW1tdXRhYmxlMi5kZWZhdWx0LmZyb21KUyhzdGF0ZSkudG9KUygpO1xuXHQgICAgICAgICAgICAgICAgY2FzZSBfYWN0aW9uVHlwZXMyLmRlZmF1bHQuU0VSVkVSX1JFUVVFU1Q6XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5fcHJvY2Vzc0FjdGlvbihhY3Rpb24uZGF0YSwgYWN0aW9uLmNhbGxiYWNrLCBhY3Rpb24uYXN5bmMpO1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdGF0ZTtcblx0ICAgICAgICAgICAgICAgIGNhc2UgX2FjdGlvblR5cGVzMi5kZWZhdWx0LlNBVkVfUkVDSVBFOlxuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuX3Byb2Nlc3NBY3Rpb24oYWN0aW9uLCBudWxsLCBmYWxzZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0YXRlO1xuXHQgICAgICAgICAgICAgICAgY2FzZSBfYWN0aW9uVHlwZXMyLmRlZmF1bHQuR0VUX1JFQ0lQRTpcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgc3RvcmUgPSB0aGlzO1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IGZ1bmN0aW9uIGNhbGxiYWNrKHJlc3BvbnNlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlLl9wcm9jZXNzQ29udGVudChzdGF0ZS5vcGVuLCByZXNwb25zZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgfTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5fcHJvY2Vzc0FjdGlvbihhY3Rpb24sIGNhbGxiYWNrLCBmYWxzZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9pbW11dGFibGUyLmRlZmF1bHQuZnJvbUpTKHN0YXRlKS50b0pTKCk7XG5cdCAgICAgICAgICAgICAgICBjYXNlIF9hY3Rpb25UeXBlczIuZGVmYXVsdC5ORVdfUkVDSVBFOlxuXHQgICAgICAgICAgICAgICAgICAgIHZhciBzdG9yZSA9IHRoaXM7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGNhbGxiYWNrID0gZnVuY3Rpb24gY2FsbGJhY2socmVzcG9uc2UpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmUuX3Byb2Nlc3NDb250ZW50KHN0YXRlLm9wZW4sIHJlc3BvbnNlKTtcblx0ICAgICAgICAgICAgICAgICAgICB9O1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLl9wcm9jZXNzQWN0aW9uKGFjdGlvbiwgY2FsbGJhY2ssIGZhbHNlKTtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2ltbXV0YWJsZTIuZGVmYXVsdC5mcm9tSlMoc3RhdGUpLnRvSlMoKTtcblx0ICAgICAgICAgICAgICAgIGNhc2UgX2FjdGlvblR5cGVzMi5kZWZhdWx0LkNMT1NFX1JFQ0lQRTpcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBpc0FjdGl2ZSA9IGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RhdGUub3Blbi5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUub3BlbltpXS5pZCA9PSBhY3Rpb24uaWQpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gaTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5vcGVuW2ldLmFjdGl2ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQWN0aXZlID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKGlzQWN0aXZlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RhdGUub3Blbi5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLm9wZW5baV0uaWQgPT0gXCJob21lXCIpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5vcGVuW2ldLmFjdGl2ZSA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCAhPSBudWxsKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLm9wZW4uc3BsaWNlKGluZGV4LCAxKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBfaW1tdXRhYmxlMi5kZWZhdWx0LmZyb21KUyhzdGF0ZSkudG9KUygpO1xuXHQgICAgICAgICAgICAgICAgY2FzZSBfYWN0aW9uVHlwZXMyLmRlZmF1bHQuQUREX0lOR1JFRElFTlQ6XG5cdCAgICAgICAgICAgICAgICAgICAgc3RhdGUgPSB0aGlzLl91cGRhdGVBY3RpdmVSZWNpcGUoZnVuY3Rpb24gKHJlY2lwZSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZWNpcGUuaW5ncmVkaWVudHMucHVzaCh7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogXCJcIixcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaXQ6IFwiXCIsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmdyZWRpZW50TmFtZTogXCJcIlxuXHQgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlY2lwZTtcblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9pbW11dGFibGUyLmRlZmF1bHQuZnJvbUpTKHN0YXRlKS50b0pTKCk7XG5cdCAgICAgICAgICAgICAgICBjYXNlIF9hY3Rpb25UeXBlczIuZGVmYXVsdC5BRERfU1RFUDpcblx0ICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9IHRoaXMuX3VwZGF0ZUFjdGl2ZVJlY2lwZShmdW5jdGlvbiAocmVjaXBlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJlY2lwZS5zdGVwcyArPSBcInxcIjtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlY2lwZTtcblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9pbW11dGFibGUyLmRlZmF1bHQuZnJvbUpTKHN0YXRlKS50b0pTKCk7XG5cdCAgICAgICAgICAgICAgICBjYXNlIF9hY3Rpb25UeXBlczIuZGVmYXVsdC5VUERBVEVfVkFMVUU6XG5cdCAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIlVwZGF0ZTogXCIgKyBhY3Rpb24ua2V5ICsgXCIgd2l0aCBcIiArIGFjdGlvbi52YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgc3RhdGUgPSB0aGlzLl91cGRhdGVBY3RpdmVSZWNpcGUoZnVuY3Rpb24gKHJlY2lwZSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZWNpcGVbYWN0aW9uLmtleV0gPSBhY3Rpb24udmFsdWU7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWNpcGU7XG5cdCAgICAgICAgICAgICAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBfaW1tdXRhYmxlMi5kZWZhdWx0LmZyb21KUyhzdGF0ZSkudG9KUygpO1xuXHQgICAgICAgICAgICAgICAgZGVmYXVsdDpcblx0ICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImRlZmF1bHRcIik7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0YXRlO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfV0pO1xuXHRcblx0ICAgIHJldHVybiBSZWNpcGVTdG9yZTtcblx0fShfdXRpbHMuUmVkdWNlU3RvcmUpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gbmV3IFJlY2lwZVN0b3JlKCk7XG5cbi8qKiovIH0pLFxuLyogMjMwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAoYykgMjAxNC1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuXHQgKi9cblx0XG5cdChmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG5cdCAgIHRydWUgPyBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKSA6XG5cdCAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcblx0ICAoZ2xvYmFsLkltbXV0YWJsZSA9IGZhY3RvcnkoKSk7XG5cdH0odGhpcywgZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7dmFyIFNMSUNFJDAgPSBBcnJheS5wcm90b3R5cGUuc2xpY2U7XG5cdFxuXHQgIGZ1bmN0aW9uIGNyZWF0ZUNsYXNzKGN0b3IsIHN1cGVyQ2xhc3MpIHtcblx0ICAgIGlmIChzdXBlckNsYXNzKSB7XG5cdCAgICAgIGN0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSk7XG5cdCAgICB9XG5cdCAgICBjdG9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGN0b3I7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBJdGVyYWJsZSh2YWx1ZSkge1xuXHQgICAgICByZXR1cm4gaXNJdGVyYWJsZSh2YWx1ZSkgPyB2YWx1ZSA6IFNlcSh2YWx1ZSk7XG5cdCAgICB9XG5cdFxuXHRcblx0ICBjcmVhdGVDbGFzcyhLZXllZEl0ZXJhYmxlLCBJdGVyYWJsZSk7XG5cdCAgICBmdW5jdGlvbiBLZXllZEl0ZXJhYmxlKHZhbHVlKSB7XG5cdCAgICAgIHJldHVybiBpc0tleWVkKHZhbHVlKSA/IHZhbHVlIDogS2V5ZWRTZXEodmFsdWUpO1xuXHQgICAgfVxuXHRcblx0XG5cdCAgY3JlYXRlQ2xhc3MoSW5kZXhlZEl0ZXJhYmxlLCBJdGVyYWJsZSk7XG5cdCAgICBmdW5jdGlvbiBJbmRleGVkSXRlcmFibGUodmFsdWUpIHtcblx0ICAgICAgcmV0dXJuIGlzSW5kZXhlZCh2YWx1ZSkgPyB2YWx1ZSA6IEluZGV4ZWRTZXEodmFsdWUpO1xuXHQgICAgfVxuXHRcblx0XG5cdCAgY3JlYXRlQ2xhc3MoU2V0SXRlcmFibGUsIEl0ZXJhYmxlKTtcblx0ICAgIGZ1bmN0aW9uIFNldEl0ZXJhYmxlKHZhbHVlKSB7XG5cdCAgICAgIHJldHVybiBpc0l0ZXJhYmxlKHZhbHVlKSAmJiAhaXNBc3NvY2lhdGl2ZSh2YWx1ZSkgPyB2YWx1ZSA6IFNldFNlcSh2YWx1ZSk7XG5cdCAgICB9XG5cdFxuXHRcblx0XG5cdCAgZnVuY3Rpb24gaXNJdGVyYWJsZShtYXliZUl0ZXJhYmxlKSB7XG5cdCAgICByZXR1cm4gISEobWF5YmVJdGVyYWJsZSAmJiBtYXliZUl0ZXJhYmxlW0lTX0lURVJBQkxFX1NFTlRJTkVMXSk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBpc0tleWVkKG1heWJlS2V5ZWQpIHtcblx0ICAgIHJldHVybiAhIShtYXliZUtleWVkICYmIG1heWJlS2V5ZWRbSVNfS0VZRURfU0VOVElORUxdKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGlzSW5kZXhlZChtYXliZUluZGV4ZWQpIHtcblx0ICAgIHJldHVybiAhIShtYXliZUluZGV4ZWQgJiYgbWF5YmVJbmRleGVkW0lTX0lOREVYRURfU0VOVElORUxdKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGlzQXNzb2NpYXRpdmUobWF5YmVBc3NvY2lhdGl2ZSkge1xuXHQgICAgcmV0dXJuIGlzS2V5ZWQobWF5YmVBc3NvY2lhdGl2ZSkgfHwgaXNJbmRleGVkKG1heWJlQXNzb2NpYXRpdmUpO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gaXNPcmRlcmVkKG1heWJlT3JkZXJlZCkge1xuXHQgICAgcmV0dXJuICEhKG1heWJlT3JkZXJlZCAmJiBtYXliZU9yZGVyZWRbSVNfT1JERVJFRF9TRU5USU5FTF0pO1xuXHQgIH1cblx0XG5cdCAgSXRlcmFibGUuaXNJdGVyYWJsZSA9IGlzSXRlcmFibGU7XG5cdCAgSXRlcmFibGUuaXNLZXllZCA9IGlzS2V5ZWQ7XG5cdCAgSXRlcmFibGUuaXNJbmRleGVkID0gaXNJbmRleGVkO1xuXHQgIEl0ZXJhYmxlLmlzQXNzb2NpYXRpdmUgPSBpc0Fzc29jaWF0aXZlO1xuXHQgIEl0ZXJhYmxlLmlzT3JkZXJlZCA9IGlzT3JkZXJlZDtcblx0XG5cdCAgSXRlcmFibGUuS2V5ZWQgPSBLZXllZEl0ZXJhYmxlO1xuXHQgIEl0ZXJhYmxlLkluZGV4ZWQgPSBJbmRleGVkSXRlcmFibGU7XG5cdCAgSXRlcmFibGUuU2V0ID0gU2V0SXRlcmFibGU7XG5cdFxuXHRcblx0ICB2YXIgSVNfSVRFUkFCTEVfU0VOVElORUwgPSAnQEBfX0lNTVVUQUJMRV9JVEVSQUJMRV9fQEAnO1xuXHQgIHZhciBJU19LRVlFRF9TRU5USU5FTCA9ICdAQF9fSU1NVVRBQkxFX0tFWUVEX19AQCc7XG5cdCAgdmFyIElTX0lOREVYRURfU0VOVElORUwgPSAnQEBfX0lNTVVUQUJMRV9JTkRFWEVEX19AQCc7XG5cdCAgdmFyIElTX09SREVSRURfU0VOVElORUwgPSAnQEBfX0lNTVVUQUJMRV9PUkRFUkVEX19AQCc7XG5cdFxuXHQgIC8vIFVzZWQgZm9yIHNldHRpbmcgcHJvdG90eXBlIG1ldGhvZHMgdGhhdCBJRTggY2hva2VzIG9uLlxuXHQgIHZhciBERUxFVEUgPSAnZGVsZXRlJztcblx0XG5cdCAgLy8gQ29uc3RhbnRzIGRlc2NyaWJpbmcgdGhlIHNpemUgb2YgdHJpZSBub2Rlcy5cblx0ICB2YXIgU0hJRlQgPSA1OyAvLyBSZXN1bHRlZCBpbiBiZXN0IHBlcmZvcm1hbmNlIGFmdGVyIF9fX19fXz9cblx0ICB2YXIgU0laRSA9IDEgPDwgU0hJRlQ7XG5cdCAgdmFyIE1BU0sgPSBTSVpFIC0gMTtcblx0XG5cdCAgLy8gQSBjb25zaXN0ZW50IHNoYXJlZCB2YWx1ZSByZXByZXNlbnRpbmcgXCJub3Qgc2V0XCIgd2hpY2ggZXF1YWxzIG5vdGhpbmcgb3RoZXJcblx0ICAvLyB0aGFuIGl0c2VsZiwgYW5kIG5vdGhpbmcgdGhhdCBjb3VsZCBiZSBwcm92aWRlZCBleHRlcm5hbGx5LlxuXHQgIHZhciBOT1RfU0VUID0ge307XG5cdFxuXHQgIC8vIEJvb2xlYW4gcmVmZXJlbmNlcywgUm91Z2ggZXF1aXZhbGVudCBvZiBgYm9vbCAmYC5cblx0ICB2YXIgQ0hBTkdFX0xFTkdUSCA9IHsgdmFsdWU6IGZhbHNlIH07XG5cdCAgdmFyIERJRF9BTFRFUiA9IHsgdmFsdWU6IGZhbHNlIH07XG5cdFxuXHQgIGZ1bmN0aW9uIE1ha2VSZWYocmVmKSB7XG5cdCAgICByZWYudmFsdWUgPSBmYWxzZTtcblx0ICAgIHJldHVybiByZWY7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBTZXRSZWYocmVmKSB7XG5cdCAgICByZWYgJiYgKHJlZi52YWx1ZSA9IHRydWUpO1xuXHQgIH1cblx0XG5cdCAgLy8gQSBmdW5jdGlvbiB3aGljaCByZXR1cm5zIGEgdmFsdWUgcmVwcmVzZW50aW5nIGFuIFwib3duZXJcIiBmb3IgdHJhbnNpZW50IHdyaXRlc1xuXHQgIC8vIHRvIHRyaWVzLiBUaGUgcmV0dXJuIHZhbHVlIHdpbGwgb25seSBldmVyIGVxdWFsIGl0c2VsZiwgYW5kIHdpbGwgbm90IGVxdWFsXG5cdCAgLy8gdGhlIHJldHVybiBvZiBhbnkgc3Vic2VxdWVudCBjYWxsIG9mIHRoaXMgZnVuY3Rpb24uXG5cdCAgZnVuY3Rpb24gT3duZXJJRCgpIHt9XG5cdFxuXHQgIC8vIGh0dHA6Ly9qc3BlcmYuY29tL2NvcHktYXJyYXktaW5saW5lXG5cdCAgZnVuY3Rpb24gYXJyQ29weShhcnIsIG9mZnNldCkge1xuXHQgICAgb2Zmc2V0ID0gb2Zmc2V0IHx8IDA7XG5cdCAgICB2YXIgbGVuID0gTWF0aC5tYXgoMCwgYXJyLmxlbmd0aCAtIG9mZnNldCk7XG5cdCAgICB2YXIgbmV3QXJyID0gbmV3IEFycmF5KGxlbik7XG5cdCAgICBmb3IgKHZhciBpaSA9IDA7IGlpIDwgbGVuOyBpaSsrKSB7XG5cdCAgICAgIG5ld0FycltpaV0gPSBhcnJbaWkgKyBvZmZzZXRdO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIG5ld0Fycjtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGVuc3VyZVNpemUoaXRlcikge1xuXHQgICAgaWYgKGl0ZXIuc2l6ZSA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgIGl0ZXIuc2l6ZSA9IGl0ZXIuX19pdGVyYXRlKHJldHVyblRydWUpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGl0ZXIuc2l6ZTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHdyYXBJbmRleChpdGVyLCBpbmRleCkge1xuXHQgICAgLy8gVGhpcyBpbXBsZW1lbnRzIFwiaXMgYXJyYXkgaW5kZXhcIiB3aGljaCB0aGUgRUNNQVN0cmluZyBzcGVjIGRlZmluZXMgYXM6XG5cdCAgICAvL1xuXHQgICAgLy8gICAgIEEgU3RyaW5nIHByb3BlcnR5IG5hbWUgUCBpcyBhbiBhcnJheSBpbmRleCBpZiBhbmQgb25seSBpZlxuXHQgICAgLy8gICAgIFRvU3RyaW5nKFRvVWludDMyKFApKSBpcyBlcXVhbCB0byBQIGFuZCBUb1VpbnQzMihQKSBpcyBub3QgZXF1YWxcblx0ICAgIC8vICAgICB0byAyXjMy4oiSMS5cblx0ICAgIC8vXG5cdCAgICAvLyBodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtYXJyYXktZXhvdGljLW9iamVjdHNcblx0ICAgIGlmICh0eXBlb2YgaW5kZXggIT09ICdudW1iZXInKSB7XG5cdCAgICAgIHZhciB1aW50MzJJbmRleCA9IGluZGV4ID4+PiAwOyAvLyBOID4+PiAwIGlzIHNob3J0aGFuZCBmb3IgVG9VaW50MzJcblx0ICAgICAgaWYgKCcnICsgdWludDMySW5kZXggIT09IGluZGV4IHx8IHVpbnQzMkluZGV4ID09PSA0Mjk0OTY3Mjk1KSB7XG5cdCAgICAgICAgcmV0dXJuIE5hTjtcblx0ICAgICAgfVxuXHQgICAgICBpbmRleCA9IHVpbnQzMkluZGV4O1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGluZGV4IDwgMCA/IGVuc3VyZVNpemUoaXRlcikgKyBpbmRleCA6IGluZGV4O1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gcmV0dXJuVHJ1ZSgpIHtcblx0ICAgIHJldHVybiB0cnVlO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gd2hvbGVTbGljZShiZWdpbiwgZW5kLCBzaXplKSB7XG5cdCAgICByZXR1cm4gKGJlZ2luID09PSAwIHx8IChzaXplICE9PSB1bmRlZmluZWQgJiYgYmVnaW4gPD0gLXNpemUpKSAmJlxuXHQgICAgICAoZW5kID09PSB1bmRlZmluZWQgfHwgKHNpemUgIT09IHVuZGVmaW5lZCAmJiBlbmQgPj0gc2l6ZSkpO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gcmVzb2x2ZUJlZ2luKGJlZ2luLCBzaXplKSB7XG5cdCAgICByZXR1cm4gcmVzb2x2ZUluZGV4KGJlZ2luLCBzaXplLCAwKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHJlc29sdmVFbmQoZW5kLCBzaXplKSB7XG5cdCAgICByZXR1cm4gcmVzb2x2ZUluZGV4KGVuZCwgc2l6ZSwgc2l6ZSk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiByZXNvbHZlSW5kZXgoaW5kZXgsIHNpemUsIGRlZmF1bHRJbmRleCkge1xuXHQgICAgcmV0dXJuIGluZGV4ID09PSB1bmRlZmluZWQgP1xuXHQgICAgICBkZWZhdWx0SW5kZXggOlxuXHQgICAgICBpbmRleCA8IDAgP1xuXHQgICAgICAgIE1hdGgubWF4KDAsIHNpemUgKyBpbmRleCkgOlxuXHQgICAgICAgIHNpemUgPT09IHVuZGVmaW5lZCA/XG5cdCAgICAgICAgICBpbmRleCA6XG5cdCAgICAgICAgICBNYXRoLm1pbihzaXplLCBpbmRleCk7XG5cdCAgfVxuXHRcblx0ICAvKiBnbG9iYWwgU3ltYm9sICovXG5cdFxuXHQgIHZhciBJVEVSQVRFX0tFWVMgPSAwO1xuXHQgIHZhciBJVEVSQVRFX1ZBTFVFUyA9IDE7XG5cdCAgdmFyIElURVJBVEVfRU5UUklFUyA9IDI7XG5cdFxuXHQgIHZhciBSRUFMX0lURVJBVE9SX1NZTUJPTCA9IHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgU3ltYm9sLml0ZXJhdG9yO1xuXHQgIHZhciBGQVVYX0lURVJBVE9SX1NZTUJPTCA9ICdAQGl0ZXJhdG9yJztcblx0XG5cdCAgdmFyIElURVJBVE9SX1NZTUJPTCA9IFJFQUxfSVRFUkFUT1JfU1lNQk9MIHx8IEZBVVhfSVRFUkFUT1JfU1lNQk9MO1xuXHRcblx0XG5cdCAgZnVuY3Rpb24gSXRlcmF0b3IobmV4dCkge1xuXHQgICAgICB0aGlzLm5leHQgPSBuZXh0O1xuXHQgICAgfVxuXHRcblx0ICAgIEl0ZXJhdG9yLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gJ1tJdGVyYXRvcl0nO1xuXHQgICAgfTtcblx0XG5cdFxuXHQgIEl0ZXJhdG9yLktFWVMgPSBJVEVSQVRFX0tFWVM7XG5cdCAgSXRlcmF0b3IuVkFMVUVTID0gSVRFUkFURV9WQUxVRVM7XG5cdCAgSXRlcmF0b3IuRU5UUklFUyA9IElURVJBVEVfRU5UUklFUztcblx0XG5cdCAgSXRlcmF0b3IucHJvdG90eXBlLmluc3BlY3QgPVxuXHQgIEl0ZXJhdG9yLnByb3RvdHlwZS50b1NvdXJjZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMudG9TdHJpbmcoKTsgfVxuXHQgIEl0ZXJhdG9yLnByb3RvdHlwZVtJVEVSQVRPUl9TWU1CT0xdID0gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfTtcblx0XG5cdFxuXHQgIGZ1bmN0aW9uIGl0ZXJhdG9yVmFsdWUodHlwZSwgaywgdiwgaXRlcmF0b3JSZXN1bHQpIHtcblx0ICAgIHZhciB2YWx1ZSA9IHR5cGUgPT09IDAgPyBrIDogdHlwZSA9PT0gMSA/IHYgOiBbaywgdl07XG5cdCAgICBpdGVyYXRvclJlc3VsdCA/IChpdGVyYXRvclJlc3VsdC52YWx1ZSA9IHZhbHVlKSA6IChpdGVyYXRvclJlc3VsdCA9IHtcblx0ICAgICAgdmFsdWU6IHZhbHVlLCBkb25lOiBmYWxzZVxuXHQgICAgfSk7XG5cdCAgICByZXR1cm4gaXRlcmF0b3JSZXN1bHQ7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBpdGVyYXRvckRvbmUoKSB7XG5cdCAgICByZXR1cm4geyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH07XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBoYXNJdGVyYXRvcihtYXliZUl0ZXJhYmxlKSB7XG5cdCAgICByZXR1cm4gISFnZXRJdGVyYXRvckZuKG1heWJlSXRlcmFibGUpO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gaXNJdGVyYXRvcihtYXliZUl0ZXJhdG9yKSB7XG5cdCAgICByZXR1cm4gbWF5YmVJdGVyYXRvciAmJiB0eXBlb2YgbWF5YmVJdGVyYXRvci5uZXh0ID09PSAnZnVuY3Rpb24nO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gZ2V0SXRlcmF0b3IoaXRlcmFibGUpIHtcblx0ICAgIHZhciBpdGVyYXRvckZuID0gZ2V0SXRlcmF0b3JGbihpdGVyYWJsZSk7XG5cdCAgICByZXR1cm4gaXRlcmF0b3JGbiAmJiBpdGVyYXRvckZuLmNhbGwoaXRlcmFibGUpO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gZ2V0SXRlcmF0b3JGbihpdGVyYWJsZSkge1xuXHQgICAgdmFyIGl0ZXJhdG9yRm4gPSBpdGVyYWJsZSAmJiAoXG5cdCAgICAgIChSRUFMX0lURVJBVE9SX1NZTUJPTCAmJiBpdGVyYWJsZVtSRUFMX0lURVJBVE9SX1NZTUJPTF0pIHx8XG5cdCAgICAgIGl0ZXJhYmxlW0ZBVVhfSVRFUkFUT1JfU1lNQk9MXVxuXHQgICAgKTtcblx0ICAgIGlmICh0eXBlb2YgaXRlcmF0b3JGbiA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICByZXR1cm4gaXRlcmF0b3JGbjtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGlzQXJyYXlMaWtlKHZhbHVlKSB7XG5cdCAgICByZXR1cm4gdmFsdWUgJiYgdHlwZW9mIHZhbHVlLmxlbmd0aCA9PT0gJ251bWJlcic7XG5cdCAgfVxuXHRcblx0ICBjcmVhdGVDbGFzcyhTZXEsIEl0ZXJhYmxlKTtcblx0ICAgIGZ1bmN0aW9uIFNlcSh2YWx1ZSkge1xuXHQgICAgICByZXR1cm4gdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCA/IGVtcHR5U2VxdWVuY2UoKSA6XG5cdCAgICAgICAgaXNJdGVyYWJsZSh2YWx1ZSkgPyB2YWx1ZS50b1NlcSgpIDogc2VxRnJvbVZhbHVlKHZhbHVlKTtcblx0ICAgIH1cblx0XG5cdCAgICBTZXEub2YgPSBmdW5jdGlvbigvKi4uLnZhbHVlcyovKSB7XG5cdCAgICAgIHJldHVybiBTZXEoYXJndW1lbnRzKTtcblx0ICAgIH07XG5cdFxuXHQgICAgU2VxLnByb3RvdHlwZS50b1NlcSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH07XG5cdFxuXHQgICAgU2VxLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gdGhpcy5fX3RvU3RyaW5nKCdTZXEgeycsICd9Jyk7XG5cdCAgICB9O1xuXHRcblx0ICAgIFNlcS5wcm90b3R5cGUuY2FjaGVSZXN1bHQgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgaWYgKCF0aGlzLl9jYWNoZSAmJiB0aGlzLl9faXRlcmF0ZVVuY2FjaGVkKSB7XG5cdCAgICAgICAgdGhpcy5fY2FjaGUgPSB0aGlzLmVudHJ5U2VxKCkudG9BcnJheSgpO1xuXHQgICAgICAgIHRoaXMuc2l6ZSA9IHRoaXMuX2NhY2hlLmxlbmd0aDtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gYWJzdHJhY3QgX19pdGVyYXRlVW5jYWNoZWQoZm4sIHJldmVyc2UpXG5cdFxuXHQgICAgU2VxLnByb3RvdHlwZS5fX2l0ZXJhdGUgPSBmdW5jdGlvbihmbiwgcmV2ZXJzZSkge1xuXHQgICAgICByZXR1cm4gc2VxSXRlcmF0ZSh0aGlzLCBmbiwgcmV2ZXJzZSwgdHJ1ZSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIGFic3RyYWN0IF9faXRlcmF0b3JVbmNhY2hlZCh0eXBlLCByZXZlcnNlKVxuXHRcblx0ICAgIFNlcS5wcm90b3R5cGUuX19pdGVyYXRvciA9IGZ1bmN0aW9uKHR5cGUsIHJldmVyc2UpIHtcblx0ICAgICAgcmV0dXJuIHNlcUl0ZXJhdG9yKHRoaXMsIHR5cGUsIHJldmVyc2UsIHRydWUpO1xuXHQgICAgfTtcblx0XG5cdFxuXHRcblx0ICBjcmVhdGVDbGFzcyhLZXllZFNlcSwgU2VxKTtcblx0ICAgIGZ1bmN0aW9uIEtleWVkU2VxKHZhbHVlKSB7XG5cdCAgICAgIHJldHVybiB2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkID9cblx0ICAgICAgICBlbXB0eVNlcXVlbmNlKCkudG9LZXllZFNlcSgpIDpcblx0ICAgICAgICBpc0l0ZXJhYmxlKHZhbHVlKSA/XG5cdCAgICAgICAgICAoaXNLZXllZCh2YWx1ZSkgPyB2YWx1ZS50b1NlcSgpIDogdmFsdWUuZnJvbUVudHJ5U2VxKCkpIDpcblx0ICAgICAgICAgIGtleWVkU2VxRnJvbVZhbHVlKHZhbHVlKTtcblx0ICAgIH1cblx0XG5cdCAgICBLZXllZFNlcS5wcm90b3R5cGUudG9LZXllZFNlcSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH07XG5cdFxuXHRcblx0XG5cdCAgY3JlYXRlQ2xhc3MoSW5kZXhlZFNlcSwgU2VxKTtcblx0ICAgIGZ1bmN0aW9uIEluZGV4ZWRTZXEodmFsdWUpIHtcblx0ICAgICAgcmV0dXJuIHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQgPyBlbXB0eVNlcXVlbmNlKCkgOlxuXHQgICAgICAgICFpc0l0ZXJhYmxlKHZhbHVlKSA/IGluZGV4ZWRTZXFGcm9tVmFsdWUodmFsdWUpIDpcblx0ICAgICAgICBpc0tleWVkKHZhbHVlKSA/IHZhbHVlLmVudHJ5U2VxKCkgOiB2YWx1ZS50b0luZGV4ZWRTZXEoKTtcblx0ICAgIH1cblx0XG5cdCAgICBJbmRleGVkU2VxLm9mID0gZnVuY3Rpb24oLyouLi52YWx1ZXMqLykge1xuXHQgICAgICByZXR1cm4gSW5kZXhlZFNlcShhcmd1bWVudHMpO1xuXHQgICAgfTtcblx0XG5cdCAgICBJbmRleGVkU2VxLnByb3RvdHlwZS50b0luZGV4ZWRTZXEgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9O1xuXHRcblx0ICAgIEluZGV4ZWRTZXEucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLl9fdG9TdHJpbmcoJ1NlcSBbJywgJ10nKTtcblx0ICAgIH07XG5cdFxuXHQgICAgSW5kZXhlZFNlcS5wcm90b3R5cGUuX19pdGVyYXRlID0gZnVuY3Rpb24oZm4sIHJldmVyc2UpIHtcblx0ICAgICAgcmV0dXJuIHNlcUl0ZXJhdGUodGhpcywgZm4sIHJldmVyc2UsIGZhbHNlKTtcblx0ICAgIH07XG5cdFxuXHQgICAgSW5kZXhlZFNlcS5wcm90b3R5cGUuX19pdGVyYXRvciA9IGZ1bmN0aW9uKHR5cGUsIHJldmVyc2UpIHtcblx0ICAgICAgcmV0dXJuIHNlcUl0ZXJhdG9yKHRoaXMsIHR5cGUsIHJldmVyc2UsIGZhbHNlKTtcblx0ICAgIH07XG5cdFxuXHRcblx0XG5cdCAgY3JlYXRlQ2xhc3MoU2V0U2VxLCBTZXEpO1xuXHQgICAgZnVuY3Rpb24gU2V0U2VxKHZhbHVlKSB7XG5cdCAgICAgIHJldHVybiAoXG5cdCAgICAgICAgdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCA/IGVtcHR5U2VxdWVuY2UoKSA6XG5cdCAgICAgICAgIWlzSXRlcmFibGUodmFsdWUpID8gaW5kZXhlZFNlcUZyb21WYWx1ZSh2YWx1ZSkgOlxuXHQgICAgICAgIGlzS2V5ZWQodmFsdWUpID8gdmFsdWUuZW50cnlTZXEoKSA6IHZhbHVlXG5cdCAgICAgICkudG9TZXRTZXEoKTtcblx0ICAgIH1cblx0XG5cdCAgICBTZXRTZXEub2YgPSBmdW5jdGlvbigvKi4uLnZhbHVlcyovKSB7XG5cdCAgICAgIHJldHVybiBTZXRTZXEoYXJndW1lbnRzKTtcblx0ICAgIH07XG5cdFxuXHQgICAgU2V0U2VxLnByb3RvdHlwZS50b1NldFNlcSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH07XG5cdFxuXHRcblx0XG5cdCAgU2VxLmlzU2VxID0gaXNTZXE7XG5cdCAgU2VxLktleWVkID0gS2V5ZWRTZXE7XG5cdCAgU2VxLlNldCA9IFNldFNlcTtcblx0ICBTZXEuSW5kZXhlZCA9IEluZGV4ZWRTZXE7XG5cdFxuXHQgIHZhciBJU19TRVFfU0VOVElORUwgPSAnQEBfX0lNTVVUQUJMRV9TRVFfX0BAJztcblx0XG5cdCAgU2VxLnByb3RvdHlwZVtJU19TRVFfU0VOVElORUxdID0gdHJ1ZTtcblx0XG5cdFxuXHRcblx0ICBjcmVhdGVDbGFzcyhBcnJheVNlcSwgSW5kZXhlZFNlcSk7XG5cdCAgICBmdW5jdGlvbiBBcnJheVNlcShhcnJheSkge1xuXHQgICAgICB0aGlzLl9hcnJheSA9IGFycmF5O1xuXHQgICAgICB0aGlzLnNpemUgPSBhcnJheS5sZW5ndGg7XG5cdCAgICB9XG5cdFxuXHQgICAgQXJyYXlTZXEucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKGluZGV4LCBub3RTZXRWYWx1ZSkge1xuXHQgICAgICByZXR1cm4gdGhpcy5oYXMoaW5kZXgpID8gdGhpcy5fYXJyYXlbd3JhcEluZGV4KHRoaXMsIGluZGV4KV0gOiBub3RTZXRWYWx1ZTtcblx0ICAgIH07XG5cdFxuXHQgICAgQXJyYXlTZXEucHJvdG90eXBlLl9faXRlcmF0ZSA9IGZ1bmN0aW9uKGZuLCByZXZlcnNlKSB7XG5cdCAgICAgIHZhciBhcnJheSA9IHRoaXMuX2FycmF5O1xuXHQgICAgICB2YXIgbWF4SW5kZXggPSBhcnJheS5sZW5ndGggLSAxO1xuXHQgICAgICBmb3IgKHZhciBpaSA9IDA7IGlpIDw9IG1heEluZGV4OyBpaSsrKSB7XG5cdCAgICAgICAgaWYgKGZuKGFycmF5W3JldmVyc2UgPyBtYXhJbmRleCAtIGlpIDogaWldLCBpaSwgdGhpcykgPT09IGZhbHNlKSB7XG5cdCAgICAgICAgICByZXR1cm4gaWkgKyAxO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gaWk7XG5cdCAgICB9O1xuXHRcblx0ICAgIEFycmF5U2VxLnByb3RvdHlwZS5fX2l0ZXJhdG9yID0gZnVuY3Rpb24odHlwZSwgcmV2ZXJzZSkge1xuXHQgICAgICB2YXIgYXJyYXkgPSB0aGlzLl9hcnJheTtcblx0ICAgICAgdmFyIG1heEluZGV4ID0gYXJyYXkubGVuZ3RoIC0gMTtcblx0ICAgICAgdmFyIGlpID0gMDtcblx0ICAgICAgcmV0dXJuIG5ldyBJdGVyYXRvcihmdW5jdGlvbigpIFxuXHQgICAgICAgIHtyZXR1cm4gaWkgPiBtYXhJbmRleCA/XG5cdCAgICAgICAgICBpdGVyYXRvckRvbmUoKSA6XG5cdCAgICAgICAgICBpdGVyYXRvclZhbHVlKHR5cGUsIGlpLCBhcnJheVtyZXZlcnNlID8gbWF4SW5kZXggLSBpaSsrIDogaWkrK10pfVxuXHQgICAgICApO1xuXHQgICAgfTtcblx0XG5cdFxuXHRcblx0ICBjcmVhdGVDbGFzcyhPYmplY3RTZXEsIEtleWVkU2VxKTtcblx0ICAgIGZ1bmN0aW9uIE9iamVjdFNlcShvYmplY3QpIHtcblx0ICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpO1xuXHQgICAgICB0aGlzLl9vYmplY3QgPSBvYmplY3Q7XG5cdCAgICAgIHRoaXMuX2tleXMgPSBrZXlzO1xuXHQgICAgICB0aGlzLnNpemUgPSBrZXlzLmxlbmd0aDtcblx0ICAgIH1cblx0XG5cdCAgICBPYmplY3RTZXEucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKGtleSwgbm90U2V0VmFsdWUpIHtcblx0ICAgICAgaWYgKG5vdFNldFZhbHVlICE9PSB1bmRlZmluZWQgJiYgIXRoaXMuaGFzKGtleSkpIHtcblx0ICAgICAgICByZXR1cm4gbm90U2V0VmFsdWU7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHRoaXMuX29iamVjdFtrZXldO1xuXHQgICAgfTtcblx0XG5cdCAgICBPYmplY3RTZXEucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uKGtleSkge1xuXHQgICAgICByZXR1cm4gdGhpcy5fb2JqZWN0Lmhhc093blByb3BlcnR5KGtleSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIE9iamVjdFNlcS5wcm90b3R5cGUuX19pdGVyYXRlID0gZnVuY3Rpb24oZm4sIHJldmVyc2UpIHtcblx0ICAgICAgdmFyIG9iamVjdCA9IHRoaXMuX29iamVjdDtcblx0ICAgICAgdmFyIGtleXMgPSB0aGlzLl9rZXlzO1xuXHQgICAgICB2YXIgbWF4SW5kZXggPSBrZXlzLmxlbmd0aCAtIDE7XG5cdCAgICAgIGZvciAodmFyIGlpID0gMDsgaWkgPD0gbWF4SW5kZXg7IGlpKyspIHtcblx0ICAgICAgICB2YXIga2V5ID0ga2V5c1tyZXZlcnNlID8gbWF4SW5kZXggLSBpaSA6IGlpXTtcblx0ICAgICAgICBpZiAoZm4ob2JqZWN0W2tleV0sIGtleSwgdGhpcykgPT09IGZhbHNlKSB7XG5cdCAgICAgICAgICByZXR1cm4gaWkgKyAxO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gaWk7XG5cdCAgICB9O1xuXHRcblx0ICAgIE9iamVjdFNlcS5wcm90b3R5cGUuX19pdGVyYXRvciA9IGZ1bmN0aW9uKHR5cGUsIHJldmVyc2UpIHtcblx0ICAgICAgdmFyIG9iamVjdCA9IHRoaXMuX29iamVjdDtcblx0ICAgICAgdmFyIGtleXMgPSB0aGlzLl9rZXlzO1xuXHQgICAgICB2YXIgbWF4SW5kZXggPSBrZXlzLmxlbmd0aCAtIDE7XG5cdCAgICAgIHZhciBpaSA9IDA7XG5cdCAgICAgIHJldHVybiBuZXcgSXRlcmF0b3IoZnVuY3Rpb24oKSAge1xuXHQgICAgICAgIHZhciBrZXkgPSBrZXlzW3JldmVyc2UgPyBtYXhJbmRleCAtIGlpIDogaWldO1xuXHQgICAgICAgIHJldHVybiBpaSsrID4gbWF4SW5kZXggP1xuXHQgICAgICAgICAgaXRlcmF0b3JEb25lKCkgOlxuXHQgICAgICAgICAgaXRlcmF0b3JWYWx1ZSh0eXBlLCBrZXksIG9iamVjdFtrZXldKTtcblx0ICAgICAgfSk7XG5cdCAgICB9O1xuXHRcblx0ICBPYmplY3RTZXEucHJvdG90eXBlW0lTX09SREVSRURfU0VOVElORUxdID0gdHJ1ZTtcblx0XG5cdFxuXHQgIGNyZWF0ZUNsYXNzKEl0ZXJhYmxlU2VxLCBJbmRleGVkU2VxKTtcblx0ICAgIGZ1bmN0aW9uIEl0ZXJhYmxlU2VxKGl0ZXJhYmxlKSB7XG5cdCAgICAgIHRoaXMuX2l0ZXJhYmxlID0gaXRlcmFibGU7XG5cdCAgICAgIHRoaXMuc2l6ZSA9IGl0ZXJhYmxlLmxlbmd0aCB8fCBpdGVyYWJsZS5zaXplO1xuXHQgICAgfVxuXHRcblx0ICAgIEl0ZXJhYmxlU2VxLnByb3RvdHlwZS5fX2l0ZXJhdGVVbmNhY2hlZCA9IGZ1bmN0aW9uKGZuLCByZXZlcnNlKSB7XG5cdCAgICAgIGlmIChyZXZlcnNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGVSZXN1bHQoKS5fX2l0ZXJhdGUoZm4sIHJldmVyc2UpO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBpdGVyYWJsZSA9IHRoaXMuX2l0ZXJhYmxlO1xuXHQgICAgICB2YXIgaXRlcmF0b3IgPSBnZXRJdGVyYXRvcihpdGVyYWJsZSk7XG5cdCAgICAgIHZhciBpdGVyYXRpb25zID0gMDtcblx0ICAgICAgaWYgKGlzSXRlcmF0b3IoaXRlcmF0b3IpKSB7XG5cdCAgICAgICAgdmFyIHN0ZXA7XG5cdCAgICAgICAgd2hpbGUgKCEoc3RlcCA9IGl0ZXJhdG9yLm5leHQoKSkuZG9uZSkge1xuXHQgICAgICAgICAgaWYgKGZuKHN0ZXAudmFsdWUsIGl0ZXJhdGlvbnMrKywgdGhpcykgPT09IGZhbHNlKSB7XG5cdCAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gaXRlcmF0aW9ucztcblx0ICAgIH07XG5cdFxuXHQgICAgSXRlcmFibGVTZXEucHJvdG90eXBlLl9faXRlcmF0b3JVbmNhY2hlZCA9IGZ1bmN0aW9uKHR5cGUsIHJldmVyc2UpIHtcblx0ICAgICAgaWYgKHJldmVyc2UpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5jYWNoZVJlc3VsdCgpLl9faXRlcmF0b3IodHlwZSwgcmV2ZXJzZSk7XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIGl0ZXJhYmxlID0gdGhpcy5faXRlcmFibGU7XG5cdCAgICAgIHZhciBpdGVyYXRvciA9IGdldEl0ZXJhdG9yKGl0ZXJhYmxlKTtcblx0ICAgICAgaWYgKCFpc0l0ZXJhdG9yKGl0ZXJhdG9yKSkge1xuXHQgICAgICAgIHJldHVybiBuZXcgSXRlcmF0b3IoaXRlcmF0b3JEb25lKTtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgaXRlcmF0aW9ucyA9IDA7XG5cdCAgICAgIHJldHVybiBuZXcgSXRlcmF0b3IoZnVuY3Rpb24oKSAge1xuXHQgICAgICAgIHZhciBzdGVwID0gaXRlcmF0b3IubmV4dCgpO1xuXHQgICAgICAgIHJldHVybiBzdGVwLmRvbmUgPyBzdGVwIDogaXRlcmF0b3JWYWx1ZSh0eXBlLCBpdGVyYXRpb25zKyssIHN0ZXAudmFsdWUpO1xuXHQgICAgICB9KTtcblx0ICAgIH07XG5cdFxuXHRcblx0XG5cdCAgY3JlYXRlQ2xhc3MoSXRlcmF0b3JTZXEsIEluZGV4ZWRTZXEpO1xuXHQgICAgZnVuY3Rpb24gSXRlcmF0b3JTZXEoaXRlcmF0b3IpIHtcblx0ICAgICAgdGhpcy5faXRlcmF0b3IgPSBpdGVyYXRvcjtcblx0ICAgICAgdGhpcy5faXRlcmF0b3JDYWNoZSA9IFtdO1xuXHQgICAgfVxuXHRcblx0ICAgIEl0ZXJhdG9yU2VxLnByb3RvdHlwZS5fX2l0ZXJhdGVVbmNhY2hlZCA9IGZ1bmN0aW9uKGZuLCByZXZlcnNlKSB7XG5cdCAgICAgIGlmIChyZXZlcnNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGVSZXN1bHQoKS5fX2l0ZXJhdGUoZm4sIHJldmVyc2UpO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBpdGVyYXRvciA9IHRoaXMuX2l0ZXJhdG9yO1xuXHQgICAgICB2YXIgY2FjaGUgPSB0aGlzLl9pdGVyYXRvckNhY2hlO1xuXHQgICAgICB2YXIgaXRlcmF0aW9ucyA9IDA7XG5cdCAgICAgIHdoaWxlIChpdGVyYXRpb25zIDwgY2FjaGUubGVuZ3RoKSB7XG5cdCAgICAgICAgaWYgKGZuKGNhY2hlW2l0ZXJhdGlvbnNdLCBpdGVyYXRpb25zKyssIHRoaXMpID09PSBmYWxzZSkge1xuXHQgICAgICAgICAgcmV0dXJuIGl0ZXJhdGlvbnM7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHZhciBzdGVwO1xuXHQgICAgICB3aGlsZSAoIShzdGVwID0gaXRlcmF0b3IubmV4dCgpKS5kb25lKSB7XG5cdCAgICAgICAgdmFyIHZhbCA9IHN0ZXAudmFsdWU7XG5cdCAgICAgICAgY2FjaGVbaXRlcmF0aW9uc10gPSB2YWw7XG5cdCAgICAgICAgaWYgKGZuKHZhbCwgaXRlcmF0aW9ucysrLCB0aGlzKSA9PT0gZmFsc2UpIHtcblx0ICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gaXRlcmF0aW9ucztcblx0ICAgIH07XG5cdFxuXHQgICAgSXRlcmF0b3JTZXEucHJvdG90eXBlLl9faXRlcmF0b3JVbmNhY2hlZCA9IGZ1bmN0aW9uKHR5cGUsIHJldmVyc2UpIHtcblx0ICAgICAgaWYgKHJldmVyc2UpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5jYWNoZVJlc3VsdCgpLl9faXRlcmF0b3IodHlwZSwgcmV2ZXJzZSk7XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIGl0ZXJhdG9yID0gdGhpcy5faXRlcmF0b3I7XG5cdCAgICAgIHZhciBjYWNoZSA9IHRoaXMuX2l0ZXJhdG9yQ2FjaGU7XG5cdCAgICAgIHZhciBpdGVyYXRpb25zID0gMDtcblx0ICAgICAgcmV0dXJuIG5ldyBJdGVyYXRvcihmdW5jdGlvbigpICB7XG5cdCAgICAgICAgaWYgKGl0ZXJhdGlvbnMgPj0gY2FjaGUubGVuZ3RoKSB7XG5cdCAgICAgICAgICB2YXIgc3RlcCA9IGl0ZXJhdG9yLm5leHQoKTtcblx0ICAgICAgICAgIGlmIChzdGVwLmRvbmUpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHN0ZXA7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBjYWNoZVtpdGVyYXRpb25zXSA9IHN0ZXAudmFsdWU7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiBpdGVyYXRvclZhbHVlKHR5cGUsIGl0ZXJhdGlvbnMsIGNhY2hlW2l0ZXJhdGlvbnMrK10pO1xuXHQgICAgICB9KTtcblx0ICAgIH07XG5cdFxuXHRcblx0XG5cdFxuXHQgIC8vICMgcHJhZ21hIEhlbHBlciBmdW5jdGlvbnNcblx0XG5cdCAgZnVuY3Rpb24gaXNTZXEobWF5YmVTZXEpIHtcblx0ICAgIHJldHVybiAhIShtYXliZVNlcSAmJiBtYXliZVNlcVtJU19TRVFfU0VOVElORUxdKTtcblx0ICB9XG5cdFxuXHQgIHZhciBFTVBUWV9TRVE7XG5cdFxuXHQgIGZ1bmN0aW9uIGVtcHR5U2VxdWVuY2UoKSB7XG5cdCAgICByZXR1cm4gRU1QVFlfU0VRIHx8IChFTVBUWV9TRVEgPSBuZXcgQXJyYXlTZXEoW10pKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGtleWVkU2VxRnJvbVZhbHVlKHZhbHVlKSB7XG5cdCAgICB2YXIgc2VxID1cblx0ICAgICAgQXJyYXkuaXNBcnJheSh2YWx1ZSkgPyBuZXcgQXJyYXlTZXEodmFsdWUpLmZyb21FbnRyeVNlcSgpIDpcblx0ICAgICAgaXNJdGVyYXRvcih2YWx1ZSkgPyBuZXcgSXRlcmF0b3JTZXEodmFsdWUpLmZyb21FbnRyeVNlcSgpIDpcblx0ICAgICAgaGFzSXRlcmF0b3IodmFsdWUpID8gbmV3IEl0ZXJhYmxlU2VxKHZhbHVlKS5mcm9tRW50cnlTZXEoKSA6XG5cdCAgICAgIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgPyBuZXcgT2JqZWN0U2VxKHZhbHVlKSA6XG5cdCAgICAgIHVuZGVmaW5lZDtcblx0ICAgIGlmICghc2VxKSB7XG5cdCAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG5cdCAgICAgICAgJ0V4cGVjdGVkIEFycmF5IG9yIGl0ZXJhYmxlIG9iamVjdCBvZiBbaywgdl0gZW50cmllcywgJytcblx0ICAgICAgICAnb3Iga2V5ZWQgb2JqZWN0OiAnICsgdmFsdWVcblx0ICAgICAgKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBzZXE7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBpbmRleGVkU2VxRnJvbVZhbHVlKHZhbHVlKSB7XG5cdCAgICB2YXIgc2VxID0gbWF5YmVJbmRleGVkU2VxRnJvbVZhbHVlKHZhbHVlKTtcblx0ICAgIGlmICghc2VxKSB7XG5cdCAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG5cdCAgICAgICAgJ0V4cGVjdGVkIEFycmF5IG9yIGl0ZXJhYmxlIG9iamVjdCBvZiB2YWx1ZXM6ICcgKyB2YWx1ZVxuXHQgICAgICApO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHNlcTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHNlcUZyb21WYWx1ZSh2YWx1ZSkge1xuXHQgICAgdmFyIHNlcSA9IG1heWJlSW5kZXhlZFNlcUZyb21WYWx1ZSh2YWx1ZSkgfHxcblx0ICAgICAgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgbmV3IE9iamVjdFNlcSh2YWx1ZSkpO1xuXHQgICAgaWYgKCFzZXEpIHtcblx0ICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcblx0ICAgICAgICAnRXhwZWN0ZWQgQXJyYXkgb3IgaXRlcmFibGUgb2JqZWN0IG9mIHZhbHVlcywgb3Iga2V5ZWQgb2JqZWN0OiAnICsgdmFsdWVcblx0ICAgICAgKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBzZXE7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBtYXliZUluZGV4ZWRTZXFGcm9tVmFsdWUodmFsdWUpIHtcblx0ICAgIHJldHVybiAoXG5cdCAgICAgIGlzQXJyYXlMaWtlKHZhbHVlKSA/IG5ldyBBcnJheVNlcSh2YWx1ZSkgOlxuXHQgICAgICBpc0l0ZXJhdG9yKHZhbHVlKSA/IG5ldyBJdGVyYXRvclNlcSh2YWx1ZSkgOlxuXHQgICAgICBoYXNJdGVyYXRvcih2YWx1ZSkgPyBuZXcgSXRlcmFibGVTZXEodmFsdWUpIDpcblx0ICAgICAgdW5kZWZpbmVkXG5cdCAgICApO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gc2VxSXRlcmF0ZShzZXEsIGZuLCByZXZlcnNlLCB1c2VLZXlzKSB7XG5cdCAgICB2YXIgY2FjaGUgPSBzZXEuX2NhY2hlO1xuXHQgICAgaWYgKGNhY2hlKSB7XG5cdCAgICAgIHZhciBtYXhJbmRleCA9IGNhY2hlLmxlbmd0aCAtIDE7XG5cdCAgICAgIGZvciAodmFyIGlpID0gMDsgaWkgPD0gbWF4SW5kZXg7IGlpKyspIHtcblx0ICAgICAgICB2YXIgZW50cnkgPSBjYWNoZVtyZXZlcnNlID8gbWF4SW5kZXggLSBpaSA6IGlpXTtcblx0ICAgICAgICBpZiAoZm4oZW50cnlbMV0sIHVzZUtleXMgPyBlbnRyeVswXSA6IGlpLCBzZXEpID09PSBmYWxzZSkge1xuXHQgICAgICAgICAgcmV0dXJuIGlpICsgMTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGlpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHNlcS5fX2l0ZXJhdGVVbmNhY2hlZChmbiwgcmV2ZXJzZSk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBzZXFJdGVyYXRvcihzZXEsIHR5cGUsIHJldmVyc2UsIHVzZUtleXMpIHtcblx0ICAgIHZhciBjYWNoZSA9IHNlcS5fY2FjaGU7XG5cdCAgICBpZiAoY2FjaGUpIHtcblx0ICAgICAgdmFyIG1heEluZGV4ID0gY2FjaGUubGVuZ3RoIC0gMTtcblx0ICAgICAgdmFyIGlpID0gMDtcblx0ICAgICAgcmV0dXJuIG5ldyBJdGVyYXRvcihmdW5jdGlvbigpICB7XG5cdCAgICAgICAgdmFyIGVudHJ5ID0gY2FjaGVbcmV2ZXJzZSA/IG1heEluZGV4IC0gaWkgOiBpaV07XG5cdCAgICAgICAgcmV0dXJuIGlpKysgPiBtYXhJbmRleCA/XG5cdCAgICAgICAgICBpdGVyYXRvckRvbmUoKSA6XG5cdCAgICAgICAgICBpdGVyYXRvclZhbHVlKHR5cGUsIHVzZUtleXMgPyBlbnRyeVswXSA6IGlpIC0gMSwgZW50cnlbMV0pO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBzZXEuX19pdGVyYXRvclVuY2FjaGVkKHR5cGUsIHJldmVyc2UpO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gZnJvbUpTKGpzb24sIGNvbnZlcnRlcikge1xuXHQgICAgcmV0dXJuIGNvbnZlcnRlciA/XG5cdCAgICAgIGZyb21KU1dpdGgoY29udmVydGVyLCBqc29uLCAnJywgeycnOiBqc29ufSkgOlxuXHQgICAgICBmcm9tSlNEZWZhdWx0KGpzb24pO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gZnJvbUpTV2l0aChjb252ZXJ0ZXIsIGpzb24sIGtleSwgcGFyZW50SlNPTikge1xuXHQgICAgaWYgKEFycmF5LmlzQXJyYXkoanNvbikpIHtcblx0ICAgICAgcmV0dXJuIGNvbnZlcnRlci5jYWxsKHBhcmVudEpTT04sIGtleSwgSW5kZXhlZFNlcShqc29uKS5tYXAoZnVuY3Rpb24odiwgaykgIHtyZXR1cm4gZnJvbUpTV2l0aChjb252ZXJ0ZXIsIHYsIGssIGpzb24pfSkpO1xuXHQgICAgfVxuXHQgICAgaWYgKGlzUGxhaW5PYmooanNvbikpIHtcblx0ICAgICAgcmV0dXJuIGNvbnZlcnRlci5jYWxsKHBhcmVudEpTT04sIGtleSwgS2V5ZWRTZXEoanNvbikubWFwKGZ1bmN0aW9uKHYsIGspICB7cmV0dXJuIGZyb21KU1dpdGgoY29udmVydGVyLCB2LCBrLCBqc29uKX0pKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBqc29uO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gZnJvbUpTRGVmYXVsdChqc29uKSB7XG5cdCAgICBpZiAoQXJyYXkuaXNBcnJheShqc29uKSkge1xuXHQgICAgICByZXR1cm4gSW5kZXhlZFNlcShqc29uKS5tYXAoZnJvbUpTRGVmYXVsdCkudG9MaXN0KCk7XG5cdCAgICB9XG5cdCAgICBpZiAoaXNQbGFpbk9iaihqc29uKSkge1xuXHQgICAgICByZXR1cm4gS2V5ZWRTZXEoanNvbikubWFwKGZyb21KU0RlZmF1bHQpLnRvTWFwKCk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4ganNvbjtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGlzUGxhaW5PYmoodmFsdWUpIHtcblx0ICAgIHJldHVybiB2YWx1ZSAmJiAodmFsdWUuY29uc3RydWN0b3IgPT09IE9iamVjdCB8fCB2YWx1ZS5jb25zdHJ1Y3RvciA9PT0gdW5kZWZpbmVkKTtcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIEFuIGV4dGVuc2lvbiBvZiB0aGUgXCJzYW1lLXZhbHVlXCIgYWxnb3JpdGhtIGFzIFtkZXNjcmliZWQgZm9yIHVzZSBieSBFUzYgTWFwXG5cdCAgICogYW5kIFNldF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvTWFwI0tleV9lcXVhbGl0eSlcblx0ICAgKlxuXHQgICAqIE5hTiBpcyBjb25zaWRlcmVkIHRoZSBzYW1lIGFzIE5hTiwgaG93ZXZlciAtMCBhbmQgMCBhcmUgY29uc2lkZXJlZCB0aGUgc2FtZVxuXHQgICAqIHZhbHVlLCB3aGljaCBpcyBkaWZmZXJlbnQgZnJvbSB0aGUgYWxnb3JpdGhtIGRlc2NyaWJlZCBieVxuXHQgICAqIFtgT2JqZWN0LmlzYF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2lzKS5cblx0ICAgKlxuXHQgICAqIFRoaXMgaXMgZXh0ZW5kZWQgZnVydGhlciB0byBhbGxvdyBPYmplY3RzIHRvIGRlc2NyaWJlIHRoZSB2YWx1ZXMgdGhleVxuXHQgICAqIHJlcHJlc2VudCwgYnkgd2F5IG9mIGB2YWx1ZU9mYCBvciBgZXF1YWxzYCAoYW5kIGBoYXNoQ29kZWApLlxuXHQgICAqXG5cdCAgICogTm90ZTogYmVjYXVzZSBvZiB0aGlzIGV4dGVuc2lvbiwgdGhlIGtleSBlcXVhbGl0eSBvZiBJbW11dGFibGUuTWFwIGFuZCB0aGVcblx0ICAgKiB2YWx1ZSBlcXVhbGl0eSBvZiBJbW11dGFibGUuU2V0IHdpbGwgZGlmZmVyIGZyb20gRVM2IE1hcCBhbmQgU2V0LlxuXHQgICAqXG5cdCAgICogIyMjIERlZmluaW5nIGN1c3RvbSB2YWx1ZXNcblx0ICAgKlxuXHQgICAqIFRoZSBlYXNpZXN0IHdheSB0byBkZXNjcmliZSB0aGUgdmFsdWUgYW4gb2JqZWN0IHJlcHJlc2VudHMgaXMgYnkgaW1wbGVtZW50aW5nXG5cdCAgICogYHZhbHVlT2ZgLiBGb3IgZXhhbXBsZSwgYERhdGVgIHJlcHJlc2VudHMgYSB2YWx1ZSBieSByZXR1cm5pbmcgYSB1bml4XG5cdCAgICogdGltZXN0YW1wIGZvciBgdmFsdWVPZmA6XG5cdCAgICpcblx0ICAgKiAgICAgdmFyIGRhdGUxID0gbmV3IERhdGUoMTIzNDU2Nzg5MDAwMCk7IC8vIEZyaSBGZWIgMTMgMjAwOSAuLi5cblx0ICAgKiAgICAgdmFyIGRhdGUyID0gbmV3IERhdGUoMTIzNDU2Nzg5MDAwMCk7XG5cdCAgICogICAgIGRhdGUxLnZhbHVlT2YoKTsgLy8gMTIzNDU2Nzg5MDAwMFxuXHQgICAqICAgICBhc3NlcnQoIGRhdGUxICE9PSBkYXRlMiApO1xuXHQgICAqICAgICBhc3NlcnQoIEltbXV0YWJsZS5pcyggZGF0ZTEsIGRhdGUyICkgKTtcblx0ICAgKlxuXHQgICAqIE5vdGU6IG92ZXJyaWRpbmcgYHZhbHVlT2ZgIG1heSBoYXZlIG90aGVyIGltcGxpY2F0aW9ucyBpZiB5b3UgdXNlIHRoaXMgb2JqZWN0XG5cdCAgICogd2hlcmUgSmF2YVNjcmlwdCBleHBlY3RzIGEgcHJpbWl0aXZlLCBzdWNoIGFzIGltcGxpY2l0IHN0cmluZyBjb2VyY2lvbi5cblx0ICAgKlxuXHQgICAqIEZvciBtb3JlIGNvbXBsZXggdHlwZXMsIGVzcGVjaWFsbHkgY29sbGVjdGlvbnMsIGltcGxlbWVudGluZyBgdmFsdWVPZmAgbWF5XG5cdCAgICogbm90IGJlIHBlcmZvcm1hbnQuIEFuIGFsdGVybmF0aXZlIGlzIHRvIGltcGxlbWVudCBgZXF1YWxzYCBhbmQgYGhhc2hDb2RlYC5cblx0ICAgKlxuXHQgICAqIGBlcXVhbHNgIHRha2VzIGFub3RoZXIgb2JqZWN0LCBwcmVzdW1hYmx5IG9mIHNpbWlsYXIgdHlwZSwgYW5kIHJldHVybnMgdHJ1ZVxuXHQgICAqIGlmIHRoZSBpdCBpcyBlcXVhbC4gRXF1YWxpdHkgaXMgc3ltbWV0cmljYWwsIHNvIHRoZSBzYW1lIHJlc3VsdCBzaG91bGQgYmVcblx0ICAgKiByZXR1cm5lZCBpZiB0aGlzIGFuZCB0aGUgYXJndW1lbnQgYXJlIGZsaXBwZWQuXG5cdCAgICpcblx0ICAgKiAgICAgYXNzZXJ0KCBhLmVxdWFscyhiKSA9PT0gYi5lcXVhbHMoYSkgKTtcblx0ICAgKlxuXHQgICAqIGBoYXNoQ29kZWAgcmV0dXJucyBhIDMyYml0IGludGVnZXIgbnVtYmVyIHJlcHJlc2VudGluZyB0aGUgb2JqZWN0IHdoaWNoIHdpbGxcblx0ICAgKiBiZSB1c2VkIHRvIGRldGVybWluZSBob3cgdG8gc3RvcmUgdGhlIHZhbHVlIG9iamVjdCBpbiBhIE1hcCBvciBTZXQuIFlvdSBtdXN0XG5cdCAgICogcHJvdmlkZSBib3RoIG9yIG5laXRoZXIgbWV0aG9kcywgb25lIG11c3Qgbm90IGV4aXN0IHdpdGhvdXQgdGhlIG90aGVyLlxuXHQgICAqXG5cdCAgICogQWxzbywgYW4gaW1wb3J0YW50IHJlbGF0aW9uc2hpcCBiZXR3ZWVuIHRoZXNlIG1ldGhvZHMgbXVzdCBiZSB1cGhlbGQ6IGlmIHR3b1xuXHQgICAqIHZhbHVlcyBhcmUgZXF1YWwsIHRoZXkgKm11c3QqIHJldHVybiB0aGUgc2FtZSBoYXNoQ29kZS4gSWYgdGhlIHZhbHVlcyBhcmUgbm90XG5cdCAgICogZXF1YWwsIHRoZXkgbWlnaHQgaGF2ZSB0aGUgc2FtZSBoYXNoQ29kZTsgdGhpcyBpcyBjYWxsZWQgYSBoYXNoIGNvbGxpc2lvbixcblx0ICAgKiBhbmQgd2hpbGUgdW5kZXNpcmFibGUgZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMsIGl0IGlzIGFjY2VwdGFibGUuXG5cdCAgICpcblx0ICAgKiAgICAgaWYgKGEuZXF1YWxzKGIpKSB7XG5cdCAgICogICAgICAgYXNzZXJ0KCBhLmhhc2hDb2RlKCkgPT09IGIuaGFzaENvZGUoKSApO1xuXHQgICAqICAgICB9XG5cdCAgICpcblx0ICAgKiBBbGwgSW1tdXRhYmxlIGNvbGxlY3Rpb25zIGltcGxlbWVudCBgZXF1YWxzYCBhbmQgYGhhc2hDb2RlYC5cblx0ICAgKlxuXHQgICAqL1xuXHQgIGZ1bmN0aW9uIGlzKHZhbHVlQSwgdmFsdWVCKSB7XG5cdCAgICBpZiAodmFsdWVBID09PSB2YWx1ZUIgfHwgKHZhbHVlQSAhPT0gdmFsdWVBICYmIHZhbHVlQiAhPT0gdmFsdWVCKSkge1xuXHQgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgIH1cblx0ICAgIGlmICghdmFsdWVBIHx8ICF2YWx1ZUIpIHtcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHQgICAgaWYgKHR5cGVvZiB2YWx1ZUEudmFsdWVPZiA9PT0gJ2Z1bmN0aW9uJyAmJlxuXHQgICAgICAgIHR5cGVvZiB2YWx1ZUIudmFsdWVPZiA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICB2YWx1ZUEgPSB2YWx1ZUEudmFsdWVPZigpO1xuXHQgICAgICB2YWx1ZUIgPSB2YWx1ZUIudmFsdWVPZigpO1xuXHQgICAgICBpZiAodmFsdWVBID09PSB2YWx1ZUIgfHwgKHZhbHVlQSAhPT0gdmFsdWVBICYmIHZhbHVlQiAhPT0gdmFsdWVCKSkge1xuXHQgICAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgICB9XG5cdCAgICAgIGlmICghdmFsdWVBIHx8ICF2YWx1ZUIpIHtcblx0ICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGlmICh0eXBlb2YgdmFsdWVBLmVxdWFscyA9PT0gJ2Z1bmN0aW9uJyAmJlxuXHQgICAgICAgIHR5cGVvZiB2YWx1ZUIuZXF1YWxzID09PSAnZnVuY3Rpb24nICYmXG5cdCAgICAgICAgdmFsdWVBLmVxdWFscyh2YWx1ZUIpKSB7XG5cdCAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gZGVlcEVxdWFsKGEsIGIpIHtcblx0ICAgIGlmIChhID09PSBiKSB7XG5cdCAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChcblx0ICAgICAgIWlzSXRlcmFibGUoYikgfHxcblx0ICAgICAgYS5zaXplICE9PSB1bmRlZmluZWQgJiYgYi5zaXplICE9PSB1bmRlZmluZWQgJiYgYS5zaXplICE9PSBiLnNpemUgfHxcblx0ICAgICAgYS5fX2hhc2ggIT09IHVuZGVmaW5lZCAmJiBiLl9faGFzaCAhPT0gdW5kZWZpbmVkICYmIGEuX19oYXNoICE9PSBiLl9faGFzaCB8fFxuXHQgICAgICBpc0tleWVkKGEpICE9PSBpc0tleWVkKGIpIHx8XG5cdCAgICAgIGlzSW5kZXhlZChhKSAhPT0gaXNJbmRleGVkKGIpIHx8XG5cdCAgICAgIGlzT3JkZXJlZChhKSAhPT0gaXNPcmRlcmVkKGIpXG5cdCAgICApIHtcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChhLnNpemUgPT09IDAgJiYgYi5zaXplID09PSAwKSB7XG5cdCAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBub3RBc3NvY2lhdGl2ZSA9ICFpc0Fzc29jaWF0aXZlKGEpO1xuXHRcblx0ICAgIGlmIChpc09yZGVyZWQoYSkpIHtcblx0ICAgICAgdmFyIGVudHJpZXMgPSBhLmVudHJpZXMoKTtcblx0ICAgICAgcmV0dXJuIGIuZXZlcnkoZnVuY3Rpb24odiwgaykgIHtcblx0ICAgICAgICB2YXIgZW50cnkgPSBlbnRyaWVzLm5leHQoKS52YWx1ZTtcblx0ICAgICAgICByZXR1cm4gZW50cnkgJiYgaXMoZW50cnlbMV0sIHYpICYmIChub3RBc3NvY2lhdGl2ZSB8fCBpcyhlbnRyeVswXSwgaykpO1xuXHQgICAgICB9KSAmJiBlbnRyaWVzLm5leHQoKS5kb25lO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBmbGlwcGVkID0gZmFsc2U7XG5cdFxuXHQgICAgaWYgKGEuc2l6ZSA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgIGlmIChiLnNpemUgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAgIGlmICh0eXBlb2YgYS5jYWNoZVJlc3VsdCA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgYS5jYWNoZVJlc3VsdCgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBmbGlwcGVkID0gdHJ1ZTtcblx0ICAgICAgICB2YXIgXyA9IGE7XG5cdCAgICAgICAgYSA9IGI7XG5cdCAgICAgICAgYiA9IF87XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICB2YXIgYWxsRXF1YWwgPSB0cnVlO1xuXHQgICAgdmFyIGJTaXplID0gYi5fX2l0ZXJhdGUoZnVuY3Rpb24odiwgaykgIHtcblx0ICAgICAgaWYgKG5vdEFzc29jaWF0aXZlID8gIWEuaGFzKHYpIDpcblx0ICAgICAgICAgIGZsaXBwZWQgPyAhaXModiwgYS5nZXQoaywgTk9UX1NFVCkpIDogIWlzKGEuZ2V0KGssIE5PVF9TRVQpLCB2KSkge1xuXHQgICAgICAgIGFsbEVxdWFsID0gZmFsc2U7XG5cdCAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0XG5cdCAgICByZXR1cm4gYWxsRXF1YWwgJiYgYS5zaXplID09PSBiU2l6ZTtcblx0ICB9XG5cdFxuXHQgIGNyZWF0ZUNsYXNzKFJlcGVhdCwgSW5kZXhlZFNlcSk7XG5cdFxuXHQgICAgZnVuY3Rpb24gUmVwZWF0KHZhbHVlLCB0aW1lcykge1xuXHQgICAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUmVwZWF0KSkge1xuXHQgICAgICAgIHJldHVybiBuZXcgUmVwZWF0KHZhbHVlLCB0aW1lcyk7XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5fdmFsdWUgPSB2YWx1ZTtcblx0ICAgICAgdGhpcy5zaXplID0gdGltZXMgPT09IHVuZGVmaW5lZCA/IEluZmluaXR5IDogTWF0aC5tYXgoMCwgdGltZXMpO1xuXHQgICAgICBpZiAodGhpcy5zaXplID09PSAwKSB7XG5cdCAgICAgICAgaWYgKEVNUFRZX1JFUEVBVCkge1xuXHQgICAgICAgICAgcmV0dXJuIEVNUFRZX1JFUEVBVDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgRU1QVFlfUkVQRUFUID0gdGhpcztcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIFJlcGVhdC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgaWYgKHRoaXMuc2l6ZSA9PT0gMCkge1xuXHQgICAgICAgIHJldHVybiAnUmVwZWF0IFtdJztcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gJ1JlcGVhdCBbICcgKyB0aGlzLl92YWx1ZSArICcgJyArIHRoaXMuc2l6ZSArICcgdGltZXMgXSc7XG5cdCAgICB9O1xuXHRcblx0ICAgIFJlcGVhdC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24oaW5kZXgsIG5vdFNldFZhbHVlKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLmhhcyhpbmRleCkgPyB0aGlzLl92YWx1ZSA6IG5vdFNldFZhbHVlO1xuXHQgICAgfTtcblx0XG5cdCAgICBSZXBlYXQucHJvdG90eXBlLmluY2x1ZGVzID0gZnVuY3Rpb24oc2VhcmNoVmFsdWUpIHtcblx0ICAgICAgcmV0dXJuIGlzKHRoaXMuX3ZhbHVlLCBzZWFyY2hWYWx1ZSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIFJlcGVhdC5wcm90b3R5cGUuc2xpY2UgPSBmdW5jdGlvbihiZWdpbiwgZW5kKSB7XG5cdCAgICAgIHZhciBzaXplID0gdGhpcy5zaXplO1xuXHQgICAgICByZXR1cm4gd2hvbGVTbGljZShiZWdpbiwgZW5kLCBzaXplKSA/IHRoaXMgOlxuXHQgICAgICAgIG5ldyBSZXBlYXQodGhpcy5fdmFsdWUsIHJlc29sdmVFbmQoZW5kLCBzaXplKSAtIHJlc29sdmVCZWdpbihiZWdpbiwgc2l6ZSkpO1xuXHQgICAgfTtcblx0XG5cdCAgICBSZXBlYXQucHJvdG90eXBlLnJldmVyc2UgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9O1xuXHRcblx0ICAgIFJlcGVhdC5wcm90b3R5cGUuaW5kZXhPZiA9IGZ1bmN0aW9uKHNlYXJjaFZhbHVlKSB7XG5cdCAgICAgIGlmIChpcyh0aGlzLl92YWx1ZSwgc2VhcmNoVmFsdWUpKSB7XG5cdCAgICAgICAgcmV0dXJuIDA7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIC0xO1xuXHQgICAgfTtcblx0XG5cdCAgICBSZXBlYXQucHJvdG90eXBlLmxhc3RJbmRleE9mID0gZnVuY3Rpb24oc2VhcmNoVmFsdWUpIHtcblx0ICAgICAgaWYgKGlzKHRoaXMuX3ZhbHVlLCBzZWFyY2hWYWx1ZSkpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5zaXplO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiAtMTtcblx0ICAgIH07XG5cdFxuXHQgICAgUmVwZWF0LnByb3RvdHlwZS5fX2l0ZXJhdGUgPSBmdW5jdGlvbihmbiwgcmV2ZXJzZSkge1xuXHQgICAgICBmb3IgKHZhciBpaSA9IDA7IGlpIDwgdGhpcy5zaXplOyBpaSsrKSB7XG5cdCAgICAgICAgaWYgKGZuKHRoaXMuX3ZhbHVlLCBpaSwgdGhpcykgPT09IGZhbHNlKSB7XG5cdCAgICAgICAgICByZXR1cm4gaWkgKyAxO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gaWk7XG5cdCAgICB9O1xuXHRcblx0ICAgIFJlcGVhdC5wcm90b3R5cGUuX19pdGVyYXRvciA9IGZ1bmN0aW9uKHR5cGUsIHJldmVyc2UpIHt2YXIgdGhpcyQwID0gdGhpcztcblx0ICAgICAgdmFyIGlpID0gMDtcblx0ICAgICAgcmV0dXJuIG5ldyBJdGVyYXRvcihmdW5jdGlvbigpIFxuXHQgICAgICAgIHtyZXR1cm4gaWkgPCB0aGlzJDAuc2l6ZSA/IGl0ZXJhdG9yVmFsdWUodHlwZSwgaWkrKywgdGhpcyQwLl92YWx1ZSkgOiBpdGVyYXRvckRvbmUoKX1cblx0ICAgICAgKTtcblx0ICAgIH07XG5cdFxuXHQgICAgUmVwZWF0LnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbihvdGhlcikge1xuXHQgICAgICByZXR1cm4gb3RoZXIgaW5zdGFuY2VvZiBSZXBlYXQgP1xuXHQgICAgICAgIGlzKHRoaXMuX3ZhbHVlLCBvdGhlci5fdmFsdWUpIDpcblx0ICAgICAgICBkZWVwRXF1YWwob3RoZXIpO1xuXHQgICAgfTtcblx0XG5cdFxuXHQgIHZhciBFTVBUWV9SRVBFQVQ7XG5cdFxuXHQgIGZ1bmN0aW9uIGludmFyaWFudChjb25kaXRpb24sIGVycm9yKSB7XG5cdCAgICBpZiAoIWNvbmRpdGlvbikgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcblx0ICB9XG5cdFxuXHQgIGNyZWF0ZUNsYXNzKFJhbmdlLCBJbmRleGVkU2VxKTtcblx0XG5cdCAgICBmdW5jdGlvbiBSYW5nZShzdGFydCwgZW5kLCBzdGVwKSB7XG5cdCAgICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBSYW5nZSkpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IFJhbmdlKHN0YXJ0LCBlbmQsIHN0ZXApO1xuXHQgICAgICB9XG5cdCAgICAgIGludmFyaWFudChzdGVwICE9PSAwLCAnQ2Fubm90IHN0ZXAgYSBSYW5nZSBieSAwJyk7XG5cdCAgICAgIHN0YXJ0ID0gc3RhcnQgfHwgMDtcblx0ICAgICAgaWYgKGVuZCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgICAgZW5kID0gSW5maW5pdHk7XG5cdCAgICAgIH1cblx0ICAgICAgc3RlcCA9IHN0ZXAgPT09IHVuZGVmaW5lZCA/IDEgOiBNYXRoLmFicyhzdGVwKTtcblx0ICAgICAgaWYgKGVuZCA8IHN0YXJ0KSB7XG5cdCAgICAgICAgc3RlcCA9IC1zdGVwO1xuXHQgICAgICB9XG5cdCAgICAgIHRoaXMuX3N0YXJ0ID0gc3RhcnQ7XG5cdCAgICAgIHRoaXMuX2VuZCA9IGVuZDtcblx0ICAgICAgdGhpcy5fc3RlcCA9IHN0ZXA7XG5cdCAgICAgIHRoaXMuc2l6ZSA9IE1hdGgubWF4KDAsIE1hdGguY2VpbCgoZW5kIC0gc3RhcnQpIC8gc3RlcCAtIDEpICsgMSk7XG5cdCAgICAgIGlmICh0aGlzLnNpemUgPT09IDApIHtcblx0ICAgICAgICBpZiAoRU1QVFlfUkFOR0UpIHtcblx0ICAgICAgICAgIHJldHVybiBFTVBUWV9SQU5HRTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgRU1QVFlfUkFOR0UgPSB0aGlzO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgUmFuZ2UucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIGlmICh0aGlzLnNpemUgPT09IDApIHtcblx0ICAgICAgICByZXR1cm4gJ1JhbmdlIFtdJztcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gJ1JhbmdlIFsgJyArXG5cdCAgICAgICAgdGhpcy5fc3RhcnQgKyAnLi4uJyArIHRoaXMuX2VuZCArXG5cdCAgICAgICAgKHRoaXMuX3N0ZXAgIT09IDEgPyAnIGJ5ICcgKyB0aGlzLl9zdGVwIDogJycpICtcblx0ICAgICAgJyBdJztcblx0ICAgIH07XG5cdFxuXHQgICAgUmFuZ2UucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKGluZGV4LCBub3RTZXRWYWx1ZSkge1xuXHQgICAgICByZXR1cm4gdGhpcy5oYXMoaW5kZXgpID9cblx0ICAgICAgICB0aGlzLl9zdGFydCArIHdyYXBJbmRleCh0aGlzLCBpbmRleCkgKiB0aGlzLl9zdGVwIDpcblx0ICAgICAgICBub3RTZXRWYWx1ZTtcblx0ICAgIH07XG5cdFxuXHQgICAgUmFuZ2UucHJvdG90eXBlLmluY2x1ZGVzID0gZnVuY3Rpb24oc2VhcmNoVmFsdWUpIHtcblx0ICAgICAgdmFyIHBvc3NpYmxlSW5kZXggPSAoc2VhcmNoVmFsdWUgLSB0aGlzLl9zdGFydCkgLyB0aGlzLl9zdGVwO1xuXHQgICAgICByZXR1cm4gcG9zc2libGVJbmRleCA+PSAwICYmXG5cdCAgICAgICAgcG9zc2libGVJbmRleCA8IHRoaXMuc2l6ZSAmJlxuXHQgICAgICAgIHBvc3NpYmxlSW5kZXggPT09IE1hdGguZmxvb3IocG9zc2libGVJbmRleCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIFJhbmdlLnByb3RvdHlwZS5zbGljZSA9IGZ1bmN0aW9uKGJlZ2luLCBlbmQpIHtcblx0ICAgICAgaWYgKHdob2xlU2xpY2UoYmVnaW4sIGVuZCwgdGhpcy5zaXplKSkge1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgICB9XG5cdCAgICAgIGJlZ2luID0gcmVzb2x2ZUJlZ2luKGJlZ2luLCB0aGlzLnNpemUpO1xuXHQgICAgICBlbmQgPSByZXNvbHZlRW5kKGVuZCwgdGhpcy5zaXplKTtcblx0ICAgICAgaWYgKGVuZCA8PSBiZWdpbikge1xuXHQgICAgICAgIHJldHVybiBuZXcgUmFuZ2UoMCwgMCk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIG5ldyBSYW5nZSh0aGlzLmdldChiZWdpbiwgdGhpcy5fZW5kKSwgdGhpcy5nZXQoZW5kLCB0aGlzLl9lbmQpLCB0aGlzLl9zdGVwKTtcblx0ICAgIH07XG5cdFxuXHQgICAgUmFuZ2UucHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbihzZWFyY2hWYWx1ZSkge1xuXHQgICAgICB2YXIgb2Zmc2V0VmFsdWUgPSBzZWFyY2hWYWx1ZSAtIHRoaXMuX3N0YXJ0O1xuXHQgICAgICBpZiAob2Zmc2V0VmFsdWUgJSB0aGlzLl9zdGVwID09PSAwKSB7XG5cdCAgICAgICAgdmFyIGluZGV4ID0gb2Zmc2V0VmFsdWUgLyB0aGlzLl9zdGVwO1xuXHQgICAgICAgIGlmIChpbmRleCA+PSAwICYmIGluZGV4IDwgdGhpcy5zaXplKSB7XG5cdCAgICAgICAgICByZXR1cm4gaW5kZXhcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIC0xO1xuXHQgICAgfTtcblx0XG5cdCAgICBSYW5nZS5wcm90b3R5cGUubGFzdEluZGV4T2YgPSBmdW5jdGlvbihzZWFyY2hWYWx1ZSkge1xuXHQgICAgICByZXR1cm4gdGhpcy5pbmRleE9mKHNlYXJjaFZhbHVlKTtcblx0ICAgIH07XG5cdFxuXHQgICAgUmFuZ2UucHJvdG90eXBlLl9faXRlcmF0ZSA9IGZ1bmN0aW9uKGZuLCByZXZlcnNlKSB7XG5cdCAgICAgIHZhciBtYXhJbmRleCA9IHRoaXMuc2l6ZSAtIDE7XG5cdCAgICAgIHZhciBzdGVwID0gdGhpcy5fc3RlcDtcblx0ICAgICAgdmFyIHZhbHVlID0gcmV2ZXJzZSA/IHRoaXMuX3N0YXJ0ICsgbWF4SW5kZXggKiBzdGVwIDogdGhpcy5fc3RhcnQ7XG5cdCAgICAgIGZvciAodmFyIGlpID0gMDsgaWkgPD0gbWF4SW5kZXg7IGlpKyspIHtcblx0ICAgICAgICBpZiAoZm4odmFsdWUsIGlpLCB0aGlzKSA9PT0gZmFsc2UpIHtcblx0ICAgICAgICAgIHJldHVybiBpaSArIDE7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhbHVlICs9IHJldmVyc2UgPyAtc3RlcCA6IHN0ZXA7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGlpO1xuXHQgICAgfTtcblx0XG5cdCAgICBSYW5nZS5wcm90b3R5cGUuX19pdGVyYXRvciA9IGZ1bmN0aW9uKHR5cGUsIHJldmVyc2UpIHtcblx0ICAgICAgdmFyIG1heEluZGV4ID0gdGhpcy5zaXplIC0gMTtcblx0ICAgICAgdmFyIHN0ZXAgPSB0aGlzLl9zdGVwO1xuXHQgICAgICB2YXIgdmFsdWUgPSByZXZlcnNlID8gdGhpcy5fc3RhcnQgKyBtYXhJbmRleCAqIHN0ZXAgOiB0aGlzLl9zdGFydDtcblx0ICAgICAgdmFyIGlpID0gMDtcblx0ICAgICAgcmV0dXJuIG5ldyBJdGVyYXRvcihmdW5jdGlvbigpICB7XG5cdCAgICAgICAgdmFyIHYgPSB2YWx1ZTtcblx0ICAgICAgICB2YWx1ZSArPSByZXZlcnNlID8gLXN0ZXAgOiBzdGVwO1xuXHQgICAgICAgIHJldHVybiBpaSA+IG1heEluZGV4ID8gaXRlcmF0b3JEb25lKCkgOiBpdGVyYXRvclZhbHVlKHR5cGUsIGlpKyssIHYpO1xuXHQgICAgICB9KTtcblx0ICAgIH07XG5cdFxuXHQgICAgUmFuZ2UucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uKG90aGVyKSB7XG5cdCAgICAgIHJldHVybiBvdGhlciBpbnN0YW5jZW9mIFJhbmdlID9cblx0ICAgICAgICB0aGlzLl9zdGFydCA9PT0gb3RoZXIuX3N0YXJ0ICYmXG5cdCAgICAgICAgdGhpcy5fZW5kID09PSBvdGhlci5fZW5kICYmXG5cdCAgICAgICAgdGhpcy5fc3RlcCA9PT0gb3RoZXIuX3N0ZXAgOlxuXHQgICAgICAgIGRlZXBFcXVhbCh0aGlzLCBvdGhlcik7XG5cdCAgICB9O1xuXHRcblx0XG5cdCAgdmFyIEVNUFRZX1JBTkdFO1xuXHRcblx0ICBjcmVhdGVDbGFzcyhDb2xsZWN0aW9uLCBJdGVyYWJsZSk7XG5cdCAgICBmdW5jdGlvbiBDb2xsZWN0aW9uKCkge1xuXHQgICAgICB0aHJvdyBUeXBlRXJyb3IoJ0Fic3RyYWN0Jyk7XG5cdCAgICB9XG5cdFxuXHRcblx0ICBjcmVhdGVDbGFzcyhLZXllZENvbGxlY3Rpb24sIENvbGxlY3Rpb24pO2Z1bmN0aW9uIEtleWVkQ29sbGVjdGlvbigpIHt9XG5cdFxuXHQgIGNyZWF0ZUNsYXNzKEluZGV4ZWRDb2xsZWN0aW9uLCBDb2xsZWN0aW9uKTtmdW5jdGlvbiBJbmRleGVkQ29sbGVjdGlvbigpIHt9XG5cdFxuXHQgIGNyZWF0ZUNsYXNzKFNldENvbGxlY3Rpb24sIENvbGxlY3Rpb24pO2Z1bmN0aW9uIFNldENvbGxlY3Rpb24oKSB7fVxuXHRcblx0XG5cdCAgQ29sbGVjdGlvbi5LZXllZCA9IEtleWVkQ29sbGVjdGlvbjtcblx0ICBDb2xsZWN0aW9uLkluZGV4ZWQgPSBJbmRleGVkQ29sbGVjdGlvbjtcblx0ICBDb2xsZWN0aW9uLlNldCA9IFNldENvbGxlY3Rpb247XG5cdFxuXHQgIHZhciBpbXVsID1cblx0ICAgIHR5cGVvZiBNYXRoLmltdWwgPT09ICdmdW5jdGlvbicgJiYgTWF0aC5pbXVsKDB4ZmZmZmZmZmYsIDIpID09PSAtMiA/XG5cdCAgICBNYXRoLmltdWwgOlxuXHQgICAgZnVuY3Rpb24gaW11bChhLCBiKSB7XG5cdCAgICAgIGEgPSBhIHwgMDsgLy8gaW50XG5cdCAgICAgIGIgPSBiIHwgMDsgLy8gaW50XG5cdCAgICAgIHZhciBjID0gYSAmIDB4ZmZmZjtcblx0ICAgICAgdmFyIGQgPSBiICYgMHhmZmZmO1xuXHQgICAgICAvLyBTaGlmdCBieSAwIGZpeGVzIHRoZSBzaWduIG9uIHRoZSBoaWdoIHBhcnQuXG5cdCAgICAgIHJldHVybiAoYyAqIGQpICsgKCgoKGEgPj4+IDE2KSAqIGQgKyBjICogKGIgPj4+IDE2KSkgPDwgMTYpID4+PiAwKSB8IDA7IC8vIGludFxuXHQgICAgfTtcblx0XG5cdCAgLy8gdjggaGFzIGFuIG9wdGltaXphdGlvbiBmb3Igc3RvcmluZyAzMS1iaXQgc2lnbmVkIG51bWJlcnMuXG5cdCAgLy8gVmFsdWVzIHdoaWNoIGhhdmUgZWl0aGVyIDAwIG9yIDExIGFzIHRoZSBoaWdoIG9yZGVyIGJpdHMgcXVhbGlmeS5cblx0ICAvLyBUaGlzIGZ1bmN0aW9uIGRyb3BzIHRoZSBoaWdoZXN0IG9yZGVyIGJpdCBpbiBhIHNpZ25lZCBudW1iZXIsIG1haW50YWluaW5nXG5cdCAgLy8gdGhlIHNpZ24gYml0LlxuXHQgIGZ1bmN0aW9uIHNtaShpMzIpIHtcblx0ICAgIHJldHVybiAoKGkzMiA+Pj4gMSkgJiAweDQwMDAwMDAwKSB8IChpMzIgJiAweEJGRkZGRkZGKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGhhc2gobykge1xuXHQgICAgaWYgKG8gPT09IGZhbHNlIHx8IG8gPT09IG51bGwgfHwgbyA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgIHJldHVybiAwO1xuXHQgICAgfVxuXHQgICAgaWYgKHR5cGVvZiBvLnZhbHVlT2YgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgbyA9IG8udmFsdWVPZigpO1xuXHQgICAgICBpZiAobyA9PT0gZmFsc2UgfHwgbyA9PT0gbnVsbCB8fCBvID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICByZXR1cm4gMDtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgaWYgKG8gPT09IHRydWUpIHtcblx0ICAgICAgcmV0dXJuIDE7XG5cdCAgICB9XG5cdCAgICB2YXIgdHlwZSA9IHR5cGVvZiBvO1xuXHQgICAgaWYgKHR5cGUgPT09ICdudW1iZXInKSB7XG5cdCAgICAgIGlmIChvICE9PSBvIHx8IG8gPT09IEluZmluaXR5KSB7XG5cdCAgICAgICAgcmV0dXJuIDA7XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIGggPSBvIHwgMDtcblx0ICAgICAgaWYgKGggIT09IG8pIHtcblx0ICAgICAgICBoIF49IG8gKiAweEZGRkZGRkZGO1xuXHQgICAgICB9XG5cdCAgICAgIHdoaWxlIChvID4gMHhGRkZGRkZGRikge1xuXHQgICAgICAgIG8gLz0gMHhGRkZGRkZGRjtcblx0ICAgICAgICBoIF49IG87XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHNtaShoKTtcblx0ICAgIH1cblx0ICAgIGlmICh0eXBlID09PSAnc3RyaW5nJykge1xuXHQgICAgICByZXR1cm4gby5sZW5ndGggPiBTVFJJTkdfSEFTSF9DQUNIRV9NSU5fU1RSTEVOID8gY2FjaGVkSGFzaFN0cmluZyhvKSA6IGhhc2hTdHJpbmcobyk7XG5cdCAgICB9XG5cdCAgICBpZiAodHlwZW9mIG8uaGFzaENvZGUgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgcmV0dXJuIG8uaGFzaENvZGUoKTtcblx0ICAgIH1cblx0ICAgIGlmICh0eXBlID09PSAnb2JqZWN0Jykge1xuXHQgICAgICByZXR1cm4gaGFzaEpTT2JqKG8pO1xuXHQgICAgfVxuXHQgICAgaWYgKHR5cGVvZiBvLnRvU3RyaW5nID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgIHJldHVybiBoYXNoU3RyaW5nKG8udG9TdHJpbmcoKSk7XG5cdCAgICB9XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ1ZhbHVlIHR5cGUgJyArIHR5cGUgKyAnIGNhbm5vdCBiZSBoYXNoZWQuJyk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBjYWNoZWRIYXNoU3RyaW5nKHN0cmluZykge1xuXHQgICAgdmFyIGhhc2ggPSBzdHJpbmdIYXNoQ2FjaGVbc3RyaW5nXTtcblx0ICAgIGlmIChoYXNoID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgaGFzaCA9IGhhc2hTdHJpbmcoc3RyaW5nKTtcblx0ICAgICAgaWYgKFNUUklOR19IQVNIX0NBQ0hFX1NJWkUgPT09IFNUUklOR19IQVNIX0NBQ0hFX01BWF9TSVpFKSB7XG5cdCAgICAgICAgU1RSSU5HX0hBU0hfQ0FDSEVfU0laRSA9IDA7XG5cdCAgICAgICAgc3RyaW5nSGFzaENhY2hlID0ge307XG5cdCAgICAgIH1cblx0ICAgICAgU1RSSU5HX0hBU0hfQ0FDSEVfU0laRSsrO1xuXHQgICAgICBzdHJpbmdIYXNoQ2FjaGVbc3RyaW5nXSA9IGhhc2g7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gaGFzaDtcblx0ICB9XG5cdFxuXHQgIC8vIGh0dHA6Ly9qc3BlcmYuY29tL2hhc2hpbmctc3RyaW5nc1xuXHQgIGZ1bmN0aW9uIGhhc2hTdHJpbmcoc3RyaW5nKSB7XG5cdCAgICAvLyBUaGlzIGlzIHRoZSBoYXNoIGZyb20gSlZNXG5cdCAgICAvLyBUaGUgaGFzaCBjb2RlIGZvciBhIHN0cmluZyBpcyBjb21wdXRlZCBhc1xuXHQgICAgLy8gc1swXSAqIDMxIF4gKG4gLSAxKSArIHNbMV0gKiAzMSBeIChuIC0gMikgKyAuLi4gKyBzW24gLSAxXSxcblx0ICAgIC8vIHdoZXJlIHNbaV0gaXMgdGhlIGl0aCBjaGFyYWN0ZXIgb2YgdGhlIHN0cmluZyBhbmQgbiBpcyB0aGUgbGVuZ3RoIG9mXG5cdCAgICAvLyB0aGUgc3RyaW5nLiBXZSBcIm1vZFwiIHRoZSByZXN1bHQgdG8gbWFrZSBpdCBiZXR3ZWVuIDAgKGluY2x1c2l2ZSkgYW5kIDJeMzFcblx0ICAgIC8vIChleGNsdXNpdmUpIGJ5IGRyb3BwaW5nIGhpZ2ggYml0cy5cblx0ICAgIHZhciBoYXNoID0gMDtcblx0ICAgIGZvciAodmFyIGlpID0gMDsgaWkgPCBzdHJpbmcubGVuZ3RoOyBpaSsrKSB7XG5cdCAgICAgIGhhc2ggPSAzMSAqIGhhc2ggKyBzdHJpbmcuY2hhckNvZGVBdChpaSkgfCAwO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHNtaShoYXNoKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGhhc2hKU09iaihvYmopIHtcblx0ICAgIHZhciBoYXNoO1xuXHQgICAgaWYgKHVzaW5nV2Vha01hcCkge1xuXHQgICAgICBoYXNoID0gd2Vha01hcC5nZXQob2JqKTtcblx0ICAgICAgaWYgKGhhc2ggIT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAgIHJldHVybiBoYXNoO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgaGFzaCA9IG9ialtVSURfSEFTSF9LRVldO1xuXHQgICAgaWYgKGhhc2ggIT09IHVuZGVmaW5lZCkge1xuXHQgICAgICByZXR1cm4gaGFzaDtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoIWNhbkRlZmluZVByb3BlcnR5KSB7XG5cdCAgICAgIGhhc2ggPSBvYmoucHJvcGVydHlJc0VudW1lcmFibGUgJiYgb2JqLnByb3BlcnR5SXNFbnVtZXJhYmxlW1VJRF9IQVNIX0tFWV07XG5cdCAgICAgIGlmIChoYXNoICE9PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICByZXR1cm4gaGFzaDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaGFzaCA9IGdldElFTm9kZUhhc2gob2JqKTtcblx0ICAgICAgaWYgKGhhc2ggIT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAgIHJldHVybiBoYXNoO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgaGFzaCA9ICsrb2JqSGFzaFVJRDtcblx0ICAgIGlmIChvYmpIYXNoVUlEICYgMHg0MDAwMDAwMCkge1xuXHQgICAgICBvYmpIYXNoVUlEID0gMDtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAodXNpbmdXZWFrTWFwKSB7XG5cdCAgICAgIHdlYWtNYXAuc2V0KG9iaiwgaGFzaCk7XG5cdCAgICB9IGVsc2UgaWYgKGlzRXh0ZW5zaWJsZSAhPT0gdW5kZWZpbmVkICYmIGlzRXh0ZW5zaWJsZShvYmopID09PSBmYWxzZSkge1xuXHQgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vbi1leHRlbnNpYmxlIG9iamVjdHMgYXJlIG5vdCBhbGxvd2VkIGFzIGtleXMuJyk7XG5cdCAgICB9IGVsc2UgaWYgKGNhbkRlZmluZVByb3BlcnR5KSB7XG5cdCAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIFVJRF9IQVNIX0tFWSwge1xuXHQgICAgICAgICdlbnVtZXJhYmxlJzogZmFsc2UsXG5cdCAgICAgICAgJ2NvbmZpZ3VyYWJsZSc6IGZhbHNlLFxuXHQgICAgICAgICd3cml0YWJsZSc6IGZhbHNlLFxuXHQgICAgICAgICd2YWx1ZSc6IGhhc2hcblx0ICAgICAgfSk7XG5cdCAgICB9IGVsc2UgaWYgKG9iai5wcm9wZXJ0eUlzRW51bWVyYWJsZSAhPT0gdW5kZWZpbmVkICYmXG5cdCAgICAgICAgICAgICAgIG9iai5wcm9wZXJ0eUlzRW51bWVyYWJsZSA9PT0gb2JqLmNvbnN0cnVjdG9yLnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZSkge1xuXHQgICAgICAvLyBTaW5jZSB3ZSBjYW4ndCBkZWZpbmUgYSBub24tZW51bWVyYWJsZSBwcm9wZXJ0eSBvbiB0aGUgb2JqZWN0XG5cdCAgICAgIC8vIHdlJ2xsIGhpamFjayBvbmUgb2YgdGhlIGxlc3MtdXNlZCBub24tZW51bWVyYWJsZSBwcm9wZXJ0aWVzIHRvXG5cdCAgICAgIC8vIHNhdmUgb3VyIGhhc2ggb24gaXQuIFNpbmNlIHRoaXMgaXMgYSBmdW5jdGlvbiBpdCB3aWxsIG5vdCBzaG93IHVwIGluXG5cdCAgICAgIC8vIGBKU09OLnN0cmluZ2lmeWAgd2hpY2ggaXMgd2hhdCB3ZSB3YW50LlxuXHQgICAgICBvYmoucHJvcGVydHlJc0VudW1lcmFibGUgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgICAgfTtcblx0ICAgICAgb2JqLnByb3BlcnR5SXNFbnVtZXJhYmxlW1VJRF9IQVNIX0tFWV0gPSBoYXNoO1xuXHQgICAgfSBlbHNlIGlmIChvYmoubm9kZVR5cGUgIT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAvLyBBdCB0aGlzIHBvaW50IHdlIGNvdWxkbid0IGdldCB0aGUgSUUgYHVuaXF1ZUlEYCB0byB1c2UgYXMgYSBoYXNoXG5cdCAgICAgIC8vIGFuZCB3ZSBjb3VsZG4ndCB1c2UgYSBub24tZW51bWVyYWJsZSBwcm9wZXJ0eSB0byBleHBsb2l0IHRoZVxuXHQgICAgICAvLyBkb250RW51bSBidWcgc28gd2Ugc2ltcGx5IGFkZCB0aGUgYFVJRF9IQVNIX0tFWWAgb24gdGhlIG5vZGVcblx0ICAgICAgLy8gaXRzZWxmLlxuXHQgICAgICBvYmpbVUlEX0hBU0hfS0VZXSA9IGhhc2g7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuYWJsZSB0byBzZXQgYSBub24tZW51bWVyYWJsZSBwcm9wZXJ0eSBvbiBvYmplY3QuJyk7XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIGhhc2g7XG5cdCAgfVxuXHRcblx0ICAvLyBHZXQgcmVmZXJlbmNlcyB0byBFUzUgb2JqZWN0IG1ldGhvZHMuXG5cdCAgdmFyIGlzRXh0ZW5zaWJsZSA9IE9iamVjdC5pc0V4dGVuc2libGU7XG5cdFxuXHQgIC8vIFRydWUgaWYgT2JqZWN0LmRlZmluZVByb3BlcnR5IHdvcmtzIGFzIGV4cGVjdGVkLiBJRTggZmFpbHMgdGhpcyB0ZXN0LlxuXHQgIHZhciBjYW5EZWZpbmVQcm9wZXJ0eSA9IChmdW5jdGlvbigpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgJ0AnLCB7fSk7XG5cdCAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdCAgfSgpKTtcblx0XG5cdCAgLy8gSUUgaGFzIGEgYHVuaXF1ZUlEYCBwcm9wZXJ0eSBvbiBET00gbm9kZXMuIFdlIGNhbiBjb25zdHJ1Y3QgdGhlIGhhc2ggZnJvbSBpdFxuXHQgIC8vIGFuZCBhdm9pZCBtZW1vcnkgbGVha3MgZnJvbSB0aGUgSUUgY2xvbmVOb2RlIGJ1Zy5cblx0ICBmdW5jdGlvbiBnZXRJRU5vZGVIYXNoKG5vZGUpIHtcblx0ICAgIGlmIChub2RlICYmIG5vZGUubm9kZVR5cGUgPiAwKSB7XG5cdCAgICAgIHN3aXRjaCAobm9kZS5ub2RlVHlwZSkge1xuXHQgICAgICAgIGNhc2UgMTogLy8gRWxlbWVudFxuXHQgICAgICAgICAgcmV0dXJuIG5vZGUudW5pcXVlSUQ7XG5cdCAgICAgICAgY2FzZSA5OiAvLyBEb2N1bWVudFxuXHQgICAgICAgICAgcmV0dXJuIG5vZGUuZG9jdW1lbnRFbGVtZW50ICYmIG5vZGUuZG9jdW1lbnRFbGVtZW50LnVuaXF1ZUlEO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvLyBJZiBwb3NzaWJsZSwgdXNlIGEgV2Vha01hcC5cblx0ICB2YXIgdXNpbmdXZWFrTWFwID0gdHlwZW9mIFdlYWtNYXAgPT09ICdmdW5jdGlvbic7XG5cdCAgdmFyIHdlYWtNYXA7XG5cdCAgaWYgKHVzaW5nV2Vha01hcCkge1xuXHQgICAgd2Vha01hcCA9IG5ldyBXZWFrTWFwKCk7XG5cdCAgfVxuXHRcblx0ICB2YXIgb2JqSGFzaFVJRCA9IDA7XG5cdFxuXHQgIHZhciBVSURfSEFTSF9LRVkgPSAnX19pbW11dGFibGVoYXNoX18nO1xuXHQgIGlmICh0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICBVSURfSEFTSF9LRVkgPSBTeW1ib2woVUlEX0hBU0hfS0VZKTtcblx0ICB9XG5cdFxuXHQgIHZhciBTVFJJTkdfSEFTSF9DQUNIRV9NSU5fU1RSTEVOID0gMTY7XG5cdCAgdmFyIFNUUklOR19IQVNIX0NBQ0hFX01BWF9TSVpFID0gMjU1O1xuXHQgIHZhciBTVFJJTkdfSEFTSF9DQUNIRV9TSVpFID0gMDtcblx0ICB2YXIgc3RyaW5nSGFzaENhY2hlID0ge307XG5cdFxuXHQgIGZ1bmN0aW9uIGFzc2VydE5vdEluZmluaXRlKHNpemUpIHtcblx0ICAgIGludmFyaWFudChcblx0ICAgICAgc2l6ZSAhPT0gSW5maW5pdHksXG5cdCAgICAgICdDYW5ub3QgcGVyZm9ybSB0aGlzIGFjdGlvbiB3aXRoIGFuIGluZmluaXRlIHNpemUuJ1xuXHQgICAgKTtcblx0ICB9XG5cdFxuXHQgIGNyZWF0ZUNsYXNzKE1hcCwgS2V5ZWRDb2xsZWN0aW9uKTtcblx0XG5cdCAgICAvLyBAcHJhZ21hIENvbnN0cnVjdGlvblxuXHRcblx0ICAgIGZ1bmN0aW9uIE1hcCh2YWx1ZSkge1xuXHQgICAgICByZXR1cm4gdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCA/IGVtcHR5TWFwKCkgOlxuXHQgICAgICAgIGlzTWFwKHZhbHVlKSAmJiAhaXNPcmRlcmVkKHZhbHVlKSA/IHZhbHVlIDpcblx0ICAgICAgICBlbXB0eU1hcCgpLndpdGhNdXRhdGlvbnMoZnVuY3Rpb24obWFwICkge1xuXHQgICAgICAgICAgdmFyIGl0ZXIgPSBLZXllZEl0ZXJhYmxlKHZhbHVlKTtcblx0ICAgICAgICAgIGFzc2VydE5vdEluZmluaXRlKGl0ZXIuc2l6ZSk7XG5cdCAgICAgICAgICBpdGVyLmZvckVhY2goZnVuY3Rpb24odiwgaykgIHtyZXR1cm4gbWFwLnNldChrLCB2KX0pO1xuXHQgICAgICAgIH0pO1xuXHQgICAgfVxuXHRcblx0ICAgIE1hcC5vZiA9IGZ1bmN0aW9uKCkge3ZhciBrZXlWYWx1ZXMgPSBTTElDRSQwLmNhbGwoYXJndW1lbnRzLCAwKTtcblx0ICAgICAgcmV0dXJuIGVtcHR5TWFwKCkud2l0aE11dGF0aW9ucyhmdW5jdGlvbihtYXAgKSB7XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlWYWx1ZXMubGVuZ3RoOyBpICs9IDIpIHtcblx0ICAgICAgICAgIGlmIChpICsgMSA+PSBrZXlWYWx1ZXMubGVuZ3RoKSB7XG5cdCAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyB2YWx1ZSBmb3Iga2V5OiAnICsga2V5VmFsdWVzW2ldKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIG1hcC5zZXQoa2V5VmFsdWVzW2ldLCBrZXlWYWx1ZXNbaSArIDFdKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfTtcblx0XG5cdCAgICBNYXAucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLl9fdG9TdHJpbmcoJ01hcCB7JywgJ30nKTtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gQHByYWdtYSBBY2Nlc3Ncblx0XG5cdCAgICBNYXAucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKGssIG5vdFNldFZhbHVlKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLl9yb290ID9cblx0ICAgICAgICB0aGlzLl9yb290LmdldCgwLCB1bmRlZmluZWQsIGssIG5vdFNldFZhbHVlKSA6XG5cdCAgICAgICAgbm90U2V0VmFsdWU7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIEBwcmFnbWEgTW9kaWZpY2F0aW9uXG5cdFxuXHQgICAgTWFwLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbihrLCB2KSB7XG5cdCAgICAgIHJldHVybiB1cGRhdGVNYXAodGhpcywgaywgdik7XG5cdCAgICB9O1xuXHRcblx0ICAgIE1hcC5wcm90b3R5cGUuc2V0SW4gPSBmdW5jdGlvbihrZXlQYXRoLCB2KSB7XG5cdCAgICAgIHJldHVybiB0aGlzLnVwZGF0ZUluKGtleVBhdGgsIE5PVF9TRVQsIGZ1bmN0aW9uKCkgIHtyZXR1cm4gdn0pO1xuXHQgICAgfTtcblx0XG5cdCAgICBNYXAucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uKGspIHtcblx0ICAgICAgcmV0dXJuIHVwZGF0ZU1hcCh0aGlzLCBrLCBOT1RfU0VUKTtcblx0ICAgIH07XG5cdFxuXHQgICAgTWFwLnByb3RvdHlwZS5kZWxldGVJbiA9IGZ1bmN0aW9uKGtleVBhdGgpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMudXBkYXRlSW4oa2V5UGF0aCwgZnVuY3Rpb24oKSAge3JldHVybiBOT1RfU0VUfSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIE1hcC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24oaywgbm90U2V0VmFsdWUsIHVwZGF0ZXIpIHtcblx0ICAgICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPT09IDEgP1xuXHQgICAgICAgIGsodGhpcykgOlxuXHQgICAgICAgIHRoaXMudXBkYXRlSW4oW2tdLCBub3RTZXRWYWx1ZSwgdXBkYXRlcik7XG5cdCAgICB9O1xuXHRcblx0ICAgIE1hcC5wcm90b3R5cGUudXBkYXRlSW4gPSBmdW5jdGlvbihrZXlQYXRoLCBub3RTZXRWYWx1ZSwgdXBkYXRlcikge1xuXHQgICAgICBpZiAoIXVwZGF0ZXIpIHtcblx0ICAgICAgICB1cGRhdGVyID0gbm90U2V0VmFsdWU7XG5cdCAgICAgICAgbm90U2V0VmFsdWUgPSB1bmRlZmluZWQ7XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIHVwZGF0ZWRWYWx1ZSA9IHVwZGF0ZUluRGVlcE1hcChcblx0ICAgICAgICB0aGlzLFxuXHQgICAgICAgIGZvcmNlSXRlcmF0b3Ioa2V5UGF0aCksXG5cdCAgICAgICAgbm90U2V0VmFsdWUsXG5cdCAgICAgICAgdXBkYXRlclxuXHQgICAgICApO1xuXHQgICAgICByZXR1cm4gdXBkYXRlZFZhbHVlID09PSBOT1RfU0VUID8gdW5kZWZpbmVkIDogdXBkYXRlZFZhbHVlO1xuXHQgICAgfTtcblx0XG5cdCAgICBNYXAucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIGlmICh0aGlzLnNpemUgPT09IDApIHtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgICAgfVxuXHQgICAgICBpZiAodGhpcy5fX293bmVySUQpIHtcblx0ICAgICAgICB0aGlzLnNpemUgPSAwO1xuXHQgICAgICAgIHRoaXMuX3Jvb3QgPSBudWxsO1xuXHQgICAgICAgIHRoaXMuX19oYXNoID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIHRoaXMuX19hbHRlcmVkID0gdHJ1ZTtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gZW1wdHlNYXAoKTtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gQHByYWdtYSBDb21wb3NpdGlvblxuXHRcblx0ICAgIE1hcC5wcm90b3R5cGUubWVyZ2UgPSBmdW5jdGlvbigvKi4uLml0ZXJzKi8pIHtcblx0ICAgICAgcmV0dXJuIG1lcmdlSW50b01hcFdpdGgodGhpcywgdW5kZWZpbmVkLCBhcmd1bWVudHMpO1xuXHQgICAgfTtcblx0XG5cdCAgICBNYXAucHJvdG90eXBlLm1lcmdlV2l0aCA9IGZ1bmN0aW9uKG1lcmdlcikge3ZhciBpdGVycyA9IFNMSUNFJDAuY2FsbChhcmd1bWVudHMsIDEpO1xuXHQgICAgICByZXR1cm4gbWVyZ2VJbnRvTWFwV2l0aCh0aGlzLCBtZXJnZXIsIGl0ZXJzKTtcblx0ICAgIH07XG5cdFxuXHQgICAgTWFwLnByb3RvdHlwZS5tZXJnZUluID0gZnVuY3Rpb24oa2V5UGF0aCkge3ZhciBpdGVycyA9IFNMSUNFJDAuY2FsbChhcmd1bWVudHMsIDEpO1xuXHQgICAgICByZXR1cm4gdGhpcy51cGRhdGVJbihcblx0ICAgICAgICBrZXlQYXRoLFxuXHQgICAgICAgIGVtcHR5TWFwKCksXG5cdCAgICAgICAgZnVuY3Rpb24obSApIHtyZXR1cm4gdHlwZW9mIG0ubWVyZ2UgPT09ICdmdW5jdGlvbicgP1xuXHQgICAgICAgICAgbS5tZXJnZS5hcHBseShtLCBpdGVycykgOlxuXHQgICAgICAgICAgaXRlcnNbaXRlcnMubGVuZ3RoIC0gMV19XG5cdCAgICAgICk7XG5cdCAgICB9O1xuXHRcblx0ICAgIE1hcC5wcm90b3R5cGUubWVyZ2VEZWVwID0gZnVuY3Rpb24oLyouLi5pdGVycyovKSB7XG5cdCAgICAgIHJldHVybiBtZXJnZUludG9NYXBXaXRoKHRoaXMsIGRlZXBNZXJnZXIsIGFyZ3VtZW50cyk7XG5cdCAgICB9O1xuXHRcblx0ICAgIE1hcC5wcm90b3R5cGUubWVyZ2VEZWVwV2l0aCA9IGZ1bmN0aW9uKG1lcmdlcikge3ZhciBpdGVycyA9IFNMSUNFJDAuY2FsbChhcmd1bWVudHMsIDEpO1xuXHQgICAgICByZXR1cm4gbWVyZ2VJbnRvTWFwV2l0aCh0aGlzLCBkZWVwTWVyZ2VyV2l0aChtZXJnZXIpLCBpdGVycyk7XG5cdCAgICB9O1xuXHRcblx0ICAgIE1hcC5wcm90b3R5cGUubWVyZ2VEZWVwSW4gPSBmdW5jdGlvbihrZXlQYXRoKSB7dmFyIGl0ZXJzID0gU0xJQ0UkMC5jYWxsKGFyZ3VtZW50cywgMSk7XG5cdCAgICAgIHJldHVybiB0aGlzLnVwZGF0ZUluKFxuXHQgICAgICAgIGtleVBhdGgsXG5cdCAgICAgICAgZW1wdHlNYXAoKSxcblx0ICAgICAgICBmdW5jdGlvbihtICkge3JldHVybiB0eXBlb2YgbS5tZXJnZURlZXAgPT09ICdmdW5jdGlvbicgP1xuXHQgICAgICAgICAgbS5tZXJnZURlZXAuYXBwbHkobSwgaXRlcnMpIDpcblx0ICAgICAgICAgIGl0ZXJzW2l0ZXJzLmxlbmd0aCAtIDFdfVxuXHQgICAgICApO1xuXHQgICAgfTtcblx0XG5cdCAgICBNYXAucHJvdG90eXBlLnNvcnQgPSBmdW5jdGlvbihjb21wYXJhdG9yKSB7XG5cdCAgICAgIC8vIExhdGUgYmluZGluZ1xuXHQgICAgICByZXR1cm4gT3JkZXJlZE1hcChzb3J0RmFjdG9yeSh0aGlzLCBjb21wYXJhdG9yKSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIE1hcC5wcm90b3R5cGUuc29ydEJ5ID0gZnVuY3Rpb24obWFwcGVyLCBjb21wYXJhdG9yKSB7XG5cdCAgICAgIC8vIExhdGUgYmluZGluZ1xuXHQgICAgICByZXR1cm4gT3JkZXJlZE1hcChzb3J0RmFjdG9yeSh0aGlzLCBjb21wYXJhdG9yLCBtYXBwZXIpKTtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gQHByYWdtYSBNdXRhYmlsaXR5XG5cdFxuXHQgICAgTWFwLnByb3RvdHlwZS53aXRoTXV0YXRpb25zID0gZnVuY3Rpb24oZm4pIHtcblx0ICAgICAgdmFyIG11dGFibGUgPSB0aGlzLmFzTXV0YWJsZSgpO1xuXHQgICAgICBmbihtdXRhYmxlKTtcblx0ICAgICAgcmV0dXJuIG11dGFibGUud2FzQWx0ZXJlZCgpID8gbXV0YWJsZS5fX2Vuc3VyZU93bmVyKHRoaXMuX19vd25lcklEKSA6IHRoaXM7XG5cdCAgICB9O1xuXHRcblx0ICAgIE1hcC5wcm90b3R5cGUuYXNNdXRhYmxlID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLl9fb3duZXJJRCA/IHRoaXMgOiB0aGlzLl9fZW5zdXJlT3duZXIobmV3IE93bmVySUQoKSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIE1hcC5wcm90b3R5cGUuYXNJbW11dGFibGUgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuX19lbnN1cmVPd25lcigpO1xuXHQgICAgfTtcblx0XG5cdCAgICBNYXAucHJvdG90eXBlLndhc0FsdGVyZWQgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuX19hbHRlcmVkO1xuXHQgICAgfTtcblx0XG5cdCAgICBNYXAucHJvdG90eXBlLl9faXRlcmF0b3IgPSBmdW5jdGlvbih0eXBlLCByZXZlcnNlKSB7XG5cdCAgICAgIHJldHVybiBuZXcgTWFwSXRlcmF0b3IodGhpcywgdHlwZSwgcmV2ZXJzZSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIE1hcC5wcm90b3R5cGUuX19pdGVyYXRlID0gZnVuY3Rpb24oZm4sIHJldmVyc2UpIHt2YXIgdGhpcyQwID0gdGhpcztcblx0ICAgICAgdmFyIGl0ZXJhdGlvbnMgPSAwO1xuXHQgICAgICB0aGlzLl9yb290ICYmIHRoaXMuX3Jvb3QuaXRlcmF0ZShmdW5jdGlvbihlbnRyeSApIHtcblx0ICAgICAgICBpdGVyYXRpb25zKys7XG5cdCAgICAgICAgcmV0dXJuIGZuKGVudHJ5WzFdLCBlbnRyeVswXSwgdGhpcyQwKTtcblx0ICAgICAgfSwgcmV2ZXJzZSk7XG5cdCAgICAgIHJldHVybiBpdGVyYXRpb25zO1xuXHQgICAgfTtcblx0XG5cdCAgICBNYXAucHJvdG90eXBlLl9fZW5zdXJlT3duZXIgPSBmdW5jdGlvbihvd25lcklEKSB7XG5cdCAgICAgIGlmIChvd25lcklEID09PSB0aGlzLl9fb3duZXJJRCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgICB9XG5cdCAgICAgIGlmICghb3duZXJJRCkge1xuXHQgICAgICAgIHRoaXMuX19vd25lcklEID0gb3duZXJJRDtcblx0ICAgICAgICB0aGlzLl9fYWx0ZXJlZCA9IGZhbHNlO1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBtYWtlTWFwKHRoaXMuc2l6ZSwgdGhpcy5fcm9vdCwgb3duZXJJRCwgdGhpcy5fX2hhc2gpO1xuXHQgICAgfTtcblx0XG5cdFxuXHQgIGZ1bmN0aW9uIGlzTWFwKG1heWJlTWFwKSB7XG5cdCAgICByZXR1cm4gISEobWF5YmVNYXAgJiYgbWF5YmVNYXBbSVNfTUFQX1NFTlRJTkVMXSk7XG5cdCAgfVxuXHRcblx0ICBNYXAuaXNNYXAgPSBpc01hcDtcblx0XG5cdCAgdmFyIElTX01BUF9TRU5USU5FTCA9ICdAQF9fSU1NVVRBQkxFX01BUF9fQEAnO1xuXHRcblx0ICB2YXIgTWFwUHJvdG90eXBlID0gTWFwLnByb3RvdHlwZTtcblx0ICBNYXBQcm90b3R5cGVbSVNfTUFQX1NFTlRJTkVMXSA9IHRydWU7XG5cdCAgTWFwUHJvdG90eXBlW0RFTEVURV0gPSBNYXBQcm90b3R5cGUucmVtb3ZlO1xuXHQgIE1hcFByb3RvdHlwZS5yZW1vdmVJbiA9IE1hcFByb3RvdHlwZS5kZWxldGVJbjtcblx0XG5cdFxuXHQgIC8vICNwcmFnbWEgVHJpZSBOb2Rlc1xuXHRcblx0XG5cdFxuXHQgICAgZnVuY3Rpb24gQXJyYXlNYXBOb2RlKG93bmVySUQsIGVudHJpZXMpIHtcblx0ICAgICAgdGhpcy5vd25lcklEID0gb3duZXJJRDtcblx0ICAgICAgdGhpcy5lbnRyaWVzID0gZW50cmllcztcblx0ICAgIH1cblx0XG5cdCAgICBBcnJheU1hcE5vZGUucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKHNoaWZ0LCBrZXlIYXNoLCBrZXksIG5vdFNldFZhbHVlKSB7XG5cdCAgICAgIHZhciBlbnRyaWVzID0gdGhpcy5lbnRyaWVzO1xuXHQgICAgICBmb3IgKHZhciBpaSA9IDAsIGxlbiA9IGVudHJpZXMubGVuZ3RoOyBpaSA8IGxlbjsgaWkrKykge1xuXHQgICAgICAgIGlmIChpcyhrZXksIGVudHJpZXNbaWldWzBdKSkge1xuXHQgICAgICAgICAgcmV0dXJuIGVudHJpZXNbaWldWzFdO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gbm90U2V0VmFsdWU7XG5cdCAgICB9O1xuXHRcblx0ICAgIEFycmF5TWFwTm9kZS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24ob3duZXJJRCwgc2hpZnQsIGtleUhhc2gsIGtleSwgdmFsdWUsIGRpZENoYW5nZVNpemUsIGRpZEFsdGVyKSB7XG5cdCAgICAgIHZhciByZW1vdmVkID0gdmFsdWUgPT09IE5PVF9TRVQ7XG5cdFxuXHQgICAgICB2YXIgZW50cmllcyA9IHRoaXMuZW50cmllcztcblx0ICAgICAgdmFyIGlkeCA9IDA7XG5cdCAgICAgIGZvciAodmFyIGxlbiA9IGVudHJpZXMubGVuZ3RoOyBpZHggPCBsZW47IGlkeCsrKSB7XG5cdCAgICAgICAgaWYgKGlzKGtleSwgZW50cmllc1tpZHhdWzBdKSkge1xuXHQgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHZhciBleGlzdHMgPSBpZHggPCBsZW47XG5cdFxuXHQgICAgICBpZiAoZXhpc3RzID8gZW50cmllc1tpZHhdWzFdID09PSB2YWx1ZSA6IHJlbW92ZWQpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgICAgfVxuXHRcblx0ICAgICAgU2V0UmVmKGRpZEFsdGVyKTtcblx0ICAgICAgKHJlbW92ZWQgfHwgIWV4aXN0cykgJiYgU2V0UmVmKGRpZENoYW5nZVNpemUpO1xuXHRcblx0ICAgICAgaWYgKHJlbW92ZWQgJiYgZW50cmllcy5sZW5ndGggPT09IDEpIHtcblx0ICAgICAgICByZXR1cm47IC8vIHVuZGVmaW5lZFxuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoIWV4aXN0cyAmJiAhcmVtb3ZlZCAmJiBlbnRyaWVzLmxlbmd0aCA+PSBNQVhfQVJSQVlfTUFQX1NJWkUpIHtcblx0ICAgICAgICByZXR1cm4gY3JlYXRlTm9kZXMob3duZXJJRCwgZW50cmllcywga2V5LCB2YWx1ZSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBpc0VkaXRhYmxlID0gb3duZXJJRCAmJiBvd25lcklEID09PSB0aGlzLm93bmVySUQ7XG5cdCAgICAgIHZhciBuZXdFbnRyaWVzID0gaXNFZGl0YWJsZSA/IGVudHJpZXMgOiBhcnJDb3B5KGVudHJpZXMpO1xuXHRcblx0ICAgICAgaWYgKGV4aXN0cykge1xuXHQgICAgICAgIGlmIChyZW1vdmVkKSB7XG5cdCAgICAgICAgICBpZHggPT09IGxlbiAtIDEgPyBuZXdFbnRyaWVzLnBvcCgpIDogKG5ld0VudHJpZXNbaWR4XSA9IG5ld0VudHJpZXMucG9wKCkpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBuZXdFbnRyaWVzW2lkeF0gPSBba2V5LCB2YWx1ZV07XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIG5ld0VudHJpZXMucHVzaChba2V5LCB2YWx1ZV0pO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoaXNFZGl0YWJsZSkge1xuXHQgICAgICAgIHRoaXMuZW50cmllcyA9IG5ld0VudHJpZXM7XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiBuZXcgQXJyYXlNYXBOb2RlKG93bmVySUQsIG5ld0VudHJpZXMpO1xuXHQgICAgfTtcblx0XG5cdFxuXHRcblx0XG5cdCAgICBmdW5jdGlvbiBCaXRtYXBJbmRleGVkTm9kZShvd25lcklELCBiaXRtYXAsIG5vZGVzKSB7XG5cdCAgICAgIHRoaXMub3duZXJJRCA9IG93bmVySUQ7XG5cdCAgICAgIHRoaXMuYml0bWFwID0gYml0bWFwO1xuXHQgICAgICB0aGlzLm5vZGVzID0gbm9kZXM7XG5cdCAgICB9XG5cdFxuXHQgICAgQml0bWFwSW5kZXhlZE5vZGUucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKHNoaWZ0LCBrZXlIYXNoLCBrZXksIG5vdFNldFZhbHVlKSB7XG5cdCAgICAgIGlmIChrZXlIYXNoID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICBrZXlIYXNoID0gaGFzaChrZXkpO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBiaXQgPSAoMSA8PCAoKHNoaWZ0ID09PSAwID8ga2V5SGFzaCA6IGtleUhhc2ggPj4+IHNoaWZ0KSAmIE1BU0spKTtcblx0ICAgICAgdmFyIGJpdG1hcCA9IHRoaXMuYml0bWFwO1xuXHQgICAgICByZXR1cm4gKGJpdG1hcCAmIGJpdCkgPT09IDAgPyBub3RTZXRWYWx1ZSA6XG5cdCAgICAgICAgdGhpcy5ub2Rlc1twb3BDb3VudChiaXRtYXAgJiAoYml0IC0gMSkpXS5nZXQoc2hpZnQgKyBTSElGVCwga2V5SGFzaCwga2V5LCBub3RTZXRWYWx1ZSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIEJpdG1hcEluZGV4ZWROb2RlLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbihvd25lcklELCBzaGlmdCwga2V5SGFzaCwga2V5LCB2YWx1ZSwgZGlkQ2hhbmdlU2l6ZSwgZGlkQWx0ZXIpIHtcblx0ICAgICAgaWYgKGtleUhhc2ggPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAgIGtleUhhc2ggPSBoYXNoKGtleSk7XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIGtleUhhc2hGcmFnID0gKHNoaWZ0ID09PSAwID8ga2V5SGFzaCA6IGtleUhhc2ggPj4+IHNoaWZ0KSAmIE1BU0s7XG5cdCAgICAgIHZhciBiaXQgPSAxIDw8IGtleUhhc2hGcmFnO1xuXHQgICAgICB2YXIgYml0bWFwID0gdGhpcy5iaXRtYXA7XG5cdCAgICAgIHZhciBleGlzdHMgPSAoYml0bWFwICYgYml0KSAhPT0gMDtcblx0XG5cdCAgICAgIGlmICghZXhpc3RzICYmIHZhbHVlID09PSBOT1RfU0VUKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBpZHggPSBwb3BDb3VudChiaXRtYXAgJiAoYml0IC0gMSkpO1xuXHQgICAgICB2YXIgbm9kZXMgPSB0aGlzLm5vZGVzO1xuXHQgICAgICB2YXIgbm9kZSA9IGV4aXN0cyA/IG5vZGVzW2lkeF0gOiB1bmRlZmluZWQ7XG5cdCAgICAgIHZhciBuZXdOb2RlID0gdXBkYXRlTm9kZShub2RlLCBvd25lcklELCBzaGlmdCArIFNISUZULCBrZXlIYXNoLCBrZXksIHZhbHVlLCBkaWRDaGFuZ2VTaXplLCBkaWRBbHRlcik7XG5cdFxuXHQgICAgICBpZiAobmV3Tm9kZSA9PT0gbm9kZSkge1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoIWV4aXN0cyAmJiBuZXdOb2RlICYmIG5vZGVzLmxlbmd0aCA+PSBNQVhfQklUTUFQX0lOREVYRURfU0laRSkge1xuXHQgICAgICAgIHJldHVybiBleHBhbmROb2Rlcyhvd25lcklELCBub2RlcywgYml0bWFwLCBrZXlIYXNoRnJhZywgbmV3Tm9kZSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChleGlzdHMgJiYgIW5ld05vZGUgJiYgbm9kZXMubGVuZ3RoID09PSAyICYmIGlzTGVhZk5vZGUobm9kZXNbaWR4IF4gMV0pKSB7XG5cdCAgICAgICAgcmV0dXJuIG5vZGVzW2lkeCBeIDFdO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoZXhpc3RzICYmIG5ld05vZGUgJiYgbm9kZXMubGVuZ3RoID09PSAxICYmIGlzTGVhZk5vZGUobmV3Tm9kZSkpIHtcblx0ICAgICAgICByZXR1cm4gbmV3Tm9kZTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIGlzRWRpdGFibGUgPSBvd25lcklEICYmIG93bmVySUQgPT09IHRoaXMub3duZXJJRDtcblx0ICAgICAgdmFyIG5ld0JpdG1hcCA9IGV4aXN0cyA/IG5ld05vZGUgPyBiaXRtYXAgOiBiaXRtYXAgXiBiaXQgOiBiaXRtYXAgfCBiaXQ7XG5cdCAgICAgIHZhciBuZXdOb2RlcyA9IGV4aXN0cyA/IG5ld05vZGUgP1xuXHQgICAgICAgIHNldEluKG5vZGVzLCBpZHgsIG5ld05vZGUsIGlzRWRpdGFibGUpIDpcblx0ICAgICAgICBzcGxpY2VPdXQobm9kZXMsIGlkeCwgaXNFZGl0YWJsZSkgOlxuXHQgICAgICAgIHNwbGljZUluKG5vZGVzLCBpZHgsIG5ld05vZGUsIGlzRWRpdGFibGUpO1xuXHRcblx0ICAgICAgaWYgKGlzRWRpdGFibGUpIHtcblx0ICAgICAgICB0aGlzLmJpdG1hcCA9IG5ld0JpdG1hcDtcblx0ICAgICAgICB0aGlzLm5vZGVzID0gbmV3Tm9kZXM7XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiBuZXcgQml0bWFwSW5kZXhlZE5vZGUob3duZXJJRCwgbmV3Qml0bWFwLCBuZXdOb2Rlcyk7XG5cdCAgICB9O1xuXHRcblx0XG5cdFxuXHRcblx0ICAgIGZ1bmN0aW9uIEhhc2hBcnJheU1hcE5vZGUob3duZXJJRCwgY291bnQsIG5vZGVzKSB7XG5cdCAgICAgIHRoaXMub3duZXJJRCA9IG93bmVySUQ7XG5cdCAgICAgIHRoaXMuY291bnQgPSBjb3VudDtcblx0ICAgICAgdGhpcy5ub2RlcyA9IG5vZGVzO1xuXHQgICAgfVxuXHRcblx0ICAgIEhhc2hBcnJheU1hcE5vZGUucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKHNoaWZ0LCBrZXlIYXNoLCBrZXksIG5vdFNldFZhbHVlKSB7XG5cdCAgICAgIGlmIChrZXlIYXNoID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICBrZXlIYXNoID0gaGFzaChrZXkpO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBpZHggPSAoc2hpZnQgPT09IDAgPyBrZXlIYXNoIDoga2V5SGFzaCA+Pj4gc2hpZnQpICYgTUFTSztcblx0ICAgICAgdmFyIG5vZGUgPSB0aGlzLm5vZGVzW2lkeF07XG5cdCAgICAgIHJldHVybiBub2RlID8gbm9kZS5nZXQoc2hpZnQgKyBTSElGVCwga2V5SGFzaCwga2V5LCBub3RTZXRWYWx1ZSkgOiBub3RTZXRWYWx1ZTtcblx0ICAgIH07XG5cdFxuXHQgICAgSGFzaEFycmF5TWFwTm9kZS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24ob3duZXJJRCwgc2hpZnQsIGtleUhhc2gsIGtleSwgdmFsdWUsIGRpZENoYW5nZVNpemUsIGRpZEFsdGVyKSB7XG5cdCAgICAgIGlmIChrZXlIYXNoID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICBrZXlIYXNoID0gaGFzaChrZXkpO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBpZHggPSAoc2hpZnQgPT09IDAgPyBrZXlIYXNoIDoga2V5SGFzaCA+Pj4gc2hpZnQpICYgTUFTSztcblx0ICAgICAgdmFyIHJlbW92ZWQgPSB2YWx1ZSA9PT0gTk9UX1NFVDtcblx0ICAgICAgdmFyIG5vZGVzID0gdGhpcy5ub2Rlcztcblx0ICAgICAgdmFyIG5vZGUgPSBub2Rlc1tpZHhdO1xuXHRcblx0ICAgICAgaWYgKHJlbW92ZWQgJiYgIW5vZGUpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIG5ld05vZGUgPSB1cGRhdGVOb2RlKG5vZGUsIG93bmVySUQsIHNoaWZ0ICsgU0hJRlQsIGtleUhhc2gsIGtleSwgdmFsdWUsIGRpZENoYW5nZVNpemUsIGRpZEFsdGVyKTtcblx0ICAgICAgaWYgKG5ld05vZGUgPT09IG5vZGUpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIG5ld0NvdW50ID0gdGhpcy5jb3VudDtcblx0ICAgICAgaWYgKCFub2RlKSB7XG5cdCAgICAgICAgbmV3Q291bnQrKztcblx0ICAgICAgfSBlbHNlIGlmICghbmV3Tm9kZSkge1xuXHQgICAgICAgIG5ld0NvdW50LS07XG5cdCAgICAgICAgaWYgKG5ld0NvdW50IDwgTUlOX0hBU0hfQVJSQVlfTUFQX1NJWkUpIHtcblx0ICAgICAgICAgIHJldHVybiBwYWNrTm9kZXMob3duZXJJRCwgbm9kZXMsIG5ld0NvdW50LCBpZHgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIGlzRWRpdGFibGUgPSBvd25lcklEICYmIG93bmVySUQgPT09IHRoaXMub3duZXJJRDtcblx0ICAgICAgdmFyIG5ld05vZGVzID0gc2V0SW4obm9kZXMsIGlkeCwgbmV3Tm9kZSwgaXNFZGl0YWJsZSk7XG5cdFxuXHQgICAgICBpZiAoaXNFZGl0YWJsZSkge1xuXHQgICAgICAgIHRoaXMuY291bnQgPSBuZXdDb3VudDtcblx0ICAgICAgICB0aGlzLm5vZGVzID0gbmV3Tm9kZXM7XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiBuZXcgSGFzaEFycmF5TWFwTm9kZShvd25lcklELCBuZXdDb3VudCwgbmV3Tm9kZXMpO1xuXHQgICAgfTtcblx0XG5cdFxuXHRcblx0XG5cdCAgICBmdW5jdGlvbiBIYXNoQ29sbGlzaW9uTm9kZShvd25lcklELCBrZXlIYXNoLCBlbnRyaWVzKSB7XG5cdCAgICAgIHRoaXMub3duZXJJRCA9IG93bmVySUQ7XG5cdCAgICAgIHRoaXMua2V5SGFzaCA9IGtleUhhc2g7XG5cdCAgICAgIHRoaXMuZW50cmllcyA9IGVudHJpZXM7XG5cdCAgICB9XG5cdFxuXHQgICAgSGFzaENvbGxpc2lvbk5vZGUucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKHNoaWZ0LCBrZXlIYXNoLCBrZXksIG5vdFNldFZhbHVlKSB7XG5cdCAgICAgIHZhciBlbnRyaWVzID0gdGhpcy5lbnRyaWVzO1xuXHQgICAgICBmb3IgKHZhciBpaSA9IDAsIGxlbiA9IGVudHJpZXMubGVuZ3RoOyBpaSA8IGxlbjsgaWkrKykge1xuXHQgICAgICAgIGlmIChpcyhrZXksIGVudHJpZXNbaWldWzBdKSkge1xuXHQgICAgICAgICAgcmV0dXJuIGVudHJpZXNbaWldWzFdO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gbm90U2V0VmFsdWU7XG5cdCAgICB9O1xuXHRcblx0ICAgIEhhc2hDb2xsaXNpb25Ob2RlLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbihvd25lcklELCBzaGlmdCwga2V5SGFzaCwga2V5LCB2YWx1ZSwgZGlkQ2hhbmdlU2l6ZSwgZGlkQWx0ZXIpIHtcblx0ICAgICAgaWYgKGtleUhhc2ggPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAgIGtleUhhc2ggPSBoYXNoKGtleSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciByZW1vdmVkID0gdmFsdWUgPT09IE5PVF9TRVQ7XG5cdFxuXHQgICAgICBpZiAoa2V5SGFzaCAhPT0gdGhpcy5rZXlIYXNoKSB7XG5cdCAgICAgICAgaWYgKHJlbW92ZWQpIHtcblx0ICAgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBTZXRSZWYoZGlkQWx0ZXIpO1xuXHQgICAgICAgIFNldFJlZihkaWRDaGFuZ2VTaXplKTtcblx0ICAgICAgICByZXR1cm4gbWVyZ2VJbnRvTm9kZSh0aGlzLCBvd25lcklELCBzaGlmdCwga2V5SGFzaCwgW2tleSwgdmFsdWVdKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIGVudHJpZXMgPSB0aGlzLmVudHJpZXM7XG5cdCAgICAgIHZhciBpZHggPSAwO1xuXHQgICAgICBmb3IgKHZhciBsZW4gPSBlbnRyaWVzLmxlbmd0aDsgaWR4IDwgbGVuOyBpZHgrKykge1xuXHQgICAgICAgIGlmIChpcyhrZXksIGVudHJpZXNbaWR4XVswXSkpIHtcblx0ICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICB2YXIgZXhpc3RzID0gaWR4IDwgbGVuO1xuXHRcblx0ICAgICAgaWYgKGV4aXN0cyA/IGVudHJpZXNbaWR4XVsxXSA9PT0gdmFsdWUgOiByZW1vdmVkKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIFNldFJlZihkaWRBbHRlcik7XG5cdCAgICAgIChyZW1vdmVkIHx8ICFleGlzdHMpICYmIFNldFJlZihkaWRDaGFuZ2VTaXplKTtcblx0XG5cdCAgICAgIGlmIChyZW1vdmVkICYmIGxlbiA9PT0gMikge1xuXHQgICAgICAgIHJldHVybiBuZXcgVmFsdWVOb2RlKG93bmVySUQsIHRoaXMua2V5SGFzaCwgZW50cmllc1tpZHggXiAxXSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBpc0VkaXRhYmxlID0gb3duZXJJRCAmJiBvd25lcklEID09PSB0aGlzLm93bmVySUQ7XG5cdCAgICAgIHZhciBuZXdFbnRyaWVzID0gaXNFZGl0YWJsZSA/IGVudHJpZXMgOiBhcnJDb3B5KGVudHJpZXMpO1xuXHRcblx0ICAgICAgaWYgKGV4aXN0cykge1xuXHQgICAgICAgIGlmIChyZW1vdmVkKSB7XG5cdCAgICAgICAgICBpZHggPT09IGxlbiAtIDEgPyBuZXdFbnRyaWVzLnBvcCgpIDogKG5ld0VudHJpZXNbaWR4XSA9IG5ld0VudHJpZXMucG9wKCkpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBuZXdFbnRyaWVzW2lkeF0gPSBba2V5LCB2YWx1ZV07XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIG5ld0VudHJpZXMucHVzaChba2V5LCB2YWx1ZV0pO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoaXNFZGl0YWJsZSkge1xuXHQgICAgICAgIHRoaXMuZW50cmllcyA9IG5ld0VudHJpZXM7XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiBuZXcgSGFzaENvbGxpc2lvbk5vZGUob3duZXJJRCwgdGhpcy5rZXlIYXNoLCBuZXdFbnRyaWVzKTtcblx0ICAgIH07XG5cdFxuXHRcblx0XG5cdFxuXHQgICAgZnVuY3Rpb24gVmFsdWVOb2RlKG93bmVySUQsIGtleUhhc2gsIGVudHJ5KSB7XG5cdCAgICAgIHRoaXMub3duZXJJRCA9IG93bmVySUQ7XG5cdCAgICAgIHRoaXMua2V5SGFzaCA9IGtleUhhc2g7XG5cdCAgICAgIHRoaXMuZW50cnkgPSBlbnRyeTtcblx0ICAgIH1cblx0XG5cdCAgICBWYWx1ZU5vZGUucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKHNoaWZ0LCBrZXlIYXNoLCBrZXksIG5vdFNldFZhbHVlKSB7XG5cdCAgICAgIHJldHVybiBpcyhrZXksIHRoaXMuZW50cnlbMF0pID8gdGhpcy5lbnRyeVsxXSA6IG5vdFNldFZhbHVlO1xuXHQgICAgfTtcblx0XG5cdCAgICBWYWx1ZU5vZGUucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKG93bmVySUQsIHNoaWZ0LCBrZXlIYXNoLCBrZXksIHZhbHVlLCBkaWRDaGFuZ2VTaXplLCBkaWRBbHRlcikge1xuXHQgICAgICB2YXIgcmVtb3ZlZCA9IHZhbHVlID09PSBOT1RfU0VUO1xuXHQgICAgICB2YXIga2V5TWF0Y2ggPSBpcyhrZXksIHRoaXMuZW50cnlbMF0pO1xuXHQgICAgICBpZiAoa2V5TWF0Y2ggPyB2YWx1ZSA9PT0gdGhpcy5lbnRyeVsxXSA6IHJlbW92ZWQpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgICAgfVxuXHRcblx0ICAgICAgU2V0UmVmKGRpZEFsdGVyKTtcblx0XG5cdCAgICAgIGlmIChyZW1vdmVkKSB7XG5cdCAgICAgICAgU2V0UmVmKGRpZENoYW5nZVNpemUpO1xuXHQgICAgICAgIHJldHVybjsgLy8gdW5kZWZpbmVkXG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChrZXlNYXRjaCkge1xuXHQgICAgICAgIGlmIChvd25lcklEICYmIG93bmVySUQgPT09IHRoaXMub3duZXJJRCkge1xuXHQgICAgICAgICAgdGhpcy5lbnRyeVsxXSA9IHZhbHVlO1xuXHQgICAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiBuZXcgVmFsdWVOb2RlKG93bmVySUQsIHRoaXMua2V5SGFzaCwgW2tleSwgdmFsdWVdKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgU2V0UmVmKGRpZENoYW5nZVNpemUpO1xuXHQgICAgICByZXR1cm4gbWVyZ2VJbnRvTm9kZSh0aGlzLCBvd25lcklELCBzaGlmdCwgaGFzaChrZXkpLCBba2V5LCB2YWx1ZV0pO1xuXHQgICAgfTtcblx0XG5cdFxuXHRcblx0ICAvLyAjcHJhZ21hIEl0ZXJhdG9yc1xuXHRcblx0ICBBcnJheU1hcE5vZGUucHJvdG90eXBlLml0ZXJhdGUgPVxuXHQgIEhhc2hDb2xsaXNpb25Ob2RlLnByb3RvdHlwZS5pdGVyYXRlID0gZnVuY3Rpb24gKGZuLCByZXZlcnNlKSB7XG5cdCAgICB2YXIgZW50cmllcyA9IHRoaXMuZW50cmllcztcblx0ICAgIGZvciAodmFyIGlpID0gMCwgbWF4SW5kZXggPSBlbnRyaWVzLmxlbmd0aCAtIDE7IGlpIDw9IG1heEluZGV4OyBpaSsrKSB7XG5cdCAgICAgIGlmIChmbihlbnRyaWVzW3JldmVyc2UgPyBtYXhJbmRleCAtIGlpIDogaWldKSA9PT0gZmFsc2UpIHtcblx0ICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIEJpdG1hcEluZGV4ZWROb2RlLnByb3RvdHlwZS5pdGVyYXRlID1cblx0ICBIYXNoQXJyYXlNYXBOb2RlLnByb3RvdHlwZS5pdGVyYXRlID0gZnVuY3Rpb24gKGZuLCByZXZlcnNlKSB7XG5cdCAgICB2YXIgbm9kZXMgPSB0aGlzLm5vZGVzO1xuXHQgICAgZm9yICh2YXIgaWkgPSAwLCBtYXhJbmRleCA9IG5vZGVzLmxlbmd0aCAtIDE7IGlpIDw9IG1heEluZGV4OyBpaSsrKSB7XG5cdCAgICAgIHZhciBub2RlID0gbm9kZXNbcmV2ZXJzZSA/IG1heEluZGV4IC0gaWkgOiBpaV07XG5cdCAgICAgIGlmIChub2RlICYmIG5vZGUuaXRlcmF0ZShmbiwgcmV2ZXJzZSkgPT09IGZhbHNlKSB7XG5cdCAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBWYWx1ZU5vZGUucHJvdG90eXBlLml0ZXJhdGUgPSBmdW5jdGlvbiAoZm4sIHJldmVyc2UpIHtcblx0ICAgIHJldHVybiBmbih0aGlzLmVudHJ5KTtcblx0ICB9XG5cdFxuXHQgIGNyZWF0ZUNsYXNzKE1hcEl0ZXJhdG9yLCBJdGVyYXRvcik7XG5cdFxuXHQgICAgZnVuY3Rpb24gTWFwSXRlcmF0b3IobWFwLCB0eXBlLCByZXZlcnNlKSB7XG5cdCAgICAgIHRoaXMuX3R5cGUgPSB0eXBlO1xuXHQgICAgICB0aGlzLl9yZXZlcnNlID0gcmV2ZXJzZTtcblx0ICAgICAgdGhpcy5fc3RhY2sgPSBtYXAuX3Jvb3QgJiYgbWFwSXRlcmF0b3JGcmFtZShtYXAuX3Jvb3QpO1xuXHQgICAgfVxuXHRcblx0ICAgIE1hcEl0ZXJhdG9yLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIHZhciB0eXBlID0gdGhpcy5fdHlwZTtcblx0ICAgICAgdmFyIHN0YWNrID0gdGhpcy5fc3RhY2s7XG5cdCAgICAgIHdoaWxlIChzdGFjaykge1xuXHQgICAgICAgIHZhciBub2RlID0gc3RhY2subm9kZTtcblx0ICAgICAgICB2YXIgaW5kZXggPSBzdGFjay5pbmRleCsrO1xuXHQgICAgICAgIHZhciBtYXhJbmRleDtcblx0ICAgICAgICBpZiAobm9kZS5lbnRyeSkge1xuXHQgICAgICAgICAgaWYgKGluZGV4ID09PSAwKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBtYXBJdGVyYXRvclZhbHVlKHR5cGUsIG5vZGUuZW50cnkpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSBpZiAobm9kZS5lbnRyaWVzKSB7XG5cdCAgICAgICAgICBtYXhJbmRleCA9IG5vZGUuZW50cmllcy5sZW5ndGggLSAxO1xuXHQgICAgICAgICAgaWYgKGluZGV4IDw9IG1heEluZGV4KSB7XG5cdCAgICAgICAgICAgIHJldHVybiBtYXBJdGVyYXRvclZhbHVlKHR5cGUsIG5vZGUuZW50cmllc1t0aGlzLl9yZXZlcnNlID8gbWF4SW5kZXggLSBpbmRleCA6IGluZGV4XSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIG1heEluZGV4ID0gbm9kZS5ub2Rlcy5sZW5ndGggLSAxO1xuXHQgICAgICAgICAgaWYgKGluZGV4IDw9IG1heEluZGV4KSB7XG5cdCAgICAgICAgICAgIHZhciBzdWJOb2RlID0gbm9kZS5ub2Rlc1t0aGlzLl9yZXZlcnNlID8gbWF4SW5kZXggLSBpbmRleCA6IGluZGV4XTtcblx0ICAgICAgICAgICAgaWYgKHN1Yk5vZGUpIHtcblx0ICAgICAgICAgICAgICBpZiAoc3ViTm9kZS5lbnRyeSkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIG1hcEl0ZXJhdG9yVmFsdWUodHlwZSwgc3ViTm9kZS5lbnRyeSk7XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgIHN0YWNrID0gdGhpcy5fc3RhY2sgPSBtYXBJdGVyYXRvckZyYW1lKHN1Yk5vZGUsIHN0YWNrKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBjb250aW51ZTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgc3RhY2sgPSB0aGlzLl9zdGFjayA9IHRoaXMuX3N0YWNrLl9fcHJldjtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gaXRlcmF0b3JEb25lKCk7XG5cdCAgICB9O1xuXHRcblx0XG5cdCAgZnVuY3Rpb24gbWFwSXRlcmF0b3JWYWx1ZSh0eXBlLCBlbnRyeSkge1xuXHQgICAgcmV0dXJuIGl0ZXJhdG9yVmFsdWUodHlwZSwgZW50cnlbMF0sIGVudHJ5WzFdKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIG1hcEl0ZXJhdG9yRnJhbWUobm9kZSwgcHJldikge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgbm9kZTogbm9kZSxcblx0ICAgICAgaW5kZXg6IDAsXG5cdCAgICAgIF9fcHJldjogcHJldlxuXHQgICAgfTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIG1ha2VNYXAoc2l6ZSwgcm9vdCwgb3duZXJJRCwgaGFzaCkge1xuXHQgICAgdmFyIG1hcCA9IE9iamVjdC5jcmVhdGUoTWFwUHJvdG90eXBlKTtcblx0ICAgIG1hcC5zaXplID0gc2l6ZTtcblx0ICAgIG1hcC5fcm9vdCA9IHJvb3Q7XG5cdCAgICBtYXAuX19vd25lcklEID0gb3duZXJJRDtcblx0ICAgIG1hcC5fX2hhc2ggPSBoYXNoO1xuXHQgICAgbWFwLl9fYWx0ZXJlZCA9IGZhbHNlO1xuXHQgICAgcmV0dXJuIG1hcDtcblx0ICB9XG5cdFxuXHQgIHZhciBFTVBUWV9NQVA7XG5cdCAgZnVuY3Rpb24gZW1wdHlNYXAoKSB7XG5cdCAgICByZXR1cm4gRU1QVFlfTUFQIHx8IChFTVBUWV9NQVAgPSBtYWtlTWFwKDApKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHVwZGF0ZU1hcChtYXAsIGssIHYpIHtcblx0ICAgIHZhciBuZXdSb290O1xuXHQgICAgdmFyIG5ld1NpemU7XG5cdCAgICBpZiAoIW1hcC5fcm9vdCkge1xuXHQgICAgICBpZiAodiA9PT0gTk9UX1NFVCkge1xuXHQgICAgICAgIHJldHVybiBtYXA7XG5cdCAgICAgIH1cblx0ICAgICAgbmV3U2l6ZSA9IDE7XG5cdCAgICAgIG5ld1Jvb3QgPSBuZXcgQXJyYXlNYXBOb2RlKG1hcC5fX293bmVySUQsIFtbaywgdl1dKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHZhciBkaWRDaGFuZ2VTaXplID0gTWFrZVJlZihDSEFOR0VfTEVOR1RIKTtcblx0ICAgICAgdmFyIGRpZEFsdGVyID0gTWFrZVJlZihESURfQUxURVIpO1xuXHQgICAgICBuZXdSb290ID0gdXBkYXRlTm9kZShtYXAuX3Jvb3QsIG1hcC5fX293bmVySUQsIDAsIHVuZGVmaW5lZCwgaywgdiwgZGlkQ2hhbmdlU2l6ZSwgZGlkQWx0ZXIpO1xuXHQgICAgICBpZiAoIWRpZEFsdGVyLnZhbHVlKSB7XG5cdCAgICAgICAgcmV0dXJuIG1hcDtcblx0ICAgICAgfVxuXHQgICAgICBuZXdTaXplID0gbWFwLnNpemUgKyAoZGlkQ2hhbmdlU2l6ZS52YWx1ZSA/IHYgPT09IE5PVF9TRVQgPyAtMSA6IDEgOiAwKTtcblx0ICAgIH1cblx0ICAgIGlmIChtYXAuX19vd25lcklEKSB7XG5cdCAgICAgIG1hcC5zaXplID0gbmV3U2l6ZTtcblx0ICAgICAgbWFwLl9yb290ID0gbmV3Um9vdDtcblx0ICAgICAgbWFwLl9faGFzaCA9IHVuZGVmaW5lZDtcblx0ICAgICAgbWFwLl9fYWx0ZXJlZCA9IHRydWU7XG5cdCAgICAgIHJldHVybiBtYXA7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gbmV3Um9vdCA/IG1ha2VNYXAobmV3U2l6ZSwgbmV3Um9vdCkgOiBlbXB0eU1hcCgpO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gdXBkYXRlTm9kZShub2RlLCBvd25lcklELCBzaGlmdCwga2V5SGFzaCwga2V5LCB2YWx1ZSwgZGlkQ2hhbmdlU2l6ZSwgZGlkQWx0ZXIpIHtcblx0ICAgIGlmICghbm9kZSkge1xuXHQgICAgICBpZiAodmFsdWUgPT09IE5PVF9TRVQpIHtcblx0ICAgICAgICByZXR1cm4gbm9kZTtcblx0ICAgICAgfVxuXHQgICAgICBTZXRSZWYoZGlkQWx0ZXIpO1xuXHQgICAgICBTZXRSZWYoZGlkQ2hhbmdlU2l6ZSk7XG5cdCAgICAgIHJldHVybiBuZXcgVmFsdWVOb2RlKG93bmVySUQsIGtleUhhc2gsIFtrZXksIHZhbHVlXSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gbm9kZS51cGRhdGUob3duZXJJRCwgc2hpZnQsIGtleUhhc2gsIGtleSwgdmFsdWUsIGRpZENoYW5nZVNpemUsIGRpZEFsdGVyKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGlzTGVhZk5vZGUobm9kZSkge1xuXHQgICAgcmV0dXJuIG5vZGUuY29uc3RydWN0b3IgPT09IFZhbHVlTm9kZSB8fCBub2RlLmNvbnN0cnVjdG9yID09PSBIYXNoQ29sbGlzaW9uTm9kZTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIG1lcmdlSW50b05vZGUobm9kZSwgb3duZXJJRCwgc2hpZnQsIGtleUhhc2gsIGVudHJ5KSB7XG5cdCAgICBpZiAobm9kZS5rZXlIYXNoID09PSBrZXlIYXNoKSB7XG5cdCAgICAgIHJldHVybiBuZXcgSGFzaENvbGxpc2lvbk5vZGUob3duZXJJRCwga2V5SGFzaCwgW25vZGUuZW50cnksIGVudHJ5XSk7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGlkeDEgPSAoc2hpZnQgPT09IDAgPyBub2RlLmtleUhhc2ggOiBub2RlLmtleUhhc2ggPj4+IHNoaWZ0KSAmIE1BU0s7XG5cdCAgICB2YXIgaWR4MiA9IChzaGlmdCA9PT0gMCA/IGtleUhhc2ggOiBrZXlIYXNoID4+PiBzaGlmdCkgJiBNQVNLO1xuXHRcblx0ICAgIHZhciBuZXdOb2RlO1xuXHQgICAgdmFyIG5vZGVzID0gaWR4MSA9PT0gaWR4MiA/XG5cdCAgICAgIFttZXJnZUludG9Ob2RlKG5vZGUsIG93bmVySUQsIHNoaWZ0ICsgU0hJRlQsIGtleUhhc2gsIGVudHJ5KV0gOlxuXHQgICAgICAoKG5ld05vZGUgPSBuZXcgVmFsdWVOb2RlKG93bmVySUQsIGtleUhhc2gsIGVudHJ5KSksIGlkeDEgPCBpZHgyID8gW25vZGUsIG5ld05vZGVdIDogW25ld05vZGUsIG5vZGVdKTtcblx0XG5cdCAgICByZXR1cm4gbmV3IEJpdG1hcEluZGV4ZWROb2RlKG93bmVySUQsICgxIDw8IGlkeDEpIHwgKDEgPDwgaWR4MiksIG5vZGVzKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGNyZWF0ZU5vZGVzKG93bmVySUQsIGVudHJpZXMsIGtleSwgdmFsdWUpIHtcblx0ICAgIGlmICghb3duZXJJRCkge1xuXHQgICAgICBvd25lcklEID0gbmV3IE93bmVySUQoKTtcblx0ICAgIH1cblx0ICAgIHZhciBub2RlID0gbmV3IFZhbHVlTm9kZShvd25lcklELCBoYXNoKGtleSksIFtrZXksIHZhbHVlXSk7XG5cdCAgICBmb3IgKHZhciBpaSA9IDA7IGlpIDwgZW50cmllcy5sZW5ndGg7IGlpKyspIHtcblx0ICAgICAgdmFyIGVudHJ5ID0gZW50cmllc1tpaV07XG5cdCAgICAgIG5vZGUgPSBub2RlLnVwZGF0ZShvd25lcklELCAwLCB1bmRlZmluZWQsIGVudHJ5WzBdLCBlbnRyeVsxXSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gbm9kZTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHBhY2tOb2Rlcyhvd25lcklELCBub2RlcywgY291bnQsIGV4Y2x1ZGluZykge1xuXHQgICAgdmFyIGJpdG1hcCA9IDA7XG5cdCAgICB2YXIgcGFja2VkSUkgPSAwO1xuXHQgICAgdmFyIHBhY2tlZE5vZGVzID0gbmV3IEFycmF5KGNvdW50KTtcblx0ICAgIGZvciAodmFyIGlpID0gMCwgYml0ID0gMSwgbGVuID0gbm9kZXMubGVuZ3RoOyBpaSA8IGxlbjsgaWkrKywgYml0IDw8PSAxKSB7XG5cdCAgICAgIHZhciBub2RlID0gbm9kZXNbaWldO1xuXHQgICAgICBpZiAobm9kZSAhPT0gdW5kZWZpbmVkICYmIGlpICE9PSBleGNsdWRpbmcpIHtcblx0ICAgICAgICBiaXRtYXAgfD0gYml0O1xuXHQgICAgICAgIHBhY2tlZE5vZGVzW3BhY2tlZElJKytdID0gbm9kZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIG5ldyBCaXRtYXBJbmRleGVkTm9kZShvd25lcklELCBiaXRtYXAsIHBhY2tlZE5vZGVzKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGV4cGFuZE5vZGVzKG93bmVySUQsIG5vZGVzLCBiaXRtYXAsIGluY2x1ZGluZywgbm9kZSkge1xuXHQgICAgdmFyIGNvdW50ID0gMDtcblx0ICAgIHZhciBleHBhbmRlZE5vZGVzID0gbmV3IEFycmF5KFNJWkUpO1xuXHQgICAgZm9yICh2YXIgaWkgPSAwOyBiaXRtYXAgIT09IDA7IGlpKyssIGJpdG1hcCA+Pj49IDEpIHtcblx0ICAgICAgZXhwYW5kZWROb2Rlc1tpaV0gPSBiaXRtYXAgJiAxID8gbm9kZXNbY291bnQrK10gOiB1bmRlZmluZWQ7XG5cdCAgICB9XG5cdCAgICBleHBhbmRlZE5vZGVzW2luY2x1ZGluZ10gPSBub2RlO1xuXHQgICAgcmV0dXJuIG5ldyBIYXNoQXJyYXlNYXBOb2RlKG93bmVySUQsIGNvdW50ICsgMSwgZXhwYW5kZWROb2Rlcyk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBtZXJnZUludG9NYXBXaXRoKG1hcCwgbWVyZ2VyLCBpdGVyYWJsZXMpIHtcblx0ICAgIHZhciBpdGVycyA9IFtdO1xuXHQgICAgZm9yICh2YXIgaWkgPSAwOyBpaSA8IGl0ZXJhYmxlcy5sZW5ndGg7IGlpKyspIHtcblx0ICAgICAgdmFyIHZhbHVlID0gaXRlcmFibGVzW2lpXTtcblx0ICAgICAgdmFyIGl0ZXIgPSBLZXllZEl0ZXJhYmxlKHZhbHVlKTtcblx0ICAgICAgaWYgKCFpc0l0ZXJhYmxlKHZhbHVlKSkge1xuXHQgICAgICAgIGl0ZXIgPSBpdGVyLm1hcChmdW5jdGlvbih2ICkge3JldHVybiBmcm9tSlModil9KTtcblx0ICAgICAgfVxuXHQgICAgICBpdGVycy5wdXNoKGl0ZXIpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIG1lcmdlSW50b0NvbGxlY3Rpb25XaXRoKG1hcCwgbWVyZ2VyLCBpdGVycyk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBkZWVwTWVyZ2VyKGV4aXN0aW5nLCB2YWx1ZSwga2V5KSB7XG5cdCAgICByZXR1cm4gZXhpc3RpbmcgJiYgZXhpc3RpbmcubWVyZ2VEZWVwICYmIGlzSXRlcmFibGUodmFsdWUpID9cblx0ICAgICAgZXhpc3RpbmcubWVyZ2VEZWVwKHZhbHVlKSA6XG5cdCAgICAgIGlzKGV4aXN0aW5nLCB2YWx1ZSkgPyBleGlzdGluZyA6IHZhbHVlO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gZGVlcE1lcmdlcldpdGgobWVyZ2VyKSB7XG5cdCAgICByZXR1cm4gZnVuY3Rpb24oZXhpc3RpbmcsIHZhbHVlLCBrZXkpICB7XG5cdCAgICAgIGlmIChleGlzdGluZyAmJiBleGlzdGluZy5tZXJnZURlZXBXaXRoICYmIGlzSXRlcmFibGUodmFsdWUpKSB7XG5cdCAgICAgICAgcmV0dXJuIGV4aXN0aW5nLm1lcmdlRGVlcFdpdGgobWVyZ2VyLCB2YWx1ZSk7XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIG5leHRWYWx1ZSA9IG1lcmdlcihleGlzdGluZywgdmFsdWUsIGtleSk7XG5cdCAgICAgIHJldHVybiBpcyhleGlzdGluZywgbmV4dFZhbHVlKSA/IGV4aXN0aW5nIDogbmV4dFZhbHVlO1xuXHQgICAgfTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIG1lcmdlSW50b0NvbGxlY3Rpb25XaXRoKGNvbGxlY3Rpb24sIG1lcmdlciwgaXRlcnMpIHtcblx0ICAgIGl0ZXJzID0gaXRlcnMuZmlsdGVyKGZ1bmN0aW9uKHggKSB7cmV0dXJuIHguc2l6ZSAhPT0gMH0pO1xuXHQgICAgaWYgKGl0ZXJzLmxlbmd0aCA9PT0gMCkge1xuXHQgICAgICByZXR1cm4gY29sbGVjdGlvbjtcblx0ICAgIH1cblx0ICAgIGlmIChjb2xsZWN0aW9uLnNpemUgPT09IDAgJiYgIWNvbGxlY3Rpb24uX19vd25lcklEICYmIGl0ZXJzLmxlbmd0aCA9PT0gMSkge1xuXHQgICAgICByZXR1cm4gY29sbGVjdGlvbi5jb25zdHJ1Y3RvcihpdGVyc1swXSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gY29sbGVjdGlvbi53aXRoTXV0YXRpb25zKGZ1bmN0aW9uKGNvbGxlY3Rpb24gKSB7XG5cdCAgICAgIHZhciBtZXJnZUludG9NYXAgPSBtZXJnZXIgP1xuXHQgICAgICAgIGZ1bmN0aW9uKHZhbHVlLCBrZXkpICB7XG5cdCAgICAgICAgICBjb2xsZWN0aW9uLnVwZGF0ZShrZXksIE5PVF9TRVQsIGZ1bmN0aW9uKGV4aXN0aW5nIClcblx0ICAgICAgICAgICAge3JldHVybiBleGlzdGluZyA9PT0gTk9UX1NFVCA/IHZhbHVlIDogbWVyZ2VyKGV4aXN0aW5nLCB2YWx1ZSwga2V5KX1cblx0ICAgICAgICAgICk7XG5cdCAgICAgICAgfSA6XG5cdCAgICAgICAgZnVuY3Rpb24odmFsdWUsIGtleSkgIHtcblx0ICAgICAgICAgIGNvbGxlY3Rpb24uc2V0KGtleSwgdmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgZm9yICh2YXIgaWkgPSAwOyBpaSA8IGl0ZXJzLmxlbmd0aDsgaWkrKykge1xuXHQgICAgICAgIGl0ZXJzW2lpXS5mb3JFYWNoKG1lcmdlSW50b01hcCk7XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gdXBkYXRlSW5EZWVwTWFwKGV4aXN0aW5nLCBrZXlQYXRoSXRlciwgbm90U2V0VmFsdWUsIHVwZGF0ZXIpIHtcblx0ICAgIHZhciBpc05vdFNldCA9IGV4aXN0aW5nID09PSBOT1RfU0VUO1xuXHQgICAgdmFyIHN0ZXAgPSBrZXlQYXRoSXRlci5uZXh0KCk7XG5cdCAgICBpZiAoc3RlcC5kb25lKSB7XG5cdCAgICAgIHZhciBleGlzdGluZ1ZhbHVlID0gaXNOb3RTZXQgPyBub3RTZXRWYWx1ZSA6IGV4aXN0aW5nO1xuXHQgICAgICB2YXIgbmV3VmFsdWUgPSB1cGRhdGVyKGV4aXN0aW5nVmFsdWUpO1xuXHQgICAgICByZXR1cm4gbmV3VmFsdWUgPT09IGV4aXN0aW5nVmFsdWUgPyBleGlzdGluZyA6IG5ld1ZhbHVlO1xuXHQgICAgfVxuXHQgICAgaW52YXJpYW50KFxuXHQgICAgICBpc05vdFNldCB8fCAoZXhpc3RpbmcgJiYgZXhpc3Rpbmcuc2V0KSxcblx0ICAgICAgJ2ludmFsaWQga2V5UGF0aCdcblx0ICAgICk7XG5cdCAgICB2YXIga2V5ID0gc3RlcC52YWx1ZTtcblx0ICAgIHZhciBuZXh0RXhpc3RpbmcgPSBpc05vdFNldCA/IE5PVF9TRVQgOiBleGlzdGluZy5nZXQoa2V5LCBOT1RfU0VUKTtcblx0ICAgIHZhciBuZXh0VXBkYXRlZCA9IHVwZGF0ZUluRGVlcE1hcChcblx0ICAgICAgbmV4dEV4aXN0aW5nLFxuXHQgICAgICBrZXlQYXRoSXRlcixcblx0ICAgICAgbm90U2V0VmFsdWUsXG5cdCAgICAgIHVwZGF0ZXJcblx0ICAgICk7XG5cdCAgICByZXR1cm4gbmV4dFVwZGF0ZWQgPT09IG5leHRFeGlzdGluZyA/IGV4aXN0aW5nIDpcblx0ICAgICAgbmV4dFVwZGF0ZWQgPT09IE5PVF9TRVQgPyBleGlzdGluZy5yZW1vdmUoa2V5KSA6XG5cdCAgICAgIChpc05vdFNldCA/IGVtcHR5TWFwKCkgOiBleGlzdGluZykuc2V0KGtleSwgbmV4dFVwZGF0ZWQpO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gcG9wQ291bnQoeCkge1xuXHQgICAgeCA9IHggLSAoKHggPj4gMSkgJiAweDU1NTU1NTU1KTtcblx0ICAgIHggPSAoeCAmIDB4MzMzMzMzMzMpICsgKCh4ID4+IDIpICYgMHgzMzMzMzMzMyk7XG5cdCAgICB4ID0gKHggKyAoeCA+PiA0KSkgJiAweDBmMGYwZjBmO1xuXHQgICAgeCA9IHggKyAoeCA+PiA4KTtcblx0ICAgIHggPSB4ICsgKHggPj4gMTYpO1xuXHQgICAgcmV0dXJuIHggJiAweDdmO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gc2V0SW4oYXJyYXksIGlkeCwgdmFsLCBjYW5FZGl0KSB7XG5cdCAgICB2YXIgbmV3QXJyYXkgPSBjYW5FZGl0ID8gYXJyYXkgOiBhcnJDb3B5KGFycmF5KTtcblx0ICAgIG5ld0FycmF5W2lkeF0gPSB2YWw7XG5cdCAgICByZXR1cm4gbmV3QXJyYXk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBzcGxpY2VJbihhcnJheSwgaWR4LCB2YWwsIGNhbkVkaXQpIHtcblx0ICAgIHZhciBuZXdMZW4gPSBhcnJheS5sZW5ndGggKyAxO1xuXHQgICAgaWYgKGNhbkVkaXQgJiYgaWR4ICsgMSA9PT0gbmV3TGVuKSB7XG5cdCAgICAgIGFycmF5W2lkeF0gPSB2YWw7XG5cdCAgICAgIHJldHVybiBhcnJheTtcblx0ICAgIH1cblx0ICAgIHZhciBuZXdBcnJheSA9IG5ldyBBcnJheShuZXdMZW4pO1xuXHQgICAgdmFyIGFmdGVyID0gMDtcblx0ICAgIGZvciAodmFyIGlpID0gMDsgaWkgPCBuZXdMZW47IGlpKyspIHtcblx0ICAgICAgaWYgKGlpID09PSBpZHgpIHtcblx0ICAgICAgICBuZXdBcnJheVtpaV0gPSB2YWw7XG5cdCAgICAgICAgYWZ0ZXIgPSAtMTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBuZXdBcnJheVtpaV0gPSBhcnJheVtpaSArIGFmdGVyXTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIG5ld0FycmF5O1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gc3BsaWNlT3V0KGFycmF5LCBpZHgsIGNhbkVkaXQpIHtcblx0ICAgIHZhciBuZXdMZW4gPSBhcnJheS5sZW5ndGggLSAxO1xuXHQgICAgaWYgKGNhbkVkaXQgJiYgaWR4ID09PSBuZXdMZW4pIHtcblx0ICAgICAgYXJyYXkucG9wKCk7XG5cdCAgICAgIHJldHVybiBhcnJheTtcblx0ICAgIH1cblx0ICAgIHZhciBuZXdBcnJheSA9IG5ldyBBcnJheShuZXdMZW4pO1xuXHQgICAgdmFyIGFmdGVyID0gMDtcblx0ICAgIGZvciAodmFyIGlpID0gMDsgaWkgPCBuZXdMZW47IGlpKyspIHtcblx0ICAgICAgaWYgKGlpID09PSBpZHgpIHtcblx0ICAgICAgICBhZnRlciA9IDE7XG5cdCAgICAgIH1cblx0ICAgICAgbmV3QXJyYXlbaWldID0gYXJyYXlbaWkgKyBhZnRlcl07XG5cdCAgICB9XG5cdCAgICByZXR1cm4gbmV3QXJyYXk7XG5cdCAgfVxuXHRcblx0ICB2YXIgTUFYX0FSUkFZX01BUF9TSVpFID0gU0laRSAvIDQ7XG5cdCAgdmFyIE1BWF9CSVRNQVBfSU5ERVhFRF9TSVpFID0gU0laRSAvIDI7XG5cdCAgdmFyIE1JTl9IQVNIX0FSUkFZX01BUF9TSVpFID0gU0laRSAvIDQ7XG5cdFxuXHQgIGNyZWF0ZUNsYXNzKExpc3QsIEluZGV4ZWRDb2xsZWN0aW9uKTtcblx0XG5cdCAgICAvLyBAcHJhZ21hIENvbnN0cnVjdGlvblxuXHRcblx0ICAgIGZ1bmN0aW9uIExpc3QodmFsdWUpIHtcblx0ICAgICAgdmFyIGVtcHR5ID0gZW1wdHlMaXN0KCk7XG5cdCAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgICAgcmV0dXJuIGVtcHR5O1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChpc0xpc3QodmFsdWUpKSB7XG5cdCAgICAgICAgcmV0dXJuIHZhbHVlO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBpdGVyID0gSW5kZXhlZEl0ZXJhYmxlKHZhbHVlKTtcblx0ICAgICAgdmFyIHNpemUgPSBpdGVyLnNpemU7XG5cdCAgICAgIGlmIChzaXplID09PSAwKSB7XG5cdCAgICAgICAgcmV0dXJuIGVtcHR5O1xuXHQgICAgICB9XG5cdCAgICAgIGFzc2VydE5vdEluZmluaXRlKHNpemUpO1xuXHQgICAgICBpZiAoc2l6ZSA+IDAgJiYgc2l6ZSA8IFNJWkUpIHtcblx0ICAgICAgICByZXR1cm4gbWFrZUxpc3QoMCwgc2l6ZSwgU0hJRlQsIG51bGwsIG5ldyBWTm9kZShpdGVyLnRvQXJyYXkoKSkpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBlbXB0eS53aXRoTXV0YXRpb25zKGZ1bmN0aW9uKGxpc3QgKSB7XG5cdCAgICAgICAgbGlzdC5zZXRTaXplKHNpemUpO1xuXHQgICAgICAgIGl0ZXIuZm9yRWFjaChmdW5jdGlvbih2LCBpKSAge3JldHVybiBsaXN0LnNldChpLCB2KX0pO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0XG5cdCAgICBMaXN0Lm9mID0gZnVuY3Rpb24oLyouLi52YWx1ZXMqLykge1xuXHQgICAgICByZXR1cm4gdGhpcyhhcmd1bWVudHMpO1xuXHQgICAgfTtcblx0XG5cdCAgICBMaXN0LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gdGhpcy5fX3RvU3RyaW5nKCdMaXN0IFsnLCAnXScpO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBAcHJhZ21hIEFjY2Vzc1xuXHRcblx0ICAgIExpc3QucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKGluZGV4LCBub3RTZXRWYWx1ZSkge1xuXHQgICAgICBpbmRleCA9IHdyYXBJbmRleCh0aGlzLCBpbmRleCk7XG5cdCAgICAgIGlmIChpbmRleCA+PSAwICYmIGluZGV4IDwgdGhpcy5zaXplKSB7XG5cdCAgICAgICAgaW5kZXggKz0gdGhpcy5fb3JpZ2luO1xuXHQgICAgICAgIHZhciBub2RlID0gbGlzdE5vZGVGb3IodGhpcywgaW5kZXgpO1xuXHQgICAgICAgIHJldHVybiBub2RlICYmIG5vZGUuYXJyYXlbaW5kZXggJiBNQVNLXTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gbm90U2V0VmFsdWU7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIEBwcmFnbWEgTW9kaWZpY2F0aW9uXG5cdFxuXHQgICAgTGlzdC5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24oaW5kZXgsIHZhbHVlKSB7XG5cdCAgICAgIHJldHVybiB1cGRhdGVMaXN0KHRoaXMsIGluZGV4LCB2YWx1ZSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIExpc3QucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uKGluZGV4KSB7XG5cdCAgICAgIHJldHVybiAhdGhpcy5oYXMoaW5kZXgpID8gdGhpcyA6XG5cdCAgICAgICAgaW5kZXggPT09IDAgPyB0aGlzLnNoaWZ0KCkgOlxuXHQgICAgICAgIGluZGV4ID09PSB0aGlzLnNpemUgLSAxID8gdGhpcy5wb3AoKSA6XG5cdCAgICAgICAgdGhpcy5zcGxpY2UoaW5kZXgsIDEpO1xuXHQgICAgfTtcblx0XG5cdCAgICBMaXN0LnByb3RvdHlwZS5pbnNlcnQgPSBmdW5jdGlvbihpbmRleCwgdmFsdWUpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuc3BsaWNlKGluZGV4LCAwLCB2YWx1ZSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIExpc3QucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIGlmICh0aGlzLnNpemUgPT09IDApIHtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgICAgfVxuXHQgICAgICBpZiAodGhpcy5fX293bmVySUQpIHtcblx0ICAgICAgICB0aGlzLnNpemUgPSB0aGlzLl9vcmlnaW4gPSB0aGlzLl9jYXBhY2l0eSA9IDA7XG5cdCAgICAgICAgdGhpcy5fbGV2ZWwgPSBTSElGVDtcblx0ICAgICAgICB0aGlzLl9yb290ID0gdGhpcy5fdGFpbCA9IG51bGw7XG5cdCAgICAgICAgdGhpcy5fX2hhc2ggPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgdGhpcy5fX2FsdGVyZWQgPSB0cnVlO1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBlbXB0eUxpc3QoKTtcblx0ICAgIH07XG5cdFxuXHQgICAgTGlzdC5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uKC8qLi4udmFsdWVzKi8pIHtcblx0ICAgICAgdmFyIHZhbHVlcyA9IGFyZ3VtZW50cztcblx0ICAgICAgdmFyIG9sZFNpemUgPSB0aGlzLnNpemU7XG5cdCAgICAgIHJldHVybiB0aGlzLndpdGhNdXRhdGlvbnMoZnVuY3Rpb24obGlzdCApIHtcblx0ICAgICAgICBzZXRMaXN0Qm91bmRzKGxpc3QsIDAsIG9sZFNpemUgKyB2YWx1ZXMubGVuZ3RoKTtcblx0ICAgICAgICBmb3IgKHZhciBpaSA9IDA7IGlpIDwgdmFsdWVzLmxlbmd0aDsgaWkrKykge1xuXHQgICAgICAgICAgbGlzdC5zZXQob2xkU2l6ZSArIGlpLCB2YWx1ZXNbaWldKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfTtcblx0XG5cdCAgICBMaXN0LnByb3RvdHlwZS5wb3AgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIHNldExpc3RCb3VuZHModGhpcywgMCwgLTEpO1xuXHQgICAgfTtcblx0XG5cdCAgICBMaXN0LnByb3RvdHlwZS51bnNoaWZ0ID0gZnVuY3Rpb24oLyouLi52YWx1ZXMqLykge1xuXHQgICAgICB2YXIgdmFsdWVzID0gYXJndW1lbnRzO1xuXHQgICAgICByZXR1cm4gdGhpcy53aXRoTXV0YXRpb25zKGZ1bmN0aW9uKGxpc3QgKSB7XG5cdCAgICAgICAgc2V0TGlzdEJvdW5kcyhsaXN0LCAtdmFsdWVzLmxlbmd0aCk7XG5cdCAgICAgICAgZm9yICh2YXIgaWkgPSAwOyBpaSA8IHZhbHVlcy5sZW5ndGg7IGlpKyspIHtcblx0ICAgICAgICAgIGxpc3Quc2V0KGlpLCB2YWx1ZXNbaWldKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfTtcblx0XG5cdCAgICBMaXN0LnByb3RvdHlwZS5zaGlmdCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gc2V0TGlzdEJvdW5kcyh0aGlzLCAxKTtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gQHByYWdtYSBDb21wb3NpdGlvblxuXHRcblx0ICAgIExpc3QucHJvdG90eXBlLm1lcmdlID0gZnVuY3Rpb24oLyouLi5pdGVycyovKSB7XG5cdCAgICAgIHJldHVybiBtZXJnZUludG9MaXN0V2l0aCh0aGlzLCB1bmRlZmluZWQsIGFyZ3VtZW50cyk7XG5cdCAgICB9O1xuXHRcblx0ICAgIExpc3QucHJvdG90eXBlLm1lcmdlV2l0aCA9IGZ1bmN0aW9uKG1lcmdlcikge3ZhciBpdGVycyA9IFNMSUNFJDAuY2FsbChhcmd1bWVudHMsIDEpO1xuXHQgICAgICByZXR1cm4gbWVyZ2VJbnRvTGlzdFdpdGgodGhpcywgbWVyZ2VyLCBpdGVycyk7XG5cdCAgICB9O1xuXHRcblx0ICAgIExpc3QucHJvdG90eXBlLm1lcmdlRGVlcCA9IGZ1bmN0aW9uKC8qLi4uaXRlcnMqLykge1xuXHQgICAgICByZXR1cm4gbWVyZ2VJbnRvTGlzdFdpdGgodGhpcywgZGVlcE1lcmdlciwgYXJndW1lbnRzKTtcblx0ICAgIH07XG5cdFxuXHQgICAgTGlzdC5wcm90b3R5cGUubWVyZ2VEZWVwV2l0aCA9IGZ1bmN0aW9uKG1lcmdlcikge3ZhciBpdGVycyA9IFNMSUNFJDAuY2FsbChhcmd1bWVudHMsIDEpO1xuXHQgICAgICByZXR1cm4gbWVyZ2VJbnRvTGlzdFdpdGgodGhpcywgZGVlcE1lcmdlcldpdGgobWVyZ2VyKSwgaXRlcnMpO1xuXHQgICAgfTtcblx0XG5cdCAgICBMaXN0LnByb3RvdHlwZS5zZXRTaXplID0gZnVuY3Rpb24oc2l6ZSkge1xuXHQgICAgICByZXR1cm4gc2V0TGlzdEJvdW5kcyh0aGlzLCAwLCBzaXplKTtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gQHByYWdtYSBJdGVyYXRpb25cblx0XG5cdCAgICBMaXN0LnByb3RvdHlwZS5zbGljZSA9IGZ1bmN0aW9uKGJlZ2luLCBlbmQpIHtcblx0ICAgICAgdmFyIHNpemUgPSB0aGlzLnNpemU7XG5cdCAgICAgIGlmICh3aG9sZVNsaWNlKGJlZ2luLCBlbmQsIHNpemUpKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHNldExpc3RCb3VuZHMoXG5cdCAgICAgICAgdGhpcyxcblx0ICAgICAgICByZXNvbHZlQmVnaW4oYmVnaW4sIHNpemUpLFxuXHQgICAgICAgIHJlc29sdmVFbmQoZW5kLCBzaXplKVxuXHQgICAgICApO1xuXHQgICAgfTtcblx0XG5cdCAgICBMaXN0LnByb3RvdHlwZS5fX2l0ZXJhdG9yID0gZnVuY3Rpb24odHlwZSwgcmV2ZXJzZSkge1xuXHQgICAgICB2YXIgaW5kZXggPSAwO1xuXHQgICAgICB2YXIgdmFsdWVzID0gaXRlcmF0ZUxpc3QodGhpcywgcmV2ZXJzZSk7XG5cdCAgICAgIHJldHVybiBuZXcgSXRlcmF0b3IoZnVuY3Rpb24oKSAge1xuXHQgICAgICAgIHZhciB2YWx1ZSA9IHZhbHVlcygpO1xuXHQgICAgICAgIHJldHVybiB2YWx1ZSA9PT0gRE9ORSA/XG5cdCAgICAgICAgICBpdGVyYXRvckRvbmUoKSA6XG5cdCAgICAgICAgICBpdGVyYXRvclZhbHVlKHR5cGUsIGluZGV4KyssIHZhbHVlKTtcblx0ICAgICAgfSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIExpc3QucHJvdG90eXBlLl9faXRlcmF0ZSA9IGZ1bmN0aW9uKGZuLCByZXZlcnNlKSB7XG5cdCAgICAgIHZhciBpbmRleCA9IDA7XG5cdCAgICAgIHZhciB2YWx1ZXMgPSBpdGVyYXRlTGlzdCh0aGlzLCByZXZlcnNlKTtcblx0ICAgICAgdmFyIHZhbHVlO1xuXHQgICAgICB3aGlsZSAoKHZhbHVlID0gdmFsdWVzKCkpICE9PSBET05FKSB7XG5cdCAgICAgICAgaWYgKGZuKHZhbHVlLCBpbmRleCsrLCB0aGlzKSA9PT0gZmFsc2UpIHtcblx0ICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gaW5kZXg7XG5cdCAgICB9O1xuXHRcblx0ICAgIExpc3QucHJvdG90eXBlLl9fZW5zdXJlT3duZXIgPSBmdW5jdGlvbihvd25lcklEKSB7XG5cdCAgICAgIGlmIChvd25lcklEID09PSB0aGlzLl9fb3duZXJJRCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgICB9XG5cdCAgICAgIGlmICghb3duZXJJRCkge1xuXHQgICAgICAgIHRoaXMuX19vd25lcklEID0gb3duZXJJRDtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gbWFrZUxpc3QodGhpcy5fb3JpZ2luLCB0aGlzLl9jYXBhY2l0eSwgdGhpcy5fbGV2ZWwsIHRoaXMuX3Jvb3QsIHRoaXMuX3RhaWwsIG93bmVySUQsIHRoaXMuX19oYXNoKTtcblx0ICAgIH07XG5cdFxuXHRcblx0ICBmdW5jdGlvbiBpc0xpc3QobWF5YmVMaXN0KSB7XG5cdCAgICByZXR1cm4gISEobWF5YmVMaXN0ICYmIG1heWJlTGlzdFtJU19MSVNUX1NFTlRJTkVMXSk7XG5cdCAgfVxuXHRcblx0ICBMaXN0LmlzTGlzdCA9IGlzTGlzdDtcblx0XG5cdCAgdmFyIElTX0xJU1RfU0VOVElORUwgPSAnQEBfX0lNTVVUQUJMRV9MSVNUX19AQCc7XG5cdFxuXHQgIHZhciBMaXN0UHJvdG90eXBlID0gTGlzdC5wcm90b3R5cGU7XG5cdCAgTGlzdFByb3RvdHlwZVtJU19MSVNUX1NFTlRJTkVMXSA9IHRydWU7XG5cdCAgTGlzdFByb3RvdHlwZVtERUxFVEVdID0gTGlzdFByb3RvdHlwZS5yZW1vdmU7XG5cdCAgTGlzdFByb3RvdHlwZS5zZXRJbiA9IE1hcFByb3RvdHlwZS5zZXRJbjtcblx0ICBMaXN0UHJvdG90eXBlLmRlbGV0ZUluID1cblx0ICBMaXN0UHJvdG90eXBlLnJlbW92ZUluID0gTWFwUHJvdG90eXBlLnJlbW92ZUluO1xuXHQgIExpc3RQcm90b3R5cGUudXBkYXRlID0gTWFwUHJvdG90eXBlLnVwZGF0ZTtcblx0ICBMaXN0UHJvdG90eXBlLnVwZGF0ZUluID0gTWFwUHJvdG90eXBlLnVwZGF0ZUluO1xuXHQgIExpc3RQcm90b3R5cGUubWVyZ2VJbiA9IE1hcFByb3RvdHlwZS5tZXJnZUluO1xuXHQgIExpc3RQcm90b3R5cGUubWVyZ2VEZWVwSW4gPSBNYXBQcm90b3R5cGUubWVyZ2VEZWVwSW47XG5cdCAgTGlzdFByb3RvdHlwZS53aXRoTXV0YXRpb25zID0gTWFwUHJvdG90eXBlLndpdGhNdXRhdGlvbnM7XG5cdCAgTGlzdFByb3RvdHlwZS5hc011dGFibGUgPSBNYXBQcm90b3R5cGUuYXNNdXRhYmxlO1xuXHQgIExpc3RQcm90b3R5cGUuYXNJbW11dGFibGUgPSBNYXBQcm90b3R5cGUuYXNJbW11dGFibGU7XG5cdCAgTGlzdFByb3RvdHlwZS53YXNBbHRlcmVkID0gTWFwUHJvdG90eXBlLndhc0FsdGVyZWQ7XG5cdFxuXHRcblx0XG5cdCAgICBmdW5jdGlvbiBWTm9kZShhcnJheSwgb3duZXJJRCkge1xuXHQgICAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG5cdCAgICAgIHRoaXMub3duZXJJRCA9IG93bmVySUQ7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gVE9ETzogc2VlbXMgbGlrZSB0aGVzZSBtZXRob2RzIGFyZSB2ZXJ5IHNpbWlsYXJcblx0XG5cdCAgICBWTm9kZS5wcm90b3R5cGUucmVtb3ZlQmVmb3JlID0gZnVuY3Rpb24ob3duZXJJRCwgbGV2ZWwsIGluZGV4KSB7XG5cdCAgICAgIGlmIChpbmRleCA9PT0gbGV2ZWwgPyAxIDw8IGxldmVsIDogMCB8fCB0aGlzLmFycmF5Lmxlbmd0aCA9PT0gMCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBvcmlnaW5JbmRleCA9IChpbmRleCA+Pj4gbGV2ZWwpICYgTUFTSztcblx0ICAgICAgaWYgKG9yaWdpbkluZGV4ID49IHRoaXMuYXJyYXkubGVuZ3RoKSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBWTm9kZShbXSwgb3duZXJJRCk7XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIHJlbW92aW5nRmlyc3QgPSBvcmlnaW5JbmRleCA9PT0gMDtcblx0ICAgICAgdmFyIG5ld0NoaWxkO1xuXHQgICAgICBpZiAobGV2ZWwgPiAwKSB7XG5cdCAgICAgICAgdmFyIG9sZENoaWxkID0gdGhpcy5hcnJheVtvcmlnaW5JbmRleF07XG5cdCAgICAgICAgbmV3Q2hpbGQgPSBvbGRDaGlsZCAmJiBvbGRDaGlsZC5yZW1vdmVCZWZvcmUob3duZXJJRCwgbGV2ZWwgLSBTSElGVCwgaW5kZXgpO1xuXHQgICAgICAgIGlmIChuZXdDaGlsZCA9PT0gb2xkQ2hpbGQgJiYgcmVtb3ZpbmdGaXJzdCkge1xuXHQgICAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIGlmIChyZW1vdmluZ0ZpcnN0ICYmICFuZXdDaGlsZCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBlZGl0YWJsZSA9IGVkaXRhYmxlVk5vZGUodGhpcywgb3duZXJJRCk7XG5cdCAgICAgIGlmICghcmVtb3ZpbmdGaXJzdCkge1xuXHQgICAgICAgIGZvciAodmFyIGlpID0gMDsgaWkgPCBvcmlnaW5JbmRleDsgaWkrKykge1xuXHQgICAgICAgICAgZWRpdGFibGUuYXJyYXlbaWldID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICBpZiAobmV3Q2hpbGQpIHtcblx0ICAgICAgICBlZGl0YWJsZS5hcnJheVtvcmlnaW5JbmRleF0gPSBuZXdDaGlsZDtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gZWRpdGFibGU7XG5cdCAgICB9O1xuXHRcblx0ICAgIFZOb2RlLnByb3RvdHlwZS5yZW1vdmVBZnRlciA9IGZ1bmN0aW9uKG93bmVySUQsIGxldmVsLCBpbmRleCkge1xuXHQgICAgICBpZiAoaW5kZXggPT09IChsZXZlbCA/IDEgPDwgbGV2ZWwgOiAwKSB8fCB0aGlzLmFycmF5Lmxlbmd0aCA9PT0gMCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBzaXplSW5kZXggPSAoKGluZGV4IC0gMSkgPj4+IGxldmVsKSAmIE1BU0s7XG5cdCAgICAgIGlmIChzaXplSW5kZXggPj0gdGhpcy5hcnJheS5sZW5ndGgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIG5ld0NoaWxkO1xuXHQgICAgICBpZiAobGV2ZWwgPiAwKSB7XG5cdCAgICAgICAgdmFyIG9sZENoaWxkID0gdGhpcy5hcnJheVtzaXplSW5kZXhdO1xuXHQgICAgICAgIG5ld0NoaWxkID0gb2xkQ2hpbGQgJiYgb2xkQ2hpbGQucmVtb3ZlQWZ0ZXIob3duZXJJRCwgbGV2ZWwgLSBTSElGVCwgaW5kZXgpO1xuXHQgICAgICAgIGlmIChuZXdDaGlsZCA9PT0gb2xkQ2hpbGQgJiYgc2l6ZUluZGV4ID09PSB0aGlzLmFycmF5Lmxlbmd0aCAtIDEpIHtcblx0ICAgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIGVkaXRhYmxlID0gZWRpdGFibGVWTm9kZSh0aGlzLCBvd25lcklEKTtcblx0ICAgICAgZWRpdGFibGUuYXJyYXkuc3BsaWNlKHNpemVJbmRleCArIDEpO1xuXHQgICAgICBpZiAobmV3Q2hpbGQpIHtcblx0ICAgICAgICBlZGl0YWJsZS5hcnJheVtzaXplSW5kZXhdID0gbmV3Q2hpbGQ7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGVkaXRhYmxlO1xuXHQgICAgfTtcblx0XG5cdFxuXHRcblx0ICB2YXIgRE9ORSA9IHt9O1xuXHRcblx0ICBmdW5jdGlvbiBpdGVyYXRlTGlzdChsaXN0LCByZXZlcnNlKSB7XG5cdCAgICB2YXIgbGVmdCA9IGxpc3QuX29yaWdpbjtcblx0ICAgIHZhciByaWdodCA9IGxpc3QuX2NhcGFjaXR5O1xuXHQgICAgdmFyIHRhaWxQb3MgPSBnZXRUYWlsT2Zmc2V0KHJpZ2h0KTtcblx0ICAgIHZhciB0YWlsID0gbGlzdC5fdGFpbDtcblx0XG5cdCAgICByZXR1cm4gaXRlcmF0ZU5vZGVPckxlYWYobGlzdC5fcm9vdCwgbGlzdC5fbGV2ZWwsIDApO1xuXHRcblx0ICAgIGZ1bmN0aW9uIGl0ZXJhdGVOb2RlT3JMZWFmKG5vZGUsIGxldmVsLCBvZmZzZXQpIHtcblx0ICAgICAgcmV0dXJuIGxldmVsID09PSAwID9cblx0ICAgICAgICBpdGVyYXRlTGVhZihub2RlLCBvZmZzZXQpIDpcblx0ICAgICAgICBpdGVyYXRlTm9kZShub2RlLCBsZXZlbCwgb2Zmc2V0KTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBpdGVyYXRlTGVhZihub2RlLCBvZmZzZXQpIHtcblx0ICAgICAgdmFyIGFycmF5ID0gb2Zmc2V0ID09PSB0YWlsUG9zID8gdGFpbCAmJiB0YWlsLmFycmF5IDogbm9kZSAmJiBub2RlLmFycmF5O1xuXHQgICAgICB2YXIgZnJvbSA9IG9mZnNldCA+IGxlZnQgPyAwIDogbGVmdCAtIG9mZnNldDtcblx0ICAgICAgdmFyIHRvID0gcmlnaHQgLSBvZmZzZXQ7XG5cdCAgICAgIGlmICh0byA+IFNJWkUpIHtcblx0ICAgICAgICB0byA9IFNJWkU7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgIHtcblx0ICAgICAgICBpZiAoZnJvbSA9PT0gdG8pIHtcblx0ICAgICAgICAgIHJldHVybiBET05FO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgaWR4ID0gcmV2ZXJzZSA/IC0tdG8gOiBmcm9tKys7XG5cdCAgICAgICAgcmV0dXJuIGFycmF5ICYmIGFycmF5W2lkeF07XG5cdCAgICAgIH07XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gaXRlcmF0ZU5vZGUobm9kZSwgbGV2ZWwsIG9mZnNldCkge1xuXHQgICAgICB2YXIgdmFsdWVzO1xuXHQgICAgICB2YXIgYXJyYXkgPSBub2RlICYmIG5vZGUuYXJyYXk7XG5cdCAgICAgIHZhciBmcm9tID0gb2Zmc2V0ID4gbGVmdCA/IDAgOiAobGVmdCAtIG9mZnNldCkgPj4gbGV2ZWw7XG5cdCAgICAgIHZhciB0byA9ICgocmlnaHQgLSBvZmZzZXQpID4+IGxldmVsKSArIDE7XG5cdCAgICAgIGlmICh0byA+IFNJWkUpIHtcblx0ICAgICAgICB0byA9IFNJWkU7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgIHtcblx0ICAgICAgICBkbyB7XG5cdCAgICAgICAgICBpZiAodmFsdWVzKSB7XG5cdCAgICAgICAgICAgIHZhciB2YWx1ZSA9IHZhbHVlcygpO1xuXHQgICAgICAgICAgICBpZiAodmFsdWUgIT09IERPTkUpIHtcblx0ICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgdmFsdWVzID0gbnVsbDtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGlmIChmcm9tID09PSB0bykge1xuXHQgICAgICAgICAgICByZXR1cm4gRE9ORTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIHZhciBpZHggPSByZXZlcnNlID8gLS10byA6IGZyb20rKztcblx0ICAgICAgICAgIHZhbHVlcyA9IGl0ZXJhdGVOb2RlT3JMZWFmKFxuXHQgICAgICAgICAgICBhcnJheSAmJiBhcnJheVtpZHhdLCBsZXZlbCAtIFNISUZULCBvZmZzZXQgKyAoaWR4IDw8IGxldmVsKVxuXHQgICAgICAgICAgKTtcblx0ICAgICAgICB9IHdoaWxlICh0cnVlKTtcblx0ICAgICAgfTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIG1ha2VMaXN0KG9yaWdpbiwgY2FwYWNpdHksIGxldmVsLCByb290LCB0YWlsLCBvd25lcklELCBoYXNoKSB7XG5cdCAgICB2YXIgbGlzdCA9IE9iamVjdC5jcmVhdGUoTGlzdFByb3RvdHlwZSk7XG5cdCAgICBsaXN0LnNpemUgPSBjYXBhY2l0eSAtIG9yaWdpbjtcblx0ICAgIGxpc3QuX29yaWdpbiA9IG9yaWdpbjtcblx0ICAgIGxpc3QuX2NhcGFjaXR5ID0gY2FwYWNpdHk7XG5cdCAgICBsaXN0Ll9sZXZlbCA9IGxldmVsO1xuXHQgICAgbGlzdC5fcm9vdCA9IHJvb3Q7XG5cdCAgICBsaXN0Ll90YWlsID0gdGFpbDtcblx0ICAgIGxpc3QuX19vd25lcklEID0gb3duZXJJRDtcblx0ICAgIGxpc3QuX19oYXNoID0gaGFzaDtcblx0ICAgIGxpc3QuX19hbHRlcmVkID0gZmFsc2U7XG5cdCAgICByZXR1cm4gbGlzdDtcblx0ICB9XG5cdFxuXHQgIHZhciBFTVBUWV9MSVNUO1xuXHQgIGZ1bmN0aW9uIGVtcHR5TGlzdCgpIHtcblx0ICAgIHJldHVybiBFTVBUWV9MSVNUIHx8IChFTVBUWV9MSVNUID0gbWFrZUxpc3QoMCwgMCwgU0hJRlQpKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHVwZGF0ZUxpc3QobGlzdCwgaW5kZXgsIHZhbHVlKSB7XG5cdCAgICBpbmRleCA9IHdyYXBJbmRleChsaXN0LCBpbmRleCk7XG5cdFxuXHQgICAgaWYgKGluZGV4ICE9PSBpbmRleCkge1xuXHQgICAgICByZXR1cm4gbGlzdDtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoaW5kZXggPj0gbGlzdC5zaXplIHx8IGluZGV4IDwgMCkge1xuXHQgICAgICByZXR1cm4gbGlzdC53aXRoTXV0YXRpb25zKGZ1bmN0aW9uKGxpc3QgKSB7XG5cdCAgICAgICAgaW5kZXggPCAwID9cblx0ICAgICAgICAgIHNldExpc3RCb3VuZHMobGlzdCwgaW5kZXgpLnNldCgwLCB2YWx1ZSkgOlxuXHQgICAgICAgICAgc2V0TGlzdEJvdW5kcyhsaXN0LCAwLCBpbmRleCArIDEpLnNldChpbmRleCwgdmFsdWUpXG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHRcblx0ICAgIGluZGV4ICs9IGxpc3QuX29yaWdpbjtcblx0XG5cdCAgICB2YXIgbmV3VGFpbCA9IGxpc3QuX3RhaWw7XG5cdCAgICB2YXIgbmV3Um9vdCA9IGxpc3QuX3Jvb3Q7XG5cdCAgICB2YXIgZGlkQWx0ZXIgPSBNYWtlUmVmKERJRF9BTFRFUik7XG5cdCAgICBpZiAoaW5kZXggPj0gZ2V0VGFpbE9mZnNldChsaXN0Ll9jYXBhY2l0eSkpIHtcblx0ICAgICAgbmV3VGFpbCA9IHVwZGF0ZVZOb2RlKG5ld1RhaWwsIGxpc3QuX19vd25lcklELCAwLCBpbmRleCwgdmFsdWUsIGRpZEFsdGVyKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIG5ld1Jvb3QgPSB1cGRhdGVWTm9kZShuZXdSb290LCBsaXN0Ll9fb3duZXJJRCwgbGlzdC5fbGV2ZWwsIGluZGV4LCB2YWx1ZSwgZGlkQWx0ZXIpO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmICghZGlkQWx0ZXIudmFsdWUpIHtcblx0ICAgICAgcmV0dXJuIGxpc3Q7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKGxpc3QuX19vd25lcklEKSB7XG5cdCAgICAgIGxpc3QuX3Jvb3QgPSBuZXdSb290O1xuXHQgICAgICBsaXN0Ll90YWlsID0gbmV3VGFpbDtcblx0ICAgICAgbGlzdC5fX2hhc2ggPSB1bmRlZmluZWQ7XG5cdCAgICAgIGxpc3QuX19hbHRlcmVkID0gdHJ1ZTtcblx0ICAgICAgcmV0dXJuIGxpc3Q7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gbWFrZUxpc3QobGlzdC5fb3JpZ2luLCBsaXN0Ll9jYXBhY2l0eSwgbGlzdC5fbGV2ZWwsIG5ld1Jvb3QsIG5ld1RhaWwpO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gdXBkYXRlVk5vZGUobm9kZSwgb3duZXJJRCwgbGV2ZWwsIGluZGV4LCB2YWx1ZSwgZGlkQWx0ZXIpIHtcblx0ICAgIHZhciBpZHggPSAoaW5kZXggPj4+IGxldmVsKSAmIE1BU0s7XG5cdCAgICB2YXIgbm9kZUhhcyA9IG5vZGUgJiYgaWR4IDwgbm9kZS5hcnJheS5sZW5ndGg7XG5cdCAgICBpZiAoIW5vZGVIYXMgJiYgdmFsdWUgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICByZXR1cm4gbm9kZTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgbmV3Tm9kZTtcblx0XG5cdCAgICBpZiAobGV2ZWwgPiAwKSB7XG5cdCAgICAgIHZhciBsb3dlck5vZGUgPSBub2RlICYmIG5vZGUuYXJyYXlbaWR4XTtcblx0ICAgICAgdmFyIG5ld0xvd2VyTm9kZSA9IHVwZGF0ZVZOb2RlKGxvd2VyTm9kZSwgb3duZXJJRCwgbGV2ZWwgLSBTSElGVCwgaW5kZXgsIHZhbHVlLCBkaWRBbHRlcik7XG5cdCAgICAgIGlmIChuZXdMb3dlck5vZGUgPT09IGxvd2VyTm9kZSkge1xuXHQgICAgICAgIHJldHVybiBub2RlO1xuXHQgICAgICB9XG5cdCAgICAgIG5ld05vZGUgPSBlZGl0YWJsZVZOb2RlKG5vZGUsIG93bmVySUQpO1xuXHQgICAgICBuZXdOb2RlLmFycmF5W2lkeF0gPSBuZXdMb3dlck5vZGU7XG5cdCAgICAgIHJldHVybiBuZXdOb2RlO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChub2RlSGFzICYmIG5vZGUuYXJyYXlbaWR4XSA9PT0gdmFsdWUpIHtcblx0ICAgICAgcmV0dXJuIG5vZGU7XG5cdCAgICB9XG5cdFxuXHQgICAgU2V0UmVmKGRpZEFsdGVyKTtcblx0XG5cdCAgICBuZXdOb2RlID0gZWRpdGFibGVWTm9kZShub2RlLCBvd25lcklEKTtcblx0ICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkICYmIGlkeCA9PT0gbmV3Tm9kZS5hcnJheS5sZW5ndGggLSAxKSB7XG5cdCAgICAgIG5ld05vZGUuYXJyYXkucG9wKCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBuZXdOb2RlLmFycmF5W2lkeF0gPSB2YWx1ZTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBuZXdOb2RlO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gZWRpdGFibGVWTm9kZShub2RlLCBvd25lcklEKSB7XG5cdCAgICBpZiAob3duZXJJRCAmJiBub2RlICYmIG93bmVySUQgPT09IG5vZGUub3duZXJJRCkge1xuXHQgICAgICByZXR1cm4gbm9kZTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBuZXcgVk5vZGUobm9kZSA/IG5vZGUuYXJyYXkuc2xpY2UoKSA6IFtdLCBvd25lcklEKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGxpc3ROb2RlRm9yKGxpc3QsIHJhd0luZGV4KSB7XG5cdCAgICBpZiAocmF3SW5kZXggPj0gZ2V0VGFpbE9mZnNldChsaXN0Ll9jYXBhY2l0eSkpIHtcblx0ICAgICAgcmV0dXJuIGxpc3QuX3RhaWw7XG5cdCAgICB9XG5cdCAgICBpZiAocmF3SW5kZXggPCAxIDw8IChsaXN0Ll9sZXZlbCArIFNISUZUKSkge1xuXHQgICAgICB2YXIgbm9kZSA9IGxpc3QuX3Jvb3Q7XG5cdCAgICAgIHZhciBsZXZlbCA9IGxpc3QuX2xldmVsO1xuXHQgICAgICB3aGlsZSAobm9kZSAmJiBsZXZlbCA+IDApIHtcblx0ICAgICAgICBub2RlID0gbm9kZS5hcnJheVsocmF3SW5kZXggPj4+IGxldmVsKSAmIE1BU0tdO1xuXHQgICAgICAgIGxldmVsIC09IFNISUZUO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBub2RlO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gc2V0TGlzdEJvdW5kcyhsaXN0LCBiZWdpbiwgZW5kKSB7XG5cdCAgICAvLyBTYW5pdGl6ZSBiZWdpbiAmIGVuZCB1c2luZyB0aGlzIHNob3J0aGFuZCBmb3IgVG9JbnQzMihhcmd1bWVudClcblx0ICAgIC8vIGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy10b2ludDMyXG5cdCAgICBpZiAoYmVnaW4gIT09IHVuZGVmaW5lZCkge1xuXHQgICAgICBiZWdpbiA9IGJlZ2luIHwgMDtcblx0ICAgIH1cblx0ICAgIGlmIChlbmQgIT09IHVuZGVmaW5lZCkge1xuXHQgICAgICBlbmQgPSBlbmQgfCAwO1xuXHQgICAgfVxuXHQgICAgdmFyIG93bmVyID0gbGlzdC5fX293bmVySUQgfHwgbmV3IE93bmVySUQoKTtcblx0ICAgIHZhciBvbGRPcmlnaW4gPSBsaXN0Ll9vcmlnaW47XG5cdCAgICB2YXIgb2xkQ2FwYWNpdHkgPSBsaXN0Ll9jYXBhY2l0eTtcblx0ICAgIHZhciBuZXdPcmlnaW4gPSBvbGRPcmlnaW4gKyBiZWdpbjtcblx0ICAgIHZhciBuZXdDYXBhY2l0eSA9IGVuZCA9PT0gdW5kZWZpbmVkID8gb2xkQ2FwYWNpdHkgOiBlbmQgPCAwID8gb2xkQ2FwYWNpdHkgKyBlbmQgOiBvbGRPcmlnaW4gKyBlbmQ7XG5cdCAgICBpZiAobmV3T3JpZ2luID09PSBvbGRPcmlnaW4gJiYgbmV3Q2FwYWNpdHkgPT09IG9sZENhcGFjaXR5KSB7XG5cdCAgICAgIHJldHVybiBsaXN0O1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIElmIGl0J3MgZ29pbmcgdG8gZW5kIGFmdGVyIGl0IHN0YXJ0cywgaXQncyBlbXB0eS5cblx0ICAgIGlmIChuZXdPcmlnaW4gPj0gbmV3Q2FwYWNpdHkpIHtcblx0ICAgICAgcmV0dXJuIGxpc3QuY2xlYXIoKTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgbmV3TGV2ZWwgPSBsaXN0Ll9sZXZlbDtcblx0ICAgIHZhciBuZXdSb290ID0gbGlzdC5fcm9vdDtcblx0XG5cdCAgICAvLyBOZXcgb3JpZ2luIG1pZ2h0IG5lZWQgY3JlYXRpbmcgYSBoaWdoZXIgcm9vdC5cblx0ICAgIHZhciBvZmZzZXRTaGlmdCA9IDA7XG5cdCAgICB3aGlsZSAobmV3T3JpZ2luICsgb2Zmc2V0U2hpZnQgPCAwKSB7XG5cdCAgICAgIG5ld1Jvb3QgPSBuZXcgVk5vZGUobmV3Um9vdCAmJiBuZXdSb290LmFycmF5Lmxlbmd0aCA/IFt1bmRlZmluZWQsIG5ld1Jvb3RdIDogW10sIG93bmVyKTtcblx0ICAgICAgbmV3TGV2ZWwgKz0gU0hJRlQ7XG5cdCAgICAgIG9mZnNldFNoaWZ0ICs9IDEgPDwgbmV3TGV2ZWw7XG5cdCAgICB9XG5cdCAgICBpZiAob2Zmc2V0U2hpZnQpIHtcblx0ICAgICAgbmV3T3JpZ2luICs9IG9mZnNldFNoaWZ0O1xuXHQgICAgICBvbGRPcmlnaW4gKz0gb2Zmc2V0U2hpZnQ7XG5cdCAgICAgIG5ld0NhcGFjaXR5ICs9IG9mZnNldFNoaWZ0O1xuXHQgICAgICBvbGRDYXBhY2l0eSArPSBvZmZzZXRTaGlmdDtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgb2xkVGFpbE9mZnNldCA9IGdldFRhaWxPZmZzZXQob2xkQ2FwYWNpdHkpO1xuXHQgICAgdmFyIG5ld1RhaWxPZmZzZXQgPSBnZXRUYWlsT2Zmc2V0KG5ld0NhcGFjaXR5KTtcblx0XG5cdCAgICAvLyBOZXcgc2l6ZSBtaWdodCBuZWVkIGNyZWF0aW5nIGEgaGlnaGVyIHJvb3QuXG5cdCAgICB3aGlsZSAobmV3VGFpbE9mZnNldCA+PSAxIDw8IChuZXdMZXZlbCArIFNISUZUKSkge1xuXHQgICAgICBuZXdSb290ID0gbmV3IFZOb2RlKG5ld1Jvb3QgJiYgbmV3Um9vdC5hcnJheS5sZW5ndGggPyBbbmV3Um9vdF0gOiBbXSwgb3duZXIpO1xuXHQgICAgICBuZXdMZXZlbCArPSBTSElGVDtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBMb2NhdGUgb3IgY3JlYXRlIHRoZSBuZXcgdGFpbC5cblx0ICAgIHZhciBvbGRUYWlsID0gbGlzdC5fdGFpbDtcblx0ICAgIHZhciBuZXdUYWlsID0gbmV3VGFpbE9mZnNldCA8IG9sZFRhaWxPZmZzZXQgP1xuXHQgICAgICBsaXN0Tm9kZUZvcihsaXN0LCBuZXdDYXBhY2l0eSAtIDEpIDpcblx0ICAgICAgbmV3VGFpbE9mZnNldCA+IG9sZFRhaWxPZmZzZXQgPyBuZXcgVk5vZGUoW10sIG93bmVyKSA6IG9sZFRhaWw7XG5cdFxuXHQgICAgLy8gTWVyZ2UgVGFpbCBpbnRvIHRyZWUuXG5cdCAgICBpZiAob2xkVGFpbCAmJiBuZXdUYWlsT2Zmc2V0ID4gb2xkVGFpbE9mZnNldCAmJiBuZXdPcmlnaW4gPCBvbGRDYXBhY2l0eSAmJiBvbGRUYWlsLmFycmF5Lmxlbmd0aCkge1xuXHQgICAgICBuZXdSb290ID0gZWRpdGFibGVWTm9kZShuZXdSb290LCBvd25lcik7XG5cdCAgICAgIHZhciBub2RlID0gbmV3Um9vdDtcblx0ICAgICAgZm9yICh2YXIgbGV2ZWwgPSBuZXdMZXZlbDsgbGV2ZWwgPiBTSElGVDsgbGV2ZWwgLT0gU0hJRlQpIHtcblx0ICAgICAgICB2YXIgaWR4ID0gKG9sZFRhaWxPZmZzZXQgPj4+IGxldmVsKSAmIE1BU0s7XG5cdCAgICAgICAgbm9kZSA9IG5vZGUuYXJyYXlbaWR4XSA9IGVkaXRhYmxlVk5vZGUobm9kZS5hcnJheVtpZHhdLCBvd25lcik7XG5cdCAgICAgIH1cblx0ICAgICAgbm9kZS5hcnJheVsob2xkVGFpbE9mZnNldCA+Pj4gU0hJRlQpICYgTUFTS10gPSBvbGRUYWlsO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIElmIHRoZSBzaXplIGhhcyBiZWVuIHJlZHVjZWQsIHRoZXJlJ3MgYSBjaGFuY2UgdGhlIHRhaWwgbmVlZHMgdG8gYmUgdHJpbW1lZC5cblx0ICAgIGlmIChuZXdDYXBhY2l0eSA8IG9sZENhcGFjaXR5KSB7XG5cdCAgICAgIG5ld1RhaWwgPSBuZXdUYWlsICYmIG5ld1RhaWwucmVtb3ZlQWZ0ZXIob3duZXIsIDAsIG5ld0NhcGFjaXR5KTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBJZiB0aGUgbmV3IG9yaWdpbiBpcyB3aXRoaW4gdGhlIHRhaWwsIHRoZW4gd2UgZG8gbm90IG5lZWQgYSByb290LlxuXHQgICAgaWYgKG5ld09yaWdpbiA+PSBuZXdUYWlsT2Zmc2V0KSB7XG5cdCAgICAgIG5ld09yaWdpbiAtPSBuZXdUYWlsT2Zmc2V0O1xuXHQgICAgICBuZXdDYXBhY2l0eSAtPSBuZXdUYWlsT2Zmc2V0O1xuXHQgICAgICBuZXdMZXZlbCA9IFNISUZUO1xuXHQgICAgICBuZXdSb290ID0gbnVsbDtcblx0ICAgICAgbmV3VGFpbCA9IG5ld1RhaWwgJiYgbmV3VGFpbC5yZW1vdmVCZWZvcmUob3duZXIsIDAsIG5ld09yaWdpbik7XG5cdFxuXHQgICAgLy8gT3RoZXJ3aXNlLCBpZiB0aGUgcm9vdCBoYXMgYmVlbiB0cmltbWVkLCBnYXJiYWdlIGNvbGxlY3QuXG5cdCAgICB9IGVsc2UgaWYgKG5ld09yaWdpbiA+IG9sZE9yaWdpbiB8fCBuZXdUYWlsT2Zmc2V0IDwgb2xkVGFpbE9mZnNldCkge1xuXHQgICAgICBvZmZzZXRTaGlmdCA9IDA7XG5cdFxuXHQgICAgICAvLyBJZGVudGlmeSB0aGUgbmV3IHRvcCByb290IG5vZGUgb2YgdGhlIHN1YnRyZWUgb2YgdGhlIG9sZCByb290LlxuXHQgICAgICB3aGlsZSAobmV3Um9vdCkge1xuXHQgICAgICAgIHZhciBiZWdpbkluZGV4ID0gKG5ld09yaWdpbiA+Pj4gbmV3TGV2ZWwpICYgTUFTSztcblx0ICAgICAgICBpZiAoYmVnaW5JbmRleCAhPT0gKG5ld1RhaWxPZmZzZXQgPj4+IG5ld0xldmVsKSAmIE1BU0spIHtcblx0ICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoYmVnaW5JbmRleCkge1xuXHQgICAgICAgICAgb2Zmc2V0U2hpZnQgKz0gKDEgPDwgbmV3TGV2ZWwpICogYmVnaW5JbmRleDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgbmV3TGV2ZWwgLT0gU0hJRlQ7XG5cdCAgICAgICAgbmV3Um9vdCA9IG5ld1Jvb3QuYXJyYXlbYmVnaW5JbmRleF07XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIFRyaW0gdGhlIG5ldyBzaWRlcyBvZiB0aGUgbmV3IHJvb3QuXG5cdCAgICAgIGlmIChuZXdSb290ICYmIG5ld09yaWdpbiA+IG9sZE9yaWdpbikge1xuXHQgICAgICAgIG5ld1Jvb3QgPSBuZXdSb290LnJlbW92ZUJlZm9yZShvd25lciwgbmV3TGV2ZWwsIG5ld09yaWdpbiAtIG9mZnNldFNoaWZ0KTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAobmV3Um9vdCAmJiBuZXdUYWlsT2Zmc2V0IDwgb2xkVGFpbE9mZnNldCkge1xuXHQgICAgICAgIG5ld1Jvb3QgPSBuZXdSb290LnJlbW92ZUFmdGVyKG93bmVyLCBuZXdMZXZlbCwgbmV3VGFpbE9mZnNldCAtIG9mZnNldFNoaWZ0KTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAob2Zmc2V0U2hpZnQpIHtcblx0ICAgICAgICBuZXdPcmlnaW4gLT0gb2Zmc2V0U2hpZnQ7XG5cdCAgICAgICAgbmV3Q2FwYWNpdHkgLT0gb2Zmc2V0U2hpZnQ7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBpZiAobGlzdC5fX293bmVySUQpIHtcblx0ICAgICAgbGlzdC5zaXplID0gbmV3Q2FwYWNpdHkgLSBuZXdPcmlnaW47XG5cdCAgICAgIGxpc3QuX29yaWdpbiA9IG5ld09yaWdpbjtcblx0ICAgICAgbGlzdC5fY2FwYWNpdHkgPSBuZXdDYXBhY2l0eTtcblx0ICAgICAgbGlzdC5fbGV2ZWwgPSBuZXdMZXZlbDtcblx0ICAgICAgbGlzdC5fcm9vdCA9IG5ld1Jvb3Q7XG5cdCAgICAgIGxpc3QuX3RhaWwgPSBuZXdUYWlsO1xuXHQgICAgICBsaXN0Ll9faGFzaCA9IHVuZGVmaW5lZDtcblx0ICAgICAgbGlzdC5fX2FsdGVyZWQgPSB0cnVlO1xuXHQgICAgICByZXR1cm4gbGlzdDtcblx0ICAgIH1cblx0ICAgIHJldHVybiBtYWtlTGlzdChuZXdPcmlnaW4sIG5ld0NhcGFjaXR5LCBuZXdMZXZlbCwgbmV3Um9vdCwgbmV3VGFpbCk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBtZXJnZUludG9MaXN0V2l0aChsaXN0LCBtZXJnZXIsIGl0ZXJhYmxlcykge1xuXHQgICAgdmFyIGl0ZXJzID0gW107XG5cdCAgICB2YXIgbWF4U2l6ZSA9IDA7XG5cdCAgICBmb3IgKHZhciBpaSA9IDA7IGlpIDwgaXRlcmFibGVzLmxlbmd0aDsgaWkrKykge1xuXHQgICAgICB2YXIgdmFsdWUgPSBpdGVyYWJsZXNbaWldO1xuXHQgICAgICB2YXIgaXRlciA9IEluZGV4ZWRJdGVyYWJsZSh2YWx1ZSk7XG5cdCAgICAgIGlmIChpdGVyLnNpemUgPiBtYXhTaXplKSB7XG5cdCAgICAgICAgbWF4U2l6ZSA9IGl0ZXIuc2l6ZTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoIWlzSXRlcmFibGUodmFsdWUpKSB7XG5cdCAgICAgICAgaXRlciA9IGl0ZXIubWFwKGZ1bmN0aW9uKHYgKSB7cmV0dXJuIGZyb21KUyh2KX0pO1xuXHQgICAgICB9XG5cdCAgICAgIGl0ZXJzLnB1c2goaXRlcik7XG5cdCAgICB9XG5cdCAgICBpZiAobWF4U2l6ZSA+IGxpc3Quc2l6ZSkge1xuXHQgICAgICBsaXN0ID0gbGlzdC5zZXRTaXplKG1heFNpemUpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIG1lcmdlSW50b0NvbGxlY3Rpb25XaXRoKGxpc3QsIG1lcmdlciwgaXRlcnMpO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gZ2V0VGFpbE9mZnNldChzaXplKSB7XG5cdCAgICByZXR1cm4gc2l6ZSA8IFNJWkUgPyAwIDogKCgoc2l6ZSAtIDEpID4+PiBTSElGVCkgPDwgU0hJRlQpO1xuXHQgIH1cblx0XG5cdCAgY3JlYXRlQ2xhc3MoT3JkZXJlZE1hcCwgTWFwKTtcblx0XG5cdCAgICAvLyBAcHJhZ21hIENvbnN0cnVjdGlvblxuXHRcblx0ICAgIGZ1bmN0aW9uIE9yZGVyZWRNYXAodmFsdWUpIHtcblx0ICAgICAgcmV0dXJuIHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQgPyBlbXB0eU9yZGVyZWRNYXAoKSA6XG5cdCAgICAgICAgaXNPcmRlcmVkTWFwKHZhbHVlKSA/IHZhbHVlIDpcblx0ICAgICAgICBlbXB0eU9yZGVyZWRNYXAoKS53aXRoTXV0YXRpb25zKGZ1bmN0aW9uKG1hcCApIHtcblx0ICAgICAgICAgIHZhciBpdGVyID0gS2V5ZWRJdGVyYWJsZSh2YWx1ZSk7XG5cdCAgICAgICAgICBhc3NlcnROb3RJbmZpbml0ZShpdGVyLnNpemUpO1xuXHQgICAgICAgICAgaXRlci5mb3JFYWNoKGZ1bmN0aW9uKHYsIGspICB7cmV0dXJuIG1hcC5zZXQoaywgdil9KTtcblx0ICAgICAgICB9KTtcblx0ICAgIH1cblx0XG5cdCAgICBPcmRlcmVkTWFwLm9mID0gZnVuY3Rpb24oLyouLi52YWx1ZXMqLykge1xuXHQgICAgICByZXR1cm4gdGhpcyhhcmd1bWVudHMpO1xuXHQgICAgfTtcblx0XG5cdCAgICBPcmRlcmVkTWFwLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gdGhpcy5fX3RvU3RyaW5nKCdPcmRlcmVkTWFwIHsnLCAnfScpO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBAcHJhZ21hIEFjY2Vzc1xuXHRcblx0ICAgIE9yZGVyZWRNYXAucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKGssIG5vdFNldFZhbHVlKSB7XG5cdCAgICAgIHZhciBpbmRleCA9IHRoaXMuX21hcC5nZXQoayk7XG5cdCAgICAgIHJldHVybiBpbmRleCAhPT0gdW5kZWZpbmVkID8gdGhpcy5fbGlzdC5nZXQoaW5kZXgpWzFdIDogbm90U2V0VmFsdWU7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIEBwcmFnbWEgTW9kaWZpY2F0aW9uXG5cdFxuXHQgICAgT3JkZXJlZE1hcC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgaWYgKHRoaXMuc2l6ZSA9PT0gMCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgICB9XG5cdCAgICAgIGlmICh0aGlzLl9fb3duZXJJRCkge1xuXHQgICAgICAgIHRoaXMuc2l6ZSA9IDA7XG5cdCAgICAgICAgdGhpcy5fbWFwLmNsZWFyKCk7XG5cdCAgICAgICAgdGhpcy5fbGlzdC5jbGVhcigpO1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBlbXB0eU9yZGVyZWRNYXAoKTtcblx0ICAgIH07XG5cdFxuXHQgICAgT3JkZXJlZE1hcC5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24oaywgdikge1xuXHQgICAgICByZXR1cm4gdXBkYXRlT3JkZXJlZE1hcCh0aGlzLCBrLCB2KTtcblx0ICAgIH07XG5cdFxuXHQgICAgT3JkZXJlZE1hcC5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24oaykge1xuXHQgICAgICByZXR1cm4gdXBkYXRlT3JkZXJlZE1hcCh0aGlzLCBrLCBOT1RfU0VUKTtcblx0ICAgIH07XG5cdFxuXHQgICAgT3JkZXJlZE1hcC5wcm90b3R5cGUud2FzQWx0ZXJlZCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gdGhpcy5fbWFwLndhc0FsdGVyZWQoKSB8fCB0aGlzLl9saXN0Lndhc0FsdGVyZWQoKTtcblx0ICAgIH07XG5cdFxuXHQgICAgT3JkZXJlZE1hcC5wcm90b3R5cGUuX19pdGVyYXRlID0gZnVuY3Rpb24oZm4sIHJldmVyc2UpIHt2YXIgdGhpcyQwID0gdGhpcztcblx0ICAgICAgcmV0dXJuIHRoaXMuX2xpc3QuX19pdGVyYXRlKFxuXHQgICAgICAgIGZ1bmN0aW9uKGVudHJ5ICkge3JldHVybiBlbnRyeSAmJiBmbihlbnRyeVsxXSwgZW50cnlbMF0sIHRoaXMkMCl9LFxuXHQgICAgICAgIHJldmVyc2Vcblx0ICAgICAgKTtcblx0ICAgIH07XG5cdFxuXHQgICAgT3JkZXJlZE1hcC5wcm90b3R5cGUuX19pdGVyYXRvciA9IGZ1bmN0aW9uKHR5cGUsIHJldmVyc2UpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuX2xpc3QuZnJvbUVudHJ5U2VxKCkuX19pdGVyYXRvcih0eXBlLCByZXZlcnNlKTtcblx0ICAgIH07XG5cdFxuXHQgICAgT3JkZXJlZE1hcC5wcm90b3R5cGUuX19lbnN1cmVPd25lciA9IGZ1bmN0aW9uKG93bmVySUQpIHtcblx0ICAgICAgaWYgKG93bmVySUQgPT09IHRoaXMuX19vd25lcklEKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIG5ld01hcCA9IHRoaXMuX21hcC5fX2Vuc3VyZU93bmVyKG93bmVySUQpO1xuXHQgICAgICB2YXIgbmV3TGlzdCA9IHRoaXMuX2xpc3QuX19lbnN1cmVPd25lcihvd25lcklEKTtcblx0ICAgICAgaWYgKCFvd25lcklEKSB7XG5cdCAgICAgICAgdGhpcy5fX293bmVySUQgPSBvd25lcklEO1xuXHQgICAgICAgIHRoaXMuX21hcCA9IG5ld01hcDtcblx0ICAgICAgICB0aGlzLl9saXN0ID0gbmV3TGlzdDtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gbWFrZU9yZGVyZWRNYXAobmV3TWFwLCBuZXdMaXN0LCBvd25lcklELCB0aGlzLl9faGFzaCk7XG5cdCAgICB9O1xuXHRcblx0XG5cdCAgZnVuY3Rpb24gaXNPcmRlcmVkTWFwKG1heWJlT3JkZXJlZE1hcCkge1xuXHQgICAgcmV0dXJuIGlzTWFwKG1heWJlT3JkZXJlZE1hcCkgJiYgaXNPcmRlcmVkKG1heWJlT3JkZXJlZE1hcCk7XG5cdCAgfVxuXHRcblx0ICBPcmRlcmVkTWFwLmlzT3JkZXJlZE1hcCA9IGlzT3JkZXJlZE1hcDtcblx0XG5cdCAgT3JkZXJlZE1hcC5wcm90b3R5cGVbSVNfT1JERVJFRF9TRU5USU5FTF0gPSB0cnVlO1xuXHQgIE9yZGVyZWRNYXAucHJvdG90eXBlW0RFTEVURV0gPSBPcmRlcmVkTWFwLnByb3RvdHlwZS5yZW1vdmU7XG5cdFxuXHRcblx0XG5cdCAgZnVuY3Rpb24gbWFrZU9yZGVyZWRNYXAobWFwLCBsaXN0LCBvd25lcklELCBoYXNoKSB7XG5cdCAgICB2YXIgb21hcCA9IE9iamVjdC5jcmVhdGUoT3JkZXJlZE1hcC5wcm90b3R5cGUpO1xuXHQgICAgb21hcC5zaXplID0gbWFwID8gbWFwLnNpemUgOiAwO1xuXHQgICAgb21hcC5fbWFwID0gbWFwO1xuXHQgICAgb21hcC5fbGlzdCA9IGxpc3Q7XG5cdCAgICBvbWFwLl9fb3duZXJJRCA9IG93bmVySUQ7XG5cdCAgICBvbWFwLl9faGFzaCA9IGhhc2g7XG5cdCAgICByZXR1cm4gb21hcDtcblx0ICB9XG5cdFxuXHQgIHZhciBFTVBUWV9PUkRFUkVEX01BUDtcblx0ICBmdW5jdGlvbiBlbXB0eU9yZGVyZWRNYXAoKSB7XG5cdCAgICByZXR1cm4gRU1QVFlfT1JERVJFRF9NQVAgfHwgKEVNUFRZX09SREVSRURfTUFQID0gbWFrZU9yZGVyZWRNYXAoZW1wdHlNYXAoKSwgZW1wdHlMaXN0KCkpKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHVwZGF0ZU9yZGVyZWRNYXAob21hcCwgaywgdikge1xuXHQgICAgdmFyIG1hcCA9IG9tYXAuX21hcDtcblx0ICAgIHZhciBsaXN0ID0gb21hcC5fbGlzdDtcblx0ICAgIHZhciBpID0gbWFwLmdldChrKTtcblx0ICAgIHZhciBoYXMgPSBpICE9PSB1bmRlZmluZWQ7XG5cdCAgICB2YXIgbmV3TWFwO1xuXHQgICAgdmFyIG5ld0xpc3Q7XG5cdCAgICBpZiAodiA9PT0gTk9UX1NFVCkgeyAvLyByZW1vdmVkXG5cdCAgICAgIGlmICghaGFzKSB7XG5cdCAgICAgICAgcmV0dXJuIG9tYXA7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKGxpc3Quc2l6ZSA+PSBTSVpFICYmIGxpc3Quc2l6ZSA+PSBtYXAuc2l6ZSAqIDIpIHtcblx0ICAgICAgICBuZXdMaXN0ID0gbGlzdC5maWx0ZXIoZnVuY3Rpb24oZW50cnksIGlkeCkgIHtyZXR1cm4gZW50cnkgIT09IHVuZGVmaW5lZCAmJiBpICE9PSBpZHh9KTtcblx0ICAgICAgICBuZXdNYXAgPSBuZXdMaXN0LnRvS2V5ZWRTZXEoKS5tYXAoZnVuY3Rpb24oZW50cnkgKSB7cmV0dXJuIGVudHJ5WzBdfSkuZmxpcCgpLnRvTWFwKCk7XG5cdCAgICAgICAgaWYgKG9tYXAuX19vd25lcklEKSB7XG5cdCAgICAgICAgICBuZXdNYXAuX19vd25lcklEID0gbmV3TGlzdC5fX293bmVySUQgPSBvbWFwLl9fb3duZXJJRDtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgbmV3TWFwID0gbWFwLnJlbW92ZShrKTtcblx0ICAgICAgICBuZXdMaXN0ID0gaSA9PT0gbGlzdC5zaXplIC0gMSA/IGxpc3QucG9wKCkgOiBsaXN0LnNldChpLCB1bmRlZmluZWQpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBpZiAoaGFzKSB7XG5cdCAgICAgICAgaWYgKHYgPT09IGxpc3QuZ2V0KGkpWzFdKSB7XG5cdCAgICAgICAgICByZXR1cm4gb21hcDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgbmV3TWFwID0gbWFwO1xuXHQgICAgICAgIG5ld0xpc3QgPSBsaXN0LnNldChpLCBbaywgdl0pO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIG5ld01hcCA9IG1hcC5zZXQoaywgbGlzdC5zaXplKTtcblx0ICAgICAgICBuZXdMaXN0ID0gbGlzdC5zZXQobGlzdC5zaXplLCBbaywgdl0pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBpZiAob21hcC5fX293bmVySUQpIHtcblx0ICAgICAgb21hcC5zaXplID0gbmV3TWFwLnNpemU7XG5cdCAgICAgIG9tYXAuX21hcCA9IG5ld01hcDtcblx0ICAgICAgb21hcC5fbGlzdCA9IG5ld0xpc3Q7XG5cdCAgICAgIG9tYXAuX19oYXNoID0gdW5kZWZpbmVkO1xuXHQgICAgICByZXR1cm4gb21hcDtcblx0ICAgIH1cblx0ICAgIHJldHVybiBtYWtlT3JkZXJlZE1hcChuZXdNYXAsIG5ld0xpc3QpO1xuXHQgIH1cblx0XG5cdCAgY3JlYXRlQ2xhc3MoVG9LZXllZFNlcXVlbmNlLCBLZXllZFNlcSk7XG5cdCAgICBmdW5jdGlvbiBUb0tleWVkU2VxdWVuY2UoaW5kZXhlZCwgdXNlS2V5cykge1xuXHQgICAgICB0aGlzLl9pdGVyID0gaW5kZXhlZDtcblx0ICAgICAgdGhpcy5fdXNlS2V5cyA9IHVzZUtleXM7XG5cdCAgICAgIHRoaXMuc2l6ZSA9IGluZGV4ZWQuc2l6ZTtcblx0ICAgIH1cblx0XG5cdCAgICBUb0tleWVkU2VxdWVuY2UucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKGtleSwgbm90U2V0VmFsdWUpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuX2l0ZXIuZ2V0KGtleSwgbm90U2V0VmFsdWUpO1xuXHQgICAgfTtcblx0XG5cdCAgICBUb0tleWVkU2VxdWVuY2UucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uKGtleSkge1xuXHQgICAgICByZXR1cm4gdGhpcy5faXRlci5oYXMoa2V5KTtcblx0ICAgIH07XG5cdFxuXHQgICAgVG9LZXllZFNlcXVlbmNlLnByb3RvdHlwZS52YWx1ZVNlcSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gdGhpcy5faXRlci52YWx1ZVNlcSgpO1xuXHQgICAgfTtcblx0XG5cdCAgICBUb0tleWVkU2VxdWVuY2UucHJvdG90eXBlLnJldmVyc2UgPSBmdW5jdGlvbigpIHt2YXIgdGhpcyQwID0gdGhpcztcblx0ICAgICAgdmFyIHJldmVyc2VkU2VxdWVuY2UgPSByZXZlcnNlRmFjdG9yeSh0aGlzLCB0cnVlKTtcblx0ICAgICAgaWYgKCF0aGlzLl91c2VLZXlzKSB7XG5cdCAgICAgICAgcmV2ZXJzZWRTZXF1ZW5jZS52YWx1ZVNlcSA9IGZ1bmN0aW9uKCkgIHtyZXR1cm4gdGhpcyQwLl9pdGVyLnRvU2VxKCkucmV2ZXJzZSgpfTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gcmV2ZXJzZWRTZXF1ZW5jZTtcblx0ICAgIH07XG5cdFxuXHQgICAgVG9LZXllZFNlcXVlbmNlLnByb3RvdHlwZS5tYXAgPSBmdW5jdGlvbihtYXBwZXIsIGNvbnRleHQpIHt2YXIgdGhpcyQwID0gdGhpcztcblx0ICAgICAgdmFyIG1hcHBlZFNlcXVlbmNlID0gbWFwRmFjdG9yeSh0aGlzLCBtYXBwZXIsIGNvbnRleHQpO1xuXHQgICAgICBpZiAoIXRoaXMuX3VzZUtleXMpIHtcblx0ICAgICAgICBtYXBwZWRTZXF1ZW5jZS52YWx1ZVNlcSA9IGZ1bmN0aW9uKCkgIHtyZXR1cm4gdGhpcyQwLl9pdGVyLnRvU2VxKCkubWFwKG1hcHBlciwgY29udGV4dCl9O1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBtYXBwZWRTZXF1ZW5jZTtcblx0ICAgIH07XG5cdFxuXHQgICAgVG9LZXllZFNlcXVlbmNlLnByb3RvdHlwZS5fX2l0ZXJhdGUgPSBmdW5jdGlvbihmbiwgcmV2ZXJzZSkge3ZhciB0aGlzJDAgPSB0aGlzO1xuXHQgICAgICB2YXIgaWk7XG5cdCAgICAgIHJldHVybiB0aGlzLl9pdGVyLl9faXRlcmF0ZShcblx0ICAgICAgICB0aGlzLl91c2VLZXlzID9cblx0ICAgICAgICAgIGZ1bmN0aW9uKHYsIGspICB7cmV0dXJuIGZuKHYsIGssIHRoaXMkMCl9IDpcblx0ICAgICAgICAgICgoaWkgPSByZXZlcnNlID8gcmVzb2x2ZVNpemUodGhpcykgOiAwKSxcblx0ICAgICAgICAgICAgZnVuY3Rpb24odiApIHtyZXR1cm4gZm4odiwgcmV2ZXJzZSA/IC0taWkgOiBpaSsrLCB0aGlzJDApfSksXG5cdCAgICAgICAgcmV2ZXJzZVxuXHQgICAgICApO1xuXHQgICAgfTtcblx0XG5cdCAgICBUb0tleWVkU2VxdWVuY2UucHJvdG90eXBlLl9faXRlcmF0b3IgPSBmdW5jdGlvbih0eXBlLCByZXZlcnNlKSB7XG5cdCAgICAgIGlmICh0aGlzLl91c2VLZXlzKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuX2l0ZXIuX19pdGVyYXRvcih0eXBlLCByZXZlcnNlKTtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgaXRlcmF0b3IgPSB0aGlzLl9pdGVyLl9faXRlcmF0b3IoSVRFUkFURV9WQUxVRVMsIHJldmVyc2UpO1xuXHQgICAgICB2YXIgaWkgPSByZXZlcnNlID8gcmVzb2x2ZVNpemUodGhpcykgOiAwO1xuXHQgICAgICByZXR1cm4gbmV3IEl0ZXJhdG9yKGZ1bmN0aW9uKCkgIHtcblx0ICAgICAgICB2YXIgc3RlcCA9IGl0ZXJhdG9yLm5leHQoKTtcblx0ICAgICAgICByZXR1cm4gc3RlcC5kb25lID8gc3RlcCA6XG5cdCAgICAgICAgICBpdGVyYXRvclZhbHVlKHR5cGUsIHJldmVyc2UgPyAtLWlpIDogaWkrKywgc3RlcC52YWx1ZSwgc3RlcCk7XG5cdCAgICAgIH0pO1xuXHQgICAgfTtcblx0XG5cdCAgVG9LZXllZFNlcXVlbmNlLnByb3RvdHlwZVtJU19PUkRFUkVEX1NFTlRJTkVMXSA9IHRydWU7XG5cdFxuXHRcblx0ICBjcmVhdGVDbGFzcyhUb0luZGV4ZWRTZXF1ZW5jZSwgSW5kZXhlZFNlcSk7XG5cdCAgICBmdW5jdGlvbiBUb0luZGV4ZWRTZXF1ZW5jZShpdGVyKSB7XG5cdCAgICAgIHRoaXMuX2l0ZXIgPSBpdGVyO1xuXHQgICAgICB0aGlzLnNpemUgPSBpdGVyLnNpemU7XG5cdCAgICB9XG5cdFxuXHQgICAgVG9JbmRleGVkU2VxdWVuY2UucHJvdG90eXBlLmluY2x1ZGVzID0gZnVuY3Rpb24odmFsdWUpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuX2l0ZXIuaW5jbHVkZXModmFsdWUpO1xuXHQgICAgfTtcblx0XG5cdCAgICBUb0luZGV4ZWRTZXF1ZW5jZS5wcm90b3R5cGUuX19pdGVyYXRlID0gZnVuY3Rpb24oZm4sIHJldmVyc2UpIHt2YXIgdGhpcyQwID0gdGhpcztcblx0ICAgICAgdmFyIGl0ZXJhdGlvbnMgPSAwO1xuXHQgICAgICByZXR1cm4gdGhpcy5faXRlci5fX2l0ZXJhdGUoZnVuY3Rpb24odiApIHtyZXR1cm4gZm4odiwgaXRlcmF0aW9ucysrLCB0aGlzJDApfSwgcmV2ZXJzZSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIFRvSW5kZXhlZFNlcXVlbmNlLnByb3RvdHlwZS5fX2l0ZXJhdG9yID0gZnVuY3Rpb24odHlwZSwgcmV2ZXJzZSkge1xuXHQgICAgICB2YXIgaXRlcmF0b3IgPSB0aGlzLl9pdGVyLl9faXRlcmF0b3IoSVRFUkFURV9WQUxVRVMsIHJldmVyc2UpO1xuXHQgICAgICB2YXIgaXRlcmF0aW9ucyA9IDA7XG5cdCAgICAgIHJldHVybiBuZXcgSXRlcmF0b3IoZnVuY3Rpb24oKSAge1xuXHQgICAgICAgIHZhciBzdGVwID0gaXRlcmF0b3IubmV4dCgpO1xuXHQgICAgICAgIHJldHVybiBzdGVwLmRvbmUgPyBzdGVwIDpcblx0ICAgICAgICAgIGl0ZXJhdG9yVmFsdWUodHlwZSwgaXRlcmF0aW9ucysrLCBzdGVwLnZhbHVlLCBzdGVwKVxuXHQgICAgICB9KTtcblx0ICAgIH07XG5cdFxuXHRcblx0XG5cdCAgY3JlYXRlQ2xhc3MoVG9TZXRTZXF1ZW5jZSwgU2V0U2VxKTtcblx0ICAgIGZ1bmN0aW9uIFRvU2V0U2VxdWVuY2UoaXRlcikge1xuXHQgICAgICB0aGlzLl9pdGVyID0gaXRlcjtcblx0ICAgICAgdGhpcy5zaXplID0gaXRlci5zaXplO1xuXHQgICAgfVxuXHRcblx0ICAgIFRvU2V0U2VxdWVuY2UucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uKGtleSkge1xuXHQgICAgICByZXR1cm4gdGhpcy5faXRlci5pbmNsdWRlcyhrZXkpO1xuXHQgICAgfTtcblx0XG5cdCAgICBUb1NldFNlcXVlbmNlLnByb3RvdHlwZS5fX2l0ZXJhdGUgPSBmdW5jdGlvbihmbiwgcmV2ZXJzZSkge3ZhciB0aGlzJDAgPSB0aGlzO1xuXHQgICAgICByZXR1cm4gdGhpcy5faXRlci5fX2l0ZXJhdGUoZnVuY3Rpb24odiApIHtyZXR1cm4gZm4odiwgdiwgdGhpcyQwKX0sIHJldmVyc2UpO1xuXHQgICAgfTtcblx0XG5cdCAgICBUb1NldFNlcXVlbmNlLnByb3RvdHlwZS5fX2l0ZXJhdG9yID0gZnVuY3Rpb24odHlwZSwgcmV2ZXJzZSkge1xuXHQgICAgICB2YXIgaXRlcmF0b3IgPSB0aGlzLl9pdGVyLl9faXRlcmF0b3IoSVRFUkFURV9WQUxVRVMsIHJldmVyc2UpO1xuXHQgICAgICByZXR1cm4gbmV3IEl0ZXJhdG9yKGZ1bmN0aW9uKCkgIHtcblx0ICAgICAgICB2YXIgc3RlcCA9IGl0ZXJhdG9yLm5leHQoKTtcblx0ICAgICAgICByZXR1cm4gc3RlcC5kb25lID8gc3RlcCA6XG5cdCAgICAgICAgICBpdGVyYXRvclZhbHVlKHR5cGUsIHN0ZXAudmFsdWUsIHN0ZXAudmFsdWUsIHN0ZXApO1xuXHQgICAgICB9KTtcblx0ICAgIH07XG5cdFxuXHRcblx0XG5cdCAgY3JlYXRlQ2xhc3MoRnJvbUVudHJpZXNTZXF1ZW5jZSwgS2V5ZWRTZXEpO1xuXHQgICAgZnVuY3Rpb24gRnJvbUVudHJpZXNTZXF1ZW5jZShlbnRyaWVzKSB7XG5cdCAgICAgIHRoaXMuX2l0ZXIgPSBlbnRyaWVzO1xuXHQgICAgICB0aGlzLnNpemUgPSBlbnRyaWVzLnNpemU7XG5cdCAgICB9XG5cdFxuXHQgICAgRnJvbUVudHJpZXNTZXF1ZW5jZS5wcm90b3R5cGUuZW50cnlTZXEgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuX2l0ZXIudG9TZXEoKTtcblx0ICAgIH07XG5cdFxuXHQgICAgRnJvbUVudHJpZXNTZXF1ZW5jZS5wcm90b3R5cGUuX19pdGVyYXRlID0gZnVuY3Rpb24oZm4sIHJldmVyc2UpIHt2YXIgdGhpcyQwID0gdGhpcztcblx0ICAgICAgcmV0dXJuIHRoaXMuX2l0ZXIuX19pdGVyYXRlKGZ1bmN0aW9uKGVudHJ5ICkge1xuXHQgICAgICAgIC8vIENoZWNrIGlmIGVudHJ5IGV4aXN0cyBmaXJzdCBzbyBhcnJheSBhY2Nlc3MgZG9lc24ndCB0aHJvdyBmb3IgaG9sZXNcblx0ICAgICAgICAvLyBpbiB0aGUgcGFyZW50IGl0ZXJhdGlvbi5cblx0ICAgICAgICBpZiAoZW50cnkpIHtcblx0ICAgICAgICAgIHZhbGlkYXRlRW50cnkoZW50cnkpO1xuXHQgICAgICAgICAgdmFyIGluZGV4ZWRJdGVyYWJsZSA9IGlzSXRlcmFibGUoZW50cnkpO1xuXHQgICAgICAgICAgcmV0dXJuIGZuKFxuXHQgICAgICAgICAgICBpbmRleGVkSXRlcmFibGUgPyBlbnRyeS5nZXQoMSkgOiBlbnRyeVsxXSxcblx0ICAgICAgICAgICAgaW5kZXhlZEl0ZXJhYmxlID8gZW50cnkuZ2V0KDApIDogZW50cnlbMF0sXG5cdCAgICAgICAgICAgIHRoaXMkMFxuXHQgICAgICAgICAgKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0sIHJldmVyc2UpO1xuXHQgICAgfTtcblx0XG5cdCAgICBGcm9tRW50cmllc1NlcXVlbmNlLnByb3RvdHlwZS5fX2l0ZXJhdG9yID0gZnVuY3Rpb24odHlwZSwgcmV2ZXJzZSkge1xuXHQgICAgICB2YXIgaXRlcmF0b3IgPSB0aGlzLl9pdGVyLl9faXRlcmF0b3IoSVRFUkFURV9WQUxVRVMsIHJldmVyc2UpO1xuXHQgICAgICByZXR1cm4gbmV3IEl0ZXJhdG9yKGZ1bmN0aW9uKCkgIHtcblx0ICAgICAgICB3aGlsZSAodHJ1ZSkge1xuXHQgICAgICAgICAgdmFyIHN0ZXAgPSBpdGVyYXRvci5uZXh0KCk7XG5cdCAgICAgICAgICBpZiAoc3RlcC5kb25lKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBzdGVwO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgdmFyIGVudHJ5ID0gc3RlcC52YWx1ZTtcblx0ICAgICAgICAgIC8vIENoZWNrIGlmIGVudHJ5IGV4aXN0cyBmaXJzdCBzbyBhcnJheSBhY2Nlc3MgZG9lc24ndCB0aHJvdyBmb3IgaG9sZXNcblx0ICAgICAgICAgIC8vIGluIHRoZSBwYXJlbnQgaXRlcmF0aW9uLlxuXHQgICAgICAgICAgaWYgKGVudHJ5KSB7XG5cdCAgICAgICAgICAgIHZhbGlkYXRlRW50cnkoZW50cnkpO1xuXHQgICAgICAgICAgICB2YXIgaW5kZXhlZEl0ZXJhYmxlID0gaXNJdGVyYWJsZShlbnRyeSk7XG5cdCAgICAgICAgICAgIHJldHVybiBpdGVyYXRvclZhbHVlKFxuXHQgICAgICAgICAgICAgIHR5cGUsXG5cdCAgICAgICAgICAgICAgaW5kZXhlZEl0ZXJhYmxlID8gZW50cnkuZ2V0KDApIDogZW50cnlbMF0sXG5cdCAgICAgICAgICAgICAgaW5kZXhlZEl0ZXJhYmxlID8gZW50cnkuZ2V0KDEpIDogZW50cnlbMV0sXG5cdCAgICAgICAgICAgICAgc3RlcFxuXHQgICAgICAgICAgICApO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9O1xuXHRcblx0XG5cdCAgVG9JbmRleGVkU2VxdWVuY2UucHJvdG90eXBlLmNhY2hlUmVzdWx0ID1cblx0ICBUb0tleWVkU2VxdWVuY2UucHJvdG90eXBlLmNhY2hlUmVzdWx0ID1cblx0ICBUb1NldFNlcXVlbmNlLnByb3RvdHlwZS5jYWNoZVJlc3VsdCA9XG5cdCAgRnJvbUVudHJpZXNTZXF1ZW5jZS5wcm90b3R5cGUuY2FjaGVSZXN1bHQgPVxuXHQgICAgY2FjaGVSZXN1bHRUaHJvdWdoO1xuXHRcblx0XG5cdCAgZnVuY3Rpb24gZmxpcEZhY3RvcnkoaXRlcmFibGUpIHtcblx0ICAgIHZhciBmbGlwU2VxdWVuY2UgPSBtYWtlU2VxdWVuY2UoaXRlcmFibGUpO1xuXHQgICAgZmxpcFNlcXVlbmNlLl9pdGVyID0gaXRlcmFibGU7XG5cdCAgICBmbGlwU2VxdWVuY2Uuc2l6ZSA9IGl0ZXJhYmxlLnNpemU7XG5cdCAgICBmbGlwU2VxdWVuY2UuZmxpcCA9IGZ1bmN0aW9uKCkgIHtyZXR1cm4gaXRlcmFibGV9O1xuXHQgICAgZmxpcFNlcXVlbmNlLnJldmVyc2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciByZXZlcnNlZFNlcXVlbmNlID0gaXRlcmFibGUucmV2ZXJzZS5hcHBseSh0aGlzKTsgLy8gc3VwZXIucmV2ZXJzZSgpXG5cdCAgICAgIHJldmVyc2VkU2VxdWVuY2UuZmxpcCA9IGZ1bmN0aW9uKCkgIHtyZXR1cm4gaXRlcmFibGUucmV2ZXJzZSgpfTtcblx0ICAgICAgcmV0dXJuIHJldmVyc2VkU2VxdWVuY2U7XG5cdCAgICB9O1xuXHQgICAgZmxpcFNlcXVlbmNlLmhhcyA9IGZ1bmN0aW9uKGtleSApIHtyZXR1cm4gaXRlcmFibGUuaW5jbHVkZXMoa2V5KX07XG5cdCAgICBmbGlwU2VxdWVuY2UuaW5jbHVkZXMgPSBmdW5jdGlvbihrZXkgKSB7cmV0dXJuIGl0ZXJhYmxlLmhhcyhrZXkpfTtcblx0ICAgIGZsaXBTZXF1ZW5jZS5jYWNoZVJlc3VsdCA9IGNhY2hlUmVzdWx0VGhyb3VnaDtcblx0ICAgIGZsaXBTZXF1ZW5jZS5fX2l0ZXJhdGVVbmNhY2hlZCA9IGZ1bmN0aW9uIChmbiwgcmV2ZXJzZSkge3ZhciB0aGlzJDAgPSB0aGlzO1xuXHQgICAgICByZXR1cm4gaXRlcmFibGUuX19pdGVyYXRlKGZ1bmN0aW9uKHYsIGspICB7cmV0dXJuIGZuKGssIHYsIHRoaXMkMCkgIT09IGZhbHNlfSwgcmV2ZXJzZSk7XG5cdCAgICB9XG5cdCAgICBmbGlwU2VxdWVuY2UuX19pdGVyYXRvclVuY2FjaGVkID0gZnVuY3Rpb24odHlwZSwgcmV2ZXJzZSkge1xuXHQgICAgICBpZiAodHlwZSA9PT0gSVRFUkFURV9FTlRSSUVTKSB7XG5cdCAgICAgICAgdmFyIGl0ZXJhdG9yID0gaXRlcmFibGUuX19pdGVyYXRvcih0eXBlLCByZXZlcnNlKTtcblx0ICAgICAgICByZXR1cm4gbmV3IEl0ZXJhdG9yKGZ1bmN0aW9uKCkgIHtcblx0ICAgICAgICAgIHZhciBzdGVwID0gaXRlcmF0b3IubmV4dCgpO1xuXHQgICAgICAgICAgaWYgKCFzdGVwLmRvbmUpIHtcblx0ICAgICAgICAgICAgdmFyIGsgPSBzdGVwLnZhbHVlWzBdO1xuXHQgICAgICAgICAgICBzdGVwLnZhbHVlWzBdID0gc3RlcC52YWx1ZVsxXTtcblx0ICAgICAgICAgICAgc3RlcC52YWx1ZVsxXSA9IGs7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICByZXR1cm4gc3RlcDtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gaXRlcmFibGUuX19pdGVyYXRvcihcblx0ICAgICAgICB0eXBlID09PSBJVEVSQVRFX1ZBTFVFUyA/IElURVJBVEVfS0VZUyA6IElURVJBVEVfVkFMVUVTLFxuXHQgICAgICAgIHJldmVyc2Vcblx0ICAgICAgKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBmbGlwU2VxdWVuY2U7XG5cdCAgfVxuXHRcblx0XG5cdCAgZnVuY3Rpb24gbWFwRmFjdG9yeShpdGVyYWJsZSwgbWFwcGVyLCBjb250ZXh0KSB7XG5cdCAgICB2YXIgbWFwcGVkU2VxdWVuY2UgPSBtYWtlU2VxdWVuY2UoaXRlcmFibGUpO1xuXHQgICAgbWFwcGVkU2VxdWVuY2Uuc2l6ZSA9IGl0ZXJhYmxlLnNpemU7XG5cdCAgICBtYXBwZWRTZXF1ZW5jZS5oYXMgPSBmdW5jdGlvbihrZXkgKSB7cmV0dXJuIGl0ZXJhYmxlLmhhcyhrZXkpfTtcblx0ICAgIG1hcHBlZFNlcXVlbmNlLmdldCA9IGZ1bmN0aW9uKGtleSwgbm90U2V0VmFsdWUpICB7XG5cdCAgICAgIHZhciB2ID0gaXRlcmFibGUuZ2V0KGtleSwgTk9UX1NFVCk7XG5cdCAgICAgIHJldHVybiB2ID09PSBOT1RfU0VUID9cblx0ICAgICAgICBub3RTZXRWYWx1ZSA6XG5cdCAgICAgICAgbWFwcGVyLmNhbGwoY29udGV4dCwgdiwga2V5LCBpdGVyYWJsZSk7XG5cdCAgICB9O1xuXHQgICAgbWFwcGVkU2VxdWVuY2UuX19pdGVyYXRlVW5jYWNoZWQgPSBmdW5jdGlvbiAoZm4sIHJldmVyc2UpIHt2YXIgdGhpcyQwID0gdGhpcztcblx0ICAgICAgcmV0dXJuIGl0ZXJhYmxlLl9faXRlcmF0ZShcblx0ICAgICAgICBmdW5jdGlvbih2LCBrLCBjKSAge3JldHVybiBmbihtYXBwZXIuY2FsbChjb250ZXh0LCB2LCBrLCBjKSwgaywgdGhpcyQwKSAhPT0gZmFsc2V9LFxuXHQgICAgICAgIHJldmVyc2Vcblx0ICAgICAgKTtcblx0ICAgIH1cblx0ICAgIG1hcHBlZFNlcXVlbmNlLl9faXRlcmF0b3JVbmNhY2hlZCA9IGZ1bmN0aW9uICh0eXBlLCByZXZlcnNlKSB7XG5cdCAgICAgIHZhciBpdGVyYXRvciA9IGl0ZXJhYmxlLl9faXRlcmF0b3IoSVRFUkFURV9FTlRSSUVTLCByZXZlcnNlKTtcblx0ICAgICAgcmV0dXJuIG5ldyBJdGVyYXRvcihmdW5jdGlvbigpICB7XG5cdCAgICAgICAgdmFyIHN0ZXAgPSBpdGVyYXRvci5uZXh0KCk7XG5cdCAgICAgICAgaWYgKHN0ZXAuZG9uZSkge1xuXHQgICAgICAgICAgcmV0dXJuIHN0ZXA7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciBlbnRyeSA9IHN0ZXAudmFsdWU7XG5cdCAgICAgICAgdmFyIGtleSA9IGVudHJ5WzBdO1xuXHQgICAgICAgIHJldHVybiBpdGVyYXRvclZhbHVlKFxuXHQgICAgICAgICAgdHlwZSxcblx0ICAgICAgICAgIGtleSxcblx0ICAgICAgICAgIG1hcHBlci5jYWxsKGNvbnRleHQsIGVudHJ5WzFdLCBrZXksIGl0ZXJhYmxlKSxcblx0ICAgICAgICAgIHN0ZXBcblx0ICAgICAgICApO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBtYXBwZWRTZXF1ZW5jZTtcblx0ICB9XG5cdFxuXHRcblx0ICBmdW5jdGlvbiByZXZlcnNlRmFjdG9yeShpdGVyYWJsZSwgdXNlS2V5cykge1xuXHQgICAgdmFyIHJldmVyc2VkU2VxdWVuY2UgPSBtYWtlU2VxdWVuY2UoaXRlcmFibGUpO1xuXHQgICAgcmV2ZXJzZWRTZXF1ZW5jZS5faXRlciA9IGl0ZXJhYmxlO1xuXHQgICAgcmV2ZXJzZWRTZXF1ZW5jZS5zaXplID0gaXRlcmFibGUuc2l6ZTtcblx0ICAgIHJldmVyc2VkU2VxdWVuY2UucmV2ZXJzZSA9IGZ1bmN0aW9uKCkgIHtyZXR1cm4gaXRlcmFibGV9O1xuXHQgICAgaWYgKGl0ZXJhYmxlLmZsaXApIHtcblx0ICAgICAgcmV2ZXJzZWRTZXF1ZW5jZS5mbGlwID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBmbGlwU2VxdWVuY2UgPSBmbGlwRmFjdG9yeShpdGVyYWJsZSk7XG5cdCAgICAgICAgZmxpcFNlcXVlbmNlLnJldmVyc2UgPSBmdW5jdGlvbigpICB7cmV0dXJuIGl0ZXJhYmxlLmZsaXAoKX07XG5cdCAgICAgICAgcmV0dXJuIGZsaXBTZXF1ZW5jZTtcblx0ICAgICAgfTtcblx0ICAgIH1cblx0ICAgIHJldmVyc2VkU2VxdWVuY2UuZ2V0ID0gZnVuY3Rpb24oa2V5LCBub3RTZXRWYWx1ZSkgXG5cdCAgICAgIHtyZXR1cm4gaXRlcmFibGUuZ2V0KHVzZUtleXMgPyBrZXkgOiAtMSAtIGtleSwgbm90U2V0VmFsdWUpfTtcblx0ICAgIHJldmVyc2VkU2VxdWVuY2UuaGFzID0gZnVuY3Rpb24oa2V5IClcblx0ICAgICAge3JldHVybiBpdGVyYWJsZS5oYXModXNlS2V5cyA/IGtleSA6IC0xIC0ga2V5KX07XG5cdCAgICByZXZlcnNlZFNlcXVlbmNlLmluY2x1ZGVzID0gZnVuY3Rpb24odmFsdWUgKSB7cmV0dXJuIGl0ZXJhYmxlLmluY2x1ZGVzKHZhbHVlKX07XG5cdCAgICByZXZlcnNlZFNlcXVlbmNlLmNhY2hlUmVzdWx0ID0gY2FjaGVSZXN1bHRUaHJvdWdoO1xuXHQgICAgcmV2ZXJzZWRTZXF1ZW5jZS5fX2l0ZXJhdGUgPSBmdW5jdGlvbiAoZm4sIHJldmVyc2UpIHt2YXIgdGhpcyQwID0gdGhpcztcblx0ICAgICAgcmV0dXJuIGl0ZXJhYmxlLl9faXRlcmF0ZShmdW5jdGlvbih2LCBrKSAge3JldHVybiBmbih2LCBrLCB0aGlzJDApfSwgIXJldmVyc2UpO1xuXHQgICAgfTtcblx0ICAgIHJldmVyc2VkU2VxdWVuY2UuX19pdGVyYXRvciA9XG5cdCAgICAgIGZ1bmN0aW9uKHR5cGUsIHJldmVyc2UpICB7cmV0dXJuIGl0ZXJhYmxlLl9faXRlcmF0b3IodHlwZSwgIXJldmVyc2UpfTtcblx0ICAgIHJldHVybiByZXZlcnNlZFNlcXVlbmNlO1xuXHQgIH1cblx0XG5cdFxuXHQgIGZ1bmN0aW9uIGZpbHRlckZhY3RvcnkoaXRlcmFibGUsIHByZWRpY2F0ZSwgY29udGV4dCwgdXNlS2V5cykge1xuXHQgICAgdmFyIGZpbHRlclNlcXVlbmNlID0gbWFrZVNlcXVlbmNlKGl0ZXJhYmxlKTtcblx0ICAgIGlmICh1c2VLZXlzKSB7XG5cdCAgICAgIGZpbHRlclNlcXVlbmNlLmhhcyA9IGZ1bmN0aW9uKGtleSApIHtcblx0ICAgICAgICB2YXIgdiA9IGl0ZXJhYmxlLmdldChrZXksIE5PVF9TRVQpO1xuXHQgICAgICAgIHJldHVybiB2ICE9PSBOT1RfU0VUICYmICEhcHJlZGljYXRlLmNhbGwoY29udGV4dCwgdiwga2V5LCBpdGVyYWJsZSk7XG5cdCAgICAgIH07XG5cdCAgICAgIGZpbHRlclNlcXVlbmNlLmdldCA9IGZ1bmN0aW9uKGtleSwgbm90U2V0VmFsdWUpICB7XG5cdCAgICAgICAgdmFyIHYgPSBpdGVyYWJsZS5nZXQoa2V5LCBOT1RfU0VUKTtcblx0ICAgICAgICByZXR1cm4gdiAhPT0gTk9UX1NFVCAmJiBwcmVkaWNhdGUuY2FsbChjb250ZXh0LCB2LCBrZXksIGl0ZXJhYmxlKSA/XG5cdCAgICAgICAgICB2IDogbm90U2V0VmFsdWU7XG5cdCAgICAgIH07XG5cdCAgICB9XG5cdCAgICBmaWx0ZXJTZXF1ZW5jZS5fX2l0ZXJhdGVVbmNhY2hlZCA9IGZ1bmN0aW9uIChmbiwgcmV2ZXJzZSkge3ZhciB0aGlzJDAgPSB0aGlzO1xuXHQgICAgICB2YXIgaXRlcmF0aW9ucyA9IDA7XG5cdCAgICAgIGl0ZXJhYmxlLl9faXRlcmF0ZShmdW5jdGlvbih2LCBrLCBjKSAge1xuXHQgICAgICAgIGlmIChwcmVkaWNhdGUuY2FsbChjb250ZXh0LCB2LCBrLCBjKSkge1xuXHQgICAgICAgICAgaXRlcmF0aW9ucysrO1xuXHQgICAgICAgICAgcmV0dXJuIGZuKHYsIHVzZUtleXMgPyBrIDogaXRlcmF0aW9ucyAtIDEsIHRoaXMkMCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9LCByZXZlcnNlKTtcblx0ICAgICAgcmV0dXJuIGl0ZXJhdGlvbnM7XG5cdCAgICB9O1xuXHQgICAgZmlsdGVyU2VxdWVuY2UuX19pdGVyYXRvclVuY2FjaGVkID0gZnVuY3Rpb24gKHR5cGUsIHJldmVyc2UpIHtcblx0ICAgICAgdmFyIGl0ZXJhdG9yID0gaXRlcmFibGUuX19pdGVyYXRvcihJVEVSQVRFX0VOVFJJRVMsIHJldmVyc2UpO1xuXHQgICAgICB2YXIgaXRlcmF0aW9ucyA9IDA7XG5cdCAgICAgIHJldHVybiBuZXcgSXRlcmF0b3IoZnVuY3Rpb24oKSAge1xuXHQgICAgICAgIHdoaWxlICh0cnVlKSB7XG5cdCAgICAgICAgICB2YXIgc3RlcCA9IGl0ZXJhdG9yLm5leHQoKTtcblx0ICAgICAgICAgIGlmIChzdGVwLmRvbmUpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHN0ZXA7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICB2YXIgZW50cnkgPSBzdGVwLnZhbHVlO1xuXHQgICAgICAgICAgdmFyIGtleSA9IGVudHJ5WzBdO1xuXHQgICAgICAgICAgdmFyIHZhbHVlID0gZW50cnlbMV07XG5cdCAgICAgICAgICBpZiAocHJlZGljYXRlLmNhbGwoY29udGV4dCwgdmFsdWUsIGtleSwgaXRlcmFibGUpKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBpdGVyYXRvclZhbHVlKHR5cGUsIHVzZUtleXMgPyBrZXkgOiBpdGVyYXRpb25zKyssIHZhbHVlLCBzdGVwKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGZpbHRlclNlcXVlbmNlO1xuXHQgIH1cblx0XG5cdFxuXHQgIGZ1bmN0aW9uIGNvdW50QnlGYWN0b3J5KGl0ZXJhYmxlLCBncm91cGVyLCBjb250ZXh0KSB7XG5cdCAgICB2YXIgZ3JvdXBzID0gTWFwKCkuYXNNdXRhYmxlKCk7XG5cdCAgICBpdGVyYWJsZS5fX2l0ZXJhdGUoZnVuY3Rpb24odiwgaykgIHtcblx0ICAgICAgZ3JvdXBzLnVwZGF0ZShcblx0ICAgICAgICBncm91cGVyLmNhbGwoY29udGV4dCwgdiwgaywgaXRlcmFibGUpLFxuXHQgICAgICAgIDAsXG5cdCAgICAgICAgZnVuY3Rpb24oYSApIHtyZXR1cm4gYSArIDF9XG5cdCAgICAgICk7XG5cdCAgICB9KTtcblx0ICAgIHJldHVybiBncm91cHMuYXNJbW11dGFibGUoKTtcblx0ICB9XG5cdFxuXHRcblx0ICBmdW5jdGlvbiBncm91cEJ5RmFjdG9yeShpdGVyYWJsZSwgZ3JvdXBlciwgY29udGV4dCkge1xuXHQgICAgdmFyIGlzS2V5ZWRJdGVyID0gaXNLZXllZChpdGVyYWJsZSk7XG5cdCAgICB2YXIgZ3JvdXBzID0gKGlzT3JkZXJlZChpdGVyYWJsZSkgPyBPcmRlcmVkTWFwKCkgOiBNYXAoKSkuYXNNdXRhYmxlKCk7XG5cdCAgICBpdGVyYWJsZS5fX2l0ZXJhdGUoZnVuY3Rpb24odiwgaykgIHtcblx0ICAgICAgZ3JvdXBzLnVwZGF0ZShcblx0ICAgICAgICBncm91cGVyLmNhbGwoY29udGV4dCwgdiwgaywgaXRlcmFibGUpLFxuXHQgICAgICAgIGZ1bmN0aW9uKGEgKSB7cmV0dXJuIChhID0gYSB8fCBbXSwgYS5wdXNoKGlzS2V5ZWRJdGVyID8gW2ssIHZdIDogdiksIGEpfVxuXHQgICAgICApO1xuXHQgICAgfSk7XG5cdCAgICB2YXIgY29lcmNlID0gaXRlcmFibGVDbGFzcyhpdGVyYWJsZSk7XG5cdCAgICByZXR1cm4gZ3JvdXBzLm1hcChmdW5jdGlvbihhcnIgKSB7cmV0dXJuIHJlaWZ5KGl0ZXJhYmxlLCBjb2VyY2UoYXJyKSl9KTtcblx0ICB9XG5cdFxuXHRcblx0ICBmdW5jdGlvbiBzbGljZUZhY3RvcnkoaXRlcmFibGUsIGJlZ2luLCBlbmQsIHVzZUtleXMpIHtcblx0ICAgIHZhciBvcmlnaW5hbFNpemUgPSBpdGVyYWJsZS5zaXplO1xuXHRcblx0ICAgIC8vIFNhbml0aXplIGJlZ2luICYgZW5kIHVzaW5nIHRoaXMgc2hvcnRoYW5kIGZvciBUb0ludDMyKGFyZ3VtZW50KVxuXHQgICAgLy8gaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLXRvaW50MzJcblx0ICAgIGlmIChiZWdpbiAhPT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgIGJlZ2luID0gYmVnaW4gfCAwO1xuXHQgICAgfVxuXHQgICAgaWYgKGVuZCAhPT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgIGlmIChlbmQgPT09IEluZmluaXR5KSB7XG5cdCAgICAgICAgZW5kID0gb3JpZ2luYWxTaXplO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGVuZCA9IGVuZCB8IDA7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBpZiAod2hvbGVTbGljZShiZWdpbiwgZW5kLCBvcmlnaW5hbFNpemUpKSB7XG5cdCAgICAgIHJldHVybiBpdGVyYWJsZTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgcmVzb2x2ZWRCZWdpbiA9IHJlc29sdmVCZWdpbihiZWdpbiwgb3JpZ2luYWxTaXplKTtcblx0ICAgIHZhciByZXNvbHZlZEVuZCA9IHJlc29sdmVFbmQoZW5kLCBvcmlnaW5hbFNpemUpO1xuXHRcblx0ICAgIC8vIGJlZ2luIG9yIGVuZCB3aWxsIGJlIE5hTiBpZiB0aGV5IHdlcmUgcHJvdmlkZWQgYXMgbmVnYXRpdmUgbnVtYmVycyBhbmRcblx0ICAgIC8vIHRoaXMgaXRlcmFibGUncyBzaXplIGlzIHVua25vd24uIEluIHRoYXQgY2FzZSwgY2FjaGUgZmlyc3Qgc28gdGhlcmUgaXNcblx0ICAgIC8vIGEga25vd24gc2l6ZSBhbmQgdGhlc2UgZG8gbm90IHJlc29sdmUgdG8gTmFOLlxuXHQgICAgaWYgKHJlc29sdmVkQmVnaW4gIT09IHJlc29sdmVkQmVnaW4gfHwgcmVzb2x2ZWRFbmQgIT09IHJlc29sdmVkRW5kKSB7XG5cdCAgICAgIHJldHVybiBzbGljZUZhY3RvcnkoaXRlcmFibGUudG9TZXEoKS5jYWNoZVJlc3VsdCgpLCBiZWdpbiwgZW5kLCB1c2VLZXlzKTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBOb3RlOiByZXNvbHZlZEVuZCBpcyB1bmRlZmluZWQgd2hlbiB0aGUgb3JpZ2luYWwgc2VxdWVuY2UncyBsZW5ndGggaXNcblx0ICAgIC8vIHVua25vd24gYW5kIHRoaXMgc2xpY2UgZGlkIG5vdCBzdXBwbHkgYW4gZW5kIGFuZCBzaG91bGQgY29udGFpbiBhbGxcblx0ICAgIC8vIGVsZW1lbnRzIGFmdGVyIHJlc29sdmVkQmVnaW4uXG5cdCAgICAvLyBJbiB0aGF0IGNhc2UsIHJlc29sdmVkU2l6ZSB3aWxsIGJlIE5hTiBhbmQgc2xpY2VTaXplIHdpbGwgcmVtYWluIHVuZGVmaW5lZC5cblx0ICAgIHZhciByZXNvbHZlZFNpemUgPSByZXNvbHZlZEVuZCAtIHJlc29sdmVkQmVnaW47XG5cdCAgICB2YXIgc2xpY2VTaXplO1xuXHQgICAgaWYgKHJlc29sdmVkU2l6ZSA9PT0gcmVzb2x2ZWRTaXplKSB7XG5cdCAgICAgIHNsaWNlU2l6ZSA9IHJlc29sdmVkU2l6ZSA8IDAgPyAwIDogcmVzb2x2ZWRTaXplO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBzbGljZVNlcSA9IG1ha2VTZXF1ZW5jZShpdGVyYWJsZSk7XG5cdFxuXHQgICAgLy8gSWYgaXRlcmFibGUuc2l6ZSBpcyB1bmRlZmluZWQsIHRoZSBzaXplIG9mIHRoZSByZWFsaXplZCBzbGljZVNlcSBpc1xuXHQgICAgLy8gdW5rbm93biBhdCB0aGlzIHBvaW50IHVubGVzcyB0aGUgbnVtYmVyIG9mIGl0ZW1zIHRvIHNsaWNlIGlzIDBcblx0ICAgIHNsaWNlU2VxLnNpemUgPSBzbGljZVNpemUgPT09IDAgPyBzbGljZVNpemUgOiBpdGVyYWJsZS5zaXplICYmIHNsaWNlU2l6ZSB8fCB1bmRlZmluZWQ7XG5cdFxuXHQgICAgaWYgKCF1c2VLZXlzICYmIGlzU2VxKGl0ZXJhYmxlKSAmJiBzbGljZVNpemUgPj0gMCkge1xuXHQgICAgICBzbGljZVNlcS5nZXQgPSBmdW5jdGlvbiAoaW5kZXgsIG5vdFNldFZhbHVlKSB7XG5cdCAgICAgICAgaW5kZXggPSB3cmFwSW5kZXgodGhpcywgaW5kZXgpO1xuXHQgICAgICAgIHJldHVybiBpbmRleCA+PSAwICYmIGluZGV4IDwgc2xpY2VTaXplID9cblx0ICAgICAgICAgIGl0ZXJhYmxlLmdldChpbmRleCArIHJlc29sdmVkQmVnaW4sIG5vdFNldFZhbHVlKSA6XG5cdCAgICAgICAgICBub3RTZXRWYWx1ZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHNsaWNlU2VxLl9faXRlcmF0ZVVuY2FjaGVkID0gZnVuY3Rpb24oZm4sIHJldmVyc2UpIHt2YXIgdGhpcyQwID0gdGhpcztcblx0ICAgICAgaWYgKHNsaWNlU2l6ZSA9PT0gMCkge1xuXHQgICAgICAgIHJldHVybiAwO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChyZXZlcnNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGVSZXN1bHQoKS5fX2l0ZXJhdGUoZm4sIHJldmVyc2UpO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBza2lwcGVkID0gMDtcblx0ICAgICAgdmFyIGlzU2tpcHBpbmcgPSB0cnVlO1xuXHQgICAgICB2YXIgaXRlcmF0aW9ucyA9IDA7XG5cdCAgICAgIGl0ZXJhYmxlLl9faXRlcmF0ZShmdW5jdGlvbih2LCBrKSAge1xuXHQgICAgICAgIGlmICghKGlzU2tpcHBpbmcgJiYgKGlzU2tpcHBpbmcgPSBza2lwcGVkKysgPCByZXNvbHZlZEJlZ2luKSkpIHtcblx0ICAgICAgICAgIGl0ZXJhdGlvbnMrKztcblx0ICAgICAgICAgIHJldHVybiBmbih2LCB1c2VLZXlzID8gayA6IGl0ZXJhdGlvbnMgLSAxLCB0aGlzJDApICE9PSBmYWxzZSAmJlxuXHQgICAgICAgICAgICAgICAgIGl0ZXJhdGlvbnMgIT09IHNsaWNlU2l6ZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgICByZXR1cm4gaXRlcmF0aW9ucztcblx0ICAgIH07XG5cdFxuXHQgICAgc2xpY2VTZXEuX19pdGVyYXRvclVuY2FjaGVkID0gZnVuY3Rpb24odHlwZSwgcmV2ZXJzZSkge1xuXHQgICAgICBpZiAoc2xpY2VTaXplICE9PSAwICYmIHJldmVyc2UpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5jYWNoZVJlc3VsdCgpLl9faXRlcmF0b3IodHlwZSwgcmV2ZXJzZSk7XG5cdCAgICAgIH1cblx0ICAgICAgLy8gRG9uJ3QgYm90aGVyIGluc3RhbnRpYXRpbmcgcGFyZW50IGl0ZXJhdG9yIGlmIHRha2luZyAwLlxuXHQgICAgICB2YXIgaXRlcmF0b3IgPSBzbGljZVNpemUgIT09IDAgJiYgaXRlcmFibGUuX19pdGVyYXRvcih0eXBlLCByZXZlcnNlKTtcblx0ICAgICAgdmFyIHNraXBwZWQgPSAwO1xuXHQgICAgICB2YXIgaXRlcmF0aW9ucyA9IDA7XG5cdCAgICAgIHJldHVybiBuZXcgSXRlcmF0b3IoZnVuY3Rpb24oKSAge1xuXHQgICAgICAgIHdoaWxlIChza2lwcGVkKysgPCByZXNvbHZlZEJlZ2luKSB7XG5cdCAgICAgICAgICBpdGVyYXRvci5uZXh0KCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmICgrK2l0ZXJhdGlvbnMgPiBzbGljZVNpemUpIHtcblx0ICAgICAgICAgIHJldHVybiBpdGVyYXRvckRvbmUoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIHN0ZXAgPSBpdGVyYXRvci5uZXh0KCk7XG5cdCAgICAgICAgaWYgKHVzZUtleXMgfHwgdHlwZSA9PT0gSVRFUkFURV9WQUxVRVMpIHtcblx0ICAgICAgICAgIHJldHVybiBzdGVwO1xuXHQgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gSVRFUkFURV9LRVlTKSB7XG5cdCAgICAgICAgICByZXR1cm4gaXRlcmF0b3JWYWx1ZSh0eXBlLCBpdGVyYXRpb25zIC0gMSwgdW5kZWZpbmVkLCBzdGVwKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcmV0dXJuIGl0ZXJhdG9yVmFsdWUodHlwZSwgaXRlcmF0aW9ucyAtIDEsIHN0ZXAudmFsdWVbMV0sIHN0ZXApO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIHNsaWNlU2VxO1xuXHQgIH1cblx0XG5cdFxuXHQgIGZ1bmN0aW9uIHRha2VXaGlsZUZhY3RvcnkoaXRlcmFibGUsIHByZWRpY2F0ZSwgY29udGV4dCkge1xuXHQgICAgdmFyIHRha2VTZXF1ZW5jZSA9IG1ha2VTZXF1ZW5jZShpdGVyYWJsZSk7XG5cdCAgICB0YWtlU2VxdWVuY2UuX19pdGVyYXRlVW5jYWNoZWQgPSBmdW5jdGlvbihmbiwgcmV2ZXJzZSkge3ZhciB0aGlzJDAgPSB0aGlzO1xuXHQgICAgICBpZiAocmV2ZXJzZSkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmNhY2hlUmVzdWx0KCkuX19pdGVyYXRlKGZuLCByZXZlcnNlKTtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgaXRlcmF0aW9ucyA9IDA7XG5cdCAgICAgIGl0ZXJhYmxlLl9faXRlcmF0ZShmdW5jdGlvbih2LCBrLCBjKSBcblx0ICAgICAgICB7cmV0dXJuIHByZWRpY2F0ZS5jYWxsKGNvbnRleHQsIHYsIGssIGMpICYmICsraXRlcmF0aW9ucyAmJiBmbih2LCBrLCB0aGlzJDApfVxuXHQgICAgICApO1xuXHQgICAgICByZXR1cm4gaXRlcmF0aW9ucztcblx0ICAgIH07XG5cdCAgICB0YWtlU2VxdWVuY2UuX19pdGVyYXRvclVuY2FjaGVkID0gZnVuY3Rpb24odHlwZSwgcmV2ZXJzZSkge3ZhciB0aGlzJDAgPSB0aGlzO1xuXHQgICAgICBpZiAocmV2ZXJzZSkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmNhY2hlUmVzdWx0KCkuX19pdGVyYXRvcih0eXBlLCByZXZlcnNlKTtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgaXRlcmF0b3IgPSBpdGVyYWJsZS5fX2l0ZXJhdG9yKElURVJBVEVfRU5UUklFUywgcmV2ZXJzZSk7XG5cdCAgICAgIHZhciBpdGVyYXRpbmcgPSB0cnVlO1xuXHQgICAgICByZXR1cm4gbmV3IEl0ZXJhdG9yKGZ1bmN0aW9uKCkgIHtcblx0ICAgICAgICBpZiAoIWl0ZXJhdGluZykge1xuXHQgICAgICAgICAgcmV0dXJuIGl0ZXJhdG9yRG9uZSgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgc3RlcCA9IGl0ZXJhdG9yLm5leHQoKTtcblx0ICAgICAgICBpZiAoc3RlcC5kb25lKSB7XG5cdCAgICAgICAgICByZXR1cm4gc3RlcDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIGVudHJ5ID0gc3RlcC52YWx1ZTtcblx0ICAgICAgICB2YXIgayA9IGVudHJ5WzBdO1xuXHQgICAgICAgIHZhciB2ID0gZW50cnlbMV07XG5cdCAgICAgICAgaWYgKCFwcmVkaWNhdGUuY2FsbChjb250ZXh0LCB2LCBrLCB0aGlzJDApKSB7XG5cdCAgICAgICAgICBpdGVyYXRpbmcgPSBmYWxzZTtcblx0ICAgICAgICAgIHJldHVybiBpdGVyYXRvckRvbmUoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIHR5cGUgPT09IElURVJBVEVfRU5UUklFUyA/IHN0ZXAgOlxuXHQgICAgICAgICAgaXRlcmF0b3JWYWx1ZSh0eXBlLCBrLCB2LCBzdGVwKTtcblx0ICAgICAgfSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIHRha2VTZXF1ZW5jZTtcblx0ICB9XG5cdFxuXHRcblx0ICBmdW5jdGlvbiBza2lwV2hpbGVGYWN0b3J5KGl0ZXJhYmxlLCBwcmVkaWNhdGUsIGNvbnRleHQsIHVzZUtleXMpIHtcblx0ICAgIHZhciBza2lwU2VxdWVuY2UgPSBtYWtlU2VxdWVuY2UoaXRlcmFibGUpO1xuXHQgICAgc2tpcFNlcXVlbmNlLl9faXRlcmF0ZVVuY2FjaGVkID0gZnVuY3Rpb24gKGZuLCByZXZlcnNlKSB7dmFyIHRoaXMkMCA9IHRoaXM7XG5cdCAgICAgIGlmIChyZXZlcnNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGVSZXN1bHQoKS5fX2l0ZXJhdGUoZm4sIHJldmVyc2UpO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBpc1NraXBwaW5nID0gdHJ1ZTtcblx0ICAgICAgdmFyIGl0ZXJhdGlvbnMgPSAwO1xuXHQgICAgICBpdGVyYWJsZS5fX2l0ZXJhdGUoZnVuY3Rpb24odiwgaywgYykgIHtcblx0ICAgICAgICBpZiAoIShpc1NraXBwaW5nICYmIChpc1NraXBwaW5nID0gcHJlZGljYXRlLmNhbGwoY29udGV4dCwgdiwgaywgYykpKSkge1xuXHQgICAgICAgICAgaXRlcmF0aW9ucysrO1xuXHQgICAgICAgICAgcmV0dXJuIGZuKHYsIHVzZUtleXMgPyBrIDogaXRlcmF0aW9ucyAtIDEsIHRoaXMkMCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgICAgcmV0dXJuIGl0ZXJhdGlvbnM7XG5cdCAgICB9O1xuXHQgICAgc2tpcFNlcXVlbmNlLl9faXRlcmF0b3JVbmNhY2hlZCA9IGZ1bmN0aW9uKHR5cGUsIHJldmVyc2UpIHt2YXIgdGhpcyQwID0gdGhpcztcblx0ICAgICAgaWYgKHJldmVyc2UpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5jYWNoZVJlc3VsdCgpLl9faXRlcmF0b3IodHlwZSwgcmV2ZXJzZSk7XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIGl0ZXJhdG9yID0gaXRlcmFibGUuX19pdGVyYXRvcihJVEVSQVRFX0VOVFJJRVMsIHJldmVyc2UpO1xuXHQgICAgICB2YXIgc2tpcHBpbmcgPSB0cnVlO1xuXHQgICAgICB2YXIgaXRlcmF0aW9ucyA9IDA7XG5cdCAgICAgIHJldHVybiBuZXcgSXRlcmF0b3IoZnVuY3Rpb24oKSAge1xuXHQgICAgICAgIHZhciBzdGVwLCBrLCB2O1xuXHQgICAgICAgIGRvIHtcblx0ICAgICAgICAgIHN0ZXAgPSBpdGVyYXRvci5uZXh0KCk7XG5cdCAgICAgICAgICBpZiAoc3RlcC5kb25lKSB7XG5cdCAgICAgICAgICAgIGlmICh1c2VLZXlzIHx8IHR5cGUgPT09IElURVJBVEVfVkFMVUVTKSB7XG5cdCAgICAgICAgICAgICAgcmV0dXJuIHN0ZXA7XG5cdCAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gSVRFUkFURV9LRVlTKSB7XG5cdCAgICAgICAgICAgICAgcmV0dXJuIGl0ZXJhdG9yVmFsdWUodHlwZSwgaXRlcmF0aW9ucysrLCB1bmRlZmluZWQsIHN0ZXApO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgIHJldHVybiBpdGVyYXRvclZhbHVlKHR5cGUsIGl0ZXJhdGlvbnMrKywgc3RlcC52YWx1ZVsxXSwgc3RlcCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIHZhciBlbnRyeSA9IHN0ZXAudmFsdWU7XG5cdCAgICAgICAgICBrID0gZW50cnlbMF07XG5cdCAgICAgICAgICB2ID0gZW50cnlbMV07XG5cdCAgICAgICAgICBza2lwcGluZyAmJiAoc2tpcHBpbmcgPSBwcmVkaWNhdGUuY2FsbChjb250ZXh0LCB2LCBrLCB0aGlzJDApKTtcblx0ICAgICAgICB9IHdoaWxlIChza2lwcGluZyk7XG5cdCAgICAgICAgcmV0dXJuIHR5cGUgPT09IElURVJBVEVfRU5UUklFUyA/IHN0ZXAgOlxuXHQgICAgICAgICAgaXRlcmF0b3JWYWx1ZSh0eXBlLCBrLCB2LCBzdGVwKTtcblx0ICAgICAgfSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIHNraXBTZXF1ZW5jZTtcblx0ICB9XG5cdFxuXHRcblx0ICBmdW5jdGlvbiBjb25jYXRGYWN0b3J5KGl0ZXJhYmxlLCB2YWx1ZXMpIHtcblx0ICAgIHZhciBpc0tleWVkSXRlcmFibGUgPSBpc0tleWVkKGl0ZXJhYmxlKTtcblx0ICAgIHZhciBpdGVycyA9IFtpdGVyYWJsZV0uY29uY2F0KHZhbHVlcykubWFwKGZ1bmN0aW9uKHYgKSB7XG5cdCAgICAgIGlmICghaXNJdGVyYWJsZSh2KSkge1xuXHQgICAgICAgIHYgPSBpc0tleWVkSXRlcmFibGUgP1xuXHQgICAgICAgICAga2V5ZWRTZXFGcm9tVmFsdWUodikgOlxuXHQgICAgICAgICAgaW5kZXhlZFNlcUZyb21WYWx1ZShBcnJheS5pc0FycmF5KHYpID8gdiA6IFt2XSk7XG5cdCAgICAgIH0gZWxzZSBpZiAoaXNLZXllZEl0ZXJhYmxlKSB7XG5cdCAgICAgICAgdiA9IEtleWVkSXRlcmFibGUodik7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHY7XG5cdCAgICB9KS5maWx0ZXIoZnVuY3Rpb24odiApIHtyZXR1cm4gdi5zaXplICE9PSAwfSk7XG5cdFxuXHQgICAgaWYgKGl0ZXJzLmxlbmd0aCA9PT0gMCkge1xuXHQgICAgICByZXR1cm4gaXRlcmFibGU7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKGl0ZXJzLmxlbmd0aCA9PT0gMSkge1xuXHQgICAgICB2YXIgc2luZ2xldG9uID0gaXRlcnNbMF07XG5cdCAgICAgIGlmIChzaW5nbGV0b24gPT09IGl0ZXJhYmxlIHx8XG5cdCAgICAgICAgICBpc0tleWVkSXRlcmFibGUgJiYgaXNLZXllZChzaW5nbGV0b24pIHx8XG5cdCAgICAgICAgICBpc0luZGV4ZWQoaXRlcmFibGUpICYmIGlzSW5kZXhlZChzaW5nbGV0b24pKSB7XG5cdCAgICAgICAgcmV0dXJuIHNpbmdsZXRvbjtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHZhciBjb25jYXRTZXEgPSBuZXcgQXJyYXlTZXEoaXRlcnMpO1xuXHQgICAgaWYgKGlzS2V5ZWRJdGVyYWJsZSkge1xuXHQgICAgICBjb25jYXRTZXEgPSBjb25jYXRTZXEudG9LZXllZFNlcSgpO1xuXHQgICAgfSBlbHNlIGlmICghaXNJbmRleGVkKGl0ZXJhYmxlKSkge1xuXHQgICAgICBjb25jYXRTZXEgPSBjb25jYXRTZXEudG9TZXRTZXEoKTtcblx0ICAgIH1cblx0ICAgIGNvbmNhdFNlcSA9IGNvbmNhdFNlcS5mbGF0dGVuKHRydWUpO1xuXHQgICAgY29uY2F0U2VxLnNpemUgPSBpdGVycy5yZWR1Y2UoXG5cdCAgICAgIGZ1bmN0aW9uKHN1bSwgc2VxKSAge1xuXHQgICAgICAgIGlmIChzdW0gIT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAgICAgdmFyIHNpemUgPSBzZXEuc2l6ZTtcblx0ICAgICAgICAgIGlmIChzaXplICE9PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHN1bSArIHNpemU7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9LFxuXHQgICAgICAwXG5cdCAgICApO1xuXHQgICAgcmV0dXJuIGNvbmNhdFNlcTtcblx0ICB9XG5cdFxuXHRcblx0ICBmdW5jdGlvbiBmbGF0dGVuRmFjdG9yeShpdGVyYWJsZSwgZGVwdGgsIHVzZUtleXMpIHtcblx0ICAgIHZhciBmbGF0U2VxdWVuY2UgPSBtYWtlU2VxdWVuY2UoaXRlcmFibGUpO1xuXHQgICAgZmxhdFNlcXVlbmNlLl9faXRlcmF0ZVVuY2FjaGVkID0gZnVuY3Rpb24oZm4sIHJldmVyc2UpIHtcblx0ICAgICAgdmFyIGl0ZXJhdGlvbnMgPSAwO1xuXHQgICAgICB2YXIgc3RvcHBlZCA9IGZhbHNlO1xuXHQgICAgICBmdW5jdGlvbiBmbGF0RGVlcChpdGVyLCBjdXJyZW50RGVwdGgpIHt2YXIgdGhpcyQwID0gdGhpcztcblx0ICAgICAgICBpdGVyLl9faXRlcmF0ZShmdW5jdGlvbih2LCBrKSAge1xuXHQgICAgICAgICAgaWYgKCghZGVwdGggfHwgY3VycmVudERlcHRoIDwgZGVwdGgpICYmIGlzSXRlcmFibGUodikpIHtcblx0ICAgICAgICAgICAgZmxhdERlZXAodiwgY3VycmVudERlcHRoICsgMSk7XG5cdCAgICAgICAgICB9IGVsc2UgaWYgKGZuKHYsIHVzZUtleXMgPyBrIDogaXRlcmF0aW9ucysrLCB0aGlzJDApID09PSBmYWxzZSkge1xuXHQgICAgICAgICAgICBzdG9wcGVkID0gdHJ1ZTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIHJldHVybiAhc3RvcHBlZDtcblx0ICAgICAgICB9LCByZXZlcnNlKTtcblx0ICAgICAgfVxuXHQgICAgICBmbGF0RGVlcChpdGVyYWJsZSwgMCk7XG5cdCAgICAgIHJldHVybiBpdGVyYXRpb25zO1xuXHQgICAgfVxuXHQgICAgZmxhdFNlcXVlbmNlLl9faXRlcmF0b3JVbmNhY2hlZCA9IGZ1bmN0aW9uKHR5cGUsIHJldmVyc2UpIHtcblx0ICAgICAgdmFyIGl0ZXJhdG9yID0gaXRlcmFibGUuX19pdGVyYXRvcih0eXBlLCByZXZlcnNlKTtcblx0ICAgICAgdmFyIHN0YWNrID0gW107XG5cdCAgICAgIHZhciBpdGVyYXRpb25zID0gMDtcblx0ICAgICAgcmV0dXJuIG5ldyBJdGVyYXRvcihmdW5jdGlvbigpICB7XG5cdCAgICAgICAgd2hpbGUgKGl0ZXJhdG9yKSB7XG5cdCAgICAgICAgICB2YXIgc3RlcCA9IGl0ZXJhdG9yLm5leHQoKTtcblx0ICAgICAgICAgIGlmIChzdGVwLmRvbmUgIT09IGZhbHNlKSB7XG5cdCAgICAgICAgICAgIGl0ZXJhdG9yID0gc3RhY2sucG9wKCk7XG5cdCAgICAgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgdmFyIHYgPSBzdGVwLnZhbHVlO1xuXHQgICAgICAgICAgaWYgKHR5cGUgPT09IElURVJBVEVfRU5UUklFUykge1xuXHQgICAgICAgICAgICB2ID0gdlsxXTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGlmICgoIWRlcHRoIHx8IHN0YWNrLmxlbmd0aCA8IGRlcHRoKSAmJiBpc0l0ZXJhYmxlKHYpKSB7XG5cdCAgICAgICAgICAgIHN0YWNrLnB1c2goaXRlcmF0b3IpO1xuXHQgICAgICAgICAgICBpdGVyYXRvciA9IHYuX19pdGVyYXRvcih0eXBlLCByZXZlcnNlKTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHJldHVybiB1c2VLZXlzID8gc3RlcCA6IGl0ZXJhdG9yVmFsdWUodHlwZSwgaXRlcmF0aW9ucysrLCB2LCBzdGVwKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIGl0ZXJhdG9yRG9uZSgpO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBmbGF0U2VxdWVuY2U7XG5cdCAgfVxuXHRcblx0XG5cdCAgZnVuY3Rpb24gZmxhdE1hcEZhY3RvcnkoaXRlcmFibGUsIG1hcHBlciwgY29udGV4dCkge1xuXHQgICAgdmFyIGNvZXJjZSA9IGl0ZXJhYmxlQ2xhc3MoaXRlcmFibGUpO1xuXHQgICAgcmV0dXJuIGl0ZXJhYmxlLnRvU2VxKCkubWFwKFxuXHQgICAgICBmdW5jdGlvbih2LCBrKSAge3JldHVybiBjb2VyY2UobWFwcGVyLmNhbGwoY29udGV4dCwgdiwgaywgaXRlcmFibGUpKX1cblx0ICAgICkuZmxhdHRlbih0cnVlKTtcblx0ICB9XG5cdFxuXHRcblx0ICBmdW5jdGlvbiBpbnRlcnBvc2VGYWN0b3J5KGl0ZXJhYmxlLCBzZXBhcmF0b3IpIHtcblx0ICAgIHZhciBpbnRlcnBvc2VkU2VxdWVuY2UgPSBtYWtlU2VxdWVuY2UoaXRlcmFibGUpO1xuXHQgICAgaW50ZXJwb3NlZFNlcXVlbmNlLnNpemUgPSBpdGVyYWJsZS5zaXplICYmIGl0ZXJhYmxlLnNpemUgKiAyIC0xO1xuXHQgICAgaW50ZXJwb3NlZFNlcXVlbmNlLl9faXRlcmF0ZVVuY2FjaGVkID0gZnVuY3Rpb24oZm4sIHJldmVyc2UpIHt2YXIgdGhpcyQwID0gdGhpcztcblx0ICAgICAgdmFyIGl0ZXJhdGlvbnMgPSAwO1xuXHQgICAgICBpdGVyYWJsZS5fX2l0ZXJhdGUoZnVuY3Rpb24odiwgaykgXG5cdCAgICAgICAge3JldHVybiAoIWl0ZXJhdGlvbnMgfHwgZm4oc2VwYXJhdG9yLCBpdGVyYXRpb25zKyssIHRoaXMkMCkgIT09IGZhbHNlKSAmJlxuXHQgICAgICAgIGZuKHYsIGl0ZXJhdGlvbnMrKywgdGhpcyQwKSAhPT0gZmFsc2V9LFxuXHQgICAgICAgIHJldmVyc2Vcblx0ICAgICAgKTtcblx0ICAgICAgcmV0dXJuIGl0ZXJhdGlvbnM7XG5cdCAgICB9O1xuXHQgICAgaW50ZXJwb3NlZFNlcXVlbmNlLl9faXRlcmF0b3JVbmNhY2hlZCA9IGZ1bmN0aW9uKHR5cGUsIHJldmVyc2UpIHtcblx0ICAgICAgdmFyIGl0ZXJhdG9yID0gaXRlcmFibGUuX19pdGVyYXRvcihJVEVSQVRFX1ZBTFVFUywgcmV2ZXJzZSk7XG5cdCAgICAgIHZhciBpdGVyYXRpb25zID0gMDtcblx0ICAgICAgdmFyIHN0ZXA7XG5cdCAgICAgIHJldHVybiBuZXcgSXRlcmF0b3IoZnVuY3Rpb24oKSAge1xuXHQgICAgICAgIGlmICghc3RlcCB8fCBpdGVyYXRpb25zICUgMikge1xuXHQgICAgICAgICAgc3RlcCA9IGl0ZXJhdG9yLm5leHQoKTtcblx0ICAgICAgICAgIGlmIChzdGVwLmRvbmUpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHN0ZXA7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiBpdGVyYXRpb25zICUgMiA/XG5cdCAgICAgICAgICBpdGVyYXRvclZhbHVlKHR5cGUsIGl0ZXJhdGlvbnMrKywgc2VwYXJhdG9yKSA6XG5cdCAgICAgICAgICBpdGVyYXRvclZhbHVlKHR5cGUsIGl0ZXJhdGlvbnMrKywgc3RlcC52YWx1ZSwgc3RlcCk7XG5cdCAgICAgIH0pO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBpbnRlcnBvc2VkU2VxdWVuY2U7XG5cdCAgfVxuXHRcblx0XG5cdCAgZnVuY3Rpb24gc29ydEZhY3RvcnkoaXRlcmFibGUsIGNvbXBhcmF0b3IsIG1hcHBlcikge1xuXHQgICAgaWYgKCFjb21wYXJhdG9yKSB7XG5cdCAgICAgIGNvbXBhcmF0b3IgPSBkZWZhdWx0Q29tcGFyYXRvcjtcblx0ICAgIH1cblx0ICAgIHZhciBpc0tleWVkSXRlcmFibGUgPSBpc0tleWVkKGl0ZXJhYmxlKTtcblx0ICAgIHZhciBpbmRleCA9IDA7XG5cdCAgICB2YXIgZW50cmllcyA9IGl0ZXJhYmxlLnRvU2VxKCkubWFwKFxuXHQgICAgICBmdW5jdGlvbih2LCBrKSAge3JldHVybiBbaywgdiwgaW5kZXgrKywgbWFwcGVyID8gbWFwcGVyKHYsIGssIGl0ZXJhYmxlKSA6IHZdfVxuXHQgICAgKS50b0FycmF5KCk7XG5cdCAgICBlbnRyaWVzLnNvcnQoZnVuY3Rpb24oYSwgYikgIHtyZXR1cm4gY29tcGFyYXRvcihhWzNdLCBiWzNdKSB8fCBhWzJdIC0gYlsyXX0pLmZvckVhY2goXG5cdCAgICAgIGlzS2V5ZWRJdGVyYWJsZSA/XG5cdCAgICAgIGZ1bmN0aW9uKHYsIGkpICB7IGVudHJpZXNbaV0ubGVuZ3RoID0gMjsgfSA6XG5cdCAgICAgIGZ1bmN0aW9uKHYsIGkpICB7IGVudHJpZXNbaV0gPSB2WzFdOyB9XG5cdCAgICApO1xuXHQgICAgcmV0dXJuIGlzS2V5ZWRJdGVyYWJsZSA/IEtleWVkU2VxKGVudHJpZXMpIDpcblx0ICAgICAgaXNJbmRleGVkKGl0ZXJhYmxlKSA/IEluZGV4ZWRTZXEoZW50cmllcykgOlxuXHQgICAgICBTZXRTZXEoZW50cmllcyk7XG5cdCAgfVxuXHRcblx0XG5cdCAgZnVuY3Rpb24gbWF4RmFjdG9yeShpdGVyYWJsZSwgY29tcGFyYXRvciwgbWFwcGVyKSB7XG5cdCAgICBpZiAoIWNvbXBhcmF0b3IpIHtcblx0ICAgICAgY29tcGFyYXRvciA9IGRlZmF1bHRDb21wYXJhdG9yO1xuXHQgICAgfVxuXHQgICAgaWYgKG1hcHBlcikge1xuXHQgICAgICB2YXIgZW50cnkgPSBpdGVyYWJsZS50b1NlcSgpXG5cdCAgICAgICAgLm1hcChmdW5jdGlvbih2LCBrKSAge3JldHVybiBbdiwgbWFwcGVyKHYsIGssIGl0ZXJhYmxlKV19KVxuXHQgICAgICAgIC5yZWR1Y2UoZnVuY3Rpb24oYSwgYikgIHtyZXR1cm4gbWF4Q29tcGFyZShjb21wYXJhdG9yLCBhWzFdLCBiWzFdKSA/IGIgOiBhfSk7XG5cdCAgICAgIHJldHVybiBlbnRyeSAmJiBlbnRyeVswXTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiBpdGVyYWJsZS5yZWR1Y2UoZnVuY3Rpb24oYSwgYikgIHtyZXR1cm4gbWF4Q29tcGFyZShjb21wYXJhdG9yLCBhLCBiKSA/IGIgOiBhfSk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBtYXhDb21wYXJlKGNvbXBhcmF0b3IsIGEsIGIpIHtcblx0ICAgIHZhciBjb21wID0gY29tcGFyYXRvcihiLCBhKTtcblx0ICAgIC8vIGIgaXMgY29uc2lkZXJlZCB0aGUgbmV3IG1heCBpZiB0aGUgY29tcGFyYXRvciBkZWNsYXJlcyB0aGVtIGVxdWFsLCBidXRcblx0ICAgIC8vIHRoZXkgYXJlIG5vdCBlcXVhbCBhbmQgYiBpcyBpbiBmYWN0IGEgbnVsbGlzaCB2YWx1ZS5cblx0ICAgIHJldHVybiAoY29tcCA9PT0gMCAmJiBiICE9PSBhICYmIChiID09PSB1bmRlZmluZWQgfHwgYiA9PT0gbnVsbCB8fCBiICE9PSBiKSkgfHwgY29tcCA+IDA7XG5cdCAgfVxuXHRcblx0XG5cdCAgZnVuY3Rpb24gemlwV2l0aEZhY3Rvcnkoa2V5SXRlciwgemlwcGVyLCBpdGVycykge1xuXHQgICAgdmFyIHppcFNlcXVlbmNlID0gbWFrZVNlcXVlbmNlKGtleUl0ZXIpO1xuXHQgICAgemlwU2VxdWVuY2Uuc2l6ZSA9IG5ldyBBcnJheVNlcShpdGVycykubWFwKGZ1bmN0aW9uKGkgKSB7cmV0dXJuIGkuc2l6ZX0pLm1pbigpO1xuXHQgICAgLy8gTm90ZTogdGhpcyBhIGdlbmVyaWMgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBfX2l0ZXJhdGUgaW4gdGVybXMgb2Zcblx0ICAgIC8vIF9faXRlcmF0b3Igd2hpY2ggbWF5IGJlIG1vcmUgZ2VuZXJpY2FsbHkgdXNlZnVsIGluIHRoZSBmdXR1cmUuXG5cdCAgICB6aXBTZXF1ZW5jZS5fX2l0ZXJhdGUgPSBmdW5jdGlvbihmbiwgcmV2ZXJzZSkge1xuXHQgICAgICAvKiBnZW5lcmljOlxuXHQgICAgICB2YXIgaXRlcmF0b3IgPSB0aGlzLl9faXRlcmF0b3IoSVRFUkFURV9FTlRSSUVTLCByZXZlcnNlKTtcblx0ICAgICAgdmFyIHN0ZXA7XG5cdCAgICAgIHZhciBpdGVyYXRpb25zID0gMDtcblx0ICAgICAgd2hpbGUgKCEoc3RlcCA9IGl0ZXJhdG9yLm5leHQoKSkuZG9uZSkge1xuXHQgICAgICAgIGl0ZXJhdGlvbnMrKztcblx0ICAgICAgICBpZiAoZm4oc3RlcC52YWx1ZVsxXSwgc3RlcC52YWx1ZVswXSwgdGhpcykgPT09IGZhbHNlKSB7XG5cdCAgICAgICAgICBicmVhaztcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGl0ZXJhdGlvbnM7XG5cdCAgICAgICovXG5cdCAgICAgIC8vIGluZGV4ZWQ6XG5cdCAgICAgIHZhciBpdGVyYXRvciA9IHRoaXMuX19pdGVyYXRvcihJVEVSQVRFX1ZBTFVFUywgcmV2ZXJzZSk7XG5cdCAgICAgIHZhciBzdGVwO1xuXHQgICAgICB2YXIgaXRlcmF0aW9ucyA9IDA7XG5cdCAgICAgIHdoaWxlICghKHN0ZXAgPSBpdGVyYXRvci5uZXh0KCkpLmRvbmUpIHtcblx0ICAgICAgICBpZiAoZm4oc3RlcC52YWx1ZSwgaXRlcmF0aW9ucysrLCB0aGlzKSA9PT0gZmFsc2UpIHtcblx0ICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gaXRlcmF0aW9ucztcblx0ICAgIH07XG5cdCAgICB6aXBTZXF1ZW5jZS5fX2l0ZXJhdG9yVW5jYWNoZWQgPSBmdW5jdGlvbih0eXBlLCByZXZlcnNlKSB7XG5cdCAgICAgIHZhciBpdGVyYXRvcnMgPSBpdGVycy5tYXAoZnVuY3Rpb24oaSApXG5cdCAgICAgICAge3JldHVybiAoaSA9IEl0ZXJhYmxlKGkpLCBnZXRJdGVyYXRvcihyZXZlcnNlID8gaS5yZXZlcnNlKCkgOiBpKSl9XG5cdCAgICAgICk7XG5cdCAgICAgIHZhciBpdGVyYXRpb25zID0gMDtcblx0ICAgICAgdmFyIGlzRG9uZSA9IGZhbHNlO1xuXHQgICAgICByZXR1cm4gbmV3IEl0ZXJhdG9yKGZ1bmN0aW9uKCkgIHtcblx0ICAgICAgICB2YXIgc3RlcHM7XG5cdCAgICAgICAgaWYgKCFpc0RvbmUpIHtcblx0ICAgICAgICAgIHN0ZXBzID0gaXRlcmF0b3JzLm1hcChmdW5jdGlvbihpICkge3JldHVybiBpLm5leHQoKX0pO1xuXHQgICAgICAgICAgaXNEb25lID0gc3RlcHMuc29tZShmdW5jdGlvbihzICkge3JldHVybiBzLmRvbmV9KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKGlzRG9uZSkge1xuXHQgICAgICAgICAgcmV0dXJuIGl0ZXJhdG9yRG9uZSgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gaXRlcmF0b3JWYWx1ZShcblx0ICAgICAgICAgIHR5cGUsXG5cdCAgICAgICAgICBpdGVyYXRpb25zKyssXG5cdCAgICAgICAgICB6aXBwZXIuYXBwbHkobnVsbCwgc3RlcHMubWFwKGZ1bmN0aW9uKHMgKSB7cmV0dXJuIHMudmFsdWV9KSlcblx0ICAgICAgICApO1xuXHQgICAgICB9KTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gemlwU2VxdWVuY2Vcblx0ICB9XG5cdFxuXHRcblx0ICAvLyAjcHJhZ21hIEhlbHBlciBGdW5jdGlvbnNcblx0XG5cdCAgZnVuY3Rpb24gcmVpZnkoaXRlciwgc2VxKSB7XG5cdCAgICByZXR1cm4gaXNTZXEoaXRlcikgPyBzZXEgOiBpdGVyLmNvbnN0cnVjdG9yKHNlcSk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiB2YWxpZGF0ZUVudHJ5KGVudHJ5KSB7XG5cdCAgICBpZiAoZW50cnkgIT09IE9iamVjdChlbnRyeSkpIHtcblx0ICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgW0ssIFZdIHR1cGxlOiAnICsgZW50cnkpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gcmVzb2x2ZVNpemUoaXRlcikge1xuXHQgICAgYXNzZXJ0Tm90SW5maW5pdGUoaXRlci5zaXplKTtcblx0ICAgIHJldHVybiBlbnN1cmVTaXplKGl0ZXIpO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gaXRlcmFibGVDbGFzcyhpdGVyYWJsZSkge1xuXHQgICAgcmV0dXJuIGlzS2V5ZWQoaXRlcmFibGUpID8gS2V5ZWRJdGVyYWJsZSA6XG5cdCAgICAgIGlzSW5kZXhlZChpdGVyYWJsZSkgPyBJbmRleGVkSXRlcmFibGUgOlxuXHQgICAgICBTZXRJdGVyYWJsZTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIG1ha2VTZXF1ZW5jZShpdGVyYWJsZSkge1xuXHQgICAgcmV0dXJuIE9iamVjdC5jcmVhdGUoXG5cdCAgICAgIChcblx0ICAgICAgICBpc0tleWVkKGl0ZXJhYmxlKSA/IEtleWVkU2VxIDpcblx0ICAgICAgICBpc0luZGV4ZWQoaXRlcmFibGUpID8gSW5kZXhlZFNlcSA6XG5cdCAgICAgICAgU2V0U2VxXG5cdCAgICAgICkucHJvdG90eXBlXG5cdCAgICApO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gY2FjaGVSZXN1bHRUaHJvdWdoKCkge1xuXHQgICAgaWYgKHRoaXMuX2l0ZXIuY2FjaGVSZXN1bHQpIHtcblx0ICAgICAgdGhpcy5faXRlci5jYWNoZVJlc3VsdCgpO1xuXHQgICAgICB0aGlzLnNpemUgPSB0aGlzLl9pdGVyLnNpemU7XG5cdCAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuIFNlcS5wcm90b3R5cGUuY2FjaGVSZXN1bHQuY2FsbCh0aGlzKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGRlZmF1bHRDb21wYXJhdG9yKGEsIGIpIHtcblx0ICAgIHJldHVybiBhID4gYiA/IDEgOiBhIDwgYiA/IC0xIDogMDtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGZvcmNlSXRlcmF0b3Ioa2V5UGF0aCkge1xuXHQgICAgdmFyIGl0ZXIgPSBnZXRJdGVyYXRvcihrZXlQYXRoKTtcblx0ICAgIGlmICghaXRlcikge1xuXHQgICAgICAvLyBBcnJheSBtaWdodCBub3QgYmUgaXRlcmFibGUgaW4gdGhpcyBlbnZpcm9ubWVudCwgc28gd2UgbmVlZCBhIGZhbGxiYWNrXG5cdCAgICAgIC8vIHRvIG91ciB3cmFwcGVkIHR5cGUuXG5cdCAgICAgIGlmICghaXNBcnJheUxpa2Uoa2V5UGF0aCkpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBpdGVyYWJsZSBvciBhcnJheS1saWtlOiAnICsga2V5UGF0aCk7XG5cdCAgICAgIH1cblx0ICAgICAgaXRlciA9IGdldEl0ZXJhdG9yKEl0ZXJhYmxlKGtleVBhdGgpKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBpdGVyO1xuXHQgIH1cblx0XG5cdCAgY3JlYXRlQ2xhc3MoUmVjb3JkLCBLZXllZENvbGxlY3Rpb24pO1xuXHRcblx0ICAgIGZ1bmN0aW9uIFJlY29yZChkZWZhdWx0VmFsdWVzLCBuYW1lKSB7XG5cdCAgICAgIHZhciBoYXNJbml0aWFsaXplZDtcblx0XG5cdCAgICAgIHZhciBSZWNvcmRUeXBlID0gZnVuY3Rpb24gUmVjb3JkKHZhbHVlcykge1xuXHQgICAgICAgIGlmICh2YWx1ZXMgaW5zdGFuY2VvZiBSZWNvcmRUeXBlKSB7XG5cdCAgICAgICAgICByZXR1cm4gdmFsdWVzO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUmVjb3JkVHlwZSkpIHtcblx0ICAgICAgICAgIHJldHVybiBuZXcgUmVjb3JkVHlwZSh2YWx1ZXMpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoIWhhc0luaXRpYWxpemVkKSB7XG5cdCAgICAgICAgICBoYXNJbml0aWFsaXplZCA9IHRydWU7XG5cdCAgICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGRlZmF1bHRWYWx1ZXMpO1xuXHQgICAgICAgICAgc2V0UHJvcHMoUmVjb3JkVHlwZVByb3RvdHlwZSwga2V5cyk7XG5cdCAgICAgICAgICBSZWNvcmRUeXBlUHJvdG90eXBlLnNpemUgPSBrZXlzLmxlbmd0aDtcblx0ICAgICAgICAgIFJlY29yZFR5cGVQcm90b3R5cGUuX25hbWUgPSBuYW1lO1xuXHQgICAgICAgICAgUmVjb3JkVHlwZVByb3RvdHlwZS5fa2V5cyA9IGtleXM7XG5cdCAgICAgICAgICBSZWNvcmRUeXBlUHJvdG90eXBlLl9kZWZhdWx0VmFsdWVzID0gZGVmYXVsdFZhbHVlcztcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5fbWFwID0gTWFwKHZhbHVlcyk7XG5cdCAgICAgIH07XG5cdFxuXHQgICAgICB2YXIgUmVjb3JkVHlwZVByb3RvdHlwZSA9IFJlY29yZFR5cGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShSZWNvcmRQcm90b3R5cGUpO1xuXHQgICAgICBSZWNvcmRUeXBlUHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUmVjb3JkVHlwZTtcblx0XG5cdCAgICAgIHJldHVybiBSZWNvcmRUeXBlO1xuXHQgICAgfVxuXHRcblx0ICAgIFJlY29yZC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuX190b1N0cmluZyhyZWNvcmROYW1lKHRoaXMpICsgJyB7JywgJ30nKTtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gQHByYWdtYSBBY2Nlc3Ncblx0XG5cdCAgICBSZWNvcmQucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uKGspIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuX2RlZmF1bHRWYWx1ZXMuaGFzT3duUHJvcGVydHkoayk7XG5cdCAgICB9O1xuXHRcblx0ICAgIFJlY29yZC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24oaywgbm90U2V0VmFsdWUpIHtcblx0ICAgICAgaWYgKCF0aGlzLmhhcyhrKSkge1xuXHQgICAgICAgIHJldHVybiBub3RTZXRWYWx1ZTtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgZGVmYXVsdFZhbCA9IHRoaXMuX2RlZmF1bHRWYWx1ZXNba107XG5cdCAgICAgIHJldHVybiB0aGlzLl9tYXAgPyB0aGlzLl9tYXAuZ2V0KGssIGRlZmF1bHRWYWwpIDogZGVmYXVsdFZhbDtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gQHByYWdtYSBNb2RpZmljYXRpb25cblx0XG5cdCAgICBSZWNvcmQucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIGlmICh0aGlzLl9fb3duZXJJRCkge1xuXHQgICAgICAgIHRoaXMuX21hcCAmJiB0aGlzLl9tYXAuY2xlYXIoKTtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgICAgfVxuXHQgICAgICB2YXIgUmVjb3JkVHlwZSA9IHRoaXMuY29uc3RydWN0b3I7XG5cdCAgICAgIHJldHVybiBSZWNvcmRUeXBlLl9lbXB0eSB8fCAoUmVjb3JkVHlwZS5fZW1wdHkgPSBtYWtlUmVjb3JkKHRoaXMsIGVtcHR5TWFwKCkpKTtcblx0ICAgIH07XG5cdFxuXHQgICAgUmVjb3JkLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbihrLCB2KSB7XG5cdCAgICAgIGlmICghdGhpcy5oYXMoaykpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBzZXQgdW5rbm93biBrZXkgXCInICsgayArICdcIiBvbiAnICsgcmVjb3JkTmFtZSh0aGlzKSk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKHRoaXMuX21hcCAmJiAhdGhpcy5fbWFwLmhhcyhrKSkge1xuXHQgICAgICAgIHZhciBkZWZhdWx0VmFsID0gdGhpcy5fZGVmYXVsdFZhbHVlc1trXTtcblx0ICAgICAgICBpZiAodiA9PT0gZGVmYXVsdFZhbCkge1xuXHQgICAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHZhciBuZXdNYXAgPSB0aGlzLl9tYXAgJiYgdGhpcy5fbWFwLnNldChrLCB2KTtcblx0ICAgICAgaWYgKHRoaXMuX19vd25lcklEIHx8IG5ld01hcCA9PT0gdGhpcy5fbWFwKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIG1ha2VSZWNvcmQodGhpcywgbmV3TWFwKTtcblx0ICAgIH07XG5cdFxuXHQgICAgUmVjb3JkLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbihrKSB7XG5cdCAgICAgIGlmICghdGhpcy5oYXMoaykpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgICAgfVxuXHQgICAgICB2YXIgbmV3TWFwID0gdGhpcy5fbWFwICYmIHRoaXMuX21hcC5yZW1vdmUoayk7XG5cdCAgICAgIGlmICh0aGlzLl9fb3duZXJJRCB8fCBuZXdNYXAgPT09IHRoaXMuX21hcCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBtYWtlUmVjb3JkKHRoaXMsIG5ld01hcCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIFJlY29yZC5wcm90b3R5cGUud2FzQWx0ZXJlZCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gdGhpcy5fbWFwLndhc0FsdGVyZWQoKTtcblx0ICAgIH07XG5cdFxuXHQgICAgUmVjb3JkLnByb3RvdHlwZS5fX2l0ZXJhdG9yID0gZnVuY3Rpb24odHlwZSwgcmV2ZXJzZSkge3ZhciB0aGlzJDAgPSB0aGlzO1xuXHQgICAgICByZXR1cm4gS2V5ZWRJdGVyYWJsZSh0aGlzLl9kZWZhdWx0VmFsdWVzKS5tYXAoZnVuY3Rpb24oXywgaykgIHtyZXR1cm4gdGhpcyQwLmdldChrKX0pLl9faXRlcmF0b3IodHlwZSwgcmV2ZXJzZSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIFJlY29yZC5wcm90b3R5cGUuX19pdGVyYXRlID0gZnVuY3Rpb24oZm4sIHJldmVyc2UpIHt2YXIgdGhpcyQwID0gdGhpcztcblx0ICAgICAgcmV0dXJuIEtleWVkSXRlcmFibGUodGhpcy5fZGVmYXVsdFZhbHVlcykubWFwKGZ1bmN0aW9uKF8sIGspICB7cmV0dXJuIHRoaXMkMC5nZXQoayl9KS5fX2l0ZXJhdGUoZm4sIHJldmVyc2UpO1xuXHQgICAgfTtcblx0XG5cdCAgICBSZWNvcmQucHJvdG90eXBlLl9fZW5zdXJlT3duZXIgPSBmdW5jdGlvbihvd25lcklEKSB7XG5cdCAgICAgIGlmIChvd25lcklEID09PSB0aGlzLl9fb3duZXJJRCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBuZXdNYXAgPSB0aGlzLl9tYXAgJiYgdGhpcy5fbWFwLl9fZW5zdXJlT3duZXIob3duZXJJRCk7XG5cdCAgICAgIGlmICghb3duZXJJRCkge1xuXHQgICAgICAgIHRoaXMuX19vd25lcklEID0gb3duZXJJRDtcblx0ICAgICAgICB0aGlzLl9tYXAgPSBuZXdNYXA7XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIG1ha2VSZWNvcmQodGhpcywgbmV3TWFwLCBvd25lcklEKTtcblx0ICAgIH07XG5cdFxuXHRcblx0ICB2YXIgUmVjb3JkUHJvdG90eXBlID0gUmVjb3JkLnByb3RvdHlwZTtcblx0ICBSZWNvcmRQcm90b3R5cGVbREVMRVRFXSA9IFJlY29yZFByb3RvdHlwZS5yZW1vdmU7XG5cdCAgUmVjb3JkUHJvdG90eXBlLmRlbGV0ZUluID1cblx0ICBSZWNvcmRQcm90b3R5cGUucmVtb3ZlSW4gPSBNYXBQcm90b3R5cGUucmVtb3ZlSW47XG5cdCAgUmVjb3JkUHJvdG90eXBlLm1lcmdlID0gTWFwUHJvdG90eXBlLm1lcmdlO1xuXHQgIFJlY29yZFByb3RvdHlwZS5tZXJnZVdpdGggPSBNYXBQcm90b3R5cGUubWVyZ2VXaXRoO1xuXHQgIFJlY29yZFByb3RvdHlwZS5tZXJnZUluID0gTWFwUHJvdG90eXBlLm1lcmdlSW47XG5cdCAgUmVjb3JkUHJvdG90eXBlLm1lcmdlRGVlcCA9IE1hcFByb3RvdHlwZS5tZXJnZURlZXA7XG5cdCAgUmVjb3JkUHJvdG90eXBlLm1lcmdlRGVlcFdpdGggPSBNYXBQcm90b3R5cGUubWVyZ2VEZWVwV2l0aDtcblx0ICBSZWNvcmRQcm90b3R5cGUubWVyZ2VEZWVwSW4gPSBNYXBQcm90b3R5cGUubWVyZ2VEZWVwSW47XG5cdCAgUmVjb3JkUHJvdG90eXBlLnNldEluID0gTWFwUHJvdG90eXBlLnNldEluO1xuXHQgIFJlY29yZFByb3RvdHlwZS51cGRhdGUgPSBNYXBQcm90b3R5cGUudXBkYXRlO1xuXHQgIFJlY29yZFByb3RvdHlwZS51cGRhdGVJbiA9IE1hcFByb3RvdHlwZS51cGRhdGVJbjtcblx0ICBSZWNvcmRQcm90b3R5cGUud2l0aE11dGF0aW9ucyA9IE1hcFByb3RvdHlwZS53aXRoTXV0YXRpb25zO1xuXHQgIFJlY29yZFByb3RvdHlwZS5hc011dGFibGUgPSBNYXBQcm90b3R5cGUuYXNNdXRhYmxlO1xuXHQgIFJlY29yZFByb3RvdHlwZS5hc0ltbXV0YWJsZSA9IE1hcFByb3RvdHlwZS5hc0ltbXV0YWJsZTtcblx0XG5cdFxuXHQgIGZ1bmN0aW9uIG1ha2VSZWNvcmQobGlrZVJlY29yZCwgbWFwLCBvd25lcklEKSB7XG5cdCAgICB2YXIgcmVjb3JkID0gT2JqZWN0LmNyZWF0ZShPYmplY3QuZ2V0UHJvdG90eXBlT2YobGlrZVJlY29yZCkpO1xuXHQgICAgcmVjb3JkLl9tYXAgPSBtYXA7XG5cdCAgICByZWNvcmQuX19vd25lcklEID0gb3duZXJJRDtcblx0ICAgIHJldHVybiByZWNvcmQ7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiByZWNvcmROYW1lKHJlY29yZCkge1xuXHQgICAgcmV0dXJuIHJlY29yZC5fbmFtZSB8fCByZWNvcmQuY29uc3RydWN0b3IubmFtZSB8fCAnUmVjb3JkJztcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHNldFByb3BzKHByb3RvdHlwZSwgbmFtZXMpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIG5hbWVzLmZvckVhY2goc2V0UHJvcC5iaW5kKHVuZGVmaW5lZCwgcHJvdG90eXBlKSk7XG5cdCAgICB9IGNhdGNoIChlcnJvcikge1xuXHQgICAgICAvLyBPYmplY3QuZGVmaW5lUHJvcGVydHkgZmFpbGVkLiBQcm9iYWJseSBJRTguXG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBzZXRQcm9wKHByb3RvdHlwZSwgbmFtZSkge1xuXHQgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHByb3RvdHlwZSwgbmFtZSwge1xuXHQgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmdldChuYW1lKTtcblx0ICAgICAgfSxcblx0ICAgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuXHQgICAgICAgIGludmFyaWFudCh0aGlzLl9fb3duZXJJRCwgJ0Nhbm5vdCBzZXQgb24gYW4gaW1tdXRhYmxlIHJlY29yZC4nKTtcblx0ICAgICAgICB0aGlzLnNldChuYW1lLCB2YWx1ZSk7XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHQgIH1cblx0XG5cdCAgY3JlYXRlQ2xhc3MoU2V0LCBTZXRDb2xsZWN0aW9uKTtcblx0XG5cdCAgICAvLyBAcHJhZ21hIENvbnN0cnVjdGlvblxuXHRcblx0ICAgIGZ1bmN0aW9uIFNldCh2YWx1ZSkge1xuXHQgICAgICByZXR1cm4gdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCA/IGVtcHR5U2V0KCkgOlxuXHQgICAgICAgIGlzU2V0KHZhbHVlKSAmJiAhaXNPcmRlcmVkKHZhbHVlKSA/IHZhbHVlIDpcblx0ICAgICAgICBlbXB0eVNldCgpLndpdGhNdXRhdGlvbnMoZnVuY3Rpb24oc2V0ICkge1xuXHQgICAgICAgICAgdmFyIGl0ZXIgPSBTZXRJdGVyYWJsZSh2YWx1ZSk7XG5cdCAgICAgICAgICBhc3NlcnROb3RJbmZpbml0ZShpdGVyLnNpemUpO1xuXHQgICAgICAgICAgaXRlci5mb3JFYWNoKGZ1bmN0aW9uKHYgKSB7cmV0dXJuIHNldC5hZGQodil9KTtcblx0ICAgICAgICB9KTtcblx0ICAgIH1cblx0XG5cdCAgICBTZXQub2YgPSBmdW5jdGlvbigvKi4uLnZhbHVlcyovKSB7XG5cdCAgICAgIHJldHVybiB0aGlzKGFyZ3VtZW50cyk7XG5cdCAgICB9O1xuXHRcblx0ICAgIFNldC5mcm9tS2V5cyA9IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdCAgICAgIHJldHVybiB0aGlzKEtleWVkSXRlcmFibGUodmFsdWUpLmtleVNlcSgpKTtcblx0ICAgIH07XG5cdFxuXHQgICAgU2V0LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gdGhpcy5fX3RvU3RyaW5nKCdTZXQgeycsICd9Jyk7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIEBwcmFnbWEgQWNjZXNzXG5cdFxuXHQgICAgU2V0LnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbih2YWx1ZSkge1xuXHQgICAgICByZXR1cm4gdGhpcy5fbWFwLmhhcyh2YWx1ZSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIEBwcmFnbWEgTW9kaWZpY2F0aW9uXG5cdFxuXHQgICAgU2V0LnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbih2YWx1ZSkge1xuXHQgICAgICByZXR1cm4gdXBkYXRlU2V0KHRoaXMsIHRoaXMuX21hcC5zZXQodmFsdWUsIHRydWUpKTtcblx0ICAgIH07XG5cdFxuXHQgICAgU2V0LnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbih2YWx1ZSkge1xuXHQgICAgICByZXR1cm4gdXBkYXRlU2V0KHRoaXMsIHRoaXMuX21hcC5yZW1vdmUodmFsdWUpKTtcblx0ICAgIH07XG5cdFxuXHQgICAgU2V0LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gdXBkYXRlU2V0KHRoaXMsIHRoaXMuX21hcC5jbGVhcigpKTtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gQHByYWdtYSBDb21wb3NpdGlvblxuXHRcblx0ICAgIFNldC5wcm90b3R5cGUudW5pb24gPSBmdW5jdGlvbigpIHt2YXIgaXRlcnMgPSBTTElDRSQwLmNhbGwoYXJndW1lbnRzLCAwKTtcblx0ICAgICAgaXRlcnMgPSBpdGVycy5maWx0ZXIoZnVuY3Rpb24oeCApIHtyZXR1cm4geC5zaXplICE9PSAwfSk7XG5cdCAgICAgIGlmIChpdGVycy5sZW5ndGggPT09IDApIHtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgICAgfVxuXHQgICAgICBpZiAodGhpcy5zaXplID09PSAwICYmICF0aGlzLl9fb3duZXJJRCAmJiBpdGVycy5sZW5ndGggPT09IDEpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3RvcihpdGVyc1swXSk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHRoaXMud2l0aE11dGF0aW9ucyhmdW5jdGlvbihzZXQgKSB7XG5cdCAgICAgICAgZm9yICh2YXIgaWkgPSAwOyBpaSA8IGl0ZXJzLmxlbmd0aDsgaWkrKykge1xuXHQgICAgICAgICAgU2V0SXRlcmFibGUoaXRlcnNbaWldKS5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlICkge3JldHVybiBzZXQuYWRkKHZhbHVlKX0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIFNldC5wcm90b3R5cGUuaW50ZXJzZWN0ID0gZnVuY3Rpb24oKSB7dmFyIGl0ZXJzID0gU0xJQ0UkMC5jYWxsKGFyZ3VtZW50cywgMCk7XG5cdCAgICAgIGlmIChpdGVycy5sZW5ndGggPT09IDApIHtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgICAgfVxuXHQgICAgICBpdGVycyA9IGl0ZXJzLm1hcChmdW5jdGlvbihpdGVyICkge3JldHVybiBTZXRJdGVyYWJsZShpdGVyKX0pO1xuXHQgICAgICB2YXIgb3JpZ2luYWxTZXQgPSB0aGlzO1xuXHQgICAgICByZXR1cm4gdGhpcy53aXRoTXV0YXRpb25zKGZ1bmN0aW9uKHNldCApIHtcblx0ICAgICAgICBvcmlnaW5hbFNldC5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlICkge1xuXHQgICAgICAgICAgaWYgKCFpdGVycy5ldmVyeShmdW5jdGlvbihpdGVyICkge3JldHVybiBpdGVyLmluY2x1ZGVzKHZhbHVlKX0pKSB7XG5cdCAgICAgICAgICAgIHNldC5yZW1vdmUodmFsdWUpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9KTtcblx0ICAgIH07XG5cdFxuXHQgICAgU2V0LnByb3RvdHlwZS5zdWJ0cmFjdCA9IGZ1bmN0aW9uKCkge3ZhciBpdGVycyA9IFNMSUNFJDAuY2FsbChhcmd1bWVudHMsIDApO1xuXHQgICAgICBpZiAoaXRlcnMubGVuZ3RoID09PSAwKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICAgIH1cblx0ICAgICAgaXRlcnMgPSBpdGVycy5tYXAoZnVuY3Rpb24oaXRlciApIHtyZXR1cm4gU2V0SXRlcmFibGUoaXRlcil9KTtcblx0ICAgICAgdmFyIG9yaWdpbmFsU2V0ID0gdGhpcztcblx0ICAgICAgcmV0dXJuIHRoaXMud2l0aE11dGF0aW9ucyhmdW5jdGlvbihzZXQgKSB7XG5cdCAgICAgICAgb3JpZ2luYWxTZXQuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSApIHtcblx0ICAgICAgICAgIGlmIChpdGVycy5zb21lKGZ1bmN0aW9uKGl0ZXIgKSB7cmV0dXJuIGl0ZXIuaW5jbHVkZXModmFsdWUpfSkpIHtcblx0ICAgICAgICAgICAgc2V0LnJlbW92ZSh2YWx1ZSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0pO1xuXHQgICAgfTtcblx0XG5cdCAgICBTZXQucHJvdG90eXBlLm1lcmdlID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLnVuaW9uLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICB9O1xuXHRcblx0ICAgIFNldC5wcm90b3R5cGUubWVyZ2VXaXRoID0gZnVuY3Rpb24obWVyZ2VyKSB7dmFyIGl0ZXJzID0gU0xJQ0UkMC5jYWxsKGFyZ3VtZW50cywgMSk7XG5cdCAgICAgIHJldHVybiB0aGlzLnVuaW9uLmFwcGx5KHRoaXMsIGl0ZXJzKTtcblx0ICAgIH07XG5cdFxuXHQgICAgU2V0LnByb3RvdHlwZS5zb3J0ID0gZnVuY3Rpb24oY29tcGFyYXRvcikge1xuXHQgICAgICAvLyBMYXRlIGJpbmRpbmdcblx0ICAgICAgcmV0dXJuIE9yZGVyZWRTZXQoc29ydEZhY3RvcnkodGhpcywgY29tcGFyYXRvcikpO1xuXHQgICAgfTtcblx0XG5cdCAgICBTZXQucHJvdG90eXBlLnNvcnRCeSA9IGZ1bmN0aW9uKG1hcHBlciwgY29tcGFyYXRvcikge1xuXHQgICAgICAvLyBMYXRlIGJpbmRpbmdcblx0ICAgICAgcmV0dXJuIE9yZGVyZWRTZXQoc29ydEZhY3RvcnkodGhpcywgY29tcGFyYXRvciwgbWFwcGVyKSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIFNldC5wcm90b3R5cGUud2FzQWx0ZXJlZCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gdGhpcy5fbWFwLndhc0FsdGVyZWQoKTtcblx0ICAgIH07XG5cdFxuXHQgICAgU2V0LnByb3RvdHlwZS5fX2l0ZXJhdGUgPSBmdW5jdGlvbihmbiwgcmV2ZXJzZSkge3ZhciB0aGlzJDAgPSB0aGlzO1xuXHQgICAgICByZXR1cm4gdGhpcy5fbWFwLl9faXRlcmF0ZShmdW5jdGlvbihfLCBrKSAge3JldHVybiBmbihrLCBrLCB0aGlzJDApfSwgcmV2ZXJzZSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIFNldC5wcm90b3R5cGUuX19pdGVyYXRvciA9IGZ1bmN0aW9uKHR5cGUsIHJldmVyc2UpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuX21hcC5tYXAoZnVuY3Rpb24oXywgaykgIHtyZXR1cm4ga30pLl9faXRlcmF0b3IodHlwZSwgcmV2ZXJzZSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIFNldC5wcm90b3R5cGUuX19lbnN1cmVPd25lciA9IGZ1bmN0aW9uKG93bmVySUQpIHtcblx0ICAgICAgaWYgKG93bmVySUQgPT09IHRoaXMuX19vd25lcklEKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIG5ld01hcCA9IHRoaXMuX21hcC5fX2Vuc3VyZU93bmVyKG93bmVySUQpO1xuXHQgICAgICBpZiAoIW93bmVySUQpIHtcblx0ICAgICAgICB0aGlzLl9fb3duZXJJRCA9IG93bmVySUQ7XG5cdCAgICAgICAgdGhpcy5fbWFwID0gbmV3TWFwO1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB0aGlzLl9fbWFrZShuZXdNYXAsIG93bmVySUQpO1xuXHQgICAgfTtcblx0XG5cdFxuXHQgIGZ1bmN0aW9uIGlzU2V0KG1heWJlU2V0KSB7XG5cdCAgICByZXR1cm4gISEobWF5YmVTZXQgJiYgbWF5YmVTZXRbSVNfU0VUX1NFTlRJTkVMXSk7XG5cdCAgfVxuXHRcblx0ICBTZXQuaXNTZXQgPSBpc1NldDtcblx0XG5cdCAgdmFyIElTX1NFVF9TRU5USU5FTCA9ICdAQF9fSU1NVVRBQkxFX1NFVF9fQEAnO1xuXHRcblx0ICB2YXIgU2V0UHJvdG90eXBlID0gU2V0LnByb3RvdHlwZTtcblx0ICBTZXRQcm90b3R5cGVbSVNfU0VUX1NFTlRJTkVMXSA9IHRydWU7XG5cdCAgU2V0UHJvdG90eXBlW0RFTEVURV0gPSBTZXRQcm90b3R5cGUucmVtb3ZlO1xuXHQgIFNldFByb3RvdHlwZS5tZXJnZURlZXAgPSBTZXRQcm90b3R5cGUubWVyZ2U7XG5cdCAgU2V0UHJvdG90eXBlLm1lcmdlRGVlcFdpdGggPSBTZXRQcm90b3R5cGUubWVyZ2VXaXRoO1xuXHQgIFNldFByb3RvdHlwZS53aXRoTXV0YXRpb25zID0gTWFwUHJvdG90eXBlLndpdGhNdXRhdGlvbnM7XG5cdCAgU2V0UHJvdG90eXBlLmFzTXV0YWJsZSA9IE1hcFByb3RvdHlwZS5hc011dGFibGU7XG5cdCAgU2V0UHJvdG90eXBlLmFzSW1tdXRhYmxlID0gTWFwUHJvdG90eXBlLmFzSW1tdXRhYmxlO1xuXHRcblx0ICBTZXRQcm90b3R5cGUuX19lbXB0eSA9IGVtcHR5U2V0O1xuXHQgIFNldFByb3RvdHlwZS5fX21ha2UgPSBtYWtlU2V0O1xuXHRcblx0ICBmdW5jdGlvbiB1cGRhdGVTZXQoc2V0LCBuZXdNYXApIHtcblx0ICAgIGlmIChzZXQuX19vd25lcklEKSB7XG5cdCAgICAgIHNldC5zaXplID0gbmV3TWFwLnNpemU7XG5cdCAgICAgIHNldC5fbWFwID0gbmV3TWFwO1xuXHQgICAgICByZXR1cm4gc2V0O1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIG5ld01hcCA9PT0gc2V0Ll9tYXAgPyBzZXQgOlxuXHQgICAgICBuZXdNYXAuc2l6ZSA9PT0gMCA/IHNldC5fX2VtcHR5KCkgOlxuXHQgICAgICBzZXQuX19tYWtlKG5ld01hcCk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBtYWtlU2V0KG1hcCwgb3duZXJJRCkge1xuXHQgICAgdmFyIHNldCA9IE9iamVjdC5jcmVhdGUoU2V0UHJvdG90eXBlKTtcblx0ICAgIHNldC5zaXplID0gbWFwID8gbWFwLnNpemUgOiAwO1xuXHQgICAgc2V0Ll9tYXAgPSBtYXA7XG5cdCAgICBzZXQuX19vd25lcklEID0gb3duZXJJRDtcblx0ICAgIHJldHVybiBzZXQ7XG5cdCAgfVxuXHRcblx0ICB2YXIgRU1QVFlfU0VUO1xuXHQgIGZ1bmN0aW9uIGVtcHR5U2V0KCkge1xuXHQgICAgcmV0dXJuIEVNUFRZX1NFVCB8fCAoRU1QVFlfU0VUID0gbWFrZVNldChlbXB0eU1hcCgpKSk7XG5cdCAgfVxuXHRcblx0ICBjcmVhdGVDbGFzcyhPcmRlcmVkU2V0LCBTZXQpO1xuXHRcblx0ICAgIC8vIEBwcmFnbWEgQ29uc3RydWN0aW9uXG5cdFxuXHQgICAgZnVuY3Rpb24gT3JkZXJlZFNldCh2YWx1ZSkge1xuXHQgICAgICByZXR1cm4gdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCA/IGVtcHR5T3JkZXJlZFNldCgpIDpcblx0ICAgICAgICBpc09yZGVyZWRTZXQodmFsdWUpID8gdmFsdWUgOlxuXHQgICAgICAgIGVtcHR5T3JkZXJlZFNldCgpLndpdGhNdXRhdGlvbnMoZnVuY3Rpb24oc2V0ICkge1xuXHQgICAgICAgICAgdmFyIGl0ZXIgPSBTZXRJdGVyYWJsZSh2YWx1ZSk7XG5cdCAgICAgICAgICBhc3NlcnROb3RJbmZpbml0ZShpdGVyLnNpemUpO1xuXHQgICAgICAgICAgaXRlci5mb3JFYWNoKGZ1bmN0aW9uKHYgKSB7cmV0dXJuIHNldC5hZGQodil9KTtcblx0ICAgICAgICB9KTtcblx0ICAgIH1cblx0XG5cdCAgICBPcmRlcmVkU2V0Lm9mID0gZnVuY3Rpb24oLyouLi52YWx1ZXMqLykge1xuXHQgICAgICByZXR1cm4gdGhpcyhhcmd1bWVudHMpO1xuXHQgICAgfTtcblx0XG5cdCAgICBPcmRlcmVkU2V0LmZyb21LZXlzID0gZnVuY3Rpb24odmFsdWUpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMoS2V5ZWRJdGVyYWJsZSh2YWx1ZSkua2V5U2VxKCkpO1xuXHQgICAgfTtcblx0XG5cdCAgICBPcmRlcmVkU2V0LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gdGhpcy5fX3RvU3RyaW5nKCdPcmRlcmVkU2V0IHsnLCAnfScpO1xuXHQgICAgfTtcblx0XG5cdFxuXHQgIGZ1bmN0aW9uIGlzT3JkZXJlZFNldChtYXliZU9yZGVyZWRTZXQpIHtcblx0ICAgIHJldHVybiBpc1NldChtYXliZU9yZGVyZWRTZXQpICYmIGlzT3JkZXJlZChtYXliZU9yZGVyZWRTZXQpO1xuXHQgIH1cblx0XG5cdCAgT3JkZXJlZFNldC5pc09yZGVyZWRTZXQgPSBpc09yZGVyZWRTZXQ7XG5cdFxuXHQgIHZhciBPcmRlcmVkU2V0UHJvdG90eXBlID0gT3JkZXJlZFNldC5wcm90b3R5cGU7XG5cdCAgT3JkZXJlZFNldFByb3RvdHlwZVtJU19PUkRFUkVEX1NFTlRJTkVMXSA9IHRydWU7XG5cdFxuXHQgIE9yZGVyZWRTZXRQcm90b3R5cGUuX19lbXB0eSA9IGVtcHR5T3JkZXJlZFNldDtcblx0ICBPcmRlcmVkU2V0UHJvdG90eXBlLl9fbWFrZSA9IG1ha2VPcmRlcmVkU2V0O1xuXHRcblx0ICBmdW5jdGlvbiBtYWtlT3JkZXJlZFNldChtYXAsIG93bmVySUQpIHtcblx0ICAgIHZhciBzZXQgPSBPYmplY3QuY3JlYXRlKE9yZGVyZWRTZXRQcm90b3R5cGUpO1xuXHQgICAgc2V0LnNpemUgPSBtYXAgPyBtYXAuc2l6ZSA6IDA7XG5cdCAgICBzZXQuX21hcCA9IG1hcDtcblx0ICAgIHNldC5fX293bmVySUQgPSBvd25lcklEO1xuXHQgICAgcmV0dXJuIHNldDtcblx0ICB9XG5cdFxuXHQgIHZhciBFTVBUWV9PUkRFUkVEX1NFVDtcblx0ICBmdW5jdGlvbiBlbXB0eU9yZGVyZWRTZXQoKSB7XG5cdCAgICByZXR1cm4gRU1QVFlfT1JERVJFRF9TRVQgfHwgKEVNUFRZX09SREVSRURfU0VUID0gbWFrZU9yZGVyZWRTZXQoZW1wdHlPcmRlcmVkTWFwKCkpKTtcblx0ICB9XG5cdFxuXHQgIGNyZWF0ZUNsYXNzKFN0YWNrLCBJbmRleGVkQ29sbGVjdGlvbik7XG5cdFxuXHQgICAgLy8gQHByYWdtYSBDb25zdHJ1Y3Rpb25cblx0XG5cdCAgICBmdW5jdGlvbiBTdGFjayh2YWx1ZSkge1xuXHQgICAgICByZXR1cm4gdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCA/IGVtcHR5U3RhY2soKSA6XG5cdCAgICAgICAgaXNTdGFjayh2YWx1ZSkgPyB2YWx1ZSA6XG5cdCAgICAgICAgZW1wdHlTdGFjaygpLnVuc2hpZnRBbGwodmFsdWUpO1xuXHQgICAgfVxuXHRcblx0ICAgIFN0YWNrLm9mID0gZnVuY3Rpb24oLyouLi52YWx1ZXMqLykge1xuXHQgICAgICByZXR1cm4gdGhpcyhhcmd1bWVudHMpO1xuXHQgICAgfTtcblx0XG5cdCAgICBTdGFjay5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuX190b1N0cmluZygnU3RhY2sgWycsICddJyk7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIEBwcmFnbWEgQWNjZXNzXG5cdFxuXHQgICAgU3RhY2sucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKGluZGV4LCBub3RTZXRWYWx1ZSkge1xuXHQgICAgICB2YXIgaGVhZCA9IHRoaXMuX2hlYWQ7XG5cdCAgICAgIGluZGV4ID0gd3JhcEluZGV4KHRoaXMsIGluZGV4KTtcblx0ICAgICAgd2hpbGUgKGhlYWQgJiYgaW5kZXgtLSkge1xuXHQgICAgICAgIGhlYWQgPSBoZWFkLm5leHQ7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGhlYWQgPyBoZWFkLnZhbHVlIDogbm90U2V0VmFsdWU7XG5cdCAgICB9O1xuXHRcblx0ICAgIFN0YWNrLnByb3RvdHlwZS5wZWVrID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLl9oZWFkICYmIHRoaXMuX2hlYWQudmFsdWU7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIEBwcmFnbWEgTW9kaWZpY2F0aW9uXG5cdFxuXHQgICAgU3RhY2sucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbigvKi4uLnZhbHVlcyovKSB7XG5cdCAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIG5ld1NpemUgPSB0aGlzLnNpemUgKyBhcmd1bWVudHMubGVuZ3RoO1xuXHQgICAgICB2YXIgaGVhZCA9IHRoaXMuX2hlYWQ7XG5cdCAgICAgIGZvciAodmFyIGlpID0gYXJndW1lbnRzLmxlbmd0aCAtIDE7IGlpID49IDA7IGlpLS0pIHtcblx0ICAgICAgICBoZWFkID0ge1xuXHQgICAgICAgICAgdmFsdWU6IGFyZ3VtZW50c1tpaV0sXG5cdCAgICAgICAgICBuZXh0OiBoZWFkXG5cdCAgICAgICAgfTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAodGhpcy5fX293bmVySUQpIHtcblx0ICAgICAgICB0aGlzLnNpemUgPSBuZXdTaXplO1xuXHQgICAgICAgIHRoaXMuX2hlYWQgPSBoZWFkO1xuXHQgICAgICAgIHRoaXMuX19oYXNoID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIHRoaXMuX19hbHRlcmVkID0gdHJ1ZTtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gbWFrZVN0YWNrKG5ld1NpemUsIGhlYWQpO1xuXHQgICAgfTtcblx0XG5cdCAgICBTdGFjay5wcm90b3R5cGUucHVzaEFsbCA9IGZ1bmN0aW9uKGl0ZXIpIHtcblx0ICAgICAgaXRlciA9IEluZGV4ZWRJdGVyYWJsZShpdGVyKTtcblx0ICAgICAgaWYgKGl0ZXIuc2l6ZSA9PT0gMCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgICB9XG5cdCAgICAgIGFzc2VydE5vdEluZmluaXRlKGl0ZXIuc2l6ZSk7XG5cdCAgICAgIHZhciBuZXdTaXplID0gdGhpcy5zaXplO1xuXHQgICAgICB2YXIgaGVhZCA9IHRoaXMuX2hlYWQ7XG5cdCAgICAgIGl0ZXIucmV2ZXJzZSgpLmZvckVhY2goZnVuY3Rpb24odmFsdWUgKSB7XG5cdCAgICAgICAgbmV3U2l6ZSsrO1xuXHQgICAgICAgIGhlYWQgPSB7XG5cdCAgICAgICAgICB2YWx1ZTogdmFsdWUsXG5cdCAgICAgICAgICBuZXh0OiBoZWFkXG5cdCAgICAgICAgfTtcblx0ICAgICAgfSk7XG5cdCAgICAgIGlmICh0aGlzLl9fb3duZXJJRCkge1xuXHQgICAgICAgIHRoaXMuc2l6ZSA9IG5ld1NpemU7XG5cdCAgICAgICAgdGhpcy5faGVhZCA9IGhlYWQ7XG5cdCAgICAgICAgdGhpcy5fX2hhc2ggPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgdGhpcy5fX2FsdGVyZWQgPSB0cnVlO1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBtYWtlU3RhY2sobmV3U2l6ZSwgaGVhZCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIFN0YWNrLnByb3RvdHlwZS5wb3AgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuc2xpY2UoMSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIFN0YWNrLnByb3RvdHlwZS51bnNoaWZ0ID0gZnVuY3Rpb24oLyouLi52YWx1ZXMqLykge1xuXHQgICAgICByZXR1cm4gdGhpcy5wdXNoLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICB9O1xuXHRcblx0ICAgIFN0YWNrLnByb3RvdHlwZS51bnNoaWZ0QWxsID0gZnVuY3Rpb24oaXRlcikge1xuXHQgICAgICByZXR1cm4gdGhpcy5wdXNoQWxsKGl0ZXIpO1xuXHQgICAgfTtcblx0XG5cdCAgICBTdGFjay5wcm90b3R5cGUuc2hpZnQgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMucG9wLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICB9O1xuXHRcblx0ICAgIFN0YWNrLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICBpZiAodGhpcy5zaXplID09PSAwKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKHRoaXMuX19vd25lcklEKSB7XG5cdCAgICAgICAgdGhpcy5zaXplID0gMDtcblx0ICAgICAgICB0aGlzLl9oZWFkID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIHRoaXMuX19oYXNoID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIHRoaXMuX19hbHRlcmVkID0gdHJ1ZTtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gZW1wdHlTdGFjaygpO1xuXHQgICAgfTtcblx0XG5cdCAgICBTdGFjay5wcm90b3R5cGUuc2xpY2UgPSBmdW5jdGlvbihiZWdpbiwgZW5kKSB7XG5cdCAgICAgIGlmICh3aG9sZVNsaWNlKGJlZ2luLCBlbmQsIHRoaXMuc2l6ZSkpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgICAgfVxuXHQgICAgICB2YXIgcmVzb2x2ZWRCZWdpbiA9IHJlc29sdmVCZWdpbihiZWdpbiwgdGhpcy5zaXplKTtcblx0ICAgICAgdmFyIHJlc29sdmVkRW5kID0gcmVzb2x2ZUVuZChlbmQsIHRoaXMuc2l6ZSk7XG5cdCAgICAgIGlmIChyZXNvbHZlZEVuZCAhPT0gdGhpcy5zaXplKSB7XG5cdCAgICAgICAgLy8gc3VwZXIuc2xpY2UoYmVnaW4sIGVuZCk7XG5cdCAgICAgICAgcmV0dXJuIEluZGV4ZWRDb2xsZWN0aW9uLnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMsIGJlZ2luLCBlbmQpO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBuZXdTaXplID0gdGhpcy5zaXplIC0gcmVzb2x2ZWRCZWdpbjtcblx0ICAgICAgdmFyIGhlYWQgPSB0aGlzLl9oZWFkO1xuXHQgICAgICB3aGlsZSAocmVzb2x2ZWRCZWdpbi0tKSB7XG5cdCAgICAgICAgaGVhZCA9IGhlYWQubmV4dDtcblx0ICAgICAgfVxuXHQgICAgICBpZiAodGhpcy5fX293bmVySUQpIHtcblx0ICAgICAgICB0aGlzLnNpemUgPSBuZXdTaXplO1xuXHQgICAgICAgIHRoaXMuX2hlYWQgPSBoZWFkO1xuXHQgICAgICAgIHRoaXMuX19oYXNoID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIHRoaXMuX19hbHRlcmVkID0gdHJ1ZTtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gbWFrZVN0YWNrKG5ld1NpemUsIGhlYWQpO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBAcHJhZ21hIE11dGFiaWxpdHlcblx0XG5cdCAgICBTdGFjay5wcm90b3R5cGUuX19lbnN1cmVPd25lciA9IGZ1bmN0aW9uKG93bmVySUQpIHtcblx0ICAgICAgaWYgKG93bmVySUQgPT09IHRoaXMuX19vd25lcklEKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKCFvd25lcklEKSB7XG5cdCAgICAgICAgdGhpcy5fX293bmVySUQgPSBvd25lcklEO1xuXHQgICAgICAgIHRoaXMuX19hbHRlcmVkID0gZmFsc2U7XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIG1ha2VTdGFjayh0aGlzLnNpemUsIHRoaXMuX2hlYWQsIG93bmVySUQsIHRoaXMuX19oYXNoKTtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gQHByYWdtYSBJdGVyYXRpb25cblx0XG5cdCAgICBTdGFjay5wcm90b3R5cGUuX19pdGVyYXRlID0gZnVuY3Rpb24oZm4sIHJldmVyc2UpIHtcblx0ICAgICAgaWYgKHJldmVyc2UpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5yZXZlcnNlKCkuX19pdGVyYXRlKGZuKTtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgaXRlcmF0aW9ucyA9IDA7XG5cdCAgICAgIHZhciBub2RlID0gdGhpcy5faGVhZDtcblx0ICAgICAgd2hpbGUgKG5vZGUpIHtcblx0ICAgICAgICBpZiAoZm4obm9kZS52YWx1ZSwgaXRlcmF0aW9ucysrLCB0aGlzKSA9PT0gZmFsc2UpIHtcblx0ICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBub2RlID0gbm9kZS5uZXh0O1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBpdGVyYXRpb25zO1xuXHQgICAgfTtcblx0XG5cdCAgICBTdGFjay5wcm90b3R5cGUuX19pdGVyYXRvciA9IGZ1bmN0aW9uKHR5cGUsIHJldmVyc2UpIHtcblx0ICAgICAgaWYgKHJldmVyc2UpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5yZXZlcnNlKCkuX19pdGVyYXRvcih0eXBlKTtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgaXRlcmF0aW9ucyA9IDA7XG5cdCAgICAgIHZhciBub2RlID0gdGhpcy5faGVhZDtcblx0ICAgICAgcmV0dXJuIG5ldyBJdGVyYXRvcihmdW5jdGlvbigpICB7XG5cdCAgICAgICAgaWYgKG5vZGUpIHtcblx0ICAgICAgICAgIHZhciB2YWx1ZSA9IG5vZGUudmFsdWU7XG5cdCAgICAgICAgICBub2RlID0gbm9kZS5uZXh0O1xuXHQgICAgICAgICAgcmV0dXJuIGl0ZXJhdG9yVmFsdWUodHlwZSwgaXRlcmF0aW9ucysrLCB2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiBpdGVyYXRvckRvbmUoKTtcblx0ICAgICAgfSk7XG5cdCAgICB9O1xuXHRcblx0XG5cdCAgZnVuY3Rpb24gaXNTdGFjayhtYXliZVN0YWNrKSB7XG5cdCAgICByZXR1cm4gISEobWF5YmVTdGFjayAmJiBtYXliZVN0YWNrW0lTX1NUQUNLX1NFTlRJTkVMXSk7XG5cdCAgfVxuXHRcblx0ICBTdGFjay5pc1N0YWNrID0gaXNTdGFjaztcblx0XG5cdCAgdmFyIElTX1NUQUNLX1NFTlRJTkVMID0gJ0BAX19JTU1VVEFCTEVfU1RBQ0tfX0BAJztcblx0XG5cdCAgdmFyIFN0YWNrUHJvdG90eXBlID0gU3RhY2sucHJvdG90eXBlO1xuXHQgIFN0YWNrUHJvdG90eXBlW0lTX1NUQUNLX1NFTlRJTkVMXSA9IHRydWU7XG5cdCAgU3RhY2tQcm90b3R5cGUud2l0aE11dGF0aW9ucyA9IE1hcFByb3RvdHlwZS53aXRoTXV0YXRpb25zO1xuXHQgIFN0YWNrUHJvdG90eXBlLmFzTXV0YWJsZSA9IE1hcFByb3RvdHlwZS5hc011dGFibGU7XG5cdCAgU3RhY2tQcm90b3R5cGUuYXNJbW11dGFibGUgPSBNYXBQcm90b3R5cGUuYXNJbW11dGFibGU7XG5cdCAgU3RhY2tQcm90b3R5cGUud2FzQWx0ZXJlZCA9IE1hcFByb3RvdHlwZS53YXNBbHRlcmVkO1xuXHRcblx0XG5cdCAgZnVuY3Rpb24gbWFrZVN0YWNrKHNpemUsIGhlYWQsIG93bmVySUQsIGhhc2gpIHtcblx0ICAgIHZhciBtYXAgPSBPYmplY3QuY3JlYXRlKFN0YWNrUHJvdG90eXBlKTtcblx0ICAgIG1hcC5zaXplID0gc2l6ZTtcblx0ICAgIG1hcC5faGVhZCA9IGhlYWQ7XG5cdCAgICBtYXAuX19vd25lcklEID0gb3duZXJJRDtcblx0ICAgIG1hcC5fX2hhc2ggPSBoYXNoO1xuXHQgICAgbWFwLl9fYWx0ZXJlZCA9IGZhbHNlO1xuXHQgICAgcmV0dXJuIG1hcDtcblx0ICB9XG5cdFxuXHQgIHZhciBFTVBUWV9TVEFDSztcblx0ICBmdW5jdGlvbiBlbXB0eVN0YWNrKCkge1xuXHQgICAgcmV0dXJuIEVNUFRZX1NUQUNLIHx8IChFTVBUWV9TVEFDSyA9IG1ha2VTdGFjaygwKSk7XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBDb250cmlidXRlcyBhZGRpdGlvbmFsIG1ldGhvZHMgdG8gYSBjb25zdHJ1Y3RvclxuXHQgICAqL1xuXHQgIGZ1bmN0aW9uIG1peGluKGN0b3IsIG1ldGhvZHMpIHtcblx0ICAgIHZhciBrZXlDb3BpZXIgPSBmdW5jdGlvbihrZXkgKSB7IGN0b3IucHJvdG90eXBlW2tleV0gPSBtZXRob2RzW2tleV07IH07XG5cdCAgICBPYmplY3Qua2V5cyhtZXRob2RzKS5mb3JFYWNoKGtleUNvcGllcik7XG5cdCAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzICYmXG5cdCAgICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMobWV0aG9kcykuZm9yRWFjaChrZXlDb3BpZXIpO1xuXHQgICAgcmV0dXJuIGN0b3I7XG5cdCAgfVxuXHRcblx0ICBJdGVyYWJsZS5JdGVyYXRvciA9IEl0ZXJhdG9yO1xuXHRcblx0ICBtaXhpbihJdGVyYWJsZSwge1xuXHRcblx0ICAgIC8vICMjIyBDb252ZXJzaW9uIHRvIG90aGVyIHR5cGVzXG5cdFxuXHQgICAgdG9BcnJheTogZnVuY3Rpb24oKSB7XG5cdCAgICAgIGFzc2VydE5vdEluZmluaXRlKHRoaXMuc2l6ZSk7XG5cdCAgICAgIHZhciBhcnJheSA9IG5ldyBBcnJheSh0aGlzLnNpemUgfHwgMCk7XG5cdCAgICAgIHRoaXMudmFsdWVTZXEoKS5fX2l0ZXJhdGUoZnVuY3Rpb24odiwgaSkgIHsgYXJyYXlbaV0gPSB2OyB9KTtcblx0ICAgICAgcmV0dXJuIGFycmF5O1xuXHQgICAgfSxcblx0XG5cdCAgICB0b0luZGV4ZWRTZXE6IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gbmV3IFRvSW5kZXhlZFNlcXVlbmNlKHRoaXMpO1xuXHQgICAgfSxcblx0XG5cdCAgICB0b0pTOiBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMudG9TZXEoKS5tYXAoXG5cdCAgICAgICAgZnVuY3Rpb24odmFsdWUgKSB7cmV0dXJuIHZhbHVlICYmIHR5cGVvZiB2YWx1ZS50b0pTID09PSAnZnVuY3Rpb24nID8gdmFsdWUudG9KUygpIDogdmFsdWV9XG5cdCAgICAgICkuX190b0pTKCk7XG5cdCAgICB9LFxuXHRcblx0ICAgIHRvSlNPTjogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLnRvU2VxKCkubWFwKFxuXHQgICAgICAgIGZ1bmN0aW9uKHZhbHVlICkge3JldHVybiB2YWx1ZSAmJiB0eXBlb2YgdmFsdWUudG9KU09OID09PSAnZnVuY3Rpb24nID8gdmFsdWUudG9KU09OKCkgOiB2YWx1ZX1cblx0ICAgICAgKS5fX3RvSlMoKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgdG9LZXllZFNlcTogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiBuZXcgVG9LZXllZFNlcXVlbmNlKHRoaXMsIHRydWUpO1xuXHQgICAgfSxcblx0XG5cdCAgICB0b01hcDogZnVuY3Rpb24oKSB7XG5cdCAgICAgIC8vIFVzZSBMYXRlIEJpbmRpbmcgaGVyZSB0byBzb2x2ZSB0aGUgY2lyY3VsYXIgZGVwZW5kZW5jeS5cblx0ICAgICAgcmV0dXJuIE1hcCh0aGlzLnRvS2V5ZWRTZXEoKSk7XG5cdCAgICB9LFxuXHRcblx0ICAgIHRvT2JqZWN0OiBmdW5jdGlvbigpIHtcblx0ICAgICAgYXNzZXJ0Tm90SW5maW5pdGUodGhpcy5zaXplKTtcblx0ICAgICAgdmFyIG9iamVjdCA9IHt9O1xuXHQgICAgICB0aGlzLl9faXRlcmF0ZShmdW5jdGlvbih2LCBrKSAgeyBvYmplY3Rba10gPSB2OyB9KTtcblx0ICAgICAgcmV0dXJuIG9iamVjdDtcblx0ICAgIH0sXG5cdFxuXHQgICAgdG9PcmRlcmVkTWFwOiBmdW5jdGlvbigpIHtcblx0ICAgICAgLy8gVXNlIExhdGUgQmluZGluZyBoZXJlIHRvIHNvbHZlIHRoZSBjaXJjdWxhciBkZXBlbmRlbmN5LlxuXHQgICAgICByZXR1cm4gT3JkZXJlZE1hcCh0aGlzLnRvS2V5ZWRTZXEoKSk7XG5cdCAgICB9LFxuXHRcblx0ICAgIHRvT3JkZXJlZFNldDogZnVuY3Rpb24oKSB7XG5cdCAgICAgIC8vIFVzZSBMYXRlIEJpbmRpbmcgaGVyZSB0byBzb2x2ZSB0aGUgY2lyY3VsYXIgZGVwZW5kZW5jeS5cblx0ICAgICAgcmV0dXJuIE9yZGVyZWRTZXQoaXNLZXllZCh0aGlzKSA/IHRoaXMudmFsdWVTZXEoKSA6IHRoaXMpO1xuXHQgICAgfSxcblx0XG5cdCAgICB0b1NldDogZnVuY3Rpb24oKSB7XG5cdCAgICAgIC8vIFVzZSBMYXRlIEJpbmRpbmcgaGVyZSB0byBzb2x2ZSB0aGUgY2lyY3VsYXIgZGVwZW5kZW5jeS5cblx0ICAgICAgcmV0dXJuIFNldChpc0tleWVkKHRoaXMpID8gdGhpcy52YWx1ZVNlcSgpIDogdGhpcyk7XG5cdCAgICB9LFxuXHRcblx0ICAgIHRvU2V0U2VxOiBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIG5ldyBUb1NldFNlcXVlbmNlKHRoaXMpO1xuXHQgICAgfSxcblx0XG5cdCAgICB0b1NlcTogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiBpc0luZGV4ZWQodGhpcykgPyB0aGlzLnRvSW5kZXhlZFNlcSgpIDpcblx0ICAgICAgICBpc0tleWVkKHRoaXMpID8gdGhpcy50b0tleWVkU2VxKCkgOlxuXHQgICAgICAgIHRoaXMudG9TZXRTZXEoKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgdG9TdGFjazogZnVuY3Rpb24oKSB7XG5cdCAgICAgIC8vIFVzZSBMYXRlIEJpbmRpbmcgaGVyZSB0byBzb2x2ZSB0aGUgY2lyY3VsYXIgZGVwZW5kZW5jeS5cblx0ICAgICAgcmV0dXJuIFN0YWNrKGlzS2V5ZWQodGhpcykgPyB0aGlzLnZhbHVlU2VxKCkgOiB0aGlzKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgdG9MaXN0OiBmdW5jdGlvbigpIHtcblx0ICAgICAgLy8gVXNlIExhdGUgQmluZGluZyBoZXJlIHRvIHNvbHZlIHRoZSBjaXJjdWxhciBkZXBlbmRlbmN5LlxuXHQgICAgICByZXR1cm4gTGlzdChpc0tleWVkKHRoaXMpID8gdGhpcy52YWx1ZVNlcSgpIDogdGhpcyk7XG5cdCAgICB9LFxuXHRcblx0XG5cdCAgICAvLyAjIyMgQ29tbW9uIEphdmFTY3JpcHQgbWV0aG9kcyBhbmQgcHJvcGVydGllc1xuXHRcblx0ICAgIHRvU3RyaW5nOiBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuICdbSXRlcmFibGVdJztcblx0ICAgIH0sXG5cdFxuXHQgICAgX190b1N0cmluZzogZnVuY3Rpb24oaGVhZCwgdGFpbCkge1xuXHQgICAgICBpZiAodGhpcy5zaXplID09PSAwKSB7XG5cdCAgICAgICAgcmV0dXJuIGhlYWQgKyB0YWlsO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBoZWFkICsgJyAnICsgdGhpcy50b1NlcSgpLm1hcCh0aGlzLl9fdG9TdHJpbmdNYXBwZXIpLmpvaW4oJywgJykgKyAnICcgKyB0YWlsO1xuXHQgICAgfSxcblx0XG5cdFxuXHQgICAgLy8gIyMjIEVTNiBDb2xsZWN0aW9uIG1ldGhvZHMgKEVTNiBBcnJheSBhbmQgTWFwKVxuXHRcblx0ICAgIGNvbmNhdDogZnVuY3Rpb24oKSB7dmFyIHZhbHVlcyA9IFNMSUNFJDAuY2FsbChhcmd1bWVudHMsIDApO1xuXHQgICAgICByZXR1cm4gcmVpZnkodGhpcywgY29uY2F0RmFjdG9yeSh0aGlzLCB2YWx1ZXMpKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgaW5jbHVkZXM6IGZ1bmN0aW9uKHNlYXJjaFZhbHVlKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLnNvbWUoZnVuY3Rpb24odmFsdWUgKSB7cmV0dXJuIGlzKHZhbHVlLCBzZWFyY2hWYWx1ZSl9KTtcblx0ICAgIH0sXG5cdFxuXHQgICAgZW50cmllczogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLl9faXRlcmF0b3IoSVRFUkFURV9FTlRSSUVTKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgZXZlcnk6IGZ1bmN0aW9uKHByZWRpY2F0ZSwgY29udGV4dCkge1xuXHQgICAgICBhc3NlcnROb3RJbmZpbml0ZSh0aGlzLnNpemUpO1xuXHQgICAgICB2YXIgcmV0dXJuVmFsdWUgPSB0cnVlO1xuXHQgICAgICB0aGlzLl9faXRlcmF0ZShmdW5jdGlvbih2LCBrLCBjKSAge1xuXHQgICAgICAgIGlmICghcHJlZGljYXRlLmNhbGwoY29udGV4dCwgdiwgaywgYykpIHtcblx0ICAgICAgICAgIHJldHVyblZhbHVlID0gZmFsc2U7XG5cdCAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgICAgcmV0dXJuIHJldHVyblZhbHVlO1xuXHQgICAgfSxcblx0XG5cdCAgICBmaWx0ZXI6IGZ1bmN0aW9uKHByZWRpY2F0ZSwgY29udGV4dCkge1xuXHQgICAgICByZXR1cm4gcmVpZnkodGhpcywgZmlsdGVyRmFjdG9yeSh0aGlzLCBwcmVkaWNhdGUsIGNvbnRleHQsIHRydWUpKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgZmluZDogZnVuY3Rpb24ocHJlZGljYXRlLCBjb250ZXh0LCBub3RTZXRWYWx1ZSkge1xuXHQgICAgICB2YXIgZW50cnkgPSB0aGlzLmZpbmRFbnRyeShwcmVkaWNhdGUsIGNvbnRleHQpO1xuXHQgICAgICByZXR1cm4gZW50cnkgPyBlbnRyeVsxXSA6IG5vdFNldFZhbHVlO1xuXHQgICAgfSxcblx0XG5cdCAgICBmb3JFYWNoOiBmdW5jdGlvbihzaWRlRWZmZWN0LCBjb250ZXh0KSB7XG5cdCAgICAgIGFzc2VydE5vdEluZmluaXRlKHRoaXMuc2l6ZSk7XG5cdCAgICAgIHJldHVybiB0aGlzLl9faXRlcmF0ZShjb250ZXh0ID8gc2lkZUVmZmVjdC5iaW5kKGNvbnRleHQpIDogc2lkZUVmZmVjdCk7XG5cdCAgICB9LFxuXHRcblx0ICAgIGpvaW46IGZ1bmN0aW9uKHNlcGFyYXRvcikge1xuXHQgICAgICBhc3NlcnROb3RJbmZpbml0ZSh0aGlzLnNpemUpO1xuXHQgICAgICBzZXBhcmF0b3IgPSBzZXBhcmF0b3IgIT09IHVuZGVmaW5lZCA/ICcnICsgc2VwYXJhdG9yIDogJywnO1xuXHQgICAgICB2YXIgam9pbmVkID0gJyc7XG5cdCAgICAgIHZhciBpc0ZpcnN0ID0gdHJ1ZTtcblx0ICAgICAgdGhpcy5fX2l0ZXJhdGUoZnVuY3Rpb24odiApIHtcblx0ICAgICAgICBpc0ZpcnN0ID8gKGlzRmlyc3QgPSBmYWxzZSkgOiAoam9pbmVkICs9IHNlcGFyYXRvcik7XG5cdCAgICAgICAgam9pbmVkICs9IHYgIT09IG51bGwgJiYgdiAhPT0gdW5kZWZpbmVkID8gdi50b1N0cmluZygpIDogJyc7XG5cdCAgICAgIH0pO1xuXHQgICAgICByZXR1cm4gam9pbmVkO1xuXHQgICAgfSxcblx0XG5cdCAgICBrZXlzOiBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuX19pdGVyYXRvcihJVEVSQVRFX0tFWVMpO1xuXHQgICAgfSxcblx0XG5cdCAgICBtYXA6IGZ1bmN0aW9uKG1hcHBlciwgY29udGV4dCkge1xuXHQgICAgICByZXR1cm4gcmVpZnkodGhpcywgbWFwRmFjdG9yeSh0aGlzLCBtYXBwZXIsIGNvbnRleHQpKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgcmVkdWNlOiBmdW5jdGlvbihyZWR1Y2VyLCBpbml0aWFsUmVkdWN0aW9uLCBjb250ZXh0KSB7XG5cdCAgICAgIGFzc2VydE5vdEluZmluaXRlKHRoaXMuc2l6ZSk7XG5cdCAgICAgIHZhciByZWR1Y3Rpb247XG5cdCAgICAgIHZhciB1c2VGaXJzdDtcblx0ICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7XG5cdCAgICAgICAgdXNlRmlyc3QgPSB0cnVlO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJlZHVjdGlvbiA9IGluaXRpYWxSZWR1Y3Rpb247XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5fX2l0ZXJhdGUoZnVuY3Rpb24odiwgaywgYykgIHtcblx0ICAgICAgICBpZiAodXNlRmlyc3QpIHtcblx0ICAgICAgICAgIHVzZUZpcnN0ID0gZmFsc2U7XG5cdCAgICAgICAgICByZWR1Y3Rpb24gPSB2O1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICByZWR1Y3Rpb24gPSByZWR1Y2VyLmNhbGwoY29udGV4dCwgcmVkdWN0aW9uLCB2LCBrLCBjKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgICByZXR1cm4gcmVkdWN0aW9uO1xuXHQgICAgfSxcblx0XG5cdCAgICByZWR1Y2VSaWdodDogZnVuY3Rpb24ocmVkdWNlciwgaW5pdGlhbFJlZHVjdGlvbiwgY29udGV4dCkge1xuXHQgICAgICB2YXIgcmV2ZXJzZWQgPSB0aGlzLnRvS2V5ZWRTZXEoKS5yZXZlcnNlKCk7XG5cdCAgICAgIHJldHVybiByZXZlcnNlZC5yZWR1Y2UuYXBwbHkocmV2ZXJzZWQsIGFyZ3VtZW50cyk7XG5cdCAgICB9LFxuXHRcblx0ICAgIHJldmVyc2U6IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gcmVpZnkodGhpcywgcmV2ZXJzZUZhY3RvcnkodGhpcywgdHJ1ZSkpO1xuXHQgICAgfSxcblx0XG5cdCAgICBzbGljZTogZnVuY3Rpb24oYmVnaW4sIGVuZCkge1xuXHQgICAgICByZXR1cm4gcmVpZnkodGhpcywgc2xpY2VGYWN0b3J5KHRoaXMsIGJlZ2luLCBlbmQsIHRydWUpKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgc29tZTogZnVuY3Rpb24ocHJlZGljYXRlLCBjb250ZXh0KSB7XG5cdCAgICAgIHJldHVybiAhdGhpcy5ldmVyeShub3QocHJlZGljYXRlKSwgY29udGV4dCk7XG5cdCAgICB9LFxuXHRcblx0ICAgIHNvcnQ6IGZ1bmN0aW9uKGNvbXBhcmF0b3IpIHtcblx0ICAgICAgcmV0dXJuIHJlaWZ5KHRoaXMsIHNvcnRGYWN0b3J5KHRoaXMsIGNvbXBhcmF0b3IpKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgdmFsdWVzOiBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuX19pdGVyYXRvcihJVEVSQVRFX1ZBTFVFUyk7XG5cdCAgICB9LFxuXHRcblx0XG5cdCAgICAvLyAjIyMgTW9yZSBzZXF1ZW50aWFsIG1ldGhvZHNcblx0XG5cdCAgICBidXRMYXN0OiBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuc2xpY2UoMCwgLTEpO1xuXHQgICAgfSxcblx0XG5cdCAgICBpc0VtcHR5OiBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuc2l6ZSAhPT0gdW5kZWZpbmVkID8gdGhpcy5zaXplID09PSAwIDogIXRoaXMuc29tZShmdW5jdGlvbigpICB7cmV0dXJuIHRydWV9KTtcblx0ICAgIH0sXG5cdFxuXHQgICAgY291bnQ6IGZ1bmN0aW9uKHByZWRpY2F0ZSwgY29udGV4dCkge1xuXHQgICAgICByZXR1cm4gZW5zdXJlU2l6ZShcblx0ICAgICAgICBwcmVkaWNhdGUgPyB0aGlzLnRvU2VxKCkuZmlsdGVyKHByZWRpY2F0ZSwgY29udGV4dCkgOiB0aGlzXG5cdCAgICAgICk7XG5cdCAgICB9LFxuXHRcblx0ICAgIGNvdW50Qnk6IGZ1bmN0aW9uKGdyb3VwZXIsIGNvbnRleHQpIHtcblx0ICAgICAgcmV0dXJuIGNvdW50QnlGYWN0b3J5KHRoaXMsIGdyb3VwZXIsIGNvbnRleHQpO1xuXHQgICAgfSxcblx0XG5cdCAgICBlcXVhbHM6IGZ1bmN0aW9uKG90aGVyKSB7XG5cdCAgICAgIHJldHVybiBkZWVwRXF1YWwodGhpcywgb3RoZXIpO1xuXHQgICAgfSxcblx0XG5cdCAgICBlbnRyeVNlcTogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHZhciBpdGVyYWJsZSA9IHRoaXM7XG5cdCAgICAgIGlmIChpdGVyYWJsZS5fY2FjaGUpIHtcblx0ICAgICAgICAvLyBXZSBjYWNoZSBhcyBhbiBlbnRyaWVzIGFycmF5LCBzbyB3ZSBjYW4ganVzdCByZXR1cm4gdGhlIGNhY2hlIVxuXHQgICAgICAgIHJldHVybiBuZXcgQXJyYXlTZXEoaXRlcmFibGUuX2NhY2hlKTtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgZW50cmllc1NlcXVlbmNlID0gaXRlcmFibGUudG9TZXEoKS5tYXAoZW50cnlNYXBwZXIpLnRvSW5kZXhlZFNlcSgpO1xuXHQgICAgICBlbnRyaWVzU2VxdWVuY2UuZnJvbUVudHJ5U2VxID0gZnVuY3Rpb24oKSAge3JldHVybiBpdGVyYWJsZS50b1NlcSgpfTtcblx0ICAgICAgcmV0dXJuIGVudHJpZXNTZXF1ZW5jZTtcblx0ICAgIH0sXG5cdFxuXHQgICAgZmlsdGVyTm90OiBmdW5jdGlvbihwcmVkaWNhdGUsIGNvbnRleHQpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyKG5vdChwcmVkaWNhdGUpLCBjb250ZXh0KTtcblx0ICAgIH0sXG5cdFxuXHQgICAgZmluZEVudHJ5OiBmdW5jdGlvbihwcmVkaWNhdGUsIGNvbnRleHQsIG5vdFNldFZhbHVlKSB7XG5cdCAgICAgIHZhciBmb3VuZCA9IG5vdFNldFZhbHVlO1xuXHQgICAgICB0aGlzLl9faXRlcmF0ZShmdW5jdGlvbih2LCBrLCBjKSAge1xuXHQgICAgICAgIGlmIChwcmVkaWNhdGUuY2FsbChjb250ZXh0LCB2LCBrLCBjKSkge1xuXHQgICAgICAgICAgZm91bmQgPSBbaywgdl07XG5cdCAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgICAgcmV0dXJuIGZvdW5kO1xuXHQgICAgfSxcblx0XG5cdCAgICBmaW5kS2V5OiBmdW5jdGlvbihwcmVkaWNhdGUsIGNvbnRleHQpIHtcblx0ICAgICAgdmFyIGVudHJ5ID0gdGhpcy5maW5kRW50cnkocHJlZGljYXRlLCBjb250ZXh0KTtcblx0ICAgICAgcmV0dXJuIGVudHJ5ICYmIGVudHJ5WzBdO1xuXHQgICAgfSxcblx0XG5cdCAgICBmaW5kTGFzdDogZnVuY3Rpb24ocHJlZGljYXRlLCBjb250ZXh0LCBub3RTZXRWYWx1ZSkge1xuXHQgICAgICByZXR1cm4gdGhpcy50b0tleWVkU2VxKCkucmV2ZXJzZSgpLmZpbmQocHJlZGljYXRlLCBjb250ZXh0LCBub3RTZXRWYWx1ZSk7XG5cdCAgICB9LFxuXHRcblx0ICAgIGZpbmRMYXN0RW50cnk6IGZ1bmN0aW9uKHByZWRpY2F0ZSwgY29udGV4dCwgbm90U2V0VmFsdWUpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMudG9LZXllZFNlcSgpLnJldmVyc2UoKS5maW5kRW50cnkocHJlZGljYXRlLCBjb250ZXh0LCBub3RTZXRWYWx1ZSk7XG5cdCAgICB9LFxuXHRcblx0ICAgIGZpbmRMYXN0S2V5OiBmdW5jdGlvbihwcmVkaWNhdGUsIGNvbnRleHQpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMudG9LZXllZFNlcSgpLnJldmVyc2UoKS5maW5kS2V5KHByZWRpY2F0ZSwgY29udGV4dCk7XG5cdCAgICB9LFxuXHRcblx0ICAgIGZpcnN0OiBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuZmluZChyZXR1cm5UcnVlKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgZmxhdE1hcDogZnVuY3Rpb24obWFwcGVyLCBjb250ZXh0KSB7XG5cdCAgICAgIHJldHVybiByZWlmeSh0aGlzLCBmbGF0TWFwRmFjdG9yeSh0aGlzLCBtYXBwZXIsIGNvbnRleHQpKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgZmxhdHRlbjogZnVuY3Rpb24oZGVwdGgpIHtcblx0ICAgICAgcmV0dXJuIHJlaWZ5KHRoaXMsIGZsYXR0ZW5GYWN0b3J5KHRoaXMsIGRlcHRoLCB0cnVlKSk7XG5cdCAgICB9LFxuXHRcblx0ICAgIGZyb21FbnRyeVNlcTogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiBuZXcgRnJvbUVudHJpZXNTZXF1ZW5jZSh0aGlzKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgZ2V0OiBmdW5jdGlvbihzZWFyY2hLZXksIG5vdFNldFZhbHVlKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLmZpbmQoZnVuY3Rpb24oXywga2V5KSAge3JldHVybiBpcyhrZXksIHNlYXJjaEtleSl9LCB1bmRlZmluZWQsIG5vdFNldFZhbHVlKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgZ2V0SW46IGZ1bmN0aW9uKHNlYXJjaEtleVBhdGgsIG5vdFNldFZhbHVlKSB7XG5cdCAgICAgIHZhciBuZXN0ZWQgPSB0aGlzO1xuXHQgICAgICAvLyBOb3RlOiBpbiBhbiBFUzYgZW52aXJvbm1lbnQsIHdlIHdvdWxkIHByZWZlcjpcblx0ICAgICAgLy8gZm9yICh2YXIga2V5IG9mIHNlYXJjaEtleVBhdGgpIHtcblx0ICAgICAgdmFyIGl0ZXIgPSBmb3JjZUl0ZXJhdG9yKHNlYXJjaEtleVBhdGgpO1xuXHQgICAgICB2YXIgc3RlcDtcblx0ICAgICAgd2hpbGUgKCEoc3RlcCA9IGl0ZXIubmV4dCgpKS5kb25lKSB7XG5cdCAgICAgICAgdmFyIGtleSA9IHN0ZXAudmFsdWU7XG5cdCAgICAgICAgbmVzdGVkID0gbmVzdGVkICYmIG5lc3RlZC5nZXQgPyBuZXN0ZWQuZ2V0KGtleSwgTk9UX1NFVCkgOiBOT1RfU0VUO1xuXHQgICAgICAgIGlmIChuZXN0ZWQgPT09IE5PVF9TRVQpIHtcblx0ICAgICAgICAgIHJldHVybiBub3RTZXRWYWx1ZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIG5lc3RlZDtcblx0ICAgIH0sXG5cdFxuXHQgICAgZ3JvdXBCeTogZnVuY3Rpb24oZ3JvdXBlciwgY29udGV4dCkge1xuXHQgICAgICByZXR1cm4gZ3JvdXBCeUZhY3RvcnkodGhpcywgZ3JvdXBlciwgY29udGV4dCk7XG5cdCAgICB9LFxuXHRcblx0ICAgIGhhczogZnVuY3Rpb24oc2VhcmNoS2V5KSB7XG5cdCAgICAgIHJldHVybiB0aGlzLmdldChzZWFyY2hLZXksIE5PVF9TRVQpICE9PSBOT1RfU0VUO1xuXHQgICAgfSxcblx0XG5cdCAgICBoYXNJbjogZnVuY3Rpb24oc2VhcmNoS2V5UGF0aCkge1xuXHQgICAgICByZXR1cm4gdGhpcy5nZXRJbihzZWFyY2hLZXlQYXRoLCBOT1RfU0VUKSAhPT0gTk9UX1NFVDtcblx0ICAgIH0sXG5cdFxuXHQgICAgaXNTdWJzZXQ6IGZ1bmN0aW9uKGl0ZXIpIHtcblx0ICAgICAgaXRlciA9IHR5cGVvZiBpdGVyLmluY2x1ZGVzID09PSAnZnVuY3Rpb24nID8gaXRlciA6IEl0ZXJhYmxlKGl0ZXIpO1xuXHQgICAgICByZXR1cm4gdGhpcy5ldmVyeShmdW5jdGlvbih2YWx1ZSApIHtyZXR1cm4gaXRlci5pbmNsdWRlcyh2YWx1ZSl9KTtcblx0ICAgIH0sXG5cdFxuXHQgICAgaXNTdXBlcnNldDogZnVuY3Rpb24oaXRlcikge1xuXHQgICAgICBpdGVyID0gdHlwZW9mIGl0ZXIuaXNTdWJzZXQgPT09ICdmdW5jdGlvbicgPyBpdGVyIDogSXRlcmFibGUoaXRlcik7XG5cdCAgICAgIHJldHVybiBpdGVyLmlzU3Vic2V0KHRoaXMpO1xuXHQgICAgfSxcblx0XG5cdCAgICBrZXlPZjogZnVuY3Rpb24oc2VhcmNoVmFsdWUpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuZmluZEtleShmdW5jdGlvbih2YWx1ZSApIHtyZXR1cm4gaXModmFsdWUsIHNlYXJjaFZhbHVlKX0pO1xuXHQgICAgfSxcblx0XG5cdCAgICBrZXlTZXE6IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gdGhpcy50b1NlcSgpLm1hcChrZXlNYXBwZXIpLnRvSW5kZXhlZFNlcSgpO1xuXHQgICAgfSxcblx0XG5cdCAgICBsYXN0OiBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMudG9TZXEoKS5yZXZlcnNlKCkuZmlyc3QoKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgbGFzdEtleU9mOiBmdW5jdGlvbihzZWFyY2hWYWx1ZSkge1xuXHQgICAgICByZXR1cm4gdGhpcy50b0tleWVkU2VxKCkucmV2ZXJzZSgpLmtleU9mKHNlYXJjaFZhbHVlKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgbWF4OiBmdW5jdGlvbihjb21wYXJhdG9yKSB7XG5cdCAgICAgIHJldHVybiBtYXhGYWN0b3J5KHRoaXMsIGNvbXBhcmF0b3IpO1xuXHQgICAgfSxcblx0XG5cdCAgICBtYXhCeTogZnVuY3Rpb24obWFwcGVyLCBjb21wYXJhdG9yKSB7XG5cdCAgICAgIHJldHVybiBtYXhGYWN0b3J5KHRoaXMsIGNvbXBhcmF0b3IsIG1hcHBlcik7XG5cdCAgICB9LFxuXHRcblx0ICAgIG1pbjogZnVuY3Rpb24oY29tcGFyYXRvcikge1xuXHQgICAgICByZXR1cm4gbWF4RmFjdG9yeSh0aGlzLCBjb21wYXJhdG9yID8gbmVnKGNvbXBhcmF0b3IpIDogZGVmYXVsdE5lZ0NvbXBhcmF0b3IpO1xuXHQgICAgfSxcblx0XG5cdCAgICBtaW5CeTogZnVuY3Rpb24obWFwcGVyLCBjb21wYXJhdG9yKSB7XG5cdCAgICAgIHJldHVybiBtYXhGYWN0b3J5KHRoaXMsIGNvbXBhcmF0b3IgPyBuZWcoY29tcGFyYXRvcikgOiBkZWZhdWx0TmVnQ29tcGFyYXRvciwgbWFwcGVyKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgcmVzdDogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLnNsaWNlKDEpO1xuXHQgICAgfSxcblx0XG5cdCAgICBza2lwOiBmdW5jdGlvbihhbW91bnQpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuc2xpY2UoTWF0aC5tYXgoMCwgYW1vdW50KSk7XG5cdCAgICB9LFxuXHRcblx0ICAgIHNraXBMYXN0OiBmdW5jdGlvbihhbW91bnQpIHtcblx0ICAgICAgcmV0dXJuIHJlaWZ5KHRoaXMsIHRoaXMudG9TZXEoKS5yZXZlcnNlKCkuc2tpcChhbW91bnQpLnJldmVyc2UoKSk7XG5cdCAgICB9LFxuXHRcblx0ICAgIHNraXBXaGlsZTogZnVuY3Rpb24ocHJlZGljYXRlLCBjb250ZXh0KSB7XG5cdCAgICAgIHJldHVybiByZWlmeSh0aGlzLCBza2lwV2hpbGVGYWN0b3J5KHRoaXMsIHByZWRpY2F0ZSwgY29udGV4dCwgdHJ1ZSkpO1xuXHQgICAgfSxcblx0XG5cdCAgICBza2lwVW50aWw6IGZ1bmN0aW9uKHByZWRpY2F0ZSwgY29udGV4dCkge1xuXHQgICAgICByZXR1cm4gdGhpcy5za2lwV2hpbGUobm90KHByZWRpY2F0ZSksIGNvbnRleHQpO1xuXHQgICAgfSxcblx0XG5cdCAgICBzb3J0Qnk6IGZ1bmN0aW9uKG1hcHBlciwgY29tcGFyYXRvcikge1xuXHQgICAgICByZXR1cm4gcmVpZnkodGhpcywgc29ydEZhY3RvcnkodGhpcywgY29tcGFyYXRvciwgbWFwcGVyKSk7XG5cdCAgICB9LFxuXHRcblx0ICAgIHRha2U6IGZ1bmN0aW9uKGFtb3VudCkge1xuXHQgICAgICByZXR1cm4gdGhpcy5zbGljZSgwLCBNYXRoLm1heCgwLCBhbW91bnQpKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgdGFrZUxhc3Q6IGZ1bmN0aW9uKGFtb3VudCkge1xuXHQgICAgICByZXR1cm4gcmVpZnkodGhpcywgdGhpcy50b1NlcSgpLnJldmVyc2UoKS50YWtlKGFtb3VudCkucmV2ZXJzZSgpKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgdGFrZVdoaWxlOiBmdW5jdGlvbihwcmVkaWNhdGUsIGNvbnRleHQpIHtcblx0ICAgICAgcmV0dXJuIHJlaWZ5KHRoaXMsIHRha2VXaGlsZUZhY3RvcnkodGhpcywgcHJlZGljYXRlLCBjb250ZXh0KSk7XG5cdCAgICB9LFxuXHRcblx0ICAgIHRha2VVbnRpbDogZnVuY3Rpb24ocHJlZGljYXRlLCBjb250ZXh0KSB7XG5cdCAgICAgIHJldHVybiB0aGlzLnRha2VXaGlsZShub3QocHJlZGljYXRlKSwgY29udGV4dCk7XG5cdCAgICB9LFxuXHRcblx0ICAgIHZhbHVlU2VxOiBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMudG9JbmRleGVkU2VxKCk7XG5cdCAgICB9LFxuXHRcblx0XG5cdCAgICAvLyAjIyMgSGFzaGFibGUgT2JqZWN0XG5cdFxuXHQgICAgaGFzaENvZGU6IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gdGhpcy5fX2hhc2ggfHwgKHRoaXMuX19oYXNoID0gaGFzaEl0ZXJhYmxlKHRoaXMpKTtcblx0ICAgIH1cblx0XG5cdFxuXHQgICAgLy8gIyMjIEludGVybmFsXG5cdFxuXHQgICAgLy8gYWJzdHJhY3QgX19pdGVyYXRlKGZuLCByZXZlcnNlKVxuXHRcblx0ICAgIC8vIGFic3RyYWN0IF9faXRlcmF0b3IodHlwZSwgcmV2ZXJzZSlcblx0ICB9KTtcblx0XG5cdCAgLy8gdmFyIElTX0lURVJBQkxFX1NFTlRJTkVMID0gJ0BAX19JTU1VVEFCTEVfSVRFUkFCTEVfX0BAJztcblx0ICAvLyB2YXIgSVNfS0VZRURfU0VOVElORUwgPSAnQEBfX0lNTVVUQUJMRV9LRVlFRF9fQEAnO1xuXHQgIC8vIHZhciBJU19JTkRFWEVEX1NFTlRJTkVMID0gJ0BAX19JTU1VVEFCTEVfSU5ERVhFRF9fQEAnO1xuXHQgIC8vIHZhciBJU19PUkRFUkVEX1NFTlRJTkVMID0gJ0BAX19JTU1VVEFCTEVfT1JERVJFRF9fQEAnO1xuXHRcblx0ICB2YXIgSXRlcmFibGVQcm90b3R5cGUgPSBJdGVyYWJsZS5wcm90b3R5cGU7XG5cdCAgSXRlcmFibGVQcm90b3R5cGVbSVNfSVRFUkFCTEVfU0VOVElORUxdID0gdHJ1ZTtcblx0ICBJdGVyYWJsZVByb3RvdHlwZVtJVEVSQVRPUl9TWU1CT0xdID0gSXRlcmFibGVQcm90b3R5cGUudmFsdWVzO1xuXHQgIEl0ZXJhYmxlUHJvdG90eXBlLl9fdG9KUyA9IEl0ZXJhYmxlUHJvdG90eXBlLnRvQXJyYXk7XG5cdCAgSXRlcmFibGVQcm90b3R5cGUuX190b1N0cmluZ01hcHBlciA9IHF1b3RlU3RyaW5nO1xuXHQgIEl0ZXJhYmxlUHJvdG90eXBlLmluc3BlY3QgPVxuXHQgIEl0ZXJhYmxlUHJvdG90eXBlLnRvU291cmNlID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLnRvU3RyaW5nKCk7IH07XG5cdCAgSXRlcmFibGVQcm90b3R5cGUuY2hhaW4gPSBJdGVyYWJsZVByb3RvdHlwZS5mbGF0TWFwO1xuXHQgIEl0ZXJhYmxlUHJvdG90eXBlLmNvbnRhaW5zID0gSXRlcmFibGVQcm90b3R5cGUuaW5jbHVkZXM7XG5cdFxuXHQgIG1peGluKEtleWVkSXRlcmFibGUsIHtcblx0XG5cdCAgICAvLyAjIyMgTW9yZSBzZXF1ZW50aWFsIG1ldGhvZHNcblx0XG5cdCAgICBmbGlwOiBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIHJlaWZ5KHRoaXMsIGZsaXBGYWN0b3J5KHRoaXMpKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgbWFwRW50cmllczogZnVuY3Rpb24obWFwcGVyLCBjb250ZXh0KSB7dmFyIHRoaXMkMCA9IHRoaXM7XG5cdCAgICAgIHZhciBpdGVyYXRpb25zID0gMDtcblx0ICAgICAgcmV0dXJuIHJlaWZ5KHRoaXMsXG5cdCAgICAgICAgdGhpcy50b1NlcSgpLm1hcChcblx0ICAgICAgICAgIGZ1bmN0aW9uKHYsIGspICB7cmV0dXJuIG1hcHBlci5jYWxsKGNvbnRleHQsIFtrLCB2XSwgaXRlcmF0aW9ucysrLCB0aGlzJDApfVxuXHQgICAgICAgICkuZnJvbUVudHJ5U2VxKClcblx0ICAgICAgKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgbWFwS2V5czogZnVuY3Rpb24obWFwcGVyLCBjb250ZXh0KSB7dmFyIHRoaXMkMCA9IHRoaXM7XG5cdCAgICAgIHJldHVybiByZWlmeSh0aGlzLFxuXHQgICAgICAgIHRoaXMudG9TZXEoKS5mbGlwKCkubWFwKFxuXHQgICAgICAgICAgZnVuY3Rpb24oaywgdikgIHtyZXR1cm4gbWFwcGVyLmNhbGwoY29udGV4dCwgaywgdiwgdGhpcyQwKX1cblx0ICAgICAgICApLmZsaXAoKVxuXHQgICAgICApO1xuXHQgICAgfVxuXHRcblx0ICB9KTtcblx0XG5cdCAgdmFyIEtleWVkSXRlcmFibGVQcm90b3R5cGUgPSBLZXllZEl0ZXJhYmxlLnByb3RvdHlwZTtcblx0ICBLZXllZEl0ZXJhYmxlUHJvdG90eXBlW0lTX0tFWUVEX1NFTlRJTkVMXSA9IHRydWU7XG5cdCAgS2V5ZWRJdGVyYWJsZVByb3RvdHlwZVtJVEVSQVRPUl9TWU1CT0xdID0gSXRlcmFibGVQcm90b3R5cGUuZW50cmllcztcblx0ICBLZXllZEl0ZXJhYmxlUHJvdG90eXBlLl9fdG9KUyA9IEl0ZXJhYmxlUHJvdG90eXBlLnRvT2JqZWN0O1xuXHQgIEtleWVkSXRlcmFibGVQcm90b3R5cGUuX190b1N0cmluZ01hcHBlciA9IGZ1bmN0aW9uKHYsIGspICB7cmV0dXJuIEpTT04uc3RyaW5naWZ5KGspICsgJzogJyArIHF1b3RlU3RyaW5nKHYpfTtcblx0XG5cdFxuXHRcblx0ICBtaXhpbihJbmRleGVkSXRlcmFibGUsIHtcblx0XG5cdCAgICAvLyAjIyMgQ29udmVyc2lvbiB0byBvdGhlciB0eXBlc1xuXHRcblx0ICAgIHRvS2V5ZWRTZXE6IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gbmV3IFRvS2V5ZWRTZXF1ZW5jZSh0aGlzLCBmYWxzZSk7XG5cdCAgICB9LFxuXHRcblx0XG5cdCAgICAvLyAjIyMgRVM2IENvbGxlY3Rpb24gbWV0aG9kcyAoRVM2IEFycmF5IGFuZCBNYXApXG5cdFxuXHQgICAgZmlsdGVyOiBmdW5jdGlvbihwcmVkaWNhdGUsIGNvbnRleHQpIHtcblx0ICAgICAgcmV0dXJuIHJlaWZ5KHRoaXMsIGZpbHRlckZhY3RvcnkodGhpcywgcHJlZGljYXRlLCBjb250ZXh0LCBmYWxzZSkpO1xuXHQgICAgfSxcblx0XG5cdCAgICBmaW5kSW5kZXg6IGZ1bmN0aW9uKHByZWRpY2F0ZSwgY29udGV4dCkge1xuXHQgICAgICB2YXIgZW50cnkgPSB0aGlzLmZpbmRFbnRyeShwcmVkaWNhdGUsIGNvbnRleHQpO1xuXHQgICAgICByZXR1cm4gZW50cnkgPyBlbnRyeVswXSA6IC0xO1xuXHQgICAgfSxcblx0XG5cdCAgICBpbmRleE9mOiBmdW5jdGlvbihzZWFyY2hWYWx1ZSkge1xuXHQgICAgICB2YXIga2V5ID0gdGhpcy5rZXlPZihzZWFyY2hWYWx1ZSk7XG5cdCAgICAgIHJldHVybiBrZXkgPT09IHVuZGVmaW5lZCA/IC0xIDoga2V5O1xuXHQgICAgfSxcblx0XG5cdCAgICBsYXN0SW5kZXhPZjogZnVuY3Rpb24oc2VhcmNoVmFsdWUpIHtcblx0ICAgICAgdmFyIGtleSA9IHRoaXMubGFzdEtleU9mKHNlYXJjaFZhbHVlKTtcblx0ICAgICAgcmV0dXJuIGtleSA9PT0gdW5kZWZpbmVkID8gLTEgOiBrZXk7XG5cdCAgICB9LFxuXHRcblx0ICAgIHJldmVyc2U6IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gcmVpZnkodGhpcywgcmV2ZXJzZUZhY3RvcnkodGhpcywgZmFsc2UpKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgc2xpY2U6IGZ1bmN0aW9uKGJlZ2luLCBlbmQpIHtcblx0ICAgICAgcmV0dXJuIHJlaWZ5KHRoaXMsIHNsaWNlRmFjdG9yeSh0aGlzLCBiZWdpbiwgZW5kLCBmYWxzZSkpO1xuXHQgICAgfSxcblx0XG5cdCAgICBzcGxpY2U6IGZ1bmN0aW9uKGluZGV4LCByZW1vdmVOdW0gLyosIC4uLnZhbHVlcyovKSB7XG5cdCAgICAgIHZhciBudW1BcmdzID0gYXJndW1lbnRzLmxlbmd0aDtcblx0ICAgICAgcmVtb3ZlTnVtID0gTWF0aC5tYXgocmVtb3ZlTnVtIHwgMCwgMCk7XG5cdCAgICAgIGlmIChudW1BcmdzID09PSAwIHx8IChudW1BcmdzID09PSAyICYmICFyZW1vdmVOdW0pKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICAgIH1cblx0ICAgICAgLy8gSWYgaW5kZXggaXMgbmVnYXRpdmUsIGl0IHNob3VsZCByZXNvbHZlIHJlbGF0aXZlIHRvIHRoZSBzaXplIG9mIHRoZVxuXHQgICAgICAvLyBjb2xsZWN0aW9uLiBIb3dldmVyIHNpemUgbWF5IGJlIGV4cGVuc2l2ZSB0byBjb21wdXRlIGlmIG5vdCBjYWNoZWQsIHNvXG5cdCAgICAgIC8vIG9ubHkgY2FsbCBjb3VudCgpIGlmIHRoZSBudW1iZXIgaXMgaW4gZmFjdCBuZWdhdGl2ZS5cblx0ICAgICAgaW5kZXggPSByZXNvbHZlQmVnaW4oaW5kZXgsIGluZGV4IDwgMCA/IHRoaXMuY291bnQoKSA6IHRoaXMuc2l6ZSk7XG5cdCAgICAgIHZhciBzcGxpY2VkID0gdGhpcy5zbGljZSgwLCBpbmRleCk7XG5cdCAgICAgIHJldHVybiByZWlmeShcblx0ICAgICAgICB0aGlzLFxuXHQgICAgICAgIG51bUFyZ3MgPT09IDEgP1xuXHQgICAgICAgICAgc3BsaWNlZCA6XG5cdCAgICAgICAgICBzcGxpY2VkLmNvbmNhdChhcnJDb3B5KGFyZ3VtZW50cywgMiksIHRoaXMuc2xpY2UoaW5kZXggKyByZW1vdmVOdW0pKVxuXHQgICAgICApO1xuXHQgICAgfSxcblx0XG5cdFxuXHQgICAgLy8gIyMjIE1vcmUgY29sbGVjdGlvbiBtZXRob2RzXG5cdFxuXHQgICAgZmluZExhc3RJbmRleDogZnVuY3Rpb24ocHJlZGljYXRlLCBjb250ZXh0KSB7XG5cdCAgICAgIHZhciBlbnRyeSA9IHRoaXMuZmluZExhc3RFbnRyeShwcmVkaWNhdGUsIGNvbnRleHQpO1xuXHQgICAgICByZXR1cm4gZW50cnkgPyBlbnRyeVswXSA6IC0xO1xuXHQgICAgfSxcblx0XG5cdCAgICBmaXJzdDogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLmdldCgwKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgZmxhdHRlbjogZnVuY3Rpb24oZGVwdGgpIHtcblx0ICAgICAgcmV0dXJuIHJlaWZ5KHRoaXMsIGZsYXR0ZW5GYWN0b3J5KHRoaXMsIGRlcHRoLCBmYWxzZSkpO1xuXHQgICAgfSxcblx0XG5cdCAgICBnZXQ6IGZ1bmN0aW9uKGluZGV4LCBub3RTZXRWYWx1ZSkge1xuXHQgICAgICBpbmRleCA9IHdyYXBJbmRleCh0aGlzLCBpbmRleCk7XG5cdCAgICAgIHJldHVybiAoaW5kZXggPCAwIHx8ICh0aGlzLnNpemUgPT09IEluZmluaXR5IHx8XG5cdCAgICAgICAgICAodGhpcy5zaXplICE9PSB1bmRlZmluZWQgJiYgaW5kZXggPiB0aGlzLnNpemUpKSkgP1xuXHQgICAgICAgIG5vdFNldFZhbHVlIDpcblx0ICAgICAgICB0aGlzLmZpbmQoZnVuY3Rpb24oXywga2V5KSAge3JldHVybiBrZXkgPT09IGluZGV4fSwgdW5kZWZpbmVkLCBub3RTZXRWYWx1ZSk7XG5cdCAgICB9LFxuXHRcblx0ICAgIGhhczogZnVuY3Rpb24oaW5kZXgpIHtcblx0ICAgICAgaW5kZXggPSB3cmFwSW5kZXgodGhpcywgaW5kZXgpO1xuXHQgICAgICByZXR1cm4gaW5kZXggPj0gMCAmJiAodGhpcy5zaXplICE9PSB1bmRlZmluZWQgP1xuXHQgICAgICAgIHRoaXMuc2l6ZSA9PT0gSW5maW5pdHkgfHwgaW5kZXggPCB0aGlzLnNpemUgOlxuXHQgICAgICAgIHRoaXMuaW5kZXhPZihpbmRleCkgIT09IC0xXG5cdCAgICAgICk7XG5cdCAgICB9LFxuXHRcblx0ICAgIGludGVycG9zZTogZnVuY3Rpb24oc2VwYXJhdG9yKSB7XG5cdCAgICAgIHJldHVybiByZWlmeSh0aGlzLCBpbnRlcnBvc2VGYWN0b3J5KHRoaXMsIHNlcGFyYXRvcikpO1xuXHQgICAgfSxcblx0XG5cdCAgICBpbnRlcmxlYXZlOiBmdW5jdGlvbigvKi4uLml0ZXJhYmxlcyovKSB7XG5cdCAgICAgIHZhciBpdGVyYWJsZXMgPSBbdGhpc10uY29uY2F0KGFyckNvcHkoYXJndW1lbnRzKSk7XG5cdCAgICAgIHZhciB6aXBwZWQgPSB6aXBXaXRoRmFjdG9yeSh0aGlzLnRvU2VxKCksIEluZGV4ZWRTZXEub2YsIGl0ZXJhYmxlcyk7XG5cdCAgICAgIHZhciBpbnRlcmxlYXZlZCA9IHppcHBlZC5mbGF0dGVuKHRydWUpO1xuXHQgICAgICBpZiAoemlwcGVkLnNpemUpIHtcblx0ICAgICAgICBpbnRlcmxlYXZlZC5zaXplID0gemlwcGVkLnNpemUgKiBpdGVyYWJsZXMubGVuZ3RoO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiByZWlmeSh0aGlzLCBpbnRlcmxlYXZlZCk7XG5cdCAgICB9LFxuXHRcblx0ICAgIGtleVNlcTogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiBSYW5nZSgwLCB0aGlzLnNpemUpO1xuXHQgICAgfSxcblx0XG5cdCAgICBsYXN0OiBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuZ2V0KC0xKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgc2tpcFdoaWxlOiBmdW5jdGlvbihwcmVkaWNhdGUsIGNvbnRleHQpIHtcblx0ICAgICAgcmV0dXJuIHJlaWZ5KHRoaXMsIHNraXBXaGlsZUZhY3RvcnkodGhpcywgcHJlZGljYXRlLCBjb250ZXh0LCBmYWxzZSkpO1xuXHQgICAgfSxcblx0XG5cdCAgICB6aXA6IGZ1bmN0aW9uKC8qLCAuLi5pdGVyYWJsZXMgKi8pIHtcblx0ICAgICAgdmFyIGl0ZXJhYmxlcyA9IFt0aGlzXS5jb25jYXQoYXJyQ29weShhcmd1bWVudHMpKTtcblx0ICAgICAgcmV0dXJuIHJlaWZ5KHRoaXMsIHppcFdpdGhGYWN0b3J5KHRoaXMsIGRlZmF1bHRaaXBwZXIsIGl0ZXJhYmxlcykpO1xuXHQgICAgfSxcblx0XG5cdCAgICB6aXBXaXRoOiBmdW5jdGlvbih6aXBwZXIvKiwgLi4uaXRlcmFibGVzICovKSB7XG5cdCAgICAgIHZhciBpdGVyYWJsZXMgPSBhcnJDb3B5KGFyZ3VtZW50cyk7XG5cdCAgICAgIGl0ZXJhYmxlc1swXSA9IHRoaXM7XG5cdCAgICAgIHJldHVybiByZWlmeSh0aGlzLCB6aXBXaXRoRmFjdG9yeSh0aGlzLCB6aXBwZXIsIGl0ZXJhYmxlcykpO1xuXHQgICAgfVxuXHRcblx0ICB9KTtcblx0XG5cdCAgSW5kZXhlZEl0ZXJhYmxlLnByb3RvdHlwZVtJU19JTkRFWEVEX1NFTlRJTkVMXSA9IHRydWU7XG5cdCAgSW5kZXhlZEl0ZXJhYmxlLnByb3RvdHlwZVtJU19PUkRFUkVEX1NFTlRJTkVMXSA9IHRydWU7XG5cdFxuXHRcblx0XG5cdCAgbWl4aW4oU2V0SXRlcmFibGUsIHtcblx0XG5cdCAgICAvLyAjIyMgRVM2IENvbGxlY3Rpb24gbWV0aG9kcyAoRVM2IEFycmF5IGFuZCBNYXApXG5cdFxuXHQgICAgZ2V0OiBmdW5jdGlvbih2YWx1ZSwgbm90U2V0VmFsdWUpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuaGFzKHZhbHVlKSA/IHZhbHVlIDogbm90U2V0VmFsdWU7XG5cdCAgICB9LFxuXHRcblx0ICAgIGluY2x1ZGVzOiBmdW5jdGlvbih2YWx1ZSkge1xuXHQgICAgICByZXR1cm4gdGhpcy5oYXModmFsdWUpO1xuXHQgICAgfSxcblx0XG5cdFxuXHQgICAgLy8gIyMjIE1vcmUgc2VxdWVudGlhbCBtZXRob2RzXG5cdFxuXHQgICAga2V5U2VxOiBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMudmFsdWVTZXEoKTtcblx0ICAgIH1cblx0XG5cdCAgfSk7XG5cdFxuXHQgIFNldEl0ZXJhYmxlLnByb3RvdHlwZS5oYXMgPSBJdGVyYWJsZVByb3RvdHlwZS5pbmNsdWRlcztcblx0ICBTZXRJdGVyYWJsZS5wcm90b3R5cGUuY29udGFpbnMgPSBTZXRJdGVyYWJsZS5wcm90b3R5cGUuaW5jbHVkZXM7XG5cdFxuXHRcblx0ICAvLyBNaXhpbiBzdWJjbGFzc2VzXG5cdFxuXHQgIG1peGluKEtleWVkU2VxLCBLZXllZEl0ZXJhYmxlLnByb3RvdHlwZSk7XG5cdCAgbWl4aW4oSW5kZXhlZFNlcSwgSW5kZXhlZEl0ZXJhYmxlLnByb3RvdHlwZSk7XG5cdCAgbWl4aW4oU2V0U2VxLCBTZXRJdGVyYWJsZS5wcm90b3R5cGUpO1xuXHRcblx0ICBtaXhpbihLZXllZENvbGxlY3Rpb24sIEtleWVkSXRlcmFibGUucHJvdG90eXBlKTtcblx0ICBtaXhpbihJbmRleGVkQ29sbGVjdGlvbiwgSW5kZXhlZEl0ZXJhYmxlLnByb3RvdHlwZSk7XG5cdCAgbWl4aW4oU2V0Q29sbGVjdGlvbiwgU2V0SXRlcmFibGUucHJvdG90eXBlKTtcblx0XG5cdFxuXHQgIC8vICNwcmFnbWEgSGVscGVyIGZ1bmN0aW9uc1xuXHRcblx0ICBmdW5jdGlvbiBrZXlNYXBwZXIodiwgaykge1xuXHQgICAgcmV0dXJuIGs7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBlbnRyeU1hcHBlcih2LCBrKSB7XG5cdCAgICByZXR1cm4gW2ssIHZdO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gbm90KHByZWRpY2F0ZSkge1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gIXByZWRpY2F0ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gbmVnKHByZWRpY2F0ZSkge1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gLXByZWRpY2F0ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gcXVvdGVTdHJpbmcodmFsdWUpIHtcblx0ICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gSlNPTi5zdHJpbmdpZnkodmFsdWUpIDogU3RyaW5nKHZhbHVlKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGRlZmF1bHRaaXBwZXIoKSB7XG5cdCAgICByZXR1cm4gYXJyQ29weShhcmd1bWVudHMpO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gZGVmYXVsdE5lZ0NvbXBhcmF0b3IoYSwgYikge1xuXHQgICAgcmV0dXJuIGEgPCBiID8gMSA6IGEgPiBiID8gLTEgOiAwO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gaGFzaEl0ZXJhYmxlKGl0ZXJhYmxlKSB7XG5cdCAgICBpZiAoaXRlcmFibGUuc2l6ZSA9PT0gSW5maW5pdHkpIHtcblx0ICAgICAgcmV0dXJuIDA7XG5cdCAgICB9XG5cdCAgICB2YXIgb3JkZXJlZCA9IGlzT3JkZXJlZChpdGVyYWJsZSk7XG5cdCAgICB2YXIga2V5ZWQgPSBpc0tleWVkKGl0ZXJhYmxlKTtcblx0ICAgIHZhciBoID0gb3JkZXJlZCA/IDEgOiAwO1xuXHQgICAgdmFyIHNpemUgPSBpdGVyYWJsZS5fX2l0ZXJhdGUoXG5cdCAgICAgIGtleWVkID9cblx0ICAgICAgICBvcmRlcmVkID9cblx0ICAgICAgICAgIGZ1bmN0aW9uKHYsIGspICB7IGggPSAzMSAqIGggKyBoYXNoTWVyZ2UoaGFzaCh2KSwgaGFzaChrKSkgfCAwOyB9IDpcblx0ICAgICAgICAgIGZ1bmN0aW9uKHYsIGspICB7IGggPSBoICsgaGFzaE1lcmdlKGhhc2godiksIGhhc2goaykpIHwgMDsgfSA6XG5cdCAgICAgICAgb3JkZXJlZCA/XG5cdCAgICAgICAgICBmdW5jdGlvbih2ICkgeyBoID0gMzEgKiBoICsgaGFzaCh2KSB8IDA7IH0gOlxuXHQgICAgICAgICAgZnVuY3Rpb24odiApIHsgaCA9IGggKyBoYXNoKHYpIHwgMDsgfVxuXHQgICAgKTtcblx0ICAgIHJldHVybiBtdXJtdXJIYXNoT2ZTaXplKHNpemUsIGgpO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gbXVybXVySGFzaE9mU2l6ZShzaXplLCBoKSB7XG5cdCAgICBoID0gaW11bChoLCAweENDOUUyRDUxKTtcblx0ICAgIGggPSBpbXVsKGggPDwgMTUgfCBoID4+PiAtMTUsIDB4MUI4NzM1OTMpO1xuXHQgICAgaCA9IGltdWwoaCA8PCAxMyB8IGggPj4+IC0xMywgNSk7XG5cdCAgICBoID0gKGggKyAweEU2NTQ2QjY0IHwgMCkgXiBzaXplO1xuXHQgICAgaCA9IGltdWwoaCBeIGggPj4+IDE2LCAweDg1RUJDQTZCKTtcblx0ICAgIGggPSBpbXVsKGggXiBoID4+PiAxMywgMHhDMkIyQUUzNSk7XG5cdCAgICBoID0gc21pKGggXiBoID4+PiAxNik7XG5cdCAgICByZXR1cm4gaDtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGhhc2hNZXJnZShhLCBiKSB7XG5cdCAgICByZXR1cm4gYSBeIGIgKyAweDlFMzc3OUI5ICsgKGEgPDwgNikgKyAoYSA+PiAyKSB8IDA7IC8vIGludFxuXHQgIH1cblx0XG5cdCAgdmFyIEltbXV0YWJsZSA9IHtcblx0XG5cdCAgICBJdGVyYWJsZTogSXRlcmFibGUsXG5cdFxuXHQgICAgU2VxOiBTZXEsXG5cdCAgICBDb2xsZWN0aW9uOiBDb2xsZWN0aW9uLFxuXHQgICAgTWFwOiBNYXAsXG5cdCAgICBPcmRlcmVkTWFwOiBPcmRlcmVkTWFwLFxuXHQgICAgTGlzdDogTGlzdCxcblx0ICAgIFN0YWNrOiBTdGFjayxcblx0ICAgIFNldDogU2V0LFxuXHQgICAgT3JkZXJlZFNldDogT3JkZXJlZFNldCxcblx0XG5cdCAgICBSZWNvcmQ6IFJlY29yZCxcblx0ICAgIFJhbmdlOiBSYW5nZSxcblx0ICAgIFJlcGVhdDogUmVwZWF0LFxuXHRcblx0ICAgIGlzOiBpcyxcblx0ICAgIGZyb21KUzogZnJvbUpTXG5cdFxuXHQgIH07XG5cdFxuXHQgIHJldHVybiBJbW11dGFibGU7XG5cdFxuXHR9KSk7XG5cbi8qKiovIH0pLFxuLyogMjMxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fOy8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzLCBnbG9iYWwpIHsvKipcblx0ICogW2pzLW1kNV17QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2VtbjE3OC9qcy1tZDV9XG5cdCAqXG5cdCAqIEBuYW1lc3BhY2UgbWQ1XG5cdCAqIEB2ZXJzaW9uIDAuNy4zXG5cdCAqIEBhdXRob3IgQ2hlbiwgWWktQ3l1YW4gW2VtbjE3OEBnbWFpbC5jb21dXG5cdCAqIEBjb3B5cmlnaHQgQ2hlbiwgWWktQ3l1YW4gMjAxNC0yMDE3XG5cdCAqIEBsaWNlbnNlIE1JVFxuXHQgKi9cblx0KGZ1bmN0aW9uICgpIHtcblx0ICAndXNlIHN0cmljdCc7XG5cdFxuXHQgIHZhciBFUlJPUiA9ICdpbnB1dCBpcyBpbnZhbGlkIHR5cGUnO1xuXHQgIHZhciBXSU5ET1cgPSB0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0Jztcblx0ICB2YXIgcm9vdCA9IFdJTkRPVyA/IHdpbmRvdyA6IHt9O1xuXHQgIGlmIChyb290LkpTX01ENV9OT19XSU5ET1cpIHtcblx0ICAgIFdJTkRPVyA9IGZhbHNlO1xuXHQgIH1cblx0ICB2YXIgV0VCX1dPUktFUiA9ICFXSU5ET1cgJiYgdHlwZW9mIHNlbGYgPT09ICdvYmplY3QnO1xuXHQgIHZhciBOT0RFX0pTID0gIXJvb3QuSlNfTUQ1X05PX05PREVfSlMgJiYgdHlwZW9mIHByb2Nlc3MgPT09ICdvYmplY3QnICYmIHByb2Nlc3MudmVyc2lvbnMgJiYgcHJvY2Vzcy52ZXJzaW9ucy5ub2RlO1xuXHQgIGlmIChOT0RFX0pTKSB7XG5cdCAgICByb290ID0gZ2xvYmFsO1xuXHQgIH0gZWxzZSBpZiAoV0VCX1dPUktFUikge1xuXHQgICAgcm9vdCA9IHNlbGY7XG5cdCAgfVxuXHQgIHZhciBDT01NT05fSlMgPSAhcm9vdC5KU19NRDVfTk9fQ09NTU9OX0pTICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzO1xuXHQgIHZhciBBTUQgPSBcImZ1bmN0aW9uXCIgPT09ICdmdW5jdGlvbicgJiYgX193ZWJwYWNrX3JlcXVpcmVfXygyMzIpO1xuXHQgIHZhciBBUlJBWV9CVUZGRVIgPSAhcm9vdC5KU19NRDVfTk9fQVJSQVlfQlVGRkVSICYmIHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCc7XG5cdCAgdmFyIEhFWF9DSEFSUyA9ICcwMTIzNDU2Nzg5YWJjZGVmJy5zcGxpdCgnJyk7XG5cdCAgdmFyIEVYVFJBID0gWzEyOCwgMzI3NjgsIDgzODg2MDgsIC0yMTQ3NDgzNjQ4XTtcblx0ICB2YXIgU0hJRlQgPSBbMCwgOCwgMTYsIDI0XTtcblx0ICB2YXIgT1VUUFVUX1RZUEVTID0gWydoZXgnLCAnYXJyYXknLCAnZGlnZXN0JywgJ2J1ZmZlcicsICdhcnJheUJ1ZmZlcicsICdiYXNlNjQnXTtcblx0ICB2YXIgQkFTRTY0X0VOQ09ERV9DSEFSID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8nLnNwbGl0KCcnKTtcblx0XG5cdCAgdmFyIGJsb2NrcyA9IFtdLCBidWZmZXI4O1xuXHQgIGlmIChBUlJBWV9CVUZGRVIpIHtcblx0ICAgIHZhciBidWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoNjgpO1xuXHQgICAgYnVmZmVyOCA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlcik7XG5cdCAgICBibG9ja3MgPSBuZXcgVWludDMyQXJyYXkoYnVmZmVyKTtcblx0ICB9XG5cdFxuXHQgIGlmIChyb290LkpTX01ENV9OT19OT0RFX0pTIHx8ICFBcnJheS5pc0FycmF5KSB7XG5cdCAgICBBcnJheS5pc0FycmF5ID0gZnVuY3Rpb24gKG9iaikge1xuXHQgICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iaikgPT09ICdbb2JqZWN0IEFycmF5XSc7XG5cdCAgICB9O1xuXHQgIH1cblx0XG5cdCAgaWYgKEFSUkFZX0JVRkZFUiAmJiAocm9vdC5KU19NRDVfTk9fQVJSQVlfQlVGRkVSX0lTX1ZJRVcgfHwgIUFycmF5QnVmZmVyLmlzVmlldykpIHtcblx0ICAgIEFycmF5QnVmZmVyLmlzVmlldyA9IGZ1bmN0aW9uIChvYmopIHtcblx0ICAgICAgcmV0dXJuIHR5cGVvZiBvYmogPT09ICdvYmplY3QnICYmIG9iai5idWZmZXIgJiYgb2JqLmJ1ZmZlci5jb25zdHJ1Y3RvciA9PT0gQXJyYXlCdWZmZXI7XG5cdCAgICB9O1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogQG1ldGhvZCBoZXhcblx0ICAgKiBAbWVtYmVyb2YgbWQ1XG5cdCAgICogQGRlc2NyaXB0aW9uIE91dHB1dCBoYXNoIGFzIGhleCBzdHJpbmdcblx0ICAgKiBAcGFyYW0ge1N0cmluZ3xBcnJheXxVaW50OEFycmF5fEFycmF5QnVmZmVyfSBtZXNzYWdlIG1lc3NhZ2UgdG8gaGFzaFxuXHQgICAqIEByZXR1cm5zIHtTdHJpbmd9IEhleCBzdHJpbmdcblx0ICAgKiBAZXhhbXBsZVxuXHQgICAqIG1kNS5oZXgoJ1RoZSBxdWljayBicm93biBmb3gganVtcHMgb3ZlciB0aGUgbGF6eSBkb2cnKTtcblx0ICAgKiAvLyBlcXVhbCB0b1xuXHQgICAqIG1kNSgnVGhlIHF1aWNrIGJyb3duIGZveCBqdW1wcyBvdmVyIHRoZSBsYXp5IGRvZycpO1xuXHQgICAqL1xuXHQgIC8qKlxuXHQgICAqIEBtZXRob2QgZGlnZXN0XG5cdCAgICogQG1lbWJlcm9mIG1kNVxuXHQgICAqIEBkZXNjcmlwdGlvbiBPdXRwdXQgaGFzaCBhcyBieXRlcyBhcnJheVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfEFycmF5fFVpbnQ4QXJyYXl8QXJyYXlCdWZmZXJ9IG1lc3NhZ2UgbWVzc2FnZSB0byBoYXNoXG5cdCAgICogQHJldHVybnMge0FycmF5fSBCeXRlcyBhcnJheVxuXHQgICAqIEBleGFtcGxlXG5cdCAgICogbWQ1LmRpZ2VzdCgnVGhlIHF1aWNrIGJyb3duIGZveCBqdW1wcyBvdmVyIHRoZSBsYXp5IGRvZycpO1xuXHQgICAqL1xuXHQgIC8qKlxuXHQgICAqIEBtZXRob2QgYXJyYXlcblx0ICAgKiBAbWVtYmVyb2YgbWQ1XG5cdCAgICogQGRlc2NyaXB0aW9uIE91dHB1dCBoYXNoIGFzIGJ5dGVzIGFycmF5XG5cdCAgICogQHBhcmFtIHtTdHJpbmd8QXJyYXl8VWludDhBcnJheXxBcnJheUJ1ZmZlcn0gbWVzc2FnZSBtZXNzYWdlIHRvIGhhc2hcblx0ICAgKiBAcmV0dXJucyB7QXJyYXl9IEJ5dGVzIGFycmF5XG5cdCAgICogQGV4YW1wbGVcblx0ICAgKiBtZDUuYXJyYXkoJ1RoZSBxdWljayBicm93biBmb3gganVtcHMgb3ZlciB0aGUgbGF6eSBkb2cnKTtcblx0ICAgKi9cblx0ICAvKipcblx0ICAgKiBAbWV0aG9kIGFycmF5QnVmZmVyXG5cdCAgICogQG1lbWJlcm9mIG1kNVxuXHQgICAqIEBkZXNjcmlwdGlvbiBPdXRwdXQgaGFzaCBhcyBBcnJheUJ1ZmZlclxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfEFycmF5fFVpbnQ4QXJyYXl8QXJyYXlCdWZmZXJ9IG1lc3NhZ2UgbWVzc2FnZSB0byBoYXNoXG5cdCAgICogQHJldHVybnMge0FycmF5QnVmZmVyfSBBcnJheUJ1ZmZlclxuXHQgICAqIEBleGFtcGxlXG5cdCAgICogbWQ1LmFycmF5QnVmZmVyKCdUaGUgcXVpY2sgYnJvd24gZm94IGp1bXBzIG92ZXIgdGhlIGxhenkgZG9nJyk7XG5cdCAgICovXG5cdCAgLyoqXG5cdCAgICogQG1ldGhvZCBidWZmZXJcblx0ICAgKiBAZGVwcmVjYXRlZCBUaGlzIG1heWJlIGNvbmZ1c2Ugd2l0aCBCdWZmZXIgaW4gbm9kZS5qcy4gUGxlYXNlIHVzZSBhcnJheUJ1ZmZlciBpbnN0ZWFkLlxuXHQgICAqIEBtZW1iZXJvZiBtZDVcblx0ICAgKiBAZGVzY3JpcHRpb24gT3V0cHV0IGhhc2ggYXMgQXJyYXlCdWZmZXJcblx0ICAgKiBAcGFyYW0ge1N0cmluZ3xBcnJheXxVaW50OEFycmF5fEFycmF5QnVmZmVyfSBtZXNzYWdlIG1lc3NhZ2UgdG8gaGFzaFxuXHQgICAqIEByZXR1cm5zIHtBcnJheUJ1ZmZlcn0gQXJyYXlCdWZmZXJcblx0ICAgKiBAZXhhbXBsZVxuXHQgICAqIG1kNS5idWZmZXIoJ1RoZSBxdWljayBicm93biBmb3gganVtcHMgb3ZlciB0aGUgbGF6eSBkb2cnKTtcblx0ICAgKi9cblx0ICAvKipcblx0ICAgKiBAbWV0aG9kIGJhc2U2NFxuXHQgICAqIEBtZW1iZXJvZiBtZDVcblx0ICAgKiBAZGVzY3JpcHRpb24gT3V0cHV0IGhhc2ggYXMgYmFzZTY0IHN0cmluZ1xuXHQgICAqIEBwYXJhbSB7U3RyaW5nfEFycmF5fFVpbnQ4QXJyYXl8QXJyYXlCdWZmZXJ9IG1lc3NhZ2UgbWVzc2FnZSB0byBoYXNoXG5cdCAgICogQHJldHVybnMge1N0cmluZ30gYmFzZTY0IHN0cmluZ1xuXHQgICAqIEBleGFtcGxlXG5cdCAgICogbWQ1LmJhc2U2NCgnVGhlIHF1aWNrIGJyb3duIGZveCBqdW1wcyBvdmVyIHRoZSBsYXp5IGRvZycpO1xuXHQgICAqL1xuXHQgIHZhciBjcmVhdGVPdXRwdXRNZXRob2QgPSBmdW5jdGlvbiAob3V0cHV0VHlwZSkge1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uIChtZXNzYWdlKSB7XG5cdCAgICAgIHJldHVybiBuZXcgTWQ1KHRydWUpLnVwZGF0ZShtZXNzYWdlKVtvdXRwdXRUeXBlXSgpO1xuXHQgICAgfTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBAbWV0aG9kIGNyZWF0ZVxuXHQgICAqIEBtZW1iZXJvZiBtZDVcblx0ICAgKiBAZGVzY3JpcHRpb24gQ3JlYXRlIE1kNSBvYmplY3Rcblx0ICAgKiBAcmV0dXJucyB7TWQ1fSBNZDUgb2JqZWN0LlxuXHQgICAqIEBleGFtcGxlXG5cdCAgICogdmFyIGhhc2ggPSBtZDUuY3JlYXRlKCk7XG5cdCAgICovXG5cdCAgLyoqXG5cdCAgICogQG1ldGhvZCB1cGRhdGVcblx0ICAgKiBAbWVtYmVyb2YgbWQ1XG5cdCAgICogQGRlc2NyaXB0aW9uIENyZWF0ZSBhbmQgdXBkYXRlIE1kNSBvYmplY3Rcblx0ICAgKiBAcGFyYW0ge1N0cmluZ3xBcnJheXxVaW50OEFycmF5fEFycmF5QnVmZmVyfSBtZXNzYWdlIG1lc3NhZ2UgdG8gaGFzaFxuXHQgICAqIEByZXR1cm5zIHtNZDV9IE1kNSBvYmplY3QuXG5cdCAgICogQGV4YW1wbGVcblx0ICAgKiB2YXIgaGFzaCA9IG1kNS51cGRhdGUoJ1RoZSBxdWljayBicm93biBmb3gganVtcHMgb3ZlciB0aGUgbGF6eSBkb2cnKTtcblx0ICAgKiAvLyBlcXVhbCB0b1xuXHQgICAqIHZhciBoYXNoID0gbWQ1LmNyZWF0ZSgpO1xuXHQgICAqIGhhc2gudXBkYXRlKCdUaGUgcXVpY2sgYnJvd24gZm94IGp1bXBzIG92ZXIgdGhlIGxhenkgZG9nJyk7XG5cdCAgICovXG5cdCAgdmFyIGNyZWF0ZU1ldGhvZCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBtZXRob2QgPSBjcmVhdGVPdXRwdXRNZXRob2QoJ2hleCcpO1xuXHQgICAgaWYgKE5PREVfSlMpIHtcblx0ICAgICAgbWV0aG9kID0gbm9kZVdyYXAobWV0aG9kKTtcblx0ICAgIH1cblx0ICAgIG1ldGhvZC5jcmVhdGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHJldHVybiBuZXcgTWQ1KCk7XG5cdCAgICB9O1xuXHQgICAgbWV0aG9kLnVwZGF0ZSA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG5cdCAgICAgIHJldHVybiBtZXRob2QuY3JlYXRlKCkudXBkYXRlKG1lc3NhZ2UpO1xuXHQgICAgfTtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgT1VUUFVUX1RZUEVTLmxlbmd0aDsgKytpKSB7XG5cdCAgICAgIHZhciB0eXBlID0gT1VUUFVUX1RZUEVTW2ldO1xuXHQgICAgICBtZXRob2RbdHlwZV0gPSBjcmVhdGVPdXRwdXRNZXRob2QodHlwZSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gbWV0aG9kO1xuXHQgIH07XG5cdFxuXHQgIHZhciBub2RlV3JhcCA9IGZ1bmN0aW9uIChtZXRob2QpIHtcblx0ICAgIHZhciBjcnlwdG8gPSBldmFsKFwicmVxdWlyZSgnY3J5cHRvJylcIik7XG5cdCAgICB2YXIgQnVmZmVyID0gZXZhbChcInJlcXVpcmUoJ2J1ZmZlcicpLkJ1ZmZlclwiKTtcblx0ICAgIHZhciBub2RlTWV0aG9kID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcblx0ICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgIHJldHVybiBjcnlwdG8uY3JlYXRlSGFzaCgnbWQ1JykudXBkYXRlKG1lc3NhZ2UsICd1dGY4JykuZGlnZXN0KCdoZXgnKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBpZiAobWVzc2FnZSA9PT0gbnVsbCB8fCBtZXNzYWdlID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICAgIHRocm93IEVSUk9SO1xuXHQgICAgICAgIH0gZWxzZSBpZiAobWVzc2FnZS5jb25zdHJ1Y3RvciA9PT0gQXJyYXlCdWZmZXIpIHtcblx0ICAgICAgICAgIG1lc3NhZ2UgPSBuZXcgVWludDhBcnJheShtZXNzYWdlKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKEFycmF5LmlzQXJyYXkobWVzc2FnZSkgfHwgQXJyYXlCdWZmZXIuaXNWaWV3KG1lc3NhZ2UpIHx8XG5cdCAgICAgICAgbWVzc2FnZS5jb25zdHJ1Y3RvciA9PT0gQnVmZmVyKSB7XG5cdCAgICAgICAgcmV0dXJuIGNyeXB0by5jcmVhdGVIYXNoKCdtZDUnKS51cGRhdGUobmV3IEJ1ZmZlcihtZXNzYWdlKSkuZGlnZXN0KCdoZXgnKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gbWV0aG9kKG1lc3NhZ2UpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIG5vZGVNZXRob2Q7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogTWQ1IGNsYXNzXG5cdCAgICogQGNsYXNzIE1kNVxuXHQgICAqIEBkZXNjcmlwdGlvbiBUaGlzIGlzIGludGVybmFsIGNsYXNzLlxuXHQgICAqIEBzZWUge0BsaW5rIG1kNS5jcmVhdGV9XG5cdCAgICovXG5cdCAgZnVuY3Rpb24gTWQ1KHNoYXJlZE1lbW9yeSkge1xuXHQgICAgaWYgKHNoYXJlZE1lbW9yeSkge1xuXHQgICAgICBibG9ja3NbMF0gPSBibG9ja3NbMTZdID0gYmxvY2tzWzFdID0gYmxvY2tzWzJdID0gYmxvY2tzWzNdID1cblx0ICAgICAgYmxvY2tzWzRdID0gYmxvY2tzWzVdID0gYmxvY2tzWzZdID0gYmxvY2tzWzddID1cblx0ICAgICAgYmxvY2tzWzhdID0gYmxvY2tzWzldID0gYmxvY2tzWzEwXSA9IGJsb2Nrc1sxMV0gPVxuXHQgICAgICBibG9ja3NbMTJdID0gYmxvY2tzWzEzXSA9IGJsb2Nrc1sxNF0gPSBibG9ja3NbMTVdID0gMDtcblx0ICAgICAgdGhpcy5ibG9ja3MgPSBibG9ja3M7XG5cdCAgICAgIHRoaXMuYnVmZmVyOCA9IGJ1ZmZlcjg7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBpZiAoQVJSQVlfQlVGRkVSKSB7XG5cdCAgICAgICAgdmFyIGJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcig2OCk7XG5cdCAgICAgICAgdGhpcy5idWZmZXI4ID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKTtcblx0ICAgICAgICB0aGlzLmJsb2NrcyA9IG5ldyBVaW50MzJBcnJheShidWZmZXIpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRoaXMuYmxvY2tzID0gWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICB0aGlzLmgwID0gdGhpcy5oMSA9IHRoaXMuaDIgPSB0aGlzLmgzID0gdGhpcy5zdGFydCA9IHRoaXMuYnl0ZXMgPSB0aGlzLmhCeXRlcyA9IDA7XG5cdCAgICB0aGlzLmZpbmFsaXplZCA9IHRoaXMuaGFzaGVkID0gZmFsc2U7XG5cdCAgICB0aGlzLmZpcnN0ID0gdHJ1ZTtcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIEBtZXRob2QgdXBkYXRlXG5cdCAgICogQG1lbWJlcm9mIE1kNVxuXHQgICAqIEBpbnN0YW5jZVxuXHQgICAqIEBkZXNjcmlwdGlvbiBVcGRhdGUgaGFzaFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfEFycmF5fFVpbnQ4QXJyYXl8QXJyYXlCdWZmZXJ9IG1lc3NhZ2UgbWVzc2FnZSB0byBoYXNoXG5cdCAgICogQHJldHVybnMge01kNX0gTWQ1IG9iamVjdC5cblx0ICAgKiBAc2VlIHtAbGluayBtZDUudXBkYXRlfVxuXHQgICAqL1xuXHQgIE1kNS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcblx0ICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIG5vdFN0cmluZywgdHlwZSA9IHR5cGVvZiBtZXNzYWdlO1xuXHQgICAgaWYgKHR5cGUgIT09ICdzdHJpbmcnKSB7XG5cdCAgICAgIGlmICh0eXBlID09PSAnb2JqZWN0Jykge1xuXHQgICAgICAgIGlmIChtZXNzYWdlID09PSBudWxsKSB7XG5cdCAgICAgICAgICB0aHJvdyBFUlJPUjtcblx0ICAgICAgICB9IGVsc2UgaWYgKEFSUkFZX0JVRkZFUiAmJiBtZXNzYWdlLmNvbnN0cnVjdG9yID09PSBBcnJheUJ1ZmZlcikge1xuXHQgICAgICAgICAgbWVzc2FnZSA9IG5ldyBVaW50OEFycmF5KG1lc3NhZ2UpO1xuXHQgICAgICAgIH0gZWxzZSBpZiAoIUFycmF5LmlzQXJyYXkobWVzc2FnZSkpIHtcblx0ICAgICAgICAgIGlmICghQVJSQVlfQlVGRkVSIHx8ICFBcnJheUJ1ZmZlci5pc1ZpZXcobWVzc2FnZSkpIHtcblx0ICAgICAgICAgICAgdGhyb3cgRVJST1I7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRocm93IEVSUk9SO1xuXHQgICAgICB9XG5cdCAgICAgIG5vdFN0cmluZyA9IHRydWU7XG5cdCAgICB9XG5cdCAgICB2YXIgY29kZSwgaW5kZXggPSAwLCBpLCBsZW5ndGggPSBtZXNzYWdlLmxlbmd0aCwgYmxvY2tzID0gdGhpcy5ibG9ja3M7XG5cdCAgICB2YXIgYnVmZmVyOCA9IHRoaXMuYnVmZmVyODtcblx0XG5cdCAgICB3aGlsZSAoaW5kZXggPCBsZW5ndGgpIHtcblx0ICAgICAgaWYgKHRoaXMuaGFzaGVkKSB7XG5cdCAgICAgICAgdGhpcy5oYXNoZWQgPSBmYWxzZTtcblx0ICAgICAgICBibG9ja3NbMF0gPSBibG9ja3NbMTZdO1xuXHQgICAgICAgIGJsb2Nrc1sxNl0gPSBibG9ja3NbMV0gPSBibG9ja3NbMl0gPSBibG9ja3NbM10gPVxuXHQgICAgICAgIGJsb2Nrc1s0XSA9IGJsb2Nrc1s1XSA9IGJsb2Nrc1s2XSA9IGJsb2Nrc1s3XSA9XG5cdCAgICAgICAgYmxvY2tzWzhdID0gYmxvY2tzWzldID0gYmxvY2tzWzEwXSA9IGJsb2Nrc1sxMV0gPVxuXHQgICAgICAgIGJsb2Nrc1sxMl0gPSBibG9ja3NbMTNdID0gYmxvY2tzWzE0XSA9IGJsb2Nrc1sxNV0gPSAwO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAobm90U3RyaW5nKSB7XG5cdCAgICAgICAgaWYgKEFSUkFZX0JVRkZFUikge1xuXHQgICAgICAgICAgZm9yIChpID0gdGhpcy5zdGFydDsgaW5kZXggPCBsZW5ndGggJiYgaSA8IDY0OyArK2luZGV4KSB7XG5cdCAgICAgICAgICAgIGJ1ZmZlcjhbaSsrXSA9IG1lc3NhZ2VbaW5kZXhdO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBmb3IgKGkgPSB0aGlzLnN0YXJ0OyBpbmRleCA8IGxlbmd0aCAmJiBpIDwgNjQ7ICsraW5kZXgpIHtcblx0ICAgICAgICAgICAgYmxvY2tzW2kgPj4gMl0gfD0gbWVzc2FnZVtpbmRleF0gPDwgU0hJRlRbaSsrICYgM107XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGlmIChBUlJBWV9CVUZGRVIpIHtcblx0ICAgICAgICAgIGZvciAoaSA9IHRoaXMuc3RhcnQ7IGluZGV4IDwgbGVuZ3RoICYmIGkgPCA2NDsgKytpbmRleCkge1xuXHQgICAgICAgICAgICBjb2RlID0gbWVzc2FnZS5jaGFyQ29kZUF0KGluZGV4KTtcblx0ICAgICAgICAgICAgaWYgKGNvZGUgPCAweDgwKSB7XG5cdCAgICAgICAgICAgICAgYnVmZmVyOFtpKytdID0gY29kZTtcblx0ICAgICAgICAgICAgfSBlbHNlIGlmIChjb2RlIDwgMHg4MDApIHtcblx0ICAgICAgICAgICAgICBidWZmZXI4W2krK10gPSAweGMwIHwgKGNvZGUgPj4gNik7XG5cdCAgICAgICAgICAgICAgYnVmZmVyOFtpKytdID0gMHg4MCB8IChjb2RlICYgMHgzZik7XG5cdCAgICAgICAgICAgIH0gZWxzZSBpZiAoY29kZSA8IDB4ZDgwMCB8fCBjb2RlID49IDB4ZTAwMCkge1xuXHQgICAgICAgICAgICAgIGJ1ZmZlcjhbaSsrXSA9IDB4ZTAgfCAoY29kZSA+PiAxMik7XG5cdCAgICAgICAgICAgICAgYnVmZmVyOFtpKytdID0gMHg4MCB8ICgoY29kZSA+PiA2KSAmIDB4M2YpO1xuXHQgICAgICAgICAgICAgIGJ1ZmZlcjhbaSsrXSA9IDB4ODAgfCAoY29kZSAmIDB4M2YpO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgIGNvZGUgPSAweDEwMDAwICsgKCgoY29kZSAmIDB4M2ZmKSA8PCAxMCkgfCAobWVzc2FnZS5jaGFyQ29kZUF0KCsraW5kZXgpICYgMHgzZmYpKTtcblx0ICAgICAgICAgICAgICBidWZmZXI4W2krK10gPSAweGYwIHwgKGNvZGUgPj4gMTgpO1xuXHQgICAgICAgICAgICAgIGJ1ZmZlcjhbaSsrXSA9IDB4ODAgfCAoKGNvZGUgPj4gMTIpICYgMHgzZik7XG5cdCAgICAgICAgICAgICAgYnVmZmVyOFtpKytdID0gMHg4MCB8ICgoY29kZSA+PiA2KSAmIDB4M2YpO1xuXHQgICAgICAgICAgICAgIGJ1ZmZlcjhbaSsrXSA9IDB4ODAgfCAoY29kZSAmIDB4M2YpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIGZvciAoaSA9IHRoaXMuc3RhcnQ7IGluZGV4IDwgbGVuZ3RoICYmIGkgPCA2NDsgKytpbmRleCkge1xuXHQgICAgICAgICAgICBjb2RlID0gbWVzc2FnZS5jaGFyQ29kZUF0KGluZGV4KTtcblx0ICAgICAgICAgICAgaWYgKGNvZGUgPCAweDgwKSB7XG5cdCAgICAgICAgICAgICAgYmxvY2tzW2kgPj4gMl0gfD0gY29kZSA8PCBTSElGVFtpKysgJiAzXTtcblx0ICAgICAgICAgICAgfSBlbHNlIGlmIChjb2RlIDwgMHg4MDApIHtcblx0ICAgICAgICAgICAgICBibG9ja3NbaSA+PiAyXSB8PSAoMHhjMCB8IChjb2RlID4+IDYpKSA8PCBTSElGVFtpKysgJiAzXTtcblx0ICAgICAgICAgICAgICBibG9ja3NbaSA+PiAyXSB8PSAoMHg4MCB8IChjb2RlICYgMHgzZikpIDw8IFNISUZUW2krKyAmIDNdO1xuXHQgICAgICAgICAgICB9IGVsc2UgaWYgKGNvZGUgPCAweGQ4MDAgfHwgY29kZSA+PSAweGUwMDApIHtcblx0ICAgICAgICAgICAgICBibG9ja3NbaSA+PiAyXSB8PSAoMHhlMCB8IChjb2RlID4+IDEyKSkgPDwgU0hJRlRbaSsrICYgM107XG5cdCAgICAgICAgICAgICAgYmxvY2tzW2kgPj4gMl0gfD0gKDB4ODAgfCAoKGNvZGUgPj4gNikgJiAweDNmKSkgPDwgU0hJRlRbaSsrICYgM107XG5cdCAgICAgICAgICAgICAgYmxvY2tzW2kgPj4gMl0gfD0gKDB4ODAgfCAoY29kZSAmIDB4M2YpKSA8PCBTSElGVFtpKysgJiAzXTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICBjb2RlID0gMHgxMDAwMCArICgoKGNvZGUgJiAweDNmZikgPDwgMTApIHwgKG1lc3NhZ2UuY2hhckNvZGVBdCgrK2luZGV4KSAmIDB4M2ZmKSk7XG5cdCAgICAgICAgICAgICAgYmxvY2tzW2kgPj4gMl0gfD0gKDB4ZjAgfCAoY29kZSA+PiAxOCkpIDw8IFNISUZUW2krKyAmIDNdO1xuXHQgICAgICAgICAgICAgIGJsb2Nrc1tpID4+IDJdIHw9ICgweDgwIHwgKChjb2RlID4+IDEyKSAmIDB4M2YpKSA8PCBTSElGVFtpKysgJiAzXTtcblx0ICAgICAgICAgICAgICBibG9ja3NbaSA+PiAyXSB8PSAoMHg4MCB8ICgoY29kZSA+PiA2KSAmIDB4M2YpKSA8PCBTSElGVFtpKysgJiAzXTtcblx0ICAgICAgICAgICAgICBibG9ja3NbaSA+PiAyXSB8PSAoMHg4MCB8IChjb2RlICYgMHgzZikpIDw8IFNISUZUW2krKyAmIDNdO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHRoaXMubGFzdEJ5dGVJbmRleCA9IGk7XG5cdCAgICAgIHRoaXMuYnl0ZXMgKz0gaSAtIHRoaXMuc3RhcnQ7XG5cdCAgICAgIGlmIChpID49IDY0KSB7XG5cdCAgICAgICAgdGhpcy5zdGFydCA9IGkgLSA2NDtcblx0ICAgICAgICB0aGlzLmhhc2goKTtcblx0ICAgICAgICB0aGlzLmhhc2hlZCA9IHRydWU7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhpcy5zdGFydCA9IGk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGlmICh0aGlzLmJ5dGVzID4gNDI5NDk2NzI5NSkge1xuXHQgICAgICB0aGlzLmhCeXRlcyArPSB0aGlzLmJ5dGVzIC8gNDI5NDk2NzI5NiA8PCAwO1xuXHQgICAgICB0aGlzLmJ5dGVzID0gdGhpcy5ieXRlcyAlIDQyOTQ5NjcyOTY7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9O1xuXHRcblx0ICBNZDUucHJvdG90eXBlLmZpbmFsaXplID0gZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIHRoaXMuZmluYWxpemVkID0gdHJ1ZTtcblx0ICAgIHZhciBibG9ja3MgPSB0aGlzLmJsb2NrcywgaSA9IHRoaXMubGFzdEJ5dGVJbmRleDtcblx0ICAgIGJsb2Nrc1tpID4+IDJdIHw9IEVYVFJBW2kgJiAzXTtcblx0ICAgIGlmIChpID49IDU2KSB7XG5cdCAgICAgIGlmICghdGhpcy5oYXNoZWQpIHtcblx0ICAgICAgICB0aGlzLmhhc2goKTtcblx0ICAgICAgfVxuXHQgICAgICBibG9ja3NbMF0gPSBibG9ja3NbMTZdO1xuXHQgICAgICBibG9ja3NbMTZdID0gYmxvY2tzWzFdID0gYmxvY2tzWzJdID0gYmxvY2tzWzNdID1cblx0ICAgICAgYmxvY2tzWzRdID0gYmxvY2tzWzVdID0gYmxvY2tzWzZdID0gYmxvY2tzWzddID1cblx0ICAgICAgYmxvY2tzWzhdID0gYmxvY2tzWzldID0gYmxvY2tzWzEwXSA9IGJsb2Nrc1sxMV0gPVxuXHQgICAgICBibG9ja3NbMTJdID0gYmxvY2tzWzEzXSA9IGJsb2Nrc1sxNF0gPSBibG9ja3NbMTVdID0gMDtcblx0ICAgIH1cblx0ICAgIGJsb2Nrc1sxNF0gPSB0aGlzLmJ5dGVzIDw8IDM7XG5cdCAgICBibG9ja3NbMTVdID0gdGhpcy5oQnl0ZXMgPDwgMyB8IHRoaXMuYnl0ZXMgPj4+IDI5O1xuXHQgICAgdGhpcy5oYXNoKCk7XG5cdCAgfTtcblx0XG5cdCAgTWQ1LnByb3RvdHlwZS5oYXNoID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIGEsIGIsIGMsIGQsIGJjLCBkYSwgYmxvY2tzID0gdGhpcy5ibG9ja3M7XG5cdFxuXHQgICAgaWYgKHRoaXMuZmlyc3QpIHtcblx0ICAgICAgYSA9IGJsb2Nrc1swXSAtIDY4MDg3NjkzNztcblx0ICAgICAgYSA9IChhIDw8IDcgfCBhID4+PiAyNSkgLSAyNzE3MzM4NzkgPDwgMDtcblx0ICAgICAgZCA9ICgtMTczMjU4NDE5NCBeIGEgJiAyMDA0MzE4MDcxKSArIGJsb2Nrc1sxXSAtIDExNzgzMDcwODtcblx0ICAgICAgZCA9IChkIDw8IDEyIHwgZCA+Pj4gMjApICsgYSA8PCAwO1xuXHQgICAgICBjID0gKC0yNzE3MzM4NzkgXiAoZCAmIChhIF4gLTI3MTczMzg3OSkpKSArIGJsb2Nrc1syXSAtIDExMjY0NzgzNzU7XG5cdCAgICAgIGMgPSAoYyA8PCAxNyB8IGMgPj4+IDE1KSArIGQgPDwgMDtcblx0ICAgICAgYiA9IChhIF4gKGMgJiAoZCBeIGEpKSkgKyBibG9ja3NbM10gLSAxMzE2MjU5MjA5O1xuXHQgICAgICBiID0gKGIgPDwgMjIgfCBiID4+PiAxMCkgKyBjIDw8IDA7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBhID0gdGhpcy5oMDtcblx0ICAgICAgYiA9IHRoaXMuaDE7XG5cdCAgICAgIGMgPSB0aGlzLmgyO1xuXHQgICAgICBkID0gdGhpcy5oMztcblx0ICAgICAgYSArPSAoZCBeIChiICYgKGMgXiBkKSkpICsgYmxvY2tzWzBdIC0gNjgwODc2OTM2O1xuXHQgICAgICBhID0gKGEgPDwgNyB8IGEgPj4+IDI1KSArIGIgPDwgMDtcblx0ICAgICAgZCArPSAoYyBeIChhICYgKGIgXiBjKSkpICsgYmxvY2tzWzFdIC0gMzg5NTY0NTg2O1xuXHQgICAgICBkID0gKGQgPDwgMTIgfCBkID4+PiAyMCkgKyBhIDw8IDA7XG5cdCAgICAgIGMgKz0gKGIgXiAoZCAmIChhIF4gYikpKSArIGJsb2Nrc1syXSArIDYwNjEwNTgxOTtcblx0ICAgICAgYyA9IChjIDw8IDE3IHwgYyA+Pj4gMTUpICsgZCA8PCAwO1xuXHQgICAgICBiICs9IChhIF4gKGMgJiAoZCBeIGEpKSkgKyBibG9ja3NbM10gLSAxMDQ0NTI1MzMwO1xuXHQgICAgICBiID0gKGIgPDwgMjIgfCBiID4+PiAxMCkgKyBjIDw8IDA7XG5cdCAgICB9XG5cdFxuXHQgICAgYSArPSAoZCBeIChiICYgKGMgXiBkKSkpICsgYmxvY2tzWzRdIC0gMTc2NDE4ODk3O1xuXHQgICAgYSA9IChhIDw8IDcgfCBhID4+PiAyNSkgKyBiIDw8IDA7XG5cdCAgICBkICs9IChjIF4gKGEgJiAoYiBeIGMpKSkgKyBibG9ja3NbNV0gKyAxMjAwMDgwNDI2O1xuXHQgICAgZCA9IChkIDw8IDEyIHwgZCA+Pj4gMjApICsgYSA8PCAwO1xuXHQgICAgYyArPSAoYiBeIChkICYgKGEgXiBiKSkpICsgYmxvY2tzWzZdIC0gMTQ3MzIzMTM0MTtcblx0ICAgIGMgPSAoYyA8PCAxNyB8IGMgPj4+IDE1KSArIGQgPDwgMDtcblx0ICAgIGIgKz0gKGEgXiAoYyAmIChkIF4gYSkpKSArIGJsb2Nrc1s3XSAtIDQ1NzA1OTgzO1xuXHQgICAgYiA9IChiIDw8IDIyIHwgYiA+Pj4gMTApICsgYyA8PCAwO1xuXHQgICAgYSArPSAoZCBeIChiICYgKGMgXiBkKSkpICsgYmxvY2tzWzhdICsgMTc3MDAzNTQxNjtcblx0ICAgIGEgPSAoYSA8PCA3IHwgYSA+Pj4gMjUpICsgYiA8PCAwO1xuXHQgICAgZCArPSAoYyBeIChhICYgKGIgXiBjKSkpICsgYmxvY2tzWzldIC0gMTk1ODQxNDQxNztcblx0ICAgIGQgPSAoZCA8PCAxMiB8IGQgPj4+IDIwKSArIGEgPDwgMDtcblx0ICAgIGMgKz0gKGIgXiAoZCAmIChhIF4gYikpKSArIGJsb2Nrc1sxMF0gLSA0MjA2Mztcblx0ICAgIGMgPSAoYyA8PCAxNyB8IGMgPj4+IDE1KSArIGQgPDwgMDtcblx0ICAgIGIgKz0gKGEgXiAoYyAmIChkIF4gYSkpKSArIGJsb2Nrc1sxMV0gLSAxOTkwNDA0MTYyO1xuXHQgICAgYiA9IChiIDw8IDIyIHwgYiA+Pj4gMTApICsgYyA8PCAwO1xuXHQgICAgYSArPSAoZCBeIChiICYgKGMgXiBkKSkpICsgYmxvY2tzWzEyXSArIDE4MDQ2MDM2ODI7XG5cdCAgICBhID0gKGEgPDwgNyB8IGEgPj4+IDI1KSArIGIgPDwgMDtcblx0ICAgIGQgKz0gKGMgXiAoYSAmIChiIF4gYykpKSArIGJsb2Nrc1sxM10gLSA0MDM0MTEwMTtcblx0ICAgIGQgPSAoZCA8PCAxMiB8IGQgPj4+IDIwKSArIGEgPDwgMDtcblx0ICAgIGMgKz0gKGIgXiAoZCAmIChhIF4gYikpKSArIGJsb2Nrc1sxNF0gLSAxNTAyMDAyMjkwO1xuXHQgICAgYyA9IChjIDw8IDE3IHwgYyA+Pj4gMTUpICsgZCA8PCAwO1xuXHQgICAgYiArPSAoYSBeIChjICYgKGQgXiBhKSkpICsgYmxvY2tzWzE1XSArIDEyMzY1MzUzMjk7XG5cdCAgICBiID0gKGIgPDwgMjIgfCBiID4+PiAxMCkgKyBjIDw8IDA7XG5cdCAgICBhICs9IChjIF4gKGQgJiAoYiBeIGMpKSkgKyBibG9ja3NbMV0gLSAxNjU3OTY1MTA7XG5cdCAgICBhID0gKGEgPDwgNSB8IGEgPj4+IDI3KSArIGIgPDwgMDtcblx0ICAgIGQgKz0gKGIgXiAoYyAmIChhIF4gYikpKSArIGJsb2Nrc1s2XSAtIDEwNjk1MDE2MzI7XG5cdCAgICBkID0gKGQgPDwgOSB8IGQgPj4+IDIzKSArIGEgPDwgMDtcblx0ICAgIGMgKz0gKGEgXiAoYiAmIChkIF4gYSkpKSArIGJsb2Nrc1sxMV0gKyA2NDM3MTc3MTM7XG5cdCAgICBjID0gKGMgPDwgMTQgfCBjID4+PiAxOCkgKyBkIDw8IDA7XG5cdCAgICBiICs9IChkIF4gKGEgJiAoYyBeIGQpKSkgKyBibG9ja3NbMF0gLSAzNzM4OTczMDI7XG5cdCAgICBiID0gKGIgPDwgMjAgfCBiID4+PiAxMikgKyBjIDw8IDA7XG5cdCAgICBhICs9IChjIF4gKGQgJiAoYiBeIGMpKSkgKyBibG9ja3NbNV0gLSA3MDE1NTg2OTE7XG5cdCAgICBhID0gKGEgPDwgNSB8IGEgPj4+IDI3KSArIGIgPDwgMDtcblx0ICAgIGQgKz0gKGIgXiAoYyAmIChhIF4gYikpKSArIGJsb2Nrc1sxMF0gKyAzODAxNjA4Mztcblx0ICAgIGQgPSAoZCA8PCA5IHwgZCA+Pj4gMjMpICsgYSA8PCAwO1xuXHQgICAgYyArPSAoYSBeIChiICYgKGQgXiBhKSkpICsgYmxvY2tzWzE1XSAtIDY2MDQ3ODMzNTtcblx0ICAgIGMgPSAoYyA8PCAxNCB8IGMgPj4+IDE4KSArIGQgPDwgMDtcblx0ICAgIGIgKz0gKGQgXiAoYSAmIChjIF4gZCkpKSArIGJsb2Nrc1s0XSAtIDQwNTUzNzg0ODtcblx0ICAgIGIgPSAoYiA8PCAyMCB8IGIgPj4+IDEyKSArIGMgPDwgMDtcblx0ICAgIGEgKz0gKGMgXiAoZCAmIChiIF4gYykpKSArIGJsb2Nrc1s5XSArIDU2ODQ0NjQzODtcblx0ICAgIGEgPSAoYSA8PCA1IHwgYSA+Pj4gMjcpICsgYiA8PCAwO1xuXHQgICAgZCArPSAoYiBeIChjICYgKGEgXiBiKSkpICsgYmxvY2tzWzE0XSAtIDEwMTk4MDM2OTA7XG5cdCAgICBkID0gKGQgPDwgOSB8IGQgPj4+IDIzKSArIGEgPDwgMDtcblx0ICAgIGMgKz0gKGEgXiAoYiAmIChkIF4gYSkpKSArIGJsb2Nrc1szXSAtIDE4NzM2Mzk2MTtcblx0ICAgIGMgPSAoYyA8PCAxNCB8IGMgPj4+IDE4KSArIGQgPDwgMDtcblx0ICAgIGIgKz0gKGQgXiAoYSAmIChjIF4gZCkpKSArIGJsb2Nrc1s4XSArIDExNjM1MzE1MDE7XG5cdCAgICBiID0gKGIgPDwgMjAgfCBiID4+PiAxMikgKyBjIDw8IDA7XG5cdCAgICBhICs9IChjIF4gKGQgJiAoYiBeIGMpKSkgKyBibG9ja3NbMTNdIC0gMTQ0NDY4MTQ2Nztcblx0ICAgIGEgPSAoYSA8PCA1IHwgYSA+Pj4gMjcpICsgYiA8PCAwO1xuXHQgICAgZCArPSAoYiBeIChjICYgKGEgXiBiKSkpICsgYmxvY2tzWzJdIC0gNTE0MDM3ODQ7XG5cdCAgICBkID0gKGQgPDwgOSB8IGQgPj4+IDIzKSArIGEgPDwgMDtcblx0ICAgIGMgKz0gKGEgXiAoYiAmIChkIF4gYSkpKSArIGJsb2Nrc1s3XSArIDE3MzUzMjg0NzM7XG5cdCAgICBjID0gKGMgPDwgMTQgfCBjID4+PiAxOCkgKyBkIDw8IDA7XG5cdCAgICBiICs9IChkIF4gKGEgJiAoYyBeIGQpKSkgKyBibG9ja3NbMTJdIC0gMTkyNjYwNzczNDtcblx0ICAgIGIgPSAoYiA8PCAyMCB8IGIgPj4+IDEyKSArIGMgPDwgMDtcblx0ICAgIGJjID0gYiBeIGM7XG5cdCAgICBhICs9IChiYyBeIGQpICsgYmxvY2tzWzVdIC0gMzc4NTU4O1xuXHQgICAgYSA9IChhIDw8IDQgfCBhID4+PiAyOCkgKyBiIDw8IDA7XG5cdCAgICBkICs9IChiYyBeIGEpICsgYmxvY2tzWzhdIC0gMjAyMjU3NDQ2Mztcblx0ICAgIGQgPSAoZCA8PCAxMSB8IGQgPj4+IDIxKSArIGEgPDwgMDtcblx0ICAgIGRhID0gZCBeIGE7XG5cdCAgICBjICs9IChkYSBeIGIpICsgYmxvY2tzWzExXSArIDE4MzkwMzA1NjI7XG5cdCAgICBjID0gKGMgPDwgMTYgfCBjID4+PiAxNikgKyBkIDw8IDA7XG5cdCAgICBiICs9IChkYSBeIGMpICsgYmxvY2tzWzE0XSAtIDM1MzA5NTU2O1xuXHQgICAgYiA9IChiIDw8IDIzIHwgYiA+Pj4gOSkgKyBjIDw8IDA7XG5cdCAgICBiYyA9IGIgXiBjO1xuXHQgICAgYSArPSAoYmMgXiBkKSArIGJsb2Nrc1sxXSAtIDE1MzA5OTIwNjA7XG5cdCAgICBhID0gKGEgPDwgNCB8IGEgPj4+IDI4KSArIGIgPDwgMDtcblx0ICAgIGQgKz0gKGJjIF4gYSkgKyBibG9ja3NbNF0gKyAxMjcyODkzMzUzO1xuXHQgICAgZCA9IChkIDw8IDExIHwgZCA+Pj4gMjEpICsgYSA8PCAwO1xuXHQgICAgZGEgPSBkIF4gYTtcblx0ICAgIGMgKz0gKGRhIF4gYikgKyBibG9ja3NbN10gLSAxNTU0OTc2MzI7XG5cdCAgICBjID0gKGMgPDwgMTYgfCBjID4+PiAxNikgKyBkIDw8IDA7XG5cdCAgICBiICs9IChkYSBeIGMpICsgYmxvY2tzWzEwXSAtIDEwOTQ3MzA2NDA7XG5cdCAgICBiID0gKGIgPDwgMjMgfCBiID4+PiA5KSArIGMgPDwgMDtcblx0ICAgIGJjID0gYiBeIGM7XG5cdCAgICBhICs9IChiYyBeIGQpICsgYmxvY2tzWzEzXSArIDY4MTI3OTE3NDtcblx0ICAgIGEgPSAoYSA8PCA0IHwgYSA+Pj4gMjgpICsgYiA8PCAwO1xuXHQgICAgZCArPSAoYmMgXiBhKSArIGJsb2Nrc1swXSAtIDM1ODUzNzIyMjtcblx0ICAgIGQgPSAoZCA8PCAxMSB8IGQgPj4+IDIxKSArIGEgPDwgMDtcblx0ICAgIGRhID0gZCBeIGE7XG5cdCAgICBjICs9IChkYSBeIGIpICsgYmxvY2tzWzNdIC0gNzIyNTIxOTc5O1xuXHQgICAgYyA9IChjIDw8IDE2IHwgYyA+Pj4gMTYpICsgZCA8PCAwO1xuXHQgICAgYiArPSAoZGEgXiBjKSArIGJsb2Nrc1s2XSArIDc2MDI5MTg5O1xuXHQgICAgYiA9IChiIDw8IDIzIHwgYiA+Pj4gOSkgKyBjIDw8IDA7XG5cdCAgICBiYyA9IGIgXiBjO1xuXHQgICAgYSArPSAoYmMgXiBkKSArIGJsb2Nrc1s5XSAtIDY0MDM2NDQ4Nztcblx0ICAgIGEgPSAoYSA8PCA0IHwgYSA+Pj4gMjgpICsgYiA8PCAwO1xuXHQgICAgZCArPSAoYmMgXiBhKSArIGJsb2Nrc1sxMl0gLSA0MjE4MTU4MzU7XG5cdCAgICBkID0gKGQgPDwgMTEgfCBkID4+PiAyMSkgKyBhIDw8IDA7XG5cdCAgICBkYSA9IGQgXiBhO1xuXHQgICAgYyArPSAoZGEgXiBiKSArIGJsb2Nrc1sxNV0gKyA1MzA3NDI1MjA7XG5cdCAgICBjID0gKGMgPDwgMTYgfCBjID4+PiAxNikgKyBkIDw8IDA7XG5cdCAgICBiICs9IChkYSBeIGMpICsgYmxvY2tzWzJdIC0gOTk1MzM4NjUxO1xuXHQgICAgYiA9IChiIDw8IDIzIHwgYiA+Pj4gOSkgKyBjIDw8IDA7XG5cdCAgICBhICs9IChjIF4gKGIgfCB+ZCkpICsgYmxvY2tzWzBdIC0gMTk4NjMwODQ0O1xuXHQgICAgYSA9IChhIDw8IDYgfCBhID4+PiAyNikgKyBiIDw8IDA7XG5cdCAgICBkICs9IChiIF4gKGEgfCB+YykpICsgYmxvY2tzWzddICsgMTEyNjg5MTQxNTtcblx0ICAgIGQgPSAoZCA8PCAxMCB8IGQgPj4+IDIyKSArIGEgPDwgMDtcblx0ICAgIGMgKz0gKGEgXiAoZCB8IH5iKSkgKyBibG9ja3NbMTRdIC0gMTQxNjM1NDkwNTtcblx0ICAgIGMgPSAoYyA8PCAxNSB8IGMgPj4+IDE3KSArIGQgPDwgMDtcblx0ICAgIGIgKz0gKGQgXiAoYyB8IH5hKSkgKyBibG9ja3NbNV0gLSA1NzQzNDA1NTtcblx0ICAgIGIgPSAoYiA8PCAyMSB8IGIgPj4+IDExKSArIGMgPDwgMDtcblx0ICAgIGEgKz0gKGMgXiAoYiB8IH5kKSkgKyBibG9ja3NbMTJdICsgMTcwMDQ4NTU3MTtcblx0ICAgIGEgPSAoYSA8PCA2IHwgYSA+Pj4gMjYpICsgYiA8PCAwO1xuXHQgICAgZCArPSAoYiBeIChhIHwgfmMpKSArIGJsb2Nrc1szXSAtIDE4OTQ5ODY2MDY7XG5cdCAgICBkID0gKGQgPDwgMTAgfCBkID4+PiAyMikgKyBhIDw8IDA7XG5cdCAgICBjICs9IChhIF4gKGQgfCB+YikpICsgYmxvY2tzWzEwXSAtIDEwNTE1MjM7XG5cdCAgICBjID0gKGMgPDwgMTUgfCBjID4+PiAxNykgKyBkIDw8IDA7XG5cdCAgICBiICs9IChkIF4gKGMgfCB+YSkpICsgYmxvY2tzWzFdIC0gMjA1NDkyMjc5OTtcblx0ICAgIGIgPSAoYiA8PCAyMSB8IGIgPj4+IDExKSArIGMgPDwgMDtcblx0ICAgIGEgKz0gKGMgXiAoYiB8IH5kKSkgKyBibG9ja3NbOF0gKyAxODczMzEzMzU5O1xuXHQgICAgYSA9IChhIDw8IDYgfCBhID4+PiAyNikgKyBiIDw8IDA7XG5cdCAgICBkICs9IChiIF4gKGEgfCB+YykpICsgYmxvY2tzWzE1XSAtIDMwNjExNzQ0O1xuXHQgICAgZCA9IChkIDw8IDEwIHwgZCA+Pj4gMjIpICsgYSA8PCAwO1xuXHQgICAgYyArPSAoYSBeIChkIHwgfmIpKSArIGJsb2Nrc1s2XSAtIDE1NjAxOTgzODA7XG5cdCAgICBjID0gKGMgPDwgMTUgfCBjID4+PiAxNykgKyBkIDw8IDA7XG5cdCAgICBiICs9IChkIF4gKGMgfCB+YSkpICsgYmxvY2tzWzEzXSArIDEzMDkxNTE2NDk7XG5cdCAgICBiID0gKGIgPDwgMjEgfCBiID4+PiAxMSkgKyBjIDw8IDA7XG5cdCAgICBhICs9IChjIF4gKGIgfCB+ZCkpICsgYmxvY2tzWzRdIC0gMTQ1NTIzMDcwO1xuXHQgICAgYSA9IChhIDw8IDYgfCBhID4+PiAyNikgKyBiIDw8IDA7XG5cdCAgICBkICs9IChiIF4gKGEgfCB+YykpICsgYmxvY2tzWzExXSAtIDExMjAyMTAzNzk7XG5cdCAgICBkID0gKGQgPDwgMTAgfCBkID4+PiAyMikgKyBhIDw8IDA7XG5cdCAgICBjICs9IChhIF4gKGQgfCB+YikpICsgYmxvY2tzWzJdICsgNzE4Nzg3MjU5O1xuXHQgICAgYyA9IChjIDw8IDE1IHwgYyA+Pj4gMTcpICsgZCA8PCAwO1xuXHQgICAgYiArPSAoZCBeIChjIHwgfmEpKSArIGJsb2Nrc1s5XSAtIDM0MzQ4NTU1MTtcblx0ICAgIGIgPSAoYiA8PCAyMSB8IGIgPj4+IDExKSArIGMgPDwgMDtcblx0XG5cdCAgICBpZiAodGhpcy5maXJzdCkge1xuXHQgICAgICB0aGlzLmgwID0gYSArIDE3MzI1ODQxOTMgPDwgMDtcblx0ICAgICAgdGhpcy5oMSA9IGIgLSAyNzE3MzM4NzkgPDwgMDtcblx0ICAgICAgdGhpcy5oMiA9IGMgLSAxNzMyNTg0MTk0IDw8IDA7XG5cdCAgICAgIHRoaXMuaDMgPSBkICsgMjcxNzMzODc4IDw8IDA7XG5cdCAgICAgIHRoaXMuZmlyc3QgPSBmYWxzZTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuaDAgPSB0aGlzLmgwICsgYSA8PCAwO1xuXHQgICAgICB0aGlzLmgxID0gdGhpcy5oMSArIGIgPDwgMDtcblx0ICAgICAgdGhpcy5oMiA9IHRoaXMuaDIgKyBjIDw8IDA7XG5cdCAgICAgIHRoaXMuaDMgPSB0aGlzLmgzICsgZCA8PCAwO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEBtZXRob2QgaGV4XG5cdCAgICogQG1lbWJlcm9mIE1kNVxuXHQgICAqIEBpbnN0YW5jZVxuXHQgICAqIEBkZXNjcmlwdGlvbiBPdXRwdXQgaGFzaCBhcyBoZXggc3RyaW5nXG5cdCAgICogQHJldHVybnMge1N0cmluZ30gSGV4IHN0cmluZ1xuXHQgICAqIEBzZWUge0BsaW5rIG1kNS5oZXh9XG5cdCAgICogQGV4YW1wbGVcblx0ICAgKiBoYXNoLmhleCgpO1xuXHQgICAqL1xuXHQgIE1kNS5wcm90b3R5cGUuaGV4ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpcy5maW5hbGl6ZSgpO1xuXHRcblx0ICAgIHZhciBoMCA9IHRoaXMuaDAsIGgxID0gdGhpcy5oMSwgaDIgPSB0aGlzLmgyLCBoMyA9IHRoaXMuaDM7XG5cdFxuXHQgICAgcmV0dXJuIEhFWF9DSEFSU1soaDAgPj4gNCkgJiAweDBGXSArIEhFWF9DSEFSU1toMCAmIDB4MEZdICtcblx0ICAgICAgSEVYX0NIQVJTWyhoMCA+PiAxMikgJiAweDBGXSArIEhFWF9DSEFSU1soaDAgPj4gOCkgJiAweDBGXSArXG5cdCAgICAgIEhFWF9DSEFSU1soaDAgPj4gMjApICYgMHgwRl0gKyBIRVhfQ0hBUlNbKGgwID4+IDE2KSAmIDB4MEZdICtcblx0ICAgICAgSEVYX0NIQVJTWyhoMCA+PiAyOCkgJiAweDBGXSArIEhFWF9DSEFSU1soaDAgPj4gMjQpICYgMHgwRl0gK1xuXHQgICAgICBIRVhfQ0hBUlNbKGgxID4+IDQpICYgMHgwRl0gKyBIRVhfQ0hBUlNbaDEgJiAweDBGXSArXG5cdCAgICAgIEhFWF9DSEFSU1soaDEgPj4gMTIpICYgMHgwRl0gKyBIRVhfQ0hBUlNbKGgxID4+IDgpICYgMHgwRl0gK1xuXHQgICAgICBIRVhfQ0hBUlNbKGgxID4+IDIwKSAmIDB4MEZdICsgSEVYX0NIQVJTWyhoMSA+PiAxNikgJiAweDBGXSArXG5cdCAgICAgIEhFWF9DSEFSU1soaDEgPj4gMjgpICYgMHgwRl0gKyBIRVhfQ0hBUlNbKGgxID4+IDI0KSAmIDB4MEZdICtcblx0ICAgICAgSEVYX0NIQVJTWyhoMiA+PiA0KSAmIDB4MEZdICsgSEVYX0NIQVJTW2gyICYgMHgwRl0gK1xuXHQgICAgICBIRVhfQ0hBUlNbKGgyID4+IDEyKSAmIDB4MEZdICsgSEVYX0NIQVJTWyhoMiA+PiA4KSAmIDB4MEZdICtcblx0ICAgICAgSEVYX0NIQVJTWyhoMiA+PiAyMCkgJiAweDBGXSArIEhFWF9DSEFSU1soaDIgPj4gMTYpICYgMHgwRl0gK1xuXHQgICAgICBIRVhfQ0hBUlNbKGgyID4+IDI4KSAmIDB4MEZdICsgSEVYX0NIQVJTWyhoMiA+PiAyNCkgJiAweDBGXSArXG5cdCAgICAgIEhFWF9DSEFSU1soaDMgPj4gNCkgJiAweDBGXSArIEhFWF9DSEFSU1toMyAmIDB4MEZdICtcblx0ICAgICAgSEVYX0NIQVJTWyhoMyA+PiAxMikgJiAweDBGXSArIEhFWF9DSEFSU1soaDMgPj4gOCkgJiAweDBGXSArXG5cdCAgICAgIEhFWF9DSEFSU1soaDMgPj4gMjApICYgMHgwRl0gKyBIRVhfQ0hBUlNbKGgzID4+IDE2KSAmIDB4MEZdICtcblx0ICAgICAgSEVYX0NIQVJTWyhoMyA+PiAyOCkgJiAweDBGXSArIEhFWF9DSEFSU1soaDMgPj4gMjQpICYgMHgwRl07XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogQG1ldGhvZCB0b1N0cmluZ1xuXHQgICAqIEBtZW1iZXJvZiBNZDVcblx0ICAgKiBAaW5zdGFuY2Vcblx0ICAgKiBAZGVzY3JpcHRpb24gT3V0cHV0IGhhc2ggYXMgaGV4IHN0cmluZ1xuXHQgICAqIEByZXR1cm5zIHtTdHJpbmd9IEhleCBzdHJpbmdcblx0ICAgKiBAc2VlIHtAbGluayBtZDUuaGV4fVxuXHQgICAqIEBleGFtcGxlXG5cdCAgICogaGFzaC50b1N0cmluZygpO1xuXHQgICAqL1xuXHQgIE1kNS5wcm90b3R5cGUudG9TdHJpbmcgPSBNZDUucHJvdG90eXBlLmhleDtcblx0XG5cdCAgLyoqXG5cdCAgICogQG1ldGhvZCBkaWdlc3Rcblx0ICAgKiBAbWVtYmVyb2YgTWQ1XG5cdCAgICogQGluc3RhbmNlXG5cdCAgICogQGRlc2NyaXB0aW9uIE91dHB1dCBoYXNoIGFzIGJ5dGVzIGFycmF5XG5cdCAgICogQHJldHVybnMge0FycmF5fSBCeXRlcyBhcnJheVxuXHQgICAqIEBzZWUge0BsaW5rIG1kNS5kaWdlc3R9XG5cdCAgICogQGV4YW1wbGVcblx0ICAgKiBoYXNoLmRpZ2VzdCgpO1xuXHQgICAqL1xuXHQgIE1kNS5wcm90b3R5cGUuZGlnZXN0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpcy5maW5hbGl6ZSgpO1xuXHRcblx0ICAgIHZhciBoMCA9IHRoaXMuaDAsIGgxID0gdGhpcy5oMSwgaDIgPSB0aGlzLmgyLCBoMyA9IHRoaXMuaDM7XG5cdCAgICByZXR1cm4gW1xuXHQgICAgICBoMCAmIDB4RkYsIChoMCA+PiA4KSAmIDB4RkYsIChoMCA+PiAxNikgJiAweEZGLCAoaDAgPj4gMjQpICYgMHhGRixcblx0ICAgICAgaDEgJiAweEZGLCAoaDEgPj4gOCkgJiAweEZGLCAoaDEgPj4gMTYpICYgMHhGRiwgKGgxID4+IDI0KSAmIDB4RkYsXG5cdCAgICAgIGgyICYgMHhGRiwgKGgyID4+IDgpICYgMHhGRiwgKGgyID4+IDE2KSAmIDB4RkYsIChoMiA+PiAyNCkgJiAweEZGLFxuXHQgICAgICBoMyAmIDB4RkYsIChoMyA+PiA4KSAmIDB4RkYsIChoMyA+PiAxNikgJiAweEZGLCAoaDMgPj4gMjQpICYgMHhGRlxuXHQgICAgXTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBAbWV0aG9kIGFycmF5XG5cdCAgICogQG1lbWJlcm9mIE1kNVxuXHQgICAqIEBpbnN0YW5jZVxuXHQgICAqIEBkZXNjcmlwdGlvbiBPdXRwdXQgaGFzaCBhcyBieXRlcyBhcnJheVxuXHQgICAqIEByZXR1cm5zIHtBcnJheX0gQnl0ZXMgYXJyYXlcblx0ICAgKiBAc2VlIHtAbGluayBtZDUuYXJyYXl9XG5cdCAgICogQGV4YW1wbGVcblx0ICAgKiBoYXNoLmFycmF5KCk7XG5cdCAgICovXG5cdCAgTWQ1LnByb3RvdHlwZS5hcnJheSA9IE1kNS5wcm90b3R5cGUuZGlnZXN0O1xuXHRcblx0ICAvKipcblx0ICAgKiBAbWV0aG9kIGFycmF5QnVmZmVyXG5cdCAgICogQG1lbWJlcm9mIE1kNVxuXHQgICAqIEBpbnN0YW5jZVxuXHQgICAqIEBkZXNjcmlwdGlvbiBPdXRwdXQgaGFzaCBhcyBBcnJheUJ1ZmZlclxuXHQgICAqIEByZXR1cm5zIHtBcnJheUJ1ZmZlcn0gQXJyYXlCdWZmZXJcblx0ICAgKiBAc2VlIHtAbGluayBtZDUuYXJyYXlCdWZmZXJ9XG5cdCAgICogQGV4YW1wbGVcblx0ICAgKiBoYXNoLmFycmF5QnVmZmVyKCk7XG5cdCAgICovXG5cdCAgTWQ1LnByb3RvdHlwZS5hcnJheUJ1ZmZlciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMuZmluYWxpemUoKTtcblx0XG5cdCAgICB2YXIgYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKDE2KTtcblx0ICAgIHZhciBibG9ja3MgPSBuZXcgVWludDMyQXJyYXkoYnVmZmVyKTtcblx0ICAgIGJsb2Nrc1swXSA9IHRoaXMuaDA7XG5cdCAgICBibG9ja3NbMV0gPSB0aGlzLmgxO1xuXHQgICAgYmxvY2tzWzJdID0gdGhpcy5oMjtcblx0ICAgIGJsb2Nrc1szXSA9IHRoaXMuaDM7XG5cdCAgICByZXR1cm4gYnVmZmVyO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEBtZXRob2QgYnVmZmVyXG5cdCAgICogQGRlcHJlY2F0ZWQgVGhpcyBtYXliZSBjb25mdXNlIHdpdGggQnVmZmVyIGluIG5vZGUuanMuIFBsZWFzZSB1c2UgYXJyYXlCdWZmZXIgaW5zdGVhZC5cblx0ICAgKiBAbWVtYmVyb2YgTWQ1XG5cdCAgICogQGluc3RhbmNlXG5cdCAgICogQGRlc2NyaXB0aW9uIE91dHB1dCBoYXNoIGFzIEFycmF5QnVmZmVyXG5cdCAgICogQHJldHVybnMge0FycmF5QnVmZmVyfSBBcnJheUJ1ZmZlclxuXHQgICAqIEBzZWUge0BsaW5rIG1kNS5idWZmZXJ9XG5cdCAgICogQGV4YW1wbGVcblx0ICAgKiBoYXNoLmJ1ZmZlcigpO1xuXHQgICAqL1xuXHQgIE1kNS5wcm90b3R5cGUuYnVmZmVyID0gTWQ1LnByb3RvdHlwZS5hcnJheUJ1ZmZlcjtcblx0XG5cdCAgLyoqXG5cdCAgICogQG1ldGhvZCBiYXNlNjRcblx0ICAgKiBAbWVtYmVyb2YgTWQ1XG5cdCAgICogQGluc3RhbmNlXG5cdCAgICogQGRlc2NyaXB0aW9uIE91dHB1dCBoYXNoIGFzIGJhc2U2NCBzdHJpbmdcblx0ICAgKiBAcmV0dXJucyB7U3RyaW5nfSBiYXNlNjQgc3RyaW5nXG5cdCAgICogQHNlZSB7QGxpbmsgbWQ1LmJhc2U2NH1cblx0ICAgKiBAZXhhbXBsZVxuXHQgICAqIGhhc2guYmFzZTY0KCk7XG5cdCAgICovXG5cdCAgTWQ1LnByb3RvdHlwZS5iYXNlNjQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgdjEsIHYyLCB2MywgYmFzZTY0U3RyID0gJycsIGJ5dGVzID0gdGhpcy5hcnJheSgpO1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAxNTspIHtcblx0ICAgICAgdjEgPSBieXRlc1tpKytdO1xuXHQgICAgICB2MiA9IGJ5dGVzW2krK107XG5cdCAgICAgIHYzID0gYnl0ZXNbaSsrXTtcblx0ICAgICAgYmFzZTY0U3RyICs9IEJBU0U2NF9FTkNPREVfQ0hBUlt2MSA+Pj4gMl0gK1xuXHQgICAgICAgIEJBU0U2NF9FTkNPREVfQ0hBUlsodjEgPDwgNCB8IHYyID4+PiA0KSAmIDYzXSArXG5cdCAgICAgICAgQkFTRTY0X0VOQ09ERV9DSEFSWyh2MiA8PCAyIHwgdjMgPj4+IDYpICYgNjNdICtcblx0ICAgICAgICBCQVNFNjRfRU5DT0RFX0NIQVJbdjMgJiA2M107XG5cdCAgICB9XG5cdCAgICB2MSA9IGJ5dGVzW2ldO1xuXHQgICAgYmFzZTY0U3RyICs9IEJBU0U2NF9FTkNPREVfQ0hBUlt2MSA+Pj4gMl0gK1xuXHQgICAgICBCQVNFNjRfRU5DT0RFX0NIQVJbKHYxIDw8IDQpICYgNjNdICtcblx0ICAgICAgJz09Jztcblx0ICAgIHJldHVybiBiYXNlNjRTdHI7XG5cdCAgfTtcblx0XG5cdCAgdmFyIGV4cG9ydHMgPSBjcmVhdGVNZXRob2QoKTtcblx0XG5cdCAgaWYgKENPTU1PTl9KUykge1xuXHQgICAgbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzO1xuXHQgIH0gZWxzZSB7XG5cdCAgICAvKipcblx0ICAgICAqIEBtZXRob2QgbWQ1XGJcblx0ICAgICAqIEBkZXNjcmlwdGlvbiBNZDUgaGFzaCBmdW5jdGlvbiwgZXhwb3J0IHRvIGdsb2JhbCBpbiBicm93c2Vycy5cblx0ICAgICAqIEBwYXJhbSB7U3RyaW5nfEFycmF5fFVpbnQ4QXJyYXl8QXJyYXlCdWZmZXJ9IG1lc3NhZ2UgbWVzc2FnZSB0byBoYXNoXG5cdCAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSBtZDUgaGFzaGVzXG5cdCAgICAgKiBAZXhhbXBsZVxuXHQgICAgICogbWQ1KCcnKTsgLy8gZDQxZDhjZDk4ZjAwYjIwNGU5ODAwOTk4ZWNmODQyN2Vcblx0ICAgICAqIG1kNSgnVGhlIHF1aWNrIGJyb3duIGZveCBqdW1wcyBvdmVyIHRoZSBsYXp5IGRvZycpOyAvLyA5ZTEwN2Q5ZDM3MmJiNjgyNmJkODFkMzU0MmE0MTlkNlxuXHQgICAgICogbWQ1KCdUaGUgcXVpY2sgYnJvd24gZm94IGp1bXBzIG92ZXIgdGhlIGxhenkgZG9nLicpOyAvLyBlNGQ5MDljMjkwZDBmYjFjYTA2OGZmYWRkZjIyY2JkMFxuXHQgICAgICpcblx0ICAgICAqIC8vIEl0IGFsc28gc3VwcG9ydHMgVVRGLTggZW5jb2Rpbmdcblx0ICAgICAqIG1kNSgn5Lit5paHJyk7IC8vIGE3YmFjMjIzOWZjZGNiM2EwNjc5MDNkODA3N2M0YTA3XG5cdCAgICAgKlxuXHQgICAgICogLy8gSXQgYWxzbyBzdXBwb3J0cyBieXRlIGBBcnJheWAsIGBVaW50OEFycmF5YCwgYEFycmF5QnVmZmVyYFxuXHQgICAgICogbWQ1KFtdKTsgLy8gZDQxZDhjZDk4ZjAwYjIwNGU5ODAwOTk4ZWNmODQyN2Vcblx0ICAgICAqIG1kNShuZXcgVWludDhBcnJheShbXSkpOyAvLyBkNDFkOGNkOThmMDBiMjA0ZTk4MDA5OThlY2Y4NDI3ZVxuXHQgICAgICovXG5cdCAgICByb290Lm1kNSA9IGV4cG9ydHM7XG5cdCAgICBpZiAoQU1EKSB7XG5cdCAgICAgICEoX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIGV4cG9ydHM7XG5cdCAgICAgIH0uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fLCBleHBvcnRzLCBtb2R1bGUpLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyAhPT0gdW5kZWZpbmVkICYmIChtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fKSk7XG5cdCAgICB9XG5cdCAgfVxuXHR9KSgpO1xuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oNCksIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSkpKVxuXG4vKioqLyB9KSxcbi8qIDIzMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihfX3dlYnBhY2tfYW1kX29wdGlvbnNfXykge21vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX2FtZF9vcHRpb25zX187XHJcblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCB7fSkpXG5cbi8qKiovIH0pXG4vKioqKioqLyBdKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gYnVuZGxlLmpzIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGV4cG9ydHM6IHt9LFxuIFx0XHRcdGlkOiBtb2R1bGVJZCxcbiBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgYWNiM2UzOGEyZGJkY2JjOTMyNjkiLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSc7XG5pbXBvcnQgQ29udGFpbmVyIGZyb20gJy4vY29udGFpbmVyLmpzeCc7XG5cblJlYWN0RE9NLnJlbmRlciggPENvbnRhaW5lci8+ICxcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFwcC1jb250YWluZXJcIilcbik7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vcm9vdC9saWIvcm9vdC5qc3giLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9saWIvUmVhY3QnKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9yZWFjdC5qc1xuLy8gbW9kdWxlIGlkID0gMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdERPTSA9IHJlcXVpcmUoJy4vUmVhY3RET00nKTtcbnZhciBSZWFjdERPTVNlcnZlciA9IHJlcXVpcmUoJy4vUmVhY3RET01TZXJ2ZXInKTtcbnZhciBSZWFjdElzb21vcnBoaWMgPSByZXF1aXJlKCcuL1JlYWN0SXNvbW9ycGhpYycpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgZGVwcmVjYXRlZCA9IHJlcXVpcmUoJy4vZGVwcmVjYXRlZCcpO1xuXG4vLyBgdmVyc2lvbmAgd2lsbCBiZSBhZGRlZCBoZXJlIGJ5IFJlYWN0SXNvbW9ycGhpYy5cbnZhciBSZWFjdCA9IHt9O1xuXG5hc3NpZ24oUmVhY3QsIFJlYWN0SXNvbW9ycGhpYyk7XG5cbmFzc2lnbihSZWFjdCwge1xuICAvLyBSZWFjdERPTVxuICBmaW5kRE9NTm9kZTogZGVwcmVjYXRlZCgnZmluZERPTU5vZGUnLCAnUmVhY3RET00nLCAncmVhY3QtZG9tJywgUmVhY3RET00sIFJlYWN0RE9NLmZpbmRET01Ob2RlKSxcbiAgcmVuZGVyOiBkZXByZWNhdGVkKCdyZW5kZXInLCAnUmVhY3RET00nLCAncmVhY3QtZG9tJywgUmVhY3RET00sIFJlYWN0RE9NLnJlbmRlciksXG4gIHVubW91bnRDb21wb25lbnRBdE5vZGU6IGRlcHJlY2F0ZWQoJ3VubW91bnRDb21wb25lbnRBdE5vZGUnLCAnUmVhY3RET00nLCAncmVhY3QtZG9tJywgUmVhY3RET00sIFJlYWN0RE9NLnVubW91bnRDb21wb25lbnRBdE5vZGUpLFxuXG4gIC8vIFJlYWN0RE9NU2VydmVyXG4gIHJlbmRlclRvU3RyaW5nOiBkZXByZWNhdGVkKCdyZW5kZXJUb1N0cmluZycsICdSZWFjdERPTVNlcnZlcicsICdyZWFjdC1kb20vc2VydmVyJywgUmVhY3RET01TZXJ2ZXIsIFJlYWN0RE9NU2VydmVyLnJlbmRlclRvU3RyaW5nKSxcbiAgcmVuZGVyVG9TdGF0aWNNYXJrdXA6IGRlcHJlY2F0ZWQoJ3JlbmRlclRvU3RhdGljTWFya3VwJywgJ1JlYWN0RE9NU2VydmVyJywgJ3JlYWN0LWRvbS9zZXJ2ZXInLCBSZWFjdERPTVNlcnZlciwgUmVhY3RET01TZXJ2ZXIucmVuZGVyVG9TdGF0aWNNYXJrdXApXG59KTtcblxuUmVhY3QuX19TRUNSRVRfRE9NX0RPX05PVF9VU0VfT1JfWU9VX1dJTExfQkVfRklSRUQgPSBSZWFjdERPTTtcblJlYWN0Ll9fU0VDUkVUX0RPTV9TRVJWRVJfRE9fTk9UX1VTRV9PUl9ZT1VfV0lMTF9CRV9GSVJFRCA9IFJlYWN0RE9NU2VydmVyO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvUmVhY3QuanNcbi8vIG1vZHVsZSBpZCA9IDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RE9NXG4gKi9cblxuLyogZ2xvYmFscyBfX1JFQUNUX0RFVlRPT0xTX0dMT0JBTF9IT09LX18qL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdEN1cnJlbnRPd25lciA9IHJlcXVpcmUoJy4vUmVhY3RDdXJyZW50T3duZXInKTtcbnZhciBSZWFjdERPTVRleHRDb21wb25lbnQgPSByZXF1aXJlKCcuL1JlYWN0RE9NVGV4dENvbXBvbmVudCcpO1xudmFyIFJlYWN0RGVmYXVsdEluamVjdGlvbiA9IHJlcXVpcmUoJy4vUmVhY3REZWZhdWx0SW5qZWN0aW9uJyk7XG52YXIgUmVhY3RJbnN0YW5jZUhhbmRsZXMgPSByZXF1aXJlKCcuL1JlYWN0SW5zdGFuY2VIYW5kbGVzJyk7XG52YXIgUmVhY3RNb3VudCA9IHJlcXVpcmUoJy4vUmVhY3RNb3VudCcpO1xudmFyIFJlYWN0UGVyZiA9IHJlcXVpcmUoJy4vUmVhY3RQZXJmJyk7XG52YXIgUmVhY3RSZWNvbmNpbGVyID0gcmVxdWlyZSgnLi9SZWFjdFJlY29uY2lsZXInKTtcbnZhciBSZWFjdFVwZGF0ZXMgPSByZXF1aXJlKCcuL1JlYWN0VXBkYXRlcycpO1xudmFyIFJlYWN0VmVyc2lvbiA9IHJlcXVpcmUoJy4vUmVhY3RWZXJzaW9uJyk7XG5cbnZhciBmaW5kRE9NTm9kZSA9IHJlcXVpcmUoJy4vZmluZERPTU5vZGUnKTtcbnZhciByZW5kZXJTdWJ0cmVlSW50b0NvbnRhaW5lciA9IHJlcXVpcmUoJy4vcmVuZGVyU3VidHJlZUludG9Db250YWluZXInKTtcbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG5SZWFjdERlZmF1bHRJbmplY3Rpb24uaW5qZWN0KCk7XG5cbnZhciByZW5kZXIgPSBSZWFjdFBlcmYubWVhc3VyZSgnUmVhY3QnLCAncmVuZGVyJywgUmVhY3RNb3VudC5yZW5kZXIpO1xuXG52YXIgUmVhY3QgPSB7XG4gIGZpbmRET01Ob2RlOiBmaW5kRE9NTm9kZSxcbiAgcmVuZGVyOiByZW5kZXIsXG4gIHVubW91bnRDb21wb25lbnRBdE5vZGU6IFJlYWN0TW91bnQudW5tb3VudENvbXBvbmVudEF0Tm9kZSxcbiAgdmVyc2lvbjogUmVhY3RWZXJzaW9uLFxuXG4gIC8qIGVzbGludC1kaXNhYmxlIGNhbWVsY2FzZSAqL1xuICB1bnN0YWJsZV9iYXRjaGVkVXBkYXRlczogUmVhY3RVcGRhdGVzLmJhdGNoZWRVcGRhdGVzLFxuICB1bnN0YWJsZV9yZW5kZXJTdWJ0cmVlSW50b0NvbnRhaW5lcjogcmVuZGVyU3VidHJlZUludG9Db250YWluZXJcbn07XG5cbi8vIEluamVjdCB0aGUgcnVudGltZSBpbnRvIGEgZGV2dG9vbHMgZ2xvYmFsIGhvb2sgcmVnYXJkbGVzcyBvZiBicm93c2VyLlxuLy8gQWxsb3dzIGZvciBkZWJ1Z2dpbmcgd2hlbiB0aGUgaG9vayBpcyBpbmplY3RlZCBvbiB0aGUgcGFnZS5cbi8qIGVzbGludC1lbmFibGUgY2FtZWxjYXNlICovXG5pZiAodHlwZW9mIF9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIF9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXy5pbmplY3QgPT09ICdmdW5jdGlvbicpIHtcbiAgX19SRUFDVF9ERVZUT09MU19HTE9CQUxfSE9PS19fLmluamVjdCh7XG4gICAgQ3VycmVudE93bmVyOiBSZWFjdEN1cnJlbnRPd25lcixcbiAgICBJbnN0YW5jZUhhbmRsZXM6IFJlYWN0SW5zdGFuY2VIYW5kbGVzLFxuICAgIE1vdW50OiBSZWFjdE1vdW50LFxuICAgIFJlY29uY2lsZXI6IFJlYWN0UmVjb25jaWxlcixcbiAgICBUZXh0Q29tcG9uZW50OiBSZWFjdERPTVRleHRDb21wb25lbnRcbiAgfSk7XG59XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIHZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHJlcXVpcmUoJ2ZianMvbGliL0V4ZWN1dGlvbkVudmlyb25tZW50Jyk7XG4gIGlmIChFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gJiYgd2luZG93LnRvcCA9PT0gd2luZG93LnNlbGYpIHtcblxuICAgIC8vIEZpcnN0IGNoZWNrIGlmIGRldnRvb2xzIGlzIG5vdCBpbnN0YWxsZWRcbiAgICBpZiAodHlwZW9mIF9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIElmIHdlJ3JlIGluIENocm9tZSBvciBGaXJlZm94LCBwcm92aWRlIGEgZG93bmxvYWQgbGluayBpZiBub3QgaW5zdGFsbGVkLlxuICAgICAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignQ2hyb21lJykgPiAtMSAmJiBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ0VkZ2UnKSA9PT0gLTEgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdGaXJlZm94JykgPiAtMSkge1xuICAgICAgICBjb25zb2xlLmRlYnVnKCdEb3dubG9hZCB0aGUgUmVhY3QgRGV2VG9vbHMgZm9yIGEgYmV0dGVyIGRldmVsb3BtZW50IGV4cGVyaWVuY2U6ICcgKyAnaHR0cHM6Ly9mYi5tZS9yZWFjdC1kZXZ0b29scycpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIElmIHdlJ3JlIGluIElFOCwgY2hlY2sgdG8gc2VlIGlmIHdlIGFyZSBpbiBjb21wYXRpYmlsaXR5IG1vZGUgYW5kIHByb3ZpZGVcbiAgICAvLyBpbmZvcm1hdGlvbiBvbiBwcmV2ZW50aW5nIGNvbXBhdGliaWxpdHkgbW9kZVxuICAgIHZhciBpZUNvbXBhdGliaWxpdHlNb2RlID0gZG9jdW1lbnQuZG9jdW1lbnRNb2RlICYmIGRvY3VtZW50LmRvY3VtZW50TW9kZSA8IDg7XG5cbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyghaWVDb21wYXRpYmlsaXR5TW9kZSwgJ0ludGVybmV0IEV4cGxvcmVyIGlzIHJ1bm5pbmcgaW4gY29tcGF0aWJpbGl0eSBtb2RlOyBwbGVhc2UgYWRkIHRoZSAnICsgJ2ZvbGxvd2luZyB0YWcgdG8geW91ciBIVE1MIHRvIHByZXZlbnQgdGhpcyBmcm9tIGhhcHBlbmluZzogJyArICc8bWV0YSBodHRwLWVxdWl2PVwiWC1VQS1Db21wYXRpYmxlXCIgY29udGVudD1cIklFPWVkZ2VcIiAvPicpIDogdW5kZWZpbmVkO1xuXG4gICAgdmFyIGV4cGVjdGVkRmVhdHVyZXMgPSBbXG4gICAgLy8gc2hpbXNcbiAgICBBcnJheS5pc0FycmF5LCBBcnJheS5wcm90b3R5cGUuZXZlcnksIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLCBBcnJheS5wcm90b3R5cGUuaW5kZXhPZiwgQXJyYXkucHJvdG90eXBlLm1hcCwgRGF0ZS5ub3csIEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLCBPYmplY3Qua2V5cywgU3RyaW5nLnByb3RvdHlwZS5zcGxpdCwgU3RyaW5nLnByb3RvdHlwZS50cmltLFxuXG4gICAgLy8gc2hhbXNcbiAgICBPYmplY3QuY3JlYXRlLCBPYmplY3QuZnJlZXplXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXhwZWN0ZWRGZWF0dXJlcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKCFleHBlY3RlZEZlYXR1cmVzW2ldKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ09uZSBvciBtb3JlIEVTNSBzaGltL3NoYW1zIGV4cGVjdGVkIGJ5IFJlYWN0IGFyZSBub3QgYXZhaWxhYmxlOiAnICsgJ2h0dHBzOi8vZmIubWUvcmVhY3Qtd2FybmluZy1wb2x5ZmlsbHMnKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3Q7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0L2xpYi9SZWFjdERPTS5qc1xuLy8gbW9kdWxlIGlkID0gM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG4oZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgIH1cbn0gKCkpXG5mdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRPbmNlTGlzdGVuZXIgPSBub29wO1xuXG5wcm9jZXNzLmxpc3RlbmVycyA9IGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBbXSB9XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3Byb2Nlc3MvYnJvd3Nlci5qc1xuLy8gbW9kdWxlIGlkID0gNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RDdXJyZW50T3duZXJcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogS2VlcHMgdHJhY2sgb2YgdGhlIGN1cnJlbnQgb3duZXIuXG4gKlxuICogVGhlIGN1cnJlbnQgb3duZXIgaXMgdGhlIGNvbXBvbmVudCB3aG8gc2hvdWxkIG93biBhbnkgY29tcG9uZW50cyB0aGF0IGFyZVxuICogY3VycmVudGx5IGJlaW5nIGNvbnN0cnVjdGVkLlxuICovXG52YXIgUmVhY3RDdXJyZW50T3duZXIgPSB7XG5cbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKiBAdHlwZSB7UmVhY3RDb21wb25lbnR9XG4gICAqL1xuICBjdXJyZW50OiBudWxsXG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RDdXJyZW50T3duZXI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0L2xpYi9SZWFjdEN1cnJlbnRPd25lci5qc1xuLy8gbW9kdWxlIGlkID0gNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RET01UZXh0Q29tcG9uZW50XG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIERPTUNoaWxkcmVuT3BlcmF0aW9ucyA9IHJlcXVpcmUoJy4vRE9NQ2hpbGRyZW5PcGVyYXRpb25zJyk7XG52YXIgRE9NUHJvcGVydHlPcGVyYXRpb25zID0gcmVxdWlyZSgnLi9ET01Qcm9wZXJ0eU9wZXJhdGlvbnMnKTtcbnZhciBSZWFjdENvbXBvbmVudEJyb3dzZXJFbnZpcm9ubWVudCA9IHJlcXVpcmUoJy4vUmVhY3RDb21wb25lbnRCcm93c2VyRW52aXJvbm1lbnQnKTtcbnZhciBSZWFjdE1vdW50ID0gcmVxdWlyZSgnLi9SZWFjdE1vdW50Jyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBlc2NhcGVUZXh0Q29udGVudEZvckJyb3dzZXIgPSByZXF1aXJlKCcuL2VzY2FwZVRleHRDb250ZW50Rm9yQnJvd3NlcicpO1xudmFyIHNldFRleHRDb250ZW50ID0gcmVxdWlyZSgnLi9zZXRUZXh0Q29udGVudCcpO1xudmFyIHZhbGlkYXRlRE9NTmVzdGluZyA9IHJlcXVpcmUoJy4vdmFsaWRhdGVET01OZXN0aW5nJyk7XG5cbi8qKlxuICogVGV4dCBub2RlcyB2aW9sYXRlIGEgY291cGxlIGFzc3VtcHRpb25zIHRoYXQgUmVhY3QgbWFrZXMgYWJvdXQgY29tcG9uZW50czpcbiAqXG4gKiAgLSBXaGVuIG1vdW50aW5nIHRleHQgaW50byB0aGUgRE9NLCBhZGphY2VudCB0ZXh0IG5vZGVzIGFyZSBtZXJnZWQuXG4gKiAgLSBUZXh0IG5vZGVzIGNhbm5vdCBiZSBhc3NpZ25lZCBhIFJlYWN0IHJvb3QgSUQuXG4gKlxuICogVGhpcyBjb21wb25lbnQgaXMgdXNlZCB0byB3cmFwIHN0cmluZ3MgaW4gZWxlbWVudHMgc28gdGhhdCB0aGV5IGNhbiB1bmRlcmdvXG4gKiB0aGUgc2FtZSByZWNvbmNpbGlhdGlvbiB0aGF0IGlzIGFwcGxpZWQgdG8gZWxlbWVudHMuXG4gKlxuICogVE9ETzogSW52ZXN0aWdhdGUgcmVwcmVzZW50aW5nIFJlYWN0IGNvbXBvbmVudHMgaW4gdGhlIERPTSB3aXRoIHRleHQgbm9kZXMuXG4gKlxuICogQGNsYXNzIFJlYWN0RE9NVGV4dENvbXBvbmVudFxuICogQGV4dGVuZHMgUmVhY3RDb21wb25lbnRcbiAqIEBpbnRlcm5hbFxuICovXG52YXIgUmVhY3RET01UZXh0Q29tcG9uZW50ID0gZnVuY3Rpb24gKHByb3BzKSB7XG4gIC8vIFRoaXMgY29uc3RydWN0b3IgYW5kIGl0cyBhcmd1bWVudCBpcyBjdXJyZW50bHkgdXNlZCBieSBtb2Nrcy5cbn07XG5cbmFzc2lnbihSZWFjdERPTVRleHRDb21wb25lbnQucHJvdG90eXBlLCB7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7UmVhY3RUZXh0fSB0ZXh0XG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgY29uc3RydWN0OiBmdW5jdGlvbiAodGV4dCkge1xuICAgIC8vIFRPRE86IFRoaXMgaXMgcmVhbGx5IGEgUmVhY3RUZXh0IChSZWFjdE5vZGUpLCBub3QgYSBSZWFjdEVsZW1lbnRcbiAgICB0aGlzLl9jdXJyZW50RWxlbWVudCA9IHRleHQ7XG4gICAgdGhpcy5fc3RyaW5nVGV4dCA9ICcnICsgdGV4dDtcblxuICAgIC8vIFByb3BlcnRpZXNcbiAgICB0aGlzLl9yb290Tm9kZUlEID0gbnVsbDtcbiAgICB0aGlzLl9tb3VudEluZGV4ID0gMDtcbiAgfSxcblxuICAvKipcbiAgICogQ3JlYXRlcyB0aGUgbWFya3VwIGZvciB0aGlzIHRleHQgbm9kZS4gVGhpcyBub2RlIGlzIG5vdCBpbnRlbmRlZCB0byBoYXZlXG4gICAqIGFueSBmZWF0dXJlcyBiZXNpZGVzIGNvbnRhaW5pbmcgdGV4dCBjb250ZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcm9vdElEIERPTSBJRCBvZiB0aGUgcm9vdCBub2RlLlxuICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb258UmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICogQHJldHVybiB7c3RyaW5nfSBNYXJrdXAgZm9yIHRoaXMgdGV4dCBub2RlLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIG1vdW50Q29tcG9uZW50OiBmdW5jdGlvbiAocm9vdElELCB0cmFuc2FjdGlvbiwgY29udGV4dCkge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBpZiAoY29udGV4dFt2YWxpZGF0ZURPTU5lc3RpbmcuYW5jZXN0b3JJbmZvQ29udGV4dEtleV0pIHtcbiAgICAgICAgdmFsaWRhdGVET01OZXN0aW5nKCdzcGFuJywgbnVsbCwgY29udGV4dFt2YWxpZGF0ZURPTU5lc3RpbmcuYW5jZXN0b3JJbmZvQ29udGV4dEtleV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX3Jvb3ROb2RlSUQgPSByb290SUQ7XG4gICAgaWYgKHRyYW5zYWN0aW9uLnVzZUNyZWF0ZUVsZW1lbnQpIHtcbiAgICAgIHZhciBvd25lckRvY3VtZW50ID0gY29udGV4dFtSZWFjdE1vdW50Lm93bmVyRG9jdW1lbnRDb250ZXh0S2V5XTtcbiAgICAgIHZhciBlbCA9IG93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgRE9NUHJvcGVydHlPcGVyYXRpb25zLnNldEF0dHJpYnV0ZUZvcklEKGVsLCByb290SUQpO1xuICAgICAgLy8gUG9wdWxhdGUgbm9kZSBjYWNoZVxuICAgICAgUmVhY3RNb3VudC5nZXRJRChlbCk7XG4gICAgICBzZXRUZXh0Q29udGVudChlbCwgdGhpcy5fc3RyaW5nVGV4dCk7XG4gICAgICByZXR1cm4gZWw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBlc2NhcGVkVGV4dCA9IGVzY2FwZVRleHRDb250ZW50Rm9yQnJvd3Nlcih0aGlzLl9zdHJpbmdUZXh0KTtcblxuICAgICAgaWYgKHRyYW5zYWN0aW9uLnJlbmRlclRvU3RhdGljTWFya3VwKSB7XG4gICAgICAgIC8vIE5vcm1hbGx5IHdlJ2Qgd3JhcCB0aGlzIGluIGEgYHNwYW5gIGZvciB0aGUgcmVhc29ucyBzdGF0ZWQgYWJvdmUsIGJ1dFxuICAgICAgICAvLyBzaW5jZSB0aGlzIGlzIGEgc2l0dWF0aW9uIHdoZXJlIFJlYWN0IHdvbid0IHRha2Ugb3ZlciAoc3RhdGljIHBhZ2VzKSxcbiAgICAgICAgLy8gd2UgY2FuIHNpbXBseSByZXR1cm4gdGhlIHRleHQgYXMgaXQgaXMuXG4gICAgICAgIHJldHVybiBlc2NhcGVkVGV4dDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuICc8c3BhbiAnICsgRE9NUHJvcGVydHlPcGVyYXRpb25zLmNyZWF0ZU1hcmt1cEZvcklEKHJvb3RJRCkgKyAnPicgKyBlc2NhcGVkVGV4dCArICc8L3NwYW4+JztcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhpcyBjb21wb25lbnQgYnkgdXBkYXRpbmcgdGhlIHRleHQgY29udGVudC5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdFRleHR9IG5leHRUZXh0IFRoZSBuZXh0IHRleHQgY29udGVudFxuICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgcmVjZWl2ZUNvbXBvbmVudDogZnVuY3Rpb24gKG5leHRUZXh0LCB0cmFuc2FjdGlvbikge1xuICAgIGlmIChuZXh0VGV4dCAhPT0gdGhpcy5fY3VycmVudEVsZW1lbnQpIHtcbiAgICAgIHRoaXMuX2N1cnJlbnRFbGVtZW50ID0gbmV4dFRleHQ7XG4gICAgICB2YXIgbmV4dFN0cmluZ1RleHQgPSAnJyArIG5leHRUZXh0O1xuICAgICAgaWYgKG5leHRTdHJpbmdUZXh0ICE9PSB0aGlzLl9zdHJpbmdUZXh0KSB7XG4gICAgICAgIC8vIFRPRE86IFNhdmUgdGhpcyBhcyBwZW5kaW5nIHByb3BzIGFuZCB1c2UgcGVyZm9ybVVwZGF0ZUlmTmVjZXNzYXJ5XG4gICAgICAgIC8vIGFuZC9vciB1cGRhdGVDb21wb25lbnQgdG8gZG8gdGhlIGFjdHVhbCB1cGRhdGUgZm9yIGNvbnNpc3RlbmN5IHdpdGhcbiAgICAgICAgLy8gb3RoZXIgY29tcG9uZW50IHR5cGVzP1xuICAgICAgICB0aGlzLl9zdHJpbmdUZXh0ID0gbmV4dFN0cmluZ1RleHQ7XG4gICAgICAgIHZhciBub2RlID0gUmVhY3RNb3VudC5nZXROb2RlKHRoaXMuX3Jvb3ROb2RlSUQpO1xuICAgICAgICBET01DaGlsZHJlbk9wZXJhdGlvbnMudXBkYXRlVGV4dENvbnRlbnQobm9kZSwgbmV4dFN0cmluZ1RleHQpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICB1bm1vdW50Q29tcG9uZW50OiBmdW5jdGlvbiAoKSB7XG4gICAgUmVhY3RDb21wb25lbnRCcm93c2VyRW52aXJvbm1lbnQudW5tb3VudElERnJvbUVudmlyb25tZW50KHRoaXMuX3Jvb3ROb2RlSUQpO1xuICB9XG5cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0RE9NVGV4dENvbXBvbmVudDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QvbGliL1JlYWN0RE9NVGV4dENvbXBvbmVudC5qc1xuLy8gbW9kdWxlIGlkID0gNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRE9NQ2hpbGRyZW5PcGVyYXRpb25zXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIERhbmdlciA9IHJlcXVpcmUoJy4vRGFuZ2VyJyk7XG52YXIgUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMgPSByZXF1aXJlKCcuL1JlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzJyk7XG52YXIgUmVhY3RQZXJmID0gcmVxdWlyZSgnLi9SZWFjdFBlcmYnKTtcblxudmFyIHNldElubmVySFRNTCA9IHJlcXVpcmUoJy4vc2V0SW5uZXJIVE1MJyk7XG52YXIgc2V0VGV4dENvbnRlbnQgPSByZXF1aXJlKCcuL3NldFRleHRDb250ZW50Jyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbi8qKlxuICogSW5zZXJ0cyBgY2hpbGROb2RlYCBhcyBhIGNoaWxkIG9mIGBwYXJlbnROb2RlYCBhdCB0aGUgYGluZGV4YC5cbiAqXG4gKiBAcGFyYW0ge0RPTUVsZW1lbnR9IHBhcmVudE5vZGUgUGFyZW50IG5vZGUgaW4gd2hpY2ggdG8gaW5zZXJ0LlxuICogQHBhcmFtIHtET01FbGVtZW50fSBjaGlsZE5vZGUgQ2hpbGQgbm9kZSB0byBpbnNlcnQuXG4gKiBAcGFyYW0ge251bWJlcn0gaW5kZXggSW5kZXggYXQgd2hpY2ggdG8gaW5zZXJ0IHRoZSBjaGlsZC5cbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBpbnNlcnRDaGlsZEF0KHBhcmVudE5vZGUsIGNoaWxkTm9kZSwgaW5kZXgpIHtcbiAgLy8gQnkgZXhwbG9pdGluZyBhcnJheXMgcmV0dXJuaW5nIGB1bmRlZmluZWRgIGZvciBhbiB1bmRlZmluZWQgaW5kZXgsIHdlIGNhblxuICAvLyByZWx5IGV4Y2x1c2l2ZWx5IG9uIGBpbnNlcnRCZWZvcmUobm9kZSwgbnVsbClgIGluc3RlYWQgb2YgYWxzbyB1c2luZ1xuICAvLyBgYXBwZW5kQ2hpbGQobm9kZSlgLiBIb3dldmVyLCB1c2luZyBgdW5kZWZpbmVkYCBpcyBub3QgYWxsb3dlZCBieSBhbGxcbiAgLy8gYnJvd3NlcnMgc28gd2UgbXVzdCByZXBsYWNlIGl0IHdpdGggYG51bGxgLlxuXG4gIC8vIGZpeCByZW5kZXIgb3JkZXIgZXJyb3IgaW4gc2FmYXJpXG4gIC8vIElFOCB3aWxsIHRocm93IGVycm9yIHdoZW4gaW5kZXggb3V0IG9mIGxpc3Qgc2l6ZS5cbiAgdmFyIGJlZm9yZUNoaWxkID0gaW5kZXggPj0gcGFyZW50Tm9kZS5jaGlsZE5vZGVzLmxlbmd0aCA/IG51bGwgOiBwYXJlbnROb2RlLmNoaWxkTm9kZXMuaXRlbShpbmRleCk7XG5cbiAgcGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoY2hpbGROb2RlLCBiZWZvcmVDaGlsZCk7XG59XG5cbi8qKlxuICogT3BlcmF0aW9ucyBmb3IgdXBkYXRpbmcgd2l0aCBET00gY2hpbGRyZW4uXG4gKi9cbnZhciBET01DaGlsZHJlbk9wZXJhdGlvbnMgPSB7XG5cbiAgZGFuZ2Vyb3VzbHlSZXBsYWNlTm9kZVdpdGhNYXJrdXA6IERhbmdlci5kYW5nZXJvdXNseVJlcGxhY2VOb2RlV2l0aE1hcmt1cCxcblxuICB1cGRhdGVUZXh0Q29udGVudDogc2V0VGV4dENvbnRlbnQsXG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgYSBjb21wb25lbnQncyBjaGlsZHJlbiBieSBwcm9jZXNzaW5nIGEgc2VyaWVzIG9mIHVwZGF0ZXMuIFRoZVxuICAgKiB1cGRhdGUgY29uZmlndXJhdGlvbnMgYXJlIGVhY2ggZXhwZWN0ZWQgdG8gaGF2ZSBhIGBwYXJlbnROb2RlYCBwcm9wZXJ0eS5cbiAgICpcbiAgICogQHBhcmFtIHthcnJheTxvYmplY3Q+fSB1cGRhdGVzIExpc3Qgb2YgdXBkYXRlIGNvbmZpZ3VyYXRpb25zLlxuICAgKiBAcGFyYW0ge2FycmF5PHN0cmluZz59IG1hcmt1cExpc3QgTGlzdCBvZiBtYXJrdXAgc3RyaW5ncy5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBwcm9jZXNzVXBkYXRlczogZnVuY3Rpb24gKHVwZGF0ZXMsIG1hcmt1cExpc3QpIHtcbiAgICB2YXIgdXBkYXRlO1xuICAgIC8vIE1hcHBpbmcgZnJvbSBwYXJlbnQgSURzIHRvIGluaXRpYWwgY2hpbGQgb3JkZXJpbmdzLlxuICAgIHZhciBpbml0aWFsQ2hpbGRyZW4gPSBudWxsO1xuICAgIC8vIExpc3Qgb2YgY2hpbGRyZW4gdGhhdCB3aWxsIGJlIG1vdmVkIG9yIHJlbW92ZWQuXG4gICAgdmFyIHVwZGF0ZWRDaGlsZHJlbiA9IG51bGw7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHVwZGF0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHVwZGF0ZSA9IHVwZGF0ZXNbaV07XG4gICAgICBpZiAodXBkYXRlLnR5cGUgPT09IFJlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzLk1PVkVfRVhJU1RJTkcgfHwgdXBkYXRlLnR5cGUgPT09IFJlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzLlJFTU9WRV9OT0RFKSB7XG4gICAgICAgIHZhciB1cGRhdGVkSW5kZXggPSB1cGRhdGUuZnJvbUluZGV4O1xuICAgICAgICB2YXIgdXBkYXRlZENoaWxkID0gdXBkYXRlLnBhcmVudE5vZGUuY2hpbGROb2Rlc1t1cGRhdGVkSW5kZXhdO1xuICAgICAgICB2YXIgcGFyZW50SUQgPSB1cGRhdGUucGFyZW50SUQ7XG5cbiAgICAgICAgIXVwZGF0ZWRDaGlsZCA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdwcm9jZXNzVXBkYXRlcygpOiBVbmFibGUgdG8gZmluZCBjaGlsZCAlcyBvZiBlbGVtZW50LiBUaGlzICcgKyAncHJvYmFibHkgbWVhbnMgdGhlIERPTSB3YXMgdW5leHBlY3RlZGx5IG11dGF0ZWQgKGUuZy4sIGJ5IHRoZSAnICsgJ2Jyb3dzZXIpLCB1c3VhbGx5IGR1ZSB0byBmb3JnZXR0aW5nIGEgPHRib2R5PiB3aGVuIHVzaW5nIHRhYmxlcywgJyArICduZXN0aW5nIHRhZ3MgbGlrZSA8Zm9ybT4sIDxwPiwgb3IgPGE+LCBvciB1c2luZyBub24tU1ZHIGVsZW1lbnRzICcgKyAnaW4gYW4gPHN2Zz4gcGFyZW50LiBUcnkgaW5zcGVjdGluZyB0aGUgY2hpbGQgbm9kZXMgb2YgdGhlIGVsZW1lbnQgJyArICd3aXRoIFJlYWN0IElEIGAlc2AuJywgdXBkYXRlZEluZGV4LCBwYXJlbnRJRCkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgICAgIGluaXRpYWxDaGlsZHJlbiA9IGluaXRpYWxDaGlsZHJlbiB8fCB7fTtcbiAgICAgICAgaW5pdGlhbENoaWxkcmVuW3BhcmVudElEXSA9IGluaXRpYWxDaGlsZHJlbltwYXJlbnRJRF0gfHwgW107XG4gICAgICAgIGluaXRpYWxDaGlsZHJlbltwYXJlbnRJRF1bdXBkYXRlZEluZGV4XSA9IHVwZGF0ZWRDaGlsZDtcblxuICAgICAgICB1cGRhdGVkQ2hpbGRyZW4gPSB1cGRhdGVkQ2hpbGRyZW4gfHwgW107XG4gICAgICAgIHVwZGF0ZWRDaGlsZHJlbi5wdXNoKHVwZGF0ZWRDaGlsZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHJlbmRlcmVkTWFya3VwO1xuICAgIC8vIG1hcmt1cExpc3QgaXMgZWl0aGVyIGEgbGlzdCBvZiBtYXJrdXAgb3IganVzdCBhIGxpc3Qgb2YgZWxlbWVudHNcbiAgICBpZiAobWFya3VwTGlzdC5sZW5ndGggJiYgdHlwZW9mIG1hcmt1cExpc3RbMF0gPT09ICdzdHJpbmcnKSB7XG4gICAgICByZW5kZXJlZE1hcmt1cCA9IERhbmdlci5kYW5nZXJvdXNseVJlbmRlck1hcmt1cChtYXJrdXBMaXN0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVuZGVyZWRNYXJrdXAgPSBtYXJrdXBMaXN0O1xuICAgIH1cblxuICAgIC8vIFJlbW92ZSB1cGRhdGVkIGNoaWxkcmVuIGZpcnN0IHNvIHRoYXQgYHRvSW5kZXhgIGlzIGNvbnNpc3RlbnQuXG4gICAgaWYgKHVwZGF0ZWRDaGlsZHJlbikge1xuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB1cGRhdGVkQ2hpbGRyZW4ubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgdXBkYXRlZENoaWxkcmVuW2pdLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodXBkYXRlZENoaWxkcmVuW2pdKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKHZhciBrID0gMDsgayA8IHVwZGF0ZXMubGVuZ3RoOyBrKyspIHtcbiAgICAgIHVwZGF0ZSA9IHVwZGF0ZXNba107XG4gICAgICBzd2l0Y2ggKHVwZGF0ZS50eXBlKSB7XG4gICAgICAgIGNhc2UgUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMuSU5TRVJUX01BUktVUDpcbiAgICAgICAgICBpbnNlcnRDaGlsZEF0KHVwZGF0ZS5wYXJlbnROb2RlLCByZW5kZXJlZE1hcmt1cFt1cGRhdGUubWFya3VwSW5kZXhdLCB1cGRhdGUudG9JbmRleCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMuTU9WRV9FWElTVElORzpcbiAgICAgICAgICBpbnNlcnRDaGlsZEF0KHVwZGF0ZS5wYXJlbnROb2RlLCBpbml0aWFsQ2hpbGRyZW5bdXBkYXRlLnBhcmVudElEXVt1cGRhdGUuZnJvbUluZGV4XSwgdXBkYXRlLnRvSW5kZXgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFJlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzLlNFVF9NQVJLVVA6XG4gICAgICAgICAgc2V0SW5uZXJIVE1MKHVwZGF0ZS5wYXJlbnROb2RlLCB1cGRhdGUuY29udGVudCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMuVEVYVF9DT05URU5UOlxuICAgICAgICAgIHNldFRleHRDb250ZW50KHVwZGF0ZS5wYXJlbnROb2RlLCB1cGRhdGUuY29udGVudCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMuUkVNT1ZFX05PREU6XG4gICAgICAgICAgLy8gQWxyZWFkeSByZW1vdmVkIGJ5IHRoZSBmb3ItbG9vcCBhYm92ZS5cbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxufTtcblxuUmVhY3RQZXJmLm1lYXN1cmVNZXRob2RzKERPTUNoaWxkcmVuT3BlcmF0aW9ucywgJ0RPTUNoaWxkcmVuT3BlcmF0aW9ucycsIHtcbiAgdXBkYXRlVGV4dENvbnRlbnQ6ICd1cGRhdGVUZXh0Q29udGVudCdcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IERPTUNoaWxkcmVuT3BlcmF0aW9ucztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QvbGliL0RPTUNoaWxkcmVuT3BlcmF0aW9ucy5qc1xuLy8gbW9kdWxlIGlkID0gN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRGFuZ2VyXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEV4ZWN1dGlvbkVudmlyb25tZW50ID0gcmVxdWlyZSgnZmJqcy9saWIvRXhlY3V0aW9uRW52aXJvbm1lbnQnKTtcblxudmFyIGNyZWF0ZU5vZGVzRnJvbU1hcmt1cCA9IHJlcXVpcmUoJ2ZianMvbGliL2NyZWF0ZU5vZGVzRnJvbU1hcmt1cCcpO1xudmFyIGVtcHR5RnVuY3Rpb24gPSByZXF1aXJlKCdmYmpzL2xpYi9lbXB0eUZ1bmN0aW9uJyk7XG52YXIgZ2V0TWFya3VwV3JhcCA9IHJlcXVpcmUoJ2ZianMvbGliL2dldE1hcmt1cFdyYXAnKTtcbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcblxudmFyIE9QRU5fVEFHX05BTUVfRVhQID0gL14oPFteIFxcLz5dKykvO1xudmFyIFJFU1VMVF9JTkRFWF9BVFRSID0gJ2RhdGEtZGFuZ2VyLWluZGV4JztcblxuLyoqXG4gKiBFeHRyYWN0cyB0aGUgYG5vZGVOYW1lYCBmcm9tIGEgc3RyaW5nIG9mIG1hcmt1cC5cbiAqXG4gKiBOT1RFOiBFeHRyYWN0aW5nIHRoZSBgbm9kZU5hbWVgIGRvZXMgbm90IHJlcXVpcmUgYSByZWd1bGFyIGV4cHJlc3Npb24gbWF0Y2hcbiAqIGJlY2F1c2Ugd2UgbWFrZSBhc3N1bXB0aW9ucyBhYm91dCBSZWFjdC1nZW5lcmF0ZWQgbWFya3VwIChpLmUuIHRoZXJlIGFyZSBub1xuICogc3BhY2VzIHN1cnJvdW5kaW5nIHRoZSBvcGVuaW5nIHRhZyBhbmQgdGhlcmUgaXMgYXQgbGVhc3Qgb25lIGF0dHJpYnV0ZSkuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1hcmt1cCBTdHJpbmcgb2YgbWFya3VwLlxuICogQHJldHVybiB7c3RyaW5nfSBOb2RlIG5hbWUgb2YgdGhlIHN1cHBsaWVkIG1hcmt1cC5cbiAqIEBzZWUgaHR0cDovL2pzcGVyZi5jb20vZXh0cmFjdC1ub2RlbmFtZVxuICovXG5mdW5jdGlvbiBnZXROb2RlTmFtZShtYXJrdXApIHtcbiAgcmV0dXJuIG1hcmt1cC5zdWJzdHJpbmcoMSwgbWFya3VwLmluZGV4T2YoJyAnKSk7XG59XG5cbnZhciBEYW5nZXIgPSB7XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgbWFya3VwIGludG8gYW4gYXJyYXkgb2Ygbm9kZXMuIFRoZSBtYXJrdXAgaXMgZXhwZWN0ZWQgdG8gcmVuZGVyXG4gICAqIGludG8gYSBsaXN0IG9mIHJvb3Qgbm9kZXMuIEFsc28sIHRoZSBsZW5ndGggb2YgYHJlc3VsdExpc3RgIGFuZFxuICAgKiBgbWFya3VwTGlzdGAgc2hvdWxkIGJlIHRoZSBzYW1lLlxuICAgKlxuICAgKiBAcGFyYW0ge2FycmF5PHN0cmluZz59IG1hcmt1cExpc3QgTGlzdCBvZiBtYXJrdXAgc3RyaW5ncyB0byByZW5kZXIuXG4gICAqIEByZXR1cm4ge2FycmF5PERPTUVsZW1lbnQ+fSBMaXN0IG9mIHJlbmRlcmVkIG5vZGVzLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGRhbmdlcm91c2x5UmVuZGVyTWFya3VwOiBmdW5jdGlvbiAobWFya3VwTGlzdCkge1xuICAgICFFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnZGFuZ2Vyb3VzbHlSZW5kZXJNYXJrdXAoLi4uKTogQ2Fubm90IHJlbmRlciBtYXJrdXAgaW4gYSB3b3JrZXIgJyArICd0aHJlYWQuIE1ha2Ugc3VyZSBgd2luZG93YCBhbmQgYGRvY3VtZW50YCBhcmUgYXZhaWxhYmxlIGdsb2JhbGx5ICcgKyAnYmVmb3JlIHJlcXVpcmluZyBSZWFjdCB3aGVuIHVuaXQgdGVzdGluZyBvciB1c2UgJyArICdSZWFjdERPTVNlcnZlci5yZW5kZXJUb1N0cmluZyBmb3Igc2VydmVyIHJlbmRlcmluZy4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgdmFyIG5vZGVOYW1lO1xuICAgIHZhciBtYXJrdXBCeU5vZGVOYW1lID0ge307XG4gICAgLy8gR3JvdXAgbWFya3VwIGJ5IGBub2RlTmFtZWAgaWYgYSB3cmFwIGlzIG5lY2Vzc2FyeSwgZWxzZSBieSAnKicuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXJrdXBMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAhbWFya3VwTGlzdFtpXSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdkYW5nZXJvdXNseVJlbmRlck1hcmt1cCguLi4pOiBNaXNzaW5nIG1hcmt1cC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgICBub2RlTmFtZSA9IGdldE5vZGVOYW1lKG1hcmt1cExpc3RbaV0pO1xuICAgICAgbm9kZU5hbWUgPSBnZXRNYXJrdXBXcmFwKG5vZGVOYW1lKSA/IG5vZGVOYW1lIDogJyonO1xuICAgICAgbWFya3VwQnlOb2RlTmFtZVtub2RlTmFtZV0gPSBtYXJrdXBCeU5vZGVOYW1lW25vZGVOYW1lXSB8fCBbXTtcbiAgICAgIG1hcmt1cEJ5Tm9kZU5hbWVbbm9kZU5hbWVdW2ldID0gbWFya3VwTGlzdFtpXTtcbiAgICB9XG4gICAgdmFyIHJlc3VsdExpc3QgPSBbXTtcbiAgICB2YXIgcmVzdWx0TGlzdEFzc2lnbm1lbnRDb3VudCA9IDA7XG4gICAgZm9yIChub2RlTmFtZSBpbiBtYXJrdXBCeU5vZGVOYW1lKSB7XG4gICAgICBpZiAoIW1hcmt1cEJ5Tm9kZU5hbWUuaGFzT3duUHJvcGVydHkobm9kZU5hbWUpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgdmFyIG1hcmt1cExpc3RCeU5vZGVOYW1lID0gbWFya3VwQnlOb2RlTmFtZVtub2RlTmFtZV07XG5cbiAgICAgIC8vIFRoaXMgZm9yLWluIGxvb3Agc2tpcHMgdGhlIGhvbGVzIG9mIHRoZSBzcGFyc2UgYXJyYXkuIFRoZSBvcmRlciBvZlxuICAgICAgLy8gaXRlcmF0aW9uIHNob3VsZCBmb2xsb3cgdGhlIG9yZGVyIG9mIGFzc2lnbm1lbnQsIHdoaWNoIGhhcHBlbnMgdG8gbWF0Y2hcbiAgICAgIC8vIG51bWVyaWNhbCBpbmRleCBvcmRlciwgYnV0IHdlIGRvbid0IHJlbHkgb24gdGhhdC5cbiAgICAgIHZhciByZXN1bHRJbmRleDtcbiAgICAgIGZvciAocmVzdWx0SW5kZXggaW4gbWFya3VwTGlzdEJ5Tm9kZU5hbWUpIHtcbiAgICAgICAgaWYgKG1hcmt1cExpc3RCeU5vZGVOYW1lLmhhc093blByb3BlcnR5KHJlc3VsdEluZGV4KSkge1xuICAgICAgICAgIHZhciBtYXJrdXAgPSBtYXJrdXBMaXN0QnlOb2RlTmFtZVtyZXN1bHRJbmRleF07XG5cbiAgICAgICAgICAvLyBQdXNoIHRoZSByZXF1ZXN0ZWQgbWFya3VwIHdpdGggYW4gYWRkaXRpb25hbCBSRVNVTFRfSU5ERVhfQVRUUlxuICAgICAgICAgIC8vIGF0dHJpYnV0ZS4gIElmIHRoZSBtYXJrdXAgZG9lcyBub3Qgc3RhcnQgd2l0aCBhIDwgY2hhcmFjdGVyLCBpdFxuICAgICAgICAgIC8vIHdpbGwgYmUgZGlzY2FyZGVkIGJlbG93ICh3aXRoIGFuIGFwcHJvcHJpYXRlIGNvbnNvbGUuZXJyb3IpLlxuICAgICAgICAgIG1hcmt1cExpc3RCeU5vZGVOYW1lW3Jlc3VsdEluZGV4XSA9IG1hcmt1cC5yZXBsYWNlKE9QRU5fVEFHX05BTUVfRVhQLFxuICAgICAgICAgIC8vIFRoaXMgaW5kZXggd2lsbCBiZSBwYXJzZWQgYmFjayBvdXQgYmVsb3cuXG4gICAgICAgICAgJyQxICcgKyBSRVNVTFRfSU5ERVhfQVRUUiArICc9XCInICsgcmVzdWx0SW5kZXggKyAnXCIgJyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gUmVuZGVyIGVhY2ggZ3JvdXAgb2YgbWFya3VwIHdpdGggc2ltaWxhciB3cmFwcGluZyBgbm9kZU5hbWVgLlxuICAgICAgdmFyIHJlbmRlck5vZGVzID0gY3JlYXRlTm9kZXNGcm9tTWFya3VwKG1hcmt1cExpc3RCeU5vZGVOYW1lLmpvaW4oJycpLCBlbXB0eUZ1bmN0aW9uIC8vIERvIG5vdGhpbmcgc3BlY2lhbCB3aXRoIDxzY3JpcHQ+IHRhZ3MuXG4gICAgICApO1xuXG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHJlbmRlck5vZGVzLmxlbmd0aDsgKytqKSB7XG4gICAgICAgIHZhciByZW5kZXJOb2RlID0gcmVuZGVyTm9kZXNbal07XG4gICAgICAgIGlmIChyZW5kZXJOb2RlLmhhc0F0dHJpYnV0ZSAmJiByZW5kZXJOb2RlLmhhc0F0dHJpYnV0ZShSRVNVTFRfSU5ERVhfQVRUUikpIHtcblxuICAgICAgICAgIHJlc3VsdEluZGV4ID0gK3JlbmRlck5vZGUuZ2V0QXR0cmlidXRlKFJFU1VMVF9JTkRFWF9BVFRSKTtcbiAgICAgICAgICByZW5kZXJOb2RlLnJlbW92ZUF0dHJpYnV0ZShSRVNVTFRfSU5ERVhfQVRUUik7XG5cbiAgICAgICAgICAhIXJlc3VsdExpc3QuaGFzT3duUHJvcGVydHkocmVzdWx0SW5kZXgpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0RhbmdlcjogQXNzaWduaW5nIHRvIGFuIGFscmVhZHktb2NjdXBpZWQgcmVzdWx0IGluZGV4LicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgICAgICAgIHJlc3VsdExpc3RbcmVzdWx0SW5kZXhdID0gcmVuZGVyTm9kZTtcblxuICAgICAgICAgIC8vIFRoaXMgc2hvdWxkIG1hdGNoIHJlc3VsdExpc3QubGVuZ3RoIGFuZCBtYXJrdXBMaXN0Lmxlbmd0aCB3aGVuXG4gICAgICAgICAgLy8gd2UncmUgZG9uZS5cbiAgICAgICAgICByZXN1bHRMaXN0QXNzaWdubWVudENvdW50ICs9IDE7XG4gICAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0RhbmdlcjogRGlzY2FyZGluZyB1bmV4cGVjdGVkIG5vZGU6JywgcmVuZGVyTm9kZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBbHRob3VnaCByZXN1bHRMaXN0IHdhcyBwb3B1bGF0ZWQgb3V0IG9mIG9yZGVyLCBpdCBzaG91bGQgbm93IGJlIGEgZGVuc2VcbiAgICAvLyBhcnJheS5cbiAgICAhKHJlc3VsdExpc3RBc3NpZ25tZW50Q291bnQgPT09IHJlc3VsdExpc3QubGVuZ3RoKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdEYW5nZXI6IERpZCBub3QgYXNzaWduIHRvIGV2ZXJ5IGluZGV4IG9mIHJlc3VsdExpc3QuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgIShyZXN1bHRMaXN0Lmxlbmd0aCA9PT0gbWFya3VwTGlzdC5sZW5ndGgpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0RhbmdlcjogRXhwZWN0ZWQgbWFya3VwIHRvIHJlbmRlciAlcyBub2RlcywgYnV0IHJlbmRlcmVkICVzLicsIG1hcmt1cExpc3QubGVuZ3RoLCByZXN1bHRMaXN0Lmxlbmd0aCkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgcmV0dXJuIHJlc3VsdExpc3Q7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlcGxhY2VzIGEgbm9kZSB3aXRoIGEgc3RyaW5nIG9mIG1hcmt1cCBhdCBpdHMgY3VycmVudCBwb3NpdGlvbiB3aXRoaW4gaXRzXG4gICAqIHBhcmVudC4gVGhlIG1hcmt1cCBtdXN0IHJlbmRlciBpbnRvIGEgc2luZ2xlIHJvb3Qgbm9kZS5cbiAgICpcbiAgICogQHBhcmFtIHtET01FbGVtZW50fSBvbGRDaGlsZCBDaGlsZCBub2RlIHRvIHJlcGxhY2UuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtYXJrdXAgTWFya3VwIHRvIHJlbmRlciBpbiBwbGFjZSBvZiB0aGUgY2hpbGQgbm9kZS5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBkYW5nZXJvdXNseVJlcGxhY2VOb2RlV2l0aE1hcmt1cDogZnVuY3Rpb24gKG9sZENoaWxkLCBtYXJrdXApIHtcbiAgICAhRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2Rhbmdlcm91c2x5UmVwbGFjZU5vZGVXaXRoTWFya3VwKC4uLik6IENhbm5vdCByZW5kZXIgbWFya3VwIGluIGEgJyArICd3b3JrZXIgdGhyZWFkLiBNYWtlIHN1cmUgYHdpbmRvd2AgYW5kIGBkb2N1bWVudGAgYXJlIGF2YWlsYWJsZSAnICsgJ2dsb2JhbGx5IGJlZm9yZSByZXF1aXJpbmcgUmVhY3Qgd2hlbiB1bml0IHRlc3Rpbmcgb3IgdXNlICcgKyAnUmVhY3RET01TZXJ2ZXIucmVuZGVyVG9TdHJpbmcoKSBmb3Igc2VydmVyIHJlbmRlcmluZy4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgIW1hcmt1cCA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdkYW5nZXJvdXNseVJlcGxhY2VOb2RlV2l0aE1hcmt1cCguLi4pOiBNaXNzaW5nIG1hcmt1cC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgIShvbGRDaGlsZC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgIT09ICdodG1sJykgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnZGFuZ2Vyb3VzbHlSZXBsYWNlTm9kZVdpdGhNYXJrdXAoLi4uKTogQ2Fubm90IHJlcGxhY2UgbWFya3VwIG9mIHRoZSAnICsgJzxodG1sPiBub2RlLiBUaGlzIGlzIGJlY2F1c2UgYnJvd3NlciBxdWlya3MgbWFrZSB0aGlzIHVucmVsaWFibGUgJyArICdhbmQvb3Igc2xvdy4gSWYgeW91IHdhbnQgdG8gcmVuZGVyIHRvIHRoZSByb290IHlvdSBtdXN0IHVzZSAnICsgJ3NlcnZlciByZW5kZXJpbmcuIFNlZSBSZWFjdERPTVNlcnZlci5yZW5kZXJUb1N0cmluZygpLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIHZhciBuZXdDaGlsZDtcbiAgICBpZiAodHlwZW9mIG1hcmt1cCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIG5ld0NoaWxkID0gY3JlYXRlTm9kZXNGcm9tTWFya3VwKG1hcmt1cCwgZW1wdHlGdW5jdGlvbilbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIG5ld0NoaWxkID0gbWFya3VwO1xuICAgIH1cbiAgICBvbGRDaGlsZC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChuZXdDaGlsZCwgb2xkQ2hpbGQpO1xuICB9XG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gRGFuZ2VyO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvRGFuZ2VyLmpzXG4vLyBtb2R1bGUgaWQgPSA4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBFeGVjdXRpb25FbnZpcm9ubWVudFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGNhblVzZURPTSA9ICEhKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5kb2N1bWVudCAmJiB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCk7XG5cbi8qKlxuICogU2ltcGxlLCBsaWdodHdlaWdodCBtb2R1bGUgYXNzaXN0aW5nIHdpdGggdGhlIGRldGVjdGlvbiBhbmQgY29udGV4dCBvZlxuICogV29ya2VyLiBIZWxwcyBhdm9pZCBjaXJjdWxhciBkZXBlbmRlbmNpZXMgYW5kIGFsbG93cyBjb2RlIHRvIHJlYXNvbiBhYm91dFxuICogd2hldGhlciBvciBub3QgdGhleSBhcmUgaW4gYSBXb3JrZXIsIGV2ZW4gaWYgdGhleSBuZXZlciBpbmNsdWRlIHRoZSBtYWluXG4gKiBgUmVhY3RXb3JrZXJgIGRlcGVuZGVuY3kuXG4gKi9cbnZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHtcblxuICBjYW5Vc2VET006IGNhblVzZURPTSxcblxuICBjYW5Vc2VXb3JrZXJzOiB0eXBlb2YgV29ya2VyICE9PSAndW5kZWZpbmVkJyxcblxuICBjYW5Vc2VFdmVudExpc3RlbmVyczogY2FuVXNlRE9NICYmICEhKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyIHx8IHdpbmRvdy5hdHRhY2hFdmVudCksXG5cbiAgY2FuVXNlVmlld3BvcnQ6IGNhblVzZURPTSAmJiAhIXdpbmRvdy5zY3JlZW4sXG5cbiAgaXNJbldvcmtlcjogIWNhblVzZURPTSAvLyBGb3Igbm93LCB0aGlzIGlzIHRydWUgLSBtaWdodCBjaGFuZ2UgaW4gdGhlIGZ1dHVyZS5cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBFeGVjdXRpb25FbnZpcm9ubWVudDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vZmJqcy9saWIvRXhlY3V0aW9uRW52aXJvbm1lbnQuanNcbi8vIG1vZHVsZSBpZCA9IDlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGNyZWF0ZU5vZGVzRnJvbU1hcmt1cFxuICogQHR5cGVjaGVja3NcbiAqL1xuXG4vKmVzbGludC1kaXNhYmxlIGZiLXd3dy91bnNhZmUtaHRtbCovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEV4ZWN1dGlvbkVudmlyb25tZW50ID0gcmVxdWlyZSgnLi9FeGVjdXRpb25FbnZpcm9ubWVudCcpO1xuXG52YXIgY3JlYXRlQXJyYXlGcm9tTWl4ZWQgPSByZXF1aXJlKCcuL2NyZWF0ZUFycmF5RnJvbU1peGVkJyk7XG52YXIgZ2V0TWFya3VwV3JhcCA9IHJlcXVpcmUoJy4vZ2V0TWFya3VwV3JhcCcpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJy4vaW52YXJpYW50Jyk7XG5cbi8qKlxuICogRHVtbXkgY29udGFpbmVyIHVzZWQgdG8gcmVuZGVyIGFsbCBtYXJrdXAuXG4gKi9cbnZhciBkdW1teU5vZGUgPSBFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gPyBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSA6IG51bGw7XG5cbi8qKlxuICogUGF0dGVybiB1c2VkIGJ5IGBnZXROb2RlTmFtZWAuXG4gKi9cbnZhciBub2RlTmFtZVBhdHRlcm4gPSAvXlxccyo8KFxcdyspLztcblxuLyoqXG4gKiBFeHRyYWN0cyB0aGUgYG5vZGVOYW1lYCBvZiB0aGUgZmlyc3QgZWxlbWVudCBpbiBhIHN0cmluZyBvZiBtYXJrdXAuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1hcmt1cCBTdHJpbmcgb2YgbWFya3VwLlxuICogQHJldHVybiB7P3N0cmluZ30gTm9kZSBuYW1lIG9mIHRoZSBzdXBwbGllZCBtYXJrdXAuXG4gKi9cbmZ1bmN0aW9uIGdldE5vZGVOYW1lKG1hcmt1cCkge1xuICB2YXIgbm9kZU5hbWVNYXRjaCA9IG1hcmt1cC5tYXRjaChub2RlTmFtZVBhdHRlcm4pO1xuICByZXR1cm4gbm9kZU5hbWVNYXRjaCAmJiBub2RlTmFtZU1hdGNoWzFdLnRvTG93ZXJDYXNlKCk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBhcnJheSBjb250YWluaW5nIHRoZSBub2RlcyByZW5kZXJlZCBmcm9tIHRoZSBzdXBwbGllZCBtYXJrdXAuIFRoZVxuICogb3B0aW9uYWxseSBzdXBwbGllZCBgaGFuZGxlU2NyaXB0YCBmdW5jdGlvbiB3aWxsIGJlIGludm9rZWQgb25jZSBmb3IgZWFjaFxuICogPHNjcmlwdD4gZWxlbWVudCB0aGF0IGlzIHJlbmRlcmVkLiBJZiBubyBgaGFuZGxlU2NyaXB0YCBmdW5jdGlvbiBpcyBzdXBwbGllZCxcbiAqIGFuIGV4Y2VwdGlvbiBpcyB0aHJvd24gaWYgYW55IDxzY3JpcHQ+IGVsZW1lbnRzIGFyZSByZW5kZXJlZC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbWFya3VwIEEgc3RyaW5nIG9mIHZhbGlkIEhUTUwgbWFya3VwLlxuICogQHBhcmFtIHs/ZnVuY3Rpb259IGhhbmRsZVNjcmlwdCBJbnZva2VkIG9uY2UgZm9yIGVhY2ggcmVuZGVyZWQgPHNjcmlwdD4uXG4gKiBAcmV0dXJuIHthcnJheTxET01FbGVtZW50fERPTVRleHROb2RlPn0gQW4gYXJyYXkgb2YgcmVuZGVyZWQgbm9kZXMuXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZU5vZGVzRnJvbU1hcmt1cChtYXJrdXAsIGhhbmRsZVNjcmlwdCkge1xuICB2YXIgbm9kZSA9IGR1bW15Tm9kZTtcbiAgISEhZHVtbXlOb2RlID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2NyZWF0ZU5vZGVzRnJvbU1hcmt1cCBkdW1teSBub3QgaW5pdGlhbGl6ZWQnKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIHZhciBub2RlTmFtZSA9IGdldE5vZGVOYW1lKG1hcmt1cCk7XG5cbiAgdmFyIHdyYXAgPSBub2RlTmFtZSAmJiBnZXRNYXJrdXBXcmFwKG5vZGVOYW1lKTtcbiAgaWYgKHdyYXApIHtcbiAgICBub2RlLmlubmVySFRNTCA9IHdyYXBbMV0gKyBtYXJrdXAgKyB3cmFwWzJdO1xuXG4gICAgdmFyIHdyYXBEZXB0aCA9IHdyYXBbMF07XG4gICAgd2hpbGUgKHdyYXBEZXB0aC0tKSB7XG4gICAgICBub2RlID0gbm9kZS5sYXN0Q2hpbGQ7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIG5vZGUuaW5uZXJIVE1MID0gbWFya3VwO1xuICB9XG5cbiAgdmFyIHNjcmlwdHMgPSBub2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKTtcbiAgaWYgKHNjcmlwdHMubGVuZ3RoKSB7XG4gICAgIWhhbmRsZVNjcmlwdCA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdjcmVhdGVOb2Rlc0Zyb21NYXJrdXAoLi4uKTogVW5leHBlY3RlZCA8c2NyaXB0PiBlbGVtZW50IHJlbmRlcmVkLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICBjcmVhdGVBcnJheUZyb21NaXhlZChzY3JpcHRzKS5mb3JFYWNoKGhhbmRsZVNjcmlwdCk7XG4gIH1cblxuICB2YXIgbm9kZXMgPSBjcmVhdGVBcnJheUZyb21NaXhlZChub2RlLmNoaWxkTm9kZXMpO1xuICB3aGlsZSAobm9kZS5sYXN0Q2hpbGQpIHtcbiAgICBub2RlLnJlbW92ZUNoaWxkKG5vZGUubGFzdENoaWxkKTtcbiAgfVxuICByZXR1cm4gbm9kZXM7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlTm9kZXNGcm9tTWFya3VwO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9mYmpzL2xpYi9jcmVhdGVOb2Rlc0Zyb21NYXJrdXAuanNcbi8vIG1vZHVsZSBpZCA9IDEwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBjcmVhdGVBcnJheUZyb21NaXhlZFxuICogQHR5cGVjaGVja3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciB0b0FycmF5ID0gcmVxdWlyZSgnLi90b0FycmF5Jyk7XG5cbi8qKlxuICogUGVyZm9ybSBhIGhldXJpc3RpYyB0ZXN0IHRvIGRldGVybWluZSBpZiBhbiBvYmplY3QgaXMgXCJhcnJheS1saWtlXCIuXG4gKlxuICogICBBIG1vbmsgYXNrZWQgSm9zaHUsIGEgWmVuIG1hc3RlciwgXCJIYXMgYSBkb2cgQnVkZGhhIG5hdHVyZT9cIlxuICogICBKb3NodSByZXBsaWVkOiBcIk11LlwiXG4gKlxuICogVGhpcyBmdW5jdGlvbiBkZXRlcm1pbmVzIGlmIGl0cyBhcmd1bWVudCBoYXMgXCJhcnJheSBuYXR1cmVcIjogaXQgcmV0dXJuc1xuICogdHJ1ZSBpZiB0aGUgYXJndW1lbnQgaXMgYW4gYWN0dWFsIGFycmF5LCBhbiBgYXJndW1lbnRzJyBvYmplY3QsIG9yIGFuXG4gKiBIVE1MQ29sbGVjdGlvbiAoZS5nLiBub2RlLmNoaWxkTm9kZXMgb3Igbm9kZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgpKS5cbiAqXG4gKiBJdCB3aWxsIHJldHVybiBmYWxzZSBmb3Igb3RoZXIgYXJyYXktbGlrZSBvYmplY3RzIGxpa2UgRmlsZWxpc3QuXG4gKlxuICogQHBhcmFtIHsqfSBvYmpcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGhhc0FycmF5TmF0dXJlKG9iaikge1xuICByZXR1cm4oXG4gICAgLy8gbm90IG51bGwvZmFsc2VcbiAgICAhIW9iaiAmJiAoXG4gICAgLy8gYXJyYXlzIGFyZSBvYmplY3RzLCBOb2RlTGlzdHMgYXJlIGZ1bmN0aW9ucyBpbiBTYWZhcmlcbiAgICB0eXBlb2Ygb2JqID09ICdvYmplY3QnIHx8IHR5cGVvZiBvYmogPT0gJ2Z1bmN0aW9uJykgJiZcbiAgICAvLyBxdWFja3MgbGlrZSBhbiBhcnJheVxuICAgICdsZW5ndGgnIGluIG9iaiAmJlxuICAgIC8vIG5vdCB3aW5kb3dcbiAgICAhKCdzZXRJbnRlcnZhbCcgaW4gb2JqKSAmJlxuICAgIC8vIG5vIERPTSBub2RlIHNob3VsZCBiZSBjb25zaWRlcmVkIGFuIGFycmF5LWxpa2VcbiAgICAvLyBhICdzZWxlY3QnIGVsZW1lbnQgaGFzICdsZW5ndGgnIGFuZCAnaXRlbScgcHJvcGVydGllcyBvbiBJRThcbiAgICB0eXBlb2Ygb2JqLm5vZGVUeXBlICE9ICdudW1iZXInICYmIChcbiAgICAvLyBhIHJlYWwgYXJyYXlcbiAgICBBcnJheS5pc0FycmF5KG9iaikgfHxcbiAgICAvLyBhcmd1bWVudHNcbiAgICAnY2FsbGVlJyBpbiBvYmogfHxcbiAgICAvLyBIVE1MQ29sbGVjdGlvbi9Ob2RlTGlzdFxuICAgICdpdGVtJyBpbiBvYmopXG4gICk7XG59XG5cbi8qKlxuICogRW5zdXJlIHRoYXQgdGhlIGFyZ3VtZW50IGlzIGFuIGFycmF5IGJ5IHdyYXBwaW5nIGl0IGluIGFuIGFycmF5IGlmIGl0IGlzIG5vdC5cbiAqIENyZWF0ZXMgYSBjb3B5IG9mIHRoZSBhcmd1bWVudCBpZiBpdCBpcyBhbHJlYWR5IGFuIGFycmF5LlxuICpcbiAqIFRoaXMgaXMgbW9zdGx5IHVzZWZ1bCBpZGlvbWF0aWNhbGx5OlxuICpcbiAqICAgdmFyIGNyZWF0ZUFycmF5RnJvbU1peGVkID0gcmVxdWlyZSgnY3JlYXRlQXJyYXlGcm9tTWl4ZWQnKTtcbiAqXG4gKiAgIGZ1bmN0aW9uIHRha2VzT25lT3JNb3JlVGhpbmdzKHRoaW5ncykge1xuICogICAgIHRoaW5ncyA9IGNyZWF0ZUFycmF5RnJvbU1peGVkKHRoaW5ncyk7XG4gKiAgICAgLi4uXG4gKiAgIH1cbiAqXG4gKiBUaGlzIGFsbG93cyB5b3UgdG8gdHJlYXQgYHRoaW5ncycgYXMgYW4gYXJyYXksIGJ1dCBhY2NlcHQgc2NhbGFycyBpbiB0aGUgQVBJLlxuICpcbiAqIElmIHlvdSBuZWVkIHRvIGNvbnZlcnQgYW4gYXJyYXktbGlrZSBvYmplY3QsIGxpa2UgYGFyZ3VtZW50c2AsIGludG8gYW4gYXJyYXlcbiAqIHVzZSB0b0FycmF5IGluc3RlYWQuXG4gKlxuICogQHBhcmFtIHsqfSBvYmpcbiAqIEByZXR1cm4ge2FycmF5fVxuICovXG5mdW5jdGlvbiBjcmVhdGVBcnJheUZyb21NaXhlZChvYmopIHtcbiAgaWYgKCFoYXNBcnJheU5hdHVyZShvYmopKSB7XG4gICAgcmV0dXJuIFtvYmpdO1xuICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkge1xuICAgIHJldHVybiBvYmouc2xpY2UoKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdG9BcnJheShvYmopO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlQXJyYXlGcm9tTWl4ZWQ7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2ZianMvbGliL2NyZWF0ZUFycmF5RnJvbU1peGVkLmpzXG4vLyBtb2R1bGUgaWQgPSAxMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgdG9BcnJheVxuICogQHR5cGVjaGVja3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCcuL2ludmFyaWFudCcpO1xuXG4vKipcbiAqIENvbnZlcnQgYXJyYXktbGlrZSBvYmplY3RzIHRvIGFycmF5cy5cbiAqXG4gKiBUaGlzIEFQSSBhc3N1bWVzIHRoZSBjYWxsZXIga25vd3MgdGhlIGNvbnRlbnRzIG9mIHRoZSBkYXRhIHR5cGUuIEZvciBsZXNzXG4gKiB3ZWxsIGRlZmluZWQgaW5wdXRzIHVzZSBjcmVhdGVBcnJheUZyb21NaXhlZC5cbiAqXG4gKiBAcGFyYW0ge29iamVjdHxmdW5jdGlvbnxmaWxlbGlzdH0gb2JqXG4gKiBAcmV0dXJuIHthcnJheX1cbiAqL1xuZnVuY3Rpb24gdG9BcnJheShvYmopIHtcbiAgdmFyIGxlbmd0aCA9IG9iai5sZW5ndGg7XG5cbiAgLy8gU29tZSBicm93c2UgYnVpbHRpbiBvYmplY3RzIGNhbiByZXBvcnQgdHlwZW9mICdmdW5jdGlvbicgKGUuZy4gTm9kZUxpc3QgaW5cbiAgLy8gb2xkIHZlcnNpb25zIG9mIFNhZmFyaSkuXG4gICEoIUFycmF5LmlzQXJyYXkob2JqKSAmJiAodHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgfHwgdHlwZW9mIG9iaiA9PT0gJ2Z1bmN0aW9uJykpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ3RvQXJyYXk6IEFycmF5LWxpa2Ugb2JqZWN0IGV4cGVjdGVkJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICEodHlwZW9mIGxlbmd0aCA9PT0gJ251bWJlcicpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ3RvQXJyYXk6IE9iamVjdCBuZWVkcyBhIGxlbmd0aCBwcm9wZXJ0eScpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAhKGxlbmd0aCA9PT0gMCB8fCBsZW5ndGggLSAxIGluIG9iaikgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAndG9BcnJheTogT2JqZWN0IHNob3VsZCBoYXZlIGtleXMgZm9yIGluZGljZXMnKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgLy8gT2xkIElFIGRvZXNuJ3QgZ2l2ZSBjb2xsZWN0aW9ucyBhY2Nlc3MgdG8gaGFzT3duUHJvcGVydHkuIEFzc3VtZSBpbnB1dHNcbiAgLy8gd2l0aG91dCBtZXRob2Qgd2lsbCB0aHJvdyBkdXJpbmcgdGhlIHNsaWNlIGNhbGwgYW5kIHNraXAgc3RyYWlnaHQgdG8gdGhlXG4gIC8vIGZhbGxiYWNrLlxuICBpZiAob2JqLmhhc093blByb3BlcnR5KSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChvYmopO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIElFIDwgOSBkb2VzIG5vdCBzdXBwb3J0IEFycmF5I3NsaWNlIG9uIGNvbGxlY3Rpb25zIG9iamVjdHNcbiAgICB9XG4gIH1cblxuICAvLyBGYWxsIGJhY2sgdG8gY29weWluZyBrZXkgYnkga2V5LiBUaGlzIGFzc3VtZXMgYWxsIGtleXMgaGF2ZSBhIHZhbHVlLFxuICAvLyBzbyB3aWxsIG5vdCBwcmVzZXJ2ZSBzcGFyc2VseSBwb3B1bGF0ZWQgaW5wdXRzLlxuICB2YXIgcmV0ID0gQXJyYXkobGVuZ3RoKTtcbiAgZm9yICh2YXIgaWkgPSAwOyBpaSA8IGxlbmd0aDsgaWkrKykge1xuICAgIHJldFtpaV0gPSBvYmpbaWldO1xuICB9XG4gIHJldHVybiByZXQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdG9BcnJheTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vZmJqcy9saWIvdG9BcnJheS5qc1xuLy8gbW9kdWxlIGlkID0gMTJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGludmFyaWFudFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBVc2UgaW52YXJpYW50KCkgdG8gYXNzZXJ0IHN0YXRlIHdoaWNoIHlvdXIgcHJvZ3JhbSBhc3N1bWVzIHRvIGJlIHRydWUuXG4gKlxuICogUHJvdmlkZSBzcHJpbnRmLXN0eWxlIGZvcm1hdCAob25seSAlcyBpcyBzdXBwb3J0ZWQpIGFuZCBhcmd1bWVudHNcbiAqIHRvIHByb3ZpZGUgaW5mb3JtYXRpb24gYWJvdXQgd2hhdCBicm9rZSBhbmQgd2hhdCB5b3Ugd2VyZVxuICogZXhwZWN0aW5nLlxuICpcbiAqIFRoZSBpbnZhcmlhbnQgbWVzc2FnZSB3aWxsIGJlIHN0cmlwcGVkIGluIHByb2R1Y3Rpb24sIGJ1dCB0aGUgaW52YXJpYW50XG4gKiB3aWxsIHJlbWFpbiB0byBlbnN1cmUgbG9naWMgZG9lcyBub3QgZGlmZmVyIGluIHByb2R1Y3Rpb24uXG4gKi9cblxuZnVuY3Rpb24gaW52YXJpYW50KGNvbmRpdGlvbiwgZm9ybWF0LCBhLCBiLCBjLCBkLCBlLCBmKSB7XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFyaWFudCByZXF1aXJlcyBhbiBlcnJvciBtZXNzYWdlIGFyZ3VtZW50Jyk7XG4gICAgfVxuICB9XG5cbiAgaWYgKCFjb25kaXRpb24pIHtcbiAgICB2YXIgZXJyb3I7XG4gICAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBlcnJvciA9IG5ldyBFcnJvcignTWluaWZpZWQgZXhjZXB0aW9uIG9jY3VycmVkOyB1c2UgdGhlIG5vbi1taW5pZmllZCBkZXYgZW52aXJvbm1lbnQgJyArICdmb3IgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZSBhbmQgYWRkaXRpb25hbCBoZWxwZnVsIHdhcm5pbmdzLicpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgYXJncyA9IFthLCBiLCBjLCBkLCBlLCBmXTtcbiAgICAgIHZhciBhcmdJbmRleCA9IDA7XG4gICAgICBlcnJvciA9IG5ldyBFcnJvcihmb3JtYXQucmVwbGFjZSgvJXMvZywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gYXJnc1thcmdJbmRleCsrXTtcbiAgICAgIH0pKTtcbiAgICAgIGVycm9yLm5hbWUgPSAnSW52YXJpYW50IFZpb2xhdGlvbic7XG4gICAgfVxuXG4gICAgZXJyb3IuZnJhbWVzVG9Qb3AgPSAxOyAvLyB3ZSBkb24ndCBjYXJlIGFib3V0IGludmFyaWFudCdzIG93biBmcmFtZVxuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaW52YXJpYW50O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9mYmpzL2xpYi9pbnZhcmlhbnQuanNcbi8vIG1vZHVsZSBpZCA9IDEzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBnZXRNYXJrdXBXcmFwXG4gKi9cblxuLyplc2xpbnQtZGlzYWJsZSBmYi13d3cvdW5zYWZlLWh0bWwgKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXhlY3V0aW9uRW52aXJvbm1lbnQgPSByZXF1aXJlKCcuL0V4ZWN1dGlvbkVudmlyb25tZW50Jyk7XG5cbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCcuL2ludmFyaWFudCcpO1xuXG4vKipcbiAqIER1bW15IGNvbnRhaW5lciB1c2VkIHRvIGRldGVjdCB3aGljaCB3cmFwcyBhcmUgbmVjZXNzYXJ5LlxuICovXG52YXIgZHVtbXlOb2RlID0gRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NID8gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykgOiBudWxsO1xuXG4vKipcbiAqIFNvbWUgYnJvd3NlcnMgY2Fubm90IHVzZSBgaW5uZXJIVE1MYCB0byByZW5kZXIgY2VydGFpbiBlbGVtZW50cyBzdGFuZGFsb25lLFxuICogc28gd2Ugd3JhcCB0aGVtLCByZW5kZXIgdGhlIHdyYXBwZWQgbm9kZXMsIHRoZW4gZXh0cmFjdCB0aGUgZGVzaXJlZCBub2RlLlxuICpcbiAqIEluIElFOCwgY2VydGFpbiBlbGVtZW50cyBjYW5ub3QgcmVuZGVyIGFsb25lLCBzbyB3cmFwIGFsbCBlbGVtZW50cyAoJyonKS5cbiAqL1xuXG52YXIgc2hvdWxkV3JhcCA9IHt9O1xuXG52YXIgc2VsZWN0V3JhcCA9IFsxLCAnPHNlbGVjdCBtdWx0aXBsZT1cInRydWVcIj4nLCAnPC9zZWxlY3Q+J107XG52YXIgdGFibGVXcmFwID0gWzEsICc8dGFibGU+JywgJzwvdGFibGU+J107XG52YXIgdHJXcmFwID0gWzMsICc8dGFibGU+PHRib2R5Pjx0cj4nLCAnPC90cj48L3Rib2R5PjwvdGFibGU+J107XG5cbnZhciBzdmdXcmFwID0gWzEsICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj4nLCAnPC9zdmc+J107XG5cbnZhciBtYXJrdXBXcmFwID0ge1xuICAnKic6IFsxLCAnPzxkaXY+JywgJzwvZGl2PiddLFxuXG4gICdhcmVhJzogWzEsICc8bWFwPicsICc8L21hcD4nXSxcbiAgJ2NvbCc6IFsyLCAnPHRhYmxlPjx0Ym9keT48L3Rib2R5Pjxjb2xncm91cD4nLCAnPC9jb2xncm91cD48L3RhYmxlPiddLFxuICAnbGVnZW5kJzogWzEsICc8ZmllbGRzZXQ+JywgJzwvZmllbGRzZXQ+J10sXG4gICdwYXJhbSc6IFsxLCAnPG9iamVjdD4nLCAnPC9vYmplY3Q+J10sXG4gICd0cic6IFsyLCAnPHRhYmxlPjx0Ym9keT4nLCAnPC90Ym9keT48L3RhYmxlPiddLFxuXG4gICdvcHRncm91cCc6IHNlbGVjdFdyYXAsXG4gICdvcHRpb24nOiBzZWxlY3RXcmFwLFxuXG4gICdjYXB0aW9uJzogdGFibGVXcmFwLFxuICAnY29sZ3JvdXAnOiB0YWJsZVdyYXAsXG4gICd0Ym9keSc6IHRhYmxlV3JhcCxcbiAgJ3Rmb290JzogdGFibGVXcmFwLFxuICAndGhlYWQnOiB0YWJsZVdyYXAsXG5cbiAgJ3RkJzogdHJXcmFwLFxuICAndGgnOiB0cldyYXBcbn07XG5cbi8vIEluaXRpYWxpemUgdGhlIFNWRyBlbGVtZW50cyBzaW5jZSB3ZSBrbm93IHRoZXknbGwgYWx3YXlzIG5lZWQgdG8gYmUgd3JhcHBlZFxuLy8gY29uc2lzdGVudGx5LiBJZiB0aGV5IGFyZSBjcmVhdGVkIGluc2lkZSBhIDxkaXY+IHRoZXkgd2lsbCBiZSBpbml0aWFsaXplZCBpblxuLy8gdGhlIHdyb25nIG5hbWVzcGFjZSAoYW5kIHdpbGwgbm90IGRpc3BsYXkpLlxudmFyIHN2Z0VsZW1lbnRzID0gWydjaXJjbGUnLCAnY2xpcFBhdGgnLCAnZGVmcycsICdlbGxpcHNlJywgJ2cnLCAnaW1hZ2UnLCAnbGluZScsICdsaW5lYXJHcmFkaWVudCcsICdtYXNrJywgJ3BhdGgnLCAncGF0dGVybicsICdwb2x5Z29uJywgJ3BvbHlsaW5lJywgJ3JhZGlhbEdyYWRpZW50JywgJ3JlY3QnLCAnc3RvcCcsICd0ZXh0JywgJ3RzcGFuJ107XG5zdmdFbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChub2RlTmFtZSkge1xuICBtYXJrdXBXcmFwW25vZGVOYW1lXSA9IHN2Z1dyYXA7XG4gIHNob3VsZFdyYXBbbm9kZU5hbWVdID0gdHJ1ZTtcbn0pO1xuXG4vKipcbiAqIEdldHMgdGhlIG1hcmt1cCB3cmFwIGNvbmZpZ3VyYXRpb24gZm9yIHRoZSBzdXBwbGllZCBgbm9kZU5hbWVgLlxuICpcbiAqIE5PVEU6IFRoaXMgbGF6aWx5IGRldGVjdHMgd2hpY2ggd3JhcHMgYXJlIG5lY2Vzc2FyeSBmb3IgdGhlIGN1cnJlbnQgYnJvd3Nlci5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbm9kZU5hbWUgTG93ZXJjYXNlIGBub2RlTmFtZWAuXG4gKiBAcmV0dXJuIHs/YXJyYXl9IE1hcmt1cCB3cmFwIGNvbmZpZ3VyYXRpb24sIGlmIGFwcGxpY2FibGUuXG4gKi9cbmZ1bmN0aW9uIGdldE1hcmt1cFdyYXAobm9kZU5hbWUpIHtcbiAgISEhZHVtbXlOb2RlID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ01hcmt1cCB3cmFwcGluZyBub2RlIG5vdCBpbml0aWFsaXplZCcpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgaWYgKCFtYXJrdXBXcmFwLmhhc093blByb3BlcnR5KG5vZGVOYW1lKSkge1xuICAgIG5vZGVOYW1lID0gJyonO1xuICB9XG4gIGlmICghc2hvdWxkV3JhcC5oYXNPd25Qcm9wZXJ0eShub2RlTmFtZSkpIHtcbiAgICBpZiAobm9kZU5hbWUgPT09ICcqJykge1xuICAgICAgZHVtbXlOb2RlLmlubmVySFRNTCA9ICc8bGluayAvPic7XG4gICAgfSBlbHNlIHtcbiAgICAgIGR1bW15Tm9kZS5pbm5lckhUTUwgPSAnPCcgKyBub2RlTmFtZSArICc+PC8nICsgbm9kZU5hbWUgKyAnPic7XG4gICAgfVxuICAgIHNob3VsZFdyYXBbbm9kZU5hbWVdID0gIWR1bW15Tm9kZS5maXJzdENoaWxkO1xuICB9XG4gIHJldHVybiBzaG91bGRXcmFwW25vZGVOYW1lXSA/IG1hcmt1cFdyYXBbbm9kZU5hbWVdIDogbnVsbDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRNYXJrdXBXcmFwO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9mYmpzL2xpYi9nZXRNYXJrdXBXcmFwLmpzXG4vLyBtb2R1bGUgaWQgPSAxNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgZW1wdHlGdW5jdGlvblxuICovXG5cblwidXNlIHN0cmljdFwiO1xuXG5mdW5jdGlvbiBtYWtlRW1wdHlGdW5jdGlvbihhcmcpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gYXJnO1xuICB9O1xufVxuXG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gYWNjZXB0cyBhbmQgZGlzY2FyZHMgaW5wdXRzOyBpdCBoYXMgbm8gc2lkZSBlZmZlY3RzLiBUaGlzIGlzXG4gKiBwcmltYXJpbHkgdXNlZnVsIGlkaW9tYXRpY2FsbHkgZm9yIG92ZXJyaWRhYmxlIGZ1bmN0aW9uIGVuZHBvaW50cyB3aGljaFxuICogYWx3YXlzIG5lZWQgdG8gYmUgY2FsbGFibGUsIHNpbmNlIEpTIGxhY2tzIGEgbnVsbC1jYWxsIGlkaW9tIGFsYSBDb2NvYS5cbiAqL1xuZnVuY3Rpb24gZW1wdHlGdW5jdGlvbigpIHt9XG5cbmVtcHR5RnVuY3Rpb24udGhhdFJldHVybnMgPSBtYWtlRW1wdHlGdW5jdGlvbjtcbmVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNGYWxzZSA9IG1ha2VFbXB0eUZ1bmN0aW9uKGZhbHNlKTtcbmVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNUcnVlID0gbWFrZUVtcHR5RnVuY3Rpb24odHJ1ZSk7XG5lbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zTnVsbCA9IG1ha2VFbXB0eUZ1bmN0aW9uKG51bGwpO1xuZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc1RoaXMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzO1xufTtcbmVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNBcmd1bWVudCA9IGZ1bmN0aW9uIChhcmcpIHtcbiAgcmV0dXJuIGFyZztcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZW1wdHlGdW5jdGlvbjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vZmJqcy9saWIvZW1wdHlGdW5jdGlvbi5qc1xuLy8gbW9kdWxlIGlkID0gMTVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIga2V5TWlycm9yID0gcmVxdWlyZSgnZmJqcy9saWIva2V5TWlycm9yJyk7XG5cbi8qKlxuICogV2hlbiBhIGNvbXBvbmVudCdzIGNoaWxkcmVuIGFyZSB1cGRhdGVkLCBhIHNlcmllcyBvZiB1cGRhdGUgY29uZmlndXJhdGlvblxuICogb2JqZWN0cyBhcmUgY3JlYXRlZCBpbiBvcmRlciB0byBiYXRjaCBhbmQgc2VyaWFsaXplIHRoZSByZXF1aXJlZCBjaGFuZ2VzLlxuICpcbiAqIEVudW1lcmF0ZXMgYWxsIHRoZSBwb3NzaWJsZSB0eXBlcyBvZiB1cGRhdGUgY29uZmlndXJhdGlvbnMuXG4gKlxuICogQGludGVybmFsXG4gKi9cbnZhciBSZWFjdE11bHRpQ2hpbGRVcGRhdGVUeXBlcyA9IGtleU1pcnJvcih7XG4gIElOU0VSVF9NQVJLVVA6IG51bGwsXG4gIE1PVkVfRVhJU1RJTkc6IG51bGwsXG4gIFJFTU9WRV9OT0RFOiBudWxsLFxuICBTRVRfTUFSS1VQOiBudWxsLFxuICBURVhUX0NPTlRFTlQ6IG51bGxcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMuanNcbi8vIG1vZHVsZSBpZCA9IDE2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBrZXlNaXJyb3JcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnLi9pbnZhcmlhbnQnKTtcblxuLyoqXG4gKiBDb25zdHJ1Y3RzIGFuIGVudW1lcmF0aW9uIHdpdGgga2V5cyBlcXVhbCB0byB0aGVpciB2YWx1ZS5cbiAqXG4gKiBGb3IgZXhhbXBsZTpcbiAqXG4gKiAgIHZhciBDT0xPUlMgPSBrZXlNaXJyb3Ioe2JsdWU6IG51bGwsIHJlZDogbnVsbH0pO1xuICogICB2YXIgbXlDb2xvciA9IENPTE9SUy5ibHVlO1xuICogICB2YXIgaXNDb2xvclZhbGlkID0gISFDT0xPUlNbbXlDb2xvcl07XG4gKlxuICogVGhlIGxhc3QgbGluZSBjb3VsZCBub3QgYmUgcGVyZm9ybWVkIGlmIHRoZSB2YWx1ZXMgb2YgdGhlIGdlbmVyYXRlZCBlbnVtIHdlcmVcbiAqIG5vdCBlcXVhbCB0byB0aGVpciBrZXlzLlxuICpcbiAqICAgSW5wdXQ6ICB7a2V5MTogdmFsMSwga2V5MjogdmFsMn1cbiAqICAgT3V0cHV0OiB7a2V5MToga2V5MSwga2V5Mjoga2V5Mn1cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gb2JqXG4gKiBAcmV0dXJuIHtvYmplY3R9XG4gKi9cbnZhciBrZXlNaXJyb3IgPSBmdW5jdGlvbiAob2JqKSB7XG4gIHZhciByZXQgPSB7fTtcbiAgdmFyIGtleTtcbiAgIShvYmogaW5zdGFuY2VvZiBPYmplY3QgJiYgIUFycmF5LmlzQXJyYXkob2JqKSkgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAna2V5TWlycm9yKC4uLik6IEFyZ3VtZW50IG11c3QgYmUgYW4gb2JqZWN0LicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgZm9yIChrZXkgaW4gb2JqKSB7XG4gICAgaWYgKCFvYmouaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIHJldFtrZXldID0ga2V5O1xuICB9XG4gIHJldHVybiByZXQ7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGtleU1pcnJvcjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vZmJqcy9saWIva2V5TWlycm9yLmpzXG4vLyBtb2R1bGUgaWQgPSAxN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RQZXJmXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBSZWFjdFBlcmYgaXMgYSBnZW5lcmFsIEFPUCBzeXN0ZW0gZGVzaWduZWQgdG8gbWVhc3VyZSBwZXJmb3JtYW5jZS4gVGhpc1xuICogbW9kdWxlIG9ubHkgaGFzIHRoZSBob29rczogc2VlIFJlYWN0RGVmYXVsdFBlcmYgZm9yIHRoZSBhbmFseXNpcyB0b29sLlxuICovXG52YXIgUmVhY3RQZXJmID0ge1xuICAvKipcbiAgICogQm9vbGVhbiB0byBlbmFibGUvZGlzYWJsZSBtZWFzdXJlbWVudC4gU2V0IHRvIGZhbHNlIGJ5IGRlZmF1bHQgdG8gcHJldmVudFxuICAgKiBhY2NpZGVudGFsIGxvZ2dpbmcgYW5kIHBlcmYgbG9zcy5cbiAgICovXG4gIGVuYWJsZU1lYXN1cmU6IGZhbHNlLFxuXG4gIC8qKlxuICAgKiBIb2xkcyBvbnRvIHRoZSBtZWFzdXJlIGZ1bmN0aW9uIGluIHVzZS4gQnkgZGVmYXVsdCwgZG9uJ3QgbWVhc3VyZVxuICAgKiBhbnl0aGluZywgYnV0IHdlJ2xsIG92ZXJyaWRlIHRoaXMgaWYgd2UgaW5qZWN0IGEgbWVhc3VyZSBmdW5jdGlvbi5cbiAgICovXG4gIHN0b3JlZE1lYXN1cmU6IF9ub01lYXN1cmUsXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvYmplY3RcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9iamVjdE5hbWVcbiAgICogQHBhcmFtIHtvYmplY3Q8c3RyaW5nPn0gbWV0aG9kTmFtZXNcbiAgICovXG4gIG1lYXN1cmVNZXRob2RzOiBmdW5jdGlvbiAob2JqZWN0LCBvYmplY3ROYW1lLCBtZXRob2ROYW1lcykge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gbWV0aG9kTmFtZXMpIHtcbiAgICAgICAgaWYgKCFtZXRob2ROYW1lcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgb2JqZWN0W2tleV0gPSBSZWFjdFBlcmYubWVhc3VyZShvYmplY3ROYW1lLCBtZXRob2ROYW1lc1trZXldLCBvYmplY3Rba2V5XSk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBVc2UgdGhpcyB0byB3cmFwIG1ldGhvZHMgeW91IHdhbnQgdG8gbWVhc3VyZS4gWmVybyBvdmVyaGVhZCBpbiBwcm9kdWN0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gb2JqTmFtZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gZm5OYW1lXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGZ1bmNcbiAgICogQHJldHVybiB7ZnVuY3Rpb259XG4gICAqL1xuICBtZWFzdXJlOiBmdW5jdGlvbiAob2JqTmFtZSwgZm5OYW1lLCBmdW5jKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHZhciBtZWFzdXJlZEZ1bmMgPSBudWxsO1xuICAgICAgdmFyIHdyYXBwZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChSZWFjdFBlcmYuZW5hYmxlTWVhc3VyZSkge1xuICAgICAgICAgIGlmICghbWVhc3VyZWRGdW5jKSB7XG4gICAgICAgICAgICBtZWFzdXJlZEZ1bmMgPSBSZWFjdFBlcmYuc3RvcmVkTWVhc3VyZShvYmpOYW1lLCBmbk5hbWUsIGZ1bmMpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbWVhc3VyZWRGdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH07XG4gICAgICB3cmFwcGVyLmRpc3BsYXlOYW1lID0gb2JqTmFtZSArICdfJyArIGZuTmFtZTtcbiAgICAgIHJldHVybiB3cmFwcGVyO1xuICAgIH1cbiAgICByZXR1cm4gZnVuYztcbiAgfSxcblxuICBpbmplY3Rpb246IHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBtZWFzdXJlXG4gICAgICovXG4gICAgaW5qZWN0TWVhc3VyZTogZnVuY3Rpb24gKG1lYXN1cmUpIHtcbiAgICAgIFJlYWN0UGVyZi5zdG9yZWRNZWFzdXJlID0gbWVhc3VyZTtcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogU2ltcGx5IHBhc3NlcyB0aHJvdWdoIHRoZSBtZWFzdXJlZCBmdW5jdGlvbiwgd2l0aG91dCBtZWFzdXJpbmcgaXQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG9iak5hbWVcbiAqIEBwYXJhbSB7c3RyaW5nfSBmbk5hbWVcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGZ1bmNcbiAqIEByZXR1cm4ge2Z1bmN0aW9ufVxuICovXG5mdW5jdGlvbiBfbm9NZWFzdXJlKG9iak5hbWUsIGZuTmFtZSwgZnVuYykge1xuICByZXR1cm4gZnVuYztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdFBlcmY7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0L2xpYi9SZWFjdFBlcmYuanNcbi8vIG1vZHVsZSBpZCA9IDE4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBzZXRJbm5lckhUTUxcbiAqL1xuXG4vKiBnbG9iYWxzIE1TQXBwICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEV4ZWN1dGlvbkVudmlyb25tZW50ID0gcmVxdWlyZSgnZmJqcy9saWIvRXhlY3V0aW9uRW52aXJvbm1lbnQnKTtcblxudmFyIFdISVRFU1BBQ0VfVEVTVCA9IC9eWyBcXHJcXG5cXHRcXGZdLztcbnZhciBOT05WSVNJQkxFX1RFU1QgPSAvPCghLS18bGlua3xub3NjcmlwdHxtZXRhfHNjcmlwdHxzdHlsZSlbIFxcclxcblxcdFxcZlxcLz5dLztcblxuLyoqXG4gKiBTZXQgdGhlIGlubmVySFRNTCBwcm9wZXJ0eSBvZiBhIG5vZGUsIGVuc3VyaW5nIHRoYXQgd2hpdGVzcGFjZSBpcyBwcmVzZXJ2ZWRcbiAqIGV2ZW4gaW4gSUU4LlxuICpcbiAqIEBwYXJhbSB7RE9NRWxlbWVudH0gbm9kZVxuICogQHBhcmFtIHtzdHJpbmd9IGh0bWxcbiAqIEBpbnRlcm5hbFxuICovXG52YXIgc2V0SW5uZXJIVE1MID0gZnVuY3Rpb24gKG5vZGUsIGh0bWwpIHtcbiAgbm9kZS5pbm5lckhUTUwgPSBodG1sO1xufTtcblxuLy8gV2luOCBhcHBzOiBBbGxvdyBhbGwgaHRtbCB0byBiZSBpbnNlcnRlZFxuaWYgKHR5cGVvZiBNU0FwcCAhPT0gJ3VuZGVmaW5lZCcgJiYgTVNBcHAuZXhlY1Vuc2FmZUxvY2FsRnVuY3Rpb24pIHtcbiAgc2V0SW5uZXJIVE1MID0gZnVuY3Rpb24gKG5vZGUsIGh0bWwpIHtcbiAgICBNU0FwcC5leGVjVW5zYWZlTG9jYWxGdW5jdGlvbihmdW5jdGlvbiAoKSB7XG4gICAgICBub2RlLmlubmVySFRNTCA9IGh0bWw7XG4gICAgfSk7XG4gIH07XG59XG5cbmlmIChFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00pIHtcbiAgLy8gSUU4OiBXaGVuIHVwZGF0aW5nIGEganVzdCBjcmVhdGVkIG5vZGUgd2l0aCBpbm5lckhUTUwgb25seSBsZWFkaW5nXG4gIC8vIHdoaXRlc3BhY2UgaXMgcmVtb3ZlZC4gV2hlbiB1cGRhdGluZyBhbiBleGlzdGluZyBub2RlIHdpdGggaW5uZXJIVE1MXG4gIC8vIHdoaXRlc3BhY2UgaW4gcm9vdCBUZXh0Tm9kZXMgaXMgYWxzbyBjb2xsYXBzZWQuXG4gIC8vIEBzZWUgcXVpcmtzbW9kZS5vcmcvYnVncmVwb3J0cy9hcmNoaXZlcy8yMDA0LzExL2lubmVyaHRtbF9hbmRfdC5odG1sXG5cbiAgLy8gRmVhdHVyZSBkZXRlY3Rpb247IG9ubHkgSUU4IGlzIGtub3duIHRvIGJlaGF2ZSBpbXByb3Blcmx5IGxpa2UgdGhpcy5cbiAgdmFyIHRlc3RFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIHRlc3RFbGVtZW50LmlubmVySFRNTCA9ICcgJztcbiAgaWYgKHRlc3RFbGVtZW50LmlubmVySFRNTCA9PT0gJycpIHtcbiAgICBzZXRJbm5lckhUTUwgPSBmdW5jdGlvbiAobm9kZSwgaHRtbCkge1xuICAgICAgLy8gTWFnaWMgdGhlb3J5OiBJRTggc3VwcG9zZWRseSBkaWZmZXJlbnRpYXRlcyBiZXR3ZWVuIGFkZGVkIGFuZCB1cGRhdGVkXG4gICAgICAvLyBub2RlcyB3aGVuIHByb2Nlc3NpbmcgaW5uZXJIVE1MLCBpbm5lckhUTUwgb24gdXBkYXRlZCBub2RlcyBzdWZmZXJzXG4gICAgICAvLyBmcm9tIHdvcnNlIHdoaXRlc3BhY2UgYmVoYXZpb3IuIFJlLWFkZGluZyBhIG5vZGUgbGlrZSB0aGlzIHRyaWdnZXJzXG4gICAgICAvLyB0aGUgaW5pdGlhbCBhbmQgbW9yZSBmYXZvcmFibGUgd2hpdGVzcGFjZSBiZWhhdmlvci5cbiAgICAgIC8vIFRPRE86IFdoYXQgdG8gZG8gb24gYSBkZXRhY2hlZCBub2RlP1xuICAgICAgaWYgKG5vZGUucGFyZW50Tm9kZSkge1xuICAgICAgICBub2RlLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG5vZGUsIG5vZGUpO1xuICAgICAgfVxuXG4gICAgICAvLyBXZSBhbHNvIGltcGxlbWVudCBhIHdvcmthcm91bmQgZm9yIG5vbi12aXNpYmxlIHRhZ3MgZGlzYXBwZWFyaW5nIGludG9cbiAgICAgIC8vIHRoaW4gYWlyIG9uIElFOCwgdGhpcyBvbmx5IGhhcHBlbnMgaWYgdGhlcmUgaXMgbm8gdmlzaWJsZSB0ZXh0XG4gICAgICAvLyBpbi1mcm9udCBvZiB0aGUgbm9uLXZpc2libGUgdGFncy4gUGlnZ3liYWNrIG9uIHRoZSB3aGl0ZXNwYWNlIGZpeFxuICAgICAgLy8gYW5kIHNpbXBseSBjaGVjayBpZiBhbnkgbm9uLXZpc2libGUgdGFncyBhcHBlYXIgaW4gdGhlIHNvdXJjZS5cbiAgICAgIGlmIChXSElURVNQQUNFX1RFU1QudGVzdChodG1sKSB8fCBodG1sWzBdID09PSAnPCcgJiYgTk9OVklTSUJMRV9URVNULnRlc3QoaHRtbCkpIHtcbiAgICAgICAgLy8gUmVjb3ZlciBsZWFkaW5nIHdoaXRlc3BhY2UgYnkgdGVtcG9yYXJpbHkgcHJlcGVuZGluZyBhbnkgY2hhcmFjdGVyLlxuICAgICAgICAvLyBcXHVGRUZGIGhhcyB0aGUgcG90ZW50aWFsIGFkdmFudGFnZSBvZiBiZWluZyB6ZXJvLXdpZHRoL2ludmlzaWJsZS5cbiAgICAgICAgLy8gVWdsaWZ5SlMgZHJvcHMgVStGRUZGIGNoYXJzIHdoZW4gcGFyc2luZywgc28gdXNlIFN0cmluZy5mcm9tQ2hhckNvZGVcbiAgICAgICAgLy8gaW4gaG9wZXMgdGhhdCB0aGlzIGlzIHByZXNlcnZlZCBldmVuIGlmIFwiXFx1RkVGRlwiIGlzIHRyYW5zZm9ybWVkIHRvXG4gICAgICAgIC8vIHRoZSBhY3R1YWwgVW5pY29kZSBjaGFyYWN0ZXIgKGJ5IEJhYmVsLCBmb3IgZXhhbXBsZSkuXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9taXNob28vVWdsaWZ5SlMyL2Jsb2IvdjIuNC4yMC9saWIvcGFyc2UuanMjTDIxNlxuICAgICAgICBub2RlLmlubmVySFRNTCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHhGRUZGKSArIGh0bWw7XG5cbiAgICAgICAgLy8gZGVsZXRlRGF0YSBsZWF2ZXMgYW4gZW1wdHkgYFRleHROb2RlYCB3aGljaCBvZmZzZXRzIHRoZSBpbmRleCBvZiBhbGxcbiAgICAgICAgLy8gY2hpbGRyZW4uIERlZmluaXRlbHkgd2FudCB0byBhdm9pZCB0aGlzLlxuICAgICAgICB2YXIgdGV4dE5vZGUgPSBub2RlLmZpcnN0Q2hpbGQ7XG4gICAgICAgIGlmICh0ZXh0Tm9kZS5kYXRhLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIG5vZGUucmVtb3ZlQ2hpbGQodGV4dE5vZGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRleHROb2RlLmRlbGV0ZURhdGEoMCwgMSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5vZGUuaW5uZXJIVE1MID0gaHRtbDtcbiAgICAgIH1cbiAgICB9O1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc2V0SW5uZXJIVE1MO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvc2V0SW5uZXJIVE1MLmpzXG4vLyBtb2R1bGUgaWQgPSAxOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgc2V0VGV4dENvbnRlbnRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHJlcXVpcmUoJ2ZianMvbGliL0V4ZWN1dGlvbkVudmlyb25tZW50Jyk7XG52YXIgZXNjYXBlVGV4dENvbnRlbnRGb3JCcm93c2VyID0gcmVxdWlyZSgnLi9lc2NhcGVUZXh0Q29udGVudEZvckJyb3dzZXInKTtcbnZhciBzZXRJbm5lckhUTUwgPSByZXF1aXJlKCcuL3NldElubmVySFRNTCcpO1xuXG4vKipcbiAqIFNldCB0aGUgdGV4dENvbnRlbnQgcHJvcGVydHkgb2YgYSBub2RlLCBlbnN1cmluZyB0aGF0IHdoaXRlc3BhY2UgaXMgcHJlc2VydmVkXG4gKiBldmVuIGluIElFOC4gaW5uZXJUZXh0IGlzIGEgcG9vciBzdWJzdGl0dXRlIGZvciB0ZXh0Q29udGVudCBhbmQsIGFtb25nIG1hbnlcbiAqIGlzc3VlcywgaW5zZXJ0cyA8YnI+IGluc3RlYWQgb2YgdGhlIGxpdGVyYWwgbmV3bGluZSBjaGFycy4gaW5uZXJIVE1MIGJlaGF2ZXNcbiAqIGFzIGl0IHNob3VsZC5cbiAqXG4gKiBAcGFyYW0ge0RPTUVsZW1lbnR9IG5vZGVcbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0XG4gKiBAaW50ZXJuYWxcbiAqL1xudmFyIHNldFRleHRDb250ZW50ID0gZnVuY3Rpb24gKG5vZGUsIHRleHQpIHtcbiAgbm9kZS50ZXh0Q29udGVudCA9IHRleHQ7XG59O1xuXG5pZiAoRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NKSB7XG4gIGlmICghKCd0ZXh0Q29udGVudCcgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSkge1xuICAgIHNldFRleHRDb250ZW50ID0gZnVuY3Rpb24gKG5vZGUsIHRleHQpIHtcbiAgICAgIHNldElubmVySFRNTChub2RlLCBlc2NhcGVUZXh0Q29udGVudEZvckJyb3dzZXIodGV4dCkpO1xuICAgIH07XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzZXRUZXh0Q29udGVudDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QvbGliL3NldFRleHRDb250ZW50LmpzXG4vLyBtb2R1bGUgaWQgPSAyMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgZXNjYXBlVGV4dENvbnRlbnRGb3JCcm93c2VyXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRVNDQVBFX0xPT0tVUCA9IHtcbiAgJyYnOiAnJmFtcDsnLFxuICAnPic6ICcmZ3Q7JyxcbiAgJzwnOiAnJmx0OycsXG4gICdcIic6ICcmcXVvdDsnLFxuICAnXFwnJzogJyYjeDI3Oydcbn07XG5cbnZhciBFU0NBUEVfUkVHRVggPSAvWyY+PFwiJ10vZztcblxuZnVuY3Rpb24gZXNjYXBlcihtYXRjaCkge1xuICByZXR1cm4gRVNDQVBFX0xPT0tVUFttYXRjaF07XG59XG5cbi8qKlxuICogRXNjYXBlcyB0ZXh0IHRvIHByZXZlbnQgc2NyaXB0aW5nIGF0dGFja3MuXG4gKlxuICogQHBhcmFtIHsqfSB0ZXh0IFRleHQgdmFsdWUgdG8gZXNjYXBlLlxuICogQHJldHVybiB7c3RyaW5nfSBBbiBlc2NhcGVkIHN0cmluZy5cbiAqL1xuZnVuY3Rpb24gZXNjYXBlVGV4dENvbnRlbnRGb3JCcm93c2VyKHRleHQpIHtcbiAgcmV0dXJuICgnJyArIHRleHQpLnJlcGxhY2UoRVNDQVBFX1JFR0VYLCBlc2NhcGVyKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBlc2NhcGVUZXh0Q29udGVudEZvckJyb3dzZXI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0L2xpYi9lc2NhcGVUZXh0Q29udGVudEZvckJyb3dzZXIuanNcbi8vIG1vZHVsZSBpZCA9IDIxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBET01Qcm9wZXJ0eU9wZXJhdGlvbnNcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRE9NUHJvcGVydHkgPSByZXF1aXJlKCcuL0RPTVByb3BlcnR5Jyk7XG52YXIgUmVhY3RQZXJmID0gcmVxdWlyZSgnLi9SZWFjdFBlcmYnKTtcblxudmFyIHF1b3RlQXR0cmlidXRlVmFsdWVGb3JCcm93c2VyID0gcmVxdWlyZSgnLi9xdW90ZUF0dHJpYnV0ZVZhbHVlRm9yQnJvd3NlcicpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbi8vIFNpbXBsaWZpZWQgc3Vic2V0XG52YXIgVkFMSURfQVRUUklCVVRFX05BTUVfUkVHRVggPSAvXlthLXpBLVpfXVtcXHdcXC5cXC1dKiQvO1xudmFyIGlsbGVnYWxBdHRyaWJ1dGVOYW1lQ2FjaGUgPSB7fTtcbnZhciB2YWxpZGF0ZWRBdHRyaWJ1dGVOYW1lQ2FjaGUgPSB7fTtcblxuZnVuY3Rpb24gaXNBdHRyaWJ1dGVOYW1lU2FmZShhdHRyaWJ1dGVOYW1lKSB7XG4gIGlmICh2YWxpZGF0ZWRBdHRyaWJ1dGVOYW1lQ2FjaGUuaGFzT3duUHJvcGVydHkoYXR0cmlidXRlTmFtZSkpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAoaWxsZWdhbEF0dHJpYnV0ZU5hbWVDYWNoZS5oYXNPd25Qcm9wZXJ0eShhdHRyaWJ1dGVOYW1lKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoVkFMSURfQVRUUklCVVRFX05BTUVfUkVHRVgudGVzdChhdHRyaWJ1dGVOYW1lKSkge1xuICAgIHZhbGlkYXRlZEF0dHJpYnV0ZU5hbWVDYWNoZVthdHRyaWJ1dGVOYW1lXSA9IHRydWU7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgaWxsZWdhbEF0dHJpYnV0ZU5hbWVDYWNoZVthdHRyaWJ1dGVOYW1lXSA9IHRydWU7XG4gIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnSW52YWxpZCBhdHRyaWJ1dGUgbmFtZTogYCVzYCcsIGF0dHJpYnV0ZU5hbWUpIDogdW5kZWZpbmVkO1xuICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIHNob3VsZElnbm9yZVZhbHVlKHByb3BlcnR5SW5mbywgdmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlID09IG51bGwgfHwgcHJvcGVydHlJbmZvLmhhc0Jvb2xlYW5WYWx1ZSAmJiAhdmFsdWUgfHwgcHJvcGVydHlJbmZvLmhhc051bWVyaWNWYWx1ZSAmJiBpc05hTih2YWx1ZSkgfHwgcHJvcGVydHlJbmZvLmhhc1Bvc2l0aXZlTnVtZXJpY1ZhbHVlICYmIHZhbHVlIDwgMSB8fCBwcm9wZXJ0eUluZm8uaGFzT3ZlcmxvYWRlZEJvb2xlYW5WYWx1ZSAmJiB2YWx1ZSA9PT0gZmFsc2U7XG59XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIHZhciByZWFjdFByb3BzID0ge1xuICAgIGNoaWxkcmVuOiB0cnVlLFxuICAgIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MOiB0cnVlLFxuICAgIGtleTogdHJ1ZSxcbiAgICByZWY6IHRydWVcbiAgfTtcbiAgdmFyIHdhcm5lZFByb3BlcnRpZXMgPSB7fTtcblxuICB2YXIgd2FyblVua25vd25Qcm9wZXJ0eSA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgaWYgKHJlYWN0UHJvcHMuaGFzT3duUHJvcGVydHkobmFtZSkgJiYgcmVhY3RQcm9wc1tuYW1lXSB8fCB3YXJuZWRQcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KG5hbWUpICYmIHdhcm5lZFByb3BlcnRpZXNbbmFtZV0pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB3YXJuZWRQcm9wZXJ0aWVzW25hbWVdID0gdHJ1ZTtcbiAgICB2YXIgbG93ZXJDYXNlZE5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAvLyBkYXRhLSogYXR0cmlidXRlcyBzaG91bGQgYmUgbG93ZXJjYXNlOyBzdWdnZXN0IHRoZSBsb3dlcmNhc2UgdmVyc2lvblxuICAgIHZhciBzdGFuZGFyZE5hbWUgPSBET01Qcm9wZXJ0eS5pc0N1c3RvbUF0dHJpYnV0ZShsb3dlckNhc2VkTmFtZSkgPyBsb3dlckNhc2VkTmFtZSA6IERPTVByb3BlcnR5LmdldFBvc3NpYmxlU3RhbmRhcmROYW1lLmhhc093blByb3BlcnR5KGxvd2VyQ2FzZWROYW1lKSA/IERPTVByb3BlcnR5LmdldFBvc3NpYmxlU3RhbmRhcmROYW1lW2xvd2VyQ2FzZWROYW1lXSA6IG51bGw7XG5cbiAgICAvLyBGb3Igbm93LCBvbmx5IHdhcm4gd2hlbiB3ZSBoYXZlIGEgc3VnZ2VzdGVkIGNvcnJlY3Rpb24uIFRoaXMgcHJldmVudHNcbiAgICAvLyBsb2dnaW5nIHRvbyBtdWNoIHdoZW4gdXNpbmcgdHJhbnNmZXJQcm9wc1RvLlxuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKHN0YW5kYXJkTmFtZSA9PSBudWxsLCAnVW5rbm93biBET00gcHJvcGVydHkgJXMuIERpZCB5b3UgbWVhbiAlcz8nLCBuYW1lLCBzdGFuZGFyZE5hbWUpIDogdW5kZWZpbmVkO1xuICB9O1xufVxuXG4vKipcbiAqIE9wZXJhdGlvbnMgZm9yIGRlYWxpbmcgd2l0aCBET00gcHJvcGVydGllcy5cbiAqL1xudmFyIERPTVByb3BlcnR5T3BlcmF0aW9ucyA9IHtcblxuICAvKipcbiAgICogQ3JlYXRlcyBtYXJrdXAgZm9yIHRoZSBJRCBwcm9wZXJ0eS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIFVuZXNjYXBlZCBJRC5cbiAgICogQHJldHVybiB7c3RyaW5nfSBNYXJrdXAgc3RyaW5nLlxuICAgKi9cbiAgY3JlYXRlTWFya3VwRm9ySUQ6IGZ1bmN0aW9uIChpZCkge1xuICAgIHJldHVybiBET01Qcm9wZXJ0eS5JRF9BVFRSSUJVVEVfTkFNRSArICc9JyArIHF1b3RlQXR0cmlidXRlVmFsdWVGb3JCcm93c2VyKGlkKTtcbiAgfSxcblxuICBzZXRBdHRyaWJ1dGVGb3JJRDogZnVuY3Rpb24gKG5vZGUsIGlkKSB7XG4gICAgbm9kZS5zZXRBdHRyaWJ1dGUoRE9NUHJvcGVydHkuSURfQVRUUklCVVRFX05BTUUsIGlkKTtcbiAgfSxcblxuICAvKipcbiAgICogQ3JlYXRlcyBtYXJrdXAgZm9yIGEgcHJvcGVydHkuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAgICogQHJldHVybiB7P3N0cmluZ30gTWFya3VwIHN0cmluZywgb3IgbnVsbCBpZiB0aGUgcHJvcGVydHkgd2FzIGludmFsaWQuXG4gICAqL1xuICBjcmVhdGVNYXJrdXBGb3JQcm9wZXJ0eTogZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XG4gICAgdmFyIHByb3BlcnR5SW5mbyA9IERPTVByb3BlcnR5LnByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkobmFtZSkgPyBET01Qcm9wZXJ0eS5wcm9wZXJ0aWVzW25hbWVdIDogbnVsbDtcbiAgICBpZiAocHJvcGVydHlJbmZvKSB7XG4gICAgICBpZiAoc2hvdWxkSWdub3JlVmFsdWUocHJvcGVydHlJbmZvLCB2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfVxuICAgICAgdmFyIGF0dHJpYnV0ZU5hbWUgPSBwcm9wZXJ0eUluZm8uYXR0cmlidXRlTmFtZTtcbiAgICAgIGlmIChwcm9wZXJ0eUluZm8uaGFzQm9vbGVhblZhbHVlIHx8IHByb3BlcnR5SW5mby5oYXNPdmVybG9hZGVkQm9vbGVhblZhbHVlICYmIHZhbHVlID09PSB0cnVlKSB7XG4gICAgICAgIHJldHVybiBhdHRyaWJ1dGVOYW1lICsgJz1cIlwiJztcbiAgICAgIH1cbiAgICAgIHJldHVybiBhdHRyaWJ1dGVOYW1lICsgJz0nICsgcXVvdGVBdHRyaWJ1dGVWYWx1ZUZvckJyb3dzZXIodmFsdWUpO1xuICAgIH0gZWxzZSBpZiAoRE9NUHJvcGVydHkuaXNDdXN0b21BdHRyaWJ1dGUobmFtZSkpIHtcbiAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH1cbiAgICAgIHJldHVybiBuYW1lICsgJz0nICsgcXVvdGVBdHRyaWJ1dGVWYWx1ZUZvckJyb3dzZXIodmFsdWUpO1xuICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgd2FyblVua25vd25Qcm9wZXJ0eShuYW1lKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgbWFya3VwIGZvciBhIGN1c3RvbSBwcm9wZXJ0eS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IE1hcmt1cCBzdHJpbmcsIG9yIGVtcHR5IHN0cmluZyBpZiB0aGUgcHJvcGVydHkgd2FzIGludmFsaWQuXG4gICAqL1xuICBjcmVhdGVNYXJrdXBGb3JDdXN0b21BdHRyaWJ1dGU6IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkge1xuICAgIGlmICghaXNBdHRyaWJ1dGVOYW1lU2FmZShuYW1lKSB8fCB2YWx1ZSA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuICAgIHJldHVybiBuYW1lICsgJz0nICsgcXVvdGVBdHRyaWJ1dGVWYWx1ZUZvckJyb3dzZXIodmFsdWUpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB2YWx1ZSBmb3IgYSBwcm9wZXJ0eSBvbiBhIG5vZGUuXG4gICAqXG4gICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gbm9kZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAqL1xuICBzZXRWYWx1ZUZvclByb3BlcnR5OiBmdW5jdGlvbiAobm9kZSwgbmFtZSwgdmFsdWUpIHtcbiAgICB2YXIgcHJvcGVydHlJbmZvID0gRE9NUHJvcGVydHkucHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSA/IERPTVByb3BlcnR5LnByb3BlcnRpZXNbbmFtZV0gOiBudWxsO1xuICAgIGlmIChwcm9wZXJ0eUluZm8pIHtcbiAgICAgIHZhciBtdXRhdGlvbk1ldGhvZCA9IHByb3BlcnR5SW5mby5tdXRhdGlvbk1ldGhvZDtcbiAgICAgIGlmIChtdXRhdGlvbk1ldGhvZCkge1xuICAgICAgICBtdXRhdGlvbk1ldGhvZChub2RlLCB2YWx1ZSk7XG4gICAgICB9IGVsc2UgaWYgKHNob3VsZElnbm9yZVZhbHVlKHByb3BlcnR5SW5mbywgdmFsdWUpKSB7XG4gICAgICAgIHRoaXMuZGVsZXRlVmFsdWVGb3JQcm9wZXJ0eShub2RlLCBuYW1lKTtcbiAgICAgIH0gZWxzZSBpZiAocHJvcGVydHlJbmZvLm11c3RVc2VBdHRyaWJ1dGUpIHtcbiAgICAgICAgdmFyIGF0dHJpYnV0ZU5hbWUgPSBwcm9wZXJ0eUluZm8uYXR0cmlidXRlTmFtZTtcbiAgICAgICAgdmFyIG5hbWVzcGFjZSA9IHByb3BlcnR5SW5mby5hdHRyaWJ1dGVOYW1lc3BhY2U7XG4gICAgICAgIC8vIGBzZXRBdHRyaWJ1dGVgIHdpdGggb2JqZWN0cyBiZWNvbWVzIG9ubHkgYFtvYmplY3RdYCBpbiBJRTgvOSxcbiAgICAgICAgLy8gKCcnICsgdmFsdWUpIG1ha2VzIGl0IG91dHB1dCB0aGUgY29ycmVjdCB0b1N0cmluZygpLXZhbHVlLlxuICAgICAgICBpZiAobmFtZXNwYWNlKSB7XG4gICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGVOUyhuYW1lc3BhY2UsIGF0dHJpYnV0ZU5hbWUsICcnICsgdmFsdWUpO1xuICAgICAgICB9IGVsc2UgaWYgKHByb3BlcnR5SW5mby5oYXNCb29sZWFuVmFsdWUgfHwgcHJvcGVydHlJbmZvLmhhc092ZXJsb2FkZWRCb29sZWFuVmFsdWUgJiYgdmFsdWUgPT09IHRydWUpIHtcbiAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lLCAnJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSwgJycgKyB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBwcm9wTmFtZSA9IHByb3BlcnR5SW5mby5wcm9wZXJ0eU5hbWU7XG4gICAgICAgIC8vIE11c3QgZXhwbGljaXRseSBjYXN0IHZhbHVlcyBmb3IgSEFTX1NJREVfRUZGRUNUUy1wcm9wZXJ0aWVzIHRvIHRoZVxuICAgICAgICAvLyBwcm9wZXJ0eSB0eXBlIGJlZm9yZSBjb21wYXJpbmc7IG9ubHkgYHZhbHVlYCBkb2VzIGFuZCBpcyBzdHJpbmcuXG4gICAgICAgIGlmICghcHJvcGVydHlJbmZvLmhhc1NpZGVFZmZlY3RzIHx8ICcnICsgbm9kZVtwcm9wTmFtZV0gIT09ICcnICsgdmFsdWUpIHtcbiAgICAgICAgICAvLyBDb250cmFyeSB0byBgc2V0QXR0cmlidXRlYCwgb2JqZWN0IHByb3BlcnRpZXMgYXJlIHByb3Blcmx5XG4gICAgICAgICAgLy8gYHRvU3RyaW5nYGVkIGJ5IElFOC85LlxuICAgICAgICAgIG5vZGVbcHJvcE5hbWVdID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKERPTVByb3BlcnR5LmlzQ3VzdG9tQXR0cmlidXRlKG5hbWUpKSB7XG4gICAgICBET01Qcm9wZXJ0eU9wZXJhdGlvbnMuc2V0VmFsdWVGb3JBdHRyaWJ1dGUobm9kZSwgbmFtZSwgdmFsdWUpO1xuICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgd2FyblVua25vd25Qcm9wZXJ0eShuYW1lKTtcbiAgICB9XG4gIH0sXG5cbiAgc2V0VmFsdWVGb3JBdHRyaWJ1dGU6IGZ1bmN0aW9uIChub2RlLCBuYW1lLCB2YWx1ZSkge1xuICAgIGlmICghaXNBdHRyaWJ1dGVOYW1lU2FmZShuYW1lKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5vZGUuc2V0QXR0cmlidXRlKG5hbWUsICcnICsgdmFsdWUpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogRGVsZXRlcyB0aGUgdmFsdWUgZm9yIGEgcHJvcGVydHkgb24gYSBub2RlLlxuICAgKlxuICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IG5vZGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICovXG4gIGRlbGV0ZVZhbHVlRm9yUHJvcGVydHk6IGZ1bmN0aW9uIChub2RlLCBuYW1lKSB7XG4gICAgdmFyIHByb3BlcnR5SW5mbyA9IERPTVByb3BlcnR5LnByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkobmFtZSkgPyBET01Qcm9wZXJ0eS5wcm9wZXJ0aWVzW25hbWVdIDogbnVsbDtcbiAgICBpZiAocHJvcGVydHlJbmZvKSB7XG4gICAgICB2YXIgbXV0YXRpb25NZXRob2QgPSBwcm9wZXJ0eUluZm8ubXV0YXRpb25NZXRob2Q7XG4gICAgICBpZiAobXV0YXRpb25NZXRob2QpIHtcbiAgICAgICAgbXV0YXRpb25NZXRob2Qobm9kZSwgdW5kZWZpbmVkKTtcbiAgICAgIH0gZWxzZSBpZiAocHJvcGVydHlJbmZvLm11c3RVc2VBdHRyaWJ1dGUpIHtcbiAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUocHJvcGVydHlJbmZvLmF0dHJpYnV0ZU5hbWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHByb3BOYW1lID0gcHJvcGVydHlJbmZvLnByb3BlcnR5TmFtZTtcbiAgICAgICAgdmFyIGRlZmF1bHRWYWx1ZSA9IERPTVByb3BlcnR5LmdldERlZmF1bHRWYWx1ZUZvclByb3BlcnR5KG5vZGUubm9kZU5hbWUsIHByb3BOYW1lKTtcbiAgICAgICAgaWYgKCFwcm9wZXJ0eUluZm8uaGFzU2lkZUVmZmVjdHMgfHwgJycgKyBub2RlW3Byb3BOYW1lXSAhPT0gZGVmYXVsdFZhbHVlKSB7XG4gICAgICAgICAgbm9kZVtwcm9wTmFtZV0gPSBkZWZhdWx0VmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKERPTVByb3BlcnR5LmlzQ3VzdG9tQXR0cmlidXRlKG5hbWUpKSB7XG4gICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcbiAgICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHdhcm5Vbmtub3duUHJvcGVydHkobmFtZSk7XG4gICAgfVxuICB9XG5cbn07XG5cblJlYWN0UGVyZi5tZWFzdXJlTWV0aG9kcyhET01Qcm9wZXJ0eU9wZXJhdGlvbnMsICdET01Qcm9wZXJ0eU9wZXJhdGlvbnMnLCB7XG4gIHNldFZhbHVlRm9yUHJvcGVydHk6ICdzZXRWYWx1ZUZvclByb3BlcnR5JyxcbiAgc2V0VmFsdWVGb3JBdHRyaWJ1dGU6ICdzZXRWYWx1ZUZvckF0dHJpYnV0ZScsXG4gIGRlbGV0ZVZhbHVlRm9yUHJvcGVydHk6ICdkZWxldGVWYWx1ZUZvclByb3BlcnR5J1xufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gRE9NUHJvcGVydHlPcGVyYXRpb25zO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvRE9NUHJvcGVydHlPcGVyYXRpb25zLmpzXG4vLyBtb2R1bGUgaWQgPSAyMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRE9NUHJvcGVydHlcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbmZ1bmN0aW9uIGNoZWNrTWFzayh2YWx1ZSwgYml0bWFzaykge1xuICByZXR1cm4gKHZhbHVlICYgYml0bWFzaykgPT09IGJpdG1hc2s7XG59XG5cbnZhciBET01Qcm9wZXJ0eUluamVjdGlvbiA9IHtcbiAgLyoqXG4gICAqIE1hcHBpbmcgZnJvbSBub3JtYWxpemVkLCBjYW1lbGNhc2VkIHByb3BlcnR5IG5hbWVzIHRvIGEgY29uZmlndXJhdGlvbiB0aGF0XG4gICAqIHNwZWNpZmllcyBob3cgdGhlIGFzc29jaWF0ZWQgRE9NIHByb3BlcnR5IHNob3VsZCBiZSBhY2Nlc3NlZCBvciByZW5kZXJlZC5cbiAgICovXG4gIE1VU1RfVVNFX0FUVFJJQlVURTogMHgxLFxuICBNVVNUX1VTRV9QUk9QRVJUWTogMHgyLFxuICBIQVNfU0lERV9FRkZFQ1RTOiAweDQsXG4gIEhBU19CT09MRUFOX1ZBTFVFOiAweDgsXG4gIEhBU19OVU1FUklDX1ZBTFVFOiAweDEwLFxuICBIQVNfUE9TSVRJVkVfTlVNRVJJQ19WQUxVRTogMHgyMCB8IDB4MTAsXG4gIEhBU19PVkVSTE9BREVEX0JPT0xFQU5fVkFMVUU6IDB4NDAsXG5cbiAgLyoqXG4gICAqIEluamVjdCBzb21lIHNwZWNpYWxpemVkIGtub3dsZWRnZSBhYm91dCB0aGUgRE9NLiBUaGlzIHRha2VzIGEgY29uZmlnIG9iamVjdFxuICAgKiB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAgICpcbiAgICogaXNDdXN0b21BdHRyaWJ1dGU6IGZ1bmN0aW9uIHRoYXQgZ2l2ZW4gYW4gYXR0cmlidXRlIG5hbWUgd2lsbCByZXR1cm4gdHJ1ZVxuICAgKiBpZiBpdCBjYW4gYmUgaW5zZXJ0ZWQgaW50byB0aGUgRE9NIHZlcmJhdGltLiBVc2VmdWwgZm9yIGRhdGEtKiBvciBhcmlhLSpcbiAgICogYXR0cmlidXRlcyB3aGVyZSBpdCdzIGltcG9zc2libGUgdG8gZW51bWVyYXRlIGFsbCBvZiB0aGUgcG9zc2libGVcbiAgICogYXR0cmlidXRlIG5hbWVzLFxuICAgKlxuICAgKiBQcm9wZXJ0aWVzOiBvYmplY3QgbWFwcGluZyBET00gcHJvcGVydHkgbmFtZSB0byBvbmUgb2YgdGhlXG4gICAqIERPTVByb3BlcnR5SW5qZWN0aW9uIGNvbnN0YW50cyBvciBudWxsLiBJZiB5b3VyIGF0dHJpYnV0ZSBpc24ndCBpbiBoZXJlLFxuICAgKiBpdCB3b24ndCBnZXQgd3JpdHRlbiB0byB0aGUgRE9NLlxuICAgKlxuICAgKiBET01BdHRyaWJ1dGVOYW1lczogb2JqZWN0IG1hcHBpbmcgUmVhY3QgYXR0cmlidXRlIG5hbWUgdG8gdGhlIERPTVxuICAgKiBhdHRyaWJ1dGUgbmFtZS4gQXR0cmlidXRlIG5hbWVzIG5vdCBzcGVjaWZpZWQgdXNlIHRoZSAqKmxvd2VyY2FzZSoqXG4gICAqIG5vcm1hbGl6ZWQgbmFtZS5cbiAgICpcbiAgICogRE9NQXR0cmlidXRlTmFtZXNwYWNlczogb2JqZWN0IG1hcHBpbmcgUmVhY3QgYXR0cmlidXRlIG5hbWUgdG8gdGhlIERPTVxuICAgKiBhdHRyaWJ1dGUgbmFtZXNwYWNlIFVSTC4gKEF0dHJpYnV0ZSBuYW1lcyBub3Qgc3BlY2lmaWVkIHVzZSBubyBuYW1lc3BhY2UuKVxuICAgKlxuICAgKiBET01Qcm9wZXJ0eU5hbWVzOiBzaW1pbGFyIHRvIERPTUF0dHJpYnV0ZU5hbWVzIGJ1dCBmb3IgRE9NIHByb3BlcnRpZXMuXG4gICAqIFByb3BlcnR5IG5hbWVzIG5vdCBzcGVjaWZpZWQgdXNlIHRoZSBub3JtYWxpemVkIG5hbWUuXG4gICAqXG4gICAqIERPTU11dGF0aW9uTWV0aG9kczogUHJvcGVydGllcyB0aGF0IHJlcXVpcmUgc3BlY2lhbCBtdXRhdGlvbiBtZXRob2RzLiBJZlxuICAgKiBgdmFsdWVgIGlzIHVuZGVmaW5lZCwgdGhlIG11dGF0aW9uIG1ldGhvZCBzaG91bGQgdW5zZXQgdGhlIHByb3BlcnR5LlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gZG9tUHJvcGVydHlDb25maWcgdGhlIGNvbmZpZyBhcyBkZXNjcmliZWQgYWJvdmUuXG4gICAqL1xuICBpbmplY3RET01Qcm9wZXJ0eUNvbmZpZzogZnVuY3Rpb24gKGRvbVByb3BlcnR5Q29uZmlnKSB7XG4gICAgdmFyIEluamVjdGlvbiA9IERPTVByb3BlcnR5SW5qZWN0aW9uO1xuICAgIHZhciBQcm9wZXJ0aWVzID0gZG9tUHJvcGVydHlDb25maWcuUHJvcGVydGllcyB8fCB7fTtcbiAgICB2YXIgRE9NQXR0cmlidXRlTmFtZXNwYWNlcyA9IGRvbVByb3BlcnR5Q29uZmlnLkRPTUF0dHJpYnV0ZU5hbWVzcGFjZXMgfHwge307XG4gICAgdmFyIERPTUF0dHJpYnV0ZU5hbWVzID0gZG9tUHJvcGVydHlDb25maWcuRE9NQXR0cmlidXRlTmFtZXMgfHwge307XG4gICAgdmFyIERPTVByb3BlcnR5TmFtZXMgPSBkb21Qcm9wZXJ0eUNvbmZpZy5ET01Qcm9wZXJ0eU5hbWVzIHx8IHt9O1xuICAgIHZhciBET01NdXRhdGlvbk1ldGhvZHMgPSBkb21Qcm9wZXJ0eUNvbmZpZy5ET01NdXRhdGlvbk1ldGhvZHMgfHwge307XG5cbiAgICBpZiAoZG9tUHJvcGVydHlDb25maWcuaXNDdXN0b21BdHRyaWJ1dGUpIHtcbiAgICAgIERPTVByb3BlcnR5Ll9pc0N1c3RvbUF0dHJpYnV0ZUZ1bmN0aW9ucy5wdXNoKGRvbVByb3BlcnR5Q29uZmlnLmlzQ3VzdG9tQXR0cmlidXRlKTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBwcm9wTmFtZSBpbiBQcm9wZXJ0aWVzKSB7XG4gICAgICAhIURPTVByb3BlcnR5LnByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2luamVjdERPTVByb3BlcnR5Q29uZmlnKC4uLik6IFlvdVxcJ3JlIHRyeWluZyB0byBpbmplY3QgRE9NIHByb3BlcnR5ICcgKyAnXFwnJXNcXCcgd2hpY2ggaGFzIGFscmVhZHkgYmVlbiBpbmplY3RlZC4gWW91IG1heSBiZSBhY2NpZGVudGFsbHkgJyArICdpbmplY3RpbmcgdGhlIHNhbWUgRE9NIHByb3BlcnR5IGNvbmZpZyB0d2ljZSwgb3IgeW91IG1heSBiZSAnICsgJ2luamVjdGluZyB0d28gY29uZmlncyB0aGF0IGhhdmUgY29uZmxpY3RpbmcgcHJvcGVydHkgbmFtZXMuJywgcHJvcE5hbWUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgICAgdmFyIGxvd2VyQ2FzZWQgPSBwcm9wTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgdmFyIHByb3BDb25maWcgPSBQcm9wZXJ0aWVzW3Byb3BOYW1lXTtcblxuICAgICAgdmFyIHByb3BlcnR5SW5mbyA9IHtcbiAgICAgICAgYXR0cmlidXRlTmFtZTogbG93ZXJDYXNlZCxcbiAgICAgICAgYXR0cmlidXRlTmFtZXNwYWNlOiBudWxsLFxuICAgICAgICBwcm9wZXJ0eU5hbWU6IHByb3BOYW1lLFxuICAgICAgICBtdXRhdGlvbk1ldGhvZDogbnVsbCxcblxuICAgICAgICBtdXN0VXNlQXR0cmlidXRlOiBjaGVja01hc2socHJvcENvbmZpZywgSW5qZWN0aW9uLk1VU1RfVVNFX0FUVFJJQlVURSksXG4gICAgICAgIG11c3RVc2VQcm9wZXJ0eTogY2hlY2tNYXNrKHByb3BDb25maWcsIEluamVjdGlvbi5NVVNUX1VTRV9QUk9QRVJUWSksXG4gICAgICAgIGhhc1NpZGVFZmZlY3RzOiBjaGVja01hc2socHJvcENvbmZpZywgSW5qZWN0aW9uLkhBU19TSURFX0VGRkVDVFMpLFxuICAgICAgICBoYXNCb29sZWFuVmFsdWU6IGNoZWNrTWFzayhwcm9wQ29uZmlnLCBJbmplY3Rpb24uSEFTX0JPT0xFQU5fVkFMVUUpLFxuICAgICAgICBoYXNOdW1lcmljVmFsdWU6IGNoZWNrTWFzayhwcm9wQ29uZmlnLCBJbmplY3Rpb24uSEFTX05VTUVSSUNfVkFMVUUpLFxuICAgICAgICBoYXNQb3NpdGl2ZU51bWVyaWNWYWx1ZTogY2hlY2tNYXNrKHByb3BDb25maWcsIEluamVjdGlvbi5IQVNfUE9TSVRJVkVfTlVNRVJJQ19WQUxVRSksXG4gICAgICAgIGhhc092ZXJsb2FkZWRCb29sZWFuVmFsdWU6IGNoZWNrTWFzayhwcm9wQ29uZmlnLCBJbmplY3Rpb24uSEFTX09WRVJMT0FERURfQk9PTEVBTl9WQUxVRSlcbiAgICAgIH07XG5cbiAgICAgICEoIXByb3BlcnR5SW5mby5tdXN0VXNlQXR0cmlidXRlIHx8ICFwcm9wZXJ0eUluZm8ubXVzdFVzZVByb3BlcnR5KSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdET01Qcm9wZXJ0eTogQ2Fubm90IHJlcXVpcmUgdXNpbmcgYm90aCBhdHRyaWJ1dGUgYW5kIHByb3BlcnR5OiAlcycsIHByb3BOYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgICAhKHByb3BlcnR5SW5mby5tdXN0VXNlUHJvcGVydHkgfHwgIXByb3BlcnR5SW5mby5oYXNTaWRlRWZmZWN0cykgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRE9NUHJvcGVydHk6IFByb3BlcnRpZXMgdGhhdCBoYXZlIHNpZGUgZWZmZWN0cyBtdXN0IHVzZSBwcm9wZXJ0eTogJXMnLCBwcm9wTmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgICAgIShwcm9wZXJ0eUluZm8uaGFzQm9vbGVhblZhbHVlICsgcHJvcGVydHlJbmZvLmhhc051bWVyaWNWYWx1ZSArIHByb3BlcnR5SW5mby5oYXNPdmVybG9hZGVkQm9vbGVhblZhbHVlIDw9IDEpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0RPTVByb3BlcnR5OiBWYWx1ZSBjYW4gYmUgb25lIG9mIGJvb2xlYW4sIG92ZXJsb2FkZWQgYm9vbGVhbiwgb3IgJyArICdudW1lcmljIHZhbHVlLCBidXQgbm90IGEgY29tYmluYXRpb246ICVzJywgcHJvcE5hbWUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgRE9NUHJvcGVydHkuZ2V0UG9zc2libGVTdGFuZGFyZE5hbWVbbG93ZXJDYXNlZF0gPSBwcm9wTmFtZTtcbiAgICAgIH1cblxuICAgICAgaWYgKERPTUF0dHJpYnV0ZU5hbWVzLmhhc093blByb3BlcnR5KHByb3BOYW1lKSkge1xuICAgICAgICB2YXIgYXR0cmlidXRlTmFtZSA9IERPTUF0dHJpYnV0ZU5hbWVzW3Byb3BOYW1lXTtcbiAgICAgICAgcHJvcGVydHlJbmZvLmF0dHJpYnV0ZU5hbWUgPSBhdHRyaWJ1dGVOYW1lO1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgIERPTVByb3BlcnR5LmdldFBvc3NpYmxlU3RhbmRhcmROYW1lW2F0dHJpYnV0ZU5hbWVdID0gcHJvcE5hbWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKERPTUF0dHJpYnV0ZU5hbWVzcGFjZXMuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpKSB7XG4gICAgICAgIHByb3BlcnR5SW5mby5hdHRyaWJ1dGVOYW1lc3BhY2UgPSBET01BdHRyaWJ1dGVOYW1lc3BhY2VzW3Byb3BOYW1lXTtcbiAgICAgIH1cblxuICAgICAgaWYgKERPTVByb3BlcnR5TmFtZXMuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpKSB7XG4gICAgICAgIHByb3BlcnR5SW5mby5wcm9wZXJ0eU5hbWUgPSBET01Qcm9wZXJ0eU5hbWVzW3Byb3BOYW1lXTtcbiAgICAgIH1cblxuICAgICAgaWYgKERPTU11dGF0aW9uTWV0aG9kcy5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkpIHtcbiAgICAgICAgcHJvcGVydHlJbmZvLm11dGF0aW9uTWV0aG9kID0gRE9NTXV0YXRpb25NZXRob2RzW3Byb3BOYW1lXTtcbiAgICAgIH1cblxuICAgICAgRE9NUHJvcGVydHkucHJvcGVydGllc1twcm9wTmFtZV0gPSBwcm9wZXJ0eUluZm87XG4gICAgfVxuICB9XG59O1xudmFyIGRlZmF1bHRWYWx1ZUNhY2hlID0ge307XG5cbi8qKlxuICogRE9NUHJvcGVydHkgZXhwb3J0cyBsb29rdXAgb2JqZWN0cyB0aGF0IGNhbiBiZSB1c2VkIGxpa2UgZnVuY3Rpb25zOlxuICpcbiAqICAgPiBET01Qcm9wZXJ0eS5pc1ZhbGlkWydpZCddXG4gKiAgIHRydWVcbiAqICAgPiBET01Qcm9wZXJ0eS5pc1ZhbGlkWydmb29iYXInXVxuICogICB1bmRlZmluZWRcbiAqXG4gKiBBbHRob3VnaCB0aGlzIG1heSBiZSBjb25mdXNpbmcsIGl0IHBlcmZvcm1zIGJldHRlciBpbiBnZW5lcmFsLlxuICpcbiAqIEBzZWUgaHR0cDovL2pzcGVyZi5jb20va2V5LWV4aXN0c1xuICogQHNlZSBodHRwOi8vanNwZXJmLmNvbS9rZXktbWlzc2luZ1xuICovXG52YXIgRE9NUHJvcGVydHkgPSB7XG5cbiAgSURfQVRUUklCVVRFX05BTUU6ICdkYXRhLXJlYWN0aWQnLFxuXG4gIC8qKlxuICAgKiBNYXAgZnJvbSBwcm9wZXJ0eSBcInN0YW5kYXJkIG5hbWVcIiB0byBhbiBvYmplY3Qgd2l0aCBpbmZvIGFib3V0IGhvdyB0byBzZXRcbiAgICogdGhlIHByb3BlcnR5IGluIHRoZSBET00uIEVhY2ggb2JqZWN0IGNvbnRhaW5zOlxuICAgKlxuICAgKiBhdHRyaWJ1dGVOYW1lOlxuICAgKiAgIFVzZWQgd2hlbiByZW5kZXJpbmcgbWFya3VwIG9yIHdpdGggYCpBdHRyaWJ1dGUoKWAuXG4gICAqIGF0dHJpYnV0ZU5hbWVzcGFjZVxuICAgKiBwcm9wZXJ0eU5hbWU6XG4gICAqICAgVXNlZCBvbiBET00gbm9kZSBpbnN0YW5jZXMuIChUaGlzIGluY2x1ZGVzIHByb3BlcnRpZXMgdGhhdCBtdXRhdGUgZHVlIHRvXG4gICAqICAgZXh0ZXJuYWwgZmFjdG9ycy4pXG4gICAqIG11dGF0aW9uTWV0aG9kOlxuICAgKiAgIElmIG5vbi1udWxsLCB1c2VkIGluc3RlYWQgb2YgdGhlIHByb3BlcnR5IG9yIGBzZXRBdHRyaWJ1dGUoKWAgYWZ0ZXJcbiAgICogICBpbml0aWFsIHJlbmRlci5cbiAgICogbXVzdFVzZUF0dHJpYnV0ZTpcbiAgICogICBXaGV0aGVyIHRoZSBwcm9wZXJ0eSBtdXN0IGJlIGFjY2Vzc2VkIGFuZCBtdXRhdGVkIHVzaW5nIGAqQXR0cmlidXRlKClgLlxuICAgKiAgIChUaGlzIGluY2x1ZGVzIGFueXRoaW5nIHRoYXQgZmFpbHMgYDxwcm9wTmFtZT4gaW4gPGVsZW1lbnQ+YC4pXG4gICAqIG11c3RVc2VQcm9wZXJ0eTpcbiAgICogICBXaGV0aGVyIHRoZSBwcm9wZXJ0eSBtdXN0IGJlIGFjY2Vzc2VkIGFuZCBtdXRhdGVkIGFzIGFuIG9iamVjdCBwcm9wZXJ0eS5cbiAgICogaGFzU2lkZUVmZmVjdHM6XG4gICAqICAgV2hldGhlciBvciBub3Qgc2V0dGluZyBhIHZhbHVlIGNhdXNlcyBzaWRlIGVmZmVjdHMgc3VjaCBhcyB0cmlnZ2VyaW5nXG4gICAqICAgcmVzb3VyY2VzIHRvIGJlIGxvYWRlZCBvciB0ZXh0IHNlbGVjdGlvbiBjaGFuZ2VzLiBJZiB0cnVlLCB3ZSByZWFkIGZyb21cbiAgICogICB0aGUgRE9NIGJlZm9yZSB1cGRhdGluZyB0byBlbnN1cmUgdGhhdCB0aGUgdmFsdWUgaXMgb25seSBzZXQgaWYgaXQgaGFzXG4gICAqICAgY2hhbmdlZC5cbiAgICogaGFzQm9vbGVhblZhbHVlOlxuICAgKiAgIFdoZXRoZXIgdGhlIHByb3BlcnR5IHNob3VsZCBiZSByZW1vdmVkIHdoZW4gc2V0IHRvIGEgZmFsc2V5IHZhbHVlLlxuICAgKiBoYXNOdW1lcmljVmFsdWU6XG4gICAqICAgV2hldGhlciB0aGUgcHJvcGVydHkgbXVzdCBiZSBudW1lcmljIG9yIHBhcnNlIGFzIGEgbnVtZXJpYyBhbmQgc2hvdWxkIGJlXG4gICAqICAgcmVtb3ZlZCB3aGVuIHNldCB0byBhIGZhbHNleSB2YWx1ZS5cbiAgICogaGFzUG9zaXRpdmVOdW1lcmljVmFsdWU6XG4gICAqICAgV2hldGhlciB0aGUgcHJvcGVydHkgbXVzdCBiZSBwb3NpdGl2ZSBudW1lcmljIG9yIHBhcnNlIGFzIGEgcG9zaXRpdmVcbiAgICogICBudW1lcmljIGFuZCBzaG91bGQgYmUgcmVtb3ZlZCB3aGVuIHNldCB0byBhIGZhbHNleSB2YWx1ZS5cbiAgICogaGFzT3ZlcmxvYWRlZEJvb2xlYW5WYWx1ZTpcbiAgICogICBXaGV0aGVyIHRoZSBwcm9wZXJ0eSBjYW4gYmUgdXNlZCBhcyBhIGZsYWcgYXMgd2VsbCBhcyB3aXRoIGEgdmFsdWUuXG4gICAqICAgUmVtb3ZlZCB3aGVuIHN0cmljdGx5IGVxdWFsIHRvIGZhbHNlOyBwcmVzZW50IHdpdGhvdXQgYSB2YWx1ZSB3aGVuXG4gICAqICAgc3RyaWN0bHkgZXF1YWwgdG8gdHJ1ZTsgcHJlc2VudCB3aXRoIGEgdmFsdWUgb3RoZXJ3aXNlLlxuICAgKi9cbiAgcHJvcGVydGllczoge30sXG5cbiAgLyoqXG4gICAqIE1hcHBpbmcgZnJvbSBsb3dlcmNhc2UgcHJvcGVydHkgbmFtZXMgdG8gdGhlIHByb3Blcmx5IGNhc2VkIHZlcnNpb24sIHVzZWRcbiAgICogdG8gd2FybiBpbiB0aGUgY2FzZSBvZiBtaXNzaW5nIHByb3BlcnRpZXMuIEF2YWlsYWJsZSBvbmx5IGluIF9fREVWX18uXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqL1xuICBnZXRQb3NzaWJsZVN0YW5kYXJkTmFtZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHt9IDogbnVsbCxcblxuICAvKipcbiAgICogQWxsIG9mIHRoZSBpc0N1c3RvbUF0dHJpYnV0ZSgpIGZ1bmN0aW9ucyB0aGF0IGhhdmUgYmVlbiBpbmplY3RlZC5cbiAgICovXG4gIF9pc0N1c3RvbUF0dHJpYnV0ZUZ1bmN0aW9uczogW10sXG5cbiAgLyoqXG4gICAqIENoZWNrcyB3aGV0aGVyIGEgcHJvcGVydHkgbmFtZSBpcyBhIGN1c3RvbSBhdHRyaWJ1dGUuXG4gICAqIEBtZXRob2RcbiAgICovXG4gIGlzQ3VzdG9tQXR0cmlidXRlOiBmdW5jdGlvbiAoYXR0cmlidXRlTmFtZSkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgRE9NUHJvcGVydHkuX2lzQ3VzdG9tQXR0cmlidXRlRnVuY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgaXNDdXN0b21BdHRyaWJ1dGVGbiA9IERPTVByb3BlcnR5Ll9pc0N1c3RvbUF0dHJpYnV0ZUZ1bmN0aW9uc1tpXTtcbiAgICAgIGlmIChpc0N1c3RvbUF0dHJpYnV0ZUZuKGF0dHJpYnV0ZU5hbWUpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGRlZmF1bHQgcHJvcGVydHkgdmFsdWUgZm9yIGEgRE9NIHByb3BlcnR5IChpLmUuLCBub3QgYW5cbiAgICogYXR0cmlidXRlKS4gTW9zdCBkZWZhdWx0IHZhbHVlcyBhcmUgJycgb3IgZmFsc2UsIGJ1dCBub3QgYWxsLiBXb3JzZSB5ZXQsXG4gICAqIHNvbWUgKGluIHBhcnRpY3VsYXIsIGB0eXBlYCkgdmFyeSBkZXBlbmRpbmcgb24gdGhlIHR5cGUgb2YgZWxlbWVudC5cbiAgICpcbiAgICogVE9ETzogSXMgaXQgYmV0dGVyIHRvIGdyYWIgYWxsIHRoZSBwb3NzaWJsZSBwcm9wZXJ0aWVzIHdoZW4gY3JlYXRpbmcgYW5cbiAgICogZWxlbWVudCB0byBhdm9pZCBoYXZpbmcgdG8gY3JlYXRlIHRoZSBzYW1lIGVsZW1lbnQgdHdpY2U/XG4gICAqL1xuICBnZXREZWZhdWx0VmFsdWVGb3JQcm9wZXJ0eTogZnVuY3Rpb24gKG5vZGVOYW1lLCBwcm9wKSB7XG4gICAgdmFyIG5vZGVEZWZhdWx0cyA9IGRlZmF1bHRWYWx1ZUNhY2hlW25vZGVOYW1lXTtcbiAgICB2YXIgdGVzdEVsZW1lbnQ7XG4gICAgaWYgKCFub2RlRGVmYXVsdHMpIHtcbiAgICAgIGRlZmF1bHRWYWx1ZUNhY2hlW25vZGVOYW1lXSA9IG5vZGVEZWZhdWx0cyA9IHt9O1xuICAgIH1cbiAgICBpZiAoIShwcm9wIGluIG5vZGVEZWZhdWx0cykpIHtcbiAgICAgIHRlc3RFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChub2RlTmFtZSk7XG4gICAgICBub2RlRGVmYXVsdHNbcHJvcF0gPSB0ZXN0RWxlbWVudFtwcm9wXTtcbiAgICB9XG4gICAgcmV0dXJuIG5vZGVEZWZhdWx0c1twcm9wXTtcbiAgfSxcblxuICBpbmplY3Rpb246IERPTVByb3BlcnR5SW5qZWN0aW9uXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IERPTVByb3BlcnR5O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvRE9NUHJvcGVydHkuanNcbi8vIG1vZHVsZSBpZCA9IDIzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBxdW90ZUF0dHJpYnV0ZVZhbHVlRm9yQnJvd3NlclxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGVzY2FwZVRleHRDb250ZW50Rm9yQnJvd3NlciA9IHJlcXVpcmUoJy4vZXNjYXBlVGV4dENvbnRlbnRGb3JCcm93c2VyJyk7XG5cbi8qKlxuICogRXNjYXBlcyBhdHRyaWJ1dGUgdmFsdWUgdG8gcHJldmVudCBzY3JpcHRpbmcgYXR0YWNrcy5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlIFZhbHVlIHRvIGVzY2FwZS5cbiAqIEByZXR1cm4ge3N0cmluZ30gQW4gZXNjYXBlZCBzdHJpbmcuXG4gKi9cbmZ1bmN0aW9uIHF1b3RlQXR0cmlidXRlVmFsdWVGb3JCcm93c2VyKHZhbHVlKSB7XG4gIHJldHVybiAnXCInICsgZXNjYXBlVGV4dENvbnRlbnRGb3JCcm93c2VyKHZhbHVlKSArICdcIic7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcXVvdGVBdHRyaWJ1dGVWYWx1ZUZvckJyb3dzZXI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0L2xpYi9xdW90ZUF0dHJpYnV0ZVZhbHVlRm9yQnJvd3Nlci5qc1xuLy8gbW9kdWxlIGlkID0gMjRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNC0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIHdhcm5pbmdcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBlbXB0eUZ1bmN0aW9uID0gcmVxdWlyZSgnLi9lbXB0eUZ1bmN0aW9uJyk7XG5cbi8qKlxuICogU2ltaWxhciB0byBpbnZhcmlhbnQgYnV0IG9ubHkgbG9ncyBhIHdhcm5pbmcgaWYgdGhlIGNvbmRpdGlvbiBpcyBub3QgbWV0LlxuICogVGhpcyBjYW4gYmUgdXNlZCB0byBsb2cgaXNzdWVzIGluIGRldmVsb3BtZW50IGVudmlyb25tZW50cyBpbiBjcml0aWNhbFxuICogcGF0aHMuIFJlbW92aW5nIHRoZSBsb2dnaW5nIGNvZGUgZm9yIHByb2R1Y3Rpb24gZW52aXJvbm1lbnRzIHdpbGwga2VlcCB0aGVcbiAqIHNhbWUgbG9naWMgYW5kIGZvbGxvdyB0aGUgc2FtZSBjb2RlIHBhdGhzLlxuICovXG5cbnZhciB3YXJuaW5nID0gZW1wdHlGdW5jdGlvbjtcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgd2FybmluZyA9IGZ1bmN0aW9uIChjb25kaXRpb24sIGZvcm1hdCkge1xuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiA+IDIgPyBfbGVuIC0gMiA6IDApLCBfa2V5ID0gMjsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5IC0gMl0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2B3YXJuaW5nKGNvbmRpdGlvbiwgZm9ybWF0LCAuLi5hcmdzKWAgcmVxdWlyZXMgYSB3YXJuaW5nICcgKyAnbWVzc2FnZSBhcmd1bWVudCcpO1xuICAgIH1cblxuICAgIGlmIChmb3JtYXQuaW5kZXhPZignRmFpbGVkIENvbXBvc2l0ZSBwcm9wVHlwZTogJykgPT09IDApIHtcbiAgICAgIHJldHVybjsgLy8gSWdub3JlIENvbXBvc2l0ZUNvbXBvbmVudCBwcm9wdHlwZSBjaGVjay5cbiAgICB9XG5cbiAgICBpZiAoIWNvbmRpdGlvbikge1xuICAgICAgdmFyIGFyZ0luZGV4ID0gMDtcbiAgICAgIHZhciBtZXNzYWdlID0gJ1dhcm5pbmc6ICcgKyBmb3JtYXQucmVwbGFjZSgvJXMvZywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gYXJnc1thcmdJbmRleCsrXTtcbiAgICAgIH0pO1xuICAgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjb25zb2xlLmVycm9yKG1lc3NhZ2UpO1xuICAgICAgfVxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gLS0tIFdlbGNvbWUgdG8gZGVidWdnaW5nIFJlYWN0IC0tLVxuICAgICAgICAvLyBUaGlzIGVycm9yIHdhcyB0aHJvd24gYXMgYSBjb252ZW5pZW5jZSBzbyB0aGF0IHlvdSBjYW4gdXNlIHRoaXMgc3RhY2tcbiAgICAgICAgLy8gdG8gZmluZCB0aGUgY2FsbHNpdGUgdGhhdCBjYXVzZWQgdGhpcyB3YXJuaW5nIHRvIGZpcmUuXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICAgIH0gY2F0Y2ggKHgpIHt9XG4gICAgfVxuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHdhcm5pbmc7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2ZianMvbGliL3dhcm5pbmcuanNcbi8vIG1vZHVsZSBpZCA9IDI1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdENvbXBvbmVudEJyb3dzZXJFbnZpcm9ubWVudFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0RE9NSURPcGVyYXRpb25zID0gcmVxdWlyZSgnLi9SZWFjdERPTUlET3BlcmF0aW9ucycpO1xudmFyIFJlYWN0TW91bnQgPSByZXF1aXJlKCcuL1JlYWN0TW91bnQnKTtcblxuLyoqXG4gKiBBYnN0cmFjdHMgYXdheSBhbGwgZnVuY3Rpb25hbGl0eSBvZiB0aGUgcmVjb25jaWxlciB0aGF0IHJlcXVpcmVzIGtub3dsZWRnZSBvZlxuICogdGhlIGJyb3dzZXIgY29udGV4dC4gVE9ETzogVGhlc2UgY2FsbGVycyBzaG91bGQgYmUgcmVmYWN0b3JlZCB0byBhdm9pZCB0aGVcbiAqIG5lZWQgZm9yIHRoaXMgaW5qZWN0aW9uLlxuICovXG52YXIgUmVhY3RDb21wb25lbnRCcm93c2VyRW52aXJvbm1lbnQgPSB7XG5cbiAgcHJvY2Vzc0NoaWxkcmVuVXBkYXRlczogUmVhY3RET01JRE9wZXJhdGlvbnMuZGFuZ2Vyb3VzbHlQcm9jZXNzQ2hpbGRyZW5VcGRhdGVzLFxuXG4gIHJlcGxhY2VOb2RlV2l0aE1hcmt1cEJ5SUQ6IFJlYWN0RE9NSURPcGVyYXRpb25zLmRhbmdlcm91c2x5UmVwbGFjZU5vZGVXaXRoTWFya3VwQnlJRCxcblxuICAvKipcbiAgICogSWYgYSBwYXJ0aWN1bGFyIGVudmlyb25tZW50IHJlcXVpcmVzIHRoYXQgc29tZSByZXNvdXJjZXMgYmUgY2xlYW5lZCB1cCxcbiAgICogc3BlY2lmeSB0aGlzIGluIHRoZSBpbmplY3RlZCBNaXhpbi4gSW4gdGhlIERPTSwgd2Ugd291bGQgbGlrZWx5IHdhbnQgdG9cbiAgICogcHVyZ2UgYW55IGNhY2hlZCBub2RlIElEIGxvb2t1cHMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB1bm1vdW50SURGcm9tRW52aXJvbm1lbnQ6IGZ1bmN0aW9uIChyb290Tm9kZUlEKSB7XG4gICAgUmVhY3RNb3VudC5wdXJnZUlEKHJvb3ROb2RlSUQpO1xuICB9XG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RDb21wb25lbnRCcm93c2VyRW52aXJvbm1lbnQ7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0L2xpYi9SZWFjdENvbXBvbmVudEJyb3dzZXJFbnZpcm9ubWVudC5qc1xuLy8gbW9kdWxlIGlkID0gMjZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RE9NSURPcGVyYXRpb25zXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIERPTUNoaWxkcmVuT3BlcmF0aW9ucyA9IHJlcXVpcmUoJy4vRE9NQ2hpbGRyZW5PcGVyYXRpb25zJyk7XG52YXIgRE9NUHJvcGVydHlPcGVyYXRpb25zID0gcmVxdWlyZSgnLi9ET01Qcm9wZXJ0eU9wZXJhdGlvbnMnKTtcbnZhciBSZWFjdE1vdW50ID0gcmVxdWlyZSgnLi9SZWFjdE1vdW50Jyk7XG52YXIgUmVhY3RQZXJmID0gcmVxdWlyZSgnLi9SZWFjdFBlcmYnKTtcblxudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xuXG4vKipcbiAqIEVycm9ycyBmb3IgcHJvcGVydGllcyB0aGF0IHNob3VsZCBub3QgYmUgdXBkYXRlZCB3aXRoIGB1cGRhdGVQcm9wZXJ0eUJ5SUQoKWAuXG4gKlxuICogQHR5cGUge29iamVjdH1cbiAqIEBwcml2YXRlXG4gKi9cbnZhciBJTlZBTElEX1BST1BFUlRZX0VSUk9SUyA9IHtcbiAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw6ICdgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUxgIG11c3QgYmUgc2V0IHVzaW5nIGB1cGRhdGVJbm5lckhUTUxCeUlEKClgLicsXG4gIHN0eWxlOiAnYHN0eWxlYCBtdXN0IGJlIHNldCB1c2luZyBgdXBkYXRlU3R5bGVzQnlJRCgpYC4nXG59O1xuXG4vKipcbiAqIE9wZXJhdGlvbnMgdXNlZCB0byBwcm9jZXNzIHVwZGF0ZXMgdG8gRE9NIG5vZGVzLlxuICovXG52YXIgUmVhY3RET01JRE9wZXJhdGlvbnMgPSB7XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgYSBET00gbm9kZSB3aXRoIG5ldyBwcm9wZXJ0eSB2YWx1ZXMuIFRoaXMgc2hvdWxkIG9ubHkgYmUgdXNlZCB0b1xuICAgKiB1cGRhdGUgRE9NIHByb3BlcnRpZXMgaW4gYERPTVByb3BlcnR5YC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIElEIG9mIHRoZSBub2RlIHRvIHVwZGF0ZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgQSB2YWxpZCBwcm9wZXJ0eSBuYW1lLCBzZWUgYERPTVByb3BlcnR5YC5cbiAgICogQHBhcmFtIHsqfSB2YWx1ZSBOZXcgdmFsdWUgb2YgdGhlIHByb3BlcnR5LlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHVwZGF0ZVByb3BlcnR5QnlJRDogZnVuY3Rpb24gKGlkLCBuYW1lLCB2YWx1ZSkge1xuICAgIHZhciBub2RlID0gUmVhY3RNb3VudC5nZXROb2RlKGlkKTtcbiAgICAhIUlOVkFMSURfUFJPUEVSVFlfRVJST1JTLmhhc093blByb3BlcnR5KG5hbWUpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ3VwZGF0ZVByb3BlcnR5QnlJRCguLi4pOiAlcycsIElOVkFMSURfUFJPUEVSVFlfRVJST1JTW25hbWVdKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICAvLyBJZiB3ZSdyZSB1cGRhdGluZyB0byBudWxsIG9yIHVuZGVmaW5lZCwgd2Ugc2hvdWxkIHJlbW92ZSB0aGUgcHJvcGVydHlcbiAgICAvLyBmcm9tIHRoZSBET00gbm9kZSBpbnN0ZWFkIG9mIGluYWR2ZXJ0YW50bHkgc2V0dGluZyB0byBhIHN0cmluZy4gVGhpc1xuICAgIC8vIGJyaW5ncyB1cyBpbiBsaW5lIHdpdGggdGhlIHNhbWUgYmVoYXZpb3Igd2UgaGF2ZSBvbiBpbml0aWFsIHJlbmRlci5cbiAgICBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgRE9NUHJvcGVydHlPcGVyYXRpb25zLnNldFZhbHVlRm9yUHJvcGVydHkobm9kZSwgbmFtZSwgdmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBET01Qcm9wZXJ0eU9wZXJhdGlvbnMuZGVsZXRlVmFsdWVGb3JQcm9wZXJ0eShub2RlLCBuYW1lKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlcGxhY2VzIGEgRE9NIG5vZGUgdGhhdCBleGlzdHMgaW4gdGhlIGRvY3VtZW50IHdpdGggbWFya3VwLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgSUQgb2YgY2hpbGQgdG8gYmUgcmVwbGFjZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtYXJrdXAgRGFuZ2Vyb3VzIG1hcmt1cCB0byBpbmplY3QgaW4gcGxhY2Ugb2YgY2hpbGQuXG4gICAqIEBpbnRlcm5hbFxuICAgKiBAc2VlIHtEYW5nZXIuZGFuZ2Vyb3VzbHlSZXBsYWNlTm9kZVdpdGhNYXJrdXB9XG4gICAqL1xuICBkYW5nZXJvdXNseVJlcGxhY2VOb2RlV2l0aE1hcmt1cEJ5SUQ6IGZ1bmN0aW9uIChpZCwgbWFya3VwKSB7XG4gICAgdmFyIG5vZGUgPSBSZWFjdE1vdW50LmdldE5vZGUoaWQpO1xuICAgIERPTUNoaWxkcmVuT3BlcmF0aW9ucy5kYW5nZXJvdXNseVJlcGxhY2VOb2RlV2l0aE1hcmt1cChub2RlLCBtYXJrdXApO1xuICB9LFxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIGEgY29tcG9uZW50J3MgY2hpbGRyZW4gYnkgcHJvY2Vzc2luZyBhIHNlcmllcyBvZiB1cGRhdGVzLlxuICAgKlxuICAgKiBAcGFyYW0ge2FycmF5PG9iamVjdD59IHVwZGF0ZXMgTGlzdCBvZiB1cGRhdGUgY29uZmlndXJhdGlvbnMuXG4gICAqIEBwYXJhbSB7YXJyYXk8c3RyaW5nPn0gbWFya3VwIExpc3Qgb2YgbWFya3VwIHN0cmluZ3MuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZGFuZ2Vyb3VzbHlQcm9jZXNzQ2hpbGRyZW5VcGRhdGVzOiBmdW5jdGlvbiAodXBkYXRlcywgbWFya3VwKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB1cGRhdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB1cGRhdGVzW2ldLnBhcmVudE5vZGUgPSBSZWFjdE1vdW50LmdldE5vZGUodXBkYXRlc1tpXS5wYXJlbnRJRCk7XG4gICAgfVxuICAgIERPTUNoaWxkcmVuT3BlcmF0aW9ucy5wcm9jZXNzVXBkYXRlcyh1cGRhdGVzLCBtYXJrdXApO1xuICB9XG59O1xuXG5SZWFjdFBlcmYubWVhc3VyZU1ldGhvZHMoUmVhY3RET01JRE9wZXJhdGlvbnMsICdSZWFjdERPTUlET3BlcmF0aW9ucycsIHtcbiAgZGFuZ2Vyb3VzbHlSZXBsYWNlTm9kZVdpdGhNYXJrdXBCeUlEOiAnZGFuZ2Vyb3VzbHlSZXBsYWNlTm9kZVdpdGhNYXJrdXBCeUlEJyxcbiAgZGFuZ2Vyb3VzbHlQcm9jZXNzQ2hpbGRyZW5VcGRhdGVzOiAnZGFuZ2Vyb3VzbHlQcm9jZXNzQ2hpbGRyZW5VcGRhdGVzJ1xufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RET01JRE9wZXJhdGlvbnM7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0L2xpYi9SZWFjdERPTUlET3BlcmF0aW9ucy5qc1xuLy8gbW9kdWxlIGlkID0gMjdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0TW91bnRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBET01Qcm9wZXJ0eSA9IHJlcXVpcmUoJy4vRE9NUHJvcGVydHknKTtcbnZhciBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCcuL1JlYWN0QnJvd3NlckV2ZW50RW1pdHRlcicpO1xudmFyIFJlYWN0Q3VycmVudE93bmVyID0gcmVxdWlyZSgnLi9SZWFjdEN1cnJlbnRPd25lcicpO1xudmFyIFJlYWN0RE9NRmVhdHVyZUZsYWdzID0gcmVxdWlyZSgnLi9SZWFjdERPTUZlYXR1cmVGbGFncycpO1xudmFyIFJlYWN0RWxlbWVudCA9IHJlcXVpcmUoJy4vUmVhY3RFbGVtZW50Jyk7XG52YXIgUmVhY3RFbXB0eUNvbXBvbmVudFJlZ2lzdHJ5ID0gcmVxdWlyZSgnLi9SZWFjdEVtcHR5Q29tcG9uZW50UmVnaXN0cnknKTtcbnZhciBSZWFjdEluc3RhbmNlSGFuZGxlcyA9IHJlcXVpcmUoJy4vUmVhY3RJbnN0YW5jZUhhbmRsZXMnKTtcbnZhciBSZWFjdEluc3RhbmNlTWFwID0gcmVxdWlyZSgnLi9SZWFjdEluc3RhbmNlTWFwJyk7XG52YXIgUmVhY3RNYXJrdXBDaGVja3N1bSA9IHJlcXVpcmUoJy4vUmVhY3RNYXJrdXBDaGVja3N1bScpO1xudmFyIFJlYWN0UGVyZiA9IHJlcXVpcmUoJy4vUmVhY3RQZXJmJyk7XG52YXIgUmVhY3RSZWNvbmNpbGVyID0gcmVxdWlyZSgnLi9SZWFjdFJlY29uY2lsZXInKTtcbnZhciBSZWFjdFVwZGF0ZVF1ZXVlID0gcmVxdWlyZSgnLi9SZWFjdFVwZGF0ZVF1ZXVlJyk7XG52YXIgUmVhY3RVcGRhdGVzID0gcmVxdWlyZSgnLi9SZWFjdFVwZGF0ZXMnKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIGVtcHR5T2JqZWN0ID0gcmVxdWlyZSgnZmJqcy9saWIvZW1wdHlPYmplY3QnKTtcbnZhciBjb250YWluc05vZGUgPSByZXF1aXJlKCdmYmpzL2xpYi9jb250YWluc05vZGUnKTtcbnZhciBpbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50ID0gcmVxdWlyZSgnLi9pbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50Jyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG52YXIgc2V0SW5uZXJIVE1MID0gcmVxdWlyZSgnLi9zZXRJbm5lckhUTUwnKTtcbnZhciBzaG91bGRVcGRhdGVSZWFjdENvbXBvbmVudCA9IHJlcXVpcmUoJy4vc2hvdWxkVXBkYXRlUmVhY3RDb21wb25lbnQnKTtcbnZhciB2YWxpZGF0ZURPTU5lc3RpbmcgPSByZXF1aXJlKCcuL3ZhbGlkYXRlRE9NTmVzdGluZycpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbnZhciBBVFRSX05BTUUgPSBET01Qcm9wZXJ0eS5JRF9BVFRSSUJVVEVfTkFNRTtcbnZhciBub2RlQ2FjaGUgPSB7fTtcblxudmFyIEVMRU1FTlRfTk9ERV9UWVBFID0gMTtcbnZhciBET0NfTk9ERV9UWVBFID0gOTtcbnZhciBET0NVTUVOVF9GUkFHTUVOVF9OT0RFX1RZUEUgPSAxMTtcblxudmFyIG93bmVyRG9jdW1lbnRDb250ZXh0S2V5ID0gJ19fUmVhY3RNb3VudF9vd25lckRvY3VtZW50JCcgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zbGljZSgyKTtcblxuLyoqIE1hcHBpbmcgZnJvbSByZWFjdFJvb3RJRCB0byBSZWFjdCBjb21wb25lbnQgaW5zdGFuY2UuICovXG52YXIgaW5zdGFuY2VzQnlSZWFjdFJvb3RJRCA9IHt9O1xuXG4vKiogTWFwcGluZyBmcm9tIHJlYWN0Um9vdElEIHRvIGBjb250YWluZXJgIG5vZGVzLiAqL1xudmFyIGNvbnRhaW5lcnNCeVJlYWN0Um9vdElEID0ge307XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIC8qKiBfX0RFVl9fLW9ubHkgbWFwcGluZyBmcm9tIHJlYWN0Um9vdElEIHRvIHJvb3QgZWxlbWVudHMuICovXG4gIHZhciByb290RWxlbWVudHNCeVJlYWN0Um9vdElEID0ge307XG59XG5cbi8vIFVzZWQgdG8gc3RvcmUgYnJlYWR0aC1maXJzdCBzZWFyY2ggc3RhdGUgaW4gZmluZENvbXBvbmVudFJvb3QuXG52YXIgZmluZENvbXBvbmVudFJvb3RSZXVzYWJsZUFycmF5ID0gW107XG5cbi8qKlxuICogRmluZHMgdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBjaGFyYWN0ZXJcbiAqIHRoYXQncyBub3QgY29tbW9uIGJldHdlZW4gdGhlIHR3byBnaXZlbiBzdHJpbmdzLlxuICpcbiAqIEByZXR1cm4ge251bWJlcn0gdGhlIGluZGV4IG9mIHRoZSBjaGFyYWN0ZXIgd2hlcmUgdGhlIHN0cmluZ3MgZGl2ZXJnZVxuICovXG5mdW5jdGlvbiBmaXJzdERpZmZlcmVuY2VJbmRleChzdHJpbmcxLCBzdHJpbmcyKSB7XG4gIHZhciBtaW5MZW4gPSBNYXRoLm1pbihzdHJpbmcxLmxlbmd0aCwgc3RyaW5nMi5sZW5ndGgpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IG1pbkxlbjsgaSsrKSB7XG4gICAgaWYgKHN0cmluZzEuY2hhckF0KGkpICE9PSBzdHJpbmcyLmNoYXJBdChpKSkge1xuICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICB9XG4gIHJldHVybiBzdHJpbmcxLmxlbmd0aCA9PT0gc3RyaW5nMi5sZW5ndGggPyAtMSA6IG1pbkxlbjtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0RPTUVsZW1lbnR8RE9NRG9jdW1lbnR9IGNvbnRhaW5lciBET00gZWxlbWVudCB0aGF0IG1heSBjb250YWluXG4gKiBhIFJlYWN0IGNvbXBvbmVudFxuICogQHJldHVybiB7Pyp9IERPTSBlbGVtZW50IHRoYXQgbWF5IGhhdmUgdGhlIHJlYWN0Um9vdCBJRCwgb3IgbnVsbC5cbiAqL1xuZnVuY3Rpb24gZ2V0UmVhY3RSb290RWxlbWVudEluQ29udGFpbmVyKGNvbnRhaW5lcikge1xuICBpZiAoIWNvbnRhaW5lcikge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgaWYgKGNvbnRhaW5lci5ub2RlVHlwZSA9PT0gRE9DX05PREVfVFlQRSkge1xuICAgIHJldHVybiBjb250YWluZXIuZG9jdW1lbnRFbGVtZW50O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBjb250YWluZXIuZmlyc3RDaGlsZDtcbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7RE9NRWxlbWVudH0gY29udGFpbmVyIERPTSBlbGVtZW50IHRoYXQgbWF5IGNvbnRhaW4gYSBSZWFjdCBjb21wb25lbnQuXG4gKiBAcmV0dXJuIHs/c3RyaW5nfSBBIFwicmVhY3RSb290XCIgSUQsIGlmIGEgUmVhY3QgY29tcG9uZW50IGlzIHJlbmRlcmVkLlxuICovXG5mdW5jdGlvbiBnZXRSZWFjdFJvb3RJRChjb250YWluZXIpIHtcbiAgdmFyIHJvb3RFbGVtZW50ID0gZ2V0UmVhY3RSb290RWxlbWVudEluQ29udGFpbmVyKGNvbnRhaW5lcik7XG4gIHJldHVybiByb290RWxlbWVudCAmJiBSZWFjdE1vdW50LmdldElEKHJvb3RFbGVtZW50KTtcbn1cblxuLyoqXG4gKiBBY2Nlc3Npbmcgbm9kZVtBVFRSX05BTUVdIG9yIGNhbGxpbmcgZ2V0QXR0cmlidXRlKEFUVFJfTkFNRSkgb24gYSBmb3JtXG4gKiBlbGVtZW50IGNhbiByZXR1cm4gaXRzIGNvbnRyb2wgd2hvc2UgbmFtZSBvciBJRCBlcXVhbHMgQVRUUl9OQU1FLiBBbGxcbiAqIERPTSBub2RlcyBzdXBwb3J0IGBnZXRBdHRyaWJ1dGVOb2RlYCBidXQgdGhpcyBjYW4gYWxzbyBnZXQgY2FsbGVkIG9uXG4gKiBvdGhlciBvYmplY3RzIHNvIGp1c3QgcmV0dXJuICcnIGlmIHdlJ3JlIGdpdmVuIHNvbWV0aGluZyBvdGhlciB0aGFuIGFcbiAqIERPTSBub2RlIChzdWNoIGFzIHdpbmRvdykuXG4gKlxuICogQHBhcmFtIHs/RE9NRWxlbWVudHxET01XaW5kb3d8RE9NRG9jdW1lbnR8RE9NVGV4dE5vZGV9IG5vZGUgRE9NIG5vZGUuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IElEIG9mIHRoZSBzdXBwbGllZCBgZG9tTm9kZWAuXG4gKi9cbmZ1bmN0aW9uIGdldElEKG5vZGUpIHtcbiAgdmFyIGlkID0gaW50ZXJuYWxHZXRJRChub2RlKTtcbiAgaWYgKGlkKSB7XG4gICAgaWYgKG5vZGVDYWNoZS5oYXNPd25Qcm9wZXJ0eShpZCkpIHtcbiAgICAgIHZhciBjYWNoZWQgPSBub2RlQ2FjaGVbaWRdO1xuICAgICAgaWYgKGNhY2hlZCAhPT0gbm9kZSkge1xuICAgICAgICAhIWlzVmFsaWQoY2FjaGVkLCBpZCkgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RNb3VudDogVHdvIHZhbGlkIGJ1dCB1bmVxdWFsIG5vZGVzIHdpdGggdGhlIHNhbWUgYCVzYDogJXMnLCBBVFRSX05BTUUsIGlkKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgbm9kZUNhY2hlW2lkXSA9IG5vZGU7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIG5vZGVDYWNoZVtpZF0gPSBub2RlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBpZDtcbn1cblxuZnVuY3Rpb24gaW50ZXJuYWxHZXRJRChub2RlKSB7XG4gIC8vIElmIG5vZGUgaXMgc29tZXRoaW5nIGxpa2UgYSB3aW5kb3csIGRvY3VtZW50LCBvciB0ZXh0IG5vZGUsIG5vbmUgb2ZcbiAgLy8gd2hpY2ggc3VwcG9ydCBhdHRyaWJ1dGVzIG9yIGEgLmdldEF0dHJpYnV0ZSBtZXRob2QsIGdyYWNlZnVsbHkgcmV0dXJuXG4gIC8vIHRoZSBlbXB0eSBzdHJpbmcsIGFzIGlmIHRoZSBhdHRyaWJ1dGUgd2VyZSBtaXNzaW5nLlxuICByZXR1cm4gbm9kZSAmJiBub2RlLmdldEF0dHJpYnV0ZSAmJiBub2RlLmdldEF0dHJpYnV0ZShBVFRSX05BTUUpIHx8ICcnO1xufVxuXG4vKipcbiAqIFNldHMgdGhlIFJlYWN0LXNwZWNpZmljIElEIG9mIHRoZSBnaXZlbiBub2RlLlxuICpcbiAqIEBwYXJhbSB7RE9NRWxlbWVudH0gbm9kZSBUaGUgRE9NIG5vZGUgd2hvc2UgSUQgd2lsbCBiZSBzZXQuXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgVGhlIHZhbHVlIG9mIHRoZSBJRCBhdHRyaWJ1dGUuXG4gKi9cbmZ1bmN0aW9uIHNldElEKG5vZGUsIGlkKSB7XG4gIHZhciBvbGRJRCA9IGludGVybmFsR2V0SUQobm9kZSk7XG4gIGlmIChvbGRJRCAhPT0gaWQpIHtcbiAgICBkZWxldGUgbm9kZUNhY2hlW29sZElEXTtcbiAgfVxuICBub2RlLnNldEF0dHJpYnV0ZShBVFRSX05BTUUsIGlkKTtcbiAgbm9kZUNhY2hlW2lkXSA9IG5vZGU7XG59XG5cbi8qKlxuICogRmluZHMgdGhlIG5vZGUgd2l0aCB0aGUgc3VwcGxpZWQgUmVhY3QtZ2VuZXJhdGVkIERPTSBJRC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgQSBSZWFjdC1nZW5lcmF0ZWQgRE9NIElELlxuICogQHJldHVybiB7RE9NRWxlbWVudH0gRE9NIG5vZGUgd2l0aCB0aGUgc3VwcGxlZCBgaWRgLlxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIGdldE5vZGUoaWQpIHtcbiAgaWYgKCFub2RlQ2FjaGUuaGFzT3duUHJvcGVydHkoaWQpIHx8ICFpc1ZhbGlkKG5vZGVDYWNoZVtpZF0sIGlkKSkge1xuICAgIG5vZGVDYWNoZVtpZF0gPSBSZWFjdE1vdW50LmZpbmRSZWFjdE5vZGVCeUlEKGlkKTtcbiAgfVxuICByZXR1cm4gbm9kZUNhY2hlW2lkXTtcbn1cblxuLyoqXG4gKiBGaW5kcyB0aGUgbm9kZSB3aXRoIHRoZSBzdXBwbGllZCBwdWJsaWMgUmVhY3QgaW5zdGFuY2UuXG4gKlxuICogQHBhcmFtIHsqfSBpbnN0YW5jZSBBIHB1YmxpYyBSZWFjdCBpbnN0YW5jZS5cbiAqIEByZXR1cm4gez9ET01FbGVtZW50fSBET00gbm9kZSB3aXRoIHRoZSBzdXBwbGVkIGBpZGAuXG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gZ2V0Tm9kZUZyb21JbnN0YW5jZShpbnN0YW5jZSkge1xuICB2YXIgaWQgPSBSZWFjdEluc3RhbmNlTWFwLmdldChpbnN0YW5jZSkuX3Jvb3ROb2RlSUQ7XG4gIGlmIChSZWFjdEVtcHR5Q29tcG9uZW50UmVnaXN0cnkuaXNOdWxsQ29tcG9uZW50SUQoaWQpKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgaWYgKCFub2RlQ2FjaGUuaGFzT3duUHJvcGVydHkoaWQpIHx8ICFpc1ZhbGlkKG5vZGVDYWNoZVtpZF0sIGlkKSkge1xuICAgIG5vZGVDYWNoZVtpZF0gPSBSZWFjdE1vdW50LmZpbmRSZWFjdE5vZGVCeUlEKGlkKTtcbiAgfVxuICByZXR1cm4gbm9kZUNhY2hlW2lkXTtcbn1cblxuLyoqXG4gKiBBIG5vZGUgaXMgXCJ2YWxpZFwiIGlmIGl0IGlzIGNvbnRhaW5lZCBieSBhIGN1cnJlbnRseSBtb3VudGVkIGNvbnRhaW5lci5cbiAqXG4gKiBUaGlzIG1lYW5zIHRoYXQgdGhlIG5vZGUgZG9lcyBub3QgaGF2ZSB0byBiZSBjb250YWluZWQgYnkgYSBkb2N1bWVudCBpblxuICogb3JkZXIgdG8gYmUgY29uc2lkZXJlZCB2YWxpZC5cbiAqXG4gKiBAcGFyYW0gez9ET01FbGVtZW50fSBub2RlIFRoZSBjYW5kaWRhdGUgRE9NIG5vZGUuXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgVGhlIGV4cGVjdGVkIElEIG9mIHRoZSBub2RlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgbm9kZSBpcyBjb250YWluZWQgYnkgYSBtb3VudGVkIGNvbnRhaW5lci5cbiAqL1xuZnVuY3Rpb24gaXNWYWxpZChub2RlLCBpZCkge1xuICBpZiAobm9kZSkge1xuICAgICEoaW50ZXJuYWxHZXRJRChub2RlKSA9PT0gaWQpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0TW91bnQ6IFVuZXhwZWN0ZWQgbW9kaWZpY2F0aW9uIG9mIGAlc2AnLCBBVFRSX05BTUUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIHZhciBjb250YWluZXIgPSBSZWFjdE1vdW50LmZpbmRSZWFjdENvbnRhaW5lckZvcklEKGlkKTtcbiAgICBpZiAoY29udGFpbmVyICYmIGNvbnRhaW5zTm9kZShjb250YWluZXIsIG5vZGUpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogQ2F1c2VzIHRoZSBjYWNoZSB0byBmb3JnZXQgYWJvdXQgb25lIFJlYWN0LXNwZWNpZmljIElELlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBUaGUgSUQgdG8gZm9yZ2V0LlxuICovXG5mdW5jdGlvbiBwdXJnZUlEKGlkKSB7XG4gIGRlbGV0ZSBub2RlQ2FjaGVbaWRdO1xufVxuXG52YXIgZGVlcGVzdE5vZGVTb0ZhciA9IG51bGw7XG5mdW5jdGlvbiBmaW5kRGVlcGVzdENhY2hlZEFuY2VzdG9ySW1wbChhbmNlc3RvcklEKSB7XG4gIHZhciBhbmNlc3RvciA9IG5vZGVDYWNoZVthbmNlc3RvcklEXTtcbiAgaWYgKGFuY2VzdG9yICYmIGlzVmFsaWQoYW5jZXN0b3IsIGFuY2VzdG9ySUQpKSB7XG4gICAgZGVlcGVzdE5vZGVTb0ZhciA9IGFuY2VzdG9yO1xuICB9IGVsc2Uge1xuICAgIC8vIFRoaXMgbm9kZSBpc24ndCBwb3B1bGF0ZWQgaW4gdGhlIGNhY2hlLCBzbyBwcmVzdW1hYmx5IG5vbmUgb2YgaXRzXG4gICAgLy8gZGVzY2VuZGFudHMgYXJlLiBCcmVhayBvdXQgb2YgdGhlIGxvb3AuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8qKlxuICogUmV0dXJuIHRoZSBkZWVwZXN0IGNhY2hlZCBub2RlIHdob3NlIElEIGlzIGEgcHJlZml4IG9mIGB0YXJnZXRJRGAuXG4gKi9cbmZ1bmN0aW9uIGZpbmREZWVwZXN0Q2FjaGVkQW5jZXN0b3IodGFyZ2V0SUQpIHtcbiAgZGVlcGVzdE5vZGVTb0ZhciA9IG51bGw7XG4gIFJlYWN0SW5zdGFuY2VIYW5kbGVzLnRyYXZlcnNlQW5jZXN0b3JzKHRhcmdldElELCBmaW5kRGVlcGVzdENhY2hlZEFuY2VzdG9ySW1wbCk7XG5cbiAgdmFyIGZvdW5kTm9kZSA9IGRlZXBlc3ROb2RlU29GYXI7XG4gIGRlZXBlc3ROb2RlU29GYXIgPSBudWxsO1xuICByZXR1cm4gZm91bmROb2RlO1xufVxuXG4vKipcbiAqIE1vdW50cyB0aGlzIGNvbXBvbmVudCBhbmQgaW5zZXJ0cyBpdCBpbnRvIHRoZSBET00uXG4gKlxuICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gY29tcG9uZW50SW5zdGFuY2UgVGhlIGluc3RhbmNlIHRvIG1vdW50LlxuICogQHBhcmFtIHtzdHJpbmd9IHJvb3RJRCBET00gSUQgb2YgdGhlIHJvb3Qgbm9kZS5cbiAqIEBwYXJhbSB7RE9NRWxlbWVudH0gY29udGFpbmVyIERPTSBlbGVtZW50IHRvIG1vdW50IGludG8uXG4gKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHNob3VsZFJldXNlTWFya3VwIElmIHRydWUsIGRvIG5vdCBpbnNlcnQgbWFya3VwXG4gKi9cbmZ1bmN0aW9uIG1vdW50Q29tcG9uZW50SW50b05vZGUoY29tcG9uZW50SW5zdGFuY2UsIHJvb3RJRCwgY29udGFpbmVyLCB0cmFuc2FjdGlvbiwgc2hvdWxkUmV1c2VNYXJrdXAsIGNvbnRleHQpIHtcbiAgaWYgKFJlYWN0RE9NRmVhdHVyZUZsYWdzLnVzZUNyZWF0ZUVsZW1lbnQpIHtcbiAgICBjb250ZXh0ID0gYXNzaWduKHt9LCBjb250ZXh0KTtcbiAgICBpZiAoY29udGFpbmVyLm5vZGVUeXBlID09PSBET0NfTk9ERV9UWVBFKSB7XG4gICAgICBjb250ZXh0W293bmVyRG9jdW1lbnRDb250ZXh0S2V5XSA9IGNvbnRhaW5lcjtcbiAgICB9IGVsc2Uge1xuICAgICAgY29udGV4dFtvd25lckRvY3VtZW50Q29udGV4dEtleV0gPSBjb250YWluZXIub3duZXJEb2N1bWVudDtcbiAgICB9XG4gIH1cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBpZiAoY29udGV4dCA9PT0gZW1wdHlPYmplY3QpIHtcbiAgICAgIGNvbnRleHQgPSB7fTtcbiAgICB9XG4gICAgdmFyIHRhZyA9IGNvbnRhaW5lci5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIGNvbnRleHRbdmFsaWRhdGVET01OZXN0aW5nLmFuY2VzdG9ySW5mb0NvbnRleHRLZXldID0gdmFsaWRhdGVET01OZXN0aW5nLnVwZGF0ZWRBbmNlc3RvckluZm8obnVsbCwgdGFnLCBudWxsKTtcbiAgfVxuICB2YXIgbWFya3VwID0gUmVhY3RSZWNvbmNpbGVyLm1vdW50Q29tcG9uZW50KGNvbXBvbmVudEluc3RhbmNlLCByb290SUQsIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcbiAgY29tcG9uZW50SW5zdGFuY2UuX3JlbmRlcmVkQ29tcG9uZW50Ll90b3BMZXZlbFdyYXBwZXIgPSBjb21wb25lbnRJbnN0YW5jZTtcbiAgUmVhY3RNb3VudC5fbW91bnRJbWFnZUludG9Ob2RlKG1hcmt1cCwgY29udGFpbmVyLCBzaG91bGRSZXVzZU1hcmt1cCwgdHJhbnNhY3Rpb24pO1xufVxuXG4vKipcbiAqIEJhdGNoZWQgbW91bnQuXG4gKlxuICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gY29tcG9uZW50SW5zdGFuY2UgVGhlIGluc3RhbmNlIHRvIG1vdW50LlxuICogQHBhcmFtIHtzdHJpbmd9IHJvb3RJRCBET00gSUQgb2YgdGhlIHJvb3Qgbm9kZS5cbiAqIEBwYXJhbSB7RE9NRWxlbWVudH0gY29udGFpbmVyIERPTSBlbGVtZW50IHRvIG1vdW50IGludG8uXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHNob3VsZFJldXNlTWFya3VwIElmIHRydWUsIGRvIG5vdCBpbnNlcnQgbWFya3VwXG4gKi9cbmZ1bmN0aW9uIGJhdGNoZWRNb3VudENvbXBvbmVudEludG9Ob2RlKGNvbXBvbmVudEluc3RhbmNlLCByb290SUQsIGNvbnRhaW5lciwgc2hvdWxkUmV1c2VNYXJrdXAsIGNvbnRleHQpIHtcbiAgdmFyIHRyYW5zYWN0aW9uID0gUmVhY3RVcGRhdGVzLlJlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb24uZ2V0UG9vbGVkKFxuICAvKiBmb3JjZUhUTUwgKi9zaG91bGRSZXVzZU1hcmt1cCk7XG4gIHRyYW5zYWN0aW9uLnBlcmZvcm0obW91bnRDb21wb25lbnRJbnRvTm9kZSwgbnVsbCwgY29tcG9uZW50SW5zdGFuY2UsIHJvb3RJRCwgY29udGFpbmVyLCB0cmFuc2FjdGlvbiwgc2hvdWxkUmV1c2VNYXJrdXAsIGNvbnRleHQpO1xuICBSZWFjdFVwZGF0ZXMuUmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbi5yZWxlYXNlKHRyYW5zYWN0aW9uKTtcbn1cblxuLyoqXG4gKiBVbm1vdW50cyBhIGNvbXBvbmVudCBhbmQgcmVtb3ZlcyBpdCBmcm9tIHRoZSBET00uXG4gKlxuICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gaW5zdGFuY2UgUmVhY3QgY29tcG9uZW50IGluc3RhbmNlLlxuICogQHBhcmFtIHtET01FbGVtZW50fSBjb250YWluZXIgRE9NIGVsZW1lbnQgdG8gdW5tb3VudCBmcm9tLlxuICogQGZpbmFsXG4gKiBAaW50ZXJuYWxcbiAqIEBzZWUge1JlYWN0TW91bnQudW5tb3VudENvbXBvbmVudEF0Tm9kZX1cbiAqL1xuZnVuY3Rpb24gdW5tb3VudENvbXBvbmVudEZyb21Ob2RlKGluc3RhbmNlLCBjb250YWluZXIpIHtcbiAgUmVhY3RSZWNvbmNpbGVyLnVubW91bnRDb21wb25lbnQoaW5zdGFuY2UpO1xuXG4gIGlmIChjb250YWluZXIubm9kZVR5cGUgPT09IERPQ19OT0RFX1RZUEUpIHtcbiAgICBjb250YWluZXIgPSBjb250YWluZXIuZG9jdW1lbnRFbGVtZW50O1xuICB9XG5cbiAgLy8gaHR0cDovL2pzcGVyZi5jb20vZW1wdHlpbmctYS1ub2RlXG4gIHdoaWxlIChjb250YWluZXIubGFzdENoaWxkKSB7XG4gICAgY29udGFpbmVyLnJlbW92ZUNoaWxkKGNvbnRhaW5lci5sYXN0Q2hpbGQpO1xuICB9XG59XG5cbi8qKlxuICogVHJ1ZSBpZiB0aGUgc3VwcGxpZWQgRE9NIG5vZGUgaGFzIGEgZGlyZWN0IFJlYWN0LXJlbmRlcmVkIGNoaWxkIHRoYXQgaXNcbiAqIG5vdCBhIFJlYWN0IHJvb3QgZWxlbWVudC4gVXNlZnVsIGZvciB3YXJuaW5nIGluIGByZW5kZXJgLFxuICogYHVubW91bnRDb21wb25lbnRBdE5vZGVgLCBldGMuXG4gKlxuICogQHBhcmFtIHs/RE9NRWxlbWVudH0gbm9kZSBUaGUgY2FuZGlkYXRlIERPTSBub2RlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgRE9NIGVsZW1lbnQgY29udGFpbnMgYSBkaXJlY3QgY2hpbGQgdGhhdCB3YXNcbiAqIHJlbmRlcmVkIGJ5IFJlYWN0IGJ1dCBpcyBub3QgYSByb290IGVsZW1lbnQuXG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gaGFzTm9uUm9vdFJlYWN0Q2hpbGQobm9kZSkge1xuICB2YXIgcmVhY3RSb290SUQgPSBnZXRSZWFjdFJvb3RJRChub2RlKTtcbiAgcmV0dXJuIHJlYWN0Um9vdElEID8gcmVhY3RSb290SUQgIT09IFJlYWN0SW5zdGFuY2VIYW5kbGVzLmdldFJlYWN0Um9vdElERnJvbU5vZGVJRChyZWFjdFJvb3RJRCkgOiBmYWxzZTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBmaXJzdCAoZGVlcGVzdCkgYW5jZXN0b3Igb2YgYSBub2RlIHdoaWNoIGlzIHJlbmRlcmVkIGJ5IHRoaXMgY29weVxuICogb2YgUmVhY3QuXG4gKi9cbmZ1bmN0aW9uIGZpbmRGaXJzdFJlYWN0RE9NSW1wbChub2RlKSB7XG4gIC8vIFRoaXMgbm9kZSBtaWdodCBiZSBmcm9tIGFub3RoZXIgUmVhY3QgaW5zdGFuY2UsIHNvIHdlIG1ha2Ugc3VyZSBub3QgdG9cbiAgLy8gZXhhbWluZSB0aGUgbm9kZSBjYWNoZSBoZXJlXG4gIGZvciAoOyBub2RlICYmIG5vZGUucGFyZW50Tm9kZSAhPT0gbm9kZTsgbm9kZSA9IG5vZGUucGFyZW50Tm9kZSkge1xuICAgIGlmIChub2RlLm5vZGVUeXBlICE9PSAxKSB7XG4gICAgICAvLyBOb3QgYSBET01FbGVtZW50LCB0aGVyZWZvcmUgbm90IGEgUmVhY3QgY29tcG9uZW50XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgdmFyIG5vZGVJRCA9IGludGVybmFsR2V0SUQobm9kZSk7XG4gICAgaWYgKCFub2RlSUQpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICB2YXIgcmVhY3RSb290SUQgPSBSZWFjdEluc3RhbmNlSGFuZGxlcy5nZXRSZWFjdFJvb3RJREZyb21Ob2RlSUQobm9kZUlEKTtcblxuICAgIC8vIElmIGNvbnRhaW5lcnNCeVJlYWN0Um9vdElEIGNvbnRhaW5zIHRoZSBjb250YWluZXIgd2UgZmluZCBieSBjcmF3bGluZyB1cFxuICAgIC8vIHRoZSB0cmVlLCB3ZSBrbm93IHRoYXQgdGhpcyBpbnN0YW5jZSBvZiBSZWFjdCByZW5kZXJlZCB0aGUgbm9kZS5cbiAgICAvLyBuYi4gaXNWYWxpZCdzIHN0cmF0ZWd5ICh3aXRoIGNvbnRhaW5zTm9kZSkgZG9lcyBub3Qgd29yayBiZWNhdXNlIHJlbmRlclxuICAgIC8vIHRyZWVzIG1heSBiZSBuZXN0ZWQgYW5kIHdlIGRvbid0IHdhbnQgYSBmYWxzZSBwb3NpdGl2ZSBpbiB0aGF0IGNhc2UuXG4gICAgdmFyIGN1cnJlbnQgPSBub2RlO1xuICAgIHZhciBsYXN0SUQ7XG4gICAgZG8ge1xuICAgICAgbGFzdElEID0gaW50ZXJuYWxHZXRJRChjdXJyZW50KTtcbiAgICAgIGN1cnJlbnQgPSBjdXJyZW50LnBhcmVudE5vZGU7XG4gICAgICBpZiAoY3VycmVudCA9PSBudWxsKSB7XG4gICAgICAgIC8vIFRoZSBwYXNzZWQtaW4gbm9kZSBoYXMgYmVlbiBkZXRhY2hlZCBmcm9tIHRoZSBjb250YWluZXIgaXQgd2FzXG4gICAgICAgIC8vIG9yaWdpbmFsbHkgcmVuZGVyZWQgaW50by5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfSB3aGlsZSAobGFzdElEICE9PSByZWFjdFJvb3RJRCk7XG5cbiAgICBpZiAoY3VycmVudCA9PT0gY29udGFpbmVyc0J5UmVhY3RSb290SURbcmVhY3RSb290SURdKSB7XG4gICAgICByZXR1cm4gbm9kZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogVGVtcG9yYXJ5ICg/KSBoYWNrIHNvIHRoYXQgd2UgY2FuIHN0b3JlIGFsbCB0b3AtbGV2ZWwgcGVuZGluZyB1cGRhdGVzIG9uXG4gKiBjb21wb3NpdGVzIGluc3RlYWQgb2YgaGF2aW5nIHRvIHdvcnJ5IGFib3V0IGRpZmZlcmVudCB0eXBlcyBvZiBjb21wb25lbnRzXG4gKiBoZXJlLlxuICovXG52YXIgVG9wTGV2ZWxXcmFwcGVyID0gZnVuY3Rpb24gKCkge307XG5Ub3BMZXZlbFdyYXBwZXIucHJvdG90eXBlLmlzUmVhY3RDb21wb25lbnQgPSB7fTtcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIFRvcExldmVsV3JhcHBlci5kaXNwbGF5TmFtZSA9ICdUb3BMZXZlbFdyYXBwZXInO1xufVxuVG9wTGV2ZWxXcmFwcGVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gIC8vIHRoaXMucHJvcHMgaXMgYWN0dWFsbHkgYSBSZWFjdEVsZW1lbnRcbiAgcmV0dXJuIHRoaXMucHJvcHM7XG59O1xuXG4vKipcbiAqIE1vdW50aW5nIGlzIHRoZSBwcm9jZXNzIG9mIGluaXRpYWxpemluZyBhIFJlYWN0IGNvbXBvbmVudCBieSBjcmVhdGluZyBpdHNcbiAqIHJlcHJlc2VudGF0aXZlIERPTSBlbGVtZW50cyBhbmQgaW5zZXJ0aW5nIHRoZW0gaW50byBhIHN1cHBsaWVkIGBjb250YWluZXJgLlxuICogQW55IHByaW9yIGNvbnRlbnQgaW5zaWRlIGBjb250YWluZXJgIGlzIGRlc3Ryb3llZCBpbiB0aGUgcHJvY2Vzcy5cbiAqXG4gKiAgIFJlYWN0TW91bnQucmVuZGVyKFxuICogICAgIGNvbXBvbmVudCxcbiAqICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGFpbmVyJylcbiAqICAgKTtcbiAqXG4gKiAgIDxkaXYgaWQ9XCJjb250YWluZXJcIj4gICAgICAgICAgICAgICAgICAgPC0tIFN1cHBsaWVkIGBjb250YWluZXJgLlxuICogICAgIDxkaXYgZGF0YS1yZWFjdGlkPVwiLjNcIj4gICAgICAgICAgICAgIDwtLSBSZW5kZXJlZCByZWFjdFJvb3Qgb2YgUmVhY3RcbiAqICAgICAgIC8vIC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudC5cbiAqICAgICA8L2Rpdj5cbiAqICAgPC9kaXY+XG4gKlxuICogSW5zaWRlIG9mIGBjb250YWluZXJgLCB0aGUgZmlyc3QgZWxlbWVudCByZW5kZXJlZCBpcyB0aGUgXCJyZWFjdFJvb3RcIi5cbiAqL1xudmFyIFJlYWN0TW91bnQgPSB7XG5cbiAgVG9wTGV2ZWxXcmFwcGVyOiBUb3BMZXZlbFdyYXBwZXIsXG5cbiAgLyoqIEV4cG9zZWQgZm9yIGRlYnVnZ2luZyBwdXJwb3NlcyAqKi9cbiAgX2luc3RhbmNlc0J5UmVhY3RSb290SUQ6IGluc3RhbmNlc0J5UmVhY3RSb290SUQsXG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgYSBob29rIHByb3ZpZGVkIHRvIHN1cHBvcnQgcmVuZGVyaW5nIFJlYWN0IGNvbXBvbmVudHMgd2hpbGVcbiAgICogZW5zdXJpbmcgdGhhdCB0aGUgYXBwYXJlbnQgc2Nyb2xsIHBvc2l0aW9uIG9mIGl0cyBgY29udGFpbmVyYCBkb2VzIG5vdFxuICAgKiBjaGFuZ2UuXG4gICAqXG4gICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gY29udGFpbmVyIFRoZSBgY29udGFpbmVyYCBiZWluZyByZW5kZXJlZCBpbnRvLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSByZW5kZXJDYWxsYmFjayBUaGlzIG11c3QgYmUgY2FsbGVkIG9uY2UgdG8gZG8gdGhlIHJlbmRlci5cbiAgICovXG4gIHNjcm9sbE1vbml0b3I6IGZ1bmN0aW9uIChjb250YWluZXIsIHJlbmRlckNhbGxiYWNrKSB7XG4gICAgcmVuZGVyQ2FsbGJhY2soKTtcbiAgfSxcblxuICAvKipcbiAgICogVGFrZSBhIGNvbXBvbmVudCB0aGF0J3MgYWxyZWFkeSBtb3VudGVkIGludG8gdGhlIERPTSBhbmQgcmVwbGFjZSBpdHMgcHJvcHNcbiAgICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gcHJldkNvbXBvbmVudCBjb21wb25lbnQgaW5zdGFuY2UgYWxyZWFkeSBpbiB0aGUgRE9NXG4gICAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBuZXh0RWxlbWVudCBjb21wb25lbnQgaW5zdGFuY2UgdG8gcmVuZGVyXG4gICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gY29udGFpbmVyIGNvbnRhaW5lciB0byByZW5kZXIgaW50b1xuICAgKiBAcGFyYW0gez9mdW5jdGlvbn0gY2FsbGJhY2sgZnVuY3Rpb24gdHJpZ2dlcmVkIG9uIGNvbXBsZXRpb25cbiAgICovXG4gIF91cGRhdGVSb290Q29tcG9uZW50OiBmdW5jdGlvbiAocHJldkNvbXBvbmVudCwgbmV4dEVsZW1lbnQsIGNvbnRhaW5lciwgY2FsbGJhY2spIHtcbiAgICBSZWFjdE1vdW50LnNjcm9sbE1vbml0b3IoY29udGFpbmVyLCBmdW5jdGlvbiAoKSB7XG4gICAgICBSZWFjdFVwZGF0ZVF1ZXVlLmVucXVldWVFbGVtZW50SW50ZXJuYWwocHJldkNvbXBvbmVudCwgbmV4dEVsZW1lbnQpO1xuICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgIFJlYWN0VXBkYXRlUXVldWUuZW5xdWV1ZUNhbGxiYWNrSW50ZXJuYWwocHJldkNvbXBvbmVudCwgY2FsbGJhY2spO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIC8vIFJlY29yZCB0aGUgcm9vdCBlbGVtZW50IGluIGNhc2UgaXQgbGF0ZXIgZ2V0cyB0cmFuc3BsYW50ZWQuXG4gICAgICByb290RWxlbWVudHNCeVJlYWN0Um9vdElEW2dldFJlYWN0Um9vdElEKGNvbnRhaW5lcildID0gZ2V0UmVhY3RSb290RWxlbWVudEluQ29udGFpbmVyKGNvbnRhaW5lcik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHByZXZDb21wb25lbnQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVyIGEgY29tcG9uZW50IGludG8gdGhlIGluc3RhbmNlIG1hcCBhbmQgc3RhcnRzIHNjcm9sbCB2YWx1ZVxuICAgKiBtb25pdG9yaW5nXG4gICAqIEBwYXJhbSB7UmVhY3RDb21wb25lbnR9IG5leHRDb21wb25lbnQgY29tcG9uZW50IGluc3RhbmNlIHRvIHJlbmRlclxuICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGNvbnRhaW5lciBjb250YWluZXIgdG8gcmVuZGVyIGludG9cbiAgICogQHJldHVybiB7c3RyaW5nfSByZWFjdFJvb3QgSUQgcHJlZml4XG4gICAqL1xuICBfcmVnaXN0ZXJDb21wb25lbnQ6IGZ1bmN0aW9uIChuZXh0Q29tcG9uZW50LCBjb250YWluZXIpIHtcbiAgICAhKGNvbnRhaW5lciAmJiAoY29udGFpbmVyLm5vZGVUeXBlID09PSBFTEVNRU5UX05PREVfVFlQRSB8fCBjb250YWluZXIubm9kZVR5cGUgPT09IERPQ19OT0RFX1RZUEUgfHwgY29udGFpbmVyLm5vZGVUeXBlID09PSBET0NVTUVOVF9GUkFHTUVOVF9OT0RFX1RZUEUpKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdfcmVnaXN0ZXJDb21wb25lbnQoLi4uKTogVGFyZ2V0IGNvbnRhaW5lciBpcyBub3QgYSBET00gZWxlbWVudC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuZW5zdXJlU2Nyb2xsVmFsdWVNb25pdG9yaW5nKCk7XG5cbiAgICB2YXIgcmVhY3RSb290SUQgPSBSZWFjdE1vdW50LnJlZ2lzdGVyQ29udGFpbmVyKGNvbnRhaW5lcik7XG4gICAgaW5zdGFuY2VzQnlSZWFjdFJvb3RJRFtyZWFjdFJvb3RJRF0gPSBuZXh0Q29tcG9uZW50O1xuICAgIHJldHVybiByZWFjdFJvb3RJRDtcbiAgfSxcblxuICAvKipcbiAgICogUmVuZGVyIGEgbmV3IGNvbXBvbmVudCBpbnRvIHRoZSBET00uXG4gICAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBuZXh0RWxlbWVudCBlbGVtZW50IHRvIHJlbmRlclxuICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGNvbnRhaW5lciBjb250YWluZXIgdG8gcmVuZGVyIGludG9cbiAgICogQHBhcmFtIHtib29sZWFufSBzaG91bGRSZXVzZU1hcmt1cCBpZiB3ZSBzaG91bGQgc2tpcCB0aGUgbWFya3VwIGluc2VydGlvblxuICAgKiBAcmV0dXJuIHtSZWFjdENvbXBvbmVudH0gbmV4dENvbXBvbmVudFxuICAgKi9cbiAgX3JlbmRlck5ld1Jvb3RDb21wb25lbnQ6IGZ1bmN0aW9uIChuZXh0RWxlbWVudCwgY29udGFpbmVyLCBzaG91bGRSZXVzZU1hcmt1cCwgY29udGV4dCkge1xuICAgIC8vIFZhcmlvdXMgcGFydHMgb2Ygb3VyIGNvZGUgKHN1Y2ggYXMgUmVhY3RDb21wb3NpdGVDb21wb25lbnQnc1xuICAgIC8vIF9yZW5kZXJWYWxpZGF0ZWRDb21wb25lbnQpIGFzc3VtZSB0aGF0IGNhbGxzIHRvIHJlbmRlciBhcmVuJ3QgbmVzdGVkO1xuICAgIC8vIHZlcmlmeSB0aGF0IHRoYXQncyB0aGUgY2FzZS5cbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50ID09IG51bGwsICdfcmVuZGVyTmV3Um9vdENvbXBvbmVudCgpOiBSZW5kZXIgbWV0aG9kcyBzaG91bGQgYmUgYSBwdXJlIGZ1bmN0aW9uICcgKyAnb2YgcHJvcHMgYW5kIHN0YXRlOyB0cmlnZ2VyaW5nIG5lc3RlZCBjb21wb25lbnQgdXBkYXRlcyBmcm9tICcgKyAncmVuZGVyIGlzIG5vdCBhbGxvd2VkLiBJZiBuZWNlc3NhcnksIHRyaWdnZXIgbmVzdGVkIHVwZGF0ZXMgaW4gJyArICdjb21wb25lbnREaWRVcGRhdGUuIENoZWNrIHRoZSByZW5kZXIgbWV0aG9kIG9mICVzLicsIFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQgJiYgUmVhY3RDdXJyZW50T3duZXIuY3VycmVudC5nZXROYW1lKCkgfHwgJ1JlYWN0Q29tcG9zaXRlQ29tcG9uZW50JykgOiB1bmRlZmluZWQ7XG5cbiAgICB2YXIgY29tcG9uZW50SW5zdGFuY2UgPSBpbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50KG5leHRFbGVtZW50LCBudWxsKTtcbiAgICB2YXIgcmVhY3RSb290SUQgPSBSZWFjdE1vdW50Ll9yZWdpc3RlckNvbXBvbmVudChjb21wb25lbnRJbnN0YW5jZSwgY29udGFpbmVyKTtcblxuICAgIC8vIFRoZSBpbml0aWFsIHJlbmRlciBpcyBzeW5jaHJvbm91cyBidXQgYW55IHVwZGF0ZXMgdGhhdCBoYXBwZW4gZHVyaW5nXG4gICAgLy8gcmVuZGVyaW5nLCBpbiBjb21wb25lbnRXaWxsTW91bnQgb3IgY29tcG9uZW50RGlkTW91bnQsIHdpbGwgYmUgYmF0Y2hlZFxuICAgIC8vIGFjY29yZGluZyB0byB0aGUgY3VycmVudCBiYXRjaGluZyBzdHJhdGVneS5cblxuICAgIFJlYWN0VXBkYXRlcy5iYXRjaGVkVXBkYXRlcyhiYXRjaGVkTW91bnRDb21wb25lbnRJbnRvTm9kZSwgY29tcG9uZW50SW5zdGFuY2UsIHJlYWN0Um9vdElELCBjb250YWluZXIsIHNob3VsZFJldXNlTWFya3VwLCBjb250ZXh0KTtcblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAvLyBSZWNvcmQgdGhlIHJvb3QgZWxlbWVudCBpbiBjYXNlIGl0IGxhdGVyIGdldHMgdHJhbnNwbGFudGVkLlxuICAgICAgcm9vdEVsZW1lbnRzQnlSZWFjdFJvb3RJRFtyZWFjdFJvb3RJRF0gPSBnZXRSZWFjdFJvb3RFbGVtZW50SW5Db250YWluZXIoY29udGFpbmVyKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY29tcG9uZW50SW5zdGFuY2U7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgYSBSZWFjdCBjb21wb25lbnQgaW50byB0aGUgRE9NIGluIHRoZSBzdXBwbGllZCBgY29udGFpbmVyYC5cbiAgICpcbiAgICogSWYgdGhlIFJlYWN0IGNvbXBvbmVudCB3YXMgcHJldmlvdXNseSByZW5kZXJlZCBpbnRvIGBjb250YWluZXJgLCB0aGlzIHdpbGxcbiAgICogcGVyZm9ybSBhbiB1cGRhdGUgb24gaXQgYW5kIG9ubHkgbXV0YXRlIHRoZSBET00gYXMgbmVjZXNzYXJ5IHRvIHJlZmxlY3QgdGhlXG4gICAqIGxhdGVzdCBSZWFjdCBjb21wb25lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RDb21wb25lbnR9IHBhcmVudENvbXBvbmVudCBUaGUgY29uY2VwdHVhbCBwYXJlbnQgb2YgdGhpcyByZW5kZXIgdHJlZS5cbiAgICogQHBhcmFtIHtSZWFjdEVsZW1lbnR9IG5leHRFbGVtZW50IENvbXBvbmVudCBlbGVtZW50IHRvIHJlbmRlci5cbiAgICogQHBhcmFtIHtET01FbGVtZW50fSBjb250YWluZXIgRE9NIGVsZW1lbnQgdG8gcmVuZGVyIGludG8uXG4gICAqIEBwYXJhbSB7P2Z1bmN0aW9ufSBjYWxsYmFjayBmdW5jdGlvbiB0cmlnZ2VyZWQgb24gY29tcGxldGlvblxuICAgKiBAcmV0dXJuIHtSZWFjdENvbXBvbmVudH0gQ29tcG9uZW50IGluc3RhbmNlIHJlbmRlcmVkIGluIGBjb250YWluZXJgLlxuICAgKi9cbiAgcmVuZGVyU3VidHJlZUludG9Db250YWluZXI6IGZ1bmN0aW9uIChwYXJlbnRDb21wb25lbnQsIG5leHRFbGVtZW50LCBjb250YWluZXIsIGNhbGxiYWNrKSB7XG4gICAgIShwYXJlbnRDb21wb25lbnQgIT0gbnVsbCAmJiBwYXJlbnRDb21wb25lbnQuX3JlYWN0SW50ZXJuYWxJbnN0YW5jZSAhPSBudWxsKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdwYXJlbnRDb21wb25lbnQgbXVzdCBiZSBhIHZhbGlkIFJlYWN0IENvbXBvbmVudCcpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICByZXR1cm4gUmVhY3RNb3VudC5fcmVuZGVyU3VidHJlZUludG9Db250YWluZXIocGFyZW50Q29tcG9uZW50LCBuZXh0RWxlbWVudCwgY29udGFpbmVyLCBjYWxsYmFjayk7XG4gIH0sXG5cbiAgX3JlbmRlclN1YnRyZWVJbnRvQ29udGFpbmVyOiBmdW5jdGlvbiAocGFyZW50Q29tcG9uZW50LCBuZXh0RWxlbWVudCwgY29udGFpbmVyLCBjYWxsYmFjaykge1xuICAgICFSZWFjdEVsZW1lbnQuaXNWYWxpZEVsZW1lbnQobmV4dEVsZW1lbnQpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0RE9NLnJlbmRlcigpOiBJbnZhbGlkIGNvbXBvbmVudCBlbGVtZW50LiVzJywgdHlwZW9mIG5leHRFbGVtZW50ID09PSAnc3RyaW5nJyA/ICcgSW5zdGVhZCBvZiBwYXNzaW5nIGFuIGVsZW1lbnQgc3RyaW5nLCBtYWtlIHN1cmUgdG8gaW5zdGFudGlhdGUgJyArICdpdCBieSBwYXNzaW5nIGl0IHRvIFJlYWN0LmNyZWF0ZUVsZW1lbnQuJyA6IHR5cGVvZiBuZXh0RWxlbWVudCA9PT0gJ2Z1bmN0aW9uJyA/ICcgSW5zdGVhZCBvZiBwYXNzaW5nIGEgY29tcG9uZW50IGNsYXNzLCBtYWtlIHN1cmUgdG8gaW5zdGFudGlhdGUgJyArICdpdCBieSBwYXNzaW5nIGl0IHRvIFJlYWN0LmNyZWF0ZUVsZW1lbnQuJyA6XG4gICAgLy8gQ2hlY2sgaWYgaXQgcXVhY2tzIGxpa2UgYW4gZWxlbWVudFxuICAgIG5leHRFbGVtZW50ICE9IG51bGwgJiYgbmV4dEVsZW1lbnQucHJvcHMgIT09IHVuZGVmaW5lZCA/ICcgVGhpcyBtYXkgYmUgY2F1c2VkIGJ5IHVuaW50ZW50aW9uYWxseSBsb2FkaW5nIHR3byBpbmRlcGVuZGVudCAnICsgJ2NvcGllcyBvZiBSZWFjdC4nIDogJycpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKCFjb250YWluZXIgfHwgIWNvbnRhaW5lci50YWdOYW1lIHx8IGNvbnRhaW5lci50YWdOYW1lLnRvVXBwZXJDYXNlKCkgIT09ICdCT0RZJywgJ3JlbmRlcigpOiBSZW5kZXJpbmcgY29tcG9uZW50cyBkaXJlY3RseSBpbnRvIGRvY3VtZW50LmJvZHkgaXMgJyArICdkaXNjb3VyYWdlZCwgc2luY2UgaXRzIGNoaWxkcmVuIGFyZSBvZnRlbiBtYW5pcHVsYXRlZCBieSB0aGlyZC1wYXJ0eSAnICsgJ3NjcmlwdHMgYW5kIGJyb3dzZXIgZXh0ZW5zaW9ucy4gVGhpcyBtYXkgbGVhZCB0byBzdWJ0bGUgJyArICdyZWNvbmNpbGlhdGlvbiBpc3N1ZXMuIFRyeSByZW5kZXJpbmcgaW50byBhIGNvbnRhaW5lciBlbGVtZW50IGNyZWF0ZWQgJyArICdmb3IgeW91ciBhcHAuJykgOiB1bmRlZmluZWQ7XG5cbiAgICB2YXIgbmV4dFdyYXBwZWRFbGVtZW50ID0gbmV3IFJlYWN0RWxlbWVudChUb3BMZXZlbFdyYXBwZXIsIG51bGwsIG51bGwsIG51bGwsIG51bGwsIG51bGwsIG5leHRFbGVtZW50KTtcblxuICAgIHZhciBwcmV2Q29tcG9uZW50ID0gaW5zdGFuY2VzQnlSZWFjdFJvb3RJRFtnZXRSZWFjdFJvb3RJRChjb250YWluZXIpXTtcblxuICAgIGlmIChwcmV2Q29tcG9uZW50KSB7XG4gICAgICB2YXIgcHJldldyYXBwZWRFbGVtZW50ID0gcHJldkNvbXBvbmVudC5fY3VycmVudEVsZW1lbnQ7XG4gICAgICB2YXIgcHJldkVsZW1lbnQgPSBwcmV2V3JhcHBlZEVsZW1lbnQucHJvcHM7XG4gICAgICBpZiAoc2hvdWxkVXBkYXRlUmVhY3RDb21wb25lbnQocHJldkVsZW1lbnQsIG5leHRFbGVtZW50KSkge1xuICAgICAgICB2YXIgcHVibGljSW5zdCA9IHByZXZDb21wb25lbnQuX3JlbmRlcmVkQ29tcG9uZW50LmdldFB1YmxpY0luc3RhbmNlKCk7XG4gICAgICAgIHZhciB1cGRhdGVkQ2FsbGJhY2sgPSBjYWxsYmFjayAmJiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY2FsbGJhY2suY2FsbChwdWJsaWNJbnN0KTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVhY3RNb3VudC5fdXBkYXRlUm9vdENvbXBvbmVudChwcmV2Q29tcG9uZW50LCBuZXh0V3JhcHBlZEVsZW1lbnQsIGNvbnRhaW5lciwgdXBkYXRlZENhbGxiYWNrKTtcbiAgICAgICAgcmV0dXJuIHB1YmxpY0luc3Q7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBSZWFjdE1vdW50LnVubW91bnRDb21wb25lbnRBdE5vZGUoY29udGFpbmVyKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgcmVhY3RSb290RWxlbWVudCA9IGdldFJlYWN0Um9vdEVsZW1lbnRJbkNvbnRhaW5lcihjb250YWluZXIpO1xuICAgIHZhciBjb250YWluZXJIYXNSZWFjdE1hcmt1cCA9IHJlYWN0Um9vdEVsZW1lbnQgJiYgISFpbnRlcm5hbEdldElEKHJlYWN0Um9vdEVsZW1lbnQpO1xuICAgIHZhciBjb250YWluZXJIYXNOb25Sb290UmVhY3RDaGlsZCA9IGhhc05vblJvb3RSZWFjdENoaWxkKGNvbnRhaW5lcik7XG5cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoIWNvbnRhaW5lckhhc05vblJvb3RSZWFjdENoaWxkLCAncmVuZGVyKC4uLik6IFJlcGxhY2luZyBSZWFjdC1yZW5kZXJlZCBjaGlsZHJlbiB3aXRoIGEgbmV3IHJvb3QgJyArICdjb21wb25lbnQuIElmIHlvdSBpbnRlbmRlZCB0byB1cGRhdGUgdGhlIGNoaWxkcmVuIG9mIHRoaXMgbm9kZSwgJyArICd5b3Ugc2hvdWxkIGluc3RlYWQgaGF2ZSB0aGUgZXhpc3RpbmcgY2hpbGRyZW4gdXBkYXRlIHRoZWlyIHN0YXRlICcgKyAnYW5kIHJlbmRlciB0aGUgbmV3IGNvbXBvbmVudHMgaW5zdGVhZCBvZiBjYWxsaW5nIFJlYWN0RE9NLnJlbmRlci4nKSA6IHVuZGVmaW5lZDtcblxuICAgICAgaWYgKCFjb250YWluZXJIYXNSZWFjdE1hcmt1cCB8fCByZWFjdFJvb3RFbGVtZW50Lm5leHRTaWJsaW5nKSB7XG4gICAgICAgIHZhciByb290RWxlbWVudFNpYmxpbmcgPSByZWFjdFJvb3RFbGVtZW50O1xuICAgICAgICB3aGlsZSAocm9vdEVsZW1lbnRTaWJsaW5nKSB7XG4gICAgICAgICAgaWYgKGludGVybmFsR2V0SUQocm9vdEVsZW1lbnRTaWJsaW5nKSkge1xuICAgICAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdyZW5kZXIoKTogVGFyZ2V0IG5vZGUgaGFzIG1hcmt1cCByZW5kZXJlZCBieSBSZWFjdCwgYnV0IHRoZXJlICcgKyAnYXJlIHVucmVsYXRlZCBub2RlcyBhcyB3ZWxsLiBUaGlzIGlzIG1vc3QgY29tbW9ubHkgY2F1c2VkIGJ5ICcgKyAnd2hpdGUtc3BhY2UgaW5zZXJ0ZWQgYXJvdW5kIHNlcnZlci1yZW5kZXJlZCBtYXJrdXAuJykgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgcm9vdEVsZW1lbnRTaWJsaW5nID0gcm9vdEVsZW1lbnRTaWJsaW5nLm5leHRTaWJsaW5nO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHNob3VsZFJldXNlTWFya3VwID0gY29udGFpbmVySGFzUmVhY3RNYXJrdXAgJiYgIXByZXZDb21wb25lbnQgJiYgIWNvbnRhaW5lckhhc05vblJvb3RSZWFjdENoaWxkO1xuICAgIHZhciBjb21wb25lbnQgPSBSZWFjdE1vdW50Ll9yZW5kZXJOZXdSb290Q29tcG9uZW50KG5leHRXcmFwcGVkRWxlbWVudCwgY29udGFpbmVyLCBzaG91bGRSZXVzZU1hcmt1cCwgcGFyZW50Q29tcG9uZW50ICE9IG51bGwgPyBwYXJlbnRDb21wb25lbnQuX3JlYWN0SW50ZXJuYWxJbnN0YW5jZS5fcHJvY2Vzc0NoaWxkQ29udGV4dChwYXJlbnRDb21wb25lbnQuX3JlYWN0SW50ZXJuYWxJbnN0YW5jZS5fY29udGV4dCkgOiBlbXB0eU9iamVjdCkuX3JlbmRlcmVkQ29tcG9uZW50LmdldFB1YmxpY0luc3RhbmNlKCk7XG4gICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICBjYWxsYmFjay5jYWxsKGNvbXBvbmVudCk7XG4gICAgfVxuICAgIHJldHVybiBjb21wb25lbnQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgYSBSZWFjdCBjb21wb25lbnQgaW50byB0aGUgRE9NIGluIHRoZSBzdXBwbGllZCBgY29udGFpbmVyYC5cbiAgICpcbiAgICogSWYgdGhlIFJlYWN0IGNvbXBvbmVudCB3YXMgcHJldmlvdXNseSByZW5kZXJlZCBpbnRvIGBjb250YWluZXJgLCB0aGlzIHdpbGxcbiAgICogcGVyZm9ybSBhbiB1cGRhdGUgb24gaXQgYW5kIG9ubHkgbXV0YXRlIHRoZSBET00gYXMgbmVjZXNzYXJ5IHRvIHJlZmxlY3QgdGhlXG4gICAqIGxhdGVzdCBSZWFjdCBjb21wb25lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBuZXh0RWxlbWVudCBDb21wb25lbnQgZWxlbWVudCB0byByZW5kZXIuXG4gICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gY29udGFpbmVyIERPTSBlbGVtZW50IHRvIHJlbmRlciBpbnRvLlxuICAgKiBAcGFyYW0gez9mdW5jdGlvbn0gY2FsbGJhY2sgZnVuY3Rpb24gdHJpZ2dlcmVkIG9uIGNvbXBsZXRpb25cbiAgICogQHJldHVybiB7UmVhY3RDb21wb25lbnR9IENvbXBvbmVudCBpbnN0YW5jZSByZW5kZXJlZCBpbiBgY29udGFpbmVyYC5cbiAgICovXG4gIHJlbmRlcjogZnVuY3Rpb24gKG5leHRFbGVtZW50LCBjb250YWluZXIsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIFJlYWN0TW91bnQuX3JlbmRlclN1YnRyZWVJbnRvQ29udGFpbmVyKG51bGwsIG5leHRFbGVtZW50LCBjb250YWluZXIsIGNhbGxiYWNrKTtcbiAgfSxcblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgY29udGFpbmVyIG5vZGUgaW50byB3aGljaCBSZWFjdCBjb21wb25lbnRzIHdpbGwgYmUgcmVuZGVyZWQuXG4gICAqIFRoaXMgYWxzbyBjcmVhdGVzIHRoZSBcInJlYWN0Um9vdFwiIElEIHRoYXQgd2lsbCBiZSBhc3NpZ25lZCB0byB0aGUgZWxlbWVudFxuICAgKiByZW5kZXJlZCB3aXRoaW4uXG4gICAqXG4gICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gY29udGFpbmVyIERPTSBlbGVtZW50IHRvIHJlZ2lzdGVyIGFzIGEgY29udGFpbmVyLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBcInJlYWN0Um9vdFwiIElEIG9mIGVsZW1lbnRzIHJlbmRlcmVkIHdpdGhpbi5cbiAgICovXG4gIHJlZ2lzdGVyQ29udGFpbmVyOiBmdW5jdGlvbiAoY29udGFpbmVyKSB7XG4gICAgdmFyIHJlYWN0Um9vdElEID0gZ2V0UmVhY3RSb290SUQoY29udGFpbmVyKTtcbiAgICBpZiAocmVhY3RSb290SUQpIHtcbiAgICAgIC8vIElmIG9uZSBleGlzdHMsIG1ha2Ugc3VyZSBpdCBpcyBhIHZhbGlkIFwicmVhY3RSb290XCIgSUQuXG4gICAgICByZWFjdFJvb3RJRCA9IFJlYWN0SW5zdGFuY2VIYW5kbGVzLmdldFJlYWN0Um9vdElERnJvbU5vZGVJRChyZWFjdFJvb3RJRCk7XG4gICAgfVxuICAgIGlmICghcmVhY3RSb290SUQpIHtcbiAgICAgIC8vIE5vIHZhbGlkIFwicmVhY3RSb290XCIgSUQgZm91bmQsIGNyZWF0ZSBvbmUuXG4gICAgICByZWFjdFJvb3RJRCA9IFJlYWN0SW5zdGFuY2VIYW5kbGVzLmNyZWF0ZVJlYWN0Um9vdElEKCk7XG4gICAgfVxuICAgIGNvbnRhaW5lcnNCeVJlYWN0Um9vdElEW3JlYWN0Um9vdElEXSA9IGNvbnRhaW5lcjtcbiAgICByZXR1cm4gcmVhY3RSb290SUQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFVubW91bnRzIGFuZCBkZXN0cm95cyB0aGUgUmVhY3QgY29tcG9uZW50IHJlbmRlcmVkIGluIHRoZSBgY29udGFpbmVyYC5cbiAgICpcbiAgICogQHBhcmFtIHtET01FbGVtZW50fSBjb250YWluZXIgRE9NIGVsZW1lbnQgY29udGFpbmluZyBhIFJlYWN0IGNvbXBvbmVudC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBhIGNvbXBvbmVudCB3YXMgZm91bmQgaW4gYW5kIHVubW91bnRlZCBmcm9tXG4gICAqICAgICAgICAgICAgICAgICAgIGBjb250YWluZXJgXG4gICAqL1xuICB1bm1vdW50Q29tcG9uZW50QXROb2RlOiBmdW5jdGlvbiAoY29udGFpbmVyKSB7XG4gICAgLy8gVmFyaW91cyBwYXJ0cyBvZiBvdXIgY29kZSAoc3VjaCBhcyBSZWFjdENvbXBvc2l0ZUNvbXBvbmVudCdzXG4gICAgLy8gX3JlbmRlclZhbGlkYXRlZENvbXBvbmVudCkgYXNzdW1lIHRoYXQgY2FsbHMgdG8gcmVuZGVyIGFyZW4ndCBuZXN0ZWQ7XG4gICAgLy8gdmVyaWZ5IHRoYXQgdGhhdCdzIHRoZSBjYXNlLiAoU3RyaWN0bHkgc3BlYWtpbmcsIHVubW91bnRpbmcgd29uJ3QgY2F1c2UgYVxuICAgIC8vIHJlbmRlciBidXQgd2Ugc3RpbGwgZG9uJ3QgZXhwZWN0IHRvIGJlIGluIGEgcmVuZGVyIGNhbGwgaGVyZS4pXG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoUmVhY3RDdXJyZW50T3duZXIuY3VycmVudCA9PSBudWxsLCAndW5tb3VudENvbXBvbmVudEF0Tm9kZSgpOiBSZW5kZXIgbWV0aG9kcyBzaG91bGQgYmUgYSBwdXJlIGZ1bmN0aW9uICcgKyAnb2YgcHJvcHMgYW5kIHN0YXRlOyB0cmlnZ2VyaW5nIG5lc3RlZCBjb21wb25lbnQgdXBkYXRlcyBmcm9tIHJlbmRlciAnICsgJ2lzIG5vdCBhbGxvd2VkLiBJZiBuZWNlc3NhcnksIHRyaWdnZXIgbmVzdGVkIHVwZGF0ZXMgaW4gJyArICdjb21wb25lbnREaWRVcGRhdGUuIENoZWNrIHRoZSByZW5kZXIgbWV0aG9kIG9mICVzLicsIFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQgJiYgUmVhY3RDdXJyZW50T3duZXIuY3VycmVudC5nZXROYW1lKCkgfHwgJ1JlYWN0Q29tcG9zaXRlQ29tcG9uZW50JykgOiB1bmRlZmluZWQ7XG5cbiAgICAhKGNvbnRhaW5lciAmJiAoY29udGFpbmVyLm5vZGVUeXBlID09PSBFTEVNRU5UX05PREVfVFlQRSB8fCBjb250YWluZXIubm9kZVR5cGUgPT09IERPQ19OT0RFX1RZUEUgfHwgY29udGFpbmVyLm5vZGVUeXBlID09PSBET0NVTUVOVF9GUkFHTUVOVF9OT0RFX1RZUEUpKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICd1bm1vdW50Q29tcG9uZW50QXROb2RlKC4uLik6IFRhcmdldCBjb250YWluZXIgaXMgbm90IGEgRE9NIGVsZW1lbnQuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgdmFyIHJlYWN0Um9vdElEID0gZ2V0UmVhY3RSb290SUQoY29udGFpbmVyKTtcbiAgICB2YXIgY29tcG9uZW50ID0gaW5zdGFuY2VzQnlSZWFjdFJvb3RJRFtyZWFjdFJvb3RJRF07XG4gICAgaWYgKCFjb21wb25lbnQpIHtcbiAgICAgIC8vIENoZWNrIGlmIHRoZSBub2RlIGJlaW5nIHVubW91bnRlZCB3YXMgcmVuZGVyZWQgYnkgUmVhY3QsIGJ1dCBpc24ndCBhXG4gICAgICAvLyByb290IG5vZGUuXG4gICAgICB2YXIgY29udGFpbmVySGFzTm9uUm9vdFJlYWN0Q2hpbGQgPSBoYXNOb25Sb290UmVhY3RDaGlsZChjb250YWluZXIpO1xuXG4gICAgICAvLyBDaGVjayBpZiB0aGUgY29udGFpbmVyIGl0c2VsZiBpcyBhIFJlYWN0IHJvb3Qgbm9kZS5cbiAgICAgIHZhciBjb250YWluZXJJRCA9IGludGVybmFsR2V0SUQoY29udGFpbmVyKTtcbiAgICAgIHZhciBpc0NvbnRhaW5lclJlYWN0Um9vdCA9IGNvbnRhaW5lcklEICYmIGNvbnRhaW5lcklEID09PSBSZWFjdEluc3RhbmNlSGFuZGxlcy5nZXRSZWFjdFJvb3RJREZyb21Ob2RlSUQoY29udGFpbmVySUQpO1xuXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyghY29udGFpbmVySGFzTm9uUm9vdFJlYWN0Q2hpbGQsICd1bm1vdW50Q29tcG9uZW50QXROb2RlKCk6IFRoZSBub2RlIHlvdVxcJ3JlIGF0dGVtcHRpbmcgdG8gdW5tb3VudCAnICsgJ3dhcyByZW5kZXJlZCBieSBSZWFjdCBhbmQgaXMgbm90IGEgdG9wLWxldmVsIGNvbnRhaW5lci4gJXMnLCBpc0NvbnRhaW5lclJlYWN0Um9vdCA/ICdZb3UgbWF5IGhhdmUgYWNjaWRlbnRhbGx5IHBhc3NlZCBpbiBhIFJlYWN0IHJvb3Qgbm9kZSBpbnN0ZWFkICcgKyAnb2YgaXRzIGNvbnRhaW5lci4nIDogJ0luc3RlYWQsIGhhdmUgdGhlIHBhcmVudCBjb21wb25lbnQgdXBkYXRlIGl0cyBzdGF0ZSBhbmQgJyArICdyZXJlbmRlciBpbiBvcmRlciB0byByZW1vdmUgdGhpcyBjb21wb25lbnQuJykgOiB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgUmVhY3RVcGRhdGVzLmJhdGNoZWRVcGRhdGVzKHVubW91bnRDb21wb25lbnRGcm9tTm9kZSwgY29tcG9uZW50LCBjb250YWluZXIpO1xuICAgIGRlbGV0ZSBpbnN0YW5jZXNCeVJlYWN0Um9vdElEW3JlYWN0Um9vdElEXTtcbiAgICBkZWxldGUgY29udGFpbmVyc0J5UmVhY3RSb290SURbcmVhY3RSb290SURdO1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBkZWxldGUgcm9vdEVsZW1lbnRzQnlSZWFjdFJvb3RJRFtyZWFjdFJvb3RJRF07XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBGaW5kcyB0aGUgY29udGFpbmVyIERPTSBlbGVtZW50IHRoYXQgY29udGFpbnMgUmVhY3QgY29tcG9uZW50IHRvIHdoaWNoIHRoZVxuICAgKiBzdXBwbGllZCBET00gYGlkYCBiZWxvbmdzLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgVGhlIElEIG9mIGFuIGVsZW1lbnQgcmVuZGVyZWQgYnkgYSBSZWFjdCBjb21wb25lbnQuXG4gICAqIEByZXR1cm4gez9ET01FbGVtZW50fSBET00gZWxlbWVudCB0aGF0IGNvbnRhaW5zIHRoZSBgaWRgLlxuICAgKi9cbiAgZmluZFJlYWN0Q29udGFpbmVyRm9ySUQ6IGZ1bmN0aW9uIChpZCkge1xuICAgIHZhciByZWFjdFJvb3RJRCA9IFJlYWN0SW5zdGFuY2VIYW5kbGVzLmdldFJlYWN0Um9vdElERnJvbU5vZGVJRChpZCk7XG4gICAgdmFyIGNvbnRhaW5lciA9IGNvbnRhaW5lcnNCeVJlYWN0Um9vdElEW3JlYWN0Um9vdElEXTtcblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB2YXIgcm9vdEVsZW1lbnQgPSByb290RWxlbWVudHNCeVJlYWN0Um9vdElEW3JlYWN0Um9vdElEXTtcbiAgICAgIGlmIChyb290RWxlbWVudCAmJiByb290RWxlbWVudC5wYXJlbnROb2RlICE9PSBjb250YWluZXIpIHtcbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoXG4gICAgICAgIC8vIENhbGwgaW50ZXJuYWxHZXRJRCBoZXJlIGJlY2F1c2UgZ2V0SUQgY2FsbHMgaXNWYWxpZCB3aGljaCBjYWxsc1xuICAgICAgICAvLyBmaW5kUmVhY3RDb250YWluZXJGb3JJRCAodGhpcyBmdW5jdGlvbikuXG4gICAgICAgIGludGVybmFsR2V0SUQocm9vdEVsZW1lbnQpID09PSByZWFjdFJvb3RJRCwgJ1JlYWN0TW91bnQ6IFJvb3QgZWxlbWVudCBJRCBkaWZmZXJlZCBmcm9tIHJlYWN0Um9vdElELicpIDogdW5kZWZpbmVkO1xuICAgICAgICB2YXIgY29udGFpbmVyQ2hpbGQgPSBjb250YWluZXIuZmlyc3RDaGlsZDtcbiAgICAgICAgaWYgKGNvbnRhaW5lckNoaWxkICYmIHJlYWN0Um9vdElEID09PSBpbnRlcm5hbEdldElEKGNvbnRhaW5lckNoaWxkKSkge1xuICAgICAgICAgIC8vIElmIHRoZSBjb250YWluZXIgaGFzIGEgbmV3IGNoaWxkIHdpdGggdGhlIHNhbWUgSUQgYXMgdGhlIG9sZFxuICAgICAgICAgIC8vIHJvb3QgZWxlbWVudCwgdGhlbiByb290RWxlbWVudHNCeVJlYWN0Um9vdElEW3JlYWN0Um9vdElEXSBpc1xuICAgICAgICAgIC8vIGp1c3Qgc3RhbGUgYW5kIG5lZWRzIHRvIGJlIHVwZGF0ZWQuIFRoZSBjYXNlIHRoYXQgZGVzZXJ2ZXMgYVxuICAgICAgICAgIC8vIHdhcm5pbmcgaXMgd2hlbiB0aGUgY29udGFpbmVyIGlzIGVtcHR5LlxuICAgICAgICAgIHJvb3RFbGVtZW50c0J5UmVhY3RSb290SURbcmVhY3RSb290SURdID0gY29udGFpbmVyQ2hpbGQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdSZWFjdE1vdW50OiBSb290IGVsZW1lbnQgaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIGl0cyBvcmlnaW5hbCAnICsgJ2NvbnRhaW5lci4gTmV3IGNvbnRhaW5lcjogJXMnLCByb290RWxlbWVudC5wYXJlbnROb2RlKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjb250YWluZXI7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEZpbmRzIGFuIGVsZW1lbnQgcmVuZGVyZWQgYnkgUmVhY3Qgd2l0aCB0aGUgc3VwcGxpZWQgSUQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBJRCBvZiBhIERPTSBub2RlIGluIHRoZSBSZWFjdCBjb21wb25lbnQuXG4gICAqIEByZXR1cm4ge0RPTUVsZW1lbnR9IFJvb3QgRE9NIG5vZGUgb2YgdGhlIFJlYWN0IGNvbXBvbmVudC5cbiAgICovXG4gIGZpbmRSZWFjdE5vZGVCeUlEOiBmdW5jdGlvbiAoaWQpIHtcbiAgICB2YXIgcmVhY3RSb290ID0gUmVhY3RNb3VudC5maW5kUmVhY3RDb250YWluZXJGb3JJRChpZCk7XG4gICAgcmV0dXJuIFJlYWN0TW91bnQuZmluZENvbXBvbmVudFJvb3QocmVhY3RSb290LCBpZCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFRyYXZlcnNlcyB1cCB0aGUgYW5jZXN0b3JzIG9mIHRoZSBzdXBwbGllZCBub2RlIHRvIGZpbmQgYSBub2RlIHRoYXQgaXMgYVxuICAgKiBET00gcmVwcmVzZW50YXRpb24gb2YgYSBSZWFjdCBjb21wb25lbnQgcmVuZGVyZWQgYnkgdGhpcyBjb3B5IG9mIFJlYWN0LlxuICAgKlxuICAgKiBAcGFyYW0geyp9IG5vZGVcbiAgICogQHJldHVybiB7P0RPTUV2ZW50VGFyZ2V0fVxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGdldEZpcnN0UmVhY3RET006IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgcmV0dXJuIGZpbmRGaXJzdFJlYWN0RE9NSW1wbChub2RlKTtcbiAgfSxcblxuICAvKipcbiAgICogRmluZHMgYSBub2RlIHdpdGggdGhlIHN1cHBsaWVkIGB0YXJnZXRJRGAgaW5zaWRlIG9mIHRoZSBzdXBwbGllZFxuICAgKiBgYW5jZXN0b3JOb2RlYC4gIEV4cGxvaXRzIHRoZSBJRCBuYW1pbmcgc2NoZW1lIHRvIHBlcmZvcm0gdGhlIHNlYXJjaFxuICAgKiBxdWlja2x5LlxuICAgKlxuICAgKiBAcGFyYW0ge0RPTUV2ZW50VGFyZ2V0fSBhbmNlc3Rvck5vZGUgU2VhcmNoIGZyb20gdGhpcyByb290LlxuICAgKiBAcGFyYXJtIHtzdHJpbmd9IHRhcmdldElEIElEIG9mIHRoZSBET00gcmVwcmVzZW50YXRpb24gb2YgdGhlIGNvbXBvbmVudC5cbiAgICogQHJldHVybiB7RE9NRXZlbnRUYXJnZXR9IERPTSBub2RlIHdpdGggdGhlIHN1cHBsaWVkIGB0YXJnZXRJRGAuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZmluZENvbXBvbmVudFJvb3Q6IGZ1bmN0aW9uIChhbmNlc3Rvck5vZGUsIHRhcmdldElEKSB7XG4gICAgdmFyIGZpcnN0Q2hpbGRyZW4gPSBmaW5kQ29tcG9uZW50Um9vdFJldXNhYmxlQXJyYXk7XG4gICAgdmFyIGNoaWxkSW5kZXggPSAwO1xuXG4gICAgdmFyIGRlZXBlc3RBbmNlc3RvciA9IGZpbmREZWVwZXN0Q2FjaGVkQW5jZXN0b3IodGFyZ2V0SUQpIHx8IGFuY2VzdG9yTm9kZTtcblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAvLyBUaGlzIHdpbGwgdGhyb3cgb24gdGhlIG5leHQgbGluZTsgZ2l2ZSBhbiBlYXJseSB3YXJuaW5nXG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhkZWVwZXN0QW5jZXN0b3IgIT0gbnVsbCwgJ1JlYWN0IGNhblxcJ3QgZmluZCB0aGUgcm9vdCBjb21wb25lbnQgbm9kZSBmb3IgZGF0YS1yZWFjdGlkIHZhbHVlICcgKyAnYCVzYC4gSWYgeW91XFwncmUgc2VlaW5nIHRoaXMgbWVzc2FnZSwgaXQgcHJvYmFibHkgbWVhbnMgdGhhdCAnICsgJ3lvdVxcJ3ZlIGxvYWRlZCB0d28gY29waWVzIG9mIFJlYWN0IG9uIHRoZSBwYWdlLiBBdCB0aGlzIHRpbWUsIG9ubHkgJyArICdhIHNpbmdsZSBjb3B5IG9mIFJlYWN0IGNhbiBiZSBsb2FkZWQgYXQgYSB0aW1lLicsIHRhcmdldElEKSA6IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBmaXJzdENoaWxkcmVuWzBdID0gZGVlcGVzdEFuY2VzdG9yLmZpcnN0Q2hpbGQ7XG4gICAgZmlyc3RDaGlsZHJlbi5sZW5ndGggPSAxO1xuXG4gICAgd2hpbGUgKGNoaWxkSW5kZXggPCBmaXJzdENoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgdmFyIGNoaWxkID0gZmlyc3RDaGlsZHJlbltjaGlsZEluZGV4KytdO1xuICAgICAgdmFyIHRhcmdldENoaWxkO1xuXG4gICAgICB3aGlsZSAoY2hpbGQpIHtcbiAgICAgICAgdmFyIGNoaWxkSUQgPSBSZWFjdE1vdW50LmdldElEKGNoaWxkKTtcbiAgICAgICAgaWYgKGNoaWxkSUQpIHtcbiAgICAgICAgICAvLyBFdmVuIGlmIHdlIGZpbmQgdGhlIG5vZGUgd2UncmUgbG9va2luZyBmb3IsIHdlIGZpbmlzaCBsb29waW5nXG4gICAgICAgICAgLy8gdGhyb3VnaCBpdHMgc2libGluZ3MgdG8gZW5zdXJlIHRoZXkncmUgY2FjaGVkIHNvIHRoYXQgd2UgZG9uJ3QgaGF2ZVxuICAgICAgICAgIC8vIHRvIHJldmlzaXQgdGhpcyBub2RlIGFnYWluLiBPdGhlcndpc2UsIHdlIG1ha2Ugbl4yIGNhbGxzIHRvIGdldElEXG4gICAgICAgICAgLy8gd2hlbiB2aXNpdGluZyB0aGUgbWFueSBjaGlsZHJlbiBvZiBhIHNpbmdsZSBub2RlIGluIG9yZGVyLlxuXG4gICAgICAgICAgaWYgKHRhcmdldElEID09PSBjaGlsZElEKSB7XG4gICAgICAgICAgICB0YXJnZXRDaGlsZCA9IGNoaWxkO1xuICAgICAgICAgIH0gZWxzZSBpZiAoUmVhY3RJbnN0YW5jZUhhbmRsZXMuaXNBbmNlc3RvcklET2YoY2hpbGRJRCwgdGFyZ2V0SUQpKSB7XG4gICAgICAgICAgICAvLyBJZiB3ZSBmaW5kIGEgY2hpbGQgd2hvc2UgSUQgaXMgYW4gYW5jZXN0b3Igb2YgdGhlIGdpdmVuIElELFxuICAgICAgICAgICAgLy8gdGhlbiB3ZSBjYW4gYmUgc3VyZSB0aGF0IHdlIG9ubHkgd2FudCB0byBzZWFyY2ggdGhlIHN1YnRyZWVcbiAgICAgICAgICAgIC8vIHJvb3RlZCBhdCB0aGlzIGNoaWxkLCBzbyB3ZSBjYW4gdGhyb3cgb3V0IHRoZSByZXN0IG9mIHRoZVxuICAgICAgICAgICAgLy8gc2VhcmNoIHN0YXRlLlxuICAgICAgICAgICAgZmlyc3RDaGlsZHJlbi5sZW5ndGggPSBjaGlsZEluZGV4ID0gMDtcbiAgICAgICAgICAgIGZpcnN0Q2hpbGRyZW4ucHVzaChjaGlsZC5maXJzdENoaWxkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gSWYgdGhpcyBjaGlsZCBoYWQgbm8gSUQsIHRoZW4gdGhlcmUncyBhIGNoYW5jZSB0aGF0IGl0IHdhc1xuICAgICAgICAgIC8vIGluamVjdGVkIGF1dG9tYXRpY2FsbHkgYnkgdGhlIGJyb3dzZXIsIGFzIHdoZW4gYSBgPHRhYmxlPmBcbiAgICAgICAgICAvLyBlbGVtZW50IHNwcm91dHMgYW4gZXh0cmEgYDx0Ym9keT5gIGNoaWxkIGFzIGEgc2lkZSBlZmZlY3Qgb2ZcbiAgICAgICAgICAvLyBgLmlubmVySFRNTGAgcGFyc2luZy4gT3B0aW1pc3RpY2FsbHkgY29udGludWUgZG93biB0aGlzXG4gICAgICAgICAgLy8gYnJhbmNoLCBidXQgbm90IGJlZm9yZSBleGFtaW5pbmcgdGhlIG90aGVyIHNpYmxpbmdzLlxuICAgICAgICAgIGZpcnN0Q2hpbGRyZW4ucHVzaChjaGlsZC5maXJzdENoaWxkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNoaWxkID0gY2hpbGQubmV4dFNpYmxpbmc7XG4gICAgICB9XG5cbiAgICAgIGlmICh0YXJnZXRDaGlsZCkge1xuICAgICAgICAvLyBFbXB0eWluZyBmaXJzdENoaWxkcmVuL2ZpbmRDb21wb25lbnRSb290UmV1c2FibGVBcnJheSBpc1xuICAgICAgICAvLyBub3QgbmVjZXNzYXJ5IGZvciBjb3JyZWN0bmVzcywgYnV0IGl0IGhlbHBzIHRoZSBHQyByZWNsYWltXG4gICAgICAgIC8vIGFueSBub2RlcyB0aGF0IHdlcmUgbGVmdCBhdCB0aGUgZW5kIG9mIHRoZSBzZWFyY2guXG4gICAgICAgIGZpcnN0Q2hpbGRyZW4ubGVuZ3RoID0gMDtcblxuICAgICAgICByZXR1cm4gdGFyZ2V0Q2hpbGQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZmlyc3RDaGlsZHJlbi5sZW5ndGggPSAwO1xuXG4gICAgIWZhbHNlID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2ZpbmRDb21wb25lbnRSb290KC4uLiwgJXMpOiBVbmFibGUgdG8gZmluZCBlbGVtZW50LiBUaGlzIHByb2JhYmx5ICcgKyAnbWVhbnMgdGhlIERPTSB3YXMgdW5leHBlY3RlZGx5IG11dGF0ZWQgKGUuZy4sIGJ5IHRoZSBicm93c2VyKSwgJyArICd1c3VhbGx5IGR1ZSB0byBmb3JnZXR0aW5nIGEgPHRib2R5PiB3aGVuIHVzaW5nIHRhYmxlcywgbmVzdGluZyB0YWdzICcgKyAnbGlrZSA8Zm9ybT4sIDxwPiwgb3IgPGE+LCBvciB1c2luZyBub24tU1ZHIGVsZW1lbnRzIGluIGFuIDxzdmc+ICcgKyAncGFyZW50LiAnICsgJ1RyeSBpbnNwZWN0aW5nIHRoZSBjaGlsZCBub2RlcyBvZiB0aGUgZWxlbWVudCB3aXRoIFJlYWN0IElEIGAlc2AuJywgdGFyZ2V0SUQsIFJlYWN0TW91bnQuZ2V0SUQoYW5jZXN0b3JOb2RlKSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICB9LFxuXG4gIF9tb3VudEltYWdlSW50b05vZGU6IGZ1bmN0aW9uIChtYXJrdXAsIGNvbnRhaW5lciwgc2hvdWxkUmV1c2VNYXJrdXAsIHRyYW5zYWN0aW9uKSB7XG4gICAgIShjb250YWluZXIgJiYgKGNvbnRhaW5lci5ub2RlVHlwZSA9PT0gRUxFTUVOVF9OT0RFX1RZUEUgfHwgY29udGFpbmVyLm5vZGVUeXBlID09PSBET0NfTk9ERV9UWVBFIHx8IGNvbnRhaW5lci5ub2RlVHlwZSA9PT0gRE9DVU1FTlRfRlJBR01FTlRfTk9ERV9UWVBFKSkgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnbW91bnRDb21wb25lbnRJbnRvTm9kZSguLi4pOiBUYXJnZXQgY29udGFpbmVyIGlzIG5vdCB2YWxpZC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICBpZiAoc2hvdWxkUmV1c2VNYXJrdXApIHtcbiAgICAgIHZhciByb290RWxlbWVudCA9IGdldFJlYWN0Um9vdEVsZW1lbnRJbkNvbnRhaW5lcihjb250YWluZXIpO1xuICAgICAgaWYgKFJlYWN0TWFya3VwQ2hlY2tzdW0uY2FuUmV1c2VNYXJrdXAobWFya3VwLCByb290RWxlbWVudCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGNoZWNrc3VtID0gcm9vdEVsZW1lbnQuZ2V0QXR0cmlidXRlKFJlYWN0TWFya3VwQ2hlY2tzdW0uQ0hFQ0tTVU1fQVRUUl9OQU1FKTtcbiAgICAgICAgcm9vdEVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFJlYWN0TWFya3VwQ2hlY2tzdW0uQ0hFQ0tTVU1fQVRUUl9OQU1FKTtcblxuICAgICAgICB2YXIgcm9vdE1hcmt1cCA9IHJvb3RFbGVtZW50Lm91dGVySFRNTDtcbiAgICAgICAgcm9vdEVsZW1lbnQuc2V0QXR0cmlidXRlKFJlYWN0TWFya3VwQ2hlY2tzdW0uQ0hFQ0tTVU1fQVRUUl9OQU1FLCBjaGVja3N1bSk7XG5cbiAgICAgICAgdmFyIG5vcm1hbGl6ZWRNYXJrdXAgPSBtYXJrdXA7XG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgLy8gYmVjYXVzZSByb290TWFya3VwIGlzIHJldHJpZXZlZCBmcm9tIHRoZSBET00sIHZhcmlvdXMgbm9ybWFsaXphdGlvbnNcbiAgICAgICAgICAvLyB3aWxsIGhhdmUgb2NjdXJyZWQgd2hpY2ggd2lsbCBub3QgYmUgcHJlc2VudCBpbiBgbWFya3VwYC4gSGVyZSxcbiAgICAgICAgICAvLyBpbnNlcnQgbWFya3VwIGludG8gYSA8ZGl2PiBvciA8aWZyYW1lPiBkZXBlbmRpbmcgb24gdGhlIGNvbnRhaW5lclxuICAgICAgICAgIC8vIHR5cGUgdG8gcGVyZm9ybSB0aGUgc2FtZSBub3JtYWxpemF0aW9ucyBiZWZvcmUgY29tcGFyaW5nLlxuICAgICAgICAgIHZhciBub3JtYWxpemVyO1xuICAgICAgICAgIGlmIChjb250YWluZXIubm9kZVR5cGUgPT09IEVMRU1FTlRfTk9ERV9UWVBFKSB7XG4gICAgICAgICAgICBub3JtYWxpemVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBub3JtYWxpemVyLmlubmVySFRNTCA9IG1hcmt1cDtcbiAgICAgICAgICAgIG5vcm1hbGl6ZWRNYXJrdXAgPSBub3JtYWxpemVyLmlubmVySFRNTDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbm9ybWFsaXplciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChub3JtYWxpemVyKTtcbiAgICAgICAgICAgIG5vcm1hbGl6ZXIuY29udGVudERvY3VtZW50LndyaXRlKG1hcmt1cCk7XG4gICAgICAgICAgICBub3JtYWxpemVkTWFya3VwID0gbm9ybWFsaXplci5jb250ZW50RG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm91dGVySFRNTDtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobm9ybWFsaXplcik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRpZmZJbmRleCA9IGZpcnN0RGlmZmVyZW5jZUluZGV4KG5vcm1hbGl6ZWRNYXJrdXAsIHJvb3RNYXJrdXApO1xuICAgICAgICB2YXIgZGlmZmVyZW5jZSA9ICcgKGNsaWVudCkgJyArIG5vcm1hbGl6ZWRNYXJrdXAuc3Vic3RyaW5nKGRpZmZJbmRleCAtIDIwLCBkaWZmSW5kZXggKyAyMCkgKyAnXFxuIChzZXJ2ZXIpICcgKyByb290TWFya3VwLnN1YnN0cmluZyhkaWZmSW5kZXggLSAyMCwgZGlmZkluZGV4ICsgMjApO1xuXG4gICAgICAgICEoY29udGFpbmVyLm5vZGVUeXBlICE9PSBET0NfTk9ERV9UWVBFKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdZb3VcXCdyZSB0cnlpbmcgdG8gcmVuZGVyIGEgY29tcG9uZW50IHRvIHRoZSBkb2N1bWVudCB1c2luZyAnICsgJ3NlcnZlciByZW5kZXJpbmcgYnV0IHRoZSBjaGVja3N1bSB3YXMgaW52YWxpZC4gVGhpcyB1c3VhbGx5ICcgKyAnbWVhbnMgeW91IHJlbmRlcmVkIGEgZGlmZmVyZW50IGNvbXBvbmVudCB0eXBlIG9yIHByb3BzIG9uICcgKyAndGhlIGNsaWVudCBmcm9tIHRoZSBvbmUgb24gdGhlIHNlcnZlciwgb3IgeW91ciByZW5kZXIoKSAnICsgJ21ldGhvZHMgYXJlIGltcHVyZS4gUmVhY3QgY2Fubm90IGhhbmRsZSB0aGlzIGNhc2UgZHVlIHRvICcgKyAnY3Jvc3MtYnJvd3NlciBxdWlya3MgYnkgcmVuZGVyaW5nIGF0IHRoZSBkb2N1bWVudCByb290LiBZb3UgJyArICdzaG91bGQgbG9vayBmb3IgZW52aXJvbm1lbnQgZGVwZW5kZW50IGNvZGUgaW4geW91ciBjb21wb25lbnRzICcgKyAnYW5kIGVuc3VyZSB0aGUgcHJvcHMgYXJlIHRoZSBzYW1lIGNsaWVudCBhbmQgc2VydmVyIHNpZGU6XFxuJXMnLCBkaWZmZXJlbmNlKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ1JlYWN0IGF0dGVtcHRlZCB0byByZXVzZSBtYXJrdXAgaW4gYSBjb250YWluZXIgYnV0IHRoZSAnICsgJ2NoZWNrc3VtIHdhcyBpbnZhbGlkLiBUaGlzIGdlbmVyYWxseSBtZWFucyB0aGF0IHlvdSBhcmUgJyArICd1c2luZyBzZXJ2ZXIgcmVuZGVyaW5nIGFuZCB0aGUgbWFya3VwIGdlbmVyYXRlZCBvbiB0aGUgJyArICdzZXJ2ZXIgd2FzIG5vdCB3aGF0IHRoZSBjbGllbnQgd2FzIGV4cGVjdGluZy4gUmVhY3QgaW5qZWN0ZWQgJyArICduZXcgbWFya3VwIHRvIGNvbXBlbnNhdGUgd2hpY2ggd29ya3MgYnV0IHlvdSBoYXZlIGxvc3QgbWFueSAnICsgJ29mIHRoZSBiZW5lZml0cyBvZiBzZXJ2ZXIgcmVuZGVyaW5nLiBJbnN0ZWFkLCBmaWd1cmUgb3V0ICcgKyAnd2h5IHRoZSBtYXJrdXAgYmVpbmcgZ2VuZXJhdGVkIGlzIGRpZmZlcmVudCBvbiB0aGUgY2xpZW50ICcgKyAnb3Igc2VydmVyOlxcbiVzJywgZGlmZmVyZW5jZSkgOiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAhKGNvbnRhaW5lci5ub2RlVHlwZSAhPT0gRE9DX05PREVfVFlQRSkgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnWW91XFwncmUgdHJ5aW5nIHRvIHJlbmRlciBhIGNvbXBvbmVudCB0byB0aGUgZG9jdW1lbnQgYnV0ICcgKyAneW91IGRpZG5cXCd0IHVzZSBzZXJ2ZXIgcmVuZGVyaW5nLiBXZSBjYW5cXCd0IGRvIHRoaXMgJyArICd3aXRob3V0IHVzaW5nIHNlcnZlciByZW5kZXJpbmcgZHVlIHRvIGNyb3NzLWJyb3dzZXIgcXVpcmtzLiAnICsgJ1NlZSBSZWFjdERPTVNlcnZlci5yZW5kZXJUb1N0cmluZygpIGZvciBzZXJ2ZXIgcmVuZGVyaW5nLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIGlmICh0cmFuc2FjdGlvbi51c2VDcmVhdGVFbGVtZW50KSB7XG4gICAgICB3aGlsZSAoY29udGFpbmVyLmxhc3RDaGlsZCkge1xuICAgICAgICBjb250YWluZXIucmVtb3ZlQ2hpbGQoY29udGFpbmVyLmxhc3RDaGlsZCk7XG4gICAgICB9XG4gICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobWFya3VwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0SW5uZXJIVE1MKGNvbnRhaW5lciwgbWFya3VwKTtcbiAgICB9XG4gIH0sXG5cbiAgb3duZXJEb2N1bWVudENvbnRleHRLZXk6IG93bmVyRG9jdW1lbnRDb250ZXh0S2V5LFxuXG4gIC8qKlxuICAgKiBSZWFjdCBJRCB1dGlsaXRpZXMuXG4gICAqL1xuXG4gIGdldFJlYWN0Um9vdElEOiBnZXRSZWFjdFJvb3RJRCxcblxuICBnZXRJRDogZ2V0SUQsXG5cbiAgc2V0SUQ6IHNldElELFxuXG4gIGdldE5vZGU6IGdldE5vZGUsXG5cbiAgZ2V0Tm9kZUZyb21JbnN0YW5jZTogZ2V0Tm9kZUZyb21JbnN0YW5jZSxcblxuICBpc1ZhbGlkOiBpc1ZhbGlkLFxuXG4gIHB1cmdlSUQ6IHB1cmdlSURcbn07XG5cblJlYWN0UGVyZi5tZWFzdXJlTWV0aG9kcyhSZWFjdE1vdW50LCAnUmVhY3RNb3VudCcsIHtcbiAgX3JlbmRlck5ld1Jvb3RDb21wb25lbnQ6ICdfcmVuZGVyTmV3Um9vdENvbXBvbmVudCcsXG4gIF9tb3VudEltYWdlSW50b05vZGU6ICdfbW91bnRJbWFnZUludG9Ob2RlJ1xufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RNb3VudDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QvbGliL1JlYWN0TW91bnQuanNcbi8vIG1vZHVsZSBpZCA9IDI4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXJcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXZlbnRDb25zdGFudHMgPSByZXF1aXJlKCcuL0V2ZW50Q29uc3RhbnRzJyk7XG52YXIgRXZlbnRQbHVnaW5IdWIgPSByZXF1aXJlKCcuL0V2ZW50UGx1Z2luSHViJyk7XG52YXIgRXZlbnRQbHVnaW5SZWdpc3RyeSA9IHJlcXVpcmUoJy4vRXZlbnRQbHVnaW5SZWdpc3RyeScpO1xudmFyIFJlYWN0RXZlbnRFbWl0dGVyTWl4aW4gPSByZXF1aXJlKCcuL1JlYWN0RXZlbnRFbWl0dGVyTWl4aW4nKTtcbnZhciBSZWFjdFBlcmYgPSByZXF1aXJlKCcuL1JlYWN0UGVyZicpO1xudmFyIFZpZXdwb3J0TWV0cmljcyA9IHJlcXVpcmUoJy4vVmlld3BvcnRNZXRyaWNzJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBpc0V2ZW50U3VwcG9ydGVkID0gcmVxdWlyZSgnLi9pc0V2ZW50U3VwcG9ydGVkJyk7XG5cbi8qKlxuICogU3VtbWFyeSBvZiBgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyYCBldmVudCBoYW5kbGluZzpcbiAqXG4gKiAgLSBUb3AtbGV2ZWwgZGVsZWdhdGlvbiBpcyB1c2VkIHRvIHRyYXAgbW9zdCBuYXRpdmUgYnJvd3NlciBldmVudHMuIFRoaXNcbiAqICAgIG1heSBvbmx5IG9jY3VyIGluIHRoZSBtYWluIHRocmVhZCBhbmQgaXMgdGhlIHJlc3BvbnNpYmlsaXR5IG9mXG4gKiAgICBSZWFjdEV2ZW50TGlzdGVuZXIsIHdoaWNoIGlzIGluamVjdGVkIGFuZCBjYW4gdGhlcmVmb3JlIHN1cHBvcnQgcGx1Z2dhYmxlXG4gKiAgICBldmVudCBzb3VyY2VzLiBUaGlzIGlzIHRoZSBvbmx5IHdvcmsgdGhhdCBvY2N1cnMgaW4gdGhlIG1haW4gdGhyZWFkLlxuICpcbiAqICAtIFdlIG5vcm1hbGl6ZSBhbmQgZGUtZHVwbGljYXRlIGV2ZW50cyB0byBhY2NvdW50IGZvciBicm93c2VyIHF1aXJrcy4gVGhpc1xuICogICAgbWF5IGJlIGRvbmUgaW4gdGhlIHdvcmtlciB0aHJlYWQuXG4gKlxuICogIC0gRm9yd2FyZCB0aGVzZSBuYXRpdmUgZXZlbnRzICh3aXRoIHRoZSBhc3NvY2lhdGVkIHRvcC1sZXZlbCB0eXBlIHVzZWQgdG9cbiAqICAgIHRyYXAgaXQpIHRvIGBFdmVudFBsdWdpbkh1YmAsIHdoaWNoIGluIHR1cm4gd2lsbCBhc2sgcGx1Z2lucyBpZiB0aGV5IHdhbnRcbiAqICAgIHRvIGV4dHJhY3QgYW55IHN5bnRoZXRpYyBldmVudHMuXG4gKlxuICogIC0gVGhlIGBFdmVudFBsdWdpbkh1YmAgd2lsbCB0aGVuIHByb2Nlc3MgZWFjaCBldmVudCBieSBhbm5vdGF0aW5nIHRoZW0gd2l0aFxuICogICAgXCJkaXNwYXRjaGVzXCIsIGEgc2VxdWVuY2Ugb2YgbGlzdGVuZXJzIGFuZCBJRHMgdGhhdCBjYXJlIGFib3V0IHRoYXQgZXZlbnQuXG4gKlxuICogIC0gVGhlIGBFdmVudFBsdWdpbkh1YmAgdGhlbiBkaXNwYXRjaGVzIHRoZSBldmVudHMuXG4gKlxuICogT3ZlcnZpZXcgb2YgUmVhY3QgYW5kIHRoZSBldmVudCBzeXN0ZW06XG4gKlxuICogKy0tLS0tLS0tLS0tLSsgICAgLlxuICogfCAgICBET00gICAgIHwgICAgLlxuICogKy0tLS0tLS0tLS0tLSsgICAgLlxuICogICAgICAgfCAgICAgICAgICAgLlxuICogICAgICAgdiAgICAgICAgICAgLlxuICogKy0tLS0tLS0tLS0tLSsgICAgLlxuICogfCBSZWFjdEV2ZW50IHwgICAgLlxuICogfCAgTGlzdGVuZXIgIHwgICAgLlxuICogKy0tLS0tLS0tLS0tLSsgICAgLiAgICAgICAgICAgICAgICAgICAgICAgICArLS0tLS0tLS0tLS0rXG4gKiAgICAgICB8ICAgICAgICAgICAuICAgICAgICAgICAgICAgKy0tLS0tLS0tK3xTaW1wbGVFdmVudHxcbiAqICAgICAgIHwgICAgICAgICAgIC4gICAgICAgICAgICAgICB8ICAgICAgICAgfFBsdWdpbiAgICAgfFxuICogKy0tLS0tfC0tLS0tLSsgICAgLiAgICAgICAgICAgICAgIHYgICAgICAgICArLS0tLS0tLS0tLS0rXG4gKiB8ICAgICB8ICAgICAgfCAgICAuICAgICstLS0tLS0tLS0tLS0tLSsgICAgICAgICAgICAgICAgICAgICstLS0tLS0tLS0tLS0rXG4gKiB8ICAgICArLS0tLS0tLS0tLS0uLS0tPnxFdmVudFBsdWdpbkh1YnwgICAgICAgICAgICAgICAgICAgIHwgICAgRXZlbnQgICB8XG4gKiB8ICAgICAgICAgICAgfCAgICAuICAgIHwgICAgICAgICAgICAgIHwgICAgICstLS0tLS0tLS0tLSsgIHwgUHJvcGFnYXRvcnN8XG4gKiB8IFJlYWN0RXZlbnQgfCAgICAuICAgIHwgICAgICAgICAgICAgIHwgICAgIHxUYXBFdmVudCAgIHwgIHwtLS0tLS0tLS0tLS18XG4gKiB8ICBFbWl0dGVyICAgfCAgICAuICAgIHwgICAgICAgICAgICAgIHw8LS0tK3xQbHVnaW4gICAgIHwgIHxvdGhlciBwbHVnaW58XG4gKiB8ICAgICAgICAgICAgfCAgICAuICAgIHwgICAgICAgICAgICAgIHwgICAgICstLS0tLS0tLS0tLSsgIHwgIHV0aWxpdGllcyB8XG4gKiB8ICAgICArLS0tLS0tLS0tLS0uLS0tPnwgICAgICAgICAgICAgIHwgICAgICAgICAgICAgICAgICAgICstLS0tLS0tLS0tLS0rXG4gKiB8ICAgICB8ICAgICAgfCAgICAuICAgICstLS0tLS0tLS0tLS0tLStcbiAqICstLS0tLXwtLS0tLS0rICAgIC4gICAgICAgICAgICAgICAgXiAgICAgICAgKy0tLS0tLS0tLS0tK1xuICogICAgICAgfCAgICAgICAgICAgLiAgICAgICAgICAgICAgICB8ICAgICAgICB8RW50ZXIvTGVhdmV8XG4gKiAgICAgICArICAgICAgICAgICAuICAgICAgICAgICAgICAgICstLS0tLS0tK3xQbHVnaW4gICAgIHxcbiAqICstLS0tLS0tLS0tLS0tKyAgIC4gICAgICAgICAgICAgICAgICAgICAgICAgKy0tLS0tLS0tLS0tK1xuICogfCBhcHBsaWNhdGlvbiB8ICAgLlxuICogfC0tLS0tLS0tLS0tLS18ICAgLlxuICogfCAgICAgICAgICAgICB8ICAgLlxuICogfCAgICAgICAgICAgICB8ICAgLlxuICogKy0tLS0tLS0tLS0tLS0rICAgLlxuICogICAgICAgICAgICAgICAgICAgLlxuICogICAgUmVhY3QgQ29yZSAgICAgLiAgR2VuZXJhbCBQdXJwb3NlIEV2ZW50IFBsdWdpbiBTeXN0ZW1cbiAqL1xuXG52YXIgYWxyZWFkeUxpc3RlbmluZ1RvID0ge307XG52YXIgaXNNb25pdG9yaW5nU2Nyb2xsVmFsdWUgPSBmYWxzZTtcbnZhciByZWFjdFRvcExpc3RlbmVyc0NvdW50ZXIgPSAwO1xuXG4vLyBGb3IgZXZlbnRzIGxpa2UgJ3N1Ym1pdCcgd2hpY2ggZG9uJ3QgY29uc2lzdGVudGx5IGJ1YmJsZSAod2hpY2ggd2UgdHJhcCBhdCBhXG4vLyBsb3dlciBub2RlIHRoYW4gYGRvY3VtZW50YCksIGJpbmRpbmcgYXQgYGRvY3VtZW50YCB3b3VsZCBjYXVzZSBkdXBsaWNhdGVcbi8vIGV2ZW50cyBzbyB3ZSBkb24ndCBpbmNsdWRlIHRoZW0gaGVyZVxudmFyIHRvcEV2ZW50TWFwcGluZyA9IHtcbiAgdG9wQWJvcnQ6ICdhYm9ydCcsXG4gIHRvcEJsdXI6ICdibHVyJyxcbiAgdG9wQ2FuUGxheTogJ2NhbnBsYXknLFxuICB0b3BDYW5QbGF5VGhyb3VnaDogJ2NhbnBsYXl0aHJvdWdoJyxcbiAgdG9wQ2hhbmdlOiAnY2hhbmdlJyxcbiAgdG9wQ2xpY2s6ICdjbGljaycsXG4gIHRvcENvbXBvc2l0aW9uRW5kOiAnY29tcG9zaXRpb25lbmQnLFxuICB0b3BDb21wb3NpdGlvblN0YXJ0OiAnY29tcG9zaXRpb25zdGFydCcsXG4gIHRvcENvbXBvc2l0aW9uVXBkYXRlOiAnY29tcG9zaXRpb251cGRhdGUnLFxuICB0b3BDb250ZXh0TWVudTogJ2NvbnRleHRtZW51JyxcbiAgdG9wQ29weTogJ2NvcHknLFxuICB0b3BDdXQ6ICdjdXQnLFxuICB0b3BEb3VibGVDbGljazogJ2RibGNsaWNrJyxcbiAgdG9wRHJhZzogJ2RyYWcnLFxuICB0b3BEcmFnRW5kOiAnZHJhZ2VuZCcsXG4gIHRvcERyYWdFbnRlcjogJ2RyYWdlbnRlcicsXG4gIHRvcERyYWdFeGl0OiAnZHJhZ2V4aXQnLFxuICB0b3BEcmFnTGVhdmU6ICdkcmFnbGVhdmUnLFxuICB0b3BEcmFnT3ZlcjogJ2RyYWdvdmVyJyxcbiAgdG9wRHJhZ1N0YXJ0OiAnZHJhZ3N0YXJ0JyxcbiAgdG9wRHJvcDogJ2Ryb3AnLFxuICB0b3BEdXJhdGlvbkNoYW5nZTogJ2R1cmF0aW9uY2hhbmdlJyxcbiAgdG9wRW1wdGllZDogJ2VtcHRpZWQnLFxuICB0b3BFbmNyeXB0ZWQ6ICdlbmNyeXB0ZWQnLFxuICB0b3BFbmRlZDogJ2VuZGVkJyxcbiAgdG9wRXJyb3I6ICdlcnJvcicsXG4gIHRvcEZvY3VzOiAnZm9jdXMnLFxuICB0b3BJbnB1dDogJ2lucHV0JyxcbiAgdG9wS2V5RG93bjogJ2tleWRvd24nLFxuICB0b3BLZXlQcmVzczogJ2tleXByZXNzJyxcbiAgdG9wS2V5VXA6ICdrZXl1cCcsXG4gIHRvcExvYWRlZERhdGE6ICdsb2FkZWRkYXRhJyxcbiAgdG9wTG9hZGVkTWV0YWRhdGE6ICdsb2FkZWRtZXRhZGF0YScsXG4gIHRvcExvYWRTdGFydDogJ2xvYWRzdGFydCcsXG4gIHRvcE1vdXNlRG93bjogJ21vdXNlZG93bicsXG4gIHRvcE1vdXNlTW92ZTogJ21vdXNlbW92ZScsXG4gIHRvcE1vdXNlT3V0OiAnbW91c2VvdXQnLFxuICB0b3BNb3VzZU92ZXI6ICdtb3VzZW92ZXInLFxuICB0b3BNb3VzZVVwOiAnbW91c2V1cCcsXG4gIHRvcFBhc3RlOiAncGFzdGUnLFxuICB0b3BQYXVzZTogJ3BhdXNlJyxcbiAgdG9wUGxheTogJ3BsYXknLFxuICB0b3BQbGF5aW5nOiAncGxheWluZycsXG4gIHRvcFByb2dyZXNzOiAncHJvZ3Jlc3MnLFxuICB0b3BSYXRlQ2hhbmdlOiAncmF0ZWNoYW5nZScsXG4gIHRvcFNjcm9sbDogJ3Njcm9sbCcsXG4gIHRvcFNlZWtlZDogJ3NlZWtlZCcsXG4gIHRvcFNlZWtpbmc6ICdzZWVraW5nJyxcbiAgdG9wU2VsZWN0aW9uQ2hhbmdlOiAnc2VsZWN0aW9uY2hhbmdlJyxcbiAgdG9wU3RhbGxlZDogJ3N0YWxsZWQnLFxuICB0b3BTdXNwZW5kOiAnc3VzcGVuZCcsXG4gIHRvcFRleHRJbnB1dDogJ3RleHRJbnB1dCcsXG4gIHRvcFRpbWVVcGRhdGU6ICd0aW1ldXBkYXRlJyxcbiAgdG9wVG91Y2hDYW5jZWw6ICd0b3VjaGNhbmNlbCcsXG4gIHRvcFRvdWNoRW5kOiAndG91Y2hlbmQnLFxuICB0b3BUb3VjaE1vdmU6ICd0b3VjaG1vdmUnLFxuICB0b3BUb3VjaFN0YXJ0OiAndG91Y2hzdGFydCcsXG4gIHRvcFZvbHVtZUNoYW5nZTogJ3ZvbHVtZWNoYW5nZScsXG4gIHRvcFdhaXRpbmc6ICd3YWl0aW5nJyxcbiAgdG9wV2hlZWw6ICd3aGVlbCdcbn07XG5cbi8qKlxuICogVG8gZW5zdXJlIG5vIGNvbmZsaWN0cyB3aXRoIG90aGVyIHBvdGVudGlhbCBSZWFjdCBpbnN0YW5jZXMgb24gdGhlIHBhZ2VcbiAqL1xudmFyIHRvcExpc3RlbmVyc0lES2V5ID0gJ19yZWFjdExpc3RlbmVyc0lEJyArIFN0cmluZyhNYXRoLnJhbmRvbSgpKS5zbGljZSgyKTtcblxuZnVuY3Rpb24gZ2V0TGlzdGVuaW5nRm9yRG9jdW1lbnQobW91bnRBdCkge1xuICAvLyBJbiBJRTgsIGBtb3VudEF0YCBpcyBhIGhvc3Qgb2JqZWN0IGFuZCBkb2Vzbid0IGhhdmUgYGhhc093blByb3BlcnR5YFxuICAvLyBkaXJlY3RseS5cbiAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW91bnRBdCwgdG9wTGlzdGVuZXJzSURLZXkpKSB7XG4gICAgbW91bnRBdFt0b3BMaXN0ZW5lcnNJREtleV0gPSByZWFjdFRvcExpc3RlbmVyc0NvdW50ZXIrKztcbiAgICBhbHJlYWR5TGlzdGVuaW5nVG9bbW91bnRBdFt0b3BMaXN0ZW5lcnNJREtleV1dID0ge307XG4gIH1cbiAgcmV0dXJuIGFscmVhZHlMaXN0ZW5pbmdUb1ttb3VudEF0W3RvcExpc3RlbmVyc0lES2V5XV07XG59XG5cbi8qKlxuICogYFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlcmAgaXMgdXNlZCB0byBhdHRhY2ggdG9wLWxldmVsIGV2ZW50IGxpc3RlbmVycy4gRm9yXG4gKiBleGFtcGxlOlxuICpcbiAqICAgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLnB1dExpc3RlbmVyKCdteUlEJywgJ29uQ2xpY2snLCBteUZ1bmN0aW9uKTtcbiAqXG4gKiBUaGlzIHdvdWxkIGFsbG9jYXRlIGEgXCJyZWdpc3RyYXRpb25cIiBvZiBgKCdvbkNsaWNrJywgbXlGdW5jdGlvbilgIG9uICdteUlEJy5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xudmFyIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlciA9IGFzc2lnbih7fSwgUmVhY3RFdmVudEVtaXR0ZXJNaXhpbiwge1xuXG4gIC8qKlxuICAgKiBJbmplY3RhYmxlIGV2ZW50IGJhY2tlbmRcbiAgICovXG4gIFJlYWN0RXZlbnRMaXN0ZW5lcjogbnVsbCxcblxuICBpbmplY3Rpb246IHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gUmVhY3RFdmVudExpc3RlbmVyXG4gICAgICovXG4gICAgaW5qZWN0UmVhY3RFdmVudExpc3RlbmVyOiBmdW5jdGlvbiAoUmVhY3RFdmVudExpc3RlbmVyKSB7XG4gICAgICBSZWFjdEV2ZW50TGlzdGVuZXIuc2V0SGFuZGxlVG9wTGV2ZWwoUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLmhhbmRsZVRvcExldmVsKTtcbiAgICAgIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5SZWFjdEV2ZW50TGlzdGVuZXIgPSBSZWFjdEV2ZW50TGlzdGVuZXI7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBTZXRzIHdoZXRoZXIgb3Igbm90IGFueSBjcmVhdGVkIGNhbGxiYWNrcyBzaG91bGQgYmUgZW5hYmxlZC5cbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFufSBlbmFibGVkIFRydWUgaWYgY2FsbGJhY2tzIHNob3VsZCBiZSBlbmFibGVkLlxuICAgKi9cbiAgc2V0RW5hYmxlZDogZnVuY3Rpb24gKGVuYWJsZWQpIHtcbiAgICBpZiAoUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lcikge1xuICAgICAgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lci5zZXRFbmFibGVkKGVuYWJsZWQpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBjYWxsYmFja3MgYXJlIGVuYWJsZWQuXG4gICAqL1xuICBpc0VuYWJsZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gISEoUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lciAmJiBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyLmlzRW5hYmxlZCgpKTtcbiAgfSxcblxuICAvKipcbiAgICogV2UgbGlzdGVuIGZvciBidWJibGVkIHRvdWNoIGV2ZW50cyBvbiB0aGUgZG9jdW1lbnQgb2JqZWN0LlxuICAgKlxuICAgKiBGaXJlZm94IHY4LjAxIChhbmQgcG9zc2libHkgb3RoZXJzKSBleGhpYml0ZWQgc3RyYW5nZSBiZWhhdmlvciB3aGVuXG4gICAqIG1vdW50aW5nIGBvbm1vdXNlbW92ZWAgZXZlbnRzIGF0IHNvbWUgbm9kZSB0aGF0IHdhcyBub3QgdGhlIGRvY3VtZW50XG4gICAqIGVsZW1lbnQuIFRoZSBzeW1wdG9tcyB3ZXJlIHRoYXQgaWYgeW91ciBtb3VzZSBpcyBub3QgbW92aW5nIG92ZXIgc29tZXRoaW5nXG4gICAqIGNvbnRhaW5lZCB3aXRoaW4gdGhhdCBtb3VudCBwb2ludCAoZm9yIGV4YW1wbGUgb24gdGhlIGJhY2tncm91bmQpIHRoZVxuICAgKiB0b3AtbGV2ZWwgbGlzdGVuZXJzIGZvciBgb25tb3VzZW1vdmVgIHdvbid0IGJlIGNhbGxlZC4gSG93ZXZlciwgaWYgeW91XG4gICAqIHJlZ2lzdGVyIHRoZSBgbW91c2Vtb3ZlYCBvbiB0aGUgZG9jdW1lbnQgb2JqZWN0LCB0aGVuIGl0IHdpbGwgb2YgY291cnNlXG4gICAqIGNhdGNoIGFsbCBgbW91c2Vtb3ZlYHMuIFRoaXMgYWxvbmcgd2l0aCBpT1MgcXVpcmtzLCBqdXN0aWZpZXMgcmVzdHJpY3RpbmdcbiAgICogdG9wLWxldmVsIGxpc3RlbmVycyB0byB0aGUgZG9jdW1lbnQgb2JqZWN0IG9ubHksIGF0IGxlYXN0IGZvciB0aGVzZVxuICAgKiBtb3ZlbWVudCB0eXBlcyBvZiBldmVudHMgYW5kIHBvc3NpYmx5IGFsbCBldmVudHMuXG4gICAqXG4gICAqIEBzZWUgaHR0cDovL3d3dy5xdWlya3Ntb2RlLm9yZy9ibG9nL2FyY2hpdmVzLzIwMTAvMDkvY2xpY2tfZXZlbnRfZGVsLmh0bWxcbiAgICpcbiAgICogQWxzbywgYGtleXVwYC9ga2V5cHJlc3NgL2BrZXlkb3duYCBkbyBub3QgYnViYmxlIHRvIHRoZSB3aW5kb3cgb24gSUUsIGJ1dFxuICAgKiB0aGV5IGJ1YmJsZSB0byBkb2N1bWVudC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlZ2lzdHJhdGlvbk5hbWUgTmFtZSBvZiBsaXN0ZW5lciAoZS5nLiBgb25DbGlja2ApLlxuICAgKiBAcGFyYW0ge29iamVjdH0gY29udGVudERvY3VtZW50SGFuZGxlIERvY3VtZW50IHdoaWNoIG93bnMgdGhlIGNvbnRhaW5lclxuICAgKi9cbiAgbGlzdGVuVG86IGZ1bmN0aW9uIChyZWdpc3RyYXRpb25OYW1lLCBjb250ZW50RG9jdW1lbnRIYW5kbGUpIHtcbiAgICB2YXIgbW91bnRBdCA9IGNvbnRlbnREb2N1bWVudEhhbmRsZTtcbiAgICB2YXIgaXNMaXN0ZW5pbmcgPSBnZXRMaXN0ZW5pbmdGb3JEb2N1bWVudChtb3VudEF0KTtcbiAgICB2YXIgZGVwZW5kZW5jaWVzID0gRXZlbnRQbHVnaW5SZWdpc3RyeS5yZWdpc3RyYXRpb25OYW1lRGVwZW5kZW5jaWVzW3JlZ2lzdHJhdGlvbk5hbWVdO1xuXG4gICAgdmFyIHRvcExldmVsVHlwZXMgPSBFdmVudENvbnN0YW50cy50b3BMZXZlbFR5cGVzO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGVwZW5kZW5jaWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgZGVwZW5kZW5jeSA9IGRlcGVuZGVuY2llc1tpXTtcbiAgICAgIGlmICghKGlzTGlzdGVuaW5nLmhhc093blByb3BlcnR5KGRlcGVuZGVuY3kpICYmIGlzTGlzdGVuaW5nW2RlcGVuZGVuY3ldKSkge1xuICAgICAgICBpZiAoZGVwZW5kZW5jeSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BXaGVlbCkge1xuICAgICAgICAgIGlmIChpc0V2ZW50U3VwcG9ydGVkKCd3aGVlbCcpKSB7XG4gICAgICAgICAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyLnRyYXBCdWJibGVkRXZlbnQodG9wTGV2ZWxUeXBlcy50b3BXaGVlbCwgJ3doZWVsJywgbW91bnRBdCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChpc0V2ZW50U3VwcG9ydGVkKCdtb3VzZXdoZWVsJykpIHtcbiAgICAgICAgICAgIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5SZWFjdEV2ZW50TGlzdGVuZXIudHJhcEJ1YmJsZWRFdmVudCh0b3BMZXZlbFR5cGVzLnRvcFdoZWVsLCAnbW91c2V3aGVlbCcsIG1vdW50QXQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBGaXJlZm94IG5lZWRzIHRvIGNhcHR1cmUgYSBkaWZmZXJlbnQgbW91c2Ugc2Nyb2xsIGV2ZW50LlxuICAgICAgICAgICAgLy8gQHNlZSBodHRwOi8vd3d3LnF1aXJrc21vZGUub3JnL2RvbS9ldmVudHMvdGVzdHMvc2Nyb2xsLmh0bWxcbiAgICAgICAgICAgIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5SZWFjdEV2ZW50TGlzdGVuZXIudHJhcEJ1YmJsZWRFdmVudCh0b3BMZXZlbFR5cGVzLnRvcFdoZWVsLCAnRE9NTW91c2VTY3JvbGwnLCBtb3VudEF0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoZGVwZW5kZW5jeSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BTY3JvbGwpIHtcblxuICAgICAgICAgIGlmIChpc0V2ZW50U3VwcG9ydGVkKCdzY3JvbGwnLCB0cnVlKSkge1xuICAgICAgICAgICAgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lci50cmFwQ2FwdHVyZWRFdmVudCh0b3BMZXZlbFR5cGVzLnRvcFNjcm9sbCwgJ3Njcm9sbCcsIG1vdW50QXQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyLnRyYXBCdWJibGVkRXZlbnQodG9wTGV2ZWxUeXBlcy50b3BTY3JvbGwsICdzY3JvbGwnLCBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyLldJTkRPV19IQU5ETEUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChkZXBlbmRlbmN5ID09PSB0b3BMZXZlbFR5cGVzLnRvcEZvY3VzIHx8IGRlcGVuZGVuY3kgPT09IHRvcExldmVsVHlwZXMudG9wQmx1cikge1xuXG4gICAgICAgICAgaWYgKGlzRXZlbnRTdXBwb3J0ZWQoJ2ZvY3VzJywgdHJ1ZSkpIHtcbiAgICAgICAgICAgIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5SZWFjdEV2ZW50TGlzdGVuZXIudHJhcENhcHR1cmVkRXZlbnQodG9wTGV2ZWxUeXBlcy50b3BGb2N1cywgJ2ZvY3VzJywgbW91bnRBdCk7XG4gICAgICAgICAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyLnRyYXBDYXB0dXJlZEV2ZW50KHRvcExldmVsVHlwZXMudG9wQmx1ciwgJ2JsdXInLCBtb3VudEF0KTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGlzRXZlbnRTdXBwb3J0ZWQoJ2ZvY3VzaW4nKSkge1xuICAgICAgICAgICAgLy8gSUUgaGFzIGBmb2N1c2luYCBhbmQgYGZvY3Vzb3V0YCBldmVudHMgd2hpY2ggYnViYmxlLlxuICAgICAgICAgICAgLy8gQHNlZSBodHRwOi8vd3d3LnF1aXJrc21vZGUub3JnL2Jsb2cvYXJjaGl2ZXMvMjAwOC8wNC9kZWxlZ2F0aW5nX3RoZS5odG1sXG4gICAgICAgICAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyLnRyYXBCdWJibGVkRXZlbnQodG9wTGV2ZWxUeXBlcy50b3BGb2N1cywgJ2ZvY3VzaW4nLCBtb3VudEF0KTtcbiAgICAgICAgICAgIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5SZWFjdEV2ZW50TGlzdGVuZXIudHJhcEJ1YmJsZWRFdmVudCh0b3BMZXZlbFR5cGVzLnRvcEJsdXIsICdmb2N1c291dCcsIG1vdW50QXQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIHRvIG1ha2Ugc3VyZSBibHVyIGFuZCBmb2N1cyBldmVudCBsaXN0ZW5lcnMgYXJlIG9ubHkgYXR0YWNoZWQgb25jZVxuICAgICAgICAgIGlzTGlzdGVuaW5nW3RvcExldmVsVHlwZXMudG9wQmx1cl0gPSB0cnVlO1xuICAgICAgICAgIGlzTGlzdGVuaW5nW3RvcExldmVsVHlwZXMudG9wRm9jdXNdID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmICh0b3BFdmVudE1hcHBpbmcuaGFzT3duUHJvcGVydHkoZGVwZW5kZW5jeSkpIHtcbiAgICAgICAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyLnRyYXBCdWJibGVkRXZlbnQoZGVwZW5kZW5jeSwgdG9wRXZlbnRNYXBwaW5nW2RlcGVuZGVuY3ldLCBtb3VudEF0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlzTGlzdGVuaW5nW2RlcGVuZGVuY3ldID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgdHJhcEJ1YmJsZWRFdmVudDogZnVuY3Rpb24gKHRvcExldmVsVHlwZSwgaGFuZGxlckJhc2VOYW1lLCBoYW5kbGUpIHtcbiAgICByZXR1cm4gUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lci50cmFwQnViYmxlZEV2ZW50KHRvcExldmVsVHlwZSwgaGFuZGxlckJhc2VOYW1lLCBoYW5kbGUpO1xuICB9LFxuXG4gIHRyYXBDYXB0dXJlZEV2ZW50OiBmdW5jdGlvbiAodG9wTGV2ZWxUeXBlLCBoYW5kbGVyQmFzZU5hbWUsIGhhbmRsZSkge1xuICAgIHJldHVybiBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyLnRyYXBDYXB0dXJlZEV2ZW50KHRvcExldmVsVHlwZSwgaGFuZGxlckJhc2VOYW1lLCBoYW5kbGUpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBMaXN0ZW5zIHRvIHdpbmRvdyBzY3JvbGwgYW5kIHJlc2l6ZSBldmVudHMuIFdlIGNhY2hlIHNjcm9sbCB2YWx1ZXMgc28gdGhhdFxuICAgKiBhcHBsaWNhdGlvbiBjb2RlIGNhbiBhY2Nlc3MgdGhlbSB3aXRob3V0IHRyaWdnZXJpbmcgcmVmbG93cy5cbiAgICpcbiAgICogTk9URTogU2Nyb2xsIGV2ZW50cyBkbyBub3QgYnViYmxlLlxuICAgKlxuICAgKiBAc2VlIGh0dHA6Ly93d3cucXVpcmtzbW9kZS5vcmcvZG9tL2V2ZW50cy9zY3JvbGwuaHRtbFxuICAgKi9cbiAgZW5zdXJlU2Nyb2xsVmFsdWVNb25pdG9yaW5nOiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFpc01vbml0b3JpbmdTY3JvbGxWYWx1ZSkge1xuICAgICAgdmFyIHJlZnJlc2ggPSBWaWV3cG9ydE1ldHJpY3MucmVmcmVzaFNjcm9sbFZhbHVlcztcbiAgICAgIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5SZWFjdEV2ZW50TGlzdGVuZXIubW9uaXRvclNjcm9sbFZhbHVlKHJlZnJlc2gpO1xuICAgICAgaXNNb25pdG9yaW5nU2Nyb2xsVmFsdWUgPSB0cnVlO1xuICAgIH1cbiAgfSxcblxuICBldmVudE5hbWVEaXNwYXRjaENvbmZpZ3M6IEV2ZW50UGx1Z2luSHViLmV2ZW50TmFtZURpc3BhdGNoQ29uZmlncyxcblxuICByZWdpc3RyYXRpb25OYW1lTW9kdWxlczogRXZlbnRQbHVnaW5IdWIucmVnaXN0cmF0aW9uTmFtZU1vZHVsZXMsXG5cbiAgcHV0TGlzdGVuZXI6IEV2ZW50UGx1Z2luSHViLnB1dExpc3RlbmVyLFxuXG4gIGdldExpc3RlbmVyOiBFdmVudFBsdWdpbkh1Yi5nZXRMaXN0ZW5lcixcblxuICBkZWxldGVMaXN0ZW5lcjogRXZlbnRQbHVnaW5IdWIuZGVsZXRlTGlzdGVuZXIsXG5cbiAgZGVsZXRlQWxsTGlzdGVuZXJzOiBFdmVudFBsdWdpbkh1Yi5kZWxldGVBbGxMaXN0ZW5lcnNcblxufSk7XG5cblJlYWN0UGVyZi5tZWFzdXJlTWV0aG9kcyhSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIsICdSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXInLCB7XG4gIHB1dExpc3RlbmVyOiAncHV0TGlzdGVuZXInLFxuICBkZWxldGVMaXN0ZW5lcjogJ2RlbGV0ZUxpc3RlbmVyJ1xufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLmpzXG4vLyBtb2R1bGUgaWQgPSAyOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRXZlbnRDb25zdGFudHNcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBrZXlNaXJyb3IgPSByZXF1aXJlKCdmYmpzL2xpYi9rZXlNaXJyb3InKTtcblxudmFyIFByb3BhZ2F0aW9uUGhhc2VzID0ga2V5TWlycm9yKHsgYnViYmxlZDogbnVsbCwgY2FwdHVyZWQ6IG51bGwgfSk7XG5cbi8qKlxuICogVHlwZXMgb2YgcmF3IHNpZ25hbHMgZnJvbSB0aGUgYnJvd3NlciBjYXVnaHQgYXQgdGhlIHRvcCBsZXZlbC5cbiAqL1xudmFyIHRvcExldmVsVHlwZXMgPSBrZXlNaXJyb3Ioe1xuICB0b3BBYm9ydDogbnVsbCxcbiAgdG9wQmx1cjogbnVsbCxcbiAgdG9wQ2FuUGxheTogbnVsbCxcbiAgdG9wQ2FuUGxheVRocm91Z2g6IG51bGwsXG4gIHRvcENoYW5nZTogbnVsbCxcbiAgdG9wQ2xpY2s6IG51bGwsXG4gIHRvcENvbXBvc2l0aW9uRW5kOiBudWxsLFxuICB0b3BDb21wb3NpdGlvblN0YXJ0OiBudWxsLFxuICB0b3BDb21wb3NpdGlvblVwZGF0ZTogbnVsbCxcbiAgdG9wQ29udGV4dE1lbnU6IG51bGwsXG4gIHRvcENvcHk6IG51bGwsXG4gIHRvcEN1dDogbnVsbCxcbiAgdG9wRG91YmxlQ2xpY2s6IG51bGwsXG4gIHRvcERyYWc6IG51bGwsXG4gIHRvcERyYWdFbmQ6IG51bGwsXG4gIHRvcERyYWdFbnRlcjogbnVsbCxcbiAgdG9wRHJhZ0V4aXQ6IG51bGwsXG4gIHRvcERyYWdMZWF2ZTogbnVsbCxcbiAgdG9wRHJhZ092ZXI6IG51bGwsXG4gIHRvcERyYWdTdGFydDogbnVsbCxcbiAgdG9wRHJvcDogbnVsbCxcbiAgdG9wRHVyYXRpb25DaGFuZ2U6IG51bGwsXG4gIHRvcEVtcHRpZWQ6IG51bGwsXG4gIHRvcEVuY3J5cHRlZDogbnVsbCxcbiAgdG9wRW5kZWQ6IG51bGwsXG4gIHRvcEVycm9yOiBudWxsLFxuICB0b3BGb2N1czogbnVsbCxcbiAgdG9wSW5wdXQ6IG51bGwsXG4gIHRvcEtleURvd246IG51bGwsXG4gIHRvcEtleVByZXNzOiBudWxsLFxuICB0b3BLZXlVcDogbnVsbCxcbiAgdG9wTG9hZDogbnVsbCxcbiAgdG9wTG9hZGVkRGF0YTogbnVsbCxcbiAgdG9wTG9hZGVkTWV0YWRhdGE6IG51bGwsXG4gIHRvcExvYWRTdGFydDogbnVsbCxcbiAgdG9wTW91c2VEb3duOiBudWxsLFxuICB0b3BNb3VzZU1vdmU6IG51bGwsXG4gIHRvcE1vdXNlT3V0OiBudWxsLFxuICB0b3BNb3VzZU92ZXI6IG51bGwsXG4gIHRvcE1vdXNlVXA6IG51bGwsXG4gIHRvcFBhc3RlOiBudWxsLFxuICB0b3BQYXVzZTogbnVsbCxcbiAgdG9wUGxheTogbnVsbCxcbiAgdG9wUGxheWluZzogbnVsbCxcbiAgdG9wUHJvZ3Jlc3M6IG51bGwsXG4gIHRvcFJhdGVDaGFuZ2U6IG51bGwsXG4gIHRvcFJlc2V0OiBudWxsLFxuICB0b3BTY3JvbGw6IG51bGwsXG4gIHRvcFNlZWtlZDogbnVsbCxcbiAgdG9wU2Vla2luZzogbnVsbCxcbiAgdG9wU2VsZWN0aW9uQ2hhbmdlOiBudWxsLFxuICB0b3BTdGFsbGVkOiBudWxsLFxuICB0b3BTdWJtaXQ6IG51bGwsXG4gIHRvcFN1c3BlbmQ6IG51bGwsXG4gIHRvcFRleHRJbnB1dDogbnVsbCxcbiAgdG9wVGltZVVwZGF0ZTogbnVsbCxcbiAgdG9wVG91Y2hDYW5jZWw6IG51bGwsXG4gIHRvcFRvdWNoRW5kOiBudWxsLFxuICB0b3BUb3VjaE1vdmU6IG51bGwsXG4gIHRvcFRvdWNoU3RhcnQ6IG51bGwsXG4gIHRvcFZvbHVtZUNoYW5nZTogbnVsbCxcbiAgdG9wV2FpdGluZzogbnVsbCxcbiAgdG9wV2hlZWw6IG51bGxcbn0pO1xuXG52YXIgRXZlbnRDb25zdGFudHMgPSB7XG4gIHRvcExldmVsVHlwZXM6IHRvcExldmVsVHlwZXMsXG4gIFByb3BhZ2F0aW9uUGhhc2VzOiBQcm9wYWdhdGlvblBoYXNlc1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBFdmVudENvbnN0YW50cztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QvbGliL0V2ZW50Q29uc3RhbnRzLmpzXG4vLyBtb2R1bGUgaWQgPSAzMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRXZlbnRQbHVnaW5IdWJcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBFdmVudFBsdWdpblJlZ2lzdHJ5ID0gcmVxdWlyZSgnLi9FdmVudFBsdWdpblJlZ2lzdHJ5Jyk7XG52YXIgRXZlbnRQbHVnaW5VdGlscyA9IHJlcXVpcmUoJy4vRXZlbnRQbHVnaW5VdGlscycpO1xudmFyIFJlYWN0RXJyb3JVdGlscyA9IHJlcXVpcmUoJy4vUmVhY3RFcnJvclV0aWxzJyk7XG5cbnZhciBhY2N1bXVsYXRlSW50byA9IHJlcXVpcmUoJy4vYWNjdW11bGF0ZUludG8nKTtcbnZhciBmb3JFYWNoQWNjdW11bGF0ZWQgPSByZXF1aXJlKCcuL2ZvckVhY2hBY2N1bXVsYXRlZCcpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbi8qKlxuICogSW50ZXJuYWwgc3RvcmUgZm9yIGV2ZW50IGxpc3RlbmVyc1xuICovXG52YXIgbGlzdGVuZXJCYW5rID0ge307XG5cbi8qKlxuICogSW50ZXJuYWwgcXVldWUgb2YgZXZlbnRzIHRoYXQgaGF2ZSBhY2N1bXVsYXRlZCB0aGVpciBkaXNwYXRjaGVzIGFuZCBhcmVcbiAqIHdhaXRpbmcgdG8gaGF2ZSB0aGVpciBkaXNwYXRjaGVzIGV4ZWN1dGVkLlxuICovXG52YXIgZXZlbnRRdWV1ZSA9IG51bGw7XG5cbi8qKlxuICogRGlzcGF0Y2hlcyBhbiBldmVudCBhbmQgcmVsZWFzZXMgaXQgYmFjayBpbnRvIHRoZSBwb29sLCB1bmxlc3MgcGVyc2lzdGVudC5cbiAqXG4gKiBAcGFyYW0gez9vYmplY3R9IGV2ZW50IFN5bnRoZXRpYyBldmVudCB0byBiZSBkaXNwYXRjaGVkLlxuICogQHBhcmFtIHtib29sZWFufSBzaW11bGF0ZWQgSWYgdGhlIGV2ZW50IGlzIHNpbXVsYXRlZCAoY2hhbmdlcyBleG4gYmVoYXZpb3IpXG4gKiBAcHJpdmF0ZVxuICovXG52YXIgZXhlY3V0ZURpc3BhdGNoZXNBbmRSZWxlYXNlID0gZnVuY3Rpb24gKGV2ZW50LCBzaW11bGF0ZWQpIHtcbiAgaWYgKGV2ZW50KSB7XG4gICAgRXZlbnRQbHVnaW5VdGlscy5leGVjdXRlRGlzcGF0Y2hlc0luT3JkZXIoZXZlbnQsIHNpbXVsYXRlZCk7XG5cbiAgICBpZiAoIWV2ZW50LmlzUGVyc2lzdGVudCgpKSB7XG4gICAgICBldmVudC5jb25zdHJ1Y3Rvci5yZWxlYXNlKGV2ZW50KTtcbiAgICB9XG4gIH1cbn07XG52YXIgZXhlY3V0ZURpc3BhdGNoZXNBbmRSZWxlYXNlU2ltdWxhdGVkID0gZnVuY3Rpb24gKGUpIHtcbiAgcmV0dXJuIGV4ZWN1dGVEaXNwYXRjaGVzQW5kUmVsZWFzZShlLCB0cnVlKTtcbn07XG52YXIgZXhlY3V0ZURpc3BhdGNoZXNBbmRSZWxlYXNlVG9wTGV2ZWwgPSBmdW5jdGlvbiAoZSkge1xuICByZXR1cm4gZXhlY3V0ZURpc3BhdGNoZXNBbmRSZWxlYXNlKGUsIGZhbHNlKTtcbn07XG5cbi8qKlxuICogLSBgSW5zdGFuY2VIYW5kbGVgOiBbcmVxdWlyZWRdIE1vZHVsZSB0aGF0IHBlcmZvcm1zIGxvZ2ljYWwgdHJhdmVyc2FscyBvZiBET01cbiAqICAgaGllcmFyY2h5IGdpdmVuIGlkcyBvZiB0aGUgbG9naWNhbCBET00gZWxlbWVudHMgaW52b2x2ZWQuXG4gKi9cbnZhciBJbnN0YW5jZUhhbmRsZSA9IG51bGw7XG5cbmZ1bmN0aW9uIHZhbGlkYXRlSW5zdGFuY2VIYW5kbGUoKSB7XG4gIHZhciB2YWxpZCA9IEluc3RhbmNlSGFuZGxlICYmIEluc3RhbmNlSGFuZGxlLnRyYXZlcnNlVHdvUGhhc2UgJiYgSW5zdGFuY2VIYW5kbGUudHJhdmVyc2VFbnRlckxlYXZlO1xuICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyh2YWxpZCwgJ0luc3RhbmNlSGFuZGxlIG5vdCBpbmplY3RlZCBiZWZvcmUgdXNlIScpIDogdW5kZWZpbmVkO1xufVxuXG4vKipcbiAqIFRoaXMgaXMgYSB1bmlmaWVkIGludGVyZmFjZSBmb3IgZXZlbnQgcGx1Z2lucyB0byBiZSBpbnN0YWxsZWQgYW5kIGNvbmZpZ3VyZWQuXG4gKlxuICogRXZlbnQgcGx1Z2lucyBjYW4gaW1wbGVtZW50IHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAqXG4gKiAgIGBleHRyYWN0RXZlbnRzYCB7ZnVuY3Rpb24oc3RyaW5nLCBET01FdmVudFRhcmdldCwgc3RyaW5nLCBvYmplY3QpOiAqfVxuICogICAgIFJlcXVpcmVkLiBXaGVuIGEgdG9wLWxldmVsIGV2ZW50IGlzIGZpcmVkLCB0aGlzIG1ldGhvZCBpcyBleHBlY3RlZCB0b1xuICogICAgIGV4dHJhY3Qgc3ludGhldGljIGV2ZW50cyB0aGF0IHdpbGwgaW4gdHVybiBiZSBxdWV1ZWQgYW5kIGRpc3BhdGNoZWQuXG4gKlxuICogICBgZXZlbnRUeXBlc2Age29iamVjdH1cbiAqICAgICBPcHRpb25hbCwgcGx1Z2lucyB0aGF0IGZpcmUgZXZlbnRzIG11c3QgcHVibGlzaCBhIG1hcHBpbmcgb2YgcmVnaXN0cmF0aW9uXG4gKiAgICAgbmFtZXMgdGhhdCBhcmUgdXNlZCB0byByZWdpc3RlciBsaXN0ZW5lcnMuIFZhbHVlcyBvZiB0aGlzIG1hcHBpbmcgbXVzdFxuICogICAgIGJlIG9iamVjdHMgdGhhdCBjb250YWluIGByZWdpc3RyYXRpb25OYW1lYCBvciBgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXNgLlxuICpcbiAqICAgYGV4ZWN1dGVEaXNwYXRjaGAge2Z1bmN0aW9uKG9iamVjdCwgZnVuY3Rpb24sIHN0cmluZyl9XG4gKiAgICAgT3B0aW9uYWwsIGFsbG93cyBwbHVnaW5zIHRvIG92ZXJyaWRlIGhvdyBhbiBldmVudCBnZXRzIGRpc3BhdGNoZWQuIEJ5XG4gKiAgICAgZGVmYXVsdCwgdGhlIGxpc3RlbmVyIGlzIHNpbXBseSBpbnZva2VkLlxuICpcbiAqIEVhY2ggcGx1Z2luIHRoYXQgaXMgaW5qZWN0ZWQgaW50byBgRXZlbnRzUGx1Z2luSHViYCBpcyBpbW1lZGlhdGVseSBvcGVyYWJsZS5cbiAqXG4gKiBAcHVibGljXG4gKi9cbnZhciBFdmVudFBsdWdpbkh1YiA9IHtcblxuICAvKipcbiAgICogTWV0aG9kcyBmb3IgaW5qZWN0aW5nIGRlcGVuZGVuY2llcy5cbiAgICovXG4gIGluamVjdGlvbjoge1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtvYmplY3R9IEluamVjdGVkTW91bnRcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgaW5qZWN0TW91bnQ6IEV2ZW50UGx1Z2luVXRpbHMuaW5qZWN0aW9uLmluamVjdE1vdW50LFxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtvYmplY3R9IEluamVjdGVkSW5zdGFuY2VIYW5kbGVcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgaW5qZWN0SW5zdGFuY2VIYW5kbGU6IGZ1bmN0aW9uIChJbmplY3RlZEluc3RhbmNlSGFuZGxlKSB7XG4gICAgICBJbnN0YW5jZUhhbmRsZSA9IEluamVjdGVkSW5zdGFuY2VIYW5kbGU7XG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB2YWxpZGF0ZUluc3RhbmNlSGFuZGxlKCk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGdldEluc3RhbmNlSGFuZGxlOiBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB2YWxpZGF0ZUluc3RhbmNlSGFuZGxlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gSW5zdGFuY2VIYW5kbGU7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7YXJyYXl9IEluamVjdGVkRXZlbnRQbHVnaW5PcmRlclxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBpbmplY3RFdmVudFBsdWdpbk9yZGVyOiBFdmVudFBsdWdpblJlZ2lzdHJ5LmluamVjdEV2ZW50UGx1Z2luT3JkZXIsXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gaW5qZWN0ZWROYW1lc1RvUGx1Z2lucyBNYXAgZnJvbSBuYW1lcyB0byBwbHVnaW4gbW9kdWxlcy5cbiAgICAgKi9cbiAgICBpbmplY3RFdmVudFBsdWdpbnNCeU5hbWU6IEV2ZW50UGx1Z2luUmVnaXN0cnkuaW5qZWN0RXZlbnRQbHVnaW5zQnlOYW1lXG5cbiAgfSxcblxuICBldmVudE5hbWVEaXNwYXRjaENvbmZpZ3M6IEV2ZW50UGx1Z2luUmVnaXN0cnkuZXZlbnROYW1lRGlzcGF0Y2hDb25maWdzLFxuXG4gIHJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzOiBFdmVudFBsdWdpblJlZ2lzdHJ5LnJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzLFxuXG4gIC8qKlxuICAgKiBTdG9yZXMgYGxpc3RlbmVyYCBhdCBgbGlzdGVuZXJCYW5rW3JlZ2lzdHJhdGlvbk5hbWVdW2lkXWAuIElzIGlkZW1wb3RlbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBJRCBvZiB0aGUgRE9NIGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWdpc3RyYXRpb25OYW1lIE5hbWUgb2YgbGlzdGVuZXIgKGUuZy4gYG9uQ2xpY2tgKS5cbiAgICogQHBhcmFtIHs/ZnVuY3Rpb259IGxpc3RlbmVyIFRoZSBjYWxsYmFjayB0byBzdG9yZS5cbiAgICovXG4gIHB1dExpc3RlbmVyOiBmdW5jdGlvbiAoaWQsIHJlZ2lzdHJhdGlvbk5hbWUsIGxpc3RlbmVyKSB7XG4gICAgISh0eXBlb2YgbGlzdGVuZXIgPT09ICdmdW5jdGlvbicpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0V4cGVjdGVkICVzIGxpc3RlbmVyIHRvIGJlIGEgZnVuY3Rpb24sIGluc3RlYWQgZ290IHR5cGUgJXMnLCByZWdpc3RyYXRpb25OYW1lLCB0eXBlb2YgbGlzdGVuZXIpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIHZhciBiYW5rRm9yUmVnaXN0cmF0aW9uTmFtZSA9IGxpc3RlbmVyQmFua1tyZWdpc3RyYXRpb25OYW1lXSB8fCAobGlzdGVuZXJCYW5rW3JlZ2lzdHJhdGlvbk5hbWVdID0ge30pO1xuICAgIGJhbmtGb3JSZWdpc3RyYXRpb25OYW1lW2lkXSA9IGxpc3RlbmVyO1xuXG4gICAgdmFyIFBsdWdpbk1vZHVsZSA9IEV2ZW50UGx1Z2luUmVnaXN0cnkucmVnaXN0cmF0aW9uTmFtZU1vZHVsZXNbcmVnaXN0cmF0aW9uTmFtZV07XG4gICAgaWYgKFBsdWdpbk1vZHVsZSAmJiBQbHVnaW5Nb2R1bGUuZGlkUHV0TGlzdGVuZXIpIHtcbiAgICAgIFBsdWdpbk1vZHVsZS5kaWRQdXRMaXN0ZW5lcihpZCwgcmVnaXN0cmF0aW9uTmFtZSwgbGlzdGVuZXIpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIElEIG9mIHRoZSBET00gZWxlbWVudC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlZ2lzdHJhdGlvbk5hbWUgTmFtZSBvZiBsaXN0ZW5lciAoZS5nLiBgb25DbGlja2ApLlxuICAgKiBAcmV0dXJuIHs/ZnVuY3Rpb259IFRoZSBzdG9yZWQgY2FsbGJhY2suXG4gICAqL1xuICBnZXRMaXN0ZW5lcjogZnVuY3Rpb24gKGlkLCByZWdpc3RyYXRpb25OYW1lKSB7XG4gICAgdmFyIGJhbmtGb3JSZWdpc3RyYXRpb25OYW1lID0gbGlzdGVuZXJCYW5rW3JlZ2lzdHJhdGlvbk5hbWVdO1xuICAgIHJldHVybiBiYW5rRm9yUmVnaXN0cmF0aW9uTmFtZSAmJiBiYW5rRm9yUmVnaXN0cmF0aW9uTmFtZVtpZF07XG4gIH0sXG5cbiAgLyoqXG4gICAqIERlbGV0ZXMgYSBsaXN0ZW5lciBmcm9tIHRoZSByZWdpc3RyYXRpb24gYmFuay5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIElEIG9mIHRoZSBET00gZWxlbWVudC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlZ2lzdHJhdGlvbk5hbWUgTmFtZSBvZiBsaXN0ZW5lciAoZS5nLiBgb25DbGlja2ApLlxuICAgKi9cbiAgZGVsZXRlTGlzdGVuZXI6IGZ1bmN0aW9uIChpZCwgcmVnaXN0cmF0aW9uTmFtZSkge1xuICAgIHZhciBQbHVnaW5Nb2R1bGUgPSBFdmVudFBsdWdpblJlZ2lzdHJ5LnJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzW3JlZ2lzdHJhdGlvbk5hbWVdO1xuICAgIGlmIChQbHVnaW5Nb2R1bGUgJiYgUGx1Z2luTW9kdWxlLndpbGxEZWxldGVMaXN0ZW5lcikge1xuICAgICAgUGx1Z2luTW9kdWxlLndpbGxEZWxldGVMaXN0ZW5lcihpZCwgcmVnaXN0cmF0aW9uTmFtZSk7XG4gICAgfVxuXG4gICAgdmFyIGJhbmtGb3JSZWdpc3RyYXRpb25OYW1lID0gbGlzdGVuZXJCYW5rW3JlZ2lzdHJhdGlvbk5hbWVdO1xuICAgIC8vIFRPRE86IFRoaXMgc2hvdWxkIG5ldmVyIGJlIG51bGwgLS0gd2hlbiBpcyBpdD9cbiAgICBpZiAoYmFua0ZvclJlZ2lzdHJhdGlvbk5hbWUpIHtcbiAgICAgIGRlbGV0ZSBiYW5rRm9yUmVnaXN0cmF0aW9uTmFtZVtpZF07XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBEZWxldGVzIGFsbCBsaXN0ZW5lcnMgZm9yIHRoZSBET00gZWxlbWVudCB3aXRoIHRoZSBzdXBwbGllZCBJRC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIElEIG9mIHRoZSBET00gZWxlbWVudC5cbiAgICovXG4gIGRlbGV0ZUFsbExpc3RlbmVyczogZnVuY3Rpb24gKGlkKSB7XG4gICAgZm9yICh2YXIgcmVnaXN0cmF0aW9uTmFtZSBpbiBsaXN0ZW5lckJhbmspIHtcbiAgICAgIGlmICghbGlzdGVuZXJCYW5rW3JlZ2lzdHJhdGlvbk5hbWVdW2lkXSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgdmFyIFBsdWdpbk1vZHVsZSA9IEV2ZW50UGx1Z2luUmVnaXN0cnkucmVnaXN0cmF0aW9uTmFtZU1vZHVsZXNbcmVnaXN0cmF0aW9uTmFtZV07XG4gICAgICBpZiAoUGx1Z2luTW9kdWxlICYmIFBsdWdpbk1vZHVsZS53aWxsRGVsZXRlTGlzdGVuZXIpIHtcbiAgICAgICAgUGx1Z2luTW9kdWxlLndpbGxEZWxldGVMaXN0ZW5lcihpZCwgcmVnaXN0cmF0aW9uTmFtZSk7XG4gICAgICB9XG5cbiAgICAgIGRlbGV0ZSBsaXN0ZW5lckJhbmtbcmVnaXN0cmF0aW9uTmFtZV1baWRdO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogQWxsb3dzIHJlZ2lzdGVyZWQgcGx1Z2lucyBhbiBvcHBvcnR1bml0eSB0byBleHRyYWN0IGV2ZW50cyBmcm9tIHRvcC1sZXZlbFxuICAgKiBuYXRpdmUgYnJvd3NlciBldmVudHMuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFR5cGUgUmVjb3JkIGZyb20gYEV2ZW50Q29uc3RhbnRzYC5cbiAgICogQHBhcmFtIHtET01FdmVudFRhcmdldH0gdG9wTGV2ZWxUYXJnZXQgVGhlIGxpc3RlbmluZyBjb21wb25lbnQgcm9vdCBub2RlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUYXJnZXRJRCBJRCBvZiBgdG9wTGV2ZWxUYXJnZXRgLlxuICAgKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gICAqIEByZXR1cm4geyp9IEFuIGFjY3VtdWxhdGlvbiBvZiBzeW50aGV0aWMgZXZlbnRzLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGV4dHJhY3RFdmVudHM6IGZ1bmN0aW9uICh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElELCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpIHtcbiAgICB2YXIgZXZlbnRzO1xuICAgIHZhciBwbHVnaW5zID0gRXZlbnRQbHVnaW5SZWdpc3RyeS5wbHVnaW5zO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGx1Z2lucy5sZW5ndGg7IGkrKykge1xuICAgICAgLy8gTm90IGV2ZXJ5IHBsdWdpbiBpbiB0aGUgb3JkZXJpbmcgbWF5IGJlIGxvYWRlZCBhdCBydW50aW1lLlxuICAgICAgdmFyIHBvc3NpYmxlUGx1Z2luID0gcGx1Z2luc1tpXTtcbiAgICAgIGlmIChwb3NzaWJsZVBsdWdpbikge1xuICAgICAgICB2YXIgZXh0cmFjdGVkRXZlbnRzID0gcG9zc2libGVQbHVnaW4uZXh0cmFjdEV2ZW50cyh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElELCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xuICAgICAgICBpZiAoZXh0cmFjdGVkRXZlbnRzKSB7XG4gICAgICAgICAgZXZlbnRzID0gYWNjdW11bGF0ZUludG8oZXZlbnRzLCBleHRyYWN0ZWRFdmVudHMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBldmVudHM7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEVucXVldWVzIGEgc3ludGhldGljIGV2ZW50IHRoYXQgc2hvdWxkIGJlIGRpc3BhdGNoZWQgd2hlblxuICAgKiBgcHJvY2Vzc0V2ZW50UXVldWVgIGlzIGludm9rZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gZXZlbnRzIEFuIGFjY3VtdWxhdGlvbiBvZiBzeW50aGV0aWMgZXZlbnRzLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGVucXVldWVFdmVudHM6IGZ1bmN0aW9uIChldmVudHMpIHtcbiAgICBpZiAoZXZlbnRzKSB7XG4gICAgICBldmVudFF1ZXVlID0gYWNjdW11bGF0ZUludG8oZXZlbnRRdWV1ZSwgZXZlbnRzKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIERpc3BhdGNoZXMgYWxsIHN5bnRoZXRpYyBldmVudHMgb24gdGhlIGV2ZW50IHF1ZXVlLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHByb2Nlc3NFdmVudFF1ZXVlOiBmdW5jdGlvbiAoc2ltdWxhdGVkKSB7XG4gICAgLy8gU2V0IGBldmVudFF1ZXVlYCB0byBudWxsIGJlZm9yZSBwcm9jZXNzaW5nIGl0IHNvIHRoYXQgd2UgY2FuIHRlbGwgaWYgbW9yZVxuICAgIC8vIGV2ZW50cyBnZXQgZW5xdWV1ZWQgd2hpbGUgcHJvY2Vzc2luZy5cbiAgICB2YXIgcHJvY2Vzc2luZ0V2ZW50UXVldWUgPSBldmVudFF1ZXVlO1xuICAgIGV2ZW50UXVldWUgPSBudWxsO1xuICAgIGlmIChzaW11bGF0ZWQpIHtcbiAgICAgIGZvckVhY2hBY2N1bXVsYXRlZChwcm9jZXNzaW5nRXZlbnRRdWV1ZSwgZXhlY3V0ZURpc3BhdGNoZXNBbmRSZWxlYXNlU2ltdWxhdGVkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yRWFjaEFjY3VtdWxhdGVkKHByb2Nlc3NpbmdFdmVudFF1ZXVlLCBleGVjdXRlRGlzcGF0Y2hlc0FuZFJlbGVhc2VUb3BMZXZlbCk7XG4gICAgfVxuICAgICEhZXZlbnRRdWV1ZSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdwcm9jZXNzRXZlbnRRdWV1ZSgpOiBBZGRpdGlvbmFsIGV2ZW50cyB3ZXJlIGVucXVldWVkIHdoaWxlIHByb2Nlc3NpbmcgJyArICdhbiBldmVudCBxdWV1ZS4gU3VwcG9ydCBmb3IgdGhpcyBoYXMgbm90IHlldCBiZWVuIGltcGxlbWVudGVkLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAvLyBUaGlzIHdvdWxkIGJlIGEgZ29vZCB0aW1lIHRvIHJldGhyb3cgaWYgYW55IG9mIHRoZSBldmVudCBoYW5kbGVycyB0aHJldy5cbiAgICBSZWFjdEVycm9yVXRpbHMucmV0aHJvd0NhdWdodEVycm9yKCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFRoZXNlIGFyZSBuZWVkZWQgZm9yIHRlc3RzIG9ubHkuIERvIG5vdCB1c2UhXG4gICAqL1xuICBfX3B1cmdlOiBmdW5jdGlvbiAoKSB7XG4gICAgbGlzdGVuZXJCYW5rID0ge307XG4gIH0sXG5cbiAgX19nZXRMaXN0ZW5lckJhbms6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gbGlzdGVuZXJCYW5rO1xuICB9XG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRQbHVnaW5IdWI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0L2xpYi9FdmVudFBsdWdpbkh1Yi5qc1xuLy8gbW9kdWxlIGlkID0gMzFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIEV2ZW50UGx1Z2luUmVnaXN0cnlcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbi8qKlxuICogSW5qZWN0YWJsZSBvcmRlcmluZyBvZiBldmVudCBwbHVnaW5zLlxuICovXG52YXIgRXZlbnRQbHVnaW5PcmRlciA9IG51bGw7XG5cbi8qKlxuICogSW5qZWN0YWJsZSBtYXBwaW5nIGZyb20gbmFtZXMgdG8gZXZlbnQgcGx1Z2luIG1vZHVsZXMuXG4gKi9cbnZhciBuYW1lc1RvUGx1Z2lucyA9IHt9O1xuXG4vKipcbiAqIFJlY29tcHV0ZXMgdGhlIHBsdWdpbiBsaXN0IHVzaW5nIHRoZSBpbmplY3RlZCBwbHVnaW5zIGFuZCBwbHVnaW4gb3JkZXJpbmcuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcmVjb21wdXRlUGx1Z2luT3JkZXJpbmcoKSB7XG4gIGlmICghRXZlbnRQbHVnaW5PcmRlcikge1xuICAgIC8vIFdhaXQgdW50aWwgYW4gYEV2ZW50UGx1Z2luT3JkZXJgIGlzIGluamVjdGVkLlxuICAgIHJldHVybjtcbiAgfVxuICBmb3IgKHZhciBwbHVnaW5OYW1lIGluIG5hbWVzVG9QbHVnaW5zKSB7XG4gICAgdmFyIFBsdWdpbk1vZHVsZSA9IG5hbWVzVG9QbHVnaW5zW3BsdWdpbk5hbWVdO1xuICAgIHZhciBwbHVnaW5JbmRleCA9IEV2ZW50UGx1Z2luT3JkZXIuaW5kZXhPZihwbHVnaW5OYW1lKTtcbiAgICAhKHBsdWdpbkluZGV4ID4gLTEpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0V2ZW50UGx1Z2luUmVnaXN0cnk6IENhbm5vdCBpbmplY3QgZXZlbnQgcGx1Z2lucyB0aGF0IGRvIG5vdCBleGlzdCBpbiAnICsgJ3RoZSBwbHVnaW4gb3JkZXJpbmcsIGAlc2AuJywgcGx1Z2luTmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIGlmIChFdmVudFBsdWdpblJlZ2lzdHJ5LnBsdWdpbnNbcGx1Z2luSW5kZXhdKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgIVBsdWdpbk1vZHVsZS5leHRyYWN0RXZlbnRzID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0V2ZW50UGx1Z2luUmVnaXN0cnk6IEV2ZW50IHBsdWdpbnMgbXVzdCBpbXBsZW1lbnQgYW4gYGV4dHJhY3RFdmVudHNgICcgKyAnbWV0aG9kLCBidXQgYCVzYCBkb2VzIG5vdC4nLCBwbHVnaW5OYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgRXZlbnRQbHVnaW5SZWdpc3RyeS5wbHVnaW5zW3BsdWdpbkluZGV4XSA9IFBsdWdpbk1vZHVsZTtcbiAgICB2YXIgcHVibGlzaGVkRXZlbnRzID0gUGx1Z2luTW9kdWxlLmV2ZW50VHlwZXM7XG4gICAgZm9yICh2YXIgZXZlbnROYW1lIGluIHB1Ymxpc2hlZEV2ZW50cykge1xuICAgICAgIXB1Ymxpc2hFdmVudEZvclBsdWdpbihwdWJsaXNoZWRFdmVudHNbZXZlbnROYW1lXSwgUGx1Z2luTW9kdWxlLCBldmVudE5hbWUpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0V2ZW50UGx1Z2luUmVnaXN0cnk6IEZhaWxlZCB0byBwdWJsaXNoIGV2ZW50IGAlc2AgZm9yIHBsdWdpbiBgJXNgLicsIGV2ZW50TmFtZSwgcGx1Z2luTmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFB1Ymxpc2hlcyBhbiBldmVudCBzbyB0aGF0IGl0IGNhbiBiZSBkaXNwYXRjaGVkIGJ5IHRoZSBzdXBwbGllZCBwbHVnaW4uXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IGRpc3BhdGNoQ29uZmlnIERpc3BhdGNoIGNvbmZpZ3VyYXRpb24gZm9yIHRoZSBldmVudC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBQbHVnaW5Nb2R1bGUgUGx1Z2luIHB1Ymxpc2hpbmcgdGhlIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZXZlbnQgd2FzIHN1Y2Nlc3NmdWxseSBwdWJsaXNoZWQuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBwdWJsaXNoRXZlbnRGb3JQbHVnaW4oZGlzcGF0Y2hDb25maWcsIFBsdWdpbk1vZHVsZSwgZXZlbnROYW1lKSB7XG4gICEhRXZlbnRQbHVnaW5SZWdpc3RyeS5ldmVudE5hbWVEaXNwYXRjaENvbmZpZ3MuaGFzT3duUHJvcGVydHkoZXZlbnROYW1lKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdFdmVudFBsdWdpbkh1YjogTW9yZSB0aGFuIG9uZSBwbHVnaW4gYXR0ZW1wdGVkIHRvIHB1Ymxpc2ggdGhlIHNhbWUgJyArICdldmVudCBuYW1lLCBgJXNgLicsIGV2ZW50TmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICBFdmVudFBsdWdpblJlZ2lzdHJ5LmV2ZW50TmFtZURpc3BhdGNoQ29uZmlnc1tldmVudE5hbWVdID0gZGlzcGF0Y2hDb25maWc7XG5cbiAgdmFyIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzID0gZGlzcGF0Y2hDb25maWcucGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM7XG4gIGlmIChwaGFzZWRSZWdpc3RyYXRpb25OYW1lcykge1xuICAgIGZvciAodmFyIHBoYXNlTmFtZSBpbiBwaGFzZWRSZWdpc3RyYXRpb25OYW1lcykge1xuICAgICAgaWYgKHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzLmhhc093blByb3BlcnR5KHBoYXNlTmFtZSkpIHtcbiAgICAgICAgdmFyIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWUgPSBwaGFzZWRSZWdpc3RyYXRpb25OYW1lc1twaGFzZU5hbWVdO1xuICAgICAgICBwdWJsaXNoUmVnaXN0cmF0aW9uTmFtZShwaGFzZWRSZWdpc3RyYXRpb25OYW1lLCBQbHVnaW5Nb2R1bGUsIGV2ZW50TmFtZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9IGVsc2UgaWYgKGRpc3BhdGNoQ29uZmlnLnJlZ2lzdHJhdGlvbk5hbWUpIHtcbiAgICBwdWJsaXNoUmVnaXN0cmF0aW9uTmFtZShkaXNwYXRjaENvbmZpZy5yZWdpc3RyYXRpb25OYW1lLCBQbHVnaW5Nb2R1bGUsIGV2ZW50TmFtZSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIFB1Ymxpc2hlcyBhIHJlZ2lzdHJhdGlvbiBuYW1lIHRoYXQgaXMgdXNlZCB0byBpZGVudGlmeSBkaXNwYXRjaGVkIGV2ZW50cyBhbmRcbiAqIGNhbiBiZSB1c2VkIHdpdGggYEV2ZW50UGx1Z2luSHViLnB1dExpc3RlbmVyYCB0byByZWdpc3RlciBsaXN0ZW5lcnMuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHJlZ2lzdHJhdGlvbk5hbWUgUmVnaXN0cmF0aW9uIG5hbWUgdG8gYWRkLlxuICogQHBhcmFtIHtvYmplY3R9IFBsdWdpbk1vZHVsZSBQbHVnaW4gcHVibGlzaGluZyB0aGUgZXZlbnQuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBwdWJsaXNoUmVnaXN0cmF0aW9uTmFtZShyZWdpc3RyYXRpb25OYW1lLCBQbHVnaW5Nb2R1bGUsIGV2ZW50TmFtZSkge1xuICAhIUV2ZW50UGx1Z2luUmVnaXN0cnkucmVnaXN0cmF0aW9uTmFtZU1vZHVsZXNbcmVnaXN0cmF0aW9uTmFtZV0gPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRXZlbnRQbHVnaW5IdWI6IE1vcmUgdGhhbiBvbmUgcGx1Z2luIGF0dGVtcHRlZCB0byBwdWJsaXNoIHRoZSBzYW1lICcgKyAncmVnaXN0cmF0aW9uIG5hbWUsIGAlc2AuJywgcmVnaXN0cmF0aW9uTmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICBFdmVudFBsdWdpblJlZ2lzdHJ5LnJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzW3JlZ2lzdHJhdGlvbk5hbWVdID0gUGx1Z2luTW9kdWxlO1xuICBFdmVudFBsdWdpblJlZ2lzdHJ5LnJlZ2lzdHJhdGlvbk5hbWVEZXBlbmRlbmNpZXNbcmVnaXN0cmF0aW9uTmFtZV0gPSBQbHVnaW5Nb2R1bGUuZXZlbnRUeXBlc1tldmVudE5hbWVdLmRlcGVuZGVuY2llcztcbn1cblxuLyoqXG4gKiBSZWdpc3RlcnMgcGx1Z2lucyBzbyB0aGF0IHRoZXkgY2FuIGV4dHJhY3QgYW5kIGRpc3BhdGNoIGV2ZW50cy5cbiAqXG4gKiBAc2VlIHtFdmVudFBsdWdpbkh1Yn1cbiAqL1xudmFyIEV2ZW50UGx1Z2luUmVnaXN0cnkgPSB7XG5cbiAgLyoqXG4gICAqIE9yZGVyZWQgbGlzdCBvZiBpbmplY3RlZCBwbHVnaW5zLlxuICAgKi9cbiAgcGx1Z2luczogW10sXG5cbiAgLyoqXG4gICAqIE1hcHBpbmcgZnJvbSBldmVudCBuYW1lIHRvIGRpc3BhdGNoIGNvbmZpZ1xuICAgKi9cbiAgZXZlbnROYW1lRGlzcGF0Y2hDb25maWdzOiB7fSxcblxuICAvKipcbiAgICogTWFwcGluZyBmcm9tIHJlZ2lzdHJhdGlvbiBuYW1lIHRvIHBsdWdpbiBtb2R1bGVcbiAgICovXG4gIHJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzOiB7fSxcblxuICAvKipcbiAgICogTWFwcGluZyBmcm9tIHJlZ2lzdHJhdGlvbiBuYW1lIHRvIGV2ZW50IG5hbWVcbiAgICovXG4gIHJlZ2lzdHJhdGlvbk5hbWVEZXBlbmRlbmNpZXM6IHt9LFxuXG4gIC8qKlxuICAgKiBJbmplY3RzIGFuIG9yZGVyaW5nIG9mIHBsdWdpbnMgKGJ5IHBsdWdpbiBuYW1lKS4gVGhpcyBhbGxvd3MgdGhlIG9yZGVyaW5nXG4gICAqIHRvIGJlIGRlY291cGxlZCBmcm9tIGluamVjdGlvbiBvZiB0aGUgYWN0dWFsIHBsdWdpbnMgc28gdGhhdCBvcmRlcmluZyBpc1xuICAgKiBhbHdheXMgZGV0ZXJtaW5pc3RpYyByZWdhcmRsZXNzIG9mIHBhY2thZ2luZywgb24tdGhlLWZseSBpbmplY3Rpb24sIGV0Yy5cbiAgICpcbiAgICogQHBhcmFtIHthcnJheX0gSW5qZWN0ZWRFdmVudFBsdWdpbk9yZGVyXG4gICAqIEBpbnRlcm5hbFxuICAgKiBAc2VlIHtFdmVudFBsdWdpbkh1Yi5pbmplY3Rpb24uaW5qZWN0RXZlbnRQbHVnaW5PcmRlcn1cbiAgICovXG4gIGluamVjdEV2ZW50UGx1Z2luT3JkZXI6IGZ1bmN0aW9uIChJbmplY3RlZEV2ZW50UGx1Z2luT3JkZXIpIHtcbiAgICAhIUV2ZW50UGx1Z2luT3JkZXIgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRXZlbnRQbHVnaW5SZWdpc3RyeTogQ2Fubm90IGluamVjdCBldmVudCBwbHVnaW4gb3JkZXJpbmcgbW9yZSB0aGFuICcgKyAnb25jZS4gWW91IGFyZSBsaWtlbHkgdHJ5aW5nIHRvIGxvYWQgbW9yZSB0aGFuIG9uZSBjb3B5IG9mIFJlYWN0LicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAvLyBDbG9uZSB0aGUgb3JkZXJpbmcgc28gaXQgY2Fubm90IGJlIGR5bmFtaWNhbGx5IG11dGF0ZWQuXG4gICAgRXZlbnRQbHVnaW5PcmRlciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKEluamVjdGVkRXZlbnRQbHVnaW5PcmRlcik7XG4gICAgcmVjb21wdXRlUGx1Z2luT3JkZXJpbmcoKTtcbiAgfSxcblxuICAvKipcbiAgICogSW5qZWN0cyBwbHVnaW5zIHRvIGJlIHVzZWQgYnkgYEV2ZW50UGx1Z2luSHViYC4gVGhlIHBsdWdpbiBuYW1lcyBtdXN0IGJlXG4gICAqIGluIHRoZSBvcmRlcmluZyBpbmplY3RlZCBieSBgaW5qZWN0RXZlbnRQbHVnaW5PcmRlcmAuXG4gICAqXG4gICAqIFBsdWdpbnMgY2FuIGJlIGluamVjdGVkIGFzIHBhcnQgb2YgcGFnZSBpbml0aWFsaXphdGlvbiBvciBvbi10aGUtZmx5LlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gaW5qZWN0ZWROYW1lc1RvUGx1Z2lucyBNYXAgZnJvbSBuYW1lcyB0byBwbHVnaW4gbW9kdWxlcy5cbiAgICogQGludGVybmFsXG4gICAqIEBzZWUge0V2ZW50UGx1Z2luSHViLmluamVjdGlvbi5pbmplY3RFdmVudFBsdWdpbnNCeU5hbWV9XG4gICAqL1xuICBpbmplY3RFdmVudFBsdWdpbnNCeU5hbWU6IGZ1bmN0aW9uIChpbmplY3RlZE5hbWVzVG9QbHVnaW5zKSB7XG4gICAgdmFyIGlzT3JkZXJpbmdEaXJ0eSA9IGZhbHNlO1xuICAgIGZvciAodmFyIHBsdWdpbk5hbWUgaW4gaW5qZWN0ZWROYW1lc1RvUGx1Z2lucykge1xuICAgICAgaWYgKCFpbmplY3RlZE5hbWVzVG9QbHVnaW5zLmhhc093blByb3BlcnR5KHBsdWdpbk5hbWUpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgdmFyIFBsdWdpbk1vZHVsZSA9IGluamVjdGVkTmFtZXNUb1BsdWdpbnNbcGx1Z2luTmFtZV07XG4gICAgICBpZiAoIW5hbWVzVG9QbHVnaW5zLmhhc093blByb3BlcnR5KHBsdWdpbk5hbWUpIHx8IG5hbWVzVG9QbHVnaW5zW3BsdWdpbk5hbWVdICE9PSBQbHVnaW5Nb2R1bGUpIHtcbiAgICAgICAgISFuYW1lc1RvUGx1Z2luc1twbHVnaW5OYW1lXSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdFdmVudFBsdWdpblJlZ2lzdHJ5OiBDYW5ub3QgaW5qZWN0IHR3byBkaWZmZXJlbnQgZXZlbnQgcGx1Z2lucyAnICsgJ3VzaW5nIHRoZSBzYW1lIG5hbWUsIGAlc2AuJywgcGx1Z2luTmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgICAgICBuYW1lc1RvUGx1Z2luc1twbHVnaW5OYW1lXSA9IFBsdWdpbk1vZHVsZTtcbiAgICAgICAgaXNPcmRlcmluZ0RpcnR5ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlzT3JkZXJpbmdEaXJ0eSkge1xuICAgICAgcmVjb21wdXRlUGx1Z2luT3JkZXJpbmcoKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIExvb2tzIHVwIHRoZSBwbHVnaW4gZm9yIHRoZSBzdXBwbGllZCBldmVudC5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IGV2ZW50IEEgc3ludGhldGljIGV2ZW50LlxuICAgKiBAcmV0dXJuIHs/b2JqZWN0fSBUaGUgcGx1Z2luIHRoYXQgY3JlYXRlZCB0aGUgc3VwcGxpZWQgZXZlbnQuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZ2V0UGx1Z2luTW9kdWxlRm9yRXZlbnQ6IGZ1bmN0aW9uIChldmVudCkge1xuICAgIHZhciBkaXNwYXRjaENvbmZpZyA9IGV2ZW50LmRpc3BhdGNoQ29uZmlnO1xuICAgIGlmIChkaXNwYXRjaENvbmZpZy5yZWdpc3RyYXRpb25OYW1lKSB7XG4gICAgICByZXR1cm4gRXZlbnRQbHVnaW5SZWdpc3RyeS5yZWdpc3RyYXRpb25OYW1lTW9kdWxlc1tkaXNwYXRjaENvbmZpZy5yZWdpc3RyYXRpb25OYW1lXSB8fCBudWxsO1xuICAgIH1cbiAgICBmb3IgKHZhciBwaGFzZSBpbiBkaXNwYXRjaENvbmZpZy5waGFzZWRSZWdpc3RyYXRpb25OYW1lcykge1xuICAgICAgaWYgKCFkaXNwYXRjaENvbmZpZy5waGFzZWRSZWdpc3RyYXRpb25OYW1lcy5oYXNPd25Qcm9wZXJ0eShwaGFzZSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICB2YXIgUGx1Z2luTW9kdWxlID0gRXZlbnRQbHVnaW5SZWdpc3RyeS5yZWdpc3RyYXRpb25OYW1lTW9kdWxlc1tkaXNwYXRjaENvbmZpZy5waGFzZWRSZWdpc3RyYXRpb25OYW1lc1twaGFzZV1dO1xuICAgICAgaWYgKFBsdWdpbk1vZHVsZSkge1xuICAgICAgICByZXR1cm4gUGx1Z2luTW9kdWxlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfSxcblxuICAvKipcbiAgICogRXhwb3NlZCBmb3IgdW5pdCB0ZXN0aW5nLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3Jlc2V0RXZlbnRQbHVnaW5zOiBmdW5jdGlvbiAoKSB7XG4gICAgRXZlbnRQbHVnaW5PcmRlciA9IG51bGw7XG4gICAgZm9yICh2YXIgcGx1Z2luTmFtZSBpbiBuYW1lc1RvUGx1Z2lucykge1xuICAgICAgaWYgKG5hbWVzVG9QbHVnaW5zLmhhc093blByb3BlcnR5KHBsdWdpbk5hbWUpKSB7XG4gICAgICAgIGRlbGV0ZSBuYW1lc1RvUGx1Z2luc1twbHVnaW5OYW1lXTtcbiAgICAgIH1cbiAgICB9XG4gICAgRXZlbnRQbHVnaW5SZWdpc3RyeS5wbHVnaW5zLmxlbmd0aCA9IDA7XG5cbiAgICB2YXIgZXZlbnROYW1lRGlzcGF0Y2hDb25maWdzID0gRXZlbnRQbHVnaW5SZWdpc3RyeS5ldmVudE5hbWVEaXNwYXRjaENvbmZpZ3M7XG4gICAgZm9yICh2YXIgZXZlbnROYW1lIGluIGV2ZW50TmFtZURpc3BhdGNoQ29uZmlncykge1xuICAgICAgaWYgKGV2ZW50TmFtZURpc3BhdGNoQ29uZmlncy5oYXNPd25Qcm9wZXJ0eShldmVudE5hbWUpKSB7XG4gICAgICAgIGRlbGV0ZSBldmVudE5hbWVEaXNwYXRjaENvbmZpZ3NbZXZlbnROYW1lXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgcmVnaXN0cmF0aW9uTmFtZU1vZHVsZXMgPSBFdmVudFBsdWdpblJlZ2lzdHJ5LnJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzO1xuICAgIGZvciAodmFyIHJlZ2lzdHJhdGlvbk5hbWUgaW4gcmVnaXN0cmF0aW9uTmFtZU1vZHVsZXMpIHtcbiAgICAgIGlmIChyZWdpc3RyYXRpb25OYW1lTW9kdWxlcy5oYXNPd25Qcm9wZXJ0eShyZWdpc3RyYXRpb25OYW1lKSkge1xuICAgICAgICBkZWxldGUgcmVnaXN0cmF0aW9uTmFtZU1vZHVsZXNbcmVnaXN0cmF0aW9uTmFtZV07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRQbHVnaW5SZWdpc3RyeTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QvbGliL0V2ZW50UGx1Z2luUmVnaXN0cnkuanNcbi8vIG1vZHVsZSBpZCA9IDMyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBFdmVudFBsdWdpblV0aWxzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXZlbnRDb25zdGFudHMgPSByZXF1aXJlKCcuL0V2ZW50Q29uc3RhbnRzJyk7XG52YXIgUmVhY3RFcnJvclV0aWxzID0gcmVxdWlyZSgnLi9SZWFjdEVycm9yVXRpbHMnKTtcblxudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbi8qKlxuICogSW5qZWN0ZWQgZGVwZW5kZW5jaWVzOlxuICovXG5cbi8qKlxuICogLSBgTW91bnRgOiBbcmVxdWlyZWRdIE1vZHVsZSB0aGF0IGNhbiBjb252ZXJ0IGJldHdlZW4gUmVhY3QgZG9tIElEcyBhbmRcbiAqICAgYWN0dWFsIG5vZGUgcmVmZXJlbmNlcy5cbiAqL1xudmFyIGluamVjdGlvbiA9IHtcbiAgTW91bnQ6IG51bGwsXG4gIGluamVjdE1vdW50OiBmdW5jdGlvbiAoSW5qZWN0ZWRNb3VudCkge1xuICAgIGluamVjdGlvbi5Nb3VudCA9IEluamVjdGVkTW91bnQ7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKEluamVjdGVkTW91bnQgJiYgSW5qZWN0ZWRNb3VudC5nZXROb2RlICYmIEluamVjdGVkTW91bnQuZ2V0SUQsICdFdmVudFBsdWdpblV0aWxzLmluamVjdGlvbi5pbmplY3RNb3VudCguLi4pOiBJbmplY3RlZCBNb3VudCAnICsgJ21vZHVsZSBpcyBtaXNzaW5nIGdldE5vZGUgb3IgZ2V0SUQuJykgOiB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG59O1xuXG52YXIgdG9wTGV2ZWxUeXBlcyA9IEV2ZW50Q29uc3RhbnRzLnRvcExldmVsVHlwZXM7XG5cbmZ1bmN0aW9uIGlzRW5kaXNoKHRvcExldmVsVHlwZSkge1xuICByZXR1cm4gdG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlVXAgfHwgdG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcFRvdWNoRW5kIHx8IHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BUb3VjaENhbmNlbDtcbn1cblxuZnVuY3Rpb24gaXNNb3ZlaXNoKHRvcExldmVsVHlwZSkge1xuICByZXR1cm4gdG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlTW92ZSB8fCB0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wVG91Y2hNb3ZlO1xufVxuZnVuY3Rpb24gaXNTdGFydGlzaCh0b3BMZXZlbFR5cGUpIHtcbiAgcmV0dXJuIHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BNb3VzZURvd24gfHwgdG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcFRvdWNoU3RhcnQ7XG59XG5cbnZhciB2YWxpZGF0ZUV2ZW50RGlzcGF0Y2hlcztcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIHZhbGlkYXRlRXZlbnREaXNwYXRjaGVzID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgdmFyIGRpc3BhdGNoTGlzdGVuZXJzID0gZXZlbnQuX2Rpc3BhdGNoTGlzdGVuZXJzO1xuICAgIHZhciBkaXNwYXRjaElEcyA9IGV2ZW50Ll9kaXNwYXRjaElEcztcblxuICAgIHZhciBsaXN0ZW5lcnNJc0FyciA9IEFycmF5LmlzQXJyYXkoZGlzcGF0Y2hMaXN0ZW5lcnMpO1xuICAgIHZhciBpZHNJc0FyciA9IEFycmF5LmlzQXJyYXkoZGlzcGF0Y2hJRHMpO1xuICAgIHZhciBJRHNMZW4gPSBpZHNJc0FyciA/IGRpc3BhdGNoSURzLmxlbmd0aCA6IGRpc3BhdGNoSURzID8gMSA6IDA7XG4gICAgdmFyIGxpc3RlbmVyc0xlbiA9IGxpc3RlbmVyc0lzQXJyID8gZGlzcGF0Y2hMaXN0ZW5lcnMubGVuZ3RoIDogZGlzcGF0Y2hMaXN0ZW5lcnMgPyAxIDogMDtcblxuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGlkc0lzQXJyID09PSBsaXN0ZW5lcnNJc0FyciAmJiBJRHNMZW4gPT09IGxpc3RlbmVyc0xlbiwgJ0V2ZW50UGx1Z2luVXRpbHM6IEludmFsaWQgYGV2ZW50YC4nKSA6IHVuZGVmaW5lZDtcbiAgfTtcbn1cblxuLyoqXG4gKiBEaXNwYXRjaCB0aGUgZXZlbnQgdG8gdGhlIGxpc3RlbmVyLlxuICogQHBhcmFtIHtTeW50aGV0aWNFdmVudH0gZXZlbnQgU3ludGhldGljRXZlbnQgdG8gaGFuZGxlXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHNpbXVsYXRlZCBJZiB0aGUgZXZlbnQgaXMgc2ltdWxhdGVkIChjaGFuZ2VzIGV4biBiZWhhdmlvcilcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGxpc3RlbmVyIEFwcGxpY2F0aW9uLWxldmVsIGNhbGxiYWNrXG4gKiBAcGFyYW0ge3N0cmluZ30gZG9tSUQgRE9NIGlkIHRvIHBhc3MgdG8gdGhlIGNhbGxiYWNrLlxuICovXG5mdW5jdGlvbiBleGVjdXRlRGlzcGF0Y2goZXZlbnQsIHNpbXVsYXRlZCwgbGlzdGVuZXIsIGRvbUlEKSB7XG4gIHZhciB0eXBlID0gZXZlbnQudHlwZSB8fCAndW5rbm93bi1ldmVudCc7XG4gIGV2ZW50LmN1cnJlbnRUYXJnZXQgPSBpbmplY3Rpb24uTW91bnQuZ2V0Tm9kZShkb21JRCk7XG4gIGlmIChzaW11bGF0ZWQpIHtcbiAgICBSZWFjdEVycm9yVXRpbHMuaW52b2tlR3VhcmRlZENhbGxiYWNrV2l0aENhdGNoKHR5cGUsIGxpc3RlbmVyLCBldmVudCwgZG9tSUQpO1xuICB9IGVsc2Uge1xuICAgIFJlYWN0RXJyb3JVdGlscy5pbnZva2VHdWFyZGVkQ2FsbGJhY2sodHlwZSwgbGlzdGVuZXIsIGV2ZW50LCBkb21JRCk7XG4gIH1cbiAgZXZlbnQuY3VycmVudFRhcmdldCA9IG51bGw7XG59XG5cbi8qKlxuICogU3RhbmRhcmQvc2ltcGxlIGl0ZXJhdGlvbiB0aHJvdWdoIGFuIGV2ZW50J3MgY29sbGVjdGVkIGRpc3BhdGNoZXMuXG4gKi9cbmZ1bmN0aW9uIGV4ZWN1dGVEaXNwYXRjaGVzSW5PcmRlcihldmVudCwgc2ltdWxhdGVkKSB7XG4gIHZhciBkaXNwYXRjaExpc3RlbmVycyA9IGV2ZW50Ll9kaXNwYXRjaExpc3RlbmVycztcbiAgdmFyIGRpc3BhdGNoSURzID0gZXZlbnQuX2Rpc3BhdGNoSURzO1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIHZhbGlkYXRlRXZlbnREaXNwYXRjaGVzKGV2ZW50KTtcbiAgfVxuICBpZiAoQXJyYXkuaXNBcnJheShkaXNwYXRjaExpc3RlbmVycykpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpc3BhdGNoTGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIC8vIExpc3RlbmVycyBhbmQgSURzIGFyZSB0d28gcGFyYWxsZWwgYXJyYXlzIHRoYXQgYXJlIGFsd2F5cyBpbiBzeW5jLlxuICAgICAgZXhlY3V0ZURpc3BhdGNoKGV2ZW50LCBzaW11bGF0ZWQsIGRpc3BhdGNoTGlzdGVuZXJzW2ldLCBkaXNwYXRjaElEc1tpXSk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGRpc3BhdGNoTGlzdGVuZXJzKSB7XG4gICAgZXhlY3V0ZURpc3BhdGNoKGV2ZW50LCBzaW11bGF0ZWQsIGRpc3BhdGNoTGlzdGVuZXJzLCBkaXNwYXRjaElEcyk7XG4gIH1cbiAgZXZlbnQuX2Rpc3BhdGNoTGlzdGVuZXJzID0gbnVsbDtcbiAgZXZlbnQuX2Rpc3BhdGNoSURzID0gbnVsbDtcbn1cblxuLyoqXG4gKiBTdGFuZGFyZC9zaW1wbGUgaXRlcmF0aW9uIHRocm91Z2ggYW4gZXZlbnQncyBjb2xsZWN0ZWQgZGlzcGF0Y2hlcywgYnV0IHN0b3BzXG4gKiBhdCB0aGUgZmlyc3QgZGlzcGF0Y2ggZXhlY3V0aW9uIHJldHVybmluZyB0cnVlLCBhbmQgcmV0dXJucyB0aGF0IGlkLlxuICpcbiAqIEByZXR1cm4gez9zdHJpbmd9IGlkIG9mIHRoZSBmaXJzdCBkaXNwYXRjaCBleGVjdXRpb24gd2hvJ3MgbGlzdGVuZXIgcmV0dXJuc1xuICogdHJ1ZSwgb3IgbnVsbCBpZiBubyBsaXN0ZW5lciByZXR1cm5lZCB0cnVlLlxuICovXG5mdW5jdGlvbiBleGVjdXRlRGlzcGF0Y2hlc0luT3JkZXJTdG9wQXRUcnVlSW1wbChldmVudCkge1xuICB2YXIgZGlzcGF0Y2hMaXN0ZW5lcnMgPSBldmVudC5fZGlzcGF0Y2hMaXN0ZW5lcnM7XG4gIHZhciBkaXNwYXRjaElEcyA9IGV2ZW50Ll9kaXNwYXRjaElEcztcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICB2YWxpZGF0ZUV2ZW50RGlzcGF0Y2hlcyhldmVudCk7XG4gIH1cbiAgaWYgKEFycmF5LmlzQXJyYXkoZGlzcGF0Y2hMaXN0ZW5lcnMpKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkaXNwYXRjaExpc3RlbmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGV2ZW50LmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICAvLyBMaXN0ZW5lcnMgYW5kIElEcyBhcmUgdHdvIHBhcmFsbGVsIGFycmF5cyB0aGF0IGFyZSBhbHdheXMgaW4gc3luYy5cbiAgICAgIGlmIChkaXNwYXRjaExpc3RlbmVyc1tpXShldmVudCwgZGlzcGF0Y2hJRHNbaV0pKSB7XG4gICAgICAgIHJldHVybiBkaXNwYXRjaElEc1tpXTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoZGlzcGF0Y2hMaXN0ZW5lcnMpIHtcbiAgICBpZiAoZGlzcGF0Y2hMaXN0ZW5lcnMoZXZlbnQsIGRpc3BhdGNoSURzKSkge1xuICAgICAgcmV0dXJuIGRpc3BhdGNoSURzO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBAc2VlIGV4ZWN1dGVEaXNwYXRjaGVzSW5PcmRlclN0b3BBdFRydWVJbXBsXG4gKi9cbmZ1bmN0aW9uIGV4ZWN1dGVEaXNwYXRjaGVzSW5PcmRlclN0b3BBdFRydWUoZXZlbnQpIHtcbiAgdmFyIHJldCA9IGV4ZWN1dGVEaXNwYXRjaGVzSW5PcmRlclN0b3BBdFRydWVJbXBsKGV2ZW50KTtcbiAgZXZlbnQuX2Rpc3BhdGNoSURzID0gbnVsbDtcbiAgZXZlbnQuX2Rpc3BhdGNoTGlzdGVuZXJzID0gbnVsbDtcbiAgcmV0dXJuIHJldDtcbn1cblxuLyoqXG4gKiBFeGVjdXRpb24gb2YgYSBcImRpcmVjdFwiIGRpc3BhdGNoIC0gdGhlcmUgbXVzdCBiZSBhdCBtb3N0IG9uZSBkaXNwYXRjaFxuICogYWNjdW11bGF0ZWQgb24gdGhlIGV2ZW50IG9yIGl0IGlzIGNvbnNpZGVyZWQgYW4gZXJyb3IuIEl0IGRvZXNuJ3QgcmVhbGx5IG1ha2VcbiAqIHNlbnNlIGZvciBhbiBldmVudCB3aXRoIG11bHRpcGxlIGRpc3BhdGNoZXMgKGJ1YmJsZWQpIHRvIGtlZXAgdHJhY2sgb2YgdGhlXG4gKiByZXR1cm4gdmFsdWVzIGF0IGVhY2ggZGlzcGF0Y2ggZXhlY3V0aW9uLCBidXQgaXQgZG9lcyB0ZW5kIHRvIG1ha2Ugc2Vuc2Ugd2hlblxuICogZGVhbGluZyB3aXRoIFwiZGlyZWN0XCIgZGlzcGF0Y2hlcy5cbiAqXG4gKiBAcmV0dXJuIHsqfSBUaGUgcmV0dXJuIHZhbHVlIG9mIGV4ZWN1dGluZyB0aGUgc2luZ2xlIGRpc3BhdGNoLlxuICovXG5mdW5jdGlvbiBleGVjdXRlRGlyZWN0RGlzcGF0Y2goZXZlbnQpIHtcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICB2YWxpZGF0ZUV2ZW50RGlzcGF0Y2hlcyhldmVudCk7XG4gIH1cbiAgdmFyIGRpc3BhdGNoTGlzdGVuZXIgPSBldmVudC5fZGlzcGF0Y2hMaXN0ZW5lcnM7XG4gIHZhciBkaXNwYXRjaElEID0gZXZlbnQuX2Rpc3BhdGNoSURzO1xuICAhIUFycmF5LmlzQXJyYXkoZGlzcGF0Y2hMaXN0ZW5lcikgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnZXhlY3V0ZURpcmVjdERpc3BhdGNoKC4uLik6IEludmFsaWQgYGV2ZW50YC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIHZhciByZXMgPSBkaXNwYXRjaExpc3RlbmVyID8gZGlzcGF0Y2hMaXN0ZW5lcihldmVudCwgZGlzcGF0Y2hJRCkgOiBudWxsO1xuICBldmVudC5fZGlzcGF0Y2hMaXN0ZW5lcnMgPSBudWxsO1xuICBldmVudC5fZGlzcGF0Y2hJRHMgPSBudWxsO1xuICByZXR1cm4gcmVzO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7U3ludGhldGljRXZlbnR9IGV2ZW50XG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmZiBudW1iZXIgb2YgZGlzcGF0Y2hlcyBhY2N1bXVsYXRlZCBpcyBncmVhdGVyIHRoYW4gMC5cbiAqL1xuZnVuY3Rpb24gaGFzRGlzcGF0Y2hlcyhldmVudCkge1xuICByZXR1cm4gISFldmVudC5fZGlzcGF0Y2hMaXN0ZW5lcnM7XG59XG5cbi8qKlxuICogR2VuZXJhbCB1dGlsaXRpZXMgdGhhdCBhcmUgdXNlZnVsIGluIGNyZWF0aW5nIGN1c3RvbSBFdmVudCBQbHVnaW5zLlxuICovXG52YXIgRXZlbnRQbHVnaW5VdGlscyA9IHtcbiAgaXNFbmRpc2g6IGlzRW5kaXNoLFxuICBpc01vdmVpc2g6IGlzTW92ZWlzaCxcbiAgaXNTdGFydGlzaDogaXNTdGFydGlzaCxcblxuICBleGVjdXRlRGlyZWN0RGlzcGF0Y2g6IGV4ZWN1dGVEaXJlY3REaXNwYXRjaCxcbiAgZXhlY3V0ZURpc3BhdGNoZXNJbk9yZGVyOiBleGVjdXRlRGlzcGF0Y2hlc0luT3JkZXIsXG4gIGV4ZWN1dGVEaXNwYXRjaGVzSW5PcmRlclN0b3BBdFRydWU6IGV4ZWN1dGVEaXNwYXRjaGVzSW5PcmRlclN0b3BBdFRydWUsXG4gIGhhc0Rpc3BhdGNoZXM6IGhhc0Rpc3BhdGNoZXMsXG5cbiAgZ2V0Tm9kZTogZnVuY3Rpb24gKGlkKSB7XG4gICAgcmV0dXJuIGluamVjdGlvbi5Nb3VudC5nZXROb2RlKGlkKTtcbiAgfSxcbiAgZ2V0SUQ6IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgcmV0dXJuIGluamVjdGlvbi5Nb3VudC5nZXRJRChub2RlKTtcbiAgfSxcblxuICBpbmplY3Rpb246IGluamVjdGlvblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBFdmVudFBsdWdpblV0aWxzO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvRXZlbnRQbHVnaW5VdGlscy5qc1xuLy8gbW9kdWxlIGlkID0gMzNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RXJyb3JVdGlsc1xuICogQHR5cGVjaGVja3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBjYXVnaHRFcnJvciA9IG51bGw7XG5cbi8qKlxuICogQ2FsbCBhIGZ1bmN0aW9uIHdoaWxlIGd1YXJkaW5nIGFnYWluc3QgZXJyb3JzIHRoYXQgaGFwcGVucyB3aXRoaW4gaXQuXG4gKlxuICogQHBhcmFtIHs/U3RyaW5nfSBuYW1lIG9mIHRoZSBndWFyZCB0byB1c2UgZm9yIGxvZ2dpbmcgb3IgZGVidWdnaW5nXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBpbnZva2VcbiAqIEBwYXJhbSB7Kn0gYSBGaXJzdCBhcmd1bWVudFxuICogQHBhcmFtIHsqfSBiIFNlY29uZCBhcmd1bWVudFxuICovXG5mdW5jdGlvbiBpbnZva2VHdWFyZGVkQ2FsbGJhY2sobmFtZSwgZnVuYywgYSwgYikge1xuICB0cnkge1xuICAgIHJldHVybiBmdW5jKGEsIGIpO1xuICB9IGNhdGNoICh4KSB7XG4gICAgaWYgKGNhdWdodEVycm9yID09PSBudWxsKSB7XG4gICAgICBjYXVnaHRFcnJvciA9IHg7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbn1cblxudmFyIFJlYWN0RXJyb3JVdGlscyA9IHtcbiAgaW52b2tlR3VhcmRlZENhbGxiYWNrOiBpbnZva2VHdWFyZGVkQ2FsbGJhY2ssXG5cbiAgLyoqXG4gICAqIEludm9rZWQgYnkgUmVhY3RUZXN0VXRpbHMuU2ltdWxhdGUgc28gdGhhdCBhbnkgZXJyb3JzIHRocm93biBieSB0aGUgZXZlbnRcbiAgICogaGFuZGxlciBhcmUgc3VyZSB0byBiZSByZXRocm93biBieSByZXRocm93Q2F1Z2h0RXJyb3IuXG4gICAqL1xuICBpbnZva2VHdWFyZGVkQ2FsbGJhY2tXaXRoQ2F0Y2g6IGludm9rZUd1YXJkZWRDYWxsYmFjayxcblxuICAvKipcbiAgICogRHVyaW5nIGV4ZWN1dGlvbiBvZiBndWFyZGVkIGZ1bmN0aW9ucyB3ZSB3aWxsIGNhcHR1cmUgdGhlIGZpcnN0IGVycm9yIHdoaWNoXG4gICAqIHdlIHdpbGwgcmV0aHJvdyB0byBiZSBoYW5kbGVkIGJ5IHRoZSB0b3AgbGV2ZWwgZXJyb3IgaGFuZGxlci5cbiAgICovXG4gIHJldGhyb3dDYXVnaHRFcnJvcjogZnVuY3Rpb24gKCkge1xuICAgIGlmIChjYXVnaHRFcnJvcikge1xuICAgICAgdmFyIGVycm9yID0gY2F1Z2h0RXJyb3I7XG4gICAgICBjYXVnaHRFcnJvciA9IG51bGw7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cbn07XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIC8qKlxuICAgKiBUbyBoZWxwIGRldmVsb3BtZW50IHdlIGNhbiBnZXQgYmV0dGVyIGRldnRvb2xzIGludGVncmF0aW9uIGJ5IHNpbXVsYXRpbmcgYVxuICAgKiByZWFsIGJyb3dzZXIgZXZlbnQuXG4gICAqL1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHdpbmRvdy5kaXNwYXRjaEV2ZW50ID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGRvY3VtZW50LmNyZWF0ZUV2ZW50ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgdmFyIGZha2VOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncmVhY3QnKTtcbiAgICBSZWFjdEVycm9yVXRpbHMuaW52b2tlR3VhcmRlZENhbGxiYWNrID0gZnVuY3Rpb24gKG5hbWUsIGZ1bmMsIGEsIGIpIHtcbiAgICAgIHZhciBib3VuZEZ1bmMgPSBmdW5jLmJpbmQobnVsbCwgYSwgYik7XG4gICAgICB2YXIgZXZ0VHlwZSA9ICdyZWFjdC0nICsgbmFtZTtcbiAgICAgIGZha2VOb2RlLmFkZEV2ZW50TGlzdGVuZXIoZXZ0VHlwZSwgYm91bmRGdW5jLCBmYWxzZSk7XG4gICAgICB2YXIgZXZ0ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0V2ZW50Jyk7XG4gICAgICBldnQuaW5pdEV2ZW50KGV2dFR5cGUsIGZhbHNlLCBmYWxzZSk7XG4gICAgICBmYWtlTm9kZS5kaXNwYXRjaEV2ZW50KGV2dCk7XG4gICAgICBmYWtlTm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKGV2dFR5cGUsIGJvdW5kRnVuYywgZmFsc2UpO1xuICAgIH07XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdEVycm9yVXRpbHM7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0L2xpYi9SZWFjdEVycm9yVXRpbHMuanNcbi8vIG1vZHVsZSBpZCA9IDM0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBhY2N1bXVsYXRlSW50b1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xuXG4vKipcbiAqXG4gKiBBY2N1bXVsYXRlcyBpdGVtcyB0aGF0IG11c3Qgbm90IGJlIG51bGwgb3IgdW5kZWZpbmVkIGludG8gdGhlIGZpcnN0IG9uZS4gVGhpc1xuICogaXMgdXNlZCB0byBjb25zZXJ2ZSBtZW1vcnkgYnkgYXZvaWRpbmcgYXJyYXkgYWxsb2NhdGlvbnMsIGFuZCB0aHVzIHNhY3JpZmljZXNcbiAqIEFQSSBjbGVhbm5lc3MuIFNpbmNlIGBjdXJyZW50YCBjYW4gYmUgbnVsbCBiZWZvcmUgYmVpbmcgcGFzc2VkIGluIGFuZCBub3RcbiAqIG51bGwgYWZ0ZXIgdGhpcyBmdW5jdGlvbiwgbWFrZSBzdXJlIHRvIGFzc2lnbiBpdCBiYWNrIHRvIGBjdXJyZW50YDpcbiAqXG4gKiBgYSA9IGFjY3VtdWxhdGVJbnRvKGEsIGIpO2BcbiAqXG4gKiBUaGlzIEFQSSBzaG91bGQgYmUgc3BhcmluZ2x5IHVzZWQuIFRyeSBgYWNjdW11bGF0ZWAgZm9yIHNvbWV0aGluZyBjbGVhbmVyLlxuICpcbiAqIEByZXR1cm4geyp8YXJyYXk8Kj59IEFuIGFjY3VtdWxhdGlvbiBvZiBpdGVtcy5cbiAqL1xuXG5mdW5jdGlvbiBhY2N1bXVsYXRlSW50byhjdXJyZW50LCBuZXh0KSB7XG4gICEobmV4dCAhPSBudWxsKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdhY2N1bXVsYXRlSW50byguLi4pOiBBY2N1bXVsYXRlZCBpdGVtcyBtdXN0IG5vdCBiZSBudWxsIG9yIHVuZGVmaW5lZC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIGlmIChjdXJyZW50ID09IG51bGwpIHtcbiAgICByZXR1cm4gbmV4dDtcbiAgfVxuXG4gIC8vIEJvdGggYXJlIG5vdCBlbXB0eS4gV2FybmluZzogTmV2ZXIgY2FsbCB4LmNvbmNhdCh5KSB3aGVuIHlvdSBhcmUgbm90XG4gIC8vIGNlcnRhaW4gdGhhdCB4IGlzIGFuIEFycmF5ICh4IGNvdWxkIGJlIGEgc3RyaW5nIHdpdGggY29uY2F0IG1ldGhvZCkuXG4gIHZhciBjdXJyZW50SXNBcnJheSA9IEFycmF5LmlzQXJyYXkoY3VycmVudCk7XG4gIHZhciBuZXh0SXNBcnJheSA9IEFycmF5LmlzQXJyYXkobmV4dCk7XG5cbiAgaWYgKGN1cnJlbnRJc0FycmF5ICYmIG5leHRJc0FycmF5KSB7XG4gICAgY3VycmVudC5wdXNoLmFwcGx5KGN1cnJlbnQsIG5leHQpO1xuICAgIHJldHVybiBjdXJyZW50O1xuICB9XG5cbiAgaWYgKGN1cnJlbnRJc0FycmF5KSB7XG4gICAgY3VycmVudC5wdXNoKG5leHQpO1xuICAgIHJldHVybiBjdXJyZW50O1xuICB9XG5cbiAgaWYgKG5leHRJc0FycmF5KSB7XG4gICAgLy8gQSBiaXQgdG9vIGRhbmdlcm91cyB0byBtdXRhdGUgYG5leHRgLlxuICAgIHJldHVybiBbY3VycmVudF0uY29uY2F0KG5leHQpO1xuICB9XG5cbiAgcmV0dXJuIFtjdXJyZW50LCBuZXh0XTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBhY2N1bXVsYXRlSW50bztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QvbGliL2FjY3VtdWxhdGVJbnRvLmpzXG4vLyBtb2R1bGUgaWQgPSAzNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgZm9yRWFjaEFjY3VtdWxhdGVkXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEBwYXJhbSB7YXJyYXl9IGFyciBhbiBcImFjY3VtdWxhdGlvblwiIG9mIGl0ZW1zIHdoaWNoIGlzIGVpdGhlciBhbiBBcnJheSBvclxuICogYSBzaW5nbGUgaXRlbS4gVXNlZnVsIHdoZW4gcGFpcmVkIHdpdGggdGhlIGBhY2N1bXVsYXRlYCBtb2R1bGUuIFRoaXMgaXMgYVxuICogc2ltcGxlIHV0aWxpdHkgdGhhdCBhbGxvd3MgdXMgdG8gcmVhc29uIGFib3V0IGEgY29sbGVjdGlvbiBvZiBpdGVtcywgYnV0XG4gKiBoYW5kbGluZyB0aGUgY2FzZSB3aGVuIHRoZXJlIGlzIGV4YWN0bHkgb25lIGl0ZW0gKGFuZCB3ZSBkbyBub3QgbmVlZCB0b1xuICogYWxsb2NhdGUgYW4gYXJyYXkpLlxuICovXG52YXIgZm9yRWFjaEFjY3VtdWxhdGVkID0gZnVuY3Rpb24gKGFyciwgY2IsIHNjb3BlKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KGFycikpIHtcbiAgICBhcnIuZm9yRWFjaChjYiwgc2NvcGUpO1xuICB9IGVsc2UgaWYgKGFycikge1xuICAgIGNiLmNhbGwoc2NvcGUsIGFycik7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZm9yRWFjaEFjY3VtdWxhdGVkO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvZm9yRWFjaEFjY3VtdWxhdGVkLmpzXG4vLyBtb2R1bGUgaWQgPSAzNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RFdmVudEVtaXR0ZXJNaXhpblxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEV2ZW50UGx1Z2luSHViID0gcmVxdWlyZSgnLi9FdmVudFBsdWdpbkh1YicpO1xuXG5mdW5jdGlvbiBydW5FdmVudFF1ZXVlSW5CYXRjaChldmVudHMpIHtcbiAgRXZlbnRQbHVnaW5IdWIuZW5xdWV1ZUV2ZW50cyhldmVudHMpO1xuICBFdmVudFBsdWdpbkh1Yi5wcm9jZXNzRXZlbnRRdWV1ZShmYWxzZSk7XG59XG5cbnZhciBSZWFjdEV2ZW50RW1pdHRlck1peGluID0ge1xuXG4gIC8qKlxuICAgKiBTdHJlYW1zIGEgZmlyZWQgdG9wLWxldmVsIGV2ZW50IHRvIGBFdmVudFBsdWdpbkh1YmAgd2hlcmUgcGx1Z2lucyBoYXZlIHRoZVxuICAgKiBvcHBvcnR1bml0eSB0byBjcmVhdGUgYFJlYWN0RXZlbnRgcyB0byBiZSBkaXNwYXRjaGVkLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlIFJlY29yZCBmcm9tIGBFdmVudENvbnN0YW50c2AuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSB0b3BMZXZlbFRhcmdldCBUaGUgbGlzdGVuaW5nIGNvbXBvbmVudCByb290IG5vZGUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFRhcmdldElEIElEIG9mIGB0b3BMZXZlbFRhcmdldGAuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgZW52aXJvbm1lbnQgZXZlbnQuXG4gICAqL1xuICBoYW5kbGVUb3BMZXZlbDogZnVuY3Rpb24gKHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICAgIHZhciBldmVudHMgPSBFdmVudFBsdWdpbkh1Yi5leHRyYWN0RXZlbnRzKHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG4gICAgcnVuRXZlbnRRdWV1ZUluQmF0Y2goZXZlbnRzKTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdEV2ZW50RW1pdHRlck1peGluO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvUmVhY3RFdmVudEVtaXR0ZXJNaXhpbi5qc1xuLy8gbW9kdWxlIGlkID0gMzdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFZpZXdwb3J0TWV0cmljc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFZpZXdwb3J0TWV0cmljcyA9IHtcblxuICBjdXJyZW50U2Nyb2xsTGVmdDogMCxcblxuICBjdXJyZW50U2Nyb2xsVG9wOiAwLFxuXG4gIHJlZnJlc2hTY3JvbGxWYWx1ZXM6IGZ1bmN0aW9uIChzY3JvbGxQb3NpdGlvbikge1xuICAgIFZpZXdwb3J0TWV0cmljcy5jdXJyZW50U2Nyb2xsTGVmdCA9IHNjcm9sbFBvc2l0aW9uLng7XG4gICAgVmlld3BvcnRNZXRyaWNzLmN1cnJlbnRTY3JvbGxUb3AgPSBzY3JvbGxQb3NpdGlvbi55O1xuICB9XG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gVmlld3BvcnRNZXRyaWNzO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvVmlld3BvcnRNZXRyaWNzLmpzXG4vLyBtb2R1bGUgaWQgPSAzOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDE0LTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgT2JqZWN0LmFzc2lnblxuICovXG5cbi8vIGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1vYmplY3QuYXNzaWduXG5cbid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gYXNzaWduKHRhcmdldCwgc291cmNlcykge1xuICBpZiAodGFyZ2V0ID09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdPYmplY3QuYXNzaWduIHRhcmdldCBjYW5ub3QgYmUgbnVsbCBvciB1bmRlZmluZWQnKTtcbiAgfVxuXG4gIHZhciB0byA9IE9iamVjdCh0YXJnZXQpO1xuICB2YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG4gIGZvciAodmFyIG5leHRJbmRleCA9IDE7IG5leHRJbmRleCA8IGFyZ3VtZW50cy5sZW5ndGg7IG5leHRJbmRleCsrKSB7XG4gICAgdmFyIG5leHRTb3VyY2UgPSBhcmd1bWVudHNbbmV4dEluZGV4XTtcbiAgICBpZiAobmV4dFNvdXJjZSA9PSBudWxsKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICB2YXIgZnJvbSA9IE9iamVjdChuZXh0U291cmNlKTtcblxuICAgIC8vIFdlIGRvbid0IGN1cnJlbnRseSBzdXBwb3J0IGFjY2Vzc29ycyBub3IgcHJveGllcy4gVGhlcmVmb3JlIHRoaXNcbiAgICAvLyBjb3B5IGNhbm5vdCB0aHJvdy4gSWYgd2UgZXZlciBzdXBwb3J0ZWQgdGhpcyB0aGVuIHdlIG11c3QgaGFuZGxlXG4gICAgLy8gZXhjZXB0aW9ucyBhbmQgc2lkZS1lZmZlY3RzLiBXZSBkb24ndCBzdXBwb3J0IHN5bWJvbHMgc28gdGhleSB3b24ndFxuICAgIC8vIGJlIHRyYW5zZmVycmVkLlxuXG4gICAgZm9yICh2YXIga2V5IGluIGZyb20pIHtcbiAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKGZyb20sIGtleSkpIHtcbiAgICAgICAgdG9ba2V5XSA9IGZyb21ba2V5XTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdG87XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYXNzaWduO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvT2JqZWN0LmFzc2lnbi5qc1xuLy8gbW9kdWxlIGlkID0gMzlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGlzRXZlbnRTdXBwb3J0ZWRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHJlcXVpcmUoJ2ZianMvbGliL0V4ZWN1dGlvbkVudmlyb25tZW50Jyk7XG5cbnZhciB1c2VIYXNGZWF0dXJlO1xuaWYgKEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSkge1xuICB1c2VIYXNGZWF0dXJlID0gZG9jdW1lbnQuaW1wbGVtZW50YXRpb24gJiYgZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uaGFzRmVhdHVyZSAmJlxuICAvLyBhbHdheXMgcmV0dXJucyB0cnVlIGluIG5ld2VyIGJyb3dzZXJzIGFzIHBlciB0aGUgc3RhbmRhcmQuXG4gIC8vIEBzZWUgaHR0cDovL2RvbS5zcGVjLndoYXR3Zy5vcmcvI2RvbS1kb21pbXBsZW1lbnRhdGlvbi1oYXNmZWF0dXJlXG4gIGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmhhc0ZlYXR1cmUoJycsICcnKSAhPT0gdHJ1ZTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYW4gZXZlbnQgaXMgc3VwcG9ydGVkIGluIHRoZSBjdXJyZW50IGV4ZWN1dGlvbiBlbnZpcm9ubWVudC5cbiAqXG4gKiBOT1RFOiBUaGlzIHdpbGwgbm90IHdvcmsgY29ycmVjdGx5IGZvciBub24tZ2VuZXJpYyBldmVudHMgc3VjaCBhcyBgY2hhbmdlYCxcbiAqIGByZXNldGAsIGBsb2FkYCwgYGVycm9yYCwgYW5kIGBzZWxlY3RgLlxuICpcbiAqIEJvcnJvd3MgZnJvbSBNb2Rlcm5penIuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50TmFtZVN1ZmZpeCBFdmVudCBuYW1lLCBlLmcuIFwiY2xpY2tcIi5cbiAqIEBwYXJhbSB7P2Jvb2xlYW59IGNhcHR1cmUgQ2hlY2sgaWYgdGhlIGNhcHR1cmUgcGhhc2UgaXMgc3VwcG9ydGVkLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZXZlbnQgaXMgc3VwcG9ydGVkLlxuICogQGludGVybmFsXG4gKiBAbGljZW5zZSBNb2Rlcm5penIgMy4wLjBwcmUgKEN1c3RvbSBCdWlsZCkgfCBNSVRcbiAqL1xuZnVuY3Rpb24gaXNFdmVudFN1cHBvcnRlZChldmVudE5hbWVTdWZmaXgsIGNhcHR1cmUpIHtcbiAgaWYgKCFFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gfHwgY2FwdHVyZSAmJiAhKCdhZGRFdmVudExpc3RlbmVyJyBpbiBkb2N1bWVudCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICB2YXIgZXZlbnROYW1lID0gJ29uJyArIGV2ZW50TmFtZVN1ZmZpeDtcbiAgdmFyIGlzU3VwcG9ydGVkID0gKGV2ZW50TmFtZSBpbiBkb2N1bWVudCk7XG5cbiAgaWYgKCFpc1N1cHBvcnRlZCkge1xuICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoZXZlbnROYW1lLCAncmV0dXJuOycpO1xuICAgIGlzU3VwcG9ydGVkID0gdHlwZW9mIGVsZW1lbnRbZXZlbnROYW1lXSA9PT0gJ2Z1bmN0aW9uJztcbiAgfVxuXG4gIGlmICghaXNTdXBwb3J0ZWQgJiYgdXNlSGFzRmVhdHVyZSAmJiBldmVudE5hbWVTdWZmaXggPT09ICd3aGVlbCcpIHtcbiAgICAvLyBUaGlzIGlzIHRoZSBvbmx5IHdheSB0byB0ZXN0IHN1cHBvcnQgZm9yIHRoZSBgd2hlZWxgIGV2ZW50IGluIElFOSsuXG4gICAgaXNTdXBwb3J0ZWQgPSBkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5oYXNGZWF0dXJlKCdFdmVudHMud2hlZWwnLCAnMy4wJyk7XG4gIH1cblxuICByZXR1cm4gaXNTdXBwb3J0ZWQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNFdmVudFN1cHBvcnRlZDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QvbGliL2lzRXZlbnRTdXBwb3J0ZWQuanNcbi8vIG1vZHVsZSBpZCA9IDQwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdERPTUZlYXR1cmVGbGFnc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0RE9NRmVhdHVyZUZsYWdzID0ge1xuICB1c2VDcmVhdGVFbGVtZW50OiBmYWxzZVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdERPTUZlYXR1cmVGbGFncztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QvbGliL1JlYWN0RE9NRmVhdHVyZUZsYWdzLmpzXG4vLyBtb2R1bGUgaWQgPSA0MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDE0LTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RFbGVtZW50XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RDdXJyZW50T3duZXIgPSByZXF1aXJlKCcuL1JlYWN0Q3VycmVudE93bmVyJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBjYW5EZWZpbmVQcm9wZXJ0eSA9IHJlcXVpcmUoJy4vY2FuRGVmaW5lUHJvcGVydHknKTtcblxuLy8gVGhlIFN5bWJvbCB1c2VkIHRvIHRhZyB0aGUgUmVhY3RFbGVtZW50IHR5cGUuIElmIHRoZXJlIGlzIG5vIG5hdGl2ZSBTeW1ib2xcbi8vIG5vciBwb2x5ZmlsbCwgdGhlbiBhIHBsYWluIG51bWJlciBpcyB1c2VkIGZvciBwZXJmb3JtYW5jZS5cbnZhciBSRUFDVF9FTEVNRU5UX1RZUEUgPSB0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIFN5bWJvbFsnZm9yJ10gJiYgU3ltYm9sWydmb3InXSgncmVhY3QuZWxlbWVudCcpIHx8IDB4ZWFjNztcblxudmFyIFJFU0VSVkVEX1BST1BTID0ge1xuICBrZXk6IHRydWUsXG4gIHJlZjogdHJ1ZSxcbiAgX19zZWxmOiB0cnVlLFxuICBfX3NvdXJjZTogdHJ1ZVxufTtcblxuLyoqXG4gKiBCYXNlIGNvbnN0cnVjdG9yIGZvciBhbGwgUmVhY3QgZWxlbWVudHMuIFRoaXMgaXMgb25seSB1c2VkIHRvIG1ha2UgdGhpc1xuICogd29yayB3aXRoIGEgZHluYW1pYyBpbnN0YW5jZW9mIGNoZWNrLiBOb3RoaW5nIHNob3VsZCBsaXZlIG9uIHRoaXMgcHJvdG90eXBlLlxuICpcbiAqIEBwYXJhbSB7Kn0gdHlwZVxuICogQHBhcmFtIHsqfSBrZXlcbiAqIEBwYXJhbSB7c3RyaW5nfG9iamVjdH0gcmVmXG4gKiBAcGFyYW0geyp9IHNlbGYgQSAqdGVtcG9yYXJ5KiBoZWxwZXIgdG8gZGV0ZWN0IHBsYWNlcyB3aGVyZSBgdGhpc2AgaXNcbiAqIGRpZmZlcmVudCBmcm9tIHRoZSBgb3duZXJgIHdoZW4gUmVhY3QuY3JlYXRlRWxlbWVudCBpcyBjYWxsZWQsIHNvIHRoYXQgd2VcbiAqIGNhbiB3YXJuLiBXZSB3YW50IHRvIGdldCByaWQgb2Ygb3duZXIgYW5kIHJlcGxhY2Ugc3RyaW5nIGByZWZgcyB3aXRoIGFycm93XG4gKiBmdW5jdGlvbnMsIGFuZCBhcyBsb25nIGFzIGB0aGlzYCBhbmQgb3duZXIgYXJlIHRoZSBzYW1lLCB0aGVyZSB3aWxsIGJlIG5vXG4gKiBjaGFuZ2UgaW4gYmVoYXZpb3IuXG4gKiBAcGFyYW0geyp9IHNvdXJjZSBBbiBhbm5vdGF0aW9uIG9iamVjdCAoYWRkZWQgYnkgYSB0cmFuc3BpbGVyIG9yIG90aGVyd2lzZSlcbiAqIGluZGljYXRpbmcgZmlsZW5hbWUsIGxpbmUgbnVtYmVyLCBhbmQvb3Igb3RoZXIgaW5mb3JtYXRpb24uXG4gKiBAcGFyYW0geyp9IG93bmVyXG4gKiBAcGFyYW0geyp9IHByb3BzXG4gKiBAaW50ZXJuYWxcbiAqL1xudmFyIFJlYWN0RWxlbWVudCA9IGZ1bmN0aW9uICh0eXBlLCBrZXksIHJlZiwgc2VsZiwgc291cmNlLCBvd25lciwgcHJvcHMpIHtcbiAgdmFyIGVsZW1lbnQgPSB7XG4gICAgLy8gVGhpcyB0YWcgYWxsb3cgdXMgdG8gdW5pcXVlbHkgaWRlbnRpZnkgdGhpcyBhcyBhIFJlYWN0IEVsZW1lbnRcbiAgICAkJHR5cGVvZjogUkVBQ1RfRUxFTUVOVF9UWVBFLFxuXG4gICAgLy8gQnVpbHQtaW4gcHJvcGVydGllcyB0aGF0IGJlbG9uZyBvbiB0aGUgZWxlbWVudFxuICAgIHR5cGU6IHR5cGUsXG4gICAga2V5OiBrZXksXG4gICAgcmVmOiByZWYsXG4gICAgcHJvcHM6IHByb3BzLFxuXG4gICAgLy8gUmVjb3JkIHRoZSBjb21wb25lbnQgcmVzcG9uc2libGUgZm9yIGNyZWF0aW5nIHRoaXMgZWxlbWVudC5cbiAgICBfb3duZXI6IG93bmVyXG4gIH07XG5cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAvLyBUaGUgdmFsaWRhdGlvbiBmbGFnIGlzIGN1cnJlbnRseSBtdXRhdGl2ZS4gV2UgcHV0IGl0IG9uXG4gICAgLy8gYW4gZXh0ZXJuYWwgYmFja2luZyBzdG9yZSBzbyB0aGF0IHdlIGNhbiBmcmVlemUgdGhlIHdob2xlIG9iamVjdC5cbiAgICAvLyBUaGlzIGNhbiBiZSByZXBsYWNlZCB3aXRoIGEgV2Vha01hcCBvbmNlIHRoZXkgYXJlIGltcGxlbWVudGVkIGluXG4gICAgLy8gY29tbW9ubHkgdXNlZCBkZXZlbG9wbWVudCBlbnZpcm9ubWVudHMuXG4gICAgZWxlbWVudC5fc3RvcmUgPSB7fTtcblxuICAgIC8vIFRvIG1ha2UgY29tcGFyaW5nIFJlYWN0RWxlbWVudHMgZWFzaWVyIGZvciB0ZXN0aW5nIHB1cnBvc2VzLCB3ZSBtYWtlXG4gICAgLy8gdGhlIHZhbGlkYXRpb24gZmxhZyBub24tZW51bWVyYWJsZSAod2hlcmUgcG9zc2libGUsIHdoaWNoIHNob3VsZFxuICAgIC8vIGluY2x1ZGUgZXZlcnkgZW52aXJvbm1lbnQgd2UgcnVuIHRlc3RzIGluKSwgc28gdGhlIHRlc3QgZnJhbWV3b3JrXG4gICAgLy8gaWdub3JlcyBpdC5cbiAgICBpZiAoY2FuRGVmaW5lUHJvcGVydHkpIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlbGVtZW50Ll9zdG9yZSwgJ3ZhbGlkYXRlZCcsIHtcbiAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgIH0pO1xuICAgICAgLy8gc2VsZiBhbmQgc291cmNlIGFyZSBERVYgb25seSBwcm9wZXJ0aWVzLlxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGVsZW1lbnQsICdfc2VsZicsIHtcbiAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIHdyaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgdmFsdWU6IHNlbGZcbiAgICAgIH0pO1xuICAgICAgLy8gVHdvIGVsZW1lbnRzIGNyZWF0ZWQgaW4gdHdvIGRpZmZlcmVudCBwbGFjZXMgc2hvdWxkIGJlIGNvbnNpZGVyZWRcbiAgICAgIC8vIGVxdWFsIGZvciB0ZXN0aW5nIHB1cnBvc2VzIGFuZCB0aGVyZWZvcmUgd2UgaGlkZSBpdCBmcm9tIGVudW1lcmF0aW9uLlxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGVsZW1lbnQsICdfc291cmNlJywge1xuICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgd3JpdGFibGU6IGZhbHNlLFxuICAgICAgICB2YWx1ZTogc291cmNlXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZWxlbWVudC5fc3RvcmUudmFsaWRhdGVkID0gZmFsc2U7XG4gICAgICBlbGVtZW50Ll9zZWxmID0gc2VsZjtcbiAgICAgIGVsZW1lbnQuX3NvdXJjZSA9IHNvdXJjZTtcbiAgICB9XG4gICAgT2JqZWN0LmZyZWV6ZShlbGVtZW50LnByb3BzKTtcbiAgICBPYmplY3QuZnJlZXplKGVsZW1lbnQpO1xuICB9XG5cbiAgcmV0dXJuIGVsZW1lbnQ7XG59O1xuXG5SZWFjdEVsZW1lbnQuY3JlYXRlRWxlbWVudCA9IGZ1bmN0aW9uICh0eXBlLCBjb25maWcsIGNoaWxkcmVuKSB7XG4gIHZhciBwcm9wTmFtZTtcblxuICAvLyBSZXNlcnZlZCBuYW1lcyBhcmUgZXh0cmFjdGVkXG4gIHZhciBwcm9wcyA9IHt9O1xuXG4gIHZhciBrZXkgPSBudWxsO1xuICB2YXIgcmVmID0gbnVsbDtcbiAgdmFyIHNlbGYgPSBudWxsO1xuICB2YXIgc291cmNlID0gbnVsbDtcblxuICBpZiAoY29uZmlnICE9IG51bGwpIHtcbiAgICByZWYgPSBjb25maWcucmVmID09PSB1bmRlZmluZWQgPyBudWxsIDogY29uZmlnLnJlZjtcbiAgICBrZXkgPSBjb25maWcua2V5ID09PSB1bmRlZmluZWQgPyBudWxsIDogJycgKyBjb25maWcua2V5O1xuICAgIHNlbGYgPSBjb25maWcuX19zZWxmID09PSB1bmRlZmluZWQgPyBudWxsIDogY29uZmlnLl9fc2VsZjtcbiAgICBzb3VyY2UgPSBjb25maWcuX19zb3VyY2UgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBjb25maWcuX19zb3VyY2U7XG4gICAgLy8gUmVtYWluaW5nIHByb3BlcnRpZXMgYXJlIGFkZGVkIHRvIGEgbmV3IHByb3BzIG9iamVjdFxuICAgIGZvciAocHJvcE5hbWUgaW4gY29uZmlnKSB7XG4gICAgICBpZiAoY29uZmlnLmhhc093blByb3BlcnR5KHByb3BOYW1lKSAmJiAhUkVTRVJWRURfUFJPUFMuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpKSB7XG4gICAgICAgIHByb3BzW3Byb3BOYW1lXSA9IGNvbmZpZ1twcm9wTmFtZV07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gQ2hpbGRyZW4gY2FuIGJlIG1vcmUgdGhhbiBvbmUgYXJndW1lbnQsIGFuZCB0aG9zZSBhcmUgdHJhbnNmZXJyZWQgb250b1xuICAvLyB0aGUgbmV3bHkgYWxsb2NhdGVkIHByb3BzIG9iamVjdC5cbiAgdmFyIGNoaWxkcmVuTGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aCAtIDI7XG4gIGlmIChjaGlsZHJlbkxlbmd0aCA9PT0gMSkge1xuICAgIHByb3BzLmNoaWxkcmVuID0gY2hpbGRyZW47XG4gIH0gZWxzZSBpZiAoY2hpbGRyZW5MZW5ndGggPiAxKSB7XG4gICAgdmFyIGNoaWxkQXJyYXkgPSBBcnJheShjaGlsZHJlbkxlbmd0aCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbkxlbmd0aDsgaSsrKSB7XG4gICAgICBjaGlsZEFycmF5W2ldID0gYXJndW1lbnRzW2kgKyAyXTtcbiAgICB9XG4gICAgcHJvcHMuY2hpbGRyZW4gPSBjaGlsZEFycmF5O1xuICB9XG5cbiAgLy8gUmVzb2x2ZSBkZWZhdWx0IHByb3BzXG4gIGlmICh0eXBlICYmIHR5cGUuZGVmYXVsdFByb3BzKSB7XG4gICAgdmFyIGRlZmF1bHRQcm9wcyA9IHR5cGUuZGVmYXVsdFByb3BzO1xuICAgIGZvciAocHJvcE5hbWUgaW4gZGVmYXVsdFByb3BzKSB7XG4gICAgICBpZiAodHlwZW9mIHByb3BzW3Byb3BOYW1lXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcHJvcHNbcHJvcE5hbWVdID0gZGVmYXVsdFByb3BzW3Byb3BOYW1lXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gUmVhY3RFbGVtZW50KHR5cGUsIGtleSwgcmVmLCBzZWxmLCBzb3VyY2UsIFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQsIHByb3BzKTtcbn07XG5cblJlYWN0RWxlbWVudC5jcmVhdGVGYWN0b3J5ID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgdmFyIGZhY3RvcnkgPSBSZWFjdEVsZW1lbnQuY3JlYXRlRWxlbWVudC5iaW5kKG51bGwsIHR5cGUpO1xuICAvLyBFeHBvc2UgdGhlIHR5cGUgb24gdGhlIGZhY3RvcnkgYW5kIHRoZSBwcm90b3R5cGUgc28gdGhhdCBpdCBjYW4gYmVcbiAgLy8gZWFzaWx5IGFjY2Vzc2VkIG9uIGVsZW1lbnRzLiBFLmcuIGA8Rm9vIC8+LnR5cGUgPT09IEZvb2AuXG4gIC8vIFRoaXMgc2hvdWxkIG5vdCBiZSBuYW1lZCBgY29uc3RydWN0b3JgIHNpbmNlIHRoaXMgbWF5IG5vdCBiZSB0aGUgZnVuY3Rpb25cbiAgLy8gdGhhdCBjcmVhdGVkIHRoZSBlbGVtZW50LCBhbmQgaXQgbWF5IG5vdCBldmVuIGJlIGEgY29uc3RydWN0b3IuXG4gIC8vIExlZ2FjeSBob29rIFRPRE86IFdhcm4gaWYgdGhpcyBpcyBhY2Nlc3NlZFxuICBmYWN0b3J5LnR5cGUgPSB0eXBlO1xuICByZXR1cm4gZmFjdG9yeTtcbn07XG5cblJlYWN0RWxlbWVudC5jbG9uZUFuZFJlcGxhY2VLZXkgPSBmdW5jdGlvbiAob2xkRWxlbWVudCwgbmV3S2V5KSB7XG4gIHZhciBuZXdFbGVtZW50ID0gUmVhY3RFbGVtZW50KG9sZEVsZW1lbnQudHlwZSwgbmV3S2V5LCBvbGRFbGVtZW50LnJlZiwgb2xkRWxlbWVudC5fc2VsZiwgb2xkRWxlbWVudC5fc291cmNlLCBvbGRFbGVtZW50Ll9vd25lciwgb2xkRWxlbWVudC5wcm9wcyk7XG5cbiAgcmV0dXJuIG5ld0VsZW1lbnQ7XG59O1xuXG5SZWFjdEVsZW1lbnQuY2xvbmVBbmRSZXBsYWNlUHJvcHMgPSBmdW5jdGlvbiAob2xkRWxlbWVudCwgbmV3UHJvcHMpIHtcbiAgdmFyIG5ld0VsZW1lbnQgPSBSZWFjdEVsZW1lbnQob2xkRWxlbWVudC50eXBlLCBvbGRFbGVtZW50LmtleSwgb2xkRWxlbWVudC5yZWYsIG9sZEVsZW1lbnQuX3NlbGYsIG9sZEVsZW1lbnQuX3NvdXJjZSwgb2xkRWxlbWVudC5fb3duZXIsIG5ld1Byb3BzKTtcblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIC8vIElmIHRoZSBrZXkgb24gdGhlIG9yaWdpbmFsIGlzIHZhbGlkLCB0aGVuIHRoZSBjbG9uZSBpcyB2YWxpZFxuICAgIG5ld0VsZW1lbnQuX3N0b3JlLnZhbGlkYXRlZCA9IG9sZEVsZW1lbnQuX3N0b3JlLnZhbGlkYXRlZDtcbiAgfVxuXG4gIHJldHVybiBuZXdFbGVtZW50O1xufTtcblxuUmVhY3RFbGVtZW50LmNsb25lRWxlbWVudCA9IGZ1bmN0aW9uIChlbGVtZW50LCBjb25maWcsIGNoaWxkcmVuKSB7XG4gIHZhciBwcm9wTmFtZTtcblxuICAvLyBPcmlnaW5hbCBwcm9wcyBhcmUgY29waWVkXG4gIHZhciBwcm9wcyA9IGFzc2lnbih7fSwgZWxlbWVudC5wcm9wcyk7XG5cbiAgLy8gUmVzZXJ2ZWQgbmFtZXMgYXJlIGV4dHJhY3RlZFxuICB2YXIga2V5ID0gZWxlbWVudC5rZXk7XG4gIHZhciByZWYgPSBlbGVtZW50LnJlZjtcbiAgLy8gU2VsZiBpcyBwcmVzZXJ2ZWQgc2luY2UgdGhlIG93bmVyIGlzIHByZXNlcnZlZC5cbiAgdmFyIHNlbGYgPSBlbGVtZW50Ll9zZWxmO1xuICAvLyBTb3VyY2UgaXMgcHJlc2VydmVkIHNpbmNlIGNsb25lRWxlbWVudCBpcyB1bmxpa2VseSB0byBiZSB0YXJnZXRlZCBieSBhXG4gIC8vIHRyYW5zcGlsZXIsIGFuZCB0aGUgb3JpZ2luYWwgc291cmNlIGlzIHByb2JhYmx5IGEgYmV0dGVyIGluZGljYXRvciBvZiB0aGVcbiAgLy8gdHJ1ZSBvd25lci5cbiAgdmFyIHNvdXJjZSA9IGVsZW1lbnQuX3NvdXJjZTtcblxuICAvLyBPd25lciB3aWxsIGJlIHByZXNlcnZlZCwgdW5sZXNzIHJlZiBpcyBvdmVycmlkZGVuXG4gIHZhciBvd25lciA9IGVsZW1lbnQuX293bmVyO1xuXG4gIGlmIChjb25maWcgIT0gbnVsbCkge1xuICAgIGlmIChjb25maWcucmVmICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIFNpbGVudGx5IHN0ZWFsIHRoZSByZWYgZnJvbSB0aGUgcGFyZW50LlxuICAgICAgcmVmID0gY29uZmlnLnJlZjtcbiAgICAgIG93bmVyID0gUmVhY3RDdXJyZW50T3duZXIuY3VycmVudDtcbiAgICB9XG4gICAgaWYgKGNvbmZpZy5rZXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAga2V5ID0gJycgKyBjb25maWcua2V5O1xuICAgIH1cbiAgICAvLyBSZW1haW5pbmcgcHJvcGVydGllcyBvdmVycmlkZSBleGlzdGluZyBwcm9wc1xuICAgIGZvciAocHJvcE5hbWUgaW4gY29uZmlnKSB7XG4gICAgICBpZiAoY29uZmlnLmhhc093blByb3BlcnR5KHByb3BOYW1lKSAmJiAhUkVTRVJWRURfUFJPUFMuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpKSB7XG4gICAgICAgIHByb3BzW3Byb3BOYW1lXSA9IGNvbmZpZ1twcm9wTmFtZV07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gQ2hpbGRyZW4gY2FuIGJlIG1vcmUgdGhhbiBvbmUgYXJndW1lbnQsIGFuZCB0aG9zZSBhcmUgdHJhbnNmZXJyZWQgb250b1xuICAvLyB0aGUgbmV3bHkgYWxsb2NhdGVkIHByb3BzIG9iamVjdC5cbiAgdmFyIGNoaWxkcmVuTGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aCAtIDI7XG4gIGlmIChjaGlsZHJlbkxlbmd0aCA9PT0gMSkge1xuICAgIHByb3BzLmNoaWxkcmVuID0gY2hpbGRyZW47XG4gIH0gZWxzZSBpZiAoY2hpbGRyZW5MZW5ndGggPiAxKSB7XG4gICAgdmFyIGNoaWxkQXJyYXkgPSBBcnJheShjaGlsZHJlbkxlbmd0aCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbkxlbmd0aDsgaSsrKSB7XG4gICAgICBjaGlsZEFycmF5W2ldID0gYXJndW1lbnRzW2kgKyAyXTtcbiAgICB9XG4gICAgcHJvcHMuY2hpbGRyZW4gPSBjaGlsZEFycmF5O1xuICB9XG5cbiAgcmV0dXJuIFJlYWN0RWxlbWVudChlbGVtZW50LnR5cGUsIGtleSwgcmVmLCBzZWxmLCBzb3VyY2UsIG93bmVyLCBwcm9wcyk7XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7P29iamVjdH0gb2JqZWN0XG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIGBvYmplY3RgIGlzIGEgdmFsaWQgY29tcG9uZW50LlxuICogQGZpbmFsXG4gKi9cblJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudCA9IGZ1bmN0aW9uIChvYmplY3QpIHtcbiAgcmV0dXJuIHR5cGVvZiBvYmplY3QgPT09ICdvYmplY3QnICYmIG9iamVjdCAhPT0gbnVsbCAmJiBvYmplY3QuJCR0eXBlb2YgPT09IFJFQUNUX0VMRU1FTlRfVFlQRTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RFbGVtZW50O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvUmVhY3RFbGVtZW50LmpzXG4vLyBtb2R1bGUgaWQgPSA0MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgY2FuRGVmaW5lUHJvcGVydHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBjYW5EZWZpbmVQcm9wZXJ0eSA9IGZhbHNlO1xuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgdHJ5IHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICd4JywgeyBnZXQ6IGZ1bmN0aW9uICgpIHt9IH0pO1xuICAgIGNhbkRlZmluZVByb3BlcnR5ID0gdHJ1ZTtcbiAgfSBjYXRjaCAoeCkge1xuICAgIC8vIElFIHdpbGwgZmFpbCBvbiBkZWZpbmVQcm9wZXJ0eVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY2FuRGVmaW5lUHJvcGVydHk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0L2xpYi9jYW5EZWZpbmVQcm9wZXJ0eS5qc1xuLy8gbW9kdWxlIGlkID0gNDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNC0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RW1wdHlDb21wb25lbnRSZWdpc3RyeVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuLy8gVGhpcyByZWdpc3RyeSBrZWVwcyB0cmFjayBvZiB0aGUgUmVhY3QgSURzIG9mIHRoZSBjb21wb25lbnRzIHRoYXQgcmVuZGVyZWQgdG9cbi8vIGBudWxsYCAoaW4gcmVhbGl0eSBhIHBsYWNlaG9sZGVyIHN1Y2ggYXMgYG5vc2NyaXB0YClcbnZhciBudWxsQ29tcG9uZW50SURzUmVnaXN0cnkgPSB7fTtcblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgQ29tcG9uZW50J3MgYF9yb290Tm9kZUlEYC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGNvbXBvbmVudCBpcyByZW5kZXJlZCB0byBudWxsLlxuICovXG5mdW5jdGlvbiBpc051bGxDb21wb25lbnRJRChpZCkge1xuICByZXR1cm4gISFudWxsQ29tcG9uZW50SURzUmVnaXN0cnlbaWRdO1xufVxuXG4vKipcbiAqIE1hcmsgdGhlIGNvbXBvbmVudCBhcyBoYXZpbmcgcmVuZGVyZWQgdG8gbnVsbC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBDb21wb25lbnQncyBgX3Jvb3ROb2RlSURgLlxuICovXG5mdW5jdGlvbiByZWdpc3Rlck51bGxDb21wb25lbnRJRChpZCkge1xuICBudWxsQ29tcG9uZW50SURzUmVnaXN0cnlbaWRdID0gdHJ1ZTtcbn1cblxuLyoqXG4gKiBVbm1hcmsgdGhlIGNvbXBvbmVudCBhcyBoYXZpbmcgcmVuZGVyZWQgdG8gbnVsbDogaXQgcmVuZGVycyB0byBzb21ldGhpbmcgbm93LlxuICogQHBhcmFtIHtzdHJpbmd9IGlkIENvbXBvbmVudCdzIGBfcm9vdE5vZGVJRGAuXG4gKi9cbmZ1bmN0aW9uIGRlcmVnaXN0ZXJOdWxsQ29tcG9uZW50SUQoaWQpIHtcbiAgZGVsZXRlIG51bGxDb21wb25lbnRJRHNSZWdpc3RyeVtpZF07XG59XG5cbnZhciBSZWFjdEVtcHR5Q29tcG9uZW50UmVnaXN0cnkgPSB7XG4gIGlzTnVsbENvbXBvbmVudElEOiBpc051bGxDb21wb25lbnRJRCxcbiAgcmVnaXN0ZXJOdWxsQ29tcG9uZW50SUQ6IHJlZ2lzdGVyTnVsbENvbXBvbmVudElELFxuICBkZXJlZ2lzdGVyTnVsbENvbXBvbmVudElEOiBkZXJlZ2lzdGVyTnVsbENvbXBvbmVudElEXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0RW1wdHlDb21wb25lbnRSZWdpc3RyeTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QvbGliL1JlYWN0RW1wdHlDb21wb25lbnRSZWdpc3RyeS5qc1xuLy8gbW9kdWxlIGlkID0gNDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0SW5zdGFuY2VIYW5kbGVzXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0Um9vdEluZGV4ID0gcmVxdWlyZSgnLi9SZWFjdFJvb3RJbmRleCcpO1xuXG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbnZhciBTRVBBUkFUT1IgPSAnLic7XG52YXIgU0VQQVJBVE9SX0xFTkdUSCA9IFNFUEFSQVRPUi5sZW5ndGg7XG5cbi8qKlxuICogTWF4aW11bSBkZXB0aCBvZiB0cmF2ZXJzYWxzIGJlZm9yZSB3ZSBjb25zaWRlciB0aGUgcG9zc2liaWxpdHkgb2YgYSBiYWQgSUQuXG4gKi9cbnZhciBNQVhfVFJFRV9ERVBUSCA9IDEwMDAwO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBET00gSUQgcHJlZml4IHRvIHVzZSB3aGVuIG1vdW50aW5nIFJlYWN0IGNvbXBvbmVudHMuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IEEgdW5pcXVlIGludGVnZXJcbiAqIEByZXR1cm4ge3N0cmluZ30gUmVhY3Qgcm9vdCBJRC5cbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBnZXRSZWFjdFJvb3RJRFN0cmluZyhpbmRleCkge1xuICByZXR1cm4gU0VQQVJBVE9SICsgaW5kZXgudG9TdHJpbmcoMzYpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBhIGNoYXJhY3RlciBpbiB0aGUgc3VwcGxpZWQgSUQgaXMgYSBzZXBhcmF0b3Igb3IgdGhlIGVuZC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgQSBSZWFjdCBET00gSUQuXG4gKiBAcGFyYW0ge251bWJlcn0gaW5kZXggSW5kZXggb2YgdGhlIGNoYXJhY3RlciB0byBjaGVjay5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGNoYXJhY3RlciBpcyBhIHNlcGFyYXRvciBvciBlbmQgb2YgdGhlIElELlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gaXNCb3VuZGFyeShpZCwgaW5kZXgpIHtcbiAgcmV0dXJuIGlkLmNoYXJBdChpbmRleCkgPT09IFNFUEFSQVRPUiB8fCBpbmRleCA9PT0gaWQubGVuZ3RoO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiB0aGUgc3VwcGxpZWQgc3RyaW5nIGlzIGEgdmFsaWQgUmVhY3QgRE9NIElELlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBBIFJlYWN0IERPTSBJRCwgbWF5YmUuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBzdHJpbmcgaXMgYSB2YWxpZCBSZWFjdCBET00gSUQuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBpc1ZhbGlkSUQoaWQpIHtcbiAgcmV0dXJuIGlkID09PSAnJyB8fCBpZC5jaGFyQXQoMCkgPT09IFNFUEFSQVRPUiAmJiBpZC5jaGFyQXQoaWQubGVuZ3RoIC0gMSkgIT09IFNFUEFSQVRPUjtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgdGhlIGZpcnN0IElEIGlzIGFuIGFuY2VzdG9yIG9mIG9yIGVxdWFsIHRvIHRoZSBzZWNvbmQgSUQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGFuY2VzdG9ySURcbiAqIEBwYXJhbSB7c3RyaW5nfSBkZXNjZW5kYW50SURcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgYGFuY2VzdG9ySURgIGlzIGFuIGFuY2VzdG9yIG9mIGBkZXNjZW5kYW50SURgLlxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIGlzQW5jZXN0b3JJRE9mKGFuY2VzdG9ySUQsIGRlc2NlbmRhbnRJRCkge1xuICByZXR1cm4gZGVzY2VuZGFudElELmluZGV4T2YoYW5jZXN0b3JJRCkgPT09IDAgJiYgaXNCb3VuZGFyeShkZXNjZW5kYW50SUQsIGFuY2VzdG9ySUQubGVuZ3RoKTtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBwYXJlbnQgSUQgb2YgdGhlIHN1cHBsaWVkIFJlYWN0IERPTSBJRCwgYGlkYC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgSUQgb2YgYSBjb21wb25lbnQuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IElEIG9mIHRoZSBwYXJlbnQsIG9yIGFuIGVtcHR5IHN0cmluZy5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGdldFBhcmVudElEKGlkKSB7XG4gIHJldHVybiBpZCA/IGlkLnN1YnN0cigwLCBpZC5sYXN0SW5kZXhPZihTRVBBUkFUT1IpKSA6ICcnO1xufVxuXG4vKipcbiAqIEdldHMgdGhlIG5leHQgRE9NIElEIG9uIHRoZSB0cmVlIHBhdGggZnJvbSB0aGUgc3VwcGxpZWQgYGFuY2VzdG9ySURgIHRvIHRoZVxuICogc3VwcGxpZWQgYGRlc3RpbmF0aW9uSURgLiBJZiB0aGV5IGFyZSBlcXVhbCwgdGhlIElEIGlzIHJldHVybmVkLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBhbmNlc3RvcklEIElEIG9mIGFuIGFuY2VzdG9yIG5vZGUgb2YgYGRlc3RpbmF0aW9uSURgLlxuICogQHBhcmFtIHtzdHJpbmd9IGRlc3RpbmF0aW9uSUQgSUQgb2YgdGhlIGRlc3RpbmF0aW9uIG5vZGUuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IE5leHQgSUQgb24gdGhlIHBhdGggZnJvbSBgYW5jZXN0b3JJRGAgdG8gYGRlc3RpbmF0aW9uSURgLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZ2V0TmV4dERlc2NlbmRhbnRJRChhbmNlc3RvcklELCBkZXN0aW5hdGlvbklEKSB7XG4gICEoaXNWYWxpZElEKGFuY2VzdG9ySUQpICYmIGlzVmFsaWRJRChkZXN0aW5hdGlvbklEKSkgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnZ2V0TmV4dERlc2NlbmRhbnRJRCglcywgJXMpOiBSZWNlaXZlZCBhbiBpbnZhbGlkIFJlYWN0IERPTSBJRC4nLCBhbmNlc3RvcklELCBkZXN0aW5hdGlvbklEKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICFpc0FuY2VzdG9ySURPZihhbmNlc3RvcklELCBkZXN0aW5hdGlvbklEKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdnZXROZXh0RGVzY2VuZGFudElEKC4uLik6IFJlYWN0IGhhcyBtYWRlIGFuIGludmFsaWQgYXNzdW1wdGlvbiBhYm91dCAnICsgJ3RoZSBET00gaGllcmFyY2h5LiBFeHBlY3RlZCBgJXNgIHRvIGJlIGFuIGFuY2VzdG9yIG9mIGAlc2AuJywgYW5jZXN0b3JJRCwgZGVzdGluYXRpb25JRCkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICBpZiAoYW5jZXN0b3JJRCA9PT0gZGVzdGluYXRpb25JRCkge1xuICAgIHJldHVybiBhbmNlc3RvcklEO1xuICB9XG4gIC8vIFNraXAgb3ZlciB0aGUgYW5jZXN0b3IgYW5kIHRoZSBpbW1lZGlhdGUgc2VwYXJhdG9yLiBUcmF2ZXJzZSB1bnRpbCB3ZSBoaXRcbiAgLy8gYW5vdGhlciBzZXBhcmF0b3Igb3Igd2UgcmVhY2ggdGhlIGVuZCBvZiBgZGVzdGluYXRpb25JRGAuXG4gIHZhciBzdGFydCA9IGFuY2VzdG9ySUQubGVuZ3RoICsgU0VQQVJBVE9SX0xFTkdUSDtcbiAgdmFyIGk7XG4gIGZvciAoaSA9IHN0YXJ0OyBpIDwgZGVzdGluYXRpb25JRC5sZW5ndGg7IGkrKykge1xuICAgIGlmIChpc0JvdW5kYXJ5KGRlc3RpbmF0aW9uSUQsIGkpKSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGRlc3RpbmF0aW9uSUQuc3Vic3RyKDAsIGkpO1xufVxuXG4vKipcbiAqIEdldHMgdGhlIG5lYXJlc3QgY29tbW9uIGFuY2VzdG9yIElEIG9mIHR3byBJRHMuXG4gKlxuICogVXNpbmcgdGhpcyBJRCBzY2hlbWUsIHRoZSBuZWFyZXN0IGNvbW1vbiBhbmNlc3RvciBJRCBpcyB0aGUgbG9uZ2VzdCBjb21tb25cbiAqIHByZWZpeCBvZiB0aGUgdHdvIElEcyB0aGF0IGltbWVkaWF0ZWx5IHByZWNlZGVkIGEgXCJtYXJrZXJcIiBpbiBib3RoIHN0cmluZ3MuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG9uZUlEXG4gKiBAcGFyYW0ge3N0cmluZ30gdHdvSURcbiAqIEByZXR1cm4ge3N0cmluZ30gTmVhcmVzdCBjb21tb24gYW5jZXN0b3IgSUQsIG9yIHRoZSBlbXB0eSBzdHJpbmcgaWYgbm9uZS5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGdldEZpcnN0Q29tbW9uQW5jZXN0b3JJRChvbmVJRCwgdHdvSUQpIHtcbiAgdmFyIG1pbkxlbmd0aCA9IE1hdGgubWluKG9uZUlELmxlbmd0aCwgdHdvSUQubGVuZ3RoKTtcbiAgaWYgKG1pbkxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiAnJztcbiAgfVxuICB2YXIgbGFzdENvbW1vbk1hcmtlckluZGV4ID0gMDtcbiAgLy8gVXNlIGA8PWAgdG8gdHJhdmVyc2UgdW50aWwgdGhlIFwiRU9MXCIgb2YgdGhlIHNob3J0ZXIgc3RyaW5nLlxuICBmb3IgKHZhciBpID0gMDsgaSA8PSBtaW5MZW5ndGg7IGkrKykge1xuICAgIGlmIChpc0JvdW5kYXJ5KG9uZUlELCBpKSAmJiBpc0JvdW5kYXJ5KHR3b0lELCBpKSkge1xuICAgICAgbGFzdENvbW1vbk1hcmtlckluZGV4ID0gaTtcbiAgICB9IGVsc2UgaWYgKG9uZUlELmNoYXJBdChpKSAhPT0gdHdvSUQuY2hhckF0KGkpKSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgdmFyIGxvbmdlc3RDb21tb25JRCA9IG9uZUlELnN1YnN0cigwLCBsYXN0Q29tbW9uTWFya2VySW5kZXgpO1xuICAhaXNWYWxpZElEKGxvbmdlc3RDb21tb25JRCkgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnZ2V0Rmlyc3RDb21tb25BbmNlc3RvcklEKCVzLCAlcyk6IEV4cGVjdGVkIGEgdmFsaWQgUmVhY3QgRE9NIElEOiAlcycsIG9uZUlELCB0d29JRCwgbG9uZ2VzdENvbW1vbklEKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIHJldHVybiBsb25nZXN0Q29tbW9uSUQ7XG59XG5cbi8qKlxuICogVHJhdmVyc2VzIHRoZSBwYXJlbnQgcGF0aCBiZXR3ZWVuIHR3byBJRHMgKGVpdGhlciB1cCBvciBkb3duKS4gVGhlIElEcyBtdXN0XG4gKiBub3QgYmUgdGhlIHNhbWUsIGFuZCB0aGVyZSBtdXN0IGV4aXN0IGEgcGFyZW50IHBhdGggYmV0d2VlbiB0aGVtLiBJZiB0aGVcbiAqIGNhbGxiYWNrIHJldHVybnMgYGZhbHNlYCwgdHJhdmVyc2FsIGlzIHN0b3BwZWQuXG4gKlxuICogQHBhcmFtIHs/c3RyaW5nfSBzdGFydCBJRCBhdCB3aGljaCB0byBzdGFydCB0cmF2ZXJzYWwuXG4gKiBAcGFyYW0gez9zdHJpbmd9IHN0b3AgSUQgYXQgd2hpY2ggdG8gZW5kIHRyYXZlcnNhbC5cbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGNiIENhbGxiYWNrIHRvIGludm9rZSBlYWNoIElEIHdpdGguXG4gKiBAcGFyYW0geyp9IGFyZyBBcmd1bWVudCB0byBpbnZva2UgdGhlIGNhbGxiYWNrIHdpdGguXG4gKiBAcGFyYW0gez9ib29sZWFufSBza2lwRmlyc3QgV2hldGhlciBvciBub3QgdG8gc2tpcCB0aGUgZmlyc3Qgbm9kZS5cbiAqIEBwYXJhbSB7P2Jvb2xlYW59IHNraXBMYXN0IFdoZXRoZXIgb3Igbm90IHRvIHNraXAgdGhlIGxhc3Qgbm9kZS5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHRyYXZlcnNlUGFyZW50UGF0aChzdGFydCwgc3RvcCwgY2IsIGFyZywgc2tpcEZpcnN0LCBza2lwTGFzdCkge1xuICBzdGFydCA9IHN0YXJ0IHx8ICcnO1xuICBzdG9wID0gc3RvcCB8fCAnJztcbiAgIShzdGFydCAhPT0gc3RvcCkgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAndHJhdmVyc2VQYXJlbnRQYXRoKC4uLik6IENhbm5vdCB0cmF2ZXJzZSBmcm9tIGFuZCB0byB0aGUgc2FtZSBJRCwgYCVzYC4nLCBzdGFydCkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICB2YXIgdHJhdmVyc2VVcCA9IGlzQW5jZXN0b3JJRE9mKHN0b3AsIHN0YXJ0KTtcbiAgISh0cmF2ZXJzZVVwIHx8IGlzQW5jZXN0b3JJRE9mKHN0YXJ0LCBzdG9wKSkgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAndHJhdmVyc2VQYXJlbnRQYXRoKCVzLCAlcywgLi4uKTogQ2Fubm90IHRyYXZlcnNlIGZyb20gdHdvIElEcyB0aGF0IGRvICcgKyAnbm90IGhhdmUgYSBwYXJlbnQgcGF0aC4nLCBzdGFydCwgc3RvcCkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAvLyBUcmF2ZXJzZSBmcm9tIGBzdGFydGAgdG8gYHN0b3BgIG9uZSBkZXB0aCBhdCBhIHRpbWUuXG4gIHZhciBkZXB0aCA9IDA7XG4gIHZhciB0cmF2ZXJzZSA9IHRyYXZlcnNlVXAgPyBnZXRQYXJlbnRJRCA6IGdldE5leHREZXNjZW5kYW50SUQ7XG4gIGZvciAodmFyIGlkID0gc3RhcnQ7OyAvKiB1bnRpbCBicmVhayAqL2lkID0gdHJhdmVyc2UoaWQsIHN0b3ApKSB7XG4gICAgdmFyIHJldDtcbiAgICBpZiAoKCFza2lwRmlyc3QgfHwgaWQgIT09IHN0YXJ0KSAmJiAoIXNraXBMYXN0IHx8IGlkICE9PSBzdG9wKSkge1xuICAgICAgcmV0ID0gY2IoaWQsIHRyYXZlcnNlVXAsIGFyZyk7XG4gICAgfVxuICAgIGlmIChyZXQgPT09IGZhbHNlIHx8IGlkID09PSBzdG9wKSB7XG4gICAgICAvLyBPbmx5IGJyZWFrIC8vYWZ0ZXIvLyB2aXNpdGluZyBgc3RvcGAuXG4gICAgICBicmVhaztcbiAgICB9XG4gICAgIShkZXB0aCsrIDwgTUFYX1RSRUVfREVQVEgpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ3RyYXZlcnNlUGFyZW50UGF0aCglcywgJXMsIC4uLik6IERldGVjdGVkIGFuIGluZmluaXRlIGxvb3Agd2hpbGUgJyArICd0cmF2ZXJzaW5nIHRoZSBSZWFjdCBET00gSUQgdHJlZS4gVGhpcyBtYXkgYmUgZHVlIHRvIG1hbGZvcm1lZCBJRHM6ICVzJywgc3RhcnQsIHN0b3AsIGlkKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIH1cbn1cblxuLyoqXG4gKiBNYW5hZ2VzIHRoZSBJRHMgYXNzaWduZWQgdG8gRE9NIHJlcHJlc2VudGF0aW9ucyBvZiBSZWFjdCBjb21wb25lbnRzLiBUaGlzXG4gKiB1c2VzIGEgc3BlY2lmaWMgc2NoZW1lIGluIG9yZGVyIHRvIHRyYXZlcnNlIHRoZSBET00gZWZmaWNpZW50bHkgKGUuZy4gaW5cbiAqIG9yZGVyIHRvIHNpbXVsYXRlIGV2ZW50cykuXG4gKlxuICogQGludGVybmFsXG4gKi9cbnZhciBSZWFjdEluc3RhbmNlSGFuZGxlcyA9IHtcblxuICAvKipcbiAgICogQ29uc3RydWN0cyBhIFJlYWN0IHJvb3QgSURcbiAgICogQHJldHVybiB7c3RyaW5nfSBBIFJlYWN0IHJvb3QgSUQuXG4gICAqL1xuICBjcmVhdGVSZWFjdFJvb3RJRDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBnZXRSZWFjdFJvb3RJRFN0cmluZyhSZWFjdFJvb3RJbmRleC5jcmVhdGVSZWFjdFJvb3RJbmRleCgpKTtcbiAgfSxcblxuICAvKipcbiAgICogQ29uc3RydWN0cyBhIFJlYWN0IElEIGJ5IGpvaW5pbmcgYSByb290IElEIHdpdGggYSBuYW1lLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcm9vdElEIFJvb3QgSUQgb2YgYSBwYXJlbnQgY29tcG9uZW50LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBBIGNvbXBvbmVudCdzIG5hbWUgKGFzIGZsYXR0ZW5lZCBjaGlsZHJlbikuXG4gICAqIEByZXR1cm4ge3N0cmluZ30gQSBSZWFjdCBJRC5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBjcmVhdGVSZWFjdElEOiBmdW5jdGlvbiAocm9vdElELCBuYW1lKSB7XG4gICAgcmV0dXJuIHJvb3RJRCArIG5hbWU7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIERPTSBJRCBvZiB0aGUgUmVhY3QgY29tcG9uZW50IHRoYXQgaXMgdGhlIHJvb3Qgb2YgdGhlIHRyZWUgdGhhdFxuICAgKiBjb250YWlucyB0aGUgUmVhY3QgY29tcG9uZW50IHdpdGggdGhlIHN1cHBsaWVkIERPTSBJRC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIERPTSBJRCBvZiBhIFJlYWN0IGNvbXBvbmVudC5cbiAgICogQHJldHVybiB7P3N0cmluZ30gRE9NIElEIG9mIHRoZSBSZWFjdCBjb21wb25lbnQgdGhhdCBpcyB0aGUgcm9vdC5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBnZXRSZWFjdFJvb3RJREZyb21Ob2RlSUQ6IGZ1bmN0aW9uIChpZCkge1xuICAgIGlmIChpZCAmJiBpZC5jaGFyQXQoMCkgPT09IFNFUEFSQVRPUiAmJiBpZC5sZW5ndGggPiAxKSB7XG4gICAgICB2YXIgaW5kZXggPSBpZC5pbmRleE9mKFNFUEFSQVRPUiwgMSk7XG4gICAgICByZXR1cm4gaW5kZXggPiAtMSA/IGlkLnN1YnN0cigwLCBpbmRleCkgOiBpZDtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFRyYXZlcnNlcyB0aGUgSUQgaGllcmFyY2h5IGFuZCBpbnZva2VzIHRoZSBzdXBwbGllZCBgY2JgIG9uIGFueSBJRHMgdGhhdFxuICAgKiBzaG91bGQgd291bGQgcmVjZWl2ZSBhIGBtb3VzZUVudGVyYCBvciBgbW91c2VMZWF2ZWAgZXZlbnQuXG4gICAqXG4gICAqIE5PVEU6IERvZXMgbm90IGludm9rZSB0aGUgY2FsbGJhY2sgb24gdGhlIG5lYXJlc3QgY29tbW9uIGFuY2VzdG9yIGJlY2F1c2VcbiAgICogbm90aGluZyBcImVudGVyZWRcIiBvciBcImxlZnRcIiB0aGF0IGVsZW1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBsZWF2ZUlEIElEIGJlaW5nIGxlZnQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBlbnRlcklEIElEIGJlaW5nIGVudGVyZWQuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNiIENhbGxiYWNrIHRvIGludm9rZSBvbiBlYWNoIGVudGVyZWQvbGVmdCBJRC5cbiAgICogQHBhcmFtIHsqfSB1cEFyZyBBcmd1bWVudCB0byBpbnZva2UgdGhlIGNhbGxiYWNrIHdpdGggb24gbGVmdCBJRHMuXG4gICAqIEBwYXJhbSB7Kn0gZG93bkFyZyBBcmd1bWVudCB0byBpbnZva2UgdGhlIGNhbGxiYWNrIHdpdGggb24gZW50ZXJlZCBJRHMuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgdHJhdmVyc2VFbnRlckxlYXZlOiBmdW5jdGlvbiAobGVhdmVJRCwgZW50ZXJJRCwgY2IsIHVwQXJnLCBkb3duQXJnKSB7XG4gICAgdmFyIGFuY2VzdG9ySUQgPSBnZXRGaXJzdENvbW1vbkFuY2VzdG9ySUQobGVhdmVJRCwgZW50ZXJJRCk7XG4gICAgaWYgKGFuY2VzdG9ySUQgIT09IGxlYXZlSUQpIHtcbiAgICAgIHRyYXZlcnNlUGFyZW50UGF0aChsZWF2ZUlELCBhbmNlc3RvcklELCBjYiwgdXBBcmcsIGZhbHNlLCB0cnVlKTtcbiAgICB9XG4gICAgaWYgKGFuY2VzdG9ySUQgIT09IGVudGVySUQpIHtcbiAgICAgIHRyYXZlcnNlUGFyZW50UGF0aChhbmNlc3RvcklELCBlbnRlcklELCBjYiwgZG93bkFyZywgdHJ1ZSwgZmFsc2UpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogU2ltdWxhdGVzIHRoZSB0cmF2ZXJzYWwgb2YgYSB0d28tcGhhc2UsIGNhcHR1cmUvYnViYmxlIGV2ZW50IGRpc3BhdGNoLlxuICAgKlxuICAgKiBOT1RFOiBUaGlzIHRyYXZlcnNhbCBoYXBwZW5zIG9uIElEcyB3aXRob3V0IHRvdWNoaW5nIHRoZSBET00uXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0YXJnZXRJRCBJRCBvZiB0aGUgdGFyZ2V0IG5vZGUuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNiIENhbGxiYWNrIHRvIGludm9rZS5cbiAgICogQHBhcmFtIHsqfSBhcmcgQXJndW1lbnQgdG8gaW52b2tlIHRoZSBjYWxsYmFjayB3aXRoLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHRyYXZlcnNlVHdvUGhhc2U6IGZ1bmN0aW9uICh0YXJnZXRJRCwgY2IsIGFyZykge1xuICAgIGlmICh0YXJnZXRJRCkge1xuICAgICAgdHJhdmVyc2VQYXJlbnRQYXRoKCcnLCB0YXJnZXRJRCwgY2IsIGFyZywgdHJ1ZSwgZmFsc2UpO1xuICAgICAgdHJhdmVyc2VQYXJlbnRQYXRoKHRhcmdldElELCAnJywgY2IsIGFyZywgZmFsc2UsIHRydWUpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogU2FtZSBhcyBgdHJhdmVyc2VUd29QaGFzZWAgYnV0IHNraXBzIHRoZSBgdGFyZ2V0SURgLlxuICAgKi9cbiAgdHJhdmVyc2VUd29QaGFzZVNraXBUYXJnZXQ6IGZ1bmN0aW9uICh0YXJnZXRJRCwgY2IsIGFyZykge1xuICAgIGlmICh0YXJnZXRJRCkge1xuICAgICAgdHJhdmVyc2VQYXJlbnRQYXRoKCcnLCB0YXJnZXRJRCwgY2IsIGFyZywgdHJ1ZSwgdHJ1ZSk7XG4gICAgICB0cmF2ZXJzZVBhcmVudFBhdGgodGFyZ2V0SUQsICcnLCBjYiwgYXJnLCB0cnVlLCB0cnVlKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFRyYXZlcnNlIGEgbm9kZSBJRCwgY2FsbGluZyB0aGUgc3VwcGxpZWQgYGNiYCBmb3IgZWFjaCBhbmNlc3RvciBJRC4gRm9yXG4gICAqIGV4YW1wbGUsIHBhc3NpbmcgYC4wLiRyb3ctMC4xYCB3b3VsZCByZXN1bHQgaW4gYGNiYCBnZXR0aW5nIGNhbGxlZFxuICAgKiB3aXRoIGAuMGAsIGAuMC4kcm93LTBgLCBhbmQgYC4wLiRyb3ctMC4xYC5cbiAgICpcbiAgICogTk9URTogVGhpcyB0cmF2ZXJzYWwgaGFwcGVucyBvbiBJRHMgd2l0aG91dCB0b3VjaGluZyB0aGUgRE9NLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGFyZ2V0SUQgSUQgb2YgdGhlIHRhcmdldCBub2RlLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYiBDYWxsYmFjayB0byBpbnZva2UuXG4gICAqIEBwYXJhbSB7Kn0gYXJnIEFyZ3VtZW50IHRvIGludm9rZSB0aGUgY2FsbGJhY2sgd2l0aC5cbiAgICogQGludGVybmFsXG4gICAqL1xuICB0cmF2ZXJzZUFuY2VzdG9yczogZnVuY3Rpb24gKHRhcmdldElELCBjYiwgYXJnKSB7XG4gICAgdHJhdmVyc2VQYXJlbnRQYXRoKCcnLCB0YXJnZXRJRCwgY2IsIGFyZywgdHJ1ZSwgZmFsc2UpO1xuICB9LFxuXG4gIGdldEZpcnN0Q29tbW9uQW5jZXN0b3JJRDogZ2V0Rmlyc3RDb21tb25BbmNlc3RvcklELFxuXG4gIC8qKlxuICAgKiBFeHBvc2VkIGZvciB1bml0IHRlc3RpbmcuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfZ2V0TmV4dERlc2NlbmRhbnRJRDogZ2V0TmV4dERlc2NlbmRhbnRJRCxcblxuICBpc0FuY2VzdG9ySURPZjogaXNBbmNlc3RvcklET2YsXG5cbiAgU0VQQVJBVE9SOiBTRVBBUkFUT1JcblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdEluc3RhbmNlSGFuZGxlcztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QvbGliL1JlYWN0SW5zdGFuY2VIYW5kbGVzLmpzXG4vLyBtb2R1bGUgaWQgPSA0NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RSb290SW5kZXhcbiAqIEB0eXBlY2hlY2tzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RSb290SW5kZXhJbmplY3Rpb24gPSB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBfY3JlYXRlUmVhY3RSb290SW5kZXhcbiAgICovXG4gIGluamVjdENyZWF0ZVJlYWN0Um9vdEluZGV4OiBmdW5jdGlvbiAoX2NyZWF0ZVJlYWN0Um9vdEluZGV4KSB7XG4gICAgUmVhY3RSb290SW5kZXguY3JlYXRlUmVhY3RSb290SW5kZXggPSBfY3JlYXRlUmVhY3RSb290SW5kZXg7XG4gIH1cbn07XG5cbnZhciBSZWFjdFJvb3RJbmRleCA9IHtcbiAgY3JlYXRlUmVhY3RSb290SW5kZXg6IG51bGwsXG4gIGluamVjdGlvbjogUmVhY3RSb290SW5kZXhJbmplY3Rpb25cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RSb290SW5kZXg7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0L2xpYi9SZWFjdFJvb3RJbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gNDZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0SW5zdGFuY2VNYXBcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogYFJlYWN0SW5zdGFuY2VNYXBgIG1haW50YWlucyBhIG1hcHBpbmcgZnJvbSBhIHB1YmxpYyBmYWNpbmcgc3RhdGVmdWxcbiAqIGluc3RhbmNlIChrZXkpIGFuZCB0aGUgaW50ZXJuYWwgcmVwcmVzZW50YXRpb24gKHZhbHVlKS4gVGhpcyBhbGxvd3MgcHVibGljXG4gKiBtZXRob2RzIHRvIGFjY2VwdCB0aGUgdXNlciBmYWNpbmcgaW5zdGFuY2UgYXMgYW4gYXJndW1lbnQgYW5kIG1hcCB0aGVtIGJhY2tcbiAqIHRvIGludGVybmFsIG1ldGhvZHMuXG4gKi9cblxuLy8gVE9ETzogUmVwbGFjZSB0aGlzIHdpdGggRVM2OiB2YXIgUmVhY3RJbnN0YW5jZU1hcCA9IG5ldyBNYXAoKTtcbnZhciBSZWFjdEluc3RhbmNlTWFwID0ge1xuXG4gIC8qKlxuICAgKiBUaGlzIEFQSSBzaG91bGQgYmUgY2FsbGVkIGBkZWxldGVgIGJ1dCB3ZSdkIGhhdmUgdG8gbWFrZSBzdXJlIHRvIGFsd2F5c1xuICAgKiB0cmFuc2Zvcm0gdGhlc2UgdG8gc3RyaW5ncyBmb3IgSUUgc3VwcG9ydC4gV2hlbiB0aGlzIHRyYW5zZm9ybSBpcyBmdWxseVxuICAgKiBzdXBwb3J0ZWQgd2UgY2FuIHJlbmFtZSBpdC5cbiAgICovXG4gIHJlbW92ZTogZnVuY3Rpb24gKGtleSkge1xuICAgIGtleS5fcmVhY3RJbnRlcm5hbEluc3RhbmNlID0gdW5kZWZpbmVkO1xuICB9LFxuXG4gIGdldDogZnVuY3Rpb24gKGtleSkge1xuICAgIHJldHVybiBrZXkuX3JlYWN0SW50ZXJuYWxJbnN0YW5jZTtcbiAgfSxcblxuICBoYXM6IGZ1bmN0aW9uIChrZXkpIHtcbiAgICByZXR1cm4ga2V5Ll9yZWFjdEludGVybmFsSW5zdGFuY2UgIT09IHVuZGVmaW5lZDtcbiAgfSxcblxuICBzZXQ6IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAga2V5Ll9yZWFjdEludGVybmFsSW5zdGFuY2UgPSB2YWx1ZTtcbiAgfVxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0SW5zdGFuY2VNYXA7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0L2xpYi9SZWFjdEluc3RhbmNlTWFwLmpzXG4vLyBtb2R1bGUgaWQgPSA0N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RNYXJrdXBDaGVja3N1bVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGFkbGVyMzIgPSByZXF1aXJlKCcuL2FkbGVyMzInKTtcblxudmFyIFRBR19FTkQgPSAvXFwvPz4vO1xuXG52YXIgUmVhY3RNYXJrdXBDaGVja3N1bSA9IHtcbiAgQ0hFQ0tTVU1fQVRUUl9OQU1FOiAnZGF0YS1yZWFjdC1jaGVja3N1bScsXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtYXJrdXAgTWFya3VwIHN0cmluZ1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9IE1hcmt1cCBzdHJpbmcgd2l0aCBjaGVja3N1bSBhdHRyaWJ1dGUgYXR0YWNoZWRcbiAgICovXG4gIGFkZENoZWNrc3VtVG9NYXJrdXA6IGZ1bmN0aW9uIChtYXJrdXApIHtcbiAgICB2YXIgY2hlY2tzdW0gPSBhZGxlcjMyKG1hcmt1cCk7XG5cbiAgICAvLyBBZGQgY2hlY2tzdW0gKGhhbmRsZSBib3RoIHBhcmVudCB0YWdzIGFuZCBzZWxmLWNsb3NpbmcgdGFncylcbiAgICByZXR1cm4gbWFya3VwLnJlcGxhY2UoVEFHX0VORCwgJyAnICsgUmVhY3RNYXJrdXBDaGVja3N1bS5DSEVDS1NVTV9BVFRSX05BTUUgKyAnPVwiJyArIGNoZWNrc3VtICsgJ1wiJCYnKTtcbiAgfSxcblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IG1hcmt1cCB0byB1c2VcbiAgICogQHBhcmFtIHtET01FbGVtZW50fSBlbGVtZW50IHJvb3QgUmVhY3QgZWxlbWVudFxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gd2hldGhlciBvciBub3QgdGhlIG1hcmt1cCBpcyB0aGUgc2FtZVxuICAgKi9cbiAgY2FuUmV1c2VNYXJrdXA6IGZ1bmN0aW9uIChtYXJrdXAsIGVsZW1lbnQpIHtcbiAgICB2YXIgZXhpc3RpbmdDaGVja3N1bSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFJlYWN0TWFya3VwQ2hlY2tzdW0uQ0hFQ0tTVU1fQVRUUl9OQU1FKTtcbiAgICBleGlzdGluZ0NoZWNrc3VtID0gZXhpc3RpbmdDaGVja3N1bSAmJiBwYXJzZUludChleGlzdGluZ0NoZWNrc3VtLCAxMCk7XG4gICAgdmFyIG1hcmt1cENoZWNrc3VtID0gYWRsZXIzMihtYXJrdXApO1xuICAgIHJldHVybiBtYXJrdXBDaGVja3N1bSA9PT0gZXhpc3RpbmdDaGVja3N1bTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdE1hcmt1cENoZWNrc3VtO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvUmVhY3RNYXJrdXBDaGVja3N1bS5qc1xuLy8gbW9kdWxlIGlkID0gNDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGFkbGVyMzJcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBNT0QgPSA2NTUyMTtcblxuLy8gYWRsZXIzMiBpcyBub3QgY3J5cHRvZ3JhcGhpY2FsbHkgc3Ryb25nLCBhbmQgaXMgb25seSB1c2VkIHRvIHNhbml0eSBjaGVjayB0aGF0XG4vLyBtYXJrdXAgZ2VuZXJhdGVkIG9uIHRoZSBzZXJ2ZXIgbWF0Y2hlcyB0aGUgbWFya3VwIGdlbmVyYXRlZCBvbiB0aGUgY2xpZW50LlxuLy8gVGhpcyBpbXBsZW1lbnRhdGlvbiAoYSBtb2RpZmllZCB2ZXJzaW9uIG9mIHRoZSBTaGVldEpTIHZlcnNpb24pIGhhcyBiZWVuIG9wdGltaXplZFxuLy8gZm9yIG91ciB1c2UgY2FzZSwgYXQgdGhlIGV4cGVuc2Ugb2YgY29uZm9ybWluZyB0byB0aGUgYWRsZXIzMiBzcGVjaWZpY2F0aW9uXG4vLyBmb3Igbm9uLWFzY2lpIGlucHV0cy5cbmZ1bmN0aW9uIGFkbGVyMzIoZGF0YSkge1xuICB2YXIgYSA9IDE7XG4gIHZhciBiID0gMDtcbiAgdmFyIGkgPSAwO1xuICB2YXIgbCA9IGRhdGEubGVuZ3RoO1xuICB2YXIgbSA9IGwgJiB+MHgzO1xuICB3aGlsZSAoaSA8IG0pIHtcbiAgICBmb3IgKDsgaSA8IE1hdGgubWluKGkgKyA0MDk2LCBtKTsgaSArPSA0KSB7XG4gICAgICBiICs9IChhICs9IGRhdGEuY2hhckNvZGVBdChpKSkgKyAoYSArPSBkYXRhLmNoYXJDb2RlQXQoaSArIDEpKSArIChhICs9IGRhdGEuY2hhckNvZGVBdChpICsgMikpICsgKGEgKz0gZGF0YS5jaGFyQ29kZUF0KGkgKyAzKSk7XG4gICAgfVxuICAgIGEgJT0gTU9EO1xuICAgIGIgJT0gTU9EO1xuICB9XG4gIGZvciAoOyBpIDwgbDsgaSsrKSB7XG4gICAgYiArPSBhICs9IGRhdGEuY2hhckNvZGVBdChpKTtcbiAgfVxuICBhICU9IE1PRDtcbiAgYiAlPSBNT0Q7XG4gIHJldHVybiBhIHwgYiA8PCAxNjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBhZGxlcjMyO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvYWRsZXIzMi5qc1xuLy8gbW9kdWxlIGlkID0gNDlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0UmVjb25jaWxlclxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0UmVmID0gcmVxdWlyZSgnLi9SZWFjdFJlZicpO1xuXG4vKipcbiAqIEhlbHBlciB0byBjYWxsIFJlYWN0UmVmLmF0dGFjaFJlZnMgd2l0aCB0aGlzIGNvbXBvc2l0ZSBjb21wb25lbnQsIHNwbGl0IG91dFxuICogdG8gYXZvaWQgYWxsb2NhdGlvbnMgaW4gdGhlIHRyYW5zYWN0aW9uIG1vdW50LXJlYWR5IHF1ZXVlLlxuICovXG5mdW5jdGlvbiBhdHRhY2hSZWZzKCkge1xuICBSZWFjdFJlZi5hdHRhY2hSZWZzKHRoaXMsIHRoaXMuX2N1cnJlbnRFbGVtZW50KTtcbn1cblxudmFyIFJlYWN0UmVjb25jaWxlciA9IHtcblxuICAvKipcbiAgICogSW5pdGlhbGl6ZXMgdGhlIGNvbXBvbmVudCwgcmVuZGVycyBtYXJrdXAsIGFuZCByZWdpc3RlcnMgZXZlbnQgbGlzdGVuZXJzLlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBpbnRlcm5hbEluc3RhbmNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByb290SUQgRE9NIElEIG9mIHRoZSByb290IG5vZGUuXG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbnxSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgKiBAcmV0dXJuIHs/c3RyaW5nfSBSZW5kZXJlZCBtYXJrdXAgdG8gYmUgaW5zZXJ0ZWQgaW50byB0aGUgRE9NLlxuICAgKiBAZmluYWxcbiAgICogQGludGVybmFsXG4gICAqL1xuICBtb3VudENvbXBvbmVudDogZnVuY3Rpb24gKGludGVybmFsSW5zdGFuY2UsIHJvb3RJRCwgdHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcbiAgICB2YXIgbWFya3VwID0gaW50ZXJuYWxJbnN0YW5jZS5tb3VudENvbXBvbmVudChyb290SUQsIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcbiAgICBpZiAoaW50ZXJuYWxJbnN0YW5jZS5fY3VycmVudEVsZW1lbnQgJiYgaW50ZXJuYWxJbnN0YW5jZS5fY3VycmVudEVsZW1lbnQucmVmICE9IG51bGwpIHtcbiAgICAgIHRyYW5zYWN0aW9uLmdldFJlYWN0TW91bnRSZWFkeSgpLmVucXVldWUoYXR0YWNoUmVmcywgaW50ZXJuYWxJbnN0YW5jZSk7XG4gICAgfVxuICAgIHJldHVybiBtYXJrdXA7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlbGVhc2VzIGFueSByZXNvdXJjZXMgYWxsb2NhdGVkIGJ5IGBtb3VudENvbXBvbmVudGAuXG4gICAqXG4gICAqIEBmaW5hbFxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHVubW91bnRDb21wb25lbnQ6IGZ1bmN0aW9uIChpbnRlcm5hbEluc3RhbmNlKSB7XG4gICAgUmVhY3RSZWYuZGV0YWNoUmVmcyhpbnRlcm5hbEluc3RhbmNlLCBpbnRlcm5hbEluc3RhbmNlLl9jdXJyZW50RWxlbWVudCk7XG4gICAgaW50ZXJuYWxJbnN0YW5jZS51bm1vdW50Q29tcG9uZW50KCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBhIGNvbXBvbmVudCB1c2luZyBhIG5ldyBlbGVtZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBpbnRlcm5hbEluc3RhbmNlXG4gICAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBuZXh0RWxlbWVudFxuICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjb250ZXh0XG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgcmVjZWl2ZUNvbXBvbmVudDogZnVuY3Rpb24gKGludGVybmFsSW5zdGFuY2UsIG5leHRFbGVtZW50LCB0cmFuc2FjdGlvbiwgY29udGV4dCkge1xuICAgIHZhciBwcmV2RWxlbWVudCA9IGludGVybmFsSW5zdGFuY2UuX2N1cnJlbnRFbGVtZW50O1xuXG4gICAgaWYgKG5leHRFbGVtZW50ID09PSBwcmV2RWxlbWVudCAmJiBjb250ZXh0ID09PSBpbnRlcm5hbEluc3RhbmNlLl9jb250ZXh0KSB7XG4gICAgICAvLyBTaW5jZSBlbGVtZW50cyBhcmUgaW1tdXRhYmxlIGFmdGVyIHRoZSBvd25lciBpcyByZW5kZXJlZCxcbiAgICAgIC8vIHdlIGNhbiBkbyBhIGNoZWFwIGlkZW50aXR5IGNvbXBhcmUgaGVyZSB0byBkZXRlcm1pbmUgaWYgdGhpcyBpcyBhXG4gICAgICAvLyBzdXBlcmZsdW91cyByZWNvbmNpbGUuIEl0J3MgcG9zc2libGUgZm9yIHN0YXRlIHRvIGJlIG11dGFibGUgYnV0IHN1Y2hcbiAgICAgIC8vIGNoYW5nZSBzaG91bGQgdHJpZ2dlciBhbiB1cGRhdGUgb2YgdGhlIG93bmVyIHdoaWNoIHdvdWxkIHJlY3JlYXRlXG4gICAgICAvLyB0aGUgZWxlbWVudC4gV2UgZXhwbGljaXRseSBjaGVjayBmb3IgdGhlIGV4aXN0ZW5jZSBvZiBhbiBvd25lciBzaW5jZVxuICAgICAgLy8gaXQncyBwb3NzaWJsZSBmb3IgYW4gZWxlbWVudCBjcmVhdGVkIG91dHNpZGUgYSBjb21wb3NpdGUgdG8gYmVcbiAgICAgIC8vIGRlZXBseSBtdXRhdGVkIGFuZCByZXVzZWQuXG5cbiAgICAgIC8vIFRPRE86IEJhaWxpbmcgb3V0IGVhcmx5IGlzIGp1c3QgYSBwZXJmIG9wdGltaXphdGlvbiByaWdodD9cbiAgICAgIC8vIFRPRE86IFJlbW92aW5nIHRoZSByZXR1cm4gc3RhdGVtZW50IHNob3VsZCBhZmZlY3QgY29ycmVjdG5lc3M/XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHJlZnNDaGFuZ2VkID0gUmVhY3RSZWYuc2hvdWxkVXBkYXRlUmVmcyhwcmV2RWxlbWVudCwgbmV4dEVsZW1lbnQpO1xuXG4gICAgaWYgKHJlZnNDaGFuZ2VkKSB7XG4gICAgICBSZWFjdFJlZi5kZXRhY2hSZWZzKGludGVybmFsSW5zdGFuY2UsIHByZXZFbGVtZW50KTtcbiAgICB9XG5cbiAgICBpbnRlcm5hbEluc3RhbmNlLnJlY2VpdmVDb21wb25lbnQobmV4dEVsZW1lbnQsIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcblxuICAgIGlmIChyZWZzQ2hhbmdlZCAmJiBpbnRlcm5hbEluc3RhbmNlLl9jdXJyZW50RWxlbWVudCAmJiBpbnRlcm5hbEluc3RhbmNlLl9jdXJyZW50RWxlbWVudC5yZWYgIT0gbnVsbCkge1xuICAgICAgdHJhbnNhY3Rpb24uZ2V0UmVhY3RNb3VudFJlYWR5KCkuZW5xdWV1ZShhdHRhY2hSZWZzLCBpbnRlcm5hbEluc3RhbmNlKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEZsdXNoIGFueSBkaXJ0eSBjaGFuZ2VzIGluIGEgY29tcG9uZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBpbnRlcm5hbEluc3RhbmNlXG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICogQGludGVybmFsXG4gICAqL1xuICBwZXJmb3JtVXBkYXRlSWZOZWNlc3Nhcnk6IGZ1bmN0aW9uIChpbnRlcm5hbEluc3RhbmNlLCB0cmFuc2FjdGlvbikge1xuICAgIGludGVybmFsSW5zdGFuY2UucGVyZm9ybVVwZGF0ZUlmTmVjZXNzYXJ5KHRyYW5zYWN0aW9uKTtcbiAgfVxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0UmVjb25jaWxlcjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QvbGliL1JlYWN0UmVjb25jaWxlci5qc1xuLy8gbW9kdWxlIGlkID0gNTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0UmVmXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RPd25lciA9IHJlcXVpcmUoJy4vUmVhY3RPd25lcicpO1xuXG52YXIgUmVhY3RSZWYgPSB7fTtcblxuZnVuY3Rpb24gYXR0YWNoUmVmKHJlZiwgY29tcG9uZW50LCBvd25lcikge1xuICBpZiAodHlwZW9mIHJlZiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJlZihjb21wb25lbnQuZ2V0UHVibGljSW5zdGFuY2UoKSk7XG4gIH0gZWxzZSB7XG4gICAgLy8gTGVnYWN5IHJlZlxuICAgIFJlYWN0T3duZXIuYWRkQ29tcG9uZW50QXNSZWZUbyhjb21wb25lbnQsIHJlZiwgb3duZXIpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGRldGFjaFJlZihyZWYsIGNvbXBvbmVudCwgb3duZXIpIHtcbiAgaWYgKHR5cGVvZiByZWYgPT09ICdmdW5jdGlvbicpIHtcbiAgICByZWYobnVsbCk7XG4gIH0gZWxzZSB7XG4gICAgLy8gTGVnYWN5IHJlZlxuICAgIFJlYWN0T3duZXIucmVtb3ZlQ29tcG9uZW50QXNSZWZGcm9tKGNvbXBvbmVudCwgcmVmLCBvd25lcik7XG4gIH1cbn1cblxuUmVhY3RSZWYuYXR0YWNoUmVmcyA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgZWxlbWVudCkge1xuICBpZiAoZWxlbWVudCA9PT0gbnVsbCB8fCBlbGVtZW50ID09PSBmYWxzZSkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgcmVmID0gZWxlbWVudC5yZWY7XG4gIGlmIChyZWYgIT0gbnVsbCkge1xuICAgIGF0dGFjaFJlZihyZWYsIGluc3RhbmNlLCBlbGVtZW50Ll9vd25lcik7XG4gIH1cbn07XG5cblJlYWN0UmVmLnNob3VsZFVwZGF0ZVJlZnMgPSBmdW5jdGlvbiAocHJldkVsZW1lbnQsIG5leHRFbGVtZW50KSB7XG4gIC8vIElmIGVpdGhlciB0aGUgb3duZXIgb3IgYSBgcmVmYCBoYXMgY2hhbmdlZCwgbWFrZSBzdXJlIHRoZSBuZXdlc3Qgb3duZXJcbiAgLy8gaGFzIHN0b3JlZCBhIHJlZmVyZW5jZSB0byBgdGhpc2AsIGFuZCB0aGUgcHJldmlvdXMgb3duZXIgKGlmIGRpZmZlcmVudClcbiAgLy8gaGFzIGZvcmdvdHRlbiB0aGUgcmVmZXJlbmNlIHRvIGB0aGlzYC4gV2UgdXNlIHRoZSBlbGVtZW50IGluc3RlYWRcbiAgLy8gb2YgdGhlIHB1YmxpYyB0aGlzLnByb3BzIGJlY2F1c2UgdGhlIHBvc3QgcHJvY2Vzc2luZyBjYW5ub3QgZGV0ZXJtaW5lXG4gIC8vIGEgcmVmLiBUaGUgcmVmIGNvbmNlcHR1YWxseSBsaXZlcyBvbiB0aGUgZWxlbWVudC5cblxuICAvLyBUT0RPOiBTaG91bGQgdGhpcyBldmVuIGJlIHBvc3NpYmxlPyBUaGUgb3duZXIgY2Fubm90IGNoYW5nZSBiZWNhdXNlXG4gIC8vIGl0J3MgZm9yYmlkZGVuIGJ5IHNob3VsZFVwZGF0ZVJlYWN0Q29tcG9uZW50LiBUaGUgcmVmIGNhbiBjaGFuZ2VcbiAgLy8gaWYgeW91IHN3YXAgdGhlIGtleXMgb2YgYnV0IG5vdCB0aGUgcmVmcy4gUmVjb25zaWRlciB3aGVyZSB0aGlzIGNoZWNrXG4gIC8vIGlzIG1hZGUuIEl0IHByb2JhYmx5IGJlbG9uZ3Mgd2hlcmUgdGhlIGtleSBjaGVja2luZyBhbmRcbiAgLy8gaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudCBpcyBkb25lLlxuXG4gIHZhciBwcmV2RW1wdHkgPSBwcmV2RWxlbWVudCA9PT0gbnVsbCB8fCBwcmV2RWxlbWVudCA9PT0gZmFsc2U7XG4gIHZhciBuZXh0RW1wdHkgPSBuZXh0RWxlbWVudCA9PT0gbnVsbCB8fCBuZXh0RWxlbWVudCA9PT0gZmFsc2U7XG5cbiAgcmV0dXJuKFxuICAgIC8vIFRoaXMgaGFzIGEgZmV3IGZhbHNlIHBvc2l0aXZlcyB3L3IvdCBlbXB0eSBjb21wb25lbnRzLlxuICAgIHByZXZFbXB0eSB8fCBuZXh0RW1wdHkgfHwgbmV4dEVsZW1lbnQuX293bmVyICE9PSBwcmV2RWxlbWVudC5fb3duZXIgfHwgbmV4dEVsZW1lbnQucmVmICE9PSBwcmV2RWxlbWVudC5yZWZcbiAgKTtcbn07XG5cblJlYWN0UmVmLmRldGFjaFJlZnMgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIGVsZW1lbnQpIHtcbiAgaWYgKGVsZW1lbnQgPT09IG51bGwgfHwgZWxlbWVudCA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIHJlZiA9IGVsZW1lbnQucmVmO1xuICBpZiAocmVmICE9IG51bGwpIHtcbiAgICBkZXRhY2hSZWYocmVmLCBpbnN0YW5jZSwgZWxlbWVudC5fb3duZXIpO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0UmVmO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvUmVhY3RSZWYuanNcbi8vIG1vZHVsZSBpZCA9IDUxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdE93bmVyXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbi8qKlxuICogUmVhY3RPd25lcnMgYXJlIGNhcGFibGUgb2Ygc3RvcmluZyByZWZlcmVuY2VzIHRvIG93bmVkIGNvbXBvbmVudHMuXG4gKlxuICogQWxsIGNvbXBvbmVudHMgYXJlIGNhcGFibGUgb2YgLy9iZWluZy8vIHJlZmVyZW5jZWQgYnkgb3duZXIgY29tcG9uZW50cywgYnV0XG4gKiBvbmx5IFJlYWN0T3duZXIgY29tcG9uZW50cyBhcmUgY2FwYWJsZSBvZiAvL3JlZmVyZW5jaW5nLy8gb3duZWQgY29tcG9uZW50cy5cbiAqIFRoZSBuYW1lZCByZWZlcmVuY2UgaXMga25vd24gYXMgYSBcInJlZlwiLlxuICpcbiAqIFJlZnMgYXJlIGF2YWlsYWJsZSB3aGVuIG1vdW50ZWQgYW5kIHVwZGF0ZWQgZHVyaW5nIHJlY29uY2lsaWF0aW9uLlxuICpcbiAqICAgdmFyIE15Q29tcG9uZW50ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICogICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gKiAgICAgICByZXR1cm4gKFxuICogICAgICAgICA8ZGl2IG9uQ2xpY2s9e3RoaXMuaGFuZGxlQ2xpY2t9PlxuICogICAgICAgICAgIDxDdXN0b21Db21wb25lbnQgcmVmPVwiY3VzdG9tXCIgLz5cbiAqICAgICAgICAgPC9kaXY+XG4gKiAgICAgICApO1xuICogICAgIH0sXG4gKiAgICAgaGFuZGxlQ2xpY2s6IGZ1bmN0aW9uKCkge1xuICogICAgICAgdGhpcy5yZWZzLmN1c3RvbS5oYW5kbGVDbGljaygpO1xuICogICAgIH0sXG4gKiAgICAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICogICAgICAgdGhpcy5yZWZzLmN1c3RvbS5pbml0aWFsaXplKCk7XG4gKiAgICAgfVxuICogICB9KTtcbiAqXG4gKiBSZWZzIHNob3VsZCByYXJlbHkgYmUgdXNlZC4gV2hlbiByZWZzIGFyZSB1c2VkLCB0aGV5IHNob3VsZCBvbmx5IGJlIGRvbmUgdG9cbiAqIGNvbnRyb2wgZGF0YSB0aGF0IGlzIG5vdCBoYW5kbGVkIGJ5IFJlYWN0J3MgZGF0YSBmbG93LlxuICpcbiAqIEBjbGFzcyBSZWFjdE93bmVyXG4gKi9cbnZhciBSZWFjdE93bmVyID0ge1xuXG4gIC8qKlxuICAgKiBAcGFyYW0gez9vYmplY3R9IG9iamVjdFxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIGBvYmplY3RgIGlzIGEgdmFsaWQgb3duZXIuXG4gICAqIEBmaW5hbFxuICAgKi9cbiAgaXNWYWxpZE93bmVyOiBmdW5jdGlvbiAob2JqZWN0KSB7XG4gICAgcmV0dXJuICEhKG9iamVjdCAmJiB0eXBlb2Ygb2JqZWN0LmF0dGFjaFJlZiA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2Ygb2JqZWN0LmRldGFjaFJlZiA9PT0gJ2Z1bmN0aW9uJyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEFkZHMgYSBjb21wb25lbnQgYnkgcmVmIHRvIGFuIG93bmVyIGNvbXBvbmVudC5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gY29tcG9uZW50IENvbXBvbmVudCB0byByZWZlcmVuY2UuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWYgTmFtZSBieSB3aGljaCB0byByZWZlciB0byB0aGUgY29tcG9uZW50LlxuICAgKiBAcGFyYW0ge1JlYWN0T3duZXJ9IG93bmVyIENvbXBvbmVudCBvbiB3aGljaCB0byByZWNvcmQgdGhlIHJlZi5cbiAgICogQGZpbmFsXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgYWRkQ29tcG9uZW50QXNSZWZUbzogZnVuY3Rpb24gKGNvbXBvbmVudCwgcmVmLCBvd25lcikge1xuICAgICFSZWFjdE93bmVyLmlzVmFsaWRPd25lcihvd25lcikgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnYWRkQ29tcG9uZW50QXNSZWZUbyguLi4pOiBPbmx5IGEgUmVhY3RPd25lciBjYW4gaGF2ZSByZWZzLiBZb3UgbWlnaHQgJyArICdiZSBhZGRpbmcgYSByZWYgdG8gYSBjb21wb25lbnQgdGhhdCB3YXMgbm90IGNyZWF0ZWQgaW5zaWRlIGEgY29tcG9uZW50XFwncyAnICsgJ2ByZW5kZXJgIG1ldGhvZCwgb3IgeW91IGhhdmUgbXVsdGlwbGUgY29waWVzIG9mIFJlYWN0IGxvYWRlZCAnICsgJyhkZXRhaWxzOiBodHRwczovL2ZiLm1lL3JlYWN0LXJlZnMtbXVzdC1oYXZlLW93bmVyKS4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgb3duZXIuYXR0YWNoUmVmKHJlZiwgY29tcG9uZW50KTtcbiAgfSxcblxuICAvKipcbiAgICogUmVtb3ZlcyBhIGNvbXBvbmVudCBieSByZWYgZnJvbSBhbiBvd25lciBjb21wb25lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RDb21wb25lbnR9IGNvbXBvbmVudCBDb21wb25lbnQgdG8gZGVyZWZlcmVuY2UuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWYgTmFtZSBvZiB0aGUgcmVmIHRvIHJlbW92ZS5cbiAgICogQHBhcmFtIHtSZWFjdE93bmVyfSBvd25lciBDb21wb25lbnQgb24gd2hpY2ggdGhlIHJlZiBpcyByZWNvcmRlZC5cbiAgICogQGZpbmFsXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgcmVtb3ZlQ29tcG9uZW50QXNSZWZGcm9tOiBmdW5jdGlvbiAoY29tcG9uZW50LCByZWYsIG93bmVyKSB7XG4gICAgIVJlYWN0T3duZXIuaXNWYWxpZE93bmVyKG93bmVyKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdyZW1vdmVDb21wb25lbnRBc1JlZkZyb20oLi4uKTogT25seSBhIFJlYWN0T3duZXIgY2FuIGhhdmUgcmVmcy4gWW91IG1pZ2h0ICcgKyAnYmUgcmVtb3ZpbmcgYSByZWYgdG8gYSBjb21wb25lbnQgdGhhdCB3YXMgbm90IGNyZWF0ZWQgaW5zaWRlIGEgY29tcG9uZW50XFwncyAnICsgJ2ByZW5kZXJgIG1ldGhvZCwgb3IgeW91IGhhdmUgbXVsdGlwbGUgY29waWVzIG9mIFJlYWN0IGxvYWRlZCAnICsgJyhkZXRhaWxzOiBodHRwczovL2ZiLm1lL3JlYWN0LXJlZnMtbXVzdC1oYXZlLW93bmVyKS4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgLy8gQ2hlY2sgdGhhdCBgY29tcG9uZW50YCBpcyBzdGlsbCB0aGUgY3VycmVudCByZWYgYmVjYXVzZSB3ZSBkbyBub3Qgd2FudCB0b1xuICAgIC8vIGRldGFjaCB0aGUgcmVmIGlmIGFub3RoZXIgY29tcG9uZW50IHN0b2xlIGl0LlxuICAgIGlmIChvd25lci5nZXRQdWJsaWNJbnN0YW5jZSgpLnJlZnNbcmVmXSA9PT0gY29tcG9uZW50LmdldFB1YmxpY0luc3RhbmNlKCkpIHtcbiAgICAgIG93bmVyLmRldGFjaFJlZihyZWYpO1xuICAgIH1cbiAgfVxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0T3duZXI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0L2xpYi9SZWFjdE93bmVyLmpzXG4vLyBtb2R1bGUgaWQgPSA1MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0VXBkYXRlUXVldWVcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdEN1cnJlbnRPd25lciA9IHJlcXVpcmUoJy4vUmVhY3RDdXJyZW50T3duZXInKTtcbnZhciBSZWFjdEVsZW1lbnQgPSByZXF1aXJlKCcuL1JlYWN0RWxlbWVudCcpO1xudmFyIFJlYWN0SW5zdGFuY2VNYXAgPSByZXF1aXJlKCcuL1JlYWN0SW5zdGFuY2VNYXAnKTtcbnZhciBSZWFjdFVwZGF0ZXMgPSByZXF1aXJlKCcuL1JlYWN0VXBkYXRlcycpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxuZnVuY3Rpb24gZW5xdWV1ZVVwZGF0ZShpbnRlcm5hbEluc3RhbmNlKSB7XG4gIFJlYWN0VXBkYXRlcy5lbnF1ZXVlVXBkYXRlKGludGVybmFsSW5zdGFuY2UpO1xufVxuXG5mdW5jdGlvbiBnZXRJbnRlcm5hbEluc3RhbmNlUmVhZHlGb3JVcGRhdGUocHVibGljSW5zdGFuY2UsIGNhbGxlck5hbWUpIHtcbiAgdmFyIGludGVybmFsSW5zdGFuY2UgPSBSZWFjdEluc3RhbmNlTWFwLmdldChwdWJsaWNJbnN0YW5jZSk7XG4gIGlmICghaW50ZXJuYWxJbnN0YW5jZSkge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAvLyBPbmx5IHdhcm4gd2hlbiB3ZSBoYXZlIGEgY2FsbGVyTmFtZS4gT3RoZXJ3aXNlIHdlIHNob3VsZCBiZSBzaWxlbnQuXG4gICAgICAvLyBXZSdyZSBwcm9iYWJseSBjYWxsaW5nIGZyb20gZW5xdWV1ZUNhbGxiYWNrLiBXZSBkb24ndCB3YW50IHRvIHdhcm5cbiAgICAgIC8vIHRoZXJlIGJlY2F1c2Ugd2UgYWxyZWFkeSB3YXJuZWQgZm9yIHRoZSBjb3JyZXNwb25kaW5nIGxpZmVjeWNsZSBtZXRob2QuXG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyghY2FsbGVyTmFtZSwgJyVzKC4uLik6IENhbiBvbmx5IHVwZGF0ZSBhIG1vdW50ZWQgb3IgbW91bnRpbmcgY29tcG9uZW50LiAnICsgJ1RoaXMgdXN1YWxseSBtZWFucyB5b3UgY2FsbGVkICVzKCkgb24gYW4gdW5tb3VudGVkIGNvbXBvbmVudC4gJyArICdUaGlzIGlzIGEgbm8tb3AuIFBsZWFzZSBjaGVjayB0aGUgY29kZSBmb3IgdGhlICVzIGNvbXBvbmVudC4nLCBjYWxsZXJOYW1lLCBjYWxsZXJOYW1lLCBwdWJsaWNJbnN0YW5jZS5jb25zdHJ1Y3Rvci5kaXNwbGF5TmFtZSkgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50ID09IG51bGwsICclcyguLi4pOiBDYW5ub3QgdXBkYXRlIGR1cmluZyBhbiBleGlzdGluZyBzdGF0ZSB0cmFuc2l0aW9uICcgKyAnKHN1Y2ggYXMgd2l0aGluIGByZW5kZXJgKS4gUmVuZGVyIG1ldGhvZHMgc2hvdWxkIGJlIGEgcHVyZSBmdW5jdGlvbiAnICsgJ29mIHByb3BzIGFuZCBzdGF0ZS4nLCBjYWxsZXJOYW1lKSA6IHVuZGVmaW5lZDtcbiAgfVxuXG4gIHJldHVybiBpbnRlcm5hbEluc3RhbmNlO1xufVxuXG4vKipcbiAqIFJlYWN0VXBkYXRlUXVldWUgYWxsb3dzIGZvciBzdGF0ZSB1cGRhdGVzIHRvIGJlIHNjaGVkdWxlZCBpbnRvIGEgbGF0ZXJcbiAqIHJlY29uY2lsaWF0aW9uIHN0ZXAuXG4gKi9cbnZhciBSZWFjdFVwZGF0ZVF1ZXVlID0ge1xuXG4gIC8qKlxuICAgKiBDaGVja3Mgd2hldGhlciBvciBub3QgdGhpcyBjb21wb3NpdGUgY29tcG9uZW50IGlzIG1vdW50ZWQuXG4gICAqIEBwYXJhbSB7UmVhY3RDbGFzc30gcHVibGljSW5zdGFuY2UgVGhlIGluc3RhbmNlIHdlIHdhbnQgdG8gdGVzdC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBtb3VudGVkLCBmYWxzZSBvdGhlcndpc2UuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICogQGZpbmFsXG4gICAqL1xuICBpc01vdW50ZWQ6IGZ1bmN0aW9uIChwdWJsaWNJbnN0YW5jZSkge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB2YXIgb3duZXIgPSBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50O1xuICAgICAgaWYgKG93bmVyICE9PSBudWxsKSB7XG4gICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKG93bmVyLl93YXJuZWRBYm91dFJlZnNJblJlbmRlciwgJyVzIGlzIGFjY2Vzc2luZyBpc01vdW50ZWQgaW5zaWRlIGl0cyByZW5kZXIoKSBmdW5jdGlvbi4gJyArICdyZW5kZXIoKSBzaG91bGQgYmUgYSBwdXJlIGZ1bmN0aW9uIG9mIHByb3BzIGFuZCBzdGF0ZS4gSXQgc2hvdWxkICcgKyAnbmV2ZXIgYWNjZXNzIHNvbWV0aGluZyB0aGF0IHJlcXVpcmVzIHN0YWxlIGRhdGEgZnJvbSB0aGUgcHJldmlvdXMgJyArICdyZW5kZXIsIHN1Y2ggYXMgcmVmcy4gTW92ZSB0aGlzIGxvZ2ljIHRvIGNvbXBvbmVudERpZE1vdW50IGFuZCAnICsgJ2NvbXBvbmVudERpZFVwZGF0ZSBpbnN0ZWFkLicsIG93bmVyLmdldE5hbWUoKSB8fCAnQSBjb21wb25lbnQnKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgb3duZXIuX3dhcm5lZEFib3V0UmVmc0luUmVuZGVyID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgdmFyIGludGVybmFsSW5zdGFuY2UgPSBSZWFjdEluc3RhbmNlTWFwLmdldChwdWJsaWNJbnN0YW5jZSk7XG4gICAgaWYgKGludGVybmFsSW5zdGFuY2UpIHtcbiAgICAgIC8vIER1cmluZyBjb21wb25lbnRXaWxsTW91bnQgYW5kIHJlbmRlciB0aGlzIHdpbGwgc3RpbGwgYmUgbnVsbCBidXQgYWZ0ZXJcbiAgICAgIC8vIHRoYXQgd2lsbCBhbHdheXMgcmVuZGVyIHRvIHNvbWV0aGluZy4gQXQgbGVhc3QgZm9yIG5vdy4gU28gd2UgY2FuIHVzZVxuICAgICAgLy8gdGhpcyBoYWNrLlxuICAgICAgcmV0dXJuICEhaW50ZXJuYWxJbnN0YW5jZS5fcmVuZGVyZWRDb21wb25lbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEVucXVldWUgYSBjYWxsYmFjayB0aGF0IHdpbGwgYmUgZXhlY3V0ZWQgYWZ0ZXIgYWxsIHRoZSBwZW5kaW5nIHVwZGF0ZXNcbiAgICogaGF2ZSBwcm9jZXNzZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RDbGFzc30gcHVibGljSW5zdGFuY2UgVGhlIGluc3RhbmNlIHRvIHVzZSBhcyBgdGhpc2AgY29udGV4dC5cbiAgICogQHBhcmFtIHs/ZnVuY3Rpb259IGNhbGxiYWNrIENhbGxlZCBhZnRlciBzdGF0ZSBpcyB1cGRhdGVkLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGVucXVldWVDYWxsYmFjazogZnVuY3Rpb24gKHB1YmxpY0luc3RhbmNlLCBjYWxsYmFjaykge1xuICAgICEodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdlbnF1ZXVlQ2FsbGJhY2soLi4uKTogWW91IGNhbGxlZCBgc2V0UHJvcHNgLCBgcmVwbGFjZVByb3BzYCwgJyArICdgc2V0U3RhdGVgLCBgcmVwbGFjZVN0YXRlYCwgb3IgYGZvcmNlVXBkYXRlYCB3aXRoIGEgY2FsbGJhY2sgdGhhdCAnICsgJ2lzblxcJ3QgY2FsbGFibGUuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIHZhciBpbnRlcm5hbEluc3RhbmNlID0gZ2V0SW50ZXJuYWxJbnN0YW5jZVJlYWR5Rm9yVXBkYXRlKHB1YmxpY0luc3RhbmNlKTtcblxuICAgIC8vIFByZXZpb3VzbHkgd2Ugd291bGQgdGhyb3cgYW4gZXJyb3IgaWYgd2UgZGlkbid0IGhhdmUgYW4gaW50ZXJuYWxcbiAgICAvLyBpbnN0YW5jZS4gU2luY2Ugd2Ugd2FudCB0byBtYWtlIGl0IGEgbm8tb3AgaW5zdGVhZCwgd2UgbWlycm9yIHRoZSBzYW1lXG4gICAgLy8gYmVoYXZpb3Igd2UgaGF2ZSBpbiBvdGhlciBlbnF1ZXVlKiBtZXRob2RzLlxuICAgIC8vIFdlIGFsc28gbmVlZCB0byBpZ25vcmUgY2FsbGJhY2tzIGluIGNvbXBvbmVudFdpbGxNb3VudC4gU2VlXG4gICAgLy8gZW5xdWV1ZVVwZGF0ZXMuXG4gICAgaWYgKCFpbnRlcm5hbEluc3RhbmNlKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoaW50ZXJuYWxJbnN0YW5jZS5fcGVuZGluZ0NhbGxiYWNrcykge1xuICAgICAgaW50ZXJuYWxJbnN0YW5jZS5fcGVuZGluZ0NhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaW50ZXJuYWxJbnN0YW5jZS5fcGVuZGluZ0NhbGxiYWNrcyA9IFtjYWxsYmFja107XG4gICAgfVxuICAgIC8vIFRPRE86IFRoZSBjYWxsYmFjayBoZXJlIGlzIGlnbm9yZWQgd2hlbiBzZXRTdGF0ZSBpcyBjYWxsZWQgZnJvbVxuICAgIC8vIGNvbXBvbmVudFdpbGxNb3VudC4gRWl0aGVyIGZpeCBpdCBvciBkaXNhbGxvdyBkb2luZyBzbyBjb21wbGV0ZWx5IGluXG4gICAgLy8gZmF2b3Igb2YgZ2V0SW5pdGlhbFN0YXRlLiBBbHRlcm5hdGl2ZWx5LCB3ZSBjYW4gZGlzYWxsb3dcbiAgICAvLyBjb21wb25lbnRXaWxsTW91bnQgZHVyaW5nIHNlcnZlci1zaWRlIHJlbmRlcmluZy5cbiAgICBlbnF1ZXVlVXBkYXRlKGludGVybmFsSW5zdGFuY2UpO1xuICB9LFxuXG4gIGVucXVldWVDYWxsYmFja0ludGVybmFsOiBmdW5jdGlvbiAoaW50ZXJuYWxJbnN0YW5jZSwgY2FsbGJhY2spIHtcbiAgICAhKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnZW5xdWV1ZUNhbGxiYWNrKC4uLik6IFlvdSBjYWxsZWQgYHNldFByb3BzYCwgYHJlcGxhY2VQcm9wc2AsICcgKyAnYHNldFN0YXRlYCwgYHJlcGxhY2VTdGF0ZWAsIG9yIGBmb3JjZVVwZGF0ZWAgd2l0aCBhIGNhbGxiYWNrIHRoYXQgJyArICdpc25cXCd0IGNhbGxhYmxlLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICBpZiAoaW50ZXJuYWxJbnN0YW5jZS5fcGVuZGluZ0NhbGxiYWNrcykge1xuICAgICAgaW50ZXJuYWxJbnN0YW5jZS5fcGVuZGluZ0NhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaW50ZXJuYWxJbnN0YW5jZS5fcGVuZGluZ0NhbGxiYWNrcyA9IFtjYWxsYmFja107XG4gICAgfVxuICAgIGVucXVldWVVcGRhdGUoaW50ZXJuYWxJbnN0YW5jZSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEZvcmNlcyBhbiB1cGRhdGUuIFRoaXMgc2hvdWxkIG9ubHkgYmUgaW52b2tlZCB3aGVuIGl0IGlzIGtub3duIHdpdGhcbiAgICogY2VydGFpbnR5IHRoYXQgd2UgYXJlICoqbm90KiogaW4gYSBET00gdHJhbnNhY3Rpb24uXG4gICAqXG4gICAqIFlvdSBtYXkgd2FudCB0byBjYWxsIHRoaXMgd2hlbiB5b3Uga25vdyB0aGF0IHNvbWUgZGVlcGVyIGFzcGVjdCBvZiB0aGVcbiAgICogY29tcG9uZW50J3Mgc3RhdGUgaGFzIGNoYW5nZWQgYnV0IGBzZXRTdGF0ZWAgd2FzIG5vdCBjYWxsZWQuXG4gICAqXG4gICAqIFRoaXMgd2lsbCBub3QgaW52b2tlIGBzaG91bGRDb21wb25lbnRVcGRhdGVgLCBidXQgaXQgd2lsbCBpbnZva2VcbiAgICogYGNvbXBvbmVudFdpbGxVcGRhdGVgIGFuZCBgY29tcG9uZW50RGlkVXBkYXRlYC5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdENsYXNzfSBwdWJsaWNJbnN0YW5jZSBUaGUgaW5zdGFuY2UgdGhhdCBzaG91bGQgcmVyZW5kZXIuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZW5xdWV1ZUZvcmNlVXBkYXRlOiBmdW5jdGlvbiAocHVibGljSW5zdGFuY2UpIHtcbiAgICB2YXIgaW50ZXJuYWxJbnN0YW5jZSA9IGdldEludGVybmFsSW5zdGFuY2VSZWFkeUZvclVwZGF0ZShwdWJsaWNJbnN0YW5jZSwgJ2ZvcmNlVXBkYXRlJyk7XG5cbiAgICBpZiAoIWludGVybmFsSW5zdGFuY2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpbnRlcm5hbEluc3RhbmNlLl9wZW5kaW5nRm9yY2VVcGRhdGUgPSB0cnVlO1xuXG4gICAgZW5xdWV1ZVVwZGF0ZShpbnRlcm5hbEluc3RhbmNlKTtcbiAgfSxcblxuICAvKipcbiAgICogUmVwbGFjZXMgYWxsIG9mIHRoZSBzdGF0ZS4gQWx3YXlzIHVzZSB0aGlzIG9yIGBzZXRTdGF0ZWAgdG8gbXV0YXRlIHN0YXRlLlxuICAgKiBZb3Ugc2hvdWxkIHRyZWF0IGB0aGlzLnN0YXRlYCBhcyBpbW11dGFibGUuXG4gICAqXG4gICAqIFRoZXJlIGlzIG5vIGd1YXJhbnRlZSB0aGF0IGB0aGlzLnN0YXRlYCB3aWxsIGJlIGltbWVkaWF0ZWx5IHVwZGF0ZWQsIHNvXG4gICAqIGFjY2Vzc2luZyBgdGhpcy5zdGF0ZWAgYWZ0ZXIgY2FsbGluZyB0aGlzIG1ldGhvZCBtYXkgcmV0dXJuIHRoZSBvbGQgdmFsdWUuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RDbGFzc30gcHVibGljSW5zdGFuY2UgVGhlIGluc3RhbmNlIHRoYXQgc2hvdWxkIHJlcmVuZGVyLlxuICAgKiBAcGFyYW0ge29iamVjdH0gY29tcGxldGVTdGF0ZSBOZXh0IHN0YXRlLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGVucXVldWVSZXBsYWNlU3RhdGU6IGZ1bmN0aW9uIChwdWJsaWNJbnN0YW5jZSwgY29tcGxldGVTdGF0ZSkge1xuICAgIHZhciBpbnRlcm5hbEluc3RhbmNlID0gZ2V0SW50ZXJuYWxJbnN0YW5jZVJlYWR5Rm9yVXBkYXRlKHB1YmxpY0luc3RhbmNlLCAncmVwbGFjZVN0YXRlJyk7XG5cbiAgICBpZiAoIWludGVybmFsSW5zdGFuY2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpbnRlcm5hbEluc3RhbmNlLl9wZW5kaW5nU3RhdGVRdWV1ZSA9IFtjb21wbGV0ZVN0YXRlXTtcbiAgICBpbnRlcm5hbEluc3RhbmNlLl9wZW5kaW5nUmVwbGFjZVN0YXRlID0gdHJ1ZTtcblxuICAgIGVucXVldWVVcGRhdGUoaW50ZXJuYWxJbnN0YW5jZSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFNldHMgYSBzdWJzZXQgb2YgdGhlIHN0YXRlLiBUaGlzIG9ubHkgZXhpc3RzIGJlY2F1c2UgX3BlbmRpbmdTdGF0ZSBpc1xuICAgKiBpbnRlcm5hbC4gVGhpcyBwcm92aWRlcyBhIG1lcmdpbmcgc3RyYXRlZ3kgdGhhdCBpcyBub3QgYXZhaWxhYmxlIHRvIGRlZXBcbiAgICogcHJvcGVydGllcyB3aGljaCBpcyBjb25mdXNpbmcuIFRPRE86IEV4cG9zZSBwZW5kaW5nU3RhdGUgb3IgZG9uJ3QgdXNlIGl0XG4gICAqIGR1cmluZyB0aGUgbWVyZ2UuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RDbGFzc30gcHVibGljSW5zdGFuY2UgVGhlIGluc3RhbmNlIHRoYXQgc2hvdWxkIHJlcmVuZGVyLlxuICAgKiBAcGFyYW0ge29iamVjdH0gcGFydGlhbFN0YXRlIE5leHQgcGFydGlhbCBzdGF0ZSB0byBiZSBtZXJnZWQgd2l0aCBzdGF0ZS5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBlbnF1ZXVlU2V0U3RhdGU6IGZ1bmN0aW9uIChwdWJsaWNJbnN0YW5jZSwgcGFydGlhbFN0YXRlKSB7XG4gICAgdmFyIGludGVybmFsSW5zdGFuY2UgPSBnZXRJbnRlcm5hbEluc3RhbmNlUmVhZHlGb3JVcGRhdGUocHVibGljSW5zdGFuY2UsICdzZXRTdGF0ZScpO1xuXG4gICAgaWYgKCFpbnRlcm5hbEluc3RhbmNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHF1ZXVlID0gaW50ZXJuYWxJbnN0YW5jZS5fcGVuZGluZ1N0YXRlUXVldWUgfHwgKGludGVybmFsSW5zdGFuY2UuX3BlbmRpbmdTdGF0ZVF1ZXVlID0gW10pO1xuICAgIHF1ZXVlLnB1c2gocGFydGlhbFN0YXRlKTtcblxuICAgIGVucXVldWVVcGRhdGUoaW50ZXJuYWxJbnN0YW5jZSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFNldHMgYSBzdWJzZXQgb2YgdGhlIHByb3BzLlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0Q2xhc3N9IHB1YmxpY0luc3RhbmNlIFRoZSBpbnN0YW5jZSB0aGF0IHNob3VsZCByZXJlbmRlci5cbiAgICogQHBhcmFtIHtvYmplY3R9IHBhcnRpYWxQcm9wcyBTdWJzZXQgb2YgdGhlIG5leHQgcHJvcHMuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZW5xdWV1ZVNldFByb3BzOiBmdW5jdGlvbiAocHVibGljSW5zdGFuY2UsIHBhcnRpYWxQcm9wcykge1xuICAgIHZhciBpbnRlcm5hbEluc3RhbmNlID0gZ2V0SW50ZXJuYWxJbnN0YW5jZVJlYWR5Rm9yVXBkYXRlKHB1YmxpY0luc3RhbmNlLCAnc2V0UHJvcHMnKTtcbiAgICBpZiAoIWludGVybmFsSW5zdGFuY2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgUmVhY3RVcGRhdGVRdWV1ZS5lbnF1ZXVlU2V0UHJvcHNJbnRlcm5hbChpbnRlcm5hbEluc3RhbmNlLCBwYXJ0aWFsUHJvcHMpO1xuICB9LFxuXG4gIGVucXVldWVTZXRQcm9wc0ludGVybmFsOiBmdW5jdGlvbiAoaW50ZXJuYWxJbnN0YW5jZSwgcGFydGlhbFByb3BzKSB7XG4gICAgdmFyIHRvcExldmVsV3JhcHBlciA9IGludGVybmFsSW5zdGFuY2UuX3RvcExldmVsV3JhcHBlcjtcbiAgICAhdG9wTGV2ZWxXcmFwcGVyID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ3NldFByb3BzKC4uLik6IFlvdSBjYWxsZWQgYHNldFByb3BzYCBvbiBhICcgKyAnY29tcG9uZW50IHdpdGggYSBwYXJlbnQuIFRoaXMgaXMgYW4gYW50aS1wYXR0ZXJuIHNpbmNlIHByb3BzIHdpbGwgJyArICdnZXQgcmVhY3RpdmVseSB1cGRhdGVkIHdoZW4gcmVuZGVyZWQuIEluc3RlYWQsIGNoYW5nZSB0aGUgb3duZXJcXCdzICcgKyAnYHJlbmRlcmAgbWV0aG9kIHRvIHBhc3MgdGhlIGNvcnJlY3QgdmFsdWUgYXMgcHJvcHMgdG8gdGhlIGNvbXBvbmVudCAnICsgJ3doZXJlIGl0IGlzIGNyZWF0ZWQuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgLy8gTWVyZ2Ugd2l0aCB0aGUgcGVuZGluZyBlbGVtZW50IGlmIGl0IGV4aXN0cywgb3RoZXJ3aXNlIHdpdGggZXhpc3RpbmdcbiAgICAvLyBlbGVtZW50IHByb3BzLlxuICAgIHZhciB3cmFwRWxlbWVudCA9IHRvcExldmVsV3JhcHBlci5fcGVuZGluZ0VsZW1lbnQgfHwgdG9wTGV2ZWxXcmFwcGVyLl9jdXJyZW50RWxlbWVudDtcbiAgICB2YXIgZWxlbWVudCA9IHdyYXBFbGVtZW50LnByb3BzO1xuICAgIHZhciBwcm9wcyA9IGFzc2lnbih7fSwgZWxlbWVudC5wcm9wcywgcGFydGlhbFByb3BzKTtcbiAgICB0b3BMZXZlbFdyYXBwZXIuX3BlbmRpbmdFbGVtZW50ID0gUmVhY3RFbGVtZW50LmNsb25lQW5kUmVwbGFjZVByb3BzKHdyYXBFbGVtZW50LCBSZWFjdEVsZW1lbnQuY2xvbmVBbmRSZXBsYWNlUHJvcHMoZWxlbWVudCwgcHJvcHMpKTtcblxuICAgIGVucXVldWVVcGRhdGUodG9wTGV2ZWxXcmFwcGVyKTtcbiAgfSxcblxuICAvKipcbiAgICogUmVwbGFjZXMgYWxsIG9mIHRoZSBwcm9wcy5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdENsYXNzfSBwdWJsaWNJbnN0YW5jZSBUaGUgaW5zdGFuY2UgdGhhdCBzaG91bGQgcmVyZW5kZXIuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBwcm9wcyBOZXcgcHJvcHMuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZW5xdWV1ZVJlcGxhY2VQcm9wczogZnVuY3Rpb24gKHB1YmxpY0luc3RhbmNlLCBwcm9wcykge1xuICAgIHZhciBpbnRlcm5hbEluc3RhbmNlID0gZ2V0SW50ZXJuYWxJbnN0YW5jZVJlYWR5Rm9yVXBkYXRlKHB1YmxpY0luc3RhbmNlLCAncmVwbGFjZVByb3BzJyk7XG4gICAgaWYgKCFpbnRlcm5hbEluc3RhbmNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFJlYWN0VXBkYXRlUXVldWUuZW5xdWV1ZVJlcGxhY2VQcm9wc0ludGVybmFsKGludGVybmFsSW5zdGFuY2UsIHByb3BzKTtcbiAgfSxcblxuICBlbnF1ZXVlUmVwbGFjZVByb3BzSW50ZXJuYWw6IGZ1bmN0aW9uIChpbnRlcm5hbEluc3RhbmNlLCBwcm9wcykge1xuICAgIHZhciB0b3BMZXZlbFdyYXBwZXIgPSBpbnRlcm5hbEluc3RhbmNlLl90b3BMZXZlbFdyYXBwZXI7XG4gICAgIXRvcExldmVsV3JhcHBlciA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdyZXBsYWNlUHJvcHMoLi4uKTogWW91IGNhbGxlZCBgcmVwbGFjZVByb3BzYCBvbiBhICcgKyAnY29tcG9uZW50IHdpdGggYSBwYXJlbnQuIFRoaXMgaXMgYW4gYW50aS1wYXR0ZXJuIHNpbmNlIHByb3BzIHdpbGwgJyArICdnZXQgcmVhY3RpdmVseSB1cGRhdGVkIHdoZW4gcmVuZGVyZWQuIEluc3RlYWQsIGNoYW5nZSB0aGUgb3duZXJcXCdzICcgKyAnYHJlbmRlcmAgbWV0aG9kIHRvIHBhc3MgdGhlIGNvcnJlY3QgdmFsdWUgYXMgcHJvcHMgdG8gdGhlIGNvbXBvbmVudCAnICsgJ3doZXJlIGl0IGlzIGNyZWF0ZWQuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgLy8gTWVyZ2Ugd2l0aCB0aGUgcGVuZGluZyBlbGVtZW50IGlmIGl0IGV4aXN0cywgb3RoZXJ3aXNlIHdpdGggZXhpc3RpbmdcbiAgICAvLyBlbGVtZW50IHByb3BzLlxuICAgIHZhciB3cmFwRWxlbWVudCA9IHRvcExldmVsV3JhcHBlci5fcGVuZGluZ0VsZW1lbnQgfHwgdG9wTGV2ZWxXcmFwcGVyLl9jdXJyZW50RWxlbWVudDtcbiAgICB2YXIgZWxlbWVudCA9IHdyYXBFbGVtZW50LnByb3BzO1xuICAgIHRvcExldmVsV3JhcHBlci5fcGVuZGluZ0VsZW1lbnQgPSBSZWFjdEVsZW1lbnQuY2xvbmVBbmRSZXBsYWNlUHJvcHMod3JhcEVsZW1lbnQsIFJlYWN0RWxlbWVudC5jbG9uZUFuZFJlcGxhY2VQcm9wcyhlbGVtZW50LCBwcm9wcykpO1xuXG4gICAgZW5xdWV1ZVVwZGF0ZSh0b3BMZXZlbFdyYXBwZXIpO1xuICB9LFxuXG4gIGVucXVldWVFbGVtZW50SW50ZXJuYWw6IGZ1bmN0aW9uIChpbnRlcm5hbEluc3RhbmNlLCBuZXdFbGVtZW50KSB7XG4gICAgaW50ZXJuYWxJbnN0YW5jZS5fcGVuZGluZ0VsZW1lbnQgPSBuZXdFbGVtZW50O1xuICAgIGVucXVldWVVcGRhdGUoaW50ZXJuYWxJbnN0YW5jZSk7XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdFVwZGF0ZVF1ZXVlO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvUmVhY3RVcGRhdGVRdWV1ZS5qc1xuLy8gbW9kdWxlIGlkID0gNTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0VXBkYXRlc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIENhbGxiYWNrUXVldWUgPSByZXF1aXJlKCcuL0NhbGxiYWNrUXVldWUnKTtcbnZhciBQb29sZWRDbGFzcyA9IHJlcXVpcmUoJy4vUG9vbGVkQ2xhc3MnKTtcbnZhciBSZWFjdFBlcmYgPSByZXF1aXJlKCcuL1JlYWN0UGVyZicpO1xudmFyIFJlYWN0UmVjb25jaWxlciA9IHJlcXVpcmUoJy4vUmVhY3RSZWNvbmNpbGVyJyk7XG52YXIgVHJhbnNhY3Rpb24gPSByZXF1aXJlKCcuL1RyYW5zYWN0aW9uJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcblxudmFyIGRpcnR5Q29tcG9uZW50cyA9IFtdO1xudmFyIGFzYXBDYWxsYmFja1F1ZXVlID0gQ2FsbGJhY2tRdWV1ZS5nZXRQb29sZWQoKTtcbnZhciBhc2FwRW5xdWV1ZWQgPSBmYWxzZTtcblxudmFyIGJhdGNoaW5nU3RyYXRlZ3kgPSBudWxsO1xuXG5mdW5jdGlvbiBlbnN1cmVJbmplY3RlZCgpIHtcbiAgIShSZWFjdFVwZGF0ZXMuUmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbiAmJiBiYXRjaGluZ1N0cmF0ZWd5KSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdFVwZGF0ZXM6IG11c3QgaW5qZWN0IGEgcmVjb25jaWxlIHRyYW5zYWN0aW9uIGNsYXNzIGFuZCBiYXRjaGluZyAnICsgJ3N0cmF0ZWd5JykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xufVxuXG52YXIgTkVTVEVEX1VQREFURVMgPSB7XG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmRpcnR5Q29tcG9uZW50c0xlbmd0aCA9IGRpcnR5Q29tcG9uZW50cy5sZW5ndGg7XG4gIH0sXG4gIGNsb3NlOiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuZGlydHlDb21wb25lbnRzTGVuZ3RoICE9PSBkaXJ0eUNvbXBvbmVudHMubGVuZ3RoKSB7XG4gICAgICAvLyBBZGRpdGlvbmFsIHVwZGF0ZXMgd2VyZSBlbnF1ZXVlZCBieSBjb21wb25lbnREaWRVcGRhdGUgaGFuZGxlcnMgb3JcbiAgICAgIC8vIHNpbWlsYXI7IGJlZm9yZSBvdXIgb3duIFVQREFURV9RVUVVRUlORyB3cmFwcGVyIGNsb3Nlcywgd2Ugd2FudCB0byBydW5cbiAgICAgIC8vIHRoZXNlIG5ldyB1cGRhdGVzIHNvIHRoYXQgaWYgQSdzIGNvbXBvbmVudERpZFVwZGF0ZSBjYWxscyBzZXRTdGF0ZSBvblxuICAgICAgLy8gQiwgQiB3aWxsIHVwZGF0ZSBiZWZvcmUgdGhlIGNhbGxiYWNrIEEncyB1cGRhdGVyIHByb3ZpZGVkIHdoZW4gY2FsbGluZ1xuICAgICAgLy8gc2V0U3RhdGUuXG4gICAgICBkaXJ0eUNvbXBvbmVudHMuc3BsaWNlKDAsIHRoaXMuZGlydHlDb21wb25lbnRzTGVuZ3RoKTtcbiAgICAgIGZsdXNoQmF0Y2hlZFVwZGF0ZXMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGlydHlDb21wb25lbnRzLmxlbmd0aCA9IDA7XG4gICAgfVxuICB9XG59O1xuXG52YXIgVVBEQVRFX1FVRVVFSU5HID0ge1xuICBpbml0aWFsaXplOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5jYWxsYmFja1F1ZXVlLnJlc2V0KCk7XG4gIH0sXG4gIGNsb3NlOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5jYWxsYmFja1F1ZXVlLm5vdGlmeUFsbCgpO1xuICB9XG59O1xuXG52YXIgVFJBTlNBQ1RJT05fV1JBUFBFUlMgPSBbTkVTVEVEX1VQREFURVMsIFVQREFURV9RVUVVRUlOR107XG5cbmZ1bmN0aW9uIFJlYWN0VXBkYXRlc0ZsdXNoVHJhbnNhY3Rpb24oKSB7XG4gIHRoaXMucmVpbml0aWFsaXplVHJhbnNhY3Rpb24oKTtcbiAgdGhpcy5kaXJ0eUNvbXBvbmVudHNMZW5ndGggPSBudWxsO1xuICB0aGlzLmNhbGxiYWNrUXVldWUgPSBDYWxsYmFja1F1ZXVlLmdldFBvb2xlZCgpO1xuICB0aGlzLnJlY29uY2lsZVRyYW5zYWN0aW9uID0gUmVhY3RVcGRhdGVzLlJlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb24uZ2V0UG9vbGVkKCAvKiBmb3JjZUhUTUwgKi9mYWxzZSk7XG59XG5cbmFzc2lnbihSZWFjdFVwZGF0ZXNGbHVzaFRyYW5zYWN0aW9uLnByb3RvdHlwZSwgVHJhbnNhY3Rpb24uTWl4aW4sIHtcbiAgZ2V0VHJhbnNhY3Rpb25XcmFwcGVyczogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBUUkFOU0FDVElPTl9XUkFQUEVSUztcbiAgfSxcblxuICBkZXN0cnVjdG9yOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5kaXJ0eUNvbXBvbmVudHNMZW5ndGggPSBudWxsO1xuICAgIENhbGxiYWNrUXVldWUucmVsZWFzZSh0aGlzLmNhbGxiYWNrUXVldWUpO1xuICAgIHRoaXMuY2FsbGJhY2tRdWV1ZSA9IG51bGw7XG4gICAgUmVhY3RVcGRhdGVzLlJlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb24ucmVsZWFzZSh0aGlzLnJlY29uY2lsZVRyYW5zYWN0aW9uKTtcbiAgICB0aGlzLnJlY29uY2lsZVRyYW5zYWN0aW9uID0gbnVsbDtcbiAgfSxcblxuICBwZXJmb3JtOiBmdW5jdGlvbiAobWV0aG9kLCBzY29wZSwgYSkge1xuICAgIC8vIEVzc2VudGlhbGx5IGNhbGxzIGB0aGlzLnJlY29uY2lsZVRyYW5zYWN0aW9uLnBlcmZvcm0obWV0aG9kLCBzY29wZSwgYSlgXG4gICAgLy8gd2l0aCB0aGlzIHRyYW5zYWN0aW9uJ3Mgd3JhcHBlcnMgYXJvdW5kIGl0LlxuICAgIHJldHVybiBUcmFuc2FjdGlvbi5NaXhpbi5wZXJmb3JtLmNhbGwodGhpcywgdGhpcy5yZWNvbmNpbGVUcmFuc2FjdGlvbi5wZXJmb3JtLCB0aGlzLnJlY29uY2lsZVRyYW5zYWN0aW9uLCBtZXRob2QsIHNjb3BlLCBhKTtcbiAgfVxufSk7XG5cblBvb2xlZENsYXNzLmFkZFBvb2xpbmdUbyhSZWFjdFVwZGF0ZXNGbHVzaFRyYW5zYWN0aW9uKTtcblxuZnVuY3Rpb24gYmF0Y2hlZFVwZGF0ZXMoY2FsbGJhY2ssIGEsIGIsIGMsIGQsIGUpIHtcbiAgZW5zdXJlSW5qZWN0ZWQoKTtcbiAgYmF0Y2hpbmdTdHJhdGVneS5iYXRjaGVkVXBkYXRlcyhjYWxsYmFjaywgYSwgYiwgYywgZCwgZSk7XG59XG5cbi8qKlxuICogQXJyYXkgY29tcGFyYXRvciBmb3IgUmVhY3RDb21wb25lbnRzIGJ5IG1vdW50IG9yZGVyaW5nLlxuICpcbiAqIEBwYXJhbSB7UmVhY3RDb21wb25lbnR9IGMxIGZpcnN0IGNvbXBvbmVudCB5b3UncmUgY29tcGFyaW5nXG4gKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBjMiBzZWNvbmQgY29tcG9uZW50IHlvdSdyZSBjb21wYXJpbmdcbiAqIEByZXR1cm4ge251bWJlcn0gUmV0dXJuIHZhbHVlIHVzYWJsZSBieSBBcnJheS5wcm90b3R5cGUuc29ydCgpLlxuICovXG5mdW5jdGlvbiBtb3VudE9yZGVyQ29tcGFyYXRvcihjMSwgYzIpIHtcbiAgcmV0dXJuIGMxLl9tb3VudE9yZGVyIC0gYzIuX21vdW50T3JkZXI7XG59XG5cbmZ1bmN0aW9uIHJ1bkJhdGNoZWRVcGRhdGVzKHRyYW5zYWN0aW9uKSB7XG4gIHZhciBsZW4gPSB0cmFuc2FjdGlvbi5kaXJ0eUNvbXBvbmVudHNMZW5ndGg7XG4gICEobGVuID09PSBkaXJ0eUNvbXBvbmVudHMubGVuZ3RoKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdFeHBlY3RlZCBmbHVzaCB0cmFuc2FjdGlvblxcJ3Mgc3RvcmVkIGRpcnR5LWNvbXBvbmVudHMgbGVuZ3RoICglcykgdG8gJyArICdtYXRjaCBkaXJ0eS1jb21wb25lbnRzIGFycmF5IGxlbmd0aCAoJXMpLicsIGxlbiwgZGlydHlDb21wb25lbnRzLmxlbmd0aCkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gIC8vIFNpbmNlIHJlY29uY2lsaW5nIGEgY29tcG9uZW50IGhpZ2hlciBpbiB0aGUgb3duZXIgaGllcmFyY2h5IHVzdWFsbHkgKG5vdFxuICAvLyBhbHdheXMgLS0gc2VlIHNob3VsZENvbXBvbmVudFVwZGF0ZSgpKSB3aWxsIHJlY29uY2lsZSBjaGlsZHJlbiwgcmVjb25jaWxlXG4gIC8vIHRoZW0gYmVmb3JlIHRoZWlyIGNoaWxkcmVuIGJ5IHNvcnRpbmcgdGhlIGFycmF5LlxuICBkaXJ0eUNvbXBvbmVudHMuc29ydChtb3VudE9yZGVyQ29tcGFyYXRvcik7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIC8vIElmIGEgY29tcG9uZW50IGlzIHVubW91bnRlZCBiZWZvcmUgcGVuZGluZyBjaGFuZ2VzIGFwcGx5LCBpdCB3aWxsIHN0aWxsXG4gICAgLy8gYmUgaGVyZSwgYnV0IHdlIGFzc3VtZSB0aGF0IGl0IGhhcyBjbGVhcmVkIGl0cyBfcGVuZGluZ0NhbGxiYWNrcyBhbmRcbiAgICAvLyB0aGF0IHBlcmZvcm1VcGRhdGVJZk5lY2Vzc2FyeSBpcyBhIG5vb3AuXG4gICAgdmFyIGNvbXBvbmVudCA9IGRpcnR5Q29tcG9uZW50c1tpXTtcblxuICAgIC8vIElmIHBlcmZvcm1VcGRhdGVJZk5lY2Vzc2FyeSBoYXBwZW5zIHRvIGVucXVldWUgYW55IG5ldyB1cGRhdGVzLCB3ZVxuICAgIC8vIHNob3VsZG4ndCBleGVjdXRlIHRoZSBjYWxsYmFja3MgdW50aWwgdGhlIG5leHQgcmVuZGVyIGhhcHBlbnMsIHNvXG4gICAgLy8gc3Rhc2ggdGhlIGNhbGxiYWNrcyBmaXJzdFxuICAgIHZhciBjYWxsYmFja3MgPSBjb21wb25lbnQuX3BlbmRpbmdDYWxsYmFja3M7XG4gICAgY29tcG9uZW50Ll9wZW5kaW5nQ2FsbGJhY2tzID0gbnVsbDtcblxuICAgIFJlYWN0UmVjb25jaWxlci5wZXJmb3JtVXBkYXRlSWZOZWNlc3NhcnkoY29tcG9uZW50LCB0cmFuc2FjdGlvbi5yZWNvbmNpbGVUcmFuc2FjdGlvbik7XG5cbiAgICBpZiAoY2FsbGJhY2tzKSB7XG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNhbGxiYWNrcy5sZW5ndGg7IGorKykge1xuICAgICAgICB0cmFuc2FjdGlvbi5jYWxsYmFja1F1ZXVlLmVucXVldWUoY2FsbGJhY2tzW2pdLCBjb21wb25lbnQuZ2V0UHVibGljSW5zdGFuY2UoKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbnZhciBmbHVzaEJhdGNoZWRVcGRhdGVzID0gZnVuY3Rpb24gKCkge1xuICAvLyBSZWFjdFVwZGF0ZXNGbHVzaFRyYW5zYWN0aW9uJ3Mgd3JhcHBlcnMgd2lsbCBjbGVhciB0aGUgZGlydHlDb21wb25lbnRzXG4gIC8vIGFycmF5IGFuZCBwZXJmb3JtIGFueSB1cGRhdGVzIGVucXVldWVkIGJ5IG1vdW50LXJlYWR5IGhhbmRsZXJzIChpLmUuLFxuICAvLyBjb21wb25lbnREaWRVcGRhdGUpIGJ1dCB3ZSBuZWVkIHRvIGNoZWNrIGhlcmUgdG9vIGluIG9yZGVyIHRvIGNhdGNoXG4gIC8vIHVwZGF0ZXMgZW5xdWV1ZWQgYnkgc2V0U3RhdGUgY2FsbGJhY2tzIGFuZCBhc2FwIGNhbGxzLlxuICB3aGlsZSAoZGlydHlDb21wb25lbnRzLmxlbmd0aCB8fCBhc2FwRW5xdWV1ZWQpIHtcbiAgICBpZiAoZGlydHlDb21wb25lbnRzLmxlbmd0aCkge1xuICAgICAgdmFyIHRyYW5zYWN0aW9uID0gUmVhY3RVcGRhdGVzRmx1c2hUcmFuc2FjdGlvbi5nZXRQb29sZWQoKTtcbiAgICAgIHRyYW5zYWN0aW9uLnBlcmZvcm0ocnVuQmF0Y2hlZFVwZGF0ZXMsIG51bGwsIHRyYW5zYWN0aW9uKTtcbiAgICAgIFJlYWN0VXBkYXRlc0ZsdXNoVHJhbnNhY3Rpb24ucmVsZWFzZSh0cmFuc2FjdGlvbik7XG4gICAgfVxuXG4gICAgaWYgKGFzYXBFbnF1ZXVlZCkge1xuICAgICAgYXNhcEVucXVldWVkID0gZmFsc2U7XG4gICAgICB2YXIgcXVldWUgPSBhc2FwQ2FsbGJhY2tRdWV1ZTtcbiAgICAgIGFzYXBDYWxsYmFja1F1ZXVlID0gQ2FsbGJhY2tRdWV1ZS5nZXRQb29sZWQoKTtcbiAgICAgIHF1ZXVlLm5vdGlmeUFsbCgpO1xuICAgICAgQ2FsbGJhY2tRdWV1ZS5yZWxlYXNlKHF1ZXVlKTtcbiAgICB9XG4gIH1cbn07XG5mbHVzaEJhdGNoZWRVcGRhdGVzID0gUmVhY3RQZXJmLm1lYXN1cmUoJ1JlYWN0VXBkYXRlcycsICdmbHVzaEJhdGNoZWRVcGRhdGVzJywgZmx1c2hCYXRjaGVkVXBkYXRlcyk7XG5cbi8qKlxuICogTWFyayBhIGNvbXBvbmVudCBhcyBuZWVkaW5nIGEgcmVyZW5kZXIsIGFkZGluZyBhbiBvcHRpb25hbCBjYWxsYmFjayB0byBhXG4gKiBsaXN0IG9mIGZ1bmN0aW9ucyB3aGljaCB3aWxsIGJlIGV4ZWN1dGVkIG9uY2UgdGhlIHJlcmVuZGVyIG9jY3Vycy5cbiAqL1xuZnVuY3Rpb24gZW5xdWV1ZVVwZGF0ZShjb21wb25lbnQpIHtcbiAgZW5zdXJlSW5qZWN0ZWQoKTtcblxuICAvLyBWYXJpb3VzIHBhcnRzIG9mIG91ciBjb2RlIChzdWNoIGFzIFJlYWN0Q29tcG9zaXRlQ29tcG9uZW50J3NcbiAgLy8gX3JlbmRlclZhbGlkYXRlZENvbXBvbmVudCkgYXNzdW1lIHRoYXQgY2FsbHMgdG8gcmVuZGVyIGFyZW4ndCBuZXN0ZWQ7XG4gIC8vIHZlcmlmeSB0aGF0IHRoYXQncyB0aGUgY2FzZS4gKFRoaXMgaXMgY2FsbGVkIGJ5IGVhY2ggdG9wLWxldmVsIHVwZGF0ZVxuICAvLyBmdW5jdGlvbiwgbGlrZSBzZXRQcm9wcywgc2V0U3RhdGUsIGZvcmNlVXBkYXRlLCBldGMuOyBjcmVhdGlvbiBhbmRcbiAgLy8gZGVzdHJ1Y3Rpb24gb2YgdG9wLWxldmVsIGNvbXBvbmVudHMgaXMgZ3VhcmRlZCBpbiBSZWFjdE1vdW50LilcblxuICBpZiAoIWJhdGNoaW5nU3RyYXRlZ3kuaXNCYXRjaGluZ1VwZGF0ZXMpIHtcbiAgICBiYXRjaGluZ1N0cmF0ZWd5LmJhdGNoZWRVcGRhdGVzKGVucXVldWVVcGRhdGUsIGNvbXBvbmVudCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgZGlydHlDb21wb25lbnRzLnB1c2goY29tcG9uZW50KTtcbn1cblxuLyoqXG4gKiBFbnF1ZXVlIGEgY2FsbGJhY2sgdG8gYmUgcnVuIGF0IHRoZSBlbmQgb2YgdGhlIGN1cnJlbnQgYmF0Y2hpbmcgY3ljbGUuIFRocm93c1xuICogaWYgbm8gdXBkYXRlcyBhcmUgY3VycmVudGx5IGJlaW5nIHBlcmZvcm1lZC5cbiAqL1xuZnVuY3Rpb24gYXNhcChjYWxsYmFjaywgY29udGV4dCkge1xuICAhYmF0Y2hpbmdTdHJhdGVneS5pc0JhdGNoaW5nVXBkYXRlcyA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdFVwZGF0ZXMuYXNhcDogQ2FuXFwndCBlbnF1ZXVlIGFuIGFzYXAgY2FsbGJhY2sgaW4gYSBjb250ZXh0IHdoZXJlJyArICd1cGRhdGVzIGFyZSBub3QgYmVpbmcgYmF0Y2hlZC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIGFzYXBDYWxsYmFja1F1ZXVlLmVucXVldWUoY2FsbGJhY2ssIGNvbnRleHQpO1xuICBhc2FwRW5xdWV1ZWQgPSB0cnVlO1xufVxuXG52YXIgUmVhY3RVcGRhdGVzSW5qZWN0aW9uID0ge1xuICBpbmplY3RSZWNvbmNpbGVUcmFuc2FjdGlvbjogZnVuY3Rpb24gKFJlY29uY2lsZVRyYW5zYWN0aW9uKSB7XG4gICAgIVJlY29uY2lsZVRyYW5zYWN0aW9uID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0VXBkYXRlczogbXVzdCBwcm92aWRlIGEgcmVjb25jaWxlIHRyYW5zYWN0aW9uIGNsYXNzJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIFJlYWN0VXBkYXRlcy5SZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uID0gUmVjb25jaWxlVHJhbnNhY3Rpb247XG4gIH0sXG5cbiAgaW5qZWN0QmF0Y2hpbmdTdHJhdGVneTogZnVuY3Rpb24gKF9iYXRjaGluZ1N0cmF0ZWd5KSB7XG4gICAgIV9iYXRjaGluZ1N0cmF0ZWd5ID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0VXBkYXRlczogbXVzdCBwcm92aWRlIGEgYmF0Y2hpbmcgc3RyYXRlZ3knKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgISh0eXBlb2YgX2JhdGNoaW5nU3RyYXRlZ3kuYmF0Y2hlZFVwZGF0ZXMgPT09ICdmdW5jdGlvbicpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0VXBkYXRlczogbXVzdCBwcm92aWRlIGEgYmF0Y2hlZFVwZGF0ZXMoKSBmdW5jdGlvbicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAhKHR5cGVvZiBfYmF0Y2hpbmdTdHJhdGVneS5pc0JhdGNoaW5nVXBkYXRlcyA9PT0gJ2Jvb2xlYW4nKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdFVwZGF0ZXM6IG11c3QgcHJvdmlkZSBhbiBpc0JhdGNoaW5nVXBkYXRlcyBib29sZWFuIGF0dHJpYnV0ZScpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICBiYXRjaGluZ1N0cmF0ZWd5ID0gX2JhdGNoaW5nU3RyYXRlZ3k7XG4gIH1cbn07XG5cbnZhciBSZWFjdFVwZGF0ZXMgPSB7XG4gIC8qKlxuICAgKiBSZWFjdCByZWZlcmVuY2VzIGBSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uYCB1c2luZyB0aGlzIHByb3BlcnR5IGluIG9yZGVyXG4gICAqIHRvIGFsbG93IGRlcGVuZGVuY3kgaW5qZWN0aW9uLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIFJlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb246IG51bGwsXG5cbiAgYmF0Y2hlZFVwZGF0ZXM6IGJhdGNoZWRVcGRhdGVzLFxuICBlbnF1ZXVlVXBkYXRlOiBlbnF1ZXVlVXBkYXRlLFxuICBmbHVzaEJhdGNoZWRVcGRhdGVzOiBmbHVzaEJhdGNoZWRVcGRhdGVzLFxuICBpbmplY3Rpb246IFJlYWN0VXBkYXRlc0luamVjdGlvbixcbiAgYXNhcDogYXNhcFxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdFVwZGF0ZXM7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0L2xpYi9SZWFjdFVwZGF0ZXMuanNcbi8vIG1vZHVsZSBpZCA9IDU0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBDYWxsYmFja1F1ZXVlXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUG9vbGVkQ2xhc3MgPSByZXF1aXJlKCcuL1Bvb2xlZENsYXNzJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcblxuLyoqXG4gKiBBIHNwZWNpYWxpemVkIHBzZXVkby1ldmVudCBtb2R1bGUgdG8gaGVscCBrZWVwIHRyYWNrIG9mIGNvbXBvbmVudHMgd2FpdGluZyB0b1xuICogYmUgbm90aWZpZWQgd2hlbiB0aGVpciBET00gcmVwcmVzZW50YXRpb25zIGFyZSBhdmFpbGFibGUgZm9yIHVzZS5cbiAqXG4gKiBUaGlzIGltcGxlbWVudHMgYFBvb2xlZENsYXNzYCwgc28geW91IHNob3VsZCBuZXZlciBuZWVkIHRvIGluc3RhbnRpYXRlIHRoaXMuXG4gKiBJbnN0ZWFkLCB1c2UgYENhbGxiYWNrUXVldWUuZ2V0UG9vbGVkKClgLlxuICpcbiAqIEBjbGFzcyBSZWFjdE1vdW50UmVhZHlcbiAqIEBpbXBsZW1lbnRzIFBvb2xlZENsYXNzXG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gQ2FsbGJhY2tRdWV1ZSgpIHtcbiAgdGhpcy5fY2FsbGJhY2tzID0gbnVsbDtcbiAgdGhpcy5fY29udGV4dHMgPSBudWxsO1xufVxuXG5hc3NpZ24oQ2FsbGJhY2tRdWV1ZS5wcm90b3R5cGUsIHtcblxuICAvKipcbiAgICogRW5xdWV1ZXMgYSBjYWxsYmFjayB0byBiZSBpbnZva2VkIHdoZW4gYG5vdGlmeUFsbGAgaXMgaW52b2tlZC5cbiAgICpcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sgSW52b2tlZCB3aGVuIGBub3RpZnlBbGxgIGlzIGludm9rZWQuXG4gICAqIEBwYXJhbSB7P29iamVjdH0gY29udGV4dCBDb250ZXh0IHRvIGNhbGwgYGNhbGxiYWNrYCB3aXRoLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGVucXVldWU6IGZ1bmN0aW9uIChjYWxsYmFjaywgY29udGV4dCkge1xuICAgIHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCBbXTtcbiAgICB0aGlzLl9jb250ZXh0cyA9IHRoaXMuX2NvbnRleHRzIHx8IFtdO1xuICAgIHRoaXMuX2NhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcbiAgICB0aGlzLl9jb250ZXh0cy5wdXNoKGNvbnRleHQpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBJbnZva2VzIGFsbCBlbnF1ZXVlZCBjYWxsYmFja3MgYW5kIGNsZWFycyB0aGUgcXVldWUuIFRoaXMgaXMgaW52b2tlZCBhZnRlclxuICAgKiB0aGUgRE9NIHJlcHJlc2VudGF0aW9uIG9mIGEgY29tcG9uZW50IGhhcyBiZWVuIGNyZWF0ZWQgb3IgdXBkYXRlZC5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqL1xuICBub3RpZnlBbGw6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzO1xuICAgIHZhciBjb250ZXh0cyA9IHRoaXMuX2NvbnRleHRzO1xuICAgIGlmIChjYWxsYmFja3MpIHtcbiAgICAgICEoY2FsbGJhY2tzLmxlbmd0aCA9PT0gY29udGV4dHMubGVuZ3RoKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdNaXNtYXRjaGVkIGxpc3Qgb2YgY29udGV4dHMgaW4gY2FsbGJhY2sgcXVldWUnKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgICB0aGlzLl9jYWxsYmFja3MgPSBudWxsO1xuICAgICAgdGhpcy5fY29udGV4dHMgPSBudWxsO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjYWxsYmFja3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY2FsbGJhY2tzW2ldLmNhbGwoY29udGV4dHNbaV0pO1xuICAgICAgfVxuICAgICAgY2FsbGJhY2tzLmxlbmd0aCA9IDA7XG4gICAgICBjb250ZXh0cy5sZW5ndGggPSAwO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogUmVzZXRzIHRoZSBpbnRlcm5hbCBxdWV1ZS5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqL1xuICByZXNldDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2NhbGxiYWNrcyA9IG51bGw7XG4gICAgdGhpcy5fY29udGV4dHMgPSBudWxsO1xuICB9LFxuXG4gIC8qKlxuICAgKiBgUG9vbGVkQ2xhc3NgIGxvb2tzIGZvciB0aGlzLlxuICAgKi9cbiAgZGVzdHJ1Y3RvcjogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMucmVzZXQoKTtcbiAgfVxuXG59KTtcblxuUG9vbGVkQ2xhc3MuYWRkUG9vbGluZ1RvKENhbGxiYWNrUXVldWUpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IENhbGxiYWNrUXVldWU7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0L2xpYi9DYWxsYmFja1F1ZXVlLmpzXG4vLyBtb2R1bGUgaWQgPSA1NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUG9vbGVkQ2xhc3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcblxuLyoqXG4gKiBTdGF0aWMgcG9vbGVycy4gU2V2ZXJhbCBjdXN0b20gdmVyc2lvbnMgZm9yIGVhY2ggcG90ZW50aWFsIG51bWJlciBvZlxuICogYXJndW1lbnRzLiBBIGNvbXBsZXRlbHkgZ2VuZXJpYyBwb29sZXIgaXMgZWFzeSB0byBpbXBsZW1lbnQsIGJ1dCB3b3VsZFxuICogcmVxdWlyZSBhY2Nlc3NpbmcgdGhlIGBhcmd1bWVudHNgIG9iamVjdC4gSW4gZWFjaCBvZiB0aGVzZSwgYHRoaXNgIHJlZmVycyB0b1xuICogdGhlIENsYXNzIGl0c2VsZiwgbm90IGFuIGluc3RhbmNlLiBJZiBhbnkgb3RoZXJzIGFyZSBuZWVkZWQsIHNpbXBseSBhZGQgdGhlbVxuICogaGVyZSwgb3IgaW4gdGhlaXIgb3duIGZpbGVzLlxuICovXG52YXIgb25lQXJndW1lbnRQb29sZXIgPSBmdW5jdGlvbiAoY29weUZpZWxkc0Zyb20pIHtcbiAgdmFyIEtsYXNzID0gdGhpcztcbiAgaWYgKEtsYXNzLmluc3RhbmNlUG9vbC5sZW5ndGgpIHtcbiAgICB2YXIgaW5zdGFuY2UgPSBLbGFzcy5pbnN0YW5jZVBvb2wucG9wKCk7XG4gICAgS2xhc3MuY2FsbChpbnN0YW5jZSwgY29weUZpZWxkc0Zyb20pO1xuICAgIHJldHVybiBpbnN0YW5jZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IEtsYXNzKGNvcHlGaWVsZHNGcm9tKTtcbiAgfVxufTtcblxudmFyIHR3b0FyZ3VtZW50UG9vbGVyID0gZnVuY3Rpb24gKGExLCBhMikge1xuICB2YXIgS2xhc3MgPSB0aGlzO1xuICBpZiAoS2xhc3MuaW5zdGFuY2VQb29sLmxlbmd0aCkge1xuICAgIHZhciBpbnN0YW5jZSA9IEtsYXNzLmluc3RhbmNlUG9vbC5wb3AoKTtcbiAgICBLbGFzcy5jYWxsKGluc3RhbmNlLCBhMSwgYTIpO1xuICAgIHJldHVybiBpbnN0YW5jZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IEtsYXNzKGExLCBhMik7XG4gIH1cbn07XG5cbnZhciB0aHJlZUFyZ3VtZW50UG9vbGVyID0gZnVuY3Rpb24gKGExLCBhMiwgYTMpIHtcbiAgdmFyIEtsYXNzID0gdGhpcztcbiAgaWYgKEtsYXNzLmluc3RhbmNlUG9vbC5sZW5ndGgpIHtcbiAgICB2YXIgaW5zdGFuY2UgPSBLbGFzcy5pbnN0YW5jZVBvb2wucG9wKCk7XG4gICAgS2xhc3MuY2FsbChpbnN0YW5jZSwgYTEsIGEyLCBhMyk7XG4gICAgcmV0dXJuIGluc3RhbmNlO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBuZXcgS2xhc3MoYTEsIGEyLCBhMyk7XG4gIH1cbn07XG5cbnZhciBmb3VyQXJndW1lbnRQb29sZXIgPSBmdW5jdGlvbiAoYTEsIGEyLCBhMywgYTQpIHtcbiAgdmFyIEtsYXNzID0gdGhpcztcbiAgaWYgKEtsYXNzLmluc3RhbmNlUG9vbC5sZW5ndGgpIHtcbiAgICB2YXIgaW5zdGFuY2UgPSBLbGFzcy5pbnN0YW5jZVBvb2wucG9wKCk7XG4gICAgS2xhc3MuY2FsbChpbnN0YW5jZSwgYTEsIGEyLCBhMywgYTQpO1xuICAgIHJldHVybiBpbnN0YW5jZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IEtsYXNzKGExLCBhMiwgYTMsIGE0KTtcbiAgfVxufTtcblxudmFyIGZpdmVBcmd1bWVudFBvb2xlciA9IGZ1bmN0aW9uIChhMSwgYTIsIGEzLCBhNCwgYTUpIHtcbiAgdmFyIEtsYXNzID0gdGhpcztcbiAgaWYgKEtsYXNzLmluc3RhbmNlUG9vbC5sZW5ndGgpIHtcbiAgICB2YXIgaW5zdGFuY2UgPSBLbGFzcy5pbnN0YW5jZVBvb2wucG9wKCk7XG4gICAgS2xhc3MuY2FsbChpbnN0YW5jZSwgYTEsIGEyLCBhMywgYTQsIGE1KTtcbiAgICByZXR1cm4gaW5zdGFuY2U7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG5ldyBLbGFzcyhhMSwgYTIsIGEzLCBhNCwgYTUpO1xuICB9XG59O1xuXG52YXIgc3RhbmRhcmRSZWxlYXNlciA9IGZ1bmN0aW9uIChpbnN0YW5jZSkge1xuICB2YXIgS2xhc3MgPSB0aGlzO1xuICAhKGluc3RhbmNlIGluc3RhbmNlb2YgS2xhc3MpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1RyeWluZyB0byByZWxlYXNlIGFuIGluc3RhbmNlIGludG8gYSBwb29sIG9mIGEgZGlmZmVyZW50IHR5cGUuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICBpbnN0YW5jZS5kZXN0cnVjdG9yKCk7XG4gIGlmIChLbGFzcy5pbnN0YW5jZVBvb2wubGVuZ3RoIDwgS2xhc3MucG9vbFNpemUpIHtcbiAgICBLbGFzcy5pbnN0YW5jZVBvb2wucHVzaChpbnN0YW5jZSk7XG4gIH1cbn07XG5cbnZhciBERUZBVUxUX1BPT0xfU0laRSA9IDEwO1xudmFyIERFRkFVTFRfUE9PTEVSID0gb25lQXJndW1lbnRQb29sZXI7XG5cbi8qKlxuICogQXVnbWVudHMgYENvcHlDb25zdHJ1Y3RvcmAgdG8gYmUgYSBwb29sYWJsZSBjbGFzcywgYXVnbWVudGluZyBvbmx5IHRoZSBjbGFzc1xuICogaXRzZWxmIChzdGF0aWNhbGx5KSBub3QgYWRkaW5nIGFueSBwcm90b3R5cGljYWwgZmllbGRzLiBBbnkgQ29weUNvbnN0cnVjdG9yXG4gKiB5b3UgZ2l2ZSB0aGlzIG1heSBoYXZlIGEgYHBvb2xTaXplYCBwcm9wZXJ0eSwgYW5kIHdpbGwgbG9vayBmb3IgYVxuICogcHJvdG90eXBpY2FsIGBkZXN0cnVjdG9yYCBvbiBpbnN0YW5jZXMgKG9wdGlvbmFsKS5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBDb3B5Q29uc3RydWN0b3IgQ29uc3RydWN0b3IgdGhhdCBjYW4gYmUgdXNlZCB0byByZXNldC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHBvb2xlciBDdXN0b21pemFibGUgcG9vbGVyLlxuICovXG52YXIgYWRkUG9vbGluZ1RvID0gZnVuY3Rpb24gKENvcHlDb25zdHJ1Y3RvciwgcG9vbGVyKSB7XG4gIHZhciBOZXdLbGFzcyA9IENvcHlDb25zdHJ1Y3RvcjtcbiAgTmV3S2xhc3MuaW5zdGFuY2VQb29sID0gW107XG4gIE5ld0tsYXNzLmdldFBvb2xlZCA9IHBvb2xlciB8fCBERUZBVUxUX1BPT0xFUjtcbiAgaWYgKCFOZXdLbGFzcy5wb29sU2l6ZSkge1xuICAgIE5ld0tsYXNzLnBvb2xTaXplID0gREVGQVVMVF9QT09MX1NJWkU7XG4gIH1cbiAgTmV3S2xhc3MucmVsZWFzZSA9IHN0YW5kYXJkUmVsZWFzZXI7XG4gIHJldHVybiBOZXdLbGFzcztcbn07XG5cbnZhciBQb29sZWRDbGFzcyA9IHtcbiAgYWRkUG9vbGluZ1RvOiBhZGRQb29saW5nVG8sXG4gIG9uZUFyZ3VtZW50UG9vbGVyOiBvbmVBcmd1bWVudFBvb2xlcixcbiAgdHdvQXJndW1lbnRQb29sZXI6IHR3b0FyZ3VtZW50UG9vbGVyLFxuICB0aHJlZUFyZ3VtZW50UG9vbGVyOiB0aHJlZUFyZ3VtZW50UG9vbGVyLFxuICBmb3VyQXJndW1lbnRQb29sZXI6IGZvdXJBcmd1bWVudFBvb2xlcixcbiAgZml2ZUFyZ3VtZW50UG9vbGVyOiBmaXZlQXJndW1lbnRQb29sZXJcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUG9vbGVkQ2xhc3M7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0L2xpYi9Qb29sZWRDbGFzcy5qc1xuLy8gbW9kdWxlIGlkID0gNTZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFRyYW5zYWN0aW9uXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbi8qKlxuICogYFRyYW5zYWN0aW9uYCBjcmVhdGVzIGEgYmxhY2sgYm94IHRoYXQgaXMgYWJsZSB0byB3cmFwIGFueSBtZXRob2Qgc3VjaCB0aGF0XG4gKiBjZXJ0YWluIGludmFyaWFudHMgYXJlIG1haW50YWluZWQgYmVmb3JlIGFuZCBhZnRlciB0aGUgbWV0aG9kIGlzIGludm9rZWRcbiAqIChFdmVuIGlmIGFuIGV4Y2VwdGlvbiBpcyB0aHJvd24gd2hpbGUgaW52b2tpbmcgdGhlIHdyYXBwZWQgbWV0aG9kKS4gV2hvZXZlclxuICogaW5zdGFudGlhdGVzIGEgdHJhbnNhY3Rpb24gY2FuIHByb3ZpZGUgZW5mb3JjZXJzIG9mIHRoZSBpbnZhcmlhbnRzIGF0XG4gKiBjcmVhdGlvbiB0aW1lLiBUaGUgYFRyYW5zYWN0aW9uYCBjbGFzcyBpdHNlbGYgd2lsbCBzdXBwbHkgb25lIGFkZGl0aW9uYWxcbiAqIGF1dG9tYXRpYyBpbnZhcmlhbnQgZm9yIHlvdSAtIHRoZSBpbnZhcmlhbnQgdGhhdCBhbnkgdHJhbnNhY3Rpb24gaW5zdGFuY2VcbiAqIHNob3VsZCBub3QgYmUgcnVuIHdoaWxlIGl0IGlzIGFscmVhZHkgYmVpbmcgcnVuLiBZb3Ugd291bGQgdHlwaWNhbGx5IGNyZWF0ZSBhXG4gKiBzaW5nbGUgaW5zdGFuY2Ugb2YgYSBgVHJhbnNhY3Rpb25gIGZvciByZXVzZSBtdWx0aXBsZSB0aW1lcywgdGhhdCBwb3RlbnRpYWxseVxuICogaXMgdXNlZCB0byB3cmFwIHNldmVyYWwgZGlmZmVyZW50IG1ldGhvZHMuIFdyYXBwZXJzIGFyZSBleHRyZW1lbHkgc2ltcGxlIC1cbiAqIHRoZXkgb25seSByZXF1aXJlIGltcGxlbWVudGluZyB0d28gbWV0aG9kcy5cbiAqXG4gKiA8cHJlPlxuICogICAgICAgICAgICAgICAgICAgICAgIHdyYXBwZXJzIChpbmplY3RlZCBhdCBjcmVhdGlvbiB0aW1lKVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgICAgICAgICtcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgICB8XG4gKiAgICAgICAgICAgICAgICAgICAgKy0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tK1xuICogICAgICAgICAgICAgICAgICAgIHwgICAgICAgICAgICAgICAgIHYgICAgICAgIHwgICAgICAgICAgICAgIHxcbiAqICAgICAgICAgICAgICAgICAgICB8ICAgICAgKy0tLS0tLS0tLS0tLS0tLSsgICB8ICAgICAgICAgICAgICB8XG4gKiAgICAgICAgICAgICAgICAgICAgfCAgICstLXwgICAgd3JhcHBlcjEgICB8LS0tfC0tLS0rICAgICAgICAgfFxuICogICAgICAgICAgICAgICAgICAgIHwgICB8ICArLS0tLS0tLS0tLS0tLS0tKyAgIHYgICAgfCAgICAgICAgIHxcbiAqICAgICAgICAgICAgICAgICAgICB8ICAgfCAgICAgICAgICArLS0tLS0tLS0tLS0tLSsgIHwgICAgICAgICB8XG4gKiAgICAgICAgICAgICAgICAgICAgfCAgIHwgICAgICstLS0tfCAgIHdyYXBwZXIyICB8LS0tLS0tLS0rICAgfFxuICogICAgICAgICAgICAgICAgICAgIHwgICB8ICAgICB8ICAgICstLS0tLS0tLS0tLS0tKyAgfCAgICAgfCAgIHxcbiAqICAgICAgICAgICAgICAgICAgICB8ICAgfCAgICAgfCAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgICB8XG4gKiAgICAgICAgICAgICAgICAgICAgfCAgIHYgICAgIHYgICAgICAgICAgICAgICAgICAgICB2ICAgICB2ICAgfCB3cmFwcGVyXG4gKiAgICAgICAgICAgICAgICAgICAgfCArLS0tKyArLS0tKyAgICstLS0tLS0tLS0rICAgKy0tLSsgKy0tLSsgfCBpbnZhcmlhbnRzXG4gKiBwZXJmb3JtKGFueU1ldGhvZCkgfCB8ICAgfCB8ICAgfCAgIHwgICAgICAgICB8ICAgfCAgIHwgfCAgIHwgfCBtYWludGFpbmVkXG4gKiArLS0tLS0tLS0tLS0tLS0tLS0+fC18LS0tfC18LS0tfC0tPnxhbnlNZXRob2R8LS0tfC0tLXwtfC0tLXwtfC0tLS0tLS0tPlxuICogICAgICAgICAgICAgICAgICAgIHwgfCAgIHwgfCAgIHwgICB8ICAgICAgICAgfCAgIHwgICB8IHwgICB8IHxcbiAqICAgICAgICAgICAgICAgICAgICB8IHwgICB8IHwgICB8ICAgfCAgICAgICAgIHwgICB8ICAgfCB8ICAgfCB8XG4gKiAgICAgICAgICAgICAgICAgICAgfCB8ICAgfCB8ICAgfCAgIHwgICAgICAgICB8ICAgfCAgIHwgfCAgIHwgfFxuICogICAgICAgICAgICAgICAgICAgIHwgKy0tLSsgKy0tLSsgICArLS0tLS0tLS0tKyAgICstLS0rICstLS0rIHxcbiAqICAgICAgICAgICAgICAgICAgICB8ICBpbml0aWFsaXplICAgICAgICAgICAgICAgICAgICBjbG9zZSAgICB8XG4gKiAgICAgICAgICAgICAgICAgICAgKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tK1xuICogPC9wcmU+XG4gKlxuICogVXNlIGNhc2VzOlxuICogLSBQcmVzZXJ2aW5nIHRoZSBpbnB1dCBzZWxlY3Rpb24gcmFuZ2VzIGJlZm9yZS9hZnRlciByZWNvbmNpbGlhdGlvbi5cbiAqICAgUmVzdG9yaW5nIHNlbGVjdGlvbiBldmVuIGluIHRoZSBldmVudCBvZiBhbiB1bmV4cGVjdGVkIGVycm9yLlxuICogLSBEZWFjdGl2YXRpbmcgZXZlbnRzIHdoaWxlIHJlYXJyYW5naW5nIHRoZSBET00sIHByZXZlbnRpbmcgYmx1cnMvZm9jdXNlcyxcbiAqICAgd2hpbGUgZ3VhcmFudGVlaW5nIHRoYXQgYWZ0ZXJ3YXJkcywgdGhlIGV2ZW50IHN5c3RlbSBpcyByZWFjdGl2YXRlZC5cbiAqIC0gRmx1c2hpbmcgYSBxdWV1ZSBvZiBjb2xsZWN0ZWQgRE9NIG11dGF0aW9ucyB0byB0aGUgbWFpbiBVSSB0aHJlYWQgYWZ0ZXIgYVxuICogICByZWNvbmNpbGlhdGlvbiB0YWtlcyBwbGFjZSBpbiBhIHdvcmtlciB0aHJlYWQuXG4gKiAtIEludm9raW5nIGFueSBjb2xsZWN0ZWQgYGNvbXBvbmVudERpZFVwZGF0ZWAgY2FsbGJhY2tzIGFmdGVyIHJlbmRlcmluZyBuZXdcbiAqICAgY29udGVudC5cbiAqIC0gKEZ1dHVyZSB1c2UgY2FzZSk6IFdyYXBwaW5nIHBhcnRpY3VsYXIgZmx1c2hlcyBvZiB0aGUgYFJlYWN0V29ya2VyYCBxdWV1ZVxuICogICB0byBwcmVzZXJ2ZSB0aGUgYHNjcm9sbFRvcGAgKGFuIGF1dG9tYXRpYyBzY3JvbGwgYXdhcmUgRE9NKS5cbiAqIC0gKEZ1dHVyZSB1c2UgY2FzZSk6IExheW91dCBjYWxjdWxhdGlvbnMgYmVmb3JlIGFuZCBhZnRlciBET00gdXBkYXRlcy5cbiAqXG4gKiBUcmFuc2FjdGlvbmFsIHBsdWdpbiBBUEk6XG4gKiAtIEEgbW9kdWxlIHRoYXQgaGFzIGFuIGBpbml0aWFsaXplYCBtZXRob2QgdGhhdCByZXR1cm5zIGFueSBwcmVjb21wdXRhdGlvbi5cbiAqIC0gYW5kIGEgYGNsb3NlYCBtZXRob2QgdGhhdCBhY2NlcHRzIHRoZSBwcmVjb21wdXRhdGlvbi4gYGNsb3NlYCBpcyBpbnZva2VkXG4gKiAgIHdoZW4gdGhlIHdyYXBwZWQgcHJvY2VzcyBpcyBjb21wbGV0ZWQsIG9yIGhhcyBmYWlsZWQuXG4gKlxuICogQHBhcmFtIHtBcnJheTxUcmFuc2FjdGlvbmFsV3JhcHBlcj59IHRyYW5zYWN0aW9uV3JhcHBlciBXcmFwcGVyIG1vZHVsZXNcbiAqIHRoYXQgaW1wbGVtZW50IGBpbml0aWFsaXplYCBhbmQgYGNsb3NlYC5cbiAqIEByZXR1cm4ge1RyYW5zYWN0aW9ufSBTaW5nbGUgdHJhbnNhY3Rpb24gZm9yIHJldXNlIGluIHRocmVhZC5cbiAqXG4gKiBAY2xhc3MgVHJhbnNhY3Rpb25cbiAqL1xudmFyIE1peGluID0ge1xuICAvKipcbiAgICogU2V0cyB1cCB0aGlzIGluc3RhbmNlIHNvIHRoYXQgaXQgaXMgcHJlcGFyZWQgZm9yIGNvbGxlY3RpbmcgbWV0cmljcy4gRG9lc1xuICAgKiBzbyBzdWNoIHRoYXQgdGhpcyBzZXR1cCBtZXRob2QgbWF5IGJlIHVzZWQgb24gYW4gaW5zdGFuY2UgdGhhdCBpcyBhbHJlYWR5XG4gICAqIGluaXRpYWxpemVkLCBpbiBhIHdheSB0aGF0IGRvZXMgbm90IGNvbnN1bWUgYWRkaXRpb25hbCBtZW1vcnkgdXBvbiByZXVzZS5cbiAgICogVGhhdCBjYW4gYmUgdXNlZnVsIGlmIHlvdSBkZWNpZGUgdG8gbWFrZSB5b3VyIHN1YmNsYXNzIG9mIHRoaXMgbWl4aW4gYVxuICAgKiBcIlBvb2xlZENsYXNzXCIuXG4gICAqL1xuICByZWluaXRpYWxpemVUcmFuc2FjdGlvbjogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMudHJhbnNhY3Rpb25XcmFwcGVycyA9IHRoaXMuZ2V0VHJhbnNhY3Rpb25XcmFwcGVycygpO1xuICAgIGlmICh0aGlzLndyYXBwZXJJbml0RGF0YSkge1xuICAgICAgdGhpcy53cmFwcGVySW5pdERhdGEubGVuZ3RoID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy53cmFwcGVySW5pdERhdGEgPSBbXTtcbiAgICB9XG4gICAgdGhpcy5faXNJblRyYW5zYWN0aW9uID0gZmFsc2U7XG4gIH0sXG5cbiAgX2lzSW5UcmFuc2FjdGlvbjogZmFsc2UsXG5cbiAgLyoqXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcmV0dXJuIHtBcnJheTxUcmFuc2FjdGlvbldyYXBwZXI+fSBBcnJheSBvZiB0cmFuc2FjdGlvbiB3cmFwcGVycy5cbiAgICovXG4gIGdldFRyYW5zYWN0aW9uV3JhcHBlcnM6IG51bGwsXG5cbiAgaXNJblRyYW5zYWN0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICEhdGhpcy5faXNJblRyYW5zYWN0aW9uO1xuICB9LFxuXG4gIC8qKlxuICAgKiBFeGVjdXRlcyB0aGUgZnVuY3Rpb24gd2l0aGluIGEgc2FmZXR5IHdpbmRvdy4gVXNlIHRoaXMgZm9yIHRoZSB0b3AgbGV2ZWxcbiAgICogbWV0aG9kcyB0aGF0IHJlc3VsdCBpbiBsYXJnZSBhbW91bnRzIG9mIGNvbXB1dGF0aW9uL211dGF0aW9ucyB0aGF0IHdvdWxkXG4gICAqIG5lZWQgdG8gYmUgc2FmZXR5IGNoZWNrZWQuIFRoZSBvcHRpb25hbCBhcmd1bWVudHMgaGVscHMgcHJldmVudCB0aGUgbmVlZFxuICAgKiB0byBiaW5kIGluIG1hbnkgY2FzZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IG1ldGhvZCBNZW1iZXIgb2Ygc2NvcGUgdG8gY2FsbC5cbiAgICogQHBhcmFtIHtPYmplY3R9IHNjb3BlIFNjb3BlIHRvIGludm9rZSBmcm9tLlxuICAgKiBAcGFyYW0ge09iamVjdD89fSBhIEFyZ3VtZW50IHRvIHBhc3MgdG8gdGhlIG1ldGhvZC5cbiAgICogQHBhcmFtIHtPYmplY3Q/PX0gYiBBcmd1bWVudCB0byBwYXNzIHRvIHRoZSBtZXRob2QuXG4gICAqIEBwYXJhbSB7T2JqZWN0Pz19IGMgQXJndW1lbnQgdG8gcGFzcyB0byB0aGUgbWV0aG9kLlxuICAgKiBAcGFyYW0ge09iamVjdD89fSBkIEFyZ3VtZW50IHRvIHBhc3MgdG8gdGhlIG1ldGhvZC5cbiAgICogQHBhcmFtIHtPYmplY3Q/PX0gZSBBcmd1bWVudCB0byBwYXNzIHRvIHRoZSBtZXRob2QuXG4gICAqIEBwYXJhbSB7T2JqZWN0Pz19IGYgQXJndW1lbnQgdG8gcGFzcyB0byB0aGUgbWV0aG9kLlxuICAgKlxuICAgKiBAcmV0dXJuIHsqfSBSZXR1cm4gdmFsdWUgZnJvbSBgbWV0aG9kYC5cbiAgICovXG4gIHBlcmZvcm06IGZ1bmN0aW9uIChtZXRob2QsIHNjb3BlLCBhLCBiLCBjLCBkLCBlLCBmKSB7XG4gICAgISF0aGlzLmlzSW5UcmFuc2FjdGlvbigpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1RyYW5zYWN0aW9uLnBlcmZvcm0oLi4uKTogQ2Fubm90IGluaXRpYWxpemUgYSB0cmFuc2FjdGlvbiB3aGVuIHRoZXJlICcgKyAnaXMgYWxyZWFkeSBhbiBvdXRzdGFuZGluZyB0cmFuc2FjdGlvbi4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgdmFyIGVycm9yVGhyb3duO1xuICAgIHZhciByZXQ7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuX2lzSW5UcmFuc2FjdGlvbiA9IHRydWU7XG4gICAgICAvLyBDYXRjaGluZyBlcnJvcnMgbWFrZXMgZGVidWdnaW5nIG1vcmUgZGlmZmljdWx0LCBzbyB3ZSBzdGFydCB3aXRoXG4gICAgICAvLyBlcnJvclRocm93biBzZXQgdG8gdHJ1ZSBiZWZvcmUgc2V0dGluZyBpdCB0byBmYWxzZSBhZnRlciBjYWxsaW5nXG4gICAgICAvLyBjbG9zZSAtLSBpZiBpdCdzIHN0aWxsIHNldCB0byB0cnVlIGluIHRoZSBmaW5hbGx5IGJsb2NrLCBpdCBtZWFuc1xuICAgICAgLy8gb25lIG9mIHRoZXNlIGNhbGxzIHRocmV3LlxuICAgICAgZXJyb3JUaHJvd24gPSB0cnVlO1xuICAgICAgdGhpcy5pbml0aWFsaXplQWxsKDApO1xuICAgICAgcmV0ID0gbWV0aG9kLmNhbGwoc2NvcGUsIGEsIGIsIGMsIGQsIGUsIGYpO1xuICAgICAgZXJyb3JUaHJvd24gPSBmYWxzZTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKGVycm9yVGhyb3duKSB7XG4gICAgICAgICAgLy8gSWYgYG1ldGhvZGAgdGhyb3dzLCBwcmVmZXIgdG8gc2hvdyB0aGF0IHN0YWNrIHRyYWNlIG92ZXIgYW55IHRocm93blxuICAgICAgICAgIC8vIGJ5IGludm9raW5nIGBjbG9zZUFsbGAuXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VBbGwoMCk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyKSB7fVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFNpbmNlIGBtZXRob2RgIGRpZG4ndCB0aHJvdywgd2UgZG9uJ3Qgd2FudCB0byBzaWxlbmNlIHRoZSBleGNlcHRpb25cbiAgICAgICAgICAvLyBoZXJlLlxuICAgICAgICAgIHRoaXMuY2xvc2VBbGwoMCk7XG4gICAgICAgIH1cbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHRoaXMuX2lzSW5UcmFuc2FjdGlvbiA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmV0O1xuICB9LFxuXG4gIGluaXRpYWxpemVBbGw6IGZ1bmN0aW9uIChzdGFydEluZGV4KSB7XG4gICAgdmFyIHRyYW5zYWN0aW9uV3JhcHBlcnMgPSB0aGlzLnRyYW5zYWN0aW9uV3JhcHBlcnM7XG4gICAgZm9yICh2YXIgaSA9IHN0YXJ0SW5kZXg7IGkgPCB0cmFuc2FjdGlvbldyYXBwZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgd3JhcHBlciA9IHRyYW5zYWN0aW9uV3JhcHBlcnNbaV07XG4gICAgICB0cnkge1xuICAgICAgICAvLyBDYXRjaGluZyBlcnJvcnMgbWFrZXMgZGVidWdnaW5nIG1vcmUgZGlmZmljdWx0LCBzbyB3ZSBzdGFydCB3aXRoIHRoZVxuICAgICAgICAvLyBPQlNFUlZFRF9FUlJPUiBzdGF0ZSBiZWZvcmUgb3ZlcndyaXRpbmcgaXQgd2l0aCB0aGUgcmVhbCByZXR1cm4gdmFsdWVcbiAgICAgICAgLy8gb2YgaW5pdGlhbGl6ZSAtLSBpZiBpdCdzIHN0aWxsIHNldCB0byBPQlNFUlZFRF9FUlJPUiBpbiB0aGUgZmluYWxseVxuICAgICAgICAvLyBibG9jaywgaXQgbWVhbnMgd3JhcHBlci5pbml0aWFsaXplIHRocmV3LlxuICAgICAgICB0aGlzLndyYXBwZXJJbml0RGF0YVtpXSA9IFRyYW5zYWN0aW9uLk9CU0VSVkVEX0VSUk9SO1xuICAgICAgICB0aGlzLndyYXBwZXJJbml0RGF0YVtpXSA9IHdyYXBwZXIuaW5pdGlhbGl6ZSA/IHdyYXBwZXIuaW5pdGlhbGl6ZS5jYWxsKHRoaXMpIDogbnVsbDtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGlmICh0aGlzLndyYXBwZXJJbml0RGF0YVtpXSA9PT0gVHJhbnNhY3Rpb24uT0JTRVJWRURfRVJST1IpIHtcbiAgICAgICAgICAvLyBUaGUgaW5pdGlhbGl6ZXIgZm9yIHdyYXBwZXIgaSB0aHJldyBhbiBlcnJvcjsgaW5pdGlhbGl6ZSB0aGVcbiAgICAgICAgICAvLyByZW1haW5pbmcgd3JhcHBlcnMgYnV0IHNpbGVuY2UgYW55IGV4Y2VwdGlvbnMgZnJvbSB0aGVtIHRvIGVuc3VyZVxuICAgICAgICAgIC8vIHRoYXQgdGhlIGZpcnN0IGVycm9yIGlzIHRoZSBvbmUgdG8gYnViYmxlIHVwLlxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVBbGwoaSArIDEpO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycikge31cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogSW52b2tlcyBlYWNoIG9mIGB0aGlzLnRyYW5zYWN0aW9uV3JhcHBlcnMuY2xvc2VbaV1gIGZ1bmN0aW9ucywgcGFzc2luZyBpbnRvXG4gICAqIHRoZW0gdGhlIHJlc3BlY3RpdmUgcmV0dXJuIHZhbHVlcyBvZiBgdGhpcy50cmFuc2FjdGlvbldyYXBwZXJzLmluaXRbaV1gXG4gICAqIChgY2xvc2VgcnMgdGhhdCBjb3JyZXNwb25kIHRvIGluaXRpYWxpemVycyB0aGF0IGZhaWxlZCB3aWxsIG5vdCBiZVxuICAgKiBpbnZva2VkKS5cbiAgICovXG4gIGNsb3NlQWxsOiBmdW5jdGlvbiAoc3RhcnRJbmRleCkge1xuICAgICF0aGlzLmlzSW5UcmFuc2FjdGlvbigpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1RyYW5zYWN0aW9uLmNsb3NlQWxsKCk6IENhbm5vdCBjbG9zZSB0cmFuc2FjdGlvbiB3aGVuIG5vbmUgYXJlIG9wZW4uJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIHZhciB0cmFuc2FjdGlvbldyYXBwZXJzID0gdGhpcy50cmFuc2FjdGlvbldyYXBwZXJzO1xuICAgIGZvciAodmFyIGkgPSBzdGFydEluZGV4OyBpIDwgdHJhbnNhY3Rpb25XcmFwcGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHdyYXBwZXIgPSB0cmFuc2FjdGlvbldyYXBwZXJzW2ldO1xuICAgICAgdmFyIGluaXREYXRhID0gdGhpcy53cmFwcGVySW5pdERhdGFbaV07XG4gICAgICB2YXIgZXJyb3JUaHJvd247XG4gICAgICB0cnkge1xuICAgICAgICAvLyBDYXRjaGluZyBlcnJvcnMgbWFrZXMgZGVidWdnaW5nIG1vcmUgZGlmZmljdWx0LCBzbyB3ZSBzdGFydCB3aXRoXG4gICAgICAgIC8vIGVycm9yVGhyb3duIHNldCB0byB0cnVlIGJlZm9yZSBzZXR0aW5nIGl0IHRvIGZhbHNlIGFmdGVyIGNhbGxpbmdcbiAgICAgICAgLy8gY2xvc2UgLS0gaWYgaXQncyBzdGlsbCBzZXQgdG8gdHJ1ZSBpbiB0aGUgZmluYWxseSBibG9jaywgaXQgbWVhbnNcbiAgICAgICAgLy8gd3JhcHBlci5jbG9zZSB0aHJldy5cbiAgICAgICAgZXJyb3JUaHJvd24gPSB0cnVlO1xuICAgICAgICBpZiAoaW5pdERhdGEgIT09IFRyYW5zYWN0aW9uLk9CU0VSVkVEX0VSUk9SICYmIHdyYXBwZXIuY2xvc2UpIHtcbiAgICAgICAgICB3cmFwcGVyLmNsb3NlLmNhbGwodGhpcywgaW5pdERhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGVycm9yVGhyb3duID0gZmFsc2U7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBpZiAoZXJyb3JUaHJvd24pIHtcbiAgICAgICAgICAvLyBUaGUgY2xvc2VyIGZvciB3cmFwcGVyIGkgdGhyZXcgYW4gZXJyb3I7IGNsb3NlIHRoZSByZW1haW5pbmdcbiAgICAgICAgICAvLyB3cmFwcGVycyBidXQgc2lsZW5jZSBhbnkgZXhjZXB0aW9ucyBmcm9tIHRoZW0gdG8gZW5zdXJlIHRoYXQgdGhlXG4gICAgICAgICAgLy8gZmlyc3QgZXJyb3IgaXMgdGhlIG9uZSB0byBidWJibGUgdXAuXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VBbGwoaSArIDEpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy53cmFwcGVySW5pdERhdGEubGVuZ3RoID0gMDtcbiAgfVxufTtcblxudmFyIFRyYW5zYWN0aW9uID0ge1xuXG4gIE1peGluOiBNaXhpbixcblxuICAvKipcbiAgICogVG9rZW4gdG8gbG9vayBmb3IgdG8gZGV0ZXJtaW5lIGlmIGFuIGVycm9yIG9jY3VycmVkLlxuICAgKi9cbiAgT0JTRVJWRURfRVJST1I6IHt9XG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gVHJhbnNhY3Rpb247XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0L2xpYi9UcmFuc2FjdGlvbi5qc1xuLy8gbW9kdWxlIGlkID0gNTdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGVtcHR5T2JqZWN0XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgZW1wdHlPYmplY3QgPSB7fTtcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgT2JqZWN0LmZyZWV6ZShlbXB0eU9iamVjdCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZW1wdHlPYmplY3Q7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2ZianMvbGliL2VtcHR5T2JqZWN0LmpzXG4vLyBtb2R1bGUgaWQgPSA1OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgY29udGFpbnNOb2RlXG4gKiBAdHlwZWNoZWNrc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGlzVGV4dE5vZGUgPSByZXF1aXJlKCcuL2lzVGV4dE5vZGUnKTtcblxuLyplc2xpbnQtZGlzYWJsZSBuby1iaXR3aXNlICovXG5cbi8qKlxuICogQ2hlY2tzIGlmIGEgZ2l2ZW4gRE9NIG5vZGUgY29udGFpbnMgb3IgaXMgYW5vdGhlciBET00gbm9kZS5cbiAqXG4gKiBAcGFyYW0gez9ET01Ob2RlfSBvdXRlck5vZGUgT3V0ZXIgRE9NIG5vZGUuXG4gKiBAcGFyYW0gez9ET01Ob2RlfSBpbm5lck5vZGUgSW5uZXIgRE9NIG5vZGUuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIGBvdXRlck5vZGVgIGNvbnRhaW5zIG9yIGlzIGBpbm5lck5vZGVgLlxuICovXG5mdW5jdGlvbiBjb250YWluc05vZGUoX3gsIF94Mikge1xuICB2YXIgX2FnYWluID0gdHJ1ZTtcblxuICBfZnVuY3Rpb246IHdoaWxlIChfYWdhaW4pIHtcbiAgICB2YXIgb3V0ZXJOb2RlID0gX3gsXG4gICAgICAgIGlubmVyTm9kZSA9IF94MjtcbiAgICBfYWdhaW4gPSBmYWxzZTtcblxuICAgIGlmICghb3V0ZXJOb2RlIHx8ICFpbm5lck5vZGUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKG91dGVyTm9kZSA9PT0gaW5uZXJOb2RlKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKGlzVGV4dE5vZGUob3V0ZXJOb2RlKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSBpZiAoaXNUZXh0Tm9kZShpbm5lck5vZGUpKSB7XG4gICAgICBfeCA9IG91dGVyTm9kZTtcbiAgICAgIF94MiA9IGlubmVyTm9kZS5wYXJlbnROb2RlO1xuICAgICAgX2FnYWluID0gdHJ1ZTtcbiAgICAgIGNvbnRpbnVlIF9mdW5jdGlvbjtcbiAgICB9IGVsc2UgaWYgKG91dGVyTm9kZS5jb250YWlucykge1xuICAgICAgcmV0dXJuIG91dGVyTm9kZS5jb250YWlucyhpbm5lck5vZGUpO1xuICAgIH0gZWxzZSBpZiAob3V0ZXJOb2RlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKSB7XG4gICAgICByZXR1cm4gISEob3V0ZXJOb2RlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGlubmVyTm9kZSkgJiAxNik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjb250YWluc05vZGU7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2ZianMvbGliL2NvbnRhaW5zTm9kZS5qc1xuLy8gbW9kdWxlIGlkID0gNTlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGlzVGV4dE5vZGVcbiAqIEB0eXBlY2hlY2tzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaXNOb2RlID0gcmVxdWlyZSgnLi9pc05vZGUnKTtcblxuLyoqXG4gKiBAcGFyYW0geyp9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGNoZWNrLlxuICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciBvciBub3QgdGhlIG9iamVjdCBpcyBhIERPTSB0ZXh0IG5vZGUuXG4gKi9cbmZ1bmN0aW9uIGlzVGV4dE5vZGUob2JqZWN0KSB7XG4gIHJldHVybiBpc05vZGUob2JqZWN0KSAmJiBvYmplY3Qubm9kZVR5cGUgPT0gMztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc1RleHROb2RlO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9mYmpzL2xpYi9pc1RleHROb2RlLmpzXG4vLyBtb2R1bGUgaWQgPSA2MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgaXNOb2RlXG4gKiBAdHlwZWNoZWNrc1xuICovXG5cbi8qKlxuICogQHBhcmFtIHsqfSBvYmplY3QgVGhlIG9iamVjdCB0byBjaGVjay5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgb3Igbm90IHRoZSBvYmplY3QgaXMgYSBET00gbm9kZS5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBpc05vZGUob2JqZWN0KSB7XG4gIHJldHVybiAhIShvYmplY3QgJiYgKHR5cGVvZiBOb2RlID09PSAnZnVuY3Rpb24nID8gb2JqZWN0IGluc3RhbmNlb2YgTm9kZSA6IHR5cGVvZiBvYmplY3QgPT09ICdvYmplY3QnICYmIHR5cGVvZiBvYmplY3Qubm9kZVR5cGUgPT09ICdudW1iZXInICYmIHR5cGVvZiBvYmplY3Qubm9kZU5hbWUgPT09ICdzdHJpbmcnKSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNOb2RlO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9mYmpzL2xpYi9pc05vZGUuanNcbi8vIG1vZHVsZSBpZCA9IDYxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBpbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50XG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0Q29tcG9zaXRlQ29tcG9uZW50ID0gcmVxdWlyZSgnLi9SZWFjdENvbXBvc2l0ZUNvbXBvbmVudCcpO1xudmFyIFJlYWN0RW1wdHlDb21wb25lbnQgPSByZXF1aXJlKCcuL1JlYWN0RW1wdHlDb21wb25lbnQnKTtcbnZhciBSZWFjdE5hdGl2ZUNvbXBvbmVudCA9IHJlcXVpcmUoJy4vUmVhY3ROYXRpdmVDb21wb25lbnQnKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbi8vIFRvIGF2b2lkIGEgY3ljbGljIGRlcGVuZGVuY3ksIHdlIGNyZWF0ZSB0aGUgZmluYWwgY2xhc3MgaW4gdGhpcyBtb2R1bGVcbnZhciBSZWFjdENvbXBvc2l0ZUNvbXBvbmVudFdyYXBwZXIgPSBmdW5jdGlvbiAoKSB7fTtcbmFzc2lnbihSZWFjdENvbXBvc2l0ZUNvbXBvbmVudFdyYXBwZXIucHJvdG90eXBlLCBSZWFjdENvbXBvc2l0ZUNvbXBvbmVudC5NaXhpbiwge1xuICBfaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudDogaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudFxufSk7XG5cbmZ1bmN0aW9uIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShvd25lcikge1xuICBpZiAob3duZXIpIHtcbiAgICB2YXIgbmFtZSA9IG93bmVyLmdldE5hbWUoKTtcbiAgICBpZiAobmFtZSkge1xuICAgICAgcmV0dXJuICcgQ2hlY2sgdGhlIHJlbmRlciBtZXRob2Qgb2YgYCcgKyBuYW1lICsgJ2AuJztcbiAgICB9XG4gIH1cbiAgcmV0dXJuICcnO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIHRoZSB0eXBlIHJlZmVyZW5jZSBpcyBhIGtub3duIGludGVybmFsIHR5cGUuIEkuZS4gbm90IGEgdXNlclxuICogcHJvdmlkZWQgY29tcG9zaXRlIHR5cGUuXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbn0gdHlwZVxuICogQHJldHVybiB7Ym9vbGVhbn0gUmV0dXJucyB0cnVlIGlmIHRoaXMgaXMgYSB2YWxpZCBpbnRlcm5hbCB0eXBlLlxuICovXG5mdW5jdGlvbiBpc0ludGVybmFsQ29tcG9uZW50VHlwZSh0eXBlKSB7XG4gIHJldHVybiB0eXBlb2YgdHlwZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgdHlwZS5wcm90b3R5cGUgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiB0eXBlLnByb3RvdHlwZS5tb3VudENvbXBvbmVudCA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgdHlwZS5wcm90b3R5cGUucmVjZWl2ZUNvbXBvbmVudCA9PT0gJ2Z1bmN0aW9uJztcbn1cblxuLyoqXG4gKiBHaXZlbiBhIFJlYWN0Tm9kZSwgY3JlYXRlIGFuIGluc3RhbmNlIHRoYXQgd2lsbCBhY3R1YWxseSBiZSBtb3VudGVkLlxuICpcbiAqIEBwYXJhbSB7UmVhY3ROb2RlfSBub2RlXG4gKiBAcmV0dXJuIHtvYmplY3R9IEEgbmV3IGluc3RhbmNlIG9mIHRoZSBlbGVtZW50J3MgY29uc3RydWN0b3IuXG4gKiBAcHJvdGVjdGVkXG4gKi9cbmZ1bmN0aW9uIGluc3RhbnRpYXRlUmVhY3RDb21wb25lbnQobm9kZSkge1xuICB2YXIgaW5zdGFuY2U7XG5cbiAgaWYgKG5vZGUgPT09IG51bGwgfHwgbm9kZSA9PT0gZmFsc2UpIHtcbiAgICBpbnN0YW5jZSA9IG5ldyBSZWFjdEVtcHR5Q29tcG9uZW50KGluc3RhbnRpYXRlUmVhY3RDb21wb25lbnQpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBub2RlID09PSAnb2JqZWN0Jykge1xuICAgIHZhciBlbGVtZW50ID0gbm9kZTtcbiAgICAhKGVsZW1lbnQgJiYgKHR5cGVvZiBlbGVtZW50LnR5cGUgPT09ICdmdW5jdGlvbicgfHwgdHlwZW9mIGVsZW1lbnQudHlwZSA9PT0gJ3N0cmluZycpKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdFbGVtZW50IHR5cGUgaXMgaW52YWxpZDogZXhwZWN0ZWQgYSBzdHJpbmcgKGZvciBidWlsdC1pbiBjb21wb25lbnRzKSAnICsgJ29yIGEgY2xhc3MvZnVuY3Rpb24gKGZvciBjb21wb3NpdGUgY29tcG9uZW50cykgYnV0IGdvdDogJXMuJXMnLCBlbGVtZW50LnR5cGUgPT0gbnVsbCA/IGVsZW1lbnQudHlwZSA6IHR5cGVvZiBlbGVtZW50LnR5cGUsIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShlbGVtZW50Ll9vd25lcikpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIC8vIFNwZWNpYWwgY2FzZSBzdHJpbmcgdmFsdWVzXG4gICAgaWYgKHR5cGVvZiBlbGVtZW50LnR5cGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICBpbnN0YW5jZSA9IFJlYWN0TmF0aXZlQ29tcG9uZW50LmNyZWF0ZUludGVybmFsQ29tcG9uZW50KGVsZW1lbnQpO1xuICAgIH0gZWxzZSBpZiAoaXNJbnRlcm5hbENvbXBvbmVudFR5cGUoZWxlbWVudC50eXBlKSkge1xuICAgICAgLy8gVGhpcyBpcyB0ZW1wb3JhcmlseSBhdmFpbGFibGUgZm9yIGN1c3RvbSBjb21wb25lbnRzIHRoYXQgYXJlIG5vdCBzdHJpbmdcbiAgICAgIC8vIHJlcHJlc2VudGF0aW9ucy4gSS5lLiBBUlQuIE9uY2UgdGhvc2UgYXJlIHVwZGF0ZWQgdG8gdXNlIHRoZSBzdHJpbmdcbiAgICAgIC8vIHJlcHJlc2VudGF0aW9uLCB3ZSBjYW4gZHJvcCB0aGlzIGNvZGUgcGF0aC5cbiAgICAgIGluc3RhbmNlID0gbmV3IGVsZW1lbnQudHlwZShlbGVtZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgaW5zdGFuY2UgPSBuZXcgUmVhY3RDb21wb3NpdGVDb21wb25lbnRXcmFwcGVyKCk7XG4gICAgfVxuICB9IGVsc2UgaWYgKHR5cGVvZiBub2RlID09PSAnc3RyaW5nJyB8fCB0eXBlb2Ygbm9kZSA9PT0gJ251bWJlcicpIHtcbiAgICBpbnN0YW5jZSA9IFJlYWN0TmF0aXZlQ29tcG9uZW50LmNyZWF0ZUluc3RhbmNlRm9yVGV4dChub2RlKTtcbiAgfSBlbHNlIHtcbiAgICAhZmFsc2UgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRW5jb3VudGVyZWQgaW52YWxpZCBSZWFjdCBub2RlIG9mIHR5cGUgJXMnLCB0eXBlb2Ygbm9kZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICB9XG5cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyh0eXBlb2YgaW5zdGFuY2UuY29uc3RydWN0ID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBpbnN0YW5jZS5tb3VudENvbXBvbmVudCA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgaW5zdGFuY2UucmVjZWl2ZUNvbXBvbmVudCA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgaW5zdGFuY2UudW5tb3VudENvbXBvbmVudCA9PT0gJ2Z1bmN0aW9uJywgJ09ubHkgUmVhY3QgQ29tcG9uZW50cyBjYW4gYmUgbW91bnRlZC4nKSA6IHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8vIFNldHMgdXAgdGhlIGluc3RhbmNlLiBUaGlzIGNhbiBwcm9iYWJseSBqdXN0IG1vdmUgaW50byB0aGUgY29uc3RydWN0b3Igbm93LlxuICBpbnN0YW5jZS5jb25zdHJ1Y3Qobm9kZSk7XG5cbiAgLy8gVGhlc2UgdHdvIGZpZWxkcyBhcmUgdXNlZCBieSB0aGUgRE9NIGFuZCBBUlQgZGlmZmluZyBhbGdvcml0aG1zXG4gIC8vIHJlc3BlY3RpdmVseS4gSW5zdGVhZCBvZiB1c2luZyBleHBhbmRvcyBvbiBjb21wb25lbnRzLCB3ZSBzaG91bGQgYmVcbiAgLy8gc3RvcmluZyB0aGUgc3RhdGUgbmVlZGVkIGJ5IHRoZSBkaWZmaW5nIGFsZ29yaXRobXMgZWxzZXdoZXJlLlxuICBpbnN0YW5jZS5fbW91bnRJbmRleCA9IDA7XG4gIGluc3RhbmNlLl9tb3VudEltYWdlID0gbnVsbDtcblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGluc3RhbmNlLl9pc093bmVyTmVjZXNzYXJ5ID0gZmFsc2U7XG4gICAgaW5zdGFuY2UuX3dhcm5lZEFib3V0UmVmc0luUmVuZGVyID0gZmFsc2U7XG4gIH1cblxuICAvLyBJbnRlcm5hbCBpbnN0YW5jZXMgc2hvdWxkIGZ1bGx5IGNvbnN0cnVjdGVkIGF0IHRoaXMgcG9pbnQsIHNvIHRoZXkgc2hvdWxkXG4gIC8vIG5vdCBnZXQgYW55IG5ldyBmaWVsZHMgYWRkZWQgdG8gdGhlbSBhdCB0aGlzIHBvaW50LlxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGlmIChPYmplY3QucHJldmVudEV4dGVuc2lvbnMpIHtcbiAgICAgIE9iamVjdC5wcmV2ZW50RXh0ZW5zaW9ucyhpbnN0YW5jZSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGluc3RhbmNlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGluc3RhbnRpYXRlUmVhY3RDb21wb25lbnQ7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0L2xpYi9pbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50LmpzXG4vLyBtb2R1bGUgaWQgPSA2MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RDb21wb3NpdGVDb21wb25lbnRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdENvbXBvbmVudEVudmlyb25tZW50ID0gcmVxdWlyZSgnLi9SZWFjdENvbXBvbmVudEVudmlyb25tZW50Jyk7XG52YXIgUmVhY3RDdXJyZW50T3duZXIgPSByZXF1aXJlKCcuL1JlYWN0Q3VycmVudE93bmVyJyk7XG52YXIgUmVhY3RFbGVtZW50ID0gcmVxdWlyZSgnLi9SZWFjdEVsZW1lbnQnKTtcbnZhciBSZWFjdEluc3RhbmNlTWFwID0gcmVxdWlyZSgnLi9SZWFjdEluc3RhbmNlTWFwJyk7XG52YXIgUmVhY3RQZXJmID0gcmVxdWlyZSgnLi9SZWFjdFBlcmYnKTtcbnZhciBSZWFjdFByb3BUeXBlTG9jYXRpb25zID0gcmVxdWlyZSgnLi9SZWFjdFByb3BUeXBlTG9jYXRpb25zJyk7XG52YXIgUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXMgPSByZXF1aXJlKCcuL1JlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzJyk7XG52YXIgUmVhY3RSZWNvbmNpbGVyID0gcmVxdWlyZSgnLi9SZWFjdFJlY29uY2lsZXInKTtcbnZhciBSZWFjdFVwZGF0ZVF1ZXVlID0gcmVxdWlyZSgnLi9SZWFjdFVwZGF0ZVF1ZXVlJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBlbXB0eU9iamVjdCA9IHJlcXVpcmUoJ2ZianMvbGliL2VtcHR5T2JqZWN0Jyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG52YXIgc2hvdWxkVXBkYXRlUmVhY3RDb21wb25lbnQgPSByZXF1aXJlKCcuL3Nob3VsZFVwZGF0ZVJlYWN0Q29tcG9uZW50Jyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxuZnVuY3Rpb24gZ2V0RGVjbGFyYXRpb25FcnJvckFkZGVuZHVtKGNvbXBvbmVudCkge1xuICB2YXIgb3duZXIgPSBjb21wb25lbnQuX2N1cnJlbnRFbGVtZW50Ll9vd25lciB8fCBudWxsO1xuICBpZiAob3duZXIpIHtcbiAgICB2YXIgbmFtZSA9IG93bmVyLmdldE5hbWUoKTtcbiAgICBpZiAobmFtZSkge1xuICAgICAgcmV0dXJuICcgQ2hlY2sgdGhlIHJlbmRlciBtZXRob2Qgb2YgYCcgKyBuYW1lICsgJ2AuJztcbiAgICB9XG4gIH1cbiAgcmV0dXJuICcnO1xufVxuXG5mdW5jdGlvbiBTdGF0ZWxlc3NDb21wb25lbnQoQ29tcG9uZW50KSB7fVxuU3RhdGVsZXNzQ29tcG9uZW50LnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBDb21wb25lbnQgPSBSZWFjdEluc3RhbmNlTWFwLmdldCh0aGlzKS5fY3VycmVudEVsZW1lbnQudHlwZTtcbiAgcmV0dXJuIENvbXBvbmVudCh0aGlzLnByb3BzLCB0aGlzLmNvbnRleHQsIHRoaXMudXBkYXRlcik7XG59O1xuXG4vKipcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLSBUaGUgTGlmZS1DeWNsZSBvZiBhIENvbXBvc2l0ZSBDb21wb25lbnQgLS0tLS0tLS0tLS0tLS0tLS0tXG4gKlxuICogLSBjb25zdHJ1Y3RvcjogSW5pdGlhbGl6YXRpb24gb2Ygc3RhdGUuIFRoZSBpbnN0YW5jZSBpcyBub3cgcmV0YWluZWQuXG4gKiAgIC0gY29tcG9uZW50V2lsbE1vdW50XG4gKiAgIC0gcmVuZGVyXG4gKiAgIC0gW2NoaWxkcmVuJ3MgY29uc3RydWN0b3JzXVxuICogICAgIC0gW2NoaWxkcmVuJ3MgY29tcG9uZW50V2lsbE1vdW50IGFuZCByZW5kZXJdXG4gKiAgICAgLSBbY2hpbGRyZW4ncyBjb21wb25lbnREaWRNb3VudF1cbiAqICAgICAtIGNvbXBvbmVudERpZE1vdW50XG4gKlxuICogICAgICAgVXBkYXRlIFBoYXNlczpcbiAqICAgICAgIC0gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyAob25seSBjYWxsZWQgaWYgcGFyZW50IHVwZGF0ZWQpXG4gKiAgICAgICAtIHNob3VsZENvbXBvbmVudFVwZGF0ZVxuICogICAgICAgICAtIGNvbXBvbmVudFdpbGxVcGRhdGVcbiAqICAgICAgICAgICAtIHJlbmRlclxuICogICAgICAgICAgIC0gW2NoaWxkcmVuJ3MgY29uc3RydWN0b3JzIG9yIHJlY2VpdmUgcHJvcHMgcGhhc2VzXVxuICogICAgICAgICAtIGNvbXBvbmVudERpZFVwZGF0ZVxuICpcbiAqICAgICAtIGNvbXBvbmVudFdpbGxVbm1vdW50XG4gKiAgICAgLSBbY2hpbGRyZW4ncyBjb21wb25lbnRXaWxsVW5tb3VudF1cbiAqICAgLSBbY2hpbGRyZW4gZGVzdHJveWVkXVxuICogLSAoZGVzdHJveWVkKTogVGhlIGluc3RhbmNlIGlzIG5vdyBibGFuaywgcmVsZWFzZWQgYnkgUmVhY3QgYW5kIHJlYWR5IGZvciBHQy5cbiAqXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICovXG5cbi8qKlxuICogQW4gaW5jcmVtZW50aW5nIElEIGFzc2lnbmVkIHRvIGVhY2ggY29tcG9uZW50IHdoZW4gaXQgaXMgbW91bnRlZC4gVGhpcyBpc1xuICogdXNlZCB0byBlbmZvcmNlIHRoZSBvcmRlciBpbiB3aGljaCBgUmVhY3RVcGRhdGVzYCB1cGRhdGVzIGRpcnR5IGNvbXBvbmVudHMuXG4gKlxuICogQHByaXZhdGVcbiAqL1xudmFyIG5leHRNb3VudElEID0gMTtcblxuLyoqXG4gKiBAbGVuZHMge1JlYWN0Q29tcG9zaXRlQ29tcG9uZW50LnByb3RvdHlwZX1cbiAqL1xudmFyIFJlYWN0Q29tcG9zaXRlQ29tcG9uZW50TWl4aW4gPSB7XG5cbiAgLyoqXG4gICAqIEJhc2UgY29uc3RydWN0b3IgZm9yIGFsbCBjb21wb3NpdGUgY29tcG9uZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0RWxlbWVudH0gZWxlbWVudFxuICAgKiBAZmluYWxcbiAgICogQGludGVybmFsXG4gICAqL1xuICBjb25zdHJ1Y3Q6IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgdGhpcy5fY3VycmVudEVsZW1lbnQgPSBlbGVtZW50O1xuICAgIHRoaXMuX3Jvb3ROb2RlSUQgPSBudWxsO1xuICAgIHRoaXMuX2luc3RhbmNlID0gbnVsbDtcblxuICAgIC8vIFNlZSBSZWFjdFVwZGF0ZVF1ZXVlXG4gICAgdGhpcy5fcGVuZGluZ0VsZW1lbnQgPSBudWxsO1xuICAgIHRoaXMuX3BlbmRpbmdTdGF0ZVF1ZXVlID0gbnVsbDtcbiAgICB0aGlzLl9wZW5kaW5nUmVwbGFjZVN0YXRlID0gZmFsc2U7XG4gICAgdGhpcy5fcGVuZGluZ0ZvcmNlVXBkYXRlID0gZmFsc2U7XG5cbiAgICB0aGlzLl9yZW5kZXJlZENvbXBvbmVudCA9IG51bGw7XG5cbiAgICB0aGlzLl9jb250ZXh0ID0gbnVsbDtcbiAgICB0aGlzLl9tb3VudE9yZGVyID0gMDtcbiAgICB0aGlzLl90b3BMZXZlbFdyYXBwZXIgPSBudWxsO1xuXG4gICAgLy8gU2VlIFJlYWN0VXBkYXRlcyBhbmQgUmVhY3RVcGRhdGVRdWV1ZS5cbiAgICB0aGlzLl9wZW5kaW5nQ2FsbGJhY2tzID0gbnVsbDtcbiAgfSxcblxuICAvKipcbiAgICogSW5pdGlhbGl6ZXMgdGhlIGNvbXBvbmVudCwgcmVuZGVycyBtYXJrdXAsIGFuZCByZWdpc3RlcnMgZXZlbnQgbGlzdGVuZXJzLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcm9vdElEIERPTSBJRCBvZiB0aGUgcm9vdCBub2RlLlxuICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb258UmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICogQHJldHVybiB7P3N0cmluZ30gUmVuZGVyZWQgbWFya3VwIHRvIGJlIGluc2VydGVkIGludG8gdGhlIERPTS5cbiAgICogQGZpbmFsXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgbW91bnRDb21wb25lbnQ6IGZ1bmN0aW9uIChyb290SUQsIHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG4gICAgdGhpcy5fY29udGV4dCA9IGNvbnRleHQ7XG4gICAgdGhpcy5fbW91bnRPcmRlciA9IG5leHRNb3VudElEKys7XG4gICAgdGhpcy5fcm9vdE5vZGVJRCA9IHJvb3RJRDtcblxuICAgIHZhciBwdWJsaWNQcm9wcyA9IHRoaXMuX3Byb2Nlc3NQcm9wcyh0aGlzLl9jdXJyZW50RWxlbWVudC5wcm9wcyk7XG4gICAgdmFyIHB1YmxpY0NvbnRleHQgPSB0aGlzLl9wcm9jZXNzQ29udGV4dChjb250ZXh0KTtcblxuICAgIHZhciBDb21wb25lbnQgPSB0aGlzLl9jdXJyZW50RWxlbWVudC50eXBlO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSB0aGUgcHVibGljIGNsYXNzXG4gICAgdmFyIGluc3Q7XG4gICAgdmFyIHJlbmRlcmVkRWxlbWVudDtcblxuICAgIC8vIFRoaXMgaXMgYSB3YXkgdG8gZGV0ZWN0IGlmIENvbXBvbmVudCBpcyBhIHN0YXRlbGVzcyBhcnJvdyBmdW5jdGlvblxuICAgIC8vIGNvbXBvbmVudCwgd2hpY2ggaXMgbm90IG5ld2FibGUuIEl0IG1pZ2h0IG5vdCBiZSAxMDAlIHJlbGlhYmxlIGJ1dCBpc1xuICAgIC8vIHNvbWV0aGluZyB3ZSBjYW4gZG8gdW50aWwgd2Ugc3RhcnQgZGV0ZWN0aW5nIHRoYXQgQ29tcG9uZW50IGV4dGVuZHNcbiAgICAvLyBSZWFjdC5Db21wb25lbnQuIFdlIGFscmVhZHkgYXNzdW1lIHRoYXQgdHlwZW9mIENvbXBvbmVudCA9PT0gJ2Z1bmN0aW9uJy5cbiAgICB2YXIgY2FuSW5zdGFudGlhdGUgPSAoJ3Byb3RvdHlwZScgaW4gQ29tcG9uZW50KTtcblxuICAgIGlmIChjYW5JbnN0YW50aWF0ZSkge1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgUmVhY3RDdXJyZW50T3duZXIuY3VycmVudCA9IHRoaXM7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaW5zdCA9IG5ldyBDb21wb25lbnQocHVibGljUHJvcHMsIHB1YmxpY0NvbnRleHQsIFJlYWN0VXBkYXRlUXVldWUpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgIFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbnN0ID0gbmV3IENvbXBvbmVudChwdWJsaWNQcm9wcywgcHVibGljQ29udGV4dCwgUmVhY3RVcGRhdGVRdWV1ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFjYW5JbnN0YW50aWF0ZSB8fCBpbnN0ID09PSBudWxsIHx8IGluc3QgPT09IGZhbHNlIHx8IFJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChpbnN0KSkge1xuICAgICAgcmVuZGVyZWRFbGVtZW50ID0gaW5zdDtcbiAgICAgIGluc3QgPSBuZXcgU3RhdGVsZXNzQ29tcG9uZW50KENvbXBvbmVudCk7XG4gICAgfVxuXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIC8vIFRoaXMgd2lsbCB0aHJvdyBsYXRlciBpbiBfcmVuZGVyVmFsaWRhdGVkQ29tcG9uZW50LCBidXQgYWRkIGFuIGVhcmx5XG4gICAgICAvLyB3YXJuaW5nIG5vdyB0byBoZWxwIGRlYnVnZ2luZ1xuICAgICAgaWYgKGluc3QucmVuZGVyID09IG51bGwpIHtcbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICclcyguLi4pOiBObyBgcmVuZGVyYCBtZXRob2QgZm91bmQgb24gdGhlIHJldHVybmVkIGNvbXBvbmVudCAnICsgJ2luc3RhbmNlOiB5b3UgbWF5IGhhdmUgZm9yZ290dGVuIHRvIGRlZmluZSBgcmVuZGVyYCwgcmV0dXJuZWQgJyArICdudWxsL2ZhbHNlIGZyb20gYSBzdGF0ZWxlc3MgY29tcG9uZW50LCBvciB0cmllZCB0byByZW5kZXIgYW4gJyArICdlbGVtZW50IHdob3NlIHR5cGUgaXMgYSBmdW5jdGlvbiB0aGF0IGlzblxcJ3QgYSBSZWFjdCBjb21wb25lbnQuJywgQ29tcG9uZW50LmRpc3BsYXlOYW1lIHx8IENvbXBvbmVudC5uYW1lIHx8ICdDb21wb25lbnQnKSA6IHVuZGVmaW5lZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFdlIHN1cHBvcnQgRVM2IGluaGVyaXRpbmcgZnJvbSBSZWFjdC5Db21wb25lbnQsIHRoZSBtb2R1bGUgcGF0dGVybixcbiAgICAgICAgLy8gYW5kIHN0YXRlbGVzcyBjb21wb25lbnRzLCBidXQgbm90IEVTNiBjbGFzc2VzIHRoYXQgZG9uJ3QgZXh0ZW5kXG4gICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKENvbXBvbmVudC5wcm90b3R5cGUgJiYgQ29tcG9uZW50LnByb3RvdHlwZS5pc1JlYWN0Q29tcG9uZW50IHx8ICFjYW5JbnN0YW50aWF0ZSB8fCAhKGluc3QgaW5zdGFuY2VvZiBDb21wb25lbnQpLCAnJXMoLi4uKTogUmVhY3QgY29tcG9uZW50IGNsYXNzZXMgbXVzdCBleHRlbmQgUmVhY3QuQ29tcG9uZW50LicsIENvbXBvbmVudC5kaXNwbGF5TmFtZSB8fCBDb21wb25lbnQubmFtZSB8fCAnQ29tcG9uZW50JykgOiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVGhlc2Ugc2hvdWxkIGJlIHNldCB1cCBpbiB0aGUgY29uc3RydWN0b3IsIGJ1dCBhcyBhIGNvbnZlbmllbmNlIGZvclxuICAgIC8vIHNpbXBsZXIgY2xhc3MgYWJzdHJhY3Rpb25zLCB3ZSBzZXQgdGhlbSB1cCBhZnRlciB0aGUgZmFjdC5cbiAgICBpbnN0LnByb3BzID0gcHVibGljUHJvcHM7XG4gICAgaW5zdC5jb250ZXh0ID0gcHVibGljQ29udGV4dDtcbiAgICBpbnN0LnJlZnMgPSBlbXB0eU9iamVjdDtcbiAgICBpbnN0LnVwZGF0ZXIgPSBSZWFjdFVwZGF0ZVF1ZXVlO1xuXG4gICAgdGhpcy5faW5zdGFuY2UgPSBpbnN0O1xuXG4gICAgLy8gU3RvcmUgYSByZWZlcmVuY2UgZnJvbSB0aGUgaW5zdGFuY2UgYmFjayB0byB0aGUgaW50ZXJuYWwgcmVwcmVzZW50YXRpb25cbiAgICBSZWFjdEluc3RhbmNlTWFwLnNldChpbnN0LCB0aGlzKTtcblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAvLyBTaW5jZSBwbGFpbiBKUyBjbGFzc2VzIGFyZSBkZWZpbmVkIHdpdGhvdXQgYW55IHNwZWNpYWwgaW5pdGlhbGl6YXRpb25cbiAgICAgIC8vIGxvZ2ljLCB3ZSBjYW4gbm90IGNhdGNoIGNvbW1vbiBlcnJvcnMgZWFybHkuIFRoZXJlZm9yZSwgd2UgaGF2ZSB0b1xuICAgICAgLy8gY2F0Y2ggdGhlbSBoZXJlLCBhdCBpbml0aWFsaXphdGlvbiB0aW1lLCBpbnN0ZWFkLlxuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoIWluc3QuZ2V0SW5pdGlhbFN0YXRlIHx8IGluc3QuZ2V0SW5pdGlhbFN0YXRlLmlzUmVhY3RDbGFzc0FwcHJvdmVkLCAnZ2V0SW5pdGlhbFN0YXRlIHdhcyBkZWZpbmVkIG9uICVzLCBhIHBsYWluIEphdmFTY3JpcHQgY2xhc3MuICcgKyAnVGhpcyBpcyBvbmx5IHN1cHBvcnRlZCBmb3IgY2xhc3NlcyBjcmVhdGVkIHVzaW5nIFJlYWN0LmNyZWF0ZUNsYXNzLiAnICsgJ0RpZCB5b3UgbWVhbiB0byBkZWZpbmUgYSBzdGF0ZSBwcm9wZXJ0eSBpbnN0ZWFkPycsIHRoaXMuZ2V0TmFtZSgpIHx8ICdhIGNvbXBvbmVudCcpIDogdW5kZWZpbmVkO1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoIWluc3QuZ2V0RGVmYXVsdFByb3BzIHx8IGluc3QuZ2V0RGVmYXVsdFByb3BzLmlzUmVhY3RDbGFzc0FwcHJvdmVkLCAnZ2V0RGVmYXVsdFByb3BzIHdhcyBkZWZpbmVkIG9uICVzLCBhIHBsYWluIEphdmFTY3JpcHQgY2xhc3MuICcgKyAnVGhpcyBpcyBvbmx5IHN1cHBvcnRlZCBmb3IgY2xhc3NlcyBjcmVhdGVkIHVzaW5nIFJlYWN0LmNyZWF0ZUNsYXNzLiAnICsgJ1VzZSBhIHN0YXRpYyBwcm9wZXJ0eSB0byBkZWZpbmUgZGVmYXVsdFByb3BzIGluc3RlYWQuJywgdGhpcy5nZXROYW1lKCkgfHwgJ2EgY29tcG9uZW50JykgOiB1bmRlZmluZWQ7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyghaW5zdC5wcm9wVHlwZXMsICdwcm9wVHlwZXMgd2FzIGRlZmluZWQgYXMgYW4gaW5zdGFuY2UgcHJvcGVydHkgb24gJXMuIFVzZSBhIHN0YXRpYyAnICsgJ3Byb3BlcnR5IHRvIGRlZmluZSBwcm9wVHlwZXMgaW5zdGVhZC4nLCB0aGlzLmdldE5hbWUoKSB8fCAnYSBjb21wb25lbnQnKSA6IHVuZGVmaW5lZDtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKCFpbnN0LmNvbnRleHRUeXBlcywgJ2NvbnRleHRUeXBlcyB3YXMgZGVmaW5lZCBhcyBhbiBpbnN0YW5jZSBwcm9wZXJ0eSBvbiAlcy4gVXNlIGEgJyArICdzdGF0aWMgcHJvcGVydHkgdG8gZGVmaW5lIGNvbnRleHRUeXBlcyBpbnN0ZWFkLicsIHRoaXMuZ2V0TmFtZSgpIHx8ICdhIGNvbXBvbmVudCcpIDogdW5kZWZpbmVkO1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcodHlwZW9mIGluc3QuY29tcG9uZW50U2hvdWxkVXBkYXRlICE9PSAnZnVuY3Rpb24nLCAnJXMgaGFzIGEgbWV0aG9kIGNhbGxlZCAnICsgJ2NvbXBvbmVudFNob3VsZFVwZGF0ZSgpLiBEaWQgeW91IG1lYW4gc2hvdWxkQ29tcG9uZW50VXBkYXRlKCk/ICcgKyAnVGhlIG5hbWUgaXMgcGhyYXNlZCBhcyBhIHF1ZXN0aW9uIGJlY2F1c2UgdGhlIGZ1bmN0aW9uIGlzICcgKyAnZXhwZWN0ZWQgdG8gcmV0dXJuIGEgdmFsdWUuJywgdGhpcy5nZXROYW1lKCkgfHwgJ0EgY29tcG9uZW50JykgOiB1bmRlZmluZWQ7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyh0eXBlb2YgaW5zdC5jb21wb25lbnREaWRVbm1vdW50ICE9PSAnZnVuY3Rpb24nLCAnJXMgaGFzIGEgbWV0aG9kIGNhbGxlZCAnICsgJ2NvbXBvbmVudERpZFVubW91bnQoKS4gQnV0IHRoZXJlIGlzIG5vIHN1Y2ggbGlmZWN5Y2xlIG1ldGhvZC4gJyArICdEaWQgeW91IG1lYW4gY29tcG9uZW50V2lsbFVubW91bnQoKT8nLCB0aGlzLmdldE5hbWUoKSB8fCAnQSBjb21wb25lbnQnKSA6IHVuZGVmaW5lZDtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKHR5cGVvZiBpbnN0LmNvbXBvbmVudFdpbGxSZWNpZXZlUHJvcHMgIT09ICdmdW5jdGlvbicsICclcyBoYXMgYSBtZXRob2QgY2FsbGVkICcgKyAnY29tcG9uZW50V2lsbFJlY2lldmVQcm9wcygpLiBEaWQgeW91IG1lYW4gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcygpPycsIHRoaXMuZ2V0TmFtZSgpIHx8ICdBIGNvbXBvbmVudCcpIDogdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHZhciBpbml0aWFsU3RhdGUgPSBpbnN0LnN0YXRlO1xuICAgIGlmIChpbml0aWFsU3RhdGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgaW5zdC5zdGF0ZSA9IGluaXRpYWxTdGF0ZSA9IG51bGw7XG4gICAgfVxuICAgICEodHlwZW9mIGluaXRpYWxTdGF0ZSA9PT0gJ29iamVjdCcgJiYgIUFycmF5LmlzQXJyYXkoaW5pdGlhbFN0YXRlKSkgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnJXMuc3RhdGU6IG11c3QgYmUgc2V0IHRvIGFuIG9iamVjdCBvciBudWxsJywgdGhpcy5nZXROYW1lKCkgfHwgJ1JlYWN0Q29tcG9zaXRlQ29tcG9uZW50JykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgdGhpcy5fcGVuZGluZ1N0YXRlUXVldWUgPSBudWxsO1xuICAgIHRoaXMuX3BlbmRpbmdSZXBsYWNlU3RhdGUgPSBmYWxzZTtcbiAgICB0aGlzLl9wZW5kaW5nRm9yY2VVcGRhdGUgPSBmYWxzZTtcblxuICAgIGlmIChpbnN0LmNvbXBvbmVudFdpbGxNb3VudCkge1xuICAgICAgaW5zdC5jb21wb25lbnRXaWxsTW91bnQoKTtcbiAgICAgIC8vIFdoZW4gbW91bnRpbmcsIGNhbGxzIHRvIGBzZXRTdGF0ZWAgYnkgYGNvbXBvbmVudFdpbGxNb3VudGAgd2lsbCBzZXRcbiAgICAgIC8vIGB0aGlzLl9wZW5kaW5nU3RhdGVRdWV1ZWAgd2l0aG91dCB0cmlnZ2VyaW5nIGEgcmUtcmVuZGVyLlxuICAgICAgaWYgKHRoaXMuX3BlbmRpbmdTdGF0ZVF1ZXVlKSB7XG4gICAgICAgIGluc3Quc3RhdGUgPSB0aGlzLl9wcm9jZXNzUGVuZGluZ1N0YXRlKGluc3QucHJvcHMsIGluc3QuY29udGV4dCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSWYgbm90IGEgc3RhdGVsZXNzIGNvbXBvbmVudCwgd2Ugbm93IHJlbmRlclxuICAgIGlmIChyZW5kZXJlZEVsZW1lbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmVuZGVyZWRFbGVtZW50ID0gdGhpcy5fcmVuZGVyVmFsaWRhdGVkQ29tcG9uZW50KCk7XG4gICAgfVxuXG4gICAgdGhpcy5fcmVuZGVyZWRDb21wb25lbnQgPSB0aGlzLl9pbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50KHJlbmRlcmVkRWxlbWVudCk7XG5cbiAgICB2YXIgbWFya3VwID0gUmVhY3RSZWNvbmNpbGVyLm1vdW50Q29tcG9uZW50KHRoaXMuX3JlbmRlcmVkQ29tcG9uZW50LCByb290SUQsIHRyYW5zYWN0aW9uLCB0aGlzLl9wcm9jZXNzQ2hpbGRDb250ZXh0KGNvbnRleHQpKTtcbiAgICBpZiAoaW5zdC5jb21wb25lbnREaWRNb3VudCkge1xuICAgICAgdHJhbnNhY3Rpb24uZ2V0UmVhY3RNb3VudFJlYWR5KCkuZW5xdWV1ZShpbnN0LmNvbXBvbmVudERpZE1vdW50LCBpbnN0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gbWFya3VwO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZWxlYXNlcyBhbnkgcmVzb3VyY2VzIGFsbG9jYXRlZCBieSBgbW91bnRDb21wb25lbnRgLlxuICAgKlxuICAgKiBAZmluYWxcbiAgICogQGludGVybmFsXG4gICAqL1xuICB1bm1vdW50Q29tcG9uZW50OiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGluc3QgPSB0aGlzLl9pbnN0YW5jZTtcblxuICAgIGlmIChpbnN0LmNvbXBvbmVudFdpbGxVbm1vdW50KSB7XG4gICAgICBpbnN0LmNvbXBvbmVudFdpbGxVbm1vdW50KCk7XG4gICAgfVxuXG4gICAgUmVhY3RSZWNvbmNpbGVyLnVubW91bnRDb21wb25lbnQodGhpcy5fcmVuZGVyZWRDb21wb25lbnQpO1xuICAgIHRoaXMuX3JlbmRlcmVkQ29tcG9uZW50ID0gbnVsbDtcbiAgICB0aGlzLl9pbnN0YW5jZSA9IG51bGw7XG5cbiAgICAvLyBSZXNldCBwZW5kaW5nIGZpZWxkc1xuICAgIC8vIEV2ZW4gaWYgdGhpcyBjb21wb25lbnQgaXMgc2NoZWR1bGVkIGZvciBhbm90aGVyIHVwZGF0ZSBpbiBSZWFjdFVwZGF0ZXMsXG4gICAgLy8gaXQgd291bGQgc3RpbGwgYmUgaWdub3JlZCBiZWNhdXNlIHRoZXNlIGZpZWxkcyBhcmUgcmVzZXQuXG4gICAgdGhpcy5fcGVuZGluZ1N0YXRlUXVldWUgPSBudWxsO1xuICAgIHRoaXMuX3BlbmRpbmdSZXBsYWNlU3RhdGUgPSBmYWxzZTtcbiAgICB0aGlzLl9wZW5kaW5nRm9yY2VVcGRhdGUgPSBmYWxzZTtcbiAgICB0aGlzLl9wZW5kaW5nQ2FsbGJhY2tzID0gbnVsbDtcbiAgICB0aGlzLl9wZW5kaW5nRWxlbWVudCA9IG51bGw7XG5cbiAgICAvLyBUaGVzZSBmaWVsZHMgZG8gbm90IHJlYWxseSBuZWVkIHRvIGJlIHJlc2V0IHNpbmNlIHRoaXMgb2JqZWN0IGlzIG5vXG4gICAgLy8gbG9uZ2VyIGFjY2Vzc2libGUuXG4gICAgdGhpcy5fY29udGV4dCA9IG51bGw7XG4gICAgdGhpcy5fcm9vdE5vZGVJRCA9IG51bGw7XG4gICAgdGhpcy5fdG9wTGV2ZWxXcmFwcGVyID0gbnVsbDtcblxuICAgIC8vIERlbGV0ZSB0aGUgcmVmZXJlbmNlIGZyb20gdGhlIGluc3RhbmNlIHRvIHRoaXMgaW50ZXJuYWwgcmVwcmVzZW50YXRpb25cbiAgICAvLyB3aGljaCBhbGxvdyB0aGUgaW50ZXJuYWxzIHRvIGJlIHByb3Blcmx5IGNsZWFuZWQgdXAgZXZlbiBpZiB0aGUgdXNlclxuICAgIC8vIGxlYWtzIGEgcmVmZXJlbmNlIHRvIHRoZSBwdWJsaWMgaW5zdGFuY2UuXG4gICAgUmVhY3RJbnN0YW5jZU1hcC5yZW1vdmUoaW5zdCk7XG5cbiAgICAvLyBTb21lIGV4aXN0aW5nIGNvbXBvbmVudHMgcmVseSBvbiBpbnN0LnByb3BzIGV2ZW4gYWZ0ZXIgdGhleSd2ZSBiZWVuXG4gICAgLy8gZGVzdHJveWVkIChpbiBldmVudCBoYW5kbGVycykuXG4gICAgLy8gVE9ETzogaW5zdC5wcm9wcyA9IG51bGw7XG4gICAgLy8gVE9ETzogaW5zdC5zdGF0ZSA9IG51bGw7XG4gICAgLy8gVE9ETzogaW5zdC5jb250ZXh0ID0gbnVsbDtcbiAgfSxcblxuICAvKipcbiAgICogRmlsdGVycyB0aGUgY29udGV4dCBvYmplY3QgdG8gb25seSBjb250YWluIGtleXMgc3BlY2lmaWVkIGluXG4gICAqIGBjb250ZXh0VHlwZXNgXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjb250ZXh0XG4gICAqIEByZXR1cm4gez9vYmplY3R9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfbWFza0NvbnRleHQ6IGZ1bmN0aW9uIChjb250ZXh0KSB7XG4gICAgdmFyIG1hc2tlZENvbnRleHQgPSBudWxsO1xuICAgIHZhciBDb21wb25lbnQgPSB0aGlzLl9jdXJyZW50RWxlbWVudC50eXBlO1xuICAgIHZhciBjb250ZXh0VHlwZXMgPSBDb21wb25lbnQuY29udGV4dFR5cGVzO1xuICAgIGlmICghY29udGV4dFR5cGVzKSB7XG4gICAgICByZXR1cm4gZW1wdHlPYmplY3Q7XG4gICAgfVxuICAgIG1hc2tlZENvbnRleHQgPSB7fTtcbiAgICBmb3IgKHZhciBjb250ZXh0TmFtZSBpbiBjb250ZXh0VHlwZXMpIHtcbiAgICAgIG1hc2tlZENvbnRleHRbY29udGV4dE5hbWVdID0gY29udGV4dFtjb250ZXh0TmFtZV07XG4gICAgfVxuICAgIHJldHVybiBtYXNrZWRDb250ZXh0O1xuICB9LFxuXG4gIC8qKlxuICAgKiBGaWx0ZXJzIHRoZSBjb250ZXh0IG9iamVjdCB0byBvbmx5IGNvbnRhaW4ga2V5cyBzcGVjaWZpZWQgaW5cbiAgICogYGNvbnRleHRUeXBlc2AsIGFuZCBhc3NlcnRzIHRoYXQgdGhleSBhcmUgdmFsaWQuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjb250ZXh0XG4gICAqIEByZXR1cm4gez9vYmplY3R9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfcHJvY2Vzc0NvbnRleHQ6IGZ1bmN0aW9uIChjb250ZXh0KSB7XG4gICAgdmFyIG1hc2tlZENvbnRleHQgPSB0aGlzLl9tYXNrQ29udGV4dChjb250ZXh0KTtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgdmFyIENvbXBvbmVudCA9IHRoaXMuX2N1cnJlbnRFbGVtZW50LnR5cGU7XG4gICAgICBpZiAoQ29tcG9uZW50LmNvbnRleHRUeXBlcykge1xuICAgICAgICB0aGlzLl9jaGVja1Byb3BUeXBlcyhDb21wb25lbnQuY29udGV4dFR5cGVzLCBtYXNrZWRDb250ZXh0LCBSZWFjdFByb3BUeXBlTG9jYXRpb25zLmNvbnRleHQpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWFza2VkQ29udGV4dDtcbiAgfSxcblxuICAvKipcbiAgICogQHBhcmFtIHtvYmplY3R9IGN1cnJlbnRDb250ZXh0XG4gICAqIEByZXR1cm4ge29iamVjdH1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9wcm9jZXNzQ2hpbGRDb250ZXh0OiBmdW5jdGlvbiAoY3VycmVudENvbnRleHQpIHtcbiAgICB2YXIgQ29tcG9uZW50ID0gdGhpcy5fY3VycmVudEVsZW1lbnQudHlwZTtcbiAgICB2YXIgaW5zdCA9IHRoaXMuX2luc3RhbmNlO1xuICAgIHZhciBjaGlsZENvbnRleHQgPSBpbnN0LmdldENoaWxkQ29udGV4dCAmJiBpbnN0LmdldENoaWxkQ29udGV4dCgpO1xuICAgIGlmIChjaGlsZENvbnRleHQpIHtcbiAgICAgICEodHlwZW9mIENvbXBvbmVudC5jaGlsZENvbnRleHRUeXBlcyA9PT0gJ29iamVjdCcpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJyVzLmdldENoaWxkQ29udGV4dCgpOiBjaGlsZENvbnRleHRUeXBlcyBtdXN0IGJlIGRlZmluZWQgaW4gb3JkZXIgdG8gJyArICd1c2UgZ2V0Q2hpbGRDb250ZXh0KCkuJywgdGhpcy5nZXROYW1lKCkgfHwgJ1JlYWN0Q29tcG9zaXRlQ29tcG9uZW50JykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgdGhpcy5fY2hlY2tQcm9wVHlwZXMoQ29tcG9uZW50LmNoaWxkQ29udGV4dFR5cGVzLCBjaGlsZENvbnRleHQsIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnMuY2hpbGRDb250ZXh0KTtcbiAgICAgIH1cbiAgICAgIGZvciAodmFyIG5hbWUgaW4gY2hpbGRDb250ZXh0KSB7XG4gICAgICAgICEobmFtZSBpbiBDb21wb25lbnQuY2hpbGRDb250ZXh0VHlwZXMpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJyVzLmdldENoaWxkQ29udGV4dCgpOiBrZXkgXCIlc1wiIGlzIG5vdCBkZWZpbmVkIGluIGNoaWxkQ29udGV4dFR5cGVzLicsIHRoaXMuZ2V0TmFtZSgpIHx8ICdSZWFjdENvbXBvc2l0ZUNvbXBvbmVudCcsIG5hbWUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhc3NpZ24oe30sIGN1cnJlbnRDb250ZXh0LCBjaGlsZENvbnRleHQpO1xuICAgIH1cbiAgICByZXR1cm4gY3VycmVudENvbnRleHQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFByb2Nlc3NlcyBwcm9wcyBieSBzZXR0aW5nIGRlZmF1bHQgdmFsdWVzIGZvciB1bnNwZWNpZmllZCBwcm9wcyBhbmRcbiAgICogYXNzZXJ0aW5nIHRoYXQgdGhlIHByb3BzIGFyZSB2YWxpZC4gRG9lcyBub3QgbXV0YXRlIGl0cyBhcmd1bWVudDsgcmV0dXJuc1xuICAgKiBhIG5ldyBwcm9wcyBvYmplY3Qgd2l0aCBkZWZhdWx0cyBtZXJnZWQgaW4uXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBuZXdQcm9wc1xuICAgKiBAcmV0dXJuIHtvYmplY3R9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfcHJvY2Vzc1Byb3BzOiBmdW5jdGlvbiAobmV3UHJvcHMpIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgdmFyIENvbXBvbmVudCA9IHRoaXMuX2N1cnJlbnRFbGVtZW50LnR5cGU7XG4gICAgICBpZiAoQ29tcG9uZW50LnByb3BUeXBlcykge1xuICAgICAgICB0aGlzLl9jaGVja1Byb3BUeXBlcyhDb21wb25lbnQucHJvcFR5cGVzLCBuZXdQcm9wcywgUmVhY3RQcm9wVHlwZUxvY2F0aW9ucy5wcm9wKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5ld1Byb3BzO1xuICB9LFxuXG4gIC8qKlxuICAgKiBBc3NlcnQgdGhhdCB0aGUgcHJvcHMgYXJlIHZhbGlkXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBwcm9wVHlwZXMgTWFwIG9mIHByb3AgbmFtZSB0byBhIFJlYWN0UHJvcFR5cGVcbiAgICogQHBhcmFtIHtvYmplY3R9IHByb3BzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBsb2NhdGlvbiBlLmcuIFwicHJvcFwiLCBcImNvbnRleHRcIiwgXCJjaGlsZCBjb250ZXh0XCJcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9jaGVja1Byb3BUeXBlczogZnVuY3Rpb24gKHByb3BUeXBlcywgcHJvcHMsIGxvY2F0aW9uKSB7XG4gICAgLy8gVE9ETzogU3RvcCB2YWxpZGF0aW5nIHByb3AgdHlwZXMgaGVyZSBhbmQgb25seSB1c2UgdGhlIGVsZW1lbnRcbiAgICAvLyB2YWxpZGF0aW9uLlxuICAgIHZhciBjb21wb25lbnROYW1lID0gdGhpcy5nZXROYW1lKCk7XG4gICAgZm9yICh2YXIgcHJvcE5hbWUgaW4gcHJvcFR5cGVzKSB7XG4gICAgICBpZiAocHJvcFR5cGVzLmhhc093blByb3BlcnR5KHByb3BOYW1lKSkge1xuICAgICAgICB2YXIgZXJyb3I7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gVGhpcyBpcyBpbnRlbnRpb25hbGx5IGFuIGludmFyaWFudCB0aGF0IGdldHMgY2F1Z2h0LiBJdCdzIHRoZSBzYW1lXG4gICAgICAgICAgLy8gYmVoYXZpb3IgYXMgd2l0aG91dCB0aGlzIHN0YXRlbWVudCBleGNlcHQgd2l0aCBhIGJldHRlciBtZXNzYWdlLlxuICAgICAgICAgICEodHlwZW9mIHByb3BUeXBlc1twcm9wTmFtZV0gPT09ICdmdW5jdGlvbicpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJyVzOiAlcyB0eXBlIGAlc2AgaXMgaW52YWxpZDsgaXQgbXVzdCBiZSBhIGZ1bmN0aW9uLCB1c3VhbGx5ICcgKyAnZnJvbSBSZWFjdC5Qcm9wVHlwZXMuJywgY29tcG9uZW50TmFtZSB8fCAnUmVhY3QgY2xhc3MnLCBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lc1tsb2NhdGlvbl0sIHByb3BOYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgZXJyb3IgPSBwcm9wVHlwZXNbcHJvcE5hbWVdKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIG51bGwsICdTRUNSRVRfRE9fTk9UX1BBU1NfVEhJU19PUl9ZT1VfV0lMTF9CRV9GSVJFRCcpO1xuICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgIGVycm9yID0gZXg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAvLyBXZSBtYXkgd2FudCB0byBleHRlbmQgdGhpcyBsb2dpYyBmb3Igc2ltaWxhciBlcnJvcnMgaW5cbiAgICAgICAgICAvLyB0b3AtbGV2ZWwgcmVuZGVyIGNhbGxzLCBzbyBJJ20gYWJzdHJhY3RpbmcgaXQgYXdheSBpbnRvXG4gICAgICAgICAgLy8gYSBmdW5jdGlvbiB0byBtaW5pbWl6ZSByZWZhY3RvcmluZyBpbiB0aGUgZnV0dXJlXG4gICAgICAgICAgdmFyIGFkZGVuZHVtID0gZ2V0RGVjbGFyYXRpb25FcnJvckFkZGVuZHVtKHRoaXMpO1xuXG4gICAgICAgICAgaWYgKGxvY2F0aW9uID09PSBSZWFjdFByb3BUeXBlTG9jYXRpb25zLnByb3ApIHtcbiAgICAgICAgICAgIC8vIFByZWZhY2UgZ2l2ZXMgdXMgc29tZXRoaW5nIHRvIGJsYWNrbGlzdCBpbiB3YXJuaW5nIG1vZHVsZVxuICAgICAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdGYWlsZWQgQ29tcG9zaXRlIHByb3BUeXBlOiAlcyVzJywgZXJyb3IubWVzc2FnZSwgYWRkZW5kdW0pIDogdW5kZWZpbmVkO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ0ZhaWxlZCBDb250ZXh0IFR5cGVzOiAlcyVzJywgZXJyb3IubWVzc2FnZSwgYWRkZW5kdW0pIDogdW5kZWZpbmVkO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICByZWNlaXZlQ29tcG9uZW50OiBmdW5jdGlvbiAobmV4dEVsZW1lbnQsIHRyYW5zYWN0aW9uLCBuZXh0Q29udGV4dCkge1xuICAgIHZhciBwcmV2RWxlbWVudCA9IHRoaXMuX2N1cnJlbnRFbGVtZW50O1xuICAgIHZhciBwcmV2Q29udGV4dCA9IHRoaXMuX2NvbnRleHQ7XG5cbiAgICB0aGlzLl9wZW5kaW5nRWxlbWVudCA9IG51bGw7XG5cbiAgICB0aGlzLnVwZGF0ZUNvbXBvbmVudCh0cmFuc2FjdGlvbiwgcHJldkVsZW1lbnQsIG5leHRFbGVtZW50LCBwcmV2Q29udGV4dCwgbmV4dENvbnRleHQpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBJZiBhbnkgb2YgYF9wZW5kaW5nRWxlbWVudGAsIGBfcGVuZGluZ1N0YXRlUXVldWVgLCBvciBgX3BlbmRpbmdGb3JjZVVwZGF0ZWBcbiAgICogaXMgc2V0LCB1cGRhdGUgdGhlIGNvbXBvbmVudC5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHBlcmZvcm1VcGRhdGVJZk5lY2Vzc2FyeTogZnVuY3Rpb24gKHRyYW5zYWN0aW9uKSB7XG4gICAgaWYgKHRoaXMuX3BlbmRpbmdFbGVtZW50ICE9IG51bGwpIHtcbiAgICAgIFJlYWN0UmVjb25jaWxlci5yZWNlaXZlQ29tcG9uZW50KHRoaXMsIHRoaXMuX3BlbmRpbmdFbGVtZW50IHx8IHRoaXMuX2N1cnJlbnRFbGVtZW50LCB0cmFuc2FjdGlvbiwgdGhpcy5fY29udGV4dCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3BlbmRpbmdTdGF0ZVF1ZXVlICE9PSBudWxsIHx8IHRoaXMuX3BlbmRpbmdGb3JjZVVwZGF0ZSkge1xuICAgICAgdGhpcy51cGRhdGVDb21wb25lbnQodHJhbnNhY3Rpb24sIHRoaXMuX2N1cnJlbnRFbGVtZW50LCB0aGlzLl9jdXJyZW50RWxlbWVudCwgdGhpcy5fY29udGV4dCwgdGhpcy5fY29udGV4dCk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBQZXJmb3JtIGFuIHVwZGF0ZSB0byBhIG1vdW50ZWQgY29tcG9uZW50LiBUaGUgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyBhbmRcbiAgICogc2hvdWxkQ29tcG9uZW50VXBkYXRlIG1ldGhvZHMgYXJlIGNhbGxlZCwgdGhlbiAoYXNzdW1pbmcgdGhlIHVwZGF0ZSBpc24ndFxuICAgKiBza2lwcGVkKSB0aGUgcmVtYWluaW5nIHVwZGF0ZSBsaWZlY3ljbGUgbWV0aG9kcyBhcmUgY2FsbGVkIGFuZCB0aGUgRE9NXG4gICAqIHJlcHJlc2VudGF0aW9uIGlzIHVwZGF0ZWQuXG4gICAqXG4gICAqIEJ5IGRlZmF1bHQsIHRoaXMgaW1wbGVtZW50cyBSZWFjdCdzIHJlbmRlcmluZyBhbmQgcmVjb25jaWxpYXRpb24gYWxnb3JpdGhtLlxuICAgKiBTb3BoaXN0aWNhdGVkIGNsaWVudHMgbWF5IHdpc2ggdG8gb3ZlcnJpZGUgdGhpcy5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgKiBAcGFyYW0ge1JlYWN0RWxlbWVudH0gcHJldlBhcmVudEVsZW1lbnRcbiAgICogQHBhcmFtIHtSZWFjdEVsZW1lbnR9IG5leHRQYXJlbnRFbGVtZW50XG4gICAqIEBpbnRlcm5hbFxuICAgKiBAb3ZlcnJpZGFibGVcbiAgICovXG4gIHVwZGF0ZUNvbXBvbmVudDogZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBwcmV2UGFyZW50RWxlbWVudCwgbmV4dFBhcmVudEVsZW1lbnQsIHByZXZVbm1hc2tlZENvbnRleHQsIG5leHRVbm1hc2tlZENvbnRleHQpIHtcbiAgICB2YXIgaW5zdCA9IHRoaXMuX2luc3RhbmNlO1xuXG4gICAgdmFyIG5leHRDb250ZXh0ID0gdGhpcy5fY29udGV4dCA9PT0gbmV4dFVubWFza2VkQ29udGV4dCA/IGluc3QuY29udGV4dCA6IHRoaXMuX3Byb2Nlc3NDb250ZXh0KG5leHRVbm1hc2tlZENvbnRleHQpO1xuICAgIHZhciBuZXh0UHJvcHM7XG5cbiAgICAvLyBEaXN0aW5ndWlzaCBiZXR3ZWVuIGEgcHJvcHMgdXBkYXRlIHZlcnN1cyBhIHNpbXBsZSBzdGF0ZSB1cGRhdGVcbiAgICBpZiAocHJldlBhcmVudEVsZW1lbnQgPT09IG5leHRQYXJlbnRFbGVtZW50KSB7XG4gICAgICAvLyBTa2lwIGNoZWNraW5nIHByb3AgdHlwZXMgYWdhaW4gLS0gd2UgZG9uJ3QgcmVhZCBpbnN0LnByb3BzIHRvIGF2b2lkXG4gICAgICAvLyB3YXJuaW5nIGZvciBET00gY29tcG9uZW50IHByb3BzIGluIHRoaXMgdXBncmFkZVxuICAgICAgbmV4dFByb3BzID0gbmV4dFBhcmVudEVsZW1lbnQucHJvcHM7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5leHRQcm9wcyA9IHRoaXMuX3Byb2Nlc3NQcm9wcyhuZXh0UGFyZW50RWxlbWVudC5wcm9wcyk7XG4gICAgICAvLyBBbiB1cGRhdGUgaGVyZSB3aWxsIHNjaGVkdWxlIGFuIHVwZGF0ZSBidXQgaW1tZWRpYXRlbHkgc2V0XG4gICAgICAvLyBfcGVuZGluZ1N0YXRlUXVldWUgd2hpY2ggd2lsbCBlbnN1cmUgdGhhdCBhbnkgc3RhdGUgdXBkYXRlcyBnZXRzXG4gICAgICAvLyBpbW1lZGlhdGVseSByZWNvbmNpbGVkIGluc3RlYWQgb2Ygd2FpdGluZyBmb3IgdGhlIG5leHQgYmF0Y2guXG5cbiAgICAgIGlmIChpbnN0LmNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMpIHtcbiAgICAgICAgaW5zdC5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcywgbmV4dENvbnRleHQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBuZXh0U3RhdGUgPSB0aGlzLl9wcm9jZXNzUGVuZGluZ1N0YXRlKG5leHRQcm9wcywgbmV4dENvbnRleHQpO1xuXG4gICAgdmFyIHNob3VsZFVwZGF0ZSA9IHRoaXMuX3BlbmRpbmdGb3JjZVVwZGF0ZSB8fCAhaW5zdC5zaG91bGRDb21wb25lbnRVcGRhdGUgfHwgaW5zdC5zaG91bGRDb21wb25lbnRVcGRhdGUobmV4dFByb3BzLCBuZXh0U3RhdGUsIG5leHRDb250ZXh0KTtcblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyh0eXBlb2Ygc2hvdWxkVXBkYXRlICE9PSAndW5kZWZpbmVkJywgJyVzLnNob3VsZENvbXBvbmVudFVwZGF0ZSgpOiBSZXR1cm5lZCB1bmRlZmluZWQgaW5zdGVhZCBvZiBhICcgKyAnYm9vbGVhbiB2YWx1ZS4gTWFrZSBzdXJlIHRvIHJldHVybiB0cnVlIG9yIGZhbHNlLicsIHRoaXMuZ2V0TmFtZSgpIHx8ICdSZWFjdENvbXBvc2l0ZUNvbXBvbmVudCcpIDogdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGlmIChzaG91bGRVcGRhdGUpIHtcbiAgICAgIHRoaXMuX3BlbmRpbmdGb3JjZVVwZGF0ZSA9IGZhbHNlO1xuICAgICAgLy8gV2lsbCBzZXQgYHRoaXMucHJvcHNgLCBgdGhpcy5zdGF0ZWAgYW5kIGB0aGlzLmNvbnRleHRgLlxuICAgICAgdGhpcy5fcGVyZm9ybUNvbXBvbmVudFVwZGF0ZShuZXh0UGFyZW50RWxlbWVudCwgbmV4dFByb3BzLCBuZXh0U3RhdGUsIG5leHRDb250ZXh0LCB0cmFuc2FjdGlvbiwgbmV4dFVubWFza2VkQ29udGV4dCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIElmIGl0J3MgZGV0ZXJtaW5lZCB0aGF0IGEgY29tcG9uZW50IHNob3VsZCBub3QgdXBkYXRlLCB3ZSBzdGlsbCB3YW50XG4gICAgICAvLyB0byBzZXQgcHJvcHMgYW5kIHN0YXRlIGJ1dCB3ZSBzaG9ydGN1dCB0aGUgcmVzdCBvZiB0aGUgdXBkYXRlLlxuICAgICAgdGhpcy5fY3VycmVudEVsZW1lbnQgPSBuZXh0UGFyZW50RWxlbWVudDtcbiAgICAgIHRoaXMuX2NvbnRleHQgPSBuZXh0VW5tYXNrZWRDb250ZXh0O1xuICAgICAgaW5zdC5wcm9wcyA9IG5leHRQcm9wcztcbiAgICAgIGluc3Quc3RhdGUgPSBuZXh0U3RhdGU7XG4gICAgICBpbnN0LmNvbnRleHQgPSBuZXh0Q29udGV4dDtcbiAgICB9XG4gIH0sXG5cbiAgX3Byb2Nlc3NQZW5kaW5nU3RhdGU6IGZ1bmN0aW9uIChwcm9wcywgY29udGV4dCkge1xuICAgIHZhciBpbnN0ID0gdGhpcy5faW5zdGFuY2U7XG4gICAgdmFyIHF1ZXVlID0gdGhpcy5fcGVuZGluZ1N0YXRlUXVldWU7XG4gICAgdmFyIHJlcGxhY2UgPSB0aGlzLl9wZW5kaW5nUmVwbGFjZVN0YXRlO1xuICAgIHRoaXMuX3BlbmRpbmdSZXBsYWNlU3RhdGUgPSBmYWxzZTtcbiAgICB0aGlzLl9wZW5kaW5nU3RhdGVRdWV1ZSA9IG51bGw7XG5cbiAgICBpZiAoIXF1ZXVlKSB7XG4gICAgICByZXR1cm4gaW5zdC5zdGF0ZTtcbiAgICB9XG5cbiAgICBpZiAocmVwbGFjZSAmJiBxdWV1ZS5sZW5ndGggPT09IDEpIHtcbiAgICAgIHJldHVybiBxdWV1ZVswXTtcbiAgICB9XG5cbiAgICB2YXIgbmV4dFN0YXRlID0gYXNzaWduKHt9LCByZXBsYWNlID8gcXVldWVbMF0gOiBpbnN0LnN0YXRlKTtcbiAgICBmb3IgKHZhciBpID0gcmVwbGFjZSA/IDEgOiAwOyBpIDwgcXVldWUubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBwYXJ0aWFsID0gcXVldWVbaV07XG4gICAgICBhc3NpZ24obmV4dFN0YXRlLCB0eXBlb2YgcGFydGlhbCA9PT0gJ2Z1bmN0aW9uJyA/IHBhcnRpYWwuY2FsbChpbnN0LCBuZXh0U3RhdGUsIHByb3BzLCBjb250ZXh0KSA6IHBhcnRpYWwpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXh0U3RhdGU7XG4gIH0sXG5cbiAgLyoqXG4gICAqIE1lcmdlcyBuZXcgcHJvcHMgYW5kIHN0YXRlLCBub3RpZmllcyBkZWxlZ2F0ZSBtZXRob2RzIG9mIHVwZGF0ZSBhbmRcbiAgICogcGVyZm9ybXMgdXBkYXRlLlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0RWxlbWVudH0gbmV4dEVsZW1lbnQgTmV4dCBlbGVtZW50XG4gICAqIEBwYXJhbSB7b2JqZWN0fSBuZXh0UHJvcHMgTmV4dCBwdWJsaWMgb2JqZWN0IHRvIHNldCBhcyBwcm9wZXJ0aWVzLlxuICAgKiBAcGFyYW0gez9vYmplY3R9IG5leHRTdGF0ZSBOZXh0IG9iamVjdCB0byBzZXQgYXMgc3RhdGUuXG4gICAqIEBwYXJhbSB7P29iamVjdH0gbmV4dENvbnRleHQgTmV4dCBwdWJsaWMgb2JqZWN0IHRvIHNldCBhcyBjb250ZXh0LlxuICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAqIEBwYXJhbSB7P29iamVjdH0gdW5tYXNrZWRDb250ZXh0XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfcGVyZm9ybUNvbXBvbmVudFVwZGF0ZTogZnVuY3Rpb24gKG5leHRFbGVtZW50LCBuZXh0UHJvcHMsIG5leHRTdGF0ZSwgbmV4dENvbnRleHQsIHRyYW5zYWN0aW9uLCB1bm1hc2tlZENvbnRleHQpIHtcbiAgICB2YXIgaW5zdCA9IHRoaXMuX2luc3RhbmNlO1xuXG4gICAgdmFyIGhhc0NvbXBvbmVudERpZFVwZGF0ZSA9IEJvb2xlYW4oaW5zdC5jb21wb25lbnREaWRVcGRhdGUpO1xuICAgIHZhciBwcmV2UHJvcHM7XG4gICAgdmFyIHByZXZTdGF0ZTtcbiAgICB2YXIgcHJldkNvbnRleHQ7XG4gICAgaWYgKGhhc0NvbXBvbmVudERpZFVwZGF0ZSkge1xuICAgICAgcHJldlByb3BzID0gaW5zdC5wcm9wcztcbiAgICAgIHByZXZTdGF0ZSA9IGluc3Quc3RhdGU7XG4gICAgICBwcmV2Q29udGV4dCA9IGluc3QuY29udGV4dDtcbiAgICB9XG5cbiAgICBpZiAoaW5zdC5jb21wb25lbnRXaWxsVXBkYXRlKSB7XG4gICAgICBpbnN0LmNvbXBvbmVudFdpbGxVcGRhdGUobmV4dFByb3BzLCBuZXh0U3RhdGUsIG5leHRDb250ZXh0KTtcbiAgICB9XG5cbiAgICB0aGlzLl9jdXJyZW50RWxlbWVudCA9IG5leHRFbGVtZW50O1xuICAgIHRoaXMuX2NvbnRleHQgPSB1bm1hc2tlZENvbnRleHQ7XG4gICAgaW5zdC5wcm9wcyA9IG5leHRQcm9wcztcbiAgICBpbnN0LnN0YXRlID0gbmV4dFN0YXRlO1xuICAgIGluc3QuY29udGV4dCA9IG5leHRDb250ZXh0O1xuXG4gICAgdGhpcy5fdXBkYXRlUmVuZGVyZWRDb21wb25lbnQodHJhbnNhY3Rpb24sIHVubWFza2VkQ29udGV4dCk7XG5cbiAgICBpZiAoaGFzQ29tcG9uZW50RGlkVXBkYXRlKSB7XG4gICAgICB0cmFuc2FjdGlvbi5nZXRSZWFjdE1vdW50UmVhZHkoKS5lbnF1ZXVlKGluc3QuY29tcG9uZW50RGlkVXBkYXRlLmJpbmQoaW5zdCwgcHJldlByb3BzLCBwcmV2U3RhdGUsIHByZXZDb250ZXh0KSwgaW5zdCk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBDYWxsIHRoZSBjb21wb25lbnQncyBgcmVuZGVyYCBtZXRob2QgYW5kIHVwZGF0ZSB0aGUgRE9NIGFjY29yZGluZ2x5LlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgX3VwZGF0ZVJlbmRlcmVkQ29tcG9uZW50OiBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcbiAgICB2YXIgcHJldkNvbXBvbmVudEluc3RhbmNlID0gdGhpcy5fcmVuZGVyZWRDb21wb25lbnQ7XG4gICAgdmFyIHByZXZSZW5kZXJlZEVsZW1lbnQgPSBwcmV2Q29tcG9uZW50SW5zdGFuY2UuX2N1cnJlbnRFbGVtZW50O1xuICAgIHZhciBuZXh0UmVuZGVyZWRFbGVtZW50ID0gdGhpcy5fcmVuZGVyVmFsaWRhdGVkQ29tcG9uZW50KCk7XG4gICAgaWYgKHNob3VsZFVwZGF0ZVJlYWN0Q29tcG9uZW50KHByZXZSZW5kZXJlZEVsZW1lbnQsIG5leHRSZW5kZXJlZEVsZW1lbnQpKSB7XG4gICAgICBSZWFjdFJlY29uY2lsZXIucmVjZWl2ZUNvbXBvbmVudChwcmV2Q29tcG9uZW50SW5zdGFuY2UsIG5leHRSZW5kZXJlZEVsZW1lbnQsIHRyYW5zYWN0aW9uLCB0aGlzLl9wcm9jZXNzQ2hpbGRDb250ZXh0KGNvbnRleHQpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVGhlc2UgdHdvIElEcyBhcmUgYWN0dWFsbHkgdGhlIHNhbWUhIEJ1dCBub3RoaW5nIHNob3VsZCByZWx5IG9uIHRoYXQuXG4gICAgICB2YXIgdGhpc0lEID0gdGhpcy5fcm9vdE5vZGVJRDtcbiAgICAgIHZhciBwcmV2Q29tcG9uZW50SUQgPSBwcmV2Q29tcG9uZW50SW5zdGFuY2UuX3Jvb3ROb2RlSUQ7XG4gICAgICBSZWFjdFJlY29uY2lsZXIudW5tb3VudENvbXBvbmVudChwcmV2Q29tcG9uZW50SW5zdGFuY2UpO1xuXG4gICAgICB0aGlzLl9yZW5kZXJlZENvbXBvbmVudCA9IHRoaXMuX2luc3RhbnRpYXRlUmVhY3RDb21wb25lbnQobmV4dFJlbmRlcmVkRWxlbWVudCk7XG4gICAgICB2YXIgbmV4dE1hcmt1cCA9IFJlYWN0UmVjb25jaWxlci5tb3VudENvbXBvbmVudCh0aGlzLl9yZW5kZXJlZENvbXBvbmVudCwgdGhpc0lELCB0cmFuc2FjdGlvbiwgdGhpcy5fcHJvY2Vzc0NoaWxkQ29udGV4dChjb250ZXh0KSk7XG4gICAgICB0aGlzLl9yZXBsYWNlTm9kZVdpdGhNYXJrdXBCeUlEKHByZXZDb21wb25lbnRJRCwgbmV4dE1hcmt1cCk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBfcmVwbGFjZU5vZGVXaXRoTWFya3VwQnlJRDogZnVuY3Rpb24gKHByZXZDb21wb25lbnRJRCwgbmV4dE1hcmt1cCkge1xuICAgIFJlYWN0Q29tcG9uZW50RW52aXJvbm1lbnQucmVwbGFjZU5vZGVXaXRoTWFya3VwQnlJRChwcmV2Q29tcG9uZW50SUQsIG5leHRNYXJrdXApO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBfcmVuZGVyVmFsaWRhdGVkQ29tcG9uZW50V2l0aG91dE93bmVyT3JDb250ZXh0OiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGluc3QgPSB0aGlzLl9pbnN0YW5jZTtcbiAgICB2YXIgcmVuZGVyZWRDb21wb25lbnQgPSBpbnN0LnJlbmRlcigpO1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAvLyBXZSBhbGxvdyBhdXRvLW1vY2tzIHRvIHByb2NlZWQgYXMgaWYgdGhleSdyZSByZXR1cm5pbmcgbnVsbC5cbiAgICAgIGlmICh0eXBlb2YgcmVuZGVyZWRDb21wb25lbnQgPT09ICd1bmRlZmluZWQnICYmIGluc3QucmVuZGVyLl9pc01vY2tGdW5jdGlvbikge1xuICAgICAgICAvLyBUaGlzIGlzIHByb2JhYmx5IGJhZCBwcmFjdGljZS4gQ29uc2lkZXIgd2FybmluZyBoZXJlIGFuZFxuICAgICAgICAvLyBkZXByZWNhdGluZyB0aGlzIGNvbnZlbmllbmNlLlxuICAgICAgICByZW5kZXJlZENvbXBvbmVudCA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlbmRlcmVkQ29tcG9uZW50O1xuICB9LFxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3JlbmRlclZhbGlkYXRlZENvbXBvbmVudDogZnVuY3Rpb24gKCkge1xuICAgIHZhciByZW5kZXJlZENvbXBvbmVudDtcbiAgICBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50ID0gdGhpcztcbiAgICB0cnkge1xuICAgICAgcmVuZGVyZWRDb21wb25lbnQgPSB0aGlzLl9yZW5kZXJWYWxpZGF0ZWRDb21wb25lbnRXaXRob3V0T3duZXJPckNvbnRleHQoKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgUmVhY3RDdXJyZW50T3duZXIuY3VycmVudCA9IG51bGw7XG4gICAgfVxuICAgICEoXG4gICAgLy8gVE9ETzogQW4gYGlzVmFsaWROb2RlYCBmdW5jdGlvbiB3b3VsZCBwcm9iYWJseSBiZSBtb3JlIGFwcHJvcHJpYXRlXG4gICAgcmVuZGVyZWRDb21wb25lbnQgPT09IG51bGwgfHwgcmVuZGVyZWRDb21wb25lbnQgPT09IGZhbHNlIHx8IFJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChyZW5kZXJlZENvbXBvbmVudCkpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJyVzLnJlbmRlcigpOiBBIHZhbGlkIFJlYWN0Q29tcG9uZW50IG11c3QgYmUgcmV0dXJuZWQuIFlvdSBtYXkgaGF2ZSAnICsgJ3JldHVybmVkIHVuZGVmaW5lZCwgYW4gYXJyYXkgb3Igc29tZSBvdGhlciBpbnZhbGlkIG9iamVjdC4nLCB0aGlzLmdldE5hbWUoKSB8fCAnUmVhY3RDb21wb3NpdGVDb21wb25lbnQnKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIHJlbmRlcmVkQ29tcG9uZW50O1xuICB9LFxuXG4gIC8qKlxuICAgKiBMYXppbHkgYWxsb2NhdGVzIHRoZSByZWZzIG9iamVjdCBhbmQgc3RvcmVzIGBjb21wb25lbnRgIGFzIGByZWZgLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVmIFJlZmVyZW5jZSBuYW1lLlxuICAgKiBAcGFyYW0ge2NvbXBvbmVudH0gY29tcG9uZW50IENvbXBvbmVudCB0byBzdG9yZSBhcyBgcmVmYC5cbiAgICogQGZpbmFsXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBhdHRhY2hSZWY6IGZ1bmN0aW9uIChyZWYsIGNvbXBvbmVudCkge1xuICAgIHZhciBpbnN0ID0gdGhpcy5nZXRQdWJsaWNJbnN0YW5jZSgpO1xuICAgICEoaW5zdCAhPSBudWxsKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdTdGF0ZWxlc3MgZnVuY3Rpb24gY29tcG9uZW50cyBjYW5ub3QgaGF2ZSByZWZzLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICB2YXIgcHVibGljQ29tcG9uZW50SW5zdGFuY2UgPSBjb21wb25lbnQuZ2V0UHVibGljSW5zdGFuY2UoKTtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgdmFyIGNvbXBvbmVudE5hbWUgPSBjb21wb25lbnQgJiYgY29tcG9uZW50LmdldE5hbWUgPyBjb21wb25lbnQuZ2V0TmFtZSgpIDogJ2EgY29tcG9uZW50JztcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKHB1YmxpY0NvbXBvbmVudEluc3RhbmNlICE9IG51bGwsICdTdGF0ZWxlc3MgZnVuY3Rpb24gY29tcG9uZW50cyBjYW5ub3QgYmUgZ2l2ZW4gcmVmcyAnICsgJyhTZWUgcmVmIFwiJXNcIiBpbiAlcyBjcmVhdGVkIGJ5ICVzKS4gJyArICdBdHRlbXB0cyB0byBhY2Nlc3MgdGhpcyByZWYgd2lsbCBmYWlsLicsIHJlZiwgY29tcG9uZW50TmFtZSwgdGhpcy5nZXROYW1lKCkpIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICB2YXIgcmVmcyA9IGluc3QucmVmcyA9PT0gZW1wdHlPYmplY3QgPyBpbnN0LnJlZnMgPSB7fSA6IGluc3QucmVmcztcbiAgICByZWZzW3JlZl0gPSBwdWJsaWNDb21wb25lbnRJbnN0YW5jZTtcbiAgfSxcblxuICAvKipcbiAgICogRGV0YWNoZXMgYSByZWZlcmVuY2UgbmFtZS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlZiBOYW1lIHRvIGRlcmVmZXJlbmNlLlxuICAgKiBAZmluYWxcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGRldGFjaFJlZjogZnVuY3Rpb24gKHJlZikge1xuICAgIHZhciByZWZzID0gdGhpcy5nZXRQdWJsaWNJbnN0YW5jZSgpLnJlZnM7XG4gICAgZGVsZXRlIHJlZnNbcmVmXTtcbiAgfSxcblxuICAvKipcbiAgICogR2V0IGEgdGV4dCBkZXNjcmlwdGlvbiBvZiB0aGUgY29tcG9uZW50IHRoYXQgY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgaXRcbiAgICogaW4gZXJyb3IgbWVzc2FnZXMuXG4gICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIG5hbWUgb3IgbnVsbC5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBnZXROYW1lOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHR5cGUgPSB0aGlzLl9jdXJyZW50RWxlbWVudC50eXBlO1xuICAgIHZhciBjb25zdHJ1Y3RvciA9IHRoaXMuX2luc3RhbmNlICYmIHRoaXMuX2luc3RhbmNlLmNvbnN0cnVjdG9yO1xuICAgIHJldHVybiB0eXBlLmRpc3BsYXlOYW1lIHx8IGNvbnN0cnVjdG9yICYmIGNvbnN0cnVjdG9yLmRpc3BsYXlOYW1lIHx8IHR5cGUubmFtZSB8fCBjb25zdHJ1Y3RvciAmJiBjb25zdHJ1Y3Rvci5uYW1lIHx8IG51bGw7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgcHVibGljbHkgYWNjZXNzaWJsZSByZXByZXNlbnRhdGlvbiBvZiB0aGlzIGNvbXBvbmVudCAtIGkuZS4gd2hhdFxuICAgKiBpcyBleHBvc2VkIGJ5IHJlZnMgYW5kIHJldHVybmVkIGJ5IHJlbmRlci4gQ2FuIGJlIG51bGwgZm9yIHN0YXRlbGVzc1xuICAgKiBjb21wb25lbnRzLlxuICAgKlxuICAgKiBAcmV0dXJuIHtSZWFjdENvbXBvbmVudH0gdGhlIHB1YmxpYyBjb21wb25lbnQgaW5zdGFuY2UuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZ2V0UHVibGljSW5zdGFuY2U6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgaW5zdCA9IHRoaXMuX2luc3RhbmNlO1xuICAgIGlmIChpbnN0IGluc3RhbmNlb2YgU3RhdGVsZXNzQ29tcG9uZW50KSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIGluc3Q7XG4gIH0sXG5cbiAgLy8gU3R1YlxuICBfaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudDogbnVsbFxuXG59O1xuXG5SZWFjdFBlcmYubWVhc3VyZU1ldGhvZHMoUmVhY3RDb21wb3NpdGVDb21wb25lbnRNaXhpbiwgJ1JlYWN0Q29tcG9zaXRlQ29tcG9uZW50Jywge1xuICBtb3VudENvbXBvbmVudDogJ21vdW50Q29tcG9uZW50JyxcbiAgdXBkYXRlQ29tcG9uZW50OiAndXBkYXRlQ29tcG9uZW50JyxcbiAgX3JlbmRlclZhbGlkYXRlZENvbXBvbmVudDogJ19yZW5kZXJWYWxpZGF0ZWRDb21wb25lbnQnXG59KTtcblxudmFyIFJlYWN0Q29tcG9zaXRlQ29tcG9uZW50ID0ge1xuXG4gIE1peGluOiBSZWFjdENvbXBvc2l0ZUNvbXBvbmVudE1peGluXG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RDb21wb3NpdGVDb21wb25lbnQ7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0L2xpYi9SZWFjdENvbXBvc2l0ZUNvbXBvbmVudC5qc1xuLy8gbW9kdWxlIGlkID0gNjNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNC0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0Q29tcG9uZW50RW52aXJvbm1lbnRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcblxudmFyIGluamVjdGVkID0gZmFsc2U7XG5cbnZhciBSZWFjdENvbXBvbmVudEVudmlyb25tZW50ID0ge1xuXG4gIC8qKlxuICAgKiBPcHRpb25hbGx5IGluamVjdGFibGUgZW52aXJvbm1lbnQgZGVwZW5kZW50IGNsZWFudXAgaG9vay4gKHNlcnZlciB2cy5cbiAgICogYnJvd3NlciBldGMpLiBFeGFtcGxlOiBBIGJyb3dzZXIgc3lzdGVtIGNhY2hlcyBET00gbm9kZXMgYmFzZWQgb24gY29tcG9uZW50XG4gICAqIElEIGFuZCBtdXN0IHJlbW92ZSB0aGF0IGNhY2hlIGVudHJ5IHdoZW4gdGhpcyBpbnN0YW5jZSBpcyB1bm1vdW50ZWQuXG4gICAqL1xuICB1bm1vdW50SURGcm9tRW52aXJvbm1lbnQ6IG51bGwsXG5cbiAgLyoqXG4gICAqIE9wdGlvbmFsbHkgaW5qZWN0YWJsZSBob29rIGZvciBzd2FwcGluZyBvdXQgbW91bnQgaW1hZ2VzIGluIHRoZSBtaWRkbGUgb2ZcbiAgICogdGhlIHRyZWUuXG4gICAqL1xuICByZXBsYWNlTm9kZVdpdGhNYXJrdXBCeUlEOiBudWxsLFxuXG4gIC8qKlxuICAgKiBPcHRpb25hbGx5IGluamVjdGFibGUgaG9vayBmb3IgcHJvY2Vzc2luZyBhIHF1ZXVlIG9mIGNoaWxkIHVwZGF0ZXMuIFdpbGxcbiAgICogbGF0ZXIgbW92ZSBpbnRvIE11bHRpQ2hpbGRDb21wb25lbnRzLlxuICAgKi9cbiAgcHJvY2Vzc0NoaWxkcmVuVXBkYXRlczogbnVsbCxcblxuICBpbmplY3Rpb246IHtcbiAgICBpbmplY3RFbnZpcm9ubWVudDogZnVuY3Rpb24gKGVudmlyb25tZW50KSB7XG4gICAgICAhIWluamVjdGVkID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0Q29tcG9zaXRlQ29tcG9uZW50OiBpbmplY3RFbnZpcm9ubWVudCgpIGNhbiBvbmx5IGJlIGNhbGxlZCBvbmNlLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAgIFJlYWN0Q29tcG9uZW50RW52aXJvbm1lbnQudW5tb3VudElERnJvbUVudmlyb25tZW50ID0gZW52aXJvbm1lbnQudW5tb3VudElERnJvbUVudmlyb25tZW50O1xuICAgICAgUmVhY3RDb21wb25lbnRFbnZpcm9ubWVudC5yZXBsYWNlTm9kZVdpdGhNYXJrdXBCeUlEID0gZW52aXJvbm1lbnQucmVwbGFjZU5vZGVXaXRoTWFya3VwQnlJRDtcbiAgICAgIFJlYWN0Q29tcG9uZW50RW52aXJvbm1lbnQucHJvY2Vzc0NoaWxkcmVuVXBkYXRlcyA9IGVudmlyb25tZW50LnByb2Nlc3NDaGlsZHJlblVwZGF0ZXM7XG4gICAgICBpbmplY3RlZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RDb21wb25lbnRFbnZpcm9ubWVudDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QvbGliL1JlYWN0Q29tcG9uZW50RW52aXJvbm1lbnQuanNcbi8vIG1vZHVsZSBpZCA9IDY0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdFByb3BUeXBlTG9jYXRpb25zXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIga2V5TWlycm9yID0gcmVxdWlyZSgnZmJqcy9saWIva2V5TWlycm9yJyk7XG5cbnZhciBSZWFjdFByb3BUeXBlTG9jYXRpb25zID0ga2V5TWlycm9yKHtcbiAgcHJvcDogbnVsbCxcbiAgY29udGV4dDogbnVsbCxcbiAgY2hpbGRDb250ZXh0OiBudWxsXG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdFByb3BUeXBlTG9jYXRpb25zO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvUmVhY3RQcm9wVHlwZUxvY2F0aW9ucy5qc1xuLy8gbW9kdWxlIGlkID0gNjVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXMgPSB7fTtcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXMgPSB7XG4gICAgcHJvcDogJ3Byb3AnLFxuICAgIGNvbnRleHQ6ICdjb250ZXh0JyxcbiAgICBjaGlsZENvbnRleHQ6ICdjaGlsZCBjb250ZXh0J1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXMuanNcbi8vIG1vZHVsZSBpZCA9IDY2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBzaG91bGRVcGRhdGVSZWFjdENvbXBvbmVudFxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogR2l2ZW4gYSBgcHJldkVsZW1lbnRgIGFuZCBgbmV4dEVsZW1lbnRgLCBkZXRlcm1pbmVzIGlmIHRoZSBleGlzdGluZ1xuICogaW5zdGFuY2Ugc2hvdWxkIGJlIHVwZGF0ZWQgYXMgb3Bwb3NlZCB0byBiZWluZyBkZXN0cm95ZWQgb3IgcmVwbGFjZWQgYnkgYSBuZXdcbiAqIGluc3RhbmNlLiBCb3RoIGFyZ3VtZW50cyBhcmUgZWxlbWVudHMuIFRoaXMgZW5zdXJlcyB0aGF0IHRoaXMgbG9naWMgY2FuXG4gKiBvcGVyYXRlIG9uIHN0YXRlbGVzcyB0cmVlcyB3aXRob3V0IGFueSBiYWNraW5nIGluc3RhbmNlLlxuICpcbiAqIEBwYXJhbSB7P29iamVjdH0gcHJldkVsZW1lbnRcbiAqIEBwYXJhbSB7P29iamVjdH0gbmV4dEVsZW1lbnRcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGV4aXN0aW5nIGluc3RhbmNlIHNob3VsZCBiZSB1cGRhdGVkLlxuICogQHByb3RlY3RlZFxuICovXG5mdW5jdGlvbiBzaG91bGRVcGRhdGVSZWFjdENvbXBvbmVudChwcmV2RWxlbWVudCwgbmV4dEVsZW1lbnQpIHtcbiAgdmFyIHByZXZFbXB0eSA9IHByZXZFbGVtZW50ID09PSBudWxsIHx8IHByZXZFbGVtZW50ID09PSBmYWxzZTtcbiAgdmFyIG5leHRFbXB0eSA9IG5leHRFbGVtZW50ID09PSBudWxsIHx8IG5leHRFbGVtZW50ID09PSBmYWxzZTtcbiAgaWYgKHByZXZFbXB0eSB8fCBuZXh0RW1wdHkpIHtcbiAgICByZXR1cm4gcHJldkVtcHR5ID09PSBuZXh0RW1wdHk7XG4gIH1cblxuICB2YXIgcHJldlR5cGUgPSB0eXBlb2YgcHJldkVsZW1lbnQ7XG4gIHZhciBuZXh0VHlwZSA9IHR5cGVvZiBuZXh0RWxlbWVudDtcbiAgaWYgKHByZXZUeXBlID09PSAnc3RyaW5nJyB8fCBwcmV2VHlwZSA9PT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gbmV4dFR5cGUgPT09ICdzdHJpbmcnIHx8IG5leHRUeXBlID09PSAnbnVtYmVyJztcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV4dFR5cGUgPT09ICdvYmplY3QnICYmIHByZXZFbGVtZW50LnR5cGUgPT09IG5leHRFbGVtZW50LnR5cGUgJiYgcHJldkVsZW1lbnQua2V5ID09PSBuZXh0RWxlbWVudC5rZXk7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHNob3VsZFVwZGF0ZVJlYWN0Q29tcG9uZW50O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvc2hvdWxkVXBkYXRlUmVhY3RDb21wb25lbnQuanNcbi8vIG1vZHVsZSBpZCA9IDY3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdEVtcHR5Q29tcG9uZW50XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RFbGVtZW50ID0gcmVxdWlyZSgnLi9SZWFjdEVsZW1lbnQnKTtcbnZhciBSZWFjdEVtcHR5Q29tcG9uZW50UmVnaXN0cnkgPSByZXF1aXJlKCcuL1JlYWN0RW1wdHlDb21wb25lbnRSZWdpc3RyeScpO1xudmFyIFJlYWN0UmVjb25jaWxlciA9IHJlcXVpcmUoJy4vUmVhY3RSZWNvbmNpbGVyJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcblxudmFyIHBsYWNlaG9sZGVyRWxlbWVudDtcblxudmFyIFJlYWN0RW1wdHlDb21wb25lbnRJbmplY3Rpb24gPSB7XG4gIGluamVjdEVtcHR5Q29tcG9uZW50OiBmdW5jdGlvbiAoY29tcG9uZW50KSB7XG4gICAgcGxhY2Vob2xkZXJFbGVtZW50ID0gUmVhY3RFbGVtZW50LmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50KTtcbiAgfVxufTtcblxuZnVuY3Rpb24gcmVnaXN0ZXJOdWxsQ29tcG9uZW50SUQoKSB7XG4gIFJlYWN0RW1wdHlDb21wb25lbnRSZWdpc3RyeS5yZWdpc3Rlck51bGxDb21wb25lbnRJRCh0aGlzLl9yb290Tm9kZUlEKTtcbn1cblxudmFyIFJlYWN0RW1wdHlDb21wb25lbnQgPSBmdW5jdGlvbiAoaW5zdGFudGlhdGUpIHtcbiAgdGhpcy5fY3VycmVudEVsZW1lbnQgPSBudWxsO1xuICB0aGlzLl9yb290Tm9kZUlEID0gbnVsbDtcbiAgdGhpcy5fcmVuZGVyZWRDb21wb25lbnQgPSBpbnN0YW50aWF0ZShwbGFjZWhvbGRlckVsZW1lbnQpO1xufTtcbmFzc2lnbihSZWFjdEVtcHR5Q29tcG9uZW50LnByb3RvdHlwZSwge1xuICBjb25zdHJ1Y3Q6IGZ1bmN0aW9uIChlbGVtZW50KSB7fSxcbiAgbW91bnRDb21wb25lbnQ6IGZ1bmN0aW9uIChyb290SUQsIHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG4gICAgdHJhbnNhY3Rpb24uZ2V0UmVhY3RNb3VudFJlYWR5KCkuZW5xdWV1ZShyZWdpc3Rlck51bGxDb21wb25lbnRJRCwgdGhpcyk7XG4gICAgdGhpcy5fcm9vdE5vZGVJRCA9IHJvb3RJRDtcbiAgICByZXR1cm4gUmVhY3RSZWNvbmNpbGVyLm1vdW50Q29tcG9uZW50KHRoaXMuX3JlbmRlcmVkQ29tcG9uZW50LCByb290SUQsIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcbiAgfSxcbiAgcmVjZWl2ZUNvbXBvbmVudDogZnVuY3Rpb24gKCkge30sXG4gIHVubW91bnRDb21wb25lbnQ6IGZ1bmN0aW9uIChyb290SUQsIHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG4gICAgUmVhY3RSZWNvbmNpbGVyLnVubW91bnRDb21wb25lbnQodGhpcy5fcmVuZGVyZWRDb21wb25lbnQpO1xuICAgIFJlYWN0RW1wdHlDb21wb25lbnRSZWdpc3RyeS5kZXJlZ2lzdGVyTnVsbENvbXBvbmVudElEKHRoaXMuX3Jvb3ROb2RlSUQpO1xuICAgIHRoaXMuX3Jvb3ROb2RlSUQgPSBudWxsO1xuICAgIHRoaXMuX3JlbmRlcmVkQ29tcG9uZW50ID0gbnVsbDtcbiAgfVxufSk7XG5cblJlYWN0RW1wdHlDb21wb25lbnQuaW5qZWN0aW9uID0gUmVhY3RFbXB0eUNvbXBvbmVudEluamVjdGlvbjtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdEVtcHR5Q29tcG9uZW50O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvUmVhY3RFbXB0eUNvbXBvbmVudC5qc1xuLy8gbW9kdWxlIGlkID0gNjhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNC0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0TmF0aXZlQ29tcG9uZW50XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbnZhciBhdXRvR2VuZXJhdGVXcmFwcGVyQ2xhc3MgPSBudWxsO1xudmFyIGdlbmVyaWNDb21wb25lbnRDbGFzcyA9IG51bGw7XG4vLyBUaGlzIHJlZ2lzdHJ5IGtlZXBzIHRyYWNrIG9mIHdyYXBwZXIgY2xhc3NlcyBhcm91bmQgbmF0aXZlIHRhZ3MuXG52YXIgdGFnVG9Db21wb25lbnRDbGFzcyA9IHt9O1xudmFyIHRleHRDb21wb25lbnRDbGFzcyA9IG51bGw7XG5cbnZhciBSZWFjdE5hdGl2ZUNvbXBvbmVudEluamVjdGlvbiA9IHtcbiAgLy8gVGhpcyBhY2NlcHRzIGEgY2xhc3MgdGhhdCByZWNlaXZlcyB0aGUgdGFnIHN0cmluZy4gVGhpcyBpcyBhIGNhdGNoIGFsbFxuICAvLyB0aGF0IGNhbiByZW5kZXIgYW55IGtpbmQgb2YgdGFnLlxuICBpbmplY3RHZW5lcmljQ29tcG9uZW50Q2xhc3M6IGZ1bmN0aW9uIChjb21wb25lbnRDbGFzcykge1xuICAgIGdlbmVyaWNDb21wb25lbnRDbGFzcyA9IGNvbXBvbmVudENsYXNzO1xuICB9LFxuICAvLyBUaGlzIGFjY2VwdHMgYSB0ZXh0IGNvbXBvbmVudCBjbGFzcyB0aGF0IHRha2VzIHRoZSB0ZXh0IHN0cmluZyB0byBiZVxuICAvLyByZW5kZXJlZCBhcyBwcm9wcy5cbiAgaW5qZWN0VGV4dENvbXBvbmVudENsYXNzOiBmdW5jdGlvbiAoY29tcG9uZW50Q2xhc3MpIHtcbiAgICB0ZXh0Q29tcG9uZW50Q2xhc3MgPSBjb21wb25lbnRDbGFzcztcbiAgfSxcbiAgLy8gVGhpcyBhY2NlcHRzIGEga2V5ZWQgb2JqZWN0IHdpdGggY2xhc3NlcyBhcyB2YWx1ZXMuIEVhY2gga2V5IHJlcHJlc2VudHMgYVxuICAvLyB0YWcuIFRoYXQgcGFydGljdWxhciB0YWcgd2lsbCB1c2UgdGhpcyBjbGFzcyBpbnN0ZWFkIG9mIHRoZSBnZW5lcmljIG9uZS5cbiAgaW5qZWN0Q29tcG9uZW50Q2xhc3NlczogZnVuY3Rpb24gKGNvbXBvbmVudENsYXNzZXMpIHtcbiAgICBhc3NpZ24odGFnVG9Db21wb25lbnRDbGFzcywgY29tcG9uZW50Q2xhc3Nlcyk7XG4gIH1cbn07XG5cbi8qKlxuICogR2V0IGEgY29tcG9zaXRlIGNvbXBvbmVudCB3cmFwcGVyIGNsYXNzIGZvciBhIHNwZWNpZmljIHRhZy5cbiAqXG4gKiBAcGFyYW0ge1JlYWN0RWxlbWVudH0gZWxlbWVudCBUaGUgdGFnIGZvciB3aGljaCB0byBnZXQgdGhlIGNsYXNzLlxuICogQHJldHVybiB7ZnVuY3Rpb259IFRoZSBSZWFjdCBjbGFzcyBjb25zdHJ1Y3RvciBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gZ2V0Q29tcG9uZW50Q2xhc3NGb3JFbGVtZW50KGVsZW1lbnQpIHtcbiAgaWYgKHR5cGVvZiBlbGVtZW50LnR5cGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gZWxlbWVudC50eXBlO1xuICB9XG4gIHZhciB0YWcgPSBlbGVtZW50LnR5cGU7XG4gIHZhciBjb21wb25lbnRDbGFzcyA9IHRhZ1RvQ29tcG9uZW50Q2xhc3NbdGFnXTtcbiAgaWYgKGNvbXBvbmVudENsYXNzID09IG51bGwpIHtcbiAgICB0YWdUb0NvbXBvbmVudENsYXNzW3RhZ10gPSBjb21wb25lbnRDbGFzcyA9IGF1dG9HZW5lcmF0ZVdyYXBwZXJDbGFzcyh0YWcpO1xuICB9XG4gIHJldHVybiBjb21wb25lbnRDbGFzcztcbn1cblxuLyoqXG4gKiBHZXQgYSBuYXRpdmUgaW50ZXJuYWwgY29tcG9uZW50IGNsYXNzIGZvciBhIHNwZWNpZmljIHRhZy5cbiAqXG4gKiBAcGFyYW0ge1JlYWN0RWxlbWVudH0gZWxlbWVudCBUaGUgZWxlbWVudCB0byBjcmVhdGUuXG4gKiBAcmV0dXJuIHtmdW5jdGlvbn0gVGhlIGludGVybmFsIGNsYXNzIGNvbnN0cnVjdG9yIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBjcmVhdGVJbnRlcm5hbENvbXBvbmVudChlbGVtZW50KSB7XG4gICFnZW5lcmljQ29tcG9uZW50Q2xhc3MgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnVGhlcmUgaXMgbm8gcmVnaXN0ZXJlZCBjb21wb25lbnQgZm9yIHRoZSB0YWcgJXMnLCBlbGVtZW50LnR5cGUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgcmV0dXJuIG5ldyBnZW5lcmljQ29tcG9uZW50Q2xhc3MoZWxlbWVudC50eXBlLCBlbGVtZW50LnByb3BzKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge1JlYWN0VGV4dH0gdGV4dFxuICogQHJldHVybiB7UmVhY3RDb21wb25lbnR9XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUluc3RhbmNlRm9yVGV4dCh0ZXh0KSB7XG4gIHJldHVybiBuZXcgdGV4dENvbXBvbmVudENsYXNzKHRleHQpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7UmVhY3RDb21wb25lbnR9IGNvbXBvbmVudFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNUZXh0Q29tcG9uZW50KGNvbXBvbmVudCkge1xuICByZXR1cm4gY29tcG9uZW50IGluc3RhbmNlb2YgdGV4dENvbXBvbmVudENsYXNzO1xufVxuXG52YXIgUmVhY3ROYXRpdmVDb21wb25lbnQgPSB7XG4gIGdldENvbXBvbmVudENsYXNzRm9yRWxlbWVudDogZ2V0Q29tcG9uZW50Q2xhc3NGb3JFbGVtZW50LFxuICBjcmVhdGVJbnRlcm5hbENvbXBvbmVudDogY3JlYXRlSW50ZXJuYWxDb21wb25lbnQsXG4gIGNyZWF0ZUluc3RhbmNlRm9yVGV4dDogY3JlYXRlSW5zdGFuY2VGb3JUZXh0LFxuICBpc1RleHRDb21wb25lbnQ6IGlzVGV4dENvbXBvbmVudCxcbiAgaW5qZWN0aW9uOiBSZWFjdE5hdGl2ZUNvbXBvbmVudEluamVjdGlvblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdE5hdGl2ZUNvbXBvbmVudDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QvbGliL1JlYWN0TmF0aXZlQ29tcG9uZW50LmpzXG4vLyBtb2R1bGUgaWQgPSA2OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIHZhbGlkYXRlRE9NTmVzdGluZ1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIGVtcHR5RnVuY3Rpb24gPSByZXF1aXJlKCdmYmpzL2xpYi9lbXB0eUZ1bmN0aW9uJyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxudmFyIHZhbGlkYXRlRE9NTmVzdGluZyA9IGVtcHR5RnVuY3Rpb247XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIC8vIFRoaXMgdmFsaWRhdGlvbiBjb2RlIHdhcyB3cml0dGVuIGJhc2VkIG9uIHRoZSBIVE1MNSBwYXJzaW5nIHNwZWM6XG4gIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI2hhcy1hbi1lbGVtZW50LWluLXNjb3BlXG4gIC8vXG4gIC8vIE5vdGU6IHRoaXMgZG9lcyBub3QgY2F0Y2ggYWxsIGludmFsaWQgbmVzdGluZywgbm9yIGRvZXMgaXQgdHJ5IHRvIChhcyBpdCdzXG4gIC8vIG5vdCBjbGVhciB3aGF0IHByYWN0aWNhbCBiZW5lZml0IGRvaW5nIHNvIHByb3ZpZGVzKTsgaW5zdGVhZCwgd2Ugd2FybiBvbmx5XG4gIC8vIGZvciBjYXNlcyB3aGVyZSB0aGUgcGFyc2VyIHdpbGwgZ2l2ZSBhIHBhcnNlIHRyZWUgZGlmZmVyaW5nIGZyb20gd2hhdCBSZWFjdFxuICAvLyBpbnRlbmRlZC4gRm9yIGV4YW1wbGUsIDxiPjxkaXY+PC9kaXY+PC9iPiBpcyBpbnZhbGlkIGJ1dCB3ZSBkb24ndCB3YXJuXG4gIC8vIGJlY2F1c2UgaXQgc3RpbGwgcGFyc2VzIGNvcnJlY3RseTsgd2UgZG8gd2FybiBmb3Igb3RoZXIgY2FzZXMgbGlrZSBuZXN0ZWRcbiAgLy8gPHA+IHRhZ3Mgd2hlcmUgdGhlIGJlZ2lubmluZyBvZiB0aGUgc2Vjb25kIGVsZW1lbnQgaW1wbGljaXRseSBjbG9zZXMgdGhlXG4gIC8vIGZpcnN0LCBjYXVzaW5nIGEgY29uZnVzaW5nIG1lc3MuXG5cbiAgLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc3ludGF4Lmh0bWwjc3BlY2lhbFxuICB2YXIgc3BlY2lhbFRhZ3MgPSBbJ2FkZHJlc3MnLCAnYXBwbGV0JywgJ2FyZWEnLCAnYXJ0aWNsZScsICdhc2lkZScsICdiYXNlJywgJ2Jhc2Vmb250JywgJ2Jnc291bmQnLCAnYmxvY2txdW90ZScsICdib2R5JywgJ2JyJywgJ2J1dHRvbicsICdjYXB0aW9uJywgJ2NlbnRlcicsICdjb2wnLCAnY29sZ3JvdXAnLCAnZGQnLCAnZGV0YWlscycsICdkaXInLCAnZGl2JywgJ2RsJywgJ2R0JywgJ2VtYmVkJywgJ2ZpZWxkc2V0JywgJ2ZpZ2NhcHRpb24nLCAnZmlndXJlJywgJ2Zvb3RlcicsICdmb3JtJywgJ2ZyYW1lJywgJ2ZyYW1lc2V0JywgJ2gxJywgJ2gyJywgJ2gzJywgJ2g0JywgJ2g1JywgJ2g2JywgJ2hlYWQnLCAnaGVhZGVyJywgJ2hncm91cCcsICdocicsICdodG1sJywgJ2lmcmFtZScsICdpbWcnLCAnaW5wdXQnLCAnaXNpbmRleCcsICdsaScsICdsaW5rJywgJ2xpc3RpbmcnLCAnbWFpbicsICdtYXJxdWVlJywgJ21lbnUnLCAnbWVudWl0ZW0nLCAnbWV0YScsICduYXYnLCAnbm9lbWJlZCcsICdub2ZyYW1lcycsICdub3NjcmlwdCcsICdvYmplY3QnLCAnb2wnLCAncCcsICdwYXJhbScsICdwbGFpbnRleHQnLCAncHJlJywgJ3NjcmlwdCcsICdzZWN0aW9uJywgJ3NlbGVjdCcsICdzb3VyY2UnLCAnc3R5bGUnLCAnc3VtbWFyeScsICd0YWJsZScsICd0Ym9keScsICd0ZCcsICd0ZW1wbGF0ZScsICd0ZXh0YXJlYScsICd0Zm9vdCcsICd0aCcsICd0aGVhZCcsICd0aXRsZScsICd0cicsICd0cmFjaycsICd1bCcsICd3YnInLCAneG1wJ107XG5cbiAgLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc3ludGF4Lmh0bWwjaGFzLWFuLWVsZW1lbnQtaW4tc2NvcGVcbiAgdmFyIGluU2NvcGVUYWdzID0gWydhcHBsZXQnLCAnY2FwdGlvbicsICdodG1sJywgJ3RhYmxlJywgJ3RkJywgJ3RoJywgJ21hcnF1ZWUnLCAnb2JqZWN0JywgJ3RlbXBsYXRlJyxcblxuICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNodG1sLWludGVncmF0aW9uLXBvaW50XG4gIC8vIFRPRE86IERpc3Rpbmd1aXNoIGJ5IG5hbWVzcGFjZSBoZXJlIC0tIGZvciA8dGl0bGU+LCBpbmNsdWRpbmcgaXQgaGVyZVxuICAvLyBlcnJzIG9uIHRoZSBzaWRlIG9mIGZld2VyIHdhcm5pbmdzXG4gICdmb3JlaWduT2JqZWN0JywgJ2Rlc2MnLCAndGl0bGUnXTtcblxuICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNoYXMtYW4tZWxlbWVudC1pbi1idXR0b24tc2NvcGVcbiAgdmFyIGJ1dHRvblNjb3BlVGFncyA9IGluU2NvcGVUYWdzLmNvbmNhdChbJ2J1dHRvbiddKTtcblxuICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNnZW5lcmF0ZS1pbXBsaWVkLWVuZC10YWdzXG4gIHZhciBpbXBsaWVkRW5kVGFncyA9IFsnZGQnLCAnZHQnLCAnbGknLCAnb3B0aW9uJywgJ29wdGdyb3VwJywgJ3AnLCAncnAnLCAncnQnXTtcblxuICB2YXIgZW1wdHlBbmNlc3RvckluZm8gPSB7XG4gICAgcGFyZW50VGFnOiBudWxsLFxuXG4gICAgZm9ybVRhZzogbnVsbCxcbiAgICBhVGFnSW5TY29wZTogbnVsbCxcbiAgICBidXR0b25UYWdJblNjb3BlOiBudWxsLFxuICAgIG5vYnJUYWdJblNjb3BlOiBudWxsLFxuICAgIHBUYWdJbkJ1dHRvblNjb3BlOiBudWxsLFxuXG4gICAgbGlzdEl0ZW1UYWdBdXRvY2xvc2luZzogbnVsbCxcbiAgICBkbEl0ZW1UYWdBdXRvY2xvc2luZzogbnVsbFxuICB9O1xuXG4gIHZhciB1cGRhdGVkQW5jZXN0b3JJbmZvID0gZnVuY3Rpb24gKG9sZEluZm8sIHRhZywgaW5zdGFuY2UpIHtcbiAgICB2YXIgYW5jZXN0b3JJbmZvID0gYXNzaWduKHt9LCBvbGRJbmZvIHx8IGVtcHR5QW5jZXN0b3JJbmZvKTtcbiAgICB2YXIgaW5mbyA9IHsgdGFnOiB0YWcsIGluc3RhbmNlOiBpbnN0YW5jZSB9O1xuXG4gICAgaWYgKGluU2NvcGVUYWdzLmluZGV4T2YodGFnKSAhPT0gLTEpIHtcbiAgICAgIGFuY2VzdG9ySW5mby5hVGFnSW5TY29wZSA9IG51bGw7XG4gICAgICBhbmNlc3RvckluZm8uYnV0dG9uVGFnSW5TY29wZSA9IG51bGw7XG4gICAgICBhbmNlc3RvckluZm8ubm9iclRhZ0luU2NvcGUgPSBudWxsO1xuICAgIH1cbiAgICBpZiAoYnV0dG9uU2NvcGVUYWdzLmluZGV4T2YodGFnKSAhPT0gLTEpIHtcbiAgICAgIGFuY2VzdG9ySW5mby5wVGFnSW5CdXR0b25TY29wZSA9IG51bGw7XG4gICAgfVxuXG4gICAgLy8gU2VlIHJ1bGVzIGZvciAnbGknLCAnZGQnLCAnZHQnIHN0YXJ0IHRhZ3MgaW5cbiAgICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNwYXJzaW5nLW1haW4taW5ib2R5XG4gICAgaWYgKHNwZWNpYWxUYWdzLmluZGV4T2YodGFnKSAhPT0gLTEgJiYgdGFnICE9PSAnYWRkcmVzcycgJiYgdGFnICE9PSAnZGl2JyAmJiB0YWcgIT09ICdwJykge1xuICAgICAgYW5jZXN0b3JJbmZvLmxpc3RJdGVtVGFnQXV0b2Nsb3NpbmcgPSBudWxsO1xuICAgICAgYW5jZXN0b3JJbmZvLmRsSXRlbVRhZ0F1dG9jbG9zaW5nID0gbnVsbDtcbiAgICB9XG5cbiAgICBhbmNlc3RvckluZm8ucGFyZW50VGFnID0gaW5mbztcblxuICAgIGlmICh0YWcgPT09ICdmb3JtJykge1xuICAgICAgYW5jZXN0b3JJbmZvLmZvcm1UYWcgPSBpbmZvO1xuICAgIH1cbiAgICBpZiAodGFnID09PSAnYScpIHtcbiAgICAgIGFuY2VzdG9ySW5mby5hVGFnSW5TY29wZSA9IGluZm87XG4gICAgfVxuICAgIGlmICh0YWcgPT09ICdidXR0b24nKSB7XG4gICAgICBhbmNlc3RvckluZm8uYnV0dG9uVGFnSW5TY29wZSA9IGluZm87XG4gICAgfVxuICAgIGlmICh0YWcgPT09ICdub2JyJykge1xuICAgICAgYW5jZXN0b3JJbmZvLm5vYnJUYWdJblNjb3BlID0gaW5mbztcbiAgICB9XG4gICAgaWYgKHRhZyA9PT0gJ3AnKSB7XG4gICAgICBhbmNlc3RvckluZm8ucFRhZ0luQnV0dG9uU2NvcGUgPSBpbmZvO1xuICAgIH1cbiAgICBpZiAodGFnID09PSAnbGknKSB7XG4gICAgICBhbmNlc3RvckluZm8ubGlzdEl0ZW1UYWdBdXRvY2xvc2luZyA9IGluZm87XG4gICAgfVxuICAgIGlmICh0YWcgPT09ICdkZCcgfHwgdGFnID09PSAnZHQnKSB7XG4gICAgICBhbmNlc3RvckluZm8uZGxJdGVtVGFnQXV0b2Nsb3NpbmcgPSBpbmZvO1xuICAgIH1cblxuICAgIHJldHVybiBhbmNlc3RvckluZm87XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgd2hldGhlclxuICAgKi9cbiAgdmFyIGlzVGFnVmFsaWRXaXRoUGFyZW50ID0gZnVuY3Rpb24gKHRhZywgcGFyZW50VGFnKSB7XG4gICAgLy8gRmlyc3QsIGxldCdzIGNoZWNrIGlmIHdlJ3JlIGluIGFuIHVudXN1YWwgcGFyc2luZyBtb2RlLi4uXG4gICAgc3dpdGNoIChwYXJlbnRUYWcpIHtcbiAgICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI3BhcnNpbmctbWFpbi1pbnNlbGVjdFxuICAgICAgY2FzZSAnc2VsZWN0JzpcbiAgICAgICAgcmV0dXJuIHRhZyA9PT0gJ29wdGlvbicgfHwgdGFnID09PSAnb3B0Z3JvdXAnIHx8IHRhZyA9PT0gJyN0ZXh0JztcbiAgICAgIGNhc2UgJ29wdGdyb3VwJzpcbiAgICAgICAgcmV0dXJuIHRhZyA9PT0gJ29wdGlvbicgfHwgdGFnID09PSAnI3RleHQnO1xuICAgICAgLy8gU3RyaWN0bHkgc3BlYWtpbmcsIHNlZWluZyBhbiA8b3B0aW9uPiBkb2Vzbid0IG1lYW4gd2UncmUgaW4gYSA8c2VsZWN0PlxuICAgICAgLy8gYnV0XG4gICAgICBjYXNlICdvcHRpb24nOlxuICAgICAgICByZXR1cm4gdGFnID09PSAnI3RleHQnO1xuXG4gICAgICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNwYXJzaW5nLW1haW4taW50ZFxuICAgICAgLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc3ludGF4Lmh0bWwjcGFyc2luZy1tYWluLWluY2FwdGlvblxuICAgICAgLy8gTm8gc3BlY2lhbCBiZWhhdmlvciBzaW5jZSB0aGVzZSBydWxlcyBmYWxsIGJhY2sgdG8gXCJpbiBib2R5XCIgbW9kZSBmb3JcbiAgICAgIC8vIGFsbCBleGNlcHQgc3BlY2lhbCB0YWJsZSBub2RlcyB3aGljaCBjYXVzZSBiYWQgcGFyc2luZyBiZWhhdmlvciBhbnl3YXkuXG5cbiAgICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI3BhcnNpbmctbWFpbi1pbnRyXG4gICAgICBjYXNlICd0cic6XG4gICAgICAgIHJldHVybiB0YWcgPT09ICd0aCcgfHwgdGFnID09PSAndGQnIHx8IHRhZyA9PT0gJ3N0eWxlJyB8fCB0YWcgPT09ICdzY3JpcHQnIHx8IHRhZyA9PT0gJ3RlbXBsYXRlJztcblxuICAgICAgLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc3ludGF4Lmh0bWwjcGFyc2luZy1tYWluLWludGJvZHlcbiAgICAgIGNhc2UgJ3Rib2R5JzpcbiAgICAgIGNhc2UgJ3RoZWFkJzpcbiAgICAgIGNhc2UgJ3Rmb290JzpcbiAgICAgICAgcmV0dXJuIHRhZyA9PT0gJ3RyJyB8fCB0YWcgPT09ICdzdHlsZScgfHwgdGFnID09PSAnc2NyaXB0JyB8fCB0YWcgPT09ICd0ZW1wbGF0ZSc7XG5cbiAgICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI3BhcnNpbmctbWFpbi1pbmNvbGdyb3VwXG4gICAgICBjYXNlICdjb2xncm91cCc6XG4gICAgICAgIHJldHVybiB0YWcgPT09ICdjb2wnIHx8IHRhZyA9PT0gJ3RlbXBsYXRlJztcblxuICAgICAgLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc3ludGF4Lmh0bWwjcGFyc2luZy1tYWluLWludGFibGVcbiAgICAgIGNhc2UgJ3RhYmxlJzpcbiAgICAgICAgcmV0dXJuIHRhZyA9PT0gJ2NhcHRpb24nIHx8IHRhZyA9PT0gJ2NvbGdyb3VwJyB8fCB0YWcgPT09ICd0Ym9keScgfHwgdGFnID09PSAndGZvb3QnIHx8IHRhZyA9PT0gJ3RoZWFkJyB8fCB0YWcgPT09ICdzdHlsZScgfHwgdGFnID09PSAnc2NyaXB0JyB8fCB0YWcgPT09ICd0ZW1wbGF0ZSc7XG5cbiAgICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI3BhcnNpbmctbWFpbi1pbmhlYWRcbiAgICAgIGNhc2UgJ2hlYWQnOlxuICAgICAgICByZXR1cm4gdGFnID09PSAnYmFzZScgfHwgdGFnID09PSAnYmFzZWZvbnQnIHx8IHRhZyA9PT0gJ2Jnc291bmQnIHx8IHRhZyA9PT0gJ2xpbmsnIHx8IHRhZyA9PT0gJ21ldGEnIHx8IHRhZyA9PT0gJ3RpdGxlJyB8fCB0YWcgPT09ICdub3NjcmlwdCcgfHwgdGFnID09PSAnbm9mcmFtZXMnIHx8IHRhZyA9PT0gJ3N0eWxlJyB8fCB0YWcgPT09ICdzY3JpcHQnIHx8IHRhZyA9PT0gJ3RlbXBsYXRlJztcblxuICAgICAgLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc2VtYW50aWNzLmh0bWwjdGhlLWh0bWwtZWxlbWVudFxuICAgICAgY2FzZSAnaHRtbCc6XG4gICAgICAgIHJldHVybiB0YWcgPT09ICdoZWFkJyB8fCB0YWcgPT09ICdib2R5JztcbiAgICB9XG5cbiAgICAvLyBQcm9iYWJseSBpbiB0aGUgXCJpbiBib2R5XCIgcGFyc2luZyBtb2RlLCBzbyB3ZSBvdXRsYXcgb25seSB0YWcgY29tYm9zXG4gICAgLy8gd2hlcmUgdGhlIHBhcnNpbmcgcnVsZXMgY2F1c2UgaW1wbGljaXQgb3BlbnMgb3IgY2xvc2VzIHRvIGJlIGFkZGVkLlxuICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI3BhcnNpbmctbWFpbi1pbmJvZHlcbiAgICBzd2l0Y2ggKHRhZykge1xuICAgICAgY2FzZSAnaDEnOlxuICAgICAgY2FzZSAnaDInOlxuICAgICAgY2FzZSAnaDMnOlxuICAgICAgY2FzZSAnaDQnOlxuICAgICAgY2FzZSAnaDUnOlxuICAgICAgY2FzZSAnaDYnOlxuICAgICAgICByZXR1cm4gcGFyZW50VGFnICE9PSAnaDEnICYmIHBhcmVudFRhZyAhPT0gJ2gyJyAmJiBwYXJlbnRUYWcgIT09ICdoMycgJiYgcGFyZW50VGFnICE9PSAnaDQnICYmIHBhcmVudFRhZyAhPT0gJ2g1JyAmJiBwYXJlbnRUYWcgIT09ICdoNic7XG5cbiAgICAgIGNhc2UgJ3JwJzpcbiAgICAgIGNhc2UgJ3J0JzpcbiAgICAgICAgcmV0dXJuIGltcGxpZWRFbmRUYWdzLmluZGV4T2YocGFyZW50VGFnKSA9PT0gLTE7XG5cbiAgICAgIGNhc2UgJ2NhcHRpb24nOlxuICAgICAgY2FzZSAnY29sJzpcbiAgICAgIGNhc2UgJ2NvbGdyb3VwJzpcbiAgICAgIGNhc2UgJ2ZyYW1lJzpcbiAgICAgIGNhc2UgJ2hlYWQnOlxuICAgICAgY2FzZSAndGJvZHknOlxuICAgICAgY2FzZSAndGQnOlxuICAgICAgY2FzZSAndGZvb3QnOlxuICAgICAgY2FzZSAndGgnOlxuICAgICAgY2FzZSAndGhlYWQnOlxuICAgICAgY2FzZSAndHInOlxuICAgICAgICAvLyBUaGVzZSB0YWdzIGFyZSBvbmx5IHZhbGlkIHdpdGggYSBmZXcgcGFyZW50cyB0aGF0IGhhdmUgc3BlY2lhbCBjaGlsZFxuICAgICAgICAvLyBwYXJzaW5nIHJ1bGVzIC0tIGlmIHdlJ3JlIGRvd24gaGVyZSwgdGhlbiBub25lIG9mIHRob3NlIG1hdGNoZWQgYW5kXG4gICAgICAgIC8vIHNvIHdlIGFsbG93IGl0IG9ubHkgaWYgd2UgZG9uJ3Qga25vdyB3aGF0IHRoZSBwYXJlbnQgaXMsIGFzIGFsbCBvdGhlclxuICAgICAgICAvLyBjYXNlcyBhcmUgaW52YWxpZC5cbiAgICAgICAgcmV0dXJuIHBhcmVudFRhZyA9PSBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXJcbiAgICovXG4gIHZhciBmaW5kSW52YWxpZEFuY2VzdG9yRm9yVGFnID0gZnVuY3Rpb24gKHRhZywgYW5jZXN0b3JJbmZvKSB7XG4gICAgc3dpdGNoICh0YWcpIHtcbiAgICAgIGNhc2UgJ2FkZHJlc3MnOlxuICAgICAgY2FzZSAnYXJ0aWNsZSc6XG4gICAgICBjYXNlICdhc2lkZSc6XG4gICAgICBjYXNlICdibG9ja3F1b3RlJzpcbiAgICAgIGNhc2UgJ2NlbnRlcic6XG4gICAgICBjYXNlICdkZXRhaWxzJzpcbiAgICAgIGNhc2UgJ2RpYWxvZyc6XG4gICAgICBjYXNlICdkaXInOlxuICAgICAgY2FzZSAnZGl2JzpcbiAgICAgIGNhc2UgJ2RsJzpcbiAgICAgIGNhc2UgJ2ZpZWxkc2V0JzpcbiAgICAgIGNhc2UgJ2ZpZ2NhcHRpb24nOlxuICAgICAgY2FzZSAnZmlndXJlJzpcbiAgICAgIGNhc2UgJ2Zvb3Rlcic6XG4gICAgICBjYXNlICdoZWFkZXInOlxuICAgICAgY2FzZSAnaGdyb3VwJzpcbiAgICAgIGNhc2UgJ21haW4nOlxuICAgICAgY2FzZSAnbWVudSc6XG4gICAgICBjYXNlICduYXYnOlxuICAgICAgY2FzZSAnb2wnOlxuICAgICAgY2FzZSAncCc6XG4gICAgICBjYXNlICdzZWN0aW9uJzpcbiAgICAgIGNhc2UgJ3N1bW1hcnknOlxuICAgICAgY2FzZSAndWwnOlxuXG4gICAgICBjYXNlICdwcmUnOlxuICAgICAgY2FzZSAnbGlzdGluZyc6XG5cbiAgICAgIGNhc2UgJ3RhYmxlJzpcblxuICAgICAgY2FzZSAnaHInOlxuXG4gICAgICBjYXNlICd4bXAnOlxuXG4gICAgICBjYXNlICdoMSc6XG4gICAgICBjYXNlICdoMic6XG4gICAgICBjYXNlICdoMyc6XG4gICAgICBjYXNlICdoNCc6XG4gICAgICBjYXNlICdoNSc6XG4gICAgICBjYXNlICdoNic6XG4gICAgICAgIHJldHVybiBhbmNlc3RvckluZm8ucFRhZ0luQnV0dG9uU2NvcGU7XG5cbiAgICAgIGNhc2UgJ2Zvcm0nOlxuICAgICAgICByZXR1cm4gYW5jZXN0b3JJbmZvLmZvcm1UYWcgfHwgYW5jZXN0b3JJbmZvLnBUYWdJbkJ1dHRvblNjb3BlO1xuXG4gICAgICBjYXNlICdsaSc6XG4gICAgICAgIHJldHVybiBhbmNlc3RvckluZm8ubGlzdEl0ZW1UYWdBdXRvY2xvc2luZztcblxuICAgICAgY2FzZSAnZGQnOlxuICAgICAgY2FzZSAnZHQnOlxuICAgICAgICByZXR1cm4gYW5jZXN0b3JJbmZvLmRsSXRlbVRhZ0F1dG9jbG9zaW5nO1xuXG4gICAgICBjYXNlICdidXR0b24nOlxuICAgICAgICByZXR1cm4gYW5jZXN0b3JJbmZvLmJ1dHRvblRhZ0luU2NvcGU7XG5cbiAgICAgIGNhc2UgJ2EnOlxuICAgICAgICAvLyBTcGVjIHNheXMgc29tZXRoaW5nIGFib3V0IHN0b3JpbmcgYSBsaXN0IG9mIG1hcmtlcnMsIGJ1dCBpdCBzb3VuZHNcbiAgICAgICAgLy8gZXF1aXZhbGVudCB0byB0aGlzIGNoZWNrLlxuICAgICAgICByZXR1cm4gYW5jZXN0b3JJbmZvLmFUYWdJblNjb3BlO1xuXG4gICAgICBjYXNlICdub2JyJzpcbiAgICAgICAgcmV0dXJuIGFuY2VzdG9ySW5mby5ub2JyVGFnSW5TY29wZTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICAvKipcbiAgICogR2l2ZW4gYSBSZWFjdENvbXBvc2l0ZUNvbXBvbmVudCBpbnN0YW5jZSwgcmV0dXJuIGEgbGlzdCBvZiBpdHMgcmVjdXJzaXZlXG4gICAqIG93bmVycywgc3RhcnRpbmcgYXQgdGhlIHJvb3QgYW5kIGVuZGluZyB3aXRoIHRoZSBpbnN0YW5jZSBpdHNlbGYuXG4gICAqL1xuICB2YXIgZmluZE93bmVyU3RhY2sgPSBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcbiAgICBpZiAoIWluc3RhbmNlKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgdmFyIHN0YWNrID0gW107XG4gICAgLyplc2xpbnQtZGlzYWJsZSBzcGFjZS1hZnRlci1rZXl3b3JkcyAqL1xuICAgIGRvIHtcbiAgICAgIC8qZXNsaW50LWVuYWJsZSBzcGFjZS1hZnRlci1rZXl3b3JkcyAqL1xuICAgICAgc3RhY2sucHVzaChpbnN0YW5jZSk7XG4gICAgfSB3aGlsZSAoaW5zdGFuY2UgPSBpbnN0YW5jZS5fY3VycmVudEVsZW1lbnQuX293bmVyKTtcbiAgICBzdGFjay5yZXZlcnNlKCk7XG4gICAgcmV0dXJuIHN0YWNrO1xuICB9O1xuXG4gIHZhciBkaWRXYXJuID0ge307XG5cbiAgdmFsaWRhdGVET01OZXN0aW5nID0gZnVuY3Rpb24gKGNoaWxkVGFnLCBjaGlsZEluc3RhbmNlLCBhbmNlc3RvckluZm8pIHtcbiAgICBhbmNlc3RvckluZm8gPSBhbmNlc3RvckluZm8gfHwgZW1wdHlBbmNlc3RvckluZm87XG4gICAgdmFyIHBhcmVudEluZm8gPSBhbmNlc3RvckluZm8ucGFyZW50VGFnO1xuICAgIHZhciBwYXJlbnRUYWcgPSBwYXJlbnRJbmZvICYmIHBhcmVudEluZm8udGFnO1xuXG4gICAgdmFyIGludmFsaWRQYXJlbnQgPSBpc1RhZ1ZhbGlkV2l0aFBhcmVudChjaGlsZFRhZywgcGFyZW50VGFnKSA/IG51bGwgOiBwYXJlbnRJbmZvO1xuICAgIHZhciBpbnZhbGlkQW5jZXN0b3IgPSBpbnZhbGlkUGFyZW50ID8gbnVsbCA6IGZpbmRJbnZhbGlkQW5jZXN0b3JGb3JUYWcoY2hpbGRUYWcsIGFuY2VzdG9ySW5mbyk7XG4gICAgdmFyIHByb2JsZW1hdGljID0gaW52YWxpZFBhcmVudCB8fCBpbnZhbGlkQW5jZXN0b3I7XG5cbiAgICBpZiAocHJvYmxlbWF0aWMpIHtcbiAgICAgIHZhciBhbmNlc3RvclRhZyA9IHByb2JsZW1hdGljLnRhZztcbiAgICAgIHZhciBhbmNlc3Rvckluc3RhbmNlID0gcHJvYmxlbWF0aWMuaW5zdGFuY2U7XG5cbiAgICAgIHZhciBjaGlsZE93bmVyID0gY2hpbGRJbnN0YW5jZSAmJiBjaGlsZEluc3RhbmNlLl9jdXJyZW50RWxlbWVudC5fb3duZXI7XG4gICAgICB2YXIgYW5jZXN0b3JPd25lciA9IGFuY2VzdG9ySW5zdGFuY2UgJiYgYW5jZXN0b3JJbnN0YW5jZS5fY3VycmVudEVsZW1lbnQuX293bmVyO1xuXG4gICAgICB2YXIgY2hpbGRPd25lcnMgPSBmaW5kT3duZXJTdGFjayhjaGlsZE93bmVyKTtcbiAgICAgIHZhciBhbmNlc3Rvck93bmVycyA9IGZpbmRPd25lclN0YWNrKGFuY2VzdG9yT3duZXIpO1xuXG4gICAgICB2YXIgbWluU3RhY2tMZW4gPSBNYXRoLm1pbihjaGlsZE93bmVycy5sZW5ndGgsIGFuY2VzdG9yT3duZXJzLmxlbmd0aCk7XG4gICAgICB2YXIgaTtcblxuICAgICAgdmFyIGRlZXBlc3RDb21tb24gPSAtMTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBtaW5TdGFja0xlbjsgaSsrKSB7XG4gICAgICAgIGlmIChjaGlsZE93bmVyc1tpXSA9PT0gYW5jZXN0b3JPd25lcnNbaV0pIHtcbiAgICAgICAgICBkZWVwZXN0Q29tbW9uID0gaTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgVU5LTk9XTiA9ICcodW5rbm93biknO1xuICAgICAgdmFyIGNoaWxkT3duZXJOYW1lcyA9IGNoaWxkT3duZXJzLnNsaWNlKGRlZXBlc3RDb21tb24gKyAxKS5tYXAoZnVuY3Rpb24gKGluc3QpIHtcbiAgICAgICAgcmV0dXJuIGluc3QuZ2V0TmFtZSgpIHx8IFVOS05PV047XG4gICAgICB9KTtcbiAgICAgIHZhciBhbmNlc3Rvck93bmVyTmFtZXMgPSBhbmNlc3Rvck93bmVycy5zbGljZShkZWVwZXN0Q29tbW9uICsgMSkubWFwKGZ1bmN0aW9uIChpbnN0KSB7XG4gICAgICAgIHJldHVybiBpbnN0LmdldE5hbWUoKSB8fCBVTktOT1dOO1xuICAgICAgfSk7XG4gICAgICB2YXIgb3duZXJJbmZvID0gW10uY29uY2F0KFxuICAgICAgLy8gSWYgdGhlIHBhcmVudCBhbmQgY2hpbGQgaW5zdGFuY2VzIGhhdmUgYSBjb21tb24gb3duZXIgYW5jZXN0b3IsIHN0YXJ0XG4gICAgICAvLyB3aXRoIHRoYXQgLS0gb3RoZXJ3aXNlIHdlIGp1c3Qgc3RhcnQgd2l0aCB0aGUgcGFyZW50J3Mgb3duZXJzLlxuICAgICAgZGVlcGVzdENvbW1vbiAhPT0gLTEgPyBjaGlsZE93bmVyc1tkZWVwZXN0Q29tbW9uXS5nZXROYW1lKCkgfHwgVU5LTk9XTiA6IFtdLCBhbmNlc3Rvck93bmVyTmFtZXMsIGFuY2VzdG9yVGFnLFxuICAgICAgLy8gSWYgd2UncmUgd2FybmluZyBhYm91dCBhbiBpbnZhbGlkIChub24tcGFyZW50KSBhbmNlc3RyeSwgYWRkICcuLi4nXG4gICAgICBpbnZhbGlkQW5jZXN0b3IgPyBbJy4uLiddIDogW10sIGNoaWxkT3duZXJOYW1lcywgY2hpbGRUYWcpLmpvaW4oJyA+ICcpO1xuXG4gICAgICB2YXIgd2FybktleSA9ICEhaW52YWxpZFBhcmVudCArICd8JyArIGNoaWxkVGFnICsgJ3wnICsgYW5jZXN0b3JUYWcgKyAnfCcgKyBvd25lckluZm87XG4gICAgICBpZiAoZGlkV2Fyblt3YXJuS2V5XSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBkaWRXYXJuW3dhcm5LZXldID0gdHJ1ZTtcblxuICAgICAgaWYgKGludmFsaWRQYXJlbnQpIHtcbiAgICAgICAgdmFyIGluZm8gPSAnJztcbiAgICAgICAgaWYgKGFuY2VzdG9yVGFnID09PSAndGFibGUnICYmIGNoaWxkVGFnID09PSAndHInKSB7XG4gICAgICAgICAgaW5mbyArPSAnIEFkZCBhIDx0Ym9keT4gdG8geW91ciBjb2RlIHRvIG1hdGNoIHRoZSBET00gdHJlZSBnZW5lcmF0ZWQgYnkgJyArICd0aGUgYnJvd3Nlci4nO1xuICAgICAgICB9XG4gICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAndmFsaWRhdGVET01OZXN0aW5nKC4uLik6IDwlcz4gY2Fubm90IGFwcGVhciBhcyBhIGNoaWxkIG9mIDwlcz4uICcgKyAnU2VlICVzLiVzJywgY2hpbGRUYWcsIGFuY2VzdG9yVGFnLCBvd25lckluZm8sIGluZm8pIDogdW5kZWZpbmVkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICd2YWxpZGF0ZURPTU5lc3RpbmcoLi4uKTogPCVzPiBjYW5ub3QgYXBwZWFyIGFzIGEgZGVzY2VuZGFudCBvZiAnICsgJzwlcz4uIFNlZSAlcy4nLCBjaGlsZFRhZywgYW5jZXN0b3JUYWcsIG93bmVySW5mbykgOiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHZhbGlkYXRlRE9NTmVzdGluZy5hbmNlc3RvckluZm9Db250ZXh0S2V5ID0gJ19fdmFsaWRhdGVET01OZXN0aW5nX2FuY2VzdG9ySW5mbyQnICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc2xpY2UoMik7XG5cbiAgdmFsaWRhdGVET01OZXN0aW5nLnVwZGF0ZWRBbmNlc3RvckluZm8gPSB1cGRhdGVkQW5jZXN0b3JJbmZvO1xuXG4gIC8vIEZvciB0ZXN0aW5nXG4gIHZhbGlkYXRlRE9NTmVzdGluZy5pc1RhZ1ZhbGlkSW5Db250ZXh0ID0gZnVuY3Rpb24gKHRhZywgYW5jZXN0b3JJbmZvKSB7XG4gICAgYW5jZXN0b3JJbmZvID0gYW5jZXN0b3JJbmZvIHx8IGVtcHR5QW5jZXN0b3JJbmZvO1xuICAgIHZhciBwYXJlbnRJbmZvID0gYW5jZXN0b3JJbmZvLnBhcmVudFRhZztcbiAgICB2YXIgcGFyZW50VGFnID0gcGFyZW50SW5mbyAmJiBwYXJlbnRJbmZvLnRhZztcbiAgICByZXR1cm4gaXNUYWdWYWxpZFdpdGhQYXJlbnQodGFnLCBwYXJlbnRUYWcpICYmICFmaW5kSW52YWxpZEFuY2VzdG9yRm9yVGFnKHRhZywgYW5jZXN0b3JJbmZvKTtcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB2YWxpZGF0ZURPTU5lc3Rpbmc7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0L2xpYi92YWxpZGF0ZURPTU5lc3RpbmcuanNcbi8vIG1vZHVsZSBpZCA9IDcwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdERlZmF1bHRJbmplY3Rpb25cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBCZWZvcmVJbnB1dEV2ZW50UGx1Z2luID0gcmVxdWlyZSgnLi9CZWZvcmVJbnB1dEV2ZW50UGx1Z2luJyk7XG52YXIgQ2hhbmdlRXZlbnRQbHVnaW4gPSByZXF1aXJlKCcuL0NoYW5nZUV2ZW50UGx1Z2luJyk7XG52YXIgQ2xpZW50UmVhY3RSb290SW5kZXggPSByZXF1aXJlKCcuL0NsaWVudFJlYWN0Um9vdEluZGV4Jyk7XG52YXIgRGVmYXVsdEV2ZW50UGx1Z2luT3JkZXIgPSByZXF1aXJlKCcuL0RlZmF1bHRFdmVudFBsdWdpbk9yZGVyJyk7XG52YXIgRW50ZXJMZWF2ZUV2ZW50UGx1Z2luID0gcmVxdWlyZSgnLi9FbnRlckxlYXZlRXZlbnRQbHVnaW4nKTtcbnZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHJlcXVpcmUoJ2ZianMvbGliL0V4ZWN1dGlvbkVudmlyb25tZW50Jyk7XG52YXIgSFRNTERPTVByb3BlcnR5Q29uZmlnID0gcmVxdWlyZSgnLi9IVE1MRE9NUHJvcGVydHlDb25maWcnKTtcbnZhciBSZWFjdEJyb3dzZXJDb21wb25lbnRNaXhpbiA9IHJlcXVpcmUoJy4vUmVhY3RCcm93c2VyQ29tcG9uZW50TWl4aW4nKTtcbnZhciBSZWFjdENvbXBvbmVudEJyb3dzZXJFbnZpcm9ubWVudCA9IHJlcXVpcmUoJy4vUmVhY3RDb21wb25lbnRCcm93c2VyRW52aXJvbm1lbnQnKTtcbnZhciBSZWFjdERlZmF1bHRCYXRjaGluZ1N0cmF0ZWd5ID0gcmVxdWlyZSgnLi9SZWFjdERlZmF1bHRCYXRjaGluZ1N0cmF0ZWd5Jyk7XG52YXIgUmVhY3RET01Db21wb25lbnQgPSByZXF1aXJlKCcuL1JlYWN0RE9NQ29tcG9uZW50Jyk7XG52YXIgUmVhY3RET01UZXh0Q29tcG9uZW50ID0gcmVxdWlyZSgnLi9SZWFjdERPTVRleHRDb21wb25lbnQnKTtcbnZhciBSZWFjdEV2ZW50TGlzdGVuZXIgPSByZXF1aXJlKCcuL1JlYWN0RXZlbnRMaXN0ZW5lcicpO1xudmFyIFJlYWN0SW5qZWN0aW9uID0gcmVxdWlyZSgnLi9SZWFjdEluamVjdGlvbicpO1xudmFyIFJlYWN0SW5zdGFuY2VIYW5kbGVzID0gcmVxdWlyZSgnLi9SZWFjdEluc3RhbmNlSGFuZGxlcycpO1xudmFyIFJlYWN0TW91bnQgPSByZXF1aXJlKCcuL1JlYWN0TW91bnQnKTtcbnZhciBSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uID0gcmVxdWlyZSgnLi9SZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uJyk7XG52YXIgU2VsZWN0RXZlbnRQbHVnaW4gPSByZXF1aXJlKCcuL1NlbGVjdEV2ZW50UGx1Z2luJyk7XG52YXIgU2VydmVyUmVhY3RSb290SW5kZXggPSByZXF1aXJlKCcuL1NlcnZlclJlYWN0Um9vdEluZGV4Jyk7XG52YXIgU2ltcGxlRXZlbnRQbHVnaW4gPSByZXF1aXJlKCcuL1NpbXBsZUV2ZW50UGx1Z2luJyk7XG52YXIgU1ZHRE9NUHJvcGVydHlDb25maWcgPSByZXF1aXJlKCcuL1NWR0RPTVByb3BlcnR5Q29uZmlnJyk7XG5cbnZhciBhbHJlYWR5SW5qZWN0ZWQgPSBmYWxzZTtcblxuZnVuY3Rpb24gaW5qZWN0KCkge1xuICBpZiAoYWxyZWFkeUluamVjdGVkKSB7XG4gICAgLy8gVE9ETzogVGhpcyBpcyBjdXJyZW50bHkgdHJ1ZSBiZWNhdXNlIHRoZXNlIGluamVjdGlvbnMgYXJlIHNoYXJlZCBiZXR3ZWVuXG4gICAgLy8gdGhlIGNsaWVudCBhbmQgdGhlIHNlcnZlciBwYWNrYWdlLiBUaGV5IHNob3VsZCBiZSBidWlsdCBpbmRlcGVuZGVudGx5XG4gICAgLy8gYW5kIG5vdCBzaGFyZSBhbnkgaW5qZWN0aW9uIHN0YXRlLiBUaGVuIHRoaXMgcHJvYmxlbSB3aWxsIGJlIHNvbHZlZC5cbiAgICByZXR1cm47XG4gIH1cbiAgYWxyZWFkeUluamVjdGVkID0gdHJ1ZTtcblxuICBSZWFjdEluamVjdGlvbi5FdmVudEVtaXR0ZXIuaW5qZWN0UmVhY3RFdmVudExpc3RlbmVyKFJlYWN0RXZlbnRMaXN0ZW5lcik7XG5cbiAgLyoqXG4gICAqIEluamVjdCBtb2R1bGVzIGZvciByZXNvbHZpbmcgRE9NIGhpZXJhcmNoeSBhbmQgcGx1Z2luIG9yZGVyaW5nLlxuICAgKi9cbiAgUmVhY3RJbmplY3Rpb24uRXZlbnRQbHVnaW5IdWIuaW5qZWN0RXZlbnRQbHVnaW5PcmRlcihEZWZhdWx0RXZlbnRQbHVnaW5PcmRlcik7XG4gIFJlYWN0SW5qZWN0aW9uLkV2ZW50UGx1Z2luSHViLmluamVjdEluc3RhbmNlSGFuZGxlKFJlYWN0SW5zdGFuY2VIYW5kbGVzKTtcbiAgUmVhY3RJbmplY3Rpb24uRXZlbnRQbHVnaW5IdWIuaW5qZWN0TW91bnQoUmVhY3RNb3VudCk7XG5cbiAgLyoqXG4gICAqIFNvbWUgaW1wb3J0YW50IGV2ZW50IHBsdWdpbnMgaW5jbHVkZWQgYnkgZGVmYXVsdCAod2l0aG91dCBoYXZpbmcgdG8gcmVxdWlyZVxuICAgKiB0aGVtKS5cbiAgICovXG4gIFJlYWN0SW5qZWN0aW9uLkV2ZW50UGx1Z2luSHViLmluamVjdEV2ZW50UGx1Z2luc0J5TmFtZSh7XG4gICAgU2ltcGxlRXZlbnRQbHVnaW46IFNpbXBsZUV2ZW50UGx1Z2luLFxuICAgIEVudGVyTGVhdmVFdmVudFBsdWdpbjogRW50ZXJMZWF2ZUV2ZW50UGx1Z2luLFxuICAgIENoYW5nZUV2ZW50UGx1Z2luOiBDaGFuZ2VFdmVudFBsdWdpbixcbiAgICBTZWxlY3RFdmVudFBsdWdpbjogU2VsZWN0RXZlbnRQbHVnaW4sXG4gICAgQmVmb3JlSW5wdXRFdmVudFBsdWdpbjogQmVmb3JlSW5wdXRFdmVudFBsdWdpblxuICB9KTtcblxuICBSZWFjdEluamVjdGlvbi5OYXRpdmVDb21wb25lbnQuaW5qZWN0R2VuZXJpY0NvbXBvbmVudENsYXNzKFJlYWN0RE9NQ29tcG9uZW50KTtcblxuICBSZWFjdEluamVjdGlvbi5OYXRpdmVDb21wb25lbnQuaW5qZWN0VGV4dENvbXBvbmVudENsYXNzKFJlYWN0RE9NVGV4dENvbXBvbmVudCk7XG5cbiAgUmVhY3RJbmplY3Rpb24uQ2xhc3MuaW5qZWN0TWl4aW4oUmVhY3RCcm93c2VyQ29tcG9uZW50TWl4aW4pO1xuXG4gIFJlYWN0SW5qZWN0aW9uLkRPTVByb3BlcnR5LmluamVjdERPTVByb3BlcnR5Q29uZmlnKEhUTUxET01Qcm9wZXJ0eUNvbmZpZyk7XG4gIFJlYWN0SW5qZWN0aW9uLkRPTVByb3BlcnR5LmluamVjdERPTVByb3BlcnR5Q29uZmlnKFNWR0RPTVByb3BlcnR5Q29uZmlnKTtcblxuICBSZWFjdEluamVjdGlvbi5FbXB0eUNvbXBvbmVudC5pbmplY3RFbXB0eUNvbXBvbmVudCgnbm9zY3JpcHQnKTtcblxuICBSZWFjdEluamVjdGlvbi5VcGRhdGVzLmluamVjdFJlY29uY2lsZVRyYW5zYWN0aW9uKFJlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb24pO1xuICBSZWFjdEluamVjdGlvbi5VcGRhdGVzLmluamVjdEJhdGNoaW5nU3RyYXRlZ3koUmVhY3REZWZhdWx0QmF0Y2hpbmdTdHJhdGVneSk7XG5cbiAgUmVhY3RJbmplY3Rpb24uUm9vdEluZGV4LmluamVjdENyZWF0ZVJlYWN0Um9vdEluZGV4KEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSA/IENsaWVudFJlYWN0Um9vdEluZGV4LmNyZWF0ZVJlYWN0Um9vdEluZGV4IDogU2VydmVyUmVhY3RSb290SW5kZXguY3JlYXRlUmVhY3RSb290SW5kZXgpO1xuXG4gIFJlYWN0SW5qZWN0aW9uLkNvbXBvbmVudC5pbmplY3RFbnZpcm9ubWVudChSZWFjdENvbXBvbmVudEJyb3dzZXJFbnZpcm9ubWVudCk7XG5cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICB2YXIgdXJsID0gRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NICYmIHdpbmRvdy5sb2NhdGlvbi5ocmVmIHx8ICcnO1xuICAgIGlmICgvWz8mXXJlYWN0X3BlcmZcXGIvLnRlc3QodXJsKSkge1xuICAgICAgdmFyIFJlYWN0RGVmYXVsdFBlcmYgPSByZXF1aXJlKCcuL1JlYWN0RGVmYXVsdFBlcmYnKTtcbiAgICAgIFJlYWN0RGVmYXVsdFBlcmYuc3RhcnQoKTtcbiAgICB9XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGluamVjdDogaW5qZWN0XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvUmVhY3REZWZhdWx0SW5qZWN0aW9uLmpzXG4vLyBtb2R1bGUgaWQgPSA3MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBCZWZvcmVJbnB1dEV2ZW50UGx1Z2luXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEV2ZW50Q29uc3RhbnRzID0gcmVxdWlyZSgnLi9FdmVudENvbnN0YW50cycpO1xudmFyIEV2ZW50UHJvcGFnYXRvcnMgPSByZXF1aXJlKCcuL0V2ZW50UHJvcGFnYXRvcnMnKTtcbnZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHJlcXVpcmUoJ2ZianMvbGliL0V4ZWN1dGlvbkVudmlyb25tZW50Jyk7XG52YXIgRmFsbGJhY2tDb21wb3NpdGlvblN0YXRlID0gcmVxdWlyZSgnLi9GYWxsYmFja0NvbXBvc2l0aW9uU3RhdGUnKTtcbnZhciBTeW50aGV0aWNDb21wb3NpdGlvbkV2ZW50ID0gcmVxdWlyZSgnLi9TeW50aGV0aWNDb21wb3NpdGlvbkV2ZW50Jyk7XG52YXIgU3ludGhldGljSW5wdXRFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljSW5wdXRFdmVudCcpO1xuXG52YXIga2V5T2YgPSByZXF1aXJlKCdmYmpzL2xpYi9rZXlPZicpO1xuXG52YXIgRU5EX0tFWUNPREVTID0gWzksIDEzLCAyNywgMzJdOyAvLyBUYWIsIFJldHVybiwgRXNjLCBTcGFjZVxudmFyIFNUQVJUX0tFWUNPREUgPSAyMjk7XG5cbnZhciBjYW5Vc2VDb21wb3NpdGlvbkV2ZW50ID0gRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NICYmICdDb21wb3NpdGlvbkV2ZW50JyBpbiB3aW5kb3c7XG5cbnZhciBkb2N1bWVudE1vZGUgPSBudWxsO1xuaWYgKEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSAmJiAnZG9jdW1lbnRNb2RlJyBpbiBkb2N1bWVudCkge1xuICBkb2N1bWVudE1vZGUgPSBkb2N1bWVudC5kb2N1bWVudE1vZGU7XG59XG5cbi8vIFdlYmtpdCBvZmZlcnMgYSB2ZXJ5IHVzZWZ1bCBgdGV4dElucHV0YCBldmVudCB0aGF0IGNhbiBiZSB1c2VkIHRvXG4vLyBkaXJlY3RseSByZXByZXNlbnQgYGJlZm9yZUlucHV0YC4gVGhlIElFIGB0ZXh0aW5wdXRgIGV2ZW50IGlzIG5vdCBhc1xuLy8gdXNlZnVsLCBzbyB3ZSBkb24ndCB1c2UgaXQuXG52YXIgY2FuVXNlVGV4dElucHV0RXZlbnQgPSBFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gJiYgJ1RleHRFdmVudCcgaW4gd2luZG93ICYmICFkb2N1bWVudE1vZGUgJiYgIWlzUHJlc3RvKCk7XG5cbi8vIEluIElFOSssIHdlIGhhdmUgYWNjZXNzIHRvIGNvbXBvc2l0aW9uIGV2ZW50cywgYnV0IHRoZSBkYXRhIHN1cHBsaWVkXG4vLyBieSB0aGUgbmF0aXZlIGNvbXBvc2l0aW9uZW5kIGV2ZW50IG1heSBiZSBpbmNvcnJlY3QuIEphcGFuZXNlIGlkZW9ncmFwaGljXG4vLyBzcGFjZXMsIGZvciBpbnN0YW5jZSAoXFx1MzAwMCkgYXJlIG5vdCByZWNvcmRlZCBjb3JyZWN0bHkuXG52YXIgdXNlRmFsbGJhY2tDb21wb3NpdGlvbkRhdGEgPSBFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gJiYgKCFjYW5Vc2VDb21wb3NpdGlvbkV2ZW50IHx8IGRvY3VtZW50TW9kZSAmJiBkb2N1bWVudE1vZGUgPiA4ICYmIGRvY3VtZW50TW9kZSA8PSAxMSk7XG5cbi8qKlxuICogT3BlcmEgPD0gMTIgaW5jbHVkZXMgVGV4dEV2ZW50IGluIHdpbmRvdywgYnV0IGRvZXMgbm90IGZpcmVcbiAqIHRleHQgaW5wdXQgZXZlbnRzLiBSZWx5IG9uIGtleXByZXNzIGluc3RlYWQuXG4gKi9cbmZ1bmN0aW9uIGlzUHJlc3RvKCkge1xuICB2YXIgb3BlcmEgPSB3aW5kb3cub3BlcmE7XG4gIHJldHVybiB0eXBlb2Ygb3BlcmEgPT09ICdvYmplY3QnICYmIHR5cGVvZiBvcGVyYS52ZXJzaW9uID09PSAnZnVuY3Rpb24nICYmIHBhcnNlSW50KG9wZXJhLnZlcnNpb24oKSwgMTApIDw9IDEyO1xufVxuXG52YXIgU1BBQ0VCQVJfQ09ERSA9IDMyO1xudmFyIFNQQUNFQkFSX0NIQVIgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKFNQQUNFQkFSX0NPREUpO1xuXG52YXIgdG9wTGV2ZWxUeXBlcyA9IEV2ZW50Q29uc3RhbnRzLnRvcExldmVsVHlwZXM7XG5cbi8vIEV2ZW50cyBhbmQgdGhlaXIgY29ycmVzcG9uZGluZyBwcm9wZXJ0eSBuYW1lcy5cbnZhciBldmVudFR5cGVzID0ge1xuICBiZWZvcmVJbnB1dDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uQmVmb3JlSW5wdXQ6IG51bGwgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkJlZm9yZUlucHV0Q2FwdHVyZTogbnVsbCB9KVxuICAgIH0sXG4gICAgZGVwZW5kZW5jaWVzOiBbdG9wTGV2ZWxUeXBlcy50b3BDb21wb3NpdGlvbkVuZCwgdG9wTGV2ZWxUeXBlcy50b3BLZXlQcmVzcywgdG9wTGV2ZWxUeXBlcy50b3BUZXh0SW5wdXQsIHRvcExldmVsVHlwZXMudG9wUGFzdGVdXG4gIH0sXG4gIGNvbXBvc2l0aW9uRW5kOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Db21wb3NpdGlvbkVuZDogbnVsbCB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uQ29tcG9zaXRpb25FbmRDYXB0dXJlOiBudWxsIH0pXG4gICAgfSxcbiAgICBkZXBlbmRlbmNpZXM6IFt0b3BMZXZlbFR5cGVzLnRvcEJsdXIsIHRvcExldmVsVHlwZXMudG9wQ29tcG9zaXRpb25FbmQsIHRvcExldmVsVHlwZXMudG9wS2V5RG93biwgdG9wTGV2ZWxUeXBlcy50b3BLZXlQcmVzcywgdG9wTGV2ZWxUeXBlcy50b3BLZXlVcCwgdG9wTGV2ZWxUeXBlcy50b3BNb3VzZURvd25dXG4gIH0sXG4gIGNvbXBvc2l0aW9uU3RhcnQ6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkNvbXBvc2l0aW9uU3RhcnQ6IG51bGwgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkNvbXBvc2l0aW9uU3RhcnRDYXB0dXJlOiBudWxsIH0pXG4gICAgfSxcbiAgICBkZXBlbmRlbmNpZXM6IFt0b3BMZXZlbFR5cGVzLnRvcEJsdXIsIHRvcExldmVsVHlwZXMudG9wQ29tcG9zaXRpb25TdGFydCwgdG9wTGV2ZWxUeXBlcy50b3BLZXlEb3duLCB0b3BMZXZlbFR5cGVzLnRvcEtleVByZXNzLCB0b3BMZXZlbFR5cGVzLnRvcEtleVVwLCB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlRG93bl1cbiAgfSxcbiAgY29tcG9zaXRpb25VcGRhdGU6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkNvbXBvc2l0aW9uVXBkYXRlOiBudWxsIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Db21wb3NpdGlvblVwZGF0ZUNhcHR1cmU6IG51bGwgfSlcbiAgICB9LFxuICAgIGRlcGVuZGVuY2llczogW3RvcExldmVsVHlwZXMudG9wQmx1ciwgdG9wTGV2ZWxUeXBlcy50b3BDb21wb3NpdGlvblVwZGF0ZSwgdG9wTGV2ZWxUeXBlcy50b3BLZXlEb3duLCB0b3BMZXZlbFR5cGVzLnRvcEtleVByZXNzLCB0b3BMZXZlbFR5cGVzLnRvcEtleVVwLCB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlRG93bl1cbiAgfVxufTtcblxuLy8gVHJhY2sgd2hldGhlciB3ZSd2ZSBldmVyIGhhbmRsZWQgYSBrZXlwcmVzcyBvbiB0aGUgc3BhY2Uga2V5LlxudmFyIGhhc1NwYWNlS2V5cHJlc3MgPSBmYWxzZTtcblxuLyoqXG4gKiBSZXR1cm4gd2hldGhlciBhIG5hdGl2ZSBrZXlwcmVzcyBldmVudCBpcyBhc3N1bWVkIHRvIGJlIGEgY29tbWFuZC5cbiAqIFRoaXMgaXMgcmVxdWlyZWQgYmVjYXVzZSBGaXJlZm94IGZpcmVzIGBrZXlwcmVzc2AgZXZlbnRzIGZvciBrZXkgY29tbWFuZHNcbiAqIChjdXQsIGNvcHksIHNlbGVjdC1hbGwsIGV0Yy4pIGV2ZW4gdGhvdWdoIG5vIGNoYXJhY3RlciBpcyBpbnNlcnRlZC5cbiAqL1xuZnVuY3Rpb24gaXNLZXlwcmVzc0NvbW1hbmQobmF0aXZlRXZlbnQpIHtcbiAgcmV0dXJuIChuYXRpdmVFdmVudC5jdHJsS2V5IHx8IG5hdGl2ZUV2ZW50LmFsdEtleSB8fCBuYXRpdmVFdmVudC5tZXRhS2V5KSAmJlxuICAvLyBjdHJsS2V5ICYmIGFsdEtleSBpcyBlcXVpdmFsZW50IHRvIEFsdEdyLCBhbmQgaXMgbm90IGEgY29tbWFuZC5cbiAgIShuYXRpdmVFdmVudC5jdHJsS2V5ICYmIG5hdGl2ZUV2ZW50LmFsdEtleSk7XG59XG5cbi8qKlxuICogVHJhbnNsYXRlIG5hdGl2ZSB0b3AgbGV2ZWwgZXZlbnRzIGludG8gZXZlbnQgdHlwZXMuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHRvcExldmVsVHlwZVxuICogQHJldHVybiB7b2JqZWN0fVxuICovXG5mdW5jdGlvbiBnZXRDb21wb3NpdGlvbkV2ZW50VHlwZSh0b3BMZXZlbFR5cGUpIHtcbiAgc3dpdGNoICh0b3BMZXZlbFR5cGUpIHtcbiAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQ29tcG9zaXRpb25TdGFydDpcbiAgICAgIHJldHVybiBldmVudFR5cGVzLmNvbXBvc2l0aW9uU3RhcnQ7XG4gICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcENvbXBvc2l0aW9uRW5kOlxuICAgICAgcmV0dXJuIGV2ZW50VHlwZXMuY29tcG9zaXRpb25FbmQ7XG4gICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcENvbXBvc2l0aW9uVXBkYXRlOlxuICAgICAgcmV0dXJuIGV2ZW50VHlwZXMuY29tcG9zaXRpb25VcGRhdGU7XG4gIH1cbn1cblxuLyoqXG4gKiBEb2VzIG91ciBmYWxsYmFjayBiZXN0LWd1ZXNzIG1vZGVsIHRoaW5rIHRoaXMgZXZlbnQgc2lnbmlmaWVzIHRoYXRcbiAqIGNvbXBvc2l0aW9uIGhhcyBiZWd1bj9cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnRcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzRmFsbGJhY2tDb21wb3NpdGlvblN0YXJ0KHRvcExldmVsVHlwZSwgbmF0aXZlRXZlbnQpIHtcbiAgcmV0dXJuIHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BLZXlEb3duICYmIG5hdGl2ZUV2ZW50LmtleUNvZGUgPT09IFNUQVJUX0tFWUNPREU7XG59XG5cbi8qKlxuICogRG9lcyBvdXIgZmFsbGJhY2sgbW9kZSB0aGluayB0aGF0IHRoaXMgZXZlbnQgaXMgdGhlIGVuZCBvZiBjb21wb3NpdGlvbj9cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnRcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzRmFsbGJhY2tDb21wb3NpdGlvbkVuZCh0b3BMZXZlbFR5cGUsIG5hdGl2ZUV2ZW50KSB7XG4gIHN3aXRjaCAodG9wTGV2ZWxUeXBlKSB7XG4gICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEtleVVwOlxuICAgICAgLy8gQ29tbWFuZCBrZXlzIGluc2VydCBvciBjbGVhciBJTUUgaW5wdXQuXG4gICAgICByZXR1cm4gRU5EX0tFWUNPREVTLmluZGV4T2YobmF0aXZlRXZlbnQua2V5Q29kZSkgIT09IC0xO1xuICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BLZXlEb3duOlxuICAgICAgLy8gRXhwZWN0IElNRSBrZXlDb2RlIG9uIGVhY2gga2V5ZG93bi4gSWYgd2UgZ2V0IGFueSBvdGhlclxuICAgICAgLy8gY29kZSB3ZSBtdXN0IGhhdmUgZXhpdGVkIGVhcmxpZXIuXG4gICAgICByZXR1cm4gbmF0aXZlRXZlbnQua2V5Q29kZSAhPT0gU1RBUlRfS0VZQ09ERTtcbiAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wS2V5UHJlc3M6XG4gICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlRG93bjpcbiAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQmx1cjpcbiAgICAgIC8vIEV2ZW50cyBhcmUgbm90IHBvc3NpYmxlIHdpdGhvdXQgY2FuY2VsbGluZyBJTUUuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8qKlxuICogR29vZ2xlIElucHV0IFRvb2xzIHByb3ZpZGVzIGNvbXBvc2l0aW9uIGRhdGEgdmlhIGEgQ3VzdG9tRXZlbnQsXG4gKiB3aXRoIHRoZSBgZGF0YWAgcHJvcGVydHkgcG9wdWxhdGVkIGluIHRoZSBgZGV0YWlsYCBvYmplY3QuIElmIHRoaXNcbiAqIGlzIGF2YWlsYWJsZSBvbiB0aGUgZXZlbnQgb2JqZWN0LCB1c2UgaXQuIElmIG5vdCwgdGhpcyBpcyBhIHBsYWluXG4gKiBjb21wb3NpdGlvbiBldmVudCBhbmQgd2UgaGF2ZSBub3RoaW5nIHNwZWNpYWwgdG8gZXh0cmFjdC5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnRcbiAqIEByZXR1cm4gez9zdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGdldERhdGFGcm9tQ3VzdG9tRXZlbnQobmF0aXZlRXZlbnQpIHtcbiAgdmFyIGRldGFpbCA9IG5hdGl2ZUV2ZW50LmRldGFpbDtcbiAgaWYgKHR5cGVvZiBkZXRhaWwgPT09ICdvYmplY3QnICYmICdkYXRhJyBpbiBkZXRhaWwpIHtcbiAgICByZXR1cm4gZGV0YWlsLmRhdGE7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbi8vIFRyYWNrIHRoZSBjdXJyZW50IElNRSBjb21wb3NpdGlvbiBmYWxsYmFjayBvYmplY3QsIGlmIGFueS5cbnZhciBjdXJyZW50Q29tcG9zaXRpb24gPSBudWxsO1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFR5cGUgUmVjb3JkIGZyb20gYEV2ZW50Q29uc3RhbnRzYC5cbiAqIEBwYXJhbSB7RE9NRXZlbnRUYXJnZXR9IHRvcExldmVsVGFyZ2V0IFRoZSBsaXN0ZW5pbmcgY29tcG9uZW50IHJvb3Qgbm9kZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFRhcmdldElEIElEIG9mIGB0b3BMZXZlbFRhcmdldGAuXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHs/b2JqZWN0fSBBIFN5bnRoZXRpY0NvbXBvc2l0aW9uRXZlbnQuXG4gKi9cbmZ1bmN0aW9uIGV4dHJhY3RDb21wb3NpdGlvbkV2ZW50KHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICB2YXIgZXZlbnRUeXBlO1xuICB2YXIgZmFsbGJhY2tEYXRhO1xuXG4gIGlmIChjYW5Vc2VDb21wb3NpdGlvbkV2ZW50KSB7XG4gICAgZXZlbnRUeXBlID0gZ2V0Q29tcG9zaXRpb25FdmVudFR5cGUodG9wTGV2ZWxUeXBlKTtcbiAgfSBlbHNlIGlmICghY3VycmVudENvbXBvc2l0aW9uKSB7XG4gICAgaWYgKGlzRmFsbGJhY2tDb21wb3NpdGlvblN0YXJ0KHRvcExldmVsVHlwZSwgbmF0aXZlRXZlbnQpKSB7XG4gICAgICBldmVudFR5cGUgPSBldmVudFR5cGVzLmNvbXBvc2l0aW9uU3RhcnQ7XG4gICAgfVxuICB9IGVsc2UgaWYgKGlzRmFsbGJhY2tDb21wb3NpdGlvbkVuZCh0b3BMZXZlbFR5cGUsIG5hdGl2ZUV2ZW50KSkge1xuICAgIGV2ZW50VHlwZSA9IGV2ZW50VHlwZXMuY29tcG9zaXRpb25FbmQ7XG4gIH1cblxuICBpZiAoIWV2ZW50VHlwZSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgaWYgKHVzZUZhbGxiYWNrQ29tcG9zaXRpb25EYXRhKSB7XG4gICAgLy8gVGhlIGN1cnJlbnQgY29tcG9zaXRpb24gaXMgc3RvcmVkIHN0YXRpY2FsbHkgYW5kIG11c3Qgbm90IGJlXG4gICAgLy8gb3ZlcndyaXR0ZW4gd2hpbGUgY29tcG9zaXRpb24gY29udGludWVzLlxuICAgIGlmICghY3VycmVudENvbXBvc2l0aW9uICYmIGV2ZW50VHlwZSA9PT0gZXZlbnRUeXBlcy5jb21wb3NpdGlvblN0YXJ0KSB7XG4gICAgICBjdXJyZW50Q29tcG9zaXRpb24gPSBGYWxsYmFja0NvbXBvc2l0aW9uU3RhdGUuZ2V0UG9vbGVkKHRvcExldmVsVGFyZ2V0KTtcbiAgICB9IGVsc2UgaWYgKGV2ZW50VHlwZSA9PT0gZXZlbnRUeXBlcy5jb21wb3NpdGlvbkVuZCkge1xuICAgICAgaWYgKGN1cnJlbnRDb21wb3NpdGlvbikge1xuICAgICAgICBmYWxsYmFja0RhdGEgPSBjdXJyZW50Q29tcG9zaXRpb24uZ2V0RGF0YSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHZhciBldmVudCA9IFN5bnRoZXRpY0NvbXBvc2l0aW9uRXZlbnQuZ2V0UG9vbGVkKGV2ZW50VHlwZSwgdG9wTGV2ZWxUYXJnZXRJRCwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcblxuICBpZiAoZmFsbGJhY2tEYXRhKSB7XG4gICAgLy8gSW5qZWN0IGRhdGEgZ2VuZXJhdGVkIGZyb20gZmFsbGJhY2sgcGF0aCBpbnRvIHRoZSBzeW50aGV0aWMgZXZlbnQuXG4gICAgLy8gVGhpcyBtYXRjaGVzIHRoZSBwcm9wZXJ0eSBvZiBuYXRpdmUgQ29tcG9zaXRpb25FdmVudEludGVyZmFjZS5cbiAgICBldmVudC5kYXRhID0gZmFsbGJhY2tEYXRhO1xuICB9IGVsc2Uge1xuICAgIHZhciBjdXN0b21EYXRhID0gZ2V0RGF0YUZyb21DdXN0b21FdmVudChuYXRpdmVFdmVudCk7XG4gICAgaWYgKGN1c3RvbURhdGEgIT09IG51bGwpIHtcbiAgICAgIGV2ZW50LmRhdGEgPSBjdXN0b21EYXRhO1xuICAgIH1cbiAgfVxuXG4gIEV2ZW50UHJvcGFnYXRvcnMuYWNjdW11bGF0ZVR3b1BoYXNlRGlzcGF0Y2hlcyhldmVudCk7XG4gIHJldHVybiBldmVudDtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlIFJlY29yZCBmcm9tIGBFdmVudENvbnN0YW50c2AuXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHs/c3RyaW5nfSBUaGUgc3RyaW5nIGNvcnJlc3BvbmRpbmcgdG8gdGhpcyBgYmVmb3JlSW5wdXRgIGV2ZW50LlxuICovXG5mdW5jdGlvbiBnZXROYXRpdmVCZWZvcmVJbnB1dENoYXJzKHRvcExldmVsVHlwZSwgbmF0aXZlRXZlbnQpIHtcbiAgc3dpdGNoICh0b3BMZXZlbFR5cGUpIHtcbiAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQ29tcG9zaXRpb25FbmQ6XG4gICAgICByZXR1cm4gZ2V0RGF0YUZyb21DdXN0b21FdmVudChuYXRpdmVFdmVudCk7XG4gICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEtleVByZXNzOlxuICAgICAgLyoqXG4gICAgICAgKiBJZiBuYXRpdmUgYHRleHRJbnB1dGAgZXZlbnRzIGFyZSBhdmFpbGFibGUsIG91ciBnb2FsIGlzIHRvIG1ha2VcbiAgICAgICAqIHVzZSBvZiB0aGVtLiBIb3dldmVyLCB0aGVyZSBpcyBhIHNwZWNpYWwgY2FzZTogdGhlIHNwYWNlYmFyIGtleS5cbiAgICAgICAqIEluIFdlYmtpdCwgcHJldmVudGluZyBkZWZhdWx0IG9uIGEgc3BhY2ViYXIgYHRleHRJbnB1dGAgZXZlbnRcbiAgICAgICAqIGNhbmNlbHMgY2hhcmFjdGVyIGluc2VydGlvbiwgYnV0IGl0ICphbHNvKiBjYXVzZXMgdGhlIGJyb3dzZXJcbiAgICAgICAqIHRvIGZhbGwgYmFjayB0byBpdHMgZGVmYXVsdCBzcGFjZWJhciBiZWhhdmlvciBvZiBzY3JvbGxpbmcgdGhlXG4gICAgICAgKiBwYWdlLlxuICAgICAgICpcbiAgICAgICAqIFRyYWNraW5nIGF0OlxuICAgICAgICogaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTM1NTEwM1xuICAgICAgICpcbiAgICAgICAqIFRvIGF2b2lkIHRoaXMgaXNzdWUsIHVzZSB0aGUga2V5cHJlc3MgZXZlbnQgYXMgaWYgbm8gYHRleHRJbnB1dGBcbiAgICAgICAqIGV2ZW50IGlzIGF2YWlsYWJsZS5cbiAgICAgICAqL1xuICAgICAgdmFyIHdoaWNoID0gbmF0aXZlRXZlbnQud2hpY2g7XG4gICAgICBpZiAod2hpY2ggIT09IFNQQUNFQkFSX0NPREUpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIGhhc1NwYWNlS2V5cHJlc3MgPSB0cnVlO1xuICAgICAgcmV0dXJuIFNQQUNFQkFSX0NIQVI7XG5cbiAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wVGV4dElucHV0OlxuICAgICAgLy8gUmVjb3JkIHRoZSBjaGFyYWN0ZXJzIHRvIGJlIGFkZGVkIHRvIHRoZSBET00uXG4gICAgICB2YXIgY2hhcnMgPSBuYXRpdmVFdmVudC5kYXRhO1xuXG4gICAgICAvLyBJZiBpdCdzIGEgc3BhY2ViYXIgY2hhcmFjdGVyLCBhc3N1bWUgdGhhdCB3ZSBoYXZlIGFscmVhZHkgaGFuZGxlZFxuICAgICAgLy8gaXQgYXQgdGhlIGtleXByZXNzIGxldmVsIGFuZCBiYWlsIGltbWVkaWF0ZWx5LiBBbmRyb2lkIENocm9tZVxuICAgICAgLy8gZG9lc24ndCBnaXZlIHVzIGtleWNvZGVzLCBzbyB3ZSBuZWVkIHRvIGJsYWNrbGlzdCBpdC5cbiAgICAgIGlmIChjaGFycyA9PT0gU1BBQ0VCQVJfQ0hBUiAmJiBoYXNTcGFjZUtleXByZXNzKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY2hhcnM7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgLy8gRm9yIG90aGVyIG5hdGl2ZSBldmVudCB0eXBlcywgZG8gbm90aGluZy5cbiAgICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogRm9yIGJyb3dzZXJzIHRoYXQgZG8gbm90IHByb3ZpZGUgdGhlIGB0ZXh0SW5wdXRgIGV2ZW50LCBleHRyYWN0IHRoZVxuICogYXBwcm9wcmlhdGUgc3RyaW5nIHRvIHVzZSBmb3IgU3ludGhldGljSW5wdXRFdmVudC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlIFJlY29yZCBmcm9tIGBFdmVudENvbnN0YW50c2AuXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHs/c3RyaW5nfSBUaGUgZmFsbGJhY2sgc3RyaW5nIGZvciB0aGlzIGBiZWZvcmVJbnB1dGAgZXZlbnQuXG4gKi9cbmZ1bmN0aW9uIGdldEZhbGxiYWNrQmVmb3JlSW5wdXRDaGFycyh0b3BMZXZlbFR5cGUsIG5hdGl2ZUV2ZW50KSB7XG4gIC8vIElmIHdlIGFyZSBjdXJyZW50bHkgY29tcG9zaW5nIChJTUUpIGFuZCB1c2luZyBhIGZhbGxiYWNrIHRvIGRvIHNvLFxuICAvLyB0cnkgdG8gZXh0cmFjdCB0aGUgY29tcG9zZWQgY2hhcmFjdGVycyBmcm9tIHRoZSBmYWxsYmFjayBvYmplY3QuXG4gIGlmIChjdXJyZW50Q29tcG9zaXRpb24pIHtcbiAgICBpZiAodG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcENvbXBvc2l0aW9uRW5kIHx8IGlzRmFsbGJhY2tDb21wb3NpdGlvbkVuZCh0b3BMZXZlbFR5cGUsIG5hdGl2ZUV2ZW50KSkge1xuICAgICAgdmFyIGNoYXJzID0gY3VycmVudENvbXBvc2l0aW9uLmdldERhdGEoKTtcbiAgICAgIEZhbGxiYWNrQ29tcG9zaXRpb25TdGF0ZS5yZWxlYXNlKGN1cnJlbnRDb21wb3NpdGlvbik7XG4gICAgICBjdXJyZW50Q29tcG9zaXRpb24gPSBudWxsO1xuICAgICAgcmV0dXJuIGNoYXJzO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHN3aXRjaCAodG9wTGV2ZWxUeXBlKSB7XG4gICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFBhc3RlOlxuICAgICAgLy8gSWYgYSBwYXN0ZSBldmVudCBvY2N1cnMgYWZ0ZXIgYSBrZXlwcmVzcywgdGhyb3cgb3V0IHRoZSBpbnB1dFxuICAgICAgLy8gY2hhcnMuIFBhc3RlIGV2ZW50cyBzaG91bGQgbm90IGxlYWQgdG8gQmVmb3JlSW5wdXQgZXZlbnRzLlxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEtleVByZXNzOlxuICAgICAgLyoqXG4gICAgICAgKiBBcyBvZiB2MjcsIEZpcmVmb3ggbWF5IGZpcmUga2V5cHJlc3MgZXZlbnRzIGV2ZW4gd2hlbiBubyBjaGFyYWN0ZXJcbiAgICAgICAqIHdpbGwgYmUgaW5zZXJ0ZWQuIEEgZmV3IHBvc3NpYmlsaXRpZXM6XG4gICAgICAgKlxuICAgICAgICogLSBgd2hpY2hgIGlzIGAwYC4gQXJyb3cga2V5cywgRXNjIGtleSwgZXRjLlxuICAgICAgICpcbiAgICAgICAqIC0gYHdoaWNoYCBpcyB0aGUgcHJlc3NlZCBrZXkgY29kZSwgYnV0IG5vIGNoYXIgaXMgYXZhaWxhYmxlLlxuICAgICAgICogICBFeDogJ0FsdEdyICsgZGAgaW4gUG9saXNoLiBUaGVyZSBpcyBubyBtb2RpZmllZCBjaGFyYWN0ZXIgZm9yXG4gICAgICAgKiAgIHRoaXMga2V5IGNvbWJpbmF0aW9uIGFuZCBubyBjaGFyYWN0ZXIgaXMgaW5zZXJ0ZWQgaW50byB0aGVcbiAgICAgICAqICAgZG9jdW1lbnQsIGJ1dCBGRiBmaXJlcyB0aGUga2V5cHJlc3MgZm9yIGNoYXIgY29kZSBgMTAwYCBhbnl3YXkuXG4gICAgICAgKiAgIE5vIGBpbnB1dGAgZXZlbnQgd2lsbCBvY2N1ci5cbiAgICAgICAqXG4gICAgICAgKiAtIGB3aGljaGAgaXMgdGhlIHByZXNzZWQga2V5IGNvZGUsIGJ1dCBhIGNvbW1hbmQgY29tYmluYXRpb24gaXNcbiAgICAgICAqICAgYmVpbmcgdXNlZC4gRXg6IGBDbWQrQ2AuIE5vIGNoYXJhY3RlciBpcyBpbnNlcnRlZCwgYW5kIG5vXG4gICAgICAgKiAgIGBpbnB1dGAgZXZlbnQgd2lsbCBvY2N1ci5cbiAgICAgICAqL1xuICAgICAgaWYgKG5hdGl2ZUV2ZW50LndoaWNoICYmICFpc0tleXByZXNzQ29tbWFuZChuYXRpdmVFdmVudCkpIHtcbiAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUobmF0aXZlRXZlbnQud2hpY2gpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcENvbXBvc2l0aW9uRW5kOlxuICAgICAgcmV0dXJuIHVzZUZhbGxiYWNrQ29tcG9zaXRpb25EYXRhID8gbnVsbCA6IG5hdGl2ZUV2ZW50LmRhdGE7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogRXh0cmFjdCBhIFN5bnRoZXRpY0lucHV0RXZlbnQgZm9yIGBiZWZvcmVJbnB1dGAsIGJhc2VkIG9uIGVpdGhlciBuYXRpdmVcbiAqIGB0ZXh0SW5wdXRgIG9yIGZhbGxiYWNrIGJlaGF2aW9yLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFR5cGUgUmVjb3JkIGZyb20gYEV2ZW50Q29uc3RhbnRzYC5cbiAqIEBwYXJhbSB7RE9NRXZlbnRUYXJnZXR9IHRvcExldmVsVGFyZ2V0IFRoZSBsaXN0ZW5pbmcgY29tcG9uZW50IHJvb3Qgbm9kZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFRhcmdldElEIElEIG9mIGB0b3BMZXZlbFRhcmdldGAuXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHs/b2JqZWN0fSBBIFN5bnRoZXRpY0lucHV0RXZlbnQuXG4gKi9cbmZ1bmN0aW9uIGV4dHJhY3RCZWZvcmVJbnB1dEV2ZW50KHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICB2YXIgY2hhcnM7XG5cbiAgaWYgKGNhblVzZVRleHRJbnB1dEV2ZW50KSB7XG4gICAgY2hhcnMgPSBnZXROYXRpdmVCZWZvcmVJbnB1dENoYXJzKHRvcExldmVsVHlwZSwgbmF0aXZlRXZlbnQpO1xuICB9IGVsc2Uge1xuICAgIGNoYXJzID0gZ2V0RmFsbGJhY2tCZWZvcmVJbnB1dENoYXJzKHRvcExldmVsVHlwZSwgbmF0aXZlRXZlbnQpO1xuICB9XG5cbiAgLy8gSWYgbm8gY2hhcmFjdGVycyBhcmUgYmVpbmcgaW5zZXJ0ZWQsIG5vIEJlZm9yZUlucHV0IGV2ZW50IHNob3VsZFxuICAvLyBiZSBmaXJlZC5cbiAgaWYgKCFjaGFycykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgdmFyIGV2ZW50ID0gU3ludGhldGljSW5wdXRFdmVudC5nZXRQb29sZWQoZXZlbnRUeXBlcy5iZWZvcmVJbnB1dCwgdG9wTGV2ZWxUYXJnZXRJRCwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcblxuICBldmVudC5kYXRhID0gY2hhcnM7XG4gIEV2ZW50UHJvcGFnYXRvcnMuYWNjdW11bGF0ZVR3b1BoYXNlRGlzcGF0Y2hlcyhldmVudCk7XG4gIHJldHVybiBldmVudDtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYW4gYG9uQmVmb3JlSW5wdXRgIGV2ZW50IHRvIG1hdGNoXG4gKiBodHRwOi8vd3d3LnczLm9yZy9UUi8yMDEzL1dELURPTS1MZXZlbC0zLUV2ZW50cy0yMDEzMTEwNS8jZXZlbnRzLWlucHV0ZXZlbnRzLlxuICpcbiAqIFRoaXMgZXZlbnQgcGx1Z2luIGlzIGJhc2VkIG9uIHRoZSBuYXRpdmUgYHRleHRJbnB1dGAgZXZlbnRcbiAqIGF2YWlsYWJsZSBpbiBDaHJvbWUsIFNhZmFyaSwgT3BlcmEsIGFuZCBJRS4gVGhpcyBldmVudCBmaXJlcyBhZnRlclxuICogYG9uS2V5UHJlc3NgIGFuZCBgb25Db21wb3NpdGlvbkVuZGAsIGJ1dCBiZWZvcmUgYG9uSW5wdXRgLlxuICpcbiAqIGBiZWZvcmVJbnB1dGAgaXMgc3BlYydkIGJ1dCBub3QgaW1wbGVtZW50ZWQgaW4gYW55IGJyb3dzZXJzLCBhbmRcbiAqIHRoZSBgaW5wdXRgIGV2ZW50IGRvZXMgbm90IHByb3ZpZGUgYW55IHVzZWZ1bCBpbmZvcm1hdGlvbiBhYm91dCB3aGF0IGhhc1xuICogYWN0dWFsbHkgYmVlbiBhZGRlZCwgY29udHJhcnkgdG8gdGhlIHNwZWMuIFRodXMsIGB0ZXh0SW5wdXRgIGlzIHRoZSBiZXN0XG4gKiBhdmFpbGFibGUgZXZlbnQgdG8gaWRlbnRpZnkgdGhlIGNoYXJhY3RlcnMgdGhhdCBoYXZlIGFjdHVhbGx5IGJlZW4gaW5zZXJ0ZWRcbiAqIGludG8gdGhlIHRhcmdldCBub2RlLlxuICpcbiAqIFRoaXMgcGx1Z2luIGlzIGFsc28gcmVzcG9uc2libGUgZm9yIGVtaXR0aW5nIGBjb21wb3NpdGlvbmAgZXZlbnRzLCB0aHVzXG4gKiBhbGxvd2luZyB1cyB0byBzaGFyZSBjb21wb3NpdGlvbiBmYWxsYmFjayBjb2RlIGZvciBib3RoIGBiZWZvcmVJbnB1dGAgYW5kXG4gKiBgY29tcG9zaXRpb25gIGV2ZW50IHR5cGVzLlxuICovXG52YXIgQmVmb3JlSW5wdXRFdmVudFBsdWdpbiA9IHtcblxuICBldmVudFR5cGVzOiBldmVudFR5cGVzLFxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlIFJlY29yZCBmcm9tIGBFdmVudENvbnN0YW50c2AuXG4gICAqIEBwYXJhbSB7RE9NRXZlbnRUYXJnZXR9IHRvcExldmVsVGFyZ2V0IFRoZSBsaXN0ZW5pbmcgY29tcG9uZW50IHJvb3Qgbm9kZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRvcExldmVsVGFyZ2V0SUQgSUQgb2YgYHRvcExldmVsVGFyZ2V0YC5cbiAgICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuICAgKiBAcmV0dXJuIHsqfSBBbiBhY2N1bXVsYXRpb24gb2Ygc3ludGhldGljIGV2ZW50cy5cbiAgICogQHNlZSB7RXZlbnRQbHVnaW5IdWIuZXh0cmFjdEV2ZW50c31cbiAgICovXG4gIGV4dHJhY3RFdmVudHM6IGZ1bmN0aW9uICh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElELCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpIHtcbiAgICByZXR1cm4gW2V4dHJhY3RDb21wb3NpdGlvbkV2ZW50KHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCksIGV4dHJhY3RCZWZvcmVJbnB1dEV2ZW50KHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCldO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEJlZm9yZUlucHV0RXZlbnRQbHVnaW47XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0L2xpYi9CZWZvcmVJbnB1dEV2ZW50UGx1Z2luLmpzXG4vLyBtb2R1bGUgaWQgPSA3MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRXZlbnRQcm9wYWdhdG9yc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEV2ZW50Q29uc3RhbnRzID0gcmVxdWlyZSgnLi9FdmVudENvbnN0YW50cycpO1xudmFyIEV2ZW50UGx1Z2luSHViID0gcmVxdWlyZSgnLi9FdmVudFBsdWdpbkh1YicpO1xuXG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxudmFyIGFjY3VtdWxhdGVJbnRvID0gcmVxdWlyZSgnLi9hY2N1bXVsYXRlSW50bycpO1xudmFyIGZvckVhY2hBY2N1bXVsYXRlZCA9IHJlcXVpcmUoJy4vZm9yRWFjaEFjY3VtdWxhdGVkJyk7XG5cbnZhciBQcm9wYWdhdGlvblBoYXNlcyA9IEV2ZW50Q29uc3RhbnRzLlByb3BhZ2F0aW9uUGhhc2VzO1xudmFyIGdldExpc3RlbmVyID0gRXZlbnRQbHVnaW5IdWIuZ2V0TGlzdGVuZXI7XG5cbi8qKlxuICogU29tZSBldmVudCB0eXBlcyBoYXZlIGEgbm90aW9uIG9mIGRpZmZlcmVudCByZWdpc3RyYXRpb24gbmFtZXMgZm9yIGRpZmZlcmVudFxuICogXCJwaGFzZXNcIiBvZiBwcm9wYWdhdGlvbi4gVGhpcyBmaW5kcyBsaXN0ZW5lcnMgYnkgYSBnaXZlbiBwaGFzZS5cbiAqL1xuZnVuY3Rpb24gbGlzdGVuZXJBdFBoYXNlKGlkLCBldmVudCwgcHJvcGFnYXRpb25QaGFzZSkge1xuICB2YXIgcmVnaXN0cmF0aW9uTmFtZSA9IGV2ZW50LmRpc3BhdGNoQ29uZmlnLnBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzW3Byb3BhZ2F0aW9uUGhhc2VdO1xuICByZXR1cm4gZ2V0TGlzdGVuZXIoaWQsIHJlZ2lzdHJhdGlvbk5hbWUpO1xufVxuXG4vKipcbiAqIFRhZ3MgYSBgU3ludGhldGljRXZlbnRgIHdpdGggZGlzcGF0Y2hlZCBsaXN0ZW5lcnMuIENyZWF0aW5nIHRoaXMgZnVuY3Rpb25cbiAqIGhlcmUsIGFsbG93cyB1cyB0byBub3QgaGF2ZSB0byBiaW5kIG9yIGNyZWF0ZSBmdW5jdGlvbnMgZm9yIGVhY2ggZXZlbnQuXG4gKiBNdXRhdGluZyB0aGUgZXZlbnQncyBtZW1iZXJzIGFsbG93cyB1cyB0byBub3QgaGF2ZSB0byBjcmVhdGUgYSB3cmFwcGluZ1xuICogXCJkaXNwYXRjaFwiIG9iamVjdCB0aGF0IHBhaXJzIHRoZSBldmVudCB3aXRoIHRoZSBsaXN0ZW5lci5cbiAqL1xuZnVuY3Rpb24gYWNjdW11bGF0ZURpcmVjdGlvbmFsRGlzcGF0Y2hlcyhkb21JRCwgdXB3YXJkcywgZXZlbnQpIHtcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhkb21JRCwgJ0Rpc3BhdGNoaW5nIGlkIG11c3Qgbm90IGJlIG51bGwnKSA6IHVuZGVmaW5lZDtcbiAgfVxuICB2YXIgcGhhc2UgPSB1cHdhcmRzID8gUHJvcGFnYXRpb25QaGFzZXMuYnViYmxlZCA6IFByb3BhZ2F0aW9uUGhhc2VzLmNhcHR1cmVkO1xuICB2YXIgbGlzdGVuZXIgPSBsaXN0ZW5lckF0UGhhc2UoZG9tSUQsIGV2ZW50LCBwaGFzZSk7XG4gIGlmIChsaXN0ZW5lcikge1xuICAgIGV2ZW50Ll9kaXNwYXRjaExpc3RlbmVycyA9IGFjY3VtdWxhdGVJbnRvKGV2ZW50Ll9kaXNwYXRjaExpc3RlbmVycywgbGlzdGVuZXIpO1xuICAgIGV2ZW50Ll9kaXNwYXRjaElEcyA9IGFjY3VtdWxhdGVJbnRvKGV2ZW50Ll9kaXNwYXRjaElEcywgZG9tSUQpO1xuICB9XG59XG5cbi8qKlxuICogQ29sbGVjdCBkaXNwYXRjaGVzIChtdXN0IGJlIGVudGlyZWx5IGNvbGxlY3RlZCBiZWZvcmUgZGlzcGF0Y2hpbmcgLSBzZWUgdW5pdFxuICogdGVzdHMpLiBMYXppbHkgYWxsb2NhdGUgdGhlIGFycmF5IHRvIGNvbnNlcnZlIG1lbW9yeS4gIFdlIG11c3QgbG9vcCB0aHJvdWdoXG4gKiBlYWNoIGV2ZW50IGFuZCBwZXJmb3JtIHRoZSB0cmF2ZXJzYWwgZm9yIGVhY2ggb25lLiBXZSBjYW5ub3QgcGVyZm9ybSBhXG4gKiBzaW5nbGUgdHJhdmVyc2FsIGZvciB0aGUgZW50aXJlIGNvbGxlY3Rpb24gb2YgZXZlbnRzIGJlY2F1c2UgZWFjaCBldmVudCBtYXlcbiAqIGhhdmUgYSBkaWZmZXJlbnQgdGFyZ2V0LlxuICovXG5mdW5jdGlvbiBhY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzU2luZ2xlKGV2ZW50KSB7XG4gIGlmIChldmVudCAmJiBldmVudC5kaXNwYXRjaENvbmZpZy5waGFzZWRSZWdpc3RyYXRpb25OYW1lcykge1xuICAgIEV2ZW50UGx1Z2luSHViLmluamVjdGlvbi5nZXRJbnN0YW5jZUhhbmRsZSgpLnRyYXZlcnNlVHdvUGhhc2UoZXZlbnQuZGlzcGF0Y2hNYXJrZXIsIGFjY3VtdWxhdGVEaXJlY3Rpb25hbERpc3BhdGNoZXMsIGV2ZW50KTtcbiAgfVxufVxuXG4vKipcbiAqIFNhbWUgYXMgYGFjY3VtdWxhdGVUd29QaGFzZURpc3BhdGNoZXNTaW5nbGVgLCBidXQgc2tpcHMgb3ZlciB0aGUgdGFyZ2V0SUQuXG4gKi9cbmZ1bmN0aW9uIGFjY3VtdWxhdGVUd29QaGFzZURpc3BhdGNoZXNTaW5nbGVTa2lwVGFyZ2V0KGV2ZW50KSB7XG4gIGlmIChldmVudCAmJiBldmVudC5kaXNwYXRjaENvbmZpZy5waGFzZWRSZWdpc3RyYXRpb25OYW1lcykge1xuICAgIEV2ZW50UGx1Z2luSHViLmluamVjdGlvbi5nZXRJbnN0YW5jZUhhbmRsZSgpLnRyYXZlcnNlVHdvUGhhc2VTa2lwVGFyZ2V0KGV2ZW50LmRpc3BhdGNoTWFya2VyLCBhY2N1bXVsYXRlRGlyZWN0aW9uYWxEaXNwYXRjaGVzLCBldmVudCk7XG4gIH1cbn1cblxuLyoqXG4gKiBBY2N1bXVsYXRlcyB3aXRob3V0IHJlZ2FyZCB0byBkaXJlY3Rpb24sIGRvZXMgbm90IGxvb2sgZm9yIHBoYXNlZFxuICogcmVnaXN0cmF0aW9uIG5hbWVzLiBTYW1lIGFzIGBhY2N1bXVsYXRlRGlyZWN0RGlzcGF0Y2hlc1NpbmdsZWAgYnV0IHdpdGhvdXRcbiAqIHJlcXVpcmluZyB0aGF0IHRoZSBgZGlzcGF0Y2hNYXJrZXJgIGJlIHRoZSBzYW1lIGFzIHRoZSBkaXNwYXRjaGVkIElELlxuICovXG5mdW5jdGlvbiBhY2N1bXVsYXRlRGlzcGF0Y2hlcyhpZCwgaWdub3JlZERpcmVjdGlvbiwgZXZlbnQpIHtcbiAgaWYgKGV2ZW50ICYmIGV2ZW50LmRpc3BhdGNoQ29uZmlnLnJlZ2lzdHJhdGlvbk5hbWUpIHtcbiAgICB2YXIgcmVnaXN0cmF0aW9uTmFtZSA9IGV2ZW50LmRpc3BhdGNoQ29uZmlnLnJlZ2lzdHJhdGlvbk5hbWU7XG4gICAgdmFyIGxpc3RlbmVyID0gZ2V0TGlzdGVuZXIoaWQsIHJlZ2lzdHJhdGlvbk5hbWUpO1xuICAgIGlmIChsaXN0ZW5lcikge1xuICAgICAgZXZlbnQuX2Rpc3BhdGNoTGlzdGVuZXJzID0gYWNjdW11bGF0ZUludG8oZXZlbnQuX2Rpc3BhdGNoTGlzdGVuZXJzLCBsaXN0ZW5lcik7XG4gICAgICBldmVudC5fZGlzcGF0Y2hJRHMgPSBhY2N1bXVsYXRlSW50byhldmVudC5fZGlzcGF0Y2hJRHMsIGlkKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBBY2N1bXVsYXRlcyBkaXNwYXRjaGVzIG9uIGFuIGBTeW50aGV0aWNFdmVudGAsIGJ1dCBvbmx5IGZvciB0aGVcbiAqIGBkaXNwYXRjaE1hcmtlcmAuXG4gKiBAcGFyYW0ge1N5bnRoZXRpY0V2ZW50fSBldmVudFxuICovXG5mdW5jdGlvbiBhY2N1bXVsYXRlRGlyZWN0RGlzcGF0Y2hlc1NpbmdsZShldmVudCkge1xuICBpZiAoZXZlbnQgJiYgZXZlbnQuZGlzcGF0Y2hDb25maWcucmVnaXN0cmF0aW9uTmFtZSkge1xuICAgIGFjY3VtdWxhdGVEaXNwYXRjaGVzKGV2ZW50LmRpc3BhdGNoTWFya2VyLCBudWxsLCBldmVudCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gYWNjdW11bGF0ZVR3b1BoYXNlRGlzcGF0Y2hlcyhldmVudHMpIHtcbiAgZm9yRWFjaEFjY3VtdWxhdGVkKGV2ZW50cywgYWNjdW11bGF0ZVR3b1BoYXNlRGlzcGF0Y2hlc1NpbmdsZSk7XG59XG5cbmZ1bmN0aW9uIGFjY3VtdWxhdGVUd29QaGFzZURpc3BhdGNoZXNTa2lwVGFyZ2V0KGV2ZW50cykge1xuICBmb3JFYWNoQWNjdW11bGF0ZWQoZXZlbnRzLCBhY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzU2luZ2xlU2tpcFRhcmdldCk7XG59XG5cbmZ1bmN0aW9uIGFjY3VtdWxhdGVFbnRlckxlYXZlRGlzcGF0Y2hlcyhsZWF2ZSwgZW50ZXIsIGZyb21JRCwgdG9JRCkge1xuICBFdmVudFBsdWdpbkh1Yi5pbmplY3Rpb24uZ2V0SW5zdGFuY2VIYW5kbGUoKS50cmF2ZXJzZUVudGVyTGVhdmUoZnJvbUlELCB0b0lELCBhY2N1bXVsYXRlRGlzcGF0Y2hlcywgbGVhdmUsIGVudGVyKTtcbn1cblxuZnVuY3Rpb24gYWNjdW11bGF0ZURpcmVjdERpc3BhdGNoZXMoZXZlbnRzKSB7XG4gIGZvckVhY2hBY2N1bXVsYXRlZChldmVudHMsIGFjY3VtdWxhdGVEaXJlY3REaXNwYXRjaGVzU2luZ2xlKTtcbn1cblxuLyoqXG4gKiBBIHNtYWxsIHNldCBvZiBwcm9wYWdhdGlvbiBwYXR0ZXJucywgZWFjaCBvZiB3aGljaCB3aWxsIGFjY2VwdCBhIHNtYWxsIGFtb3VudFxuICogb2YgaW5mb3JtYXRpb24sIGFuZCBnZW5lcmF0ZSBhIHNldCBvZiBcImRpc3BhdGNoIHJlYWR5IGV2ZW50IG9iamVjdHNcIiAtIHdoaWNoXG4gKiBhcmUgc2V0cyBvZiBldmVudHMgdGhhdCBoYXZlIGFscmVhZHkgYmVlbiBhbm5vdGF0ZWQgd2l0aCBhIHNldCBvZiBkaXNwYXRjaGVkXG4gKiBsaXN0ZW5lciBmdW5jdGlvbnMvaWRzLiBUaGUgQVBJIGlzIGRlc2lnbmVkIHRoaXMgd2F5IHRvIGRpc2NvdXJhZ2UgdGhlc2VcbiAqIHByb3BhZ2F0aW9uIHN0cmF0ZWdpZXMgZnJvbSBhY3R1YWxseSBleGVjdXRpbmcgdGhlIGRpc3BhdGNoZXMsIHNpbmNlIHdlXG4gKiBhbHdheXMgd2FudCB0byBjb2xsZWN0IHRoZSBlbnRpcmUgc2V0IG9mIGRpc3BhdGNoZXMgYmVmb3JlIGV4ZWN1dGluZyBldmVudCBhXG4gKiBzaW5nbGUgb25lLlxuICpcbiAqIEBjb25zdHJ1Y3RvciBFdmVudFByb3BhZ2F0b3JzXG4gKi9cbnZhciBFdmVudFByb3BhZ2F0b3JzID0ge1xuICBhY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzOiBhY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzLFxuICBhY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzU2tpcFRhcmdldDogYWNjdW11bGF0ZVR3b1BoYXNlRGlzcGF0Y2hlc1NraXBUYXJnZXQsXG4gIGFjY3VtdWxhdGVEaXJlY3REaXNwYXRjaGVzOiBhY2N1bXVsYXRlRGlyZWN0RGlzcGF0Y2hlcyxcbiAgYWNjdW11bGF0ZUVudGVyTGVhdmVEaXNwYXRjaGVzOiBhY2N1bXVsYXRlRW50ZXJMZWF2ZURpc3BhdGNoZXNcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRQcm9wYWdhdG9ycztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QvbGliL0V2ZW50UHJvcGFnYXRvcnMuanNcbi8vIG1vZHVsZSBpZCA9IDczXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBGYWxsYmFja0NvbXBvc2l0aW9uU3RhdGVcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUG9vbGVkQ2xhc3MgPSByZXF1aXJlKCcuL1Bvb2xlZENsYXNzJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBnZXRUZXh0Q29udGVudEFjY2Vzc29yID0gcmVxdWlyZSgnLi9nZXRUZXh0Q29udGVudEFjY2Vzc29yJyk7XG5cbi8qKlxuICogVGhpcyBoZWxwZXIgY2xhc3Mgc3RvcmVzIGluZm9ybWF0aW9uIGFib3V0IHRleHQgY29udGVudCBvZiBhIHRhcmdldCBub2RlLFxuICogYWxsb3dpbmcgY29tcGFyaXNvbiBvZiBjb250ZW50IGJlZm9yZSBhbmQgYWZ0ZXIgYSBnaXZlbiBldmVudC5cbiAqXG4gKiBJZGVudGlmeSB0aGUgbm9kZSB3aGVyZSBzZWxlY3Rpb24gY3VycmVudGx5IGJlZ2lucywgdGhlbiBvYnNlcnZlXG4gKiBib3RoIGl0cyB0ZXh0IGNvbnRlbnQgYW5kIGl0cyBjdXJyZW50IHBvc2l0aW9uIGluIHRoZSBET00uIFNpbmNlIHRoZVxuICogYnJvd3NlciBtYXkgbmF0aXZlbHkgcmVwbGFjZSB0aGUgdGFyZ2V0IG5vZGUgZHVyaW5nIGNvbXBvc2l0aW9uLCB3ZSBjYW5cbiAqIHVzZSBpdHMgcG9zaXRpb24gdG8gZmluZCBpdHMgcmVwbGFjZW1lbnQuXG4gKlxuICogQHBhcmFtIHtET01FdmVudFRhcmdldH0gcm9vdFxuICovXG5mdW5jdGlvbiBGYWxsYmFja0NvbXBvc2l0aW9uU3RhdGUocm9vdCkge1xuICB0aGlzLl9yb290ID0gcm9vdDtcbiAgdGhpcy5fc3RhcnRUZXh0ID0gdGhpcy5nZXRUZXh0KCk7XG4gIHRoaXMuX2ZhbGxiYWNrVGV4dCA9IG51bGw7XG59XG5cbmFzc2lnbihGYWxsYmFja0NvbXBvc2l0aW9uU3RhdGUucHJvdG90eXBlLCB7XG4gIGRlc3RydWN0b3I6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9yb290ID0gbnVsbDtcbiAgICB0aGlzLl9zdGFydFRleHQgPSBudWxsO1xuICAgIHRoaXMuX2ZhbGxiYWNrVGV4dCA9IG51bGw7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCBjdXJyZW50IHRleHQgb2YgaW5wdXQuXG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIGdldFRleHQ6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoJ3ZhbHVlJyBpbiB0aGlzLl9yb290KSB7XG4gICAgICByZXR1cm4gdGhpcy5fcm9vdC52YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3Jvb3RbZ2V0VGV4dENvbnRlbnRBY2Nlc3NvcigpXTtcbiAgfSxcblxuICAvKipcbiAgICogRGV0ZXJtaW5lIHRoZSBkaWZmZXJpbmcgc3Vic3RyaW5nIGJldHdlZW4gdGhlIGluaXRpYWxseSBzdG9yZWRcbiAgICogdGV4dCBjb250ZW50IGFuZCB0aGUgY3VycmVudCBjb250ZW50LlxuICAgKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICBnZXREYXRhOiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuX2ZhbGxiYWNrVGV4dCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2ZhbGxiYWNrVGV4dDtcbiAgICB9XG5cbiAgICB2YXIgc3RhcnQ7XG4gICAgdmFyIHN0YXJ0VmFsdWUgPSB0aGlzLl9zdGFydFRleHQ7XG4gICAgdmFyIHN0YXJ0TGVuZ3RoID0gc3RhcnRWYWx1ZS5sZW5ndGg7XG4gICAgdmFyIGVuZDtcbiAgICB2YXIgZW5kVmFsdWUgPSB0aGlzLmdldFRleHQoKTtcbiAgICB2YXIgZW5kTGVuZ3RoID0gZW5kVmFsdWUubGVuZ3RoO1xuXG4gICAgZm9yIChzdGFydCA9IDA7IHN0YXJ0IDwgc3RhcnRMZW5ndGg7IHN0YXJ0KyspIHtcbiAgICAgIGlmIChzdGFydFZhbHVlW3N0YXJ0XSAhPT0gZW5kVmFsdWVbc3RhcnRdKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBtaW5FbmQgPSBzdGFydExlbmd0aCAtIHN0YXJ0O1xuICAgIGZvciAoZW5kID0gMTsgZW5kIDw9IG1pbkVuZDsgZW5kKyspIHtcbiAgICAgIGlmIChzdGFydFZhbHVlW3N0YXJ0TGVuZ3RoIC0gZW5kXSAhPT0gZW5kVmFsdWVbZW5kTGVuZ3RoIC0gZW5kXSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgc2xpY2VUYWlsID0gZW5kID4gMSA/IDEgLSBlbmQgOiB1bmRlZmluZWQ7XG4gICAgdGhpcy5fZmFsbGJhY2tUZXh0ID0gZW5kVmFsdWUuc2xpY2Uoc3RhcnQsIHNsaWNlVGFpbCk7XG4gICAgcmV0dXJuIHRoaXMuX2ZhbGxiYWNrVGV4dDtcbiAgfVxufSk7XG5cblBvb2xlZENsYXNzLmFkZFBvb2xpbmdUbyhGYWxsYmFja0NvbXBvc2l0aW9uU3RhdGUpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEZhbGxiYWNrQ29tcG9zaXRpb25TdGF0ZTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QvbGliL0ZhbGxiYWNrQ29tcG9zaXRpb25TdGF0ZS5qc1xuLy8gbW9kdWxlIGlkID0gNzRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGdldFRleHRDb250ZW50QWNjZXNzb3JcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHJlcXVpcmUoJ2ZianMvbGliL0V4ZWN1dGlvbkVudmlyb25tZW50Jyk7XG5cbnZhciBjb250ZW50S2V5ID0gbnVsbDtcblxuLyoqXG4gKiBHZXRzIHRoZSBrZXkgdXNlZCB0byBhY2Nlc3MgdGV4dCBjb250ZW50IG9uIGEgRE9NIG5vZGUuXG4gKlxuICogQHJldHVybiB7P3N0cmluZ30gS2V5IHVzZWQgdG8gYWNjZXNzIHRleHQgY29udGVudC5cbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBnZXRUZXh0Q29udGVudEFjY2Vzc29yKCkge1xuICBpZiAoIWNvbnRlbnRLZXkgJiYgRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NKSB7XG4gICAgLy8gUHJlZmVyIHRleHRDb250ZW50IHRvIGlubmVyVGV4dCBiZWNhdXNlIG1hbnkgYnJvd3NlcnMgc3VwcG9ydCBib3RoIGJ1dFxuICAgIC8vIFNWRyA8dGV4dD4gZWxlbWVudHMgZG9uJ3Qgc3VwcG9ydCBpbm5lclRleHQgZXZlbiB3aGVuIDxkaXY+IGRvZXMuXG4gICAgY29udGVudEtleSA9ICd0ZXh0Q29udGVudCcgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ID8gJ3RleHRDb250ZW50JyA6ICdpbm5lclRleHQnO1xuICB9XG4gIHJldHVybiBjb250ZW50S2V5O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdldFRleHRDb250ZW50QWNjZXNzb3I7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0L2xpYi9nZXRUZXh0Q29udGVudEFjY2Vzc29yLmpzXG4vLyBtb2R1bGUgaWQgPSA3NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgU3ludGhldGljQ29tcG9zaXRpb25FdmVudFxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBTeW50aGV0aWNFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljRXZlbnQnKTtcblxuLyoqXG4gKiBAaW50ZXJmYWNlIEV2ZW50XG4gKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL0RPTS1MZXZlbC0zLUV2ZW50cy8jZXZlbnRzLWNvbXBvc2l0aW9uZXZlbnRzXG4gKi9cbnZhciBDb21wb3NpdGlvbkV2ZW50SW50ZXJmYWNlID0ge1xuICBkYXRhOiBudWxsXG59O1xuXG4vKipcbiAqIEBwYXJhbSB7b2JqZWN0fSBkaXNwYXRjaENvbmZpZyBDb25maWd1cmF0aW9uIHVzZWQgdG8gZGlzcGF0Y2ggdGhpcyBldmVudC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBkaXNwYXRjaE1hcmtlciBNYXJrZXIgaWRlbnRpZnlpbmcgdGhlIGV2ZW50IHRhcmdldC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAqIEBleHRlbmRzIHtTeW50aGV0aWNVSUV2ZW50fVxuICovXG5mdW5jdGlvbiBTeW50aGV0aWNDb21wb3NpdGlvbkV2ZW50KGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KSB7XG4gIFN5bnRoZXRpY0V2ZW50LmNhbGwodGhpcywgZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xufVxuXG5TeW50aGV0aWNFdmVudC5hdWdtZW50Q2xhc3MoU3ludGhldGljQ29tcG9zaXRpb25FdmVudCwgQ29tcG9zaXRpb25FdmVudEludGVyZmFjZSk7XG5cbm1vZHVsZS5leHBvcnRzID0gU3ludGhldGljQ29tcG9zaXRpb25FdmVudDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QvbGliL1N5bnRoZXRpY0NvbXBvc2l0aW9uRXZlbnQuanNcbi8vIG1vZHVsZSBpZCA9IDc2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBTeW50aGV0aWNFdmVudFxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBQb29sZWRDbGFzcyA9IHJlcXVpcmUoJy4vUG9vbGVkQ2xhc3MnKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIGVtcHR5RnVuY3Rpb24gPSByZXF1aXJlKCdmYmpzL2xpYi9lbXB0eUZ1bmN0aW9uJyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxuLyoqXG4gKiBAaW50ZXJmYWNlIEV2ZW50XG4gKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL0RPTS1MZXZlbC0zLUV2ZW50cy9cbiAqL1xudmFyIEV2ZW50SW50ZXJmYWNlID0ge1xuICB0eXBlOiBudWxsLFxuICB0YXJnZXQ6IG51bGwsXG4gIC8vIGN1cnJlbnRUYXJnZXQgaXMgc2V0IHdoZW4gZGlzcGF0Y2hpbmc7IG5vIHVzZSBpbiBjb3B5aW5nIGl0IGhlcmVcbiAgY3VycmVudFRhcmdldDogZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc051bGwsXG4gIGV2ZW50UGhhc2U6IG51bGwsXG4gIGJ1YmJsZXM6IG51bGwsXG4gIGNhbmNlbGFibGU6IG51bGwsXG4gIHRpbWVTdGFtcDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgcmV0dXJuIGV2ZW50LnRpbWVTdGFtcCB8fCBEYXRlLm5vdygpO1xuICB9LFxuICBkZWZhdWx0UHJldmVudGVkOiBudWxsLFxuICBpc1RydXN0ZWQ6IG51bGxcbn07XG5cbi8qKlxuICogU3ludGhldGljIGV2ZW50cyBhcmUgZGlzcGF0Y2hlZCBieSBldmVudCBwbHVnaW5zLCB0eXBpY2FsbHkgaW4gcmVzcG9uc2UgdG8gYVxuICogdG9wLWxldmVsIGV2ZW50IGRlbGVnYXRpb24gaGFuZGxlci5cbiAqXG4gKiBUaGVzZSBzeXN0ZW1zIHNob3VsZCBnZW5lcmFsbHkgdXNlIHBvb2xpbmcgdG8gcmVkdWNlIHRoZSBmcmVxdWVuY3kgb2YgZ2FyYmFnZVxuICogY29sbGVjdGlvbi4gVGhlIHN5c3RlbSBzaG91bGQgY2hlY2sgYGlzUGVyc2lzdGVudGAgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgdGhlXG4gKiBldmVudCBzaG91bGQgYmUgcmVsZWFzZWQgaW50byB0aGUgcG9vbCBhZnRlciBiZWluZyBkaXNwYXRjaGVkLiBVc2VycyB0aGF0XG4gKiBuZWVkIGEgcGVyc2lzdGVkIGV2ZW50IHNob3VsZCBpbnZva2UgYHBlcnNpc3RgLlxuICpcbiAqIFN5bnRoZXRpYyBldmVudHMgKGFuZCBzdWJjbGFzc2VzKSBpbXBsZW1lbnQgdGhlIERPTSBMZXZlbCAzIEV2ZW50cyBBUEkgYnlcbiAqIG5vcm1hbGl6aW5nIGJyb3dzZXIgcXVpcmtzLiBTdWJjbGFzc2VzIGRvIG5vdCBuZWNlc3NhcmlseSBoYXZlIHRvIGltcGxlbWVudCBhXG4gKiBET00gaW50ZXJmYWNlOyBjdXN0b20gYXBwbGljYXRpb24tc3BlY2lmaWMgZXZlbnRzIGNhbiBhbHNvIHN1YmNsYXNzIHRoaXMuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IGRpc3BhdGNoQ29uZmlnIENvbmZpZ3VyYXRpb24gdXNlZCB0byBkaXNwYXRjaCB0aGlzIGV2ZW50LlxuICogQHBhcmFtIHtzdHJpbmd9IGRpc3BhdGNoTWFya2VyIE1hcmtlciBpZGVudGlmeWluZyB0aGUgZXZlbnQgdGFyZ2V0LlxuICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuICovXG5mdW5jdGlvbiBTeW50aGV0aWNFdmVudChkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICB0aGlzLmRpc3BhdGNoQ29uZmlnID0gZGlzcGF0Y2hDb25maWc7XG4gIHRoaXMuZGlzcGF0Y2hNYXJrZXIgPSBkaXNwYXRjaE1hcmtlcjtcbiAgdGhpcy5uYXRpdmVFdmVudCA9IG5hdGl2ZUV2ZW50O1xuXG4gIHZhciBJbnRlcmZhY2UgPSB0aGlzLmNvbnN0cnVjdG9yLkludGVyZmFjZTtcbiAgZm9yICh2YXIgcHJvcE5hbWUgaW4gSW50ZXJmYWNlKSB7XG4gICAgaWYgKCFJbnRlcmZhY2UuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgdmFyIG5vcm1hbGl6ZSA9IEludGVyZmFjZVtwcm9wTmFtZV07XG4gICAgaWYgKG5vcm1hbGl6ZSkge1xuICAgICAgdGhpc1twcm9wTmFtZV0gPSBub3JtYWxpemUobmF0aXZlRXZlbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAocHJvcE5hbWUgPT09ICd0YXJnZXQnKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gbmF0aXZlRXZlbnRUYXJnZXQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzW3Byb3BOYW1lXSA9IG5hdGl2ZUV2ZW50W3Byb3BOYW1lXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB2YXIgZGVmYXVsdFByZXZlbnRlZCA9IG5hdGl2ZUV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQgIT0gbnVsbCA/IG5hdGl2ZUV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQgOiBuYXRpdmVFdmVudC5yZXR1cm5WYWx1ZSA9PT0gZmFsc2U7XG4gIGlmIChkZWZhdWx0UHJldmVudGVkKSB7XG4gICAgdGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQgPSBlbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zVHJ1ZTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLmlzRGVmYXVsdFByZXZlbnRlZCA9IGVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNGYWxzZTtcbiAgfVxuICB0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkID0gZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc0ZhbHNlO1xufVxuXG5hc3NpZ24oU3ludGhldGljRXZlbnQucHJvdG90eXBlLCB7XG5cbiAgcHJldmVudERlZmF1bHQ6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmRlZmF1bHRQcmV2ZW50ZWQgPSB0cnVlO1xuICAgIHZhciBldmVudCA9IHRoaXMubmF0aXZlRXZlbnQ7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGV2ZW50LCAnVGhpcyBzeW50aGV0aWMgZXZlbnQgaXMgcmV1c2VkIGZvciBwZXJmb3JtYW5jZSByZWFzb25zLiBJZiB5b3VcXCdyZSAnICsgJ3NlZWluZyB0aGlzLCB5b3VcXCdyZSBjYWxsaW5nIGBwcmV2ZW50RGVmYXVsdGAgb24gYSAnICsgJ3JlbGVhc2VkL251bGxpZmllZCBzeW50aGV0aWMgZXZlbnQuIFRoaXMgaXMgYSBuby1vcC4gU2VlICcgKyAnaHR0cHM6Ly9mYi5tZS9yZWFjdC1ldmVudC1wb29saW5nIGZvciBtb3JlIGluZm9ybWF0aW9uLicpIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAoIWV2ZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LnByZXZlbnREZWZhdWx0KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBldmVudC5yZXR1cm5WYWx1ZSA9IGZhbHNlO1xuICAgIH1cbiAgICB0aGlzLmlzRGVmYXVsdFByZXZlbnRlZCA9IGVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNUcnVlO1xuICB9LFxuXG4gIHN0b3BQcm9wYWdhdGlvbjogZnVuY3Rpb24gKCkge1xuICAgIHZhciBldmVudCA9IHRoaXMubmF0aXZlRXZlbnQ7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGV2ZW50LCAnVGhpcyBzeW50aGV0aWMgZXZlbnQgaXMgcmV1c2VkIGZvciBwZXJmb3JtYW5jZSByZWFzb25zLiBJZiB5b3VcXCdyZSAnICsgJ3NlZWluZyB0aGlzLCB5b3VcXCdyZSBjYWxsaW5nIGBzdG9wUHJvcGFnYXRpb25gIG9uIGEgJyArICdyZWxlYXNlZC9udWxsaWZpZWQgc3ludGhldGljIGV2ZW50LiBUaGlzIGlzIGEgbm8tb3AuIFNlZSAnICsgJ2h0dHBzOi8vZmIubWUvcmVhY3QtZXZlbnQtcG9vbGluZyBmb3IgbW9yZSBpbmZvcm1hdGlvbi4nKSA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKCFldmVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChldmVudC5zdG9wUHJvcGFnYXRpb24pIHtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICBldmVudC5jYW5jZWxCdWJibGUgPSB0cnVlO1xuICAgIH1cbiAgICB0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkID0gZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc1RydWU7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFdlIHJlbGVhc2UgYWxsIGRpc3BhdGNoZWQgYFN5bnRoZXRpY0V2ZW50YHMgYWZ0ZXIgZWFjaCBldmVudCBsb29wLCBhZGRpbmdcbiAgICogdGhlbSBiYWNrIGludG8gdGhlIHBvb2wuIFRoaXMgYWxsb3dzIGEgd2F5IHRvIGhvbGQgb250byBhIHJlZmVyZW5jZSB0aGF0XG4gICAqIHdvbid0IGJlIGFkZGVkIGJhY2sgaW50byB0aGUgcG9vbC5cbiAgICovXG4gIHBlcnNpc3Q6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmlzUGVyc2lzdGVudCA9IGVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNUcnVlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgdGhpcyBldmVudCBzaG91bGQgYmUgcmVsZWFzZWQgYmFjayBpbnRvIHRoZSBwb29sLlxuICAgKlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoaXMgc2hvdWxkIG5vdCBiZSByZWxlYXNlZCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgKi9cbiAgaXNQZXJzaXN0ZW50OiBlbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zRmFsc2UsXG5cbiAgLyoqXG4gICAqIGBQb29sZWRDbGFzc2AgbG9va3MgZm9yIGBkZXN0cnVjdG9yYCBvbiBlYWNoIGluc3RhbmNlIGl0IHJlbGVhc2VzLlxuICAgKi9cbiAgZGVzdHJ1Y3RvcjogZnVuY3Rpb24gKCkge1xuICAgIHZhciBJbnRlcmZhY2UgPSB0aGlzLmNvbnN0cnVjdG9yLkludGVyZmFjZTtcbiAgICBmb3IgKHZhciBwcm9wTmFtZSBpbiBJbnRlcmZhY2UpIHtcbiAgICAgIHRoaXNbcHJvcE5hbWVdID0gbnVsbDtcbiAgICB9XG4gICAgdGhpcy5kaXNwYXRjaENvbmZpZyA9IG51bGw7XG4gICAgdGhpcy5kaXNwYXRjaE1hcmtlciA9IG51bGw7XG4gICAgdGhpcy5uYXRpdmVFdmVudCA9IG51bGw7XG4gIH1cblxufSk7XG5cblN5bnRoZXRpY0V2ZW50LkludGVyZmFjZSA9IEV2ZW50SW50ZXJmYWNlO1xuXG4vKipcbiAqIEhlbHBlciB0byByZWR1Y2UgYm9pbGVycGxhdGUgd2hlbiBjcmVhdGluZyBzdWJjbGFzc2VzLlxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IENsYXNzXG4gKiBAcGFyYW0gez9vYmplY3R9IEludGVyZmFjZVxuICovXG5TeW50aGV0aWNFdmVudC5hdWdtZW50Q2xhc3MgPSBmdW5jdGlvbiAoQ2xhc3MsIEludGVyZmFjZSkge1xuICB2YXIgU3VwZXIgPSB0aGlzO1xuXG4gIHZhciBwcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFN1cGVyLnByb3RvdHlwZSk7XG4gIGFzc2lnbihwcm90b3R5cGUsIENsYXNzLnByb3RvdHlwZSk7XG4gIENsYXNzLnByb3RvdHlwZSA9IHByb3RvdHlwZTtcbiAgQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ2xhc3M7XG5cbiAgQ2xhc3MuSW50ZXJmYWNlID0gYXNzaWduKHt9LCBTdXBlci5JbnRlcmZhY2UsIEludGVyZmFjZSk7XG4gIENsYXNzLmF1Z21lbnRDbGFzcyA9IFN1cGVyLmF1Z21lbnRDbGFzcztcblxuICBQb29sZWRDbGFzcy5hZGRQb29saW5nVG8oQ2xhc3MsIFBvb2xlZENsYXNzLmZvdXJBcmd1bWVudFBvb2xlcik7XG59O1xuXG5Qb29sZWRDbGFzcy5hZGRQb29saW5nVG8oU3ludGhldGljRXZlbnQsIFBvb2xlZENsYXNzLmZvdXJBcmd1bWVudFBvb2xlcik7XG5cbm1vZHVsZS5leHBvcnRzID0gU3ludGhldGljRXZlbnQ7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0L2xpYi9TeW50aGV0aWNFdmVudC5qc1xuLy8gbW9kdWxlIGlkID0gNzdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFN5bnRoZXRpY0lucHV0RXZlbnRcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgU3ludGhldGljRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY0V2ZW50Jyk7XG5cbi8qKlxuICogQGludGVyZmFjZSBFdmVudFxuICogQHNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi8yMDEzL1dELURPTS1MZXZlbC0zLUV2ZW50cy0yMDEzMTEwNVxuICogICAgICAvI2V2ZW50cy1pbnB1dGV2ZW50c1xuICovXG52YXIgSW5wdXRFdmVudEludGVyZmFjZSA9IHtcbiAgZGF0YTogbnVsbFxufTtcblxuLyoqXG4gKiBAcGFyYW0ge29iamVjdH0gZGlzcGF0Y2hDb25maWcgQ29uZmlndXJhdGlvbiB1c2VkIHRvIGRpc3BhdGNoIHRoaXMgZXZlbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gZGlzcGF0Y2hNYXJrZXIgTWFya2VyIGlkZW50aWZ5aW5nIHRoZSBldmVudCB0YXJnZXQuXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gKiBAZXh0ZW5kcyB7U3ludGhldGljVUlFdmVudH1cbiAqL1xuZnVuY3Rpb24gU3ludGhldGljSW5wdXRFdmVudChkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICBTeW50aGV0aWNFdmVudC5jYWxsKHRoaXMsIGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcbn1cblxuU3ludGhldGljRXZlbnQuYXVnbWVudENsYXNzKFN5bnRoZXRpY0lucHV0RXZlbnQsIElucHV0RXZlbnRJbnRlcmZhY2UpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFN5bnRoZXRpY0lucHV0RXZlbnQ7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0L2xpYi9TeW50aGV0aWNJbnB1dEV2ZW50LmpzXG4vLyBtb2R1bGUgaWQgPSA3OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUga2V5T2ZcbiAqL1xuXG4vKipcbiAqIEFsbG93cyBleHRyYWN0aW9uIG9mIGEgbWluaWZpZWQga2V5LiBMZXQncyB0aGUgYnVpbGQgc3lzdGVtIG1pbmlmeSBrZXlzXG4gKiB3aXRob3V0IGxvc2luZyB0aGUgYWJpbGl0eSB0byBkeW5hbWljYWxseSB1c2Uga2V5IHN0cmluZ3MgYXMgdmFsdWVzXG4gKiB0aGVtc2VsdmVzLiBQYXNzIGluIGFuIG9iamVjdCB3aXRoIGEgc2luZ2xlIGtleS92YWwgcGFpciBhbmQgaXQgd2lsbCByZXR1cm5cbiAqIHlvdSB0aGUgc3RyaW5nIGtleSBvZiB0aGF0IHNpbmdsZSByZWNvcmQuIFN1cHBvc2UgeW91IHdhbnQgdG8gZ3JhYiB0aGVcbiAqIHZhbHVlIGZvciBhIGtleSAnY2xhc3NOYW1lJyBpbnNpZGUgb2YgYW4gb2JqZWN0LiBLZXkvdmFsIG1pbmlmaWNhdGlvbiBtYXlcbiAqIGhhdmUgYWxpYXNlZCB0aGF0IGtleSB0byBiZSAneGExMicuIGtleU9mKHtjbGFzc05hbWU6IG51bGx9KSB3aWxsIHJldHVyblxuICogJ3hhMTInIGluIHRoYXQgY2FzZS4gUmVzb2x2ZSBrZXlzIHlvdSB3YW50IHRvIHVzZSBvbmNlIGF0IHN0YXJ0dXAgdGltZSwgdGhlblxuICogcmV1c2UgdGhvc2UgcmVzb2x1dGlvbnMuXG4gKi9cblwidXNlIHN0cmljdFwiO1xuXG52YXIga2V5T2YgPSBmdW5jdGlvbiAob25lS2V5T2JqKSB7XG4gIHZhciBrZXk7XG4gIGZvciAoa2V5IGluIG9uZUtleU9iaikge1xuICAgIGlmICghb25lS2V5T2JqLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICByZXR1cm4ga2V5O1xuICB9XG4gIHJldHVybiBudWxsO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBrZXlPZjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vZmJqcy9saWIva2V5T2YuanNcbi8vIG1vZHVsZSBpZCA9IDc5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBDaGFuZ2VFdmVudFBsdWdpblxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEV2ZW50Q29uc3RhbnRzID0gcmVxdWlyZSgnLi9FdmVudENvbnN0YW50cycpO1xudmFyIEV2ZW50UGx1Z2luSHViID0gcmVxdWlyZSgnLi9FdmVudFBsdWdpbkh1YicpO1xudmFyIEV2ZW50UHJvcGFnYXRvcnMgPSByZXF1aXJlKCcuL0V2ZW50UHJvcGFnYXRvcnMnKTtcbnZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHJlcXVpcmUoJ2ZianMvbGliL0V4ZWN1dGlvbkVudmlyb25tZW50Jyk7XG52YXIgUmVhY3RVcGRhdGVzID0gcmVxdWlyZSgnLi9SZWFjdFVwZGF0ZXMnKTtcbnZhciBTeW50aGV0aWNFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljRXZlbnQnKTtcblxudmFyIGdldEV2ZW50VGFyZ2V0ID0gcmVxdWlyZSgnLi9nZXRFdmVudFRhcmdldCcpO1xudmFyIGlzRXZlbnRTdXBwb3J0ZWQgPSByZXF1aXJlKCcuL2lzRXZlbnRTdXBwb3J0ZWQnKTtcbnZhciBpc1RleHRJbnB1dEVsZW1lbnQgPSByZXF1aXJlKCcuL2lzVGV4dElucHV0RWxlbWVudCcpO1xudmFyIGtleU9mID0gcmVxdWlyZSgnZmJqcy9saWIva2V5T2YnKTtcblxudmFyIHRvcExldmVsVHlwZXMgPSBFdmVudENvbnN0YW50cy50b3BMZXZlbFR5cGVzO1xuXG52YXIgZXZlbnRUeXBlcyA9IHtcbiAgY2hhbmdlOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25DaGFuZ2U6IG51bGwgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkNoYW5nZUNhcHR1cmU6IG51bGwgfSlcbiAgICB9LFxuICAgIGRlcGVuZGVuY2llczogW3RvcExldmVsVHlwZXMudG9wQmx1ciwgdG9wTGV2ZWxUeXBlcy50b3BDaGFuZ2UsIHRvcExldmVsVHlwZXMudG9wQ2xpY2ssIHRvcExldmVsVHlwZXMudG9wRm9jdXMsIHRvcExldmVsVHlwZXMudG9wSW5wdXQsIHRvcExldmVsVHlwZXMudG9wS2V5RG93biwgdG9wTGV2ZWxUeXBlcy50b3BLZXlVcCwgdG9wTGV2ZWxUeXBlcy50b3BTZWxlY3Rpb25DaGFuZ2VdXG4gIH1cbn07XG5cbi8qKlxuICogRm9yIElFIHNoaW1zXG4gKi9cbnZhciBhY3RpdmVFbGVtZW50ID0gbnVsbDtcbnZhciBhY3RpdmVFbGVtZW50SUQgPSBudWxsO1xudmFyIGFjdGl2ZUVsZW1lbnRWYWx1ZSA9IG51bGw7XG52YXIgYWN0aXZlRWxlbWVudFZhbHVlUHJvcCA9IG51bGw7XG5cbi8qKlxuICogU0VDVElPTjogaGFuZGxlIGBjaGFuZ2VgIGV2ZW50XG4gKi9cbmZ1bmN0aW9uIHNob3VsZFVzZUNoYW5nZUV2ZW50KGVsZW0pIHtcbiAgdmFyIG5vZGVOYW1lID0gZWxlbS5ub2RlTmFtZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG4gIHJldHVybiBub2RlTmFtZSA9PT0gJ3NlbGVjdCcgfHwgbm9kZU5hbWUgPT09ICdpbnB1dCcgJiYgZWxlbS50eXBlID09PSAnZmlsZSc7XG59XG5cbnZhciBkb2VzQ2hhbmdlRXZlbnRCdWJibGUgPSBmYWxzZTtcbmlmIChFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00pIHtcbiAgLy8gU2VlIGBoYW5kbGVDaGFuZ2VgIGNvbW1lbnQgYmVsb3dcbiAgZG9lc0NoYW5nZUV2ZW50QnViYmxlID0gaXNFdmVudFN1cHBvcnRlZCgnY2hhbmdlJykgJiYgKCEoJ2RvY3VtZW50TW9kZScgaW4gZG9jdW1lbnQpIHx8IGRvY3VtZW50LmRvY3VtZW50TW9kZSA+IDgpO1xufVxuXG5mdW5jdGlvbiBtYW51YWxEaXNwYXRjaENoYW5nZUV2ZW50KG5hdGl2ZUV2ZW50KSB7XG4gIHZhciBldmVudCA9IFN5bnRoZXRpY0V2ZW50LmdldFBvb2xlZChldmVudFR5cGVzLmNoYW5nZSwgYWN0aXZlRWxlbWVudElELCBuYXRpdmVFdmVudCwgZ2V0RXZlbnRUYXJnZXQobmF0aXZlRXZlbnQpKTtcbiAgRXZlbnRQcm9wYWdhdG9ycy5hY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzKGV2ZW50KTtcblxuICAvLyBJZiBjaGFuZ2UgYW5kIHByb3BlcnR5Y2hhbmdlIGJ1YmJsZWQsIHdlJ2QganVzdCBiaW5kIHRvIGl0IGxpa2UgYWxsIHRoZVxuICAvLyBvdGhlciBldmVudHMgYW5kIGhhdmUgaXQgZ28gdGhyb3VnaCBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuIFNpbmNlIGl0XG4gIC8vIGRvZXNuJ3QsIHdlIG1hbnVhbGx5IGxpc3RlbiBmb3IgdGhlIGV2ZW50cyBhbmQgc28gd2UgaGF2ZSB0byBlbnF1ZXVlIGFuZFxuICAvLyBwcm9jZXNzIHRoZSBhYnN0cmFjdCBldmVudCBtYW51YWxseS5cbiAgLy9cbiAgLy8gQmF0Y2hpbmcgaXMgbmVjZXNzYXJ5IGhlcmUgaW4gb3JkZXIgdG8gZW5zdXJlIHRoYXQgYWxsIGV2ZW50IGhhbmRsZXJzIHJ1blxuICAvLyBiZWZvcmUgdGhlIG5leHQgcmVyZW5kZXIgKGluY2x1ZGluZyBldmVudCBoYW5kbGVycyBhdHRhY2hlZCB0byBhbmNlc3RvclxuICAvLyBlbGVtZW50cyBpbnN0ZWFkIG9mIGRpcmVjdGx5IG9uIHRoZSBpbnB1dCkuIFdpdGhvdXQgdGhpcywgY29udHJvbGxlZFxuICAvLyBjb21wb25lbnRzIGRvbid0IHdvcmsgcHJvcGVybHkgaW4gY29uanVuY3Rpb24gd2l0aCBldmVudCBidWJibGluZyBiZWNhdXNlXG4gIC8vIHRoZSBjb21wb25lbnQgaXMgcmVyZW5kZXJlZCBhbmQgdGhlIHZhbHVlIHJldmVydGVkIGJlZm9yZSBhbGwgdGhlIGV2ZW50XG4gIC8vIGhhbmRsZXJzIGNhbiBydW4uIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QvaXNzdWVzLzcwOC5cbiAgUmVhY3RVcGRhdGVzLmJhdGNoZWRVcGRhdGVzKHJ1bkV2ZW50SW5CYXRjaCwgZXZlbnQpO1xufVxuXG5mdW5jdGlvbiBydW5FdmVudEluQmF0Y2goZXZlbnQpIHtcbiAgRXZlbnRQbHVnaW5IdWIuZW5xdWV1ZUV2ZW50cyhldmVudCk7XG4gIEV2ZW50UGx1Z2luSHViLnByb2Nlc3NFdmVudFF1ZXVlKGZhbHNlKTtcbn1cblxuZnVuY3Rpb24gc3RhcnRXYXRjaGluZ0ZvckNoYW5nZUV2ZW50SUU4KHRhcmdldCwgdGFyZ2V0SUQpIHtcbiAgYWN0aXZlRWxlbWVudCA9IHRhcmdldDtcbiAgYWN0aXZlRWxlbWVudElEID0gdGFyZ2V0SUQ7XG4gIGFjdGl2ZUVsZW1lbnQuYXR0YWNoRXZlbnQoJ29uY2hhbmdlJywgbWFudWFsRGlzcGF0Y2hDaGFuZ2VFdmVudCk7XG59XG5cbmZ1bmN0aW9uIHN0b3BXYXRjaGluZ0ZvckNoYW5nZUV2ZW50SUU4KCkge1xuICBpZiAoIWFjdGl2ZUVsZW1lbnQpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgYWN0aXZlRWxlbWVudC5kZXRhY2hFdmVudCgnb25jaGFuZ2UnLCBtYW51YWxEaXNwYXRjaENoYW5nZUV2ZW50KTtcbiAgYWN0aXZlRWxlbWVudCA9IG51bGw7XG4gIGFjdGl2ZUVsZW1lbnRJRCA9IG51bGw7XG59XG5cbmZ1bmN0aW9uIGdldFRhcmdldElERm9yQ2hhbmdlRXZlbnQodG9wTGV2ZWxUeXBlLCB0b3BMZXZlbFRhcmdldCwgdG9wTGV2ZWxUYXJnZXRJRCkge1xuICBpZiAodG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcENoYW5nZSkge1xuICAgIHJldHVybiB0b3BMZXZlbFRhcmdldElEO1xuICB9XG59XG5mdW5jdGlvbiBoYW5kbGVFdmVudHNGb3JDaGFuZ2VFdmVudElFOCh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElEKSB7XG4gIGlmICh0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wRm9jdXMpIHtcbiAgICAvLyBzdG9wV2F0Y2hpbmcoKSBzaG91bGQgYmUgYSBub29wIGhlcmUgYnV0IHdlIGNhbGwgaXQganVzdCBpbiBjYXNlIHdlXG4gICAgLy8gbWlzc2VkIGEgYmx1ciBldmVudCBzb21laG93LlxuICAgIHN0b3BXYXRjaGluZ0ZvckNoYW5nZUV2ZW50SUU4KCk7XG4gICAgc3RhcnRXYXRjaGluZ0ZvckNoYW5nZUV2ZW50SUU4KHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElEKTtcbiAgfSBlbHNlIGlmICh0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wQmx1cikge1xuICAgIHN0b3BXYXRjaGluZ0ZvckNoYW5nZUV2ZW50SUU4KCk7XG4gIH1cbn1cblxuLyoqXG4gKiBTRUNUSU9OOiBoYW5kbGUgYGlucHV0YCBldmVudFxuICovXG52YXIgaXNJbnB1dEV2ZW50U3VwcG9ydGVkID0gZmFsc2U7XG5pZiAoRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NKSB7XG4gIC8vIElFOSBjbGFpbXMgdG8gc3VwcG9ydCB0aGUgaW5wdXQgZXZlbnQgYnV0IGZhaWxzIHRvIHRyaWdnZXIgaXQgd2hlblxuICAvLyBkZWxldGluZyB0ZXh0LCBzbyB3ZSBpZ25vcmUgaXRzIGlucHV0IGV2ZW50c1xuICBpc0lucHV0RXZlbnRTdXBwb3J0ZWQgPSBpc0V2ZW50U3VwcG9ydGVkKCdpbnB1dCcpICYmICghKCdkb2N1bWVudE1vZGUnIGluIGRvY3VtZW50KSB8fCBkb2N1bWVudC5kb2N1bWVudE1vZGUgPiA5KTtcbn1cblxuLyoqXG4gKiAoRm9yIG9sZCBJRS4pIFJlcGxhY2VtZW50IGdldHRlci9zZXR0ZXIgZm9yIHRoZSBgdmFsdWVgIHByb3BlcnR5IHRoYXQgZ2V0c1xuICogc2V0IG9uIHRoZSBhY3RpdmUgZWxlbWVudC5cbiAqL1xudmFyIG5ld1ZhbHVlUHJvcCA9IHtcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGFjdGl2ZUVsZW1lbnRWYWx1ZVByb3AuZ2V0LmNhbGwodGhpcyk7XG4gIH0sXG4gIHNldDogZnVuY3Rpb24gKHZhbCkge1xuICAgIC8vIENhc3QgdG8gYSBzdHJpbmcgc28gd2UgY2FuIGRvIGVxdWFsaXR5IGNoZWNrcy5cbiAgICBhY3RpdmVFbGVtZW50VmFsdWUgPSAnJyArIHZhbDtcbiAgICBhY3RpdmVFbGVtZW50VmFsdWVQcm9wLnNldC5jYWxsKHRoaXMsIHZhbCk7XG4gIH1cbn07XG5cbi8qKlxuICogKEZvciBvbGQgSUUuKSBTdGFydHMgdHJhY2tpbmcgcHJvcGVydHljaGFuZ2UgZXZlbnRzIG9uIHRoZSBwYXNzZWQtaW4gZWxlbWVudFxuICogYW5kIG92ZXJyaWRlIHRoZSB2YWx1ZSBwcm9wZXJ0eSBzbyB0aGF0IHdlIGNhbiBkaXN0aW5ndWlzaCB1c2VyIGV2ZW50cyBmcm9tXG4gKiB2YWx1ZSBjaGFuZ2VzIGluIEpTLlxuICovXG5mdW5jdGlvbiBzdGFydFdhdGNoaW5nRm9yVmFsdWVDaGFuZ2UodGFyZ2V0LCB0YXJnZXRJRCkge1xuICBhY3RpdmVFbGVtZW50ID0gdGFyZ2V0O1xuICBhY3RpdmVFbGVtZW50SUQgPSB0YXJnZXRJRDtcbiAgYWN0aXZlRWxlbWVudFZhbHVlID0gdGFyZ2V0LnZhbHVlO1xuICBhY3RpdmVFbGVtZW50VmFsdWVQcm9wID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQuY29uc3RydWN0b3IucHJvdG90eXBlLCAndmFsdWUnKTtcblxuICAvLyBOb3QgZ3VhcmRlZCBpbiBhIGNhbkRlZmluZVByb3BlcnR5IGNoZWNrOiBJRTggc3VwcG9ydHMgZGVmaW5lUHJvcGVydHkgb25seVxuICAvLyBvbiBET00gZWxlbWVudHNcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGFjdGl2ZUVsZW1lbnQsICd2YWx1ZScsIG5ld1ZhbHVlUHJvcCk7XG4gIGFjdGl2ZUVsZW1lbnQuYXR0YWNoRXZlbnQoJ29ucHJvcGVydHljaGFuZ2UnLCBoYW5kbGVQcm9wZXJ0eUNoYW5nZSk7XG59XG5cbi8qKlxuICogKEZvciBvbGQgSUUuKSBSZW1vdmVzIHRoZSBldmVudCBsaXN0ZW5lcnMgZnJvbSB0aGUgY3VycmVudGx5LXRyYWNrZWQgZWxlbWVudCxcbiAqIGlmIGFueSBleGlzdHMuXG4gKi9cbmZ1bmN0aW9uIHN0b3BXYXRjaGluZ0ZvclZhbHVlQ2hhbmdlKCkge1xuICBpZiAoIWFjdGl2ZUVsZW1lbnQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBkZWxldGUgcmVzdG9yZXMgdGhlIG9yaWdpbmFsIHByb3BlcnR5IGRlZmluaXRpb25cbiAgZGVsZXRlIGFjdGl2ZUVsZW1lbnQudmFsdWU7XG4gIGFjdGl2ZUVsZW1lbnQuZGV0YWNoRXZlbnQoJ29ucHJvcGVydHljaGFuZ2UnLCBoYW5kbGVQcm9wZXJ0eUNoYW5nZSk7XG5cbiAgYWN0aXZlRWxlbWVudCA9IG51bGw7XG4gIGFjdGl2ZUVsZW1lbnRJRCA9IG51bGw7XG4gIGFjdGl2ZUVsZW1lbnRWYWx1ZSA9IG51bGw7XG4gIGFjdGl2ZUVsZW1lbnRWYWx1ZVByb3AgPSBudWxsO1xufVxuXG4vKipcbiAqIChGb3Igb2xkIElFLikgSGFuZGxlcyBhIHByb3BlcnR5Y2hhbmdlIGV2ZW50LCBzZW5kaW5nIGEgYGNoYW5nZWAgZXZlbnQgaWZcbiAqIHRoZSB2YWx1ZSBvZiB0aGUgYWN0aXZlIGVsZW1lbnQgaGFzIGNoYW5nZWQuXG4gKi9cbmZ1bmN0aW9uIGhhbmRsZVByb3BlcnR5Q2hhbmdlKG5hdGl2ZUV2ZW50KSB7XG4gIGlmIChuYXRpdmVFdmVudC5wcm9wZXJ0eU5hbWUgIT09ICd2YWx1ZScpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIHZhbHVlID0gbmF0aXZlRXZlbnQuc3JjRWxlbWVudC52YWx1ZTtcbiAgaWYgKHZhbHVlID09PSBhY3RpdmVFbGVtZW50VmFsdWUpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgYWN0aXZlRWxlbWVudFZhbHVlID0gdmFsdWU7XG5cbiAgbWFudWFsRGlzcGF0Y2hDaGFuZ2VFdmVudChuYXRpdmVFdmVudCk7XG59XG5cbi8qKlxuICogSWYgYSBgY2hhbmdlYCBldmVudCBzaG91bGQgYmUgZmlyZWQsIHJldHVybnMgdGhlIHRhcmdldCdzIElELlxuICovXG5mdW5jdGlvbiBnZXRUYXJnZXRJREZvcklucHV0RXZlbnQodG9wTGV2ZWxUeXBlLCB0b3BMZXZlbFRhcmdldCwgdG9wTGV2ZWxUYXJnZXRJRCkge1xuICBpZiAodG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcElucHV0KSB7XG4gICAgLy8gSW4gbW9kZXJuIGJyb3dzZXJzIChpLmUuLCBub3QgSUU4IG9yIElFOSksIHRoZSBpbnB1dCBldmVudCBpcyBleGFjdGx5XG4gICAgLy8gd2hhdCB3ZSB3YW50IHNvIGZhbGwgdGhyb3VnaCBoZXJlIGFuZCB0cmlnZ2VyIGFuIGFic3RyYWN0IGV2ZW50XG4gICAgcmV0dXJuIHRvcExldmVsVGFyZ2V0SUQ7XG4gIH1cbn1cblxuLy8gRm9yIElFOCBhbmQgSUU5LlxuZnVuY3Rpb24gaGFuZGxlRXZlbnRzRm9ySW5wdXRFdmVudElFKHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQpIHtcbiAgaWYgKHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BGb2N1cykge1xuICAgIC8vIEluIElFOCwgd2UgY2FuIGNhcHR1cmUgYWxtb3N0IGFsbCAudmFsdWUgY2hhbmdlcyBieSBhZGRpbmcgYVxuICAgIC8vIHByb3BlcnR5Y2hhbmdlIGhhbmRsZXIgYW5kIGxvb2tpbmcgZm9yIGV2ZW50cyB3aXRoIHByb3BlcnR5TmFtZVxuICAgIC8vIGVxdWFsIHRvICd2YWx1ZSdcbiAgICAvLyBJbiBJRTksIHByb3BlcnR5Y2hhbmdlIGZpcmVzIGZvciBtb3N0IGlucHV0IGV2ZW50cyBidXQgaXMgYnVnZ3kgYW5kXG4gICAgLy8gZG9lc24ndCBmaXJlIHdoZW4gdGV4dCBpcyBkZWxldGVkLCBidXQgY29udmVuaWVudGx5LCBzZWxlY3Rpb25jaGFuZ2VcbiAgICAvLyBhcHBlYXJzIHRvIGZpcmUgaW4gYWxsIG9mIHRoZSByZW1haW5pbmcgY2FzZXMgc28gd2UgY2F0Y2ggdGhvc2UgYW5kXG4gICAgLy8gZm9yd2FyZCB0aGUgZXZlbnQgaWYgdGhlIHZhbHVlIGhhcyBjaGFuZ2VkXG4gICAgLy8gSW4gZWl0aGVyIGNhc2UsIHdlIGRvbid0IHdhbnQgdG8gY2FsbCB0aGUgZXZlbnQgaGFuZGxlciBpZiB0aGUgdmFsdWVcbiAgICAvLyBpcyBjaGFuZ2VkIGZyb20gSlMgc28gd2UgcmVkZWZpbmUgYSBzZXR0ZXIgZm9yIGAudmFsdWVgIHRoYXQgdXBkYXRlc1xuICAgIC8vIG91ciBhY3RpdmVFbGVtZW50VmFsdWUgdmFyaWFibGUsIGFsbG93aW5nIHVzIHRvIGlnbm9yZSB0aG9zZSBjaGFuZ2VzXG4gICAgLy9cbiAgICAvLyBzdG9wV2F0Y2hpbmcoKSBzaG91bGQgYmUgYSBub29wIGhlcmUgYnV0IHdlIGNhbGwgaXQganVzdCBpbiBjYXNlIHdlXG4gICAgLy8gbWlzc2VkIGEgYmx1ciBldmVudCBzb21laG93LlxuICAgIHN0b3BXYXRjaGluZ0ZvclZhbHVlQ2hhbmdlKCk7XG4gICAgc3RhcnRXYXRjaGluZ0ZvclZhbHVlQ2hhbmdlKHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElEKTtcbiAgfSBlbHNlIGlmICh0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wQmx1cikge1xuICAgIHN0b3BXYXRjaGluZ0ZvclZhbHVlQ2hhbmdlKCk7XG4gIH1cbn1cblxuLy8gRm9yIElFOCBhbmQgSUU5LlxuZnVuY3Rpb24gZ2V0VGFyZ2V0SURGb3JJbnB1dEV2ZW50SUUodG9wTGV2ZWxUeXBlLCB0b3BMZXZlbFRhcmdldCwgdG9wTGV2ZWxUYXJnZXRJRCkge1xuICBpZiAodG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcFNlbGVjdGlvbkNoYW5nZSB8fCB0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wS2V5VXAgfHwgdG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcEtleURvd24pIHtcbiAgICAvLyBPbiB0aGUgc2VsZWN0aW9uY2hhbmdlIGV2ZW50LCB0aGUgdGFyZ2V0IGlzIGp1c3QgZG9jdW1lbnQgd2hpY2ggaXNuJ3RcbiAgICAvLyBoZWxwZnVsIGZvciB1cyBzbyBqdXN0IGNoZWNrIGFjdGl2ZUVsZW1lbnQgaW5zdGVhZC5cbiAgICAvL1xuICAgIC8vIDk5JSBvZiB0aGUgdGltZSwga2V5ZG93biBhbmQga2V5dXAgYXJlbid0IG5lY2Vzc2FyeS4gSUU4IGZhaWxzIHRvIGZpcmVcbiAgICAvLyBwcm9wZXJ0eWNoYW5nZSBvbiB0aGUgZmlyc3QgaW5wdXQgZXZlbnQgYWZ0ZXIgc2V0dGluZyBgdmFsdWVgIGZyb20gYVxuICAgIC8vIHNjcmlwdCBhbmQgZmlyZXMgb25seSBrZXlkb3duLCBrZXlwcmVzcywga2V5dXAuIENhdGNoaW5nIGtleXVwIHVzdWFsbHlcbiAgICAvLyBnZXRzIGl0IGFuZCBjYXRjaGluZyBrZXlkb3duIGxldHMgdXMgZmlyZSBhbiBldmVudCBmb3IgdGhlIGZpcnN0XG4gICAgLy8ga2V5c3Ryb2tlIGlmIHVzZXIgZG9lcyBhIGtleSByZXBlYXQgKGl0J2xsIGJlIGEgbGl0dGxlIGRlbGF5ZWQ6IHJpZ2h0XG4gICAgLy8gYmVmb3JlIHRoZSBzZWNvbmQga2V5c3Ryb2tlKS4gT3RoZXIgaW5wdXQgbWV0aG9kcyAoZS5nLiwgcGFzdGUpIHNlZW0gdG9cbiAgICAvLyBmaXJlIHNlbGVjdGlvbmNoYW5nZSBub3JtYWxseS5cbiAgICBpZiAoYWN0aXZlRWxlbWVudCAmJiBhY3RpdmVFbGVtZW50LnZhbHVlICE9PSBhY3RpdmVFbGVtZW50VmFsdWUpIHtcbiAgICAgIGFjdGl2ZUVsZW1lbnRWYWx1ZSA9IGFjdGl2ZUVsZW1lbnQudmFsdWU7XG4gICAgICByZXR1cm4gYWN0aXZlRWxlbWVudElEO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFNFQ1RJT046IGhhbmRsZSBgY2xpY2tgIGV2ZW50XG4gKi9cbmZ1bmN0aW9uIHNob3VsZFVzZUNsaWNrRXZlbnQoZWxlbSkge1xuICAvLyBVc2UgdGhlIGBjbGlja2AgZXZlbnQgdG8gZGV0ZWN0IGNoYW5nZXMgdG8gY2hlY2tib3ggYW5kIHJhZGlvIGlucHV0cy5cbiAgLy8gVGhpcyBhcHByb2FjaCB3b3JrcyBhY3Jvc3MgYWxsIGJyb3dzZXJzLCB3aGVyZWFzIGBjaGFuZ2VgIGRvZXMgbm90IGZpcmVcbiAgLy8gdW50aWwgYGJsdXJgIGluIElFOC5cbiAgcmV0dXJuIGVsZW0ubm9kZU5hbWUgJiYgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaW5wdXQnICYmIChlbGVtLnR5cGUgPT09ICdjaGVja2JveCcgfHwgZWxlbS50eXBlID09PSAncmFkaW8nKTtcbn1cblxuZnVuY3Rpb24gZ2V0VGFyZ2V0SURGb3JDbGlja0V2ZW50KHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQpIHtcbiAgaWYgKHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BDbGljaykge1xuICAgIHJldHVybiB0b3BMZXZlbFRhcmdldElEO1xuICB9XG59XG5cbi8qKlxuICogVGhpcyBwbHVnaW4gY3JlYXRlcyBhbiBgb25DaGFuZ2VgIGV2ZW50IHRoYXQgbm9ybWFsaXplcyBjaGFuZ2UgZXZlbnRzXG4gKiBhY3Jvc3MgZm9ybSBlbGVtZW50cy4gVGhpcyBldmVudCBmaXJlcyBhdCBhIHRpbWUgd2hlbiBpdCdzIHBvc3NpYmxlIHRvXG4gKiBjaGFuZ2UgdGhlIGVsZW1lbnQncyB2YWx1ZSB3aXRob3V0IHNlZWluZyBhIGZsaWNrZXIuXG4gKlxuICogU3VwcG9ydGVkIGVsZW1lbnRzIGFyZTpcbiAqIC0gaW5wdXQgKHNlZSBgaXNUZXh0SW5wdXRFbGVtZW50YClcbiAqIC0gdGV4dGFyZWFcbiAqIC0gc2VsZWN0XG4gKi9cbnZhciBDaGFuZ2VFdmVudFBsdWdpbiA9IHtcblxuICBldmVudFR5cGVzOiBldmVudFR5cGVzLFxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlIFJlY29yZCBmcm9tIGBFdmVudENvbnN0YW50c2AuXG4gICAqIEBwYXJhbSB7RE9NRXZlbnRUYXJnZXR9IHRvcExldmVsVGFyZ2V0IFRoZSBsaXN0ZW5pbmcgY29tcG9uZW50IHJvb3Qgbm9kZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRvcExldmVsVGFyZ2V0SUQgSUQgb2YgYHRvcExldmVsVGFyZ2V0YC5cbiAgICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuICAgKiBAcmV0dXJuIHsqfSBBbiBhY2N1bXVsYXRpb24gb2Ygc3ludGhldGljIGV2ZW50cy5cbiAgICogQHNlZSB7RXZlbnRQbHVnaW5IdWIuZXh0cmFjdEV2ZW50c31cbiAgICovXG4gIGV4dHJhY3RFdmVudHM6IGZ1bmN0aW9uICh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElELCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpIHtcblxuICAgIHZhciBnZXRUYXJnZXRJREZ1bmMsIGhhbmRsZUV2ZW50RnVuYztcbiAgICBpZiAoc2hvdWxkVXNlQ2hhbmdlRXZlbnQodG9wTGV2ZWxUYXJnZXQpKSB7XG4gICAgICBpZiAoZG9lc0NoYW5nZUV2ZW50QnViYmxlKSB7XG4gICAgICAgIGdldFRhcmdldElERnVuYyA9IGdldFRhcmdldElERm9yQ2hhbmdlRXZlbnQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBoYW5kbGVFdmVudEZ1bmMgPSBoYW5kbGVFdmVudHNGb3JDaGFuZ2VFdmVudElFODtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGlzVGV4dElucHV0RWxlbWVudCh0b3BMZXZlbFRhcmdldCkpIHtcbiAgICAgIGlmIChpc0lucHV0RXZlbnRTdXBwb3J0ZWQpIHtcbiAgICAgICAgZ2V0VGFyZ2V0SURGdW5jID0gZ2V0VGFyZ2V0SURGb3JJbnB1dEV2ZW50O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZ2V0VGFyZ2V0SURGdW5jID0gZ2V0VGFyZ2V0SURGb3JJbnB1dEV2ZW50SUU7XG4gICAgICAgIGhhbmRsZUV2ZW50RnVuYyA9IGhhbmRsZUV2ZW50c0ZvcklucHV0RXZlbnRJRTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHNob3VsZFVzZUNsaWNrRXZlbnQodG9wTGV2ZWxUYXJnZXQpKSB7XG4gICAgICBnZXRUYXJnZXRJREZ1bmMgPSBnZXRUYXJnZXRJREZvckNsaWNrRXZlbnQ7XG4gICAgfVxuXG4gICAgaWYgKGdldFRhcmdldElERnVuYykge1xuICAgICAgdmFyIHRhcmdldElEID0gZ2V0VGFyZ2V0SURGdW5jKHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQpO1xuICAgICAgaWYgKHRhcmdldElEKSB7XG4gICAgICAgIHZhciBldmVudCA9IFN5bnRoZXRpY0V2ZW50LmdldFBvb2xlZChldmVudFR5cGVzLmNoYW5nZSwgdGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG4gICAgICAgIGV2ZW50LnR5cGUgPSAnY2hhbmdlJztcbiAgICAgICAgRXZlbnRQcm9wYWdhdG9ycy5hY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzKGV2ZW50KTtcbiAgICAgICAgcmV0dXJuIGV2ZW50O1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChoYW5kbGVFdmVudEZ1bmMpIHtcbiAgICAgIGhhbmRsZUV2ZW50RnVuYyh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElEKTtcbiAgICB9XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBDaGFuZ2VFdmVudFBsdWdpbjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QvbGliL0NoYW5nZUV2ZW50UGx1Z2luLmpzXG4vLyBtb2R1bGUgaWQgPSA4MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgZ2V0RXZlbnRUYXJnZXRcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEdldHMgdGhlIHRhcmdldCBub2RlIGZyb20gYSBuYXRpdmUgYnJvd3NlciBldmVudCBieSBhY2NvdW50aW5nIGZvclxuICogaW5jb25zaXN0ZW5jaWVzIGluIGJyb3dzZXIgRE9NIEFQSXMuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7RE9NRXZlbnRUYXJnZXR9IFRhcmdldCBub2RlLlxuICovXG5mdW5jdGlvbiBnZXRFdmVudFRhcmdldChuYXRpdmVFdmVudCkge1xuICB2YXIgdGFyZ2V0ID0gbmF0aXZlRXZlbnQudGFyZ2V0IHx8IG5hdGl2ZUV2ZW50LnNyY0VsZW1lbnQgfHwgd2luZG93O1xuICAvLyBTYWZhcmkgbWF5IGZpcmUgZXZlbnRzIG9uIHRleHQgbm9kZXMgKE5vZGUuVEVYVF9OT0RFIGlzIDMpLlxuICAvLyBAc2VlIGh0dHA6Ly93d3cucXVpcmtzbW9kZS5vcmcvanMvZXZlbnRzX3Byb3BlcnRpZXMuaHRtbFxuICByZXR1cm4gdGFyZ2V0Lm5vZGVUeXBlID09PSAzID8gdGFyZ2V0LnBhcmVudE5vZGUgOiB0YXJnZXQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0RXZlbnRUYXJnZXQ7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0L2xpYi9nZXRFdmVudFRhcmdldC5qc1xuLy8gbW9kdWxlIGlkID0gODFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGlzVGV4dElucHV0RWxlbWVudFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBAc2VlIGh0dHA6Ly93d3cud2hhdHdnLm9yZy9zcGVjcy93ZWItYXBwcy9jdXJyZW50LXdvcmsvbXVsdGlwYWdlL3RoZS1pbnB1dC1lbGVtZW50Lmh0bWwjaW5wdXQtdHlwZS1hdHRyLXN1bW1hcnlcbiAqL1xudmFyIHN1cHBvcnRlZElucHV0VHlwZXMgPSB7XG4gICdjb2xvcic6IHRydWUsXG4gICdkYXRlJzogdHJ1ZSxcbiAgJ2RhdGV0aW1lJzogdHJ1ZSxcbiAgJ2RhdGV0aW1lLWxvY2FsJzogdHJ1ZSxcbiAgJ2VtYWlsJzogdHJ1ZSxcbiAgJ21vbnRoJzogdHJ1ZSxcbiAgJ251bWJlcic6IHRydWUsXG4gICdwYXNzd29yZCc6IHRydWUsXG4gICdyYW5nZSc6IHRydWUsXG4gICdzZWFyY2gnOiB0cnVlLFxuICAndGVsJzogdHJ1ZSxcbiAgJ3RleHQnOiB0cnVlLFxuICAndGltZSc6IHRydWUsXG4gICd1cmwnOiB0cnVlLFxuICAnd2Vlayc6IHRydWVcbn07XG5cbmZ1bmN0aW9uIGlzVGV4dElucHV0RWxlbWVudChlbGVtKSB7XG4gIHZhciBub2RlTmFtZSA9IGVsZW0gJiYgZWxlbS5ub2RlTmFtZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG4gIHJldHVybiBub2RlTmFtZSAmJiAobm9kZU5hbWUgPT09ICdpbnB1dCcgJiYgc3VwcG9ydGVkSW5wdXRUeXBlc1tlbGVtLnR5cGVdIHx8IG5vZGVOYW1lID09PSAndGV4dGFyZWEnKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc1RleHRJbnB1dEVsZW1lbnQ7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0L2xpYi9pc1RleHRJbnB1dEVsZW1lbnQuanNcbi8vIG1vZHVsZSBpZCA9IDgyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBDbGllbnRSZWFjdFJvb3RJbmRleFxuICogQHR5cGVjaGVja3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBuZXh0UmVhY3RSb290SW5kZXggPSAwO1xuXG52YXIgQ2xpZW50UmVhY3RSb290SW5kZXggPSB7XG4gIGNyZWF0ZVJlYWN0Um9vdEluZGV4OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5leHRSZWFjdFJvb3RJbmRleCsrO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IENsaWVudFJlYWN0Um9vdEluZGV4O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvQ2xpZW50UmVhY3RSb290SW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDgzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBEZWZhdWx0RXZlbnRQbHVnaW5PcmRlclxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGtleU9mID0gcmVxdWlyZSgnZmJqcy9saWIva2V5T2YnKTtcblxuLyoqXG4gKiBNb2R1bGUgdGhhdCBpcyBpbmplY3RhYmxlIGludG8gYEV2ZW50UGx1Z2luSHViYCwgdGhhdCBzcGVjaWZpZXMgYVxuICogZGV0ZXJtaW5pc3RpYyBvcmRlcmluZyBvZiBgRXZlbnRQbHVnaW5gcy4gQSBjb252ZW5pZW50IHdheSB0byByZWFzb24gYWJvdXRcbiAqIHBsdWdpbnMsIHdpdGhvdXQgaGF2aW5nIHRvIHBhY2thZ2UgZXZlcnkgb25lIG9mIHRoZW0uIFRoaXMgaXMgYmV0dGVyIHRoYW5cbiAqIGhhdmluZyBwbHVnaW5zIGJlIG9yZGVyZWQgaW4gdGhlIHNhbWUgb3JkZXIgdGhhdCB0aGV5IGFyZSBpbmplY3RlZCBiZWNhdXNlXG4gKiB0aGF0IG9yZGVyaW5nIHdvdWxkIGJlIGluZmx1ZW5jZWQgYnkgdGhlIHBhY2thZ2luZyBvcmRlci5cbiAqIGBSZXNwb25kZXJFdmVudFBsdWdpbmAgbXVzdCBvY2N1ciBiZWZvcmUgYFNpbXBsZUV2ZW50UGx1Z2luYCBzbyB0aGF0XG4gKiBwcmV2ZW50aW5nIGRlZmF1bHQgb24gZXZlbnRzIGlzIGNvbnZlbmllbnQgaW4gYFNpbXBsZUV2ZW50UGx1Z2luYCBoYW5kbGVycy5cbiAqL1xudmFyIERlZmF1bHRFdmVudFBsdWdpbk9yZGVyID0gW2tleU9mKHsgUmVzcG9uZGVyRXZlbnRQbHVnaW46IG51bGwgfSksIGtleU9mKHsgU2ltcGxlRXZlbnRQbHVnaW46IG51bGwgfSksIGtleU9mKHsgVGFwRXZlbnRQbHVnaW46IG51bGwgfSksIGtleU9mKHsgRW50ZXJMZWF2ZUV2ZW50UGx1Z2luOiBudWxsIH0pLCBrZXlPZih7IENoYW5nZUV2ZW50UGx1Z2luOiBudWxsIH0pLCBrZXlPZih7IFNlbGVjdEV2ZW50UGx1Z2luOiBudWxsIH0pLCBrZXlPZih7IEJlZm9yZUlucHV0RXZlbnRQbHVnaW46IG51bGwgfSldO1xuXG5tb2R1bGUuZXhwb3J0cyA9IERlZmF1bHRFdmVudFBsdWdpbk9yZGVyO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvRGVmYXVsdEV2ZW50UGx1Z2luT3JkZXIuanNcbi8vIG1vZHVsZSBpZCA9IDg0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBFbnRlckxlYXZlRXZlbnRQbHVnaW5cbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXZlbnRDb25zdGFudHMgPSByZXF1aXJlKCcuL0V2ZW50Q29uc3RhbnRzJyk7XG52YXIgRXZlbnRQcm9wYWdhdG9ycyA9IHJlcXVpcmUoJy4vRXZlbnRQcm9wYWdhdG9ycycpO1xudmFyIFN5bnRoZXRpY01vdXNlRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY01vdXNlRXZlbnQnKTtcblxudmFyIFJlYWN0TW91bnQgPSByZXF1aXJlKCcuL1JlYWN0TW91bnQnKTtcbnZhciBrZXlPZiA9IHJlcXVpcmUoJ2ZianMvbGliL2tleU9mJyk7XG5cbnZhciB0b3BMZXZlbFR5cGVzID0gRXZlbnRDb25zdGFudHMudG9wTGV2ZWxUeXBlcztcbnZhciBnZXRGaXJzdFJlYWN0RE9NID0gUmVhY3RNb3VudC5nZXRGaXJzdFJlYWN0RE9NO1xuXG52YXIgZXZlbnRUeXBlcyA9IHtcbiAgbW91c2VFbnRlcjoge1xuICAgIHJlZ2lzdHJhdGlvbk5hbWU6IGtleU9mKHsgb25Nb3VzZUVudGVyOiBudWxsIH0pLFxuICAgIGRlcGVuZGVuY2llczogW3RvcExldmVsVHlwZXMudG9wTW91c2VPdXQsIHRvcExldmVsVHlwZXMudG9wTW91c2VPdmVyXVxuICB9LFxuICBtb3VzZUxlYXZlOiB7XG4gICAgcmVnaXN0cmF0aW9uTmFtZToga2V5T2YoeyBvbk1vdXNlTGVhdmU6IG51bGwgfSksXG4gICAgZGVwZW5kZW5jaWVzOiBbdG9wTGV2ZWxUeXBlcy50b3BNb3VzZU91dCwgdG9wTGV2ZWxUeXBlcy50b3BNb3VzZU92ZXJdXG4gIH1cbn07XG5cbnZhciBleHRyYWN0ZWRFdmVudHMgPSBbbnVsbCwgbnVsbF07XG5cbnZhciBFbnRlckxlYXZlRXZlbnRQbHVnaW4gPSB7XG5cbiAgZXZlbnRUeXBlczogZXZlbnRUeXBlcyxcblxuICAvKipcbiAgICogRm9yIGFsbW9zdCBldmVyeSBpbnRlcmFjdGlvbiB3ZSBjYXJlIGFib3V0LCB0aGVyZSB3aWxsIGJlIGJvdGggYSB0b3AtbGV2ZWxcbiAgICogYG1vdXNlb3ZlcmAgYW5kIGBtb3VzZW91dGAgZXZlbnQgdGhhdCBvY2N1cnMuIE9ubHkgdXNlIGBtb3VzZW91dGAgc28gdGhhdFxuICAgKiB3ZSBkbyBub3QgZXh0cmFjdCBkdXBsaWNhdGUgZXZlbnRzLiBIb3dldmVyLCBtb3ZpbmcgdGhlIG1vdXNlIGludG8gdGhlXG4gICAqIGJyb3dzZXIgZnJvbSBvdXRzaWRlIHdpbGwgbm90IGZpcmUgYSBgbW91c2VvdXRgIGV2ZW50LiBJbiB0aGlzIGNhc2UsIHdlIHVzZVxuICAgKiB0aGUgYG1vdXNlb3ZlcmAgdG9wLWxldmVsIGV2ZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlIFJlY29yZCBmcm9tIGBFdmVudENvbnN0YW50c2AuXG4gICAqIEBwYXJhbSB7RE9NRXZlbnRUYXJnZXR9IHRvcExldmVsVGFyZ2V0IFRoZSBsaXN0ZW5pbmcgY29tcG9uZW50IHJvb3Qgbm9kZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRvcExldmVsVGFyZ2V0SUQgSUQgb2YgYHRvcExldmVsVGFyZ2V0YC5cbiAgICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuICAgKiBAcmV0dXJuIHsqfSBBbiBhY2N1bXVsYXRpb24gb2Ygc3ludGhldGljIGV2ZW50cy5cbiAgICogQHNlZSB7RXZlbnRQbHVnaW5IdWIuZXh0cmFjdEV2ZW50c31cbiAgICovXG4gIGV4dHJhY3RFdmVudHM6IGZ1bmN0aW9uICh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElELCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpIHtcbiAgICBpZiAodG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlT3ZlciAmJiAobmF0aXZlRXZlbnQucmVsYXRlZFRhcmdldCB8fCBuYXRpdmVFdmVudC5mcm9tRWxlbWVudCkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpZiAodG9wTGV2ZWxUeXBlICE9PSB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlT3V0ICYmIHRvcExldmVsVHlwZSAhPT0gdG9wTGV2ZWxUeXBlcy50b3BNb3VzZU92ZXIpIHtcbiAgICAgIC8vIE11c3Qgbm90IGJlIGEgbW91c2UgaW4gb3IgbW91c2Ugb3V0IC0gaWdub3JpbmcuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB2YXIgd2luO1xuICAgIGlmICh0b3BMZXZlbFRhcmdldC53aW5kb3cgPT09IHRvcExldmVsVGFyZ2V0KSB7XG4gICAgICAvLyBgdG9wTGV2ZWxUYXJnZXRgIGlzIHByb2JhYmx5IGEgd2luZG93IG9iamVjdC5cbiAgICAgIHdpbiA9IHRvcExldmVsVGFyZ2V0O1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBUT0RPOiBGaWd1cmUgb3V0IHdoeSBgb3duZXJEb2N1bWVudGAgaXMgc29tZXRpbWVzIHVuZGVmaW5lZCBpbiBJRTguXG4gICAgICB2YXIgZG9jID0gdG9wTGV2ZWxUYXJnZXQub3duZXJEb2N1bWVudDtcbiAgICAgIGlmIChkb2MpIHtcbiAgICAgICAgd2luID0gZG9jLmRlZmF1bHRWaWV3IHx8IGRvYy5wYXJlbnRXaW5kb3c7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3aW4gPSB3aW5kb3c7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGZyb207XG4gICAgdmFyIHRvO1xuICAgIHZhciBmcm9tSUQgPSAnJztcbiAgICB2YXIgdG9JRCA9ICcnO1xuICAgIGlmICh0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wTW91c2VPdXQpIHtcbiAgICAgIGZyb20gPSB0b3BMZXZlbFRhcmdldDtcbiAgICAgIGZyb21JRCA9IHRvcExldmVsVGFyZ2V0SUQ7XG4gICAgICB0byA9IGdldEZpcnN0UmVhY3RET00obmF0aXZlRXZlbnQucmVsYXRlZFRhcmdldCB8fCBuYXRpdmVFdmVudC50b0VsZW1lbnQpO1xuICAgICAgaWYgKHRvKSB7XG4gICAgICAgIHRvSUQgPSBSZWFjdE1vdW50LmdldElEKHRvKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRvID0gd2luO1xuICAgICAgfVxuICAgICAgdG8gPSB0byB8fCB3aW47XG4gICAgfSBlbHNlIHtcbiAgICAgIGZyb20gPSB3aW47XG4gICAgICB0byA9IHRvcExldmVsVGFyZ2V0O1xuICAgICAgdG9JRCA9IHRvcExldmVsVGFyZ2V0SUQ7XG4gICAgfVxuXG4gICAgaWYgKGZyb20gPT09IHRvKSB7XG4gICAgICAvLyBOb3RoaW5nIHBlcnRhaW5zIHRvIG91ciBtYW5hZ2VkIGNvbXBvbmVudHMuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB2YXIgbGVhdmUgPSBTeW50aGV0aWNNb3VzZUV2ZW50LmdldFBvb2xlZChldmVudFR5cGVzLm1vdXNlTGVhdmUsIGZyb21JRCwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcbiAgICBsZWF2ZS50eXBlID0gJ21vdXNlbGVhdmUnO1xuICAgIGxlYXZlLnRhcmdldCA9IGZyb207XG4gICAgbGVhdmUucmVsYXRlZFRhcmdldCA9IHRvO1xuXG4gICAgdmFyIGVudGVyID0gU3ludGhldGljTW91c2VFdmVudC5nZXRQb29sZWQoZXZlbnRUeXBlcy5tb3VzZUVudGVyLCB0b0lELCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xuICAgIGVudGVyLnR5cGUgPSAnbW91c2VlbnRlcic7XG4gICAgZW50ZXIudGFyZ2V0ID0gdG87XG4gICAgZW50ZXIucmVsYXRlZFRhcmdldCA9IGZyb207XG5cbiAgICBFdmVudFByb3BhZ2F0b3JzLmFjY3VtdWxhdGVFbnRlckxlYXZlRGlzcGF0Y2hlcyhsZWF2ZSwgZW50ZXIsIGZyb21JRCwgdG9JRCk7XG5cbiAgICBleHRyYWN0ZWRFdmVudHNbMF0gPSBsZWF2ZTtcbiAgICBleHRyYWN0ZWRFdmVudHNbMV0gPSBlbnRlcjtcblxuICAgIHJldHVybiBleHRyYWN0ZWRFdmVudHM7XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBFbnRlckxlYXZlRXZlbnRQbHVnaW47XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0L2xpYi9FbnRlckxlYXZlRXZlbnRQbHVnaW4uanNcbi8vIG1vZHVsZSBpZCA9IDg1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBTeW50aGV0aWNNb3VzZUV2ZW50XG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFN5bnRoZXRpY1VJRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY1VJRXZlbnQnKTtcbnZhciBWaWV3cG9ydE1ldHJpY3MgPSByZXF1aXJlKCcuL1ZpZXdwb3J0TWV0cmljcycpO1xuXG52YXIgZ2V0RXZlbnRNb2RpZmllclN0YXRlID0gcmVxdWlyZSgnLi9nZXRFdmVudE1vZGlmaWVyU3RhdGUnKTtcblxuLyoqXG4gKiBAaW50ZXJmYWNlIE1vdXNlRXZlbnRcbiAqIEBzZWUgaHR0cDovL3d3dy53My5vcmcvVFIvRE9NLUxldmVsLTMtRXZlbnRzL1xuICovXG52YXIgTW91c2VFdmVudEludGVyZmFjZSA9IHtcbiAgc2NyZWVuWDogbnVsbCxcbiAgc2NyZWVuWTogbnVsbCxcbiAgY2xpZW50WDogbnVsbCxcbiAgY2xpZW50WTogbnVsbCxcbiAgY3RybEtleTogbnVsbCxcbiAgc2hpZnRLZXk6IG51bGwsXG4gIGFsdEtleTogbnVsbCxcbiAgbWV0YUtleTogbnVsbCxcbiAgZ2V0TW9kaWZpZXJTdGF0ZTogZ2V0RXZlbnRNb2RpZmllclN0YXRlLFxuICBidXR0b246IGZ1bmN0aW9uIChldmVudCkge1xuICAgIC8vIFdlYmtpdCwgRmlyZWZveCwgSUU5K1xuICAgIC8vIHdoaWNoOiAgMSAyIDNcbiAgICAvLyBidXR0b246IDAgMSAyIChzdGFuZGFyZClcbiAgICB2YXIgYnV0dG9uID0gZXZlbnQuYnV0dG9uO1xuICAgIGlmICgnd2hpY2gnIGluIGV2ZW50KSB7XG4gICAgICByZXR1cm4gYnV0dG9uO1xuICAgIH1cbiAgICAvLyBJRTw5XG4gICAgLy8gd2hpY2g6ICB1bmRlZmluZWRcbiAgICAvLyBidXR0b246IDAgMCAwXG4gICAgLy8gYnV0dG9uOiAxIDQgMiAob25tb3VzZXVwKVxuICAgIHJldHVybiBidXR0b24gPT09IDIgPyAyIDogYnV0dG9uID09PSA0ID8gMSA6IDA7XG4gIH0sXG4gIGJ1dHRvbnM6IG51bGwsXG4gIHJlbGF0ZWRUYXJnZXQ6IGZ1bmN0aW9uIChldmVudCkge1xuICAgIHJldHVybiBldmVudC5yZWxhdGVkVGFyZ2V0IHx8IChldmVudC5mcm9tRWxlbWVudCA9PT0gZXZlbnQuc3JjRWxlbWVudCA/IGV2ZW50LnRvRWxlbWVudCA6IGV2ZW50LmZyb21FbGVtZW50KTtcbiAgfSxcbiAgLy8gXCJQcm9wcmlldGFyeVwiIEludGVyZmFjZS5cbiAgcGFnZVg6IGZ1bmN0aW9uIChldmVudCkge1xuICAgIHJldHVybiAncGFnZVgnIGluIGV2ZW50ID8gZXZlbnQucGFnZVggOiBldmVudC5jbGllbnRYICsgVmlld3BvcnRNZXRyaWNzLmN1cnJlbnRTY3JvbGxMZWZ0O1xuICB9LFxuICBwYWdlWTogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgcmV0dXJuICdwYWdlWScgaW4gZXZlbnQgPyBldmVudC5wYWdlWSA6IGV2ZW50LmNsaWVudFkgKyBWaWV3cG9ydE1ldHJpY3MuY3VycmVudFNjcm9sbFRvcDtcbiAgfVxufTtcblxuLyoqXG4gKiBAcGFyYW0ge29iamVjdH0gZGlzcGF0Y2hDb25maWcgQ29uZmlndXJhdGlvbiB1c2VkIHRvIGRpc3BhdGNoIHRoaXMgZXZlbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gZGlzcGF0Y2hNYXJrZXIgTWFya2VyIGlkZW50aWZ5aW5nIHRoZSBldmVudCB0YXJnZXQuXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gKiBAZXh0ZW5kcyB7U3ludGhldGljVUlFdmVudH1cbiAqL1xuZnVuY3Rpb24gU3ludGhldGljTW91c2VFdmVudChkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICBTeW50aGV0aWNVSUV2ZW50LmNhbGwodGhpcywgZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xufVxuXG5TeW50aGV0aWNVSUV2ZW50LmF1Z21lbnRDbGFzcyhTeW50aGV0aWNNb3VzZUV2ZW50LCBNb3VzZUV2ZW50SW50ZXJmYWNlKTtcblxubW9kdWxlLmV4cG9ydHMgPSBTeW50aGV0aWNNb3VzZUV2ZW50O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvU3ludGhldGljTW91c2VFdmVudC5qc1xuLy8gbW9kdWxlIGlkID0gODZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFN5bnRoZXRpY1VJRXZlbnRcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgU3ludGhldGljRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY0V2ZW50Jyk7XG5cbnZhciBnZXRFdmVudFRhcmdldCA9IHJlcXVpcmUoJy4vZ2V0RXZlbnRUYXJnZXQnKTtcblxuLyoqXG4gKiBAaW50ZXJmYWNlIFVJRXZlbnRcbiAqIEBzZWUgaHR0cDovL3d3dy53My5vcmcvVFIvRE9NLUxldmVsLTMtRXZlbnRzL1xuICovXG52YXIgVUlFdmVudEludGVyZmFjZSA9IHtcbiAgdmlldzogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LnZpZXcpIHtcbiAgICAgIHJldHVybiBldmVudC52aWV3O1xuICAgIH1cblxuICAgIHZhciB0YXJnZXQgPSBnZXRFdmVudFRhcmdldChldmVudCk7XG4gICAgaWYgKHRhcmdldCAhPSBudWxsICYmIHRhcmdldC53aW5kb3cgPT09IHRhcmdldCkge1xuICAgICAgLy8gdGFyZ2V0IGlzIGEgd2luZG93IG9iamVjdFxuICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICB9XG5cbiAgICB2YXIgZG9jID0gdGFyZ2V0Lm93bmVyRG9jdW1lbnQ7XG4gICAgLy8gVE9ETzogRmlndXJlIG91dCB3aHkgYG93bmVyRG9jdW1lbnRgIGlzIHNvbWV0aW1lcyB1bmRlZmluZWQgaW4gSUU4LlxuICAgIGlmIChkb2MpIHtcbiAgICAgIHJldHVybiBkb2MuZGVmYXVsdFZpZXcgfHwgZG9jLnBhcmVudFdpbmRvdztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHdpbmRvdztcbiAgICB9XG4gIH0sXG4gIGRldGFpbDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgcmV0dXJuIGV2ZW50LmRldGFpbCB8fCAwO1xuICB9XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7b2JqZWN0fSBkaXNwYXRjaENvbmZpZyBDb25maWd1cmF0aW9uIHVzZWQgdG8gZGlzcGF0Y2ggdGhpcyBldmVudC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBkaXNwYXRjaE1hcmtlciBNYXJrZXIgaWRlbnRpZnlpbmcgdGhlIGV2ZW50IHRhcmdldC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAqIEBleHRlbmRzIHtTeW50aGV0aWNFdmVudH1cbiAqL1xuZnVuY3Rpb24gU3ludGhldGljVUlFdmVudChkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICBTeW50aGV0aWNFdmVudC5jYWxsKHRoaXMsIGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcbn1cblxuU3ludGhldGljRXZlbnQuYXVnbWVudENsYXNzKFN5bnRoZXRpY1VJRXZlbnQsIFVJRXZlbnRJbnRlcmZhY2UpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFN5bnRoZXRpY1VJRXZlbnQ7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0L2xpYi9TeW50aGV0aWNVSUV2ZW50LmpzXG4vLyBtb2R1bGUgaWQgPSA4N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgZ2V0RXZlbnRNb2RpZmllclN0YXRlXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBUcmFuc2xhdGlvbiBmcm9tIG1vZGlmaWVyIGtleSB0byB0aGUgYXNzb2NpYXRlZCBwcm9wZXJ0eSBpbiB0aGUgZXZlbnQuXG4gKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL0RPTS1MZXZlbC0zLUV2ZW50cy8ja2V5cy1Nb2RpZmllcnNcbiAqL1xuXG52YXIgbW9kaWZpZXJLZXlUb1Byb3AgPSB7XG4gICdBbHQnOiAnYWx0S2V5JyxcbiAgJ0NvbnRyb2wnOiAnY3RybEtleScsXG4gICdNZXRhJzogJ21ldGFLZXknLFxuICAnU2hpZnQnOiAnc2hpZnRLZXknXG59O1xuXG4vLyBJRTggZG9lcyBub3QgaW1wbGVtZW50IGdldE1vZGlmaWVyU3RhdGUgc28gd2Ugc2ltcGx5IG1hcCBpdCB0byB0aGUgb25seVxuLy8gbW9kaWZpZXIga2V5cyBleHBvc2VkIGJ5IHRoZSBldmVudCBpdHNlbGYsIGRvZXMgbm90IHN1cHBvcnQgTG9jay1rZXlzLlxuLy8gQ3VycmVudGx5LCBhbGwgbWFqb3IgYnJvd3NlcnMgZXhjZXB0IENocm9tZSBzZWVtcyB0byBzdXBwb3J0IExvY2sta2V5cy5cbmZ1bmN0aW9uIG1vZGlmaWVyU3RhdGVHZXR0ZXIoa2V5QXJnKSB7XG4gIHZhciBzeW50aGV0aWNFdmVudCA9IHRoaXM7XG4gIHZhciBuYXRpdmVFdmVudCA9IHN5bnRoZXRpY0V2ZW50Lm5hdGl2ZUV2ZW50O1xuICBpZiAobmF0aXZlRXZlbnQuZ2V0TW9kaWZpZXJTdGF0ZSkge1xuICAgIHJldHVybiBuYXRpdmVFdmVudC5nZXRNb2RpZmllclN0YXRlKGtleUFyZyk7XG4gIH1cbiAgdmFyIGtleVByb3AgPSBtb2RpZmllcktleVRvUHJvcFtrZXlBcmddO1xuICByZXR1cm4ga2V5UHJvcCA/ICEhbmF0aXZlRXZlbnRba2V5UHJvcF0gOiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gZ2V0RXZlbnRNb2RpZmllclN0YXRlKG5hdGl2ZUV2ZW50KSB7XG4gIHJldHVybiBtb2RpZmllclN0YXRlR2V0dGVyO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdldEV2ZW50TW9kaWZpZXJTdGF0ZTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QvbGliL2dldEV2ZW50TW9kaWZpZXJTdGF0ZS5qc1xuLy8gbW9kdWxlIGlkID0gODhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIEhUTUxET01Qcm9wZXJ0eUNvbmZpZ1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIERPTVByb3BlcnR5ID0gcmVxdWlyZSgnLi9ET01Qcm9wZXJ0eScpO1xudmFyIEV4ZWN1dGlvbkVudmlyb25tZW50ID0gcmVxdWlyZSgnZmJqcy9saWIvRXhlY3V0aW9uRW52aXJvbm1lbnQnKTtcblxudmFyIE1VU1RfVVNFX0FUVFJJQlVURSA9IERPTVByb3BlcnR5LmluamVjdGlvbi5NVVNUX1VTRV9BVFRSSUJVVEU7XG52YXIgTVVTVF9VU0VfUFJPUEVSVFkgPSBET01Qcm9wZXJ0eS5pbmplY3Rpb24uTVVTVF9VU0VfUFJPUEVSVFk7XG52YXIgSEFTX0JPT0xFQU5fVkFMVUUgPSBET01Qcm9wZXJ0eS5pbmplY3Rpb24uSEFTX0JPT0xFQU5fVkFMVUU7XG52YXIgSEFTX1NJREVfRUZGRUNUUyA9IERPTVByb3BlcnR5LmluamVjdGlvbi5IQVNfU0lERV9FRkZFQ1RTO1xudmFyIEhBU19OVU1FUklDX1ZBTFVFID0gRE9NUHJvcGVydHkuaW5qZWN0aW9uLkhBU19OVU1FUklDX1ZBTFVFO1xudmFyIEhBU19QT1NJVElWRV9OVU1FUklDX1ZBTFVFID0gRE9NUHJvcGVydHkuaW5qZWN0aW9uLkhBU19QT1NJVElWRV9OVU1FUklDX1ZBTFVFO1xudmFyIEhBU19PVkVSTE9BREVEX0JPT0xFQU5fVkFMVUUgPSBET01Qcm9wZXJ0eS5pbmplY3Rpb24uSEFTX09WRVJMT0FERURfQk9PTEVBTl9WQUxVRTtcblxudmFyIGhhc1NWRztcbmlmIChFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00pIHtcbiAgdmFyIGltcGxlbWVudGF0aW9uID0gZG9jdW1lbnQuaW1wbGVtZW50YXRpb247XG4gIGhhc1NWRyA9IGltcGxlbWVudGF0aW9uICYmIGltcGxlbWVudGF0aW9uLmhhc0ZlYXR1cmUgJiYgaW1wbGVtZW50YXRpb24uaGFzRmVhdHVyZSgnaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNCYXNpY1N0cnVjdHVyZScsICcxLjEnKTtcbn1cblxudmFyIEhUTUxET01Qcm9wZXJ0eUNvbmZpZyA9IHtcbiAgaXNDdXN0b21BdHRyaWJ1dGU6IFJlZ0V4cC5wcm90b3R5cGUudGVzdC5iaW5kKC9eKGRhdGF8YXJpYSktW2Etel9dW2EtelxcZF8uXFwtXSokLyksXG4gIFByb3BlcnRpZXM6IHtcbiAgICAvKipcbiAgICAgKiBTdGFuZGFyZCBQcm9wZXJ0aWVzXG4gICAgICovXG4gICAgYWNjZXB0OiBudWxsLFxuICAgIGFjY2VwdENoYXJzZXQ6IG51bGwsXG4gICAgYWNjZXNzS2V5OiBudWxsLFxuICAgIGFjdGlvbjogbnVsbCxcbiAgICBhbGxvd0Z1bGxTY3JlZW46IE1VU1RfVVNFX0FUVFJJQlVURSB8IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIGFsbG93VHJhbnNwYXJlbmN5OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgYWx0OiBudWxsLFxuICAgIGFzeW5jOiBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICBhdXRvQ29tcGxldGU6IG51bGwsXG4gICAgLy8gYXV0b0ZvY3VzIGlzIHBvbHlmaWxsZWQvbm9ybWFsaXplZCBieSBBdXRvRm9jdXNVdGlsc1xuICAgIC8vIGF1dG9Gb2N1czogSEFTX0JPT0xFQU5fVkFMVUUsXG4gICAgYXV0b1BsYXk6IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIGNhcHR1cmU6IE1VU1RfVVNFX0FUVFJJQlVURSB8IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIGNlbGxQYWRkaW5nOiBudWxsLFxuICAgIGNlbGxTcGFjaW5nOiBudWxsLFxuICAgIGNoYXJTZXQ6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBjaGFsbGVuZ2U6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBjaGVja2VkOiBNVVNUX1VTRV9QUk9QRVJUWSB8IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIGNsYXNzSUQ6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICAvLyBUbyBzZXQgY2xhc3NOYW1lIG9uIFNWRyBlbGVtZW50cywgaXQncyBuZWNlc3NhcnkgdG8gdXNlIC5zZXRBdHRyaWJ1dGU7XG4gICAgLy8gdGhpcyB3b3JrcyBvbiBIVE1MIGVsZW1lbnRzIHRvbyBpbiBhbGwgYnJvd3NlcnMgZXhjZXB0IElFOC4gQ29udmVuaWVudGx5LFxuICAgIC8vIElFOCBkb2Vzbid0IHN1cHBvcnQgU1ZHIGFuZCBzbyB3ZSBjYW4gc2ltcGx5IHVzZSB0aGUgYXR0cmlidXRlIGluXG4gICAgLy8gYnJvd3NlcnMgdGhhdCBzdXBwb3J0IFNWRyBhbmQgdGhlIHByb3BlcnR5IGluIGJyb3dzZXJzIHRoYXQgZG9uJ3QsXG4gICAgLy8gcmVnYXJkbGVzcyBvZiB3aGV0aGVyIHRoZSBlbGVtZW50IGlzIEhUTUwgb3IgU1ZHLlxuICAgIGNsYXNzTmFtZTogaGFzU1ZHID8gTVVTVF9VU0VfQVRUUklCVVRFIDogTVVTVF9VU0VfUFJPUEVSVFksXG4gICAgY29sczogTVVTVF9VU0VfQVRUUklCVVRFIHwgSEFTX1BPU0lUSVZFX05VTUVSSUNfVkFMVUUsXG4gICAgY29sU3BhbjogbnVsbCxcbiAgICBjb250ZW50OiBudWxsLFxuICAgIGNvbnRlbnRFZGl0YWJsZTogbnVsbCxcbiAgICBjb250ZXh0TWVudTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGNvbnRyb2xzOiBNVVNUX1VTRV9QUk9QRVJUWSB8IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIGNvb3JkczogbnVsbCxcbiAgICBjcm9zc09yaWdpbjogbnVsbCxcbiAgICBkYXRhOiBudWxsLCAvLyBGb3IgYDxvYmplY3QgLz5gIGFjdHMgYXMgYHNyY2AuXG4gICAgZGF0ZVRpbWU6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICAnZGVmYXVsdCc6IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIGRlZmVyOiBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICBkaXI6IG51bGwsXG4gICAgZGlzYWJsZWQ6IE1VU1RfVVNFX0FUVFJJQlVURSB8IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIGRvd25sb2FkOiBIQVNfT1ZFUkxPQURFRF9CT09MRUFOX1ZBTFVFLFxuICAgIGRyYWdnYWJsZTogbnVsbCxcbiAgICBlbmNUeXBlOiBudWxsLFxuICAgIGZvcm06IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBmb3JtQWN0aW9uOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgZm9ybUVuY1R5cGU6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBmb3JtTWV0aG9kOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgZm9ybU5vVmFsaWRhdGU6IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIGZvcm1UYXJnZXQ6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBmcmFtZUJvcmRlcjogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGhlYWRlcnM6IG51bGwsXG4gICAgaGVpZ2h0OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgaGlkZGVuOiBNVVNUX1VTRV9BVFRSSUJVVEUgfCBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICBoaWdoOiBudWxsLFxuICAgIGhyZWY6IG51bGwsXG4gICAgaHJlZkxhbmc6IG51bGwsXG4gICAgaHRtbEZvcjogbnVsbCxcbiAgICBodHRwRXF1aXY6IG51bGwsXG4gICAgaWNvbjogbnVsbCxcbiAgICBpZDogTVVTVF9VU0VfUFJPUEVSVFksXG4gICAgaW5wdXRNb2RlOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgaW50ZWdyaXR5OiBudWxsLFxuICAgIGlzOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAga2V5UGFyYW1zOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAga2V5VHlwZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGtpbmQ6IG51bGwsXG4gICAgbGFiZWw6IG51bGwsXG4gICAgbGFuZzogbnVsbCxcbiAgICBsaXN0OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgbG9vcDogTVVTVF9VU0VfUFJPUEVSVFkgfCBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICBsb3c6IG51bGwsXG4gICAgbWFuaWZlc3Q6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBtYXJnaW5IZWlnaHQ6IG51bGwsXG4gICAgbWFyZ2luV2lkdGg6IG51bGwsXG4gICAgbWF4OiBudWxsLFxuICAgIG1heExlbmd0aDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIG1lZGlhOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgbWVkaWFHcm91cDogbnVsbCxcbiAgICBtZXRob2Q6IG51bGwsXG4gICAgbWluOiBudWxsLFxuICAgIG1pbkxlbmd0aDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIG11bHRpcGxlOiBNVVNUX1VTRV9QUk9QRVJUWSB8IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIG11dGVkOiBNVVNUX1VTRV9QUk9QRVJUWSB8IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIG5hbWU6IG51bGwsXG4gICAgbm9uY2U6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBub1ZhbGlkYXRlOiBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICBvcGVuOiBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICBvcHRpbXVtOiBudWxsLFxuICAgIHBhdHRlcm46IG51bGwsXG4gICAgcGxhY2Vob2xkZXI6IG51bGwsXG4gICAgcG9zdGVyOiBudWxsLFxuICAgIHByZWxvYWQ6IG51bGwsXG4gICAgcmFkaW9Hcm91cDogbnVsbCxcbiAgICByZWFkT25seTogTVVTVF9VU0VfUFJPUEVSVFkgfCBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICByZWw6IG51bGwsXG4gICAgcmVxdWlyZWQ6IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIHJldmVyc2VkOiBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICByb2xlOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgcm93czogTVVTVF9VU0VfQVRUUklCVVRFIHwgSEFTX1BPU0lUSVZFX05VTUVSSUNfVkFMVUUsXG4gICAgcm93U3BhbjogbnVsbCxcbiAgICBzYW5kYm94OiBudWxsLFxuICAgIHNjb3BlOiBudWxsLFxuICAgIHNjb3BlZDogSEFTX0JPT0xFQU5fVkFMVUUsXG4gICAgc2Nyb2xsaW5nOiBudWxsLFxuICAgIHNlYW1sZXNzOiBNVVNUX1VTRV9BVFRSSUJVVEUgfCBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICBzZWxlY3RlZDogTVVTVF9VU0VfUFJPUEVSVFkgfCBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICBzaGFwZTogbnVsbCxcbiAgICBzaXplOiBNVVNUX1VTRV9BVFRSSUJVVEUgfCBIQVNfUE9TSVRJVkVfTlVNRVJJQ19WQUxVRSxcbiAgICBzaXplczogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHNwYW46IEhBU19QT1NJVElWRV9OVU1FUklDX1ZBTFVFLFxuICAgIHNwZWxsQ2hlY2s6IG51bGwsXG4gICAgc3JjOiBudWxsLFxuICAgIHNyY0RvYzogTVVTVF9VU0VfUFJPUEVSVFksXG4gICAgc3JjTGFuZzogbnVsbCxcbiAgICBzcmNTZXQ6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBzdGFydDogSEFTX05VTUVSSUNfVkFMVUUsXG4gICAgc3RlcDogbnVsbCxcbiAgICBzdHlsZTogbnVsbCxcbiAgICBzdW1tYXJ5OiBudWxsLFxuICAgIHRhYkluZGV4OiBudWxsLFxuICAgIHRhcmdldDogbnVsbCxcbiAgICB0aXRsZTogbnVsbCxcbiAgICB0eXBlOiBudWxsLFxuICAgIHVzZU1hcDogbnVsbCxcbiAgICB2YWx1ZTogTVVTVF9VU0VfUFJPUEVSVFkgfCBIQVNfU0lERV9FRkZFQ1RTLFxuICAgIHdpZHRoOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgd21vZGU6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB3cmFwOiBudWxsLFxuXG4gICAgLyoqXG4gICAgICogUkRGYSBQcm9wZXJ0aWVzXG4gICAgICovXG4gICAgYWJvdXQ6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBkYXRhdHlwZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGlubGlzdDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHByZWZpeDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIC8vIHByb3BlcnR5IGlzIGFsc28gc3VwcG9ydGVkIGZvciBPcGVuR3JhcGggaW4gbWV0YSB0YWdzLlxuICAgIHByb3BlcnR5OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgcmVzb3VyY2U6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICAndHlwZW9mJzogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHZvY2FiOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG5cbiAgICAvKipcbiAgICAgKiBOb24tc3RhbmRhcmQgUHJvcGVydGllc1xuICAgICAqL1xuICAgIC8vIGF1dG9DYXBpdGFsaXplIGFuZCBhdXRvQ29ycmVjdCBhcmUgc3VwcG9ydGVkIGluIE1vYmlsZSBTYWZhcmkgZm9yXG4gICAgLy8ga2V5Ym9hcmQgaGludHMuXG4gICAgYXV0b0NhcGl0YWxpemU6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBhdXRvQ29ycmVjdDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIC8vIGF1dG9TYXZlIGFsbG93cyBXZWJLaXQvQmxpbmsgdG8gcGVyc2lzdCB2YWx1ZXMgb2YgaW5wdXQgZmllbGRzIG9uIHBhZ2UgcmVsb2Fkc1xuICAgIGF1dG9TYXZlOiBudWxsLFxuICAgIC8vIGNvbG9yIGlzIGZvciBTYWZhcmkgbWFzay1pY29uIGxpbmtcbiAgICBjb2xvcjogbnVsbCxcbiAgICAvLyBpdGVtUHJvcCwgaXRlbVNjb3BlLCBpdGVtVHlwZSBhcmUgZm9yXG4gICAgLy8gTWljcm9kYXRhIHN1cHBvcnQuIFNlZSBodHRwOi8vc2NoZW1hLm9yZy9kb2NzL2dzLmh0bWxcbiAgICBpdGVtUHJvcDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGl0ZW1TY29wZTogTVVTVF9VU0VfQVRUUklCVVRFIHwgSEFTX0JPT0xFQU5fVkFMVUUsXG4gICAgaXRlbVR5cGU6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICAvLyBpdGVtSUQgYW5kIGl0ZW1SZWYgYXJlIGZvciBNaWNyb2RhdGEgc3VwcG9ydCBhcyB3ZWxsIGJ1dFxuICAgIC8vIG9ubHkgc3BlY2lmaWVkIGluIHRoZSB0aGUgV0hBVFdHIHNwZWMgZG9jdW1lbnQuIFNlZVxuICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL21pY3JvZGF0YS5odG1sI21pY3JvZGF0YS1kb20tYXBpXG4gICAgaXRlbUlEOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgaXRlbVJlZjogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIC8vIHJlc3VsdHMgc2hvdyBsb29raW5nIGdsYXNzIGljb24gYW5kIHJlY2VudCBzZWFyY2hlcyBvbiBpbnB1dFxuICAgIC8vIHNlYXJjaCBmaWVsZHMgaW4gV2ViS2l0L0JsaW5rXG4gICAgcmVzdWx0czogbnVsbCxcbiAgICAvLyBJRS1vbmx5IGF0dHJpYnV0ZSB0aGF0IHNwZWNpZmllcyBzZWN1cml0eSByZXN0cmljdGlvbnMgb24gYW4gaWZyYW1lXG4gICAgLy8gYXMgYW4gYWx0ZXJuYXRpdmUgdG8gdGhlIHNhbmRib3ggYXR0cmlidXRlIG9uIElFPDEwXG4gICAgc2VjdXJpdHk6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICAvLyBJRS1vbmx5IGF0dHJpYnV0ZSB0aGF0IGNvbnRyb2xzIGZvY3VzIGJlaGF2aW9yXG4gICAgdW5zZWxlY3RhYmxlOiBNVVNUX1VTRV9BVFRSSUJVVEVcbiAgfSxcbiAgRE9NQXR0cmlidXRlTmFtZXM6IHtcbiAgICBhY2NlcHRDaGFyc2V0OiAnYWNjZXB0LWNoYXJzZXQnLFxuICAgIGNsYXNzTmFtZTogJ2NsYXNzJyxcbiAgICBodG1sRm9yOiAnZm9yJyxcbiAgICBodHRwRXF1aXY6ICdodHRwLWVxdWl2J1xuICB9LFxuICBET01Qcm9wZXJ0eU5hbWVzOiB7XG4gICAgYXV0b0NvbXBsZXRlOiAnYXV0b2NvbXBsZXRlJyxcbiAgICBhdXRvRm9jdXM6ICdhdXRvZm9jdXMnLFxuICAgIGF1dG9QbGF5OiAnYXV0b3BsYXknLFxuICAgIGF1dG9TYXZlOiAnYXV0b3NhdmUnLFxuICAgIC8vIGBlbmNvZGluZ2AgaXMgZXF1aXZhbGVudCB0byBgZW5jdHlwZWAsIElFOCBsYWNrcyBhbiBgZW5jdHlwZWAgc2V0dGVyLlxuICAgIC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL2h0bWw1L2Zvcm1zLmh0bWwjZG9tLWZzLWVuY29kaW5nXG4gICAgZW5jVHlwZTogJ2VuY29kaW5nJyxcbiAgICBocmVmTGFuZzogJ2hyZWZsYW5nJyxcbiAgICByYWRpb0dyb3VwOiAncmFkaW9ncm91cCcsXG4gICAgc3BlbGxDaGVjazogJ3NwZWxsY2hlY2snLFxuICAgIHNyY0RvYzogJ3NyY2RvYycsXG4gICAgc3JjU2V0OiAnc3Jjc2V0J1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEhUTUxET01Qcm9wZXJ0eUNvbmZpZztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QvbGliL0hUTUxET01Qcm9wZXJ0eUNvbmZpZy5qc1xuLy8gbW9kdWxlIGlkID0gODlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0QnJvd3NlckNvbXBvbmVudE1peGluXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RJbnN0YW5jZU1hcCA9IHJlcXVpcmUoJy4vUmVhY3RJbnN0YW5jZU1hcCcpO1xuXG52YXIgZmluZERPTU5vZGUgPSByZXF1aXJlKCcuL2ZpbmRET01Ob2RlJyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxudmFyIGRpZFdhcm5LZXkgPSAnX2dldERPTU5vZGVEaWRXYXJuJztcblxudmFyIFJlYWN0QnJvd3NlckNvbXBvbmVudE1peGluID0ge1xuICAvKipcbiAgICogUmV0dXJucyB0aGUgRE9NIG5vZGUgcmVuZGVyZWQgYnkgdGhpcyBjb21wb25lbnQuXG4gICAqXG4gICAqIEByZXR1cm4ge0RPTUVsZW1lbnR9IFRoZSByb290IG5vZGUgb2YgdGhpcyBjb21wb25lbnQuXG4gICAqIEBmaW5hbFxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBnZXRET01Ob2RlOiBmdW5jdGlvbiAoKSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcodGhpcy5jb25zdHJ1Y3RvcltkaWRXYXJuS2V5XSwgJyVzLmdldERPTU5vZGUoLi4uKSBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlICcgKyAnUmVhY3RET00uZmluZERPTU5vZGUoaW5zdGFuY2UpIGluc3RlYWQuJywgUmVhY3RJbnN0YW5jZU1hcC5nZXQodGhpcykuZ2V0TmFtZSgpIHx8IHRoaXMudGFnTmFtZSB8fCAnVW5rbm93bicpIDogdW5kZWZpbmVkO1xuICAgIHRoaXMuY29uc3RydWN0b3JbZGlkV2FybktleV0gPSB0cnVlO1xuICAgIHJldHVybiBmaW5kRE9NTm9kZSh0aGlzKTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdEJyb3dzZXJDb21wb25lbnRNaXhpbjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QvbGliL1JlYWN0QnJvd3NlckNvbXBvbmVudE1peGluLmpzXG4vLyBtb2R1bGUgaWQgPSA5MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgZmluZERPTU5vZGVcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RDdXJyZW50T3duZXIgPSByZXF1aXJlKCcuL1JlYWN0Q3VycmVudE93bmVyJyk7XG52YXIgUmVhY3RJbnN0YW5jZU1hcCA9IHJlcXVpcmUoJy4vUmVhY3RJbnN0YW5jZU1hcCcpO1xudmFyIFJlYWN0TW91bnQgPSByZXF1aXJlKCcuL1JlYWN0TW91bnQnKTtcblxudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbi8qKlxuICogUmV0dXJucyB0aGUgRE9NIG5vZGUgcmVuZGVyZWQgYnkgdGhpcyBlbGVtZW50LlxuICpcbiAqIEBwYXJhbSB7UmVhY3RDb21wb25lbnR8RE9NRWxlbWVudH0gY29tcG9uZW50T3JFbGVtZW50XG4gKiBAcmV0dXJuIHs/RE9NRWxlbWVudH0gVGhlIHJvb3Qgbm9kZSBvZiB0aGlzIGVsZW1lbnQuXG4gKi9cbmZ1bmN0aW9uIGZpbmRET01Ob2RlKGNvbXBvbmVudE9yRWxlbWVudCkge1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIHZhciBvd25lciA9IFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQ7XG4gICAgaWYgKG93bmVyICE9PSBudWxsKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhvd25lci5fd2FybmVkQWJvdXRSZWZzSW5SZW5kZXIsICclcyBpcyBhY2Nlc3NpbmcgZ2V0RE9NTm9kZSBvciBmaW5kRE9NTm9kZSBpbnNpZGUgaXRzIHJlbmRlcigpLiAnICsgJ3JlbmRlcigpIHNob3VsZCBiZSBhIHB1cmUgZnVuY3Rpb24gb2YgcHJvcHMgYW5kIHN0YXRlLiBJdCBzaG91bGQgJyArICduZXZlciBhY2Nlc3Mgc29tZXRoaW5nIHRoYXQgcmVxdWlyZXMgc3RhbGUgZGF0YSBmcm9tIHRoZSBwcmV2aW91cyAnICsgJ3JlbmRlciwgc3VjaCBhcyByZWZzLiBNb3ZlIHRoaXMgbG9naWMgdG8gY29tcG9uZW50RGlkTW91bnQgYW5kICcgKyAnY29tcG9uZW50RGlkVXBkYXRlIGluc3RlYWQuJywgb3duZXIuZ2V0TmFtZSgpIHx8ICdBIGNvbXBvbmVudCcpIDogdW5kZWZpbmVkO1xuICAgICAgb3duZXIuX3dhcm5lZEFib3V0UmVmc0luUmVuZGVyID0gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgaWYgKGNvbXBvbmVudE9yRWxlbWVudCA9PSBudWxsKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgaWYgKGNvbXBvbmVudE9yRWxlbWVudC5ub2RlVHlwZSA9PT0gMSkge1xuICAgIHJldHVybiBjb21wb25lbnRPckVsZW1lbnQ7XG4gIH1cbiAgaWYgKFJlYWN0SW5zdGFuY2VNYXAuaGFzKGNvbXBvbmVudE9yRWxlbWVudCkpIHtcbiAgICByZXR1cm4gUmVhY3RNb3VudC5nZXROb2RlRnJvbUluc3RhbmNlKGNvbXBvbmVudE9yRWxlbWVudCk7XG4gIH1cbiAgIShjb21wb25lbnRPckVsZW1lbnQucmVuZGVyID09IG51bGwgfHwgdHlwZW9mIGNvbXBvbmVudE9yRWxlbWVudC5yZW5kZXIgIT09ICdmdW5jdGlvbicpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2ZpbmRET01Ob2RlIHdhcyBjYWxsZWQgb24gYW4gdW5tb3VudGVkIGNvbXBvbmVudC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICFmYWxzZSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdFbGVtZW50IGFwcGVhcnMgdG8gYmUgbmVpdGhlciBSZWFjdENvbXBvbmVudCBub3IgRE9NTm9kZSAoa2V5czogJXMpJywgT2JqZWN0LmtleXMoY29tcG9uZW50T3JFbGVtZW50KSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZpbmRET01Ob2RlO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvZmluZERPTU5vZGUuanNcbi8vIG1vZHVsZSBpZCA9IDkxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdERlZmF1bHRCYXRjaGluZ1N0cmF0ZWd5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RVcGRhdGVzID0gcmVxdWlyZSgnLi9SZWFjdFVwZGF0ZXMnKTtcbnZhciBUcmFuc2FjdGlvbiA9IHJlcXVpcmUoJy4vVHJhbnNhY3Rpb24nKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIGVtcHR5RnVuY3Rpb24gPSByZXF1aXJlKCdmYmpzL2xpYi9lbXB0eUZ1bmN0aW9uJyk7XG5cbnZhciBSRVNFVF9CQVRDSEVEX1VQREFURVMgPSB7XG4gIGluaXRpYWxpemU6IGVtcHR5RnVuY3Rpb24sXG4gIGNsb3NlOiBmdW5jdGlvbiAoKSB7XG4gICAgUmVhY3REZWZhdWx0QmF0Y2hpbmdTdHJhdGVneS5pc0JhdGNoaW5nVXBkYXRlcyA9IGZhbHNlO1xuICB9XG59O1xuXG52YXIgRkxVU0hfQkFUQ0hFRF9VUERBVEVTID0ge1xuICBpbml0aWFsaXplOiBlbXB0eUZ1bmN0aW9uLFxuICBjbG9zZTogUmVhY3RVcGRhdGVzLmZsdXNoQmF0Y2hlZFVwZGF0ZXMuYmluZChSZWFjdFVwZGF0ZXMpXG59O1xuXG52YXIgVFJBTlNBQ1RJT05fV1JBUFBFUlMgPSBbRkxVU0hfQkFUQ0hFRF9VUERBVEVTLCBSRVNFVF9CQVRDSEVEX1VQREFURVNdO1xuXG5mdW5jdGlvbiBSZWFjdERlZmF1bHRCYXRjaGluZ1N0cmF0ZWd5VHJhbnNhY3Rpb24oKSB7XG4gIHRoaXMucmVpbml0aWFsaXplVHJhbnNhY3Rpb24oKTtcbn1cblxuYXNzaWduKFJlYWN0RGVmYXVsdEJhdGNoaW5nU3RyYXRlZ3lUcmFuc2FjdGlvbi5wcm90b3R5cGUsIFRyYW5zYWN0aW9uLk1peGluLCB7XG4gIGdldFRyYW5zYWN0aW9uV3JhcHBlcnM6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gVFJBTlNBQ1RJT05fV1JBUFBFUlM7XG4gIH1cbn0pO1xuXG52YXIgdHJhbnNhY3Rpb24gPSBuZXcgUmVhY3REZWZhdWx0QmF0Y2hpbmdTdHJhdGVneVRyYW5zYWN0aW9uKCk7XG5cbnZhciBSZWFjdERlZmF1bHRCYXRjaGluZ1N0cmF0ZWd5ID0ge1xuICBpc0JhdGNoaW5nVXBkYXRlczogZmFsc2UsXG5cbiAgLyoqXG4gICAqIENhbGwgdGhlIHByb3ZpZGVkIGZ1bmN0aW9uIGluIGEgY29udGV4dCB3aXRoaW4gd2hpY2ggY2FsbHMgdG8gYHNldFN0YXRlYFxuICAgKiBhbmQgZnJpZW5kcyBhcmUgYmF0Y2hlZCBzdWNoIHRoYXQgY29tcG9uZW50cyBhcmVuJ3QgdXBkYXRlZCB1bm5lY2Vzc2FyaWx5LlxuICAgKi9cbiAgYmF0Y2hlZFVwZGF0ZXM6IGZ1bmN0aW9uIChjYWxsYmFjaywgYSwgYiwgYywgZCwgZSkge1xuICAgIHZhciBhbHJlYWR5QmF0Y2hpbmdVcGRhdGVzID0gUmVhY3REZWZhdWx0QmF0Y2hpbmdTdHJhdGVneS5pc0JhdGNoaW5nVXBkYXRlcztcblxuICAgIFJlYWN0RGVmYXVsdEJhdGNoaW5nU3RyYXRlZ3kuaXNCYXRjaGluZ1VwZGF0ZXMgPSB0cnVlO1xuXG4gICAgLy8gVGhlIGNvZGUgaXMgd3JpdHRlbiB0aGlzIHdheSB0byBhdm9pZCBleHRyYSBhbGxvY2F0aW9uc1xuICAgIGlmIChhbHJlYWR5QmF0Y2hpbmdVcGRhdGVzKSB7XG4gICAgICBjYWxsYmFjayhhLCBiLCBjLCBkLCBlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdHJhbnNhY3Rpb24ucGVyZm9ybShjYWxsYmFjaywgbnVsbCwgYSwgYiwgYywgZCwgZSk7XG4gICAgfVxuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0RGVmYXVsdEJhdGNoaW5nU3RyYXRlZ3k7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0L2xpYi9SZWFjdERlZmF1bHRCYXRjaGluZ1N0cmF0ZWd5LmpzXG4vLyBtb2R1bGUgaWQgPSA5MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RET01Db21wb25lbnRcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuLyogZ2xvYmFsIGhhc093blByb3BlcnR5OnRydWUgKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgQXV0b0ZvY3VzVXRpbHMgPSByZXF1aXJlKCcuL0F1dG9Gb2N1c1V0aWxzJyk7XG52YXIgQ1NTUHJvcGVydHlPcGVyYXRpb25zID0gcmVxdWlyZSgnLi9DU1NQcm9wZXJ0eU9wZXJhdGlvbnMnKTtcbnZhciBET01Qcm9wZXJ0eSA9IHJlcXVpcmUoJy4vRE9NUHJvcGVydHknKTtcbnZhciBET01Qcm9wZXJ0eU9wZXJhdGlvbnMgPSByZXF1aXJlKCcuL0RPTVByb3BlcnR5T3BlcmF0aW9ucycpO1xudmFyIEV2ZW50Q29uc3RhbnRzID0gcmVxdWlyZSgnLi9FdmVudENvbnN0YW50cycpO1xudmFyIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJy4vUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyJyk7XG52YXIgUmVhY3RDb21wb25lbnRCcm93c2VyRW52aXJvbm1lbnQgPSByZXF1aXJlKCcuL1JlYWN0Q29tcG9uZW50QnJvd3NlckVudmlyb25tZW50Jyk7XG52YXIgUmVhY3RET01CdXR0b24gPSByZXF1aXJlKCcuL1JlYWN0RE9NQnV0dG9uJyk7XG52YXIgUmVhY3RET01JbnB1dCA9IHJlcXVpcmUoJy4vUmVhY3RET01JbnB1dCcpO1xudmFyIFJlYWN0RE9NT3B0aW9uID0gcmVxdWlyZSgnLi9SZWFjdERPTU9wdGlvbicpO1xudmFyIFJlYWN0RE9NU2VsZWN0ID0gcmVxdWlyZSgnLi9SZWFjdERPTVNlbGVjdCcpO1xudmFyIFJlYWN0RE9NVGV4dGFyZWEgPSByZXF1aXJlKCcuL1JlYWN0RE9NVGV4dGFyZWEnKTtcbnZhciBSZWFjdE1vdW50ID0gcmVxdWlyZSgnLi9SZWFjdE1vdW50Jyk7XG52YXIgUmVhY3RNdWx0aUNoaWxkID0gcmVxdWlyZSgnLi9SZWFjdE11bHRpQ2hpbGQnKTtcbnZhciBSZWFjdFBlcmYgPSByZXF1aXJlKCcuL1JlYWN0UGVyZicpO1xudmFyIFJlYWN0VXBkYXRlUXVldWUgPSByZXF1aXJlKCcuL1JlYWN0VXBkYXRlUXVldWUnKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIGNhbkRlZmluZVByb3BlcnR5ID0gcmVxdWlyZSgnLi9jYW5EZWZpbmVQcm9wZXJ0eScpO1xudmFyIGVzY2FwZVRleHRDb250ZW50Rm9yQnJvd3NlciA9IHJlcXVpcmUoJy4vZXNjYXBlVGV4dENvbnRlbnRGb3JCcm93c2VyJyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG52YXIgaXNFdmVudFN1cHBvcnRlZCA9IHJlcXVpcmUoJy4vaXNFdmVudFN1cHBvcnRlZCcpO1xudmFyIGtleU9mID0gcmVxdWlyZSgnZmJqcy9saWIva2V5T2YnKTtcbnZhciBzZXRJbm5lckhUTUwgPSByZXF1aXJlKCcuL3NldElubmVySFRNTCcpO1xudmFyIHNldFRleHRDb250ZW50ID0gcmVxdWlyZSgnLi9zZXRUZXh0Q29udGVudCcpO1xudmFyIHNoYWxsb3dFcXVhbCA9IHJlcXVpcmUoJ2ZianMvbGliL3NoYWxsb3dFcXVhbCcpO1xudmFyIHZhbGlkYXRlRE9NTmVzdGluZyA9IHJlcXVpcmUoJy4vdmFsaWRhdGVET01OZXN0aW5nJyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxudmFyIGRlbGV0ZUxpc3RlbmVyID0gUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLmRlbGV0ZUxpc3RlbmVyO1xudmFyIGxpc3RlblRvID0gUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLmxpc3RlblRvO1xudmFyIHJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzID0gUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLnJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzO1xuXG4vLyBGb3IgcXVpY2tseSBtYXRjaGluZyBjaGlsZHJlbiB0eXBlLCB0byB0ZXN0IGlmIGNhbiBiZSB0cmVhdGVkIGFzIGNvbnRlbnQuXG52YXIgQ09OVEVOVF9UWVBFUyA9IHsgJ3N0cmluZyc6IHRydWUsICdudW1iZXInOiB0cnVlIH07XG5cbnZhciBDSElMRFJFTiA9IGtleU9mKHsgY2hpbGRyZW46IG51bGwgfSk7XG52YXIgU1RZTEUgPSBrZXlPZih7IHN0eWxlOiBudWxsIH0pO1xudmFyIEhUTUwgPSBrZXlPZih7IF9faHRtbDogbnVsbCB9KTtcblxudmFyIEVMRU1FTlRfTk9ERV9UWVBFID0gMTtcblxuZnVuY3Rpb24gZ2V0RGVjbGFyYXRpb25FcnJvckFkZGVuZHVtKGludGVybmFsSW5zdGFuY2UpIHtcbiAgaWYgKGludGVybmFsSW5zdGFuY2UpIHtcbiAgICB2YXIgb3duZXIgPSBpbnRlcm5hbEluc3RhbmNlLl9jdXJyZW50RWxlbWVudC5fb3duZXIgfHwgbnVsbDtcbiAgICBpZiAob3duZXIpIHtcbiAgICAgIHZhciBuYW1lID0gb3duZXIuZ2V0TmFtZSgpO1xuICAgICAgaWYgKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuICcgVGhpcyBET00gbm9kZSB3YXMgcmVuZGVyZWQgYnkgYCcgKyBuYW1lICsgJ2AuJztcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuICcnO1xufVxuXG52YXIgbGVnYWN5UHJvcHNEZXNjcmlwdG9yO1xuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgbGVnYWN5UHJvcHNEZXNjcmlwdG9yID0ge1xuICAgIHByb3BzOiB7XG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY29tcG9uZW50ID0gdGhpcy5fcmVhY3RJbnRlcm5hbENvbXBvbmVudDtcbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdSZWFjdERPTUNvbXBvbmVudDogRG8gbm90IGFjY2VzcyAucHJvcHMgb2YgYSBET00gbm9kZTsgaW5zdGVhZCwgJyArICdyZWNyZWF0ZSB0aGUgcHJvcHMgYXMgYHJlbmRlcmAgZGlkIG9yaWdpbmFsbHkgb3IgcmVhZCB0aGUgRE9NICcgKyAncHJvcGVydGllcy9hdHRyaWJ1dGVzIGRpcmVjdGx5IGZyb20gdGhpcyBub2RlIChlLmcuLCAnICsgJ3RoaXMucmVmcy5ib3guY2xhc3NOYW1lKS4lcycsIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShjb21wb25lbnQpKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuIGNvbXBvbmVudC5fY3VycmVudEVsZW1lbnQucHJvcHM7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiBsZWdhY3lHZXRET01Ob2RlKCkge1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIHZhciBjb21wb25lbnQgPSB0aGlzLl9yZWFjdEludGVybmFsQ29tcG9uZW50O1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnUmVhY3RET01Db21wb25lbnQ6IERvIG5vdCBhY2Nlc3MgLmdldERPTU5vZGUoKSBvZiBhIERPTSBub2RlOyAnICsgJ2luc3RlYWQsIHVzZSB0aGUgbm9kZSBkaXJlY3RseS4lcycsIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShjb21wb25lbnQpKSA6IHVuZGVmaW5lZDtcbiAgfVxuICByZXR1cm4gdGhpcztcbn1cblxuZnVuY3Rpb24gbGVnYWN5SXNNb3VudGVkKCkge1xuICB2YXIgY29tcG9uZW50ID0gdGhpcy5fcmVhY3RJbnRlcm5hbENvbXBvbmVudDtcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ1JlYWN0RE9NQ29tcG9uZW50OiBEbyBub3QgYWNjZXNzIC5pc01vdW50ZWQoKSBvZiBhIERPTSBub2RlLiVzJywgZ2V0RGVjbGFyYXRpb25FcnJvckFkZGVuZHVtKGNvbXBvbmVudCkpIDogdW5kZWZpbmVkO1xuICB9XG4gIHJldHVybiAhIWNvbXBvbmVudDtcbn1cblxuZnVuY3Rpb24gbGVnYWN5U2V0U3RhdGVFdGMoKSB7XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgdmFyIGNvbXBvbmVudCA9IHRoaXMuX3JlYWN0SW50ZXJuYWxDb21wb25lbnQ7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdSZWFjdERPTUNvbXBvbmVudDogRG8gbm90IGFjY2VzcyAuc2V0U3RhdGUoKSwgLnJlcGxhY2VTdGF0ZSgpLCBvciAnICsgJy5mb3JjZVVwZGF0ZSgpIG9mIGEgRE9NIG5vZGUuIFRoaXMgaXMgYSBuby1vcC4lcycsIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShjb21wb25lbnQpKSA6IHVuZGVmaW5lZDtcbiAgfVxufVxuXG5mdW5jdGlvbiBsZWdhY3lTZXRQcm9wcyhwYXJ0aWFsUHJvcHMsIGNhbGxiYWNrKSB7XG4gIHZhciBjb21wb25lbnQgPSB0aGlzLl9yZWFjdEludGVybmFsQ29tcG9uZW50O1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnUmVhY3RET01Db21wb25lbnQ6IERvIG5vdCBhY2Nlc3MgLnNldFByb3BzKCkgb2YgYSBET00gbm9kZS4gJyArICdJbnN0ZWFkLCBjYWxsIFJlYWN0RE9NLnJlbmRlciBhZ2FpbiBhdCB0aGUgdG9wIGxldmVsLiVzJywgZ2V0RGVjbGFyYXRpb25FcnJvckFkZGVuZHVtKGNvbXBvbmVudCkpIDogdW5kZWZpbmVkO1xuICB9XG4gIGlmICghY29tcG9uZW50KSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIFJlYWN0VXBkYXRlUXVldWUuZW5xdWV1ZVNldFByb3BzSW50ZXJuYWwoY29tcG9uZW50LCBwYXJ0aWFsUHJvcHMpO1xuICBpZiAoY2FsbGJhY2spIHtcbiAgICBSZWFjdFVwZGF0ZVF1ZXVlLmVucXVldWVDYWxsYmFja0ludGVybmFsKGNvbXBvbmVudCwgY2FsbGJhY2spO1xuICB9XG59XG5cbmZ1bmN0aW9uIGxlZ2FjeVJlcGxhY2VQcm9wcyhwYXJ0aWFsUHJvcHMsIGNhbGxiYWNrKSB7XG4gIHZhciBjb21wb25lbnQgPSB0aGlzLl9yZWFjdEludGVybmFsQ29tcG9uZW50O1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnUmVhY3RET01Db21wb25lbnQ6IERvIG5vdCBhY2Nlc3MgLnJlcGxhY2VQcm9wcygpIG9mIGEgRE9NIG5vZGUuICcgKyAnSW5zdGVhZCwgY2FsbCBSZWFjdERPTS5yZW5kZXIgYWdhaW4gYXQgdGhlIHRvcCBsZXZlbC4lcycsIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShjb21wb25lbnQpKSA6IHVuZGVmaW5lZDtcbiAgfVxuICBpZiAoIWNvbXBvbmVudCkge1xuICAgIHJldHVybjtcbiAgfVxuICBSZWFjdFVwZGF0ZVF1ZXVlLmVucXVldWVSZXBsYWNlUHJvcHNJbnRlcm5hbChjb21wb25lbnQsIHBhcnRpYWxQcm9wcyk7XG4gIGlmIChjYWxsYmFjaykge1xuICAgIFJlYWN0VXBkYXRlUXVldWUuZW5xdWV1ZUNhbGxiYWNrSW50ZXJuYWwoY29tcG9uZW50LCBjYWxsYmFjayk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZnJpZW5kbHlTdHJpbmdpZnkob2JqKSB7XG4gIGlmICh0eXBlb2Ygb2JqID09PSAnb2JqZWN0Jykge1xuICAgIGlmIChBcnJheS5pc0FycmF5KG9iaikpIHtcbiAgICAgIHJldHVybiAnWycgKyBvYmoubWFwKGZyaWVuZGx5U3RyaW5naWZ5KS5qb2luKCcsICcpICsgJ10nO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgcGFpcnMgPSBbXTtcbiAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcbiAgICAgICAgICB2YXIga2V5RXNjYXBlZCA9IC9eW2EteiRfXVtcXHckX10qJC9pLnRlc3Qoa2V5KSA/IGtleSA6IEpTT04uc3RyaW5naWZ5KGtleSk7XG4gICAgICAgICAgcGFpcnMucHVzaChrZXlFc2NhcGVkICsgJzogJyArIGZyaWVuZGx5U3RyaW5naWZ5KG9ialtrZXldKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiAneycgKyBwYWlycy5qb2luKCcsICcpICsgJ30nO1xuICAgIH1cbiAgfSBlbHNlIGlmICh0eXBlb2Ygb2JqID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShvYmopO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBvYmogPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gJ1tmdW5jdGlvbiBvYmplY3RdJztcbiAgfVxuICAvLyBEaWZmZXJzIGZyb20gSlNPTi5zdHJpbmdpZnkgaW4gdGhhdCB1bmRlZmluZWQgYmVjYXVzZXMgdW5kZWZpbmVkIGFuZCB0aGF0XG4gIC8vIGluZiBhbmQgbmFuIGRvbid0IGJlY29tZSBudWxsXG4gIHJldHVybiBTdHJpbmcob2JqKTtcbn1cblxudmFyIHN0eWxlTXV0YXRpb25XYXJuaW5nID0ge307XG5cbmZ1bmN0aW9uIGNoZWNrQW5kV2FybkZvck11dGF0ZWRTdHlsZShzdHlsZTEsIHN0eWxlMiwgY29tcG9uZW50KSB7XG4gIGlmIChzdHlsZTEgPT0gbnVsbCB8fCBzdHlsZTIgPT0gbnVsbCkge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoc2hhbGxvd0VxdWFsKHN0eWxlMSwgc3R5bGUyKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBjb21wb25lbnROYW1lID0gY29tcG9uZW50Ll90YWc7XG4gIHZhciBvd25lciA9IGNvbXBvbmVudC5fY3VycmVudEVsZW1lbnQuX293bmVyO1xuICB2YXIgb3duZXJOYW1lO1xuICBpZiAob3duZXIpIHtcbiAgICBvd25lck5hbWUgPSBvd25lci5nZXROYW1lKCk7XG4gIH1cblxuICB2YXIgaGFzaCA9IG93bmVyTmFtZSArICd8JyArIGNvbXBvbmVudE5hbWU7XG5cbiAgaWYgKHN0eWxlTXV0YXRpb25XYXJuaW5nLmhhc093blByb3BlcnR5KGhhc2gpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgc3R5bGVNdXRhdGlvbldhcm5pbmdbaGFzaF0gPSB0cnVlO1xuXG4gIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnYCVzYCB3YXMgcGFzc2VkIGEgc3R5bGUgb2JqZWN0IHRoYXQgaGFzIHByZXZpb3VzbHkgYmVlbiBtdXRhdGVkLiAnICsgJ011dGF0aW5nIGBzdHlsZWAgaXMgZGVwcmVjYXRlZC4gQ29uc2lkZXIgY2xvbmluZyBpdCBiZWZvcmVoYW5kLiBDaGVjayAnICsgJ3RoZSBgcmVuZGVyYCAlcy4gUHJldmlvdXMgc3R5bGU6ICVzLiBNdXRhdGVkIHN0eWxlOiAlcy4nLCBjb21wb25lbnROYW1lLCBvd25lciA/ICdvZiBgJyArIG93bmVyTmFtZSArICdgJyA6ICd1c2luZyA8JyArIGNvbXBvbmVudE5hbWUgKyAnPicsIGZyaWVuZGx5U3RyaW5naWZ5KHN0eWxlMSksIGZyaWVuZGx5U3RyaW5naWZ5KHN0eWxlMikpIDogdW5kZWZpbmVkO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7b2JqZWN0fSBjb21wb25lbnRcbiAqIEBwYXJhbSB7P29iamVjdH0gcHJvcHNcbiAqL1xuZnVuY3Rpb24gYXNzZXJ0VmFsaWRQcm9wcyhjb21wb25lbnQsIHByb3BzKSB7XG4gIGlmICghcHJvcHMpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgLy8gTm90ZSB0aGUgdXNlIG9mIGA9PWAgd2hpY2ggY2hlY2tzIGZvciBudWxsIG9yIHVuZGVmaW5lZC5cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBpZiAodm9pZEVsZW1lbnRUYWdzW2NvbXBvbmVudC5fdGFnXSkge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcocHJvcHMuY2hpbGRyZW4gPT0gbnVsbCAmJiBwcm9wcy5kYW5nZXJvdXNseVNldElubmVySFRNTCA9PSBudWxsLCAnJXMgaXMgYSB2b2lkIGVsZW1lbnQgdGFnIGFuZCBtdXN0IG5vdCBoYXZlIGBjaGlsZHJlbmAgb3IgJyArICd1c2UgYHByb3BzLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MYC4lcycsIGNvbXBvbmVudC5fdGFnLCBjb21wb25lbnQuX2N1cnJlbnRFbGVtZW50Ll9vd25lciA/ICcgQ2hlY2sgdGhlIHJlbmRlciBtZXRob2Qgb2YgJyArIGNvbXBvbmVudC5fY3VycmVudEVsZW1lbnQuX293bmVyLmdldE5hbWUoKSArICcuJyA6ICcnKSA6IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cbiAgaWYgKHByb3BzLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MICE9IG51bGwpIHtcbiAgICAhKHByb3BzLmNoaWxkcmVuID09IG51bGwpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0NhbiBvbmx5IHNldCBvbmUgb2YgYGNoaWxkcmVuYCBvciBgcHJvcHMuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUxgLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAhKHR5cGVvZiBwcm9wcy5kYW5nZXJvdXNseVNldElubmVySFRNTCA9PT0gJ29iamVjdCcgJiYgSFRNTCBpbiBwcm9wcy5kYW5nZXJvdXNseVNldElubmVySFRNTCkgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnYHByb3BzLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MYCBtdXN0IGJlIGluIHRoZSBmb3JtIGB7X19odG1sOiAuLi59YC4gJyArICdQbGVhc2UgdmlzaXQgaHR0cHM6Ly9mYi5tZS9yZWFjdC1pbnZhcmlhbnQtZGFuZ2Vyb3VzbHktc2V0LWlubmVyLWh0bWwgJyArICdmb3IgbW9yZSBpbmZvcm1hdGlvbi4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIH1cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhwcm9wcy5pbm5lckhUTUwgPT0gbnVsbCwgJ0RpcmVjdGx5IHNldHRpbmcgcHJvcGVydHkgYGlubmVySFRNTGAgaXMgbm90IHBlcm1pdHRlZC4gJyArICdGb3IgbW9yZSBpbmZvcm1hdGlvbiwgbG9va3VwIGRvY3VtZW50YXRpb24gb24gYGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MYC4nKSA6IHVuZGVmaW5lZDtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyghcHJvcHMuY29udGVudEVkaXRhYmxlIHx8IHByb3BzLmNoaWxkcmVuID09IG51bGwsICdBIGNvbXBvbmVudCBpcyBgY29udGVudEVkaXRhYmxlYCBhbmQgY29udGFpbnMgYGNoaWxkcmVuYCBtYW5hZ2VkIGJ5ICcgKyAnUmVhY3QuIEl0IGlzIG5vdyB5b3VyIHJlc3BvbnNpYmlsaXR5IHRvIGd1YXJhbnRlZSB0aGF0IG5vbmUgb2YgJyArICd0aG9zZSBub2RlcyBhcmUgdW5leHBlY3RlZGx5IG1vZGlmaWVkIG9yIGR1cGxpY2F0ZWQuIFRoaXMgaXMgJyArICdwcm9iYWJseSBub3QgaW50ZW50aW9uYWwuJykgOiB1bmRlZmluZWQ7XG4gIH1cbiAgIShwcm9wcy5zdHlsZSA9PSBudWxsIHx8IHR5cGVvZiBwcm9wcy5zdHlsZSA9PT0gJ29iamVjdCcpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1RoZSBgc3R5bGVgIHByb3AgZXhwZWN0cyBhIG1hcHBpbmcgZnJvbSBzdHlsZSBwcm9wZXJ0aWVzIHRvIHZhbHVlcywgJyArICdub3QgYSBzdHJpbmcuIEZvciBleGFtcGxlLCBzdHlsZT17e21hcmdpblJpZ2h0OiBzcGFjaW5nICsgXFwnZW1cXCd9fSB3aGVuICcgKyAndXNpbmcgSlNYLiVzJywgZ2V0RGVjbGFyYXRpb25FcnJvckFkZGVuZHVtKGNvbXBvbmVudCkpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbn1cblxuZnVuY3Rpb24gZW5xdWV1ZVB1dExpc3RlbmVyKGlkLCByZWdpc3RyYXRpb25OYW1lLCBsaXN0ZW5lciwgdHJhbnNhY3Rpb24pIHtcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAvLyBJRTggaGFzIG5vIEFQSSBmb3IgZXZlbnQgY2FwdHVyaW5nIGFuZCB0aGUgYG9uU2Nyb2xsYCBldmVudCBkb2Vzbid0XG4gICAgLy8gYnViYmxlLlxuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKHJlZ2lzdHJhdGlvbk5hbWUgIT09ICdvblNjcm9sbCcgfHwgaXNFdmVudFN1cHBvcnRlZCgnc2Nyb2xsJywgdHJ1ZSksICdUaGlzIGJyb3dzZXIgZG9lc25cXCd0IHN1cHBvcnQgdGhlIGBvblNjcm9sbGAgZXZlbnQnKSA6IHVuZGVmaW5lZDtcbiAgfVxuICB2YXIgY29udGFpbmVyID0gUmVhY3RNb3VudC5maW5kUmVhY3RDb250YWluZXJGb3JJRChpZCk7XG4gIGlmIChjb250YWluZXIpIHtcbiAgICB2YXIgZG9jID0gY29udGFpbmVyLm5vZGVUeXBlID09PSBFTEVNRU5UX05PREVfVFlQRSA/IGNvbnRhaW5lci5vd25lckRvY3VtZW50IDogY29udGFpbmVyO1xuICAgIGxpc3RlblRvKHJlZ2lzdHJhdGlvbk5hbWUsIGRvYyk7XG4gIH1cbiAgdHJhbnNhY3Rpb24uZ2V0UmVhY3RNb3VudFJlYWR5KCkuZW5xdWV1ZShwdXRMaXN0ZW5lciwge1xuICAgIGlkOiBpZCxcbiAgICByZWdpc3RyYXRpb25OYW1lOiByZWdpc3RyYXRpb25OYW1lLFxuICAgIGxpc3RlbmVyOiBsaXN0ZW5lclxuICB9KTtcbn1cblxuZnVuY3Rpb24gcHV0TGlzdGVuZXIoKSB7XG4gIHZhciBsaXN0ZW5lclRvUHV0ID0gdGhpcztcbiAgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLnB1dExpc3RlbmVyKGxpc3RlbmVyVG9QdXQuaWQsIGxpc3RlbmVyVG9QdXQucmVnaXN0cmF0aW9uTmFtZSwgbGlzdGVuZXJUb1B1dC5saXN0ZW5lcik7XG59XG5cbi8vIFRoZXJlIGFyZSBzbyBtYW55IG1lZGlhIGV2ZW50cywgaXQgbWFrZXMgc2Vuc2UgdG8ganVzdFxuLy8gbWFpbnRhaW4gYSBsaXN0IHJhdGhlciB0aGFuIGNyZWF0ZSBhIGB0cmFwQnViYmxlZEV2ZW50YCBmb3IgZWFjaFxudmFyIG1lZGlhRXZlbnRzID0ge1xuICB0b3BBYm9ydDogJ2Fib3J0JyxcbiAgdG9wQ2FuUGxheTogJ2NhbnBsYXknLFxuICB0b3BDYW5QbGF5VGhyb3VnaDogJ2NhbnBsYXl0aHJvdWdoJyxcbiAgdG9wRHVyYXRpb25DaGFuZ2U6ICdkdXJhdGlvbmNoYW5nZScsXG4gIHRvcEVtcHRpZWQ6ICdlbXB0aWVkJyxcbiAgdG9wRW5jcnlwdGVkOiAnZW5jcnlwdGVkJyxcbiAgdG9wRW5kZWQ6ICdlbmRlZCcsXG4gIHRvcEVycm9yOiAnZXJyb3InLFxuICB0b3BMb2FkZWREYXRhOiAnbG9hZGVkZGF0YScsXG4gIHRvcExvYWRlZE1ldGFkYXRhOiAnbG9hZGVkbWV0YWRhdGEnLFxuICB0b3BMb2FkU3RhcnQ6ICdsb2Fkc3RhcnQnLFxuICB0b3BQYXVzZTogJ3BhdXNlJyxcbiAgdG9wUGxheTogJ3BsYXknLFxuICB0b3BQbGF5aW5nOiAncGxheWluZycsXG4gIHRvcFByb2dyZXNzOiAncHJvZ3Jlc3MnLFxuICB0b3BSYXRlQ2hhbmdlOiAncmF0ZWNoYW5nZScsXG4gIHRvcFNlZWtlZDogJ3NlZWtlZCcsXG4gIHRvcFNlZWtpbmc6ICdzZWVraW5nJyxcbiAgdG9wU3RhbGxlZDogJ3N0YWxsZWQnLFxuICB0b3BTdXNwZW5kOiAnc3VzcGVuZCcsXG4gIHRvcFRpbWVVcGRhdGU6ICd0aW1ldXBkYXRlJyxcbiAgdG9wVm9sdW1lQ2hhbmdlOiAndm9sdW1lY2hhbmdlJyxcbiAgdG9wV2FpdGluZzogJ3dhaXRpbmcnXG59O1xuXG5mdW5jdGlvbiB0cmFwQnViYmxlZEV2ZW50c0xvY2FsKCkge1xuICB2YXIgaW5zdCA9IHRoaXM7XG4gIC8vIElmIGEgY29tcG9uZW50IHJlbmRlcnMgdG8gbnVsbCBvciBpZiBhbm90aGVyIGNvbXBvbmVudCBmYXRhbHMgYW5kIGNhdXNlc1xuICAvLyB0aGUgc3RhdGUgb2YgdGhlIHRyZWUgdG8gYmUgY29ycnVwdGVkLCBgbm9kZWAgaGVyZSBjYW4gYmUgbnVsbC5cbiAgIWluc3QuX3Jvb3ROb2RlSUQgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnTXVzdCBiZSBtb3VudGVkIHRvIHRyYXAgZXZlbnRzJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICB2YXIgbm9kZSA9IFJlYWN0TW91bnQuZ2V0Tm9kZShpbnN0Ll9yb290Tm9kZUlEKTtcbiAgIW5vZGUgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAndHJhcEJ1YmJsZWRFdmVudCguLi4pOiBSZXF1aXJlcyBub2RlIHRvIGJlIHJlbmRlcmVkLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICBzd2l0Y2ggKGluc3QuX3RhZykge1xuICAgIGNhc2UgJ2lmcmFtZSc6XG4gICAgICBpbnN0Ll93cmFwcGVyU3RhdGUubGlzdGVuZXJzID0gW1JlYWN0QnJvd3NlckV2ZW50RW1pdHRlci50cmFwQnViYmxlZEV2ZW50KEV2ZW50Q29uc3RhbnRzLnRvcExldmVsVHlwZXMudG9wTG9hZCwgJ2xvYWQnLCBub2RlKV07XG4gICAgICBicmVhaztcbiAgICBjYXNlICd2aWRlbyc6XG4gICAgY2FzZSAnYXVkaW8nOlxuXG4gICAgICBpbnN0Ll93cmFwcGVyU3RhdGUubGlzdGVuZXJzID0gW107XG4gICAgICAvLyBjcmVhdGUgbGlzdGVuZXIgZm9yIGVhY2ggbWVkaWEgZXZlbnRcbiAgICAgIGZvciAodmFyIGV2ZW50IGluIG1lZGlhRXZlbnRzKSB7XG4gICAgICAgIGlmIChtZWRpYUV2ZW50cy5oYXNPd25Qcm9wZXJ0eShldmVudCkpIHtcbiAgICAgICAgICBpbnN0Ll93cmFwcGVyU3RhdGUubGlzdGVuZXJzLnB1c2goUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLnRyYXBCdWJibGVkRXZlbnQoRXZlbnRDb25zdGFudHMudG9wTGV2ZWxUeXBlc1tldmVudF0sIG1lZGlhRXZlbnRzW2V2ZW50XSwgbm9kZSkpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ2ltZyc6XG4gICAgICBpbnN0Ll93cmFwcGVyU3RhdGUubGlzdGVuZXJzID0gW1JlYWN0QnJvd3NlckV2ZW50RW1pdHRlci50cmFwQnViYmxlZEV2ZW50KEV2ZW50Q29uc3RhbnRzLnRvcExldmVsVHlwZXMudG9wRXJyb3IsICdlcnJvcicsIG5vZGUpLCBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIudHJhcEJ1YmJsZWRFdmVudChFdmVudENvbnN0YW50cy50b3BMZXZlbFR5cGVzLnRvcExvYWQsICdsb2FkJywgbm9kZSldO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnZm9ybSc6XG4gICAgICBpbnN0Ll93cmFwcGVyU3RhdGUubGlzdGVuZXJzID0gW1JlYWN0QnJvd3NlckV2ZW50RW1pdHRlci50cmFwQnViYmxlZEV2ZW50KEV2ZW50Q29uc3RhbnRzLnRvcExldmVsVHlwZXMudG9wUmVzZXQsICdyZXNldCcsIG5vZGUpLCBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIudHJhcEJ1YmJsZWRFdmVudChFdmVudENvbnN0YW50cy50b3BMZXZlbFR5cGVzLnRvcFN1Ym1pdCwgJ3N1Ym1pdCcsIG5vZGUpXTtcbiAgICAgIGJyZWFrO1xuICB9XG59XG5cbmZ1bmN0aW9uIG1vdW50UmVhZHlJbnB1dFdyYXBwZXIoKSB7XG4gIFJlYWN0RE9NSW5wdXQubW91bnRSZWFkeVdyYXBwZXIodGhpcyk7XG59XG5cbmZ1bmN0aW9uIHBvc3RVcGRhdGVTZWxlY3RXcmFwcGVyKCkge1xuICBSZWFjdERPTVNlbGVjdC5wb3N0VXBkYXRlV3JhcHBlcih0aGlzKTtcbn1cblxuLy8gRm9yIEhUTUwsIGNlcnRhaW4gdGFncyBzaG91bGQgb21pdCB0aGVpciBjbG9zZSB0YWcuIFdlIGtlZXAgYSB3aGl0ZWxpc3QgZm9yXG4vLyB0aG9zZSBzcGVjaWFsIGNhc2VkIHRhZ3MuXG5cbnZhciBvbWl0dGVkQ2xvc2VUYWdzID0ge1xuICAnYXJlYSc6IHRydWUsXG4gICdiYXNlJzogdHJ1ZSxcbiAgJ2JyJzogdHJ1ZSxcbiAgJ2NvbCc6IHRydWUsXG4gICdlbWJlZCc6IHRydWUsXG4gICdocic6IHRydWUsXG4gICdpbWcnOiB0cnVlLFxuICAnaW5wdXQnOiB0cnVlLFxuICAna2V5Z2VuJzogdHJ1ZSxcbiAgJ2xpbmsnOiB0cnVlLFxuICAnbWV0YSc6IHRydWUsXG4gICdwYXJhbSc6IHRydWUsXG4gICdzb3VyY2UnOiB0cnVlLFxuICAndHJhY2snOiB0cnVlLFxuICAnd2JyJzogdHJ1ZVxufTtcblxuLy8gTk9URTogbWVudWl0ZW0ncyBjbG9zZSB0YWcgc2hvdWxkIGJlIG9taXR0ZWQsIGJ1dCB0aGF0IGNhdXNlcyBwcm9ibGVtcy5cbnZhciBuZXdsaW5lRWF0aW5nVGFncyA9IHtcbiAgJ2xpc3RpbmcnOiB0cnVlLFxuICAncHJlJzogdHJ1ZSxcbiAgJ3RleHRhcmVhJzogdHJ1ZVxufTtcblxuLy8gRm9yIEhUTUwsIGNlcnRhaW4gdGFncyBjYW5ub3QgaGF2ZSBjaGlsZHJlbi4gVGhpcyBoYXMgdGhlIHNhbWUgcHVycG9zZSBhc1xuLy8gYG9taXR0ZWRDbG9zZVRhZ3NgIGV4Y2VwdCB0aGF0IGBtZW51aXRlbWAgc2hvdWxkIHN0aWxsIGhhdmUgaXRzIGNsb3NpbmcgdGFnLlxuXG52YXIgdm9pZEVsZW1lbnRUYWdzID0gYXNzaWduKHtcbiAgJ21lbnVpdGVtJzogdHJ1ZVxufSwgb21pdHRlZENsb3NlVGFncyk7XG5cbi8vIFdlIGFjY2VwdCBhbnkgdGFnIHRvIGJlIHJlbmRlcmVkIGJ1dCBzaW5jZSB0aGlzIGdldHMgaW5qZWN0ZWQgaW50byBhcmJpdHJhcnlcbi8vIEhUTUwsIHdlIHdhbnQgdG8gbWFrZSBzdXJlIHRoYXQgaXQncyBhIHNhZmUgdGFnLlxuLy8gaHR0cDovL3d3dy53My5vcmcvVFIvUkVDLXhtbC8jTlQtTmFtZVxuXG52YXIgVkFMSURfVEFHX1JFR0VYID0gL15bYS16QS1aXVthLXpBLVo6X1xcLlxcLVxcZF0qJC87IC8vIFNpbXBsaWZpZWQgc3Vic2V0XG52YXIgdmFsaWRhdGVkVGFnQ2FjaGUgPSB7fTtcbnZhciBoYXNPd25Qcm9wZXJ0eSA9ICh7fSkuaGFzT3duUHJvcGVydHk7XG5cbmZ1bmN0aW9uIHZhbGlkYXRlRGFuZ2Vyb3VzVGFnKHRhZykge1xuICBpZiAoIWhhc093blByb3BlcnR5LmNhbGwodmFsaWRhdGVkVGFnQ2FjaGUsIHRhZykpIHtcbiAgICAhVkFMSURfVEFHX1JFR0VYLnRlc3QodGFnKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdJbnZhbGlkIHRhZzogJXMnLCB0YWcpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICB2YWxpZGF0ZWRUYWdDYWNoZVt0YWddID0gdHJ1ZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwcm9jZXNzQ2hpbGRDb250ZXh0RGV2KGNvbnRleHQsIGluc3QpIHtcbiAgLy8gUGFzcyBkb3duIG91ciB0YWcgbmFtZSB0byBjaGlsZCBjb21wb25lbnRzIGZvciB2YWxpZGF0aW9uIHB1cnBvc2VzXG4gIGNvbnRleHQgPSBhc3NpZ24oe30sIGNvbnRleHQpO1xuICB2YXIgaW5mbyA9IGNvbnRleHRbdmFsaWRhdGVET01OZXN0aW5nLmFuY2VzdG9ySW5mb0NvbnRleHRLZXldO1xuICBjb250ZXh0W3ZhbGlkYXRlRE9NTmVzdGluZy5hbmNlc3RvckluZm9Db250ZXh0S2V5XSA9IHZhbGlkYXRlRE9NTmVzdGluZy51cGRhdGVkQW5jZXN0b3JJbmZvKGluZm8sIGluc3QuX3RhZywgaW5zdCk7XG4gIHJldHVybiBjb250ZXh0O1xufVxuXG5mdW5jdGlvbiBpc0N1c3RvbUNvbXBvbmVudCh0YWdOYW1lLCBwcm9wcykge1xuICByZXR1cm4gdGFnTmFtZS5pbmRleE9mKCctJykgPj0gMCB8fCBwcm9wcy5pcyAhPSBudWxsO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgUmVhY3QgY2xhc3MgdGhhdCBpcyBpZGVtcG90ZW50IGFuZCBjYXBhYmxlIG9mIGNvbnRhaW5pbmcgb3RoZXJcbiAqIFJlYWN0IGNvbXBvbmVudHMuIEl0IGFjY2VwdHMgZXZlbnQgbGlzdGVuZXJzIGFuZCBET00gcHJvcGVydGllcyB0aGF0IGFyZVxuICogdmFsaWQgYWNjb3JkaW5nIHRvIGBET01Qcm9wZXJ0eWAuXG4gKlxuICogIC0gRXZlbnQgbGlzdGVuZXJzOiBgb25DbGlja2AsIGBvbk1vdXNlRG93bmAsIGV0Yy5cbiAqICAtIERPTSBwcm9wZXJ0aWVzOiBgY2xhc3NOYW1lYCwgYG5hbWVgLCBgdGl0bGVgLCBldGMuXG4gKlxuICogVGhlIGBzdHlsZWAgcHJvcGVydHkgZnVuY3Rpb25zIGRpZmZlcmVudGx5IGZyb20gdGhlIERPTSBBUEkuIEl0IGFjY2VwdHMgYW5cbiAqIG9iamVjdCBtYXBwaW5nIG9mIHN0eWxlIHByb3BlcnRpZXMgdG8gdmFsdWVzLlxuICpcbiAqIEBjb25zdHJ1Y3RvciBSZWFjdERPTUNvbXBvbmVudFxuICogQGV4dGVuZHMgUmVhY3RNdWx0aUNoaWxkXG4gKi9cbmZ1bmN0aW9uIFJlYWN0RE9NQ29tcG9uZW50KHRhZykge1xuICB2YWxpZGF0ZURhbmdlcm91c1RhZyh0YWcpO1xuICB0aGlzLl90YWcgPSB0YWcudG9Mb3dlckNhc2UoKTtcbiAgdGhpcy5fcmVuZGVyZWRDaGlsZHJlbiA9IG51bGw7XG4gIHRoaXMuX3ByZXZpb3VzU3R5bGUgPSBudWxsO1xuICB0aGlzLl9wcmV2aW91c1N0eWxlQ29weSA9IG51bGw7XG4gIHRoaXMuX3Jvb3ROb2RlSUQgPSBudWxsO1xuICB0aGlzLl93cmFwcGVyU3RhdGUgPSBudWxsO1xuICB0aGlzLl90b3BMZXZlbFdyYXBwZXIgPSBudWxsO1xuICB0aGlzLl9ub2RlV2l0aExlZ2FjeVByb3BlcnRpZXMgPSBudWxsO1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIHRoaXMuX3VucHJvY2Vzc2VkQ29udGV4dERldiA9IG51bGw7XG4gICAgdGhpcy5fcHJvY2Vzc2VkQ29udGV4dERldiA9IG51bGw7XG4gIH1cbn1cblxuUmVhY3RET01Db21wb25lbnQuZGlzcGxheU5hbWUgPSAnUmVhY3RET01Db21wb25lbnQnO1xuXG5SZWFjdERPTUNvbXBvbmVudC5NaXhpbiA9IHtcblxuICBjb25zdHJ1Y3Q6IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgdGhpcy5fY3VycmVudEVsZW1lbnQgPSBlbGVtZW50O1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZXMgcm9vdCB0YWcgbWFya3VwIHRoZW4gcmVjdXJzZXMuIFRoaXMgbWV0aG9kIGhhcyBzaWRlIGVmZmVjdHMgYW5kXG4gICAqIGlzIG5vdCBpZGVtcG90ZW50LlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJvb3RJRCBUaGUgcm9vdCBET00gSUQgZm9yIHRoaXMgbm9kZS5cbiAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufFJlYWN0U2VydmVyUmVuZGVyaW5nVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjb250ZXh0XG4gICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIGNvbXB1dGVkIG1hcmt1cC5cbiAgICovXG4gIG1vdW50Q29tcG9uZW50OiBmdW5jdGlvbiAocm9vdElELCB0cmFuc2FjdGlvbiwgY29udGV4dCkge1xuICAgIHRoaXMuX3Jvb3ROb2RlSUQgPSByb290SUQ7XG5cbiAgICB2YXIgcHJvcHMgPSB0aGlzLl9jdXJyZW50RWxlbWVudC5wcm9wcztcblxuICAgIHN3aXRjaCAodGhpcy5fdGFnKSB7XG4gICAgICBjYXNlICdpZnJhbWUnOlxuICAgICAgY2FzZSAnaW1nJzpcbiAgICAgIGNhc2UgJ2Zvcm0nOlxuICAgICAgY2FzZSAndmlkZW8nOlxuICAgICAgY2FzZSAnYXVkaW8nOlxuICAgICAgICB0aGlzLl93cmFwcGVyU3RhdGUgPSB7XG4gICAgICAgICAgbGlzdGVuZXJzOiBudWxsXG4gICAgICAgIH07XG4gICAgICAgIHRyYW5zYWN0aW9uLmdldFJlYWN0TW91bnRSZWFkeSgpLmVucXVldWUodHJhcEJ1YmJsZWRFdmVudHNMb2NhbCwgdGhpcyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnYnV0dG9uJzpcbiAgICAgICAgcHJvcHMgPSBSZWFjdERPTUJ1dHRvbi5nZXROYXRpdmVQcm9wcyh0aGlzLCBwcm9wcywgY29udGV4dCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnaW5wdXQnOlxuICAgICAgICBSZWFjdERPTUlucHV0Lm1vdW50V3JhcHBlcih0aGlzLCBwcm9wcywgY29udGV4dCk7XG4gICAgICAgIHByb3BzID0gUmVhY3RET01JbnB1dC5nZXROYXRpdmVQcm9wcyh0aGlzLCBwcm9wcywgY29udGV4dCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnb3B0aW9uJzpcbiAgICAgICAgUmVhY3RET01PcHRpb24ubW91bnRXcmFwcGVyKHRoaXMsIHByb3BzLCBjb250ZXh0KTtcbiAgICAgICAgcHJvcHMgPSBSZWFjdERPTU9wdGlvbi5nZXROYXRpdmVQcm9wcyh0aGlzLCBwcm9wcywgY29udGV4dCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnc2VsZWN0JzpcbiAgICAgICAgUmVhY3RET01TZWxlY3QubW91bnRXcmFwcGVyKHRoaXMsIHByb3BzLCBjb250ZXh0KTtcbiAgICAgICAgcHJvcHMgPSBSZWFjdERPTVNlbGVjdC5nZXROYXRpdmVQcm9wcyh0aGlzLCBwcm9wcywgY29udGV4dCk7XG4gICAgICAgIGNvbnRleHQgPSBSZWFjdERPTVNlbGVjdC5wcm9jZXNzQ2hpbGRDb250ZXh0KHRoaXMsIHByb3BzLCBjb250ZXh0KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd0ZXh0YXJlYSc6XG4gICAgICAgIFJlYWN0RE9NVGV4dGFyZWEubW91bnRXcmFwcGVyKHRoaXMsIHByb3BzLCBjb250ZXh0KTtcbiAgICAgICAgcHJvcHMgPSBSZWFjdERPTVRleHRhcmVhLmdldE5hdGl2ZVByb3BzKHRoaXMsIHByb3BzLCBjb250ZXh0KTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgYXNzZXJ0VmFsaWRQcm9wcyh0aGlzLCBwcm9wcyk7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGlmIChjb250ZXh0W3ZhbGlkYXRlRE9NTmVzdGluZy5hbmNlc3RvckluZm9Db250ZXh0S2V5XSkge1xuICAgICAgICB2YWxpZGF0ZURPTU5lc3RpbmcodGhpcy5fdGFnLCB0aGlzLCBjb250ZXh0W3ZhbGlkYXRlRE9NTmVzdGluZy5hbmNlc3RvckluZm9Db250ZXh0S2V5XSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHRoaXMuX3VucHJvY2Vzc2VkQ29udGV4dERldiA9IGNvbnRleHQ7XG4gICAgICB0aGlzLl9wcm9jZXNzZWRDb250ZXh0RGV2ID0gcHJvY2Vzc0NoaWxkQ29udGV4dERldihjb250ZXh0LCB0aGlzKTtcbiAgICAgIGNvbnRleHQgPSB0aGlzLl9wcm9jZXNzZWRDb250ZXh0RGV2O1xuICAgIH1cblxuICAgIHZhciBtb3VudEltYWdlO1xuICAgIGlmICh0cmFuc2FjdGlvbi51c2VDcmVhdGVFbGVtZW50KSB7XG4gICAgICB2YXIgb3duZXJEb2N1bWVudCA9IGNvbnRleHRbUmVhY3RNb3VudC5vd25lckRvY3VtZW50Q29udGV4dEtleV07XG4gICAgICB2YXIgZWwgPSBvd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGhpcy5fY3VycmVudEVsZW1lbnQudHlwZSk7XG4gICAgICBET01Qcm9wZXJ0eU9wZXJhdGlvbnMuc2V0QXR0cmlidXRlRm9ySUQoZWwsIHRoaXMuX3Jvb3ROb2RlSUQpO1xuICAgICAgLy8gUG9wdWxhdGUgbm9kZSBjYWNoZVxuICAgICAgUmVhY3RNb3VudC5nZXRJRChlbCk7XG4gICAgICB0aGlzLl91cGRhdGVET01Qcm9wZXJ0aWVzKHt9LCBwcm9wcywgdHJhbnNhY3Rpb24sIGVsKTtcbiAgICAgIHRoaXMuX2NyZWF0ZUluaXRpYWxDaGlsZHJlbih0cmFuc2FjdGlvbiwgcHJvcHMsIGNvbnRleHQsIGVsKTtcbiAgICAgIG1vdW50SW1hZ2UgPSBlbDtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHRhZ09wZW4gPSB0aGlzLl9jcmVhdGVPcGVuVGFnTWFya3VwQW5kUHV0TGlzdGVuZXJzKHRyYW5zYWN0aW9uLCBwcm9wcyk7XG4gICAgICB2YXIgdGFnQ29udGVudCA9IHRoaXMuX2NyZWF0ZUNvbnRlbnRNYXJrdXAodHJhbnNhY3Rpb24sIHByb3BzLCBjb250ZXh0KTtcbiAgICAgIGlmICghdGFnQ29udGVudCAmJiBvbWl0dGVkQ2xvc2VUYWdzW3RoaXMuX3RhZ10pIHtcbiAgICAgICAgbW91bnRJbWFnZSA9IHRhZ09wZW4gKyAnLz4nO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbW91bnRJbWFnZSA9IHRhZ09wZW4gKyAnPicgKyB0YWdDb250ZW50ICsgJzwvJyArIHRoaXMuX2N1cnJlbnRFbGVtZW50LnR5cGUgKyAnPic7XG4gICAgICB9XG4gICAgfVxuXG4gICAgc3dpdGNoICh0aGlzLl90YWcpIHtcbiAgICAgIGNhc2UgJ2lucHV0JzpcbiAgICAgICAgdHJhbnNhY3Rpb24uZ2V0UmVhY3RNb3VudFJlYWR5KCkuZW5xdWV1ZShtb3VudFJlYWR5SW5wdXRXcmFwcGVyLCB0aGlzKTtcbiAgICAgIC8vIGZhbGxzIHRocm91Z2hcbiAgICAgIGNhc2UgJ2J1dHRvbic6XG4gICAgICBjYXNlICdzZWxlY3QnOlxuICAgICAgY2FzZSAndGV4dGFyZWEnOlxuICAgICAgICBpZiAocHJvcHMuYXV0b0ZvY3VzKSB7XG4gICAgICAgICAgdHJhbnNhY3Rpb24uZ2V0UmVhY3RNb3VudFJlYWR5KCkuZW5xdWV1ZShBdXRvRm9jdXNVdGlscy5mb2N1c0RPTUNvbXBvbmVudCwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1vdW50SW1hZ2U7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgbWFya3VwIGZvciB0aGUgb3BlbiB0YWcgYW5kIGFsbCBhdHRyaWJ1dGVzLlxuICAgKlxuICAgKiBUaGlzIG1ldGhvZCBoYXMgc2lkZSBlZmZlY3RzIGJlY2F1c2UgZXZlbnRzIGdldCByZWdpc3RlcmVkLlxuICAgKlxuICAgKiBJdGVyYXRpbmcgb3ZlciBvYmplY3QgcHJvcGVydGllcyBpcyBmYXN0ZXIgdGhhbiBpdGVyYXRpbmcgb3ZlciBhcnJheXMuXG4gICAqIEBzZWUgaHR0cDovL2pzcGVyZi5jb20vb2JqLXZzLWFyci1pdGVyYXRpb25cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufFJlYWN0U2VydmVyUmVuZGVyaW5nVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBwcm9wc1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9IE1hcmt1cCBvZiBvcGVuaW5nIHRhZy5cbiAgICovXG4gIF9jcmVhdGVPcGVuVGFnTWFya3VwQW5kUHV0TGlzdGVuZXJzOiBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHByb3BzKSB7XG4gICAgdmFyIHJldCA9ICc8JyArIHRoaXMuX2N1cnJlbnRFbGVtZW50LnR5cGU7XG5cbiAgICBmb3IgKHZhciBwcm9wS2V5IGluIHByb3BzKSB7XG4gICAgICBpZiAoIXByb3BzLmhhc093blByb3BlcnR5KHByb3BLZXkpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgdmFyIHByb3BWYWx1ZSA9IHByb3BzW3Byb3BLZXldO1xuICAgICAgaWYgKHByb3BWYWx1ZSA9PSBudWxsKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKHJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzLmhhc093blByb3BlcnR5KHByb3BLZXkpKSB7XG4gICAgICAgIGlmIChwcm9wVmFsdWUpIHtcbiAgICAgICAgICBlbnF1ZXVlUHV0TGlzdGVuZXIodGhpcy5fcm9vdE5vZGVJRCwgcHJvcEtleSwgcHJvcFZhbHVlLCB0cmFuc2FjdGlvbik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChwcm9wS2V5ID09PSBTVFlMRSkge1xuICAgICAgICAgIGlmIChwcm9wVmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgICAgIC8vIFNlZSBgX3VwZGF0ZURPTVByb3BlcnRpZXNgLiBzdHlsZSBibG9ja1xuICAgICAgICAgICAgICB0aGlzLl9wcmV2aW91c1N0eWxlID0gcHJvcFZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcHJvcFZhbHVlID0gdGhpcy5fcHJldmlvdXNTdHlsZUNvcHkgPSBhc3NpZ24oe30sIHByb3BzLnN0eWxlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcHJvcFZhbHVlID0gQ1NTUHJvcGVydHlPcGVyYXRpb25zLmNyZWF0ZU1hcmt1cEZvclN0eWxlcyhwcm9wVmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBtYXJrdXAgPSBudWxsO1xuICAgICAgICBpZiAodGhpcy5fdGFnICE9IG51bGwgJiYgaXNDdXN0b21Db21wb25lbnQodGhpcy5fdGFnLCBwcm9wcykpIHtcbiAgICAgICAgICBpZiAocHJvcEtleSAhPT0gQ0hJTERSRU4pIHtcbiAgICAgICAgICAgIG1hcmt1cCA9IERPTVByb3BlcnR5T3BlcmF0aW9ucy5jcmVhdGVNYXJrdXBGb3JDdXN0b21BdHRyaWJ1dGUocHJvcEtleSwgcHJvcFZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbWFya3VwID0gRE9NUHJvcGVydHlPcGVyYXRpb25zLmNyZWF0ZU1hcmt1cEZvclByb3BlcnR5KHByb3BLZXksIHByb3BWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1hcmt1cCkge1xuICAgICAgICAgIHJldCArPSAnICcgKyBtYXJrdXA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBGb3Igc3RhdGljIHBhZ2VzLCBubyBuZWVkIHRvIHB1dCBSZWFjdCBJRCBhbmQgY2hlY2tzdW0uIFNhdmVzIGxvdHMgb2ZcbiAgICAvLyBieXRlcy5cbiAgICBpZiAodHJhbnNhY3Rpb24ucmVuZGVyVG9TdGF0aWNNYXJrdXApIHtcbiAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuXG4gICAgdmFyIG1hcmt1cEZvcklEID0gRE9NUHJvcGVydHlPcGVyYXRpb25zLmNyZWF0ZU1hcmt1cEZvcklEKHRoaXMuX3Jvb3ROb2RlSUQpO1xuICAgIHJldHVybiByZXQgKyAnICcgKyBtYXJrdXBGb3JJRDtcbiAgfSxcblxuICAvKipcbiAgICogQ3JlYXRlcyBtYXJrdXAgZm9yIHRoZSBjb250ZW50IGJldHdlZW4gdGhlIHRhZ3MuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbnxSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgKiBAcGFyYW0ge29iamVjdH0gcHJvcHNcbiAgICogQHBhcmFtIHtvYmplY3R9IGNvbnRleHRcbiAgICogQHJldHVybiB7c3RyaW5nfSBDb250ZW50IG1hcmt1cC5cbiAgICovXG4gIF9jcmVhdGVDb250ZW50TWFya3VwOiBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHByb3BzLCBjb250ZXh0KSB7XG4gICAgdmFyIHJldCA9ICcnO1xuXG4gICAgLy8gSW50ZW50aW9uYWwgdXNlIG9mICE9IHRvIGF2b2lkIGNhdGNoaW5nIHplcm8vZmFsc2UuXG4gICAgdmFyIGlubmVySFRNTCA9IHByb3BzLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MO1xuICAgIGlmIChpbm5lckhUTUwgIT0gbnVsbCkge1xuICAgICAgaWYgKGlubmVySFRNTC5fX2h0bWwgIT0gbnVsbCkge1xuICAgICAgICByZXQgPSBpbm5lckhUTUwuX19odG1sO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgY29udGVudFRvVXNlID0gQ09OVEVOVF9UWVBFU1t0eXBlb2YgcHJvcHMuY2hpbGRyZW5dID8gcHJvcHMuY2hpbGRyZW4gOiBudWxsO1xuICAgICAgdmFyIGNoaWxkcmVuVG9Vc2UgPSBjb250ZW50VG9Vc2UgIT0gbnVsbCA/IG51bGwgOiBwcm9wcy5jaGlsZHJlbjtcbiAgICAgIGlmIChjb250ZW50VG9Vc2UgIT0gbnVsbCkge1xuICAgICAgICAvLyBUT0RPOiBWYWxpZGF0ZSB0aGF0IHRleHQgaXMgYWxsb3dlZCBhcyBhIGNoaWxkIG9mIHRoaXMgbm9kZVxuICAgICAgICByZXQgPSBlc2NhcGVUZXh0Q29udGVudEZvckJyb3dzZXIoY29udGVudFRvVXNlKTtcbiAgICAgIH0gZWxzZSBpZiAoY2hpbGRyZW5Ub1VzZSAhPSBudWxsKSB7XG4gICAgICAgIHZhciBtb3VudEltYWdlcyA9IHRoaXMubW91bnRDaGlsZHJlbihjaGlsZHJlblRvVXNlLCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG4gICAgICAgIHJldCA9IG1vdW50SW1hZ2VzLmpvaW4oJycpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAobmV3bGluZUVhdGluZ1RhZ3NbdGhpcy5fdGFnXSAmJiByZXQuY2hhckF0KDApID09PSAnXFxuJykge1xuICAgICAgLy8gdGV4dC9odG1sIGlnbm9yZXMgdGhlIGZpcnN0IGNoYXJhY3RlciBpbiB0aGVzZSB0YWdzIGlmIGl0J3MgYSBuZXdsaW5lXG4gICAgICAvLyBQcmVmZXIgdG8gYnJlYWsgYXBwbGljYXRpb24veG1sIG92ZXIgdGV4dC9odG1sIChmb3Igbm93KSBieSBhZGRpbmdcbiAgICAgIC8vIGEgbmV3bGluZSBzcGVjaWZpY2FsbHkgdG8gZ2V0IGVhdGVuIGJ5IHRoZSBwYXJzZXIuIChBbHRlcm5hdGVseSBmb3JcbiAgICAgIC8vIHRleHRhcmVhcywgcmVwbGFjaW5nIFwiXlxcblwiIHdpdGggXCJcXHJcXG5cIiBkb2Vzbid0IGdldCBlYXRlbiwgYW5kIHRoZSBmaXJzdFxuICAgICAgLy8gXFxyIGlzIG5vcm1hbGl6ZWQgb3V0IGJ5IEhUTUxUZXh0QXJlYUVsZW1lbnQjdmFsdWUuKVxuICAgICAgLy8gU2VlOiA8aHR0cDovL3d3dy53My5vcmcvVFIvaHRtbC1wb2x5Z2xvdC8jbmV3bGluZXMtaW4tdGV4dGFyZWEtYW5kLXByZT5cbiAgICAgIC8vIFNlZTogPGh0dHA6Ly93d3cudzMub3JnL1RSL2h0bWw1L3N5bnRheC5odG1sI2VsZW1lbnQtcmVzdHJpY3Rpb25zPlxuICAgICAgLy8gU2VlOiA8aHR0cDovL3d3dy53My5vcmcvVFIvaHRtbDUvc3ludGF4Lmh0bWwjbmV3bGluZXM+XG4gICAgICAvLyBTZWU6IFBhcnNpbmcgb2YgXCJ0ZXh0YXJlYVwiIFwibGlzdGluZ1wiIGFuZCBcInByZVwiIGVsZW1lbnRzXG4gICAgICAvLyAgZnJvbSA8aHR0cDovL3d3dy53My5vcmcvVFIvaHRtbDUvc3ludGF4Lmh0bWwjcGFyc2luZy1tYWluLWluYm9keT5cbiAgICAgIHJldHVybiAnXFxuJyArIHJldDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG4gIH0sXG5cbiAgX2NyZWF0ZUluaXRpYWxDaGlsZHJlbjogZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBwcm9wcywgY29udGV4dCwgZWwpIHtcbiAgICAvLyBJbnRlbnRpb25hbCB1c2Ugb2YgIT0gdG8gYXZvaWQgY2F0Y2hpbmcgemVyby9mYWxzZS5cbiAgICB2YXIgaW5uZXJIVE1MID0gcHJvcHMuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw7XG4gICAgaWYgKGlubmVySFRNTCAhPSBudWxsKSB7XG4gICAgICBpZiAoaW5uZXJIVE1MLl9faHRtbCAhPSBudWxsKSB7XG4gICAgICAgIHNldElubmVySFRNTChlbCwgaW5uZXJIVE1MLl9faHRtbCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBjb250ZW50VG9Vc2UgPSBDT05URU5UX1RZUEVTW3R5cGVvZiBwcm9wcy5jaGlsZHJlbl0gPyBwcm9wcy5jaGlsZHJlbiA6IG51bGw7XG4gICAgICB2YXIgY2hpbGRyZW5Ub1VzZSA9IGNvbnRlbnRUb1VzZSAhPSBudWxsID8gbnVsbCA6IHByb3BzLmNoaWxkcmVuO1xuICAgICAgaWYgKGNvbnRlbnRUb1VzZSAhPSBudWxsKSB7XG4gICAgICAgIC8vIFRPRE86IFZhbGlkYXRlIHRoYXQgdGV4dCBpcyBhbGxvd2VkIGFzIGEgY2hpbGQgb2YgdGhpcyBub2RlXG4gICAgICAgIHNldFRleHRDb250ZW50KGVsLCBjb250ZW50VG9Vc2UpO1xuICAgICAgfSBlbHNlIGlmIChjaGlsZHJlblRvVXNlICE9IG51bGwpIHtcbiAgICAgICAgdmFyIG1vdW50SW1hZ2VzID0gdGhpcy5tb3VudENoaWxkcmVuKGNoaWxkcmVuVG9Vc2UsIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtb3VudEltYWdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGVsLmFwcGVuZENoaWxkKG1vdW50SW1hZ2VzW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogUmVjZWl2ZXMgYSBuZXh0IGVsZW1lbnQgYW5kIHVwZGF0ZXMgdGhlIGNvbXBvbmVudC5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBuZXh0RWxlbWVudFxuICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb258UmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICogQHBhcmFtIHtvYmplY3R9IGNvbnRleHRcbiAgICovXG4gIHJlY2VpdmVDb21wb25lbnQ6IGZ1bmN0aW9uIChuZXh0RWxlbWVudCwgdHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcbiAgICB2YXIgcHJldkVsZW1lbnQgPSB0aGlzLl9jdXJyZW50RWxlbWVudDtcbiAgICB0aGlzLl9jdXJyZW50RWxlbWVudCA9IG5leHRFbGVtZW50O1xuICAgIHRoaXMudXBkYXRlQ29tcG9uZW50KHRyYW5zYWN0aW9uLCBwcmV2RWxlbWVudCwgbmV4dEVsZW1lbnQsIGNvbnRleHQpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIGEgbmF0aXZlIERPTSBjb21wb25lbnQgYWZ0ZXIgaXQgaGFzIGFscmVhZHkgYmVlbiBhbGxvY2F0ZWQgYW5kXG4gICAqIGF0dGFjaGVkIHRvIHRoZSBET00uIFJlY29uY2lsZXMgdGhlIHJvb3QgRE9NIG5vZGUsIHRoZW4gcmVjdXJzZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICogQHBhcmFtIHtSZWFjdEVsZW1lbnR9IHByZXZFbGVtZW50XG4gICAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBuZXh0RWxlbWVudFxuICAgKiBAaW50ZXJuYWxcbiAgICogQG92ZXJyaWRhYmxlXG4gICAqL1xuICB1cGRhdGVDb21wb25lbnQ6IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgcHJldkVsZW1lbnQsIG5leHRFbGVtZW50LCBjb250ZXh0KSB7XG4gICAgdmFyIGxhc3RQcm9wcyA9IHByZXZFbGVtZW50LnByb3BzO1xuICAgIHZhciBuZXh0UHJvcHMgPSB0aGlzLl9jdXJyZW50RWxlbWVudC5wcm9wcztcblxuICAgIHN3aXRjaCAodGhpcy5fdGFnKSB7XG4gICAgICBjYXNlICdidXR0b24nOlxuICAgICAgICBsYXN0UHJvcHMgPSBSZWFjdERPTUJ1dHRvbi5nZXROYXRpdmVQcm9wcyh0aGlzLCBsYXN0UHJvcHMpO1xuICAgICAgICBuZXh0UHJvcHMgPSBSZWFjdERPTUJ1dHRvbi5nZXROYXRpdmVQcm9wcyh0aGlzLCBuZXh0UHJvcHMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2lucHV0JzpcbiAgICAgICAgUmVhY3RET01JbnB1dC51cGRhdGVXcmFwcGVyKHRoaXMpO1xuICAgICAgICBsYXN0UHJvcHMgPSBSZWFjdERPTUlucHV0LmdldE5hdGl2ZVByb3BzKHRoaXMsIGxhc3RQcm9wcyk7XG4gICAgICAgIG5leHRQcm9wcyA9IFJlYWN0RE9NSW5wdXQuZ2V0TmF0aXZlUHJvcHModGhpcywgbmV4dFByb3BzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdvcHRpb24nOlxuICAgICAgICBsYXN0UHJvcHMgPSBSZWFjdERPTU9wdGlvbi5nZXROYXRpdmVQcm9wcyh0aGlzLCBsYXN0UHJvcHMpO1xuICAgICAgICBuZXh0UHJvcHMgPSBSZWFjdERPTU9wdGlvbi5nZXROYXRpdmVQcm9wcyh0aGlzLCBuZXh0UHJvcHMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3NlbGVjdCc6XG4gICAgICAgIGxhc3RQcm9wcyA9IFJlYWN0RE9NU2VsZWN0LmdldE5hdGl2ZVByb3BzKHRoaXMsIGxhc3RQcm9wcyk7XG4gICAgICAgIG5leHRQcm9wcyA9IFJlYWN0RE9NU2VsZWN0LmdldE5hdGl2ZVByb3BzKHRoaXMsIG5leHRQcm9wcyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndGV4dGFyZWEnOlxuICAgICAgICBSZWFjdERPTVRleHRhcmVhLnVwZGF0ZVdyYXBwZXIodGhpcyk7XG4gICAgICAgIGxhc3RQcm9wcyA9IFJlYWN0RE9NVGV4dGFyZWEuZ2V0TmF0aXZlUHJvcHModGhpcywgbGFzdFByb3BzKTtcbiAgICAgICAgbmV4dFByb3BzID0gUmVhY3RET01UZXh0YXJlYS5nZXROYXRpdmVQcm9wcyh0aGlzLCBuZXh0UHJvcHMpO1xuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgLy8gSWYgdGhlIGNvbnRleHQgaXMgcmVmZXJlbmNlLWVxdWFsIHRvIHRoZSBvbGQgb25lLCBwYXNzIGRvd24gdGhlIHNhbWVcbiAgICAgIC8vIHByb2Nlc3NlZCBvYmplY3Qgc28gdGhlIHVwZGF0ZSBiYWlsb3V0IGluIFJlYWN0UmVjb25jaWxlciBiZWhhdmVzXG4gICAgICAvLyBjb3JyZWN0bHkgKGFuZCBpZGVudGljYWxseSBpbiBkZXYgYW5kIHByb2QpLiBTZWUgIzUwMDUuXG4gICAgICBpZiAodGhpcy5fdW5wcm9jZXNzZWRDb250ZXh0RGV2ICE9PSBjb250ZXh0KSB7XG4gICAgICAgIHRoaXMuX3VucHJvY2Vzc2VkQ29udGV4dERldiA9IGNvbnRleHQ7XG4gICAgICAgIHRoaXMuX3Byb2Nlc3NlZENvbnRleHREZXYgPSBwcm9jZXNzQ2hpbGRDb250ZXh0RGV2KGNvbnRleHQsIHRoaXMpO1xuICAgICAgfVxuICAgICAgY29udGV4dCA9IHRoaXMuX3Byb2Nlc3NlZENvbnRleHREZXY7XG4gICAgfVxuXG4gICAgYXNzZXJ0VmFsaWRQcm9wcyh0aGlzLCBuZXh0UHJvcHMpO1xuICAgIHRoaXMuX3VwZGF0ZURPTVByb3BlcnRpZXMobGFzdFByb3BzLCBuZXh0UHJvcHMsIHRyYW5zYWN0aW9uLCBudWxsKTtcbiAgICB0aGlzLl91cGRhdGVET01DaGlsZHJlbihsYXN0UHJvcHMsIG5leHRQcm9wcywgdHJhbnNhY3Rpb24sIGNvbnRleHQpO1xuXG4gICAgaWYgKCFjYW5EZWZpbmVQcm9wZXJ0eSAmJiB0aGlzLl9ub2RlV2l0aExlZ2FjeVByb3BlcnRpZXMpIHtcbiAgICAgIHRoaXMuX25vZGVXaXRoTGVnYWN5UHJvcGVydGllcy5wcm9wcyA9IG5leHRQcm9wcztcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fdGFnID09PSAnc2VsZWN0Jykge1xuICAgICAgLy8gPHNlbGVjdD4gdmFsdWUgdXBkYXRlIG5lZWRzIHRvIG9jY3VyIGFmdGVyIDxvcHRpb24+IGNoaWxkcmVuXG4gICAgICAvLyByZWNvbmNpbGlhdGlvblxuICAgICAgdHJhbnNhY3Rpb24uZ2V0UmVhY3RNb3VudFJlYWR5KCkuZW5xdWV1ZShwb3N0VXBkYXRlU2VsZWN0V3JhcHBlciwgdGhpcyk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBSZWNvbmNpbGVzIHRoZSBwcm9wZXJ0aWVzIGJ5IGRldGVjdGluZyBkaWZmZXJlbmNlcyBpbiBwcm9wZXJ0eSB2YWx1ZXMgYW5kXG4gICAqIHVwZGF0aW5nIHRoZSBET00gYXMgbmVjZXNzYXJ5LiBUaGlzIGZ1bmN0aW9uIGlzIHByb2JhYmx5IHRoZSBzaW5nbGUgbW9zdFxuICAgKiBjcml0aWNhbCBwYXRoIGZvciBwZXJmb3JtYW5jZSBvcHRpbWl6YXRpb24uXG4gICAqXG4gICAqIFRPRE86IEJlbmNobWFyayB3aGV0aGVyIGNoZWNraW5nIGZvciBjaGFuZ2VkIHZhbHVlcyBpbiBtZW1vcnkgYWN0dWFsbHlcbiAgICogICAgICAgaW1wcm92ZXMgcGVyZm9ybWFuY2UgKGVzcGVjaWFsbHkgc3RhdGljYWxseSBwb3NpdGlvbmVkIGVsZW1lbnRzKS5cbiAgICogVE9ETzogQmVuY2htYXJrIHRoZSBlZmZlY3RzIG9mIHB1dHRpbmcgdGhpcyBhdCB0aGUgdG9wIHNpbmNlIDk5JSBvZiBwcm9wc1xuICAgKiAgICAgICBkbyBub3QgY2hhbmdlIGZvciBhIGdpdmVuIHJlY29uY2lsaWF0aW9uLlxuICAgKiBUT0RPOiBCZW5jaG1hcmsgYXJlYXMgdGhhdCBjYW4gYmUgaW1wcm92ZWQgd2l0aCBjYWNoaW5nLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge29iamVjdH0gbGFzdFByb3BzXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBuZXh0UHJvcHNcbiAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgKiBAcGFyYW0gez9ET01FbGVtZW50fSBub2RlXG4gICAqL1xuICBfdXBkYXRlRE9NUHJvcGVydGllczogZnVuY3Rpb24gKGxhc3RQcm9wcywgbmV4dFByb3BzLCB0cmFuc2FjdGlvbiwgbm9kZSkge1xuICAgIHZhciBwcm9wS2V5O1xuICAgIHZhciBzdHlsZU5hbWU7XG4gICAgdmFyIHN0eWxlVXBkYXRlcztcbiAgICBmb3IgKHByb3BLZXkgaW4gbGFzdFByb3BzKSB7XG4gICAgICBpZiAobmV4dFByb3BzLmhhc093blByb3BlcnR5KHByb3BLZXkpIHx8ICFsYXN0UHJvcHMuaGFzT3duUHJvcGVydHkocHJvcEtleSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAocHJvcEtleSA9PT0gU1RZTEUpIHtcbiAgICAgICAgdmFyIGxhc3RTdHlsZSA9IHRoaXMuX3ByZXZpb3VzU3R5bGVDb3B5O1xuICAgICAgICBmb3IgKHN0eWxlTmFtZSBpbiBsYXN0U3R5bGUpIHtcbiAgICAgICAgICBpZiAobGFzdFN0eWxlLmhhc093blByb3BlcnR5KHN0eWxlTmFtZSkpIHtcbiAgICAgICAgICAgIHN0eWxlVXBkYXRlcyA9IHN0eWxlVXBkYXRlcyB8fCB7fTtcbiAgICAgICAgICAgIHN0eWxlVXBkYXRlc1tzdHlsZU5hbWVdID0gJyc7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3ByZXZpb3VzU3R5bGVDb3B5ID0gbnVsbDtcbiAgICAgIH0gZWxzZSBpZiAocmVnaXN0cmF0aW9uTmFtZU1vZHVsZXMuaGFzT3duUHJvcGVydHkocHJvcEtleSkpIHtcbiAgICAgICAgaWYgKGxhc3RQcm9wc1twcm9wS2V5XSkge1xuICAgICAgICAgIC8vIE9ubHkgY2FsbCBkZWxldGVMaXN0ZW5lciBpZiB0aGVyZSB3YXMgYSBsaXN0ZW5lciBwcmV2aW91c2x5IG9yXG4gICAgICAgICAgLy8gZWxzZSB3aWxsRGVsZXRlTGlzdGVuZXIgZ2V0cyBjYWxsZWQgd2hlbiB0aGVyZSB3YXNuJ3QgYWN0dWFsbHkgYVxuICAgICAgICAgIC8vIGxpc3RlbmVyIChlLmcuLCBvbkNsaWNrPXtudWxsfSlcbiAgICAgICAgICBkZWxldGVMaXN0ZW5lcih0aGlzLl9yb290Tm9kZUlELCBwcm9wS2V5KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChET01Qcm9wZXJ0eS5wcm9wZXJ0aWVzW3Byb3BLZXldIHx8IERPTVByb3BlcnR5LmlzQ3VzdG9tQXR0cmlidXRlKHByb3BLZXkpKSB7XG4gICAgICAgIGlmICghbm9kZSkge1xuICAgICAgICAgIG5vZGUgPSBSZWFjdE1vdW50LmdldE5vZGUodGhpcy5fcm9vdE5vZGVJRCk7XG4gICAgICAgIH1cbiAgICAgICAgRE9NUHJvcGVydHlPcGVyYXRpb25zLmRlbGV0ZVZhbHVlRm9yUHJvcGVydHkobm9kZSwgcHJvcEtleSk7XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAocHJvcEtleSBpbiBuZXh0UHJvcHMpIHtcbiAgICAgIHZhciBuZXh0UHJvcCA9IG5leHRQcm9wc1twcm9wS2V5XTtcbiAgICAgIHZhciBsYXN0UHJvcCA9IHByb3BLZXkgPT09IFNUWUxFID8gdGhpcy5fcHJldmlvdXNTdHlsZUNvcHkgOiBsYXN0UHJvcHNbcHJvcEtleV07XG4gICAgICBpZiAoIW5leHRQcm9wcy5oYXNPd25Qcm9wZXJ0eShwcm9wS2V5KSB8fCBuZXh0UHJvcCA9PT0gbGFzdFByb3ApIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAocHJvcEtleSA9PT0gU1RZTEUpIHtcbiAgICAgICAgaWYgKG5leHRQcm9wKSB7XG4gICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICAgIGNoZWNrQW5kV2FybkZvck11dGF0ZWRTdHlsZSh0aGlzLl9wcmV2aW91c1N0eWxlQ29weSwgdGhpcy5fcHJldmlvdXNTdHlsZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLl9wcmV2aW91c1N0eWxlID0gbmV4dFByb3A7XG4gICAgICAgICAgfVxuICAgICAgICAgIG5leHRQcm9wID0gdGhpcy5fcHJldmlvdXNTdHlsZUNvcHkgPSBhc3NpZ24oe30sIG5leHRQcm9wKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLl9wcmV2aW91c1N0eWxlQ29weSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxhc3RQcm9wKSB7XG4gICAgICAgICAgLy8gVW5zZXQgc3R5bGVzIG9uIGBsYXN0UHJvcGAgYnV0IG5vdCBvbiBgbmV4dFByb3BgLlxuICAgICAgICAgIGZvciAoc3R5bGVOYW1lIGluIGxhc3RQcm9wKSB7XG4gICAgICAgICAgICBpZiAobGFzdFByb3AuaGFzT3duUHJvcGVydHkoc3R5bGVOYW1lKSAmJiAoIW5leHRQcm9wIHx8ICFuZXh0UHJvcC5oYXNPd25Qcm9wZXJ0eShzdHlsZU5hbWUpKSkge1xuICAgICAgICAgICAgICBzdHlsZVVwZGF0ZXMgPSBzdHlsZVVwZGF0ZXMgfHwge307XG4gICAgICAgICAgICAgIHN0eWxlVXBkYXRlc1tzdHlsZU5hbWVdID0gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIFVwZGF0ZSBzdHlsZXMgdGhhdCBjaGFuZ2VkIHNpbmNlIGBsYXN0UHJvcGAuXG4gICAgICAgICAgZm9yIChzdHlsZU5hbWUgaW4gbmV4dFByb3ApIHtcbiAgICAgICAgICAgIGlmIChuZXh0UHJvcC5oYXNPd25Qcm9wZXJ0eShzdHlsZU5hbWUpICYmIGxhc3RQcm9wW3N0eWxlTmFtZV0gIT09IG5leHRQcm9wW3N0eWxlTmFtZV0pIHtcbiAgICAgICAgICAgICAgc3R5bGVVcGRhdGVzID0gc3R5bGVVcGRhdGVzIHx8IHt9O1xuICAgICAgICAgICAgICBzdHlsZVVwZGF0ZXNbc3R5bGVOYW1lXSA9IG5leHRQcm9wW3N0eWxlTmFtZV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFJlbGllcyBvbiBgdXBkYXRlU3R5bGVzQnlJRGAgbm90IG11dGF0aW5nIGBzdHlsZVVwZGF0ZXNgLlxuICAgICAgICAgIHN0eWxlVXBkYXRlcyA9IG5leHRQcm9wO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzLmhhc093blByb3BlcnR5KHByb3BLZXkpKSB7XG4gICAgICAgIGlmIChuZXh0UHJvcCkge1xuICAgICAgICAgIGVucXVldWVQdXRMaXN0ZW5lcih0aGlzLl9yb290Tm9kZUlELCBwcm9wS2V5LCBuZXh0UHJvcCwgdHJhbnNhY3Rpb24pO1xuICAgICAgICB9IGVsc2UgaWYgKGxhc3RQcm9wKSB7XG4gICAgICAgICAgZGVsZXRlTGlzdGVuZXIodGhpcy5fcm9vdE5vZGVJRCwgcHJvcEtleSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoaXNDdXN0b21Db21wb25lbnQodGhpcy5fdGFnLCBuZXh0UHJvcHMpKSB7XG4gICAgICAgIGlmICghbm9kZSkge1xuICAgICAgICAgIG5vZGUgPSBSZWFjdE1vdW50LmdldE5vZGUodGhpcy5fcm9vdE5vZGVJRCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3BLZXkgPT09IENISUxEUkVOKSB7XG4gICAgICAgICAgbmV4dFByb3AgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIERPTVByb3BlcnR5T3BlcmF0aW9ucy5zZXRWYWx1ZUZvckF0dHJpYnV0ZShub2RlLCBwcm9wS2V5LCBuZXh0UHJvcCk7XG4gICAgICB9IGVsc2UgaWYgKERPTVByb3BlcnR5LnByb3BlcnRpZXNbcHJvcEtleV0gfHwgRE9NUHJvcGVydHkuaXNDdXN0b21BdHRyaWJ1dGUocHJvcEtleSkpIHtcbiAgICAgICAgaWYgKCFub2RlKSB7XG4gICAgICAgICAgbm9kZSA9IFJlYWN0TW91bnQuZ2V0Tm9kZSh0aGlzLl9yb290Tm9kZUlEKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiB3ZSdyZSB1cGRhdGluZyB0byBudWxsIG9yIHVuZGVmaW5lZCwgd2Ugc2hvdWxkIHJlbW92ZSB0aGUgcHJvcGVydHlcbiAgICAgICAgLy8gZnJvbSB0aGUgRE9NIG5vZGUgaW5zdGVhZCBvZiBpbmFkdmVydGFudGx5IHNldHRpbmcgdG8gYSBzdHJpbmcuIFRoaXNcbiAgICAgICAgLy8gYnJpbmdzIHVzIGluIGxpbmUgd2l0aCB0aGUgc2FtZSBiZWhhdmlvciB3ZSBoYXZlIG9uIGluaXRpYWwgcmVuZGVyLlxuICAgICAgICBpZiAobmV4dFByb3AgIT0gbnVsbCkge1xuICAgICAgICAgIERPTVByb3BlcnR5T3BlcmF0aW9ucy5zZXRWYWx1ZUZvclByb3BlcnR5KG5vZGUsIHByb3BLZXksIG5leHRQcm9wKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBET01Qcm9wZXJ0eU9wZXJhdGlvbnMuZGVsZXRlVmFsdWVGb3JQcm9wZXJ0eShub2RlLCBwcm9wS2V5KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoc3R5bGVVcGRhdGVzKSB7XG4gICAgICBpZiAoIW5vZGUpIHtcbiAgICAgICAgbm9kZSA9IFJlYWN0TW91bnQuZ2V0Tm9kZSh0aGlzLl9yb290Tm9kZUlEKTtcbiAgICAgIH1cbiAgICAgIENTU1Byb3BlcnR5T3BlcmF0aW9ucy5zZXRWYWx1ZUZvclN0eWxlcyhub2RlLCBzdHlsZVVwZGF0ZXMpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogUmVjb25jaWxlcyB0aGUgY2hpbGRyZW4gd2l0aCB0aGUgdmFyaW91cyBwcm9wZXJ0aWVzIHRoYXQgYWZmZWN0IHRoZVxuICAgKiBjaGlsZHJlbiBjb250ZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gbGFzdFByb3BzXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBuZXh0UHJvcHNcbiAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgKiBAcGFyYW0ge29iamVjdH0gY29udGV4dFxuICAgKi9cbiAgX3VwZGF0ZURPTUNoaWxkcmVuOiBmdW5jdGlvbiAobGFzdFByb3BzLCBuZXh0UHJvcHMsIHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG4gICAgdmFyIGxhc3RDb250ZW50ID0gQ09OVEVOVF9UWVBFU1t0eXBlb2YgbGFzdFByb3BzLmNoaWxkcmVuXSA/IGxhc3RQcm9wcy5jaGlsZHJlbiA6IG51bGw7XG4gICAgdmFyIG5leHRDb250ZW50ID0gQ09OVEVOVF9UWVBFU1t0eXBlb2YgbmV4dFByb3BzLmNoaWxkcmVuXSA/IG5leHRQcm9wcy5jaGlsZHJlbiA6IG51bGw7XG5cbiAgICB2YXIgbGFzdEh0bWwgPSBsYXN0UHJvcHMuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwgJiYgbGFzdFByb3BzLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MLl9faHRtbDtcbiAgICB2YXIgbmV4dEh0bWwgPSBuZXh0UHJvcHMuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwgJiYgbmV4dFByb3BzLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MLl9faHRtbDtcblxuICAgIC8vIE5vdGUgdGhlIHVzZSBvZiBgIT1gIHdoaWNoIGNoZWNrcyBmb3IgbnVsbCBvciB1bmRlZmluZWQuXG4gICAgdmFyIGxhc3RDaGlsZHJlbiA9IGxhc3RDb250ZW50ICE9IG51bGwgPyBudWxsIDogbGFzdFByb3BzLmNoaWxkcmVuO1xuICAgIHZhciBuZXh0Q2hpbGRyZW4gPSBuZXh0Q29udGVudCAhPSBudWxsID8gbnVsbCA6IG5leHRQcm9wcy5jaGlsZHJlbjtcblxuICAgIC8vIElmIHdlJ3JlIHN3aXRjaGluZyBmcm9tIGNoaWxkcmVuIHRvIGNvbnRlbnQvaHRtbCBvciB2aWNlIHZlcnNhLCByZW1vdmVcbiAgICAvLyB0aGUgb2xkIGNvbnRlbnRcbiAgICB2YXIgbGFzdEhhc0NvbnRlbnRPckh0bWwgPSBsYXN0Q29udGVudCAhPSBudWxsIHx8IGxhc3RIdG1sICE9IG51bGw7XG4gICAgdmFyIG5leHRIYXNDb250ZW50T3JIdG1sID0gbmV4dENvbnRlbnQgIT0gbnVsbCB8fCBuZXh0SHRtbCAhPSBudWxsO1xuICAgIGlmIChsYXN0Q2hpbGRyZW4gIT0gbnVsbCAmJiBuZXh0Q2hpbGRyZW4gPT0gbnVsbCkge1xuICAgICAgdGhpcy51cGRhdGVDaGlsZHJlbihudWxsLCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG4gICAgfSBlbHNlIGlmIChsYXN0SGFzQ29udGVudE9ySHRtbCAmJiAhbmV4dEhhc0NvbnRlbnRPckh0bWwpIHtcbiAgICAgIHRoaXMudXBkYXRlVGV4dENvbnRlbnQoJycpO1xuICAgIH1cblxuICAgIGlmIChuZXh0Q29udGVudCAhPSBudWxsKSB7XG4gICAgICBpZiAobGFzdENvbnRlbnQgIT09IG5leHRDb250ZW50KSB7XG4gICAgICAgIHRoaXMudXBkYXRlVGV4dENvbnRlbnQoJycgKyBuZXh0Q29udGVudCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChuZXh0SHRtbCAhPSBudWxsKSB7XG4gICAgICBpZiAobGFzdEh0bWwgIT09IG5leHRIdG1sKSB7XG4gICAgICAgIHRoaXMudXBkYXRlTWFya3VwKCcnICsgbmV4dEh0bWwpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAobmV4dENoaWxkcmVuICE9IG51bGwpIHtcbiAgICAgIHRoaXMudXBkYXRlQ2hpbGRyZW4obmV4dENoaWxkcmVuLCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBEZXN0cm95cyBhbGwgZXZlbnQgcmVnaXN0cmF0aW9ucyBmb3IgdGhpcyBpbnN0YW5jZS4gRG9lcyBub3QgcmVtb3ZlIGZyb21cbiAgICogdGhlIERPTS4gVGhhdCBtdXN0IGJlIGRvbmUgYnkgdGhlIHBhcmVudC5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqL1xuICB1bm1vdW50Q29tcG9uZW50OiBmdW5jdGlvbiAoKSB7XG4gICAgc3dpdGNoICh0aGlzLl90YWcpIHtcbiAgICAgIGNhc2UgJ2lmcmFtZSc6XG4gICAgICBjYXNlICdpbWcnOlxuICAgICAgY2FzZSAnZm9ybSc6XG4gICAgICBjYXNlICd2aWRlbyc6XG4gICAgICBjYXNlICdhdWRpbyc6XG4gICAgICAgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl93cmFwcGVyU3RhdGUubGlzdGVuZXJzO1xuICAgICAgICBpZiAobGlzdGVuZXJzKSB7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxpc3RlbmVyc1tpXS5yZW1vdmUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdpbnB1dCc6XG4gICAgICAgIFJlYWN0RE9NSW5wdXQudW5tb3VudFdyYXBwZXIodGhpcyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnaHRtbCc6XG4gICAgICBjYXNlICdoZWFkJzpcbiAgICAgIGNhc2UgJ2JvZHknOlxuICAgICAgICAvKipcbiAgICAgICAgICogQ29tcG9uZW50cyBsaWtlIDxodG1sPiA8aGVhZD4gYW5kIDxib2R5PiBjYW4ndCBiZSByZW1vdmVkIG9yIGFkZGVkXG4gICAgICAgICAqIGVhc2lseSBpbiBhIGNyb3NzLWJyb3dzZXIgd2F5LCBob3dldmVyIGl0J3MgdmFsdWFibGUgdG8gYmUgYWJsZSB0b1xuICAgICAgICAgKiB0YWtlIGFkdmFudGFnZSBvZiBSZWFjdCdzIHJlY29uY2lsaWF0aW9uIGZvciBzdHlsaW5nIGFuZCA8dGl0bGU+XG4gICAgICAgICAqIG1hbmFnZW1lbnQuIFNvIHdlIGp1c3QgZG9jdW1lbnQgaXQgYW5kIHRocm93IGluIGRhbmdlcm91cyBjYXNlcy5cbiAgICAgICAgICovXG4gICAgICAgICFmYWxzZSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICc8JXM+IHRyaWVkIHRvIHVubW91bnQuIEJlY2F1c2Ugb2YgY3Jvc3MtYnJvd3NlciBxdWlya3MgaXQgaXMgJyArICdpbXBvc3NpYmxlIHRvIHVubW91bnQgc29tZSB0b3AtbGV2ZWwgY29tcG9uZW50cyAoZWcgPGh0bWw+LCAnICsgJzxoZWFkPiwgYW5kIDxib2R5PikgcmVsaWFibHkgYW5kIGVmZmljaWVudGx5LiBUbyBmaXggdGhpcywgaGF2ZSBhICcgKyAnc2luZ2xlIHRvcC1sZXZlbCBjb21wb25lbnQgdGhhdCBuZXZlciB1bm1vdW50cyByZW5kZXIgdGhlc2UgJyArICdlbGVtZW50cy4nLCB0aGlzLl90YWcpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgdGhpcy51bm1vdW50Q2hpbGRyZW4oKTtcbiAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuZGVsZXRlQWxsTGlzdGVuZXJzKHRoaXMuX3Jvb3ROb2RlSUQpO1xuICAgIFJlYWN0Q29tcG9uZW50QnJvd3NlckVudmlyb25tZW50LnVubW91bnRJREZyb21FbnZpcm9ubWVudCh0aGlzLl9yb290Tm9kZUlEKTtcbiAgICB0aGlzLl9yb290Tm9kZUlEID0gbnVsbDtcbiAgICB0aGlzLl93cmFwcGVyU3RhdGUgPSBudWxsO1xuICAgIGlmICh0aGlzLl9ub2RlV2l0aExlZ2FjeVByb3BlcnRpZXMpIHtcbiAgICAgIHZhciBub2RlID0gdGhpcy5fbm9kZVdpdGhMZWdhY3lQcm9wZXJ0aWVzO1xuICAgICAgbm9kZS5fcmVhY3RJbnRlcm5hbENvbXBvbmVudCA9IG51bGw7XG4gICAgICB0aGlzLl9ub2RlV2l0aExlZ2FjeVByb3BlcnRpZXMgPSBudWxsO1xuICAgIH1cbiAgfSxcblxuICBnZXRQdWJsaWNJbnN0YW5jZTogZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5fbm9kZVdpdGhMZWdhY3lQcm9wZXJ0aWVzKSB7XG4gICAgICB2YXIgbm9kZSA9IFJlYWN0TW91bnQuZ2V0Tm9kZSh0aGlzLl9yb290Tm9kZUlEKTtcblxuICAgICAgbm9kZS5fcmVhY3RJbnRlcm5hbENvbXBvbmVudCA9IHRoaXM7XG4gICAgICBub2RlLmdldERPTU5vZGUgPSBsZWdhY3lHZXRET01Ob2RlO1xuICAgICAgbm9kZS5pc01vdW50ZWQgPSBsZWdhY3lJc01vdW50ZWQ7XG4gICAgICBub2RlLnNldFN0YXRlID0gbGVnYWN5U2V0U3RhdGVFdGM7XG4gICAgICBub2RlLnJlcGxhY2VTdGF0ZSA9IGxlZ2FjeVNldFN0YXRlRXRjO1xuICAgICAgbm9kZS5mb3JjZVVwZGF0ZSA9IGxlZ2FjeVNldFN0YXRlRXRjO1xuICAgICAgbm9kZS5zZXRQcm9wcyA9IGxlZ2FjeVNldFByb3BzO1xuICAgICAgbm9kZS5yZXBsYWNlUHJvcHMgPSBsZWdhY3lSZXBsYWNlUHJvcHM7XG5cbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGlmIChjYW5EZWZpbmVQcm9wZXJ0eSkge1xuICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKG5vZGUsIGxlZ2FjeVByb3BzRGVzY3JpcHRvcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gdXBkYXRlQ29tcG9uZW50IHdpbGwgdXBkYXRlIHRoaXMgcHJvcGVydHkgb24gc3Vic2VxdWVudCByZW5kZXJzXG4gICAgICAgICAgbm9kZS5wcm9wcyA9IHRoaXMuX2N1cnJlbnRFbGVtZW50LnByb3BzO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyB1cGRhdGVDb21wb25lbnQgd2lsbCB1cGRhdGUgdGhpcyBwcm9wZXJ0eSBvbiBzdWJzZXF1ZW50IHJlbmRlcnNcbiAgICAgICAgbm9kZS5wcm9wcyA9IHRoaXMuX2N1cnJlbnRFbGVtZW50LnByb3BzO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9ub2RlV2l0aExlZ2FjeVByb3BlcnRpZXMgPSBub2RlO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fbm9kZVdpdGhMZWdhY3lQcm9wZXJ0aWVzO1xuICB9XG5cbn07XG5cblJlYWN0UGVyZi5tZWFzdXJlTWV0aG9kcyhSZWFjdERPTUNvbXBvbmVudCwgJ1JlYWN0RE9NQ29tcG9uZW50Jywge1xuICBtb3VudENvbXBvbmVudDogJ21vdW50Q29tcG9uZW50JyxcbiAgdXBkYXRlQ29tcG9uZW50OiAndXBkYXRlQ29tcG9uZW50J1xufSk7XG5cbmFzc2lnbihSZWFjdERPTUNvbXBvbmVudC5wcm90b3R5cGUsIFJlYWN0RE9NQ29tcG9uZW50Lk1peGluLCBSZWFjdE11bHRpQ2hpbGQuTWl4aW4pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0RE9NQ29tcG9uZW50O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvUmVhY3RET01Db21wb25lbnQuanNcbi8vIG1vZHVsZSBpZCA9IDkzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBBdXRvRm9jdXNVdGlsc1xuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdE1vdW50ID0gcmVxdWlyZSgnLi9SZWFjdE1vdW50Jyk7XG5cbnZhciBmaW5kRE9NTm9kZSA9IHJlcXVpcmUoJy4vZmluZERPTU5vZGUnKTtcbnZhciBmb2N1c05vZGUgPSByZXF1aXJlKCdmYmpzL2xpYi9mb2N1c05vZGUnKTtcblxudmFyIE1peGluID0ge1xuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLnByb3BzLmF1dG9Gb2N1cykge1xuICAgICAgZm9jdXNOb2RlKGZpbmRET01Ob2RlKHRoaXMpKTtcbiAgICB9XG4gIH1cbn07XG5cbnZhciBBdXRvRm9jdXNVdGlscyA9IHtcbiAgTWl4aW46IE1peGluLFxuXG4gIGZvY3VzRE9NQ29tcG9uZW50OiBmdW5jdGlvbiAoKSB7XG4gICAgZm9jdXNOb2RlKFJlYWN0TW91bnQuZ2V0Tm9kZSh0aGlzLl9yb290Tm9kZUlEKSk7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQXV0b0ZvY3VzVXRpbHM7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0L2xpYi9BdXRvRm9jdXNVdGlscy5qc1xuLy8gbW9kdWxlIGlkID0gOTRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGZvY3VzTm9kZVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBAcGFyYW0ge0RPTUVsZW1lbnR9IG5vZGUgaW5wdXQvdGV4dGFyZWEgdG8gZm9jdXNcbiAqL1xuZnVuY3Rpb24gZm9jdXNOb2RlKG5vZGUpIHtcbiAgLy8gSUU4IGNhbiB0aHJvdyBcIkNhbid0IG1vdmUgZm9jdXMgdG8gdGhlIGNvbnRyb2wgYmVjYXVzZSBpdCBpcyBpbnZpc2libGUsXG4gIC8vIG5vdCBlbmFibGVkLCBvciBvZiBhIHR5cGUgdGhhdCBkb2VzIG5vdCBhY2NlcHQgdGhlIGZvY3VzLlwiIGZvciBhbGwga2luZHMgb2ZcbiAgLy8gcmVhc29ucyB0aGF0IGFyZSB0b28gZXhwZW5zaXZlIGFuZCBmcmFnaWxlIHRvIHRlc3QuXG4gIHRyeSB7XG4gICAgbm9kZS5mb2N1cygpO1xuICB9IGNhdGNoIChlKSB7fVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZvY3VzTm9kZTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vZmJqcy9saWIvZm9jdXNOb2RlLmpzXG4vLyBtb2R1bGUgaWQgPSA5NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgQ1NTUHJvcGVydHlPcGVyYXRpb25zXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIENTU1Byb3BlcnR5ID0gcmVxdWlyZSgnLi9DU1NQcm9wZXJ0eScpO1xudmFyIEV4ZWN1dGlvbkVudmlyb25tZW50ID0gcmVxdWlyZSgnZmJqcy9saWIvRXhlY3V0aW9uRW52aXJvbm1lbnQnKTtcbnZhciBSZWFjdFBlcmYgPSByZXF1aXJlKCcuL1JlYWN0UGVyZicpO1xuXG52YXIgY2FtZWxpemVTdHlsZU5hbWUgPSByZXF1aXJlKCdmYmpzL2xpYi9jYW1lbGl6ZVN0eWxlTmFtZScpO1xudmFyIGRhbmdlcm91c1N0eWxlVmFsdWUgPSByZXF1aXJlKCcuL2Rhbmdlcm91c1N0eWxlVmFsdWUnKTtcbnZhciBoeXBoZW5hdGVTdHlsZU5hbWUgPSByZXF1aXJlKCdmYmpzL2xpYi9oeXBoZW5hdGVTdHlsZU5hbWUnKTtcbnZhciBtZW1vaXplU3RyaW5nT25seSA9IHJlcXVpcmUoJ2ZianMvbGliL21lbW9pemVTdHJpbmdPbmx5Jyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxudmFyIHByb2Nlc3NTdHlsZU5hbWUgPSBtZW1vaXplU3RyaW5nT25seShmdW5jdGlvbiAoc3R5bGVOYW1lKSB7XG4gIHJldHVybiBoeXBoZW5hdGVTdHlsZU5hbWUoc3R5bGVOYW1lKTtcbn0pO1xuXG52YXIgaGFzU2hvcnRoYW5kUHJvcGVydHlCdWcgPSBmYWxzZTtcbnZhciBzdHlsZUZsb2F0QWNjZXNzb3IgPSAnY3NzRmxvYXQnO1xuaWYgKEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSkge1xuICB2YXIgdGVtcFN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jykuc3R5bGU7XG4gIHRyeSB7XG4gICAgLy8gSUU4IHRocm93cyBcIkludmFsaWQgYXJndW1lbnQuXCIgaWYgcmVzZXR0aW5nIHNob3J0aGFuZCBzdHlsZSBwcm9wZXJ0aWVzLlxuICAgIHRlbXBTdHlsZS5mb250ID0gJyc7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBoYXNTaG9ydGhhbmRQcm9wZXJ0eUJ1ZyA9IHRydWU7XG4gIH1cbiAgLy8gSUU4IG9ubHkgc3VwcG9ydHMgYWNjZXNzaW5nIGNzc0Zsb2F0IChzdGFuZGFyZCkgYXMgc3R5bGVGbG9hdFxuICBpZiAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLmNzc0Zsb2F0ID09PSB1bmRlZmluZWQpIHtcbiAgICBzdHlsZUZsb2F0QWNjZXNzb3IgPSAnc3R5bGVGbG9hdCc7XG4gIH1cbn1cblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgLy8gJ21zVHJhbnNmb3JtJyBpcyBjb3JyZWN0LCBidXQgdGhlIG90aGVyIHByZWZpeGVzIHNob3VsZCBiZSBjYXBpdGFsaXplZFxuICB2YXIgYmFkVmVuZG9yZWRTdHlsZU5hbWVQYXR0ZXJuID0gL14oPzp3ZWJraXR8bW96fG8pW0EtWl0vO1xuXG4gIC8vIHN0eWxlIHZhbHVlcyBzaG91bGRuJ3QgY29udGFpbiBhIHNlbWljb2xvblxuICB2YXIgYmFkU3R5bGVWYWx1ZVdpdGhTZW1pY29sb25QYXR0ZXJuID0gLztcXHMqJC87XG5cbiAgdmFyIHdhcm5lZFN0eWxlTmFtZXMgPSB7fTtcbiAgdmFyIHdhcm5lZFN0eWxlVmFsdWVzID0ge307XG5cbiAgdmFyIHdhcm5IeXBoZW5hdGVkU3R5bGVOYW1lID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICBpZiAod2FybmVkU3R5bGVOYW1lcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSAmJiB3YXJuZWRTdHlsZU5hbWVzW25hbWVdKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgd2FybmVkU3R5bGVOYW1lc1tuYW1lXSA9IHRydWU7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdVbnN1cHBvcnRlZCBzdHlsZSBwcm9wZXJ0eSAlcy4gRGlkIHlvdSBtZWFuICVzPycsIG5hbWUsIGNhbWVsaXplU3R5bGVOYW1lKG5hbWUpKSA6IHVuZGVmaW5lZDtcbiAgfTtcblxuICB2YXIgd2FybkJhZFZlbmRvcmVkU3R5bGVOYW1lID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICBpZiAod2FybmVkU3R5bGVOYW1lcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSAmJiB3YXJuZWRTdHlsZU5hbWVzW25hbWVdKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgd2FybmVkU3R5bGVOYW1lc1tuYW1lXSA9IHRydWU7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdVbnN1cHBvcnRlZCB2ZW5kb3ItcHJlZml4ZWQgc3R5bGUgcHJvcGVydHkgJXMuIERpZCB5b3UgbWVhbiAlcz8nLCBuYW1lLCBuYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgbmFtZS5zbGljZSgxKSkgOiB1bmRlZmluZWQ7XG4gIH07XG5cbiAgdmFyIHdhcm5TdHlsZVZhbHVlV2l0aFNlbWljb2xvbiA9IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkge1xuICAgIGlmICh3YXJuZWRTdHlsZVZhbHVlcy5oYXNPd25Qcm9wZXJ0eSh2YWx1ZSkgJiYgd2FybmVkU3R5bGVWYWx1ZXNbdmFsdWVdKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgd2FybmVkU3R5bGVWYWx1ZXNbdmFsdWVdID0gdHJ1ZTtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ1N0eWxlIHByb3BlcnR5IHZhbHVlcyBzaG91bGRuXFwndCBjb250YWluIGEgc2VtaWNvbG9uLiAnICsgJ1RyeSBcIiVzOiAlc1wiIGluc3RlYWQuJywgbmFtZSwgdmFsdWUucmVwbGFjZShiYWRTdHlsZVZhbHVlV2l0aFNlbWljb2xvblBhdHRlcm4sICcnKSkgOiB1bmRlZmluZWQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAgICovXG4gIHZhciB3YXJuVmFsaWRTdHlsZSA9IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkge1xuICAgIGlmIChuYW1lLmluZGV4T2YoJy0nKSA+IC0xKSB7XG4gICAgICB3YXJuSHlwaGVuYXRlZFN0eWxlTmFtZShuYW1lKTtcbiAgICB9IGVsc2UgaWYgKGJhZFZlbmRvcmVkU3R5bGVOYW1lUGF0dGVybi50ZXN0KG5hbWUpKSB7XG4gICAgICB3YXJuQmFkVmVuZG9yZWRTdHlsZU5hbWUobmFtZSk7XG4gICAgfSBlbHNlIGlmIChiYWRTdHlsZVZhbHVlV2l0aFNlbWljb2xvblBhdHRlcm4udGVzdCh2YWx1ZSkpIHtcbiAgICAgIHdhcm5TdHlsZVZhbHVlV2l0aFNlbWljb2xvbihuYW1lLCB2YWx1ZSk7XG4gICAgfVxuICB9O1xufVxuXG4vKipcbiAqIE9wZXJhdGlvbnMgZm9yIGRlYWxpbmcgd2l0aCBDU1MgcHJvcGVydGllcy5cbiAqL1xudmFyIENTU1Byb3BlcnR5T3BlcmF0aW9ucyA9IHtcblxuICAvKipcbiAgICogU2VyaWFsaXplcyBhIG1hcHBpbmcgb2Ygc3R5bGUgcHJvcGVydGllcyBmb3IgdXNlIGFzIGlubGluZSBzdHlsZXM6XG4gICAqXG4gICAqICAgPiBjcmVhdGVNYXJrdXBGb3JTdHlsZXMoe3dpZHRoOiAnMjAwcHgnLCBoZWlnaHQ6IDB9KVxuICAgKiAgIFwid2lkdGg6MjAwcHg7aGVpZ2h0OjA7XCJcbiAgICpcbiAgICogVW5kZWZpbmVkIHZhbHVlcyBhcmUgaWdub3JlZCBzbyB0aGF0IGRlY2xhcmF0aXZlIHByb2dyYW1taW5nIGlzIGVhc2llci5cbiAgICogVGhlIHJlc3VsdCBzaG91bGQgYmUgSFRNTC1lc2NhcGVkIGJlZm9yZSBpbnNlcnRpb24gaW50byB0aGUgRE9NLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gc3R5bGVzXG4gICAqIEByZXR1cm4gez9zdHJpbmd9XG4gICAqL1xuICBjcmVhdGVNYXJrdXBGb3JTdHlsZXM6IGZ1bmN0aW9uIChzdHlsZXMpIHtcbiAgICB2YXIgc2VyaWFsaXplZCA9ICcnO1xuICAgIGZvciAodmFyIHN0eWxlTmFtZSBpbiBzdHlsZXMpIHtcbiAgICAgIGlmICghc3R5bGVzLmhhc093blByb3BlcnR5KHN0eWxlTmFtZSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICB2YXIgc3R5bGVWYWx1ZSA9IHN0eWxlc1tzdHlsZU5hbWVdO1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgd2FyblZhbGlkU3R5bGUoc3R5bGVOYW1lLCBzdHlsZVZhbHVlKTtcbiAgICAgIH1cbiAgICAgIGlmIChzdHlsZVZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgc2VyaWFsaXplZCArPSBwcm9jZXNzU3R5bGVOYW1lKHN0eWxlTmFtZSkgKyAnOic7XG4gICAgICAgIHNlcmlhbGl6ZWQgKz0gZGFuZ2Vyb3VzU3R5bGVWYWx1ZShzdHlsZU5hbWUsIHN0eWxlVmFsdWUpICsgJzsnO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2VyaWFsaXplZCB8fCBudWxsO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB2YWx1ZSBmb3IgbXVsdGlwbGUgc3R5bGVzIG9uIGEgbm9kZS4gIElmIGEgdmFsdWUgaXMgc3BlY2lmaWVkIGFzXG4gICAqICcnIChlbXB0eSBzdHJpbmcpLCB0aGUgY29ycmVzcG9uZGluZyBzdHlsZSBwcm9wZXJ0eSB3aWxsIGJlIHVuc2V0LlxuICAgKlxuICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IG5vZGVcbiAgICogQHBhcmFtIHtvYmplY3R9IHN0eWxlc1xuICAgKi9cbiAgc2V0VmFsdWVGb3JTdHlsZXM6IGZ1bmN0aW9uIChub2RlLCBzdHlsZXMpIHtcbiAgICB2YXIgc3R5bGUgPSBub2RlLnN0eWxlO1xuICAgIGZvciAodmFyIHN0eWxlTmFtZSBpbiBzdHlsZXMpIHtcbiAgICAgIGlmICghc3R5bGVzLmhhc093blByb3BlcnR5KHN0eWxlTmFtZSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB3YXJuVmFsaWRTdHlsZShzdHlsZU5hbWUsIHN0eWxlc1tzdHlsZU5hbWVdKTtcbiAgICAgIH1cbiAgICAgIHZhciBzdHlsZVZhbHVlID0gZGFuZ2Vyb3VzU3R5bGVWYWx1ZShzdHlsZU5hbWUsIHN0eWxlc1tzdHlsZU5hbWVdKTtcbiAgICAgIGlmIChzdHlsZU5hbWUgPT09ICdmbG9hdCcpIHtcbiAgICAgICAgc3R5bGVOYW1lID0gc3R5bGVGbG9hdEFjY2Vzc29yO1xuICAgICAgfVxuICAgICAgaWYgKHN0eWxlVmFsdWUpIHtcbiAgICAgICAgc3R5bGVbc3R5bGVOYW1lXSA9IHN0eWxlVmFsdWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgZXhwYW5zaW9uID0gaGFzU2hvcnRoYW5kUHJvcGVydHlCdWcgJiYgQ1NTUHJvcGVydHkuc2hvcnRoYW5kUHJvcGVydHlFeHBhbnNpb25zW3N0eWxlTmFtZV07XG4gICAgICAgIGlmIChleHBhbnNpb24pIHtcbiAgICAgICAgICAvLyBTaG9ydGhhbmQgcHJvcGVydHkgdGhhdCBJRTggd29uJ3QgbGlrZSB1bnNldHRpbmcsIHNvIHVuc2V0IGVhY2hcbiAgICAgICAgICAvLyBjb21wb25lbnQgdG8gcGxhY2F0ZSBpdFxuICAgICAgICAgIGZvciAodmFyIGluZGl2aWR1YWxTdHlsZU5hbWUgaW4gZXhwYW5zaW9uKSB7XG4gICAgICAgICAgICBzdHlsZVtpbmRpdmlkdWFsU3R5bGVOYW1lXSA9ICcnO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdHlsZVtzdHlsZU5hbWVdID0gJyc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxufTtcblxuUmVhY3RQZXJmLm1lYXN1cmVNZXRob2RzKENTU1Byb3BlcnR5T3BlcmF0aW9ucywgJ0NTU1Byb3BlcnR5T3BlcmF0aW9ucycsIHtcbiAgc2V0VmFsdWVGb3JTdHlsZXM6ICdzZXRWYWx1ZUZvclN0eWxlcydcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IENTU1Byb3BlcnR5T3BlcmF0aW9ucztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QvbGliL0NTU1Byb3BlcnR5T3BlcmF0aW9ucy5qc1xuLy8gbW9kdWxlIGlkID0gOTZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIENTU1Byb3BlcnR5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIENTUyBwcm9wZXJ0aWVzIHdoaWNoIGFjY2VwdCBudW1iZXJzIGJ1dCBhcmUgbm90IGluIHVuaXRzIG9mIFwicHhcIi5cbiAqL1xudmFyIGlzVW5pdGxlc3NOdW1iZXIgPSB7XG4gIGFuaW1hdGlvbkl0ZXJhdGlvbkNvdW50OiB0cnVlLFxuICBib3hGbGV4OiB0cnVlLFxuICBib3hGbGV4R3JvdXA6IHRydWUsXG4gIGJveE9yZGluYWxHcm91cDogdHJ1ZSxcbiAgY29sdW1uQ291bnQ6IHRydWUsXG4gIGZsZXg6IHRydWUsXG4gIGZsZXhHcm93OiB0cnVlLFxuICBmbGV4UG9zaXRpdmU6IHRydWUsXG4gIGZsZXhTaHJpbms6IHRydWUsXG4gIGZsZXhOZWdhdGl2ZTogdHJ1ZSxcbiAgZmxleE9yZGVyOiB0cnVlLFxuICBmb250V2VpZ2h0OiB0cnVlLFxuICBsaW5lQ2xhbXA6IHRydWUsXG4gIGxpbmVIZWlnaHQ6IHRydWUsXG4gIG9wYWNpdHk6IHRydWUsXG4gIG9yZGVyOiB0cnVlLFxuICBvcnBoYW5zOiB0cnVlLFxuICB0YWJTaXplOiB0cnVlLFxuICB3aWRvd3M6IHRydWUsXG4gIHpJbmRleDogdHJ1ZSxcbiAgem9vbTogdHJ1ZSxcblxuICAvLyBTVkctcmVsYXRlZCBwcm9wZXJ0aWVzXG4gIGZpbGxPcGFjaXR5OiB0cnVlLFxuICBzdG9wT3BhY2l0eTogdHJ1ZSxcbiAgc3Ryb2tlRGFzaG9mZnNldDogdHJ1ZSxcbiAgc3Ryb2tlT3BhY2l0eTogdHJ1ZSxcbiAgc3Ryb2tlV2lkdGg6IHRydWVcbn07XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHByZWZpeCB2ZW5kb3Itc3BlY2lmaWMgcHJlZml4LCBlZzogV2Via2l0XG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IHN0eWxlIG5hbWUsIGVnOiB0cmFuc2l0aW9uRHVyYXRpb25cbiAqIEByZXR1cm4ge3N0cmluZ30gc3R5bGUgbmFtZSBwcmVmaXhlZCB3aXRoIGBwcmVmaXhgLCBwcm9wZXJseSBjYW1lbENhc2VkLCBlZzpcbiAqIFdlYmtpdFRyYW5zaXRpb25EdXJhdGlvblxuICovXG5mdW5jdGlvbiBwcmVmaXhLZXkocHJlZml4LCBrZXkpIHtcbiAgcmV0dXJuIHByZWZpeCArIGtleS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGtleS5zdWJzdHJpbmcoMSk7XG59XG5cbi8qKlxuICogU3VwcG9ydCBzdHlsZSBuYW1lcyB0aGF0IG1heSBjb21lIHBhc3NlZCBpbiBwcmVmaXhlZCBieSBhZGRpbmcgcGVybXV0YXRpb25zXG4gKiBvZiB2ZW5kb3IgcHJlZml4ZXMuXG4gKi9cbnZhciBwcmVmaXhlcyA9IFsnV2Via2l0JywgJ21zJywgJ01veicsICdPJ107XG5cbi8vIFVzaW5nIE9iamVjdC5rZXlzIGhlcmUsIG9yIGVsc2UgdGhlIHZhbmlsbGEgZm9yLWluIGxvb3AgbWFrZXMgSUU4IGdvIGludG8gYW5cbi8vIGluZmluaXRlIGxvb3AsIGJlY2F1c2UgaXQgaXRlcmF0ZXMgb3ZlciB0aGUgbmV3bHkgYWRkZWQgcHJvcHMgdG9vLlxuT2JqZWN0LmtleXMoaXNVbml0bGVzc051bWJlcikuZm9yRWFjaChmdW5jdGlvbiAocHJvcCkge1xuICBwcmVmaXhlcy5mb3JFYWNoKGZ1bmN0aW9uIChwcmVmaXgpIHtcbiAgICBpc1VuaXRsZXNzTnVtYmVyW3ByZWZpeEtleShwcmVmaXgsIHByb3ApXSA9IGlzVW5pdGxlc3NOdW1iZXJbcHJvcF07XG4gIH0pO1xufSk7XG5cbi8qKlxuICogTW9zdCBzdHlsZSBwcm9wZXJ0aWVzIGNhbiBiZSB1bnNldCBieSBkb2luZyAuc3R5bGVbcHJvcF0gPSAnJyBidXQgSUU4XG4gKiBkb2Vzbid0IGxpa2UgZG9pbmcgdGhhdCB3aXRoIHNob3J0aGFuZCBwcm9wZXJ0aWVzIHNvIGZvciB0aGUgcHJvcGVydGllcyB0aGF0XG4gKiBJRTggYnJlYWtzIG9uLCB3aGljaCBhcmUgbGlzdGVkIGhlcmUsIHdlIGluc3RlYWQgdW5zZXQgZWFjaCBvZiB0aGVcbiAqIGluZGl2aWR1YWwgcHJvcGVydGllcy4gU2VlIGh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0LzEyMzg1LlxuICogVGhlIDQtdmFsdWUgJ2Nsb2NrJyBwcm9wZXJ0aWVzIGxpa2UgbWFyZ2luLCBwYWRkaW5nLCBib3JkZXItd2lkdGggc2VlbSB0b1xuICogYmVoYXZlIHdpdGhvdXQgYW55IHByb2JsZW1zLiBDdXJpb3VzbHksIGxpc3Qtc3R5bGUgd29ya3MgdG9vIHdpdGhvdXQgYW55XG4gKiBzcGVjaWFsIHByb2RkaW5nLlxuICovXG52YXIgc2hvcnRoYW5kUHJvcGVydHlFeHBhbnNpb25zID0ge1xuICBiYWNrZ3JvdW5kOiB7XG4gICAgYmFja2dyb3VuZEF0dGFjaG1lbnQ6IHRydWUsXG4gICAgYmFja2dyb3VuZENvbG9yOiB0cnVlLFxuICAgIGJhY2tncm91bmRJbWFnZTogdHJ1ZSxcbiAgICBiYWNrZ3JvdW5kUG9zaXRpb25YOiB0cnVlLFxuICAgIGJhY2tncm91bmRQb3NpdGlvblk6IHRydWUsXG4gICAgYmFja2dyb3VuZFJlcGVhdDogdHJ1ZVxuICB9LFxuICBiYWNrZ3JvdW5kUG9zaXRpb246IHtcbiAgICBiYWNrZ3JvdW5kUG9zaXRpb25YOiB0cnVlLFxuICAgIGJhY2tncm91bmRQb3NpdGlvblk6IHRydWVcbiAgfSxcbiAgYm9yZGVyOiB7XG4gICAgYm9yZGVyV2lkdGg6IHRydWUsXG4gICAgYm9yZGVyU3R5bGU6IHRydWUsXG4gICAgYm9yZGVyQ29sb3I6IHRydWVcbiAgfSxcbiAgYm9yZGVyQm90dG9tOiB7XG4gICAgYm9yZGVyQm90dG9tV2lkdGg6IHRydWUsXG4gICAgYm9yZGVyQm90dG9tU3R5bGU6IHRydWUsXG4gICAgYm9yZGVyQm90dG9tQ29sb3I6IHRydWVcbiAgfSxcbiAgYm9yZGVyTGVmdDoge1xuICAgIGJvcmRlckxlZnRXaWR0aDogdHJ1ZSxcbiAgICBib3JkZXJMZWZ0U3R5bGU6IHRydWUsXG4gICAgYm9yZGVyTGVmdENvbG9yOiB0cnVlXG4gIH0sXG4gIGJvcmRlclJpZ2h0OiB7XG4gICAgYm9yZGVyUmlnaHRXaWR0aDogdHJ1ZSxcbiAgICBib3JkZXJSaWdodFN0eWxlOiB0cnVlLFxuICAgIGJvcmRlclJpZ2h0Q29sb3I6IHRydWVcbiAgfSxcbiAgYm9yZGVyVG9wOiB7XG4gICAgYm9yZGVyVG9wV2lkdGg6IHRydWUsXG4gICAgYm9yZGVyVG9wU3R5bGU6IHRydWUsXG4gICAgYm9yZGVyVG9wQ29sb3I6IHRydWVcbiAgfSxcbiAgZm9udDoge1xuICAgIGZvbnRTdHlsZTogdHJ1ZSxcbiAgICBmb250VmFyaWFudDogdHJ1ZSxcbiAgICBmb250V2VpZ2h0OiB0cnVlLFxuICAgIGZvbnRTaXplOiB0cnVlLFxuICAgIGxpbmVIZWlnaHQ6IHRydWUsXG4gICAgZm9udEZhbWlseTogdHJ1ZVxuICB9LFxuICBvdXRsaW5lOiB7XG4gICAgb3V0bGluZVdpZHRoOiB0cnVlLFxuICAgIG91dGxpbmVTdHlsZTogdHJ1ZSxcbiAgICBvdXRsaW5lQ29sb3I6IHRydWVcbiAgfVxufTtcblxudmFyIENTU1Byb3BlcnR5ID0ge1xuICBpc1VuaXRsZXNzTnVtYmVyOiBpc1VuaXRsZXNzTnVtYmVyLFxuICBzaG9ydGhhbmRQcm9wZXJ0eUV4cGFuc2lvbnM6IHNob3J0aGFuZFByb3BlcnR5RXhwYW5zaW9uc1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBDU1NQcm9wZXJ0eTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QvbGliL0NTU1Byb3BlcnR5LmpzXG4vLyBtb2R1bGUgaWQgPSA5N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgY2FtZWxpemVTdHlsZU5hbWVcbiAqIEB0eXBlY2hlY2tzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgY2FtZWxpemUgPSByZXF1aXJlKCcuL2NhbWVsaXplJyk7XG5cbnZhciBtc1BhdHRlcm4gPSAvXi1tcy0vO1xuXG4vKipcbiAqIENhbWVsY2FzZXMgYSBoeXBoZW5hdGVkIENTUyBwcm9wZXJ0eSBuYW1lLCBmb3IgZXhhbXBsZTpcbiAqXG4gKiAgID4gY2FtZWxpemVTdHlsZU5hbWUoJ2JhY2tncm91bmQtY29sb3InKVxuICogICA8IFwiYmFja2dyb3VuZENvbG9yXCJcbiAqICAgPiBjYW1lbGl6ZVN0eWxlTmFtZSgnLW1vei10cmFuc2l0aW9uJylcbiAqICAgPCBcIk1velRyYW5zaXRpb25cIlxuICogICA+IGNhbWVsaXplU3R5bGVOYW1lKCctbXMtdHJhbnNpdGlvbicpXG4gKiAgIDwgXCJtc1RyYW5zaXRpb25cIlxuICpcbiAqIEFzIEFuZGkgU21pdGggc3VnZ2VzdHNcbiAqIChodHRwOi8vd3d3LmFuZGlzbWl0aC5jb20vYmxvZy8yMDEyLzAyL21vZGVybml6ci1wcmVmaXhlZC8pLCBhbiBgLW1zYCBwcmVmaXhcbiAqIGlzIGNvbnZlcnRlZCB0byBsb3dlcmNhc2UgYG1zYC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGNhbWVsaXplU3R5bGVOYW1lKHN0cmluZykge1xuICByZXR1cm4gY2FtZWxpemUoc3RyaW5nLnJlcGxhY2UobXNQYXR0ZXJuLCAnbXMtJykpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNhbWVsaXplU3R5bGVOYW1lO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9mYmpzL2xpYi9jYW1lbGl6ZVN0eWxlTmFtZS5qc1xuLy8gbW9kdWxlIGlkID0gOThcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGNhbWVsaXplXG4gKiBAdHlwZWNoZWNrc1xuICovXG5cblwidXNlIHN0cmljdFwiO1xuXG52YXIgX2h5cGhlblBhdHRlcm4gPSAvLSguKS9nO1xuXG4vKipcbiAqIENhbWVsY2FzZXMgYSBoeXBoZW5hdGVkIHN0cmluZywgZm9yIGV4YW1wbGU6XG4gKlxuICogICA+IGNhbWVsaXplKCdiYWNrZ3JvdW5kLWNvbG9yJylcbiAqICAgPCBcImJhY2tncm91bmRDb2xvclwiXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZ1xuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiBjYW1lbGl6ZShzdHJpbmcpIHtcbiAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKF9oeXBoZW5QYXR0ZXJuLCBmdW5jdGlvbiAoXywgY2hhcmFjdGVyKSB7XG4gICAgcmV0dXJuIGNoYXJhY3Rlci50b1VwcGVyQ2FzZSgpO1xuICB9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjYW1lbGl6ZTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vZmJqcy9saWIvY2FtZWxpemUuanNcbi8vIG1vZHVsZSBpZCA9IDk5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBkYW5nZXJvdXNTdHlsZVZhbHVlXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIENTU1Byb3BlcnR5ID0gcmVxdWlyZSgnLi9DU1NQcm9wZXJ0eScpO1xuXG52YXIgaXNVbml0bGVzc051bWJlciA9IENTU1Byb3BlcnR5LmlzVW5pdGxlc3NOdW1iZXI7XG5cbi8qKlxuICogQ29udmVydCBhIHZhbHVlIGludG8gdGhlIHByb3BlciBjc3Mgd3JpdGFibGUgdmFsdWUuIFRoZSBzdHlsZSBuYW1lIGBuYW1lYFxuICogc2hvdWxkIGJlIGxvZ2ljYWwgKG5vIGh5cGhlbnMpLCBhcyBzcGVjaWZpZWRcbiAqIGluIGBDU1NQcm9wZXJ0eS5pc1VuaXRsZXNzTnVtYmVyYC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBDU1MgcHJvcGVydHkgbmFtZSBzdWNoIGFzIGB0b3BNYXJnaW5gLlxuICogQHBhcmFtIHsqfSB2YWx1ZSBDU1MgcHJvcGVydHkgdmFsdWUgc3VjaCBhcyBgMTBweGAuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IE5vcm1hbGl6ZWQgc3R5bGUgdmFsdWUgd2l0aCBkaW1lbnNpb25zIGFwcGxpZWQuXG4gKi9cbmZ1bmN0aW9uIGRhbmdlcm91c1N0eWxlVmFsdWUobmFtZSwgdmFsdWUpIHtcbiAgLy8gTm90ZSB0aGF0IHdlJ3ZlIHJlbW92ZWQgZXNjYXBlVGV4dEZvckJyb3dzZXIoKSBjYWxscyBoZXJlIHNpbmNlIHRoZVxuICAvLyB3aG9sZSBzdHJpbmcgd2lsbCBiZSBlc2NhcGVkIHdoZW4gdGhlIGF0dHJpYnV0ZSBpcyBpbmplY3RlZCBpbnRvXG4gIC8vIHRoZSBtYXJrdXAuIElmIHlvdSBwcm92aWRlIHVuc2FmZSB1c2VyIGRhdGEgaGVyZSB0aGV5IGNhbiBpbmplY3RcbiAgLy8gYXJiaXRyYXJ5IENTUyB3aGljaCBtYXkgYmUgcHJvYmxlbWF0aWMgKEkgY291bGRuJ3QgcmVwcm8gdGhpcyk6XG4gIC8vIGh0dHBzOi8vd3d3Lm93YXNwLm9yZy9pbmRleC5waHAvWFNTX0ZpbHRlcl9FdmFzaW9uX0NoZWF0X1NoZWV0XG4gIC8vIGh0dHA6Ly93d3cudGhlc3Bhbm5lci5jby51ay8yMDA3LzExLzI2L3VsdGltYXRlLXhzcy1jc3MtaW5qZWN0aW9uL1xuICAvLyBUaGlzIGlzIG5vdCBhbiBYU1MgaG9sZSBidXQgaW5zdGVhZCBhIHBvdGVudGlhbCBDU1MgaW5qZWN0aW9uIGlzc3VlXG4gIC8vIHdoaWNoIGhhcyBsZWFkIHRvIGEgZ3JlYXRlciBkaXNjdXNzaW9uIGFib3V0IGhvdyB3ZSdyZSBnb2luZyB0b1xuICAvLyB0cnVzdCBVUkxzIG1vdmluZyBmb3J3YXJkLiBTZWUgIzIxMTU5MDFcblxuICB2YXIgaXNFbXB0eSA9IHZhbHVlID09IG51bGwgfHwgdHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbicgfHwgdmFsdWUgPT09ICcnO1xuICBpZiAoaXNFbXB0eSkge1xuICAgIHJldHVybiAnJztcbiAgfVxuXG4gIHZhciBpc05vbk51bWVyaWMgPSBpc05hTih2YWx1ZSk7XG4gIGlmIChpc05vbk51bWVyaWMgfHwgdmFsdWUgPT09IDAgfHwgaXNVbml0bGVzc051bWJlci5oYXNPd25Qcm9wZXJ0eShuYW1lKSAmJiBpc1VuaXRsZXNzTnVtYmVyW25hbWVdKSB7XG4gICAgcmV0dXJuICcnICsgdmFsdWU7IC8vIGNhc3QgdG8gc3RyaW5nXG4gIH1cblxuICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgIHZhbHVlID0gdmFsdWUudHJpbSgpO1xuICB9XG4gIHJldHVybiB2YWx1ZSArICdweCc7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZGFuZ2Vyb3VzU3R5bGVWYWx1ZTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QvbGliL2Rhbmdlcm91c1N0eWxlVmFsdWUuanNcbi8vIG1vZHVsZSBpZCA9IDEwMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgaHlwaGVuYXRlU3R5bGVOYW1lXG4gKiBAdHlwZWNoZWNrc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGh5cGhlbmF0ZSA9IHJlcXVpcmUoJy4vaHlwaGVuYXRlJyk7XG5cbnZhciBtc1BhdHRlcm4gPSAvXm1zLS87XG5cbi8qKlxuICogSHlwaGVuYXRlcyBhIGNhbWVsY2FzZWQgQ1NTIHByb3BlcnR5IG5hbWUsIGZvciBleGFtcGxlOlxuICpcbiAqICAgPiBoeXBoZW5hdGVTdHlsZU5hbWUoJ2JhY2tncm91bmRDb2xvcicpXG4gKiAgIDwgXCJiYWNrZ3JvdW5kLWNvbG9yXCJcbiAqICAgPiBoeXBoZW5hdGVTdHlsZU5hbWUoJ01velRyYW5zaXRpb24nKVxuICogICA8IFwiLW1vei10cmFuc2l0aW9uXCJcbiAqICAgPiBoeXBoZW5hdGVTdHlsZU5hbWUoJ21zVHJhbnNpdGlvbicpXG4gKiAgIDwgXCItbXMtdHJhbnNpdGlvblwiXG4gKlxuICogQXMgTW9kZXJuaXpyIHN1Z2dlc3RzIChodHRwOi8vbW9kZXJuaXpyLmNvbS9kb2NzLyNwcmVmaXhlZCksIGFuIGBtc2AgcHJlZml4XG4gKiBpcyBjb252ZXJ0ZWQgdG8gYC1tcy1gLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmdcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gaHlwaGVuYXRlU3R5bGVOYW1lKHN0cmluZykge1xuICByZXR1cm4gaHlwaGVuYXRlKHN0cmluZykucmVwbGFjZShtc1BhdHRlcm4sICctbXMtJyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaHlwaGVuYXRlU3R5bGVOYW1lO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9mYmpzL2xpYi9oeXBoZW5hdGVTdHlsZU5hbWUuanNcbi8vIG1vZHVsZSBpZCA9IDEwMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgaHlwaGVuYXRlXG4gKiBAdHlwZWNoZWNrc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIF91cHBlcmNhc2VQYXR0ZXJuID0gLyhbQS1aXSkvZztcblxuLyoqXG4gKiBIeXBoZW5hdGVzIGEgY2FtZWxjYXNlZCBzdHJpbmcsIGZvciBleGFtcGxlOlxuICpcbiAqICAgPiBoeXBoZW5hdGUoJ2JhY2tncm91bmRDb2xvcicpXG4gKiAgIDwgXCJiYWNrZ3JvdW5kLWNvbG9yXCJcbiAqXG4gKiBGb3IgQ1NTIHN0eWxlIG5hbWVzLCB1c2UgYGh5cGhlbmF0ZVN0eWxlTmFtZWAgaW5zdGVhZCB3aGljaCB3b3JrcyBwcm9wZXJseVxuICogd2l0aCBhbGwgdmVuZG9yIHByZWZpeGVzLCBpbmNsdWRpbmcgYG1zYC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGh5cGhlbmF0ZShzdHJpbmcpIHtcbiAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKF91cHBlcmNhc2VQYXR0ZXJuLCAnLSQxJykudG9Mb3dlckNhc2UoKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBoeXBoZW5hdGU7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2ZianMvbGliL2h5cGhlbmF0ZS5qc1xuLy8gbW9kdWxlIGlkID0gMTAyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBtZW1vaXplU3RyaW5nT25seVxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogTWVtb2l6ZXMgdGhlIHJldHVybiB2YWx1ZSBvZiBhIGZ1bmN0aW9uIHRoYXQgYWNjZXB0cyBvbmUgc3RyaW5nIGFyZ3VtZW50LlxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrXG4gKiBAcmV0dXJuIHtmdW5jdGlvbn1cbiAqL1xuZnVuY3Rpb24gbWVtb2l6ZVN0cmluZ09ubHkoY2FsbGJhY2spIHtcbiAgdmFyIGNhY2hlID0ge307XG4gIHJldHVybiBmdW5jdGlvbiAoc3RyaW5nKSB7XG4gICAgaWYgKCFjYWNoZS5oYXNPd25Qcm9wZXJ0eShzdHJpbmcpKSB7XG4gICAgICBjYWNoZVtzdHJpbmddID0gY2FsbGJhY2suY2FsbCh0aGlzLCBzdHJpbmcpO1xuICAgIH1cbiAgICByZXR1cm4gY2FjaGVbc3RyaW5nXTtcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBtZW1vaXplU3RyaW5nT25seTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vZmJqcy9saWIvbWVtb2l6ZVN0cmluZ09ubHkuanNcbi8vIG1vZHVsZSBpZCA9IDEwM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RET01CdXR0b25cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBtb3VzZUxpc3RlbmVyTmFtZXMgPSB7XG4gIG9uQ2xpY2s6IHRydWUsXG4gIG9uRG91YmxlQ2xpY2s6IHRydWUsXG4gIG9uTW91c2VEb3duOiB0cnVlLFxuICBvbk1vdXNlTW92ZTogdHJ1ZSxcbiAgb25Nb3VzZVVwOiB0cnVlLFxuXG4gIG9uQ2xpY2tDYXB0dXJlOiB0cnVlLFxuICBvbkRvdWJsZUNsaWNrQ2FwdHVyZTogdHJ1ZSxcbiAgb25Nb3VzZURvd25DYXB0dXJlOiB0cnVlLFxuICBvbk1vdXNlTW92ZUNhcHR1cmU6IHRydWUsXG4gIG9uTW91c2VVcENhcHR1cmU6IHRydWVcbn07XG5cbi8qKlxuICogSW1wbGVtZW50cyBhIDxidXR0b24+IG5hdGl2ZSBjb21wb25lbnQgdGhhdCBkb2VzIG5vdCByZWNlaXZlIG1vdXNlIGV2ZW50c1xuICogd2hlbiBgZGlzYWJsZWRgIGlzIHNldC5cbiAqL1xudmFyIFJlYWN0RE9NQnV0dG9uID0ge1xuICBnZXROYXRpdmVQcm9wczogZnVuY3Rpb24gKGluc3QsIHByb3BzLCBjb250ZXh0KSB7XG4gICAgaWYgKCFwcm9wcy5kaXNhYmxlZCkge1xuICAgICAgcmV0dXJuIHByb3BzO1xuICAgIH1cblxuICAgIC8vIENvcHkgdGhlIHByb3BzLCBleGNlcHQgdGhlIG1vdXNlIGxpc3RlbmVyc1xuICAgIHZhciBuYXRpdmVQcm9wcyA9IHt9O1xuICAgIGZvciAodmFyIGtleSBpbiBwcm9wcykge1xuICAgICAgaWYgKHByb3BzLmhhc093blByb3BlcnR5KGtleSkgJiYgIW1vdXNlTGlzdGVuZXJOYW1lc1trZXldKSB7XG4gICAgICAgIG5hdGl2ZVByb3BzW2tleV0gPSBwcm9wc1trZXldO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBuYXRpdmVQcm9wcztcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdERPTUJ1dHRvbjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QvbGliL1JlYWN0RE9NQnV0dG9uLmpzXG4vLyBtb2R1bGUgaWQgPSAxMDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RE9NSW5wdXRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdERPTUlET3BlcmF0aW9ucyA9IHJlcXVpcmUoJy4vUmVhY3RET01JRE9wZXJhdGlvbnMnKTtcbnZhciBMaW5rZWRWYWx1ZVV0aWxzID0gcmVxdWlyZSgnLi9MaW5rZWRWYWx1ZVV0aWxzJyk7XG52YXIgUmVhY3RNb3VudCA9IHJlcXVpcmUoJy4vUmVhY3RNb3VudCcpO1xudmFyIFJlYWN0VXBkYXRlcyA9IHJlcXVpcmUoJy4vUmVhY3RVcGRhdGVzJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcblxudmFyIGluc3RhbmNlc0J5UmVhY3RJRCA9IHt9O1xuXG5mdW5jdGlvbiBmb3JjZVVwZGF0ZUlmTW91bnRlZCgpIHtcbiAgaWYgKHRoaXMuX3Jvb3ROb2RlSUQpIHtcbiAgICAvLyBET00gY29tcG9uZW50IGlzIHN0aWxsIG1vdW50ZWQ7IHVwZGF0ZVxuICAgIFJlYWN0RE9NSW5wdXQudXBkYXRlV3JhcHBlcih0aGlzKTtcbiAgfVxufVxuXG4vKipcbiAqIEltcGxlbWVudHMgYW4gPGlucHV0PiBuYXRpdmUgY29tcG9uZW50IHRoYXQgYWxsb3dzIHNldHRpbmcgdGhlc2Ugb3B0aW9uYWxcbiAqIHByb3BzOiBgY2hlY2tlZGAsIGB2YWx1ZWAsIGBkZWZhdWx0Q2hlY2tlZGAsIGFuZCBgZGVmYXVsdFZhbHVlYC5cbiAqXG4gKiBJZiBgY2hlY2tlZGAgb3IgYHZhbHVlYCBhcmUgbm90IHN1cHBsaWVkIChvciBudWxsL3VuZGVmaW5lZCksIHVzZXIgYWN0aW9uc1xuICogdGhhdCBhZmZlY3QgdGhlIGNoZWNrZWQgc3RhdGUgb3IgdmFsdWUgd2lsbCB0cmlnZ2VyIHVwZGF0ZXMgdG8gdGhlIGVsZW1lbnQuXG4gKlxuICogSWYgdGhleSBhcmUgc3VwcGxpZWQgKGFuZCBub3QgbnVsbC91bmRlZmluZWQpLCB0aGUgcmVuZGVyZWQgZWxlbWVudCB3aWxsIG5vdFxuICogdHJpZ2dlciB1cGRhdGVzIHRvIHRoZSBlbGVtZW50LiBJbnN0ZWFkLCB0aGUgcHJvcHMgbXVzdCBjaGFuZ2UgaW4gb3JkZXIgZm9yXG4gKiB0aGUgcmVuZGVyZWQgZWxlbWVudCB0byBiZSB1cGRhdGVkLlxuICpcbiAqIFRoZSByZW5kZXJlZCBlbGVtZW50IHdpbGwgYmUgaW5pdGlhbGl6ZWQgYXMgdW5jaGVja2VkIChvciBgZGVmYXVsdENoZWNrZWRgKVxuICogd2l0aCBhbiBlbXB0eSB2YWx1ZSAob3IgYGRlZmF1bHRWYWx1ZWApLlxuICpcbiAqIEBzZWUgaHR0cDovL3d3dy53My5vcmcvVFIvMjAxMi9XRC1odG1sNS0yMDEyMTAyNS90aGUtaW5wdXQtZWxlbWVudC5odG1sXG4gKi9cbnZhciBSZWFjdERPTUlucHV0ID0ge1xuICBnZXROYXRpdmVQcm9wczogZnVuY3Rpb24gKGluc3QsIHByb3BzLCBjb250ZXh0KSB7XG4gICAgdmFyIHZhbHVlID0gTGlua2VkVmFsdWVVdGlscy5nZXRWYWx1ZShwcm9wcyk7XG4gICAgdmFyIGNoZWNrZWQgPSBMaW5rZWRWYWx1ZVV0aWxzLmdldENoZWNrZWQocHJvcHMpO1xuXG4gICAgdmFyIG5hdGl2ZVByb3BzID0gYXNzaWduKHt9LCBwcm9wcywge1xuICAgICAgZGVmYXVsdENoZWNrZWQ6IHVuZGVmaW5lZCxcbiAgICAgIGRlZmF1bHRWYWx1ZTogdW5kZWZpbmVkLFxuICAgICAgdmFsdWU6IHZhbHVlICE9IG51bGwgPyB2YWx1ZSA6IGluc3QuX3dyYXBwZXJTdGF0ZS5pbml0aWFsVmFsdWUsXG4gICAgICBjaGVja2VkOiBjaGVja2VkICE9IG51bGwgPyBjaGVja2VkIDogaW5zdC5fd3JhcHBlclN0YXRlLmluaXRpYWxDaGVja2VkLFxuICAgICAgb25DaGFuZ2U6IGluc3QuX3dyYXBwZXJTdGF0ZS5vbkNoYW5nZVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIG5hdGl2ZVByb3BzO1xuICB9LFxuXG4gIG1vdW50V3JhcHBlcjogZnVuY3Rpb24gKGluc3QsIHByb3BzKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIExpbmtlZFZhbHVlVXRpbHMuY2hlY2tQcm9wVHlwZXMoJ2lucHV0JywgcHJvcHMsIGluc3QuX2N1cnJlbnRFbGVtZW50Ll9vd25lcik7XG4gICAgfVxuXG4gICAgdmFyIGRlZmF1bHRWYWx1ZSA9IHByb3BzLmRlZmF1bHRWYWx1ZTtcbiAgICBpbnN0Ll93cmFwcGVyU3RhdGUgPSB7XG4gICAgICBpbml0aWFsQ2hlY2tlZDogcHJvcHMuZGVmYXVsdENoZWNrZWQgfHwgZmFsc2UsXG4gICAgICBpbml0aWFsVmFsdWU6IGRlZmF1bHRWYWx1ZSAhPSBudWxsID8gZGVmYXVsdFZhbHVlIDogbnVsbCxcbiAgICAgIG9uQ2hhbmdlOiBfaGFuZGxlQ2hhbmdlLmJpbmQoaW5zdClcbiAgICB9O1xuICB9LFxuXG4gIG1vdW50UmVhZHlXcmFwcGVyOiBmdW5jdGlvbiAoaW5zdCkge1xuICAgIC8vIENhbid0IGJlIGluIG1vdW50V3JhcHBlciBvciBlbHNlIHNlcnZlciByZW5kZXJpbmcgbGVha3MuXG4gICAgaW5zdGFuY2VzQnlSZWFjdElEW2luc3QuX3Jvb3ROb2RlSURdID0gaW5zdDtcbiAgfSxcblxuICB1bm1vdW50V3JhcHBlcjogZnVuY3Rpb24gKGluc3QpIHtcbiAgICBkZWxldGUgaW5zdGFuY2VzQnlSZWFjdElEW2luc3QuX3Jvb3ROb2RlSURdO1xuICB9LFxuXG4gIHVwZGF0ZVdyYXBwZXI6IGZ1bmN0aW9uIChpbnN0KSB7XG4gICAgdmFyIHByb3BzID0gaW5zdC5fY3VycmVudEVsZW1lbnQucHJvcHM7XG5cbiAgICAvLyBUT0RPOiBTaG91bGRuJ3QgdGhpcyBiZSBnZXRDaGVja2VkKHByb3BzKT9cbiAgICB2YXIgY2hlY2tlZCA9IHByb3BzLmNoZWNrZWQ7XG4gICAgaWYgKGNoZWNrZWQgIT0gbnVsbCkge1xuICAgICAgUmVhY3RET01JRE9wZXJhdGlvbnMudXBkYXRlUHJvcGVydHlCeUlEKGluc3QuX3Jvb3ROb2RlSUQsICdjaGVja2VkJywgY2hlY2tlZCB8fCBmYWxzZSk7XG4gICAgfVxuXG4gICAgdmFyIHZhbHVlID0gTGlua2VkVmFsdWVVdGlscy5nZXRWYWx1ZShwcm9wcyk7XG4gICAgaWYgKHZhbHVlICE9IG51bGwpIHtcbiAgICAgIC8vIENhc3QgYHZhbHVlYCB0byBhIHN0cmluZyB0byBlbnN1cmUgdGhlIHZhbHVlIGlzIHNldCBjb3JyZWN0bHkuIFdoaWxlXG4gICAgICAvLyBicm93c2VycyB0eXBpY2FsbHkgZG8gdGhpcyBhcyBuZWNlc3NhcnksIGpzZG9tIGRvZXNuJ3QuXG4gICAgICBSZWFjdERPTUlET3BlcmF0aW9ucy51cGRhdGVQcm9wZXJ0eUJ5SUQoaW5zdC5fcm9vdE5vZGVJRCwgJ3ZhbHVlJywgJycgKyB2YWx1ZSk7XG4gICAgfVxuICB9XG59O1xuXG5mdW5jdGlvbiBfaGFuZGxlQ2hhbmdlKGV2ZW50KSB7XG4gIHZhciBwcm9wcyA9IHRoaXMuX2N1cnJlbnRFbGVtZW50LnByb3BzO1xuXG4gIHZhciByZXR1cm5WYWx1ZSA9IExpbmtlZFZhbHVlVXRpbHMuZXhlY3V0ZU9uQ2hhbmdlKHByb3BzLCBldmVudCk7XG5cbiAgLy8gSGVyZSB3ZSB1c2UgYXNhcCB0byB3YWl0IHVudGlsIGFsbCB1cGRhdGVzIGhhdmUgcHJvcGFnYXRlZCwgd2hpY2hcbiAgLy8gaXMgaW1wb3J0YW50IHdoZW4gdXNpbmcgY29udHJvbGxlZCBjb21wb25lbnRzIHdpdGhpbiBsYXllcnM6XG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC9pc3N1ZXMvMTY5OFxuICBSZWFjdFVwZGF0ZXMuYXNhcChmb3JjZVVwZGF0ZUlmTW91bnRlZCwgdGhpcyk7XG5cbiAgdmFyIG5hbWUgPSBwcm9wcy5uYW1lO1xuICBpZiAocHJvcHMudHlwZSA9PT0gJ3JhZGlvJyAmJiBuYW1lICE9IG51bGwpIHtcbiAgICB2YXIgcm9vdE5vZGUgPSBSZWFjdE1vdW50LmdldE5vZGUodGhpcy5fcm9vdE5vZGVJRCk7XG4gICAgdmFyIHF1ZXJ5Um9vdCA9IHJvb3ROb2RlO1xuXG4gICAgd2hpbGUgKHF1ZXJ5Um9vdC5wYXJlbnROb2RlKSB7XG4gICAgICBxdWVyeVJvb3QgPSBxdWVyeVJvb3QucGFyZW50Tm9kZTtcbiAgICB9XG5cbiAgICAvLyBJZiBgcm9vdE5vZGUuZm9ybWAgd2FzIG5vbi1udWxsLCB0aGVuIHdlIGNvdWxkIHRyeSBgZm9ybS5lbGVtZW50c2AsXG4gICAgLy8gYnV0IHRoYXQgc29tZXRpbWVzIGJlaGF2ZXMgc3RyYW5nZWx5IGluIElFOC4gV2UgY291bGQgYWxzbyB0cnkgdXNpbmdcbiAgICAvLyBgZm9ybS5nZXRFbGVtZW50c0J5TmFtZWAsIGJ1dCB0aGF0IHdpbGwgb25seSByZXR1cm4gZGlyZWN0IGNoaWxkcmVuXG4gICAgLy8gYW5kIHdvbid0IGluY2x1ZGUgaW5wdXRzIHRoYXQgdXNlIHRoZSBIVE1MNSBgZm9ybT1gIGF0dHJpYnV0ZS4gU2luY2VcbiAgICAvLyB0aGUgaW5wdXQgbWlnaHQgbm90IGV2ZW4gYmUgaW4gYSBmb3JtLCBsZXQncyBqdXN0IHVzZSB0aGUgZ2xvYmFsXG4gICAgLy8gYHF1ZXJ5U2VsZWN0b3JBbGxgIHRvIGVuc3VyZSB3ZSBkb24ndCBtaXNzIGFueXRoaW5nLlxuICAgIHZhciBncm91cCA9IHF1ZXJ5Um9vdC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFtuYW1lPScgKyBKU09OLnN0cmluZ2lmeSgnJyArIG5hbWUpICsgJ11bdHlwZT1cInJhZGlvXCJdJyk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGdyb3VwLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgb3RoZXJOb2RlID0gZ3JvdXBbaV07XG4gICAgICBpZiAob3RoZXJOb2RlID09PSByb290Tm9kZSB8fCBvdGhlck5vZGUuZm9ybSAhPT0gcm9vdE5vZGUuZm9ybSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIC8vIFRoaXMgd2lsbCB0aHJvdyBpZiByYWRpbyBidXR0b25zIHJlbmRlcmVkIGJ5IGRpZmZlcmVudCBjb3BpZXMgb2YgUmVhY3RcbiAgICAgIC8vIGFuZCB0aGUgc2FtZSBuYW1lIGFyZSByZW5kZXJlZCBpbnRvIHRoZSBzYW1lIGZvcm0gKHNhbWUgYXMgIzE5MzkpLlxuICAgICAgLy8gVGhhdCdzIHByb2JhYmx5IG9rYXk7IHdlIGRvbid0IHN1cHBvcnQgaXQganVzdCBhcyB3ZSBkb24ndCBzdXBwb3J0XG4gICAgICAvLyBtaXhpbmcgUmVhY3Qgd2l0aCBub24tUmVhY3QuXG4gICAgICB2YXIgb3RoZXJJRCA9IFJlYWN0TW91bnQuZ2V0SUQob3RoZXJOb2RlKTtcbiAgICAgICFvdGhlcklEID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0RE9NSW5wdXQ6IE1peGluZyBSZWFjdCBhbmQgbm9uLVJlYWN0IHJhZGlvIGlucHV0cyB3aXRoIHRoZSAnICsgJ3NhbWUgYG5hbWVgIGlzIG5vdCBzdXBwb3J0ZWQuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgICAgdmFyIG90aGVySW5zdGFuY2UgPSBpbnN0YW5jZXNCeVJlYWN0SURbb3RoZXJJRF07XG4gICAgICAhb3RoZXJJbnN0YW5jZSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdERPTUlucHV0OiBVbmtub3duIHJhZGlvIGJ1dHRvbiBJRCAlcy4nLCBvdGhlcklEKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgICAvLyBJZiB0aGlzIGlzIGEgY29udHJvbGxlZCByYWRpbyBidXR0b24gZ3JvdXAsIGZvcmNpbmcgdGhlIGlucHV0IHRoYXRcbiAgICAgIC8vIHdhcyBwcmV2aW91c2x5IGNoZWNrZWQgdG8gdXBkYXRlIHdpbGwgY2F1c2UgaXQgdG8gYmUgY29tZSByZS1jaGVja2VkXG4gICAgICAvLyBhcyBhcHByb3ByaWF0ZS5cbiAgICAgIFJlYWN0VXBkYXRlcy5hc2FwKGZvcmNlVXBkYXRlSWZNb3VudGVkLCBvdGhlckluc3RhbmNlKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmV0dXJuVmFsdWU7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RET01JbnB1dDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QvbGliL1JlYWN0RE9NSW5wdXQuanNcbi8vIG1vZHVsZSBpZCA9IDEwNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgTGlua2VkVmFsdWVVdGlsc1xuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdFByb3BUeXBlcyA9IHJlcXVpcmUoJy4vUmVhY3RQcm9wVHlwZXMnKTtcbnZhciBSZWFjdFByb3BUeXBlTG9jYXRpb25zID0gcmVxdWlyZSgnLi9SZWFjdFByb3BUeXBlTG9jYXRpb25zJyk7XG5cbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG52YXIgaGFzUmVhZE9ubHlWYWx1ZSA9IHtcbiAgJ2J1dHRvbic6IHRydWUsXG4gICdjaGVja2JveCc6IHRydWUsXG4gICdpbWFnZSc6IHRydWUsXG4gICdoaWRkZW4nOiB0cnVlLFxuICAncmFkaW8nOiB0cnVlLFxuICAncmVzZXQnOiB0cnVlLFxuICAnc3VibWl0JzogdHJ1ZVxufTtcblxuZnVuY3Rpb24gX2Fzc2VydFNpbmdsZUxpbmsoaW5wdXRQcm9wcykge1xuICAhKGlucHV0UHJvcHMuY2hlY2tlZExpbmsgPT0gbnVsbCB8fCBpbnB1dFByb3BzLnZhbHVlTGluayA9PSBudWxsKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdDYW5ub3QgcHJvdmlkZSBhIGNoZWNrZWRMaW5rIGFuZCBhIHZhbHVlTGluay4gSWYgeW91IHdhbnQgdG8gdXNlICcgKyAnY2hlY2tlZExpbmssIHlvdSBwcm9iYWJseSBkb25cXCd0IHdhbnQgdG8gdXNlIHZhbHVlTGluayBhbmQgdmljZSB2ZXJzYS4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBfYXNzZXJ0VmFsdWVMaW5rKGlucHV0UHJvcHMpIHtcbiAgX2Fzc2VydFNpbmdsZUxpbmsoaW5wdXRQcm9wcyk7XG4gICEoaW5wdXRQcm9wcy52YWx1ZSA9PSBudWxsICYmIGlucHV0UHJvcHMub25DaGFuZ2UgPT0gbnVsbCkgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnQ2Fubm90IHByb3ZpZGUgYSB2YWx1ZUxpbmsgYW5kIGEgdmFsdWUgb3Igb25DaGFuZ2UgZXZlbnQuIElmIHlvdSB3YW50ICcgKyAndG8gdXNlIHZhbHVlIG9yIG9uQ2hhbmdlLCB5b3UgcHJvYmFibHkgZG9uXFwndCB3YW50IHRvIHVzZSB2YWx1ZUxpbmsuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBfYXNzZXJ0Q2hlY2tlZExpbmsoaW5wdXRQcm9wcykge1xuICBfYXNzZXJ0U2luZ2xlTGluayhpbnB1dFByb3BzKTtcbiAgIShpbnB1dFByb3BzLmNoZWNrZWQgPT0gbnVsbCAmJiBpbnB1dFByb3BzLm9uQ2hhbmdlID09IG51bGwpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0Nhbm5vdCBwcm92aWRlIGEgY2hlY2tlZExpbmsgYW5kIGEgY2hlY2tlZCBwcm9wZXJ0eSBvciBvbkNoYW5nZSBldmVudC4gJyArICdJZiB5b3Ugd2FudCB0byB1c2UgY2hlY2tlZCBvciBvbkNoYW5nZSwgeW91IHByb2JhYmx5IGRvblxcJ3Qgd2FudCB0byAnICsgJ3VzZSBjaGVja2VkTGluaycpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbn1cblxudmFyIHByb3BUeXBlcyA9IHtcbiAgdmFsdWU6IGZ1bmN0aW9uIChwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUpIHtcbiAgICBpZiAoIXByb3BzW3Byb3BOYW1lXSB8fCBoYXNSZWFkT25seVZhbHVlW3Byb3BzLnR5cGVdIHx8IHByb3BzLm9uQ2hhbmdlIHx8IHByb3BzLnJlYWRPbmx5IHx8IHByb3BzLmRpc2FibGVkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBFcnJvcignWW91IHByb3ZpZGVkIGEgYHZhbHVlYCBwcm9wIHRvIGEgZm9ybSBmaWVsZCB3aXRob3V0IGFuICcgKyAnYG9uQ2hhbmdlYCBoYW5kbGVyLiBUaGlzIHdpbGwgcmVuZGVyIGEgcmVhZC1vbmx5IGZpZWxkLiBJZiAnICsgJ3RoZSBmaWVsZCBzaG91bGQgYmUgbXV0YWJsZSB1c2UgYGRlZmF1bHRWYWx1ZWAuIE90aGVyd2lzZSwgJyArICdzZXQgZWl0aGVyIGBvbkNoYW5nZWAgb3IgYHJlYWRPbmx5YC4nKTtcbiAgfSxcbiAgY2hlY2tlZDogZnVuY3Rpb24gKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSkge1xuICAgIGlmICghcHJvcHNbcHJvcE5hbWVdIHx8IHByb3BzLm9uQ2hhbmdlIHx8IHByb3BzLnJlYWRPbmx5IHx8IHByb3BzLmRpc2FibGVkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBFcnJvcignWW91IHByb3ZpZGVkIGEgYGNoZWNrZWRgIHByb3AgdG8gYSBmb3JtIGZpZWxkIHdpdGhvdXQgYW4gJyArICdgb25DaGFuZ2VgIGhhbmRsZXIuIFRoaXMgd2lsbCByZW5kZXIgYSByZWFkLW9ubHkgZmllbGQuIElmICcgKyAndGhlIGZpZWxkIHNob3VsZCBiZSBtdXRhYmxlIHVzZSBgZGVmYXVsdENoZWNrZWRgLiBPdGhlcndpc2UsICcgKyAnc2V0IGVpdGhlciBgb25DaGFuZ2VgIG9yIGByZWFkT25seWAuJyk7XG4gIH0sXG4gIG9uQ2hhbmdlOiBSZWFjdFByb3BUeXBlcy5mdW5jXG59O1xuXG52YXIgbG9nZ2VkVHlwZUZhaWx1cmVzID0ge307XG5mdW5jdGlvbiBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0ob3duZXIpIHtcbiAgaWYgKG93bmVyKSB7XG4gICAgdmFyIG5hbWUgPSBvd25lci5nZXROYW1lKCk7XG4gICAgaWYgKG5hbWUpIHtcbiAgICAgIHJldHVybiAnIENoZWNrIHRoZSByZW5kZXIgbWV0aG9kIG9mIGAnICsgbmFtZSArICdgLic7XG4gICAgfVxuICB9XG4gIHJldHVybiAnJztcbn1cblxuLyoqXG4gKiBQcm92aWRlIGEgbGlua2VkIGB2YWx1ZWAgYXR0cmlidXRlIGZvciBjb250cm9sbGVkIGZvcm1zLiBZb3Ugc2hvdWxkIG5vdCB1c2VcbiAqIHRoaXMgb3V0c2lkZSBvZiB0aGUgUmVhY3RET00gY29udHJvbGxlZCBmb3JtIGNvbXBvbmVudHMuXG4gKi9cbnZhciBMaW5rZWRWYWx1ZVV0aWxzID0ge1xuICBjaGVja1Byb3BUeXBlczogZnVuY3Rpb24gKHRhZ05hbWUsIHByb3BzLCBvd25lcikge1xuICAgIGZvciAodmFyIHByb3BOYW1lIGluIHByb3BUeXBlcykge1xuICAgICAgaWYgKHByb3BUeXBlcy5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkpIHtcbiAgICAgICAgdmFyIGVycm9yID0gcHJvcFR5cGVzW3Byb3BOYW1lXShwcm9wcywgcHJvcE5hbWUsIHRhZ05hbWUsIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnMucHJvcCwgbnVsbCwgJ1NFQ1JFVF9ET19OT1RfUEFTU19USElTX09SX1lPVV9XSUxMX0JFX0ZJUkVEJyk7XG4gICAgICB9XG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiAhKGVycm9yLm1lc3NhZ2UgaW4gbG9nZ2VkVHlwZUZhaWx1cmVzKSkge1xuICAgICAgICAvLyBPbmx5IG1vbml0b3IgdGhpcyBmYWlsdXJlIG9uY2UgYmVjYXVzZSB0aGVyZSB0ZW5kcyB0byBiZSBhIGxvdCBvZiB0aGVcbiAgICAgICAgLy8gc2FtZSBlcnJvci5cbiAgICAgICAgbG9nZ2VkVHlwZUZhaWx1cmVzW2Vycm9yLm1lc3NhZ2VdID0gdHJ1ZTtcblxuICAgICAgICB2YXIgYWRkZW5kdW0gPSBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0ob3duZXIpO1xuICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ0ZhaWxlZCBmb3JtIHByb3BUeXBlOiAlcyVzJywgZXJyb3IubWVzc2FnZSwgYWRkZW5kdW0pIDogdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogQHBhcmFtIHtvYmplY3R9IGlucHV0UHJvcHMgUHJvcHMgZm9yIGZvcm0gY29tcG9uZW50XG4gICAqIEByZXR1cm4geyp9IGN1cnJlbnQgdmFsdWUgb2YgdGhlIGlucHV0IGVpdGhlciBmcm9tIHZhbHVlIHByb3Agb3IgbGluay5cbiAgICovXG4gIGdldFZhbHVlOiBmdW5jdGlvbiAoaW5wdXRQcm9wcykge1xuICAgIGlmIChpbnB1dFByb3BzLnZhbHVlTGluaykge1xuICAgICAgX2Fzc2VydFZhbHVlTGluayhpbnB1dFByb3BzKTtcbiAgICAgIHJldHVybiBpbnB1dFByb3BzLnZhbHVlTGluay52YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGlucHV0UHJvcHMudmFsdWU7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBpbnB1dFByb3BzIFByb3BzIGZvciBmb3JtIGNvbXBvbmVudFxuICAgKiBAcmV0dXJuIHsqfSBjdXJyZW50IGNoZWNrZWQgc3RhdHVzIG9mIHRoZSBpbnB1dCBlaXRoZXIgZnJvbSBjaGVja2VkIHByb3BcbiAgICogICAgICAgICAgICAgb3IgbGluay5cbiAgICovXG4gIGdldENoZWNrZWQ6IGZ1bmN0aW9uIChpbnB1dFByb3BzKSB7XG4gICAgaWYgKGlucHV0UHJvcHMuY2hlY2tlZExpbmspIHtcbiAgICAgIF9hc3NlcnRDaGVja2VkTGluayhpbnB1dFByb3BzKTtcbiAgICAgIHJldHVybiBpbnB1dFByb3BzLmNoZWNrZWRMaW5rLnZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gaW5wdXRQcm9wcy5jaGVja2VkO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge29iamVjdH0gaW5wdXRQcm9wcyBQcm9wcyBmb3IgZm9ybSBjb21wb25lbnRcbiAgICogQHBhcmFtIHtTeW50aGV0aWNFdmVudH0gZXZlbnQgY2hhbmdlIGV2ZW50IHRvIGhhbmRsZVxuICAgKi9cbiAgZXhlY3V0ZU9uQ2hhbmdlOiBmdW5jdGlvbiAoaW5wdXRQcm9wcywgZXZlbnQpIHtcbiAgICBpZiAoaW5wdXRQcm9wcy52YWx1ZUxpbmspIHtcbiAgICAgIF9hc3NlcnRWYWx1ZUxpbmsoaW5wdXRQcm9wcyk7XG4gICAgICByZXR1cm4gaW5wdXRQcm9wcy52YWx1ZUxpbmsucmVxdWVzdENoYW5nZShldmVudC50YXJnZXQudmFsdWUpO1xuICAgIH0gZWxzZSBpZiAoaW5wdXRQcm9wcy5jaGVja2VkTGluaykge1xuICAgICAgX2Fzc2VydENoZWNrZWRMaW5rKGlucHV0UHJvcHMpO1xuICAgICAgcmV0dXJuIGlucHV0UHJvcHMuY2hlY2tlZExpbmsucmVxdWVzdENoYW5nZShldmVudC50YXJnZXQuY2hlY2tlZCk7XG4gICAgfSBlbHNlIGlmIChpbnB1dFByb3BzLm9uQ2hhbmdlKSB7XG4gICAgICByZXR1cm4gaW5wdXRQcm9wcy5vbkNoYW5nZS5jYWxsKHVuZGVmaW5lZCwgZXZlbnQpO1xuICAgIH1cbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBMaW5rZWRWYWx1ZVV0aWxzO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvTGlua2VkVmFsdWVVdGlscy5qc1xuLy8gbW9kdWxlIGlkID0gMTA2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdFByb3BUeXBlc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0RWxlbWVudCA9IHJlcXVpcmUoJy4vUmVhY3RFbGVtZW50Jyk7XG52YXIgUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXMgPSByZXF1aXJlKCcuL1JlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzJyk7XG5cbnZhciBlbXB0eUZ1bmN0aW9uID0gcmVxdWlyZSgnZmJqcy9saWIvZW1wdHlGdW5jdGlvbicpO1xudmFyIGdldEl0ZXJhdG9yRm4gPSByZXF1aXJlKCcuL2dldEl0ZXJhdG9yRm4nKTtcblxuLyoqXG4gKiBDb2xsZWN0aW9uIG9mIG1ldGhvZHMgdGhhdCBhbGxvdyBkZWNsYXJhdGlvbiBhbmQgdmFsaWRhdGlvbiBvZiBwcm9wcyB0aGF0IGFyZVxuICogc3VwcGxpZWQgdG8gUmVhY3QgY29tcG9uZW50cy4gRXhhbXBsZSB1c2FnZTpcbiAqXG4gKiAgIHZhciBQcm9wcyA9IHJlcXVpcmUoJ1JlYWN0UHJvcFR5cGVzJyk7XG4gKiAgIHZhciBNeUFydGljbGUgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4gKiAgICAgcHJvcFR5cGVzOiB7XG4gKiAgICAgICAvLyBBbiBvcHRpb25hbCBzdHJpbmcgcHJvcCBuYW1lZCBcImRlc2NyaXB0aW9uXCIuXG4gKiAgICAgICBkZXNjcmlwdGlvbjogUHJvcHMuc3RyaW5nLFxuICpcbiAqICAgICAgIC8vIEEgcmVxdWlyZWQgZW51bSBwcm9wIG5hbWVkIFwiY2F0ZWdvcnlcIi5cbiAqICAgICAgIGNhdGVnb3J5OiBQcm9wcy5vbmVPZihbJ05ld3MnLCdQaG90b3MnXSkuaXNSZXF1aXJlZCxcbiAqXG4gKiAgICAgICAvLyBBIHByb3AgbmFtZWQgXCJkaWFsb2dcIiB0aGF0IHJlcXVpcmVzIGFuIGluc3RhbmNlIG9mIERpYWxvZy5cbiAqICAgICAgIGRpYWxvZzogUHJvcHMuaW5zdGFuY2VPZihEaWFsb2cpLmlzUmVxdWlyZWRcbiAqICAgICB9LFxuICogICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7IC4uLiB9XG4gKiAgIH0pO1xuICpcbiAqIEEgbW9yZSBmb3JtYWwgc3BlY2lmaWNhdGlvbiBvZiBob3cgdGhlc2UgbWV0aG9kcyBhcmUgdXNlZDpcbiAqXG4gKiAgIHR5cGUgOj0gYXJyYXl8Ym9vbHxmdW5jfG9iamVjdHxudW1iZXJ8c3RyaW5nfG9uZU9mKFsuLi5dKXxpbnN0YW5jZU9mKC4uLilcbiAqICAgZGVjbCA6PSBSZWFjdFByb3BUeXBlcy57dHlwZX0oLmlzUmVxdWlyZWQpP1xuICpcbiAqIEVhY2ggYW5kIGV2ZXJ5IGRlY2xhcmF0aW9uIHByb2R1Y2VzIGEgZnVuY3Rpb24gd2l0aCB0aGUgc2FtZSBzaWduYXR1cmUuIFRoaXNcbiAqIGFsbG93cyB0aGUgY3JlYXRpb24gb2YgY3VzdG9tIHZhbGlkYXRpb24gZnVuY3Rpb25zLiBGb3IgZXhhbXBsZTpcbiAqXG4gKiAgdmFyIE15TGluayA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAqICAgIHByb3BUeXBlczoge1xuICogICAgICAvLyBBbiBvcHRpb25hbCBzdHJpbmcgb3IgVVJJIHByb3AgbmFtZWQgXCJocmVmXCIuXG4gKiAgICAgIGhyZWY6IGZ1bmN0aW9uKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSkge1xuICogICAgICAgIHZhciBwcm9wVmFsdWUgPSBwcm9wc1twcm9wTmFtZV07XG4gKiAgICAgICAgaWYgKHByb3BWYWx1ZSAhPSBudWxsICYmIHR5cGVvZiBwcm9wVmFsdWUgIT09ICdzdHJpbmcnICYmXG4gKiAgICAgICAgICAgICEocHJvcFZhbHVlIGluc3RhbmNlb2YgVVJJKSkge1xuICogICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcihcbiAqICAgICAgICAgICAgJ0V4cGVjdGVkIGEgc3RyaW5nIG9yIGFuIFVSSSBmb3IgJyArIHByb3BOYW1lICsgJyBpbiAnICtcbiAqICAgICAgICAgICAgY29tcG9uZW50TmFtZVxuICogICAgICAgICAgKTtcbiAqICAgICAgICB9XG4gKiAgICAgIH1cbiAqICAgIH0sXG4gKiAgICByZW5kZXI6IGZ1bmN0aW9uKCkgey4uLn1cbiAqICB9KTtcbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xuXG52YXIgQU5PTllNT1VTID0gJzw8YW5vbnltb3VzPj4nO1xuXG52YXIgUmVhY3RQcm9wVHlwZXMgPSB7XG4gIGFycmF5OiBjcmVhdGVQcmltaXRpdmVUeXBlQ2hlY2tlcignYXJyYXknKSxcbiAgYm9vbDogY3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXIoJ2Jvb2xlYW4nKSxcbiAgZnVuYzogY3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXIoJ2Z1bmN0aW9uJyksXG4gIG51bWJlcjogY3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXIoJ251bWJlcicpLFxuICBvYmplY3Q6IGNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyKCdvYmplY3QnKSxcbiAgc3RyaW5nOiBjcmVhdGVQcmltaXRpdmVUeXBlQ2hlY2tlcignc3RyaW5nJyksXG5cbiAgYW55OiBjcmVhdGVBbnlUeXBlQ2hlY2tlcigpLFxuICBhcnJheU9mOiBjcmVhdGVBcnJheU9mVHlwZUNoZWNrZXIsXG4gIGVsZW1lbnQ6IGNyZWF0ZUVsZW1lbnRUeXBlQ2hlY2tlcigpLFxuICBpbnN0YW5jZU9mOiBjcmVhdGVJbnN0YW5jZVR5cGVDaGVja2VyLFxuICBub2RlOiBjcmVhdGVOb2RlQ2hlY2tlcigpLFxuICBvYmplY3RPZjogY3JlYXRlT2JqZWN0T2ZUeXBlQ2hlY2tlcixcbiAgb25lT2Y6IGNyZWF0ZUVudW1UeXBlQ2hlY2tlcixcbiAgb25lT2ZUeXBlOiBjcmVhdGVVbmlvblR5cGVDaGVja2VyLFxuICBzaGFwZTogY3JlYXRlU2hhcGVUeXBlQ2hlY2tlclxufTtcblxuZnVuY3Rpb24gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpIHtcbiAgZnVuY3Rpb24gY2hlY2tUeXBlKGlzUmVxdWlyZWQsIHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSkge1xuICAgIGNvbXBvbmVudE5hbWUgPSBjb21wb25lbnROYW1lIHx8IEFOT05ZTU9VUztcbiAgICBwcm9wRnVsbE5hbWUgPSBwcm9wRnVsbE5hbWUgfHwgcHJvcE5hbWU7XG4gICAgaWYgKHByb3BzW3Byb3BOYW1lXSA9PSBudWxsKSB7XG4gICAgICB2YXIgbG9jYXRpb25OYW1lID0gUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXNbbG9jYXRpb25dO1xuICAgICAgaWYgKGlzUmVxdWlyZWQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBFcnJvcignUmVxdWlyZWQgJyArIGxvY2F0aW9uTmFtZSArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCB3YXMgbm90IHNwZWNpZmllZCBpbiAnICsgKCdgJyArIGNvbXBvbmVudE5hbWUgKyAnYC4nKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSk7XG4gICAgfVxuICB9XG5cbiAgdmFyIGNoYWluZWRDaGVja1R5cGUgPSBjaGVja1R5cGUuYmluZChudWxsLCBmYWxzZSk7XG4gIGNoYWluZWRDaGVja1R5cGUuaXNSZXF1aXJlZCA9IGNoZWNrVHlwZS5iaW5kKG51bGwsIHRydWUpO1xuXG4gIHJldHVybiBjaGFpbmVkQ2hlY2tUeXBlO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVQcmltaXRpdmVUeXBlQ2hlY2tlcihleHBlY3RlZFR5cGUpIHtcbiAgZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKSB7XG4gICAgdmFyIHByb3BWYWx1ZSA9IHByb3BzW3Byb3BOYW1lXTtcbiAgICB2YXIgcHJvcFR5cGUgPSBnZXRQcm9wVHlwZShwcm9wVmFsdWUpO1xuICAgIGlmIChwcm9wVHlwZSAhPT0gZXhwZWN0ZWRUeXBlKSB7XG4gICAgICB2YXIgbG9jYXRpb25OYW1lID0gUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXNbbG9jYXRpb25dO1xuICAgICAgLy8gYHByb3BWYWx1ZWAgYmVpbmcgaW5zdGFuY2Ugb2YsIHNheSwgZGF0ZS9yZWdleHAsIHBhc3MgdGhlICdvYmplY3QnXG4gICAgICAvLyBjaGVjaywgYnV0IHdlIGNhbiBvZmZlciBhIG1vcmUgcHJlY2lzZSBlcnJvciBtZXNzYWdlIGhlcmUgcmF0aGVyIHRoYW5cbiAgICAgIC8vICdvZiB0eXBlIGBvYmplY3RgJy5cbiAgICAgIHZhciBwcmVjaXNlVHlwZSA9IGdldFByZWNpc2VUeXBlKHByb3BWYWx1ZSk7XG5cbiAgICAgIHJldHVybiBuZXcgRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uTmFtZSArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBvZiB0eXBlICcgKyAoJ2AnICsgcHJlY2lzZVR5cGUgKyAnYCBzdXBwbGllZCB0byBgJyArIGNvbXBvbmVudE5hbWUgKyAnYCwgZXhwZWN0ZWQgJykgKyAoJ2AnICsgZXhwZWN0ZWRUeXBlICsgJ2AuJykpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVBbnlUeXBlQ2hlY2tlcigpIHtcbiAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKGVtcHR5RnVuY3Rpb24udGhhdFJldHVybnMobnVsbCkpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVBcnJheU9mVHlwZUNoZWNrZXIodHlwZUNoZWNrZXIpIHtcbiAgZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKSB7XG4gICAgdmFyIHByb3BWYWx1ZSA9IHByb3BzW3Byb3BOYW1lXTtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkocHJvcFZhbHVlKSkge1xuICAgICAgdmFyIGxvY2F0aW9uTmFtZSA9IFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXTtcbiAgICAgIHZhciBwcm9wVHlwZSA9IGdldFByb3BUeXBlKHByb3BWYWx1ZSk7XG4gICAgICByZXR1cm4gbmV3IEVycm9yKCdJbnZhbGlkICcgKyBsb2NhdGlvbk5hbWUgKyAnIGAnICsgcHJvcEZ1bGxOYW1lICsgJ2Agb2YgdHlwZSAnICsgKCdgJyArIHByb3BUeXBlICsgJ2Agc3VwcGxpZWQgdG8gYCcgKyBjb21wb25lbnROYW1lICsgJ2AsIGV4cGVjdGVkIGFuIGFycmF5LicpKTtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wVmFsdWUubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBlcnJvciA9IHR5cGVDaGVja2VyKHByb3BWYWx1ZSwgaSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSArICdbJyArIGkgKyAnXScsICdTRUNSRVRfRE9fTk9UX1BBU1NfVEhJU19PUl9ZT1VfV0lMTF9CRV9GSVJFRCcpO1xuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIGVycm9yO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVFbGVtZW50VHlwZUNoZWNrZXIoKSB7XG4gIGZ1bmN0aW9uIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSkge1xuICAgIGlmICghUmVhY3RFbGVtZW50LmlzVmFsaWRFbGVtZW50KHByb3BzW3Byb3BOYW1lXSkpIHtcbiAgICAgIHZhciBsb2NhdGlvbk5hbWUgPSBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lc1tsb2NhdGlvbl07XG4gICAgICByZXR1cm4gbmV3IEVycm9yKCdJbnZhbGlkICcgKyBsb2NhdGlvbk5hbWUgKyAnIGAnICsgcHJvcEZ1bGxOYW1lICsgJ2Agc3VwcGxpZWQgdG8gJyArICgnYCcgKyBjb21wb25lbnROYW1lICsgJ2AsIGV4cGVjdGVkIGEgc2luZ2xlIFJlYWN0RWxlbWVudC4nKSk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUluc3RhbmNlVHlwZUNoZWNrZXIoZXhwZWN0ZWRDbGFzcykge1xuICBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpIHtcbiAgICBpZiAoIShwcm9wc1twcm9wTmFtZV0gaW5zdGFuY2VvZiBleHBlY3RlZENsYXNzKSkge1xuICAgICAgdmFyIGxvY2F0aW9uTmFtZSA9IFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXTtcbiAgICAgIHZhciBleHBlY3RlZENsYXNzTmFtZSA9IGV4cGVjdGVkQ2xhc3MubmFtZSB8fCBBTk9OWU1PVVM7XG4gICAgICB2YXIgYWN0dWFsQ2xhc3NOYW1lID0gZ2V0Q2xhc3NOYW1lKHByb3BzW3Byb3BOYW1lXSk7XG4gICAgICByZXR1cm4gbmV3IEVycm9yKCdJbnZhbGlkICcgKyBsb2NhdGlvbk5hbWUgKyAnIGAnICsgcHJvcEZ1bGxOYW1lICsgJ2Agb2YgdHlwZSAnICsgKCdgJyArIGFjdHVhbENsYXNzTmFtZSArICdgIHN1cHBsaWVkIHRvIGAnICsgY29tcG9uZW50TmFtZSArICdgLCBleHBlY3RlZCAnKSArICgnaW5zdGFuY2Ugb2YgYCcgKyBleHBlY3RlZENsYXNzTmFtZSArICdgLicpKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRW51bVR5cGVDaGVja2VyKGV4cGVjdGVkVmFsdWVzKSB7XG4gIGlmICghQXJyYXkuaXNBcnJheShleHBlY3RlZFZhbHVlcykpIHtcbiAgICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIoZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIG5ldyBFcnJvcignSW52YWxpZCBhcmd1bWVudCBzdXBwbGllZCB0byBvbmVPZiwgZXhwZWN0ZWQgYW4gaW5zdGFuY2Ugb2YgYXJyYXkuJyk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpIHtcbiAgICB2YXIgcHJvcFZhbHVlID0gcHJvcHNbcHJvcE5hbWVdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXhwZWN0ZWRWYWx1ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChwcm9wVmFsdWUgPT09IGV4cGVjdGVkVmFsdWVzW2ldKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBsb2NhdGlvbk5hbWUgPSBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lc1tsb2NhdGlvbl07XG4gICAgdmFyIHZhbHVlc1N0cmluZyA9IEpTT04uc3RyaW5naWZ5KGV4cGVjdGVkVmFsdWVzKTtcbiAgICByZXR1cm4gbmV3IEVycm9yKCdJbnZhbGlkICcgKyBsb2NhdGlvbk5hbWUgKyAnIGAnICsgcHJvcEZ1bGxOYW1lICsgJ2Agb2YgdmFsdWUgYCcgKyBwcm9wVmFsdWUgKyAnYCAnICsgKCdzdXBwbGllZCB0byBgJyArIGNvbXBvbmVudE5hbWUgKyAnYCwgZXhwZWN0ZWQgb25lIG9mICcgKyB2YWx1ZXNTdHJpbmcgKyAnLicpKTtcbiAgfVxuICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVPYmplY3RPZlR5cGVDaGVja2VyKHR5cGVDaGVja2VyKSB7XG4gIGZ1bmN0aW9uIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSkge1xuICAgIHZhciBwcm9wVmFsdWUgPSBwcm9wc1twcm9wTmFtZV07XG4gICAgdmFyIHByb3BUeXBlID0gZ2V0UHJvcFR5cGUocHJvcFZhbHVlKTtcbiAgICBpZiAocHJvcFR5cGUgIT09ICdvYmplY3QnKSB7XG4gICAgICB2YXIgbG9jYXRpb25OYW1lID0gUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXNbbG9jYXRpb25dO1xuICAgICAgcmV0dXJuIG5ldyBFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb25OYW1lICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIG9mIHR5cGUgJyArICgnYCcgKyBwcm9wVHlwZSArICdgIHN1cHBsaWVkIHRvIGAnICsgY29tcG9uZW50TmFtZSArICdgLCBleHBlY3RlZCBhbiBvYmplY3QuJykpO1xuICAgIH1cbiAgICBmb3IgKHZhciBrZXkgaW4gcHJvcFZhbHVlKSB7XG4gICAgICBpZiAocHJvcFZhbHVlLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgdmFyIGVycm9yID0gdHlwZUNoZWNrZXIocHJvcFZhbHVlLCBrZXksIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUgKyAnLicgKyBrZXksICdTRUNSRVRfRE9fTk9UX1BBU1NfVEhJU19PUl9ZT1VfV0lMTF9CRV9GSVJFRCcpO1xuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgIHJldHVybiBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVVbmlvblR5cGVDaGVja2VyKGFycmF5T2ZUeXBlQ2hlY2tlcnMpIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KGFycmF5T2ZUeXBlQ2hlY2tlcnMpKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBuZXcgRXJyb3IoJ0ludmFsaWQgYXJndW1lbnQgc3VwcGxpZWQgdG8gb25lT2ZUeXBlLCBleHBlY3RlZCBhbiBpbnN0YW5jZSBvZiBhcnJheS4nKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXlPZlR5cGVDaGVja2Vycy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGNoZWNrZXIgPSBhcnJheU9mVHlwZUNoZWNrZXJzW2ldO1xuICAgICAgaWYgKGNoZWNrZXIocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lLCAnU0VDUkVUX0RPX05PVF9QQVNTX1RISVNfT1JfWU9VX1dJTExfQkVfRklSRUQnKSA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBsb2NhdGlvbk5hbWUgPSBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lc1tsb2NhdGlvbl07XG4gICAgcmV0dXJuIG5ldyBFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb25OYW1lICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIHN1cHBsaWVkIHRvICcgKyAoJ2AnICsgY29tcG9uZW50TmFtZSArICdgLicpKTtcbiAgfVxuICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVOb2RlQ2hlY2tlcigpIHtcbiAgZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKSB7XG4gICAgaWYgKCFpc05vZGUocHJvcHNbcHJvcE5hbWVdKSkge1xuICAgICAgdmFyIGxvY2F0aW9uTmFtZSA9IFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXTtcbiAgICAgIHJldHVybiBuZXcgRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uTmFtZSArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBzdXBwbGllZCB0byAnICsgKCdgJyArIGNvbXBvbmVudE5hbWUgKyAnYCwgZXhwZWN0ZWQgYSBSZWFjdE5vZGUuJykpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVTaGFwZVR5cGVDaGVja2VyKHNoYXBlVHlwZXMpIHtcbiAgZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKSB7XG4gICAgdmFyIHByb3BWYWx1ZSA9IHByb3BzW3Byb3BOYW1lXTtcbiAgICB2YXIgcHJvcFR5cGUgPSBnZXRQcm9wVHlwZShwcm9wVmFsdWUpO1xuICAgIGlmIChwcm9wVHlwZSAhPT0gJ29iamVjdCcpIHtcbiAgICAgIHZhciBsb2NhdGlvbk5hbWUgPSBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lc1tsb2NhdGlvbl07XG4gICAgICByZXR1cm4gbmV3IEVycm9yKCdJbnZhbGlkICcgKyBsb2NhdGlvbk5hbWUgKyAnIGAnICsgcHJvcEZ1bGxOYW1lICsgJ2Agb2YgdHlwZSBgJyArIHByb3BUeXBlICsgJ2AgJyArICgnc3VwcGxpZWQgdG8gYCcgKyBjb21wb25lbnROYW1lICsgJ2AsIGV4cGVjdGVkIGBvYmplY3RgLicpKTtcbiAgICB9XG4gICAgZm9yICh2YXIga2V5IGluIHNoYXBlVHlwZXMpIHtcbiAgICAgIHZhciBjaGVja2VyID0gc2hhcGVUeXBlc1trZXldO1xuICAgICAgaWYgKCFjaGVja2VyKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgdmFyIGVycm9yID0gY2hlY2tlcihwcm9wVmFsdWUsIGtleSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSArICcuJyArIGtleSwgJ1NFQ1JFVF9ET19OT1RfUEFTU19USElTX09SX1lPVV9XSUxMX0JFX0ZJUkVEJyk7XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIGVycm9yO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpO1xufVxuXG5mdW5jdGlvbiBpc05vZGUocHJvcFZhbHVlKSB7XG4gIHN3aXRjaCAodHlwZW9mIHByb3BWYWx1ZSkge1xuICAgIGNhc2UgJ251bWJlcic6XG4gICAgY2FzZSAnc3RyaW5nJzpcbiAgICBjYXNlICd1bmRlZmluZWQnOlxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgY2FzZSAnYm9vbGVhbic6XG4gICAgICByZXR1cm4gIXByb3BWYWx1ZTtcbiAgICBjYXNlICdvYmplY3QnOlxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkocHJvcFZhbHVlKSkge1xuICAgICAgICByZXR1cm4gcHJvcFZhbHVlLmV2ZXJ5KGlzTm9kZSk7XG4gICAgICB9XG4gICAgICBpZiAocHJvcFZhbHVlID09PSBudWxsIHx8IFJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChwcm9wVmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICB2YXIgaXRlcmF0b3JGbiA9IGdldEl0ZXJhdG9yRm4ocHJvcFZhbHVlKTtcbiAgICAgIGlmIChpdGVyYXRvckZuKSB7XG4gICAgICAgIHZhciBpdGVyYXRvciA9IGl0ZXJhdG9yRm4uY2FsbChwcm9wVmFsdWUpO1xuICAgICAgICB2YXIgc3RlcDtcbiAgICAgICAgaWYgKGl0ZXJhdG9yRm4gIT09IHByb3BWYWx1ZS5lbnRyaWVzKSB7XG4gICAgICAgICAgd2hpbGUgKCEoc3RlcCA9IGl0ZXJhdG9yLm5leHQoKSkuZG9uZSkge1xuICAgICAgICAgICAgaWYgKCFpc05vZGUoc3RlcC52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBJdGVyYXRvciB3aWxsIHByb3ZpZGUgZW50cnkgW2ssdl0gdHVwbGVzIHJhdGhlciB0aGFuIHZhbHVlcy5cbiAgICAgICAgICB3aGlsZSAoIShzdGVwID0gaXRlcmF0b3IubmV4dCgpKS5kb25lKSB7XG4gICAgICAgICAgICB2YXIgZW50cnkgPSBzdGVwLnZhbHVlO1xuICAgICAgICAgICAgaWYgKGVudHJ5KSB7XG4gICAgICAgICAgICAgIGlmICghaXNOb2RlKGVudHJ5WzFdKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8vIEVxdWl2YWxlbnQgb2YgYHR5cGVvZmAgYnV0IHdpdGggc3BlY2lhbCBoYW5kbGluZyBmb3IgYXJyYXkgYW5kIHJlZ2V4cC5cbmZ1bmN0aW9uIGdldFByb3BUeXBlKHByb3BWYWx1ZSkge1xuICB2YXIgcHJvcFR5cGUgPSB0eXBlb2YgcHJvcFZhbHVlO1xuICBpZiAoQXJyYXkuaXNBcnJheShwcm9wVmFsdWUpKSB7XG4gICAgcmV0dXJuICdhcnJheSc7XG4gIH1cbiAgaWYgKHByb3BWYWx1ZSBpbnN0YW5jZW9mIFJlZ0V4cCkge1xuICAgIC8vIE9sZCB3ZWJraXRzIChhdCBsZWFzdCB1bnRpbCBBbmRyb2lkIDQuMCkgcmV0dXJuICdmdW5jdGlvbicgcmF0aGVyIHRoYW5cbiAgICAvLyAnb2JqZWN0JyBmb3IgdHlwZW9mIGEgUmVnRXhwLiBXZSdsbCBub3JtYWxpemUgdGhpcyBoZXJlIHNvIHRoYXQgL2JsYS9cbiAgICAvLyBwYXNzZXMgUHJvcFR5cGVzLm9iamVjdC5cbiAgICByZXR1cm4gJ29iamVjdCc7XG4gIH1cbiAgcmV0dXJuIHByb3BUeXBlO1xufVxuXG4vLyBUaGlzIGhhbmRsZXMgbW9yZSB0eXBlcyB0aGFuIGBnZXRQcm9wVHlwZWAuIE9ubHkgdXNlZCBmb3IgZXJyb3IgbWVzc2FnZXMuXG4vLyBTZWUgYGNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyYC5cbmZ1bmN0aW9uIGdldFByZWNpc2VUeXBlKHByb3BWYWx1ZSkge1xuICB2YXIgcHJvcFR5cGUgPSBnZXRQcm9wVHlwZShwcm9wVmFsdWUpO1xuICBpZiAocHJvcFR5cGUgPT09ICdvYmplY3QnKSB7XG4gICAgaWYgKHByb3BWYWx1ZSBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgIHJldHVybiAnZGF0ZSc7XG4gICAgfSBlbHNlIGlmIChwcm9wVmFsdWUgaW5zdGFuY2VvZiBSZWdFeHApIHtcbiAgICAgIHJldHVybiAncmVnZXhwJztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHByb3BUeXBlO1xufVxuXG4vLyBSZXR1cm5zIGNsYXNzIG5hbWUgb2YgdGhlIG9iamVjdCwgaWYgYW55LlxuZnVuY3Rpb24gZ2V0Q2xhc3NOYW1lKHByb3BWYWx1ZSkge1xuICBpZiAoIXByb3BWYWx1ZS5jb25zdHJ1Y3RvciB8fCAhcHJvcFZhbHVlLmNvbnN0cnVjdG9yLm5hbWUpIHtcbiAgICByZXR1cm4gJzw8YW5vbnltb3VzPj4nO1xuICB9XG4gIHJldHVybiBwcm9wVmFsdWUuY29uc3RydWN0b3IubmFtZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdFByb3BUeXBlcztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QvbGliL1JlYWN0UHJvcFR5cGVzLmpzXG4vLyBtb2R1bGUgaWQgPSAxMDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGdldEl0ZXJhdG9yRm5cbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKiBnbG9iYWwgU3ltYm9sICovXG52YXIgSVRFUkFUT1JfU1lNQk9MID0gdHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJyAmJiBTeW1ib2wuaXRlcmF0b3I7XG52YXIgRkFVWF9JVEVSQVRPUl9TWU1CT0wgPSAnQEBpdGVyYXRvcic7IC8vIEJlZm9yZSBTeW1ib2wgc3BlYy5cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBpdGVyYXRvciBtZXRob2QgZnVuY3Rpb24gY29udGFpbmVkIG9uIHRoZSBpdGVyYWJsZSBvYmplY3QuXG4gKlxuICogQmUgc3VyZSB0byBpbnZva2UgdGhlIGZ1bmN0aW9uIHdpdGggdGhlIGl0ZXJhYmxlIGFzIGNvbnRleHQ6XG4gKlxuICogICAgIHZhciBpdGVyYXRvckZuID0gZ2V0SXRlcmF0b3JGbihteUl0ZXJhYmxlKTtcbiAqICAgICBpZiAoaXRlcmF0b3JGbikge1xuICogICAgICAgdmFyIGl0ZXJhdG9yID0gaXRlcmF0b3JGbi5jYWxsKG15SXRlcmFibGUpO1xuICogICAgICAgLi4uXG4gKiAgICAgfVxuICpcbiAqIEBwYXJhbSB7P29iamVjdH0gbWF5YmVJdGVyYWJsZVxuICogQHJldHVybiB7P2Z1bmN0aW9ufVxuICovXG5mdW5jdGlvbiBnZXRJdGVyYXRvckZuKG1heWJlSXRlcmFibGUpIHtcbiAgdmFyIGl0ZXJhdG9yRm4gPSBtYXliZUl0ZXJhYmxlICYmIChJVEVSQVRPUl9TWU1CT0wgJiYgbWF5YmVJdGVyYWJsZVtJVEVSQVRPUl9TWU1CT0xdIHx8IG1heWJlSXRlcmFibGVbRkFVWF9JVEVSQVRPUl9TWU1CT0xdKTtcbiAgaWYgKHR5cGVvZiBpdGVyYXRvckZuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGl0ZXJhdG9yRm47XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRJdGVyYXRvckZuO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvZ2V0SXRlcmF0b3JGbi5qc1xuLy8gbW9kdWxlIGlkID0gMTA4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdERPTU9wdGlvblxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0Q2hpbGRyZW4gPSByZXF1aXJlKCcuL1JlYWN0Q2hpbGRyZW4nKTtcbnZhciBSZWFjdERPTVNlbGVjdCA9IHJlcXVpcmUoJy4vUmVhY3RET01TZWxlY3QnKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbnZhciB2YWx1ZUNvbnRleHRLZXkgPSBSZWFjdERPTVNlbGVjdC52YWx1ZUNvbnRleHRLZXk7XG5cbi8qKlxuICogSW1wbGVtZW50cyBhbiA8b3B0aW9uPiBuYXRpdmUgY29tcG9uZW50IHRoYXQgd2FybnMgd2hlbiBgc2VsZWN0ZWRgIGlzIHNldC5cbiAqL1xudmFyIFJlYWN0RE9NT3B0aW9uID0ge1xuICBtb3VudFdyYXBwZXI6IGZ1bmN0aW9uIChpbnN0LCBwcm9wcywgY29udGV4dCkge1xuICAgIC8vIFRPRE8gKHl1bmdzdGVycyk6IFJlbW92ZSBzdXBwb3J0IGZvciBgc2VsZWN0ZWRgIGluIDxvcHRpb24+LlxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhwcm9wcy5zZWxlY3RlZCA9PSBudWxsLCAnVXNlIHRoZSBgZGVmYXVsdFZhbHVlYCBvciBgdmFsdWVgIHByb3BzIG9uIDxzZWxlY3Q+IGluc3RlYWQgb2YgJyArICdzZXR0aW5nIGBzZWxlY3RlZGAgb24gPG9wdGlvbj4uJykgOiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLy8gTG9vayB1cCB3aGV0aGVyIHRoaXMgb3B0aW9uIGlzICdzZWxlY3RlZCcgdmlhIGNvbnRleHRcbiAgICB2YXIgc2VsZWN0VmFsdWUgPSBjb250ZXh0W3ZhbHVlQ29udGV4dEtleV07XG5cbiAgICAvLyBJZiBjb250ZXh0IGtleSBpcyBudWxsIChlLmcuLCBubyBzcGVjaWZpZWQgdmFsdWUgb3IgYWZ0ZXIgaW5pdGlhbCBtb3VudClcbiAgICAvLyBvciBtaXNzaW5nIChlLmcuLCBmb3IgPGRhdGFsaXN0PiksIHdlIGRvbid0IGNoYW5nZSBwcm9wcy5zZWxlY3RlZFxuICAgIHZhciBzZWxlY3RlZCA9IG51bGw7XG4gICAgaWYgKHNlbGVjdFZhbHVlICE9IG51bGwpIHtcbiAgICAgIHNlbGVjdGVkID0gZmFsc2U7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShzZWxlY3RWYWx1ZSkpIHtcbiAgICAgICAgLy8gbXVsdGlwbGVcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxlY3RWYWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmICgnJyArIHNlbGVjdFZhbHVlW2ldID09PSAnJyArIHByb3BzLnZhbHVlKSB7XG4gICAgICAgICAgICBzZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbGVjdGVkID0gJycgKyBzZWxlY3RWYWx1ZSA9PT0gJycgKyBwcm9wcy52YWx1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpbnN0Ll93cmFwcGVyU3RhdGUgPSB7IHNlbGVjdGVkOiBzZWxlY3RlZCB9O1xuICB9LFxuXG4gIGdldE5hdGl2ZVByb3BzOiBmdW5jdGlvbiAoaW5zdCwgcHJvcHMsIGNvbnRleHQpIHtcbiAgICB2YXIgbmF0aXZlUHJvcHMgPSBhc3NpZ24oeyBzZWxlY3RlZDogdW5kZWZpbmVkLCBjaGlsZHJlbjogdW5kZWZpbmVkIH0sIHByb3BzKTtcblxuICAgIC8vIFJlYWQgc3RhdGUgb25seSBmcm9tIGluaXRpYWwgbW91bnQgYmVjYXVzZSA8c2VsZWN0PiB1cGRhdGVzIHZhbHVlXG4gICAgLy8gbWFudWFsbHk7IHdlIG5lZWQgdGhlIGluaXRpYWwgc3RhdGUgb25seSBmb3Igc2VydmVyIHJlbmRlcmluZ1xuICAgIGlmIChpbnN0Ll93cmFwcGVyU3RhdGUuc2VsZWN0ZWQgIT0gbnVsbCkge1xuICAgICAgbmF0aXZlUHJvcHMuc2VsZWN0ZWQgPSBpbnN0Ll93cmFwcGVyU3RhdGUuc2VsZWN0ZWQ7XG4gICAgfVxuXG4gICAgdmFyIGNvbnRlbnQgPSAnJztcblxuICAgIC8vIEZsYXR0ZW4gY2hpbGRyZW4gYW5kIHdhcm4gaWYgdGhleSBhcmVuJ3Qgc3RyaW5ncyBvciBudW1iZXJzO1xuICAgIC8vIGludmFsaWQgdHlwZXMgYXJlIGlnbm9yZWQuXG4gICAgUmVhY3RDaGlsZHJlbi5mb3JFYWNoKHByb3BzLmNoaWxkcmVuLCBmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgIGlmIChjaGlsZCA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgY2hpbGQgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBjaGlsZCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgY29udGVudCArPSBjaGlsZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnT25seSBzdHJpbmdzIGFuZCBudW1iZXJzIGFyZSBzdXBwb3J0ZWQgYXMgPG9wdGlvbj4gY2hpbGRyZW4uJykgOiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAoY29udGVudCkge1xuICAgICAgbmF0aXZlUHJvcHMuY2hpbGRyZW4gPSBjb250ZW50O1xuICAgIH1cblxuICAgIHJldHVybiBuYXRpdmVQcm9wcztcbiAgfVxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0RE9NT3B0aW9uO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvUmVhY3RET01PcHRpb24uanNcbi8vIG1vZHVsZSBpZCA9IDEwOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RDaGlsZHJlblxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFBvb2xlZENsYXNzID0gcmVxdWlyZSgnLi9Qb29sZWRDbGFzcycpO1xudmFyIFJlYWN0RWxlbWVudCA9IHJlcXVpcmUoJy4vUmVhY3RFbGVtZW50Jyk7XG5cbnZhciBlbXB0eUZ1bmN0aW9uID0gcmVxdWlyZSgnZmJqcy9saWIvZW1wdHlGdW5jdGlvbicpO1xudmFyIHRyYXZlcnNlQWxsQ2hpbGRyZW4gPSByZXF1aXJlKCcuL3RyYXZlcnNlQWxsQ2hpbGRyZW4nKTtcblxudmFyIHR3b0FyZ3VtZW50UG9vbGVyID0gUG9vbGVkQ2xhc3MudHdvQXJndW1lbnRQb29sZXI7XG52YXIgZm91ckFyZ3VtZW50UG9vbGVyID0gUG9vbGVkQ2xhc3MuZm91ckFyZ3VtZW50UG9vbGVyO1xuXG52YXIgdXNlclByb3ZpZGVkS2V5RXNjYXBlUmVnZXggPSAvXFwvKD8hXFwvKS9nO1xuZnVuY3Rpb24gZXNjYXBlVXNlclByb3ZpZGVkS2V5KHRleHQpIHtcbiAgcmV0dXJuICgnJyArIHRleHQpLnJlcGxhY2UodXNlclByb3ZpZGVkS2V5RXNjYXBlUmVnZXgsICcvLycpO1xufVxuXG4vKipcbiAqIFBvb2xlZENsYXNzIHJlcHJlc2VudGluZyB0aGUgYm9va2tlZXBpbmcgYXNzb2NpYXRlZCB3aXRoIHBlcmZvcm1pbmcgYSBjaGlsZFxuICogdHJhdmVyc2FsLiBBbGxvd3MgYXZvaWRpbmcgYmluZGluZyBjYWxsYmFja3MuXG4gKlxuICogQGNvbnN0cnVjdG9yIEZvckVhY2hCb29rS2VlcGluZ1xuICogQHBhcmFtIHshZnVuY3Rpb259IGZvckVhY2hGdW5jdGlvbiBGdW5jdGlvbiB0byBwZXJmb3JtIHRyYXZlcnNhbCB3aXRoLlxuICogQHBhcmFtIHs/Kn0gZm9yRWFjaENvbnRleHQgQ29udGV4dCB0byBwZXJmb3JtIGNvbnRleHQgd2l0aC5cbiAqL1xuZnVuY3Rpb24gRm9yRWFjaEJvb2tLZWVwaW5nKGZvckVhY2hGdW5jdGlvbiwgZm9yRWFjaENvbnRleHQpIHtcbiAgdGhpcy5mdW5jID0gZm9yRWFjaEZ1bmN0aW9uO1xuICB0aGlzLmNvbnRleHQgPSBmb3JFYWNoQ29udGV4dDtcbiAgdGhpcy5jb3VudCA9IDA7XG59XG5Gb3JFYWNoQm9va0tlZXBpbmcucHJvdG90eXBlLmRlc3RydWN0b3IgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuZnVuYyA9IG51bGw7XG4gIHRoaXMuY29udGV4dCA9IG51bGw7XG4gIHRoaXMuY291bnQgPSAwO1xufTtcblBvb2xlZENsYXNzLmFkZFBvb2xpbmdUbyhGb3JFYWNoQm9va0tlZXBpbmcsIHR3b0FyZ3VtZW50UG9vbGVyKTtcblxuZnVuY3Rpb24gZm9yRWFjaFNpbmdsZUNoaWxkKGJvb2tLZWVwaW5nLCBjaGlsZCwgbmFtZSkge1xuICB2YXIgZnVuYyA9IGJvb2tLZWVwaW5nLmZ1bmM7XG4gIHZhciBjb250ZXh0ID0gYm9va0tlZXBpbmcuY29udGV4dDtcblxuICBmdW5jLmNhbGwoY29udGV4dCwgY2hpbGQsIGJvb2tLZWVwaW5nLmNvdW50KyspO1xufVxuXG4vKipcbiAqIEl0ZXJhdGVzIHRocm91Z2ggY2hpbGRyZW4gdGhhdCBhcmUgdHlwaWNhbGx5IHNwZWNpZmllZCBhcyBgcHJvcHMuY2hpbGRyZW5gLlxuICpcbiAqIFRoZSBwcm92aWRlZCBmb3JFYWNoRnVuYyhjaGlsZCwgaW5kZXgpIHdpbGwgYmUgY2FsbGVkIGZvciBlYWNoXG4gKiBsZWFmIGNoaWxkLlxuICpcbiAqIEBwYXJhbSB7Pyp9IGNoaWxkcmVuIENoaWxkcmVuIHRyZWUgY29udGFpbmVyLlxuICogQHBhcmFtIHtmdW5jdGlvbigqLCBpbnQpfSBmb3JFYWNoRnVuY1xuICogQHBhcmFtIHsqfSBmb3JFYWNoQ29udGV4dCBDb250ZXh0IGZvciBmb3JFYWNoQ29udGV4dC5cbiAqL1xuZnVuY3Rpb24gZm9yRWFjaENoaWxkcmVuKGNoaWxkcmVuLCBmb3JFYWNoRnVuYywgZm9yRWFjaENvbnRleHQpIHtcbiAgaWYgKGNoaWxkcmVuID09IG51bGwpIHtcbiAgICByZXR1cm4gY2hpbGRyZW47XG4gIH1cbiAgdmFyIHRyYXZlcnNlQ29udGV4dCA9IEZvckVhY2hCb29rS2VlcGluZy5nZXRQb29sZWQoZm9yRWFjaEZ1bmMsIGZvckVhY2hDb250ZXh0KTtcbiAgdHJhdmVyc2VBbGxDaGlsZHJlbihjaGlsZHJlbiwgZm9yRWFjaFNpbmdsZUNoaWxkLCB0cmF2ZXJzZUNvbnRleHQpO1xuICBGb3JFYWNoQm9va0tlZXBpbmcucmVsZWFzZSh0cmF2ZXJzZUNvbnRleHQpO1xufVxuXG4vKipcbiAqIFBvb2xlZENsYXNzIHJlcHJlc2VudGluZyB0aGUgYm9va2tlZXBpbmcgYXNzb2NpYXRlZCB3aXRoIHBlcmZvcm1pbmcgYSBjaGlsZFxuICogbWFwcGluZy4gQWxsb3dzIGF2b2lkaW5nIGJpbmRpbmcgY2FsbGJhY2tzLlxuICpcbiAqIEBjb25zdHJ1Y3RvciBNYXBCb29rS2VlcGluZ1xuICogQHBhcmFtIHshKn0gbWFwUmVzdWx0IE9iamVjdCBjb250YWluaW5nIHRoZSBvcmRlcmVkIG1hcCBvZiByZXN1bHRzLlxuICogQHBhcmFtIHshZnVuY3Rpb259IG1hcEZ1bmN0aW9uIEZ1bmN0aW9uIHRvIHBlcmZvcm0gbWFwcGluZyB3aXRoLlxuICogQHBhcmFtIHs/Kn0gbWFwQ29udGV4dCBDb250ZXh0IHRvIHBlcmZvcm0gbWFwcGluZyB3aXRoLlxuICovXG5mdW5jdGlvbiBNYXBCb29rS2VlcGluZyhtYXBSZXN1bHQsIGtleVByZWZpeCwgbWFwRnVuY3Rpb24sIG1hcENvbnRleHQpIHtcbiAgdGhpcy5yZXN1bHQgPSBtYXBSZXN1bHQ7XG4gIHRoaXMua2V5UHJlZml4ID0ga2V5UHJlZml4O1xuICB0aGlzLmZ1bmMgPSBtYXBGdW5jdGlvbjtcbiAgdGhpcy5jb250ZXh0ID0gbWFwQ29udGV4dDtcbiAgdGhpcy5jb3VudCA9IDA7XG59XG5NYXBCb29rS2VlcGluZy5wcm90b3R5cGUuZGVzdHJ1Y3RvciA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5yZXN1bHQgPSBudWxsO1xuICB0aGlzLmtleVByZWZpeCA9IG51bGw7XG4gIHRoaXMuZnVuYyA9IG51bGw7XG4gIHRoaXMuY29udGV4dCA9IG51bGw7XG4gIHRoaXMuY291bnQgPSAwO1xufTtcblBvb2xlZENsYXNzLmFkZFBvb2xpbmdUbyhNYXBCb29rS2VlcGluZywgZm91ckFyZ3VtZW50UG9vbGVyKTtcblxuZnVuY3Rpb24gbWFwU2luZ2xlQ2hpbGRJbnRvQ29udGV4dChib29rS2VlcGluZywgY2hpbGQsIGNoaWxkS2V5KSB7XG4gIHZhciByZXN1bHQgPSBib29rS2VlcGluZy5yZXN1bHQ7XG4gIHZhciBrZXlQcmVmaXggPSBib29rS2VlcGluZy5rZXlQcmVmaXg7XG4gIHZhciBmdW5jID0gYm9va0tlZXBpbmcuZnVuYztcbiAgdmFyIGNvbnRleHQgPSBib29rS2VlcGluZy5jb250ZXh0O1xuXG4gIHZhciBtYXBwZWRDaGlsZCA9IGZ1bmMuY2FsbChjb250ZXh0LCBjaGlsZCwgYm9va0tlZXBpbmcuY291bnQrKyk7XG4gIGlmIChBcnJheS5pc0FycmF5KG1hcHBlZENoaWxkKSkge1xuICAgIG1hcEludG9XaXRoS2V5UHJlZml4SW50ZXJuYWwobWFwcGVkQ2hpbGQsIHJlc3VsdCwgY2hpbGRLZXksIGVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNBcmd1bWVudCk7XG4gIH0gZWxzZSBpZiAobWFwcGVkQ2hpbGQgIT0gbnVsbCkge1xuICAgIGlmIChSZWFjdEVsZW1lbnQuaXNWYWxpZEVsZW1lbnQobWFwcGVkQ2hpbGQpKSB7XG4gICAgICBtYXBwZWRDaGlsZCA9IFJlYWN0RWxlbWVudC5jbG9uZUFuZFJlcGxhY2VLZXkobWFwcGVkQ2hpbGQsXG4gICAgICAvLyBLZWVwIGJvdGggdGhlIChtYXBwZWQpIGFuZCBvbGQga2V5cyBpZiB0aGV5IGRpZmZlciwganVzdCBhc1xuICAgICAgLy8gdHJhdmVyc2VBbGxDaGlsZHJlbiB1c2VkIHRvIGRvIGZvciBvYmplY3RzIGFzIGNoaWxkcmVuXG4gICAgICBrZXlQcmVmaXggKyAobWFwcGVkQ2hpbGQgIT09IGNoaWxkID8gZXNjYXBlVXNlclByb3ZpZGVkS2V5KG1hcHBlZENoaWxkLmtleSB8fCAnJykgKyAnLycgOiAnJykgKyBjaGlsZEtleSk7XG4gICAgfVxuICAgIHJlc3VsdC5wdXNoKG1hcHBlZENoaWxkKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBtYXBJbnRvV2l0aEtleVByZWZpeEludGVybmFsKGNoaWxkcmVuLCBhcnJheSwgcHJlZml4LCBmdW5jLCBjb250ZXh0KSB7XG4gIHZhciBlc2NhcGVkUHJlZml4ID0gJyc7XG4gIGlmIChwcmVmaXggIT0gbnVsbCkge1xuICAgIGVzY2FwZWRQcmVmaXggPSBlc2NhcGVVc2VyUHJvdmlkZWRLZXkocHJlZml4KSArICcvJztcbiAgfVxuICB2YXIgdHJhdmVyc2VDb250ZXh0ID0gTWFwQm9va0tlZXBpbmcuZ2V0UG9vbGVkKGFycmF5LCBlc2NhcGVkUHJlZml4LCBmdW5jLCBjb250ZXh0KTtcbiAgdHJhdmVyc2VBbGxDaGlsZHJlbihjaGlsZHJlbiwgbWFwU2luZ2xlQ2hpbGRJbnRvQ29udGV4dCwgdHJhdmVyc2VDb250ZXh0KTtcbiAgTWFwQm9va0tlZXBpbmcucmVsZWFzZSh0cmF2ZXJzZUNvbnRleHQpO1xufVxuXG4vKipcbiAqIE1hcHMgY2hpbGRyZW4gdGhhdCBhcmUgdHlwaWNhbGx5IHNwZWNpZmllZCBhcyBgcHJvcHMuY2hpbGRyZW5gLlxuICpcbiAqIFRoZSBwcm92aWRlZCBtYXBGdW5jdGlvbihjaGlsZCwga2V5LCBpbmRleCkgd2lsbCBiZSBjYWxsZWQgZm9yIGVhY2hcbiAqIGxlYWYgY2hpbGQuXG4gKlxuICogQHBhcmFtIHs/Kn0gY2hpbGRyZW4gQ2hpbGRyZW4gdHJlZSBjb250YWluZXIuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCosIGludCl9IGZ1bmMgVGhlIG1hcCBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7Kn0gY29udGV4dCBDb250ZXh0IGZvciBtYXBGdW5jdGlvbi5cbiAqIEByZXR1cm4ge29iamVjdH0gT2JqZWN0IGNvbnRhaW5pbmcgdGhlIG9yZGVyZWQgbWFwIG9mIHJlc3VsdHMuXG4gKi9cbmZ1bmN0aW9uIG1hcENoaWxkcmVuKGNoaWxkcmVuLCBmdW5jLCBjb250ZXh0KSB7XG4gIGlmIChjaGlsZHJlbiA9PSBudWxsKSB7XG4gICAgcmV0dXJuIGNoaWxkcmVuO1xuICB9XG4gIHZhciByZXN1bHQgPSBbXTtcbiAgbWFwSW50b1dpdGhLZXlQcmVmaXhJbnRlcm5hbChjaGlsZHJlbiwgcmVzdWx0LCBudWxsLCBmdW5jLCBjb250ZXh0KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gZm9yRWFjaFNpbmdsZUNoaWxkRHVtbXkodHJhdmVyc2VDb250ZXh0LCBjaGlsZCwgbmFtZSkge1xuICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBDb3VudCB0aGUgbnVtYmVyIG9mIGNoaWxkcmVuIHRoYXQgYXJlIHR5cGljYWxseSBzcGVjaWZpZWQgYXNcbiAqIGBwcm9wcy5jaGlsZHJlbmAuXG4gKlxuICogQHBhcmFtIHs/Kn0gY2hpbGRyZW4gQ2hpbGRyZW4gdHJlZSBjb250YWluZXIuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBudW1iZXIgb2YgY2hpbGRyZW4uXG4gKi9cbmZ1bmN0aW9uIGNvdW50Q2hpbGRyZW4oY2hpbGRyZW4sIGNvbnRleHQpIHtcbiAgcmV0dXJuIHRyYXZlcnNlQWxsQ2hpbGRyZW4oY2hpbGRyZW4sIGZvckVhY2hTaW5nbGVDaGlsZER1bW15LCBudWxsKTtcbn1cblxuLyoqXG4gKiBGbGF0dGVuIGEgY2hpbGRyZW4gb2JqZWN0ICh0eXBpY2FsbHkgc3BlY2lmaWVkIGFzIGBwcm9wcy5jaGlsZHJlbmApIGFuZFxuICogcmV0dXJuIGFuIGFycmF5IHdpdGggYXBwcm9wcmlhdGVseSByZS1rZXllZCBjaGlsZHJlbi5cbiAqL1xuZnVuY3Rpb24gdG9BcnJheShjaGlsZHJlbikge1xuICB2YXIgcmVzdWx0ID0gW107XG4gIG1hcEludG9XaXRoS2V5UHJlZml4SW50ZXJuYWwoY2hpbGRyZW4sIHJlc3VsdCwgbnVsbCwgZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc0FyZ3VtZW50KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxudmFyIFJlYWN0Q2hpbGRyZW4gPSB7XG4gIGZvckVhY2g6IGZvckVhY2hDaGlsZHJlbixcbiAgbWFwOiBtYXBDaGlsZHJlbixcbiAgbWFwSW50b1dpdGhLZXlQcmVmaXhJbnRlcm5hbDogbWFwSW50b1dpdGhLZXlQcmVmaXhJbnRlcm5hbCxcbiAgY291bnQ6IGNvdW50Q2hpbGRyZW4sXG4gIHRvQXJyYXk6IHRvQXJyYXlcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RDaGlsZHJlbjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QvbGliL1JlYWN0Q2hpbGRyZW4uanNcbi8vIG1vZHVsZSBpZCA9IDExMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgdHJhdmVyc2VBbGxDaGlsZHJlblxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0Q3VycmVudE93bmVyID0gcmVxdWlyZSgnLi9SZWFjdEN1cnJlbnRPd25lcicpO1xudmFyIFJlYWN0RWxlbWVudCA9IHJlcXVpcmUoJy4vUmVhY3RFbGVtZW50Jyk7XG52YXIgUmVhY3RJbnN0YW5jZUhhbmRsZXMgPSByZXF1aXJlKCcuL1JlYWN0SW5zdGFuY2VIYW5kbGVzJyk7XG5cbnZhciBnZXRJdGVyYXRvckZuID0gcmVxdWlyZSgnLi9nZXRJdGVyYXRvckZuJyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxudmFyIFNFUEFSQVRPUiA9IFJlYWN0SW5zdGFuY2VIYW5kbGVzLlNFUEFSQVRPUjtcbnZhciBTVUJTRVBBUkFUT1IgPSAnOic7XG5cbi8qKlxuICogVE9ETzogVGVzdCB0aGF0IGEgc2luZ2xlIGNoaWxkIGFuZCBhbiBhcnJheSB3aXRoIG9uZSBpdGVtIGhhdmUgdGhlIHNhbWUga2V5XG4gKiBwYXR0ZXJuLlxuICovXG5cbnZhciB1c2VyUHJvdmlkZWRLZXlFc2NhcGVyTG9va3VwID0ge1xuICAnPSc6ICc9MCcsXG4gICcuJzogJz0xJyxcbiAgJzonOiAnPTInXG59O1xuXG52YXIgdXNlclByb3ZpZGVkS2V5RXNjYXBlUmVnZXggPSAvWz0uOl0vZztcblxudmFyIGRpZFdhcm5BYm91dE1hcHMgPSBmYWxzZTtcblxuZnVuY3Rpb24gdXNlclByb3ZpZGVkS2V5RXNjYXBlcihtYXRjaCkge1xuICByZXR1cm4gdXNlclByb3ZpZGVkS2V5RXNjYXBlckxvb2t1cFttYXRjaF07XG59XG5cbi8qKlxuICogR2VuZXJhdGUgYSBrZXkgc3RyaW5nIHRoYXQgaWRlbnRpZmllcyBhIGNvbXBvbmVudCB3aXRoaW4gYSBzZXQuXG4gKlxuICogQHBhcmFtIHsqfSBjb21wb25lbnQgQSBjb21wb25lbnQgdGhhdCBjb3VsZCBjb250YWluIGEgbWFudWFsIGtleS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBJbmRleCB0aGF0IGlzIHVzZWQgaWYgYSBtYW51YWwga2V5IGlzIG5vdCBwcm92aWRlZC5cbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gZ2V0Q29tcG9uZW50S2V5KGNvbXBvbmVudCwgaW5kZXgpIHtcbiAgaWYgKGNvbXBvbmVudCAmJiBjb21wb25lbnQua2V5ICE9IG51bGwpIHtcbiAgICAvLyBFeHBsaWNpdCBrZXlcbiAgICByZXR1cm4gd3JhcFVzZXJQcm92aWRlZEtleShjb21wb25lbnQua2V5KTtcbiAgfVxuICAvLyBJbXBsaWNpdCBrZXkgZGV0ZXJtaW5lZCBieSB0aGUgaW5kZXggaW4gdGhlIHNldFxuICByZXR1cm4gaW5kZXgudG9TdHJpbmcoMzYpO1xufVxuXG4vKipcbiAqIEVzY2FwZSBhIGNvbXBvbmVudCBrZXkgc28gdGhhdCBpdCBpcyBzYWZlIHRvIHVzZSBpbiBhIHJlYWN0aWQuXG4gKlxuICogQHBhcmFtIHsqfSB0ZXh0IENvbXBvbmVudCBrZXkgdG8gYmUgZXNjYXBlZC5cbiAqIEByZXR1cm4ge3N0cmluZ30gQW4gZXNjYXBlZCBzdHJpbmcuXG4gKi9cbmZ1bmN0aW9uIGVzY2FwZVVzZXJQcm92aWRlZEtleSh0ZXh0KSB7XG4gIHJldHVybiAoJycgKyB0ZXh0KS5yZXBsYWNlKHVzZXJQcm92aWRlZEtleUVzY2FwZVJlZ2V4LCB1c2VyUHJvdmlkZWRLZXlFc2NhcGVyKTtcbn1cblxuLyoqXG4gKiBXcmFwIGEgYGtleWAgdmFsdWUgZXhwbGljaXRseSBwcm92aWRlZCBieSB0aGUgdXNlciB0byBkaXN0aW5ndWlzaCBpdCBmcm9tXG4gKiBpbXBsaWNpdGx5LWdlbmVyYXRlZCBrZXlzIGdlbmVyYXRlZCBieSBhIGNvbXBvbmVudCdzIGluZGV4IGluIGl0cyBwYXJlbnQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBWYWx1ZSBvZiBhIHVzZXItcHJvdmlkZWQgYGtleWAgYXR0cmlidXRlXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIHdyYXBVc2VyUHJvdmlkZWRLZXkoa2V5KSB7XG4gIHJldHVybiAnJCcgKyBlc2NhcGVVc2VyUHJvdmlkZWRLZXkoa2V5KTtcbn1cblxuLyoqXG4gKiBAcGFyYW0gez8qfSBjaGlsZHJlbiBDaGlsZHJlbiB0cmVlIGNvbnRhaW5lci5cbiAqIEBwYXJhbSB7IXN0cmluZ30gbmFtZVNvRmFyIE5hbWUgb2YgdGhlIGtleSBwYXRoIHNvIGZhci5cbiAqIEBwYXJhbSB7IWZ1bmN0aW9ufSBjYWxsYmFjayBDYWxsYmFjayB0byBpbnZva2Ugd2l0aCBlYWNoIGNoaWxkIGZvdW5kLlxuICogQHBhcmFtIHs/Kn0gdHJhdmVyc2VDb250ZXh0IFVzZWQgdG8gcGFzcyBpbmZvcm1hdGlvbiB0aHJvdWdob3V0IHRoZSB0cmF2ZXJzYWxcbiAqIHByb2Nlc3MuXG4gKiBAcmV0dXJuIHshbnVtYmVyfSBUaGUgbnVtYmVyIG9mIGNoaWxkcmVuIGluIHRoaXMgc3VidHJlZS5cbiAqL1xuZnVuY3Rpb24gdHJhdmVyc2VBbGxDaGlsZHJlbkltcGwoY2hpbGRyZW4sIG5hbWVTb0ZhciwgY2FsbGJhY2ssIHRyYXZlcnNlQ29udGV4dCkge1xuICB2YXIgdHlwZSA9IHR5cGVvZiBjaGlsZHJlbjtcblxuICBpZiAodHlwZSA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgLy8gQWxsIG9mIHRoZSBhYm92ZSBhcmUgcGVyY2VpdmVkIGFzIG51bGwuXG4gICAgY2hpbGRyZW4gPSBudWxsO1xuICB9XG5cbiAgaWYgKGNoaWxkcmVuID09PSBudWxsIHx8IHR5cGUgPT09ICdzdHJpbmcnIHx8IHR5cGUgPT09ICdudW1iZXInIHx8IFJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChjaGlsZHJlbikpIHtcbiAgICBjYWxsYmFjayh0cmF2ZXJzZUNvbnRleHQsIGNoaWxkcmVuLFxuICAgIC8vIElmIGl0J3MgdGhlIG9ubHkgY2hpbGQsIHRyZWF0IHRoZSBuYW1lIGFzIGlmIGl0IHdhcyB3cmFwcGVkIGluIGFuIGFycmF5XG4gICAgLy8gc28gdGhhdCBpdCdzIGNvbnNpc3RlbnQgaWYgdGhlIG51bWJlciBvZiBjaGlsZHJlbiBncm93cy5cbiAgICBuYW1lU29GYXIgPT09ICcnID8gU0VQQVJBVE9SICsgZ2V0Q29tcG9uZW50S2V5KGNoaWxkcmVuLCAwKSA6IG5hbWVTb0Zhcik7XG4gICAgcmV0dXJuIDE7XG4gIH1cblxuICB2YXIgY2hpbGQ7XG4gIHZhciBuZXh0TmFtZTtcbiAgdmFyIHN1YnRyZWVDb3VudCA9IDA7IC8vIENvdW50IG9mIGNoaWxkcmVuIGZvdW5kIGluIHRoZSBjdXJyZW50IHN1YnRyZWUuXG4gIHZhciBuZXh0TmFtZVByZWZpeCA9IG5hbWVTb0ZhciA9PT0gJycgPyBTRVBBUkFUT1IgOiBuYW1lU29GYXIgKyBTVUJTRVBBUkFUT1I7XG5cbiAgaWYgKEFycmF5LmlzQXJyYXkoY2hpbGRyZW4pKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgY2hpbGQgPSBjaGlsZHJlbltpXTtcbiAgICAgIG5leHROYW1lID0gbmV4dE5hbWVQcmVmaXggKyBnZXRDb21wb25lbnRLZXkoY2hpbGQsIGkpO1xuICAgICAgc3VidHJlZUNvdW50ICs9IHRyYXZlcnNlQWxsQ2hpbGRyZW5JbXBsKGNoaWxkLCBuZXh0TmFtZSwgY2FsbGJhY2ssIHRyYXZlcnNlQ29udGV4dCk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHZhciBpdGVyYXRvckZuID0gZ2V0SXRlcmF0b3JGbihjaGlsZHJlbik7XG4gICAgaWYgKGl0ZXJhdG9yRm4pIHtcbiAgICAgIHZhciBpdGVyYXRvciA9IGl0ZXJhdG9yRm4uY2FsbChjaGlsZHJlbik7XG4gICAgICB2YXIgc3RlcDtcbiAgICAgIGlmIChpdGVyYXRvckZuICE9PSBjaGlsZHJlbi5lbnRyaWVzKSB7XG4gICAgICAgIHZhciBpaSA9IDA7XG4gICAgICAgIHdoaWxlICghKHN0ZXAgPSBpdGVyYXRvci5uZXh0KCkpLmRvbmUpIHtcbiAgICAgICAgICBjaGlsZCA9IHN0ZXAudmFsdWU7XG4gICAgICAgICAgbmV4dE5hbWUgPSBuZXh0TmFtZVByZWZpeCArIGdldENvbXBvbmVudEtleShjaGlsZCwgaWkrKyk7XG4gICAgICAgICAgc3VidHJlZUNvdW50ICs9IHRyYXZlcnNlQWxsQ2hpbGRyZW5JbXBsKGNoaWxkLCBuZXh0TmFtZSwgY2FsbGJhY2ssIHRyYXZlcnNlQ29udGV4dCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZGlkV2FybkFib3V0TWFwcywgJ1VzaW5nIE1hcHMgYXMgY2hpbGRyZW4gaXMgbm90IHlldCBmdWxseSBzdXBwb3J0ZWQuIEl0IGlzIGFuICcgKyAnZXhwZXJpbWVudGFsIGZlYXR1cmUgdGhhdCBtaWdodCBiZSByZW1vdmVkLiBDb252ZXJ0IGl0IHRvIGEgJyArICdzZXF1ZW5jZSAvIGl0ZXJhYmxlIG9mIGtleWVkIFJlYWN0RWxlbWVudHMgaW5zdGVhZC4nKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICBkaWRXYXJuQWJvdXRNYXBzID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJdGVyYXRvciB3aWxsIHByb3ZpZGUgZW50cnkgW2ssdl0gdHVwbGVzIHJhdGhlciB0aGFuIHZhbHVlcy5cbiAgICAgICAgd2hpbGUgKCEoc3RlcCA9IGl0ZXJhdG9yLm5leHQoKSkuZG9uZSkge1xuICAgICAgICAgIHZhciBlbnRyeSA9IHN0ZXAudmFsdWU7XG4gICAgICAgICAgaWYgKGVudHJ5KSB7XG4gICAgICAgICAgICBjaGlsZCA9IGVudHJ5WzFdO1xuICAgICAgICAgICAgbmV4dE5hbWUgPSBuZXh0TmFtZVByZWZpeCArIHdyYXBVc2VyUHJvdmlkZWRLZXkoZW50cnlbMF0pICsgU1VCU0VQQVJBVE9SICsgZ2V0Q29tcG9uZW50S2V5KGNoaWxkLCAwKTtcbiAgICAgICAgICAgIHN1YnRyZWVDb3VudCArPSB0cmF2ZXJzZUFsbENoaWxkcmVuSW1wbChjaGlsZCwgbmV4dE5hbWUsIGNhbGxiYWNrLCB0cmF2ZXJzZUNvbnRleHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIHZhciBhZGRlbmR1bSA9ICcnO1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgYWRkZW5kdW0gPSAnIElmIHlvdSBtZWFudCB0byByZW5kZXIgYSBjb2xsZWN0aW9uIG9mIGNoaWxkcmVuLCB1c2UgYW4gYXJyYXkgJyArICdpbnN0ZWFkIG9yIHdyYXAgdGhlIG9iamVjdCB1c2luZyBjcmVhdGVGcmFnbWVudChvYmplY3QpIGZyb20gdGhlICcgKyAnUmVhY3QgYWRkLW9ucy4nO1xuICAgICAgICBpZiAoY2hpbGRyZW4uX2lzUmVhY3RFbGVtZW50KSB7XG4gICAgICAgICAgYWRkZW5kdW0gPSAnIEl0IGxvb2tzIGxpa2UgeW91XFwncmUgdXNpbmcgYW4gZWxlbWVudCBjcmVhdGVkIGJ5IGEgZGlmZmVyZW50ICcgKyAndmVyc2lvbiBvZiBSZWFjdC4gTWFrZSBzdXJlIHRvIHVzZSBvbmx5IG9uZSBjb3B5IG9mIFJlYWN0Lic7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQpIHtcbiAgICAgICAgICB2YXIgbmFtZSA9IFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQuZ2V0TmFtZSgpO1xuICAgICAgICAgIGlmIChuYW1lKSB7XG4gICAgICAgICAgICBhZGRlbmR1bSArPSAnIENoZWNrIHRoZSByZW5kZXIgbWV0aG9kIG9mIGAnICsgbmFtZSArICdgLic7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICB2YXIgY2hpbGRyZW5TdHJpbmcgPSBTdHJpbmcoY2hpbGRyZW4pO1xuICAgICAgIWZhbHNlID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ09iamVjdHMgYXJlIG5vdCB2YWxpZCBhcyBhIFJlYWN0IGNoaWxkIChmb3VuZDogJXMpLiVzJywgY2hpbGRyZW5TdHJpbmcgPT09ICdbb2JqZWN0IE9iamVjdF0nID8gJ29iamVjdCB3aXRoIGtleXMgeycgKyBPYmplY3Qua2V5cyhjaGlsZHJlbikuam9pbignLCAnKSArICd9JyA6IGNoaWxkcmVuU3RyaW5nLCBhZGRlbmR1bSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBzdWJ0cmVlQ291bnQ7XG59XG5cbi8qKlxuICogVHJhdmVyc2VzIGNoaWxkcmVuIHRoYXQgYXJlIHR5cGljYWxseSBzcGVjaWZpZWQgYXMgYHByb3BzLmNoaWxkcmVuYCwgYnV0XG4gKiBtaWdodCBhbHNvIGJlIHNwZWNpZmllZCB0aHJvdWdoIGF0dHJpYnV0ZXM6XG4gKlxuICogLSBgdHJhdmVyc2VBbGxDaGlsZHJlbih0aGlzLnByb3BzLmNoaWxkcmVuLCAuLi4pYFxuICogLSBgdHJhdmVyc2VBbGxDaGlsZHJlbih0aGlzLnByb3BzLmxlZnRQYW5lbENoaWxkcmVuLCAuLi4pYFxuICpcbiAqIFRoZSBgdHJhdmVyc2VDb250ZXh0YCBpcyBhbiBvcHRpb25hbCBhcmd1bWVudCB0aGF0IGlzIHBhc3NlZCB0aHJvdWdoIHRoZVxuICogZW50aXJlIHRyYXZlcnNhbC4gSXQgY2FuIGJlIHVzZWQgdG8gc3RvcmUgYWNjdW11bGF0aW9ucyBvciBhbnl0aGluZyBlbHNlIHRoYXRcbiAqIHRoZSBjYWxsYmFjayBtaWdodCBmaW5kIHJlbGV2YW50LlxuICpcbiAqIEBwYXJhbSB7Pyp9IGNoaWxkcmVuIENoaWxkcmVuIHRyZWUgb2JqZWN0LlxuICogQHBhcmFtIHshZnVuY3Rpb259IGNhbGxiYWNrIFRvIGludm9rZSB1cG9uIHRyYXZlcnNpbmcgZWFjaCBjaGlsZC5cbiAqIEBwYXJhbSB7Pyp9IHRyYXZlcnNlQ29udGV4dCBDb250ZXh0IGZvciB0cmF2ZXJzYWwuXG4gKiBAcmV0dXJuIHshbnVtYmVyfSBUaGUgbnVtYmVyIG9mIGNoaWxkcmVuIGluIHRoaXMgc3VidHJlZS5cbiAqL1xuZnVuY3Rpb24gdHJhdmVyc2VBbGxDaGlsZHJlbihjaGlsZHJlbiwgY2FsbGJhY2ssIHRyYXZlcnNlQ29udGV4dCkge1xuICBpZiAoY2hpbGRyZW4gPT0gbnVsbCkge1xuICAgIHJldHVybiAwO1xuICB9XG5cbiAgcmV0dXJuIHRyYXZlcnNlQWxsQ2hpbGRyZW5JbXBsKGNoaWxkcmVuLCAnJywgY2FsbGJhY2ssIHRyYXZlcnNlQ29udGV4dCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdHJhdmVyc2VBbGxDaGlsZHJlbjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QvbGliL3RyYXZlcnNlQWxsQ2hpbGRyZW4uanNcbi8vIG1vZHVsZSBpZCA9IDExMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RET01TZWxlY3RcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBMaW5rZWRWYWx1ZVV0aWxzID0gcmVxdWlyZSgnLi9MaW5rZWRWYWx1ZVV0aWxzJyk7XG52YXIgUmVhY3RNb3VudCA9IHJlcXVpcmUoJy4vUmVhY3RNb3VudCcpO1xudmFyIFJlYWN0VXBkYXRlcyA9IHJlcXVpcmUoJy4vUmVhY3RVcGRhdGVzJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG52YXIgdmFsdWVDb250ZXh0S2V5ID0gJ19fUmVhY3RET01TZWxlY3RfdmFsdWUkJyArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnNsaWNlKDIpO1xuXG5mdW5jdGlvbiB1cGRhdGVPcHRpb25zSWZQZW5kaW5nVXBkYXRlQW5kTW91bnRlZCgpIHtcbiAgaWYgKHRoaXMuX3Jvb3ROb2RlSUQgJiYgdGhpcy5fd3JhcHBlclN0YXRlLnBlbmRpbmdVcGRhdGUpIHtcbiAgICB0aGlzLl93cmFwcGVyU3RhdGUucGVuZGluZ1VwZGF0ZSA9IGZhbHNlO1xuXG4gICAgdmFyIHByb3BzID0gdGhpcy5fY3VycmVudEVsZW1lbnQucHJvcHM7XG4gICAgdmFyIHZhbHVlID0gTGlua2VkVmFsdWVVdGlscy5nZXRWYWx1ZShwcm9wcyk7XG5cbiAgICBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgdXBkYXRlT3B0aW9ucyh0aGlzLCBCb29sZWFuKHByb3BzLm11bHRpcGxlKSwgdmFsdWUpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0ob3duZXIpIHtcbiAgaWYgKG93bmVyKSB7XG4gICAgdmFyIG5hbWUgPSBvd25lci5nZXROYW1lKCk7XG4gICAgaWYgKG5hbWUpIHtcbiAgICAgIHJldHVybiAnIENoZWNrIHRoZSByZW5kZXIgbWV0aG9kIG9mIGAnICsgbmFtZSArICdgLic7XG4gICAgfVxuICB9XG4gIHJldHVybiAnJztcbn1cblxudmFyIHZhbHVlUHJvcE5hbWVzID0gWyd2YWx1ZScsICdkZWZhdWx0VmFsdWUnXTtcblxuLyoqXG4gKiBWYWxpZGF0aW9uIGZ1bmN0aW9uIGZvciBgdmFsdWVgIGFuZCBgZGVmYXVsdFZhbHVlYC5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGNoZWNrU2VsZWN0UHJvcFR5cGVzKGluc3QsIHByb3BzKSB7XG4gIHZhciBvd25lciA9IGluc3QuX2N1cnJlbnRFbGVtZW50Ll9vd25lcjtcbiAgTGlua2VkVmFsdWVVdGlscy5jaGVja1Byb3BUeXBlcygnc2VsZWN0JywgcHJvcHMsIG93bmVyKTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbHVlUHJvcE5hbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHByb3BOYW1lID0gdmFsdWVQcm9wTmFtZXNbaV07XG4gICAgaWYgKHByb3BzW3Byb3BOYW1lXSA9PSBudWxsKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKHByb3BzLm11bHRpcGxlKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhBcnJheS5pc0FycmF5KHByb3BzW3Byb3BOYW1lXSksICdUaGUgYCVzYCBwcm9wIHN1cHBsaWVkIHRvIDxzZWxlY3Q+IG11c3QgYmUgYW4gYXJyYXkgaWYgJyArICdgbXVsdGlwbGVgIGlzIHRydWUuJXMnLCBwcm9wTmFtZSwgZ2V0RGVjbGFyYXRpb25FcnJvckFkZGVuZHVtKG93bmVyKSkgOiB1bmRlZmluZWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKCFBcnJheS5pc0FycmF5KHByb3BzW3Byb3BOYW1lXSksICdUaGUgYCVzYCBwcm9wIHN1cHBsaWVkIHRvIDxzZWxlY3Q+IG11c3QgYmUgYSBzY2FsYXIgJyArICd2YWx1ZSBpZiBgbXVsdGlwbGVgIGlzIGZhbHNlLiVzJywgcHJvcE5hbWUsIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShvd25lcikpIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7UmVhY3RET01Db21wb25lbnR9IGluc3RcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gbXVsdGlwbGVcbiAqIEBwYXJhbSB7Kn0gcHJvcFZhbHVlIEEgc3RyaW5nYWJsZSAod2l0aCBgbXVsdGlwbGVgLCBhIGxpc3Qgb2Ygc3RyaW5nYWJsZXMpLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gdXBkYXRlT3B0aW9ucyhpbnN0LCBtdWx0aXBsZSwgcHJvcFZhbHVlKSB7XG4gIHZhciBzZWxlY3RlZFZhbHVlLCBpO1xuICB2YXIgb3B0aW9ucyA9IFJlYWN0TW91bnQuZ2V0Tm9kZShpbnN0Ll9yb290Tm9kZUlEKS5vcHRpb25zO1xuXG4gIGlmIChtdWx0aXBsZSkge1xuICAgIHNlbGVjdGVkVmFsdWUgPSB7fTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgcHJvcFZhbHVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICBzZWxlY3RlZFZhbHVlWycnICsgcHJvcFZhbHVlW2ldXSA9IHRydWU7XG4gICAgfVxuICAgIGZvciAoaSA9IDA7IGkgPCBvcHRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgc2VsZWN0ZWQgPSBzZWxlY3RlZFZhbHVlLmhhc093blByb3BlcnR5KG9wdGlvbnNbaV0udmFsdWUpO1xuICAgICAgaWYgKG9wdGlvbnNbaV0uc2VsZWN0ZWQgIT09IHNlbGVjdGVkKSB7XG4gICAgICAgIG9wdGlvbnNbaV0uc2VsZWN0ZWQgPSBzZWxlY3RlZDtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gRG8gbm90IHNldCBgc2VsZWN0LnZhbHVlYCBhcyBleGFjdCBiZWhhdmlvciBpc24ndCBjb25zaXN0ZW50IGFjcm9zcyBhbGxcbiAgICAvLyBicm93c2VycyBmb3IgYWxsIGNhc2VzLlxuICAgIHNlbGVjdGVkVmFsdWUgPSAnJyArIHByb3BWYWx1ZTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgb3B0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKG9wdGlvbnNbaV0udmFsdWUgPT09IHNlbGVjdGVkVmFsdWUpIHtcbiAgICAgICAgb3B0aW9uc1tpXS5zZWxlY3RlZCA9IHRydWU7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKG9wdGlvbnMubGVuZ3RoKSB7XG4gICAgICBvcHRpb25zWzBdLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBJbXBsZW1lbnRzIGEgPHNlbGVjdD4gbmF0aXZlIGNvbXBvbmVudCB0aGF0IGFsbG93cyBvcHRpb25hbGx5IHNldHRpbmcgdGhlXG4gKiBwcm9wcyBgdmFsdWVgIGFuZCBgZGVmYXVsdFZhbHVlYC4gSWYgYG11bHRpcGxlYCBpcyBmYWxzZSwgdGhlIHByb3AgbXVzdCBiZSBhXG4gKiBzdHJpbmdhYmxlLiBJZiBgbXVsdGlwbGVgIGlzIHRydWUsIHRoZSBwcm9wIG11c3QgYmUgYW4gYXJyYXkgb2Ygc3RyaW5nYWJsZXMuXG4gKlxuICogSWYgYHZhbHVlYCBpcyBub3Qgc3VwcGxpZWQgKG9yIG51bGwvdW5kZWZpbmVkKSwgdXNlciBhY3Rpb25zIHRoYXQgY2hhbmdlIHRoZVxuICogc2VsZWN0ZWQgb3B0aW9uIHdpbGwgdHJpZ2dlciB1cGRhdGVzIHRvIHRoZSByZW5kZXJlZCBvcHRpb25zLlxuICpcbiAqIElmIGl0IGlzIHN1cHBsaWVkIChhbmQgbm90IG51bGwvdW5kZWZpbmVkKSwgdGhlIHJlbmRlcmVkIG9wdGlvbnMgd2lsbCBub3RcbiAqIHVwZGF0ZSBpbiByZXNwb25zZSB0byB1c2VyIGFjdGlvbnMuIEluc3RlYWQsIHRoZSBgdmFsdWVgIHByb3AgbXVzdCBjaGFuZ2UgaW5cbiAqIG9yZGVyIGZvciB0aGUgcmVuZGVyZWQgb3B0aW9ucyB0byB1cGRhdGUuXG4gKlxuICogSWYgYGRlZmF1bHRWYWx1ZWAgaXMgcHJvdmlkZWQsIGFueSBvcHRpb25zIHdpdGggdGhlIHN1cHBsaWVkIHZhbHVlcyB3aWxsIGJlXG4gKiBzZWxlY3RlZC5cbiAqL1xudmFyIFJlYWN0RE9NU2VsZWN0ID0ge1xuICB2YWx1ZUNvbnRleHRLZXk6IHZhbHVlQ29udGV4dEtleSxcblxuICBnZXROYXRpdmVQcm9wczogZnVuY3Rpb24gKGluc3QsIHByb3BzLCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGFzc2lnbih7fSwgcHJvcHMsIHtcbiAgICAgIG9uQ2hhbmdlOiBpbnN0Ll93cmFwcGVyU3RhdGUub25DaGFuZ2UsXG4gICAgICB2YWx1ZTogdW5kZWZpbmVkXG4gICAgfSk7XG4gIH0sXG5cbiAgbW91bnRXcmFwcGVyOiBmdW5jdGlvbiAoaW5zdCwgcHJvcHMpIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgY2hlY2tTZWxlY3RQcm9wVHlwZXMoaW5zdCwgcHJvcHMpO1xuICAgIH1cblxuICAgIHZhciB2YWx1ZSA9IExpbmtlZFZhbHVlVXRpbHMuZ2V0VmFsdWUocHJvcHMpO1xuICAgIGluc3QuX3dyYXBwZXJTdGF0ZSA9IHtcbiAgICAgIHBlbmRpbmdVcGRhdGU6IGZhbHNlLFxuICAgICAgaW5pdGlhbFZhbHVlOiB2YWx1ZSAhPSBudWxsID8gdmFsdWUgOiBwcm9wcy5kZWZhdWx0VmFsdWUsXG4gICAgICBvbkNoYW5nZTogX2hhbmRsZUNoYW5nZS5iaW5kKGluc3QpLFxuICAgICAgd2FzTXVsdGlwbGU6IEJvb2xlYW4ocHJvcHMubXVsdGlwbGUpXG4gICAgfTtcbiAgfSxcblxuICBwcm9jZXNzQ2hpbGRDb250ZXh0OiBmdW5jdGlvbiAoaW5zdCwgcHJvcHMsIGNvbnRleHQpIHtcbiAgICAvLyBQYXNzIGRvd24gaW5pdGlhbCB2YWx1ZSBzbyBpbml0aWFsIGdlbmVyYXRlZCBtYXJrdXAgaGFzIGNvcnJlY3RcbiAgICAvLyBgc2VsZWN0ZWRgIGF0dHJpYnV0ZXNcbiAgICB2YXIgY2hpbGRDb250ZXh0ID0gYXNzaWduKHt9LCBjb250ZXh0KTtcbiAgICBjaGlsZENvbnRleHRbdmFsdWVDb250ZXh0S2V5XSA9IGluc3QuX3dyYXBwZXJTdGF0ZS5pbml0aWFsVmFsdWU7XG4gICAgcmV0dXJuIGNoaWxkQ29udGV4dDtcbiAgfSxcblxuICBwb3N0VXBkYXRlV3JhcHBlcjogZnVuY3Rpb24gKGluc3QpIHtcbiAgICB2YXIgcHJvcHMgPSBpbnN0Ll9jdXJyZW50RWxlbWVudC5wcm9wcztcblxuICAgIC8vIEFmdGVyIHRoZSBpbml0aWFsIG1vdW50LCB3ZSBjb250cm9sIHNlbGVjdGVkLW5lc3MgbWFudWFsbHkgc28gZG9uJ3QgcGFzc1xuICAgIC8vIHRoZSBjb250ZXh0IHZhbHVlIGRvd25cbiAgICBpbnN0Ll93cmFwcGVyU3RhdGUuaW5pdGlhbFZhbHVlID0gdW5kZWZpbmVkO1xuXG4gICAgdmFyIHdhc011bHRpcGxlID0gaW5zdC5fd3JhcHBlclN0YXRlLndhc011bHRpcGxlO1xuICAgIGluc3QuX3dyYXBwZXJTdGF0ZS53YXNNdWx0aXBsZSA9IEJvb2xlYW4ocHJvcHMubXVsdGlwbGUpO1xuXG4gICAgdmFyIHZhbHVlID0gTGlua2VkVmFsdWVVdGlscy5nZXRWYWx1ZShwcm9wcyk7XG4gICAgaWYgKHZhbHVlICE9IG51bGwpIHtcbiAgICAgIGluc3QuX3dyYXBwZXJTdGF0ZS5wZW5kaW5nVXBkYXRlID0gZmFsc2U7XG4gICAgICB1cGRhdGVPcHRpb25zKGluc3QsIEJvb2xlYW4ocHJvcHMubXVsdGlwbGUpLCB2YWx1ZSk7XG4gICAgfSBlbHNlIGlmICh3YXNNdWx0aXBsZSAhPT0gQm9vbGVhbihwcm9wcy5tdWx0aXBsZSkpIHtcbiAgICAgIC8vIEZvciBzaW1wbGljaXR5LCByZWFwcGx5IGBkZWZhdWx0VmFsdWVgIGlmIGBtdWx0aXBsZWAgaXMgdG9nZ2xlZC5cbiAgICAgIGlmIChwcm9wcy5kZWZhdWx0VmFsdWUgIT0gbnVsbCkge1xuICAgICAgICB1cGRhdGVPcHRpb25zKGluc3QsIEJvb2xlYW4ocHJvcHMubXVsdGlwbGUpLCBwcm9wcy5kZWZhdWx0VmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gUmV2ZXJ0IHRoZSBzZWxlY3QgYmFjayB0byBpdHMgZGVmYXVsdCB1bnNlbGVjdGVkIHN0YXRlLlxuICAgICAgICB1cGRhdGVPcHRpb25zKGluc3QsIEJvb2xlYW4ocHJvcHMubXVsdGlwbGUpLCBwcm9wcy5tdWx0aXBsZSA/IFtdIDogJycpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxuZnVuY3Rpb24gX2hhbmRsZUNoYW5nZShldmVudCkge1xuICB2YXIgcHJvcHMgPSB0aGlzLl9jdXJyZW50RWxlbWVudC5wcm9wcztcbiAgdmFyIHJldHVyblZhbHVlID0gTGlua2VkVmFsdWVVdGlscy5leGVjdXRlT25DaGFuZ2UocHJvcHMsIGV2ZW50KTtcblxuICB0aGlzLl93cmFwcGVyU3RhdGUucGVuZGluZ1VwZGF0ZSA9IHRydWU7XG4gIFJlYWN0VXBkYXRlcy5hc2FwKHVwZGF0ZU9wdGlvbnNJZlBlbmRpbmdVcGRhdGVBbmRNb3VudGVkLCB0aGlzKTtcbiAgcmV0dXJuIHJldHVyblZhbHVlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0RE9NU2VsZWN0O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvUmVhY3RET01TZWxlY3QuanNcbi8vIG1vZHVsZSBpZCA9IDExMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RET01UZXh0YXJlYVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIExpbmtlZFZhbHVlVXRpbHMgPSByZXF1aXJlKCcuL0xpbmtlZFZhbHVlVXRpbHMnKTtcbnZhciBSZWFjdERPTUlET3BlcmF0aW9ucyA9IHJlcXVpcmUoJy4vUmVhY3RET01JRE9wZXJhdGlvbnMnKTtcbnZhciBSZWFjdFVwZGF0ZXMgPSByZXF1aXJlKCcuL1JlYWN0VXBkYXRlcycpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxuZnVuY3Rpb24gZm9yY2VVcGRhdGVJZk1vdW50ZWQoKSB7XG4gIGlmICh0aGlzLl9yb290Tm9kZUlEKSB7XG4gICAgLy8gRE9NIGNvbXBvbmVudCBpcyBzdGlsbCBtb3VudGVkOyB1cGRhdGVcbiAgICBSZWFjdERPTVRleHRhcmVhLnVwZGF0ZVdyYXBwZXIodGhpcyk7XG4gIH1cbn1cblxuLyoqXG4gKiBJbXBsZW1lbnRzIGEgPHRleHRhcmVhPiBuYXRpdmUgY29tcG9uZW50IHRoYXQgYWxsb3dzIHNldHRpbmcgYHZhbHVlYCwgYW5kXG4gKiBgZGVmYXVsdFZhbHVlYC4gVGhpcyBkaWZmZXJzIGZyb20gdGhlIHRyYWRpdGlvbmFsIERPTSBBUEkgYmVjYXVzZSB2YWx1ZSBpc1xuICogdXN1YWxseSBzZXQgYXMgUENEQVRBIGNoaWxkcmVuLlxuICpcbiAqIElmIGB2YWx1ZWAgaXMgbm90IHN1cHBsaWVkIChvciBudWxsL3VuZGVmaW5lZCksIHVzZXIgYWN0aW9ucyB0aGF0IGFmZmVjdCB0aGVcbiAqIHZhbHVlIHdpbGwgdHJpZ2dlciB1cGRhdGVzIHRvIHRoZSBlbGVtZW50LlxuICpcbiAqIElmIGB2YWx1ZWAgaXMgc3VwcGxpZWQgKGFuZCBub3QgbnVsbC91bmRlZmluZWQpLCB0aGUgcmVuZGVyZWQgZWxlbWVudCB3aWxsXG4gKiBub3QgdHJpZ2dlciB1cGRhdGVzIHRvIHRoZSBlbGVtZW50LiBJbnN0ZWFkLCB0aGUgYHZhbHVlYCBwcm9wIG11c3QgY2hhbmdlIGluXG4gKiBvcmRlciBmb3IgdGhlIHJlbmRlcmVkIGVsZW1lbnQgdG8gYmUgdXBkYXRlZC5cbiAqXG4gKiBUaGUgcmVuZGVyZWQgZWxlbWVudCB3aWxsIGJlIGluaXRpYWxpemVkIHdpdGggYW4gZW1wdHkgdmFsdWUsIHRoZSBwcm9wXG4gKiBgZGVmYXVsdFZhbHVlYCBpZiBzcGVjaWZpZWQsIG9yIHRoZSBjaGlsZHJlbiBjb250ZW50IChkZXByZWNhdGVkKS5cbiAqL1xudmFyIFJlYWN0RE9NVGV4dGFyZWEgPSB7XG4gIGdldE5hdGl2ZVByb3BzOiBmdW5jdGlvbiAoaW5zdCwgcHJvcHMsIGNvbnRleHQpIHtcbiAgICAhKHByb3BzLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MID09IG51bGwpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2BkYW5nZXJvdXNseVNldElubmVySFRNTGAgZG9lcyBub3QgbWFrZSBzZW5zZSBvbiA8dGV4dGFyZWE+LicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIC8vIEFsd2F5cyBzZXQgY2hpbGRyZW4gdG8gdGhlIHNhbWUgdGhpbmcuIEluIElFOSwgdGhlIHNlbGVjdGlvbiByYW5nZSB3aWxsXG4gICAgLy8gZ2V0IHJlc2V0IGlmIGB0ZXh0Q29udGVudGAgaXMgbXV0YXRlZC5cbiAgICB2YXIgbmF0aXZlUHJvcHMgPSBhc3NpZ24oe30sIHByb3BzLCB7XG4gICAgICBkZWZhdWx0VmFsdWU6IHVuZGVmaW5lZCxcbiAgICAgIHZhbHVlOiB1bmRlZmluZWQsXG4gICAgICBjaGlsZHJlbjogaW5zdC5fd3JhcHBlclN0YXRlLmluaXRpYWxWYWx1ZSxcbiAgICAgIG9uQ2hhbmdlOiBpbnN0Ll93cmFwcGVyU3RhdGUub25DaGFuZ2VcbiAgICB9KTtcblxuICAgIHJldHVybiBuYXRpdmVQcm9wcztcbiAgfSxcblxuICBtb3VudFdyYXBwZXI6IGZ1bmN0aW9uIChpbnN0LCBwcm9wcykge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBMaW5rZWRWYWx1ZVV0aWxzLmNoZWNrUHJvcFR5cGVzKCd0ZXh0YXJlYScsIHByb3BzLCBpbnN0Ll9jdXJyZW50RWxlbWVudC5fb3duZXIpO1xuICAgIH1cblxuICAgIHZhciBkZWZhdWx0VmFsdWUgPSBwcm9wcy5kZWZhdWx0VmFsdWU7XG4gICAgLy8gVE9ETyAoeXVuZ3N0ZXJzKTogUmVtb3ZlIHN1cHBvcnQgZm9yIGNoaWxkcmVuIGNvbnRlbnQgaW4gPHRleHRhcmVhPi5cbiAgICB2YXIgY2hpbGRyZW4gPSBwcm9wcy5jaGlsZHJlbjtcbiAgICBpZiAoY2hpbGRyZW4gIT0gbnVsbCkge1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdVc2UgdGhlIGBkZWZhdWx0VmFsdWVgIG9yIGB2YWx1ZWAgcHJvcHMgaW5zdGVhZCBvZiBzZXR0aW5nICcgKyAnY2hpbGRyZW4gb24gPHRleHRhcmVhPi4nKSA6IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgICEoZGVmYXVsdFZhbHVlID09IG51bGwpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0lmIHlvdSBzdXBwbHkgYGRlZmF1bHRWYWx1ZWAgb24gYSA8dGV4dGFyZWE+LCBkbyBub3QgcGFzcyBjaGlsZHJlbi4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShjaGlsZHJlbikpIHtcbiAgICAgICAgIShjaGlsZHJlbi5sZW5ndGggPD0gMSkgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnPHRleHRhcmVhPiBjYW4gb25seSBoYXZlIGF0IG1vc3Qgb25lIGNoaWxkLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgY2hpbGRyZW4gPSBjaGlsZHJlblswXTtcbiAgICAgIH1cblxuICAgICAgZGVmYXVsdFZhbHVlID0gJycgKyBjaGlsZHJlbjtcbiAgICB9XG4gICAgaWYgKGRlZmF1bHRWYWx1ZSA9PSBudWxsKSB7XG4gICAgICBkZWZhdWx0VmFsdWUgPSAnJztcbiAgICB9XG4gICAgdmFyIHZhbHVlID0gTGlua2VkVmFsdWVVdGlscy5nZXRWYWx1ZShwcm9wcyk7XG5cbiAgICBpbnN0Ll93cmFwcGVyU3RhdGUgPSB7XG4gICAgICAvLyBXZSBzYXZlIHRoZSBpbml0aWFsIHZhbHVlIHNvIHRoYXQgYFJlYWN0RE9NQ29tcG9uZW50YCBkb2Vzbid0IHVwZGF0ZVxuICAgICAgLy8gYHRleHRDb250ZW50YCAodW5uZWNlc3Nhcnkgc2luY2Ugd2UgdXBkYXRlIHZhbHVlKS5cbiAgICAgIC8vIFRoZSBpbml0aWFsIHZhbHVlIGNhbiBiZSBhIGJvb2xlYW4gb3Igb2JqZWN0IHNvIHRoYXQncyB3aHkgaXQnc1xuICAgICAgLy8gZm9yY2VkIHRvIGJlIGEgc3RyaW5nLlxuICAgICAgaW5pdGlhbFZhbHVlOiAnJyArICh2YWx1ZSAhPSBudWxsID8gdmFsdWUgOiBkZWZhdWx0VmFsdWUpLFxuICAgICAgb25DaGFuZ2U6IF9oYW5kbGVDaGFuZ2UuYmluZChpbnN0KVxuICAgIH07XG4gIH0sXG5cbiAgdXBkYXRlV3JhcHBlcjogZnVuY3Rpb24gKGluc3QpIHtcbiAgICB2YXIgcHJvcHMgPSBpbnN0Ll9jdXJyZW50RWxlbWVudC5wcm9wcztcbiAgICB2YXIgdmFsdWUgPSBMaW5rZWRWYWx1ZVV0aWxzLmdldFZhbHVlKHByb3BzKTtcbiAgICBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgLy8gQ2FzdCBgdmFsdWVgIHRvIGEgc3RyaW5nIHRvIGVuc3VyZSB0aGUgdmFsdWUgaXMgc2V0IGNvcnJlY3RseS4gV2hpbGVcbiAgICAgIC8vIGJyb3dzZXJzIHR5cGljYWxseSBkbyB0aGlzIGFzIG5lY2Vzc2FyeSwganNkb20gZG9lc24ndC5cbiAgICAgIFJlYWN0RE9NSURPcGVyYXRpb25zLnVwZGF0ZVByb3BlcnR5QnlJRChpbnN0Ll9yb290Tm9kZUlELCAndmFsdWUnLCAnJyArIHZhbHVlKTtcbiAgICB9XG4gIH1cbn07XG5cbmZ1bmN0aW9uIF9oYW5kbGVDaGFuZ2UoZXZlbnQpIHtcbiAgdmFyIHByb3BzID0gdGhpcy5fY3VycmVudEVsZW1lbnQucHJvcHM7XG4gIHZhciByZXR1cm5WYWx1ZSA9IExpbmtlZFZhbHVlVXRpbHMuZXhlY3V0ZU9uQ2hhbmdlKHByb3BzLCBldmVudCk7XG4gIFJlYWN0VXBkYXRlcy5hc2FwKGZvcmNlVXBkYXRlSWZNb3VudGVkLCB0aGlzKTtcbiAgcmV0dXJuIHJldHVyblZhbHVlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0RE9NVGV4dGFyZWE7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0L2xpYi9SZWFjdERPTVRleHRhcmVhLmpzXG4vLyBtb2R1bGUgaWQgPSAxMTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0TXVsdGlDaGlsZFxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdENvbXBvbmVudEVudmlyb25tZW50ID0gcmVxdWlyZSgnLi9SZWFjdENvbXBvbmVudEVudmlyb25tZW50Jyk7XG52YXIgUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMgPSByZXF1aXJlKCcuL1JlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzJyk7XG5cbnZhciBSZWFjdEN1cnJlbnRPd25lciA9IHJlcXVpcmUoJy4vUmVhY3RDdXJyZW50T3duZXInKTtcbnZhciBSZWFjdFJlY29uY2lsZXIgPSByZXF1aXJlKCcuL1JlYWN0UmVjb25jaWxlcicpO1xudmFyIFJlYWN0Q2hpbGRSZWNvbmNpbGVyID0gcmVxdWlyZSgnLi9SZWFjdENoaWxkUmVjb25jaWxlcicpO1xuXG52YXIgZmxhdHRlbkNoaWxkcmVuID0gcmVxdWlyZSgnLi9mbGF0dGVuQ2hpbGRyZW4nKTtcblxuLyoqXG4gKiBVcGRhdGluZyBjaGlsZHJlbiBvZiBhIGNvbXBvbmVudCBtYXkgdHJpZ2dlciByZWN1cnNpdmUgdXBkYXRlcy4gVGhlIGRlcHRoIGlzXG4gKiB1c2VkIHRvIGJhdGNoIHJlY3Vyc2l2ZSB1cGRhdGVzIHRvIHJlbmRlciBtYXJrdXAgbW9yZSBlZmZpY2llbnRseS5cbiAqXG4gKiBAdHlwZSB7bnVtYmVyfVxuICogQHByaXZhdGVcbiAqL1xudmFyIHVwZGF0ZURlcHRoID0gMDtcblxuLyoqXG4gKiBRdWV1ZSBvZiB1cGRhdGUgY29uZmlndXJhdGlvbiBvYmplY3RzLlxuICpcbiAqIEVhY2ggb2JqZWN0IGhhcyBhIGB0eXBlYCBwcm9wZXJ0eSB0aGF0IGlzIGluIGBSZWFjdE11bHRpQ2hpbGRVcGRhdGVUeXBlc2AuXG4gKlxuICogQHR5cGUge2FycmF5PG9iamVjdD59XG4gKiBAcHJpdmF0ZVxuICovXG52YXIgdXBkYXRlUXVldWUgPSBbXTtcblxuLyoqXG4gKiBRdWV1ZSBvZiBtYXJrdXAgdG8gYmUgcmVuZGVyZWQuXG4gKlxuICogQHR5cGUge2FycmF5PHN0cmluZz59XG4gKiBAcHJpdmF0ZVxuICovXG52YXIgbWFya3VwUXVldWUgPSBbXTtcblxuLyoqXG4gKiBFbnF1ZXVlcyBtYXJrdXAgdG8gYmUgcmVuZGVyZWQgYW5kIGluc2VydGVkIGF0IGEgc3VwcGxpZWQgaW5kZXguXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHBhcmVudElEIElEIG9mIHRoZSBwYXJlbnQgY29tcG9uZW50LlxuICogQHBhcmFtIHtzdHJpbmd9IG1hcmt1cCBNYXJrdXAgdGhhdCByZW5kZXJzIGludG8gYW4gZWxlbWVudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0b0luZGV4IERlc3RpbmF0aW9uIGluZGV4LlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZW5xdWV1ZUluc2VydE1hcmt1cChwYXJlbnRJRCwgbWFya3VwLCB0b0luZGV4KSB7XG4gIC8vIE5PVEU6IE51bGwgdmFsdWVzIHJlZHVjZSBoaWRkZW4gY2xhc3Nlcy5cbiAgdXBkYXRlUXVldWUucHVzaCh7XG4gICAgcGFyZW50SUQ6IHBhcmVudElELFxuICAgIHBhcmVudE5vZGU6IG51bGwsXG4gICAgdHlwZTogUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMuSU5TRVJUX01BUktVUCxcbiAgICBtYXJrdXBJbmRleDogbWFya3VwUXVldWUucHVzaChtYXJrdXApIC0gMSxcbiAgICBjb250ZW50OiBudWxsLFxuICAgIGZyb21JbmRleDogbnVsbCxcbiAgICB0b0luZGV4OiB0b0luZGV4XG4gIH0pO1xufVxuXG4vKipcbiAqIEVucXVldWVzIG1vdmluZyBhbiBleGlzdGluZyBlbGVtZW50IHRvIGFub3RoZXIgaW5kZXguXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHBhcmVudElEIElEIG9mIHRoZSBwYXJlbnQgY29tcG9uZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IGZyb21JbmRleCBTb3VyY2UgaW5kZXggb2YgdGhlIGV4aXN0aW5nIGVsZW1lbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gdG9JbmRleCBEZXN0aW5hdGlvbiBpbmRleCBvZiB0aGUgZWxlbWVudC5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGVucXVldWVNb3ZlKHBhcmVudElELCBmcm9tSW5kZXgsIHRvSW5kZXgpIHtcbiAgLy8gTk9URTogTnVsbCB2YWx1ZXMgcmVkdWNlIGhpZGRlbiBjbGFzc2VzLlxuICB1cGRhdGVRdWV1ZS5wdXNoKHtcbiAgICBwYXJlbnRJRDogcGFyZW50SUQsXG4gICAgcGFyZW50Tm9kZTogbnVsbCxcbiAgICB0eXBlOiBSZWFjdE11bHRpQ2hpbGRVcGRhdGVUeXBlcy5NT1ZFX0VYSVNUSU5HLFxuICAgIG1hcmt1cEluZGV4OiBudWxsLFxuICAgIGNvbnRlbnQ6IG51bGwsXG4gICAgZnJvbUluZGV4OiBmcm9tSW5kZXgsXG4gICAgdG9JbmRleDogdG9JbmRleFxuICB9KTtcbn1cblxuLyoqXG4gKiBFbnF1ZXVlcyByZW1vdmluZyBhbiBlbGVtZW50IGF0IGFuIGluZGV4LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXJlbnRJRCBJRCBvZiB0aGUgcGFyZW50IGNvbXBvbmVudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBmcm9tSW5kZXggSW5kZXggb2YgdGhlIGVsZW1lbnQgdG8gcmVtb3ZlLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZW5xdWV1ZVJlbW92ZShwYXJlbnRJRCwgZnJvbUluZGV4KSB7XG4gIC8vIE5PVEU6IE51bGwgdmFsdWVzIHJlZHVjZSBoaWRkZW4gY2xhc3Nlcy5cbiAgdXBkYXRlUXVldWUucHVzaCh7XG4gICAgcGFyZW50SUQ6IHBhcmVudElELFxuICAgIHBhcmVudE5vZGU6IG51bGwsXG4gICAgdHlwZTogUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMuUkVNT1ZFX05PREUsXG4gICAgbWFya3VwSW5kZXg6IG51bGwsXG4gICAgY29udGVudDogbnVsbCxcbiAgICBmcm9tSW5kZXg6IGZyb21JbmRleCxcbiAgICB0b0luZGV4OiBudWxsXG4gIH0pO1xufVxuXG4vKipcbiAqIEVucXVldWVzIHNldHRpbmcgdGhlIG1hcmt1cCBvZiBhIG5vZGUuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHBhcmVudElEIElEIG9mIHRoZSBwYXJlbnQgY29tcG9uZW50LlxuICogQHBhcmFtIHtzdHJpbmd9IG1hcmt1cCBNYXJrdXAgdGhhdCByZW5kZXJzIGludG8gYW4gZWxlbWVudC5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGVucXVldWVTZXRNYXJrdXAocGFyZW50SUQsIG1hcmt1cCkge1xuICAvLyBOT1RFOiBOdWxsIHZhbHVlcyByZWR1Y2UgaGlkZGVuIGNsYXNzZXMuXG4gIHVwZGF0ZVF1ZXVlLnB1c2goe1xuICAgIHBhcmVudElEOiBwYXJlbnRJRCxcbiAgICBwYXJlbnROb2RlOiBudWxsLFxuICAgIHR5cGU6IFJlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzLlNFVF9NQVJLVVAsXG4gICAgbWFya3VwSW5kZXg6IG51bGwsXG4gICAgY29udGVudDogbWFya3VwLFxuICAgIGZyb21JbmRleDogbnVsbCxcbiAgICB0b0luZGV4OiBudWxsXG4gIH0pO1xufVxuXG4vKipcbiAqIEVucXVldWVzIHNldHRpbmcgdGhlIHRleHQgY29udGVudC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcGFyZW50SUQgSUQgb2YgdGhlIHBhcmVudCBjb21wb25lbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gdGV4dENvbnRlbnQgVGV4dCBjb250ZW50IHRvIHNldC5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGVucXVldWVUZXh0Q29udGVudChwYXJlbnRJRCwgdGV4dENvbnRlbnQpIHtcbiAgLy8gTk9URTogTnVsbCB2YWx1ZXMgcmVkdWNlIGhpZGRlbiBjbGFzc2VzLlxuICB1cGRhdGVRdWV1ZS5wdXNoKHtcbiAgICBwYXJlbnRJRDogcGFyZW50SUQsXG4gICAgcGFyZW50Tm9kZTogbnVsbCxcbiAgICB0eXBlOiBSZWFjdE11bHRpQ2hpbGRVcGRhdGVUeXBlcy5URVhUX0NPTlRFTlQsXG4gICAgbWFya3VwSW5kZXg6IG51bGwsXG4gICAgY29udGVudDogdGV4dENvbnRlbnQsXG4gICAgZnJvbUluZGV4OiBudWxsLFxuICAgIHRvSW5kZXg6IG51bGxcbiAgfSk7XG59XG5cbi8qKlxuICogUHJvY2Vzc2VzIGFueSBlbnF1ZXVlZCB1cGRhdGVzLlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHByb2Nlc3NRdWV1ZSgpIHtcbiAgaWYgKHVwZGF0ZVF1ZXVlLmxlbmd0aCkge1xuICAgIFJlYWN0Q29tcG9uZW50RW52aXJvbm1lbnQucHJvY2Vzc0NoaWxkcmVuVXBkYXRlcyh1cGRhdGVRdWV1ZSwgbWFya3VwUXVldWUpO1xuICAgIGNsZWFyUXVldWUoKTtcbiAgfVxufVxuXG4vKipcbiAqIENsZWFycyBhbnkgZW5xdWV1ZWQgdXBkYXRlcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBjbGVhclF1ZXVlKCkge1xuICB1cGRhdGVRdWV1ZS5sZW5ndGggPSAwO1xuICBtYXJrdXBRdWV1ZS5sZW5ndGggPSAwO1xufVxuXG4vKipcbiAqIFJlYWN0TXVsdGlDaGlsZCBhcmUgY2FwYWJsZSBvZiByZWNvbmNpbGluZyBtdWx0aXBsZSBjaGlsZHJlbi5cbiAqXG4gKiBAY2xhc3MgUmVhY3RNdWx0aUNoaWxkXG4gKiBAaW50ZXJuYWxcbiAqL1xudmFyIFJlYWN0TXVsdGlDaGlsZCA9IHtcblxuICAvKipcbiAgICogUHJvdmlkZXMgY29tbW9uIGZ1bmN0aW9uYWxpdHkgZm9yIGNvbXBvbmVudHMgdGhhdCBtdXN0IHJlY29uY2lsZSBtdWx0aXBsZVxuICAgKiBjaGlsZHJlbi4gVGhpcyBpcyB1c2VkIGJ5IGBSZWFjdERPTUNvbXBvbmVudGAgdG8gbW91bnQsIHVwZGF0ZSwgYW5kXG4gICAqIHVubW91bnQgY2hpbGQgY29tcG9uZW50cy5cbiAgICpcbiAgICogQGxlbmRzIHtSZWFjdE11bHRpQ2hpbGQucHJvdG90eXBlfVxuICAgKi9cbiAgTWl4aW46IHtcblxuICAgIF9yZWNvbmNpbGVySW5zdGFudGlhdGVDaGlsZHJlbjogZnVuY3Rpb24gKG5lc3RlZENoaWxkcmVuLCB0cmFuc2FjdGlvbiwgY29udGV4dCkge1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgaWYgKHRoaXMuX2N1cnJlbnRFbGVtZW50KSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQgPSB0aGlzLl9jdXJyZW50RWxlbWVudC5fb3duZXI7XG4gICAgICAgICAgICByZXR1cm4gUmVhY3RDaGlsZFJlY29uY2lsZXIuaW5zdGFudGlhdGVDaGlsZHJlbihuZXN0ZWRDaGlsZHJlbiwgdHJhbnNhY3Rpb24sIGNvbnRleHQpO1xuICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBSZWFjdENoaWxkUmVjb25jaWxlci5pbnN0YW50aWF0ZUNoaWxkcmVuKG5lc3RlZENoaWxkcmVuLCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG4gICAgfSxcblxuICAgIF9yZWNvbmNpbGVyVXBkYXRlQ2hpbGRyZW46IGZ1bmN0aW9uIChwcmV2Q2hpbGRyZW4sIG5leHROZXN0ZWRDaGlsZHJlbkVsZW1lbnRzLCB0cmFuc2FjdGlvbiwgY29udGV4dCkge1xuICAgICAgdmFyIG5leHRDaGlsZHJlbjtcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGlmICh0aGlzLl9jdXJyZW50RWxlbWVudCkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50ID0gdGhpcy5fY3VycmVudEVsZW1lbnQuX293bmVyO1xuICAgICAgICAgICAgbmV4dENoaWxkcmVuID0gZmxhdHRlbkNoaWxkcmVuKG5leHROZXN0ZWRDaGlsZHJlbkVsZW1lbnRzKTtcbiAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgUmVhY3RDdXJyZW50T3duZXIuY3VycmVudCA9IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBSZWFjdENoaWxkUmVjb25jaWxlci51cGRhdGVDaGlsZHJlbihwcmV2Q2hpbGRyZW4sIG5leHRDaGlsZHJlbiwgdHJhbnNhY3Rpb24sIGNvbnRleHQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBuZXh0Q2hpbGRyZW4gPSBmbGF0dGVuQ2hpbGRyZW4obmV4dE5lc3RlZENoaWxkcmVuRWxlbWVudHMpO1xuICAgICAgcmV0dXJuIFJlYWN0Q2hpbGRSZWNvbmNpbGVyLnVwZGF0ZUNoaWxkcmVuKHByZXZDaGlsZHJlbiwgbmV4dENoaWxkcmVuLCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlcyBhIFwibW91bnQgaW1hZ2VcIiBmb3IgZWFjaCBvZiB0aGUgc3VwcGxpZWQgY2hpbGRyZW4uIEluIHRoZSBjYXNlXG4gICAgICogb2YgYFJlYWN0RE9NQ29tcG9uZW50YCwgYSBtb3VudCBpbWFnZSBpcyBhIHN0cmluZyBvZiBtYXJrdXAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gez9vYmplY3R9IG5lc3RlZENoaWxkcmVuIE5lc3RlZCBjaGlsZCBtYXBzLlxuICAgICAqIEByZXR1cm4ge2FycmF5fSBBbiBhcnJheSBvZiBtb3VudGVkIHJlcHJlc2VudGF0aW9ucy5cbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBtb3VudENoaWxkcmVuOiBmdW5jdGlvbiAobmVzdGVkQ2hpbGRyZW4sIHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG4gICAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLl9yZWNvbmNpbGVySW5zdGFudGlhdGVDaGlsZHJlbihuZXN0ZWRDaGlsZHJlbiwgdHJhbnNhY3Rpb24sIGNvbnRleHQpO1xuICAgICAgdGhpcy5fcmVuZGVyZWRDaGlsZHJlbiA9IGNoaWxkcmVuO1xuICAgICAgdmFyIG1vdW50SW1hZ2VzID0gW107XG4gICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgZm9yICh2YXIgbmFtZSBpbiBjaGlsZHJlbikge1xuICAgICAgICBpZiAoY2hpbGRyZW4uaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICB2YXIgY2hpbGQgPSBjaGlsZHJlbltuYW1lXTtcbiAgICAgICAgICAvLyBJbmxpbmVkIGZvciBwZXJmb3JtYW5jZSwgc2VlIGBSZWFjdEluc3RhbmNlSGFuZGxlcy5jcmVhdGVSZWFjdElEYC5cbiAgICAgICAgICB2YXIgcm9vdElEID0gdGhpcy5fcm9vdE5vZGVJRCArIG5hbWU7XG4gICAgICAgICAgdmFyIG1vdW50SW1hZ2UgPSBSZWFjdFJlY29uY2lsZXIubW91bnRDb21wb25lbnQoY2hpbGQsIHJvb3RJRCwgdHJhbnNhY3Rpb24sIGNvbnRleHQpO1xuICAgICAgICAgIGNoaWxkLl9tb3VudEluZGV4ID0gaW5kZXgrKztcbiAgICAgICAgICBtb3VudEltYWdlcy5wdXNoKG1vdW50SW1hZ2UpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gbW91bnRJbWFnZXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJlcGxhY2VzIGFueSByZW5kZXJlZCBjaGlsZHJlbiB3aXRoIGEgdGV4dCBjb250ZW50IHN0cmluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuZXh0Q29udGVudCBTdHJpbmcgb2YgY29udGVudC5cbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICB1cGRhdGVUZXh0Q29udGVudDogZnVuY3Rpb24gKG5leHRDb250ZW50KSB7XG4gICAgICB1cGRhdGVEZXB0aCsrO1xuICAgICAgdmFyIGVycm9yVGhyb3duID0gdHJ1ZTtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciBwcmV2Q2hpbGRyZW4gPSB0aGlzLl9yZW5kZXJlZENoaWxkcmVuO1xuICAgICAgICAvLyBSZW1vdmUgYW55IHJlbmRlcmVkIGNoaWxkcmVuLlxuICAgICAgICBSZWFjdENoaWxkUmVjb25jaWxlci51bm1vdW50Q2hpbGRyZW4ocHJldkNoaWxkcmVuKTtcbiAgICAgICAgLy8gVE9ETzogVGhlIHNldFRleHRDb250ZW50IG9wZXJhdGlvbiBzaG91bGQgYmUgZW5vdWdoXG4gICAgICAgIGZvciAodmFyIG5hbWUgaW4gcHJldkNoaWxkcmVuKSB7XG4gICAgICAgICAgaWYgKHByZXZDaGlsZHJlbi5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICAgICAgdGhpcy5fdW5tb3VudENoaWxkKHByZXZDaGlsZHJlbltuYW1lXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIFNldCBuZXcgdGV4dCBjb250ZW50LlxuICAgICAgICB0aGlzLnNldFRleHRDb250ZW50KG5leHRDb250ZW50KTtcbiAgICAgICAgZXJyb3JUaHJvd24gPSBmYWxzZTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHVwZGF0ZURlcHRoLS07XG4gICAgICAgIGlmICghdXBkYXRlRGVwdGgpIHtcbiAgICAgICAgICBpZiAoZXJyb3JUaHJvd24pIHtcbiAgICAgICAgICAgIGNsZWFyUXVldWUoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcHJvY2Vzc1F1ZXVlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJlcGxhY2VzIGFueSByZW5kZXJlZCBjaGlsZHJlbiB3aXRoIGEgbWFya3VwIHN0cmluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuZXh0TWFya3VwIFN0cmluZyBvZiBtYXJrdXAuXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdXBkYXRlTWFya3VwOiBmdW5jdGlvbiAobmV4dE1hcmt1cCkge1xuICAgICAgdXBkYXRlRGVwdGgrKztcbiAgICAgIHZhciBlcnJvclRocm93biA9IHRydWU7XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgcHJldkNoaWxkcmVuID0gdGhpcy5fcmVuZGVyZWRDaGlsZHJlbjtcbiAgICAgICAgLy8gUmVtb3ZlIGFueSByZW5kZXJlZCBjaGlsZHJlbi5cbiAgICAgICAgUmVhY3RDaGlsZFJlY29uY2lsZXIudW5tb3VudENoaWxkcmVuKHByZXZDaGlsZHJlbik7XG4gICAgICAgIGZvciAodmFyIG5hbWUgaW4gcHJldkNoaWxkcmVuKSB7XG4gICAgICAgICAgaWYgKHByZXZDaGlsZHJlbi5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICAgICAgdGhpcy5fdW5tb3VudENoaWxkQnlOYW1lKHByZXZDaGlsZHJlbltuYW1lXSwgbmFtZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0TWFya3VwKG5leHRNYXJrdXApO1xuICAgICAgICBlcnJvclRocm93biA9IGZhbHNlO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgdXBkYXRlRGVwdGgtLTtcbiAgICAgICAgaWYgKCF1cGRhdGVEZXB0aCkge1xuICAgICAgICAgIGlmIChlcnJvclRocm93bikge1xuICAgICAgICAgICAgY2xlYXJRdWV1ZSgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwcm9jZXNzUXVldWUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgcmVuZGVyZWQgY2hpbGRyZW4gd2l0aCBuZXcgY2hpbGRyZW4uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gez9vYmplY3R9IG5leHROZXN0ZWRDaGlsZHJlbkVsZW1lbnRzIE5lc3RlZCBjaGlsZCBlbGVtZW50IG1hcHMuXG4gICAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHVwZGF0ZUNoaWxkcmVuOiBmdW5jdGlvbiAobmV4dE5lc3RlZENoaWxkcmVuRWxlbWVudHMsIHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG4gICAgICB1cGRhdGVEZXB0aCsrO1xuICAgICAgdmFyIGVycm9yVGhyb3duID0gdHJ1ZTtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZUNoaWxkcmVuKG5leHROZXN0ZWRDaGlsZHJlbkVsZW1lbnRzLCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG4gICAgICAgIGVycm9yVGhyb3duID0gZmFsc2U7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICB1cGRhdGVEZXB0aC0tO1xuICAgICAgICBpZiAoIXVwZGF0ZURlcHRoKSB7XG4gICAgICAgICAgaWYgKGVycm9yVGhyb3duKSB7XG4gICAgICAgICAgICBjbGVhclF1ZXVlKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHByb2Nlc3NRdWV1ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBJbXByb3ZlIHBlcmZvcm1hbmNlIGJ5IGlzb2xhdGluZyB0aGlzIGhvdCBjb2RlIHBhdGggZnJvbSB0aGUgdHJ5L2NhdGNoXG4gICAgICogYmxvY2sgaW4gYHVwZGF0ZUNoaWxkcmVuYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7P29iamVjdH0gbmV4dE5lc3RlZENoaWxkcmVuRWxlbWVudHMgTmVzdGVkIGNoaWxkIGVsZW1lbnQgbWFwcy5cbiAgICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAgICogQGZpbmFsXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIF91cGRhdGVDaGlsZHJlbjogZnVuY3Rpb24gKG5leHROZXN0ZWRDaGlsZHJlbkVsZW1lbnRzLCB0cmFuc2FjdGlvbiwgY29udGV4dCkge1xuICAgICAgdmFyIHByZXZDaGlsZHJlbiA9IHRoaXMuX3JlbmRlcmVkQ2hpbGRyZW47XG4gICAgICB2YXIgbmV4dENoaWxkcmVuID0gdGhpcy5fcmVjb25jaWxlclVwZGF0ZUNoaWxkcmVuKHByZXZDaGlsZHJlbiwgbmV4dE5lc3RlZENoaWxkcmVuRWxlbWVudHMsIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcbiAgICAgIHRoaXMuX3JlbmRlcmVkQ2hpbGRyZW4gPSBuZXh0Q2hpbGRyZW47XG4gICAgICBpZiAoIW5leHRDaGlsZHJlbiAmJiAhcHJldkNoaWxkcmVuKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHZhciBuYW1lO1xuICAgICAgLy8gYG5leHRJbmRleGAgd2lsbCBpbmNyZW1lbnQgZm9yIGVhY2ggY2hpbGQgaW4gYG5leHRDaGlsZHJlbmAsIGJ1dFxuICAgICAgLy8gYGxhc3RJbmRleGAgd2lsbCBiZSB0aGUgbGFzdCBpbmRleCB2aXNpdGVkIGluIGBwcmV2Q2hpbGRyZW5gLlxuICAgICAgdmFyIGxhc3RJbmRleCA9IDA7XG4gICAgICB2YXIgbmV4dEluZGV4ID0gMDtcbiAgICAgIGZvciAobmFtZSBpbiBuZXh0Q2hpbGRyZW4pIHtcbiAgICAgICAgaWYgKCFuZXh0Q2hpbGRyZW4uaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcHJldkNoaWxkID0gcHJldkNoaWxkcmVuICYmIHByZXZDaGlsZHJlbltuYW1lXTtcbiAgICAgICAgdmFyIG5leHRDaGlsZCA9IG5leHRDaGlsZHJlbltuYW1lXTtcbiAgICAgICAgaWYgKHByZXZDaGlsZCA9PT0gbmV4dENoaWxkKSB7XG4gICAgICAgICAgdGhpcy5tb3ZlQ2hpbGQocHJldkNoaWxkLCBuZXh0SW5kZXgsIGxhc3RJbmRleCk7XG4gICAgICAgICAgbGFzdEluZGV4ID0gTWF0aC5tYXgocHJldkNoaWxkLl9tb3VudEluZGV4LCBsYXN0SW5kZXgpO1xuICAgICAgICAgIHByZXZDaGlsZC5fbW91bnRJbmRleCA9IG5leHRJbmRleDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAocHJldkNoaWxkKSB7XG4gICAgICAgICAgICAvLyBVcGRhdGUgYGxhc3RJbmRleGAgYmVmb3JlIGBfbW91bnRJbmRleGAgZ2V0cyB1bnNldCBieSB1bm1vdW50aW5nLlxuICAgICAgICAgICAgbGFzdEluZGV4ID0gTWF0aC5tYXgocHJldkNoaWxkLl9tb3VudEluZGV4LCBsYXN0SW5kZXgpO1xuICAgICAgICAgICAgdGhpcy5fdW5tb3VudENoaWxkKHByZXZDaGlsZCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIFRoZSBjaGlsZCBtdXN0IGJlIGluc3RhbnRpYXRlZCBiZWZvcmUgaXQncyBtb3VudGVkLlxuICAgICAgICAgIHRoaXMuX21vdW50Q2hpbGRCeU5hbWVBdEluZGV4KG5leHRDaGlsZCwgbmFtZSwgbmV4dEluZGV4LCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgbmV4dEluZGV4Kys7XG4gICAgICB9XG4gICAgICAvLyBSZW1vdmUgY2hpbGRyZW4gdGhhdCBhcmUgbm8gbG9uZ2VyIHByZXNlbnQuXG4gICAgICBmb3IgKG5hbWUgaW4gcHJldkNoaWxkcmVuKSB7XG4gICAgICAgIGlmIChwcmV2Q2hpbGRyZW4uaGFzT3duUHJvcGVydHkobmFtZSkgJiYgIShuZXh0Q2hpbGRyZW4gJiYgbmV4dENoaWxkcmVuLmhhc093blByb3BlcnR5KG5hbWUpKSkge1xuICAgICAgICAgIHRoaXMuX3VubW91bnRDaGlsZChwcmV2Q2hpbGRyZW5bbmFtZV0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFVubW91bnRzIGFsbCByZW5kZXJlZCBjaGlsZHJlbi4gVGhpcyBzaG91bGQgYmUgdXNlZCB0byBjbGVhbiB1cCBjaGlsZHJlblxuICAgICAqIHdoZW4gdGhpcyBjb21wb25lbnQgaXMgdW5tb3VudGVkLlxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdW5tb3VudENoaWxkcmVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgcmVuZGVyZWRDaGlsZHJlbiA9IHRoaXMuX3JlbmRlcmVkQ2hpbGRyZW47XG4gICAgICBSZWFjdENoaWxkUmVjb25jaWxlci51bm1vdW50Q2hpbGRyZW4ocmVuZGVyZWRDaGlsZHJlbik7XG4gICAgICB0aGlzLl9yZW5kZXJlZENoaWxkcmVuID0gbnVsbDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTW92ZXMgYSBjaGlsZCBjb21wb25lbnQgdG8gdGhlIHN1cHBsaWVkIGluZGV4LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gY2hpbGQgQ29tcG9uZW50IHRvIG1vdmUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHRvSW5kZXggRGVzdGluYXRpb24gaW5kZXggb2YgdGhlIGVsZW1lbnQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGxhc3RJbmRleCBMYXN0IGluZGV4IHZpc2l0ZWQgb2YgdGhlIHNpYmxpbmdzIG9mIGBjaGlsZGAuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIG1vdmVDaGlsZDogZnVuY3Rpb24gKGNoaWxkLCB0b0luZGV4LCBsYXN0SW5kZXgpIHtcbiAgICAgIC8vIElmIHRoZSBpbmRleCBvZiBgY2hpbGRgIGlzIGxlc3MgdGhhbiBgbGFzdEluZGV4YCwgdGhlbiBpdCBuZWVkcyB0b1xuICAgICAgLy8gYmUgbW92ZWQuIE90aGVyd2lzZSwgd2UgZG8gbm90IG5lZWQgdG8gbW92ZSBpdCBiZWNhdXNlIGEgY2hpbGQgd2lsbCBiZVxuICAgICAgLy8gaW5zZXJ0ZWQgb3IgbW92ZWQgYmVmb3JlIGBjaGlsZGAuXG4gICAgICBpZiAoY2hpbGQuX21vdW50SW5kZXggPCBsYXN0SW5kZXgpIHtcbiAgICAgICAgZW5xdWV1ZU1vdmUodGhpcy5fcm9vdE5vZGVJRCwgY2hpbGQuX21vdW50SW5kZXgsIHRvSW5kZXgpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgY2hpbGQgY29tcG9uZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gY2hpbGQgQ29tcG9uZW50IHRvIGNyZWF0ZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbW91bnRJbWFnZSBNYXJrdXAgdG8gaW5zZXJ0LlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBjcmVhdGVDaGlsZDogZnVuY3Rpb24gKGNoaWxkLCBtb3VudEltYWdlKSB7XG4gICAgICBlbnF1ZXVlSW5zZXJ0TWFya3VwKHRoaXMuX3Jvb3ROb2RlSUQsIG1vdW50SW1hZ2UsIGNoaWxkLl9tb3VudEluZGV4KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIGNoaWxkIGNvbXBvbmVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UmVhY3RDb21wb25lbnR9IGNoaWxkIENoaWxkIHRvIHJlbW92ZS5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgcmVtb3ZlQ2hpbGQ6IGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgZW5xdWV1ZVJlbW92ZSh0aGlzLl9yb290Tm9kZUlELCBjaGlsZC5fbW91bnRJbmRleCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhpcyB0ZXh0IGNvbnRlbnQgc3RyaW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRleHRDb250ZW50IFRleHQgY29udGVudCB0byBzZXQuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIHNldFRleHRDb250ZW50OiBmdW5jdGlvbiAodGV4dENvbnRlbnQpIHtcbiAgICAgIGVucXVldWVUZXh0Q29udGVudCh0aGlzLl9yb290Tm9kZUlELCB0ZXh0Q29udGVudCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhpcyBtYXJrdXAgc3RyaW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1hcmt1cCBNYXJrdXAgdG8gc2V0LlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBzZXRNYXJrdXA6IGZ1bmN0aW9uIChtYXJrdXApIHtcbiAgICAgIGVucXVldWVTZXRNYXJrdXAodGhpcy5fcm9vdE5vZGVJRCwgbWFya3VwKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTW91bnRzIGEgY2hpbGQgd2l0aCB0aGUgc3VwcGxpZWQgbmFtZS5cbiAgICAgKlxuICAgICAqIE5PVEU6IFRoaXMgaXMgcGFydCBvZiBgdXBkYXRlQ2hpbGRyZW5gIGFuZCBpcyBoZXJlIGZvciByZWFkYWJpbGl0eS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UmVhY3RDb21wb25lbnR9IGNoaWxkIENvbXBvbmVudCB0byBtb3VudC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBOYW1lIG9mIHRoZSBjaGlsZC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggSW5kZXggYXQgd2hpY2ggdG8gaW5zZXJ0IHRoZSBjaGlsZC5cbiAgICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfbW91bnRDaGlsZEJ5TmFtZUF0SW5kZXg6IGZ1bmN0aW9uIChjaGlsZCwgbmFtZSwgaW5kZXgsIHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG4gICAgICAvLyBJbmxpbmVkIGZvciBwZXJmb3JtYW5jZSwgc2VlIGBSZWFjdEluc3RhbmNlSGFuZGxlcy5jcmVhdGVSZWFjdElEYC5cbiAgICAgIHZhciByb290SUQgPSB0aGlzLl9yb290Tm9kZUlEICsgbmFtZTtcbiAgICAgIHZhciBtb3VudEltYWdlID0gUmVhY3RSZWNvbmNpbGVyLm1vdW50Q29tcG9uZW50KGNoaWxkLCByb290SUQsIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcbiAgICAgIGNoaWxkLl9tb3VudEluZGV4ID0gaW5kZXg7XG4gICAgICB0aGlzLmNyZWF0ZUNoaWxkKGNoaWxkLCBtb3VudEltYWdlKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVW5tb3VudHMgYSByZW5kZXJlZCBjaGlsZC5cbiAgICAgKlxuICAgICAqIE5PVEU6IFRoaXMgaXMgcGFydCBvZiBgdXBkYXRlQ2hpbGRyZW5gIGFuZCBpcyBoZXJlIGZvciByZWFkYWJpbGl0eS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UmVhY3RDb21wb25lbnR9IGNoaWxkIENvbXBvbmVudCB0byB1bm1vdW50LlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX3VubW91bnRDaGlsZDogZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICB0aGlzLnJlbW92ZUNoaWxkKGNoaWxkKTtcbiAgICAgIGNoaWxkLl9tb3VudEluZGV4ID0gbnVsbDtcbiAgICB9XG5cbiAgfVxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0TXVsdGlDaGlsZDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QvbGliL1JlYWN0TXVsdGlDaGlsZC5qc1xuLy8gbW9kdWxlIGlkID0gMTE0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdENoaWxkUmVjb25jaWxlclxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdFJlY29uY2lsZXIgPSByZXF1aXJlKCcuL1JlYWN0UmVjb25jaWxlcicpO1xuXG52YXIgaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudCA9IHJlcXVpcmUoJy4vaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudCcpO1xudmFyIHNob3VsZFVwZGF0ZVJlYWN0Q29tcG9uZW50ID0gcmVxdWlyZSgnLi9zaG91bGRVcGRhdGVSZWFjdENvbXBvbmVudCcpO1xudmFyIHRyYXZlcnNlQWxsQ2hpbGRyZW4gPSByZXF1aXJlKCcuL3RyYXZlcnNlQWxsQ2hpbGRyZW4nKTtcbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG5mdW5jdGlvbiBpbnN0YW50aWF0ZUNoaWxkKGNoaWxkSW5zdGFuY2VzLCBjaGlsZCwgbmFtZSkge1xuICAvLyBXZSBmb3VuZCBhIGNvbXBvbmVudCBpbnN0YW5jZS5cbiAgdmFyIGtleVVuaXF1ZSA9IGNoaWxkSW5zdGFuY2VzW25hbWVdID09PSB1bmRlZmluZWQ7XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoa2V5VW5pcXVlLCAnZmxhdHRlbkNoaWxkcmVuKC4uLik6IEVuY291bnRlcmVkIHR3byBjaGlsZHJlbiB3aXRoIHRoZSBzYW1lIGtleSwgJyArICdgJXNgLiBDaGlsZCBrZXlzIG11c3QgYmUgdW5pcXVlOyB3aGVuIHR3byBjaGlsZHJlbiBzaGFyZSBhIGtleSwgb25seSAnICsgJ3RoZSBmaXJzdCBjaGlsZCB3aWxsIGJlIHVzZWQuJywgbmFtZSkgOiB1bmRlZmluZWQ7XG4gIH1cbiAgaWYgKGNoaWxkICE9IG51bGwgJiYga2V5VW5pcXVlKSB7XG4gICAgY2hpbGRJbnN0YW5jZXNbbmFtZV0gPSBpbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50KGNoaWxkLCBudWxsKTtcbiAgfVxufVxuXG4vKipcbiAqIFJlYWN0Q2hpbGRSZWNvbmNpbGVyIHByb3ZpZGVzIGhlbHBlcnMgZm9yIGluaXRpYWxpemluZyBvciB1cGRhdGluZyBhIHNldCBvZlxuICogY2hpbGRyZW4uIEl0cyBvdXRwdXQgaXMgc3VpdGFibGUgZm9yIHBhc3NpbmcgaXQgb250byBSZWFjdE11bHRpQ2hpbGQgd2hpY2hcbiAqIGRvZXMgZGlmZmVkIHJlb3JkZXJpbmcgYW5kIGluc2VydGlvbi5cbiAqL1xudmFyIFJlYWN0Q2hpbGRSZWNvbmNpbGVyID0ge1xuICAvKipcbiAgICogR2VuZXJhdGVzIGEgXCJtb3VudCBpbWFnZVwiIGZvciBlYWNoIG9mIHRoZSBzdXBwbGllZCBjaGlsZHJlbi4gSW4gdGhlIGNhc2VcbiAgICogb2YgYFJlYWN0RE9NQ29tcG9uZW50YCwgYSBtb3VudCBpbWFnZSBpcyBhIHN0cmluZyBvZiBtYXJrdXAuXG4gICAqXG4gICAqIEBwYXJhbSB7P29iamVjdH0gbmVzdGVkQ2hpbGROb2RlcyBOZXN0ZWQgY2hpbGQgbWFwcy5cbiAgICogQHJldHVybiB7P29iamVjdH0gQSBzZXQgb2YgY2hpbGQgaW5zdGFuY2VzLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGluc3RhbnRpYXRlQ2hpbGRyZW46IGZ1bmN0aW9uIChuZXN0ZWRDaGlsZE5vZGVzLCB0cmFuc2FjdGlvbiwgY29udGV4dCkge1xuICAgIGlmIChuZXN0ZWRDaGlsZE5vZGVzID09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICB2YXIgY2hpbGRJbnN0YW5jZXMgPSB7fTtcbiAgICB0cmF2ZXJzZUFsbENoaWxkcmVuKG5lc3RlZENoaWxkTm9kZXMsIGluc3RhbnRpYXRlQ2hpbGQsIGNoaWxkSW5zdGFuY2VzKTtcbiAgICByZXR1cm4gY2hpbGRJbnN0YW5jZXM7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIHJlbmRlcmVkIGNoaWxkcmVuIGFuZCByZXR1cm5zIGEgbmV3IHNldCBvZiBjaGlsZHJlbi5cbiAgICpcbiAgICogQHBhcmFtIHs/b2JqZWN0fSBwcmV2Q2hpbGRyZW4gUHJldmlvdXNseSBpbml0aWFsaXplZCBzZXQgb2YgY2hpbGRyZW4uXG4gICAqIEBwYXJhbSB7P29iamVjdH0gbmV4dENoaWxkcmVuIEZsYXQgY2hpbGQgZWxlbWVudCBtYXBzLlxuICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjb250ZXh0XG4gICAqIEByZXR1cm4gez9vYmplY3R9IEEgbmV3IHNldCBvZiBjaGlsZCBpbnN0YW5jZXMuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgdXBkYXRlQ2hpbGRyZW46IGZ1bmN0aW9uIChwcmV2Q2hpbGRyZW4sIG5leHRDaGlsZHJlbiwgdHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcbiAgICAvLyBXZSBjdXJyZW50bHkgZG9uJ3QgaGF2ZSBhIHdheSB0byB0cmFjayBtb3ZlcyBoZXJlIGJ1dCBpZiB3ZSB1c2UgaXRlcmF0b3JzXG4gICAgLy8gaW5zdGVhZCBvZiBmb3IuLmluIHdlIGNhbiB6aXAgdGhlIGl0ZXJhdG9ycyBhbmQgY2hlY2sgaWYgYW4gaXRlbSBoYXNcbiAgICAvLyBtb3ZlZC5cbiAgICAvLyBUT0RPOiBJZiBub3RoaW5nIGhhcyBjaGFuZ2VkLCByZXR1cm4gdGhlIHByZXZDaGlsZHJlbiBvYmplY3Qgc28gdGhhdCB3ZVxuICAgIC8vIGNhbiBxdWlja2x5IGJhaWxvdXQgaWYgbm90aGluZyBoYXMgY2hhbmdlZC5cbiAgICBpZiAoIW5leHRDaGlsZHJlbiAmJiAhcHJldkNoaWxkcmVuKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgdmFyIG5hbWU7XG4gICAgZm9yIChuYW1lIGluIG5leHRDaGlsZHJlbikge1xuICAgICAgaWYgKCFuZXh0Q2hpbGRyZW4uaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICB2YXIgcHJldkNoaWxkID0gcHJldkNoaWxkcmVuICYmIHByZXZDaGlsZHJlbltuYW1lXTtcbiAgICAgIHZhciBwcmV2RWxlbWVudCA9IHByZXZDaGlsZCAmJiBwcmV2Q2hpbGQuX2N1cnJlbnRFbGVtZW50O1xuICAgICAgdmFyIG5leHRFbGVtZW50ID0gbmV4dENoaWxkcmVuW25hbWVdO1xuICAgICAgaWYgKHByZXZDaGlsZCAhPSBudWxsICYmIHNob3VsZFVwZGF0ZVJlYWN0Q29tcG9uZW50KHByZXZFbGVtZW50LCBuZXh0RWxlbWVudCkpIHtcbiAgICAgICAgUmVhY3RSZWNvbmNpbGVyLnJlY2VpdmVDb21wb25lbnQocHJldkNoaWxkLCBuZXh0RWxlbWVudCwgdHJhbnNhY3Rpb24sIGNvbnRleHQpO1xuICAgICAgICBuZXh0Q2hpbGRyZW5bbmFtZV0gPSBwcmV2Q2hpbGQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAocHJldkNoaWxkKSB7XG4gICAgICAgICAgUmVhY3RSZWNvbmNpbGVyLnVubW91bnRDb21wb25lbnQocHJldkNoaWxkLCBuYW1lKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGUgY2hpbGQgbXVzdCBiZSBpbnN0YW50aWF0ZWQgYmVmb3JlIGl0J3MgbW91bnRlZC5cbiAgICAgICAgdmFyIG5leHRDaGlsZEluc3RhbmNlID0gaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudChuZXh0RWxlbWVudCwgbnVsbCk7XG4gICAgICAgIG5leHRDaGlsZHJlbltuYW1lXSA9IG5leHRDaGlsZEluc3RhbmNlO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBVbm1vdW50IGNoaWxkcmVuIHRoYXQgYXJlIG5vIGxvbmdlciBwcmVzZW50LlxuICAgIGZvciAobmFtZSBpbiBwcmV2Q2hpbGRyZW4pIHtcbiAgICAgIGlmIChwcmV2Q2hpbGRyZW4uaGFzT3duUHJvcGVydHkobmFtZSkgJiYgIShuZXh0Q2hpbGRyZW4gJiYgbmV4dENoaWxkcmVuLmhhc093blByb3BlcnR5KG5hbWUpKSkge1xuICAgICAgICBSZWFjdFJlY29uY2lsZXIudW5tb3VudENvbXBvbmVudChwcmV2Q2hpbGRyZW5bbmFtZV0pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbmV4dENoaWxkcmVuO1xuICB9LFxuXG4gIC8qKlxuICAgKiBVbm1vdW50cyBhbGwgcmVuZGVyZWQgY2hpbGRyZW4uIFRoaXMgc2hvdWxkIGJlIHVzZWQgdG8gY2xlYW4gdXAgY2hpbGRyZW5cbiAgICogd2hlbiB0aGlzIGNvbXBvbmVudCBpcyB1bm1vdW50ZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7P29iamVjdH0gcmVuZGVyZWRDaGlsZHJlbiBQcmV2aW91c2x5IGluaXRpYWxpemVkIHNldCBvZiBjaGlsZHJlbi5cbiAgICogQGludGVybmFsXG4gICAqL1xuICB1bm1vdW50Q2hpbGRyZW46IGZ1bmN0aW9uIChyZW5kZXJlZENoaWxkcmVuKSB7XG4gICAgZm9yICh2YXIgbmFtZSBpbiByZW5kZXJlZENoaWxkcmVuKSB7XG4gICAgICBpZiAocmVuZGVyZWRDaGlsZHJlbi5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICB2YXIgcmVuZGVyZWRDaGlsZCA9IHJlbmRlcmVkQ2hpbGRyZW5bbmFtZV07XG4gICAgICAgIFJlYWN0UmVjb25jaWxlci51bm1vdW50Q29tcG9uZW50KHJlbmRlcmVkQ2hpbGQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0Q2hpbGRSZWNvbmNpbGVyO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvUmVhY3RDaGlsZFJlY29uY2lsZXIuanNcbi8vIG1vZHVsZSBpZCA9IDExNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgZmxhdHRlbkNoaWxkcmVuXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdHJhdmVyc2VBbGxDaGlsZHJlbiA9IHJlcXVpcmUoJy4vdHJhdmVyc2VBbGxDaGlsZHJlbicpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbi8qKlxuICogQHBhcmFtIHtmdW5jdGlvbn0gdHJhdmVyc2VDb250ZXh0IENvbnRleHQgcGFzc2VkIHRocm91Z2ggdHJhdmVyc2FsLlxuICogQHBhcmFtIHs/UmVhY3RDb21wb25lbnR9IGNoaWxkIFJlYWN0IGNoaWxkIGNvbXBvbmVudC5cbiAqIEBwYXJhbSB7IXN0cmluZ30gbmFtZSBTdHJpbmcgbmFtZSBvZiBrZXkgcGF0aCB0byBjaGlsZC5cbiAqL1xuZnVuY3Rpb24gZmxhdHRlblNpbmdsZUNoaWxkSW50b0NvbnRleHQodHJhdmVyc2VDb250ZXh0LCBjaGlsZCwgbmFtZSkge1xuICAvLyBXZSBmb3VuZCBhIGNvbXBvbmVudCBpbnN0YW5jZS5cbiAgdmFyIHJlc3VsdCA9IHRyYXZlcnNlQ29udGV4dDtcbiAgdmFyIGtleVVuaXF1ZSA9IHJlc3VsdFtuYW1lXSA9PT0gdW5kZWZpbmVkO1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGtleVVuaXF1ZSwgJ2ZsYXR0ZW5DaGlsZHJlbiguLi4pOiBFbmNvdW50ZXJlZCB0d28gY2hpbGRyZW4gd2l0aCB0aGUgc2FtZSBrZXksICcgKyAnYCVzYC4gQ2hpbGQga2V5cyBtdXN0IGJlIHVuaXF1ZTsgd2hlbiB0d28gY2hpbGRyZW4gc2hhcmUgYSBrZXksIG9ubHkgJyArICd0aGUgZmlyc3QgY2hpbGQgd2lsbCBiZSB1c2VkLicsIG5hbWUpIDogdW5kZWZpbmVkO1xuICB9XG4gIGlmIChrZXlVbmlxdWUgJiYgY2hpbGQgIT0gbnVsbCkge1xuICAgIHJlc3VsdFtuYW1lXSA9IGNoaWxkO1xuICB9XG59XG5cbi8qKlxuICogRmxhdHRlbnMgY2hpbGRyZW4gdGhhdCBhcmUgdHlwaWNhbGx5IHNwZWNpZmllZCBhcyBgcHJvcHMuY2hpbGRyZW5gLiBBbnkgbnVsbFxuICogY2hpbGRyZW4gd2lsbCBub3QgYmUgaW5jbHVkZWQgaW4gdGhlIHJlc3VsdGluZyBvYmplY3QuXG4gKiBAcmV0dXJuIHshb2JqZWN0fSBmbGF0dGVuZWQgY2hpbGRyZW4ga2V5ZWQgYnkgbmFtZS5cbiAqL1xuZnVuY3Rpb24gZmxhdHRlbkNoaWxkcmVuKGNoaWxkcmVuKSB7XG4gIGlmIChjaGlsZHJlbiA9PSBudWxsKSB7XG4gICAgcmV0dXJuIGNoaWxkcmVuO1xuICB9XG4gIHZhciByZXN1bHQgPSB7fTtcbiAgdHJhdmVyc2VBbGxDaGlsZHJlbihjaGlsZHJlbiwgZmxhdHRlblNpbmdsZUNoaWxkSW50b0NvbnRleHQsIHJlc3VsdCk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZmxhdHRlbkNoaWxkcmVuO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvZmxhdHRlbkNoaWxkcmVuLmpzXG4vLyBtb2R1bGUgaWQgPSAxMTZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIHNoYWxsb3dFcXVhbFxuICogQHR5cGVjaGVja3NcbiAqIFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqXG4gKiBQZXJmb3JtcyBlcXVhbGl0eSBieSBpdGVyYXRpbmcgdGhyb3VnaCBrZXlzIG9uIGFuIG9iamVjdCBhbmQgcmV0dXJuaW5nIGZhbHNlXG4gKiB3aGVuIGFueSBrZXkgaGFzIHZhbHVlcyB3aGljaCBhcmUgbm90IHN0cmljdGx5IGVxdWFsIGJldHdlZW4gdGhlIGFyZ3VtZW50cy5cbiAqIFJldHVybnMgdHJ1ZSB3aGVuIHRoZSB2YWx1ZXMgb2YgYWxsIGtleXMgYXJlIHN0cmljdGx5IGVxdWFsLlxuICovXG5mdW5jdGlvbiBzaGFsbG93RXF1YWwob2JqQSwgb2JqQikge1xuICBpZiAob2JqQSA9PT0gb2JqQikge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBvYmpBICE9PSAnb2JqZWN0JyB8fCBvYmpBID09PSBudWxsIHx8IHR5cGVvZiBvYmpCICE9PSAnb2JqZWN0JyB8fCBvYmpCID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgdmFyIGtleXNBID0gT2JqZWN0LmtleXMob2JqQSk7XG4gIHZhciBrZXlzQiA9IE9iamVjdC5rZXlzKG9iakIpO1xuXG4gIGlmIChrZXlzQS5sZW5ndGggIT09IGtleXNCLmxlbmd0aCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8vIFRlc3QgZm9yIEEncyBrZXlzIGRpZmZlcmVudCBmcm9tIEIuXG4gIHZhciBiSGFzT3duUHJvcGVydHkgPSBoYXNPd25Qcm9wZXJ0eS5iaW5kKG9iakIpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXNBLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKCFiSGFzT3duUHJvcGVydHkoa2V5c0FbaV0pIHx8IG9iakFba2V5c0FbaV1dICE9PSBvYmpCW2tleXNBW2ldXSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHNoYWxsb3dFcXVhbDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vZmJqcy9saWIvc2hhbGxvd0VxdWFsLmpzXG4vLyBtb2R1bGUgaWQgPSAxMTdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RXZlbnRMaXN0ZW5lclxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBFdmVudExpc3RlbmVyID0gcmVxdWlyZSgnZmJqcy9saWIvRXZlbnRMaXN0ZW5lcicpO1xudmFyIEV4ZWN1dGlvbkVudmlyb25tZW50ID0gcmVxdWlyZSgnZmJqcy9saWIvRXhlY3V0aW9uRW52aXJvbm1lbnQnKTtcbnZhciBQb29sZWRDbGFzcyA9IHJlcXVpcmUoJy4vUG9vbGVkQ2xhc3MnKTtcbnZhciBSZWFjdEluc3RhbmNlSGFuZGxlcyA9IHJlcXVpcmUoJy4vUmVhY3RJbnN0YW5jZUhhbmRsZXMnKTtcbnZhciBSZWFjdE1vdW50ID0gcmVxdWlyZSgnLi9SZWFjdE1vdW50Jyk7XG52YXIgUmVhY3RVcGRhdGVzID0gcmVxdWlyZSgnLi9SZWFjdFVwZGF0ZXMnKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIGdldEV2ZW50VGFyZ2V0ID0gcmVxdWlyZSgnLi9nZXRFdmVudFRhcmdldCcpO1xudmFyIGdldFVuYm91bmRlZFNjcm9sbFBvc2l0aW9uID0gcmVxdWlyZSgnZmJqcy9saWIvZ2V0VW5ib3VuZGVkU2Nyb2xsUG9zaXRpb24nKTtcblxudmFyIERPQ1VNRU5UX0ZSQUdNRU5UX05PREVfVFlQRSA9IDExO1xuXG4vKipcbiAqIEZpbmRzIHRoZSBwYXJlbnQgUmVhY3QgY29tcG9uZW50IG9mIGBub2RlYC5cbiAqXG4gKiBAcGFyYW0geyp9IG5vZGVcbiAqIEByZXR1cm4gez9ET01FdmVudFRhcmdldH0gUGFyZW50IGNvbnRhaW5lciwgb3IgYG51bGxgIGlmIHRoZSBzcGVjaWZpZWQgbm9kZVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICBpcyBub3QgbmVzdGVkLlxuICovXG5mdW5jdGlvbiBmaW5kUGFyZW50KG5vZGUpIHtcbiAgLy8gVE9ETzogSXQgbWF5IGJlIGEgZ29vZCBpZGVhIHRvIGNhY2hlIHRoaXMgdG8gcHJldmVudCB1bm5lY2Vzc2FyeSBET01cbiAgLy8gdHJhdmVyc2FsLCBidXQgY2FjaGluZyBpcyBkaWZmaWN1bHQgdG8gZG8gY29ycmVjdGx5IHdpdGhvdXQgdXNpbmcgYVxuICAvLyBtdXRhdGlvbiBvYnNlcnZlciB0byBsaXN0ZW4gZm9yIGFsbCBET00gY2hhbmdlcy5cbiAgdmFyIG5vZGVJRCA9IFJlYWN0TW91bnQuZ2V0SUQobm9kZSk7XG4gIHZhciByb290SUQgPSBSZWFjdEluc3RhbmNlSGFuZGxlcy5nZXRSZWFjdFJvb3RJREZyb21Ob2RlSUQobm9kZUlEKTtcbiAgdmFyIGNvbnRhaW5lciA9IFJlYWN0TW91bnQuZmluZFJlYWN0Q29udGFpbmVyRm9ySUQocm9vdElEKTtcbiAgdmFyIHBhcmVudCA9IFJlYWN0TW91bnQuZ2V0Rmlyc3RSZWFjdERPTShjb250YWluZXIpO1xuICByZXR1cm4gcGFyZW50O1xufVxuXG4vLyBVc2VkIHRvIHN0b3JlIGFuY2VzdG9yIGhpZXJhcmNoeSBpbiB0b3AgbGV2ZWwgY2FsbGJhY2tcbmZ1bmN0aW9uIFRvcExldmVsQ2FsbGJhY2tCb29rS2VlcGluZyh0b3BMZXZlbFR5cGUsIG5hdGl2ZUV2ZW50KSB7XG4gIHRoaXMudG9wTGV2ZWxUeXBlID0gdG9wTGV2ZWxUeXBlO1xuICB0aGlzLm5hdGl2ZUV2ZW50ID0gbmF0aXZlRXZlbnQ7XG4gIHRoaXMuYW5jZXN0b3JzID0gW107XG59XG5hc3NpZ24oVG9wTGV2ZWxDYWxsYmFja0Jvb2tLZWVwaW5nLnByb3RvdHlwZSwge1xuICBkZXN0cnVjdG9yOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy50b3BMZXZlbFR5cGUgPSBudWxsO1xuICAgIHRoaXMubmF0aXZlRXZlbnQgPSBudWxsO1xuICAgIHRoaXMuYW5jZXN0b3JzLmxlbmd0aCA9IDA7XG4gIH1cbn0pO1xuUG9vbGVkQ2xhc3MuYWRkUG9vbGluZ1RvKFRvcExldmVsQ2FsbGJhY2tCb29rS2VlcGluZywgUG9vbGVkQ2xhc3MudHdvQXJndW1lbnRQb29sZXIpO1xuXG5mdW5jdGlvbiBoYW5kbGVUb3BMZXZlbEltcGwoYm9va0tlZXBpbmcpIHtcbiAgLy8gVE9ETzogUmUtZW5hYmxlIGV2ZW50LnBhdGggaGFuZGxpbmdcbiAgLy9cbiAgLy8gaWYgKGJvb2tLZWVwaW5nLm5hdGl2ZUV2ZW50LnBhdGggJiYgYm9va0tlZXBpbmcubmF0aXZlRXZlbnQucGF0aC5sZW5ndGggPiAxKSB7XG4gIC8vICAgLy8gTmV3IGJyb3dzZXJzIGhhdmUgYSBwYXRoIGF0dHJpYnV0ZSBvbiBuYXRpdmUgZXZlbnRzXG4gIC8vICAgaGFuZGxlVG9wTGV2ZWxXaXRoUGF0aChib29rS2VlcGluZyk7XG4gIC8vIH0gZWxzZSB7XG4gIC8vICAgLy8gTGVnYWN5IGJyb3dzZXJzIGRvbid0IGhhdmUgYSBwYXRoIGF0dHJpYnV0ZSBvbiBuYXRpdmUgZXZlbnRzXG4gIC8vICAgaGFuZGxlVG9wTGV2ZWxXaXRob3V0UGF0aChib29rS2VlcGluZyk7XG4gIC8vIH1cblxuICB2b2lkIGhhbmRsZVRvcExldmVsV2l0aFBhdGg7IC8vIHRlbXBvcmFyaWx5IHVudXNlZFxuICBoYW5kbGVUb3BMZXZlbFdpdGhvdXRQYXRoKGJvb2tLZWVwaW5nKTtcbn1cblxuLy8gTGVnYWN5IGJyb3dzZXJzIGRvbid0IGhhdmUgYSBwYXRoIGF0dHJpYnV0ZSBvbiBuYXRpdmUgZXZlbnRzXG5mdW5jdGlvbiBoYW5kbGVUb3BMZXZlbFdpdGhvdXRQYXRoKGJvb2tLZWVwaW5nKSB7XG4gIHZhciB0b3BMZXZlbFRhcmdldCA9IFJlYWN0TW91bnQuZ2V0Rmlyc3RSZWFjdERPTShnZXRFdmVudFRhcmdldChib29rS2VlcGluZy5uYXRpdmVFdmVudCkpIHx8IHdpbmRvdztcblxuICAvLyBMb29wIHRocm91Z2ggdGhlIGhpZXJhcmNoeSwgaW4gY2FzZSB0aGVyZSdzIGFueSBuZXN0ZWQgY29tcG9uZW50cy5cbiAgLy8gSXQncyBpbXBvcnRhbnQgdGhhdCB3ZSBidWlsZCB0aGUgYXJyYXkgb2YgYW5jZXN0b3JzIGJlZm9yZSBjYWxsaW5nIGFueVxuICAvLyBldmVudCBoYW5kbGVycywgYmVjYXVzZSBldmVudCBoYW5kbGVycyBjYW4gbW9kaWZ5IHRoZSBET00sIGxlYWRpbmcgdG9cbiAgLy8gaW5jb25zaXN0ZW5jaWVzIHdpdGggUmVhY3RNb3VudCdzIG5vZGUgY2FjaGUuIFNlZSAjMTEwNS5cbiAgdmFyIGFuY2VzdG9yID0gdG9wTGV2ZWxUYXJnZXQ7XG4gIHdoaWxlIChhbmNlc3Rvcikge1xuICAgIGJvb2tLZWVwaW5nLmFuY2VzdG9ycy5wdXNoKGFuY2VzdG9yKTtcbiAgICBhbmNlc3RvciA9IGZpbmRQYXJlbnQoYW5jZXN0b3IpO1xuICB9XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBib29rS2VlcGluZy5hbmNlc3RvcnMubGVuZ3RoOyBpKyspIHtcbiAgICB0b3BMZXZlbFRhcmdldCA9IGJvb2tLZWVwaW5nLmFuY2VzdG9yc1tpXTtcbiAgICB2YXIgdG9wTGV2ZWxUYXJnZXRJRCA9IFJlYWN0TW91bnQuZ2V0SUQodG9wTGV2ZWxUYXJnZXQpIHx8ICcnO1xuICAgIFJlYWN0RXZlbnRMaXN0ZW5lci5faGFuZGxlVG9wTGV2ZWwoYm9va0tlZXBpbmcudG9wTGV2ZWxUeXBlLCB0b3BMZXZlbFRhcmdldCwgdG9wTGV2ZWxUYXJnZXRJRCwgYm9va0tlZXBpbmcubmF0aXZlRXZlbnQsIGdldEV2ZW50VGFyZ2V0KGJvb2tLZWVwaW5nLm5hdGl2ZUV2ZW50KSk7XG4gIH1cbn1cblxuLy8gTmV3IGJyb3dzZXJzIGhhdmUgYSBwYXRoIGF0dHJpYnV0ZSBvbiBuYXRpdmUgZXZlbnRzXG5mdW5jdGlvbiBoYW5kbGVUb3BMZXZlbFdpdGhQYXRoKGJvb2tLZWVwaW5nKSB7XG4gIHZhciBwYXRoID0gYm9va0tlZXBpbmcubmF0aXZlRXZlbnQucGF0aDtcbiAgdmFyIGN1cnJlbnROYXRpdmVUYXJnZXQgPSBwYXRoWzBdO1xuICB2YXIgZXZlbnRzRmlyZWQgPSAwO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHBhdGgubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgY3VycmVudFBhdGhFbGVtZW50ID0gcGF0aFtpXTtcbiAgICBpZiAoY3VycmVudFBhdGhFbGVtZW50Lm5vZGVUeXBlID09PSBET0NVTUVOVF9GUkFHTUVOVF9OT0RFX1RZUEUpIHtcbiAgICAgIGN1cnJlbnROYXRpdmVUYXJnZXQgPSBwYXRoW2kgKyAxXTtcbiAgICB9XG4gICAgLy8gVE9ETzogc2xvd1xuICAgIHZhciByZWFjdFBhcmVudCA9IFJlYWN0TW91bnQuZ2V0Rmlyc3RSZWFjdERPTShjdXJyZW50UGF0aEVsZW1lbnQpO1xuICAgIGlmIChyZWFjdFBhcmVudCA9PT0gY3VycmVudFBhdGhFbGVtZW50KSB7XG4gICAgICB2YXIgY3VycmVudFBhdGhFbGVtZW50SUQgPSBSZWFjdE1vdW50LmdldElEKGN1cnJlbnRQYXRoRWxlbWVudCk7XG4gICAgICB2YXIgbmV3Um9vdElEID0gUmVhY3RJbnN0YW5jZUhhbmRsZXMuZ2V0UmVhY3RSb290SURGcm9tTm9kZUlEKGN1cnJlbnRQYXRoRWxlbWVudElEKTtcbiAgICAgIGJvb2tLZWVwaW5nLmFuY2VzdG9ycy5wdXNoKGN1cnJlbnRQYXRoRWxlbWVudCk7XG5cbiAgICAgIHZhciB0b3BMZXZlbFRhcmdldElEID0gUmVhY3RNb3VudC5nZXRJRChjdXJyZW50UGF0aEVsZW1lbnQpIHx8ICcnO1xuICAgICAgZXZlbnRzRmlyZWQrKztcbiAgICAgIFJlYWN0RXZlbnRMaXN0ZW5lci5faGFuZGxlVG9wTGV2ZWwoYm9va0tlZXBpbmcudG9wTGV2ZWxUeXBlLCBjdXJyZW50UGF0aEVsZW1lbnQsIHRvcExldmVsVGFyZ2V0SUQsIGJvb2tLZWVwaW5nLm5hdGl2ZUV2ZW50LCBjdXJyZW50TmF0aXZlVGFyZ2V0KTtcblxuICAgICAgLy8gSnVtcCB0byB0aGUgcm9vdCBvZiB0aGlzIFJlYWN0IHJlbmRlciB0cmVlXG4gICAgICB3aGlsZSAoY3VycmVudFBhdGhFbGVtZW50SUQgIT09IG5ld1Jvb3RJRCkge1xuICAgICAgICBpKys7XG4gICAgICAgIGN1cnJlbnRQYXRoRWxlbWVudCA9IHBhdGhbaV07XG4gICAgICAgIGN1cnJlbnRQYXRoRWxlbWVudElEID0gUmVhY3RNb3VudC5nZXRJRChjdXJyZW50UGF0aEVsZW1lbnQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBpZiAoZXZlbnRzRmlyZWQgPT09IDApIHtcbiAgICBSZWFjdEV2ZW50TGlzdGVuZXIuX2hhbmRsZVRvcExldmVsKGJvb2tLZWVwaW5nLnRvcExldmVsVHlwZSwgd2luZG93LCAnJywgYm9va0tlZXBpbmcubmF0aXZlRXZlbnQsIGdldEV2ZW50VGFyZ2V0KGJvb2tLZWVwaW5nLm5hdGl2ZUV2ZW50KSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gc2Nyb2xsVmFsdWVNb25pdG9yKGNiKSB7XG4gIHZhciBzY3JvbGxQb3NpdGlvbiA9IGdldFVuYm91bmRlZFNjcm9sbFBvc2l0aW9uKHdpbmRvdyk7XG4gIGNiKHNjcm9sbFBvc2l0aW9uKTtcbn1cblxudmFyIFJlYWN0RXZlbnRMaXN0ZW5lciA9IHtcbiAgX2VuYWJsZWQ6IHRydWUsXG4gIF9oYW5kbGVUb3BMZXZlbDogbnVsbCxcblxuICBXSU5ET1dfSEFORExFOiBFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gPyB3aW5kb3cgOiBudWxsLFxuXG4gIHNldEhhbmRsZVRvcExldmVsOiBmdW5jdGlvbiAoaGFuZGxlVG9wTGV2ZWwpIHtcbiAgICBSZWFjdEV2ZW50TGlzdGVuZXIuX2hhbmRsZVRvcExldmVsID0gaGFuZGxlVG9wTGV2ZWw7XG4gIH0sXG5cbiAgc2V0RW5hYmxlZDogZnVuY3Rpb24gKGVuYWJsZWQpIHtcbiAgICBSZWFjdEV2ZW50TGlzdGVuZXIuX2VuYWJsZWQgPSAhIWVuYWJsZWQ7XG4gIH0sXG5cbiAgaXNFbmFibGVkOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIFJlYWN0RXZlbnRMaXN0ZW5lci5fZW5hYmxlZDtcbiAgfSxcblxuICAvKipcbiAgICogVHJhcHMgdG9wLWxldmVsIGV2ZW50cyBieSB1c2luZyBldmVudCBidWJibGluZy5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRvcExldmVsVHlwZSBSZWNvcmQgZnJvbSBgRXZlbnRDb25zdGFudHNgLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaGFuZGxlckJhc2VOYW1lIEV2ZW50IG5hbWUgKGUuZy4gXCJjbGlja1wiKS5cbiAgICogQHBhcmFtIHtvYmplY3R9IGhhbmRsZSBFbGVtZW50IG9uIHdoaWNoIHRvIGF0dGFjaCBsaXN0ZW5lci5cbiAgICogQHJldHVybiB7P29iamVjdH0gQW4gb2JqZWN0IHdpdGggYSByZW1vdmUgZnVuY3Rpb24gd2hpY2ggd2lsbCBmb3JjZWZ1bGx5XG4gICAqICAgICAgICAgICAgICAgICAgcmVtb3ZlIHRoZSBsaXN0ZW5lci5cbiAgICogQGludGVybmFsXG4gICAqL1xuICB0cmFwQnViYmxlZEV2ZW50OiBmdW5jdGlvbiAodG9wTGV2ZWxUeXBlLCBoYW5kbGVyQmFzZU5hbWUsIGhhbmRsZSkge1xuICAgIHZhciBlbGVtZW50ID0gaGFuZGxlO1xuICAgIGlmICghZWxlbWVudCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBFdmVudExpc3RlbmVyLmxpc3RlbihlbGVtZW50LCBoYW5kbGVyQmFzZU5hbWUsIFJlYWN0RXZlbnRMaXN0ZW5lci5kaXNwYXRjaEV2ZW50LmJpbmQobnVsbCwgdG9wTGV2ZWxUeXBlKSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFRyYXBzIGEgdG9wLWxldmVsIGV2ZW50IGJ5IHVzaW5nIGV2ZW50IGNhcHR1cmluZy5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRvcExldmVsVHlwZSBSZWNvcmQgZnJvbSBgRXZlbnRDb25zdGFudHNgLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaGFuZGxlckJhc2VOYW1lIEV2ZW50IG5hbWUgKGUuZy4gXCJjbGlja1wiKS5cbiAgICogQHBhcmFtIHtvYmplY3R9IGhhbmRsZSBFbGVtZW50IG9uIHdoaWNoIHRvIGF0dGFjaCBsaXN0ZW5lci5cbiAgICogQHJldHVybiB7P29iamVjdH0gQW4gb2JqZWN0IHdpdGggYSByZW1vdmUgZnVuY3Rpb24gd2hpY2ggd2lsbCBmb3JjZWZ1bGx5XG4gICAqICAgICAgICAgICAgICAgICAgcmVtb3ZlIHRoZSBsaXN0ZW5lci5cbiAgICogQGludGVybmFsXG4gICAqL1xuICB0cmFwQ2FwdHVyZWRFdmVudDogZnVuY3Rpb24gKHRvcExldmVsVHlwZSwgaGFuZGxlckJhc2VOYW1lLCBoYW5kbGUpIHtcbiAgICB2YXIgZWxlbWVudCA9IGhhbmRsZTtcbiAgICBpZiAoIWVsZW1lbnQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gRXZlbnRMaXN0ZW5lci5jYXB0dXJlKGVsZW1lbnQsIGhhbmRsZXJCYXNlTmFtZSwgUmVhY3RFdmVudExpc3RlbmVyLmRpc3BhdGNoRXZlbnQuYmluZChudWxsLCB0b3BMZXZlbFR5cGUpKTtcbiAgfSxcblxuICBtb25pdG9yU2Nyb2xsVmFsdWU6IGZ1bmN0aW9uIChyZWZyZXNoKSB7XG4gICAgdmFyIGNhbGxiYWNrID0gc2Nyb2xsVmFsdWVNb25pdG9yLmJpbmQobnVsbCwgcmVmcmVzaCk7XG4gICAgRXZlbnRMaXN0ZW5lci5saXN0ZW4od2luZG93LCAnc2Nyb2xsJywgY2FsbGJhY2spO1xuICB9LFxuXG4gIGRpc3BhdGNoRXZlbnQ6IGZ1bmN0aW9uICh0b3BMZXZlbFR5cGUsIG5hdGl2ZUV2ZW50KSB7XG4gICAgaWYgKCFSZWFjdEV2ZW50TGlzdGVuZXIuX2VuYWJsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgYm9va0tlZXBpbmcgPSBUb3BMZXZlbENhbGxiYWNrQm9va0tlZXBpbmcuZ2V0UG9vbGVkKHRvcExldmVsVHlwZSwgbmF0aXZlRXZlbnQpO1xuICAgIHRyeSB7XG4gICAgICAvLyBFdmVudCBxdWV1ZSBiZWluZyBwcm9jZXNzZWQgaW4gdGhlIHNhbWUgY3ljbGUgYWxsb3dzXG4gICAgICAvLyBgcHJldmVudERlZmF1bHRgLlxuICAgICAgUmVhY3RVcGRhdGVzLmJhdGNoZWRVcGRhdGVzKGhhbmRsZVRvcExldmVsSW1wbCwgYm9va0tlZXBpbmcpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBUb3BMZXZlbENhbGxiYWNrQm9va0tlZXBpbmcucmVsZWFzZShib29rS2VlcGluZyk7XG4gICAgfVxuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0RXZlbnRMaXN0ZW5lcjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QvbGliL1JlYWN0RXZlbnRMaXN0ZW5lci5qc1xuLy8gbW9kdWxlIGlkID0gMTE4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRXZlbnRMaXN0ZW5lclxuICogQHR5cGVjaGVja3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBlbXB0eUZ1bmN0aW9uID0gcmVxdWlyZSgnLi9lbXB0eUZ1bmN0aW9uJyk7XG5cbi8qKlxuICogVXBzdHJlYW0gdmVyc2lvbiBvZiBldmVudCBsaXN0ZW5lci4gRG9lcyBub3QgdGFrZSBpbnRvIGFjY291bnQgc3BlY2lmaWNcbiAqIG5hdHVyZSBvZiBwbGF0Zm9ybS5cbiAqL1xudmFyIEV2ZW50TGlzdGVuZXIgPSB7XG4gIC8qKlxuICAgKiBMaXN0ZW4gdG8gRE9NIGV2ZW50cyBkdXJpbmcgdGhlIGJ1YmJsZSBwaGFzZS5cbiAgICpcbiAgICogQHBhcmFtIHtET01FdmVudFRhcmdldH0gdGFyZ2V0IERPTSBlbGVtZW50IHRvIHJlZ2lzdGVyIGxpc3RlbmVyIG9uLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRUeXBlIEV2ZW50IHR5cGUsIGUuZy4gJ2NsaWNrJyBvciAnbW91c2VvdmVyJy5cbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sgQ2FsbGJhY2sgZnVuY3Rpb24uXG4gICAqIEByZXR1cm4ge29iamVjdH0gT2JqZWN0IHdpdGggYSBgcmVtb3ZlYCBtZXRob2QuXG4gICAqL1xuICBsaXN0ZW46IGZ1bmN0aW9uICh0YXJnZXQsIGV2ZW50VHlwZSwgY2FsbGJhY2spIHtcbiAgICBpZiAodGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgY2FsbGJhY2ssIGZhbHNlKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJlbW92ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgY2FsbGJhY2ssIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKHRhcmdldC5hdHRhY2hFdmVudCkge1xuICAgICAgdGFyZ2V0LmF0dGFjaEV2ZW50KCdvbicgKyBldmVudFR5cGUsIGNhbGxiYWNrKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJlbW92ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRhcmdldC5kZXRhY2hFdmVudCgnb24nICsgZXZlbnRUeXBlLCBjYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBMaXN0ZW4gdG8gRE9NIGV2ZW50cyBkdXJpbmcgdGhlIGNhcHR1cmUgcGhhc2UuXG4gICAqXG4gICAqIEBwYXJhbSB7RE9NRXZlbnRUYXJnZXR9IHRhcmdldCBET00gZWxlbWVudCB0byByZWdpc3RlciBsaXN0ZW5lciBvbi5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50VHlwZSBFdmVudCB0eXBlLCBlLmcuICdjbGljaycgb3IgJ21vdXNlb3ZlcicuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIENhbGxiYWNrIGZ1bmN0aW9uLlxuICAgKiBAcmV0dXJuIHtvYmplY3R9IE9iamVjdCB3aXRoIGEgYHJlbW92ZWAgbWV0aG9kLlxuICAgKi9cbiAgY2FwdHVyZTogZnVuY3Rpb24gKHRhcmdldCwgZXZlbnRUeXBlLCBjYWxsYmFjaykge1xuICAgIGlmICh0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBjYWxsYmFjaywgdHJ1ZSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICByZW1vdmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGNhbGxiYWNrLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignQXR0ZW1wdGVkIHRvIGxpc3RlbiB0byBldmVudHMgZHVyaW5nIHRoZSBjYXB0dXJlIHBoYXNlIG9uIGEgJyArICdicm93c2VyIHRoYXQgZG9lcyBub3Qgc3VwcG9ydCB0aGUgY2FwdHVyZSBwaGFzZS4gWW91ciBhcHBsaWNhdGlvbiAnICsgJ3dpbGwgbm90IHJlY2VpdmUgc29tZSBldmVudHMuJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4ge1xuICAgICAgICByZW1vdmU6IGVtcHR5RnVuY3Rpb25cbiAgICAgIH07XG4gICAgfVxuICB9LFxuXG4gIHJlZ2lzdGVyRGVmYXVsdDogZnVuY3Rpb24gKCkge31cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRMaXN0ZW5lcjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vZmJqcy9saWIvRXZlbnRMaXN0ZW5lci5qc1xuLy8gbW9kdWxlIGlkID0gMTE5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBnZXRVbmJvdW5kZWRTY3JvbGxQb3NpdGlvblxuICogQHR5cGVjaGVja3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogR2V0cyB0aGUgc2Nyb2xsIHBvc2l0aW9uIG9mIHRoZSBzdXBwbGllZCBlbGVtZW50IG9yIHdpbmRvdy5cbiAqXG4gKiBUaGUgcmV0dXJuIHZhbHVlcyBhcmUgdW5ib3VuZGVkLCB1bmxpa2UgYGdldFNjcm9sbFBvc2l0aW9uYC4gVGhpcyBtZWFucyB0aGV5XG4gKiBtYXkgYmUgbmVnYXRpdmUgb3IgZXhjZWVkIHRoZSBlbGVtZW50IGJvdW5kYXJpZXMgKHdoaWNoIGlzIHBvc3NpYmxlIHVzaW5nXG4gKiBpbmVydGlhbCBzY3JvbGxpbmcpLlxuICpcbiAqIEBwYXJhbSB7RE9NV2luZG93fERPTUVsZW1lbnR9IHNjcm9sbGFibGVcbiAqIEByZXR1cm4ge29iamVjdH0gTWFwIHdpdGggYHhgIGFuZCBgeWAga2V5cy5cbiAqL1xuZnVuY3Rpb24gZ2V0VW5ib3VuZGVkU2Nyb2xsUG9zaXRpb24oc2Nyb2xsYWJsZSkge1xuICBpZiAoc2Nyb2xsYWJsZSA9PT0gd2luZG93KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHg6IHdpbmRvdy5wYWdlWE9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCxcbiAgICAgIHk6IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wXG4gICAgfTtcbiAgfVxuICByZXR1cm4ge1xuICAgIHg6IHNjcm9sbGFibGUuc2Nyb2xsTGVmdCxcbiAgICB5OiBzY3JvbGxhYmxlLnNjcm9sbFRvcFxuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdldFVuYm91bmRlZFNjcm9sbFBvc2l0aW9uO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9mYmpzL2xpYi9nZXRVbmJvdW5kZWRTY3JvbGxQb3NpdGlvbi5qc1xuLy8gbW9kdWxlIGlkID0gMTIwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdEluamVjdGlvblxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIERPTVByb3BlcnR5ID0gcmVxdWlyZSgnLi9ET01Qcm9wZXJ0eScpO1xudmFyIEV2ZW50UGx1Z2luSHViID0gcmVxdWlyZSgnLi9FdmVudFBsdWdpbkh1YicpO1xudmFyIFJlYWN0Q29tcG9uZW50RW52aXJvbm1lbnQgPSByZXF1aXJlKCcuL1JlYWN0Q29tcG9uZW50RW52aXJvbm1lbnQnKTtcbnZhciBSZWFjdENsYXNzID0gcmVxdWlyZSgnLi9SZWFjdENsYXNzJyk7XG52YXIgUmVhY3RFbXB0eUNvbXBvbmVudCA9IHJlcXVpcmUoJy4vUmVhY3RFbXB0eUNvbXBvbmVudCcpO1xudmFyIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJy4vUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyJyk7XG52YXIgUmVhY3ROYXRpdmVDb21wb25lbnQgPSByZXF1aXJlKCcuL1JlYWN0TmF0aXZlQ29tcG9uZW50Jyk7XG52YXIgUmVhY3RQZXJmID0gcmVxdWlyZSgnLi9SZWFjdFBlcmYnKTtcbnZhciBSZWFjdFJvb3RJbmRleCA9IHJlcXVpcmUoJy4vUmVhY3RSb290SW5kZXgnKTtcbnZhciBSZWFjdFVwZGF0ZXMgPSByZXF1aXJlKCcuL1JlYWN0VXBkYXRlcycpO1xuXG52YXIgUmVhY3RJbmplY3Rpb24gPSB7XG4gIENvbXBvbmVudDogUmVhY3RDb21wb25lbnRFbnZpcm9ubWVudC5pbmplY3Rpb24sXG4gIENsYXNzOiBSZWFjdENsYXNzLmluamVjdGlvbixcbiAgRE9NUHJvcGVydHk6IERPTVByb3BlcnR5LmluamVjdGlvbixcbiAgRW1wdHlDb21wb25lbnQ6IFJlYWN0RW1wdHlDb21wb25lbnQuaW5qZWN0aW9uLFxuICBFdmVudFBsdWdpbkh1YjogRXZlbnRQbHVnaW5IdWIuaW5qZWN0aW9uLFxuICBFdmVudEVtaXR0ZXI6IFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5pbmplY3Rpb24sXG4gIE5hdGl2ZUNvbXBvbmVudDogUmVhY3ROYXRpdmVDb21wb25lbnQuaW5qZWN0aW9uLFxuICBQZXJmOiBSZWFjdFBlcmYuaW5qZWN0aW9uLFxuICBSb290SW5kZXg6IFJlYWN0Um9vdEluZGV4LmluamVjdGlvbixcbiAgVXBkYXRlczogUmVhY3RVcGRhdGVzLmluamVjdGlvblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdEluamVjdGlvbjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QvbGliL1JlYWN0SW5qZWN0aW9uLmpzXG4vLyBtb2R1bGUgaWQgPSAxMjFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0Q2xhc3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdENvbXBvbmVudCA9IHJlcXVpcmUoJy4vUmVhY3RDb21wb25lbnQnKTtcbnZhciBSZWFjdEVsZW1lbnQgPSByZXF1aXJlKCcuL1JlYWN0RWxlbWVudCcpO1xudmFyIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnMgPSByZXF1aXJlKCcuL1JlYWN0UHJvcFR5cGVMb2NhdGlvbnMnKTtcbnZhciBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lcyA9IHJlcXVpcmUoJy4vUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXMnKTtcbnZhciBSZWFjdE5vb3BVcGRhdGVRdWV1ZSA9IHJlcXVpcmUoJy4vUmVhY3ROb29wVXBkYXRlUXVldWUnKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIGVtcHR5T2JqZWN0ID0gcmVxdWlyZSgnZmJqcy9saWIvZW1wdHlPYmplY3QnKTtcbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcbnZhciBrZXlNaXJyb3IgPSByZXF1aXJlKCdmYmpzL2xpYi9rZXlNaXJyb3InKTtcbnZhciBrZXlPZiA9IHJlcXVpcmUoJ2ZianMvbGliL2tleU9mJyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxudmFyIE1JWElOU19LRVkgPSBrZXlPZih7IG1peGluczogbnVsbCB9KTtcblxuLyoqXG4gKiBQb2xpY2llcyB0aGF0IGRlc2NyaWJlIG1ldGhvZHMgaW4gYFJlYWN0Q2xhc3NJbnRlcmZhY2VgLlxuICovXG52YXIgU3BlY1BvbGljeSA9IGtleU1pcnJvcih7XG4gIC8qKlxuICAgKiBUaGVzZSBtZXRob2RzIG1heSBiZSBkZWZpbmVkIG9ubHkgb25jZSBieSB0aGUgY2xhc3Mgc3BlY2lmaWNhdGlvbiBvciBtaXhpbi5cbiAgICovXG4gIERFRklORV9PTkNFOiBudWxsLFxuICAvKipcbiAgICogVGhlc2UgbWV0aG9kcyBtYXkgYmUgZGVmaW5lZCBieSBib3RoIHRoZSBjbGFzcyBzcGVjaWZpY2F0aW9uIGFuZCBtaXhpbnMuXG4gICAqIFN1YnNlcXVlbnQgZGVmaW5pdGlvbnMgd2lsbCBiZSBjaGFpbmVkLiBUaGVzZSBtZXRob2RzIG11c3QgcmV0dXJuIHZvaWQuXG4gICAqL1xuICBERUZJTkVfTUFOWTogbnVsbCxcbiAgLyoqXG4gICAqIFRoZXNlIG1ldGhvZHMgYXJlIG92ZXJyaWRpbmcgdGhlIGJhc2UgY2xhc3MuXG4gICAqL1xuICBPVkVSUklERV9CQVNFOiBudWxsLFxuICAvKipcbiAgICogVGhlc2UgbWV0aG9kcyBhcmUgc2ltaWxhciB0byBERUZJTkVfTUFOWSwgZXhjZXB0IHdlIGFzc3VtZSB0aGV5IHJldHVyblxuICAgKiBvYmplY3RzLiBXZSB0cnkgdG8gbWVyZ2UgdGhlIGtleXMgb2YgdGhlIHJldHVybiB2YWx1ZXMgb2YgYWxsIHRoZSBtaXhlZCBpblxuICAgKiBmdW5jdGlvbnMuIElmIHRoZXJlIGlzIGEga2V5IGNvbmZsaWN0IHdlIHRocm93LlxuICAgKi9cbiAgREVGSU5FX01BTllfTUVSR0VEOiBudWxsXG59KTtcblxudmFyIGluamVjdGVkTWl4aW5zID0gW107XG5cbnZhciB3YXJuZWRTZXRQcm9wcyA9IGZhbHNlO1xuZnVuY3Rpb24gd2FyblNldFByb3BzKCkge1xuICBpZiAoIXdhcm5lZFNldFByb3BzKSB7XG4gICAgd2FybmVkU2V0UHJvcHMgPSB0cnVlO1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnc2V0UHJvcHMoLi4uKSBhbmQgcmVwbGFjZVByb3BzKC4uLikgYXJlIGRlcHJlY2F0ZWQuICcgKyAnSW5zdGVhZCwgY2FsbCByZW5kZXIgYWdhaW4gYXQgdGhlIHRvcCBsZXZlbC4nKSA6IHVuZGVmaW5lZDtcbiAgfVxufVxuXG4vKipcbiAqIENvbXBvc2l0ZSBjb21wb25lbnRzIGFyZSBoaWdoZXItbGV2ZWwgY29tcG9uZW50cyB0aGF0IGNvbXBvc2Ugb3RoZXIgY29tcG9zaXRlXG4gKiBvciBuYXRpdmUgY29tcG9uZW50cy5cbiAqXG4gKiBUbyBjcmVhdGUgYSBuZXcgdHlwZSBvZiBgUmVhY3RDbGFzc2AsIHBhc3MgYSBzcGVjaWZpY2F0aW9uIG9mXG4gKiB5b3VyIG5ldyBjbGFzcyB0byBgUmVhY3QuY3JlYXRlQ2xhc3NgLiBUaGUgb25seSByZXF1aXJlbWVudCBvZiB5b3VyIGNsYXNzXG4gKiBzcGVjaWZpY2F0aW9uIGlzIHRoYXQgeW91IGltcGxlbWVudCBhIGByZW5kZXJgIG1ldGhvZC5cbiAqXG4gKiAgIHZhciBNeUNvbXBvbmVudCA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAqICAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICogICAgICAgcmV0dXJuIDxkaXY+SGVsbG8gV29ybGQ8L2Rpdj47XG4gKiAgICAgfVxuICogICB9KTtcbiAqXG4gKiBUaGUgY2xhc3Mgc3BlY2lmaWNhdGlvbiBzdXBwb3J0cyBhIHNwZWNpZmljIHByb3RvY29sIG9mIG1ldGhvZHMgdGhhdCBoYXZlXG4gKiBzcGVjaWFsIG1lYW5pbmcgKGUuZy4gYHJlbmRlcmApLiBTZWUgYFJlYWN0Q2xhc3NJbnRlcmZhY2VgIGZvclxuICogbW9yZSB0aGUgY29tcHJlaGVuc2l2ZSBwcm90b2NvbC4gQW55IG90aGVyIHByb3BlcnRpZXMgYW5kIG1ldGhvZHMgaW4gdGhlXG4gKiBjbGFzcyBzcGVjaWZpY2F0aW9uIHdpbGwgYmUgYXZhaWxhYmxlIG9uIHRoZSBwcm90b3R5cGUuXG4gKlxuICogQGludGVyZmFjZSBSZWFjdENsYXNzSW50ZXJmYWNlXG4gKiBAaW50ZXJuYWxcbiAqL1xudmFyIFJlYWN0Q2xhc3NJbnRlcmZhY2UgPSB7XG5cbiAgLyoqXG4gICAqIEFuIGFycmF5IG9mIE1peGluIG9iamVjdHMgdG8gaW5jbHVkZSB3aGVuIGRlZmluaW5nIHlvdXIgY29tcG9uZW50LlxuICAgKlxuICAgKiBAdHlwZSB7YXJyYXl9XG4gICAqIEBvcHRpb25hbFxuICAgKi9cbiAgbWl4aW5zOiBTcGVjUG9saWN5LkRFRklORV9NQU5ZLFxuXG4gIC8qKlxuICAgKiBBbiBvYmplY3QgY29udGFpbmluZyBwcm9wZXJ0aWVzIGFuZCBtZXRob2RzIHRoYXQgc2hvdWxkIGJlIGRlZmluZWQgb25cbiAgICogdGhlIGNvbXBvbmVudCdzIGNvbnN0cnVjdG9yIGluc3RlYWQgb2YgaXRzIHByb3RvdHlwZSAoc3RhdGljIG1ldGhvZHMpLlxuICAgKlxuICAgKiBAdHlwZSB7b2JqZWN0fVxuICAgKiBAb3B0aW9uYWxcbiAgICovXG4gIHN0YXRpY3M6IFNwZWNQb2xpY3kuREVGSU5FX01BTlksXG5cbiAgLyoqXG4gICAqIERlZmluaXRpb24gb2YgcHJvcCB0eXBlcyBmb3IgdGhpcyBjb21wb25lbnQuXG4gICAqXG4gICAqIEB0eXBlIHtvYmplY3R9XG4gICAqIEBvcHRpb25hbFxuICAgKi9cbiAgcHJvcFR5cGVzOiBTcGVjUG9saWN5LkRFRklORV9NQU5ZLFxuXG4gIC8qKlxuICAgKiBEZWZpbml0aW9uIG9mIGNvbnRleHQgdHlwZXMgZm9yIHRoaXMgY29tcG9uZW50LlxuICAgKlxuICAgKiBAdHlwZSB7b2JqZWN0fVxuICAgKiBAb3B0aW9uYWxcbiAgICovXG4gIGNvbnRleHRUeXBlczogU3BlY1BvbGljeS5ERUZJTkVfTUFOWSxcblxuICAvKipcbiAgICogRGVmaW5pdGlvbiBvZiBjb250ZXh0IHR5cGVzIHRoaXMgY29tcG9uZW50IHNldHMgZm9yIGl0cyBjaGlsZHJlbi5cbiAgICpcbiAgICogQHR5cGUge29iamVjdH1cbiAgICogQG9wdGlvbmFsXG4gICAqL1xuICBjaGlsZENvbnRleHRUeXBlczogU3BlY1BvbGljeS5ERUZJTkVfTUFOWSxcblxuICAvLyA9PT09IERlZmluaXRpb24gbWV0aG9kcyA9PT09XG5cbiAgLyoqXG4gICAqIEludm9rZWQgd2hlbiB0aGUgY29tcG9uZW50IGlzIG1vdW50ZWQuIFZhbHVlcyBpbiB0aGUgbWFwcGluZyB3aWxsIGJlIHNldCBvblxuICAgKiBgdGhpcy5wcm9wc2AgaWYgdGhhdCBwcm9wIGlzIG5vdCBzcGVjaWZpZWQgKGkuZS4gdXNpbmcgYW4gYGluYCBjaGVjaykuXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIGlzIGludm9rZWQgYmVmb3JlIGBnZXRJbml0aWFsU3RhdGVgIGFuZCB0aGVyZWZvcmUgY2Fubm90IHJlbHlcbiAgICogb24gYHRoaXMuc3RhdGVgIG9yIHVzZSBgdGhpcy5zZXRTdGF0ZWAuXG4gICAqXG4gICAqIEByZXR1cm4ge29iamVjdH1cbiAgICogQG9wdGlvbmFsXG4gICAqL1xuICBnZXREZWZhdWx0UHJvcHM6IFNwZWNQb2xpY3kuREVGSU5FX01BTllfTUVSR0VELFxuXG4gIC8qKlxuICAgKiBJbnZva2VkIG9uY2UgYmVmb3JlIHRoZSBjb21wb25lbnQgaXMgbW91bnRlZC4gVGhlIHJldHVybiB2YWx1ZSB3aWxsIGJlIHVzZWRcbiAgICogYXMgdGhlIGluaXRpYWwgdmFsdWUgb2YgYHRoaXMuc3RhdGVgLlxuICAgKlxuICAgKiAgIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAqICAgICByZXR1cm4ge1xuICAgKiAgICAgICBpc09uOiBmYWxzZSxcbiAgICogICAgICAgZm9vQmF6OiBuZXcgQmF6Rm9vKClcbiAgICogICAgIH1cbiAgICogICB9XG4gICAqXG4gICAqIEByZXR1cm4ge29iamVjdH1cbiAgICogQG9wdGlvbmFsXG4gICAqL1xuICBnZXRJbml0aWFsU3RhdGU6IFNwZWNQb2xpY3kuREVGSU5FX01BTllfTUVSR0VELFxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtvYmplY3R9XG4gICAqIEBvcHRpb25hbFxuICAgKi9cbiAgZ2V0Q2hpbGRDb250ZXh0OiBTcGVjUG9saWN5LkRFRklORV9NQU5ZX01FUkdFRCxcblxuICAvKipcbiAgICogVXNlcyBwcm9wcyBmcm9tIGB0aGlzLnByb3BzYCBhbmQgc3RhdGUgZnJvbSBgdGhpcy5zdGF0ZWAgdG8gcmVuZGVyIHRoZVxuICAgKiBzdHJ1Y3R1cmUgb2YgdGhlIGNvbXBvbmVudC5cbiAgICpcbiAgICogTm8gZ3VhcmFudGVlcyBhcmUgbWFkZSBhYm91dCB3aGVuIG9yIGhvdyBvZnRlbiB0aGlzIG1ldGhvZCBpcyBpbnZva2VkLCBzb1xuICAgKiBpdCBtdXN0IG5vdCBoYXZlIHNpZGUgZWZmZWN0cy5cbiAgICpcbiAgICogICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgKiAgICAgdmFyIG5hbWUgPSB0aGlzLnByb3BzLm5hbWU7XG4gICAqICAgICByZXR1cm4gPGRpdj5IZWxsbywge25hbWV9ITwvZGl2PjtcbiAgICogICB9XG4gICAqXG4gICAqIEByZXR1cm4ge1JlYWN0Q29tcG9uZW50fVxuICAgKiBAbm9zaWRlZWZmZWN0c1xuICAgKiBAcmVxdWlyZWRcbiAgICovXG4gIHJlbmRlcjogU3BlY1BvbGljeS5ERUZJTkVfT05DRSxcblxuICAvLyA9PT09IERlbGVnYXRlIG1ldGhvZHMgPT09PVxuXG4gIC8qKlxuICAgKiBJbnZva2VkIHdoZW4gdGhlIGNvbXBvbmVudCBpcyBpbml0aWFsbHkgY3JlYXRlZCBhbmQgYWJvdXQgdG8gYmUgbW91bnRlZC5cbiAgICogVGhpcyBtYXkgaGF2ZSBzaWRlIGVmZmVjdHMsIGJ1dCBhbnkgZXh0ZXJuYWwgc3Vic2NyaXB0aW9ucyBvciBkYXRhIGNyZWF0ZWRcbiAgICogYnkgdGhpcyBtZXRob2QgbXVzdCBiZSBjbGVhbmVkIHVwIGluIGBjb21wb25lbnRXaWxsVW5tb3VudGAuXG4gICAqXG4gICAqIEBvcHRpb25hbFxuICAgKi9cbiAgY29tcG9uZW50V2lsbE1vdW50OiBTcGVjUG9saWN5LkRFRklORV9NQU5ZLFxuXG4gIC8qKlxuICAgKiBJbnZva2VkIHdoZW4gdGhlIGNvbXBvbmVudCBoYXMgYmVlbiBtb3VudGVkIGFuZCBoYXMgYSBET00gcmVwcmVzZW50YXRpb24uXG4gICAqIEhvd2V2ZXIsIHRoZXJlIGlzIG5vIGd1YXJhbnRlZSB0aGF0IHRoZSBET00gbm9kZSBpcyBpbiB0aGUgZG9jdW1lbnQuXG4gICAqXG4gICAqIFVzZSB0aGlzIGFzIGFuIG9wcG9ydHVuaXR5IHRvIG9wZXJhdGUgb24gdGhlIERPTSB3aGVuIHRoZSBjb21wb25lbnQgaGFzXG4gICAqIGJlZW4gbW91bnRlZCAoaW5pdGlhbGl6ZWQgYW5kIHJlbmRlcmVkKSBmb3IgdGhlIGZpcnN0IHRpbWUuXG4gICAqXG4gICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gcm9vdE5vZGUgRE9NIGVsZW1lbnQgcmVwcmVzZW50aW5nIHRoZSBjb21wb25lbnQuXG4gICAqIEBvcHRpb25hbFxuICAgKi9cbiAgY29tcG9uZW50RGlkTW91bnQ6IFNwZWNQb2xpY3kuREVGSU5FX01BTlksXG5cbiAgLyoqXG4gICAqIEludm9rZWQgYmVmb3JlIHRoZSBjb21wb25lbnQgcmVjZWl2ZXMgbmV3IHByb3BzLlxuICAgKlxuICAgKiBVc2UgdGhpcyBhcyBhbiBvcHBvcnR1bml0eSB0byByZWFjdCB0byBhIHByb3AgdHJhbnNpdGlvbiBieSB1cGRhdGluZyB0aGVcbiAgICogc3RhdGUgdXNpbmcgYHRoaXMuc2V0U3RhdGVgLiBDdXJyZW50IHByb3BzIGFyZSBhY2Nlc3NlZCB2aWEgYHRoaXMucHJvcHNgLlxuICAgKlxuICAgKiAgIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHM6IGZ1bmN0aW9uKG5leHRQcm9wcywgbmV4dENvbnRleHQpIHtcbiAgICogICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgKiAgICAgICBsaWtlc0luY3JlYXNpbmc6IG5leHRQcm9wcy5saWtlQ291bnQgPiB0aGlzLnByb3BzLmxpa2VDb3VudFxuICAgKiAgICAgfSk7XG4gICAqICAgfVxuICAgKlxuICAgKiBOT1RFOiBUaGVyZSBpcyBubyBlcXVpdmFsZW50IGBjb21wb25lbnRXaWxsUmVjZWl2ZVN0YXRlYC4gQW4gaW5jb21pbmcgcHJvcFxuICAgKiB0cmFuc2l0aW9uIG1heSBjYXVzZSBhIHN0YXRlIGNoYW5nZSwgYnV0IHRoZSBvcHBvc2l0ZSBpcyBub3QgdHJ1ZS4gSWYgeW91XG4gICAqIG5lZWQgaXQsIHlvdSBhcmUgcHJvYmFibHkgbG9va2luZyBmb3IgYGNvbXBvbmVudFdpbGxVcGRhdGVgLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gbmV4dFByb3BzXG4gICAqIEBvcHRpb25hbFxuICAgKi9cbiAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wczogU3BlY1BvbGljeS5ERUZJTkVfTUFOWSxcblxuICAvKipcbiAgICogSW52b2tlZCB3aGlsZSBkZWNpZGluZyBpZiB0aGUgY29tcG9uZW50IHNob3VsZCBiZSB1cGRhdGVkIGFzIGEgcmVzdWx0IG9mXG4gICAqIHJlY2VpdmluZyBuZXcgcHJvcHMsIHN0YXRlIGFuZC9vciBjb250ZXh0LlxuICAgKlxuICAgKiBVc2UgdGhpcyBhcyBhbiBvcHBvcnR1bml0eSB0byBgcmV0dXJuIGZhbHNlYCB3aGVuIHlvdSdyZSBjZXJ0YWluIHRoYXQgdGhlXG4gICAqIHRyYW5zaXRpb24gdG8gdGhlIG5ldyBwcm9wcy9zdGF0ZS9jb250ZXh0IHdpbGwgbm90IHJlcXVpcmUgYSBjb21wb25lbnRcbiAgICogdXBkYXRlLlxuICAgKlxuICAgKiAgIHNob3VsZENvbXBvbmVudFVwZGF0ZTogZnVuY3Rpb24obmV4dFByb3BzLCBuZXh0U3RhdGUsIG5leHRDb250ZXh0KSB7XG4gICAqICAgICByZXR1cm4gIWVxdWFsKG5leHRQcm9wcywgdGhpcy5wcm9wcykgfHxcbiAgICogICAgICAgIWVxdWFsKG5leHRTdGF0ZSwgdGhpcy5zdGF0ZSkgfHxcbiAgICogICAgICAgIWVxdWFsKG5leHRDb250ZXh0LCB0aGlzLmNvbnRleHQpO1xuICAgKiAgIH1cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IG5leHRQcm9wc1xuICAgKiBAcGFyYW0gez9vYmplY3R9IG5leHRTdGF0ZVxuICAgKiBAcGFyYW0gez9vYmplY3R9IG5leHRDb250ZXh0XG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGNvbXBvbmVudCBzaG91bGQgdXBkYXRlLlxuICAgKiBAb3B0aW9uYWxcbiAgICovXG4gIHNob3VsZENvbXBvbmVudFVwZGF0ZTogU3BlY1BvbGljeS5ERUZJTkVfT05DRSxcblxuICAvKipcbiAgICogSW52b2tlZCB3aGVuIHRoZSBjb21wb25lbnQgaXMgYWJvdXQgdG8gdXBkYXRlIGR1ZSB0byBhIHRyYW5zaXRpb24gZnJvbVxuICAgKiBgdGhpcy5wcm9wc2AsIGB0aGlzLnN0YXRlYCBhbmQgYHRoaXMuY29udGV4dGAgdG8gYG5leHRQcm9wc2AsIGBuZXh0U3RhdGVgXG4gICAqIGFuZCBgbmV4dENvbnRleHRgLlxuICAgKlxuICAgKiBVc2UgdGhpcyBhcyBhbiBvcHBvcnR1bml0eSB0byBwZXJmb3JtIHByZXBhcmF0aW9uIGJlZm9yZSBhbiB1cGRhdGUgb2NjdXJzLlxuICAgKlxuICAgKiBOT1RFOiBZb3UgKipjYW5ub3QqKiB1c2UgYHRoaXMuc2V0U3RhdGUoKWAgaW4gdGhpcyBtZXRob2QuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBuZXh0UHJvcHNcbiAgICogQHBhcmFtIHs/b2JqZWN0fSBuZXh0U3RhdGVcbiAgICogQHBhcmFtIHs/b2JqZWN0fSBuZXh0Q29udGV4dFxuICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAqIEBvcHRpb25hbFxuICAgKi9cbiAgY29tcG9uZW50V2lsbFVwZGF0ZTogU3BlY1BvbGljeS5ERUZJTkVfTUFOWSxcblxuICAvKipcbiAgICogSW52b2tlZCB3aGVuIHRoZSBjb21wb25lbnQncyBET00gcmVwcmVzZW50YXRpb24gaGFzIGJlZW4gdXBkYXRlZC5cbiAgICpcbiAgICogVXNlIHRoaXMgYXMgYW4gb3Bwb3J0dW5pdHkgdG8gb3BlcmF0ZSBvbiB0aGUgRE9NIHdoZW4gdGhlIGNvbXBvbmVudCBoYXNcbiAgICogYmVlbiB1cGRhdGVkLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gcHJldlByb3BzXG4gICAqIEBwYXJhbSB7P29iamVjdH0gcHJldlN0YXRlXG4gICAqIEBwYXJhbSB7P29iamVjdH0gcHJldkNvbnRleHRcbiAgICogQHBhcmFtIHtET01FbGVtZW50fSByb290Tm9kZSBET00gZWxlbWVudCByZXByZXNlbnRpbmcgdGhlIGNvbXBvbmVudC5cbiAgICogQG9wdGlvbmFsXG4gICAqL1xuICBjb21wb25lbnREaWRVcGRhdGU6IFNwZWNQb2xpY3kuREVGSU5FX01BTlksXG5cbiAgLyoqXG4gICAqIEludm9rZWQgd2hlbiB0aGUgY29tcG9uZW50IGlzIGFib3V0IHRvIGJlIHJlbW92ZWQgZnJvbSBpdHMgcGFyZW50IGFuZCBoYXZlXG4gICAqIGl0cyBET00gcmVwcmVzZW50YXRpb24gZGVzdHJveWVkLlxuICAgKlxuICAgKiBVc2UgdGhpcyBhcyBhbiBvcHBvcnR1bml0eSB0byBkZWFsbG9jYXRlIGFueSBleHRlcm5hbCByZXNvdXJjZXMuXG4gICAqXG4gICAqIE5PVEU6IFRoZXJlIGlzIG5vIGBjb21wb25lbnREaWRVbm1vdW50YCBzaW5jZSB5b3VyIGNvbXBvbmVudCB3aWxsIGhhdmUgYmVlblxuICAgKiBkZXN0cm95ZWQgYnkgdGhhdCBwb2ludC5cbiAgICpcbiAgICogQG9wdGlvbmFsXG4gICAqL1xuICBjb21wb25lbnRXaWxsVW5tb3VudDogU3BlY1BvbGljeS5ERUZJTkVfTUFOWSxcblxuICAvLyA9PT09IEFkdmFuY2VkIG1ldGhvZHMgPT09PVxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSBjb21wb25lbnQncyBjdXJyZW50bHkgbW91bnRlZCBET00gcmVwcmVzZW50YXRpb24uXG4gICAqXG4gICAqIEJ5IGRlZmF1bHQsIHRoaXMgaW1wbGVtZW50cyBSZWFjdCdzIHJlbmRlcmluZyBhbmQgcmVjb25jaWxpYXRpb24gYWxnb3JpdGhtLlxuICAgKiBTb3BoaXN0aWNhdGVkIGNsaWVudHMgbWF5IHdpc2ggdG8gb3ZlcnJpZGUgdGhpcy5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgKiBAaW50ZXJuYWxcbiAgICogQG92ZXJyaWRhYmxlXG4gICAqL1xuICB1cGRhdGVDb21wb25lbnQ6IFNwZWNQb2xpY3kuT1ZFUlJJREVfQkFTRVxuXG59O1xuXG4vKipcbiAqIE1hcHBpbmcgZnJvbSBjbGFzcyBzcGVjaWZpY2F0aW9uIGtleXMgdG8gc3BlY2lhbCBwcm9jZXNzaW5nIGZ1bmN0aW9ucy5cbiAqXG4gKiBBbHRob3VnaCB0aGVzZSBhcmUgZGVjbGFyZWQgbGlrZSBpbnN0YW5jZSBwcm9wZXJ0aWVzIGluIHRoZSBzcGVjaWZpY2F0aW9uXG4gKiB3aGVuIGRlZmluaW5nIGNsYXNzZXMgdXNpbmcgYFJlYWN0LmNyZWF0ZUNsYXNzYCwgdGhleSBhcmUgYWN0dWFsbHkgc3RhdGljXG4gKiBhbmQgYXJlIGFjY2Vzc2libGUgb24gdGhlIGNvbnN0cnVjdG9yIGluc3RlYWQgb2YgdGhlIHByb3RvdHlwZS4gRGVzcGl0ZVxuICogYmVpbmcgc3RhdGljLCB0aGV5IG11c3QgYmUgZGVmaW5lZCBvdXRzaWRlIG9mIHRoZSBcInN0YXRpY3NcIiBrZXkgdW5kZXJcbiAqIHdoaWNoIGFsbCBvdGhlciBzdGF0aWMgbWV0aG9kcyBhcmUgZGVmaW5lZC5cbiAqL1xudmFyIFJFU0VSVkVEX1NQRUNfS0VZUyA9IHtcbiAgZGlzcGxheU5hbWU6IGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgZGlzcGxheU5hbWUpIHtcbiAgICBDb25zdHJ1Y3Rvci5kaXNwbGF5TmFtZSA9IGRpc3BsYXlOYW1lO1xuICB9LFxuICBtaXhpbnM6IGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgbWl4aW5zKSB7XG4gICAgaWYgKG1peGlucykge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtaXhpbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbWl4U3BlY0ludG9Db21wb25lbnQoQ29uc3RydWN0b3IsIG1peGluc1tpXSk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuICBjaGlsZENvbnRleHRUeXBlczogZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBjaGlsZENvbnRleHRUeXBlcykge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB2YWxpZGF0ZVR5cGVEZWYoQ29uc3RydWN0b3IsIGNoaWxkQ29udGV4dFR5cGVzLCBSZWFjdFByb3BUeXBlTG9jYXRpb25zLmNoaWxkQ29udGV4dCk7XG4gICAgfVxuICAgIENvbnN0cnVjdG9yLmNoaWxkQ29udGV4dFR5cGVzID0gYXNzaWduKHt9LCBDb25zdHJ1Y3Rvci5jaGlsZENvbnRleHRUeXBlcywgY2hpbGRDb250ZXh0VHlwZXMpO1xuICB9LFxuICBjb250ZXh0VHlwZXM6IGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgY29udGV4dFR5cGVzKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHZhbGlkYXRlVHlwZURlZihDb25zdHJ1Y3RvciwgY29udGV4dFR5cGVzLCBSZWFjdFByb3BUeXBlTG9jYXRpb25zLmNvbnRleHQpO1xuICAgIH1cbiAgICBDb25zdHJ1Y3Rvci5jb250ZXh0VHlwZXMgPSBhc3NpZ24oe30sIENvbnN0cnVjdG9yLmNvbnRleHRUeXBlcywgY29udGV4dFR5cGVzKTtcbiAgfSxcbiAgLyoqXG4gICAqIFNwZWNpYWwgY2FzZSBnZXREZWZhdWx0UHJvcHMgd2hpY2ggc2hvdWxkIG1vdmUgaW50byBzdGF0aWNzIGJ1dCByZXF1aXJlc1xuICAgKiBhdXRvbWF0aWMgbWVyZ2luZy5cbiAgICovXG4gIGdldERlZmF1bHRQcm9wczogZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBnZXREZWZhdWx0UHJvcHMpIHtcbiAgICBpZiAoQ29uc3RydWN0b3IuZ2V0RGVmYXVsdFByb3BzKSB7XG4gICAgICBDb25zdHJ1Y3Rvci5nZXREZWZhdWx0UHJvcHMgPSBjcmVhdGVNZXJnZWRSZXN1bHRGdW5jdGlvbihDb25zdHJ1Y3Rvci5nZXREZWZhdWx0UHJvcHMsIGdldERlZmF1bHRQcm9wcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIENvbnN0cnVjdG9yLmdldERlZmF1bHRQcm9wcyA9IGdldERlZmF1bHRQcm9wcztcbiAgICB9XG4gIH0sXG4gIHByb3BUeXBlczogZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm9wVHlwZXMpIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgdmFsaWRhdGVUeXBlRGVmKENvbnN0cnVjdG9yLCBwcm9wVHlwZXMsIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnMucHJvcCk7XG4gICAgfVxuICAgIENvbnN0cnVjdG9yLnByb3BUeXBlcyA9IGFzc2lnbih7fSwgQ29uc3RydWN0b3IucHJvcFR5cGVzLCBwcm9wVHlwZXMpO1xuICB9LFxuICBzdGF0aWNzOiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHN0YXRpY3MpIHtcbiAgICBtaXhTdGF0aWNTcGVjSW50b0NvbXBvbmVudChDb25zdHJ1Y3Rvciwgc3RhdGljcyk7XG4gIH0sXG4gIGF1dG9iaW5kOiBmdW5jdGlvbiAoKSB7fSB9O1xuXG4vLyBub29wXG5mdW5jdGlvbiB2YWxpZGF0ZVR5cGVEZWYoQ29uc3RydWN0b3IsIHR5cGVEZWYsIGxvY2F0aW9uKSB7XG4gIGZvciAodmFyIHByb3BOYW1lIGluIHR5cGVEZWYpIHtcbiAgICBpZiAodHlwZURlZi5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkpIHtcbiAgICAgIC8vIHVzZSBhIHdhcm5pbmcgaW5zdGVhZCBvZiBhbiBpbnZhcmlhbnQgc28gY29tcG9uZW50c1xuICAgICAgLy8gZG9uJ3Qgc2hvdyB1cCBpbiBwcm9kIGJ1dCBub3QgaW4gX19ERVZfX1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcodHlwZW9mIHR5cGVEZWZbcHJvcE5hbWVdID09PSAnZnVuY3Rpb24nLCAnJXM6ICVzIHR5cGUgYCVzYCBpcyBpbnZhbGlkOyBpdCBtdXN0IGJlIGEgZnVuY3Rpb24sIHVzdWFsbHkgZnJvbSAnICsgJ1JlYWN0LlByb3BUeXBlcy4nLCBDb25zdHJ1Y3Rvci5kaXNwbGF5TmFtZSB8fCAnUmVhY3RDbGFzcycsIFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXSwgcHJvcE5hbWUpIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZU1ldGhvZE92ZXJyaWRlKHByb3RvLCBuYW1lKSB7XG4gIHZhciBzcGVjUG9saWN5ID0gUmVhY3RDbGFzc0ludGVyZmFjZS5oYXNPd25Qcm9wZXJ0eShuYW1lKSA/IFJlYWN0Q2xhc3NJbnRlcmZhY2VbbmFtZV0gOiBudWxsO1xuXG4gIC8vIERpc2FsbG93IG92ZXJyaWRpbmcgb2YgYmFzZSBjbGFzcyBtZXRob2RzIHVubGVzcyBleHBsaWNpdGx5IGFsbG93ZWQuXG4gIGlmIChSZWFjdENsYXNzTWl4aW4uaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAhKHNwZWNQb2xpY3kgPT09IFNwZWNQb2xpY3kuT1ZFUlJJREVfQkFTRSkgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RDbGFzc0ludGVyZmFjZTogWW91IGFyZSBhdHRlbXB0aW5nIHRvIG92ZXJyaWRlICcgKyAnYCVzYCBmcm9tIHlvdXIgY2xhc3Mgc3BlY2lmaWNhdGlvbi4gRW5zdXJlIHRoYXQgeW91ciBtZXRob2QgbmFtZXMgJyArICdkbyBub3Qgb3ZlcmxhcCB3aXRoIFJlYWN0IG1ldGhvZHMuJywgbmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICB9XG5cbiAgLy8gRGlzYWxsb3cgZGVmaW5pbmcgbWV0aG9kcyBtb3JlIHRoYW4gb25jZSB1bmxlc3MgZXhwbGljaXRseSBhbGxvd2VkLlxuICBpZiAocHJvdG8uaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAhKHNwZWNQb2xpY3kgPT09IFNwZWNQb2xpY3kuREVGSU5FX01BTlkgfHwgc3BlY1BvbGljeSA9PT0gU3BlY1BvbGljeS5ERUZJTkVfTUFOWV9NRVJHRUQpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0Q2xhc3NJbnRlcmZhY2U6IFlvdSBhcmUgYXR0ZW1wdGluZyB0byBkZWZpbmUgJyArICdgJXNgIG9uIHlvdXIgY29tcG9uZW50IG1vcmUgdGhhbiBvbmNlLiBUaGlzIGNvbmZsaWN0IG1heSBiZSBkdWUgJyArICd0byBhIG1peGluLicsIG5hbWUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgfVxufVxuXG4vKipcbiAqIE1peGluIGhlbHBlciB3aGljaCBoYW5kbGVzIHBvbGljeSB2YWxpZGF0aW9uIGFuZCByZXNlcnZlZFxuICogc3BlY2lmaWNhdGlvbiBrZXlzIHdoZW4gYnVpbGRpbmcgUmVhY3QgY2xhc3NzZXMuXG4gKi9cbmZ1bmN0aW9uIG1peFNwZWNJbnRvQ29tcG9uZW50KENvbnN0cnVjdG9yLCBzcGVjKSB7XG4gIGlmICghc3BlYykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gICEodHlwZW9mIHNwZWMgIT09ICdmdW5jdGlvbicpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0Q2xhc3M6IFlvdVxcJ3JlIGF0dGVtcHRpbmcgdG8gJyArICd1c2UgYSBjb21wb25lbnQgY2xhc3MgYXMgYSBtaXhpbi4gSW5zdGVhZCwganVzdCB1c2UgYSByZWd1bGFyIG9iamVjdC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICEhUmVhY3RFbGVtZW50LmlzVmFsaWRFbGVtZW50KHNwZWMpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0Q2xhc3M6IFlvdVxcJ3JlIGF0dGVtcHRpbmcgdG8gJyArICd1c2UgYSBjb21wb25lbnQgYXMgYSBtaXhpbi4gSW5zdGVhZCwganVzdCB1c2UgYSByZWd1bGFyIG9iamVjdC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgdmFyIHByb3RvID0gQ29uc3RydWN0b3IucHJvdG90eXBlO1xuXG4gIC8vIEJ5IGhhbmRsaW5nIG1peGlucyBiZWZvcmUgYW55IG90aGVyIHByb3BlcnRpZXMsIHdlIGVuc3VyZSB0aGUgc2FtZVxuICAvLyBjaGFpbmluZyBvcmRlciBpcyBhcHBsaWVkIHRvIG1ldGhvZHMgd2l0aCBERUZJTkVfTUFOWSBwb2xpY3ksIHdoZXRoZXJcbiAgLy8gbWl4aW5zIGFyZSBsaXN0ZWQgYmVmb3JlIG9yIGFmdGVyIHRoZXNlIG1ldGhvZHMgaW4gdGhlIHNwZWMuXG4gIGlmIChzcGVjLmhhc093blByb3BlcnR5KE1JWElOU19LRVkpKSB7XG4gICAgUkVTRVJWRURfU1BFQ19LRVlTLm1peGlucyhDb25zdHJ1Y3Rvciwgc3BlYy5taXhpbnMpO1xuICB9XG5cbiAgZm9yICh2YXIgbmFtZSBpbiBzcGVjKSB7XG4gICAgaWYgKCFzcGVjLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBpZiAobmFtZSA9PT0gTUlYSU5TX0tFWSkge1xuICAgICAgLy8gV2UgaGF2ZSBhbHJlYWR5IGhhbmRsZWQgbWl4aW5zIGluIGEgc3BlY2lhbCBjYXNlIGFib3ZlLlxuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgdmFyIHByb3BlcnR5ID0gc3BlY1tuYW1lXTtcbiAgICB2YWxpZGF0ZU1ldGhvZE92ZXJyaWRlKHByb3RvLCBuYW1lKTtcblxuICAgIGlmIChSRVNFUlZFRF9TUEVDX0tFWVMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgIFJFU0VSVkVEX1NQRUNfS0VZU1tuYW1lXShDb25zdHJ1Y3RvciwgcHJvcGVydHkpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBTZXR1cCBtZXRob2RzIG9uIHByb3RvdHlwZTpcbiAgICAgIC8vIFRoZSBmb2xsb3dpbmcgbWVtYmVyIG1ldGhvZHMgc2hvdWxkIG5vdCBiZSBhdXRvbWF0aWNhbGx5IGJvdW5kOlxuICAgICAgLy8gMS4gRXhwZWN0ZWQgUmVhY3RDbGFzcyBtZXRob2RzIChpbiB0aGUgXCJpbnRlcmZhY2VcIikuXG4gICAgICAvLyAyLiBPdmVycmlkZGVuIG1ldGhvZHMgKHRoYXQgd2VyZSBtaXhlZCBpbikuXG4gICAgICB2YXIgaXNSZWFjdENsYXNzTWV0aG9kID0gUmVhY3RDbGFzc0ludGVyZmFjZS5oYXNPd25Qcm9wZXJ0eShuYW1lKTtcbiAgICAgIHZhciBpc0FscmVhZHlEZWZpbmVkID0gcHJvdG8uaGFzT3duUHJvcGVydHkobmFtZSk7XG4gICAgICB2YXIgaXNGdW5jdGlvbiA9IHR5cGVvZiBwcm9wZXJ0eSA9PT0gJ2Z1bmN0aW9uJztcbiAgICAgIHZhciBzaG91bGRBdXRvQmluZCA9IGlzRnVuY3Rpb24gJiYgIWlzUmVhY3RDbGFzc01ldGhvZCAmJiAhaXNBbHJlYWR5RGVmaW5lZCAmJiBzcGVjLmF1dG9iaW5kICE9PSBmYWxzZTtcblxuICAgICAgaWYgKHNob3VsZEF1dG9CaW5kKSB7XG4gICAgICAgIGlmICghcHJvdG8uX19yZWFjdEF1dG9CaW5kTWFwKSB7XG4gICAgICAgICAgcHJvdG8uX19yZWFjdEF1dG9CaW5kTWFwID0ge307XG4gICAgICAgIH1cbiAgICAgICAgcHJvdG8uX19yZWFjdEF1dG9CaW5kTWFwW25hbWVdID0gcHJvcGVydHk7XG4gICAgICAgIHByb3RvW25hbWVdID0gcHJvcGVydHk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoaXNBbHJlYWR5RGVmaW5lZCkge1xuICAgICAgICAgIHZhciBzcGVjUG9saWN5ID0gUmVhY3RDbGFzc0ludGVyZmFjZVtuYW1lXTtcblxuICAgICAgICAgIC8vIFRoZXNlIGNhc2VzIHNob3VsZCBhbHJlYWR5IGJlIGNhdWdodCBieSB2YWxpZGF0ZU1ldGhvZE92ZXJyaWRlLlxuICAgICAgICAgICEoaXNSZWFjdENsYXNzTWV0aG9kICYmIChzcGVjUG9saWN5ID09PSBTcGVjUG9saWN5LkRFRklORV9NQU5ZX01FUkdFRCB8fCBzcGVjUG9saWN5ID09PSBTcGVjUG9saWN5LkRFRklORV9NQU5ZKSkgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RDbGFzczogVW5leHBlY3RlZCBzcGVjIHBvbGljeSAlcyBmb3Iga2V5ICVzICcgKyAnd2hlbiBtaXhpbmcgaW4gY29tcG9uZW50IHNwZWNzLicsIHNwZWNQb2xpY3ksIG5hbWUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgICAgICAgIC8vIEZvciBtZXRob2RzIHdoaWNoIGFyZSBkZWZpbmVkIG1vcmUgdGhhbiBvbmNlLCBjYWxsIHRoZSBleGlzdGluZ1xuICAgICAgICAgIC8vIG1ldGhvZHMgYmVmb3JlIGNhbGxpbmcgdGhlIG5ldyBwcm9wZXJ0eSwgbWVyZ2luZyBpZiBhcHByb3ByaWF0ZS5cbiAgICAgICAgICBpZiAoc3BlY1BvbGljeSA9PT0gU3BlY1BvbGljeS5ERUZJTkVfTUFOWV9NRVJHRUQpIHtcbiAgICAgICAgICAgIHByb3RvW25hbWVdID0gY3JlYXRlTWVyZ2VkUmVzdWx0RnVuY3Rpb24ocHJvdG9bbmFtZV0sIHByb3BlcnR5KTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHNwZWNQb2xpY3kgPT09IFNwZWNQb2xpY3kuREVGSU5FX01BTlkpIHtcbiAgICAgICAgICAgIHByb3RvW25hbWVdID0gY3JlYXRlQ2hhaW5lZEZ1bmN0aW9uKHByb3RvW25hbWVdLCBwcm9wZXJ0eSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHByb3RvW25hbWVdID0gcHJvcGVydHk7XG4gICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICAgIC8vIEFkZCB2ZXJib3NlIGRpc3BsYXlOYW1lIHRvIHRoZSBmdW5jdGlvbiwgd2hpY2ggaGVscHMgd2hlbiBsb29raW5nXG4gICAgICAgICAgICAvLyBhdCBwcm9maWxpbmcgdG9vbHMuXG4gICAgICAgICAgICBpZiAodHlwZW9mIHByb3BlcnR5ID09PSAnZnVuY3Rpb24nICYmIHNwZWMuZGlzcGxheU5hbWUpIHtcbiAgICAgICAgICAgICAgcHJvdG9bbmFtZV0uZGlzcGxheU5hbWUgPSBzcGVjLmRpc3BsYXlOYW1lICsgJ18nICsgbmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gbWl4U3RhdGljU3BlY0ludG9Db21wb25lbnQoQ29uc3RydWN0b3IsIHN0YXRpY3MpIHtcbiAgaWYgKCFzdGF0aWNzKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGZvciAodmFyIG5hbWUgaW4gc3RhdGljcykge1xuICAgIHZhciBwcm9wZXJ0eSA9IHN0YXRpY3NbbmFtZV07XG4gICAgaWYgKCFzdGF0aWNzLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICB2YXIgaXNSZXNlcnZlZCA9IChuYW1lIGluIFJFU0VSVkVEX1NQRUNfS0VZUyk7XG4gICAgISFpc1Jlc2VydmVkID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0Q2xhc3M6IFlvdSBhcmUgYXR0ZW1wdGluZyB0byBkZWZpbmUgYSByZXNlcnZlZCAnICsgJ3Byb3BlcnR5LCBgJXNgLCB0aGF0IHNob3VsZG5cXCd0IGJlIG9uIHRoZSBcInN0YXRpY3NcIiBrZXkuIERlZmluZSBpdCAnICsgJ2FzIGFuIGluc3RhbmNlIHByb3BlcnR5IGluc3RlYWQ7IGl0IHdpbGwgc3RpbGwgYmUgYWNjZXNzaWJsZSBvbiB0aGUgJyArICdjb25zdHJ1Y3Rvci4nLCBuYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICB2YXIgaXNJbmhlcml0ZWQgPSAobmFtZSBpbiBDb25zdHJ1Y3Rvcik7XG4gICAgISFpc0luaGVyaXRlZCA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdENsYXNzOiBZb3UgYXJlIGF0dGVtcHRpbmcgdG8gZGVmaW5lICcgKyAnYCVzYCBvbiB5b3VyIGNvbXBvbmVudCBtb3JlIHRoYW4gb25jZS4gVGhpcyBjb25mbGljdCBtYXkgYmUgJyArICdkdWUgdG8gYSBtaXhpbi4nLCBuYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgQ29uc3RydWN0b3JbbmFtZV0gPSBwcm9wZXJ0eTtcbiAgfVxufVxuXG4vKipcbiAqIE1lcmdlIHR3byBvYmplY3RzLCBidXQgdGhyb3cgaWYgYm90aCBjb250YWluIHRoZSBzYW1lIGtleS5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gb25lIFRoZSBmaXJzdCBvYmplY3QsIHdoaWNoIGlzIG11dGF0ZWQuXG4gKiBAcGFyYW0ge29iamVjdH0gdHdvIFRoZSBzZWNvbmQgb2JqZWN0XG4gKiBAcmV0dXJuIHtvYmplY3R9IG9uZSBhZnRlciBpdCBoYXMgYmVlbiBtdXRhdGVkIHRvIGNvbnRhaW4gZXZlcnl0aGluZyBpbiB0d28uXG4gKi9cbmZ1bmN0aW9uIG1lcmdlSW50b1dpdGhOb0R1cGxpY2F0ZUtleXMob25lLCB0d28pIHtcbiAgIShvbmUgJiYgdHdvICYmIHR5cGVvZiBvbmUgPT09ICdvYmplY3QnICYmIHR5cGVvZiB0d28gPT09ICdvYmplY3QnKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdtZXJnZUludG9XaXRoTm9EdXBsaWNhdGVLZXlzKCk6IENhbm5vdCBtZXJnZSBub24tb2JqZWN0cy4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgZm9yICh2YXIga2V5IGluIHR3bykge1xuICAgIGlmICh0d28uaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgIShvbmVba2V5XSA9PT0gdW5kZWZpbmVkKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdtZXJnZUludG9XaXRoTm9EdXBsaWNhdGVLZXlzKCk6ICcgKyAnVHJpZWQgdG8gbWVyZ2UgdHdvIG9iamVjdHMgd2l0aCB0aGUgc2FtZSBrZXk6IGAlc2AuIFRoaXMgY29uZmxpY3QgJyArICdtYXkgYmUgZHVlIHRvIGEgbWl4aW47IGluIHBhcnRpY3VsYXIsIHRoaXMgbWF5IGJlIGNhdXNlZCBieSB0d28gJyArICdnZXRJbml0aWFsU3RhdGUoKSBvciBnZXREZWZhdWx0UHJvcHMoKSBtZXRob2RzIHJldHVybmluZyBvYmplY3RzICcgKyAnd2l0aCBjbGFzaGluZyBrZXlzLicsIGtleSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgICAgb25lW2tleV0gPSB0d29ba2V5XTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG9uZTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBpbnZva2VzIHR3byBmdW5jdGlvbnMgYW5kIG1lcmdlcyB0aGVpciByZXR1cm4gdmFsdWVzLlxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IG9uZSBGdW5jdGlvbiB0byBpbnZva2UgZmlyc3QuXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSB0d28gRnVuY3Rpb24gdG8gaW52b2tlIHNlY29uZC5cbiAqIEByZXR1cm4ge2Z1bmN0aW9ufSBGdW5jdGlvbiB0aGF0IGludm9rZXMgdGhlIHR3byBhcmd1bWVudCBmdW5jdGlvbnMuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBjcmVhdGVNZXJnZWRSZXN1bHRGdW5jdGlvbihvbmUsIHR3bykge1xuICByZXR1cm4gZnVuY3Rpb24gbWVyZ2VkUmVzdWx0KCkge1xuICAgIHZhciBhID0gb25lLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgdmFyIGIgPSB0d28uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAoYSA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gYjtcbiAgICB9IGVsc2UgaWYgKGIgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGE7XG4gICAgfVxuICAgIHZhciBjID0ge307XG4gICAgbWVyZ2VJbnRvV2l0aE5vRHVwbGljYXRlS2V5cyhjLCBhKTtcbiAgICBtZXJnZUludG9XaXRoTm9EdXBsaWNhdGVLZXlzKGMsIGIpO1xuICAgIHJldHVybiBjO1xuICB9O1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGludm9rZXMgdHdvIGZ1bmN0aW9ucyBhbmQgaWdub3JlcyB0aGVpciByZXR1cm4gdmFsZXMuXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbn0gb25lIEZ1bmN0aW9uIHRvIGludm9rZSBmaXJzdC5cbiAqIEBwYXJhbSB7ZnVuY3Rpb259IHR3byBGdW5jdGlvbiB0byBpbnZva2Ugc2Vjb25kLlxuICogQHJldHVybiB7ZnVuY3Rpb259IEZ1bmN0aW9uIHRoYXQgaW52b2tlcyB0aGUgdHdvIGFyZ3VtZW50IGZ1bmN0aW9ucy5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUNoYWluZWRGdW5jdGlvbihvbmUsIHR3bykge1xuICByZXR1cm4gZnVuY3Rpb24gY2hhaW5lZEZ1bmN0aW9uKCkge1xuICAgIG9uZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIHR3by5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9O1xufVxuXG4vKipcbiAqIEJpbmRzIGEgbWV0aG9kIHRvIHRoZSBjb21wb25lbnQuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IGNvbXBvbmVudCBDb21wb25lbnQgd2hvc2UgbWV0aG9kIGlzIGdvaW5nIHRvIGJlIGJvdW5kLlxuICogQHBhcmFtIHtmdW5jdGlvbn0gbWV0aG9kIE1ldGhvZCB0byBiZSBib3VuZC5cbiAqIEByZXR1cm4ge2Z1bmN0aW9ufSBUaGUgYm91bmQgbWV0aG9kLlxuICovXG5mdW5jdGlvbiBiaW5kQXV0b0JpbmRNZXRob2QoY29tcG9uZW50LCBtZXRob2QpIHtcbiAgdmFyIGJvdW5kTWV0aG9kID0gbWV0aG9kLmJpbmQoY29tcG9uZW50KTtcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBib3VuZE1ldGhvZC5fX3JlYWN0Qm91bmRDb250ZXh0ID0gY29tcG9uZW50O1xuICAgIGJvdW5kTWV0aG9kLl9fcmVhY3RCb3VuZE1ldGhvZCA9IG1ldGhvZDtcbiAgICBib3VuZE1ldGhvZC5fX3JlYWN0Qm91bmRBcmd1bWVudHMgPSBudWxsO1xuICAgIHZhciBjb21wb25lbnROYW1lID0gY29tcG9uZW50LmNvbnN0cnVjdG9yLmRpc3BsYXlOYW1lO1xuICAgIHZhciBfYmluZCA9IGJvdW5kTWV0aG9kLmJpbmQ7XG4gICAgLyogZXNsaW50LWRpc2FibGUgYmxvY2stc2NvcGVkLXZhciwgbm8tdW5kZWYgKi9cbiAgICBib3VuZE1ldGhvZC5iaW5kID0gZnVuY3Rpb24gKG5ld1RoaXMpIHtcbiAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICBhcmdzW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgIH1cblxuICAgICAgLy8gVXNlciBpcyB0cnlpbmcgdG8gYmluZCgpIGFuIGF1dG9ib3VuZCBtZXRob2Q7IHdlIGVmZmVjdGl2ZWx5IHdpbGxcbiAgICAgIC8vIGlnbm9yZSB0aGUgdmFsdWUgb2YgXCJ0aGlzXCIgdGhhdCB0aGUgdXNlciBpcyB0cnlpbmcgdG8gdXNlLCBzb1xuICAgICAgLy8gbGV0J3Mgd2Fybi5cbiAgICAgIGlmIChuZXdUaGlzICE9PSBjb21wb25lbnQgJiYgbmV3VGhpcyAhPT0gbnVsbCkge1xuICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ2JpbmQoKTogUmVhY3QgY29tcG9uZW50IG1ldGhvZHMgbWF5IG9ubHkgYmUgYm91bmQgdG8gdGhlICcgKyAnY29tcG9uZW50IGluc3RhbmNlLiBTZWUgJXMnLCBjb21wb25lbnROYW1lKSA6IHVuZGVmaW5lZDtcbiAgICAgIH0gZWxzZSBpZiAoIWFyZ3MubGVuZ3RoKSB7XG4gICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnYmluZCgpOiBZb3UgYXJlIGJpbmRpbmcgYSBjb21wb25lbnQgbWV0aG9kIHRvIHRoZSBjb21wb25lbnQuICcgKyAnUmVhY3QgZG9lcyB0aGlzIGZvciB5b3UgYXV0b21hdGljYWxseSBpbiBhIGhpZ2gtcGVyZm9ybWFuY2UgJyArICd3YXksIHNvIHlvdSBjYW4gc2FmZWx5IHJlbW92ZSB0aGlzIGNhbGwuIFNlZSAlcycsIGNvbXBvbmVudE5hbWUpIDogdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4gYm91bmRNZXRob2Q7XG4gICAgICB9XG4gICAgICB2YXIgcmVib3VuZE1ldGhvZCA9IF9iaW5kLmFwcGx5KGJvdW5kTWV0aG9kLCBhcmd1bWVudHMpO1xuICAgICAgcmVib3VuZE1ldGhvZC5fX3JlYWN0Qm91bmRDb250ZXh0ID0gY29tcG9uZW50O1xuICAgICAgcmVib3VuZE1ldGhvZC5fX3JlYWN0Qm91bmRNZXRob2QgPSBtZXRob2Q7XG4gICAgICByZWJvdW5kTWV0aG9kLl9fcmVhY3RCb3VuZEFyZ3VtZW50cyA9IGFyZ3M7XG4gICAgICByZXR1cm4gcmVib3VuZE1ldGhvZDtcbiAgICAgIC8qIGVzbGludC1lbmFibGUgKi9cbiAgICB9O1xuICB9XG4gIHJldHVybiBib3VuZE1ldGhvZDtcbn1cblxuLyoqXG4gKiBCaW5kcyBhbGwgYXV0by1ib3VuZCBtZXRob2RzIGluIGEgY29tcG9uZW50LlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBjb21wb25lbnQgQ29tcG9uZW50IHdob3NlIG1ldGhvZCBpcyBnb2luZyB0byBiZSBib3VuZC5cbiAqL1xuZnVuY3Rpb24gYmluZEF1dG9CaW5kTWV0aG9kcyhjb21wb25lbnQpIHtcbiAgZm9yICh2YXIgYXV0b0JpbmRLZXkgaW4gY29tcG9uZW50Ll9fcmVhY3RBdXRvQmluZE1hcCkge1xuICAgIGlmIChjb21wb25lbnQuX19yZWFjdEF1dG9CaW5kTWFwLmhhc093blByb3BlcnR5KGF1dG9CaW5kS2V5KSkge1xuICAgICAgdmFyIG1ldGhvZCA9IGNvbXBvbmVudC5fX3JlYWN0QXV0b0JpbmRNYXBbYXV0b0JpbmRLZXldO1xuICAgICAgY29tcG9uZW50W2F1dG9CaW5kS2V5XSA9IGJpbmRBdXRvQmluZE1ldGhvZChjb21wb25lbnQsIG1ldGhvZCk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQWRkIG1vcmUgdG8gdGhlIFJlYWN0Q2xhc3MgYmFzZSBjbGFzcy4gVGhlc2UgYXJlIGFsbCBsZWdhY3kgZmVhdHVyZXMgYW5kXG4gKiB0aGVyZWZvcmUgbm90IGFscmVhZHkgcGFydCBvZiB0aGUgbW9kZXJuIFJlYWN0Q29tcG9uZW50LlxuICovXG52YXIgUmVhY3RDbGFzc01peGluID0ge1xuXG4gIC8qKlxuICAgKiBUT0RPOiBUaGlzIHdpbGwgYmUgZGVwcmVjYXRlZCBiZWNhdXNlIHN0YXRlIHNob3VsZCBhbHdheXMga2VlcCBhIGNvbnNpc3RlbnRcbiAgICogdHlwZSBzaWduYXR1cmUgYW5kIHRoZSBvbmx5IHVzZSBjYXNlIGZvciB0aGlzLCBpcyB0byBhdm9pZCB0aGF0LlxuICAgKi9cbiAgcmVwbGFjZVN0YXRlOiBmdW5jdGlvbiAobmV3U3RhdGUsIGNhbGxiYWNrKSB7XG4gICAgdGhpcy51cGRhdGVyLmVucXVldWVSZXBsYWNlU3RhdGUodGhpcywgbmV3U3RhdGUpO1xuICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgdGhpcy51cGRhdGVyLmVucXVldWVDYWxsYmFjayh0aGlzLCBjYWxsYmFjayk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBDaGVja3Mgd2hldGhlciBvciBub3QgdGhpcyBjb21wb3NpdGUgY29tcG9uZW50IGlzIG1vdW50ZWQuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgbW91bnRlZCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgKiBAcHJvdGVjdGVkXG4gICAqIEBmaW5hbFxuICAgKi9cbiAgaXNNb3VudGVkOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMudXBkYXRlci5pc01vdW50ZWQodGhpcyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFNldHMgYSBzdWJzZXQgb2YgdGhlIHByb3BzLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gcGFydGlhbFByb3BzIFN1YnNldCBvZiB0aGUgbmV4dCBwcm9wcy5cbiAgICogQHBhcmFtIHs/ZnVuY3Rpb259IGNhbGxiYWNrIENhbGxlZCBhZnRlciBwcm9wcyBhcmUgdXBkYXRlZC5cbiAgICogQGZpbmFsXG4gICAqIEBwdWJsaWNcbiAgICogQGRlcHJlY2F0ZWRcbiAgICovXG4gIHNldFByb3BzOiBmdW5jdGlvbiAocGFydGlhbFByb3BzLCBjYWxsYmFjaykge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB3YXJuU2V0UHJvcHMoKTtcbiAgICB9XG4gICAgdGhpcy51cGRhdGVyLmVucXVldWVTZXRQcm9wcyh0aGlzLCBwYXJ0aWFsUHJvcHMpO1xuICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgdGhpcy51cGRhdGVyLmVucXVldWVDYWxsYmFjayh0aGlzLCBjYWxsYmFjayk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBSZXBsYWNlIGFsbCB0aGUgcHJvcHMuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBuZXdQcm9wcyBTdWJzZXQgb2YgdGhlIG5leHQgcHJvcHMuXG4gICAqIEBwYXJhbSB7P2Z1bmN0aW9ufSBjYWxsYmFjayBDYWxsZWQgYWZ0ZXIgcHJvcHMgYXJlIHVwZGF0ZWQuXG4gICAqIEBmaW5hbFxuICAgKiBAcHVibGljXG4gICAqIEBkZXByZWNhdGVkXG4gICAqL1xuICByZXBsYWNlUHJvcHM6IGZ1bmN0aW9uIChuZXdQcm9wcywgY2FsbGJhY2spIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgd2FyblNldFByb3BzKCk7XG4gICAgfVxuICAgIHRoaXMudXBkYXRlci5lbnF1ZXVlUmVwbGFjZVByb3BzKHRoaXMsIG5ld1Byb3BzKTtcbiAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgIHRoaXMudXBkYXRlci5lbnF1ZXVlQ2FsbGJhY2sodGhpcywgY2FsbGJhY2spO1xuICAgIH1cbiAgfVxufTtcblxudmFyIFJlYWN0Q2xhc3NDb21wb25lbnQgPSBmdW5jdGlvbiAoKSB7fTtcbmFzc2lnbihSZWFjdENsYXNzQ29tcG9uZW50LnByb3RvdHlwZSwgUmVhY3RDb21wb25lbnQucHJvdG90eXBlLCBSZWFjdENsYXNzTWl4aW4pO1xuXG4vKipcbiAqIE1vZHVsZSBmb3IgY3JlYXRpbmcgY29tcG9zaXRlIGNvbXBvbmVudHMuXG4gKlxuICogQGNsYXNzIFJlYWN0Q2xhc3NcbiAqL1xudmFyIFJlYWN0Q2xhc3MgPSB7XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBjb21wb3NpdGUgY29tcG9uZW50IGNsYXNzIGdpdmVuIGEgY2xhc3Mgc3BlY2lmaWNhdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IHNwZWMgQ2xhc3Mgc3BlY2lmaWNhdGlvbiAod2hpY2ggbXVzdCBkZWZpbmUgYHJlbmRlcmApLlxuICAgKiBAcmV0dXJuIHtmdW5jdGlvbn0gQ29tcG9uZW50IGNvbnN0cnVjdG9yIGZ1bmN0aW9uLlxuICAgKiBAcHVibGljXG4gICAqL1xuICBjcmVhdGVDbGFzczogZnVuY3Rpb24gKHNwZWMpIHtcbiAgICB2YXIgQ29uc3RydWN0b3IgPSBmdW5jdGlvbiAocHJvcHMsIGNvbnRleHQsIHVwZGF0ZXIpIHtcbiAgICAgIC8vIFRoaXMgY29uc3RydWN0b3IgaXMgb3ZlcnJpZGRlbiBieSBtb2Nrcy4gVGhlIGFyZ3VtZW50IGlzIHVzZWRcbiAgICAgIC8vIGJ5IG1vY2tzIHRvIGFzc2VydCBvbiB3aGF0IGdldHMgbW91bnRlZC5cblxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcodGhpcyBpbnN0YW5jZW9mIENvbnN0cnVjdG9yLCAnU29tZXRoaW5nIGlzIGNhbGxpbmcgYSBSZWFjdCBjb21wb25lbnQgZGlyZWN0bHkuIFVzZSBhIGZhY3Rvcnkgb3IgJyArICdKU1ggaW5zdGVhZC4gU2VlOiBodHRwczovL2ZiLm1lL3JlYWN0LWxlZ2FjeWZhY3RvcnknKSA6IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgLy8gV2lyZSB1cCBhdXRvLWJpbmRpbmdcbiAgICAgIGlmICh0aGlzLl9fcmVhY3RBdXRvQmluZE1hcCkge1xuICAgICAgICBiaW5kQXV0b0JpbmRNZXRob2RzKHRoaXMpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnByb3BzID0gcHJvcHM7XG4gICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgdGhpcy5yZWZzID0gZW1wdHlPYmplY3Q7XG4gICAgICB0aGlzLnVwZGF0ZXIgPSB1cGRhdGVyIHx8IFJlYWN0Tm9vcFVwZGF0ZVF1ZXVlO1xuXG4gICAgICB0aGlzLnN0YXRlID0gbnVsbDtcblxuICAgICAgLy8gUmVhY3RDbGFzc2VzIGRvZXNuJ3QgaGF2ZSBjb25zdHJ1Y3RvcnMuIEluc3RlYWQsIHRoZXkgdXNlIHRoZVxuICAgICAgLy8gZ2V0SW5pdGlhbFN0YXRlIGFuZCBjb21wb25lbnRXaWxsTW91bnQgbWV0aG9kcyBmb3IgaW5pdGlhbGl6YXRpb24uXG5cbiAgICAgIHZhciBpbml0aWFsU3RhdGUgPSB0aGlzLmdldEluaXRpYWxTdGF0ZSA/IHRoaXMuZ2V0SW5pdGlhbFN0YXRlKCkgOiBudWxsO1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgLy8gV2UgYWxsb3cgYXV0by1tb2NrcyB0byBwcm9jZWVkIGFzIGlmIHRoZXkncmUgcmV0dXJuaW5nIG51bGwuXG4gICAgICAgIGlmICh0eXBlb2YgaW5pdGlhbFN0YXRlID09PSAndW5kZWZpbmVkJyAmJiB0aGlzLmdldEluaXRpYWxTdGF0ZS5faXNNb2NrRnVuY3Rpb24pIHtcbiAgICAgICAgICAvLyBUaGlzIGlzIHByb2JhYmx5IGJhZCBwcmFjdGljZS4gQ29uc2lkZXIgd2FybmluZyBoZXJlIGFuZFxuICAgICAgICAgIC8vIGRlcHJlY2F0aW5nIHRoaXMgY29udmVuaWVuY2UuXG4gICAgICAgICAgaW5pdGlhbFN0YXRlID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgISh0eXBlb2YgaW5pdGlhbFN0YXRlID09PSAnb2JqZWN0JyAmJiAhQXJyYXkuaXNBcnJheShpbml0aWFsU3RhdGUpKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICclcy5nZXRJbml0aWFsU3RhdGUoKTogbXVzdCByZXR1cm4gYW4gb2JqZWN0IG9yIG51bGwnLCBDb25zdHJ1Y3Rvci5kaXNwbGF5TmFtZSB8fCAnUmVhY3RDb21wb3NpdGVDb21wb25lbnQnKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICAgIHRoaXMuc3RhdGUgPSBpbml0aWFsU3RhdGU7XG4gICAgfTtcbiAgICBDb25zdHJ1Y3Rvci5wcm90b3R5cGUgPSBuZXcgUmVhY3RDbGFzc0NvbXBvbmVudCgpO1xuICAgIENvbnN0cnVjdG9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENvbnN0cnVjdG9yO1xuXG4gICAgaW5qZWN0ZWRNaXhpbnMuZm9yRWFjaChtaXhTcGVjSW50b0NvbXBvbmVudC5iaW5kKG51bGwsIENvbnN0cnVjdG9yKSk7XG5cbiAgICBtaXhTcGVjSW50b0NvbXBvbmVudChDb25zdHJ1Y3Rvciwgc3BlYyk7XG5cbiAgICAvLyBJbml0aWFsaXplIHRoZSBkZWZhdWx0UHJvcHMgcHJvcGVydHkgYWZ0ZXIgYWxsIG1peGlucyBoYXZlIGJlZW4gbWVyZ2VkLlxuICAgIGlmIChDb25zdHJ1Y3Rvci5nZXREZWZhdWx0UHJvcHMpIHtcbiAgICAgIENvbnN0cnVjdG9yLmRlZmF1bHRQcm9wcyA9IENvbnN0cnVjdG9yLmdldERlZmF1bHRQcm9wcygpO1xuICAgIH1cblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAvLyBUaGlzIGlzIGEgdGFnIHRvIGluZGljYXRlIHRoYXQgdGhlIHVzZSBvZiB0aGVzZSBtZXRob2QgbmFtZXMgaXMgb2ssXG4gICAgICAvLyBzaW5jZSBpdCdzIHVzZWQgd2l0aCBjcmVhdGVDbGFzcy4gSWYgaXQncyBub3QsIHRoZW4gaXQncyBsaWtlbHkgYVxuICAgICAgLy8gbWlzdGFrZSBzbyB3ZSdsbCB3YXJuIHlvdSB0byB1c2UgdGhlIHN0YXRpYyBwcm9wZXJ0eSwgcHJvcGVydHlcbiAgICAgIC8vIGluaXRpYWxpemVyIG9yIGNvbnN0cnVjdG9yIHJlc3BlY3RpdmVseS5cbiAgICAgIGlmIChDb25zdHJ1Y3Rvci5nZXREZWZhdWx0UHJvcHMpIHtcbiAgICAgICAgQ29uc3RydWN0b3IuZ2V0RGVmYXVsdFByb3BzLmlzUmVhY3RDbGFzc0FwcHJvdmVkID0ge307XG4gICAgICB9XG4gICAgICBpZiAoQ29uc3RydWN0b3IucHJvdG90eXBlLmdldEluaXRpYWxTdGF0ZSkge1xuICAgICAgICBDb25zdHJ1Y3Rvci5wcm90b3R5cGUuZ2V0SW5pdGlhbFN0YXRlLmlzUmVhY3RDbGFzc0FwcHJvdmVkID0ge307XG4gICAgICB9XG4gICAgfVxuXG4gICAgIUNvbnN0cnVjdG9yLnByb3RvdHlwZS5yZW5kZXIgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnY3JlYXRlQ2xhc3MoLi4uKTogQ2xhc3Mgc3BlY2lmaWNhdGlvbiBtdXN0IGltcGxlbWVudCBhIGByZW5kZXJgIG1ldGhvZC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoIUNvbnN0cnVjdG9yLnByb3RvdHlwZS5jb21wb25lbnRTaG91bGRVcGRhdGUsICclcyBoYXMgYSBtZXRob2QgY2FsbGVkICcgKyAnY29tcG9uZW50U2hvdWxkVXBkYXRlKCkuIERpZCB5b3UgbWVhbiBzaG91bGRDb21wb25lbnRVcGRhdGUoKT8gJyArICdUaGUgbmFtZSBpcyBwaHJhc2VkIGFzIGEgcXVlc3Rpb24gYmVjYXVzZSB0aGUgZnVuY3Rpb24gaXMgJyArICdleHBlY3RlZCB0byByZXR1cm4gYSB2YWx1ZS4nLCBzcGVjLmRpc3BsYXlOYW1lIHx8ICdBIGNvbXBvbmVudCcpIDogdW5kZWZpbmVkO1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoIUNvbnN0cnVjdG9yLnByb3RvdHlwZS5jb21wb25lbnRXaWxsUmVjaWV2ZVByb3BzLCAnJXMgaGFzIGEgbWV0aG9kIGNhbGxlZCAnICsgJ2NvbXBvbmVudFdpbGxSZWNpZXZlUHJvcHMoKS4gRGlkIHlvdSBtZWFuIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMoKT8nLCBzcGVjLmRpc3BsYXlOYW1lIHx8ICdBIGNvbXBvbmVudCcpIDogdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8vIFJlZHVjZSB0aW1lIHNwZW50IGRvaW5nIGxvb2t1cHMgYnkgc2V0dGluZyB0aGVzZSBvbiB0aGUgcHJvdG90eXBlLlxuICAgIGZvciAodmFyIG1ldGhvZE5hbWUgaW4gUmVhY3RDbGFzc0ludGVyZmFjZSkge1xuICAgICAgaWYgKCFDb25zdHJ1Y3Rvci5wcm90b3R5cGVbbWV0aG9kTmFtZV0pIHtcbiAgICAgICAgQ29uc3RydWN0b3IucHJvdG90eXBlW21ldGhvZE5hbWVdID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gQ29uc3RydWN0b3I7XG4gIH0sXG5cbiAgaW5qZWN0aW9uOiB7XG4gICAgaW5qZWN0TWl4aW46IGZ1bmN0aW9uIChtaXhpbikge1xuICAgICAgaW5qZWN0ZWRNaXhpbnMucHVzaChtaXhpbik7XG4gICAgfVxuICB9XG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RDbGFzcztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QvbGliL1JlYWN0Q2xhc3MuanNcbi8vIG1vZHVsZSBpZCA9IDEyMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RDb21wb25lbnRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdE5vb3BVcGRhdGVRdWV1ZSA9IHJlcXVpcmUoJy4vUmVhY3ROb29wVXBkYXRlUXVldWUnKTtcblxudmFyIGNhbkRlZmluZVByb3BlcnR5ID0gcmVxdWlyZSgnLi9jYW5EZWZpbmVQcm9wZXJ0eScpO1xudmFyIGVtcHR5T2JqZWN0ID0gcmVxdWlyZSgnZmJqcy9saWIvZW1wdHlPYmplY3QnKTtcbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG4vKipcbiAqIEJhc2UgY2xhc3MgaGVscGVycyBmb3IgdGhlIHVwZGF0aW5nIHN0YXRlIG9mIGEgY29tcG9uZW50LlxuICovXG5mdW5jdGlvbiBSZWFjdENvbXBvbmVudChwcm9wcywgY29udGV4dCwgdXBkYXRlcikge1xuICB0aGlzLnByb3BzID0gcHJvcHM7XG4gIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gIHRoaXMucmVmcyA9IGVtcHR5T2JqZWN0O1xuICAvLyBXZSBpbml0aWFsaXplIHRoZSBkZWZhdWx0IHVwZGF0ZXIgYnV0IHRoZSByZWFsIG9uZSBnZXRzIGluamVjdGVkIGJ5IHRoZVxuICAvLyByZW5kZXJlci5cbiAgdGhpcy51cGRhdGVyID0gdXBkYXRlciB8fCBSZWFjdE5vb3BVcGRhdGVRdWV1ZTtcbn1cblxuUmVhY3RDb21wb25lbnQucHJvdG90eXBlLmlzUmVhY3RDb21wb25lbnQgPSB7fTtcblxuLyoqXG4gKiBTZXRzIGEgc3Vic2V0IG9mIHRoZSBzdGF0ZS4gQWx3YXlzIHVzZSB0aGlzIHRvIG11dGF0ZVxuICogc3RhdGUuIFlvdSBzaG91bGQgdHJlYXQgYHRoaXMuc3RhdGVgIGFzIGltbXV0YWJsZS5cbiAqXG4gKiBUaGVyZSBpcyBubyBndWFyYW50ZWUgdGhhdCBgdGhpcy5zdGF0ZWAgd2lsbCBiZSBpbW1lZGlhdGVseSB1cGRhdGVkLCBzb1xuICogYWNjZXNzaW5nIGB0aGlzLnN0YXRlYCBhZnRlciBjYWxsaW5nIHRoaXMgbWV0aG9kIG1heSByZXR1cm4gdGhlIG9sZCB2YWx1ZS5cbiAqXG4gKiBUaGVyZSBpcyBubyBndWFyYW50ZWUgdGhhdCBjYWxscyB0byBgc2V0U3RhdGVgIHdpbGwgcnVuIHN5bmNocm9ub3VzbHksXG4gKiBhcyB0aGV5IG1heSBldmVudHVhbGx5IGJlIGJhdGNoZWQgdG9nZXRoZXIuICBZb3UgY2FuIHByb3ZpZGUgYW4gb3B0aW9uYWxcbiAqIGNhbGxiYWNrIHRoYXQgd2lsbCBiZSBleGVjdXRlZCB3aGVuIHRoZSBjYWxsIHRvIHNldFN0YXRlIGlzIGFjdHVhbGx5XG4gKiBjb21wbGV0ZWQuXG4gKlxuICogV2hlbiBhIGZ1bmN0aW9uIGlzIHByb3ZpZGVkIHRvIHNldFN0YXRlLCBpdCB3aWxsIGJlIGNhbGxlZCBhdCBzb21lIHBvaW50IGluXG4gKiB0aGUgZnV0dXJlIChub3Qgc3luY2hyb25vdXNseSkuIEl0IHdpbGwgYmUgY2FsbGVkIHdpdGggdGhlIHVwIHRvIGRhdGVcbiAqIGNvbXBvbmVudCBhcmd1bWVudHMgKHN0YXRlLCBwcm9wcywgY29udGV4dCkuIFRoZXNlIHZhbHVlcyBjYW4gYmUgZGlmZmVyZW50XG4gKiBmcm9tIHRoaXMuKiBiZWNhdXNlIHlvdXIgZnVuY3Rpb24gbWF5IGJlIGNhbGxlZCBhZnRlciByZWNlaXZlUHJvcHMgYnV0IGJlZm9yZVxuICogc2hvdWxkQ29tcG9uZW50VXBkYXRlLCBhbmQgdGhpcyBuZXcgc3RhdGUsIHByb3BzLCBhbmQgY29udGV4dCB3aWxsIG5vdCB5ZXQgYmVcbiAqIGFzc2lnbmVkIHRvIHRoaXMuXG4gKlxuICogQHBhcmFtIHtvYmplY3R8ZnVuY3Rpb259IHBhcnRpYWxTdGF0ZSBOZXh0IHBhcnRpYWwgc3RhdGUgb3IgZnVuY3Rpb24gdG9cbiAqICAgICAgICBwcm9kdWNlIG5leHQgcGFydGlhbCBzdGF0ZSB0byBiZSBtZXJnZWQgd2l0aCBjdXJyZW50IHN0YXRlLlxuICogQHBhcmFtIHs/ZnVuY3Rpb259IGNhbGxiYWNrIENhbGxlZCBhZnRlciBzdGF0ZSBpcyB1cGRhdGVkLlxuICogQGZpbmFsXG4gKiBAcHJvdGVjdGVkXG4gKi9cblJlYWN0Q29tcG9uZW50LnByb3RvdHlwZS5zZXRTdGF0ZSA9IGZ1bmN0aW9uIChwYXJ0aWFsU3RhdGUsIGNhbGxiYWNrKSB7XG4gICEodHlwZW9mIHBhcnRpYWxTdGF0ZSA9PT0gJ29iamVjdCcgfHwgdHlwZW9mIHBhcnRpYWxTdGF0ZSA9PT0gJ2Z1bmN0aW9uJyB8fCBwYXJ0aWFsU3RhdGUgPT0gbnVsbCkgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnc2V0U3RhdGUoLi4uKTogdGFrZXMgYW4gb2JqZWN0IG9mIHN0YXRlIHZhcmlhYmxlcyB0byB1cGRhdGUgb3IgYSAnICsgJ2Z1bmN0aW9uIHdoaWNoIHJldHVybnMgYW4gb2JqZWN0IG9mIHN0YXRlIHZhcmlhYmxlcy4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcocGFydGlhbFN0YXRlICE9IG51bGwsICdzZXRTdGF0ZSguLi4pOiBZb3UgcGFzc2VkIGFuIHVuZGVmaW5lZCBvciBudWxsIHN0YXRlIG9iamVjdDsgJyArICdpbnN0ZWFkLCB1c2UgZm9yY2VVcGRhdGUoKS4nKSA6IHVuZGVmaW5lZDtcbiAgfVxuICB0aGlzLnVwZGF0ZXIuZW5xdWV1ZVNldFN0YXRlKHRoaXMsIHBhcnRpYWxTdGF0ZSk7XG4gIGlmIChjYWxsYmFjaykge1xuICAgIHRoaXMudXBkYXRlci5lbnF1ZXVlQ2FsbGJhY2sodGhpcywgY2FsbGJhY2spO1xuICB9XG59O1xuXG4vKipcbiAqIEZvcmNlcyBhbiB1cGRhdGUuIFRoaXMgc2hvdWxkIG9ubHkgYmUgaW52b2tlZCB3aGVuIGl0IGlzIGtub3duIHdpdGhcbiAqIGNlcnRhaW50eSB0aGF0IHdlIGFyZSAqKm5vdCoqIGluIGEgRE9NIHRyYW5zYWN0aW9uLlxuICpcbiAqIFlvdSBtYXkgd2FudCB0byBjYWxsIHRoaXMgd2hlbiB5b3Uga25vdyB0aGF0IHNvbWUgZGVlcGVyIGFzcGVjdCBvZiB0aGVcbiAqIGNvbXBvbmVudCdzIHN0YXRlIGhhcyBjaGFuZ2VkIGJ1dCBgc2V0U3RhdGVgIHdhcyBub3QgY2FsbGVkLlxuICpcbiAqIFRoaXMgd2lsbCBub3QgaW52b2tlIGBzaG91bGRDb21wb25lbnRVcGRhdGVgLCBidXQgaXQgd2lsbCBpbnZva2VcbiAqIGBjb21wb25lbnRXaWxsVXBkYXRlYCBhbmQgYGNvbXBvbmVudERpZFVwZGF0ZWAuXG4gKlxuICogQHBhcmFtIHs/ZnVuY3Rpb259IGNhbGxiYWNrIENhbGxlZCBhZnRlciB1cGRhdGUgaXMgY29tcGxldGUuXG4gKiBAZmluYWxcbiAqIEBwcm90ZWN0ZWRcbiAqL1xuUmVhY3RDb21wb25lbnQucHJvdG90eXBlLmZvcmNlVXBkYXRlID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gIHRoaXMudXBkYXRlci5lbnF1ZXVlRm9yY2VVcGRhdGUodGhpcyk7XG4gIGlmIChjYWxsYmFjaykge1xuICAgIHRoaXMudXBkYXRlci5lbnF1ZXVlQ2FsbGJhY2sodGhpcywgY2FsbGJhY2spO1xuICB9XG59O1xuXG4vKipcbiAqIERlcHJlY2F0ZWQgQVBJcy4gVGhlc2UgQVBJcyB1c2VkIHRvIGV4aXN0IG9uIGNsYXNzaWMgUmVhY3QgY2xhc3NlcyBidXQgc2luY2VcbiAqIHdlIHdvdWxkIGxpa2UgdG8gZGVwcmVjYXRlIHRoZW0sIHdlJ3JlIG5vdCBnb2luZyB0byBtb3ZlIHRoZW0gb3ZlciB0byB0aGlzXG4gKiBtb2Rlcm4gYmFzZSBjbGFzcy4gSW5zdGVhZCwgd2UgZGVmaW5lIGEgZ2V0dGVyIHRoYXQgd2FybnMgaWYgaXQncyBhY2Nlc3NlZC5cbiAqL1xuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgdmFyIGRlcHJlY2F0ZWRBUElzID0ge1xuICAgIGdldERPTU5vZGU6IFsnZ2V0RE9NTm9kZScsICdVc2UgUmVhY3RET00uZmluZERPTU5vZGUoY29tcG9uZW50KSBpbnN0ZWFkLiddLFxuICAgIGlzTW91bnRlZDogWydpc01vdW50ZWQnLCAnSW5zdGVhZCwgbWFrZSBzdXJlIHRvIGNsZWFuIHVwIHN1YnNjcmlwdGlvbnMgYW5kIHBlbmRpbmcgcmVxdWVzdHMgaW4gJyArICdjb21wb25lbnRXaWxsVW5tb3VudCB0byBwcmV2ZW50IG1lbW9yeSBsZWFrcy4nXSxcbiAgICByZXBsYWNlUHJvcHM6IFsncmVwbGFjZVByb3BzJywgJ0luc3RlYWQsIGNhbGwgcmVuZGVyIGFnYWluIGF0IHRoZSB0b3AgbGV2ZWwuJ10sXG4gICAgcmVwbGFjZVN0YXRlOiBbJ3JlcGxhY2VTdGF0ZScsICdSZWZhY3RvciB5b3VyIGNvZGUgdG8gdXNlIHNldFN0YXRlIGluc3RlYWQgKHNlZSAnICsgJ2h0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC9pc3N1ZXMvMzIzNikuJ10sXG4gICAgc2V0UHJvcHM6IFsnc2V0UHJvcHMnLCAnSW5zdGVhZCwgY2FsbCByZW5kZXIgYWdhaW4gYXQgdGhlIHRvcCBsZXZlbC4nXVxuICB9O1xuICB2YXIgZGVmaW5lRGVwcmVjYXRpb25XYXJuaW5nID0gZnVuY3Rpb24gKG1ldGhvZE5hbWUsIGluZm8pIHtcbiAgICBpZiAoY2FuRGVmaW5lUHJvcGVydHkpIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWFjdENvbXBvbmVudC5wcm90b3R5cGUsIG1ldGhvZE5hbWUsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICclcyguLi4pIGlzIGRlcHJlY2F0ZWQgaW4gcGxhaW4gSmF2YVNjcmlwdCBSZWFjdCBjbGFzc2VzLiAlcycsIGluZm9bMF0sIGluZm9bMV0pIDogdW5kZWZpbmVkO1xuICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbiAgZm9yICh2YXIgZm5OYW1lIGluIGRlcHJlY2F0ZWRBUElzKSB7XG4gICAgaWYgKGRlcHJlY2F0ZWRBUElzLmhhc093blByb3BlcnR5KGZuTmFtZSkpIHtcbiAgICAgIGRlZmluZURlcHJlY2F0aW9uV2FybmluZyhmbk5hbWUsIGRlcHJlY2F0ZWRBUElzW2ZuTmFtZV0pO1xuICAgIH1cbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0Q29tcG9uZW50O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvUmVhY3RDb21wb25lbnQuanNcbi8vIG1vZHVsZSBpZCA9IDEyM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0Tm9vcFVwZGF0ZVF1ZXVlXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxuZnVuY3Rpb24gd2FyblREWihwdWJsaWNJbnN0YW5jZSwgY2FsbGVyTmFtZSkge1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnJXMoLi4uKTogQ2FuIG9ubHkgdXBkYXRlIGEgbW91bnRlZCBvciBtb3VudGluZyBjb21wb25lbnQuICcgKyAnVGhpcyB1c3VhbGx5IG1lYW5zIHlvdSBjYWxsZWQgJXMoKSBvbiBhbiB1bm1vdW50ZWQgY29tcG9uZW50LiAnICsgJ1RoaXMgaXMgYSBuby1vcC4gUGxlYXNlIGNoZWNrIHRoZSBjb2RlIGZvciB0aGUgJXMgY29tcG9uZW50LicsIGNhbGxlck5hbWUsIGNhbGxlck5hbWUsIHB1YmxpY0luc3RhbmNlLmNvbnN0cnVjdG9yICYmIHB1YmxpY0luc3RhbmNlLmNvbnN0cnVjdG9yLmRpc3BsYXlOYW1lIHx8ICcnKSA6IHVuZGVmaW5lZDtcbiAgfVxufVxuXG4vKipcbiAqIFRoaXMgaXMgdGhlIGFic3RyYWN0IEFQSSBmb3IgYW4gdXBkYXRlIHF1ZXVlLlxuICovXG52YXIgUmVhY3ROb29wVXBkYXRlUXVldWUgPSB7XG5cbiAgLyoqXG4gICAqIENoZWNrcyB3aGV0aGVyIG9yIG5vdCB0aGlzIGNvbXBvc2l0ZSBjb21wb25lbnQgaXMgbW91bnRlZC5cbiAgICogQHBhcmFtIHtSZWFjdENsYXNzfSBwdWJsaWNJbnN0YW5jZSBUaGUgaW5zdGFuY2Ugd2Ugd2FudCB0byB0ZXN0LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIG1vdW50ZWQsIGZhbHNlIG90aGVyd2lzZS5cbiAgICogQHByb3RlY3RlZFxuICAgKiBAZmluYWxcbiAgICovXG4gIGlzTW91bnRlZDogZnVuY3Rpb24gKHB1YmxpY0luc3RhbmNlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBFbnF1ZXVlIGEgY2FsbGJhY2sgdGhhdCB3aWxsIGJlIGV4ZWN1dGVkIGFmdGVyIGFsbCB0aGUgcGVuZGluZyB1cGRhdGVzXG4gICAqIGhhdmUgcHJvY2Vzc2VkLlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0Q2xhc3N9IHB1YmxpY0luc3RhbmNlIFRoZSBpbnN0YW5jZSB0byB1c2UgYXMgYHRoaXNgIGNvbnRleHQuXG4gICAqIEBwYXJhbSB7P2Z1bmN0aW9ufSBjYWxsYmFjayBDYWxsZWQgYWZ0ZXIgc3RhdGUgaXMgdXBkYXRlZC5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBlbnF1ZXVlQ2FsbGJhY2s6IGZ1bmN0aW9uIChwdWJsaWNJbnN0YW5jZSwgY2FsbGJhY2spIHt9LFxuXG4gIC8qKlxuICAgKiBGb3JjZXMgYW4gdXBkYXRlLiBUaGlzIHNob3VsZCBvbmx5IGJlIGludm9rZWQgd2hlbiBpdCBpcyBrbm93biB3aXRoXG4gICAqIGNlcnRhaW50eSB0aGF0IHdlIGFyZSAqKm5vdCoqIGluIGEgRE9NIHRyYW5zYWN0aW9uLlxuICAgKlxuICAgKiBZb3UgbWF5IHdhbnQgdG8gY2FsbCB0aGlzIHdoZW4geW91IGtub3cgdGhhdCBzb21lIGRlZXBlciBhc3BlY3Qgb2YgdGhlXG4gICAqIGNvbXBvbmVudCdzIHN0YXRlIGhhcyBjaGFuZ2VkIGJ1dCBgc2V0U3RhdGVgIHdhcyBub3QgY2FsbGVkLlxuICAgKlxuICAgKiBUaGlzIHdpbGwgbm90IGludm9rZSBgc2hvdWxkQ29tcG9uZW50VXBkYXRlYCwgYnV0IGl0IHdpbGwgaW52b2tlXG4gICAqIGBjb21wb25lbnRXaWxsVXBkYXRlYCBhbmQgYGNvbXBvbmVudERpZFVwZGF0ZWAuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RDbGFzc30gcHVibGljSW5zdGFuY2UgVGhlIGluc3RhbmNlIHRoYXQgc2hvdWxkIHJlcmVuZGVyLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGVucXVldWVGb3JjZVVwZGF0ZTogZnVuY3Rpb24gKHB1YmxpY0luc3RhbmNlKSB7XG4gICAgd2FyblREWihwdWJsaWNJbnN0YW5jZSwgJ2ZvcmNlVXBkYXRlJyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlcGxhY2VzIGFsbCBvZiB0aGUgc3RhdGUuIEFsd2F5cyB1c2UgdGhpcyBvciBgc2V0U3RhdGVgIHRvIG11dGF0ZSBzdGF0ZS5cbiAgICogWW91IHNob3VsZCB0cmVhdCBgdGhpcy5zdGF0ZWAgYXMgaW1tdXRhYmxlLlxuICAgKlxuICAgKiBUaGVyZSBpcyBubyBndWFyYW50ZWUgdGhhdCBgdGhpcy5zdGF0ZWAgd2lsbCBiZSBpbW1lZGlhdGVseSB1cGRhdGVkLCBzb1xuICAgKiBhY2Nlc3NpbmcgYHRoaXMuc3RhdGVgIGFmdGVyIGNhbGxpbmcgdGhpcyBtZXRob2QgbWF5IHJldHVybiB0aGUgb2xkIHZhbHVlLlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0Q2xhc3N9IHB1YmxpY0luc3RhbmNlIFRoZSBpbnN0YW5jZSB0aGF0IHNob3VsZCByZXJlbmRlci5cbiAgICogQHBhcmFtIHtvYmplY3R9IGNvbXBsZXRlU3RhdGUgTmV4dCBzdGF0ZS5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBlbnF1ZXVlUmVwbGFjZVN0YXRlOiBmdW5jdGlvbiAocHVibGljSW5zdGFuY2UsIGNvbXBsZXRlU3RhdGUpIHtcbiAgICB3YXJuVERaKHB1YmxpY0luc3RhbmNlLCAncmVwbGFjZVN0YXRlJyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFNldHMgYSBzdWJzZXQgb2YgdGhlIHN0YXRlLiBUaGlzIG9ubHkgZXhpc3RzIGJlY2F1c2UgX3BlbmRpbmdTdGF0ZSBpc1xuICAgKiBpbnRlcm5hbC4gVGhpcyBwcm92aWRlcyBhIG1lcmdpbmcgc3RyYXRlZ3kgdGhhdCBpcyBub3QgYXZhaWxhYmxlIHRvIGRlZXBcbiAgICogcHJvcGVydGllcyB3aGljaCBpcyBjb25mdXNpbmcuIFRPRE86IEV4cG9zZSBwZW5kaW5nU3RhdGUgb3IgZG9uJ3QgdXNlIGl0XG4gICAqIGR1cmluZyB0aGUgbWVyZ2UuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RDbGFzc30gcHVibGljSW5zdGFuY2UgVGhlIGluc3RhbmNlIHRoYXQgc2hvdWxkIHJlcmVuZGVyLlxuICAgKiBAcGFyYW0ge29iamVjdH0gcGFydGlhbFN0YXRlIE5leHQgcGFydGlhbCBzdGF0ZSB0byBiZSBtZXJnZWQgd2l0aCBzdGF0ZS5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBlbnF1ZXVlU2V0U3RhdGU6IGZ1bmN0aW9uIChwdWJsaWNJbnN0YW5jZSwgcGFydGlhbFN0YXRlKSB7XG4gICAgd2FyblREWihwdWJsaWNJbnN0YW5jZSwgJ3NldFN0YXRlJyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFNldHMgYSBzdWJzZXQgb2YgdGhlIHByb3BzLlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0Q2xhc3N9IHB1YmxpY0luc3RhbmNlIFRoZSBpbnN0YW5jZSB0aGF0IHNob3VsZCByZXJlbmRlci5cbiAgICogQHBhcmFtIHtvYmplY3R9IHBhcnRpYWxQcm9wcyBTdWJzZXQgb2YgdGhlIG5leHQgcHJvcHMuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZW5xdWV1ZVNldFByb3BzOiBmdW5jdGlvbiAocHVibGljSW5zdGFuY2UsIHBhcnRpYWxQcm9wcykge1xuICAgIHdhcm5URFoocHVibGljSW5zdGFuY2UsICdzZXRQcm9wcycpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZXBsYWNlcyBhbGwgb2YgdGhlIHByb3BzLlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0Q2xhc3N9IHB1YmxpY0luc3RhbmNlIFRoZSBpbnN0YW5jZSB0aGF0IHNob3VsZCByZXJlbmRlci5cbiAgICogQHBhcmFtIHtvYmplY3R9IHByb3BzIE5ldyBwcm9wcy5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBlbnF1ZXVlUmVwbGFjZVByb3BzOiBmdW5jdGlvbiAocHVibGljSW5zdGFuY2UsIHByb3BzKSB7XG4gICAgd2FyblREWihwdWJsaWNJbnN0YW5jZSwgJ3JlcGxhY2VQcm9wcycpO1xuICB9XG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3ROb29wVXBkYXRlUXVldWU7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0L2xpYi9SZWFjdE5vb3BVcGRhdGVRdWV1ZS5qc1xuLy8gbW9kdWxlIGlkID0gMTI0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIENhbGxiYWNrUXVldWUgPSByZXF1aXJlKCcuL0NhbGxiYWNrUXVldWUnKTtcbnZhciBQb29sZWRDbGFzcyA9IHJlcXVpcmUoJy4vUG9vbGVkQ2xhc3MnKTtcbnZhciBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCcuL1JlYWN0QnJvd3NlckV2ZW50RW1pdHRlcicpO1xudmFyIFJlYWN0RE9NRmVhdHVyZUZsYWdzID0gcmVxdWlyZSgnLi9SZWFjdERPTUZlYXR1cmVGbGFncycpO1xudmFyIFJlYWN0SW5wdXRTZWxlY3Rpb24gPSByZXF1aXJlKCcuL1JlYWN0SW5wdXRTZWxlY3Rpb24nKTtcbnZhciBUcmFuc2FjdGlvbiA9IHJlcXVpcmUoJy4vVHJhbnNhY3Rpb24nKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xuXG4vKipcbiAqIEVuc3VyZXMgdGhhdCwgd2hlbiBwb3NzaWJsZSwgdGhlIHNlbGVjdGlvbiByYW5nZSAoY3VycmVudGx5IHNlbGVjdGVkIHRleHRcbiAqIGlucHV0KSBpcyBub3QgZGlzdHVyYmVkIGJ5IHBlcmZvcm1pbmcgdGhlIHRyYW5zYWN0aW9uLlxuICovXG52YXIgU0VMRUNUSU9OX1JFU1RPUkFUSU9OID0ge1xuICAvKipcbiAgICogQHJldHVybiB7U2VsZWN0aW9ufSBTZWxlY3Rpb24gaW5mb3JtYXRpb24uXG4gICAqL1xuICBpbml0aWFsaXplOiBSZWFjdElucHV0U2VsZWN0aW9uLmdldFNlbGVjdGlvbkluZm9ybWF0aW9uLFxuICAvKipcbiAgICogQHBhcmFtIHtTZWxlY3Rpb259IHNlbCBTZWxlY3Rpb24gaW5mb3JtYXRpb24gcmV0dXJuZWQgZnJvbSBgaW5pdGlhbGl6ZWAuXG4gICAqL1xuICBjbG9zZTogUmVhY3RJbnB1dFNlbGVjdGlvbi5yZXN0b3JlU2VsZWN0aW9uXG59O1xuXG4vKipcbiAqIFN1cHByZXNzZXMgZXZlbnRzIChibHVyL2ZvY3VzKSB0aGF0IGNvdWxkIGJlIGluYWR2ZXJ0ZW50bHkgZGlzcGF0Y2hlZCBkdWUgdG9cbiAqIGhpZ2ggbGV2ZWwgRE9NIG1hbmlwdWxhdGlvbnMgKGxpa2UgdGVtcG9yYXJpbHkgcmVtb3ZpbmcgYSB0ZXh0IGlucHV0IGZyb20gdGhlXG4gKiBET00pLlxuICovXG52YXIgRVZFTlRfU1VQUFJFU1NJT04gPSB7XG4gIC8qKlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgZW5hYmxlZCBzdGF0dXMgb2YgYFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlcmAgYmVmb3JlXG4gICAqIHRoZSByZWNvbmNpbGlhdGlvbi5cbiAgICovXG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY3VycmVudGx5RW5hYmxlZCA9IFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5pc0VuYWJsZWQoKTtcbiAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuc2V0RW5hYmxlZChmYWxzZSk7XG4gICAgcmV0dXJuIGN1cnJlbnRseUVuYWJsZWQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gcHJldmlvdXNseUVuYWJsZWQgRW5hYmxlZCBzdGF0dXMgb2ZcbiAgICogICBgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyYCBiZWZvcmUgdGhlIHJlY29uY2lsaWF0aW9uIG9jY3VycmVkLiBgY2xvc2VgXG4gICAqICAgcmVzdG9yZXMgdGhlIHByZXZpb3VzIHZhbHVlLlxuICAgKi9cbiAgY2xvc2U6IGZ1bmN0aW9uIChwcmV2aW91c2x5RW5hYmxlZCkge1xuICAgIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5zZXRFbmFibGVkKHByZXZpb3VzbHlFbmFibGVkKTtcbiAgfVxufTtcblxuLyoqXG4gKiBQcm92aWRlcyBhIHF1ZXVlIGZvciBjb2xsZWN0aW5nIGBjb21wb25lbnREaWRNb3VudGAgYW5kXG4gKiBgY29tcG9uZW50RGlkVXBkYXRlYCBjYWxsYmFja3MgZHVyaW5nIHRoZSB0aGUgdHJhbnNhY3Rpb24uXG4gKi9cbnZhciBPTl9ET01fUkVBRFlfUVVFVUVJTkcgPSB7XG4gIC8qKlxuICAgKiBJbml0aWFsaXplcyB0aGUgaW50ZXJuYWwgYG9uRE9NUmVhZHlgIHF1ZXVlLlxuICAgKi9cbiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMucmVhY3RNb3VudFJlYWR5LnJlc2V0KCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEFmdGVyIERPTSBpcyBmbHVzaGVkLCBpbnZva2UgYWxsIHJlZ2lzdGVyZWQgYG9uRE9NUmVhZHlgIGNhbGxiYWNrcy5cbiAgICovXG4gIGNsb3NlOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5yZWFjdE1vdW50UmVhZHkubm90aWZ5QWxsKCk7XG4gIH1cbn07XG5cbi8qKlxuICogRXhlY3V0ZWQgd2l0aGluIHRoZSBzY29wZSBvZiB0aGUgYFRyYW5zYWN0aW9uYCBpbnN0YW5jZS4gQ29uc2lkZXIgdGhlc2UgYXNcbiAqIGJlaW5nIG1lbWJlciBtZXRob2RzLCBidXQgd2l0aCBhbiBpbXBsaWVkIG9yZGVyaW5nIHdoaWxlIGJlaW5nIGlzb2xhdGVkIGZyb21cbiAqIGVhY2ggb3RoZXIuXG4gKi9cbnZhciBUUkFOU0FDVElPTl9XUkFQUEVSUyA9IFtTRUxFQ1RJT05fUkVTVE9SQVRJT04sIEVWRU5UX1NVUFBSRVNTSU9OLCBPTl9ET01fUkVBRFlfUVVFVUVJTkddO1xuXG4vKipcbiAqIEN1cnJlbnRseTpcbiAqIC0gVGhlIG9yZGVyIHRoYXQgdGhlc2UgYXJlIGxpc3RlZCBpbiB0aGUgdHJhbnNhY3Rpb24gaXMgY3JpdGljYWw6XG4gKiAtIFN1cHByZXNzZXMgZXZlbnRzLlxuICogLSBSZXN0b3JlcyBzZWxlY3Rpb24gcmFuZ2UuXG4gKlxuICogRnV0dXJlOlxuICogLSBSZXN0b3JlIGRvY3VtZW50L292ZXJmbG93IHNjcm9sbCBwb3NpdGlvbnMgdGhhdCB3ZXJlIHVuaW50ZW50aW9uYWxseVxuICogICBtb2RpZmllZCB2aWEgRE9NIGluc2VydGlvbnMgYWJvdmUgdGhlIHRvcCB2aWV3cG9ydCBib3VuZGFyeS5cbiAqIC0gSW1wbGVtZW50L2ludGVncmF0ZSB3aXRoIGN1c3RvbWl6ZWQgY29uc3RyYWludCBiYXNlZCBsYXlvdXQgc3lzdGVtIGFuZCBrZWVwXG4gKiAgIHRyYWNrIG9mIHdoaWNoIGRpbWVuc2lvbnMgbXVzdCBiZSByZW1lYXN1cmVkLlxuICpcbiAqIEBjbGFzcyBSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uXG4gKi9cbmZ1bmN0aW9uIFJlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb24oZm9yY2VIVE1MKSB7XG4gIHRoaXMucmVpbml0aWFsaXplVHJhbnNhY3Rpb24oKTtcbiAgLy8gT25seSBzZXJ2ZXItc2lkZSByZW5kZXJpbmcgcmVhbGx5IG5lZWRzIHRoaXMgb3B0aW9uIChzZWVcbiAgLy8gYFJlYWN0U2VydmVyUmVuZGVyaW5nYCksIGJ1dCBzZXJ2ZXItc2lkZSB1c2VzXG4gIC8vIGBSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9uYCBpbnN0ZWFkLiBUaGlzIG9wdGlvbiBpcyBoZXJlIHNvIHRoYXQgaXQnc1xuICAvLyBhY2Nlc3NpYmxlIGFuZCBkZWZhdWx0cyB0byBmYWxzZSB3aGVuIGBSZWFjdERPTUNvbXBvbmVudGAgYW5kXG4gIC8vIGBSZWFjdFRleHRDb21wb25lbnRgIGNoZWNrcyBpdCBpbiBgbW91bnRDb21wb25lbnRgLmBcbiAgdGhpcy5yZW5kZXJUb1N0YXRpY01hcmt1cCA9IGZhbHNlO1xuICB0aGlzLnJlYWN0TW91bnRSZWFkeSA9IENhbGxiYWNrUXVldWUuZ2V0UG9vbGVkKG51bGwpO1xuICB0aGlzLnVzZUNyZWF0ZUVsZW1lbnQgPSAhZm9yY2VIVE1MICYmIFJlYWN0RE9NRmVhdHVyZUZsYWdzLnVzZUNyZWF0ZUVsZW1lbnQ7XG59XG5cbnZhciBNaXhpbiA9IHtcbiAgLyoqXG4gICAqIEBzZWUgVHJhbnNhY3Rpb25cbiAgICogQGFic3RyYWN0XG4gICAqIEBmaW5hbFxuICAgKiBAcmV0dXJuIHthcnJheTxvYmplY3Q+fSBMaXN0IG9mIG9wZXJhdGlvbiB3cmFwIHByb2NlZHVyZXMuXG4gICAqICAgVE9ETzogY29udmVydCB0byBhcnJheTxUcmFuc2FjdGlvbldyYXBwZXI+XG4gICAqL1xuICBnZXRUcmFuc2FjdGlvbldyYXBwZXJzOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIFRSQU5TQUNUSU9OX1dSQVBQRVJTO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtvYmplY3R9IFRoZSBxdWV1ZSB0byBjb2xsZWN0IGBvbkRPTVJlYWR5YCBjYWxsYmFja3Mgd2l0aC5cbiAgICovXG4gIGdldFJlYWN0TW91bnRSZWFkeTogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLnJlYWN0TW91bnRSZWFkeTtcbiAgfSxcblxuICAvKipcbiAgICogYFBvb2xlZENsYXNzYCBsb29rcyBmb3IgdGhpcywgYW5kIHdpbGwgaW52b2tlIHRoaXMgYmVmb3JlIGFsbG93aW5nIHRoaXNcbiAgICogaW5zdGFuY2UgdG8gYmUgcmV1c2VkLlxuICAgKi9cbiAgZGVzdHJ1Y3RvcjogZnVuY3Rpb24gKCkge1xuICAgIENhbGxiYWNrUXVldWUucmVsZWFzZSh0aGlzLnJlYWN0TW91bnRSZWFkeSk7XG4gICAgdGhpcy5yZWFjdE1vdW50UmVhZHkgPSBudWxsO1xuICB9XG59O1xuXG5hc3NpZ24oUmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbi5wcm90b3R5cGUsIFRyYW5zYWN0aW9uLk1peGluLCBNaXhpbik7XG5cblBvb2xlZENsYXNzLmFkZFBvb2xpbmdUbyhSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uKTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvUmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbi5qc1xuLy8gbW9kdWxlIGlkID0gMTI1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdElucHV0U2VsZWN0aW9uXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RET01TZWxlY3Rpb24gPSByZXF1aXJlKCcuL1JlYWN0RE9NU2VsZWN0aW9uJyk7XG5cbnZhciBjb250YWluc05vZGUgPSByZXF1aXJlKCdmYmpzL2xpYi9jb250YWluc05vZGUnKTtcbnZhciBmb2N1c05vZGUgPSByZXF1aXJlKCdmYmpzL2xpYi9mb2N1c05vZGUnKTtcbnZhciBnZXRBY3RpdmVFbGVtZW50ID0gcmVxdWlyZSgnZmJqcy9saWIvZ2V0QWN0aXZlRWxlbWVudCcpO1xuXG5mdW5jdGlvbiBpc0luRG9jdW1lbnQobm9kZSkge1xuICByZXR1cm4gY29udGFpbnNOb2RlKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgbm9kZSk7XG59XG5cbi8qKlxuICogQFJlYWN0SW5wdXRTZWxlY3Rpb246IFJlYWN0IGlucHV0IHNlbGVjdGlvbiBtb2R1bGUuIEJhc2VkIG9uIFNlbGVjdGlvbi5qcyxcbiAqIGJ1dCBtb2RpZmllZCB0byBiZSBzdWl0YWJsZSBmb3IgcmVhY3QgYW5kIGhhcyBhIGNvdXBsZSBvZiBidWcgZml4ZXMgKGRvZXNuJ3RcbiAqIGFzc3VtZSBidXR0b25zIGhhdmUgcmFuZ2Ugc2VsZWN0aW9ucyBhbGxvd2VkKS5cbiAqIElucHV0IHNlbGVjdGlvbiBtb2R1bGUgZm9yIFJlYWN0LlxuICovXG52YXIgUmVhY3RJbnB1dFNlbGVjdGlvbiA9IHtcblxuICBoYXNTZWxlY3Rpb25DYXBhYmlsaXRpZXM6IGZ1bmN0aW9uIChlbGVtKSB7XG4gICAgdmFyIG5vZGVOYW1lID0gZWxlbSAmJiBlbGVtLm5vZGVOYW1lICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICByZXR1cm4gbm9kZU5hbWUgJiYgKG5vZGVOYW1lID09PSAnaW5wdXQnICYmIGVsZW0udHlwZSA9PT0gJ3RleHQnIHx8IG5vZGVOYW1lID09PSAndGV4dGFyZWEnIHx8IGVsZW0uY29udGVudEVkaXRhYmxlID09PSAndHJ1ZScpO1xuICB9LFxuXG4gIGdldFNlbGVjdGlvbkluZm9ybWF0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGZvY3VzZWRFbGVtID0gZ2V0QWN0aXZlRWxlbWVudCgpO1xuICAgIHJldHVybiB7XG4gICAgICBmb2N1c2VkRWxlbTogZm9jdXNlZEVsZW0sXG4gICAgICBzZWxlY3Rpb25SYW5nZTogUmVhY3RJbnB1dFNlbGVjdGlvbi5oYXNTZWxlY3Rpb25DYXBhYmlsaXRpZXMoZm9jdXNlZEVsZW0pID8gUmVhY3RJbnB1dFNlbGVjdGlvbi5nZXRTZWxlY3Rpb24oZm9jdXNlZEVsZW0pIDogbnVsbFxuICAgIH07XG4gIH0sXG5cbiAgLyoqXG4gICAqIEByZXN0b3JlU2VsZWN0aW9uOiBJZiBhbnkgc2VsZWN0aW9uIGluZm9ybWF0aW9uIHdhcyBwb3RlbnRpYWxseSBsb3N0LFxuICAgKiByZXN0b3JlIGl0LiBUaGlzIGlzIHVzZWZ1bCB3aGVuIHBlcmZvcm1pbmcgb3BlcmF0aW9ucyB0aGF0IGNvdWxkIHJlbW92ZSBkb21cbiAgICogbm9kZXMgYW5kIHBsYWNlIHRoZW0gYmFjayBpbiwgcmVzdWx0aW5nIGluIGZvY3VzIGJlaW5nIGxvc3QuXG4gICAqL1xuICByZXN0b3JlU2VsZWN0aW9uOiBmdW5jdGlvbiAocHJpb3JTZWxlY3Rpb25JbmZvcm1hdGlvbikge1xuICAgIHZhciBjdXJGb2N1c2VkRWxlbSA9IGdldEFjdGl2ZUVsZW1lbnQoKTtcbiAgICB2YXIgcHJpb3JGb2N1c2VkRWxlbSA9IHByaW9yU2VsZWN0aW9uSW5mb3JtYXRpb24uZm9jdXNlZEVsZW07XG4gICAgdmFyIHByaW9yU2VsZWN0aW9uUmFuZ2UgPSBwcmlvclNlbGVjdGlvbkluZm9ybWF0aW9uLnNlbGVjdGlvblJhbmdlO1xuICAgIGlmIChjdXJGb2N1c2VkRWxlbSAhPT0gcHJpb3JGb2N1c2VkRWxlbSAmJiBpc0luRG9jdW1lbnQocHJpb3JGb2N1c2VkRWxlbSkpIHtcbiAgICAgIGlmIChSZWFjdElucHV0U2VsZWN0aW9uLmhhc1NlbGVjdGlvbkNhcGFiaWxpdGllcyhwcmlvckZvY3VzZWRFbGVtKSkge1xuICAgICAgICBSZWFjdElucHV0U2VsZWN0aW9uLnNldFNlbGVjdGlvbihwcmlvckZvY3VzZWRFbGVtLCBwcmlvclNlbGVjdGlvblJhbmdlKTtcbiAgICAgIH1cbiAgICAgIGZvY3VzTm9kZShwcmlvckZvY3VzZWRFbGVtKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBnZXRTZWxlY3Rpb246IEdldHMgdGhlIHNlbGVjdGlvbiBib3VuZHMgb2YgYSBmb2N1c2VkIHRleHRhcmVhLCBpbnB1dCBvclxuICAgKiBjb250ZW50RWRpdGFibGUgbm9kZS5cbiAgICogLUBpbnB1dDogTG9vayB1cCBzZWxlY3Rpb24gYm91bmRzIG9mIHRoaXMgaW5wdXRcbiAgICogLUByZXR1cm4ge3N0YXJ0OiBzZWxlY3Rpb25TdGFydCwgZW5kOiBzZWxlY3Rpb25FbmR9XG4gICAqL1xuICBnZXRTZWxlY3Rpb246IGZ1bmN0aW9uIChpbnB1dCkge1xuICAgIHZhciBzZWxlY3Rpb247XG5cbiAgICBpZiAoJ3NlbGVjdGlvblN0YXJ0JyBpbiBpbnB1dCkge1xuICAgICAgLy8gTW9kZXJuIGJyb3dzZXIgd2l0aCBpbnB1dCBvciB0ZXh0YXJlYS5cbiAgICAgIHNlbGVjdGlvbiA9IHtcbiAgICAgICAgc3RhcnQ6IGlucHV0LnNlbGVjdGlvblN0YXJ0LFxuICAgICAgICBlbmQ6IGlucHV0LnNlbGVjdGlvbkVuZFxuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKGRvY3VtZW50LnNlbGVjdGlvbiAmJiAoaW5wdXQubm9kZU5hbWUgJiYgaW5wdXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2lucHV0JykpIHtcbiAgICAgIC8vIElFOCBpbnB1dC5cbiAgICAgIHZhciByYW5nZSA9IGRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpO1xuICAgICAgLy8gVGhlcmUgY2FuIG9ubHkgYmUgb25lIHNlbGVjdGlvbiBwZXIgZG9jdW1lbnQgaW4gSUUsIHNvIGl0IG11c3RcbiAgICAgIC8vIGJlIGluIG91ciBlbGVtZW50LlxuICAgICAgaWYgKHJhbmdlLnBhcmVudEVsZW1lbnQoKSA9PT0gaW5wdXQpIHtcbiAgICAgICAgc2VsZWN0aW9uID0ge1xuICAgICAgICAgIHN0YXJ0OiAtcmFuZ2UubW92ZVN0YXJ0KCdjaGFyYWN0ZXInLCAtaW5wdXQudmFsdWUubGVuZ3RoKSxcbiAgICAgICAgICBlbmQ6IC1yYW5nZS5tb3ZlRW5kKCdjaGFyYWN0ZXInLCAtaW5wdXQudmFsdWUubGVuZ3RoKVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBDb250ZW50IGVkaXRhYmxlIG9yIG9sZCBJRSB0ZXh0YXJlYS5cbiAgICAgIHNlbGVjdGlvbiA9IFJlYWN0RE9NU2VsZWN0aW9uLmdldE9mZnNldHMoaW5wdXQpO1xuICAgIH1cblxuICAgIHJldHVybiBzZWxlY3Rpb24gfHwgeyBzdGFydDogMCwgZW5kOiAwIH07XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBzZXRTZWxlY3Rpb246IFNldHMgdGhlIHNlbGVjdGlvbiBib3VuZHMgb2YgYSB0ZXh0YXJlYSBvciBpbnB1dCBhbmQgZm9jdXNlc1xuICAgKiB0aGUgaW5wdXQuXG4gICAqIC1AaW5wdXQgICAgIFNldCBzZWxlY3Rpb24gYm91bmRzIG9mIHRoaXMgaW5wdXQgb3IgdGV4dGFyZWFcbiAgICogLUBvZmZzZXRzICAgT2JqZWN0IG9mIHNhbWUgZm9ybSB0aGF0IGlzIHJldHVybmVkIGZyb20gZ2V0KlxuICAgKi9cbiAgc2V0U2VsZWN0aW9uOiBmdW5jdGlvbiAoaW5wdXQsIG9mZnNldHMpIHtcbiAgICB2YXIgc3RhcnQgPSBvZmZzZXRzLnN0YXJ0O1xuICAgIHZhciBlbmQgPSBvZmZzZXRzLmVuZDtcbiAgICBpZiAodHlwZW9mIGVuZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGVuZCA9IHN0YXJ0O1xuICAgIH1cblxuICAgIGlmICgnc2VsZWN0aW9uU3RhcnQnIGluIGlucHV0KSB7XG4gICAgICBpbnB1dC5zZWxlY3Rpb25TdGFydCA9IHN0YXJ0O1xuICAgICAgaW5wdXQuc2VsZWN0aW9uRW5kID0gTWF0aC5taW4oZW5kLCBpbnB1dC52YWx1ZS5sZW5ndGgpO1xuICAgIH0gZWxzZSBpZiAoZG9jdW1lbnQuc2VsZWN0aW9uICYmIChpbnB1dC5ub2RlTmFtZSAmJiBpbnB1dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaW5wdXQnKSkge1xuICAgICAgdmFyIHJhbmdlID0gaW5wdXQuY3JlYXRlVGV4dFJhbmdlKCk7XG4gICAgICByYW5nZS5jb2xsYXBzZSh0cnVlKTtcbiAgICAgIHJhbmdlLm1vdmVTdGFydCgnY2hhcmFjdGVyJywgc3RhcnQpO1xuICAgICAgcmFuZ2UubW92ZUVuZCgnY2hhcmFjdGVyJywgZW5kIC0gc3RhcnQpO1xuICAgICAgcmFuZ2Uuc2VsZWN0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIFJlYWN0RE9NU2VsZWN0aW9uLnNldE9mZnNldHMoaW5wdXQsIG9mZnNldHMpO1xuICAgIH1cbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdElucHV0U2VsZWN0aW9uO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvUmVhY3RJbnB1dFNlbGVjdGlvbi5qc1xuLy8gbW9kdWxlIGlkID0gMTI2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdERPTVNlbGVjdGlvblxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEV4ZWN1dGlvbkVudmlyb25tZW50ID0gcmVxdWlyZSgnZmJqcy9saWIvRXhlY3V0aW9uRW52aXJvbm1lbnQnKTtcblxudmFyIGdldE5vZGVGb3JDaGFyYWN0ZXJPZmZzZXQgPSByZXF1aXJlKCcuL2dldE5vZGVGb3JDaGFyYWN0ZXJPZmZzZXQnKTtcbnZhciBnZXRUZXh0Q29udGVudEFjY2Vzc29yID0gcmVxdWlyZSgnLi9nZXRUZXh0Q29udGVudEFjY2Vzc29yJyk7XG5cbi8qKlxuICogV2hpbGUgYGlzQ29sbGFwc2VkYCBpcyBhdmFpbGFibGUgb24gdGhlIFNlbGVjdGlvbiBvYmplY3QgYW5kIGBjb2xsYXBzZWRgXG4gKiBpcyBhdmFpbGFibGUgb24gdGhlIFJhbmdlIG9iamVjdCwgSUUxMSBzb21ldGltZXMgZ2V0cyB0aGVtIHdyb25nLlxuICogSWYgdGhlIGFuY2hvci9mb2N1cyBub2RlcyBhbmQgb2Zmc2V0cyBhcmUgdGhlIHNhbWUsIHRoZSByYW5nZSBpcyBjb2xsYXBzZWQuXG4gKi9cbmZ1bmN0aW9uIGlzQ29sbGFwc2VkKGFuY2hvck5vZGUsIGFuY2hvck9mZnNldCwgZm9jdXNOb2RlLCBmb2N1c09mZnNldCkge1xuICByZXR1cm4gYW5jaG9yTm9kZSA9PT0gZm9jdXNOb2RlICYmIGFuY2hvck9mZnNldCA9PT0gZm9jdXNPZmZzZXQ7XG59XG5cbi8qKlxuICogR2V0IHRoZSBhcHByb3ByaWF0ZSBhbmNob3IgYW5kIGZvY3VzIG5vZGUvb2Zmc2V0IHBhaXJzIGZvciBJRS5cbiAqXG4gKiBUaGUgY2F0Y2ggaGVyZSBpcyB0aGF0IElFJ3Mgc2VsZWN0aW9uIEFQSSBkb2Vzbid0IHByb3ZpZGUgaW5mb3JtYXRpb25cbiAqIGFib3V0IHdoZXRoZXIgdGhlIHNlbGVjdGlvbiBpcyBmb3J3YXJkIG9yIGJhY2t3YXJkLCBzbyB3ZSBoYXZlIHRvXG4gKiBiZWhhdmUgYXMgdGhvdWdoIGl0J3MgYWx3YXlzIGZvcndhcmQuXG4gKlxuICogSUUgdGV4dCBkaWZmZXJzIGZyb20gbW9kZXJuIHNlbGVjdGlvbiBpbiB0aGF0IGl0IGJlaGF2ZXMgYXMgdGhvdWdoXG4gKiBibG9jayBlbGVtZW50cyBlbmQgd2l0aCBhIG5ldyBsaW5lLiBUaGlzIG1lYW5zIGNoYXJhY3RlciBvZmZzZXRzIHdpbGxcbiAqIGRpZmZlciBiZXR3ZWVuIHRoZSB0d28gQVBJcy5cbiAqXG4gKiBAcGFyYW0ge0RPTUVsZW1lbnR9IG5vZGVcbiAqIEByZXR1cm4ge29iamVjdH1cbiAqL1xuZnVuY3Rpb24gZ2V0SUVPZmZzZXRzKG5vZGUpIHtcbiAgdmFyIHNlbGVjdGlvbiA9IGRvY3VtZW50LnNlbGVjdGlvbjtcbiAgdmFyIHNlbGVjdGVkUmFuZ2UgPSBzZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKTtcbiAgdmFyIHNlbGVjdGVkTGVuZ3RoID0gc2VsZWN0ZWRSYW5nZS50ZXh0Lmxlbmd0aDtcblxuICAvLyBEdXBsaWNhdGUgc2VsZWN0aW9uIHNvIHdlIGNhbiBtb3ZlIHJhbmdlIHdpdGhvdXQgYnJlYWtpbmcgdXNlciBzZWxlY3Rpb24uXG4gIHZhciBmcm9tU3RhcnQgPSBzZWxlY3RlZFJhbmdlLmR1cGxpY2F0ZSgpO1xuICBmcm9tU3RhcnQubW92ZVRvRWxlbWVudFRleHQobm9kZSk7XG4gIGZyb21TdGFydC5zZXRFbmRQb2ludCgnRW5kVG9TdGFydCcsIHNlbGVjdGVkUmFuZ2UpO1xuXG4gIHZhciBzdGFydE9mZnNldCA9IGZyb21TdGFydC50ZXh0Lmxlbmd0aDtcbiAgdmFyIGVuZE9mZnNldCA9IHN0YXJ0T2Zmc2V0ICsgc2VsZWN0ZWRMZW5ndGg7XG5cbiAgcmV0dXJuIHtcbiAgICBzdGFydDogc3RhcnRPZmZzZXQsXG4gICAgZW5kOiBlbmRPZmZzZXRcbiAgfTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0RPTUVsZW1lbnR9IG5vZGVcbiAqIEByZXR1cm4gez9vYmplY3R9XG4gKi9cbmZ1bmN0aW9uIGdldE1vZGVybk9mZnNldHMobm9kZSkge1xuICB2YXIgc2VsZWN0aW9uID0gd2luZG93LmdldFNlbGVjdGlvbiAmJiB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG5cbiAgaWYgKCFzZWxlY3Rpb24gfHwgc2VsZWN0aW9uLnJhbmdlQ291bnQgPT09IDApIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHZhciBhbmNob3JOb2RlID0gc2VsZWN0aW9uLmFuY2hvck5vZGU7XG4gIHZhciBhbmNob3JPZmZzZXQgPSBzZWxlY3Rpb24uYW5jaG9yT2Zmc2V0O1xuICB2YXIgZm9jdXNOb2RlID0gc2VsZWN0aW9uLmZvY3VzTm9kZTtcbiAgdmFyIGZvY3VzT2Zmc2V0ID0gc2VsZWN0aW9uLmZvY3VzT2Zmc2V0O1xuXG4gIHZhciBjdXJyZW50UmFuZ2UgPSBzZWxlY3Rpb24uZ2V0UmFuZ2VBdCgwKTtcblxuICAvLyBJbiBGaXJlZm94LCByYW5nZS5zdGFydENvbnRhaW5lciBhbmQgcmFuZ2UuZW5kQ29udGFpbmVyIGNhbiBiZSBcImFub255bW91c1xuICAvLyBkaXZzXCIsIGUuZy4gdGhlIHVwL2Rvd24gYnV0dG9ucyBvbiBhbiA8aW5wdXQgdHlwZT1cIm51bWJlclwiPi4gQW5vbnltb3VzXG4gIC8vIGRpdnMgZG8gbm90IHNlZW0gdG8gZXhwb3NlIHByb3BlcnRpZXMsIHRyaWdnZXJpbmcgYSBcIlBlcm1pc3Npb24gZGVuaWVkXG4gIC8vIGVycm9yXCIgaWYgYW55IG9mIGl0cyBwcm9wZXJ0aWVzIGFyZSBhY2Nlc3NlZC4gVGhlIG9ubHkgc2VlbWluZ2x5IHBvc3NpYmxlXG4gIC8vIHdheSB0byBhdm9pZCBlcnJvcmluZyBpcyB0byBhY2Nlc3MgYSBwcm9wZXJ0eSB0aGF0IHR5cGljYWxseSB3b3JrcyBmb3JcbiAgLy8gbm9uLWFub255bW91cyBkaXZzIGFuZCBjYXRjaCBhbnkgZXJyb3IgdGhhdCBtYXkgb3RoZXJ3aXNlIGFyaXNlLiBTZWVcbiAgLy8gaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MjA4NDI3XG4gIHRyeSB7XG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLWV4cHJlc3Npb25zICovXG4gICAgY3VycmVudFJhbmdlLnN0YXJ0Q29udGFpbmVyLm5vZGVUeXBlO1xuICAgIGN1cnJlbnRSYW5nZS5lbmRDb250YWluZXIubm9kZVR5cGU7XG4gICAgLyogZXNsaW50LWVuYWJsZSBuby11bnVzZWQtZXhwcmVzc2lvbnMgKi9cbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLy8gSWYgdGhlIG5vZGUgYW5kIG9mZnNldCB2YWx1ZXMgYXJlIHRoZSBzYW1lLCB0aGUgc2VsZWN0aW9uIGlzIGNvbGxhcHNlZC5cbiAgLy8gYFNlbGVjdGlvbi5pc0NvbGxhcHNlZGAgaXMgYXZhaWxhYmxlIG5hdGl2ZWx5LCBidXQgSUUgc29tZXRpbWVzIGdldHNcbiAgLy8gdGhpcyB2YWx1ZSB3cm9uZy5cbiAgdmFyIGlzU2VsZWN0aW9uQ29sbGFwc2VkID0gaXNDb2xsYXBzZWQoc2VsZWN0aW9uLmFuY2hvck5vZGUsIHNlbGVjdGlvbi5hbmNob3JPZmZzZXQsIHNlbGVjdGlvbi5mb2N1c05vZGUsIHNlbGVjdGlvbi5mb2N1c09mZnNldCk7XG5cbiAgdmFyIHJhbmdlTGVuZ3RoID0gaXNTZWxlY3Rpb25Db2xsYXBzZWQgPyAwIDogY3VycmVudFJhbmdlLnRvU3RyaW5nKCkubGVuZ3RoO1xuXG4gIHZhciB0ZW1wUmFuZ2UgPSBjdXJyZW50UmFuZ2UuY2xvbmVSYW5nZSgpO1xuICB0ZW1wUmFuZ2Uuc2VsZWN0Tm9kZUNvbnRlbnRzKG5vZGUpO1xuICB0ZW1wUmFuZ2Uuc2V0RW5kKGN1cnJlbnRSYW5nZS5zdGFydENvbnRhaW5lciwgY3VycmVudFJhbmdlLnN0YXJ0T2Zmc2V0KTtcblxuICB2YXIgaXNUZW1wUmFuZ2VDb2xsYXBzZWQgPSBpc0NvbGxhcHNlZCh0ZW1wUmFuZ2Uuc3RhcnRDb250YWluZXIsIHRlbXBSYW5nZS5zdGFydE9mZnNldCwgdGVtcFJhbmdlLmVuZENvbnRhaW5lciwgdGVtcFJhbmdlLmVuZE9mZnNldCk7XG5cbiAgdmFyIHN0YXJ0ID0gaXNUZW1wUmFuZ2VDb2xsYXBzZWQgPyAwIDogdGVtcFJhbmdlLnRvU3RyaW5nKCkubGVuZ3RoO1xuICB2YXIgZW5kID0gc3RhcnQgKyByYW5nZUxlbmd0aDtcblxuICAvLyBEZXRlY3Qgd2hldGhlciB0aGUgc2VsZWN0aW9uIGlzIGJhY2t3YXJkLlxuICB2YXIgZGV0ZWN0aW9uUmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuICBkZXRlY3Rpb25SYW5nZS5zZXRTdGFydChhbmNob3JOb2RlLCBhbmNob3JPZmZzZXQpO1xuICBkZXRlY3Rpb25SYW5nZS5zZXRFbmQoZm9jdXNOb2RlLCBmb2N1c09mZnNldCk7XG4gIHZhciBpc0JhY2t3YXJkID0gZGV0ZWN0aW9uUmFuZ2UuY29sbGFwc2VkO1xuXG4gIHJldHVybiB7XG4gICAgc3RhcnQ6IGlzQmFja3dhcmQgPyBlbmQgOiBzdGFydCxcbiAgICBlbmQ6IGlzQmFja3dhcmQgPyBzdGFydCA6IGVuZFxuICB9O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7RE9NRWxlbWVudHxET01UZXh0Tm9kZX0gbm9kZVxuICogQHBhcmFtIHtvYmplY3R9IG9mZnNldHNcbiAqL1xuZnVuY3Rpb24gc2V0SUVPZmZzZXRzKG5vZGUsIG9mZnNldHMpIHtcbiAgdmFyIHJhbmdlID0gZG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCkuZHVwbGljYXRlKCk7XG4gIHZhciBzdGFydCwgZW5kO1xuXG4gIGlmICh0eXBlb2Ygb2Zmc2V0cy5lbmQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgc3RhcnQgPSBvZmZzZXRzLnN0YXJ0O1xuICAgIGVuZCA9IHN0YXJ0O1xuICB9IGVsc2UgaWYgKG9mZnNldHMuc3RhcnQgPiBvZmZzZXRzLmVuZCkge1xuICAgIHN0YXJ0ID0gb2Zmc2V0cy5lbmQ7XG4gICAgZW5kID0gb2Zmc2V0cy5zdGFydDtcbiAgfSBlbHNlIHtcbiAgICBzdGFydCA9IG9mZnNldHMuc3RhcnQ7XG4gICAgZW5kID0gb2Zmc2V0cy5lbmQ7XG4gIH1cblxuICByYW5nZS5tb3ZlVG9FbGVtZW50VGV4dChub2RlKTtcbiAgcmFuZ2UubW92ZVN0YXJ0KCdjaGFyYWN0ZXInLCBzdGFydCk7XG4gIHJhbmdlLnNldEVuZFBvaW50KCdFbmRUb1N0YXJ0JywgcmFuZ2UpO1xuICByYW5nZS5tb3ZlRW5kKCdjaGFyYWN0ZXInLCBlbmQgLSBzdGFydCk7XG4gIHJhbmdlLnNlbGVjdCgpO1xufVxuXG4vKipcbiAqIEluIG1vZGVybiBub24tSUUgYnJvd3NlcnMsIHdlIGNhbiBzdXBwb3J0IGJvdGggZm9yd2FyZCBhbmQgYmFja3dhcmRcbiAqIHNlbGVjdGlvbnMuXG4gKlxuICogTm90ZTogSUUxMCsgc3VwcG9ydHMgdGhlIFNlbGVjdGlvbiBvYmplY3QsIGJ1dCBpdCBkb2VzIG5vdCBzdXBwb3J0XG4gKiB0aGUgYGV4dGVuZGAgbWV0aG9kLCB3aGljaCBtZWFucyB0aGF0IGV2ZW4gaW4gbW9kZXJuIElFLCBpdCdzIG5vdCBwb3NzaWJsZVxuICogdG8gcHJvZ3JhbWF0aWNhbGx5IGNyZWF0ZSBhIGJhY2t3YXJkIHNlbGVjdGlvbi4gVGh1cywgZm9yIGFsbCBJRVxuICogdmVyc2lvbnMsIHdlIHVzZSB0aGUgb2xkIElFIEFQSSB0byBjcmVhdGUgb3VyIHNlbGVjdGlvbnMuXG4gKlxuICogQHBhcmFtIHtET01FbGVtZW50fERPTVRleHROb2RlfSBub2RlXG4gKiBAcGFyYW0ge29iamVjdH0gb2Zmc2V0c1xuICovXG5mdW5jdGlvbiBzZXRNb2Rlcm5PZmZzZXRzKG5vZGUsIG9mZnNldHMpIHtcbiAgaWYgKCF3aW5kb3cuZ2V0U2VsZWN0aW9uKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIHNlbGVjdGlvbiA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgdmFyIGxlbmd0aCA9IG5vZGVbZ2V0VGV4dENvbnRlbnRBY2Nlc3NvcigpXS5sZW5ndGg7XG4gIHZhciBzdGFydCA9IE1hdGgubWluKG9mZnNldHMuc3RhcnQsIGxlbmd0aCk7XG4gIHZhciBlbmQgPSB0eXBlb2Ygb2Zmc2V0cy5lbmQgPT09ICd1bmRlZmluZWQnID8gc3RhcnQgOiBNYXRoLm1pbihvZmZzZXRzLmVuZCwgbGVuZ3RoKTtcblxuICAvLyBJRSAxMSB1c2VzIG1vZGVybiBzZWxlY3Rpb24sIGJ1dCBkb2Vzbid0IHN1cHBvcnQgdGhlIGV4dGVuZCBtZXRob2QuXG4gIC8vIEZsaXAgYmFja3dhcmQgc2VsZWN0aW9ucywgc28gd2UgY2FuIHNldCB3aXRoIGEgc2luZ2xlIHJhbmdlLlxuICBpZiAoIXNlbGVjdGlvbi5leHRlbmQgJiYgc3RhcnQgPiBlbmQpIHtcbiAgICB2YXIgdGVtcCA9IGVuZDtcbiAgICBlbmQgPSBzdGFydDtcbiAgICBzdGFydCA9IHRlbXA7XG4gIH1cblxuICB2YXIgc3RhcnRNYXJrZXIgPSBnZXROb2RlRm9yQ2hhcmFjdGVyT2Zmc2V0KG5vZGUsIHN0YXJ0KTtcbiAgdmFyIGVuZE1hcmtlciA9IGdldE5vZGVGb3JDaGFyYWN0ZXJPZmZzZXQobm9kZSwgZW5kKTtcblxuICBpZiAoc3RhcnRNYXJrZXIgJiYgZW5kTWFya2VyKSB7XG4gICAgdmFyIHJhbmdlID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtcbiAgICByYW5nZS5zZXRTdGFydChzdGFydE1hcmtlci5ub2RlLCBzdGFydE1hcmtlci5vZmZzZXQpO1xuICAgIHNlbGVjdGlvbi5yZW1vdmVBbGxSYW5nZXMoKTtcblxuICAgIGlmIChzdGFydCA+IGVuZCkge1xuICAgICAgc2VsZWN0aW9uLmFkZFJhbmdlKHJhbmdlKTtcbiAgICAgIHNlbGVjdGlvbi5leHRlbmQoZW5kTWFya2VyLm5vZGUsIGVuZE1hcmtlci5vZmZzZXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByYW5nZS5zZXRFbmQoZW5kTWFya2VyLm5vZGUsIGVuZE1hcmtlci5vZmZzZXQpO1xuICAgICAgc2VsZWN0aW9uLmFkZFJhbmdlKHJhbmdlKTtcbiAgICB9XG4gIH1cbn1cblxudmFyIHVzZUlFT2Zmc2V0cyA9IEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSAmJiAnc2VsZWN0aW9uJyBpbiBkb2N1bWVudCAmJiAhKCdnZXRTZWxlY3Rpb24nIGluIHdpbmRvdyk7XG5cbnZhciBSZWFjdERPTVNlbGVjdGlvbiA9IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gbm9kZVxuICAgKi9cbiAgZ2V0T2Zmc2V0czogdXNlSUVPZmZzZXRzID8gZ2V0SUVPZmZzZXRzIDogZ2V0TW9kZXJuT2Zmc2V0cyxcblxuICAvKipcbiAgICogQHBhcmFtIHtET01FbGVtZW50fERPTVRleHROb2RlfSBub2RlXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvZmZzZXRzXG4gICAqL1xuICBzZXRPZmZzZXRzOiB1c2VJRU9mZnNldHMgPyBzZXRJRU9mZnNldHMgOiBzZXRNb2Rlcm5PZmZzZXRzXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0RE9NU2VsZWN0aW9uO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvUmVhY3RET01TZWxlY3Rpb24uanNcbi8vIG1vZHVsZSBpZCA9IDEyN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgZ2V0Tm9kZUZvckNoYXJhY3Rlck9mZnNldFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBHaXZlbiBhbnkgbm9kZSByZXR1cm4gdGhlIGZpcnN0IGxlYWYgbm9kZSB3aXRob3V0IGNoaWxkcmVuLlxuICpcbiAqIEBwYXJhbSB7RE9NRWxlbWVudHxET01UZXh0Tm9kZX0gbm9kZVxuICogQHJldHVybiB7RE9NRWxlbWVudHxET01UZXh0Tm9kZX1cbiAqL1xuZnVuY3Rpb24gZ2V0TGVhZk5vZGUobm9kZSkge1xuICB3aGlsZSAobm9kZSAmJiBub2RlLmZpcnN0Q2hpbGQpIHtcbiAgICBub2RlID0gbm9kZS5maXJzdENoaWxkO1xuICB9XG4gIHJldHVybiBub2RlO1xufVxuXG4vKipcbiAqIEdldCB0aGUgbmV4dCBzaWJsaW5nIHdpdGhpbiBhIGNvbnRhaW5lci4gVGhpcyB3aWxsIHdhbGsgdXAgdGhlXG4gKiBET00gaWYgYSBub2RlJ3Mgc2libGluZ3MgaGF2ZSBiZWVuIGV4aGF1c3RlZC5cbiAqXG4gKiBAcGFyYW0ge0RPTUVsZW1lbnR8RE9NVGV4dE5vZGV9IG5vZGVcbiAqIEByZXR1cm4gez9ET01FbGVtZW50fERPTVRleHROb2RlfVxuICovXG5mdW5jdGlvbiBnZXRTaWJsaW5nTm9kZShub2RlKSB7XG4gIHdoaWxlIChub2RlKSB7XG4gICAgaWYgKG5vZGUubmV4dFNpYmxpbmcpIHtcbiAgICAgIHJldHVybiBub2RlLm5leHRTaWJsaW5nO1xuICAgIH1cbiAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuICB9XG59XG5cbi8qKlxuICogR2V0IG9iamVjdCBkZXNjcmliaW5nIHRoZSBub2RlcyB3aGljaCBjb250YWluIGNoYXJhY3RlcnMgYXQgb2Zmc2V0LlxuICpcbiAqIEBwYXJhbSB7RE9NRWxlbWVudHxET01UZXh0Tm9kZX0gcm9vdFxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldFxuICogQHJldHVybiB7P29iamVjdH1cbiAqL1xuZnVuY3Rpb24gZ2V0Tm9kZUZvckNoYXJhY3Rlck9mZnNldChyb290LCBvZmZzZXQpIHtcbiAgdmFyIG5vZGUgPSBnZXRMZWFmTm9kZShyb290KTtcbiAgdmFyIG5vZGVTdGFydCA9IDA7XG4gIHZhciBub2RlRW5kID0gMDtcblxuICB3aGlsZSAobm9kZSkge1xuICAgIGlmIChub2RlLm5vZGVUeXBlID09PSAzKSB7XG4gICAgICBub2RlRW5kID0gbm9kZVN0YXJ0ICsgbm9kZS50ZXh0Q29udGVudC5sZW5ndGg7XG5cbiAgICAgIGlmIChub2RlU3RhcnQgPD0gb2Zmc2V0ICYmIG5vZGVFbmQgPj0gb2Zmc2V0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbm9kZTogbm9kZSxcbiAgICAgICAgICBvZmZzZXQ6IG9mZnNldCAtIG5vZGVTdGFydFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBub2RlU3RhcnQgPSBub2RlRW5kO1xuICAgIH1cblxuICAgIG5vZGUgPSBnZXRMZWFmTm9kZShnZXRTaWJsaW5nTm9kZShub2RlKSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXROb2RlRm9yQ2hhcmFjdGVyT2Zmc2V0O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvZ2V0Tm9kZUZvckNoYXJhY3Rlck9mZnNldC5qc1xuLy8gbW9kdWxlIGlkID0gMTI4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBnZXRBY3RpdmVFbGVtZW50XG4gKiBAdHlwZWNoZWNrc1xuICovXG5cbi8qIGVzbGludC1kaXNhYmxlIGZiLXd3dy90eXBlb2YtdW5kZWZpbmVkICovXG5cbi8qKlxuICogU2FtZSBhcyBkb2N1bWVudC5hY3RpdmVFbGVtZW50IGJ1dCB3cmFwcyBpbiBhIHRyeS1jYXRjaCBibG9jay4gSW4gSUUgaXQgaXNcbiAqIG5vdCBzYWZlIHRvIGNhbGwgZG9jdW1lbnQuYWN0aXZlRWxlbWVudCBpZiB0aGVyZSBpcyBub3RoaW5nIGZvY3VzZWQuXG4gKlxuICogVGhlIGFjdGl2ZUVsZW1lbnQgd2lsbCBiZSBudWxsIG9ubHkgaWYgdGhlIGRvY3VtZW50IG9yIGRvY3VtZW50IGJvZHkgaXMgbm90XG4gKiB5ZXQgZGVmaW5lZC5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBnZXRBY3RpdmVFbGVtZW50KCkgLyo/RE9NRWxlbWVudCove1xuICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHRyeSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgfHwgZG9jdW1lbnQuYm9keTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBkb2N1bWVudC5ib2R5O1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0QWN0aXZlRWxlbWVudDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vZmJqcy9saWIvZ2V0QWN0aXZlRWxlbWVudC5qc1xuLy8gbW9kdWxlIGlkID0gMTI5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBTZWxlY3RFdmVudFBsdWdpblxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEV2ZW50Q29uc3RhbnRzID0gcmVxdWlyZSgnLi9FdmVudENvbnN0YW50cycpO1xudmFyIEV2ZW50UHJvcGFnYXRvcnMgPSByZXF1aXJlKCcuL0V2ZW50UHJvcGFnYXRvcnMnKTtcbnZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHJlcXVpcmUoJ2ZianMvbGliL0V4ZWN1dGlvbkVudmlyb25tZW50Jyk7XG52YXIgUmVhY3RJbnB1dFNlbGVjdGlvbiA9IHJlcXVpcmUoJy4vUmVhY3RJbnB1dFNlbGVjdGlvbicpO1xudmFyIFN5bnRoZXRpY0V2ZW50ID0gcmVxdWlyZSgnLi9TeW50aGV0aWNFdmVudCcpO1xuXG52YXIgZ2V0QWN0aXZlRWxlbWVudCA9IHJlcXVpcmUoJ2ZianMvbGliL2dldEFjdGl2ZUVsZW1lbnQnKTtcbnZhciBpc1RleHRJbnB1dEVsZW1lbnQgPSByZXF1aXJlKCcuL2lzVGV4dElucHV0RWxlbWVudCcpO1xudmFyIGtleU9mID0gcmVxdWlyZSgnZmJqcy9saWIva2V5T2YnKTtcbnZhciBzaGFsbG93RXF1YWwgPSByZXF1aXJlKCdmYmpzL2xpYi9zaGFsbG93RXF1YWwnKTtcblxudmFyIHRvcExldmVsVHlwZXMgPSBFdmVudENvbnN0YW50cy50b3BMZXZlbFR5cGVzO1xuXG52YXIgc2tpcFNlbGVjdGlvbkNoYW5nZUV2ZW50ID0gRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NICYmICdkb2N1bWVudE1vZGUnIGluIGRvY3VtZW50ICYmIGRvY3VtZW50LmRvY3VtZW50TW9kZSA8PSAxMTtcblxudmFyIGV2ZW50VHlwZXMgPSB7XG4gIHNlbGVjdDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uU2VsZWN0OiBudWxsIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25TZWxlY3RDYXB0dXJlOiBudWxsIH0pXG4gICAgfSxcbiAgICBkZXBlbmRlbmNpZXM6IFt0b3BMZXZlbFR5cGVzLnRvcEJsdXIsIHRvcExldmVsVHlwZXMudG9wQ29udGV4dE1lbnUsIHRvcExldmVsVHlwZXMudG9wRm9jdXMsIHRvcExldmVsVHlwZXMudG9wS2V5RG93biwgdG9wTGV2ZWxUeXBlcy50b3BNb3VzZURvd24sIHRvcExldmVsVHlwZXMudG9wTW91c2VVcCwgdG9wTGV2ZWxUeXBlcy50b3BTZWxlY3Rpb25DaGFuZ2VdXG4gIH1cbn07XG5cbnZhciBhY3RpdmVFbGVtZW50ID0gbnVsbDtcbnZhciBhY3RpdmVFbGVtZW50SUQgPSBudWxsO1xudmFyIGxhc3RTZWxlY3Rpb24gPSBudWxsO1xudmFyIG1vdXNlRG93biA9IGZhbHNlO1xuXG4vLyBUcmFjayB3aGV0aGVyIGEgbGlzdGVuZXIgZXhpc3RzIGZvciB0aGlzIHBsdWdpbi4gSWYgbm9uZSBleGlzdCwgd2UgZG9cbi8vIG5vdCBleHRyYWN0IGV2ZW50cy5cbnZhciBoYXNMaXN0ZW5lciA9IGZhbHNlO1xudmFyIE9OX1NFTEVDVF9LRVkgPSBrZXlPZih7IG9uU2VsZWN0OiBudWxsIH0pO1xuXG4vKipcbiAqIEdldCBhbiBvYmplY3Qgd2hpY2ggaXMgYSB1bmlxdWUgcmVwcmVzZW50YXRpb24gb2YgdGhlIGN1cnJlbnQgc2VsZWN0aW9uLlxuICpcbiAqIFRoZSByZXR1cm4gdmFsdWUgd2lsbCBub3QgYmUgY29uc2lzdGVudCBhY3Jvc3Mgbm9kZXMgb3IgYnJvd3NlcnMsIGJ1dFxuICogdHdvIGlkZW50aWNhbCBzZWxlY3Rpb25zIG9uIHRoZSBzYW1lIG5vZGUgd2lsbCByZXR1cm4gaWRlbnRpY2FsIG9iamVjdHMuXG4gKlxuICogQHBhcmFtIHtET01FbGVtZW50fSBub2RlXG4gKiBAcmV0dXJuIHtvYmplY3R9XG4gKi9cbmZ1bmN0aW9uIGdldFNlbGVjdGlvbihub2RlKSB7XG4gIGlmICgnc2VsZWN0aW9uU3RhcnQnIGluIG5vZGUgJiYgUmVhY3RJbnB1dFNlbGVjdGlvbi5oYXNTZWxlY3Rpb25DYXBhYmlsaXRpZXMobm9kZSkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3RhcnQ6IG5vZGUuc2VsZWN0aW9uU3RhcnQsXG4gICAgICBlbmQ6IG5vZGUuc2VsZWN0aW9uRW5kXG4gICAgfTtcbiAgfSBlbHNlIGlmICh3aW5kb3cuZ2V0U2VsZWN0aW9uKSB7XG4gICAgdmFyIHNlbGVjdGlvbiA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgICByZXR1cm4ge1xuICAgICAgYW5jaG9yTm9kZTogc2VsZWN0aW9uLmFuY2hvck5vZGUsXG4gICAgICBhbmNob3JPZmZzZXQ6IHNlbGVjdGlvbi5hbmNob3JPZmZzZXQsXG4gICAgICBmb2N1c05vZGU6IHNlbGVjdGlvbi5mb2N1c05vZGUsXG4gICAgICBmb2N1c09mZnNldDogc2VsZWN0aW9uLmZvY3VzT2Zmc2V0XG4gICAgfTtcbiAgfSBlbHNlIGlmIChkb2N1bWVudC5zZWxlY3Rpb24pIHtcbiAgICB2YXIgcmFuZ2UgPSBkb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKTtcbiAgICByZXR1cm4ge1xuICAgICAgcGFyZW50RWxlbWVudDogcmFuZ2UucGFyZW50RWxlbWVudCgpLFxuICAgICAgdGV4dDogcmFuZ2UudGV4dCxcbiAgICAgIHRvcDogcmFuZ2UuYm91bmRpbmdUb3AsXG4gICAgICBsZWZ0OiByYW5nZS5ib3VuZGluZ0xlZnRcbiAgICB9O1xuICB9XG59XG5cbi8qKlxuICogUG9sbCBzZWxlY3Rpb24gdG8gc2VlIHdoZXRoZXIgaXQncyBjaGFuZ2VkLlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudFxuICogQHJldHVybiB7P1N5bnRoZXRpY0V2ZW50fVxuICovXG5mdW5jdGlvbiBjb25zdHJ1Y3RTZWxlY3RFdmVudChuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpIHtcbiAgLy8gRW5zdXJlIHdlIGhhdmUgdGhlIHJpZ2h0IGVsZW1lbnQsIGFuZCB0aGF0IHRoZSB1c2VyIGlzIG5vdCBkcmFnZ2luZyBhXG4gIC8vIHNlbGVjdGlvbiAodGhpcyBtYXRjaGVzIG5hdGl2ZSBgc2VsZWN0YCBldmVudCBiZWhhdmlvcikuIEluIEhUTUw1LCBzZWxlY3RcbiAgLy8gZmlyZXMgb25seSBvbiBpbnB1dCBhbmQgdGV4dGFyZWEgdGh1cyBpZiB0aGVyZSdzIG5vIGZvY3VzZWQgZWxlbWVudCB3ZVxuICAvLyB3b24ndCBkaXNwYXRjaC5cbiAgaWYgKG1vdXNlRG93biB8fCBhY3RpdmVFbGVtZW50ID09IG51bGwgfHwgYWN0aXZlRWxlbWVudCAhPT0gZ2V0QWN0aXZlRWxlbWVudCgpKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvLyBPbmx5IGZpcmUgd2hlbiBzZWxlY3Rpb24gaGFzIGFjdHVhbGx5IGNoYW5nZWQuXG4gIHZhciBjdXJyZW50U2VsZWN0aW9uID0gZ2V0U2VsZWN0aW9uKGFjdGl2ZUVsZW1lbnQpO1xuICBpZiAoIWxhc3RTZWxlY3Rpb24gfHwgIXNoYWxsb3dFcXVhbChsYXN0U2VsZWN0aW9uLCBjdXJyZW50U2VsZWN0aW9uKSkge1xuICAgIGxhc3RTZWxlY3Rpb24gPSBjdXJyZW50U2VsZWN0aW9uO1xuXG4gICAgdmFyIHN5bnRoZXRpY0V2ZW50ID0gU3ludGhldGljRXZlbnQuZ2V0UG9vbGVkKGV2ZW50VHlwZXMuc2VsZWN0LCBhY3RpdmVFbGVtZW50SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG5cbiAgICBzeW50aGV0aWNFdmVudC50eXBlID0gJ3NlbGVjdCc7XG4gICAgc3ludGhldGljRXZlbnQudGFyZ2V0ID0gYWN0aXZlRWxlbWVudDtcblxuICAgIEV2ZW50UHJvcGFnYXRvcnMuYWNjdW11bGF0ZVR3b1BoYXNlRGlzcGF0Y2hlcyhzeW50aGV0aWNFdmVudCk7XG5cbiAgICByZXR1cm4gc3ludGhldGljRXZlbnQ7XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBUaGlzIHBsdWdpbiBjcmVhdGVzIGFuIGBvblNlbGVjdGAgZXZlbnQgdGhhdCBub3JtYWxpemVzIHNlbGVjdCBldmVudHNcbiAqIGFjcm9zcyBmb3JtIGVsZW1lbnRzLlxuICpcbiAqIFN1cHBvcnRlZCBlbGVtZW50cyBhcmU6XG4gKiAtIGlucHV0IChzZWUgYGlzVGV4dElucHV0RWxlbWVudGApXG4gKiAtIHRleHRhcmVhXG4gKiAtIGNvbnRlbnRFZGl0YWJsZVxuICpcbiAqIFRoaXMgZGlmZmVycyBmcm9tIG5hdGl2ZSBicm93c2VyIGltcGxlbWVudGF0aW9ucyBpbiB0aGUgZm9sbG93aW5nIHdheXM6XG4gKiAtIEZpcmVzIG9uIGNvbnRlbnRFZGl0YWJsZSBmaWVsZHMgYXMgd2VsbCBhcyBpbnB1dHMuXG4gKiAtIEZpcmVzIGZvciBjb2xsYXBzZWQgc2VsZWN0aW9uLlxuICogLSBGaXJlcyBhZnRlciB1c2VyIGlucHV0LlxuICovXG52YXIgU2VsZWN0RXZlbnRQbHVnaW4gPSB7XG5cbiAgZXZlbnRUeXBlczogZXZlbnRUeXBlcyxcblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRvcExldmVsVHlwZSBSZWNvcmQgZnJvbSBgRXZlbnRDb25zdGFudHNgLlxuICAgKiBAcGFyYW0ge0RPTUV2ZW50VGFyZ2V0fSB0b3BMZXZlbFRhcmdldCBUaGUgbGlzdGVuaW5nIGNvbXBvbmVudCByb290IG5vZGUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFRhcmdldElEIElEIG9mIGB0b3BMZXZlbFRhcmdldGAuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAgICogQHJldHVybiB7Kn0gQW4gYWNjdW11bGF0aW9uIG9mIHN5bnRoZXRpYyBldmVudHMuXG4gICAqIEBzZWUge0V2ZW50UGx1Z2luSHViLmV4dHJhY3RFdmVudHN9XG4gICAqL1xuICBleHRyYWN0RXZlbnRzOiBmdW5jdGlvbiAodG9wTGV2ZWxUeXBlLCB0b3BMZXZlbFRhcmdldCwgdG9wTGV2ZWxUYXJnZXRJRCwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KSB7XG4gICAgaWYgKCFoYXNMaXN0ZW5lcikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgc3dpdGNoICh0b3BMZXZlbFR5cGUpIHtcbiAgICAgIC8vIFRyYWNrIHRoZSBpbnB1dCBub2RlIHRoYXQgaGFzIGZvY3VzLlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEZvY3VzOlxuICAgICAgICBpZiAoaXNUZXh0SW5wdXRFbGVtZW50KHRvcExldmVsVGFyZ2V0KSB8fCB0b3BMZXZlbFRhcmdldC5jb250ZW50RWRpdGFibGUgPT09ICd0cnVlJykge1xuICAgICAgICAgIGFjdGl2ZUVsZW1lbnQgPSB0b3BMZXZlbFRhcmdldDtcbiAgICAgICAgICBhY3RpdmVFbGVtZW50SUQgPSB0b3BMZXZlbFRhcmdldElEO1xuICAgICAgICAgIGxhc3RTZWxlY3Rpb24gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEJsdXI6XG4gICAgICAgIGFjdGl2ZUVsZW1lbnQgPSBudWxsO1xuICAgICAgICBhY3RpdmVFbGVtZW50SUQgPSBudWxsO1xuICAgICAgICBsYXN0U2VsZWN0aW9uID0gbnVsbDtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIC8vIERvbid0IGZpcmUgdGhlIGV2ZW50IHdoaWxlIHRoZSB1c2VyIGlzIGRyYWdnaW5nLiBUaGlzIG1hdGNoZXMgdGhlXG4gICAgICAvLyBzZW1hbnRpY3Mgb2YgdGhlIG5hdGl2ZSBzZWxlY3QgZXZlbnQuXG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wTW91c2VEb3duOlxuICAgICAgICBtb3VzZURvd24gPSB0cnVlO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BDb250ZXh0TWVudTpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BNb3VzZVVwOlxuICAgICAgICBtb3VzZURvd24gPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIGNvbnN0cnVjdFNlbGVjdEV2ZW50KG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG5cbiAgICAgIC8vIENocm9tZSBhbmQgSUUgZmlyZSBub24tc3RhbmRhcmQgZXZlbnQgd2hlbiBzZWxlY3Rpb24gaXMgY2hhbmdlZCAoYW5kXG4gICAgICAvLyBzb21ldGltZXMgd2hlbiBpdCBoYXNuJ3QpLiBJRSdzIGV2ZW50IGZpcmVzIG91dCBvZiBvcmRlciB3aXRoIHJlc3BlY3RcbiAgICAgIC8vIHRvIGtleSBhbmQgaW5wdXQgZXZlbnRzIG9uIGRlbGV0aW9uLCBzbyB3ZSBkaXNjYXJkIGl0LlxuICAgICAgLy9cbiAgICAgIC8vIEZpcmVmb3ggZG9lc24ndCBzdXBwb3J0IHNlbGVjdGlvbmNoYW5nZSwgc28gY2hlY2sgc2VsZWN0aW9uIHN0YXR1c1xuICAgICAgLy8gYWZ0ZXIgZWFjaCBrZXkgZW50cnkuIFRoZSBzZWxlY3Rpb24gY2hhbmdlcyBhZnRlciBrZXlkb3duIGFuZCBiZWZvcmVcbiAgICAgIC8vIGtleXVwLCBidXQgd2UgY2hlY2sgb24ga2V5ZG93biBhcyB3ZWxsIGluIHRoZSBjYXNlIG9mIGhvbGRpbmcgZG93biBhXG4gICAgICAvLyBrZXksIHdoZW4gbXVsdGlwbGUga2V5ZG93biBldmVudHMgYXJlIGZpcmVkIGJ1dCBvbmx5IG9uZSBrZXl1cCBpcy5cbiAgICAgIC8vIFRoaXMgaXMgYWxzbyBvdXIgYXBwcm9hY2ggZm9yIElFIGhhbmRsaW5nLCBmb3IgdGhlIHJlYXNvbiBhYm92ZS5cbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BTZWxlY3Rpb25DaGFuZ2U6XG4gICAgICAgIGlmIChza2lwU2VsZWN0aW9uQ2hhbmdlRXZlbnQpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgLy8gZmFsbHMgdGhyb3VnaFxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEtleURvd246XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wS2V5VXA6XG4gICAgICAgIHJldHVybiBjb25zdHJ1Y3RTZWxlY3RFdmVudChuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9LFxuXG4gIGRpZFB1dExpc3RlbmVyOiBmdW5jdGlvbiAoaWQsIHJlZ2lzdHJhdGlvbk5hbWUsIGxpc3RlbmVyKSB7XG4gICAgaWYgKHJlZ2lzdHJhdGlvbk5hbWUgPT09IE9OX1NFTEVDVF9LRVkpIHtcbiAgICAgIGhhc0xpc3RlbmVyID0gdHJ1ZTtcbiAgICB9XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gU2VsZWN0RXZlbnRQbHVnaW47XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0L2xpYi9TZWxlY3RFdmVudFBsdWdpbi5qc1xuLy8gbW9kdWxlIGlkID0gMTMwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBTZXJ2ZXJSZWFjdFJvb3RJbmRleFxuICogQHR5cGVjaGVja3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogU2l6ZSBvZiB0aGUgcmVhY3RSb290IElEIHNwYWNlLiBXZSBnZW5lcmF0ZSByYW5kb20gbnVtYmVycyBmb3IgUmVhY3Qgcm9vdFxuICogSURzIGFuZCBpZiB0aGVyZSdzIGEgY29sbGlzaW9uIHRoZSBldmVudHMgYW5kIERPTSB1cGRhdGUgc3lzdGVtIHdpbGxcbiAqIGdldCBjb25mdXNlZC4gSW4gdGhlIGZ1dHVyZSB3ZSBuZWVkIGEgd2F5IHRvIGdlbmVyYXRlIEdVSURzIGJ1dCBmb3JcbiAqIG5vdyB0aGlzIHdpbGwgd29yayBvbiBhIHNtYWxsZXIgc2NhbGUuXG4gKi9cbnZhciBHTE9CQUxfTU9VTlRfUE9JTlRfTUFYID0gTWF0aC5wb3coMiwgNTMpO1xuXG52YXIgU2VydmVyUmVhY3RSb290SW5kZXggPSB7XG4gIGNyZWF0ZVJlYWN0Um9vdEluZGV4OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIE1hdGguY2VpbChNYXRoLnJhbmRvbSgpICogR0xPQkFMX01PVU5UX1BPSU5UX01BWCk7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gU2VydmVyUmVhY3RSb290SW5kZXg7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0L2xpYi9TZXJ2ZXJSZWFjdFJvb3RJbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMTMxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBTaW1wbGVFdmVudFBsdWdpblxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEV2ZW50Q29uc3RhbnRzID0gcmVxdWlyZSgnLi9FdmVudENvbnN0YW50cycpO1xudmFyIEV2ZW50TGlzdGVuZXIgPSByZXF1aXJlKCdmYmpzL2xpYi9FdmVudExpc3RlbmVyJyk7XG52YXIgRXZlbnRQcm9wYWdhdG9ycyA9IHJlcXVpcmUoJy4vRXZlbnRQcm9wYWdhdG9ycycpO1xudmFyIFJlYWN0TW91bnQgPSByZXF1aXJlKCcuL1JlYWN0TW91bnQnKTtcbnZhciBTeW50aGV0aWNDbGlwYm9hcmRFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljQ2xpcGJvYXJkRXZlbnQnKTtcbnZhciBTeW50aGV0aWNFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljRXZlbnQnKTtcbnZhciBTeW50aGV0aWNGb2N1c0V2ZW50ID0gcmVxdWlyZSgnLi9TeW50aGV0aWNGb2N1c0V2ZW50Jyk7XG52YXIgU3ludGhldGljS2V5Ym9hcmRFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljS2V5Ym9hcmRFdmVudCcpO1xudmFyIFN5bnRoZXRpY01vdXNlRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY01vdXNlRXZlbnQnKTtcbnZhciBTeW50aGV0aWNEcmFnRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY0RyYWdFdmVudCcpO1xudmFyIFN5bnRoZXRpY1RvdWNoRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY1RvdWNoRXZlbnQnKTtcbnZhciBTeW50aGV0aWNVSUV2ZW50ID0gcmVxdWlyZSgnLi9TeW50aGV0aWNVSUV2ZW50Jyk7XG52YXIgU3ludGhldGljV2hlZWxFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljV2hlZWxFdmVudCcpO1xuXG52YXIgZW1wdHlGdW5jdGlvbiA9IHJlcXVpcmUoJ2ZianMvbGliL2VtcHR5RnVuY3Rpb24nKTtcbnZhciBnZXRFdmVudENoYXJDb2RlID0gcmVxdWlyZSgnLi9nZXRFdmVudENoYXJDb2RlJyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG52YXIga2V5T2YgPSByZXF1aXJlKCdmYmpzL2xpYi9rZXlPZicpO1xuXG52YXIgdG9wTGV2ZWxUeXBlcyA9IEV2ZW50Q29uc3RhbnRzLnRvcExldmVsVHlwZXM7XG5cbnZhciBldmVudFR5cGVzID0ge1xuICBhYm9ydDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uQWJvcnQ6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkFib3J0Q2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgYmx1cjoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uQmx1cjogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uQmx1ckNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGNhblBsYXk6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkNhblBsYXk6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkNhblBsYXlDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBjYW5QbGF5VGhyb3VnaDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uQ2FuUGxheVRocm91Z2g6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkNhblBsYXlUaHJvdWdoQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgY2xpY2s6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkNsaWNrOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25DbGlja0NhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGNvbnRleHRNZW51OiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Db250ZXh0TWVudTogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uQ29udGV4dE1lbnVDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBjb3B5OiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Db3B5OiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Db3B5Q2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgY3V0OiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25DdXQ6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkN1dENhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGRvdWJsZUNsaWNrOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Eb3VibGVDbGljazogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uRG91YmxlQ2xpY2tDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBkcmFnOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25EcmFnOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25EcmFnQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgZHJhZ0VuZDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uRHJhZ0VuZDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uRHJhZ0VuZENhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGRyYWdFbnRlcjoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uRHJhZ0VudGVyOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25EcmFnRW50ZXJDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBkcmFnRXhpdDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uRHJhZ0V4aXQ6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkRyYWdFeGl0Q2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgZHJhZ0xlYXZlOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25EcmFnTGVhdmU6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkRyYWdMZWF2ZUNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGRyYWdPdmVyOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25EcmFnT3ZlcjogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uRHJhZ092ZXJDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBkcmFnU3RhcnQ6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkRyYWdTdGFydDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uRHJhZ1N0YXJ0Q2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgZHJvcDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uRHJvcDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uRHJvcENhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGR1cmF0aW9uQ2hhbmdlOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25EdXJhdGlvbkNoYW5nZTogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uRHVyYXRpb25DaGFuZ2VDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBlbXB0aWVkOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25FbXB0aWVkOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25FbXB0aWVkQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgZW5jcnlwdGVkOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25FbmNyeXB0ZWQ6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkVuY3J5cHRlZENhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGVuZGVkOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25FbmRlZDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uRW5kZWRDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBlcnJvcjoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uRXJyb3I6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkVycm9yQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgZm9jdXM6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkZvY3VzOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Gb2N1c0NhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGlucHV0OiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25JbnB1dDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uSW5wdXRDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBrZXlEb3duOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25LZXlEb3duOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25LZXlEb3duQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAga2V5UHJlc3M6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbktleVByZXNzOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25LZXlQcmVzc0NhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGtleVVwOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25LZXlVcDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uS2V5VXBDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBsb2FkOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Mb2FkOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Mb2FkQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgbG9hZGVkRGF0YToge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uTG9hZGVkRGF0YTogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uTG9hZGVkRGF0YUNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGxvYWRlZE1ldGFkYXRhOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Mb2FkZWRNZXRhZGF0YTogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uTG9hZGVkTWV0YWRhdGFDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBsb2FkU3RhcnQ6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkxvYWRTdGFydDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uTG9hZFN0YXJ0Q2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgLy8gTm90ZTogV2UgZG8gbm90IGFsbG93IGxpc3RlbmluZyB0byBtb3VzZU92ZXIgZXZlbnRzLiBJbnN0ZWFkLCB1c2UgdGhlXG4gIC8vIG9uTW91c2VFbnRlci9vbk1vdXNlTGVhdmUgY3JlYXRlZCBieSBgRW50ZXJMZWF2ZUV2ZW50UGx1Z2luYC5cbiAgbW91c2VEb3duOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Nb3VzZURvd246IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbk1vdXNlRG93bkNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIG1vdXNlTW92ZToge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uTW91c2VNb3ZlOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Nb3VzZU1vdmVDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBtb3VzZU91dDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uTW91c2VPdXQ6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbk1vdXNlT3V0Q2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgbW91c2VPdmVyOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Nb3VzZU92ZXI6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbk1vdXNlT3ZlckNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIG1vdXNlVXA6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbk1vdXNlVXA6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbk1vdXNlVXBDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBwYXN0ZToge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uUGFzdGU6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblBhc3RlQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgcGF1c2U6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvblBhdXNlOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25QYXVzZUNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIHBsYXk6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvblBsYXk6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblBsYXlDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBwbGF5aW5nOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25QbGF5aW5nOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25QbGF5aW5nQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgcHJvZ3Jlc3M6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvblByb2dyZXNzOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Qcm9ncmVzc0NhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIHJhdGVDaGFuZ2U6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvblJhdGVDaGFuZ2U6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblJhdGVDaGFuZ2VDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICByZXNldDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uUmVzZXQ6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblJlc2V0Q2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgc2Nyb2xsOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25TY3JvbGw6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblNjcm9sbENhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIHNlZWtlZDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uU2Vla2VkOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25TZWVrZWRDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBzZWVraW5nOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25TZWVraW5nOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25TZWVraW5nQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgc3RhbGxlZDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uU3RhbGxlZDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uU3RhbGxlZENhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIHN1Ym1pdDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uU3VibWl0OiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25TdWJtaXRDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBzdXNwZW5kOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25TdXNwZW5kOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25TdXNwZW5kQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgdGltZVVwZGF0ZToge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uVGltZVVwZGF0ZTogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uVGltZVVwZGF0ZUNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIHRvdWNoQ2FuY2VsOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Ub3VjaENhbmNlbDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uVG91Y2hDYW5jZWxDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICB0b3VjaEVuZDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uVG91Y2hFbmQ6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblRvdWNoRW5kQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgdG91Y2hNb3ZlOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Ub3VjaE1vdmU6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblRvdWNoTW92ZUNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIHRvdWNoU3RhcnQ6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvblRvdWNoU3RhcnQ6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblRvdWNoU3RhcnRDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICB2b2x1bWVDaGFuZ2U6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvblZvbHVtZUNoYW5nZTogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uVm9sdW1lQ2hhbmdlQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgd2FpdGluZzoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uV2FpdGluZzogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uV2FpdGluZ0NhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIHdoZWVsOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25XaGVlbDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uV2hlZWxDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9XG59O1xuXG52YXIgdG9wTGV2ZWxFdmVudHNUb0Rpc3BhdGNoQ29uZmlnID0ge1xuICB0b3BBYm9ydDogZXZlbnRUeXBlcy5hYm9ydCxcbiAgdG9wQmx1cjogZXZlbnRUeXBlcy5ibHVyLFxuICB0b3BDYW5QbGF5OiBldmVudFR5cGVzLmNhblBsYXksXG4gIHRvcENhblBsYXlUaHJvdWdoOiBldmVudFR5cGVzLmNhblBsYXlUaHJvdWdoLFxuICB0b3BDbGljazogZXZlbnRUeXBlcy5jbGljayxcbiAgdG9wQ29udGV4dE1lbnU6IGV2ZW50VHlwZXMuY29udGV4dE1lbnUsXG4gIHRvcENvcHk6IGV2ZW50VHlwZXMuY29weSxcbiAgdG9wQ3V0OiBldmVudFR5cGVzLmN1dCxcbiAgdG9wRG91YmxlQ2xpY2s6IGV2ZW50VHlwZXMuZG91YmxlQ2xpY2ssXG4gIHRvcERyYWc6IGV2ZW50VHlwZXMuZHJhZyxcbiAgdG9wRHJhZ0VuZDogZXZlbnRUeXBlcy5kcmFnRW5kLFxuICB0b3BEcmFnRW50ZXI6IGV2ZW50VHlwZXMuZHJhZ0VudGVyLFxuICB0b3BEcmFnRXhpdDogZXZlbnRUeXBlcy5kcmFnRXhpdCxcbiAgdG9wRHJhZ0xlYXZlOiBldmVudFR5cGVzLmRyYWdMZWF2ZSxcbiAgdG9wRHJhZ092ZXI6IGV2ZW50VHlwZXMuZHJhZ092ZXIsXG4gIHRvcERyYWdTdGFydDogZXZlbnRUeXBlcy5kcmFnU3RhcnQsXG4gIHRvcERyb3A6IGV2ZW50VHlwZXMuZHJvcCxcbiAgdG9wRHVyYXRpb25DaGFuZ2U6IGV2ZW50VHlwZXMuZHVyYXRpb25DaGFuZ2UsXG4gIHRvcEVtcHRpZWQ6IGV2ZW50VHlwZXMuZW1wdGllZCxcbiAgdG9wRW5jcnlwdGVkOiBldmVudFR5cGVzLmVuY3J5cHRlZCxcbiAgdG9wRW5kZWQ6IGV2ZW50VHlwZXMuZW5kZWQsXG4gIHRvcEVycm9yOiBldmVudFR5cGVzLmVycm9yLFxuICB0b3BGb2N1czogZXZlbnRUeXBlcy5mb2N1cyxcbiAgdG9wSW5wdXQ6IGV2ZW50VHlwZXMuaW5wdXQsXG4gIHRvcEtleURvd246IGV2ZW50VHlwZXMua2V5RG93bixcbiAgdG9wS2V5UHJlc3M6IGV2ZW50VHlwZXMua2V5UHJlc3MsXG4gIHRvcEtleVVwOiBldmVudFR5cGVzLmtleVVwLFxuICB0b3BMb2FkOiBldmVudFR5cGVzLmxvYWQsXG4gIHRvcExvYWRlZERhdGE6IGV2ZW50VHlwZXMubG9hZGVkRGF0YSxcbiAgdG9wTG9hZGVkTWV0YWRhdGE6IGV2ZW50VHlwZXMubG9hZGVkTWV0YWRhdGEsXG4gIHRvcExvYWRTdGFydDogZXZlbnRUeXBlcy5sb2FkU3RhcnQsXG4gIHRvcE1vdXNlRG93bjogZXZlbnRUeXBlcy5tb3VzZURvd24sXG4gIHRvcE1vdXNlTW92ZTogZXZlbnRUeXBlcy5tb3VzZU1vdmUsXG4gIHRvcE1vdXNlT3V0OiBldmVudFR5cGVzLm1vdXNlT3V0LFxuICB0b3BNb3VzZU92ZXI6IGV2ZW50VHlwZXMubW91c2VPdmVyLFxuICB0b3BNb3VzZVVwOiBldmVudFR5cGVzLm1vdXNlVXAsXG4gIHRvcFBhc3RlOiBldmVudFR5cGVzLnBhc3RlLFxuICB0b3BQYXVzZTogZXZlbnRUeXBlcy5wYXVzZSxcbiAgdG9wUGxheTogZXZlbnRUeXBlcy5wbGF5LFxuICB0b3BQbGF5aW5nOiBldmVudFR5cGVzLnBsYXlpbmcsXG4gIHRvcFByb2dyZXNzOiBldmVudFR5cGVzLnByb2dyZXNzLFxuICB0b3BSYXRlQ2hhbmdlOiBldmVudFR5cGVzLnJhdGVDaGFuZ2UsXG4gIHRvcFJlc2V0OiBldmVudFR5cGVzLnJlc2V0LFxuICB0b3BTY3JvbGw6IGV2ZW50VHlwZXMuc2Nyb2xsLFxuICB0b3BTZWVrZWQ6IGV2ZW50VHlwZXMuc2Vla2VkLFxuICB0b3BTZWVraW5nOiBldmVudFR5cGVzLnNlZWtpbmcsXG4gIHRvcFN0YWxsZWQ6IGV2ZW50VHlwZXMuc3RhbGxlZCxcbiAgdG9wU3VibWl0OiBldmVudFR5cGVzLnN1Ym1pdCxcbiAgdG9wU3VzcGVuZDogZXZlbnRUeXBlcy5zdXNwZW5kLFxuICB0b3BUaW1lVXBkYXRlOiBldmVudFR5cGVzLnRpbWVVcGRhdGUsXG4gIHRvcFRvdWNoQ2FuY2VsOiBldmVudFR5cGVzLnRvdWNoQ2FuY2VsLFxuICB0b3BUb3VjaEVuZDogZXZlbnRUeXBlcy50b3VjaEVuZCxcbiAgdG9wVG91Y2hNb3ZlOiBldmVudFR5cGVzLnRvdWNoTW92ZSxcbiAgdG9wVG91Y2hTdGFydDogZXZlbnRUeXBlcy50b3VjaFN0YXJ0LFxuICB0b3BWb2x1bWVDaGFuZ2U6IGV2ZW50VHlwZXMudm9sdW1lQ2hhbmdlLFxuICB0b3BXYWl0aW5nOiBldmVudFR5cGVzLndhaXRpbmcsXG4gIHRvcFdoZWVsOiBldmVudFR5cGVzLndoZWVsXG59O1xuXG5mb3IgKHZhciB0eXBlIGluIHRvcExldmVsRXZlbnRzVG9EaXNwYXRjaENvbmZpZykge1xuICB0b3BMZXZlbEV2ZW50c1RvRGlzcGF0Y2hDb25maWdbdHlwZV0uZGVwZW5kZW5jaWVzID0gW3R5cGVdO1xufVxuXG52YXIgT05fQ0xJQ0tfS0VZID0ga2V5T2YoeyBvbkNsaWNrOiBudWxsIH0pO1xudmFyIG9uQ2xpY2tMaXN0ZW5lcnMgPSB7fTtcblxudmFyIFNpbXBsZUV2ZW50UGx1Z2luID0ge1xuXG4gIGV2ZW50VHlwZXM6IGV2ZW50VHlwZXMsXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFR5cGUgUmVjb3JkIGZyb20gYEV2ZW50Q29uc3RhbnRzYC5cbiAgICogQHBhcmFtIHtET01FdmVudFRhcmdldH0gdG9wTGV2ZWxUYXJnZXQgVGhlIGxpc3RlbmluZyBjb21wb25lbnQgcm9vdCBub2RlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUYXJnZXRJRCBJRCBvZiBgdG9wTGV2ZWxUYXJnZXRgLlxuICAgKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gICAqIEByZXR1cm4geyp9IEFuIGFjY3VtdWxhdGlvbiBvZiBzeW50aGV0aWMgZXZlbnRzLlxuICAgKiBAc2VlIHtFdmVudFBsdWdpbkh1Yi5leHRyYWN0RXZlbnRzfVxuICAgKi9cbiAgZXh0cmFjdEV2ZW50czogZnVuY3Rpb24gKHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICAgIHZhciBkaXNwYXRjaENvbmZpZyA9IHRvcExldmVsRXZlbnRzVG9EaXNwYXRjaENvbmZpZ1t0b3BMZXZlbFR5cGVdO1xuICAgIGlmICghZGlzcGF0Y2hDb25maWcpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICB2YXIgRXZlbnRDb25zdHJ1Y3RvcjtcbiAgICBzd2l0Y2ggKHRvcExldmVsVHlwZSkge1xuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEFib3J0OlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcENhblBsYXk6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQ2FuUGxheVRocm91Z2g6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wRHVyYXRpb25DaGFuZ2U6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wRW1wdGllZDpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BFbmNyeXB0ZWQ6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wRW5kZWQ6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wRXJyb3I6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wSW5wdXQ6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wTG9hZDpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BMb2FkZWREYXRhOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcExvYWRlZE1ldGFkYXRhOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcExvYWRTdGFydDpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BQYXVzZTpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BQbGF5OlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFBsYXlpbmc6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wUHJvZ3Jlc3M6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wUmF0ZUNoYW5nZTpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BSZXNldDpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BTZWVrZWQ6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wU2Vla2luZzpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BTdGFsbGVkOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFN1Ym1pdDpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BTdXNwZW5kOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFRpbWVVcGRhdGU6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wVm9sdW1lQ2hhbmdlOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFdhaXRpbmc6XG4gICAgICAgIC8vIEhUTUwgRXZlbnRzXG4gICAgICAgIC8vIEBzZWUgaHR0cDovL3d3dy53My5vcmcvVFIvaHRtbDUvaW5kZXguaHRtbCNldmVudHMtMFxuICAgICAgICBFdmVudENvbnN0cnVjdG9yID0gU3ludGhldGljRXZlbnQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEtleVByZXNzOlxuICAgICAgICAvLyBGaXJlRm94IGNyZWF0ZXMgYSBrZXlwcmVzcyBldmVudCBmb3IgZnVuY3Rpb24ga2V5cyB0b28uIFRoaXMgcmVtb3Zlc1xuICAgICAgICAvLyB0aGUgdW53YW50ZWQga2V5cHJlc3MgZXZlbnRzLiBFbnRlciBpcyBob3dldmVyIGJvdGggcHJpbnRhYmxlIGFuZFxuICAgICAgICAvLyBub24tcHJpbnRhYmxlLiBPbmUgd291bGQgZXhwZWN0IFRhYiB0byBiZSBhcyB3ZWxsIChidXQgaXQgaXNuJ3QpLlxuICAgICAgICBpZiAoZ2V0RXZlbnRDaGFyQ29kZShuYXRpdmVFdmVudCkgPT09IDApIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEtleURvd246XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wS2V5VXA6XG4gICAgICAgIEV2ZW50Q29uc3RydWN0b3IgPSBTeW50aGV0aWNLZXlib2FyZEV2ZW50O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BCbHVyOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEZvY3VzOlxuICAgICAgICBFdmVudENvbnN0cnVjdG9yID0gU3ludGhldGljRm9jdXNFdmVudDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQ2xpY2s6XG4gICAgICAgIC8vIEZpcmVmb3ggY3JlYXRlcyBhIGNsaWNrIGV2ZW50IG9uIHJpZ2h0IG1vdXNlIGNsaWNrcy4gVGhpcyByZW1vdmVzIHRoZVxuICAgICAgICAvLyB1bndhbnRlZCBjbGljayBldmVudHMuXG4gICAgICAgIGlmIChuYXRpdmVFdmVudC5idXR0b24gPT09IDIpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcENvbnRleHRNZW51OlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcERvdWJsZUNsaWNrOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlRG93bjpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BNb3VzZU1vdmU6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wTW91c2VPdXQ6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wTW91c2VPdmVyOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlVXA6XG4gICAgICAgIEV2ZW50Q29uc3RydWN0b3IgPSBTeW50aGV0aWNNb3VzZUV2ZW50O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BEcmFnOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcERyYWdFbmQ6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wRHJhZ0VudGVyOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcERyYWdFeGl0OlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcERyYWdMZWF2ZTpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BEcmFnT3ZlcjpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BEcmFnU3RhcnQ6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wRHJvcDpcbiAgICAgICAgRXZlbnRDb25zdHJ1Y3RvciA9IFN5bnRoZXRpY0RyYWdFdmVudDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wVG91Y2hDYW5jZWw6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wVG91Y2hFbmQ6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wVG91Y2hNb3ZlOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFRvdWNoU3RhcnQ6XG4gICAgICAgIEV2ZW50Q29uc3RydWN0b3IgPSBTeW50aGV0aWNUb3VjaEV2ZW50O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BTY3JvbGw6XG4gICAgICAgIEV2ZW50Q29uc3RydWN0b3IgPSBTeW50aGV0aWNVSUV2ZW50O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BXaGVlbDpcbiAgICAgICAgRXZlbnRDb25zdHJ1Y3RvciA9IFN5bnRoZXRpY1doZWVsRXZlbnQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcENvcHk6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQ3V0OlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFBhc3RlOlxuICAgICAgICBFdmVudENvbnN0cnVjdG9yID0gU3ludGhldGljQ2xpcGJvYXJkRXZlbnQ7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICAhRXZlbnRDb25zdHJ1Y3RvciA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdTaW1wbGVFdmVudFBsdWdpbjogVW5oYW5kbGVkIGV2ZW50IHR5cGUsIGAlc2AuJywgdG9wTGV2ZWxUeXBlKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgdmFyIGV2ZW50ID0gRXZlbnRDb25zdHJ1Y3Rvci5nZXRQb29sZWQoZGlzcGF0Y2hDb25maWcsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG4gICAgRXZlbnRQcm9wYWdhdG9ycy5hY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzKGV2ZW50KTtcbiAgICByZXR1cm4gZXZlbnQ7XG4gIH0sXG5cbiAgZGlkUHV0TGlzdGVuZXI6IGZ1bmN0aW9uIChpZCwgcmVnaXN0cmF0aW9uTmFtZSwgbGlzdGVuZXIpIHtcbiAgICAvLyBNb2JpbGUgU2FmYXJpIGRvZXMgbm90IGZpcmUgcHJvcGVybHkgYnViYmxlIGNsaWNrIGV2ZW50cyBvblxuICAgIC8vIG5vbi1pbnRlcmFjdGl2ZSBlbGVtZW50cywgd2hpY2ggbWVhbnMgZGVsZWdhdGVkIGNsaWNrIGxpc3RlbmVycyBkbyBub3RcbiAgICAvLyBmaXJlLiBUaGUgd29ya2Fyb3VuZCBmb3IgdGhpcyBidWcgaW52b2x2ZXMgYXR0YWNoaW5nIGFuIGVtcHR5IGNsaWNrXG4gICAgLy8gbGlzdGVuZXIgb24gdGhlIHRhcmdldCBub2RlLlxuICAgIGlmIChyZWdpc3RyYXRpb25OYW1lID09PSBPTl9DTElDS19LRVkpIHtcbiAgICAgIHZhciBub2RlID0gUmVhY3RNb3VudC5nZXROb2RlKGlkKTtcbiAgICAgIGlmICghb25DbGlja0xpc3RlbmVyc1tpZF0pIHtcbiAgICAgICAgb25DbGlja0xpc3RlbmVyc1tpZF0gPSBFdmVudExpc3RlbmVyLmxpc3Rlbihub2RlLCAnY2xpY2snLCBlbXB0eUZ1bmN0aW9uKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgd2lsbERlbGV0ZUxpc3RlbmVyOiBmdW5jdGlvbiAoaWQsIHJlZ2lzdHJhdGlvbk5hbWUpIHtcbiAgICBpZiAocmVnaXN0cmF0aW9uTmFtZSA9PT0gT05fQ0xJQ0tfS0VZKSB7XG4gICAgICBvbkNsaWNrTGlzdGVuZXJzW2lkXS5yZW1vdmUoKTtcbiAgICAgIGRlbGV0ZSBvbkNsaWNrTGlzdGVuZXJzW2lkXTtcbiAgICB9XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBTaW1wbGVFdmVudFBsdWdpbjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QvbGliL1NpbXBsZUV2ZW50UGx1Z2luLmpzXG4vLyBtb2R1bGUgaWQgPSAxMzJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFN5bnRoZXRpY0NsaXBib2FyZEV2ZW50XG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFN5bnRoZXRpY0V2ZW50ID0gcmVxdWlyZSgnLi9TeW50aGV0aWNFdmVudCcpO1xuXG4vKipcbiAqIEBpbnRlcmZhY2UgRXZlbnRcbiAqIEBzZWUgaHR0cDovL3d3dy53My5vcmcvVFIvY2xpcGJvYXJkLWFwaXMvXG4gKi9cbnZhciBDbGlwYm9hcmRFdmVudEludGVyZmFjZSA9IHtcbiAgY2xpcGJvYXJkRGF0YTogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgcmV0dXJuICdjbGlwYm9hcmREYXRhJyBpbiBldmVudCA/IGV2ZW50LmNsaXBib2FyZERhdGEgOiB3aW5kb3cuY2xpcGJvYXJkRGF0YTtcbiAgfVxufTtcblxuLyoqXG4gKiBAcGFyYW0ge29iamVjdH0gZGlzcGF0Y2hDb25maWcgQ29uZmlndXJhdGlvbiB1c2VkIHRvIGRpc3BhdGNoIHRoaXMgZXZlbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gZGlzcGF0Y2hNYXJrZXIgTWFya2VyIGlkZW50aWZ5aW5nIHRoZSBldmVudCB0YXJnZXQuXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gKiBAZXh0ZW5kcyB7U3ludGhldGljVUlFdmVudH1cbiAqL1xuZnVuY3Rpb24gU3ludGhldGljQ2xpcGJvYXJkRXZlbnQoZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpIHtcbiAgU3ludGhldGljRXZlbnQuY2FsbCh0aGlzLCBkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG59XG5cblN5bnRoZXRpY0V2ZW50LmF1Z21lbnRDbGFzcyhTeW50aGV0aWNDbGlwYm9hcmRFdmVudCwgQ2xpcGJvYXJkRXZlbnRJbnRlcmZhY2UpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFN5bnRoZXRpY0NsaXBib2FyZEV2ZW50O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvU3ludGhldGljQ2xpcGJvYXJkRXZlbnQuanNcbi8vIG1vZHVsZSBpZCA9IDEzM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgU3ludGhldGljRm9jdXNFdmVudFxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBTeW50aGV0aWNVSUV2ZW50ID0gcmVxdWlyZSgnLi9TeW50aGV0aWNVSUV2ZW50Jyk7XG5cbi8qKlxuICogQGludGVyZmFjZSBGb2N1c0V2ZW50XG4gKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL0RPTS1MZXZlbC0zLUV2ZW50cy9cbiAqL1xudmFyIEZvY3VzRXZlbnRJbnRlcmZhY2UgPSB7XG4gIHJlbGF0ZWRUYXJnZXQ6IG51bGxcbn07XG5cbi8qKlxuICogQHBhcmFtIHtvYmplY3R9IGRpc3BhdGNoQ29uZmlnIENvbmZpZ3VyYXRpb24gdXNlZCB0byBkaXNwYXRjaCB0aGlzIGV2ZW50LlxuICogQHBhcmFtIHtzdHJpbmd9IGRpc3BhdGNoTWFya2VyIE1hcmtlciBpZGVudGlmeWluZyB0aGUgZXZlbnQgdGFyZ2V0LlxuICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuICogQGV4dGVuZHMge1N5bnRoZXRpY1VJRXZlbnR9XG4gKi9cbmZ1bmN0aW9uIFN5bnRoZXRpY0ZvY3VzRXZlbnQoZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpIHtcbiAgU3ludGhldGljVUlFdmVudC5jYWxsKHRoaXMsIGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcbn1cblxuU3ludGhldGljVUlFdmVudC5hdWdtZW50Q2xhc3MoU3ludGhldGljRm9jdXNFdmVudCwgRm9jdXNFdmVudEludGVyZmFjZSk7XG5cbm1vZHVsZS5leHBvcnRzID0gU3ludGhldGljRm9jdXNFdmVudDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QvbGliL1N5bnRoZXRpY0ZvY3VzRXZlbnQuanNcbi8vIG1vZHVsZSBpZCA9IDEzNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgU3ludGhldGljS2V5Ym9hcmRFdmVudFxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBTeW50aGV0aWNVSUV2ZW50ID0gcmVxdWlyZSgnLi9TeW50aGV0aWNVSUV2ZW50Jyk7XG5cbnZhciBnZXRFdmVudENoYXJDb2RlID0gcmVxdWlyZSgnLi9nZXRFdmVudENoYXJDb2RlJyk7XG52YXIgZ2V0RXZlbnRLZXkgPSByZXF1aXJlKCcuL2dldEV2ZW50S2V5Jyk7XG52YXIgZ2V0RXZlbnRNb2RpZmllclN0YXRlID0gcmVxdWlyZSgnLi9nZXRFdmVudE1vZGlmaWVyU3RhdGUnKTtcblxuLyoqXG4gKiBAaW50ZXJmYWNlIEtleWJvYXJkRXZlbnRcbiAqIEBzZWUgaHR0cDovL3d3dy53My5vcmcvVFIvRE9NLUxldmVsLTMtRXZlbnRzL1xuICovXG52YXIgS2V5Ym9hcmRFdmVudEludGVyZmFjZSA9IHtcbiAga2V5OiBnZXRFdmVudEtleSxcbiAgbG9jYXRpb246IG51bGwsXG4gIGN0cmxLZXk6IG51bGwsXG4gIHNoaWZ0S2V5OiBudWxsLFxuICBhbHRLZXk6IG51bGwsXG4gIG1ldGFLZXk6IG51bGwsXG4gIHJlcGVhdDogbnVsbCxcbiAgbG9jYWxlOiBudWxsLFxuICBnZXRNb2RpZmllclN0YXRlOiBnZXRFdmVudE1vZGlmaWVyU3RhdGUsXG4gIC8vIExlZ2FjeSBJbnRlcmZhY2VcbiAgY2hhckNvZGU6IGZ1bmN0aW9uIChldmVudCkge1xuICAgIC8vIGBjaGFyQ29kZWAgaXMgdGhlIHJlc3VsdCBvZiBhIEtleVByZXNzIGV2ZW50IGFuZCByZXByZXNlbnRzIHRoZSB2YWx1ZSBvZlxuICAgIC8vIHRoZSBhY3R1YWwgcHJpbnRhYmxlIGNoYXJhY3Rlci5cblxuICAgIC8vIEtleVByZXNzIGlzIGRlcHJlY2F0ZWQsIGJ1dCBpdHMgcmVwbGFjZW1lbnQgaXMgbm90IHlldCBmaW5hbCBhbmQgbm90XG4gICAgLy8gaW1wbGVtZW50ZWQgaW4gYW55IG1ham9yIGJyb3dzZXIuIE9ubHkgS2V5UHJlc3MgaGFzIGNoYXJDb2RlLlxuICAgIGlmIChldmVudC50eXBlID09PSAna2V5cHJlc3MnKSB7XG4gICAgICByZXR1cm4gZ2V0RXZlbnRDaGFyQ29kZShldmVudCk7XG4gICAgfVxuICAgIHJldHVybiAwO1xuICB9LFxuICBrZXlDb2RlOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAvLyBga2V5Q29kZWAgaXMgdGhlIHJlc3VsdCBvZiBhIEtleURvd24vVXAgZXZlbnQgYW5kIHJlcHJlc2VudHMgdGhlIHZhbHVlIG9mXG4gICAgLy8gcGh5c2ljYWwga2V5Ym9hcmQga2V5LlxuXG4gICAgLy8gVGhlIGFjdHVhbCBtZWFuaW5nIG9mIHRoZSB2YWx1ZSBkZXBlbmRzIG9uIHRoZSB1c2Vycycga2V5Ym9hcmQgbGF5b3V0XG4gICAgLy8gd2hpY2ggY2Fubm90IGJlIGRldGVjdGVkLiBBc3N1bWluZyB0aGF0IGl0IGlzIGEgVVMga2V5Ym9hcmQgbGF5b3V0XG4gICAgLy8gcHJvdmlkZXMgYSBzdXJwcmlzaW5nbHkgYWNjdXJhdGUgbWFwcGluZyBmb3IgVVMgYW5kIEV1cm9wZWFuIHVzZXJzLlxuICAgIC8vIER1ZSB0byB0aGlzLCBpdCBpcyBsZWZ0IHRvIHRoZSB1c2VyIHRvIGltcGxlbWVudCBhdCB0aGlzIHRpbWUuXG4gICAgaWYgKGV2ZW50LnR5cGUgPT09ICdrZXlkb3duJyB8fCBldmVudC50eXBlID09PSAna2V5dXAnKSB7XG4gICAgICByZXR1cm4gZXZlbnQua2V5Q29kZTtcbiAgICB9XG4gICAgcmV0dXJuIDA7XG4gIH0sXG4gIHdoaWNoOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAvLyBgd2hpY2hgIGlzIGFuIGFsaWFzIGZvciBlaXRoZXIgYGtleUNvZGVgIG9yIGBjaGFyQ29kZWAgZGVwZW5kaW5nIG9uIHRoZVxuICAgIC8vIHR5cGUgb2YgdGhlIGV2ZW50LlxuICAgIGlmIChldmVudC50eXBlID09PSAna2V5cHJlc3MnKSB7XG4gICAgICByZXR1cm4gZ2V0RXZlbnRDaGFyQ29kZShldmVudCk7XG4gICAgfVxuICAgIGlmIChldmVudC50eXBlID09PSAna2V5ZG93bicgfHwgZXZlbnQudHlwZSA9PT0gJ2tleXVwJykge1xuICAgICAgcmV0dXJuIGV2ZW50LmtleUNvZGU7XG4gICAgfVxuICAgIHJldHVybiAwO1xuICB9XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7b2JqZWN0fSBkaXNwYXRjaENvbmZpZyBDb25maWd1cmF0aW9uIHVzZWQgdG8gZGlzcGF0Y2ggdGhpcyBldmVudC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBkaXNwYXRjaE1hcmtlciBNYXJrZXIgaWRlbnRpZnlpbmcgdGhlIGV2ZW50IHRhcmdldC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAqIEBleHRlbmRzIHtTeW50aGV0aWNVSUV2ZW50fVxuICovXG5mdW5jdGlvbiBTeW50aGV0aWNLZXlib2FyZEV2ZW50KGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KSB7XG4gIFN5bnRoZXRpY1VJRXZlbnQuY2FsbCh0aGlzLCBkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG59XG5cblN5bnRoZXRpY1VJRXZlbnQuYXVnbWVudENsYXNzKFN5bnRoZXRpY0tleWJvYXJkRXZlbnQsIEtleWJvYXJkRXZlbnRJbnRlcmZhY2UpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFN5bnRoZXRpY0tleWJvYXJkRXZlbnQ7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0L2xpYi9TeW50aGV0aWNLZXlib2FyZEV2ZW50LmpzXG4vLyBtb2R1bGUgaWQgPSAxMzVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGdldEV2ZW50Q2hhckNvZGVcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIGBjaGFyQ29kZWAgcmVwcmVzZW50cyB0aGUgYWN0dWFsIFwiY2hhcmFjdGVyIGNvZGVcIiBhbmQgaXMgc2FmZSB0byB1c2Ugd2l0aFxuICogYFN0cmluZy5mcm9tQ2hhckNvZGVgLiBBcyBzdWNoLCBvbmx5IGtleXMgdGhhdCBjb3JyZXNwb25kIHRvIHByaW50YWJsZVxuICogY2hhcmFjdGVycyBwcm9kdWNlIGEgdmFsaWQgYGNoYXJDb2RlYCwgdGhlIG9ubHkgZXhjZXB0aW9uIHRvIHRoaXMgaXMgRW50ZXIuXG4gKiBUaGUgVGFiLWtleSBpcyBjb25zaWRlcmVkIG5vbi1wcmludGFibGUgYW5kIGRvZXMgbm90IGhhdmUgYSBgY2hhckNvZGVgLFxuICogcHJlc3VtYWJseSBiZWNhdXNlIGl0IGRvZXMgbm90IHByb2R1Y2UgYSB0YWItY2hhcmFjdGVyIGluIGJyb3dzZXJzLlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge251bWJlcn0gTm9ybWFsaXplZCBgY2hhckNvZGVgIHByb3BlcnR5LlxuICovXG5mdW5jdGlvbiBnZXRFdmVudENoYXJDb2RlKG5hdGl2ZUV2ZW50KSB7XG4gIHZhciBjaGFyQ29kZTtcbiAgdmFyIGtleUNvZGUgPSBuYXRpdmVFdmVudC5rZXlDb2RlO1xuXG4gIGlmICgnY2hhckNvZGUnIGluIG5hdGl2ZUV2ZW50KSB7XG4gICAgY2hhckNvZGUgPSBuYXRpdmVFdmVudC5jaGFyQ29kZTtcblxuICAgIC8vIEZGIGRvZXMgbm90IHNldCBgY2hhckNvZGVgIGZvciB0aGUgRW50ZXIta2V5LCBjaGVjayBhZ2FpbnN0IGBrZXlDb2RlYC5cbiAgICBpZiAoY2hhckNvZGUgPT09IDAgJiYga2V5Q29kZSA9PT0gMTMpIHtcbiAgICAgIGNoYXJDb2RlID0gMTM7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIElFOCBkb2VzIG5vdCBpbXBsZW1lbnQgYGNoYXJDb2RlYCwgYnV0IGBrZXlDb2RlYCBoYXMgdGhlIGNvcnJlY3QgdmFsdWUuXG4gICAgY2hhckNvZGUgPSBrZXlDb2RlO1xuICB9XG5cbiAgLy8gU29tZSBub24tcHJpbnRhYmxlIGtleXMgYXJlIHJlcG9ydGVkIGluIGBjaGFyQ29kZWAvYGtleUNvZGVgLCBkaXNjYXJkIHRoZW0uXG4gIC8vIE11c3Qgbm90IGRpc2NhcmQgdGhlIChub24tKXByaW50YWJsZSBFbnRlci1rZXkuXG4gIGlmIChjaGFyQ29kZSA+PSAzMiB8fCBjaGFyQ29kZSA9PT0gMTMpIHtcbiAgICByZXR1cm4gY2hhckNvZGU7XG4gIH1cblxuICByZXR1cm4gMDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRFdmVudENoYXJDb2RlO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvZ2V0RXZlbnRDaGFyQ29kZS5qc1xuLy8gbW9kdWxlIGlkID0gMTM2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBnZXRFdmVudEtleVxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBnZXRFdmVudENoYXJDb2RlID0gcmVxdWlyZSgnLi9nZXRFdmVudENoYXJDb2RlJyk7XG5cbi8qKlxuICogTm9ybWFsaXphdGlvbiBvZiBkZXByZWNhdGVkIEhUTUw1IGBrZXlgIHZhbHVlc1xuICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvS2V5Ym9hcmRFdmVudCNLZXlfbmFtZXNcbiAqL1xudmFyIG5vcm1hbGl6ZUtleSA9IHtcbiAgJ0VzYyc6ICdFc2NhcGUnLFxuICAnU3BhY2ViYXInOiAnICcsXG4gICdMZWZ0JzogJ0Fycm93TGVmdCcsXG4gICdVcCc6ICdBcnJvd1VwJyxcbiAgJ1JpZ2h0JzogJ0Fycm93UmlnaHQnLFxuICAnRG93bic6ICdBcnJvd0Rvd24nLFxuICAnRGVsJzogJ0RlbGV0ZScsXG4gICdXaW4nOiAnT1MnLFxuICAnTWVudSc6ICdDb250ZXh0TWVudScsXG4gICdBcHBzJzogJ0NvbnRleHRNZW51JyxcbiAgJ1Njcm9sbCc6ICdTY3JvbGxMb2NrJyxcbiAgJ01velByaW50YWJsZUtleSc6ICdVbmlkZW50aWZpZWQnXG59O1xuXG4vKipcbiAqIFRyYW5zbGF0aW9uIGZyb20gbGVnYWN5IGBrZXlDb2RlYCB0byBIVE1MNSBga2V5YFxuICogT25seSBzcGVjaWFsIGtleXMgc3VwcG9ydGVkLCBhbGwgb3RoZXJzIGRlcGVuZCBvbiBrZXlib2FyZCBsYXlvdXQgb3IgYnJvd3NlclxuICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvS2V5Ym9hcmRFdmVudCNLZXlfbmFtZXNcbiAqL1xudmFyIHRyYW5zbGF0ZVRvS2V5ID0ge1xuICA4OiAnQmFja3NwYWNlJyxcbiAgOTogJ1RhYicsXG4gIDEyOiAnQ2xlYXInLFxuICAxMzogJ0VudGVyJyxcbiAgMTY6ICdTaGlmdCcsXG4gIDE3OiAnQ29udHJvbCcsXG4gIDE4OiAnQWx0JyxcbiAgMTk6ICdQYXVzZScsXG4gIDIwOiAnQ2Fwc0xvY2snLFxuICAyNzogJ0VzY2FwZScsXG4gIDMyOiAnICcsXG4gIDMzOiAnUGFnZVVwJyxcbiAgMzQ6ICdQYWdlRG93bicsXG4gIDM1OiAnRW5kJyxcbiAgMzY6ICdIb21lJyxcbiAgMzc6ICdBcnJvd0xlZnQnLFxuICAzODogJ0Fycm93VXAnLFxuICAzOTogJ0Fycm93UmlnaHQnLFxuICA0MDogJ0Fycm93RG93bicsXG4gIDQ1OiAnSW5zZXJ0JyxcbiAgNDY6ICdEZWxldGUnLFxuICAxMTI6ICdGMScsIDExMzogJ0YyJywgMTE0OiAnRjMnLCAxMTU6ICdGNCcsIDExNjogJ0Y1JywgMTE3OiAnRjYnLFxuICAxMTg6ICdGNycsIDExOTogJ0Y4JywgMTIwOiAnRjknLCAxMjE6ICdGMTAnLCAxMjI6ICdGMTEnLCAxMjM6ICdGMTInLFxuICAxNDQ6ICdOdW1Mb2NrJyxcbiAgMTQ1OiAnU2Nyb2xsTG9jaycsXG4gIDIyNDogJ01ldGEnXG59O1xuXG4vKipcbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge3N0cmluZ30gTm9ybWFsaXplZCBga2V5YCBwcm9wZXJ0eS5cbiAqL1xuZnVuY3Rpb24gZ2V0RXZlbnRLZXkobmF0aXZlRXZlbnQpIHtcbiAgaWYgKG5hdGl2ZUV2ZW50LmtleSkge1xuICAgIC8vIE5vcm1hbGl6ZSBpbmNvbnNpc3RlbnQgdmFsdWVzIHJlcG9ydGVkIGJ5IGJyb3dzZXJzIGR1ZSB0b1xuICAgIC8vIGltcGxlbWVudGF0aW9ucyBvZiBhIHdvcmtpbmcgZHJhZnQgc3BlY2lmaWNhdGlvbi5cblxuICAgIC8vIEZpcmVGb3ggaW1wbGVtZW50cyBga2V5YCBidXQgcmV0dXJucyBgTW96UHJpbnRhYmxlS2V5YCBmb3IgYWxsXG4gICAgLy8gcHJpbnRhYmxlIGNoYXJhY3RlcnMgKG5vcm1hbGl6ZWQgdG8gYFVuaWRlbnRpZmllZGApLCBpZ25vcmUgaXQuXG4gICAgdmFyIGtleSA9IG5vcm1hbGl6ZUtleVtuYXRpdmVFdmVudC5rZXldIHx8IG5hdGl2ZUV2ZW50LmtleTtcbiAgICBpZiAoa2V5ICE9PSAnVW5pZGVudGlmaWVkJykge1xuICAgICAgcmV0dXJuIGtleTtcbiAgICB9XG4gIH1cblxuICAvLyBCcm93c2VyIGRvZXMgbm90IGltcGxlbWVudCBga2V5YCwgcG9seWZpbGwgYXMgbXVjaCBvZiBpdCBhcyB3ZSBjYW4uXG4gIGlmIChuYXRpdmVFdmVudC50eXBlID09PSAna2V5cHJlc3MnKSB7XG4gICAgdmFyIGNoYXJDb2RlID0gZ2V0RXZlbnRDaGFyQ29kZShuYXRpdmVFdmVudCk7XG5cbiAgICAvLyBUaGUgZW50ZXIta2V5IGlzIHRlY2huaWNhbGx5IGJvdGggcHJpbnRhYmxlIGFuZCBub24tcHJpbnRhYmxlIGFuZCBjYW5cbiAgICAvLyB0aHVzIGJlIGNhcHR1cmVkIGJ5IGBrZXlwcmVzc2AsIG5vIG90aGVyIG5vbi1wcmludGFibGUga2V5IHNob3VsZC5cbiAgICByZXR1cm4gY2hhckNvZGUgPT09IDEzID8gJ0VudGVyJyA6IFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpO1xuICB9XG4gIGlmIChuYXRpdmVFdmVudC50eXBlID09PSAna2V5ZG93bicgfHwgbmF0aXZlRXZlbnQudHlwZSA9PT0gJ2tleXVwJykge1xuICAgIC8vIFdoaWxlIHVzZXIga2V5Ym9hcmQgbGF5b3V0IGRldGVybWluZXMgdGhlIGFjdHVhbCBtZWFuaW5nIG9mIGVhY2hcbiAgICAvLyBga2V5Q29kZWAgdmFsdWUsIGFsbW9zdCBhbGwgZnVuY3Rpb24ga2V5cyBoYXZlIGEgdW5pdmVyc2FsIHZhbHVlLlxuICAgIHJldHVybiB0cmFuc2xhdGVUb0tleVtuYXRpdmVFdmVudC5rZXlDb2RlXSB8fCAnVW5pZGVudGlmaWVkJztcbiAgfVxuICByZXR1cm4gJyc7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0RXZlbnRLZXk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0L2xpYi9nZXRFdmVudEtleS5qc1xuLy8gbW9kdWxlIGlkID0gMTM3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBTeW50aGV0aWNEcmFnRXZlbnRcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgU3ludGhldGljTW91c2VFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljTW91c2VFdmVudCcpO1xuXG4vKipcbiAqIEBpbnRlcmZhY2UgRHJhZ0V2ZW50XG4gKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL0RPTS1MZXZlbC0zLUV2ZW50cy9cbiAqL1xudmFyIERyYWdFdmVudEludGVyZmFjZSA9IHtcbiAgZGF0YVRyYW5zZmVyOiBudWxsXG59O1xuXG4vKipcbiAqIEBwYXJhbSB7b2JqZWN0fSBkaXNwYXRjaENvbmZpZyBDb25maWd1cmF0aW9uIHVzZWQgdG8gZGlzcGF0Y2ggdGhpcyBldmVudC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBkaXNwYXRjaE1hcmtlciBNYXJrZXIgaWRlbnRpZnlpbmcgdGhlIGV2ZW50IHRhcmdldC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAqIEBleHRlbmRzIHtTeW50aGV0aWNVSUV2ZW50fVxuICovXG5mdW5jdGlvbiBTeW50aGV0aWNEcmFnRXZlbnQoZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpIHtcbiAgU3ludGhldGljTW91c2VFdmVudC5jYWxsKHRoaXMsIGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcbn1cblxuU3ludGhldGljTW91c2VFdmVudC5hdWdtZW50Q2xhc3MoU3ludGhldGljRHJhZ0V2ZW50LCBEcmFnRXZlbnRJbnRlcmZhY2UpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFN5bnRoZXRpY0RyYWdFdmVudDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QvbGliL1N5bnRoZXRpY0RyYWdFdmVudC5qc1xuLy8gbW9kdWxlIGlkID0gMTM4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBTeW50aGV0aWNUb3VjaEV2ZW50XG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFN5bnRoZXRpY1VJRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY1VJRXZlbnQnKTtcblxudmFyIGdldEV2ZW50TW9kaWZpZXJTdGF0ZSA9IHJlcXVpcmUoJy4vZ2V0RXZlbnRNb2RpZmllclN0YXRlJyk7XG5cbi8qKlxuICogQGludGVyZmFjZSBUb3VjaEV2ZW50XG4gKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL3RvdWNoLWV2ZW50cy9cbiAqL1xudmFyIFRvdWNoRXZlbnRJbnRlcmZhY2UgPSB7XG4gIHRvdWNoZXM6IG51bGwsXG4gIHRhcmdldFRvdWNoZXM6IG51bGwsXG4gIGNoYW5nZWRUb3VjaGVzOiBudWxsLFxuICBhbHRLZXk6IG51bGwsXG4gIG1ldGFLZXk6IG51bGwsXG4gIGN0cmxLZXk6IG51bGwsXG4gIHNoaWZ0S2V5OiBudWxsLFxuICBnZXRNb2RpZmllclN0YXRlOiBnZXRFdmVudE1vZGlmaWVyU3RhdGVcbn07XG5cbi8qKlxuICogQHBhcmFtIHtvYmplY3R9IGRpc3BhdGNoQ29uZmlnIENvbmZpZ3VyYXRpb24gdXNlZCB0byBkaXNwYXRjaCB0aGlzIGV2ZW50LlxuICogQHBhcmFtIHtzdHJpbmd9IGRpc3BhdGNoTWFya2VyIE1hcmtlciBpZGVudGlmeWluZyB0aGUgZXZlbnQgdGFyZ2V0LlxuICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuICogQGV4dGVuZHMge1N5bnRoZXRpY1VJRXZlbnR9XG4gKi9cbmZ1bmN0aW9uIFN5bnRoZXRpY1RvdWNoRXZlbnQoZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpIHtcbiAgU3ludGhldGljVUlFdmVudC5jYWxsKHRoaXMsIGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcbn1cblxuU3ludGhldGljVUlFdmVudC5hdWdtZW50Q2xhc3MoU3ludGhldGljVG91Y2hFdmVudCwgVG91Y2hFdmVudEludGVyZmFjZSk7XG5cbm1vZHVsZS5leHBvcnRzID0gU3ludGhldGljVG91Y2hFdmVudDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QvbGliL1N5bnRoZXRpY1RvdWNoRXZlbnQuanNcbi8vIG1vZHVsZSBpZCA9IDEzOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgU3ludGhldGljV2hlZWxFdmVudFxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBTeW50aGV0aWNNb3VzZUV2ZW50ID0gcmVxdWlyZSgnLi9TeW50aGV0aWNNb3VzZUV2ZW50Jyk7XG5cbi8qKlxuICogQGludGVyZmFjZSBXaGVlbEV2ZW50XG4gKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL0RPTS1MZXZlbC0zLUV2ZW50cy9cbiAqL1xudmFyIFdoZWVsRXZlbnRJbnRlcmZhY2UgPSB7XG4gIGRlbHRhWDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgcmV0dXJuICdkZWx0YVgnIGluIGV2ZW50ID8gZXZlbnQuZGVsdGFYIDpcbiAgICAvLyBGYWxsYmFjayB0byBgd2hlZWxEZWx0YVhgIGZvciBXZWJraXQgYW5kIG5vcm1hbGl6ZSAocmlnaHQgaXMgcG9zaXRpdmUpLlxuICAgICd3aGVlbERlbHRhWCcgaW4gZXZlbnQgPyAtZXZlbnQud2hlZWxEZWx0YVggOiAwO1xuICB9LFxuICBkZWx0YVk6IGZ1bmN0aW9uIChldmVudCkge1xuICAgIHJldHVybiAnZGVsdGFZJyBpbiBldmVudCA/IGV2ZW50LmRlbHRhWSA6XG4gICAgLy8gRmFsbGJhY2sgdG8gYHdoZWVsRGVsdGFZYCBmb3IgV2Via2l0IGFuZCBub3JtYWxpemUgKGRvd24gaXMgcG9zaXRpdmUpLlxuICAgICd3aGVlbERlbHRhWScgaW4gZXZlbnQgPyAtZXZlbnQud2hlZWxEZWx0YVkgOlxuICAgIC8vIEZhbGxiYWNrIHRvIGB3aGVlbERlbHRhYCBmb3IgSUU8OSBhbmQgbm9ybWFsaXplIChkb3duIGlzIHBvc2l0aXZlKS5cbiAgICAnd2hlZWxEZWx0YScgaW4gZXZlbnQgPyAtZXZlbnQud2hlZWxEZWx0YSA6IDA7XG4gIH0sXG4gIGRlbHRhWjogbnVsbCxcblxuICAvLyBCcm93c2VycyB3aXRob3V0IFwiZGVsdGFNb2RlXCIgaXMgcmVwb3J0aW5nIGluIHJhdyB3aGVlbCBkZWx0YSB3aGVyZSBvbmVcbiAgLy8gbm90Y2ggb24gdGhlIHNjcm9sbCBpcyBhbHdheXMgKy8tIDEyMCwgcm91Z2hseSBlcXVpdmFsZW50IHRvIHBpeGVscy5cbiAgLy8gQSBnb29kIGFwcHJveGltYXRpb24gb2YgRE9NX0RFTFRBX0xJTkUgKDEpIGlzIDUlIG9mIHZpZXdwb3J0IHNpemUgb3JcbiAgLy8gfjQwIHBpeGVscywgZm9yIERPTV9ERUxUQV9TQ1JFRU4gKDIpIGl0IGlzIDg3LjUlIG9mIHZpZXdwb3J0IHNpemUuXG4gIGRlbHRhTW9kZTogbnVsbFxufTtcblxuLyoqXG4gKiBAcGFyYW0ge29iamVjdH0gZGlzcGF0Y2hDb25maWcgQ29uZmlndXJhdGlvbiB1c2VkIHRvIGRpc3BhdGNoIHRoaXMgZXZlbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gZGlzcGF0Y2hNYXJrZXIgTWFya2VyIGlkZW50aWZ5aW5nIHRoZSBldmVudCB0YXJnZXQuXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gKiBAZXh0ZW5kcyB7U3ludGhldGljTW91c2VFdmVudH1cbiAqL1xuZnVuY3Rpb24gU3ludGhldGljV2hlZWxFdmVudChkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICBTeW50aGV0aWNNb3VzZUV2ZW50LmNhbGwodGhpcywgZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xufVxuXG5TeW50aGV0aWNNb3VzZUV2ZW50LmF1Z21lbnRDbGFzcyhTeW50aGV0aWNXaGVlbEV2ZW50LCBXaGVlbEV2ZW50SW50ZXJmYWNlKTtcblxubW9kdWxlLmV4cG9ydHMgPSBTeW50aGV0aWNXaGVlbEV2ZW50O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvU3ludGhldGljV2hlZWxFdmVudC5qc1xuLy8gbW9kdWxlIGlkID0gMTQwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBTVkdET01Qcm9wZXJ0eUNvbmZpZ1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIERPTVByb3BlcnR5ID0gcmVxdWlyZSgnLi9ET01Qcm9wZXJ0eScpO1xuXG52YXIgTVVTVF9VU0VfQVRUUklCVVRFID0gRE9NUHJvcGVydHkuaW5qZWN0aW9uLk1VU1RfVVNFX0FUVFJJQlVURTtcblxudmFyIE5TID0ge1xuICB4bGluazogJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnLFxuICB4bWw6ICdodHRwOi8vd3d3LnczLm9yZy9YTUwvMTk5OC9uYW1lc3BhY2UnXG59O1xuXG52YXIgU1ZHRE9NUHJvcGVydHlDb25maWcgPSB7XG4gIFByb3BlcnRpZXM6IHtcbiAgICBjbGlwUGF0aDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGN4OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgY3k6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBkOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgZHg6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBkeTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGZpbGw6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBmaWxsT3BhY2l0eTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGZvbnRGYW1pbHk6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBmb250U2l6ZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGZ4OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgZnk6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBncmFkaWVudFRyYW5zZm9ybTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGdyYWRpZW50VW5pdHM6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBtYXJrZXJFbmQ6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBtYXJrZXJNaWQ6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBtYXJrZXJTdGFydDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIG9mZnNldDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIG9wYWNpdHk6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBwYXR0ZXJuQ29udGVudFVuaXRzOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgcGF0dGVyblVuaXRzOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgcG9pbnRzOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgcHJlc2VydmVBc3BlY3RSYXRpbzogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHI6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICByeDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHJ5OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgc3ByZWFkTWV0aG9kOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgc3RvcENvbG9yOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgc3RvcE9wYWNpdHk6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBzdHJva2U6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBzdHJva2VEYXNoYXJyYXk6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBzdHJva2VMaW5lY2FwOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgc3Ryb2tlT3BhY2l0eTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHN0cm9rZVdpZHRoOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgdGV4dEFuY2hvcjogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHRyYW5zZm9ybTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHZlcnNpb246IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB2aWV3Qm94OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgeDE6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB4MjogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHg6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB4bGlua0FjdHVhdGU6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB4bGlua0FyY3JvbGU6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB4bGlua0hyZWY6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB4bGlua1JvbGU6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB4bGlua1Nob3c6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB4bGlua1RpdGxlOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgeGxpbmtUeXBlOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgeG1sQmFzZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHhtbExhbmc6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB4bWxTcGFjZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHkxOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgeTI6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB5OiBNVVNUX1VTRV9BVFRSSUJVVEVcbiAgfSxcbiAgRE9NQXR0cmlidXRlTmFtZXNwYWNlczoge1xuICAgIHhsaW5rQWN0dWF0ZTogTlMueGxpbmssXG4gICAgeGxpbmtBcmNyb2xlOiBOUy54bGluayxcbiAgICB4bGlua0hyZWY6IE5TLnhsaW5rLFxuICAgIHhsaW5rUm9sZTogTlMueGxpbmssXG4gICAgeGxpbmtTaG93OiBOUy54bGluayxcbiAgICB4bGlua1RpdGxlOiBOUy54bGluayxcbiAgICB4bGlua1R5cGU6IE5TLnhsaW5rLFxuICAgIHhtbEJhc2U6IE5TLnhtbCxcbiAgICB4bWxMYW5nOiBOUy54bWwsXG4gICAgeG1sU3BhY2U6IE5TLnhtbFxuICB9LFxuICBET01BdHRyaWJ1dGVOYW1lczoge1xuICAgIGNsaXBQYXRoOiAnY2xpcC1wYXRoJyxcbiAgICBmaWxsT3BhY2l0eTogJ2ZpbGwtb3BhY2l0eScsXG4gICAgZm9udEZhbWlseTogJ2ZvbnQtZmFtaWx5JyxcbiAgICBmb250U2l6ZTogJ2ZvbnQtc2l6ZScsXG4gICAgZ3JhZGllbnRUcmFuc2Zvcm06ICdncmFkaWVudFRyYW5zZm9ybScsXG4gICAgZ3JhZGllbnRVbml0czogJ2dyYWRpZW50VW5pdHMnLFxuICAgIG1hcmtlckVuZDogJ21hcmtlci1lbmQnLFxuICAgIG1hcmtlck1pZDogJ21hcmtlci1taWQnLFxuICAgIG1hcmtlclN0YXJ0OiAnbWFya2VyLXN0YXJ0JyxcbiAgICBwYXR0ZXJuQ29udGVudFVuaXRzOiAncGF0dGVybkNvbnRlbnRVbml0cycsXG4gICAgcGF0dGVyblVuaXRzOiAncGF0dGVyblVuaXRzJyxcbiAgICBwcmVzZXJ2ZUFzcGVjdFJhdGlvOiAncHJlc2VydmVBc3BlY3RSYXRpbycsXG4gICAgc3ByZWFkTWV0aG9kOiAnc3ByZWFkTWV0aG9kJyxcbiAgICBzdG9wQ29sb3I6ICdzdG9wLWNvbG9yJyxcbiAgICBzdG9wT3BhY2l0eTogJ3N0b3Atb3BhY2l0eScsXG4gICAgc3Ryb2tlRGFzaGFycmF5OiAnc3Ryb2tlLWRhc2hhcnJheScsXG4gICAgc3Ryb2tlTGluZWNhcDogJ3N0cm9rZS1saW5lY2FwJyxcbiAgICBzdHJva2VPcGFjaXR5OiAnc3Ryb2tlLW9wYWNpdHknLFxuICAgIHN0cm9rZVdpZHRoOiAnc3Ryb2tlLXdpZHRoJyxcbiAgICB0ZXh0QW5jaG9yOiAndGV4dC1hbmNob3InLFxuICAgIHZpZXdCb3g6ICd2aWV3Qm94JyxcbiAgICB4bGlua0FjdHVhdGU6ICd4bGluazphY3R1YXRlJyxcbiAgICB4bGlua0FyY3JvbGU6ICd4bGluazphcmNyb2xlJyxcbiAgICB4bGlua0hyZWY6ICd4bGluazpocmVmJyxcbiAgICB4bGlua1JvbGU6ICd4bGluazpyb2xlJyxcbiAgICB4bGlua1Nob3c6ICd4bGluazpzaG93JyxcbiAgICB4bGlua1RpdGxlOiAneGxpbms6dGl0bGUnLFxuICAgIHhsaW5rVHlwZTogJ3hsaW5rOnR5cGUnLFxuICAgIHhtbEJhc2U6ICd4bWw6YmFzZScsXG4gICAgeG1sTGFuZzogJ3htbDpsYW5nJyxcbiAgICB4bWxTcGFjZTogJ3htbDpzcGFjZSdcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBTVkdET01Qcm9wZXJ0eUNvbmZpZztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QvbGliL1NWR0RPTVByb3BlcnR5Q29uZmlnLmpzXG4vLyBtb2R1bGUgaWQgPSAxNDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RGVmYXVsdFBlcmZcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRE9NUHJvcGVydHkgPSByZXF1aXJlKCcuL0RPTVByb3BlcnR5Jyk7XG52YXIgUmVhY3REZWZhdWx0UGVyZkFuYWx5c2lzID0gcmVxdWlyZSgnLi9SZWFjdERlZmF1bHRQZXJmQW5hbHlzaXMnKTtcbnZhciBSZWFjdE1vdW50ID0gcmVxdWlyZSgnLi9SZWFjdE1vdW50Jyk7XG52YXIgUmVhY3RQZXJmID0gcmVxdWlyZSgnLi9SZWFjdFBlcmYnKTtcblxudmFyIHBlcmZvcm1hbmNlTm93ID0gcmVxdWlyZSgnZmJqcy9saWIvcGVyZm9ybWFuY2VOb3cnKTtcblxuZnVuY3Rpb24gcm91bmRGbG9hdCh2YWwpIHtcbiAgcmV0dXJuIE1hdGguZmxvb3IodmFsICogMTAwKSAvIDEwMDtcbn1cblxuZnVuY3Rpb24gYWRkVmFsdWUob2JqLCBrZXksIHZhbCkge1xuICBvYmpba2V5XSA9IChvYmpba2V5XSB8fCAwKSArIHZhbDtcbn1cblxudmFyIFJlYWN0RGVmYXVsdFBlcmYgPSB7XG4gIF9hbGxNZWFzdXJlbWVudHM6IFtdLCAvLyBsYXN0IGl0ZW0gaW4gdGhlIGxpc3QgaXMgdGhlIGN1cnJlbnQgb25lXG4gIF9tb3VudFN0YWNrOiBbMF0sXG4gIF9pbmplY3RlZDogZmFsc2UsXG5cbiAgc3RhcnQ6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIVJlYWN0RGVmYXVsdFBlcmYuX2luamVjdGVkKSB7XG4gICAgICBSZWFjdFBlcmYuaW5qZWN0aW9uLmluamVjdE1lYXN1cmUoUmVhY3REZWZhdWx0UGVyZi5tZWFzdXJlKTtcbiAgICB9XG5cbiAgICBSZWFjdERlZmF1bHRQZXJmLl9hbGxNZWFzdXJlbWVudHMubGVuZ3RoID0gMDtcbiAgICBSZWFjdFBlcmYuZW5hYmxlTWVhc3VyZSA9IHRydWU7XG4gIH0sXG5cbiAgc3RvcDogZnVuY3Rpb24gKCkge1xuICAgIFJlYWN0UGVyZi5lbmFibGVNZWFzdXJlID0gZmFsc2U7XG4gIH0sXG5cbiAgZ2V0TGFzdE1lYXN1cmVtZW50czogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBSZWFjdERlZmF1bHRQZXJmLl9hbGxNZWFzdXJlbWVudHM7XG4gIH0sXG5cbiAgcHJpbnRFeGNsdXNpdmU6IGZ1bmN0aW9uIChtZWFzdXJlbWVudHMpIHtcbiAgICBtZWFzdXJlbWVudHMgPSBtZWFzdXJlbWVudHMgfHwgUmVhY3REZWZhdWx0UGVyZi5fYWxsTWVhc3VyZW1lbnRzO1xuICAgIHZhciBzdW1tYXJ5ID0gUmVhY3REZWZhdWx0UGVyZkFuYWx5c2lzLmdldEV4Y2x1c2l2ZVN1bW1hcnkobWVhc3VyZW1lbnRzKTtcbiAgICBjb25zb2xlLnRhYmxlKHN1bW1hcnkubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAnQ29tcG9uZW50IGNsYXNzIG5hbWUnOiBpdGVtLmNvbXBvbmVudE5hbWUsXG4gICAgICAgICdUb3RhbCBpbmNsdXNpdmUgdGltZSAobXMpJzogcm91bmRGbG9hdChpdGVtLmluY2x1c2l2ZSksXG4gICAgICAgICdFeGNsdXNpdmUgbW91bnQgdGltZSAobXMpJzogcm91bmRGbG9hdChpdGVtLmV4Y2x1c2l2ZSksXG4gICAgICAgICdFeGNsdXNpdmUgcmVuZGVyIHRpbWUgKG1zKSc6IHJvdW5kRmxvYXQoaXRlbS5yZW5kZXIpLFxuICAgICAgICAnTW91bnQgdGltZSBwZXIgaW5zdGFuY2UgKG1zKSc6IHJvdW5kRmxvYXQoaXRlbS5leGNsdXNpdmUgLyBpdGVtLmNvdW50KSxcbiAgICAgICAgJ1JlbmRlciB0aW1lIHBlciBpbnN0YW5jZSAobXMpJzogcm91bmRGbG9hdChpdGVtLnJlbmRlciAvIGl0ZW0uY291bnQpLFxuICAgICAgICAnSW5zdGFuY2VzJzogaXRlbS5jb3VudFxuICAgICAgfTtcbiAgICB9KSk7XG4gICAgLy8gVE9ETzogUmVhY3REZWZhdWx0UGVyZkFuYWx5c2lzLmdldFRvdGFsVGltZSgpIGRvZXMgbm90IHJldHVybiB0aGUgY29ycmVjdFxuICAgIC8vIG51bWJlci5cbiAgfSxcblxuICBwcmludEluY2x1c2l2ZTogZnVuY3Rpb24gKG1lYXN1cmVtZW50cykge1xuICAgIG1lYXN1cmVtZW50cyA9IG1lYXN1cmVtZW50cyB8fCBSZWFjdERlZmF1bHRQZXJmLl9hbGxNZWFzdXJlbWVudHM7XG4gICAgdmFyIHN1bW1hcnkgPSBSZWFjdERlZmF1bHRQZXJmQW5hbHlzaXMuZ2V0SW5jbHVzaXZlU3VtbWFyeShtZWFzdXJlbWVudHMpO1xuICAgIGNvbnNvbGUudGFibGUoc3VtbWFyeS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgICdPd25lciA+IGNvbXBvbmVudCc6IGl0ZW0uY29tcG9uZW50TmFtZSxcbiAgICAgICAgJ0luY2x1c2l2ZSB0aW1lIChtcyknOiByb3VuZEZsb2F0KGl0ZW0udGltZSksXG4gICAgICAgICdJbnN0YW5jZXMnOiBpdGVtLmNvdW50XG4gICAgICB9O1xuICAgIH0pKTtcbiAgICBjb25zb2xlLmxvZygnVG90YWwgdGltZTonLCBSZWFjdERlZmF1bHRQZXJmQW5hbHlzaXMuZ2V0VG90YWxUaW1lKG1lYXN1cmVtZW50cykudG9GaXhlZCgyKSArICcgbXMnKTtcbiAgfSxcblxuICBnZXRNZWFzdXJlbWVudHNTdW1tYXJ5TWFwOiBmdW5jdGlvbiAobWVhc3VyZW1lbnRzKSB7XG4gICAgdmFyIHN1bW1hcnkgPSBSZWFjdERlZmF1bHRQZXJmQW5hbHlzaXMuZ2V0SW5jbHVzaXZlU3VtbWFyeShtZWFzdXJlbWVudHMsIHRydWUpO1xuICAgIHJldHVybiBzdW1tYXJ5Lm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgJ093bmVyID4gY29tcG9uZW50JzogaXRlbS5jb21wb25lbnROYW1lLFxuICAgICAgICAnV2FzdGVkIHRpbWUgKG1zKSc6IGl0ZW0udGltZSxcbiAgICAgICAgJ0luc3RhbmNlcyc6IGl0ZW0uY291bnRcbiAgICAgIH07XG4gICAgfSk7XG4gIH0sXG5cbiAgcHJpbnRXYXN0ZWQ6IGZ1bmN0aW9uIChtZWFzdXJlbWVudHMpIHtcbiAgICBtZWFzdXJlbWVudHMgPSBtZWFzdXJlbWVudHMgfHwgUmVhY3REZWZhdWx0UGVyZi5fYWxsTWVhc3VyZW1lbnRzO1xuICAgIGNvbnNvbGUudGFibGUoUmVhY3REZWZhdWx0UGVyZi5nZXRNZWFzdXJlbWVudHNTdW1tYXJ5TWFwKG1lYXN1cmVtZW50cykpO1xuICAgIGNvbnNvbGUubG9nKCdUb3RhbCB0aW1lOicsIFJlYWN0RGVmYXVsdFBlcmZBbmFseXNpcy5nZXRUb3RhbFRpbWUobWVhc3VyZW1lbnRzKS50b0ZpeGVkKDIpICsgJyBtcycpO1xuICB9LFxuXG4gIHByaW50RE9NOiBmdW5jdGlvbiAobWVhc3VyZW1lbnRzKSB7XG4gICAgbWVhc3VyZW1lbnRzID0gbWVhc3VyZW1lbnRzIHx8IFJlYWN0RGVmYXVsdFBlcmYuX2FsbE1lYXN1cmVtZW50cztcbiAgICB2YXIgc3VtbWFyeSA9IFJlYWN0RGVmYXVsdFBlcmZBbmFseXNpcy5nZXRET01TdW1tYXJ5KG1lYXN1cmVtZW50cyk7XG4gICAgY29uc29sZS50YWJsZShzdW1tYXJ5Lm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgcmVzdWx0W0RPTVByb3BlcnR5LklEX0FUVFJJQlVURV9OQU1FXSA9IGl0ZW0uaWQ7XG4gICAgICByZXN1bHQudHlwZSA9IGl0ZW0udHlwZTtcbiAgICAgIHJlc3VsdC5hcmdzID0gSlNPTi5zdHJpbmdpZnkoaXRlbS5hcmdzKTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSkpO1xuICAgIGNvbnNvbGUubG9nKCdUb3RhbCB0aW1lOicsIFJlYWN0RGVmYXVsdFBlcmZBbmFseXNpcy5nZXRUb3RhbFRpbWUobWVhc3VyZW1lbnRzKS50b0ZpeGVkKDIpICsgJyBtcycpO1xuICB9LFxuXG4gIF9yZWNvcmRXcml0ZTogZnVuY3Rpb24gKGlkLCBmbk5hbWUsIHRvdGFsVGltZSwgYXJncykge1xuICAgIC8vIFRPRE86IHRvdGFsVGltZSBpc24ndCB0aGF0IHVzZWZ1bCBzaW5jZSBpdCBkb2Vzbid0IGNvdW50IHBhaW50cy9yZWZsb3dzXG4gICAgdmFyIHdyaXRlcyA9IFJlYWN0RGVmYXVsdFBlcmYuX2FsbE1lYXN1cmVtZW50c1tSZWFjdERlZmF1bHRQZXJmLl9hbGxNZWFzdXJlbWVudHMubGVuZ3RoIC0gMV0ud3JpdGVzO1xuICAgIHdyaXRlc1tpZF0gPSB3cml0ZXNbaWRdIHx8IFtdO1xuICAgIHdyaXRlc1tpZF0ucHVzaCh7XG4gICAgICB0eXBlOiBmbk5hbWUsXG4gICAgICB0aW1lOiB0b3RhbFRpbWUsXG4gICAgICBhcmdzOiBhcmdzXG4gICAgfSk7XG4gIH0sXG5cbiAgbWVhc3VyZTogZnVuY3Rpb24gKG1vZHVsZU5hbWUsIGZuTmFtZSwgZnVuYykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgfVxuXG4gICAgICB2YXIgdG90YWxUaW1lO1xuICAgICAgdmFyIHJ2O1xuICAgICAgdmFyIHN0YXJ0O1xuXG4gICAgICBpZiAoZm5OYW1lID09PSAnX3JlbmRlck5ld1Jvb3RDb21wb25lbnQnIHx8IGZuTmFtZSA9PT0gJ2ZsdXNoQmF0Y2hlZFVwZGF0ZXMnKSB7XG4gICAgICAgIC8vIEEgXCJtZWFzdXJlbWVudFwiIGlzIGEgc2V0IG9mIG1ldHJpY3MgcmVjb3JkZWQgZm9yIGVhY2ggZmx1c2guIFdlIHdhbnRcbiAgICAgICAgLy8gdG8gZ3JvdXAgdGhlIG1ldHJpY3MgZm9yIGEgZ2l2ZW4gZmx1c2ggdG9nZXRoZXIgc28gd2UgY2FuIGxvb2sgYXQgdGhlXG4gICAgICAgIC8vIGNvbXBvbmVudHMgdGhhdCByZW5kZXJlZCBhbmQgdGhlIERPTSBvcGVyYXRpb25zIHRoYXQgYWN0dWFsbHlcbiAgICAgICAgLy8gaGFwcGVuZWQgdG8gZGV0ZXJtaW5lIHRoZSBhbW91bnQgb2YgXCJ3YXN0ZWQgd29ya1wiIHBlcmZvcm1lZC5cbiAgICAgICAgUmVhY3REZWZhdWx0UGVyZi5fYWxsTWVhc3VyZW1lbnRzLnB1c2goe1xuICAgICAgICAgIGV4Y2x1c2l2ZToge30sXG4gICAgICAgICAgaW5jbHVzaXZlOiB7fSxcbiAgICAgICAgICByZW5kZXI6IHt9LFxuICAgICAgICAgIGNvdW50czoge30sXG4gICAgICAgICAgd3JpdGVzOiB7fSxcbiAgICAgICAgICBkaXNwbGF5TmFtZXM6IHt9LFxuICAgICAgICAgIHRvdGFsVGltZTogMCxcbiAgICAgICAgICBjcmVhdGVkOiB7fVxuICAgICAgICB9KTtcbiAgICAgICAgc3RhcnQgPSBwZXJmb3JtYW5jZU5vdygpO1xuICAgICAgICBydiA9IGZ1bmMuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgIFJlYWN0RGVmYXVsdFBlcmYuX2FsbE1lYXN1cmVtZW50c1tSZWFjdERlZmF1bHRQZXJmLl9hbGxNZWFzdXJlbWVudHMubGVuZ3RoIC0gMV0udG90YWxUaW1lID0gcGVyZm9ybWFuY2VOb3coKSAtIHN0YXJ0O1xuICAgICAgICByZXR1cm4gcnY7XG4gICAgICB9IGVsc2UgaWYgKGZuTmFtZSA9PT0gJ19tb3VudEltYWdlSW50b05vZGUnIHx8IG1vZHVsZU5hbWUgPT09ICdSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXInIHx8IG1vZHVsZU5hbWUgPT09ICdSZWFjdERPTUlET3BlcmF0aW9ucycgfHwgbW9kdWxlTmFtZSA9PT0gJ0NTU1Byb3BlcnR5T3BlcmF0aW9ucycgfHwgbW9kdWxlTmFtZSA9PT0gJ0RPTUNoaWxkcmVuT3BlcmF0aW9ucycgfHwgbW9kdWxlTmFtZSA9PT0gJ0RPTVByb3BlcnR5T3BlcmF0aW9ucycpIHtcbiAgICAgICAgc3RhcnQgPSBwZXJmb3JtYW5jZU5vdygpO1xuICAgICAgICBydiA9IGZ1bmMuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgIHRvdGFsVGltZSA9IHBlcmZvcm1hbmNlTm93KCkgLSBzdGFydDtcblxuICAgICAgICBpZiAoZm5OYW1lID09PSAnX21vdW50SW1hZ2VJbnRvTm9kZScpIHtcbiAgICAgICAgICB2YXIgbW91bnRJRCA9IFJlYWN0TW91bnQuZ2V0SUQoYXJnc1sxXSk7XG4gICAgICAgICAgUmVhY3REZWZhdWx0UGVyZi5fcmVjb3JkV3JpdGUobW91bnRJRCwgZm5OYW1lLCB0b3RhbFRpbWUsIGFyZ3NbMF0pO1xuICAgICAgICB9IGVsc2UgaWYgKGZuTmFtZSA9PT0gJ2Rhbmdlcm91c2x5UHJvY2Vzc0NoaWxkcmVuVXBkYXRlcycpIHtcbiAgICAgICAgICAvLyBzcGVjaWFsIGZvcm1hdFxuICAgICAgICAgIGFyZ3NbMF0uZm9yRWFjaChmdW5jdGlvbiAodXBkYXRlKSB7XG4gICAgICAgICAgICB2YXIgd3JpdGVBcmdzID0ge307XG4gICAgICAgICAgICBpZiAodXBkYXRlLmZyb21JbmRleCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICB3cml0ZUFyZ3MuZnJvbUluZGV4ID0gdXBkYXRlLmZyb21JbmRleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh1cGRhdGUudG9JbmRleCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICB3cml0ZUFyZ3MudG9JbmRleCA9IHVwZGF0ZS50b0luZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHVwZGF0ZS50ZXh0Q29udGVudCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICB3cml0ZUFyZ3MudGV4dENvbnRlbnQgPSB1cGRhdGUudGV4dENvbnRlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodXBkYXRlLm1hcmt1cEluZGV4ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgIHdyaXRlQXJncy5tYXJrdXAgPSBhcmdzWzFdW3VwZGF0ZS5tYXJrdXBJbmRleF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBSZWFjdERlZmF1bHRQZXJmLl9yZWNvcmRXcml0ZSh1cGRhdGUucGFyZW50SUQsIHVwZGF0ZS50eXBlLCB0b3RhbFRpbWUsIHdyaXRlQXJncyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gYmFzaWMgZm9ybWF0XG4gICAgICAgICAgdmFyIGlkID0gYXJnc1swXTtcbiAgICAgICAgICBpZiAodHlwZW9mIGlkID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgaWQgPSBSZWFjdE1vdW50LmdldElEKGFyZ3NbMF0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBSZWFjdERlZmF1bHRQZXJmLl9yZWNvcmRXcml0ZShpZCwgZm5OYW1lLCB0b3RhbFRpbWUsIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3MsIDEpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcnY7XG4gICAgICB9IGVsc2UgaWYgKG1vZHVsZU5hbWUgPT09ICdSZWFjdENvbXBvc2l0ZUNvbXBvbmVudCcgJiYgKGZuTmFtZSA9PT0gJ21vdW50Q29tcG9uZW50JyB8fCBmbk5hbWUgPT09ICd1cGRhdGVDb21wb25lbnQnIHx8IC8vIFRPRE86IHJlY2VpdmVDb21wb25lbnQoKT9cbiAgICAgIGZuTmFtZSA9PT0gJ19yZW5kZXJWYWxpZGF0ZWRDb21wb25lbnQnKSkge1xuXG4gICAgICAgIGlmICh0aGlzLl9jdXJyZW50RWxlbWVudC50eXBlID09PSBSZWFjdE1vdW50LlRvcExldmVsV3JhcHBlcikge1xuICAgICAgICAgIHJldHVybiBmdW5jLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJvb3ROb2RlSUQgPSBmbk5hbWUgPT09ICdtb3VudENvbXBvbmVudCcgPyBhcmdzWzBdIDogdGhpcy5fcm9vdE5vZGVJRDtcbiAgICAgICAgdmFyIGlzUmVuZGVyID0gZm5OYW1lID09PSAnX3JlbmRlclZhbGlkYXRlZENvbXBvbmVudCc7XG4gICAgICAgIHZhciBpc01vdW50ID0gZm5OYW1lID09PSAnbW91bnRDb21wb25lbnQnO1xuXG4gICAgICAgIHZhciBtb3VudFN0YWNrID0gUmVhY3REZWZhdWx0UGVyZi5fbW91bnRTdGFjaztcbiAgICAgICAgdmFyIGVudHJ5ID0gUmVhY3REZWZhdWx0UGVyZi5fYWxsTWVhc3VyZW1lbnRzW1JlYWN0RGVmYXVsdFBlcmYuX2FsbE1lYXN1cmVtZW50cy5sZW5ndGggLSAxXTtcblxuICAgICAgICBpZiAoaXNSZW5kZXIpIHtcbiAgICAgICAgICBhZGRWYWx1ZShlbnRyeS5jb3VudHMsIHJvb3ROb2RlSUQsIDEpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzTW91bnQpIHtcbiAgICAgICAgICBlbnRyeS5jcmVhdGVkW3Jvb3ROb2RlSURdID0gdHJ1ZTtcbiAgICAgICAgICBtb3VudFN0YWNrLnB1c2goMCk7XG4gICAgICAgIH1cblxuICAgICAgICBzdGFydCA9IHBlcmZvcm1hbmNlTm93KCk7XG4gICAgICAgIHJ2ID0gZnVuYy5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgdG90YWxUaW1lID0gcGVyZm9ybWFuY2VOb3coKSAtIHN0YXJ0O1xuXG4gICAgICAgIGlmIChpc1JlbmRlcikge1xuICAgICAgICAgIGFkZFZhbHVlKGVudHJ5LnJlbmRlciwgcm9vdE5vZGVJRCwgdG90YWxUaW1lKTtcbiAgICAgICAgfSBlbHNlIGlmIChpc01vdW50KSB7XG4gICAgICAgICAgdmFyIHN1Yk1vdW50VGltZSA9IG1vdW50U3RhY2sucG9wKCk7XG4gICAgICAgICAgbW91bnRTdGFja1ttb3VudFN0YWNrLmxlbmd0aCAtIDFdICs9IHRvdGFsVGltZTtcbiAgICAgICAgICBhZGRWYWx1ZShlbnRyeS5leGNsdXNpdmUsIHJvb3ROb2RlSUQsIHRvdGFsVGltZSAtIHN1Yk1vdW50VGltZSk7XG4gICAgICAgICAgYWRkVmFsdWUoZW50cnkuaW5jbHVzaXZlLCByb290Tm9kZUlELCB0b3RhbFRpbWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFkZFZhbHVlKGVudHJ5LmluY2x1c2l2ZSwgcm9vdE5vZGVJRCwgdG90YWxUaW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGVudHJ5LmRpc3BsYXlOYW1lc1tyb290Tm9kZUlEXSA9IHtcbiAgICAgICAgICBjdXJyZW50OiB0aGlzLmdldE5hbWUoKSxcbiAgICAgICAgICBvd25lcjogdGhpcy5fY3VycmVudEVsZW1lbnQuX293bmVyID8gdGhpcy5fY3VycmVudEVsZW1lbnQuX293bmVyLmdldE5hbWUoKSA6ICc8cm9vdD4nXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHJ2O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdERlZmF1bHRQZXJmO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvUmVhY3REZWZhdWx0UGVyZi5qc1xuLy8gbW9kdWxlIGlkID0gMTQyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdERlZmF1bHRQZXJmQW5hbHlzaXNcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcblxuLy8gRG9uJ3QgdHJ5IHRvIHNhdmUgdXNlcnMgbGVzcyB0aGFuIDEuMm1zIChhIG51bWJlciBJIG1hZGUgdXApXG52YXIgRE9OVF9DQVJFX1RIUkVTSE9MRCA9IDEuMjtcbnZhciBET01fT1BFUkFUSU9OX1RZUEVTID0ge1xuICAnX21vdW50SW1hZ2VJbnRvTm9kZSc6ICdzZXQgaW5uZXJIVE1MJyxcbiAgSU5TRVJUX01BUktVUDogJ3NldCBpbm5lckhUTUwnLFxuICBNT1ZFX0VYSVNUSU5HOiAnbW92ZScsXG4gIFJFTU9WRV9OT0RFOiAncmVtb3ZlJyxcbiAgU0VUX01BUktVUDogJ3NldCBpbm5lckhUTUwnLFxuICBURVhUX0NPTlRFTlQ6ICdzZXQgdGV4dENvbnRlbnQnLFxuICAnc2V0VmFsdWVGb3JQcm9wZXJ0eSc6ICd1cGRhdGUgYXR0cmlidXRlJyxcbiAgJ3NldFZhbHVlRm9yQXR0cmlidXRlJzogJ3VwZGF0ZSBhdHRyaWJ1dGUnLFxuICAnZGVsZXRlVmFsdWVGb3JQcm9wZXJ0eSc6ICdyZW1vdmUgYXR0cmlidXRlJyxcbiAgJ3NldFZhbHVlRm9yU3R5bGVzJzogJ3VwZGF0ZSBzdHlsZXMnLFxuICAncmVwbGFjZU5vZGVXaXRoTWFya3VwJzogJ3JlcGxhY2UnLFxuICAndXBkYXRlVGV4dENvbnRlbnQnOiAnc2V0IHRleHRDb250ZW50J1xufTtcblxuZnVuY3Rpb24gZ2V0VG90YWxUaW1lKG1lYXN1cmVtZW50cykge1xuICAvLyBUT0RPOiByZXR1cm4gbnVtYmVyIG9mIERPTSBvcHM/IGNvdWxkIGJlIG1pc2xlYWRpbmcuXG4gIC8vIFRPRE86IG1lYXN1cmUgZHJvcHBlZCBmcmFtZXMgYWZ0ZXIgcmVjb25jaWxlP1xuICAvLyBUT0RPOiBsb2cgdG90YWwgdGltZSBvZiBlYWNoIHJlY29uY2lsZSBhbmQgdGhlIHRvcC1sZXZlbCBjb21wb25lbnRcbiAgLy8gY2xhc3MgdGhhdCB0cmlnZ2VyZWQgaXQuXG4gIHZhciB0b3RhbFRpbWUgPSAwO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IG1lYXN1cmVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBtZWFzdXJlbWVudCA9IG1lYXN1cmVtZW50c1tpXTtcbiAgICB0b3RhbFRpbWUgKz0gbWVhc3VyZW1lbnQudG90YWxUaW1lO1xuICB9XG4gIHJldHVybiB0b3RhbFRpbWU7XG59XG5cbmZ1bmN0aW9uIGdldERPTVN1bW1hcnkobWVhc3VyZW1lbnRzKSB7XG4gIHZhciBpdGVtcyA9IFtdO1xuICBtZWFzdXJlbWVudHMuZm9yRWFjaChmdW5jdGlvbiAobWVhc3VyZW1lbnQpIHtcbiAgICBPYmplY3Qua2V5cyhtZWFzdXJlbWVudC53cml0ZXMpLmZvckVhY2goZnVuY3Rpb24gKGlkKSB7XG4gICAgICBtZWFzdXJlbWVudC53cml0ZXNbaWRdLmZvckVhY2goZnVuY3Rpb24gKHdyaXRlKSB7XG4gICAgICAgIGl0ZW1zLnB1c2goe1xuICAgICAgICAgIGlkOiBpZCxcbiAgICAgICAgICB0eXBlOiBET01fT1BFUkFUSU9OX1RZUEVTW3dyaXRlLnR5cGVdIHx8IHdyaXRlLnR5cGUsXG4gICAgICAgICAgYXJnczogd3JpdGUuYXJnc1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIGl0ZW1zO1xufVxuXG5mdW5jdGlvbiBnZXRFeGNsdXNpdmVTdW1tYXJ5KG1lYXN1cmVtZW50cykge1xuICB2YXIgY2FuZGlkYXRlcyA9IHt9O1xuICB2YXIgZGlzcGxheU5hbWU7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZWFzdXJlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgbWVhc3VyZW1lbnQgPSBtZWFzdXJlbWVudHNbaV07XG4gICAgdmFyIGFsbElEcyA9IGFzc2lnbih7fSwgbWVhc3VyZW1lbnQuZXhjbHVzaXZlLCBtZWFzdXJlbWVudC5pbmNsdXNpdmUpO1xuXG4gICAgZm9yICh2YXIgaWQgaW4gYWxsSURzKSB7XG4gICAgICBkaXNwbGF5TmFtZSA9IG1lYXN1cmVtZW50LmRpc3BsYXlOYW1lc1tpZF0uY3VycmVudDtcblxuICAgICAgY2FuZGlkYXRlc1tkaXNwbGF5TmFtZV0gPSBjYW5kaWRhdGVzW2Rpc3BsYXlOYW1lXSB8fCB7XG4gICAgICAgIGNvbXBvbmVudE5hbWU6IGRpc3BsYXlOYW1lLFxuICAgICAgICBpbmNsdXNpdmU6IDAsXG4gICAgICAgIGV4Y2x1c2l2ZTogMCxcbiAgICAgICAgcmVuZGVyOiAwLFxuICAgICAgICBjb3VudDogMFxuICAgICAgfTtcbiAgICAgIGlmIChtZWFzdXJlbWVudC5yZW5kZXJbaWRdKSB7XG4gICAgICAgIGNhbmRpZGF0ZXNbZGlzcGxheU5hbWVdLnJlbmRlciArPSBtZWFzdXJlbWVudC5yZW5kZXJbaWRdO1xuICAgICAgfVxuICAgICAgaWYgKG1lYXN1cmVtZW50LmV4Y2x1c2l2ZVtpZF0pIHtcbiAgICAgICAgY2FuZGlkYXRlc1tkaXNwbGF5TmFtZV0uZXhjbHVzaXZlICs9IG1lYXN1cmVtZW50LmV4Y2x1c2l2ZVtpZF07XG4gICAgICB9XG4gICAgICBpZiAobWVhc3VyZW1lbnQuaW5jbHVzaXZlW2lkXSkge1xuICAgICAgICBjYW5kaWRhdGVzW2Rpc3BsYXlOYW1lXS5pbmNsdXNpdmUgKz0gbWVhc3VyZW1lbnQuaW5jbHVzaXZlW2lkXTtcbiAgICAgIH1cbiAgICAgIGlmIChtZWFzdXJlbWVudC5jb3VudHNbaWRdKSB7XG4gICAgICAgIGNhbmRpZGF0ZXNbZGlzcGxheU5hbWVdLmNvdW50ICs9IG1lYXN1cmVtZW50LmNvdW50c1tpZF07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gTm93IG1ha2UgYSBzb3J0ZWQgYXJyYXkgd2l0aCB0aGUgcmVzdWx0cy5cbiAgdmFyIGFyciA9IFtdO1xuICBmb3IgKGRpc3BsYXlOYW1lIGluIGNhbmRpZGF0ZXMpIHtcbiAgICBpZiAoY2FuZGlkYXRlc1tkaXNwbGF5TmFtZV0uZXhjbHVzaXZlID49IERPTlRfQ0FSRV9USFJFU0hPTEQpIHtcbiAgICAgIGFyci5wdXNoKGNhbmRpZGF0ZXNbZGlzcGxheU5hbWVdKTtcbiAgICB9XG4gIH1cblxuICBhcnIuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgIHJldHVybiBiLmV4Y2x1c2l2ZSAtIGEuZXhjbHVzaXZlO1xuICB9KTtcblxuICByZXR1cm4gYXJyO1xufVxuXG5mdW5jdGlvbiBnZXRJbmNsdXNpdmVTdW1tYXJ5KG1lYXN1cmVtZW50cywgb25seUNsZWFuKSB7XG4gIHZhciBjYW5kaWRhdGVzID0ge307XG4gIHZhciBpbmNsdXNpdmVLZXk7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZWFzdXJlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgbWVhc3VyZW1lbnQgPSBtZWFzdXJlbWVudHNbaV07XG4gICAgdmFyIGFsbElEcyA9IGFzc2lnbih7fSwgbWVhc3VyZW1lbnQuZXhjbHVzaXZlLCBtZWFzdXJlbWVudC5pbmNsdXNpdmUpO1xuICAgIHZhciBjbGVhbkNvbXBvbmVudHM7XG5cbiAgICBpZiAob25seUNsZWFuKSB7XG4gICAgICBjbGVhbkNvbXBvbmVudHMgPSBnZXRVbmNoYW5nZWRDb21wb25lbnRzKG1lYXN1cmVtZW50KTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpZCBpbiBhbGxJRHMpIHtcbiAgICAgIGlmIChvbmx5Q2xlYW4gJiYgIWNsZWFuQ29tcG9uZW50c1tpZF0pIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIHZhciBkaXNwbGF5TmFtZSA9IG1lYXN1cmVtZW50LmRpc3BsYXlOYW1lc1tpZF07XG5cbiAgICAgIC8vIEluY2x1c2l2ZSB0aW1lIGlzIG5vdCB1c2VmdWwgZm9yIG1hbnkgY29tcG9uZW50cyB3aXRob3V0IGtub3dpbmcgd2hlcmVcbiAgICAgIC8vIHRoZXkgYXJlIGluc3RhbnRpYXRlZC4gU28gd2UgYWdncmVnYXRlIGluY2x1c2l2ZSB0aW1lIHdpdGggYm90aCB0aGVcbiAgICAgIC8vIG93bmVyIGFuZCBjdXJyZW50IGRpc3BsYXlOYW1lIGFzIHRoZSBrZXkuXG4gICAgICBpbmNsdXNpdmVLZXkgPSBkaXNwbGF5TmFtZS5vd25lciArICcgPiAnICsgZGlzcGxheU5hbWUuY3VycmVudDtcblxuICAgICAgY2FuZGlkYXRlc1tpbmNsdXNpdmVLZXldID0gY2FuZGlkYXRlc1tpbmNsdXNpdmVLZXldIHx8IHtcbiAgICAgICAgY29tcG9uZW50TmFtZTogaW5jbHVzaXZlS2V5LFxuICAgICAgICB0aW1lOiAwLFxuICAgICAgICBjb3VudDogMFxuICAgICAgfTtcblxuICAgICAgaWYgKG1lYXN1cmVtZW50LmluY2x1c2l2ZVtpZF0pIHtcbiAgICAgICAgY2FuZGlkYXRlc1tpbmNsdXNpdmVLZXldLnRpbWUgKz0gbWVhc3VyZW1lbnQuaW5jbHVzaXZlW2lkXTtcbiAgICAgIH1cbiAgICAgIGlmIChtZWFzdXJlbWVudC5jb3VudHNbaWRdKSB7XG4gICAgICAgIGNhbmRpZGF0ZXNbaW5jbHVzaXZlS2V5XS5jb3VudCArPSBtZWFzdXJlbWVudC5jb3VudHNbaWRdO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIE5vdyBtYWtlIGEgc29ydGVkIGFycmF5IHdpdGggdGhlIHJlc3VsdHMuXG4gIHZhciBhcnIgPSBbXTtcbiAgZm9yIChpbmNsdXNpdmVLZXkgaW4gY2FuZGlkYXRlcykge1xuICAgIGlmIChjYW5kaWRhdGVzW2luY2x1c2l2ZUtleV0udGltZSA+PSBET05UX0NBUkVfVEhSRVNIT0xEKSB7XG4gICAgICBhcnIucHVzaChjYW5kaWRhdGVzW2luY2x1c2l2ZUtleV0pO1xuICAgIH1cbiAgfVxuXG4gIGFyci5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgcmV0dXJuIGIudGltZSAtIGEudGltZTtcbiAgfSk7XG5cbiAgcmV0dXJuIGFycjtcbn1cblxuZnVuY3Rpb24gZ2V0VW5jaGFuZ2VkQ29tcG9uZW50cyhtZWFzdXJlbWVudCkge1xuICAvLyBGb3IgYSBnaXZlbiByZWNvbmNpbGUsIGxvb2sgYXQgd2hpY2ggY29tcG9uZW50cyBkaWQgbm90IGFjdHVhbGx5XG4gIC8vIHJlbmRlciBhbnl0aGluZyB0byB0aGUgRE9NIGFuZCByZXR1cm4gYSBtYXBwaW5nIG9mIHRoZWlyIElEIHRvXG4gIC8vIHRoZSBhbW91bnQgb2YgdGltZSBpdCB0b29rIHRvIHJlbmRlciB0aGUgZW50aXJlIHN1YnRyZWUuXG4gIHZhciBjbGVhbkNvbXBvbmVudHMgPSB7fTtcbiAgdmFyIGRpcnR5TGVhZklEcyA9IE9iamVjdC5rZXlzKG1lYXN1cmVtZW50LndyaXRlcyk7XG4gIHZhciBhbGxJRHMgPSBhc3NpZ24oe30sIG1lYXN1cmVtZW50LmV4Y2x1c2l2ZSwgbWVhc3VyZW1lbnQuaW5jbHVzaXZlKTtcblxuICBmb3IgKHZhciBpZCBpbiBhbGxJRHMpIHtcbiAgICB2YXIgaXNEaXJ0eSA9IGZhbHNlO1xuICAgIC8vIEZvciBlYWNoIGNvbXBvbmVudCB0aGF0IHJlbmRlcmVkLCBzZWUgaWYgYSBjb21wb25lbnQgdGhhdCB0cmlnZ2VyZWRcbiAgICAvLyBhIERPTSBvcCBpcyBpbiBpdHMgc3VidHJlZS5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpcnR5TGVhZklEcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGRpcnR5TGVhZklEc1tpXS5pbmRleE9mKGlkKSA9PT0gMCkge1xuICAgICAgICBpc0RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIGNoZWNrIGlmIGNvbXBvbmVudCBuZXdseSBjcmVhdGVkXG4gICAgaWYgKG1lYXN1cmVtZW50LmNyZWF0ZWRbaWRdKSB7XG4gICAgICBpc0RpcnR5ID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKCFpc0RpcnR5ICYmIG1lYXN1cmVtZW50LmNvdW50c1tpZF0gPiAwKSB7XG4gICAgICBjbGVhbkNvbXBvbmVudHNbaWRdID0gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGNsZWFuQ29tcG9uZW50cztcbn1cblxudmFyIFJlYWN0RGVmYXVsdFBlcmZBbmFseXNpcyA9IHtcbiAgZ2V0RXhjbHVzaXZlU3VtbWFyeTogZ2V0RXhjbHVzaXZlU3VtbWFyeSxcbiAgZ2V0SW5jbHVzaXZlU3VtbWFyeTogZ2V0SW5jbHVzaXZlU3VtbWFyeSxcbiAgZ2V0RE9NU3VtbWFyeTogZ2V0RE9NU3VtbWFyeSxcbiAgZ2V0VG90YWxUaW1lOiBnZXRUb3RhbFRpbWVcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3REZWZhdWx0UGVyZkFuYWx5c2lzO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvUmVhY3REZWZhdWx0UGVyZkFuYWx5c2lzLmpzXG4vLyBtb2R1bGUgaWQgPSAxNDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIHBlcmZvcm1hbmNlTm93XG4gKiBAdHlwZWNoZWNrc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIHBlcmZvcm1hbmNlID0gcmVxdWlyZSgnLi9wZXJmb3JtYW5jZScpO1xuXG52YXIgcGVyZm9ybWFuY2VOb3c7XG5cbi8qKlxuICogRGV0ZWN0IGlmIHdlIGNhbiB1c2UgYHdpbmRvdy5wZXJmb3JtYW5jZS5ub3coKWAgYW5kIGdyYWNlZnVsbHkgZmFsbGJhY2sgdG9cbiAqIGBEYXRlLm5vdygpYCBpZiBpdCBkb2Vzbid0IGV4aXN0LiBXZSBuZWVkIHRvIHN1cHBvcnQgRmlyZWZveCA8IDE1IGZvciBub3dcbiAqIGJlY2F1c2Ugb2YgRmFjZWJvb2sncyB0ZXN0aW5nIGluZnJhc3RydWN0dXJlLlxuICovXG5pZiAocGVyZm9ybWFuY2Uubm93KSB7XG4gIHBlcmZvcm1hbmNlTm93ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBwZXJmb3JtYW5jZS5ub3coKTtcbiAgfTtcbn0gZWxzZSB7XG4gIHBlcmZvcm1hbmNlTm93ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBEYXRlLm5vdygpO1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHBlcmZvcm1hbmNlTm93O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9mYmpzL2xpYi9wZXJmb3JtYW5jZU5vdy5qc1xuLy8gbW9kdWxlIGlkID0gMTQ0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBwZXJmb3JtYW5jZVxuICogQHR5cGVjaGVja3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHJlcXVpcmUoJy4vRXhlY3V0aW9uRW52aXJvbm1lbnQnKTtcblxudmFyIHBlcmZvcm1hbmNlO1xuXG5pZiAoRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NKSB7XG4gIHBlcmZvcm1hbmNlID0gd2luZG93LnBlcmZvcm1hbmNlIHx8IHdpbmRvdy5tc1BlcmZvcm1hbmNlIHx8IHdpbmRvdy53ZWJraXRQZXJmb3JtYW5jZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBwZXJmb3JtYW5jZSB8fCB7fTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vZmJqcy9saWIvcGVyZm9ybWFuY2UuanNcbi8vIG1vZHVsZSBpZCA9IDE0NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RWZXJzaW9uXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9ICcwLjE0LjknO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvUmVhY3RWZXJzaW9uLmpzXG4vLyBtb2R1bGUgaWQgPSAxNDZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuKiBAcHJvdmlkZXNNb2R1bGUgcmVuZGVyU3VidHJlZUludG9Db250YWluZXJcbiovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0TW91bnQgPSByZXF1aXJlKCcuL1JlYWN0TW91bnQnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdE1vdW50LnJlbmRlclN1YnRyZWVJbnRvQ29udGFpbmVyO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvcmVuZGVyU3VidHJlZUludG9Db250YWluZXIuanNcbi8vIG1vZHVsZSBpZCA9IDE0N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RET01TZXJ2ZXJcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdERlZmF1bHRJbmplY3Rpb24gPSByZXF1aXJlKCcuL1JlYWN0RGVmYXVsdEluamVjdGlvbicpO1xudmFyIFJlYWN0U2VydmVyUmVuZGVyaW5nID0gcmVxdWlyZSgnLi9SZWFjdFNlcnZlclJlbmRlcmluZycpO1xudmFyIFJlYWN0VmVyc2lvbiA9IHJlcXVpcmUoJy4vUmVhY3RWZXJzaW9uJyk7XG5cblJlYWN0RGVmYXVsdEluamVjdGlvbi5pbmplY3QoKTtcblxudmFyIFJlYWN0RE9NU2VydmVyID0ge1xuICByZW5kZXJUb1N0cmluZzogUmVhY3RTZXJ2ZXJSZW5kZXJpbmcucmVuZGVyVG9TdHJpbmcsXG4gIHJlbmRlclRvU3RhdGljTWFya3VwOiBSZWFjdFNlcnZlclJlbmRlcmluZy5yZW5kZXJUb1N0YXRpY01hcmt1cCxcbiAgdmVyc2lvbjogUmVhY3RWZXJzaW9uXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0RE9NU2VydmVyO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvUmVhY3RET01TZXJ2ZXIuanNcbi8vIG1vZHVsZSBpZCA9IDE0OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0U2VydmVyUmVuZGVyaW5nXG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0RGVmYXVsdEJhdGNoaW5nU3RyYXRlZ3kgPSByZXF1aXJlKCcuL1JlYWN0RGVmYXVsdEJhdGNoaW5nU3RyYXRlZ3knKTtcbnZhciBSZWFjdEVsZW1lbnQgPSByZXF1aXJlKCcuL1JlYWN0RWxlbWVudCcpO1xudmFyIFJlYWN0SW5zdGFuY2VIYW5kbGVzID0gcmVxdWlyZSgnLi9SZWFjdEluc3RhbmNlSGFuZGxlcycpO1xudmFyIFJlYWN0TWFya3VwQ2hlY2tzdW0gPSByZXF1aXJlKCcuL1JlYWN0TWFya3VwQ2hlY2tzdW0nKTtcbnZhciBSZWFjdFNlcnZlckJhdGNoaW5nU3RyYXRlZ3kgPSByZXF1aXJlKCcuL1JlYWN0U2VydmVyQmF0Y2hpbmdTdHJhdGVneScpO1xudmFyIFJlYWN0U2VydmVyUmVuZGVyaW5nVHJhbnNhY3Rpb24gPSByZXF1aXJlKCcuL1JlYWN0U2VydmVyUmVuZGVyaW5nVHJhbnNhY3Rpb24nKTtcbnZhciBSZWFjdFVwZGF0ZXMgPSByZXF1aXJlKCcuL1JlYWN0VXBkYXRlcycpO1xuXG52YXIgZW1wdHlPYmplY3QgPSByZXF1aXJlKCdmYmpzL2xpYi9lbXB0eU9iamVjdCcpO1xudmFyIGluc3RhbnRpYXRlUmVhY3RDb21wb25lbnQgPSByZXF1aXJlKCcuL2luc3RhbnRpYXRlUmVhY3RDb21wb25lbnQnKTtcbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcblxuLyoqXG4gKiBAcGFyYW0ge1JlYWN0RWxlbWVudH0gZWxlbWVudFxuICogQHJldHVybiB7c3RyaW5nfSB0aGUgSFRNTCBtYXJrdXBcbiAqL1xuZnVuY3Rpb24gcmVuZGVyVG9TdHJpbmcoZWxlbWVudCkge1xuICAhUmVhY3RFbGVtZW50LmlzVmFsaWRFbGVtZW50KGVsZW1lbnQpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ3JlbmRlclRvU3RyaW5nKCk6IFlvdSBtdXN0IHBhc3MgYSB2YWxpZCBSZWFjdEVsZW1lbnQuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gIHZhciB0cmFuc2FjdGlvbjtcbiAgdHJ5IHtcbiAgICBSZWFjdFVwZGF0ZXMuaW5qZWN0aW9uLmluamVjdEJhdGNoaW5nU3RyYXRlZ3koUmVhY3RTZXJ2ZXJCYXRjaGluZ1N0cmF0ZWd5KTtcblxuICAgIHZhciBpZCA9IFJlYWN0SW5zdGFuY2VIYW5kbGVzLmNyZWF0ZVJlYWN0Um9vdElEKCk7XG4gICAgdHJhbnNhY3Rpb24gPSBSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9uLmdldFBvb2xlZChmYWxzZSk7XG5cbiAgICByZXR1cm4gdHJhbnNhY3Rpb24ucGVyZm9ybShmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgY29tcG9uZW50SW5zdGFuY2UgPSBpbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50KGVsZW1lbnQsIG51bGwpO1xuICAgICAgdmFyIG1hcmt1cCA9IGNvbXBvbmVudEluc3RhbmNlLm1vdW50Q29tcG9uZW50KGlkLCB0cmFuc2FjdGlvbiwgZW1wdHlPYmplY3QpO1xuICAgICAgcmV0dXJuIFJlYWN0TWFya3VwQ2hlY2tzdW0uYWRkQ2hlY2tzdW1Ub01hcmt1cChtYXJrdXApO1xuICAgIH0sIG51bGwpO1xuICB9IGZpbmFsbHkge1xuICAgIFJlYWN0U2VydmVyUmVuZGVyaW5nVHJhbnNhY3Rpb24ucmVsZWFzZSh0cmFuc2FjdGlvbik7XG4gICAgLy8gUmV2ZXJ0IHRvIHRoZSBET00gYmF0Y2hpbmcgc3RyYXRlZ3kgc2luY2UgdGhlc2UgdHdvIHJlbmRlcmVyc1xuICAgIC8vIGN1cnJlbnRseSBzaGFyZSB0aGVzZSBzdGF0ZWZ1bCBtb2R1bGVzLlxuICAgIFJlYWN0VXBkYXRlcy5pbmplY3Rpb24uaW5qZWN0QmF0Y2hpbmdTdHJhdGVneShSZWFjdERlZmF1bHRCYXRjaGluZ1N0cmF0ZWd5KTtcbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBlbGVtZW50XG4gKiBAcmV0dXJuIHtzdHJpbmd9IHRoZSBIVE1MIG1hcmt1cCwgd2l0aG91dCB0aGUgZXh0cmEgUmVhY3QgSUQgYW5kIGNoZWNrc3VtXG4gKiAoZm9yIGdlbmVyYXRpbmcgc3RhdGljIHBhZ2VzKVxuICovXG5mdW5jdGlvbiByZW5kZXJUb1N0YXRpY01hcmt1cChlbGVtZW50KSB7XG4gICFSZWFjdEVsZW1lbnQuaXNWYWxpZEVsZW1lbnQoZWxlbWVudCkgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAncmVuZGVyVG9TdGF0aWNNYXJrdXAoKTogWW91IG11c3QgcGFzcyBhIHZhbGlkIFJlYWN0RWxlbWVudC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgdmFyIHRyYW5zYWN0aW9uO1xuICB0cnkge1xuICAgIFJlYWN0VXBkYXRlcy5pbmplY3Rpb24uaW5qZWN0QmF0Y2hpbmdTdHJhdGVneShSZWFjdFNlcnZlckJhdGNoaW5nU3RyYXRlZ3kpO1xuXG4gICAgdmFyIGlkID0gUmVhY3RJbnN0YW5jZUhhbmRsZXMuY3JlYXRlUmVhY3RSb290SUQoKTtcbiAgICB0cmFuc2FjdGlvbiA9IFJlYWN0U2VydmVyUmVuZGVyaW5nVHJhbnNhY3Rpb24uZ2V0UG9vbGVkKHRydWUpO1xuXG4gICAgcmV0dXJuIHRyYW5zYWN0aW9uLnBlcmZvcm0oZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGNvbXBvbmVudEluc3RhbmNlID0gaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudChlbGVtZW50LCBudWxsKTtcbiAgICAgIHJldHVybiBjb21wb25lbnRJbnN0YW5jZS5tb3VudENvbXBvbmVudChpZCwgdHJhbnNhY3Rpb24sIGVtcHR5T2JqZWN0KTtcbiAgICB9LCBudWxsKTtcbiAgfSBmaW5hbGx5IHtcbiAgICBSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9uLnJlbGVhc2UodHJhbnNhY3Rpb24pO1xuICAgIC8vIFJldmVydCB0byB0aGUgRE9NIGJhdGNoaW5nIHN0cmF0ZWd5IHNpbmNlIHRoZXNlIHR3byByZW5kZXJlcnNcbiAgICAvLyBjdXJyZW50bHkgc2hhcmUgdGhlc2Ugc3RhdGVmdWwgbW9kdWxlcy5cbiAgICBSZWFjdFVwZGF0ZXMuaW5qZWN0aW9uLmluamVjdEJhdGNoaW5nU3RyYXRlZ3koUmVhY3REZWZhdWx0QmF0Y2hpbmdTdHJhdGVneSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHJlbmRlclRvU3RyaW5nOiByZW5kZXJUb1N0cmluZyxcbiAgcmVuZGVyVG9TdGF0aWNNYXJrdXA6IHJlbmRlclRvU3RhdGljTWFya3VwXG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvUmVhY3RTZXJ2ZXJSZW5kZXJpbmcuanNcbi8vIG1vZHVsZSBpZCA9IDE0OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDE0LTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RTZXJ2ZXJCYXRjaGluZ1N0cmF0ZWd5XG4gKiBAdHlwZWNoZWNrc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0U2VydmVyQmF0Y2hpbmdTdHJhdGVneSA9IHtcbiAgaXNCYXRjaGluZ1VwZGF0ZXM6IGZhbHNlLFxuICBiYXRjaGVkVXBkYXRlczogZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgLy8gRG9uJ3QgZG8gYW55dGhpbmcgaGVyZS4gRHVyaW5nIHRoZSBzZXJ2ZXIgcmVuZGVyaW5nIHdlIGRvbid0IHdhbnQgdG9cbiAgICAvLyBzY2hlZHVsZSBhbnkgdXBkYXRlcy4gV2Ugd2lsbCBzaW1wbHkgaWdub3JlIHRoZW0uXG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RTZXJ2ZXJCYXRjaGluZ1N0cmF0ZWd5O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvUmVhY3RTZXJ2ZXJCYXRjaGluZ1N0cmF0ZWd5LmpzXG4vLyBtb2R1bGUgaWQgPSAxNTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNC0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0U2VydmVyUmVuZGVyaW5nVHJhbnNhY3Rpb25cbiAqIEB0eXBlY2hlY2tzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUG9vbGVkQ2xhc3MgPSByZXF1aXJlKCcuL1Bvb2xlZENsYXNzJyk7XG52YXIgQ2FsbGJhY2tRdWV1ZSA9IHJlcXVpcmUoJy4vQ2FsbGJhY2tRdWV1ZScpO1xudmFyIFRyYW5zYWN0aW9uID0gcmVxdWlyZSgnLi9UcmFuc2FjdGlvbicpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgZW1wdHlGdW5jdGlvbiA9IHJlcXVpcmUoJ2ZianMvbGliL2VtcHR5RnVuY3Rpb24nKTtcblxuLyoqXG4gKiBQcm92aWRlcyBhIGBDYWxsYmFja1F1ZXVlYCBxdWV1ZSBmb3IgY29sbGVjdGluZyBgb25ET01SZWFkeWAgY2FsbGJhY2tzXG4gKiBkdXJpbmcgdGhlIHBlcmZvcm1pbmcgb2YgdGhlIHRyYW5zYWN0aW9uLlxuICovXG52YXIgT05fRE9NX1JFQURZX1FVRVVFSU5HID0ge1xuICAvKipcbiAgICogSW5pdGlhbGl6ZXMgdGhlIGludGVybmFsIGBvbkRPTVJlYWR5YCBxdWV1ZS5cbiAgICovXG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnJlYWN0TW91bnRSZWFkeS5yZXNldCgpO1xuICB9LFxuXG4gIGNsb3NlOiBlbXB0eUZ1bmN0aW9uXG59O1xuXG4vKipcbiAqIEV4ZWN1dGVkIHdpdGhpbiB0aGUgc2NvcGUgb2YgdGhlIGBUcmFuc2FjdGlvbmAgaW5zdGFuY2UuIENvbnNpZGVyIHRoZXNlIGFzXG4gKiBiZWluZyBtZW1iZXIgbWV0aG9kcywgYnV0IHdpdGggYW4gaW1wbGllZCBvcmRlcmluZyB3aGlsZSBiZWluZyBpc29sYXRlZCBmcm9tXG4gKiBlYWNoIG90aGVyLlxuICovXG52YXIgVFJBTlNBQ1RJT05fV1JBUFBFUlMgPSBbT05fRE9NX1JFQURZX1FVRVVFSU5HXTtcblxuLyoqXG4gKiBAY2xhc3MgUmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvblxuICogQHBhcmFtIHtib29sZWFufSByZW5kZXJUb1N0YXRpY01hcmt1cFxuICovXG5mdW5jdGlvbiBSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9uKHJlbmRlclRvU3RhdGljTWFya3VwKSB7XG4gIHRoaXMucmVpbml0aWFsaXplVHJhbnNhY3Rpb24oKTtcbiAgdGhpcy5yZW5kZXJUb1N0YXRpY01hcmt1cCA9IHJlbmRlclRvU3RhdGljTWFya3VwO1xuICB0aGlzLnJlYWN0TW91bnRSZWFkeSA9IENhbGxiYWNrUXVldWUuZ2V0UG9vbGVkKG51bGwpO1xuICB0aGlzLnVzZUNyZWF0ZUVsZW1lbnQgPSBmYWxzZTtcbn1cblxudmFyIE1peGluID0ge1xuICAvKipcbiAgICogQHNlZSBUcmFuc2FjdGlvblxuICAgKiBAYWJzdHJhY3RcbiAgICogQGZpbmFsXG4gICAqIEByZXR1cm4ge2FycmF5fSBFbXB0eSBsaXN0IG9mIG9wZXJhdGlvbiB3cmFwIHByb2NlZHVyZXMuXG4gICAqL1xuICBnZXRUcmFuc2FjdGlvbldyYXBwZXJzOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIFRSQU5TQUNUSU9OX1dSQVBQRVJTO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtvYmplY3R9IFRoZSBxdWV1ZSB0byBjb2xsZWN0IGBvbkRPTVJlYWR5YCBjYWxsYmFja3Mgd2l0aC5cbiAgICovXG4gIGdldFJlYWN0TW91bnRSZWFkeTogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLnJlYWN0TW91bnRSZWFkeTtcbiAgfSxcblxuICAvKipcbiAgICogYFBvb2xlZENsYXNzYCBsb29rcyBmb3IgdGhpcywgYW5kIHdpbGwgaW52b2tlIHRoaXMgYmVmb3JlIGFsbG93aW5nIHRoaXNcbiAgICogaW5zdGFuY2UgdG8gYmUgcmV1c2VkLlxuICAgKi9cbiAgZGVzdHJ1Y3RvcjogZnVuY3Rpb24gKCkge1xuICAgIENhbGxiYWNrUXVldWUucmVsZWFzZSh0aGlzLnJlYWN0TW91bnRSZWFkeSk7XG4gICAgdGhpcy5yZWFjdE1vdW50UmVhZHkgPSBudWxsO1xuICB9XG59O1xuXG5hc3NpZ24oUmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvbi5wcm90b3R5cGUsIFRyYW5zYWN0aW9uLk1peGluLCBNaXhpbik7XG5cblBvb2xlZENsYXNzLmFkZFBvb2xpbmdUbyhSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9uKTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9uO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvUmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvbi5qc1xuLy8gbW9kdWxlIGlkID0gMTUxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdElzb21vcnBoaWNcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdENoaWxkcmVuID0gcmVxdWlyZSgnLi9SZWFjdENoaWxkcmVuJyk7XG52YXIgUmVhY3RDb21wb25lbnQgPSByZXF1aXJlKCcuL1JlYWN0Q29tcG9uZW50Jyk7XG52YXIgUmVhY3RDbGFzcyA9IHJlcXVpcmUoJy4vUmVhY3RDbGFzcycpO1xudmFyIFJlYWN0RE9NRmFjdG9yaWVzID0gcmVxdWlyZSgnLi9SZWFjdERPTUZhY3RvcmllcycpO1xudmFyIFJlYWN0RWxlbWVudCA9IHJlcXVpcmUoJy4vUmVhY3RFbGVtZW50Jyk7XG52YXIgUmVhY3RFbGVtZW50VmFsaWRhdG9yID0gcmVxdWlyZSgnLi9SZWFjdEVsZW1lbnRWYWxpZGF0b3InKTtcbnZhciBSZWFjdFByb3BUeXBlcyA9IHJlcXVpcmUoJy4vUmVhY3RQcm9wVHlwZXMnKTtcbnZhciBSZWFjdFZlcnNpb24gPSByZXF1aXJlKCcuL1JlYWN0VmVyc2lvbicpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgb25seUNoaWxkID0gcmVxdWlyZSgnLi9vbmx5Q2hpbGQnKTtcblxudmFyIGNyZWF0ZUVsZW1lbnQgPSBSZWFjdEVsZW1lbnQuY3JlYXRlRWxlbWVudDtcbnZhciBjcmVhdGVGYWN0b3J5ID0gUmVhY3RFbGVtZW50LmNyZWF0ZUZhY3Rvcnk7XG52YXIgY2xvbmVFbGVtZW50ID0gUmVhY3RFbGVtZW50LmNsb25lRWxlbWVudDtcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgY3JlYXRlRWxlbWVudCA9IFJlYWN0RWxlbWVudFZhbGlkYXRvci5jcmVhdGVFbGVtZW50O1xuICBjcmVhdGVGYWN0b3J5ID0gUmVhY3RFbGVtZW50VmFsaWRhdG9yLmNyZWF0ZUZhY3Rvcnk7XG4gIGNsb25lRWxlbWVudCA9IFJlYWN0RWxlbWVudFZhbGlkYXRvci5jbG9uZUVsZW1lbnQ7XG59XG5cbnZhciBSZWFjdCA9IHtcblxuICAvLyBNb2Rlcm5cblxuICBDaGlsZHJlbjoge1xuICAgIG1hcDogUmVhY3RDaGlsZHJlbi5tYXAsXG4gICAgZm9yRWFjaDogUmVhY3RDaGlsZHJlbi5mb3JFYWNoLFxuICAgIGNvdW50OiBSZWFjdENoaWxkcmVuLmNvdW50LFxuICAgIHRvQXJyYXk6IFJlYWN0Q2hpbGRyZW4udG9BcnJheSxcbiAgICBvbmx5OiBvbmx5Q2hpbGRcbiAgfSxcblxuICBDb21wb25lbnQ6IFJlYWN0Q29tcG9uZW50LFxuXG4gIGNyZWF0ZUVsZW1lbnQ6IGNyZWF0ZUVsZW1lbnQsXG4gIGNsb25lRWxlbWVudDogY2xvbmVFbGVtZW50LFxuICBpc1ZhbGlkRWxlbWVudDogUmVhY3RFbGVtZW50LmlzVmFsaWRFbGVtZW50LFxuXG4gIC8vIENsYXNzaWNcblxuICBQcm9wVHlwZXM6IFJlYWN0UHJvcFR5cGVzLFxuICBjcmVhdGVDbGFzczogUmVhY3RDbGFzcy5jcmVhdGVDbGFzcyxcbiAgY3JlYXRlRmFjdG9yeTogY3JlYXRlRmFjdG9yeSxcbiAgY3JlYXRlTWl4aW46IGZ1bmN0aW9uIChtaXhpbikge1xuICAgIC8vIEN1cnJlbnRseSBhIG5vb3AuIFdpbGwgYmUgdXNlZCB0byB2YWxpZGF0ZSBhbmQgdHJhY2UgbWl4aW5zLlxuICAgIHJldHVybiBtaXhpbjtcbiAgfSxcblxuICAvLyBUaGlzIGxvb2tzIERPTSBzcGVjaWZpYyBidXQgdGhlc2UgYXJlIGFjdHVhbGx5IGlzb21vcnBoaWMgaGVscGVyc1xuICAvLyBzaW5jZSB0aGV5IGFyZSBqdXN0IGdlbmVyYXRpbmcgRE9NIHN0cmluZ3MuXG4gIERPTTogUmVhY3RET01GYWN0b3JpZXMsXG5cbiAgdmVyc2lvbjogUmVhY3RWZXJzaW9uLFxuXG4gIC8vIEhvb2sgZm9yIEpTWCBzcHJlYWQsIGRvbid0IHVzZSB0aGlzIGZvciBhbnl0aGluZyBlbHNlLlxuICBfX3NwcmVhZDogYXNzaWduXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC9saWIvUmVhY3RJc29tb3JwaGljLmpzXG4vLyBtb2R1bGUgaWQgPSAxNTJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RE9NRmFjdG9yaWVzXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0RWxlbWVudCA9IHJlcXVpcmUoJy4vUmVhY3RFbGVtZW50Jyk7XG52YXIgUmVhY3RFbGVtZW50VmFsaWRhdG9yID0gcmVxdWlyZSgnLi9SZWFjdEVsZW1lbnRWYWxpZGF0b3InKTtcblxudmFyIG1hcE9iamVjdCA9IHJlcXVpcmUoJ2ZianMvbGliL21hcE9iamVjdCcpO1xuXG4vKipcbiAqIENyZWF0ZSBhIGZhY3RvcnkgdGhhdCBjcmVhdGVzIEhUTUwgdGFnIGVsZW1lbnRzLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB0YWcgVGFnIG5hbWUgKGUuZy4gYGRpdmApLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlRE9NRmFjdG9yeSh0YWcpIHtcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICByZXR1cm4gUmVhY3RFbGVtZW50VmFsaWRhdG9yLmNyZWF0ZUZhY3RvcnkodGFnKTtcbiAgfVxuICByZXR1cm4gUmVhY3RFbGVtZW50LmNyZWF0ZUZhY3RvcnkodGFnKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbWFwcGluZyBmcm9tIHN1cHBvcnRlZCBIVE1MIHRhZ3MgdG8gYFJlYWN0RE9NQ29tcG9uZW50YCBjbGFzc2VzLlxuICogVGhpcyBpcyBhbHNvIGFjY2Vzc2libGUgdmlhIGBSZWFjdC5ET01gLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xudmFyIFJlYWN0RE9NRmFjdG9yaWVzID0gbWFwT2JqZWN0KHtcbiAgYTogJ2EnLFxuICBhYmJyOiAnYWJicicsXG4gIGFkZHJlc3M6ICdhZGRyZXNzJyxcbiAgYXJlYTogJ2FyZWEnLFxuICBhcnRpY2xlOiAnYXJ0aWNsZScsXG4gIGFzaWRlOiAnYXNpZGUnLFxuICBhdWRpbzogJ2F1ZGlvJyxcbiAgYjogJ2InLFxuICBiYXNlOiAnYmFzZScsXG4gIGJkaTogJ2JkaScsXG4gIGJkbzogJ2JkbycsXG4gIGJpZzogJ2JpZycsXG4gIGJsb2NrcXVvdGU6ICdibG9ja3F1b3RlJyxcbiAgYm9keTogJ2JvZHknLFxuICBicjogJ2JyJyxcbiAgYnV0dG9uOiAnYnV0dG9uJyxcbiAgY2FudmFzOiAnY2FudmFzJyxcbiAgY2FwdGlvbjogJ2NhcHRpb24nLFxuICBjaXRlOiAnY2l0ZScsXG4gIGNvZGU6ICdjb2RlJyxcbiAgY29sOiAnY29sJyxcbiAgY29sZ3JvdXA6ICdjb2xncm91cCcsXG4gIGRhdGE6ICdkYXRhJyxcbiAgZGF0YWxpc3Q6ICdkYXRhbGlzdCcsXG4gIGRkOiAnZGQnLFxuICBkZWw6ICdkZWwnLFxuICBkZXRhaWxzOiAnZGV0YWlscycsXG4gIGRmbjogJ2RmbicsXG4gIGRpYWxvZzogJ2RpYWxvZycsXG4gIGRpdjogJ2RpdicsXG4gIGRsOiAnZGwnLFxuICBkdDogJ2R0JyxcbiAgZW06ICdlbScsXG4gIGVtYmVkOiAnZW1iZWQnLFxuICBmaWVsZHNldDogJ2ZpZWxkc2V0JyxcbiAgZmlnY2FwdGlvbjogJ2ZpZ2NhcHRpb24nLFxuICBmaWd1cmU6ICdmaWd1cmUnLFxuICBmb290ZXI6ICdmb290ZXInLFxuICBmb3JtOiAnZm9ybScsXG4gIGgxOiAnaDEnLFxuICBoMjogJ2gyJyxcbiAgaDM6ICdoMycsXG4gIGg0OiAnaDQnLFxuICBoNTogJ2g1JyxcbiAgaDY6ICdoNicsXG4gIGhlYWQ6ICdoZWFkJyxcbiAgaGVhZGVyOiAnaGVhZGVyJyxcbiAgaGdyb3VwOiAnaGdyb3VwJyxcbiAgaHI6ICdocicsXG4gIGh0bWw6ICdodG1sJyxcbiAgaTogJ2knLFxuICBpZnJhbWU6ICdpZnJhbWUnLFxuICBpbWc6ICdpbWcnLFxuICBpbnB1dDogJ2lucHV0JyxcbiAgaW5zOiAnaW5zJyxcbiAga2JkOiAna2JkJyxcbiAga2V5Z2VuOiAna2V5Z2VuJyxcbiAgbGFiZWw6ICdsYWJlbCcsXG4gIGxlZ2VuZDogJ2xlZ2VuZCcsXG4gIGxpOiAnbGknLFxuICBsaW5rOiAnbGluaycsXG4gIG1haW46ICdtYWluJyxcbiAgbWFwOiAnbWFwJyxcbiAgbWFyazogJ21hcmsnLFxuICBtZW51OiAnbWVudScsXG4gIG1lbnVpdGVtOiAnbWVudWl0ZW0nLFxuICBtZXRhOiAnbWV0YScsXG4gIG1ldGVyOiAnbWV0ZXInLFxuICBuYXY6ICduYXYnLFxuICBub3NjcmlwdDogJ25vc2NyaXB0JyxcbiAgb2JqZWN0OiAnb2JqZWN0JyxcbiAgb2w6ICdvbCcsXG4gIG9wdGdyb3VwOiAnb3B0Z3JvdXAnLFxuICBvcHRpb246ICdvcHRpb24nLFxuICBvdXRwdXQ6ICdvdXRwdXQnLFxuICBwOiAncCcsXG4gIHBhcmFtOiAncGFyYW0nLFxuICBwaWN0dXJlOiAncGljdHVyZScsXG4gIHByZTogJ3ByZScsXG4gIHByb2dyZXNzOiAncHJvZ3Jlc3MnLFxuICBxOiAncScsXG4gIHJwOiAncnAnLFxuICBydDogJ3J0JyxcbiAgcnVieTogJ3J1YnknLFxuICBzOiAncycsXG4gIHNhbXA6ICdzYW1wJyxcbiAgc2NyaXB0OiAnc2NyaXB0JyxcbiAgc2VjdGlvbjogJ3NlY3Rpb24nLFxuICBzZWxlY3Q6ICdzZWxlY3QnLFxuICBzbWFsbDogJ3NtYWxsJyxcbiAgc291cmNlOiAnc291cmNlJyxcbiAgc3BhbjogJ3NwYW4nLFxuICBzdHJvbmc6ICdzdHJvbmcnLFxuICBzdHlsZTogJ3N0eWxlJyxcbiAgc3ViOiAnc3ViJyxcbiAgc3VtbWFyeTogJ3N1bW1hcnknLFxuICBzdXA6ICdzdXAnLFxuICB0YWJsZTogJ3RhYmxlJyxcbiAgdGJvZHk6ICd0Ym9keScsXG4gIHRkOiAndGQnLFxuICB0ZXh0YXJlYTogJ3RleHRhcmVhJyxcbiAgdGZvb3Q6ICd0Zm9vdCcsXG4gIHRoOiAndGgnLFxuICB0aGVhZDogJ3RoZWFkJyxcbiAgdGltZTogJ3RpbWUnLFxuICB0aXRsZTogJ3RpdGxlJyxcbiAgdHI6ICd0cicsXG4gIHRyYWNrOiAndHJhY2snLFxuICB1OiAndScsXG4gIHVsOiAndWwnLFxuICAndmFyJzogJ3ZhcicsXG4gIHZpZGVvOiAndmlkZW8nLFxuICB3YnI6ICd3YnInLFxuXG4gIC8vIFNWR1xuICBjaXJjbGU6ICdjaXJjbGUnLFxuICBjbGlwUGF0aDogJ2NsaXBQYXRoJyxcbiAgZGVmczogJ2RlZnMnLFxuICBlbGxpcHNlOiAnZWxsaXBzZScsXG4gIGc6ICdnJyxcbiAgaW1hZ2U6ICdpbWFnZScsXG4gIGxpbmU6ICdsaW5lJyxcbiAgbGluZWFyR3JhZGllbnQ6ICdsaW5lYXJHcmFkaWVudCcsXG4gIG1hc2s6ICdtYXNrJyxcbiAgcGF0aDogJ3BhdGgnLFxuICBwYXR0ZXJuOiAncGF0dGVybicsXG4gIHBvbHlnb246ICdwb2x5Z29uJyxcbiAgcG9seWxpbmU6ICdwb2x5bGluZScsXG4gIHJhZGlhbEdyYWRpZW50OiAncmFkaWFsR3JhZGllbnQnLFxuICByZWN0OiAncmVjdCcsXG4gIHN0b3A6ICdzdG9wJyxcbiAgc3ZnOiAnc3ZnJyxcbiAgdGV4dDogJ3RleHQnLFxuICB0c3BhbjogJ3RzcGFuJ1xuXG59LCBjcmVhdGVET01GYWN0b3J5KTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdERPTUZhY3RvcmllcztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QvbGliL1JlYWN0RE9NRmFjdG9yaWVzLmpzXG4vLyBtb2R1bGUgaWQgPSAxNTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNC0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RWxlbWVudFZhbGlkYXRvclxuICovXG5cbi8qKlxuICogUmVhY3RFbGVtZW50VmFsaWRhdG9yIHByb3ZpZGVzIGEgd3JhcHBlciBhcm91bmQgYSBlbGVtZW50IGZhY3RvcnlcbiAqIHdoaWNoIHZhbGlkYXRlcyB0aGUgcHJvcHMgcGFzc2VkIHRvIHRoZSBlbGVtZW50LiBUaGlzIGlzIGludGVuZGVkIHRvIGJlXG4gKiB1c2VkIG9ubHkgaW4gREVWIGFuZCBjb3VsZCBiZSByZXBsYWNlZCBieSBhIHN0YXRpYyB0eXBlIGNoZWNrZXIgZm9yIGxhbmd1YWdlc1xuICogdGhhdCBzdXBwb3J0IGl0LlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0RWxlbWVudCA9IHJlcXVpcmUoJy4vUmVhY3RFbGVtZW50Jyk7XG52YXIgUmVhY3RQcm9wVHlwZUxvY2F0aW9ucyA9IHJlcXVpcmUoJy4vUmVhY3RQcm9wVHlwZUxvY2F0aW9ucycpO1xudmFyIFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzID0gcmVxdWlyZSgnLi9SZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lcycpO1xudmFyIFJlYWN0Q3VycmVudE93bmVyID0gcmVxdWlyZSgnLi9SZWFjdEN1cnJlbnRPd25lcicpO1xuXG52YXIgY2FuRGVmaW5lUHJvcGVydHkgPSByZXF1aXJlKCcuL2NhbkRlZmluZVByb3BlcnR5Jyk7XG52YXIgZ2V0SXRlcmF0b3JGbiA9IHJlcXVpcmUoJy4vZ2V0SXRlcmF0b3JGbicpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbmZ1bmN0aW9uIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bSgpIHtcbiAgaWYgKFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQpIHtcbiAgICB2YXIgbmFtZSA9IFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQuZ2V0TmFtZSgpO1xuICAgIGlmIChuYW1lKSB7XG4gICAgICByZXR1cm4gJyBDaGVjayB0aGUgcmVuZGVyIG1ldGhvZCBvZiBgJyArIG5hbWUgKyAnYC4nO1xuICAgIH1cbiAgfVxuICByZXR1cm4gJyc7XG59XG5cbi8qKlxuICogV2FybiBpZiB0aGVyZSdzIG5vIGtleSBleHBsaWNpdGx5IHNldCBvbiBkeW5hbWljIGFycmF5cyBvZiBjaGlsZHJlbiBvclxuICogb2JqZWN0IGtleXMgYXJlIG5vdCB2YWxpZC4gVGhpcyBhbGxvd3MgdXMgdG8ga2VlcCB0cmFjayBvZiBjaGlsZHJlbiBiZXR3ZWVuXG4gKiB1cGRhdGVzLlxuICovXG52YXIgb3duZXJIYXNLZXlVc2VXYXJuaW5nID0ge307XG5cbnZhciBsb2dnZWRUeXBlRmFpbHVyZXMgPSB7fTtcblxuLyoqXG4gKiBXYXJuIGlmIHRoZSBlbGVtZW50IGRvZXNuJ3QgaGF2ZSBhbiBleHBsaWNpdCBrZXkgYXNzaWduZWQgdG8gaXQuXG4gKiBUaGlzIGVsZW1lbnQgaXMgaW4gYW4gYXJyYXkuIFRoZSBhcnJheSBjb3VsZCBncm93IGFuZCBzaHJpbmsgb3IgYmVcbiAqIHJlb3JkZXJlZC4gQWxsIGNoaWxkcmVuIHRoYXQgaGF2ZW4ndCBhbHJlYWR5IGJlZW4gdmFsaWRhdGVkIGFyZSByZXF1aXJlZCB0b1xuICogaGF2ZSBhIFwia2V5XCIgcHJvcGVydHkgYXNzaWduZWQgdG8gaXQuXG4gKlxuICogQGludGVybmFsXG4gKiBAcGFyYW0ge1JlYWN0RWxlbWVudH0gZWxlbWVudCBFbGVtZW50IHRoYXQgcmVxdWlyZXMgYSBrZXkuXG4gKiBAcGFyYW0geyp9IHBhcmVudFR5cGUgZWxlbWVudCdzIHBhcmVudCdzIHR5cGUuXG4gKi9cbmZ1bmN0aW9uIHZhbGlkYXRlRXhwbGljaXRLZXkoZWxlbWVudCwgcGFyZW50VHlwZSkge1xuICBpZiAoIWVsZW1lbnQuX3N0b3JlIHx8IGVsZW1lbnQuX3N0b3JlLnZhbGlkYXRlZCB8fCBlbGVtZW50LmtleSAhPSBudWxsKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGVsZW1lbnQuX3N0b3JlLnZhbGlkYXRlZCA9IHRydWU7XG5cbiAgdmFyIGFkZGVuZGEgPSBnZXRBZGRlbmRhRm9yS2V5VXNlKCd1bmlxdWVLZXknLCBlbGVtZW50LCBwYXJlbnRUeXBlKTtcbiAgaWYgKGFkZGVuZGEgPT09IG51bGwpIHtcbiAgICAvLyB3ZSBhbHJlYWR5IHNob3dlZCB0aGUgd2FybmluZ1xuICAgIHJldHVybjtcbiAgfVxuICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ0VhY2ggY2hpbGQgaW4gYW4gYXJyYXkgb3IgaXRlcmF0b3Igc2hvdWxkIGhhdmUgYSB1bmlxdWUgXCJrZXlcIiBwcm9wLicgKyAnJXMlcyVzJywgYWRkZW5kYS5wYXJlbnRPck93bmVyIHx8ICcnLCBhZGRlbmRhLmNoaWxkT3duZXIgfHwgJycsIGFkZGVuZGEudXJsIHx8ICcnKSA6IHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBTaGFyZWQgd2FybmluZyBhbmQgbW9uaXRvcmluZyBjb2RlIGZvciB0aGUga2V5IHdhcm5pbmdzLlxuICpcbiAqIEBpbnRlcm5hbFxuICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2VUeXBlIEEga2V5IHVzZWQgZm9yIGRlLWR1cGluZyB3YXJuaW5ncy5cbiAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBlbGVtZW50IENvbXBvbmVudCB0aGF0IHJlcXVpcmVzIGEga2V5LlxuICogQHBhcmFtIHsqfSBwYXJlbnRUeXBlIGVsZW1lbnQncyBwYXJlbnQncyB0eXBlLlxuICogQHJldHVybnMgez9vYmplY3R9IEEgc2V0IG9mIGFkZGVuZGEgdG8gdXNlIGluIHRoZSB3YXJuaW5nIG1lc3NhZ2UsIG9yIG51bGxcbiAqIGlmIHRoZSB3YXJuaW5nIGhhcyBhbHJlYWR5IGJlZW4gc2hvd24gYmVmb3JlIChhbmQgc2hvdWxkbid0IGJlIHNob3duIGFnYWluKS5cbiAqL1xuZnVuY3Rpb24gZ2V0QWRkZW5kYUZvcktleVVzZShtZXNzYWdlVHlwZSwgZWxlbWVudCwgcGFyZW50VHlwZSkge1xuICB2YXIgYWRkZW5kdW0gPSBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0oKTtcbiAgaWYgKCFhZGRlbmR1bSkge1xuICAgIHZhciBwYXJlbnROYW1lID0gdHlwZW9mIHBhcmVudFR5cGUgPT09ICdzdHJpbmcnID8gcGFyZW50VHlwZSA6IHBhcmVudFR5cGUuZGlzcGxheU5hbWUgfHwgcGFyZW50VHlwZS5uYW1lO1xuICAgIGlmIChwYXJlbnROYW1lKSB7XG4gICAgICBhZGRlbmR1bSA9ICcgQ2hlY2sgdGhlIHRvcC1sZXZlbCByZW5kZXIgY2FsbCB1c2luZyA8JyArIHBhcmVudE5hbWUgKyAnPi4nO1xuICAgIH1cbiAgfVxuXG4gIHZhciBtZW1vaXplciA9IG93bmVySGFzS2V5VXNlV2FybmluZ1ttZXNzYWdlVHlwZV0gfHwgKG93bmVySGFzS2V5VXNlV2FybmluZ1ttZXNzYWdlVHlwZV0gPSB7fSk7XG4gIGlmIChtZW1vaXplclthZGRlbmR1bV0pIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBtZW1vaXplclthZGRlbmR1bV0gPSB0cnVlO1xuXG4gIHZhciBhZGRlbmRhID0ge1xuICAgIHBhcmVudE9yT3duZXI6IGFkZGVuZHVtLFxuICAgIHVybDogJyBTZWUgaHR0cHM6Ly9mYi5tZS9yZWFjdC13YXJuaW5nLWtleXMgZm9yIG1vcmUgaW5mb3JtYXRpb24uJyxcbiAgICBjaGlsZE93bmVyOiBudWxsXG4gIH07XG5cbiAgLy8gVXN1YWxseSB0aGUgY3VycmVudCBvd25lciBpcyB0aGUgb2ZmZW5kZXIsIGJ1dCBpZiBpdCBhY2NlcHRzIGNoaWxkcmVuIGFzIGFcbiAgLy8gcHJvcGVydHksIGl0IG1heSBiZSB0aGUgY3JlYXRvciBvZiB0aGUgY2hpbGQgdGhhdCdzIHJlc3BvbnNpYmxlIGZvclxuICAvLyBhc3NpZ25pbmcgaXQgYSBrZXkuXG4gIGlmIChlbGVtZW50ICYmIGVsZW1lbnQuX293bmVyICYmIGVsZW1lbnQuX293bmVyICE9PSBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50KSB7XG4gICAgLy8gR2l2ZSB0aGUgY29tcG9uZW50IHRoYXQgb3JpZ2luYWxseSBjcmVhdGVkIHRoaXMgY2hpbGQuXG4gICAgYWRkZW5kYS5jaGlsZE93bmVyID0gJyBJdCB3YXMgcGFzc2VkIGEgY2hpbGQgZnJvbSAnICsgZWxlbWVudC5fb3duZXIuZ2V0TmFtZSgpICsgJy4nO1xuICB9XG5cbiAgcmV0dXJuIGFkZGVuZGE7XG59XG5cbi8qKlxuICogRW5zdXJlIHRoYXQgZXZlcnkgZWxlbWVudCBlaXRoZXIgaXMgcGFzc2VkIGluIGEgc3RhdGljIGxvY2F0aW9uLCBpbiBhblxuICogYXJyYXkgd2l0aCBhbiBleHBsaWNpdCBrZXlzIHByb3BlcnR5IGRlZmluZWQsIG9yIGluIGFuIG9iamVjdCBsaXRlcmFsXG4gKiB3aXRoIHZhbGlkIGtleSBwcm9wZXJ0eS5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqIEBwYXJhbSB7UmVhY3ROb2RlfSBub2RlIFN0YXRpY2FsbHkgcGFzc2VkIGNoaWxkIG9mIGFueSB0eXBlLlxuICogQHBhcmFtIHsqfSBwYXJlbnRUeXBlIG5vZGUncyBwYXJlbnQncyB0eXBlLlxuICovXG5mdW5jdGlvbiB2YWxpZGF0ZUNoaWxkS2V5cyhub2RlLCBwYXJlbnRUeXBlKSB7XG4gIGlmICh0eXBlb2Ygbm9kZSAhPT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKEFycmF5LmlzQXJyYXkobm9kZSkpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGUubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBjaGlsZCA9IG5vZGVbaV07XG4gICAgICBpZiAoUmVhY3RFbGVtZW50LmlzVmFsaWRFbGVtZW50KGNoaWxkKSkge1xuICAgICAgICB2YWxpZGF0ZUV4cGxpY2l0S2V5KGNoaWxkLCBwYXJlbnRUeXBlKTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoUmVhY3RFbGVtZW50LmlzVmFsaWRFbGVtZW50KG5vZGUpKSB7XG4gICAgLy8gVGhpcyBlbGVtZW50IHdhcyBwYXNzZWQgaW4gYSB2YWxpZCBsb2NhdGlvbi5cbiAgICBpZiAobm9kZS5fc3RvcmUpIHtcbiAgICAgIG5vZGUuX3N0b3JlLnZhbGlkYXRlZCA9IHRydWU7XG4gICAgfVxuICB9IGVsc2UgaWYgKG5vZGUpIHtcbiAgICB2YXIgaXRlcmF0b3JGbiA9IGdldEl0ZXJhdG9yRm4obm9kZSk7XG4gICAgLy8gRW50cnkgaXRlcmF0b3JzIHByb3ZpZGUgaW1wbGljaXQga2V5cy5cbiAgICBpZiAoaXRlcmF0b3JGbikge1xuICAgICAgaWYgKGl0ZXJhdG9yRm4gIT09IG5vZGUuZW50cmllcykge1xuICAgICAgICB2YXIgaXRlcmF0b3IgPSBpdGVyYXRvckZuLmNhbGwobm9kZSk7XG4gICAgICAgIHZhciBzdGVwO1xuICAgICAgICB3aGlsZSAoIShzdGVwID0gaXRlcmF0b3IubmV4dCgpKS5kb25lKSB7XG4gICAgICAgICAgaWYgKFJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChzdGVwLnZhbHVlKSkge1xuICAgICAgICAgICAgdmFsaWRhdGVFeHBsaWNpdEtleShzdGVwLnZhbHVlLCBwYXJlbnRUeXBlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBBc3NlcnQgdGhhdCB0aGUgcHJvcHMgYXJlIHZhbGlkXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGNvbXBvbmVudE5hbWUgTmFtZSBvZiB0aGUgY29tcG9uZW50IGZvciBlcnJvciBtZXNzYWdlcy5cbiAqIEBwYXJhbSB7b2JqZWN0fSBwcm9wVHlwZXMgTWFwIG9mIHByb3AgbmFtZSB0byBhIFJlYWN0UHJvcFR5cGVcbiAqIEBwYXJhbSB7b2JqZWN0fSBwcm9wc1xuICogQHBhcmFtIHtzdHJpbmd9IGxvY2F0aW9uIGUuZy4gXCJwcm9wXCIsIFwiY29udGV4dFwiLCBcImNoaWxkIGNvbnRleHRcIlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY2hlY2tQcm9wVHlwZXMoY29tcG9uZW50TmFtZSwgcHJvcFR5cGVzLCBwcm9wcywgbG9jYXRpb24pIHtcbiAgZm9yICh2YXIgcHJvcE5hbWUgaW4gcHJvcFR5cGVzKSB7XG4gICAgaWYgKHByb3BUeXBlcy5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkpIHtcbiAgICAgIHZhciBlcnJvcjtcbiAgICAgIC8vIFByb3AgdHlwZSB2YWxpZGF0aW9uIG1heSB0aHJvdy4gSW4gY2FzZSB0aGV5IGRvLCB3ZSBkb24ndCB3YW50IHRvXG4gICAgICAvLyBmYWlsIHRoZSByZW5kZXIgcGhhc2Ugd2hlcmUgaXQgZGlkbid0IGZhaWwgYmVmb3JlLiBTbyB3ZSBsb2cgaXQuXG4gICAgICAvLyBBZnRlciB0aGVzZSBoYXZlIGJlZW4gY2xlYW5lZCB1cCwgd2UnbGwgbGV0IHRoZW0gdGhyb3cuXG4gICAgICB0cnkge1xuICAgICAgICAvLyBUaGlzIGlzIGludGVudGlvbmFsbHkgYW4gaW52YXJpYW50IHRoYXQgZ2V0cyBjYXVnaHQuIEl0J3MgdGhlIHNhbWVcbiAgICAgICAgLy8gYmVoYXZpb3IgYXMgd2l0aG91dCB0aGlzIHN0YXRlbWVudCBleGNlcHQgd2l0aCBhIGJldHRlciBtZXNzYWdlLlxuICAgICAgICAhKHR5cGVvZiBwcm9wVHlwZXNbcHJvcE5hbWVdID09PSAnZnVuY3Rpb24nKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICclczogJXMgdHlwZSBgJXNgIGlzIGludmFsaWQ7IGl0IG11c3QgYmUgYSBmdW5jdGlvbiwgdXN1YWxseSBmcm9tICcgKyAnUmVhY3QuUHJvcFR5cGVzLicsIGNvbXBvbmVudE5hbWUgfHwgJ1JlYWN0IGNsYXNzJywgUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXNbbG9jYXRpb25dLCBwcm9wTmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgICAgICBlcnJvciA9IHByb3BUeXBlc1twcm9wTmFtZV0ocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgbnVsbCwgJ1NFQ1JFVF9ET19OT1RfUEFTU19USElTX09SX1lPVV9XSUxMX0JFX0ZJUkVEJyk7XG4gICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICBlcnJvciA9IGV4O1xuICAgICAgfVxuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoIWVycm9yIHx8IGVycm9yIGluc3RhbmNlb2YgRXJyb3IsICclczogdHlwZSBzcGVjaWZpY2F0aW9uIG9mICVzIGAlc2AgaXMgaW52YWxpZDsgdGhlIHR5cGUgY2hlY2tlciAnICsgJ2Z1bmN0aW9uIG11c3QgcmV0dXJuIGBudWxsYCBvciBhbiBgRXJyb3JgIGJ1dCByZXR1cm5lZCBhICVzLiAnICsgJ1lvdSBtYXkgaGF2ZSBmb3Jnb3R0ZW4gdG8gcGFzcyBhbiBhcmd1bWVudCB0byB0aGUgdHlwZSBjaGVja2VyICcgKyAnY3JlYXRvciAoYXJyYXlPZiwgaW5zdGFuY2VPZiwgb2JqZWN0T2YsIG9uZU9mLCBvbmVPZlR5cGUsIGFuZCAnICsgJ3NoYXBlIGFsbCByZXF1aXJlIGFuIGFyZ3VtZW50KS4nLCBjb21wb25lbnROYW1lIHx8ICdSZWFjdCBjbGFzcycsIFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXSwgcHJvcE5hbWUsIHR5cGVvZiBlcnJvcikgOiB1bmRlZmluZWQ7XG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiAhKGVycm9yLm1lc3NhZ2UgaW4gbG9nZ2VkVHlwZUZhaWx1cmVzKSkge1xuICAgICAgICAvLyBPbmx5IG1vbml0b3IgdGhpcyBmYWlsdXJlIG9uY2UgYmVjYXVzZSB0aGVyZSB0ZW5kcyB0byBiZSBhIGxvdCBvZiB0aGVcbiAgICAgICAgLy8gc2FtZSBlcnJvci5cbiAgICAgICAgbG9nZ2VkVHlwZUZhaWx1cmVzW2Vycm9yLm1lc3NhZ2VdID0gdHJ1ZTtcblxuICAgICAgICB2YXIgYWRkZW5kdW0gPSBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0oKTtcbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdGYWlsZWQgcHJvcFR5cGU6ICVzJXMnLCBlcnJvci5tZXNzYWdlLCBhZGRlbmR1bSkgOiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogR2l2ZW4gYW4gZWxlbWVudCwgdmFsaWRhdGUgdGhhdCBpdHMgcHJvcHMgZm9sbG93IHRoZSBwcm9wVHlwZXMgZGVmaW5pdGlvbixcbiAqIHByb3ZpZGVkIGJ5IHRoZSB0eXBlLlxuICpcbiAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBlbGVtZW50XG4gKi9cbmZ1bmN0aW9uIHZhbGlkYXRlUHJvcFR5cGVzKGVsZW1lbnQpIHtcbiAgdmFyIGNvbXBvbmVudENsYXNzID0gZWxlbWVudC50eXBlO1xuICBpZiAodHlwZW9mIGNvbXBvbmVudENsYXNzICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBuYW1lID0gY29tcG9uZW50Q2xhc3MuZGlzcGxheU5hbWUgfHwgY29tcG9uZW50Q2xhc3MubmFtZTtcbiAgaWYgKGNvbXBvbmVudENsYXNzLnByb3BUeXBlcykge1xuICAgIGNoZWNrUHJvcFR5cGVzKG5hbWUsIGNvbXBvbmVudENsYXNzLnByb3BUeXBlcywgZWxlbWVudC5wcm9wcywgUmVhY3RQcm9wVHlwZUxvY2F0aW9ucy5wcm9wKTtcbiAgfVxuICBpZiAodHlwZW9mIGNvbXBvbmVudENsYXNzLmdldERlZmF1bHRQcm9wcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGNvbXBvbmVudENsYXNzLmdldERlZmF1bHRQcm9wcy5pc1JlYWN0Q2xhc3NBcHByb3ZlZCwgJ2dldERlZmF1bHRQcm9wcyBpcyBvbmx5IHVzZWQgb24gY2xhc3NpYyBSZWFjdC5jcmVhdGVDbGFzcyAnICsgJ2RlZmluaXRpb25zLiBVc2UgYSBzdGF0aWMgcHJvcGVydHkgbmFtZWQgYGRlZmF1bHRQcm9wc2AgaW5zdGVhZC4nKSA6IHVuZGVmaW5lZDtcbiAgfVxufVxuXG52YXIgUmVhY3RFbGVtZW50VmFsaWRhdG9yID0ge1xuXG4gIGNyZWF0ZUVsZW1lbnQ6IGZ1bmN0aW9uICh0eXBlLCBwcm9wcywgY2hpbGRyZW4pIHtcbiAgICB2YXIgdmFsaWRUeXBlID0gdHlwZW9mIHR5cGUgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiB0eXBlID09PSAnZnVuY3Rpb24nO1xuICAgIC8vIFdlIHdhcm4gaW4gdGhpcyBjYXNlIGJ1dCBkb24ndCB0aHJvdy4gV2UgZXhwZWN0IHRoZSBlbGVtZW50IGNyZWF0aW9uIHRvXG4gICAgLy8gc3VjY2VlZCBhbmQgdGhlcmUgd2lsbCBsaWtlbHkgYmUgZXJyb3JzIGluIHJlbmRlci5cbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyh2YWxpZFR5cGUsICdSZWFjdC5jcmVhdGVFbGVtZW50OiB0eXBlIHNob3VsZCBub3QgYmUgbnVsbCwgdW5kZWZpbmVkLCBib29sZWFuLCBvciAnICsgJ251bWJlci4gSXQgc2hvdWxkIGJlIGEgc3RyaW5nIChmb3IgRE9NIGVsZW1lbnRzKSBvciBhIFJlYWN0Q2xhc3MgJyArICcoZm9yIGNvbXBvc2l0ZSBjb21wb25lbnRzKS4lcycsIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bSgpKSA6IHVuZGVmaW5lZDtcblxuICAgIHZhciBlbGVtZW50ID0gUmVhY3RFbGVtZW50LmNyZWF0ZUVsZW1lbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblxuICAgIC8vIFRoZSByZXN1bHQgY2FuIGJlIG51bGxpc2ggaWYgYSBtb2NrIG9yIGEgY3VzdG9tIGZ1bmN0aW9uIGlzIHVzZWQuXG4gICAgLy8gVE9ETzogRHJvcCB0aGlzIHdoZW4gdGhlc2UgYXJlIG5vIGxvbmdlciBhbGxvd2VkIGFzIHRoZSB0eXBlIGFyZ3VtZW50LlxuICAgIGlmIChlbGVtZW50ID09IG51bGwpIHtcbiAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH1cblxuICAgIC8vIFNraXAga2V5IHdhcm5pbmcgaWYgdGhlIHR5cGUgaXNuJ3QgdmFsaWQgc2luY2Ugb3VyIGtleSB2YWxpZGF0aW9uIGxvZ2ljXG4gICAgLy8gZG9lc24ndCBleHBlY3QgYSBub24tc3RyaW5nL2Z1bmN0aW9uIHR5cGUgYW5kIGNhbiB0aHJvdyBjb25mdXNpbmcgZXJyb3JzLlxuICAgIC8vIFdlIGRvbid0IHdhbnQgZXhjZXB0aW9uIGJlaGF2aW9yIHRvIGRpZmZlciBiZXR3ZWVuIGRldiBhbmQgcHJvZC5cbiAgICAvLyAoUmVuZGVyaW5nIHdpbGwgdGhyb3cgd2l0aCBhIGhlbHBmdWwgbWVzc2FnZSBhbmQgYXMgc29vbiBhcyB0aGUgdHlwZSBpc1xuICAgIC8vIGZpeGVkLCB0aGUga2V5IHdhcm5pbmdzIHdpbGwgYXBwZWFyLilcbiAgICBpZiAodmFsaWRUeXBlKSB7XG4gICAgICBmb3IgKHZhciBpID0gMjsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YWxpZGF0ZUNoaWxkS2V5cyhhcmd1bWVudHNbaV0sIHR5cGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhbGlkYXRlUHJvcFR5cGVzKGVsZW1lbnQpO1xuXG4gICAgcmV0dXJuIGVsZW1lbnQ7XG4gIH0sXG5cbiAgY3JlYXRlRmFjdG9yeTogZnVuY3Rpb24gKHR5cGUpIHtcbiAgICB2YXIgdmFsaWRhdGVkRmFjdG9yeSA9IFJlYWN0RWxlbWVudFZhbGlkYXRvci5jcmVhdGVFbGVtZW50LmJpbmQobnVsbCwgdHlwZSk7XG4gICAgLy8gTGVnYWN5IGhvb2sgVE9ETzogV2FybiBpZiB0aGlzIGlzIGFjY2Vzc2VkXG4gICAgdmFsaWRhdGVkRmFjdG9yeS50eXBlID0gdHlwZTtcblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBpZiAoY2FuRGVmaW5lUHJvcGVydHkpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHZhbGlkYXRlZEZhY3RvcnksICd0eXBlJywge1xuICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdGYWN0b3J5LnR5cGUgaXMgZGVwcmVjYXRlZC4gQWNjZXNzIHRoZSBjbGFzcyBkaXJlY3RseSAnICsgJ2JlZm9yZSBwYXNzaW5nIGl0IHRvIGNyZWF0ZUZhY3RvcnkuJykgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ3R5cGUnLCB7XG4gICAgICAgICAgICAgIHZhbHVlOiB0eXBlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0eXBlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbGlkYXRlZEZhY3Rvcnk7XG4gIH0sXG5cbiAgY2xvbmVFbGVtZW50OiBmdW5jdGlvbiAoZWxlbWVudCwgcHJvcHMsIGNoaWxkcmVuKSB7XG4gICAgdmFyIG5ld0VsZW1lbnQgPSBSZWFjdEVsZW1lbnQuY2xvbmVFbGVtZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgZm9yICh2YXIgaSA9IDI7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhbGlkYXRlQ2hpbGRLZXlzKGFyZ3VtZW50c1tpXSwgbmV3RWxlbWVudC50eXBlKTtcbiAgICB9XG4gICAgdmFsaWRhdGVQcm9wVHlwZXMobmV3RWxlbWVudCk7XG4gICAgcmV0dXJuIG5ld0VsZW1lbnQ7XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdEVsZW1lbnRWYWxpZGF0b3I7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0L2xpYi9SZWFjdEVsZW1lbnRWYWxpZGF0b3IuanNcbi8vIG1vZHVsZSBpZCA9IDE1NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgbWFwT2JqZWN0XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIEV4ZWN1dGVzIHRoZSBwcm92aWRlZCBgY2FsbGJhY2tgIG9uY2UgZm9yIGVhY2ggZW51bWVyYWJsZSBvd24gcHJvcGVydHkgaW4gdGhlXG4gKiBvYmplY3QgYW5kIGNvbnN0cnVjdHMgYSBuZXcgb2JqZWN0IGZyb20gdGhlIHJlc3VsdHMuIFRoZSBgY2FsbGJhY2tgIGlzXG4gKiBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzOlxuICpcbiAqICAtIHRoZSBwcm9wZXJ0eSB2YWx1ZVxuICogIC0gdGhlIHByb3BlcnR5IG5hbWVcbiAqICAtIHRoZSBvYmplY3QgYmVpbmcgdHJhdmVyc2VkXG4gKlxuICogUHJvcGVydGllcyB0aGF0IGFyZSBhZGRlZCBhZnRlciB0aGUgY2FsbCB0byBgbWFwT2JqZWN0YCB3aWxsIG5vdCBiZSB2aXNpdGVkXG4gKiBieSBgY2FsbGJhY2tgLiBJZiB0aGUgdmFsdWVzIG9mIGV4aXN0aW5nIHByb3BlcnRpZXMgYXJlIGNoYW5nZWQsIHRoZSB2YWx1ZVxuICogcGFzc2VkIHRvIGBjYWxsYmFja2Agd2lsbCBiZSB0aGUgdmFsdWUgYXQgdGhlIHRpbWUgYG1hcE9iamVjdGAgdmlzaXRzIHRoZW0uXG4gKiBQcm9wZXJ0aWVzIHRoYXQgYXJlIGRlbGV0ZWQgYmVmb3JlIGJlaW5nIHZpc2l0ZWQgYXJlIG5vdCB2aXNpdGVkLlxuICpcbiAqIEBncmVwIGZ1bmN0aW9uIG9iamVjdE1hcCgpXG4gKiBAZ3JlcCBmdW5jdGlvbiBvYmpNYXAoKVxuICpcbiAqIEBwYXJhbSB7P29iamVjdH0gb2JqZWN0XG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFja1xuICogQHBhcmFtIHsqfSBjb250ZXh0XG4gKiBAcmV0dXJuIHs/b2JqZWN0fVxuICovXG5mdW5jdGlvbiBtYXBPYmplY3Qob2JqZWN0LCBjYWxsYmFjaywgY29udGV4dCkge1xuICBpZiAoIW9iamVjdCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHZhciByZXN1bHQgPSB7fTtcbiAgZm9yICh2YXIgbmFtZSBpbiBvYmplY3QpIHtcbiAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIG5hbWUpKSB7XG4gICAgICByZXN1bHRbbmFtZV0gPSBjYWxsYmFjay5jYWxsKGNvbnRleHQsIG9iamVjdFtuYW1lXSwgbmFtZSwgb2JqZWN0KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBtYXBPYmplY3Q7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2ZianMvbGliL21hcE9iamVjdC5qc1xuLy8gbW9kdWxlIGlkID0gMTU1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBvbmx5Q2hpbGRcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RFbGVtZW50ID0gcmVxdWlyZSgnLi9SZWFjdEVsZW1lbnQnKTtcblxudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xuXG4vKipcbiAqIFJldHVybnMgdGhlIGZpcnN0IGNoaWxkIGluIGEgY29sbGVjdGlvbiBvZiBjaGlsZHJlbiBhbmQgdmVyaWZpZXMgdGhhdCB0aGVyZVxuICogaXMgb25seSBvbmUgY2hpbGQgaW4gdGhlIGNvbGxlY3Rpb24uIFRoZSBjdXJyZW50IGltcGxlbWVudGF0aW9uIG9mIHRoaXNcbiAqIGZ1bmN0aW9uIGFzc3VtZXMgdGhhdCBhIHNpbmdsZSBjaGlsZCBnZXRzIHBhc3NlZCB3aXRob3V0IGEgd3JhcHBlciwgYnV0IHRoZVxuICogcHVycG9zZSBvZiB0aGlzIGhlbHBlciBmdW5jdGlvbiBpcyB0byBhYnN0cmFjdCBhd2F5IHRoZSBwYXJ0aWN1bGFyIHN0cnVjdHVyZVxuICogb2YgY2hpbGRyZW4uXG4gKlxuICogQHBhcmFtIHs/b2JqZWN0fSBjaGlsZHJlbiBDaGlsZCBjb2xsZWN0aW9uIHN0cnVjdHVyZS5cbiAqIEByZXR1cm4ge1JlYWN0Q29tcG9uZW50fSBUaGUgZmlyc3QgYW5kIG9ubHkgYFJlYWN0Q29tcG9uZW50YCBjb250YWluZWQgaW4gdGhlXG4gKiBzdHJ1Y3R1cmUuXG4gKi9cbmZ1bmN0aW9uIG9ubHlDaGlsZChjaGlsZHJlbikge1xuICAhUmVhY3RFbGVtZW50LmlzVmFsaWRFbGVtZW50KGNoaWxkcmVuKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdvbmx5Q2hpbGQgbXVzdCBiZSBwYXNzZWQgYSBjaGlsZHJlbiB3aXRoIGV4YWN0bHkgb25lIGNoaWxkLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgcmV0dXJuIGNoaWxkcmVuO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG9ubHlDaGlsZDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QvbGliL29ubHlDaGlsZC5qc1xuLy8gbW9kdWxlIGlkID0gMTU2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBkZXByZWNhdGVkXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxuLyoqXG4gKiBUaGlzIHdpbGwgbG9nIGEgc2luZ2xlIGRlcHJlY2F0aW9uIG5vdGljZSBwZXIgZnVuY3Rpb24gYW5kIGZvcndhcmQgdGhlIGNhbGxcbiAqIG9uIHRvIHRoZSBuZXcgQVBJLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBmbk5hbWUgVGhlIG5hbWUgb2YgdGhlIGZ1bmN0aW9uXG4gKiBAcGFyYW0ge3N0cmluZ30gbmV3TW9kdWxlIFRoZSBtb2R1bGUgdGhhdCBmbiB3aWxsIGV4aXN0IGluXG4gKiBAcGFyYW0ge3N0cmluZ30gbmV3UGFja2FnZSBUaGUgbW9kdWxlIHRoYXQgZm4gd2lsbCBleGlzdCBpblxuICogQHBhcmFtIHsqfSBjdHggVGhlIGNvbnRleHQgdGhpcyBmb3J3YXJkZWQgY2FsbCBzaG91bGQgcnVuIGluXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gZm9yd2FyZCBvbiB0b1xuICogQHJldHVybiB7ZnVuY3Rpb259IFRoZSBmdW5jdGlvbiB0aGF0IHdpbGwgd2FybiBvbmNlIGFuZCB0aGVuIGNhbGwgZm5cbiAqL1xuZnVuY3Rpb24gZGVwcmVjYXRlZChmbk5hbWUsIG5ld01vZHVsZSwgbmV3UGFja2FnZSwgY3R4LCBmbikge1xuICB2YXIgd2FybmVkID0gZmFsc2U7XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgdmFyIG5ld0ZuID0gZnVuY3Rpb24gKCkge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcod2FybmVkLFxuICAgICAgLy8gUmVxdWlyZSBleGFtcGxlcyBpbiB0aGlzIHN0cmluZyBtdXN0IGJlIHNwbGl0IHRvIHByZXZlbnQgUmVhY3Qnc1xuICAgICAgLy8gYnVpbGQgdG9vbHMgZnJvbSBtaXN0YWtpbmcgdGhlbSBmb3IgcmVhbCByZXF1aXJlcy5cbiAgICAgIC8vIE90aGVyd2lzZSB0aGUgYnVpbGQgdG9vbHMgd2lsbCBhdHRlbXB0IHRvIGJ1aWxkIGEgJyVzJyBtb2R1bGUuXG4gICAgICAnUmVhY3QuJXMgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSAlcy4lcyBmcm9tIHJlcXVpcmUnICsgJyhcXCclc1xcJykgJyArICdpbnN0ZWFkLicsIGZuTmFtZSwgbmV3TW9kdWxlLCBmbk5hbWUsIG5ld1BhY2thZ2UpIDogdW5kZWZpbmVkO1xuICAgICAgd2FybmVkID0gdHJ1ZTtcbiAgICAgIHJldHVybiBmbi5hcHBseShjdHgsIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgICAvLyBXZSBuZWVkIHRvIG1ha2Ugc3VyZSBhbGwgcHJvcGVydGllcyBvZiB0aGUgb3JpZ2luYWwgZm4gYXJlIGNvcGllZCBvdmVyLlxuICAgIC8vIEluIHBhcnRpY3VsYXIsIHRoaXMgaXMgbmVlZGVkIHRvIHN1cHBvcnQgUHJvcFR5cGVzXG4gICAgcmV0dXJuIGFzc2lnbihuZXdGbiwgZm4pO1xuICB9XG5cbiAgcmV0dXJuIGZuO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGRlcHJlY2F0ZWQ7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0L2xpYi9kZXByZWNhdGVkLmpzXG4vLyBtb2R1bGUgaWQgPSAxNTdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJ3JlYWN0L2xpYi9SZWFjdERPTScpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LWRvbS9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMTU4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgQm9keSBmcm9tICcuL2JvZHkuanN4JztcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IENvbnRhaW5lciB9IGZyb20gJ2ZsdXgvdXRpbHMnO1xuaW1wb3J0IFJlY2lwZVN0b3JlIGZyb20gJy4vcmVjaXBlU3RvcmUuanMnO1xuaW1wb3J0IEFjdGlvbnMgZnJvbSAnLi9hY3Rpb25zLmpzJztcblxuY2xhc3MgU2l0ZUNvbnRhaW5lciBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgc3RhdGljIGdldFN0b3JlcygpIHtcbiAgICAgICAgcmV0dXJuIFtSZWNpcGVTdG9yZV07XG4gICAgfVxuICAgIHN0YXRpYyBjYWxjdWxhdGVTdGF0ZShwcmV2U3RhdGUpIHtcbiAgICAgICAgcmV0dXJuIFJlY2lwZVN0b3JlLmdldFN0YXRlKCk7XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgdmFyIG9wZW5Db250ZW50ID0gbnVsbDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnN0YXRlLm9wZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLm9wZW5baV0uYWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgb3BlbkNvbnRlbnQgPSB0aGlzLnN0YXRlLm9wZW5baV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy9jb25zb2xlLmxvZyhvcGVuQ29udGVudCk7XG4gICAgICAgIC8vY29uc29sZS5sb2codGhpcy5zdGF0ZSk7XG4gICAgICAgIHJldHVybiAoPEJvZHlcbiAgICAgICAgICAgIHNPcGVuQ29udGVudD17b3BlbkNvbnRlbnR9XG4gICAgICAgICAgICBzT3Blbkxpc3Q9e3RoaXMuc3RhdGUub3Blbn1cbiAgICAgICAgICAgIHNVc2VyPXt0aGlzLnN0YXRlLnVzZXJ9XG4gICAgICAgICAgICBzQXV0aGVudGljYXRlPXt0aGlzLnN0YXRlLmF1dGhlbnRpY2F0ZX1cbiAgICAgICAgICAgIHNOb3RpZnk9e3RoaXMuc3RhdGUubm90aWZ5fVxuICAgICAgICBcbiAgICAgICAgICAgIGFOZXdSZWNpcGU9e0FjdGlvbnMubmV3UmVjaXBlfVxuICAgICAgICAgICAgYVNhdmVSZWNpcGU9e0FjdGlvbnMuc2F2ZVJlY2lwZX1cbiAgICAgICAgICAgIGFHZXRSZWNpcGU9e0FjdGlvbnMuZ2V0UmVjaXBlfVxuICAgICAgICAgICAgYUNsb3NlUmVjaXBlPXtBY3Rpb25zLmNsb3NlUmVjaXBlfVxuICAgICAgICAgICAgYUFkZEluZ3JlZGllbnQ9e0FjdGlvbnMuYWRkSW5ncmVkaWVudH1cbiAgICAgICAgICAgIGFBZGRTdGVwPXtBY3Rpb25zLmFkZFN0ZXB9XG4gICAgICAgICAgICBhVXBkYXRlVmFsdWU9e0FjdGlvbnMudXBkYXRlVmFsdWV9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGFOb3RpZnk9e0FjdGlvbnMubm90aWZ5fVxuICAgICAgICAgICAgYUF1dGhlbnRpY2F0ZT17QWN0aW9ucy5hdXRoZW50aWNhdGV9XG4gICAgICAgICAgICBhT3BlbkNvbnRlbnQ9e0FjdGlvbnMub3BlbkNvbnRlbnR9XG4gICAgICAgICAgICBhU2VydmVyUmVxdWVzdD17QWN0aW9ucy5zZXJ2ZXJSZXF1ZXN0fVxuICAgICAgICAgICAgYVVwZGF0ZVVzZXJTdGF0dXM9e0FjdGlvbnMudXBkYXRlVXNlclN0YXR1c31cbiAgICAgICAgICAgIGFSZWdpc3Rlcj17QWN0aW9ucy5yZWdpc3Rlcn1cbiAgICAgICAgICAgIGFMb2dpbj17QWN0aW9ucy5sb2dpbn1cbiAgICAgICAgICAgIGFMb2dvdXQ9e0FjdGlvbnMubG9nb3V0fVxuICAgICAgICAgICAgYVVwZGF0ZVBhc3N3b3JkPXtBY3Rpb25zLnVwZGF0ZVBhc3N3b3JkfVxuICAgICAgICAvPik7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDb250YWluZXIuY3JlYXRlKFNpdGVDb250YWluZXIpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vcm9vdC9saWIvY29udGFpbmVyLmpzeCIsInJlcXVpcmUoXCIuLi9zdHlsZS9tYWluLnNjc3NcIik7XG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUmVhY3RET00gZnJvbSAncmVhY3QtZG9tJztcbmltcG9ydCBIZWFkZXIgZnJvbSAnLi4vY29tcG9uZW50cy9oZWFkZXIuanN4JztcbmltcG9ydCBOYXZpZ2F0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvbmF2aWdhdGlvbi5qc3gnO1xuaW1wb3J0IFJlY2lwZSBmcm9tICcuLi9jb21wb25lbnRzL3JlY2lwZS5qc3gnO1xuaW1wb3J0IEhvbWUgZnJvbSAnLi4vY29tcG9uZW50cy9ob21lLmpzeCc7XG5pbXBvcnQgVXNlclNldHRpbmdzIGZyb20gJy4uL2NvbXBvbmVudHMvdXNlclNldHRpbmdzLmpzeCc7XG5pbXBvcnQgQXV0aGVudGljYXRpb24gZnJvbSAnLi4vY29tcG9uZW50cy9hdXRoZW50aWNhdGlvbi5qc3gnO1xuaW1wb3J0IE5vdGlmeSBmcm9tICcuLi9jb21wb25lbnRzL25vdGlmeS5qc3gnO1xuXG52YXIgQm9keSA9IFJlYWN0LmNyZWF0ZUNsYXNzKHsgXG4gICAgYXBwQXV0aGVudGljYXRlOiBudWxsLFxuICAgIGFwcEJvZHk6IG51bGwsICBcbiAgICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2hvd0xvZ2luOiBmYWxzZSxcbiAgICAgICAgICAgIHNob3dSZWdpc3RlcjogZmFsc2VcbiAgICAgICAgfVxuICAgIH0sXG4gICAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmFwcEF1dGhlbnRpY2F0ZSA9IFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMpLnF1ZXJ5U2VsZWN0b3IoXCIuYXBwLWF1dGhlbnRpY2F0ZVwiKTtcbiAgICAgICAgdGhpcy5hcHBCb2R5ID0gUmVhY3RET00uZmluZERPTU5vZGUodGhpcykucXVlcnlTZWxlY3RvcihcIi5hcHAtYm9keVwiKTtcbiAgICAgICAgdGhpcy5oYW5kbGVMb2FkKCk7XG4gICAgfSwgXG4gICAgY29tcG9uZW50RGlkVXBkYXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVMb2FkKCk7XG4gICAgfSxcbiAgICBoYW5kbGVMb2FkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuc0F1dGhlbnRpY2F0ZS5hY3RpdmUpIHtcbiAgICAgICAgICAgIHRoaXMuYXBwQXV0aGVudGljYXRlLmNsYXNzTGlzdC5hZGQoXCJzaG93XCIpO1xuICAgICAgICAgICAgdGhpcy5hcHBCb2R5LmNsYXNzTGlzdC5hZGQoXCJoaWRlXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gUmV2ZXJzZSB0aGUgYW5pbWF0aW9uIGRlbGF5XG4gICAgICAgICAgICB0aGlzLmFwcEF1dGhlbnRpY2F0ZS5jbGFzc0xpc3QuYWRkKFwiaGlkZVwiKTtcbiAgICAgICAgICAgIHRoaXMuYXBwQm9keS5jbGFzc0xpc3QuYWRkKFwic2hvd1wiKTtcblxuICAgICAgICAgICAgLy8gUHVsbCBvZmYgY2xhc3NlcyB0aGF0IGFuaW1hdGUgXG4gICAgICAgICAgICB0aGlzLmFwcEF1dGhlbnRpY2F0ZS5jbGFzc0xpc3QucmVtb3ZlKFwic2hvd1wiKTtcbiAgICAgICAgICAgIHRoaXMuYXBwQm9keS5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZVwiKTtcblxuICAgICAgICAgICAgLy8gQ2xlYW4gdXAgd2hlbiBhbmltYXRpb25zIGFyZSBmaW5pc2hlZFxuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmFwcEF1dGhlbnRpY2F0ZS5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZVwiKTtcbiAgICAgICAgICAgICAgICBzZWxmLmFwcEJvZHkuY2xhc3NMaXN0LnJlbW92ZShcInNob3dcIik7XG4gICAgICAgICAgICB9LCAxMDAwKTsgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgfSxcbiAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgb3BlbkNvbnRlbnQ7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLnNPcGVuQ29udGVudC5pZCA9PSBcImhvbWVcIikge1xuICAgICAgICAgICAgb3BlbkNvbnRlbnQgPSAoPEhvbWUgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNIb21lPXt0aGlzLnByb3BzLnNPcGVuQ29udGVudH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYUdldFJlY2lwZT17dGhpcy5wcm9wcy5hR2V0UmVjaXBlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+KTtcbiAgICAgICAgfSBlbHNlIGlmKHRoaXMucHJvcHMuc09wZW5Db250ZW50LmlkID09IFwidXNlclwiKSB7XG4gICAgICAgICAgICBvcGVuQ29udGVudCA9ICg8VXNlclNldHRpbmdzIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzVXNlcj17dGhpcy5wcm9wcy5zVXNlcn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYVVwZGF0ZVVzZXJTdGF0dXM9e3RoaXMucHJvcHMuYVVwZGF0ZVVzZXJTdGF0dXN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb3BlbkNvbnRlbnQgPSAoPFJlY2lwZSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjaXBlPXt0aGlzLnByb3BzLnNPcGVuQ29udGVudC5yZWNpcGV9IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzVXNlcj17dGhpcy5wcm9wcy5zVXNlcn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYVNhdmVSZWNpcGU9e3RoaXMucHJvcHMuYVNhdmVSZWNpcGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFBZGRJbmdyZWRpZW50PXt0aGlzLnByb3BzLmFBZGRJbmdyZWRpZW50fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhQWRkU3RlcD17dGhpcy5wcm9wcy5hQWRkU3RlcH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYVVwZGF0ZVZhbHVlPXt0aGlzLnByb3BzLmFVcGRhdGVWYWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYVNlcnZlclJlcXVlc3Q9e3RoaXMucHJvcHMuYVNlcnZlclJlcXVlc3R9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFHZXRSZWNpcGU9e3RoaXMucHJvcHMuYUdldFJlY2lwZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYU5vdGlmeT17dGhpcy5wcm9wcy5hTm90aWZ5fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+KTtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICByZXR1cm4gKDxzZWN0aW9uIGNsYXNzTmFtZT1cImFwcFwiPlxuICAgICAgICAgICAgPE5vdGlmeVxuICAgICAgICAgICAgICAgIHNOb3RpZnk9e3RoaXMucHJvcHMuc05vdGlmeX1cbiAgICAgICAgICAgICAgICBhTm90aWZ5PXt0aGlzLnByb3BzLmFOb3RpZnl9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPHNlY3Rpb24gY2xhc3NOYW1lPVwiYXBwLWF1dGhlbnRpY2F0ZVwiPlxuICAgICAgICAgICAgICAgIDxBdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgICAgICAgICBzQXV0aGVudGljYXRlPXt0aGlzLnByb3BzLnNBdXRoZW50aWNhdGV9XG4gICAgICAgICAgICAgICAgICAgIGFBdXRoZW50aWNhdGU9e3RoaXMucHJvcHMuYUF1dGhlbnRpY2F0ZX1cbiAgICAgICAgICAgICAgICAgICAgYVJlZ2lzdGVyPXt0aGlzLnByb3BzLmFSZWdpc3Rlcn1cbiAgICAgICAgICAgICAgICAgICAgYUxvZ2luPXt0aGlzLnByb3BzLmFMb2dpbn1cbiAgICAgICAgICAgICAgICAgICAgYVVwZGF0ZVBhc3N3b3JkPXt0aGlzLnByb3BzLmFVcGRhdGVQYXNzd29yZH1cbiAgICAgICAgICAgICAgICAgICAgYU5vdGlmeT17dGhpcy5wcm9wcy5hTm90aWZ5fVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L3NlY3Rpb24+XG4gICAgICAgICAgICA8c2VjdGlvbiBjbGFzc05hbWU9XCJhcHAtYm9keVwiPlxuICAgICAgICAgICAgICAgIDxOYXZpZ2F0aW9uIFxuICAgICAgICAgICAgICAgICAgICBzT3Blbkxpc3Q9e3RoaXMucHJvcHMuc09wZW5MaXN0fVxuICAgICAgICAgICAgICAgICAgICBzVXNlcj17dGhpcy5wcm9wcy5zVXNlcn1cbiAgICAgICAgICAgICAgICAgICAgYU9wZW5Db250ZW50PXt0aGlzLnByb3BzLmFPcGVuQ29udGVudH1cbiAgICAgICAgICAgICAgICAgICAgYU5ld1JlY2lwZT17dGhpcy5wcm9wcy5hTmV3UmVjaXBlfVxuICAgICAgICAgICAgICAgICAgICBhQ2xvc2VSZWNpcGU9e3RoaXMucHJvcHMuYUNsb3NlUmVjaXBlfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzaXRlLWJvZHlcIj5cbiAgICAgICAgICAgICAgICAgICAgPEhlYWRlciBcbiAgICAgICAgICAgICAgICAgICAgICAgIHNVc2VyPXt0aGlzLnByb3BzLnNVc2VyfVxuICAgICAgICAgICAgICAgICAgICAgICAgYUF1dGhlbnRpY2F0ZT17dGhpcy5wcm9wcy5hQXV0aGVudGljYXRlfVxuICAgICAgICAgICAgICAgICAgICAgICAgYUdldFJlY2lwZT17dGhpcy5wcm9wcy5hR2V0UmVjaXBlfVxuICAgICAgICAgICAgICAgICAgICAgICAgYVNlcnZlclJlcXVlc3Q9e3RoaXMucHJvcHMuYVNlcnZlclJlcXVlc3R9XG4gICAgICAgICAgICAgICAgICAgICAgICBhTG9nb3V0PXt0aGlzLnByb3BzLmFMb2dvdXR9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDxtYWluIGNsYXNzTmFtZT1cIm9wZW4tY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge29wZW5Db250ZW50fVxuICAgICAgICAgICAgICAgICAgICA8L21haW4+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L3NlY3Rpb24+XG4gICAgICAgIDwvc2VjdGlvbj4pO1xuICAgIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBCb2R5O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3Jvb3QvbGliL2JvZHkuanN4IiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IFNlYXJjaCBmcm9tICcuL3NlYXJjaC5qc3gnO1xuXG5yZXF1aXJlKFwiLi4vc3R5bGUvY29tcG9uZW50cy9oZWFkZXIuc2Nzc1wiKTtcblxudmFyIEhlYWRlciA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgICB1c2VyTWVudTogbnVsbCxcbiAgICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMudXNlck1lbnUgPSBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKS5xdWVyeVNlbGVjdG9yKFwiLnVzZXItbWVudVwiKTtcbiAgICB9LFxuICAgIGhhbmRsZURpc21pc3NPbkNsaWNrOiBmdW5jdGlvbihlKSB7ICAgICAgICBcbiAgICAgICAgdmFyIGN1cnJlbnROb2RlID0gZS50YXJnZXQ7XG4gICAgICAgIHZhciBpc0Zyb21NZW51ID0gZmFsc2U7XG4gICAgICAgIHdoaWxlKGN1cnJlbnROb2RlICYmIGN1cnJlbnROb2RlICE9IGRvY3VtZW50LmJvZHkpIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50Tm9kZSA9PSB0aGlzLnVzZXJNZW51KSB7XG4gICAgICAgICAgICAgICAgaXNGcm9tTWVudSA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJyZW50Tm9kZSA9IGN1cnJlbnROb2RlLnBhcmVudE5vZGU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWlzRnJvbU1lbnUpIHtcbiAgICAgICAgICAgIHRoaXMudXNlck1lbnUuY2xhc3NMaXN0LnJlbW92ZShcInNob3ctbWVudVwiKTtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5oYW5kbGVEaXNtaXNzT25DbGljayk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGhhbmRsZVVzZXJNZW51Q2xpY2s6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICBpZiAodGhpcy51c2VyTWVudS5jbGFzc0xpc3QuY29udGFpbnMoXCJzaG93LW1lbnVcIikpIHtcbiAgICAgICAgICAgIHRoaXMudXNlck1lbnUuY2xhc3NMaXN0LnJlbW92ZShcInNob3ctbWVudVwiKTtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5oYW5kbGVEaXNtaXNzT25DbGljayk7ICAgICAgICAgICAgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnVzZXJNZW51LmNsYXNzTGlzdC5hZGQoXCJzaG93LW1lbnVcIik7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuaGFuZGxlRGlzbWlzc09uQ2xpY2spO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBoYW5kbGVBdXRoZW50aWNhdGU6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5hQXV0aGVudGljYXRlKHRydWUsIFwibG9naW5cIik7XG4gICAgfSxcbiAgICBoYW5kbGVMb2dvdXQ6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMucHJvcHMuYUxvZ291dCgpO1xuICAgIH0sXG4gICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHVzZXJNZW51ID0gPG5hdiBjbGFzc05hbWU9XCJ1c2VyLW1lbnVcIj5cbiAgICAgICAgICAgIDxhIGNsYXNzTmFtZT1cInVzZXItbGFiZWxcIiBvbkNsaWNrPXt0aGlzLmhhbmRsZUF1dGhlbnRpY2F0ZX0+TG9nIGluPC9hPlxuICAgICAgICA8L25hdj47XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMuc1VzZXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgdXNlck1lbnUgPSAoPG5hdiBjbGFzc05hbWU9XCJ1c2VyLW1lbnVcIj5cbiAgICAgICAgICAgICAgICA8YSBvbkNsaWNrPXt0aGlzLmhhbmRsZVVzZXJNZW51Q2xpY2t9PlxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwidXNlci1sYWJlbFwiPnt0aGlzLnByb3BzLnNVc2VyLmZpcnN0TmFtZSArIFwiIFwiICsgdGhpcy5wcm9wcy5zVXNlci5sYXN0TmFtZX08L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRpLWFuZ2xlLWRvd25cIj48L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtZW51LW9wdGlvbnNcIj5cbiAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3NOYW1lPVwiaXRlbVwiIG9uQ2xpY2s9e3RoaXMuaGFuZGxlTG9nb3V0fT5Mb2cgb3V0PC9hPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9uYXY+KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuICg8aGVhZGVyIGNsYXNzTmFtZT1cImhlYWRlci1jb250ZW50XCI+XG4gICAgICAgICAgICA8U2VhcmNoIFxuICAgICAgICAgICAgICAgIGFHZXRSZWNpcGU9e3RoaXMucHJvcHMuYUdldFJlY2lwZX1cbiAgICAgICAgICAgICAgICBhU2VydmVyUmVxdWVzdD17dGhpcy5wcm9wcy5hU2VydmVyUmVxdWVzdH0gXG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAge3VzZXJNZW51fVxuICAgICAgICA8L2hlYWRlcj5cbiAgICAgICAgKTtcbiAgICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgSGVhZGVyO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vcm9vdC9jb21wb25lbnRzL2hlYWRlci5qc3giLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSc7XG5pbXBvcnQgUmVjaXBlIGZyb20gJy4vcmVjaXBlLmpzeCc7XG5pbXBvcnQgQWN0aW9ucyBmcm9tICcuLi9saWIvYWN0aW9ucy5qcyc7XG5cbnJlcXVpcmUoXCIuLi9zdHlsZS9jb21wb25lbnRzL3NlYXJjaC5zY3NzXCIpO1xuXG5jb25zdCBTZWFyY2ggPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4gICAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmdWxsTGlzdDogW10sXG4gICAgICAgICAgICBmaWx0ZXJlZExpc3Q6IFtdLFxuICAgICAgICAgICAgc2VhcmNoVGVybXM6IFtdLFxuICAgICAgICAgICAgYWN0aXZlSW5kZXg6IDBcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIGdldFJlZ0V4T2JqOiBmdW5jdGlvbihzZWFyY2hSZWdFeCkge1xuICAgICAgICB2YXIgcmV0dXJuT2JqID0gbnVsbDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybk9iaiA9IG5ldyBSZWdFeHAoc2VhcmNoUmVnRXgsIFwiaVwiKTtcbiAgICAgICAgfSBjYXRjaCAoZSkgeyB9XG4gICAgICAgIHJldHVybiByZXR1cm5PYmo7XG4gICAgfSxcbiAgICBnZXRIaWdobGlnaHRlZFRpdGxlOiBmdW5jdGlvbih0aXRsZSkge1xuICAgICAgICB2YXIgdGl0bGVIVE1MID0gdGl0bGU7XG4gICAgICAgIHZhciB3aGVyZVRvU3RhcnQgPSAwO1xuICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHRoaXMuc3RhdGUuc2VhcmNoVGVybXMubGVuZ3RoOyB4KyspIHtcbiAgICAgICAgICAgIHZhciB0ZXJtID0gdGhpcy5zdGF0ZS5zZWFyY2hUZXJtc1t4XTtcbiAgICAgICAgICAgIGlmICh0ZXJtID09IFwiXCIpIGNvbnRpbnVlO1xuICAgICAgICAgICAgdmFyIHJlZ0V4T2JqID0gdGhpcy5nZXRSZWdFeE9iaih0ZXJtKTtcbiAgICAgICAgICAgIHZhciBtYXRjaCA9IHRpdGxlSFRNTC5zdWJzdHJpbmcod2hlcmVUb1N0YXJ0LCB0aXRsZUhUTUwubGVuZ3RoKS5tYXRjaChyZWdFeE9iaik7XG4gICAgICAgICAgICB2YXIgcmVwbGFjZW1lbnQgPSBcIjxzcGFuIGNsYXNzPSdoaWdobGlnaHQnPlwiICsgbWF0Y2hbMF0gKyBcIjwvc3Bhbj5cIjtcblxuICAgICAgICAgICAgdmFyIGJlZm9yZVN0cmluZyA9IHRpdGxlSFRNTC5zdWJzdHJpbmcoMCwgd2hlcmVUb1N0YXJ0KTtcbiAgICAgICAgICAgIHZhciBhZnRlclN0cmluZyA9IHRpdGxlSFRNTC5zdWJzdHJpbmcod2hlcmVUb1N0YXJ0LCB0aXRsZUhUTUwubGVuZ3RoKTtcblxuICAgICAgICAgICAgdGl0bGVIVE1MID0gYmVmb3JlU3RyaW5nICsgYWZ0ZXJTdHJpbmcucmVwbGFjZShyZWdFeE9iaiwgcmVwbGFjZW1lbnQpO1xuICAgICAgICAgICAgd2hlcmVUb1N0YXJ0ICs9IG1hdGNoLmluZGV4ICsgcmVwbGFjZW1lbnQubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IF9faHRtbDogdGl0bGVIVE1MIH07XG4gICAgfSxcbiAgICBnZXRSZWNpcGVIVE1MOiBmdW5jdGlvbiAocmVjaXBlLCBpbmRleCkge1xuICAgICAgICB2YXIgcm93Q2xhc3NlcyA9IFwicm93XCI7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmFjdGl2ZUluZGV4ID09IGluZGV4KSB7XG4gICAgICAgICAgICByb3dDbGFzc2VzICs9IFwiIGFjdGl2ZVwiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoPGRpdiBjbGFzc05hbWU9e3Jvd0NsYXNzZXN9IGtleT17cmVjaXBlLmlkfSBkYXRhLWlkPXtyZWNpcGUuaWR9IG9uQ2xpY2s9e3RoaXMuc2VsZWN0fT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93LWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICA8aW1nIGNsYXNzTmFtZT1cImltYWdlXCIgc3JjPXtyZWNpcGUucGljdHVyZSArIFwiP1wiICsgcmVjaXBlLmRhdGVNb2RpZmllZH0gLz5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImRldGFpbHNcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0aXRsZVwiIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MPXt0aGlzLmdldEhpZ2hsaWdodGVkVGl0bGUocmVjaXBlLnRpdGxlKX0+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYXV0aG9yXCI+e3JlY2lwZS5maXJzdE5hbWUgKyBcIiBcIiArIHJlY2lwZS5sYXN0TmFtZX08L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj4pO1xuICAgIH0sXG4gICAgY2hhbmdlOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICB2YXIgc2VhcmNoVGVybXMgPSBlLnRhcmdldC52YWx1ZS5yZXBsYWNlKC9bXFwtXFxbXFxdXFwvXFx7XFx9XFwoXFwpXFwqXFwrXFw/XFwuXFxcXFxcXlxcJFxcfF0vZywgXCJcXFxcJCZcIikuc3BsaXQoXCIgXCIpO1xuICAgICAgICB2YXIgc2VhcmNoUmVnRXhTdHJpbmcgPSBcIlwiXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VhcmNoVGVybXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHNlYXJjaFJlZ0V4U3RyaW5nICs9IHNlYXJjaFRlcm1zW2ldICsgXCIuKlwiO1xuICAgICAgICB9XG4gICAgICAgIHZhciByZWdFeE9iaiA9IHRoaXMuZ2V0UmVnRXhPYmooc2VhcmNoUmVnRXhTdHJpbmcpO1xuXG4gICAgICAgIHZhciBmaWx0ZXJlZExpc3QgPSBbXTtcbiAgICAgICAgaWYgKHJlZ0V4T2JqICE9PSBudWxsKSB7XG5cbiAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdGhpcy5zdGF0ZS5mdWxsTGlzdC5sZW5ndGg7IHgrKykge1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50UmVjaXBlID0gdGhpcy5zdGF0ZS5mdWxsTGlzdFt4XTtcbiAgICAgICAgICAgICAgICBpZiAocmVnRXhPYmoudGVzdChjdXJyZW50UmVjaXBlLnRpdGxlKSkge1xuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZExpc3QucHVzaChjdXJyZW50UmVjaXBlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmaWx0ZXJlZExpc3QgPSB0aGlzLnN0YXRlLmZ1bGxMaXN0LnNsaWNlKDApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGZpbHRlcmVkTGlzdDogZmlsdGVyZWRMaXN0ICwgc2VhcmNoVGVybXM6IHNlYXJjaFRlcm1zLCBhY3RpdmVJbmRleDogMH0pO1xuICAgIH0sXG4gICAgZm9jdXM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG1lID0gdGhpcztcbiAgICAgICAgdGhpcy5wcm9wcy5hU2VydmVyUmVxdWVzdChcbiAgICAgICAgICAgIHsgXG4gICAgICAgICAgICAgICAgYWN0aW9uOiAnR0VUX0xJU1QnIFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIG1lLnNldFN0YXRlKHsgZnVsbExpc3Q6IHJlc3BvbnNlLnNsaWNlKDApLCBmaWx0ZXJlZExpc3Q6IHJlc3BvbnNlLnNsaWNlKDApIH0pO1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHRzID0gUmVhY3RET00uZmluZERPTU5vZGUobWUpLnF1ZXJ5U2VsZWN0b3IoXCIucmVzdWx0c1wiKTtcbiAgICAgICAgICAgICAgICB2YXIgcG9zID0gcmVzdWx0cy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICByZXN1bHRzLnN0eWxlLm1heEhlaWdodCA9ICh3aW5kb3cuaW5uZXJIZWlnaHQgLSBwb3MudG9wKSArIFwicHhcIjtcblxuICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgbWUua2V5dXAsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBSZWFjdERPTS5maW5kRE9NTm9kZShtZSkuY2xhc3NMaXN0LmFkZChcInNob3dcIik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdHJ1ZVxuICAgICAgICApO1xuICAgIH0sXG4gICAgYmx1cjogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgYWN0aXZlSW5kZXg6IDAgfSk7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5rZXl1cCwgZmFsc2UpO1xuICAgICAgICBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKS5jbGFzc0xpc3QucmVtb3ZlKFwic2hvd1wiKTtcbiAgICB9LFxuICAgIHNlbGVjdDogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBlLnRhcmdldDtcbiAgICAgICAgd2hpbGUgKCFlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcInJvd1wiKSkge1xuICAgICAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaWQgPSBlbGVtZW50LmRhdGFzZXQuaWQ7XG4gICAgICAgIHRoaXMucHJvcHMuYUdldFJlY2lwZShpZCk7XG4gICAgfSxcbiAgICBrZXl1cDogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgaWYgKGUua2V5Q29kZSA9PSA0MCkge1xuICAgICAgICAgICAgdmFyIG5ld0luZGV4ID0gdGhpcy5zdGF0ZS5hY3RpdmVJbmRleCArIDE7XG4gICAgICAgICAgICBpZiAobmV3SW5kZXggPCB0aGlzLnN0YXRlLmZpbHRlcmVkTGlzdC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlSW5kZXg6IG5ld0luZGV4XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoZS5rZXlDb2RlID09IDM4KSB7XG4gICAgICAgICAgICB2YXIgbmV3SW5kZXggPSB0aGlzLnN0YXRlLmFjdGl2ZUluZGV4IC0gMTtcbiAgICAgICAgICAgIGlmIChuZXdJbmRleCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZUluZGV4OiBuZXdJbmRleFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PSAxMykge1xuICAgICAgICAgICAgUmVhY3RET00uZmluZERPTU5vZGUodGhpcykucXVlcnlTZWxlY3RvcihcIi5yZXN1bHRzIC5hY3RpdmVcIikuY2xpY2soKTtcbiAgICAgICAgICAgIFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMpLnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKS5ibHVyKCk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHJlbmRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIga2V5ID0gMDtcbiAgICAgICAgdmFyIG1lID0gdGhpcztcbiAgICAgICAgdmFyIGxpc3QgPSB0aGlzLnN0YXRlLmZpbHRlcmVkTGlzdC5tYXAoZnVuY3Rpb24gKHJlY2lwZSwgaW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiBtZS5nZXRSZWNpcGVIVE1MKHJlY2lwZSwgaW5kZXgpO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gKDxkaXYgY2xhc3NOYW1lPVwic2VhcmNoXCI+XG4gICAgICAgICAgICA8aW5wdXQgcGxhY2Vob2xkZXI9XCJTZWFyY2guLi5cIlxuICAgICAgICAgICAgICAgIG9uRm9jdXM9e3RoaXMuZm9jdXN9XG4gICAgICAgICAgICAgICAgb25CbHVyPXt0aGlzLmJsdXJ9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuY2hhbmdlfT48L2lucHV0PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZXN1bHRzXCI+e2xpc3R9PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBTZWFyY2g7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9yb290L2NvbXBvbmVudHMvc2VhcmNoLmpzeCIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgU3RlcHMgZnJvbSAnLi9zdGVwcy5qc3gnO1xuaW1wb3J0IEluZ3JlZGllbnRzIGZyb20gJy4vaW5ncmVkaWVudHMuanN4JztcbmltcG9ydCBSZWNpcGVIZWFkZXIgZnJvbSAnLi9yZWNpcGVIZWFkZXIuanN4JztcblxucmVxdWlyZShcIi4uL3N0eWxlL2NvbXBvbmVudHMvcmVjaXBlLnNjc3NcIik7XG5cbnZhciBSZWNpcGUgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4gICAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGVkaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIHZhbGlkYXRlOiBmYWxzZVxuICAgICAgICB9O1xuICAgIH0sXG4gICAgZWRpdDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2VkaXRhYmxlOiB0cnVlfSk7XG4gICAgfSxcbiAgICBzYXZlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7dmFsaWRhdGU6IHRydWV9KTtcbiAgICAgICAgdmFyIGlzVmFsaWQgPSB0aGlzLnZhbGlkYXRlKHRoaXMucHJvcHMucmVjaXBlKTtcbiAgICAgICAgaWYgKGlzVmFsaWQpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMuYVNhdmVSZWNpcGUodGhpcy5wcm9wcy5yZWNpcGUpO1xuXG4gICAgICAgICAgIC8qIGlmICh0aGlzLnByb3BzLnJlY2lwZS5waWN0dXJlLmluZGV4T2YoXCJuby1pbWFnZS11cGxvYWRlZFwiKSA9PSAtMSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuYVVwZGF0ZVZhbHVlKCdwaWN0dXJlJywgXCJpbWFnZXMvcmVjaXBlcy9yZWNpcGVfXCIgKyB0aGlzLnByb3BzLnJlY2lwZS5pZCArIFwiLnBuZ1wiKTtcbiAgICAgICAgICAgIH0qL1xuXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtlZGl0YWJsZTogZmFsc2UsIHZhbGlkYXRlOiBmYWxzZX0pO1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5hR2V0UmVjaXBlKHRoaXMucHJvcHMucmVjaXBlLmlkKTtcbiAgICAgICAgICAgIHRoaXMucHJvcHMuYU5vdGlmeSh0cnVlLCBcInN1Y2Nlc3NcIiwgXCJSZWNpcGUgc3VjY2Vzc2Z1bGx5IHNhdmVkLlwiLCA1MDApO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBjYW5jZWw6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtlZGl0YWJsZTogZmFsc2UsIHZhbGlkYXRlOiBmYWxzZX0pO1xuICAgICAgICB0aGlzLnByb3BzLmFHZXRSZWNpcGUodGhpcy5wcm9wcy5yZWNpcGUuaWQpO1xuICAgIH0sXG4gICAgdmFsaWRhdGU6IGZ1bmN0aW9uKHJlY2lwZSkge1xuICAgICAgICB2YXIgZXJyb3JzID0gW107XG4gICAgICAgIGlmIChyZWNpcGUudGl0bGUgPT0gXCJcIikge1xuICAgICAgICAgICAgZXJyb3JzLnB1c2goXCJSZWNpcGUgdGl0bGUgaXMgcmVxdWlyZWRcIik7XG4gICAgICAgIH0gICBcblxuICAgICAgICBpZiAocmVjaXBlLnNlcnZpbmdzID09IFwiXCIpIHtcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKFwiUmVjaXBlIHNlcnZpbmdzIGFyZSByZXF1aXJlZFwiKTtcbiAgICAgICAgfSBlbHNlIGlmIChyZWNpcGUuc2VydmluZ3MgPCAwKSB7XG4gICAgICAgICAgICBlcnJvcnMucHVzaChcIlJlY2lwZSBzZXJ2aW5ncyBtdXN0IGJlIHBvc2l0aXZlXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlY2lwZS5pbmdyZWRpZW50cy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgZXJyb3JzLnB1c2goXCJBdGxlYXN0IG9uZSBpbmdyZWRpZW50IG11c3QgYmUgc3VwcGxpZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHF1YW50aXR5RmxhZ2dlZCA9IGZhbHNlO1xuICAgICAgICB2YXIgdW5pdEZsYWdnZWQgPSBmYWxzZTtcbiAgICAgICAgdmFyIG5hbWVGbGFnZ2VkID0gZmFsc2U7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVjaXBlLmluZ3JlZGllbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgaW5ncmVkaWVudCA9IHJlY2lwZS5pbmdyZWRpZW50c1tpXTtcbiAgICAgICAgICAgIGlmIChpbmdyZWRpZW50LnF1YW50aXR5ID09IFwiXCIgJiYgIXF1YW50aXR5RmxhZ2dlZCkge1xuICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKFwiSW5ncmVkaWVudCBxdWFudGl0eSBpcyByZXF1aXJlZFwiKTtcbiAgICAgICAgICAgICAgICBxdWFudGl0eUZsYWdnZWQgPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChpbmdyZWRpZW50LnF1YW50aXR5IDwgMCAmJiAhcXVhbnRpdHlGbGFnZ2VkKSB7XG4gICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goXCJJbmdyZWRpZW50IHF1YW50aXR5IG11c3QgYmUgcG9zaXRpdmVcIik7XG4gICAgICAgICAgICAgICAgcXVhbnRpdHlGbGFnZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGluZ3JlZGllbnQudW5pdHMgPT0gXCJcIiAmJiAhdW5pdEZsYWdnZWQpIHtcbiAgICAgICAgICAgICAgICBlcnJvcnMucHVzaChcIkluZ3JlZGllbnQgdW5pdHMgYXJlIHJlcXVpcmVkXCIpO1xuICAgICAgICAgICAgICAgIHVuaXRGbGFnZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGluZ3JlZGllbnQuaW5ncmVkaWVudE5hbWUgPT0gXCJcIiAmJiAhbmFtZUZsYWdnZWQpIHtcbiAgICAgICAgICAgICAgICBlcnJvcnMucHVzaChcIkluZ3JlZGllbnQgbmFtZSBpcyByZXF1aXJlZFwiKTtcbiAgICAgICAgICAgICAgICBuYW1lRmxhZ2dlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVjaXBlLnN0ZXBzLnNwbGl0KFwifFwiKS5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgZXJyb3JzLnB1c2goXCJBdGxlYXN0IG9uZSBzdGVwIG11c3QgYmUgc3VwcGxpZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHN0ZXBzID0gcmVjaXBlLnN0ZXBzLnNwbGl0KFwifFwiKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGVwcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHN0ZXAgPSBzdGVwc1tpXTtcbiAgICAgICAgICAgIGlmIChzdGVwID09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICBlcnJvcnMucHVzaChcIlN0ZXAgaW5zdHJ1Y3Rpb25zIGFyZSByZXF1aXJlZFwiKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlcnJvcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdmFyIGtleSA9IDA7XG4gICAgICAgICAgICB2YXIgbWVzc2FnZUlubmVyID0gZXJyb3JzLm1hcChmdW5jdGlvbihtc2cpIHtcbiAgICAgICAgICAgICAgICBrZXkgKz0gMTtcbiAgICAgICAgICAgICAgICByZXR1cm4gPGxpIGtleT17a2V5fT57bXNnfTwvbGk+XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICB2YXIgbWVzc2FnZSA9IDxkaXYgY2xhc3NOYW1lPVwidmFsaWRhdGlvblwiPlxuICAgICAgICAgICAgICAgIDxoMz5QbGVhc2UgY29ycmVjdCBmbGFnZ2VkIGZpZWxkczwvaDM+XG4gICAgICAgICAgICAgICAgPHVsPnttZXNzYWdlSW5uZXJ9PC91bD5cbiAgICAgICAgICAgIDwvZGl2PjtcblxuICAgICAgICAgICAgdGhpcy5wcm9wcy5hTm90aWZ5KHRydWUsIFwiZXJyb3JcIiwgbWVzc2FnZSwgbnVsbCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9LFxuICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAoIDxtYWluIGNsYXNzTmFtZT1cImZ1bGwtcmVjaXBlXCI+XG4gICAgICAgICAgICAgICAgPFJlY2lwZUhlYWRlclxuICAgICAgICAgICAgICAgICAgICByZWNpcGU9e3RoaXMucHJvcHMucmVjaXBlfVxuICAgICAgICAgICAgICAgICAgICBlZGl0ID0ge3RoaXMuZWRpdH1cbiAgICAgICAgICAgICAgICAgICAgc2F2ZSA9IHt0aGlzLnNhdmV9XG4gICAgICAgICAgICAgICAgICAgIGNhbmNlbCA9IHt0aGlzLmNhbmNlbH1cbiAgICAgICAgICAgICAgICAgICAgYVVwZGF0ZVZhbHVlID0ge3RoaXMucHJvcHMuYVVwZGF0ZVZhbHVlfVxuICAgICAgICAgICAgICAgICAgICBlZGl0YWJsZSA9IHt0aGlzLnN0YXRlLmVkaXRhYmxlfVxuICAgICAgICAgICAgICAgICAgICB2YWxpZGF0ZSA9IHt0aGlzLnN0YXRlLnZhbGlkYXRlfVxuICAgICAgICAgICAgICAgICAgICBzVXNlcj17dGhpcy5wcm9wcy5zVXNlcn1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDxtYWluIGNsYXNzTmFtZT1cInJlY2lwZS1ib2R5XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8SW5ncmVkaWVudHMgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5ncmVkaWVudHMgPSB7dGhpcy5wcm9wcy5yZWNpcGUuaW5ncmVkaWVudHN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYVVwZGF0ZVZhbHVlID0ge3RoaXMucHJvcHMuYVVwZGF0ZVZhbHVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFBZGRJbmdyZWRpZW50ID0ge3RoaXMucHJvcHMuYUFkZEluZ3JlZGllbnR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRpdGFibGUgPSB7dGhpcy5zdGF0ZS5lZGl0YWJsZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0ZSA9IHt0aGlzLnN0YXRlLnZhbGlkYXRlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFTZXJ2ZXJSZXF1ZXN0ID0ge3RoaXMucHJvcHMuYVNlcnZlclJlcXVlc3R9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFN0ZXBzIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXBzID0ge3RoaXMucHJvcHMucmVjaXBlLnN0ZXBzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFVcGRhdGVWYWx1ZSA9IHt0aGlzLnByb3BzLmFVcGRhdGVWYWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhQWRkU3RlcCA9IHt0aGlzLnByb3BzLmFBZGRTdGVwfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRhYmxlID0ge3RoaXMuc3RhdGUuZWRpdGFibGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGUgPSB7dGhpcy5zdGF0ZS52YWxpZGF0ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9tYWluPlxuICAgICAgICAgICAgPC9tYWluPlxuICAgICAgICApO1xuICAgIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBSZWNpcGU7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9yb290L2NvbXBvbmVudHMvcmVjaXBlLmpzeCIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUmVhY3RET00gZnJvbSAncmVhY3QtZG9tJztcblxucmVxdWlyZShcIi4uL3N0eWxlL2NvbXBvbmVudHMvc3RlcHMuc2Nzc1wiKTtcblxuY29uc3QgU3RlcHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4gICAgcmVuZGVyRGlzcGxheTogZnVuY3Rpb24oc3RlcHMpIHtcbiAgICAgICAgdmFyIGtleSA9IDA7XG4gICAgICAgIHJldHVybiBzdGVwcy5tYXAoZnVuY3Rpb24oc3RlcCkge1xuICAgICAgICAgICAgaWYgKHN0ZXAgPT0gXCJcIikge1xuICAgICAgICAgICAgICAgIHN0ZXAgPSBcIlBsZWFzZSBlbnRlciBhIHN0ZXAgZGVzY3JpcHRpb24uLi5cIjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIDxsaSBjbGFzc05hbWU9XCJpbmRpdmlkdWFsLXN0ZXBcIiBrZXk9e2tleSsrfT57c3RlcH08L2xpPjtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICByZW5kZXJGb3JtOiBmdW5jdGlvbihzdGVwcykge1xuICAgICAgICB2YXIgbWUgPSB0aGlzO1xuICAgICAgICB2YXIga2V5ID0gLTE7XG4gICAgICAgIHJldHVybiBzdGVwcy5tYXAoZnVuY3Rpb24oc3RlcCkge1xuICAgICAgICAgICAga2V5ICs9IDE7XG4gICAgICAgICAgICB2YXIgc3RlcENsYXNzZXM7XG4gICAgICAgICAgICBpZiAobWUucHJvcHMudmFsaWRhdGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RlcCA9PSBudWxsIHx8IHN0ZXAgPT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICBzdGVwQ2xhc3NlcyA9IFwicmVxdWlyZWRcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gPGxpIGNsYXNzTmFtZT1cImluZGl2aWR1YWwtc3RlcFwiIGtleT17a2V5fSBkYXRhLWluZGV4PXtrZXl9PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3RlcC1jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSAgXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17c3RlcH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGxlYXNlIGVudGVyIGEgc3RlcCBkZXNjcmlwdGlvbi4uLlwiXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWUgPSB7c3RlcENsYXNzZXN9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17bWUudXBkYXRlU3RlcH0+XG4gICAgICAgICAgICAgICAgICAgIDwvdGV4dGFyZWE+XG4gICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzTmFtZT1cInRpLXRyYXNoXCIgb25DbGljaz17bWUuZGVsZXRlU3RlcH0vPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9saT4gO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIHVwZGF0ZVN0ZXA6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdmFyIG5ld1N0ZXBzID0gXCJcIjtcbiAgICAgICAgdmFyIGxpc3QgPSBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKS5xdWVyeVNlbGVjdG9yKFwiLnN0ZXBzLWxpc3RcIikuY2hpbGROb2RlcztcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGxpc3RbaV0ucXVlcnlTZWxlY3RvcihcInRleHRhcmVhXCIpLnZhbHVlO1xuICAgICAgICAgICAgbmV3U3RlcHMgKz0gdmFsdWU7XG5cbiAgICAgICAgICAgIGlmIChpIDwgbGlzdC5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgbmV3U3RlcHMgKz0gXCJ8XCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnByb3BzLmFVcGRhdGVWYWx1ZShcInN0ZXBzXCIsIG5ld1N0ZXBzKTtcbiAgICB9LFxuICAgIGRlbGV0ZVN0ZXA6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdmFyIGl0ZW1Ub0NoZWNrID0gZS50YXJnZXQ7XG4gICAgICAgIHdoaWxlIChpdGVtVG9DaGVjayAmJiAhaXRlbVRvQ2hlY2suY2xhc3NMaXN0LmNvbnRhaW5zKFwiaW5kaXZpZHVhbC1zdGVwXCIpKSB7XG4gICAgICAgICAgICBpdGVtVG9DaGVjayA9IGl0ZW1Ub0NoZWNrLnBhcmVudE5vZGU7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbGlzdCA9IFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMpLnF1ZXJ5U2VsZWN0b3IoXCIuc3RlcHMtbGlzdFwiKS5jaGlsZE5vZGVzO1xuICAgICAgICB2YXIgaXRlbVRvUmVtb3ZlID0gbnVsbDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAobGlzdFtpXSA9PT0gaXRlbVRvQ2hlY2spIHtcbiAgICAgICAgICAgICAgICBpdGVtVG9SZW1vdmUgPSBpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGl0ZW1Ub1JlbW92ZSAhPSBudWxsKSB7XG4gICAgICAgICAgICB2YXIgc3RlcHMgPSB0aGlzLnByb3BzLnN0ZXBzLnNwbGl0KFwifFwiKTsgIFxuICAgICAgICAgICAgc3RlcHMuc3BsaWNlKGl0ZW1Ub1JlbW92ZSwgMSk7XG5cbiAgICAgICAgICAgIHRoaXMucHJvcHMuYVVwZGF0ZVZhbHVlKFwic3RlcHNcIiwgc3RlcHMuam9pbihcInxcIikpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgbGlzdDtcbiAgICAgICAgdmFyIGtleSA9IDA7XG4gICAgICAgIHZhciBzdGVwcyA9IFtcIlwiXTtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuc3RlcHMgIT0gbnVsbCApIHtcbiAgICAgICAgICAgIHN0ZXBzID0gdGhpcy5wcm9wcy5zdGVwcy5zcGxpdChcInxcIik7ICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgdmFyIGFkZExpbms7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmVkaXRhYmxlKSB7XG4gICAgICAgICAgICBsaXN0ID0gdGhpcy5yZW5kZXJGb3JtKHN0ZXBzKTtcbiAgICAgICAgICAgIGFkZExpbmsgPSA8ZGl2IGNsYXNzTmFtZT1cImFkZC1uZXdcIiBvbkNsaWNrPXt0aGlzLnByb3BzLmFBZGRTdGVwfT5cbiAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3NOYW1lPVwidGktcGx1c1wiPjwvYT5cbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsPkFkZCBzdGVwPC9sYWJlbD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxpc3QgPSB0aGlzLnJlbmRlckRpc3BsYXkoc3RlcHMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuICggPHNlY3Rpb24gY2xhc3NOYW1lPVwicmVjaXBlLXN0ZXBzXCI+XG4gICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cImRhdGEtbGFiZWxcIj5EaXJlY3Rpb25zPC9sYWJlbD5cbiAgICAgICAgICAgICAgICA8b2wgY2xhc3NOYW1lPVwic3RlcHMtbGlzdFwiPntsaXN0fTwvb2w+XG4gICAgICAgICAgICAgICAge2FkZExpbmt9XG4gICAgICAgICAgICA8L3NlY3Rpb24+XG4gICAgICAgICk7XG4gICAgfVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IFN0ZXBzO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vcm9vdC9jb21wb25lbnRzL3N0ZXBzLmpzeCIsIi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi9zdGVwcy5zY3NzXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCB7fSk7XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcblx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuL3N0ZXBzLnNjc3NcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuL3N0ZXBzLnNjc3NcIik7XG5cdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHR9KTtcblx0fVxuXHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3Jvb3Qvc3R5bGUvY29tcG9uZW50cy9zdGVwcy5zY3NzIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKSgpO1xuLy8gaW1wb3J0c1xuXG5cbi8vIG1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLnJlY2lwZS1zdGVwcyAuc3RlcHMtbGlzdCAuaW5kaXZpZHVhbC1zdGVwe3BhZGRpbmc6NXB4fS5yZWNpcGUtc3RlcHMgLnN0ZXBzLWxpc3QgLnN0ZXAtY29udGVudHt3aWR0aDoxMDAlO2Rpc3BsYXk6aW5saW5lLWZsZXg7ZmxleC1kaXJlY3Rpb246cm93O2FsaWduLWl0ZW1zOmNlbnRlcn0ucmVjaXBlLXN0ZXBzIC5zdGVwcy1saXN0IC5zdGVwLWNvbnRlbnQgdGV4dGFyZWF7d2lkdGg6MTAwJTtyZXNpemU6dmVydGljYWx9XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2Nzcy1sb2FkZXIhLi9+L3Nhc3MtbG9hZGVyIS4vcm9vdC9zdHlsZS9jb21wb25lbnRzL3N0ZXBzLnNjc3Ncbi8vIG1vZHVsZSBpZCA9IDE2NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKlxyXG5cdE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXHJcblx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxyXG4qL1xyXG4vLyBjc3MgYmFzZSBjb2RlLCBpbmplY3RlZCBieSB0aGUgY3NzLWxvYWRlclxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xyXG5cdHZhciBsaXN0ID0gW107XHJcblxyXG5cdC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcclxuXHRsaXN0LnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XHJcblx0XHR2YXIgcmVzdWx0ID0gW107XHJcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHR2YXIgaXRlbSA9IHRoaXNbaV07XHJcblx0XHRcdGlmKGl0ZW1bMl0pIHtcclxuXHRcdFx0XHRyZXN1bHQucHVzaChcIkBtZWRpYSBcIiArIGl0ZW1bMl0gKyBcIntcIiArIGl0ZW1bMV0gKyBcIn1cIik7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0cmVzdWx0LnB1c2goaXRlbVsxXSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHJldHVybiByZXN1bHQuam9pbihcIlwiKTtcclxuXHR9O1xyXG5cclxuXHQvLyBpbXBvcnQgYSBsaXN0IG9mIG1vZHVsZXMgaW50byB0aGUgbGlzdFxyXG5cdGxpc3QuaSA9IGZ1bmN0aW9uKG1vZHVsZXMsIG1lZGlhUXVlcnkpIHtcclxuXHRcdGlmKHR5cGVvZiBtb2R1bGVzID09PSBcInN0cmluZ1wiKVxyXG5cdFx0XHRtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCBcIlwiXV07XHJcblx0XHR2YXIgYWxyZWFkeUltcG9ydGVkTW9kdWxlcyA9IHt9O1xyXG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0dmFyIGlkID0gdGhpc1tpXVswXTtcclxuXHRcdFx0aWYodHlwZW9mIGlkID09PSBcIm51bWJlclwiKVxyXG5cdFx0XHRcdGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaWRdID0gdHJ1ZTtcclxuXHRcdH1cclxuXHRcdGZvcihpID0gMDsgaSA8IG1vZHVsZXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0dmFyIGl0ZW0gPSBtb2R1bGVzW2ldO1xyXG5cdFx0XHQvLyBza2lwIGFscmVhZHkgaW1wb3J0ZWQgbW9kdWxlXHJcblx0XHRcdC8vIHRoaXMgaW1wbGVtZW50YXRpb24gaXMgbm90IDEwMCUgcGVyZmVjdCBmb3Igd2VpcmQgbWVkaWEgcXVlcnkgY29tYmluYXRpb25zXHJcblx0XHRcdC8vICB3aGVuIGEgbW9kdWxlIGlzIGltcG9ydGVkIG11bHRpcGxlIHRpbWVzIHdpdGggZGlmZmVyZW50IG1lZGlhIHF1ZXJpZXMuXHJcblx0XHRcdC8vICBJIGhvcGUgdGhpcyB3aWxsIG5ldmVyIG9jY3VyIChIZXkgdGhpcyB3YXkgd2UgaGF2ZSBzbWFsbGVyIGJ1bmRsZXMpXHJcblx0XHRcdGlmKHR5cGVvZiBpdGVtWzBdICE9PSBcIm51bWJlclwiIHx8ICFhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2l0ZW1bMF1dKSB7XHJcblx0XHRcdFx0aWYobWVkaWFRdWVyeSAmJiAhaXRlbVsyXSkge1xyXG5cdFx0XHRcdFx0aXRlbVsyXSA9IG1lZGlhUXVlcnk7XHJcblx0XHRcdFx0fSBlbHNlIGlmKG1lZGlhUXVlcnkpIHtcclxuXHRcdFx0XHRcdGl0ZW1bMl0gPSBcIihcIiArIGl0ZW1bMl0gKyBcIikgYW5kIChcIiArIG1lZGlhUXVlcnkgKyBcIilcIjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0bGlzdC5wdXNoKGl0ZW0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fTtcclxuXHRyZXR1cm4gbGlzdDtcclxufTtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXG4vLyBtb2R1bGUgaWQgPSAxNjdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLypcblx0TUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcblx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cbnZhciBzdHlsZXNJbkRvbSA9IHt9LFxuXHRtZW1vaXplID0gZnVuY3Rpb24oZm4pIHtcblx0XHR2YXIgbWVtbztcblx0XHRyZXR1cm4gZnVuY3Rpb24gKCkge1xuXHRcdFx0aWYgKHR5cGVvZiBtZW1vID09PSBcInVuZGVmaW5lZFwiKSBtZW1vID0gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHRcdHJldHVybiBtZW1vO1xuXHRcdH07XG5cdH0sXG5cdGlzT2xkSUUgPSBtZW1vaXplKGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiAvbXNpZSBbNi05XVxcYi8udGVzdChzZWxmLm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSk7XG5cdH0pLFxuXHRnZXRIZWFkRWxlbWVudCA9IG1lbW9pemUoZnVuY3Rpb24gKCkge1xuXHRcdHJldHVybiBkb2N1bWVudC5oZWFkIHx8IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXTtcblx0fSksXG5cdHNpbmdsZXRvbkVsZW1lbnQgPSBudWxsLFxuXHRzaW5nbGV0b25Db3VudGVyID0gMCxcblx0c3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3AgPSBbXTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihsaXN0LCBvcHRpb25zKSB7XG5cdGlmKHR5cGVvZiBERUJVRyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBERUJVRykge1xuXHRcdGlmKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJvYmplY3RcIikgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHN0eWxlLWxvYWRlciBjYW5ub3QgYmUgdXNlZCBpbiBhIG5vbi1icm93c2VyIGVudmlyb25tZW50XCIpO1xuXHR9XG5cblx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cdC8vIEZvcmNlIHNpbmdsZS10YWcgc29sdXRpb24gb24gSUU2LTksIHdoaWNoIGhhcyBhIGhhcmQgbGltaXQgb24gdGhlICMgb2YgPHN0eWxlPlxuXHQvLyB0YWdzIGl0IHdpbGwgYWxsb3cgb24gYSBwYWdlXG5cdGlmICh0eXBlb2Ygb3B0aW9ucy5zaW5nbGV0b24gPT09IFwidW5kZWZpbmVkXCIpIG9wdGlvbnMuc2luZ2xldG9uID0gaXNPbGRJRSgpO1xuXG5cdC8vIEJ5IGRlZmF1bHQsIGFkZCA8c3R5bGU+IHRhZ3MgdG8gdGhlIGJvdHRvbSBvZiA8aGVhZD4uXG5cdGlmICh0eXBlb2Ygb3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJ1bmRlZmluZWRcIikgb3B0aW9ucy5pbnNlcnRBdCA9IFwiYm90dG9tXCI7XG5cblx0dmFyIHN0eWxlcyA9IGxpc3RUb1N0eWxlcyhsaXN0KTtcblx0YWRkU3R5bGVzVG9Eb20oc3R5bGVzLCBvcHRpb25zKTtcblxuXHRyZXR1cm4gZnVuY3Rpb24gdXBkYXRlKG5ld0xpc3QpIHtcblx0XHR2YXIgbWF5UmVtb3ZlID0gW107XG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGl0ZW0gPSBzdHlsZXNbaV07XG5cdFx0XHR2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXTtcblx0XHRcdGRvbVN0eWxlLnJlZnMtLTtcblx0XHRcdG1heVJlbW92ZS5wdXNoKGRvbVN0eWxlKTtcblx0XHR9XG5cdFx0aWYobmV3TGlzdCkge1xuXHRcdFx0dmFyIG5ld1N0eWxlcyA9IGxpc3RUb1N0eWxlcyhuZXdMaXN0KTtcblx0XHRcdGFkZFN0eWxlc1RvRG9tKG5ld1N0eWxlcywgb3B0aW9ucyk7XG5cdFx0fVxuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBtYXlSZW1vdmUubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBkb21TdHlsZSA9IG1heVJlbW92ZVtpXTtcblx0XHRcdGlmKGRvbVN0eWxlLnJlZnMgPT09IDApIHtcblx0XHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGRvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKVxuXHRcdFx0XHRcdGRvbVN0eWxlLnBhcnRzW2pdKCk7XG5cdFx0XHRcdGRlbGV0ZSBzdHlsZXNJbkRvbVtkb21TdHlsZS5pZF07XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xufVxuXG5mdW5jdGlvbiBhZGRTdHlsZXNUb0RvbShzdHlsZXMsIG9wdGlvbnMpIHtcblx0Zm9yKHZhciBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBpdGVtID0gc3R5bGVzW2ldO1xuXHRcdHZhciBkb21TdHlsZSA9IHN0eWxlc0luRG9tW2l0ZW0uaWRdO1xuXHRcdGlmKGRvbVN0eWxlKSB7XG5cdFx0XHRkb21TdHlsZS5yZWZzKys7XG5cdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0ZG9tU3R5bGUucGFydHNbal0oaXRlbS5wYXJ0c1tqXSk7XG5cdFx0XHR9XG5cdFx0XHRmb3IoOyBqIDwgaXRlbS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRkb21TdHlsZS5wYXJ0cy5wdXNoKGFkZFN0eWxlKGl0ZW0ucGFydHNbal0sIG9wdGlvbnMpKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0dmFyIHBhcnRzID0gW107XG5cdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgaXRlbS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRwYXJ0cy5wdXNoKGFkZFN0eWxlKGl0ZW0ucGFydHNbal0sIG9wdGlvbnMpKTtcblx0XHRcdH1cblx0XHRcdHN0eWxlc0luRG9tW2l0ZW0uaWRdID0ge2lkOiBpdGVtLmlkLCByZWZzOiAxLCBwYXJ0czogcGFydHN9O1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBsaXN0VG9TdHlsZXMobGlzdCkge1xuXHR2YXIgc3R5bGVzID0gW107XG5cdHZhciBuZXdTdHlsZXMgPSB7fTtcblx0Zm9yKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgaXRlbSA9IGxpc3RbaV07XG5cdFx0dmFyIGlkID0gaXRlbVswXTtcblx0XHR2YXIgY3NzID0gaXRlbVsxXTtcblx0XHR2YXIgbWVkaWEgPSBpdGVtWzJdO1xuXHRcdHZhciBzb3VyY2VNYXAgPSBpdGVtWzNdO1xuXHRcdHZhciBwYXJ0ID0ge2NzczogY3NzLCBtZWRpYTogbWVkaWEsIHNvdXJjZU1hcDogc291cmNlTWFwfTtcblx0XHRpZighbmV3U3R5bGVzW2lkXSlcblx0XHRcdHN0eWxlcy5wdXNoKG5ld1N0eWxlc1tpZF0gPSB7aWQ6IGlkLCBwYXJ0czogW3BhcnRdfSk7XG5cdFx0ZWxzZVxuXHRcdFx0bmV3U3R5bGVzW2lkXS5wYXJ0cy5wdXNoKHBhcnQpO1xuXHR9XG5cdHJldHVybiBzdHlsZXM7XG59XG5cbmZ1bmN0aW9uIGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zLCBzdHlsZUVsZW1lbnQpIHtcblx0dmFyIGhlYWQgPSBnZXRIZWFkRWxlbWVudCgpO1xuXHR2YXIgbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AgPSBzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcFtzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcC5sZW5ndGggLSAxXTtcblx0aWYgKG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwidG9wXCIpIHtcblx0XHRpZighbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3ApIHtcblx0XHRcdGhlYWQuaW5zZXJ0QmVmb3JlKHN0eWxlRWxlbWVudCwgaGVhZC5maXJzdENoaWxkKTtcblx0XHR9IGVsc2UgaWYobGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AubmV4dFNpYmxpbmcpIHtcblx0XHRcdGhlYWQuaW5zZXJ0QmVmb3JlKHN0eWxlRWxlbWVudCwgbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AubmV4dFNpYmxpbmcpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRoZWFkLmFwcGVuZENoaWxkKHN0eWxlRWxlbWVudCk7XG5cdFx0fVxuXHRcdHN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wLnB1c2goc3R5bGVFbGVtZW50KTtcblx0fSBlbHNlIGlmIChvcHRpb25zLmluc2VydEF0ID09PSBcImJvdHRvbVwiKSB7XG5cdFx0aGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsZW1lbnQpO1xuXHR9IGVsc2Uge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgdmFsdWUgZm9yIHBhcmFtZXRlciAnaW5zZXJ0QXQnLiBNdXN0IGJlICd0b3AnIG9yICdib3R0b20nLlwiKTtcblx0fVxufVxuXG5mdW5jdGlvbiByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGVFbGVtZW50KSB7XG5cdHN0eWxlRWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlRWxlbWVudCk7XG5cdHZhciBpZHggPSBzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcC5pbmRleE9mKHN0eWxlRWxlbWVudCk7XG5cdGlmKGlkeCA+PSAwKSB7XG5cdFx0c3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3Auc3BsaWNlKGlkeCwgMSk7XG5cdH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlU3R5bGVFbGVtZW50KG9wdGlvbnMpIHtcblx0dmFyIHN0eWxlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcblx0c3R5bGVFbGVtZW50LnR5cGUgPSBcInRleHQvY3NzXCI7XG5cdGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zLCBzdHlsZUVsZW1lbnQpO1xuXHRyZXR1cm4gc3R5bGVFbGVtZW50O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVMaW5rRWxlbWVudChvcHRpb25zKSB7XG5cdHZhciBsaW5rRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpO1xuXHRsaW5rRWxlbWVudC5yZWwgPSBcInN0eWxlc2hlZXRcIjtcblx0aW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIGxpbmtFbGVtZW50KTtcblx0cmV0dXJuIGxpbmtFbGVtZW50O1xufVxuXG5mdW5jdGlvbiBhZGRTdHlsZShvYmosIG9wdGlvbnMpIHtcblx0dmFyIHN0eWxlRWxlbWVudCwgdXBkYXRlLCByZW1vdmU7XG5cblx0aWYgKG9wdGlvbnMuc2luZ2xldG9uKSB7XG5cdFx0dmFyIHN0eWxlSW5kZXggPSBzaW5nbGV0b25Db3VudGVyKys7XG5cdFx0c3R5bGVFbGVtZW50ID0gc2luZ2xldG9uRWxlbWVudCB8fCAoc2luZ2xldG9uRWxlbWVudCA9IGNyZWF0ZVN0eWxlRWxlbWVudChvcHRpb25zKSk7XG5cdFx0dXBkYXRlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlRWxlbWVudCwgc3R5bGVJbmRleCwgZmFsc2UpO1xuXHRcdHJlbW92ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZUVsZW1lbnQsIHN0eWxlSW5kZXgsIHRydWUpO1xuXHR9IGVsc2UgaWYob2JqLnNvdXJjZU1hcCAmJlxuXHRcdHR5cGVvZiBVUkwgPT09IFwiZnVuY3Rpb25cIiAmJlxuXHRcdHR5cGVvZiBVUkwuY3JlYXRlT2JqZWN0VVJMID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHR0eXBlb2YgVVJMLnJldm9rZU9iamVjdFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0dHlwZW9mIEJsb2IgPT09IFwiZnVuY3Rpb25cIiAmJlxuXHRcdHR5cGVvZiBidG9hID09PSBcImZ1bmN0aW9uXCIpIHtcblx0XHRzdHlsZUVsZW1lbnQgPSBjcmVhdGVMaW5rRWxlbWVudChvcHRpb25zKTtcblx0XHR1cGRhdGUgPSB1cGRhdGVMaW5rLmJpbmQobnVsbCwgc3R5bGVFbGVtZW50KTtcblx0XHRyZW1vdmUgPSBmdW5jdGlvbigpIHtcblx0XHRcdHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZUVsZW1lbnQpO1xuXHRcdFx0aWYoc3R5bGVFbGVtZW50LmhyZWYpXG5cdFx0XHRcdFVSTC5yZXZva2VPYmplY3RVUkwoc3R5bGVFbGVtZW50LmhyZWYpO1xuXHRcdH07XG5cdH0gZWxzZSB7XG5cdFx0c3R5bGVFbGVtZW50ID0gY3JlYXRlU3R5bGVFbGVtZW50KG9wdGlvbnMpO1xuXHRcdHVwZGF0ZSA9IGFwcGx5VG9UYWcuYmluZChudWxsLCBzdHlsZUVsZW1lbnQpO1xuXHRcdHJlbW92ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlRWxlbWVudCk7XG5cdFx0fTtcblx0fVxuXG5cdHVwZGF0ZShvYmopO1xuXG5cdHJldHVybiBmdW5jdGlvbiB1cGRhdGVTdHlsZShuZXdPYmopIHtcblx0XHRpZihuZXdPYmopIHtcblx0XHRcdGlmKG5ld09iai5jc3MgPT09IG9iai5jc3MgJiYgbmV3T2JqLm1lZGlhID09PSBvYmoubWVkaWEgJiYgbmV3T2JqLnNvdXJjZU1hcCA9PT0gb2JqLnNvdXJjZU1hcClcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0dXBkYXRlKG9iaiA9IG5ld09iaik7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJlbW92ZSgpO1xuXHRcdH1cblx0fTtcbn1cblxudmFyIHJlcGxhY2VUZXh0ID0gKGZ1bmN0aW9uICgpIHtcblx0dmFyIHRleHRTdG9yZSA9IFtdO1xuXG5cdHJldHVybiBmdW5jdGlvbiAoaW5kZXgsIHJlcGxhY2VtZW50KSB7XG5cdFx0dGV4dFN0b3JlW2luZGV4XSA9IHJlcGxhY2VtZW50O1xuXHRcdHJldHVybiB0ZXh0U3RvcmUuZmlsdGVyKEJvb2xlYW4pLmpvaW4oJ1xcbicpO1xuXHR9O1xufSkoKTtcblxuZnVuY3Rpb24gYXBwbHlUb1NpbmdsZXRvblRhZyhzdHlsZUVsZW1lbnQsIGluZGV4LCByZW1vdmUsIG9iaikge1xuXHR2YXIgY3NzID0gcmVtb3ZlID8gXCJcIiA6IG9iai5jc3M7XG5cblx0aWYgKHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0KSB7XG5cdFx0c3R5bGVFbGVtZW50LnN0eWxlU2hlZXQuY3NzVGV4dCA9IHJlcGxhY2VUZXh0KGluZGV4LCBjc3MpO1xuXHR9IGVsc2Uge1xuXHRcdHZhciBjc3NOb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKTtcblx0XHR2YXIgY2hpbGROb2RlcyA9IHN0eWxlRWxlbWVudC5jaGlsZE5vZGVzO1xuXHRcdGlmIChjaGlsZE5vZGVzW2luZGV4XSkgc3R5bGVFbGVtZW50LnJlbW92ZUNoaWxkKGNoaWxkTm9kZXNbaW5kZXhdKTtcblx0XHRpZiAoY2hpbGROb2Rlcy5sZW5ndGgpIHtcblx0XHRcdHN0eWxlRWxlbWVudC5pbnNlcnRCZWZvcmUoY3NzTm9kZSwgY2hpbGROb2Rlc1tpbmRleF0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRzdHlsZUVsZW1lbnQuYXBwZW5kQ2hpbGQoY3NzTm9kZSk7XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIGFwcGx5VG9UYWcoc3R5bGVFbGVtZW50LCBvYmopIHtcblx0dmFyIGNzcyA9IG9iai5jc3M7XG5cdHZhciBtZWRpYSA9IG9iai5tZWRpYTtcblxuXHRpZihtZWRpYSkge1xuXHRcdHN0eWxlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJtZWRpYVwiLCBtZWRpYSlcblx0fVxuXG5cdGlmKHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0KSB7XG5cdFx0c3R5bGVFbGVtZW50LnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcblx0fSBlbHNlIHtcblx0XHR3aGlsZShzdHlsZUVsZW1lbnQuZmlyc3RDaGlsZCkge1xuXHRcdFx0c3R5bGVFbGVtZW50LnJlbW92ZUNoaWxkKHN0eWxlRWxlbWVudC5maXJzdENoaWxkKTtcblx0XHR9XG5cdFx0c3R5bGVFbGVtZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUxpbmsobGlua0VsZW1lbnQsIG9iaikge1xuXHR2YXIgY3NzID0gb2JqLmNzcztcblx0dmFyIHNvdXJjZU1hcCA9IG9iai5zb3VyY2VNYXA7XG5cblx0aWYoc291cmNlTWFwKSB7XG5cdFx0Ly8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjY2MDM4NzVcblx0XHRjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiICsgYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSArIFwiICovXCI7XG5cdH1cblxuXHR2YXIgYmxvYiA9IG5ldyBCbG9iKFtjc3NdLCB7IHR5cGU6IFwidGV4dC9jc3NcIiB9KTtcblxuXHR2YXIgb2xkU3JjID0gbGlua0VsZW1lbnQuaHJlZjtcblxuXHRsaW5rRWxlbWVudC5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcblxuXHRpZihvbGRTcmMpXG5cdFx0VVJMLnJldm9rZU9iamVjdFVSTChvbGRTcmMpO1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3N0eWxlLWxvYWRlci9hZGRTdHlsZXMuanNcbi8vIG1vZHVsZSBpZCA9IDE2OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSc7XG5pbXBvcnQgQXV0b0NvbXBsZXRlIGZyb20gJy4vYXV0b2NvbXBsZXRlLmpzeCc7XG5cbnJlcXVpcmUoXCIuLi9zdHlsZS9jb21wb25lbnRzL2luZ3JlZGllbnRzLnNjc3NcIik7XG5cbnZhciBJbmdyZWRpZW50cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaW5ncmVkaWVudHM6IFtdLFxuICAgICAgICAgICAgdW5pdHM6IFtdXG4gICAgICAgIH07XG4gICAgfSxcbiAgICBjb21wb25lbnRXaWxsTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgbWUgPSB0aGlzO1xuICAgICAgICB0aGlzLnByb3BzLmFTZXJ2ZXJSZXF1ZXN0KFxuICAgICAgICAgICAgeyBcbiAgICAgICAgICAgICAgICBhY3Rpb246ICdHRVRfREFUQV9JTkdSRURJRU5UUycgXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgbWUuc2V0U3RhdGUoeyBpbmdyZWRpZW50czogcmVzcG9uc2UgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdHJ1ZVxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMucHJvcHMuYVNlcnZlclJlcXVlc3QoXG4gICAgICAgICAgICB7IFxuICAgICAgICAgICAgICAgIGFjdGlvbjogJ0dFVF9EQVRBX1VOSVRTJyBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBtZS5zZXRTdGF0ZSh7IHVuaXRzOiByZXNwb25zZSB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0cnVlXG4gICAgICAgICk7XG4gICAgfSxcbiAgICBzYXZlSW5ncmVkaWVudHM6IGZ1bmN0aW9uKGUsIGtleSkge1xuICAgICAgICB2YXIgdmFsdWUgPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgdmFyIGluZ0tleSA9IG51bGw7XG4gICAgICAgIHZhciBjdXJyZW50RWxlbWVudCA9IGUuY3VycmVudFRhcmdldDtcbiAgICAgICAgd2hpbGUgKGluZ0tleSA9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudEVsZW1lbnQuZGF0YXNldC5pbmdLZXkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGluZ0tleSA9IGN1cnJlbnRFbGVtZW50LmRhdGFzZXQuaW5nS2V5O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50RWxlbWVudCA9IGN1cnJlbnRFbGVtZW50LnBhcmVudE5vZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdGVtcEluZ3JlZGllbnRzTGlzdCA9IHRoaXMucHJvcHMuaW5ncmVkaWVudHM7XG5cbiAgICAgICAgdGVtcEluZ3JlZGllbnRzTGlzdFtpbmdLZXldW2tleV0gPSB2YWx1ZTtcblxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgY3VycmVudEluZ3JlZGllbnRzOiB0ZW1wSW5ncmVkaWVudHNMaXN0XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMucHJvcHMuYVVwZGF0ZVZhbHVlKFwiaW5ncmVkaWVudHNcIiwgdGhpcy5wcm9wcy5pbmdyZWRpZW50cyk7XG4gICAgfSxcbiAgICB1cGRhdGVRdWFudGl0eTogZnVuY3Rpb24oZSkge1xuICAgICAgICB0aGlzLnNhdmVJbmdyZWRpZW50cyhlLCBcInF1YW50aXR5XCIpO1xuICAgIH0sXG4gICAgdXBkYXRlVW5pdDogZnVuY3Rpb24oZSkge1xuICAgICAgICB0aGlzLnNhdmVJbmdyZWRpZW50cyhlLCBcInVuaXRzXCIpO1xuICAgIH0sXG4gICAgdXBkYXRlSW5ncmVkaWVudE5hbWU6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdGhpcy5zYXZlSW5ncmVkaWVudHMoZSwgXCJpbmdyZWRpZW50TmFtZVwiKTtcbiAgICB9LFxuICAgIGRlbGV0ZUluZ3JlZGllbnQ6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gZS50YXJnZXQucGFyZW50Tm9kZS5kYXRhc2V0LmluZ0tleTtcbiAgICAgICAgdmFyIGluZ3JlZGllbnRzID0gdGhpcy5wcm9wcy5pbmdyZWRpZW50cztcblxuICAgICAgICBpZiAoaW5kZXggPT0gMCAmJiBpbmdyZWRpZW50cy5sZW5ndGggPT0gMSkge1xuICAgICAgICAgICAgaW5ncmVkaWVudHNbMF0ucXVhbnRpdHkgPSBcIlwiO1xuICAgICAgICAgICAgaW5ncmVkaWVudHNbMF0udW5pdHMgPSBcIlwiO1xuICAgICAgICAgICAgaW5ncmVkaWVudHNbMF0uaW5ncmVkaWVudE5hbWUgPSBcIlwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaW5ncmVkaWVudHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucHJvcHMuYVVwZGF0ZVZhbHVlKFwiaW5ncmVkaWVudHNcIiwgaW5ncmVkaWVudHMpO1xuICAgIH0sXG4gICAgcmVuZGVyRGlzcGxheTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBrZXkgPSAwO1xuICAgICAgICB2YXIgbGlzdCA9IHRoaXMucHJvcHMuaW5ncmVkaWVudHMubWFwKGZ1bmN0aW9uKGluZykge1xuICAgICAgICAgICAgaWYgKGluZy5pbmdyZWRpZW50TmFtZSA9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDxsaSBrZXkgPSB7a2V5Kyt9ID5QbGVhc2UgZW50ZXIgaW5ncmVkaWVudC4uLjwvbGk+OyAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDxsaSBrZXkgPSB7a2V5Kyt9ID57aW5nLnF1YW50aXR5ICsgXCIgXCIgKyBpbmcudW5pdHMgKyBcIiBcIiArIGluZy5pbmdyZWRpZW50TmFtZX08L2xpPjsgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiAoPHVsPntsaXN0fTwvdWw+KTtcbiAgICB9LFxuICAgIHJlbmRlckZvcm06IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIga2V5ID0gLTE7XG4gICAgICAgIHZhciBtZSA9IHRoaXM7XG4gICAgICAgIHZhciBpbmdyZWRpZW50TGlzdCA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc3RhdGUuaW5ncmVkaWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGluZ3JlZGllbnRMaXN0LnB1c2godGhpcy5zdGF0ZS5pbmdyZWRpZW50c1tpXS5pbmdyZWRpZW50TmFtZSk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbGlzdCA9IHRoaXMucHJvcHMuaW5ncmVkaWVudHMubWFwKGZ1bmN0aW9uKGluZykge1xuICAgICAgICAgICAgdmFyIHF1YW50aXR5Q2xhc3NlcyA9IFwicXVhbnRpdHlcIjtcbiAgICAgICAgICAgIHZhciB1bml0c0NsYXNzZXMgPSBcInVuaXRzXCI7XG4gICAgICAgICAgICB2YXIgaW5ncmVkaWVudENsYXNzZXMgPSBcIm5hbWVcIjtcblxuICAgICAgICAgICAgaWYgKG1lLnByb3BzLnZhbGlkYXRlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGluZy5xdWFudGl0eSA9PSBudWxsIHx8IGluZy5xdWFudGl0eSA9PSBcIlwiIHx8IGluZy5xdWFudGl0eSA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcXVhbnRpdHlDbGFzc2VzICs9IFwiIHJlcXVpcmVkXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpbmcudW5pdHMgPT0gbnVsbCB8fCBpbmcudW5pdHMgPT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICB1bml0c0NsYXNzZXMgKz0gXCIgcmVxdWlyZWRcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGluZy5pbmdyZWRpZW50TmFtZSA9PSBudWxsIHx8IGluZy5pbmdyZWRpZW50TmFtZSA9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGluZ3JlZGllbnRDbGFzc2VzICs9IFwiIHJlcXVpcmVkXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAga2V5Kys7XG4gICAgICAgICAgICByZXR1cm4gKCA8bGkga2V5PXtrZXl9IGRhdGEtaW5nLWtleT17a2V5fSBjbGFzc05hbWU9XCJpbmdyZWRpZW50IGNvbHVtbiBjb2x1bW4tM1wiPlxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdmFsdWUgPSB7aW5nLnF1YW50aXR5fSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cIm51bWJlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyID0gXCJRdWFudGl0eS4uLlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZSA9IHtxdWFudGl0eUNsYXNzZXN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlID0ge21lLnVwZGF0ZVF1YW50aXR5fVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8QXV0b0NvbXBsZXRlIHZhbHVlID0ge2luZy51bml0c31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyID0gXCJVbml0Li4uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1c3RvbUNsYXNzID0ge3VuaXRzQ2xhc3Nlc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZSA9IHttZS5zdGF0ZS51bml0c31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZSA9IHttZS51cGRhdGVVbml0fS8+ICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgPEF1dG9Db21wbGV0ZSB2YWx1ZSA9IHtpbmcuaW5ncmVkaWVudE5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlciA9IFwiSW5ncmVkaWVudC4uLlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXN0b21DbGFzcyA9IHtpbmdyZWRpZW50Q2xhc3Nlc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZSA9IHtpbmdyZWRpZW50TGlzdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZSA9IHttZS51cGRhdGVJbmdyZWRpZW50TmFtZX0vPlxuICAgICAgICAgICAgICAgICAgICA8YSBjbGFzc05hbWU9XCJ0aS10cmFzaFwiIG9uQ2xpY2s9e21lLmRlbGV0ZUluZ3JlZGllbnR9Lz5cbiAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuICg8dWwgY2xhc3NOYW1lPVwiZWRpdGFibGVcIj5cbiAgICAgICAgICAgIHtsaXN0fVxuICAgICAgICAgICAgPGxpIG9uQ2xpY2s9e3RoaXMucHJvcHMuYUFkZEluZ3JlZGllbnR9IGNsYXNzTmFtZT1cImFkZC1uZXdcIj48YSBjbGFzc05hbWU9XCJ0aS1wbHVzXCI+PC9hPjxsYWJlbD5BZGQgaW5ncmVkaWVudDwvbGFiZWw+PC9saT5cbiAgICAgICAgPC91bD4pO1xuICAgIH0sXG4gICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGxpc3Q7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmVkaXRhYmxlKSB7XG4gICAgICAgICAgICBsaXN0ID0gdGhpcy5yZW5kZXJGb3JtKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsaXN0ID0gdGhpcy5yZW5kZXJEaXNwbGF5KCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKCA8c2VjdGlvbiBjbGFzc05hbWU9XCJyZWNpcGUtaW5ncmVkaWVudHNcIj5cbiAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwiZGF0YS1sYWJlbFwiPkluZ3JlZGllbnRzPC9sYWJlbD5cbiAgICAgICAgICAgICAgICB7bGlzdH1cbiAgICAgICAgICAgIDwvc2VjdGlvbj5cbiAgICAgICAgKTtcbiAgICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgSW5ncmVkaWVudHM7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9yb290L2NvbXBvbmVudHMvaW5ncmVkaWVudHMuanN4IiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xuXG5yZXF1aXJlKFwiLi4vc3R5bGUvY29tcG9uZW50cy9hdXRvY29tcGxldGUuc2Nzc1wiKTtcblxudmFyIEF1dG9Db21wbGV0ZSA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZ1bGxMaXN0OiB0aGlzLnByb3BzLnNvdXJjZSxcbiAgICAgICAgICAgIGZpbHRlcmVkTGlzdDogW10sXG4gICAgICAgICAgICBzZWFyY2hUZXJtczogW10sXG4gICAgICAgICAgICBhY3RpdmVJbmRleDogMFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgZ2V0SXRlbUhUTUw6IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIHZhciBpdGVtSFRNTCA9IGl0ZW07XG4gICAgICAgIHZhciB3aGVyZVRvU3RhcnQgPSAwO1xuXG4gICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdGhpcy5zdGF0ZS5zZWFyY2hUZXJtcy5sZW5ndGg7IHgrKykge1xuICAgICAgICAgICAgdmFyIHRlcm0gPSB0aGlzLnN0YXRlLnNlYXJjaFRlcm1zW3hdO1xuICAgICAgICAgICAgaWYgKHRlcm0gPT0gXCJcIikgY29udGludWU7XG4gICAgICAgICAgICB2YXIgcmVwbGFjZW1lbnQgPSBcIlwiO1xuICAgICAgICAgICAgdmFyIHJlZ0V4T2JqID0gdGhpcy5nZXRSZWdFeE9iaih0ZXJtKTtcbiAgICAgICAgICAgIHZhciBtYXRjaCA9IGl0ZW1IVE1MLnN1YnN0cmluZyh3aGVyZVRvU3RhcnQsIGl0ZW1IVE1MLmxlbmd0aCkubWF0Y2gocmVnRXhPYmopO1xuICAgICAgICAgICAgdmFyIGJlZm9yZVN0cmluZyA9IGl0ZW1IVE1MLnN1YnN0cmluZygwLCB3aGVyZVRvU3RhcnQpO1xuICAgICAgICAgICAgdmFyIGFmdGVyU3RyaW5nID0gaXRlbUhUTUwuc3Vic3RyaW5nKHdoZXJlVG9TdGFydCwgaXRlbUhUTUwubGVuZ3RoKTtcblxuICAgICAgICAgICAgaWYgKG1hdGNoICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXBsYWNlbWVudCA9IFwiPHNwYW4gY2xhc3M9J2hpZ2hsaWdodCc+XCIgKyBtYXRjaFswXSArIFwiPC9zcGFuPlwiO1xuICAgICAgICAgICAgICAgIHdoZXJlVG9TdGFydCArPSBtYXRjaC5pbmRleCArIHJlcGxhY2VtZW50Lmxlbmd0aDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaXRlbUhUTUwgPSBiZWZvcmVTdHJpbmcgKyBhZnRlclN0cmluZy5yZXBsYWNlKHJlZ0V4T2JqLCByZXBsYWNlbWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIF9faHRtbDogaXRlbUhUTUxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIGdldFJlZ0V4T2JqOiBmdW5jdGlvbiAoc2VhcmNoUmVnRXgpIHtcbiAgICAgICAgdmFyIHJldHVybk9iaiA9IG51bGw7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm5PYmogPSBuZXcgUmVnRXhwKHNlYXJjaFJlZ0V4LCBcImlcIik7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgICAgIHJldHVybiByZXR1cm5PYmo7XG4gICAgfSxcbiAgICByZXNpemU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHJlc3VsdHMgPSBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKS5xdWVyeVNlbGVjdG9yKFwiLnJlc3VsdHNcIik7XG4gICAgICAgIHZhciBjb21wb25lbnRQb3MgPSBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgICAgICB2YXIgcG9zID0gcmVzdWx0cy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgcmVzdWx0cy5zdHlsZS5tYXhIZWlnaHQgPSAod2luZG93LmlubmVySGVpZ2h0IC0gcG9zLnRvcCkgKyBcInB4XCI7XG4gICAgICAgIHJlc3VsdHMuc3R5bGUudG9wID0gY29tcG9uZW50UG9zLmhlaWdodCArIFwicHhcIjtcbiAgICB9LFxuICAgIGtleXVwOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICBpZiAoZS5rZXlDb2RlID09IDQwKSB7XG4gICAgICAgICAgICB2YXIgbmV3SW5kZXggPSB0aGlzLnN0YXRlLmFjdGl2ZUluZGV4ICsgMTtcbiAgICAgICAgICAgIGlmIChuZXdJbmRleCA8IHRoaXMuc3RhdGUuZmlsdGVyZWRMaXN0Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICBhY3RpdmVJbmRleDogbmV3SW5kZXhcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChlLmtleUNvZGUgPT0gMzgpIHtcbiAgICAgICAgICAgIHZhciBuZXdJbmRleCA9IHRoaXMuc3RhdGUuYWN0aXZlSW5kZXggLSAxO1xuICAgICAgICAgICAgaWYgKG5ld0luZGV4ID49IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlSW5kZXg6IG5ld0luZGV4XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoZS5rZXlDb2RlID09IDEzKSB7XG4gICAgICAgICAgICB2YXIgaXRlbXMgPSBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKS5xdWVyeVNlbGVjdG9yKFwiLnJlc3VsdHNcIikuY2hpbGROb2RlcztcbiAgICAgICAgICAgIGl0ZW1zW3RoaXMuc3RhdGUuYWN0aXZlSW5kZXhdLmNsaWNrKCk7XG4gICAgICAgICAgICBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKS5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIikuYmx1cigpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBjaGFuZ2U6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMpLnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKS52YWx1ZTtcbiAgICAgICAgdmFyIHJlc3VsdHMgPSBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKS5xdWVyeVNlbGVjdG9yKFwiLnJlc3VsdHNcIik7XG5cbiAgICAgICAgdmFyIHNlYXJjaFRlcm1zID0gdmFsdWUucmVwbGFjZSgvW1xcLVxcW1xcXVxcL1xce1xcfVxcKFxcKVxcKlxcK1xcP1xcLlxcXFxcXF5cXCRcXHxdL2csIFwiXFxcXCQmXCIpLnNwbGl0KFwiIFwiKTtcbiAgICAgICAgdmFyIHNlYXJjaFJlZ0V4U3RyaW5nID0gXCJcIlxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlYXJjaFRlcm1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBzZWFyY2hSZWdFeFN0cmluZyArPSBzZWFyY2hUZXJtc1tpXSArIFwiLipcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByZWdFeE9iaiA9IHRoaXMuZ2V0UmVnRXhPYmooc2VhcmNoUmVnRXhTdHJpbmcpO1xuXG4gICAgICAgIHZhciBmaWx0ZXJlZExpc3QgPSBbXTtcbiAgICAgICAgaWYgKHJlZ0V4T2JqICE9PSBudWxsKSB7XG4gICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHRoaXMuc3RhdGUuZnVsbExpc3QubGVuZ3RoOyB4KyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudEl0ZW0gPSB0aGlzLnN0YXRlLmZ1bGxMaXN0W3hdO1xuICAgICAgICAgICAgICAgIGlmIChyZWdFeE9iai50ZXN0KGN1cnJlbnRJdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZExpc3QucHVzaChjdXJyZW50SXRlbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZmlsdGVyZWRMaXN0ID0gdGhpcy5zdGF0ZS5mdWxsTGlzdC5zbGljZSgwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgZmlsdGVyZWRMaXN0OiBmaWx0ZXJlZExpc3QsXG4gICAgICAgICAgICBmdWxsTGlzdDogdGhpcy5wcm9wcy5zb3VyY2UsXG4gICAgICAgICAgICBzZWFyY2hUZXJtczogc2VhcmNoVGVybXNcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5yZXNpemUoKTtcbiAgICAgICAgdGhpcy5wcm9wcy5jaGFuZ2UoZSk7XG4gICAgfSxcbiAgICBmb2N1czogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2UoZSk7XG5cbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgdGhpcy5yZXNpemUsIHRydWUpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCB0aGlzLnJlc2l6ZSwgZmFsc2UpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMua2V5dXAsIGZhbHNlKTtcblxuICAgICAgICBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKS5jbGFzc0xpc3QuYWRkKFwic2hvd1wiKTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBhY3RpdmVJbmRleDogMFxuICAgICAgICB9KTtcbiAgICB9LFxuICAgIGJsdXI6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIHRoaXMucmVzaXplLCB0cnVlKTtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdGhpcy5yZXNpemUsIGZhbHNlKTtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLmtleXVwLCBmYWxzZSk7XG5cbiAgICAgICAgUmVhY3RET00uZmluZERPTU5vZGUodGhpcykuY2xhc3NMaXN0LnJlbW92ZShcInNob3dcIik7XG4gICAgfSxcbiAgICBzZWxlY3Q6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciBjdXJyZW50RWxlbWVudCA9IGUudGFyZ2V0O1xuICAgICAgICB3aGlsZSAoY3VycmVudEVsZW1lbnQgIT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcIml0ZW1cIikpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKS5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIikudmFsdWUgPSBjdXJyZW50RWxlbWVudC5pbm5lclRleHQ7XG4gICAgICAgIGUudGFyZ2V0ID0gUmVhY3RET00uZmluZERPTU5vZGUodGhpcykucXVlcnlTZWxlY3RvcihcImlucHV0XCIpO1xuICAgICAgICB0aGlzLmNoYW5nZShlKTtcbiAgICB9LFxuICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBtZSA9IHRoaXM7XG4gICAgICAgIHZhciBrZXkgPSAtMTtcbiAgICAgICAgdmFyIGxpc3QgPSB0aGlzLnN0YXRlLmZpbHRlcmVkTGlzdC5tYXAoZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgaXRlbUNsYXNzID0gXCJpdGVtXCI7XG4gICAgICAgICAgICBpZiAoaW5kZXggPT0gbWUuc3RhdGUuYWN0aXZlSW5kZXgpIHtcbiAgICAgICAgICAgICAgICBpdGVtQ2xhc3MgKz0gXCIgYWN0aXZlXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gKDxkaXYga2V5PXtrZXkrK30gY2xhc3NOYW1lPXtpdGVtQ2xhc3N9XG4gICAgICAgICAgICAgICAgb25DbGljaz17bWUuc2VsZWN0fVxuICAgICAgICAgICAgICAgIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MPXttZS5nZXRJdGVtSFRNTChpdGVtKX0+XG4gICAgICAgICAgICA8L2Rpdj4pXG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgY3VzdG9tQ2xhc3MgPSBcImF1dG9jb21wbGV0ZSBcIiArIHRoaXMucHJvcHMuY3VzdG9tQ2xhc3M7XG4gICAgICAgIHJldHVybig8ZGl2IGNsYXNzTmFtZT17Y3VzdG9tQ2xhc3N9PlxuICAgICAgICAgICAgPGlucHV0IHZhbHVlPXt0aGlzLnByb3BzLnZhbHVlfVxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXt0aGlzLnByb3BzLnBsYWNlaG9sZGVyfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmNoYW5nZX1cbiAgICAgICAgICAgICAgICBvbkZvY3VzPXt0aGlzLmZvY3VzfVxuICAgICAgICAgICAgICAgIG9uQmx1cj17dGhpcy5ibHVyfT5cbiAgICAgICAgICAgIDwvaW5wdXQ+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlc3VsdHNcIj57bGlzdH08L2Rpdj5cbiAgICAgICAgPC9kaXY+KTtcbiAgICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgQXV0b0NvbXBsZXRlO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vcm9vdC9jb21wb25lbnRzL2F1dG9jb21wbGV0ZS5qc3giLCIvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXG4vLyBsb2FkIHRoZSBzdHlsZXNcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vYXV0b2NvbXBsZXRlLnNjc3NcIik7XG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcbi8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIHt9KTtcbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuLy8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuaWYobW9kdWxlLmhvdCkge1xuXHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vYXV0b2NvbXBsZXRlLnNjc3NcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuL2F1dG9jb21wbGV0ZS5zY3NzXCIpO1xuXHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0fSk7XG5cdH1cblx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9yb290L3N0eWxlL2NvbXBvbmVudHMvYXV0b2NvbXBsZXRlLnNjc3MiLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuYXV0b2NvbXBsZXRle3Bvc2l0aW9uOnJlbGF0aXZlfS5hdXRvY29tcGxldGUuc2hvdyBpbnB1dHtib3JkZXItcmFkaXVzOjVweCA1cHggMCAwfS5hdXRvY29tcGxldGUuc2hvdyAucmVzdWx0c3t0cmFuc2Zvcm06cGVyc3BlY3RpdmUoMCkgcm90YXRlWCgwZGVnKX0uYXV0b2NvbXBsZXRlIC5yZXN1bHRze2NvbG9yOiM1ODU2NTg7YmFja2dyb3VuZC1jb2xvcjojZmZmO2JveC1zaGFkb3c6NXB4IDVweCAxMHB4ICMwMDA7cG9zaXRpb246YWJzb2x1dGU7bGVmdDowO3JpZ2h0OjA7dHJhbnNmb3JtOnBlcnNwZWN0aXZlKDgwMHB4KSByb3RhdGVYKC05MGRlZyk7dHJhbnNmb3JtLW9yaWdpbjp0b3A7dHJhbnNpdGlvbjphbGwgLjVzIGxpbmVhcjt6LWluZGV4OjEwO292ZXJmbG93OnNjcm9sbH0uYXV0b2NvbXBsZXRlIC5yZXN1bHRzIC5pdGVte3BhZGRpbmc6NXB4O2JvcmRlci1ib3R0b206MXB4IHNvbGlkICMyZTJjMmQ7Y3Vyc29yOnBvaW50ZXJ9LmF1dG9jb21wbGV0ZSAucmVzdWx0cyAuaXRlbSAuaGlnaGxpZ2h0e2ZvbnQtd2VpZ2h0OjcwMDtmb250LXNpemU6MjBweDtjb2xvcjojMmUyYzJkfS5hdXRvY29tcGxldGUgLnJlc3VsdHMgLml0ZW06bGFzdC1jaGlsZHtib3JkZXItYm90dG9tOm5vbmV9LmF1dG9jb21wbGV0ZSAucmVzdWx0cyAuaXRlbS5hY3RpdmUsLmF1dG9jb21wbGV0ZSAucmVzdWx0cyAuaXRlbTpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiMyZTJjMmQ7Y29sb3I6I2IzYWZhZn0uYXV0b2NvbXBsZXRlIC5yZXN1bHRzIC5pdGVtLmFjdGl2ZSAuaGlnaGxpZ2h0LC5hdXRvY29tcGxldGUgLnJlc3VsdHMgLml0ZW06aG92ZXIgLmhpZ2hsaWdodHtjb2xvcjojZjFmMWYxfVwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9jc3MtbG9hZGVyIS4vfi9zYXNzLWxvYWRlciEuL3Jvb3Qvc3R5bGUvY29tcG9uZW50cy9hdXRvY29tcGxldGUuc2Nzc1xuLy8gbW9kdWxlIGlkID0gMTcyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi9pbmdyZWRpZW50cy5zY3NzXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCB7fSk7XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcblx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuL2luZ3JlZGllbnRzLnNjc3NcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuL2luZ3JlZGllbnRzLnNjc3NcIik7XG5cdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHR9KTtcblx0fVxuXHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3Jvb3Qvc3R5bGUvY29tcG9uZW50cy9pbmdyZWRpZW50cy5zY3NzIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKSgpO1xuLy8gaW1wb3J0c1xuXG5cbi8vIG1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLnJlY2lwZS1pbmdyZWRpZW50cyB1bHtwYWRkaW5nOjB9LnJlY2lwZS1pbmdyZWRpZW50cyB1bCBsaXtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO3BhZGRpbmc6NXB4fS5yZWNpcGUtaW5ncmVkaWVudHMgdWwgbGkgaW5wdXQucmVxdWlyZWR7YmFja2dyb3VuZC1jb2xvcjojZjk2NjY2fS5yZWNpcGUtaW5ncmVkaWVudHMgdWwgbGkgLnF1YW50aXR5e3dpZHRoOjVlbTt0ZXh0LWFsaWduOmNlbnRlcn0ucmVjaXBlLWluZ3JlZGllbnRzIHVsIGxpIC51bml0c3tkaXNwbGF5OmZsZXg7d2lkdGg6OGVtO21hcmdpbjowIDVweH0ucmVjaXBlLWluZ3JlZGllbnRzIHVsIGxpIC51bml0cyBpbnB1dHt3aWR0aDoxMDAlfS5yZWNpcGUtaW5ncmVkaWVudHMgdWwgbGkgLm5hbWV7ZmxleDoxO2Rpc3BsYXk6ZmxleDttYXJnaW4tcmlnaHQ6NXB4fS5yZWNpcGUtaW5ncmVkaWVudHMgdWwgbGkgLm5hbWUgaW5wdXR7ZmxleDoxfS5yZWNpcGUtaW5ncmVkaWVudHMgdWwgLnRpLXRyYXNoe2FsaWduLXNlbGY6Y2VudGVyfVwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9jc3MtbG9hZGVyIS4vfi9zYXNzLWxvYWRlciEuL3Jvb3Qvc3R5bGUvY29tcG9uZW50cy9pbmdyZWRpZW50cy5zY3NzXG4vLyBtb2R1bGUgaWQgPSAxNzRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBDcm9wcGVyIGZyb20gJy4vY3JvcHBlci5qc3gnO1xuaW1wb3J0IFRpbWUgZnJvbSAnLi90aW1lLmpzeCc7XG5cbnJlcXVpcmUoXCIuLi9zdHlsZS9jb21wb25lbnRzL3JlY2lwZUhlYWRlci5zY3NzXCIpO1xuXG52YXIgUmVjaXBlSGVhZGVyID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICAgIHVwZGF0ZVRpdGxlOiBmdW5jdGlvbihlKSB7XG4gICAgICAgIHRoaXMucHJvcHMuYVVwZGF0ZVZhbHVlKFwidGl0bGVcIiwgZS50YXJnZXQudmFsdWUpO1xuICAgIH0sXG4gICAgdXBkYXRlUHJlcFRpbWU6IGZ1bmN0aW9uKHRpbWUpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5hVXBkYXRlVmFsdWUoJ3ByZXBUaW1lJywgdGltZSk7IFxuICAgIH0sXG4gICAgdXBkYXRlQ29va1RpbWU6IGZ1bmN0aW9uKHRpbWUpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5hVXBkYXRlVmFsdWUoJ2Nvb2tUaW1lJywgdGltZSk7IFxuICAgIH0sXG4gICAgdXBkYXRlU2VydmluZ3M6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5hVXBkYXRlVmFsdWUoJ3NlcnZpbmdzJywgZS50YXJnZXQudmFsdWUpOyBcbiAgICB9LFxuICAgIGFmdGVySW1hZ2VDcm9wOiBmdW5jdGlvbihpbWFnZVVybCkgeyAgICAgICAgXG4gICAgICAgIHRoaXMucHJvcHMuYVVwZGF0ZVZhbHVlKCdwaWN0dXJlJywgaW1hZ2VVcmwpOyAgICAgICAgXG4gICAgfSxcbiAgICBoYW5kbGVQdWJsaWNDaGFuZ2U6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5hVXBkYXRlVmFsdWUoJ3B1YmxpYycsIGUudGFyZ2V0LmNoZWNrZWQpOyAgXG4gICAgfSxcbiAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBTcGxpdCB0aW1lc3RhbXAgaW50byBbIFksIE0sIEQsIGgsIG0sIHMgXVxuICAgICAgICB2YXIgdGltZSA9IHRoaXMucHJvcHMucmVjaXBlLmRhdGVNb2RpZmllZC5zcGxpdCgvWy0gOl0vKTtcblxuICAgICAgICAvLyBBcHBseSBlYWNoIGVsZW1lbnQgdG8gdGhlIERhdGUgZnVuY3Rpb25cbiAgICAgICAgdmFyIGNyZWF0ZWQgPSBuZXcgRGF0ZShEYXRlLlVUQyh0aW1lWzBdLCB0aW1lWzFdLTEsIHRpbWVbMl0sIHRpbWVbM10sIHRpbWVbNF0sIHRpbWVbNV0pKTtcblxuICAgICAgICB2YXIgaW5mb0NsYXNzZXMgPSB0aGlzLnByb3BzLmVkaXRhYmxlP1wicmVjaXBlLWluZm8gZWRpdGFibGVcIjpcInJlY2lwZS1pbmZvXCI7XG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5wcm9wcy5yZWNpcGUucHVibGljKSB7XG4gICAgICAgICAgICB2YXIgcHVibGljTm90ZSA9IDxsYWJlbCBjbGFzc05hbWU9XCJwdWJsaWMtbm90ZVwiPlRoaXMgcmVjaXBlIGlzIHB1YmxpYyAoRXZlcnlvbmUgY2FuIHZpZXcpPC9sYWJlbD47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgcHVibGljTm90ZSA9IDxsYWJlbCBjbGFzc05hbWU9XCJwdWJsaWMtbm90ZVwiPlRoaXMgcmVjaXBlIGlzIHByaXZhdGUgKE9ubHkgeW91IGNhbiB2aWV3KTwvbGFiZWw+O1xuICAgICAgICB9XG4gICAgICAgIHZhciB0aXRsZSA9IHRoaXMucHJvcHMucmVjaXBlLnRpdGxlO1xuICAgICAgICBpZiAoIXRoaXMucHJvcHMuZWRpdGFibGUgJiYgKHRpdGxlID09IFwiXCIgfHwgdGl0bGUgPT0gXCJOZXcuLi5cIikpIHtcbiAgICAgICAgICAgIHRpdGxlID0gXCJQbGVhc2UgZW50ZXIgYSBuZXcgdGl0bGUgLi4uXCI7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRpdGxlQ2xhc3NlcyA9IFwidGl0bGVcIjtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMudmFsaWRhdGUgJiYgKHRoaXMucHJvcHMucmVjaXBlLnRpdGxlID09IG51bGwgfHwgdGhpcy5wcm9wcy5yZWNpcGUudGl0bGUgPT0gXCJcIikpIHtcbiAgICAgICAgICAgIHRpdGxlQ2xhc3NlcyArPSBcIiByZXF1aXJlZFwiO1xuICAgICAgICB9XG4gICAgICAgIHZhciB1bmlxdWVJZCA9IFwiaWQtXCIgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblxuICAgICAgICB2YXIgY29udHJvbHMgPSBcIlwiO1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5zVXNlciAhPSBudWxsICYmIHRoaXMucHJvcHMuc1VzZXIudXNlcklkID09IHRoaXMucHJvcHMucmVjaXBlLmNyZWF0b3IpIHtcbiAgICAgICAgICAgIGNvbnRyb2xzID0gKDxkaXY+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGktc2F2ZVwiIG9uQ2xpY2sgPSB7dGhpcy5wcm9wcy5zYXZlfT48L3NwYW4+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGktY2xvc2VcIiBvbkNsaWNrID0ge3RoaXMucHJvcHMuY2FuY2VsfT48L3NwYW4+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGktcGVuY2lsXCIgb25DbGljayA9IHt0aGlzLnByb3BzLmVkaXR9Pjwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2Pik7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgc2VydmluZ3MgPSA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0XCI+eyB0aGlzLnByb3BzLnJlY2lwZS5zZXJ2aW5ncyB9PC9zcGFuPjtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuZWRpdGFibGUpIHtcbiAgICAgICAgICAgIHZhciBzZXJ2aW5nc0NsYXNzZXMgPSBcInNlcnZpbmctdmFsdWVcIjtcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLnZhbGlkYXRlICYmICh0aGlzLnByb3BzLnJlY2lwZS5zZXJ2aW5ncyA9PSBudWxsIHx8IHRoaXMucHJvcHMucmVjaXBlLnNlcnZpbmdzID09IFwiXCIgfHwgdGhpcy5wcm9wcy5yZWNpcGUuc2VydmluZ3MgPCAwKSkge1xuICAgICAgICAgICAgICAgIHNlcnZpbmdzQ2xhc3NlcyArPSBcIiByZXF1aXJlZFwiO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZXJ2aW5ncyA9IDxpbnB1dCB0eXBlPVwibnVtYmVyXCIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtzZXJ2aW5nc0NsYXNzZXN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMucHJvcHMucmVjaXBlLnNlcnZpbmdzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLnVwZGF0ZVNlcnZpbmdzfVxuICAgICAgICAgICAgICAgICAgICAgICAgLz47XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKDxoZWFkZXIgY2xhc3NOYW1lPVwicmVjaXBlLWhlYWRlclwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtpbmZvQ2xhc3Nlc30+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVjaXBlLXRpdGxlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3NOYW1lPXt0aXRsZUNsYXNzZXN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB7dGhpcy5wcm9wcy5yZWNpcGUudGl0bGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQbGVhc2UgZW50ZXIgYSBuZXcgdGl0bGUgLi4uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZSA9IHt0aGlzLnVwZGF0ZVRpdGxlfVxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXt0aXRsZUNsYXNzZXN9Pnt0aXRsZX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y29udHJvbHN9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRpbWUtaW5mb1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGktdGltZXJcIj48L3NwYW4+IFxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwicHJlcC10aW1lXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlByZXA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUaW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnByb3BzLnJlY2lwZS5wcmVwVGltZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tQ2xhc3M9XCJwcmVwLXRpbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0YWJsZT17dGhpcy5wcm9wcy5lZGl0YWJsZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlPXt0aGlzLnVwZGF0ZVByZXBUaW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJjb29rLXRpbWVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+Q29vazwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRpbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMucHJvcHMucmVjaXBlLmNvb2tUaW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXN0b21DbGFzcz1cImNvb2stdGltZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRhYmxlPXt0aGlzLnByb3BzLmVkaXRhYmxlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGU9e3RoaXMudXBkYXRlQ29va1RpbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRpLXBpZS1jaGFydFwiPjwvc3Bhbj4gXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJzZXJ2aW5nc1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzZXJ2aW5nc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+c2VydmluZ3M8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhZGRpdGlvbi1pbmZvXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJhdXRob3JcIj57dGhpcy5wcm9wcy5yZWNpcGUuZmlyc3ROYW1lICsgXCIgXCIgKyB0aGlzLnByb3BzLnJlY2lwZS5sYXN0TmFtZX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJjcmVhdGlvbi1kYXRlXCI+ICh7Y3JlYXRlZC50b0RhdGVTdHJpbmcoKX0pPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwdWJsaWMtb3B0aW9uXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7cHVibGljTm90ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJ0b2dnbGUtbGFiZWxcIj5NYWtlIHJlY2lwZSBwdWJsaWM8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGlkPXt1bmlxdWVJZH0gY2xhc3NOYW1lPVwidG9nZ2xlLXN3aXRjaFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBodG1sRm9yPXt1bmlxdWVJZH0gdHlwZT1cImNoZWNrYm94XCIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e3RoaXMucHJvcHMucmVjaXBlLnB1YmxpY30gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZVB1YmxpY0NoYW5nZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInNsaWRlclwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxDcm9wcGVyXG4gICAgICAgICAgICAgICAgICAgIGltYWdlPXt0aGlzLnByb3BzLnJlY2lwZS5waWN0dXJlICsgXCI/XCIgKyB0aGlzLnByb3BzLnJlY2lwZS5kYXRlTW9kaWZpZWR9XG4gICAgICAgICAgICAgICAgICAgIGVkaXRhYmxlPXt0aGlzLnByb3BzLmVkaXRhYmxlfVxuICAgICAgICAgICAgICAgICAgICBvbkFmdGVyQ3JvcD17dGhpcy5hZnRlckltYWdlQ3JvcH1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9oZWFkZXI+XG4gICAgICAgICk7XG4gICAgfVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IFJlY2lwZUhlYWRlcjtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3Jvb3QvY29tcG9uZW50cy9yZWNpcGVIZWFkZXIuanN4IiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xuXG5yZXF1aXJlKFwiLi4vc3R5bGUvY29tcG9uZW50cy9jcm9wcGVyLnNjc3NcIik7XG5cbnZhciBDcm9wcGVyID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICAgIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkcmFnZ2luZzogZmFsc2UsXG4gICAgICAgICAgICB6b29tSGVsZDogZmFsc2UsXG4gICAgICAgICAgICB6b29tVGltZXI6IG51bGwsXG4gICAgICAgICAgICB6b29taW5nSW50ZXJ2YWw6IG51bGwsXG4gICAgICAgICAgICB6b29tRGlyZWN0aW9uOiBudWxsLFxuICAgICAgICAgICAgaW1hZ2U6IHt9LFxuICAgICAgICAgICAgbW91c2U6IHtcbiAgICAgICAgICAgICAgeDogbnVsbCxcbiAgICAgICAgICAgICAgeTogbnVsbFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHByZXZpZXc6IG51bGwsXG4gICAgICAgICAgICBjdXJyZW50VXJsOiBudWxsLFxuICAgICAgICAgICAgem9vbTogMVxuICAgICAgICB9O1xuICAgIH0sXG4gICAgY29tcG9uZW50RGlkVXBkYXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGNvbnRleHQgPSBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKS5xdWVyeVNlbGVjdG9yKFwiLmNhbnZhc1wiKS5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgICAgIGNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIHRoaXMucHJvcHMud2lkdGgsIHRoaXMucHJvcHMuaGVpZ2h0KTtcbiAgICAgICAgdGhpcy5hZGRJbWFnZVRvQ2FudmFzKGNvbnRleHQsIHRoaXMuc3RhdGUuaW1hZ2UpO1xuICAgIH0sXG4gICAgaXNEYXRhVVJMOiBmdW5jdGlvbihzKSB7XG4gICAgICAgIHJldHVybiAhIXMubWF0Y2goL15cXHMqZGF0YTooW2Etel0rXFwvW2Etel0rKDtbYS16XFwtXStcXD1bYS16XFwtXSspPyk/KDtiYXNlNjQpPyxbYS16MC05XFwhXFwkXFwmXFwnXFwsXFwoXFwpXFwqXFwrXFwsXFw7XFw9XFwtXFwuXFxfXFx+XFw6XFxAXFwvXFw/XFwlXFxzXSpcXHMqJC9pKTtcbiAgICB9LFxuICAgIGZpdEltYWdlVG9DYW52YXM6IGZ1bmN0aW9uKHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgICAgdmFyIHNjYWxlZEhlaWdodCwgc2NhbGVkV2lkdGg7XG4gICAgXG4gICAgICAgIHZhciBjYW52YXNBc3BlY3RSYXRpbyA9IHRoaXMucHJvcHMuaGVpZ2h0IC8gdGhpcy5wcm9wcy53aWR0aDtcbiAgICAgICAgdmFyIGltYWdlQXNwZWN0UmF0aW8gPSBoZWlnaHQgLyB3aWR0aDtcbiAgICBcbiAgICAgICAgaWYgKGNhbnZhc0FzcGVjdFJhdGlvID4gaW1hZ2VBc3BlY3RSYXRpbykge1xuICAgICAgICAgIHNjYWxlZEhlaWdodCA9IHRoaXMucHJvcHMuaGVpZ2h0O1xuICAgICAgICAgIGxldCBzY2FsZVJhdGlvID0gc2NhbGVkSGVpZ2h0IC8gaGVpZ2h0O1xuICAgICAgICAgIHNjYWxlZFdpZHRoID0gd2lkdGggKiBzY2FsZVJhdGlvO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNjYWxlZFdpZHRoID0gdGhpcy5wcm9wcy53aWR0aDtcbiAgICAgICAgICBsZXQgc2NhbGVSYXRpbyA9IHNjYWxlZFdpZHRoIC8gd2lkdGg7XG4gICAgICAgICAgc2NhbGVkSGVpZ2h0ID0gaGVpZ2h0ICogc2NhbGVSYXRpbztcbiAgICAgICAgfVxuICAgIFxuICAgICAgICByZXR1cm4geyB3aWR0aDogc2NhbGVkV2lkdGgsIGhlaWdodDogc2NhbGVkSGVpZ2h0IH07XG4gICAgfSxcbiAgICBwcmVwYXJlSW1hZ2U6IGZ1bmN0aW9uKGltYWdlVXJpLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgbWUgPSB0aGlzO1xuICAgICAgICB2YXIgaW1nID0gbmV3IEltYWdlKCk7XG4gICAgICAgIGlmICghdGhpcy5pc0RhdGFVUkwoaW1hZ2VVcmkpKSBpbWcuY3Jvc3NPcmlnaW4gPSAnYW5vbnltb3VzJztcbiAgICAgICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBzY2FsZWRJbWFnZSA9IG1lLmZpdEltYWdlVG9DYW52YXMoaW1nLndpZHRoLCBpbWcuaGVpZ2h0KTtcbiAgICAgICAgICBzY2FsZWRJbWFnZS5yZXNvdXJjZSA9IGltZztcbiAgICAgICAgICBzY2FsZWRJbWFnZS54ID0gMDtcbiAgICAgICAgICBzY2FsZWRJbWFnZS55ID0gMDtcbiAgICAgICAgICBtZS5zZXRTdGF0ZSh7ZHJhZ2dpbmc6IGZhbHNlLCBpbWFnZTogc2NhbGVkSW1hZ2UsIHByZXZpZXc6IG1lLnRvRGF0YVVSTCgpfSk7XG4gICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgfTtcbiAgICAgICAgaW1nLnNyYyA9IGltYWdlVXJpO1xuICAgIH0sXG4gICAgcHJldmVudFNlbGVjdGlvbjogZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5kcmFnZ2luZykge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGJvdW5kZWRDb29yZHM6IGZ1bmN0aW9uKHgsIHksIGR4LCBkeSkge1xuICAgICAgICB2YXIgbmV3WCA9IHggLSBkeDtcbiAgICAgICAgdmFyIG5ld1kgPSB5IC0gZHk7XG4gICAgXG4gICAgICAgIHZhciBzY2FsZWRXaWR0aCA9IHRoaXMuc3RhdGUuaW1hZ2Uud2lkdGggKiB0aGlzLnN0YXRlLnpvb207XG4gICAgICAgIHZhciBkdyA9IChzY2FsZWRXaWR0aCAtIHRoaXMuc3RhdGUuaW1hZ2Uud2lkdGgpIC8gMjtcbiAgICAgICAgdmFyIGltYWdlTGVmdEVkZ2UgPSB0aGlzLnN0YXRlLmltYWdlLnggLSBkdztcbiAgICAgICAgdmFyIGltYWdlUmlnaHRFZGdlID0gKGltYWdlTGVmdEVkZ2UgKyBzY2FsZWRXaWR0aCk7XG4gICAgXG4gICAgICAgIHZhciByaWdodEVkZ2UgPSB0aGlzLnByb3BzLndpZHRoO1xuICAgICAgICB2YXIgbGVmdEVkZ2UgPSAwO1xuICAgIFxuICAgICAgICBpZiAobmV3WCAtIGR3ID4gMCkgeyB4ID0gZHc7IH1cbiAgICAgICAgZWxzZSBpZiAobmV3WCA8ICgtc2NhbGVkV2lkdGggKyByaWdodEVkZ2UpKSB7IHggPSByaWdodEVkZ2UgLSBzY2FsZWRXaWR0aDsgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICB4ID0gbmV3WDtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICB2YXIgc2NhbGVkSGVpZ2h0ID0gdGhpcy5zdGF0ZS5pbWFnZS5oZWlnaHQgKiB0aGlzLnN0YXRlLnpvb207XG4gICAgICAgIHZhciBkaCA9IChzY2FsZWRIZWlnaHQgLSB0aGlzLnN0YXRlLmltYWdlLmhlaWdodCkgLyAyO1xuICAgICAgICB2YXIgaW1hZ2VUb3BFZGdlID0gdGhpcy5zdGF0ZS5pbWFnZS55IC0gZGg7XG4gICAgICAgIHZhciBpbWFnZUJvdHRvbUVkZ2UgPSBpbWFnZVRvcEVkZ2UgKyBzY2FsZWRIZWlnaHQ7XG4gICAgXG4gICAgICAgIHZhciBib3R0b21FZGdlID0gdGhpcy5wcm9wcy5oZWlnaHQ7XG4gICAgICAgIHZhciB0b3BFZGdlID0gMDtcbiAgICAgICAgaWYgKG5ld1kgLSBkaCA+IDApIHsgeSA9IGRoOyB9XG4gICAgICAgIGVsc2UgaWYgKG5ld1kgPCAoLXNjYWxlZEhlaWdodCArIGJvdHRvbUVkZ2UpKSB7IHkgPSBib3R0b21FZGdlIC0gc2NhbGVkSGVpZ2h0OyB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHkgPSBuZXdZO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIHJldHVybiB7IHg6IHgsIHk6IHkgfTtcbiAgICB9LFxuICAgIGFkZEltYWdlVG9DYW52YXM6IGZ1bmN0aW9uKGNvbnRleHQsIGltYWdlKSB7XG4gICAgICAgIGlmICghaW1hZ2UucmVzb3VyY2UpIHJldHVybjtcbiAgICAgICAgY29udGV4dC5zYXZlKCk7XG4gICAgICAgIGNvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gXCJkZXN0aW5hdGlvbi1vdmVyXCI7XG4gICAgICAgIHZhciBzY2FsZWRXaWR0aCA9IHRoaXMuc3RhdGUuaW1hZ2Uud2lkdGggKiB0aGlzLnN0YXRlLnpvb207XG4gICAgICAgIHZhciBzY2FsZWRIZWlnaHQgPSB0aGlzLnN0YXRlLmltYWdlLmhlaWdodCAqIHRoaXMuc3RhdGUuem9vbTtcbiAgICBcbiAgICAgICAgdmFyIHggPSBpbWFnZS54IC0gKHNjYWxlZFdpZHRoIC0gdGhpcy5zdGF0ZS5pbWFnZS53aWR0aCkgLyAyO1xuICAgICAgICB2YXIgeSA9IGltYWdlLnkgLSAoc2NhbGVkSGVpZ2h0IC0gdGhpcy5zdGF0ZS5pbWFnZS5oZWlnaHQpIC8gMjtcbiAgICBcbiAgICAgICAgLy8gbmVlZCB0byBtYWtlIHN1cmUgd2UgYXJlbid0IGdvaW5nIG91dCBvZiBib3VuZHMgaGVyZS4uLlxuICAgICAgICB4ID0gTWF0aC5taW4oeCwgMCk7XG4gICAgICAgIHkgPSBNYXRoLm1pbih5LCAwKTtcbiAgICAgICAgeSA9IHNjYWxlZEhlaWdodCArIHkgPj0gdGhpcy5wcm9wcy5oZWlnaHQgPyB5IDogKHkgKyAodGhpcy5wcm9wcy5oZWlnaHQgLSAoc2NhbGVkSGVpZ2h0ICsgeSkpKTtcbiAgICAgICAgeCA9IHNjYWxlZFdpZHRoICsgeCA+PSB0aGlzLnByb3BzLndpZHRoID8geCA6ICh4ICsgKHRoaXMucHJvcHMud2lkdGggLSAoc2NhbGVkV2lkdGggKyB4KSkpO1xuICAgIFxuICAgICAgICBjb250ZXh0LmRyYXdJbWFnZShpbWFnZS5yZXNvdXJjZSwgeCwgeSwgaW1hZ2Uud2lkdGggKiB0aGlzLnN0YXRlLnpvb20sIGltYWdlLmhlaWdodCAqIHRoaXMuc3RhdGUuem9vbSk7XG4gICAgICAgIGNvbnRleHQucmVzdG9yZSgpO1xuICAgIH0sXG4gICAgdG9EYXRhVVJMOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XG4gICAgICAgIHZhciBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICBcbiAgICAgICAgY2FudmFzLndpZHRoID0gdGhpcy5wcm9wcy53aWR0aDtcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IHRoaXMucHJvcHMuaGVpZ2h0O1xuICAgIFxuICAgICAgICB0aGlzLmFkZEltYWdlVG9DYW52YXMoY29udGV4dCwge1xuICAgICAgICAgIHJlc291cmNlOiB0aGlzLnN0YXRlLmltYWdlLnJlc291cmNlLFxuICAgICAgICAgIHg6IHRoaXMuc3RhdGUuaW1hZ2UueCxcbiAgICAgICAgICB5OiB0aGlzLnN0YXRlLmltYWdlLnksXG4gICAgICAgICAgaGVpZ2h0OiB0aGlzLnN0YXRlLmltYWdlLmhlaWdodCxcbiAgICAgICAgICB3aWR0aDogdGhpcy5zdGF0ZS5pbWFnZS53aWR0aFxuICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgcmV0dXJuIGNhbnZhcy50b0RhdGFVUkwoKTtcbiAgICB9LFxuICAgIGhhbmRsZUNsb3NlOiBmdW5jdGlvbihlKSB7XG4gICAgICAgIHZhciBjYW52YXMgPSBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKS5xdWVyeVNlbGVjdG9yKFwiLmNhbnZhc1wiKTtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgdGhpcy5oYW5kbGVNb3VzZU1vdmUpO1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgdGhpcy5oYW5kbGVNb3VzZVVwKTtcbiAgICAgICAgY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5oYW5kbGVNb3VzZURvd24pO1xuXG4gICAgICAgIFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMpLmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93XCIpO1xuICAgIH0sXG4gICAgaGFuZGxlTW91c2VEb3duOiBmdW5jdGlvbihlKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIGltYWdlOiB0aGlzLnN0YXRlLmltYWdlLFxuICAgICAgICAgIGRyYWdnaW5nOiB0cnVlLFxuICAgICAgICAgIG1vdXNlOiB7XG4gICAgICAgICAgICB4OiBudWxsLFxuICAgICAgICAgICAgeTogbnVsbFxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBoYW5kbGVNb3VzZVVwOiBmdW5jdGlvbihlKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBkcmFnZ2luZzogZmFsc2UsIHByZXZpZXc6IHRoaXMudG9EYXRhVVJMKCkgfSk7XG4gICAgfSxcbiAgICBoYW5kbGVNb3VzZU1vdmU6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKCF0aGlzLnN0YXRlLmRyYWdnaW5nKSByZXR1cm47XG4gICAgXG4gICAgICAgIHZhciBtb3VzZVggPSBlLmNsaWVudFg7XG4gICAgICAgIHZhciBtb3VzZVkgPSBlLmNsaWVudFk7XG4gICAgICAgIHZhciBpbWFnZVggPSB0aGlzLnN0YXRlLmltYWdlLng7XG4gICAgICAgIHZhciBpbWFnZVkgPSB0aGlzLnN0YXRlLmltYWdlLnk7XG4gICAgXG4gICAgICAgIHZhciBuZXdJbWFnZSA9IHRoaXMuc3RhdGUuaW1hZ2U7XG4gICAgXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLm1vdXNlLnggJiYgdGhpcy5zdGF0ZS5tb3VzZS55KSB7XG4gICAgICAgICAgdmFyIGR4ID0gdGhpcy5zdGF0ZS5tb3VzZS54IC0gbW91c2VYO1xuICAgICAgICAgIHZhciBkeSA9IHRoaXMuc3RhdGUubW91c2UueSAtIG1vdXNlWTtcbiAgICBcbiAgICAgICAgICB2YXIgYm91bmRlZCA9IHRoaXMuYm91bmRlZENvb3JkcyhpbWFnZVgsIGltYWdlWSwgZHgsIGR5KTtcbiAgICBcbiAgICAgICAgICBuZXdJbWFnZS54ID0gYm91bmRlZC54O1xuICAgICAgICAgIG5ld0ltYWdlLnkgPSBib3VuZGVkLnk7XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgaW1hZ2U6IHRoaXMuc3RhdGUuaW1hZ2UsXG4gICAgICAgICAgbW91c2U6IHtcbiAgICAgICAgICAgIHg6IG1vdXNlWCxcbiAgICAgICAgICAgIHk6IG1vdXNlWVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBoYW5kbGVVcGxvYWQ6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdmFyIG1lID0gdGhpcztcblxuICAgICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdpbWcnLCBlLnRhcmdldC5maWxlc1swXSlcbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdhY3Rpb24nLCAnVVBMT0FEX0lNQUdFJylcblxuICAgICAgICBlLnRhcmdldC52YWx1ZSA9IFwiXCI7XG5cbiAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyBUT0RPOiBNYXliZSBoYW5kbGUgb3RoZXIgc3RhdGVzXG4gICAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT0gNCkge1xuICAgICAgICAgICAgICAgIHZhciByZXNwb25zZSA9IEpTT04ucGFyc2UodGhpcy5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICAgIHZhciBsb2FkaW5nID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgUmVhY3RET00uZmluZERPTU5vZGUobWUpLmNsYXNzTGlzdC5hZGQoXCJsb2FkaW5nXCIpOyBcbiAgICAgICAgICAgICAgICB9LCAxMDApXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdmFyIGNhbGxiYWNrID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjYW52YXMgPSBSZWFjdERPTS5maW5kRE9NTm9kZShtZSkucXVlcnlTZWxlY3RvcihcIi5jYW52YXNcIik7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIG1lLmhhbmRsZU1vdXNlTW92ZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgbWUuaGFuZGxlTW91c2VVcCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBtZS5oYW5kbGVNb3VzZURvd24sIGZhbHNlKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3RET00uZmluZERPTU5vZGUobWUpLmNsYXNzTGlzdC5hZGQoXCJzaG93XCIpOyBcblxuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQobG9hZGluZyk7XG4gICAgICAgICAgICAgICAgICAgIFJlYWN0RE9NLmZpbmRET01Ob2RlKG1lKS5jbGFzc0xpc3QucmVtb3ZlKFwibG9hZGluZ1wiKTsgXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIG1lLnByZXBhcmVJbWFnZShyZXNwb25zZS51cmwsIGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICBtZS5zZXRTdGF0ZSh7Y3VycmVudFVybDogcmVzcG9uc2UudXJsLCB6b29tOiAxfSk7ICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgeGhyLm9wZW4oJ1BPU1QnLCAncHJvY2Vzc0FjdGlvbi5waHAnLCB0cnVlKTtcblxuICAgICAgICB4aHIuc2VuZChmb3JtRGF0YSk7XG4gICAgfSxcbiAgICBoYW5kbGVDcm9wOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGRhdGEgPSB0aGlzLnRvRGF0YVVSTCgpO1xuICAgICAgICB2YXIgbWUgPSB0aGlzO1xuICAgICAgICBcbiAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnaW1hZ2UnLCBkYXRhKTtcbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdhY3Rpb24nLCAnQ1JPUF9JTUFHRScpXG4gICAgICAgIGZvcm1EYXRhLmFwcGVuZCgndXJsJywgdGhpcy5zdGF0ZS5jdXJyZW50VXJsKTtcblxuICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy8gVE9ETzogTWF5YmUgaGFuZGxlIG90aGVyIHN0YXRlc1xuICAgICAgICAgICAgLy8gU3VjY2VzcyBpcyA0XG4gICAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT0gNCkge1xuICAgICAgICAgICAgICAgIHZhciByZXNwb25zZSA9IEpTT04ucGFyc2UodGhpcy5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICAgIG1lLnByb3BzLm9uQWZ0ZXJDcm9wKHJlc3BvbnNlLnVybCk7XG4gICAgICAgICAgICAgICAgbWUuaGFuZGxlQ2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHhoci5vcGVuKCdQT1NUJywgJ3Byb2Nlc3NBY3Rpb24ucGhwJywgdHJ1ZSk7XG4gICAgICAgIHhoci5zZW5kKGZvcm1EYXRhKTtcbiAgICB9LFxuICAgIGhhbmRsZVpvb21Nb3VzZURvd246IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdmFyIG1lID0gdGhpcztcbiAgICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInpvb20taW5cIikpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe3pvb21EaXJlY3Rpb246IFwiaW5cIn0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7em9vbURpcmVjdGlvbjogXCJvdXRcIn0pO1xuICAgICAgICB9ICBcblxuICAgICAgICB2YXIgdGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGludGVydmFsID0gc2V0SW50ZXJ2YWwobWUuaGFuZGxlWm9vbSwgMjUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBtZS5zZXRTdGF0ZSh7em9vbWluZ0ludGVydmFsOiBpbnRlcnZhbH0pO1xuICAgICAgICB9LCA1MDApO1xuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3pvb21UaW1lcjogdGltZXIsIHpvb21IZWxkOiB0cnVlfSk7XG4gICAgfSxcbiAgICBoYW5kbGVab29tTW91c2VVcDogZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS56b29tVGltZXIpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnN0YXRlLnpvb21UaW1lcilcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnpvb21pbmdJbnRlcnZhbCkge1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnN0YXRlLnpvb21pbmdJbnRlcnZhbCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7em9vbVRpbWVyOiBudWxsLCB6b29taW5nSW50ZXJ2YWw6IG51bGwsIHpvb21IZWxkOiBmYWxzZSwgem9vbURpcmVjdGlvbjogbnVsbH0pO1xuICAgIH0sXG4gICAgaGFuZGxlWm9vbTogZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAoKGUgJiYgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiem9vbS1pblwiKSkgfHwgdGhpcy5zdGF0ZS56b29tRGlyZWN0aW9uID09IFwiaW5cIikge1xuICAgICAgICAgICAgdmFyIG5ld1pvb20gPSB0aGlzLnN0YXRlLnpvb20gKyAwLjAxO1xuXG4gICAgICAgICAgICBpZiAobmV3Wm9vbSA8PSAzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7em9vbTogbmV3Wm9vbX0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIG5ld1pvb20gPSB0aGlzLnN0YXRlLnpvb20gLSAwLjAxO1xuXG4gICAgICAgICAgICBpZiAobmV3Wm9vbSA+PSAxKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7em9vbTogbmV3Wm9vbX0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9ICBcbiAgICB9LFxuICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBmaWxlSWQgPSBcImZpbGUtXCIgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY3JvcHBlclwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZGlzcGxheVwiPlxuICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5lZGl0YWJsZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj17ZmlsZUlkfSBjbGFzc05hbWU9XCJ0aS1zZXR0aW5nc1wiLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgaWQ9e2ZpbGVJZH0gdHlwZT1cImZpbGVcIiBhY2NlcHQ9XCJpbWFnZS8qXCIgb25DaGFuZ2U9e3RoaXMuaGFuZGxlVXBsb2FkfS8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA8aW1nIGNsYXNzTmFtZT1cImRpc3BsYXlcIiBzcmM9e3RoaXMucHJvcHMuaW1hZ2V9Lz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRhaW5lclwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1hc2tcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRvb2xiYXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBjbGFzc05hbWU9XCJ0aS1taW51cyB6b29tLW91dFwiIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmhhbmRsZVpvb219XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uTW91c2VEb3duPXt0aGlzLmhhbmRsZVpvb21Nb3VzZURvd259XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uTW91c2VVcD17dGhpcy5oYW5kbGVab29tTW91c2VVcH0vPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzTmFtZT1cInRpLXBsdXMgem9vbS1pblwiIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmhhbmRsZVpvb219XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uTW91c2VEb3duPXt0aGlzLmhhbmRsZVpvb21Nb3VzZURvd259XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uTW91c2VVcD17dGhpcy5oYW5kbGVab29tTW91c2VVcH0vPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzTmFtZT1cInRpLWNoZWNrXCIgb25DbGljaz17dGhpcy5oYW5kbGVDcm9wfS8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3NOYW1lPVwidGktY2xvc2VcIiBvbkNsaWNrPXt0aGlzLmhhbmRsZUNsb3NlfS8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxjYW52YXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJjYW52YXNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPXt0aGlzLnByb3BzLndpZHRofVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodD17dGhpcy5wcm9wcy5oZWlnaHR9PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9jYW52YXM+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59KTtcblxuQ3JvcHBlci5wcm9wVHlwZXMgPSB7XG4gICAgaW1hZ2U6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICB3aWR0aDogUmVhY3QuUHJvcFR5cGVzLm51bWJlcixcbiAgICBoZWlnaHQ6IFJlYWN0LlByb3BUeXBlcy5udW1iZXIsXG4gICAgem9vbTogUmVhY3QuUHJvcFR5cGVzLm51bWJlcixcbiAgICBlZGl0YWJsZTogUmVhY3QuUHJvcFR5cGVzLmJvb2wsXG4gICAgb25BZnRlckNyb3A6IFJlYWN0LlByb3BUeXBlcy5mdW5jXG59O1xuXG5Dcm9wcGVyLmRlZmF1bHRQcm9wcyA9IHsgXG4gICAgd2lkdGg6IDQwMCwgXG4gICAgaGVpZ2h0OiA0MDAsIFxuICAgIHpvb206IDEsIFxuICAgIGVkaXRhYmxlOiB0cnVlLFxuICAgIG9uQWZ0ZXJDcm9wOiBmdW5jdGlvbih1cmwpe31cbn07XG5cbmV4cG9ydCBkZWZhdWx0IENyb3BwZXI7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vcm9vdC9jb21wb25lbnRzL2Nyb3BwZXIuanN4IiwiLy8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblxuLy8gbG9hZCB0aGUgc3R5bGVzXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuL2Nyb3BwZXIuc2Nzc1wiKTtcbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuLy8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9hZGRTdHlsZXMuanNcIikoY29udGVudCwge30pO1xuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG4vLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5pZihtb2R1bGUuaG90KSB7XG5cdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi9jcm9wcGVyLnNjc3NcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuL2Nyb3BwZXIuc2Nzc1wiKTtcblx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdH0pO1xuXHR9XG5cdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vcm9vdC9zdHlsZS9jb21wb25lbnRzL2Nyb3BwZXIuc2NzcyIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5jcm9wcGVyIC5kaXNwbGF5e3Bvc2l0aW9uOnJlbGF0aXZlfS5jcm9wcGVyIC5kaXNwbGF5IC50aS1zZXR0aW5nc3twb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtyaWdodDowO3BhZGRpbmc6NXB4O21hcmdpbjoxMHB4O2ZvbnQtc2l6ZToyZW07Zm9udC13ZWlnaHQ6NzAwO2NvbG9yOmhzbGEoMCwwJSwxMDAlLC43NSk7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDAsMCwwLC43NSk7ei1pbmRleDoxfS5jcm9wcGVyIC5kaXNwbGF5IC50aS1zZXR0aW5nczpob3Zlcntjb2xvcjojZmZmfS5jcm9wcGVyIC5jb250YWluZXIsLmNyb3BwZXIgLmRpc3BsYXkgaW5wdXRbdHlwZT1maWxlXXtkaXNwbGF5Om5vbmV9LmNyb3BwZXIgLmNvbnRhaW5lciAubWFza3twb3NpdGlvbjpmaXhlZDt0b3A6MDtsZWZ0OjA7Ym90dG9tOjA7cmlnaHQ6MDtiYWNrZ3JvdW5kLWNvbG9yOiMwMDA7b3BhY2l0eTouODU7ei1pbmRleDo1MDAwfS5jcm9wcGVyIC5jb250YWluZXIgLmNhbnZhc3tjdXJzb3I6bW92ZX0uY3JvcHBlciAuY29udGFpbmVyIC5jb250ZW50e3Bvc2l0aW9uOmFic29sdXRlO3RvcDo1MCU7bGVmdDo1MCU7bWFyZ2luLXRvcDotMjAwcHg7bWFyZ2luLWxlZnQ6LTIwMHB4O3dpZHRoOjQwMHB4O2hlaWdodDo0MDBweDt6LWluZGV4OjUwMDF9LmNyb3BwZXIgLmNvbnRhaW5lciAuY29udGVudCAudG9vbGJhcntwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtyaWdodDowO2JhY2tncm91bmQtY29sb3I6cmdiYSgwLDAsMCwuNzUpO21hcmdpbjoxMHB4O3RleHQtYWxpZ246Y2VudGVyfS5jcm9wcGVyIC5jb250YWluZXIgLmNvbnRlbnQgLnRvb2xiYXIgYXtjb2xvcjojZjFmMWYxO29wYWNpdHk6Ljc1O2Rpc3BsYXk6aW5saW5lLWJsb2NrO3BhZGRpbmc6NXB4O2ZvbnQtc2l6ZToyZW07Zm9udC13ZWlnaHQ6NzAwfS5jcm9wcGVyIC5jb250YWluZXIgLmNvbnRlbnQgLnRvb2xiYXIgYTpob3ZlcntvcGFjaXR5OjF9LmNyb3BwZXIgLmNvbnRhaW5lciAuY29udGVudCAudG9vbGJhciAudGktY2hlY2t7Y29sb3I6IzEzY2MxM30uY3JvcHBlciAuY29udGFpbmVyIC5jb250ZW50IC50b29sYmFyIC50aS1jbG9zZXtjb2xvcjpyZWR9LmNyb3BwZXIuc2hvdyAuY29udGFpbmVye2Rpc3BsYXk6YmxvY2t9XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2Nzcy1sb2FkZXIhLi9+L3Nhc3MtbG9hZGVyIS4vcm9vdC9zdHlsZS9jb21wb25lbnRzL2Nyb3BwZXIuc2Nzc1xuLy8gbW9kdWxlIGlkID0gMTc4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUmVhY3RET00gZnJvbSAncmVhY3QtZG9tJztcblxucmVxdWlyZShcIi4uL3N0eWxlL2NvbXBvbmVudHMvdGltZS5zY3NzXCIpO1xuXG52YXIgVGltZSA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHBhcnNlZCA9IHRoaXMucHJvcHMudmFsdWUuc3BsaXQoXCI6XCIpO1xuICAgICAgICB2YXIgc3RhdGUgPSB7XG4gICAgICAgICAgICBzZWxlY3RlZEhvdXI6IHBhcnNlZFswXSxcbiAgICAgICAgICAgIHNlbGVjdGVkTWludXRlOiBwYXJzZWRbMV0sXG4gICAgICAgICAgICBob3VyTGlzdDogW10sXG4gICAgICAgICAgICBtaW51dGVMaXN0OiBbXVxuICAgICAgICB9O1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IDI0OyBpKyspIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IChpPDEwP1wiMFwiK2k6aSk7XG4gICAgICAgICAgICBzdGF0ZS5ob3VyTGlzdC5wdXNoKHZhbHVlLnRvU3RyaW5nKCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA2MDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSAoaTwxMD9cIjBcIitpOmkpO1xuICAgICAgICAgICAgc3RhdGUubWludXRlTGlzdC5wdXNoKHZhbHVlLnRvU3RyaW5nKCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9LFxuICAgIHNjcm9sbEludG9WaWV3OiBmdW5jdGlvbihzZWxlY3Rvcikge1xuICAgICAgICB2YXIgdGltZSA9IHRoaXM7ICAgICAgICBcbiAgICAgICAgdmFyIHJlc3VsdHMgPSBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKS5xdWVyeVNlbGVjdG9yKFwiLnJlc3VsdHNcIik7XG4gICAgICAgIHJlc3VsdHMucXVlcnlTZWxlY3RvcihzZWxlY3Rvcikuc2Nyb2xsVG9wID0gMDtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHRzUG9zID0gcmVzdWx0cy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIGFjdGl2ZSA9IHJlc3VsdHMucXVlcnlTZWxlY3RvcihzZWxlY3RvciArIFwiIC5pdGVtLmFjdGl2ZVwiKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIGlmIChhY3RpdmUudG9wID4gcmVzdWx0c1Bvcy5ib3R0b20pIHtcbiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsRGlmZiA9IGFjdGl2ZS50b3AgLSByZXN1bHRzUG9zLnRvcDtcbiAgICAgICAgICAgICAgICB0aW1lLnNjcm9sbFRvKHJlc3VsdHMucXVlcnlTZWxlY3RvcihzZWxlY3RvciksIHNjcm9sbERpZmYsIDEwMDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCA1MDApXG4gICAgfSxcbiAgICBzY3JvbGxUbzogZnVuY3Rpb24oZWxlbWVudCwgdG8sIGR1cmF0aW9uKSB7XG4gICAgICAgIGlmIChkdXJhdGlvbiA8PSAwKSByZXR1cm47XG4gICAgICAgIHZhciBkaWZmZXJlbmNlID0gdG8gLSBlbGVtZW50LnNjcm9sbFRvcDtcbiAgICAgICAgdmFyIHBlclRpY2sgPSBkaWZmZXJlbmNlIC8gZHVyYXRpb24gKiAxMDtcbiAgICAgICAgdmFyIG1lID0gdGhpcztcbiAgICBcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuc2Nyb2xsVG9wID0gZWxlbWVudC5zY3JvbGxUb3AgKyBwZXJUaWNrO1xuICAgICAgICAgICAgaWYgKGVsZW1lbnQuc2Nyb2xsVG9wID09PSB0bykgcmV0dXJuO1xuICAgICAgICAgICAgbWUuc2Nyb2xsVG8oZWxlbWVudCwgdG8sIGR1cmF0aW9uIC0gMTApO1xuICAgICAgICB9LCAxMCk7XG4gICAgfSxcbiAgICBkaXNtaXNzOiBmdW5jdGlvbihlLCBza2lwKSB7XG4gICAgICAgIHZhciBjdXJyZW50ID0gZS50YXJnZXQ7XG4gICAgICAgIHdoaWxlIChjdXJyZW50ICE9IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50ID09IFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMpLnF1ZXJ5U2VsZWN0b3IoXCIucmVzdWx0c1wiKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LnBhcmVudE5vZGU7XG4gICAgICAgIH1cblxuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuZGlzbWlzcywgdHJ1ZSk7ICAgICAgICBcbiAgICAgICAgUmVhY3RET00uZmluZERPTU5vZGUodGhpcykuY2xhc3NMaXN0LnJlbW92ZShcInNob3dcIik7ICAgICAgICBcbiAgICB9LFxuICAgIGZvY3VzOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICB2YXIgdGltZSA9IHRoaXM7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRpbWUuZGlzbWlzcywgdHJ1ZSk7ICAgICAgICAgICAgXG4gICAgICAgIH0sIDUwMClcbiAgICAgICAgUmVhY3RET00uZmluZERPTU5vZGUodGhpcykuY2xhc3NMaXN0LmFkZChcInNob3dcIik7XG5cbiAgICAgICAgdGhpcy5zY3JvbGxJbnRvVmlldyhcIi5ob3Vyc1wiKTtcbiAgICAgICAgdGhpcy5zY3JvbGxJbnRvVmlldyhcIi5taW51dGVzXCIpOyAgICAgICAgXG4gICAgfSxcbiAgICBzZWxlY3Q6IGZ1bmN0aW9uIChlLCBzdGF0ZSkge1xuICAgICAgICB2YXIgaW5wdXQgPSBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKS5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIilcbiAgICAgICAgdmFyIHZhbHVlID0gW1wiMDBcIiwgXCIwMFwiXTtcbiAgICAgICAgaWYgKHN0YXRlLnNlbGVjdGVkSG91ciAhPSBudWxsKSB7XG4gICAgICAgICAgICB2YWx1ZVswXSA9IHN0YXRlLnNlbGVjdGVkSG91cjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhdGUuc2VsZWN0ZWRNaW51dGUgIT0gbnVsbCkge1xuICAgICAgICAgICAgdmFsdWVbMV0gPSBzdGF0ZS5zZWxlY3RlZE1pbnV0ZTtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICB0aGlzLnByb3BzLnVwZGF0ZSh2YWx1ZS5qb2luKFwiOlwiKSk7ICAgICAgICAgICAgICAgIFxuICAgICAgICB0aGlzLnNldFN0YXRlKHN0YXRlKTtcbiAgICB9LFxuICAgIHNlbGVjdE1pbnV0ZTogZnVuY3Rpb24oZSkge1xuICAgICAgICB2YXIgc3RhdGUgPSB7XG4gICAgICAgICAgICBzZWxlY3RlZEhvdXI6IHRoaXMuc3RhdGUuc2VsZWN0ZWRIb3VyLFxuICAgICAgICAgICAgc2VsZWN0ZWRNaW51dGU6IGUudGFyZ2V0LmlubmVyVGV4dFxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zZWxlY3QoZSwgc3RhdGUpOyAgICAgICAgXG4gICAgfSxcbiAgICBzZWxlY3RIb3VyOiBmdW5jdGlvbihlKSB7XG4gICAgICAgIHZhciBzdGF0ZSA9IHtcbiAgICAgICAgICAgIHNlbGVjdGVkSG91cjogZS50YXJnZXQuaW5uZXJUZXh0LFxuICAgICAgICAgICAgc2VsZWN0ZWRNaW51dGU6IHRoaXMuc3RhdGUuc2VsZWN0ZWRNaW51dGVcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2VsZWN0KGUsIHN0YXRlKTsgICAgICAgIFxuICAgIH0sXG4gICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIG1lID0gdGhpcztcbiAgICAgICAgdmFyIGhvdXJzID0gdGhpcy5zdGF0ZS5ob3VyTGlzdC5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIHZhciBpdGVtQ2xhc3MgPSBcIml0ZW1cIjtcbiAgICAgICAgICAgIHZhciBzY3JvbGwgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChpdGVtID09IG1lLnN0YXRlLnNlbGVjdGVkSG91cikge1xuICAgICAgICAgICAgICAgIGl0ZW1DbGFzcyArPSBcIiBhY3RpdmVcIjtcbiAgICAgICAgICAgICAgICBzY3JvbGwgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICg8bGkga2V5PXtpdGVtfSBjbGFzc05hbWU9e2l0ZW1DbGFzc30gb25DbGljaz17bWUuc2VsZWN0SG91cn0+e2l0ZW19PC9saT4pXG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgbWludXRlcyA9IHRoaXMuc3RhdGUubWludXRlTGlzdC5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIHZhciBpdGVtQ2xhc3MgPSBcIml0ZW1cIjtcbiAgICAgICAgICAgIHZhciBzY3JvbGwgPSBmYWxzZTsgICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChpdGVtID09IG1lLnN0YXRlLnNlbGVjdGVkTWludXRlKSB7XG4gICAgICAgICAgICAgICAgaXRlbUNsYXNzICs9IFwiIGFjdGl2ZVwiO1xuICAgICAgICAgICAgICAgIHNjcm9sbCA9IHRydWU7ICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICg8bGkga2V5PXtpdGVtfSBjbGFzc05hbWU9e2l0ZW1DbGFzc30gb25DbGljaz17bWUuc2VsZWN0TWludXRlfT57aXRlbX08L2xpPilcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBjdXN0b21DbGFzcyA9IFwidGltZS1waWNrZXIgXCIgKyB0aGlzLnByb3BzLmN1c3RvbUNsYXNzO1xuICAgICAgICB2YXIgdmFsdWUgPSA8c3Bhbj57dGhpcy5wcm9wcy52YWx1ZX08L3NwYW4+O1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5lZGl0YWJsZSkge1xuICAgICAgICAgICAgdmFsdWUgPSA8aW5wdXQgcmVhZE9ubHk9XCJ0cnVlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnByb3BzLnZhbHVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25Gb2N1cz17dGhpcy5mb2N1c31cbiAgICAgICAgICAgICAgICAgICAgLz47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuKDxkaXYgY2xhc3NOYW1lPXtjdXN0b21DbGFzc30+XG4gICAgICAgICAgICB7dmFsdWV9XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlc3VsdHNcIj5cbiAgICAgICAgICAgICAgICA8dWwgY2xhc3NOYW1lPVwiaG91cnNcIj57aG91cnN9PC91bD5cbiAgICAgICAgICAgICAgICA8dWwgY2xhc3NOYW1lPVwibWludXRlc1wiPnttaW51dGVzfTwvdWw+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+KTtcbiAgICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgVGltZTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3Jvb3QvY29tcG9uZW50cy90aW1lLmpzeCIsIi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi90aW1lLnNjc3NcIik7XG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcbi8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIHt9KTtcbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuLy8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuaWYobW9kdWxlLmhvdCkge1xuXHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vdGltZS5zY3NzXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi90aW1lLnNjc3NcIik7XG5cdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHR9KTtcblx0fVxuXHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3Jvb3Qvc3R5bGUvY29tcG9uZW50cy90aW1lLnNjc3MiLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIudGltZS1waWNrZXJ7cG9zaXRpb246cmVsYXRpdmU7d2lkdGg6NThweDtoZWlnaHQ6MjRweH0udGltZS1waWNrZXIgaW5wdXR7d2lkdGg6NDBweDt0cmFuc2l0aW9uOndpZHRoIC41czttYXJnaW46MDtjdXJzb3I6cG9pbnRlcn0udGltZS1waWNrZXIuc2hvdyBpbnB1dHtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtib3R0b206MDt6LWluZGV4OjE7d2lkdGg6MTA3cHg7Ym9yZGVyLXJhZGl1czo1cHggNXB4IDAgMDtib3JkZXItYm90dG9tOm5vbmU7Ym94LXNoYWRvdzo1cHggNXB4IDEwcHggIzAwMH0udGltZS1waWNrZXIuc2hvdyAucmVzdWx0c3t0cmFuc2Zvcm06cGVyc3BlY3RpdmUoMCkgcm90YXRlWCgwZGVnKX0udGltZS1waWNrZXIgLnJlc3VsdHN7Y29sb3I6IzU4NTY1ODtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7Ym94LXNoYWRvdzo1cHggNXB4IDEwcHggIzAwMDtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MTAwJTt0cmFuc2Zvcm06cGVyc3BlY3RpdmUoODAwcHgpIHJvdGF0ZVgoLTkwZGVnKTt0cmFuc2Zvcm0tb3JpZ2luOnRvcDt0cmFuc2l0aW9uOmFsbCAuNXMgbGluZWFyO3otaW5kZXg6MjtvdmVyZmxvdzpoaWRkZW47aGVpZ2h0OjE4MHB4O2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpyb3c7YWxpZ24taXRlbXM6c3RyZXRjaDtib3JkZXI6MXB4IHNvbGlkICM1ODU2NTh9LnRpbWUtcGlja2VyIC5yZXN1bHRzIC5ob3Vyc3tib3JkZXItcmlnaHQ6MXB4IHNvbGlkICM1ODU2NTh9LnRpbWUtcGlja2VyIC5yZXN1bHRzIC5ob3VycywudGltZS1waWNrZXIgLnJlc3VsdHMgLm1pbnV0ZXN7d2lkdGg6NTZweDtvdmVyZmxvdy15OnNjcm9sbDttYXJnaW46MDtwYWRkaW5nOjB9LnRpbWUtcGlja2VyIC5yZXN1bHRzIC5pdGVte3BhZGRpbmc6NXB4O3BhZGRpbmc6NXB4IDVweCA1cHggMTZweDtjdXJzb3I6cG9pbnRlcn0udGltZS1waWNrZXIgLnJlc3VsdHMgLml0ZW06bGFzdC1jaGlsZHtib3JkZXItYm90dG9tOm5vbmV9LnRpbWUtcGlja2VyIC5yZXN1bHRzIC5pdGVtLmFjdGl2ZSwudGltZS1waWNrZXIgLnJlc3VsdHMgLml0ZW06aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojMmUyYzJkO2NvbG9yOiNiM2FmYWZ9XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2Nzcy1sb2FkZXIhLi9+L3Nhc3MtbG9hZGVyIS4vcm9vdC9zdHlsZS9jb21wb25lbnRzL3RpbWUuc2Nzc1xuLy8gbW9kdWxlIGlkID0gMTgxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi9yZWNpcGVIZWFkZXIuc2Nzc1wiKTtcbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuLy8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9hZGRTdHlsZXMuanNcIikoY29udGVudCwge30pO1xuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG4vLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5pZihtb2R1bGUuaG90KSB7XG5cdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi9yZWNpcGVIZWFkZXIuc2Nzc1wiLCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vcmVjaXBlSGVhZGVyLnNjc3NcIik7XG5cdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHR9KTtcblx0fVxuXHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3Jvb3Qvc3R5bGUvY29tcG9uZW50cy9yZWNpcGVIZWFkZXIuc2NzcyIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5yZWNpcGUtaGVhZGVye2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpyb3c7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47YWxpZ24taXRlbXM6ZmxleC1zdGFydH0ucmVjaXBlLWhlYWRlciAucmVjaXBlLWluZm97ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtwYWRkaW5nOjUwcHggMjVweCA1MHB4IDc1cHg7d2lkdGg6MTAwJX0ucmVjaXBlLWhlYWRlciAucmVjaXBlLWluZm8gLnJlY2lwZS10aXRsZXtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyfS5yZWNpcGUtaGVhZGVyIC5yZWNpcGUtaW5mby5lZGl0YWJsZSAucHVibGljLW5vdGUsLnJlY2lwZS1oZWFkZXIgLnJlY2lwZS1pbmZvLmVkaXRhYmxlIC50aS1wZW5jaWwsLnJlY2lwZS1oZWFkZXIgLnJlY2lwZS1pbmZvLmVkaXRhYmxlIC50aXRsZXtkaXNwbGF5Om5vbmV9LnJlY2lwZS1oZWFkZXIgLnJlY2lwZS1pbmZvLmVkaXRhYmxlIC50aS1jbG9zZSwucmVjaXBlLWhlYWRlciAucmVjaXBlLWluZm8uZWRpdGFibGUgLnRpLXNhdmUsLnJlY2lwZS1oZWFkZXIgLnJlY2lwZS1pbmZvLmVkaXRhYmxlIC50b2dnbGUtbGFiZWwsLnJlY2lwZS1oZWFkZXIgLnJlY2lwZS1pbmZvLmVkaXRhYmxlIC50b2dnbGUtc3dpdGNoLC5yZWNpcGUtaGVhZGVyIC5yZWNpcGUtaW5mby5lZGl0YWJsZSBpbnB1dC50aXRsZXtkaXNwbGF5OmlubGluZS1ibG9ja30ucmVjaXBlLWhlYWRlciAucmVjaXBlLWluZm8gLnRpLXBlbmNpbCwucmVjaXBlLWhlYWRlciAucmVjaXBlLWluZm8gLnRpLXNhdmV7cGFkZGluZy1sZWZ0OjEwcHh9LnJlY2lwZS1oZWFkZXIgLnJlY2lwZS1pbmZvIC50aS1jbG9zZSwucmVjaXBlLWhlYWRlciAucmVjaXBlLWluZm8gLnRpLXBlbmNpbCwucmVjaXBlLWhlYWRlciAucmVjaXBlLWluZm8gLnRpLXNhdmV7Y29sb3I6IzU4NTY1ODtmb250LXNpemU6Mi4yNWVtfS5yZWNpcGUtaGVhZGVyIC5yZWNpcGUtaW5mbyAudGktY2xvc2U6aG92ZXIsLnJlY2lwZS1oZWFkZXIgLnJlY2lwZS1pbmZvIC50aS1wZW5jaWw6aG92ZXIsLnJlY2lwZS1oZWFkZXIgLnJlY2lwZS1pbmZvIC50aS1zYXZlOmhvdmVye2NvbG9yOiMyZTJjMmR9LnJlY2lwZS1oZWFkZXIgLnJlY2lwZS1pbmZvIC50aXRsZXtjb2xvcjojMmUyYzJkO2ZvbnQtc2l6ZToyLjI1ZW07ZGlzcGxheTpmbGV4O3BhZGRpbmc6NXB4O2JvcmRlcjoxcHggc29saWQgdHJhbnNwYXJlbnQ7Zm9udC1mYW1pbHk6VGVuc29NZWRpdW0sVGVuc29MaWdodCxIZWx2ZXRpY2EgTmV1ZSxIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZn0ucmVjaXBlLWhlYWRlciAucmVjaXBlLWluZm8gaW5wdXQudGl0bGV7Ym9yZGVyOjFweCBzb2xpZCAjMmUyYzJkO2ZsZXg6MTtkaXNwbGF5Om5vbmV9LnJlY2lwZS1oZWFkZXIgLnJlY2lwZS1pbmZvIC50aS1zYXZle3BhZGRpbmctcmlnaHQ6MTBweH0ucmVjaXBlLWhlYWRlciAucmVjaXBlLWluZm8gLnRpLWNsb3NlLC5yZWNpcGUtaGVhZGVyIC5yZWNpcGUtaW5mbyAudGktc2F2ZXtkaXNwbGF5Om5vbmV9LnJlY2lwZS1oZWFkZXIgLnJlY2lwZS1pbmZvIC5hZGRpdGlvbi1pbmZvLC5yZWNpcGUtaGVhZGVyIC5yZWNpcGUtaW5mbyAucHVibGljLW9wdGlvbntmb250LXNpemU6Ljc1ZW07Y29sb3I6IzU4NTY1ODtwYWRkaW5nOjVweCAwIDAgOXB4O2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpyb3c7YWxpZ24taXRlbXM6Y2VudGVyfS5yZWNpcGUtaGVhZGVyIC5yZWNpcGUtaW5mbyAucHVibGljLW9wdGlvbntoZWlnaHQ6MzBweH0ucmVjaXBlLWhlYWRlciAucmVjaXBlLWluZm8gLnRvZ2dsZS1zd2l0Y2h7dHJhbnNmb3JtOnNjYWxlKC41KTtkaXNwbGF5Om5vbmV9LnJlY2lwZS1oZWFkZXIgLnJlY2lwZS1pbmZvIC50b2dnbGUtbGFiZWx7ZGlzcGxheTpub25lfS5yZWNpcGUtaGVhZGVyIC5yZWNpcGUtaW5mbyAuYXV0aG9ye3BhZGRpbmctcmlnaHQ6NXB4fS5yZWNpcGUtaGVhZGVyIC5yZWNpcGUtaW5mbyAudGltZS1pbmZve2hlaWdodDo1MHB4O2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpyb3c7anVzdGlmeS1jb250ZW50OmZsZXgtc3RhcnQ7YWxpZ24taXRlbXM6Y2VudGVyO2ZvbnQtc2l6ZTouNzVlbTtjb2xvcjojNTg1NjU4O3BhZGRpbmc6MCA3cHh9LnJlY2lwZS1oZWFkZXIgLnJlY2lwZS1pbmZvIC50aW1lLWluZm8gLnNlcnZpbmctdmFsdWV7d2lkdGg6M2VtfS5yZWNpcGUtaGVhZGVyIC5yZWNpcGUtaW5mbyAudGltZS1pbmZvIC5jb29rLXRpbWUsLnJlY2lwZS1oZWFkZXIgLnJlY2lwZS1pbmZvIC50aW1lLWluZm8gLnByZXAtdGltZXtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2p1c3RpZnktY29udGVudDpjZW50ZXI7cGFkZGluZy1yaWdodDoxMHB4fS5yZWNpcGUtaGVhZGVyIC5yZWNpcGUtaW5mbyAudGltZS1pbmZvIC5jb29rLXRpbWU+c3BhbiwucmVjaXBlLWhlYWRlciAucmVjaXBlLWluZm8gLnRpbWUtaW5mbyAucHJlcC10aW1lPnNwYW57ZGlzcGxheTppbmxpbmUtYmxvY2t9LnJlY2lwZS1oZWFkZXIgLnJlY2lwZS1pbmZvIC50aW1lLWluZm8gLnRpbWUtcGlja2VyLnByZXAtdGltZXt6LWluZGV4OjN9LnJlY2lwZS1oZWFkZXIgLnJlY2lwZS1pbmZvIC50aW1lLWluZm8gLnRpLXBpZS1jaGFydCwucmVjaXBlLWhlYWRlciAucmVjaXBlLWluZm8gLnRpbWUtaW5mbyAudGktdGltZXJ7Zm9udC1zaXplOjEuM2VtO3BhZGRpbmctcmlnaHQ6MTBweDtjdXJzb3I6ZGVmYXVsdH0ucmVjaXBlLWhlYWRlciAucmVjaXBlLWluZm8gLnRpbWUtaW5mbyAuc2VydmluZ3M+bGFiZWx7cGFkZGluZy1sZWZ0OjVweH1AbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4tZGV2aWNlLXdpZHRoOjMyMHB4KSBhbmQgKG1heC1kZXZpY2Utd2lkdGg6NDgwcHgpey5yZWNpcGUtaGVhZGVye2Rpc3BsYXk6YmxvY2s7cG9zaXRpb246cmVsYXRpdmU7bWFyZ2luOjAgMTBweDtoZWlnaHQ6MzAwcHh9LnJlY2lwZS1oZWFkZXIgLmNyb3BwZXIsLnJlY2lwZS1oZWFkZXIgLnJlY2lwZS1pbmZve3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO3JpZ2h0OjA7Ym90dG9tOjA7bGVmdDowfS5yZWNpcGUtaGVhZGVyIC5yZWNpcGUtaW5mb3twYWRkaW5nOjI1cHg7ei1pbmRleDoyfS5yZWNpcGUtaGVhZGVyIC5jcm9wcGVye3otaW5kZXg6MTtvdmVyZmxvdzpoaWRkZW59LnJlY2lwZS1oZWFkZXIgLmNyb3BwZXIgLmRpc3BsYXl7d2lkdGg6MTAwJX19XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2Nzcy1sb2FkZXIhLi9+L3Nhc3MtbG9hZGVyIS4vcm9vdC9zdHlsZS9jb21wb25lbnRzL3JlY2lwZUhlYWRlci5zY3NzXG4vLyBtb2R1bGUgaWQgPSAxODNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLy8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblxuLy8gbG9hZCB0aGUgc3R5bGVzXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuL3JlY2lwZS5zY3NzXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCB7fSk7XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcblx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuL3JlY2lwZS5zY3NzXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi9yZWNpcGUuc2Nzc1wiKTtcblx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdH0pO1xuXHR9XG5cdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vcm9vdC9zdHlsZS9jb21wb25lbnRzL3JlY2lwZS5zY3NzIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKSgpO1xuLy8gaW1wb3J0c1xuXG5cbi8vIG1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmZ1bGwtcmVjaXBlIC5hdXRvY29tcGxldGUucmVxdWlyZWQgaW5wdXQsLmZ1bGwtcmVjaXBlIGlucHV0LnJlcXVpcmVkLC5mdWxsLXJlY2lwZSB0ZXh0YXJlYS5yZXF1aXJlZHtiYWNrZ3JvdW5kLWNvbG9yOiNmOTY2NjZ9LmZ1bGwtcmVjaXBlIC5yZWNpcGUtaW1hZ2Vze2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47anVzdGlmeS1jb250ZW50OmNlbnRlcjthbGlnbi1pdGVtczpjZW50ZXI7cGFkZGluZzoxMHB4IDB9LmZ1bGwtcmVjaXBlIC5yZWNpcGUtYm9keXtwYWRkaW5nOjEwcHg7bWFyZ2luOjA7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO2FsaWduLWl0ZW1zOnN0cmV0Y2h9LmZ1bGwtcmVjaXBlIC5yZWNpcGUtYm9keT5zZWN0aW9ue2NvbG9yOiMyZTJjMmQ7YmFja2dyb3VuZC1jb2xvcjojZmZmO2ZsZXg6MTtwYWRkaW5nOjEwcHh9LmZ1bGwtcmVjaXBlIC5yZWNpcGUtYm9keT5zZWN0aW9uOmZpcnN0LWNoaWxke21hcmdpbi1yaWdodDoxMHB4fS5mdWxsLXJlY2lwZSAuYWRkLW5ld3tjb2xvcjojNTg1NjU4O2Rpc3BsYXk6aW5saW5lLWZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2N1cnNvcjpwb2ludGVyfS5mdWxsLXJlY2lwZSAuYWRkLW5ldzpob3Zlcntjb2xvcjojMmUyYzJkfS5mdWxsLXJlY2lwZSAuYWRkLW5ldzpob3ZlciBsYWJlbHt0ZXh0LWRlY29yYXRpb246dW5kZXJsaW5lfS5mdWxsLXJlY2lwZSAuYWRkLW5ldyAudGktcGx1c3twYWRkaW5nLXJpZ2h0OjVweH0uZnVsbC1yZWNpcGUgLmFkZC1uZXcgbGFiZWx7Y3Vyc29yOnBvaW50ZXJ9QG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLWRldmljZS13aWR0aDozMjBweCkgYW5kIChtYXgtZGV2aWNlLXdpZHRoOjQ4MHB4KXsuZnVsbC1yZWNpcGUgLnJlY2lwZS1ib2R5e2ZsZXgtZGlyZWN0aW9uOmNvbHVtbn0uZnVsbC1yZWNpcGUgLnJlY2lwZS1ib2R5PnNlY3Rpb246Zmlyc3QtY2hpbGR7bWFyZ2luLXJpZ2h0OjB9fVwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9jc3MtbG9hZGVyIS4vfi9zYXNzLWxvYWRlciEuL3Jvb3Qvc3R5bGUvY29tcG9uZW50cy9yZWNpcGUuc2Nzc1xuLy8gbW9kdWxlIGlkID0gMTg1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImltcG9ydCBBY3Rpb25UeXBlcyBmcm9tICcuL2FjdGlvblR5cGVzLmpzJztcbmltcG9ydCBEaXNwYXRjaGVyIGZyb20gJy4vZGlzcGF0Y2hlci5qcyc7XG5cbmNvbnN0IEFjdGlvbnMgPSB7XG4gICAgc2F2ZVJlY2lwZShkYXRhKSB7XG4gICAgICAgIERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICAgICAgICAgICAgYWN0aW9uOiBBY3Rpb25UeXBlcy5TQVZFX1JFQ0lQRSxcbiAgICAgICAgICAgIHJlY2lwZTogZGF0YVxuICAgICAgICB9KTtcbiAgICB9LFxuICAgIGdldFJlY2lwZShkYXRhKSB7XG4gICAgICAgIERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICAgICAgICAgICAgYWN0aW9uOiBBY3Rpb25UeXBlcy5HRVRfUkVDSVBFLFxuICAgICAgICAgICAgaWQ6IGRhdGFcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBuZXdSZWNpcGUoKSB7XG4gICAgICAgIERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICAgICAgICAgICAgYWN0aW9uOiBBY3Rpb25UeXBlcy5ORVdfUkVDSVBFXG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgY2xvc2VSZWNpcGUoaWQpIHtcbiAgICAgICAgRGlzcGF0Y2hlci5kaXNwYXRjaCh7XG4gICAgICAgICAgICBhY3Rpb246IEFjdGlvblR5cGVzLkNMT1NFX1JFQ0lQRSxcbiAgICAgICAgICAgIGlkOiBpZFxuICAgICAgICB9KTtcbiAgICB9LFxuICAgIGFkZEluZ3JlZGllbnQoKSB7XG4gICAgICAgIERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICAgICAgICAgICAgYWN0aW9uOiBBY3Rpb25UeXBlcy5BRERfSU5HUkVESUVOVFxuICAgICAgICB9KTtcbiAgICB9LFxuICAgIGFkZFN0ZXAoKSB7XG4gICAgICAgIERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICAgICAgICAgICAgYWN0aW9uOiBBY3Rpb25UeXBlcy5BRERfU1RFUFxuICAgICAgICB9KTtcbiAgICB9LFxuICAgIGRlbGV0ZVN0ZXAoZGF0YSkge1xuICAgICAgICBEaXNwYXRjaGVyLmRpc3BhdGNoKHtcbiAgICAgICAgICAgIGFjdGlvbjogQWN0aW9uVHlwZXMuREVMRVRFX1NURVAsXG4gICAgICAgICAgICBpbmRleDogZGF0YVxuICAgICAgICB9KTtcbiAgICB9LFxuICAgIGRlbGV0ZUluZ3JlZGllbnQoZGF0YSkge1xuICAgICAgICBEaXNwYXRjaGVyLmRpc3BhdGNoKHtcbiAgICAgICAgICAgIGFjdGlvbjogQWN0aW9uVHlwZXMuREVMRVRFX0lOR1JFRElFTlQsXG4gICAgICAgICAgICBpbmRleDogZGF0YVxuICAgICAgICB9KTtcbiAgICB9LFxuICAgIHVwZGF0ZVZhbHVlKGtleSwgdmFsdWUpIHtcbiAgICAgICAgRGlzcGF0Y2hlci5kaXNwYXRjaCh7XG4gICAgICAgICAgICBhY3Rpb246IEFjdGlvblR5cGVzLlVQREFURV9WQUxVRSxcbiAgICAgICAgICAgIGtleToga2V5LFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlXG4gICAgICAgIH0pO1xuICAgIH0sXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuICAgIG9wZW5Db250ZW50KGlkKSB7XG4gICAgICAgIERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICAgICAgICAgICAgYWN0aW9uOiBBY3Rpb25UeXBlcy5PUEVOX0NPTlRFTlQsXG4gICAgICAgICAgICBrZXk6IGlkXG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgc2VydmVyUmVxdWVzdChkYXRhLCBjYWxsYmFjaywgYXN5bmMpIHtcbiAgICAgICAgRGlzcGF0Y2hlci5kaXNwYXRjaCh7XG4gICAgICAgICAgICBhY3Rpb246IEFjdGlvblR5cGVzLlNFUlZFUl9SRVFVRVNULFxuICAgICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICAgIGFzeW5jOiBhc3luYyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBjYWxsYmFja1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIGF1dGhlbnRpY2F0ZShhY3RpdmUsIHR5cGUpIHtcbiAgICAgICAgRGlzcGF0Y2hlci5kaXNwYXRjaCh7XG4gICAgICAgICAgICBhY3Rpb246IEFjdGlvblR5cGVzLkFVVEhFTlRJQ0FURSxcbiAgICAgICAgICAgIGFjdGl2ZTogYWN0aXZlLFxuICAgICAgICAgICAgdHlwZTogdHlwZVxuICAgICAgICB9KTtcbiAgICB9LFxuICAgIHJlZ2lzdGVyKGZpcnN0TmFtZSwgbGFzdE5hbWUsIHVzZXJuYW1lLCBlbWFpbCwgY2FsbGJhY2spIHtcbiAgICAgICAgRGlzcGF0Y2hlci5kaXNwYXRjaCh7XG4gICAgICAgICAgICBhY3Rpb246IEFjdGlvblR5cGVzLlJFR0lTVEVSLFxuICAgICAgICAgICAgZmlyc3ROYW1lOiBmaXJzdE5hbWUsXG4gICAgICAgICAgICBsYXN0TmFtZTogbGFzdE5hbWUsXG4gICAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsXG4gICAgICAgICAgICBlbWFpbDogZW1haWwsXG4gICAgICAgICAgICBjYWxsYmFjazogY2FsbGJhY2tcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICB1cGRhdGVVc2VyU3RhdHVzKHVzZXJJZCwgc3RhdHVzKSB7XG4gICAgICAgIERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICAgICAgICAgICAgYWN0aW9uOiBBY3Rpb25UeXBlcy5VUERBVEVfVVNFUl9TVEFUVVMsXG4gICAgICAgICAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICAgICAgICAgIHN0YXR1czogc3RhdHVzXG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgbG9naW4odXNlcm5hbWUsIHBhc3N3b3JkLCBjYWxsYmFjaykge1xuICAgICAgICBEaXNwYXRjaGVyLmRpc3BhdGNoKHtcbiAgICAgICAgICAgIGFjdGlvbjogQWN0aW9uVHlwZXMuTE9HSU4sXG4gICAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsXG4gICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQsXG4gICAgICAgICAgICBjYWxsYmFjazogY2FsbGJhY2tcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBsb2dvdXQoKSB7XG4gICAgICAgIERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICAgICAgICAgICAgYWN0aW9uOiBBY3Rpb25UeXBlcy5MT0dPVVRcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICB1cGRhdGVQYXNzd29yZCh1c2VySWQsIG9sZFBhc3N3b3JkLCBuZXdQYXNzd29yZCkge1xuICAgICAgICBEaXNwYXRjaGVyLmRpc3BhdGNoKHtcbiAgICAgICAgICAgIGFjdGlvbjogQWN0aW9uVHlwZXMuVVBEQVRFX1BBU1NXT1JELFxuICAgICAgICAgICAgdXNlcklkOiB1c2VySWQsXG4gICAgICAgICAgICBvbGRQYXNzd29yZDogb2xkUGFzc3dvcmQsXG4gICAgICAgICAgICBuZXdQYXNzd29yZDogbmV3UGFzc3dvcmRcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBub3RpZnkoYWN0aXZlLCB0eXBlLCBtZXNzYWdlLCB0aW1lcikge1xuICAgICAgICBEaXNwYXRjaGVyLmRpc3BhdGNoKHtcbiAgICAgICAgICAgIGFjdGlvbjogQWN0aW9uVHlwZXMuTk9USUZZLFxuICAgICAgICAgICAgYWN0aXZlOiBhY3RpdmUsXG4gICAgICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgICAgIHRpbWVyOiB0aW1lclxuICAgICAgICB9KTtcbiAgICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBBY3Rpb25zO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3Jvb3QvbGliL2FjdGlvbnMuanMiLCJjb25zdCBBY3Rpb25UeXBlcyA9IHtcbiAgICBTQVZFX1JFQ0lQRTogJ1NBVkVfUkVDSVBFJyxcbiAgICBHRVRfUkVDSVBFOiAnR0VUX1JFQ0lQRScsXG4gICAgTkVXX1JFQ0lQRTogJ05FV19SRUNJUEUnLFxuICAgIEFERF9JTkdSRURJRU5UOiAnQUREX0lOR1JFRElFTlQnLFxuICAgIEFERF9TVEVQOiAnQUREX1NURVAnLFxuICAgIFVQREFURV9WQUxVRTogJ1VQREFURV9WQUxVRScsXG4gICAgU0VSVkVSX1JFUVVFU1Q6IFwiU0VSVkVSX1JFUVVFU1RcIixcbiAgICBPUEVOX0NPTlRFTlQ6IFwiT1BFTl9DT05URU5UXCIsXG4gICAgQ0xPU0VfUkVDSVBFOiBcIkNMT1NFX1JFQ0lQRVwiLFxuICAgIEFVVEhFTlRJQ0FURTogXCJBVVRIRU5USUNBVEVcIixcbiAgICBVUERBVEVfVVNFUl9TVEFUVVM6IFwiVVBEQVRFX1VTRVJfU1RBVFVTXCIsXG4gICAgTE9HSU46IFwiTE9HSU5cIixcbiAgICBMT0dPVVQ6IFwiTE9HT1VUXCIsXG4gICAgVVBEQVRFX1BBU1NXT1JEOiBcIlVQREFURV9QQVNTV09SRFwiLFxuICAgIFJFR0lTVEVSOiBcIlJFR0lTVEVSXCIsXG4gICAgTk9USUZZOiBcIk5PVElGWVwiXG59XG5cbmV4cG9ydCBkZWZhdWx0IEFjdGlvblR5cGVzO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3Jvb3QvbGliL2FjdGlvblR5cGVzLmpzIiwiaW1wb3J0IHsgRGlzcGF0Y2hlciB9IGZyb20gJ2ZsdXgnO1xuXG5leHBvcnQgZGVmYXVsdCBuZXcgRGlzcGF0Y2hlcigpO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3Jvb3QvbGliL2Rpc3BhdGNoZXIuanMiLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNC1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMuRGlzcGF0Y2hlciA9IHJlcXVpcmUoJy4vbGliL0Rpc3BhdGNoZXInKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9mbHV4L2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAxODlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBEaXNwYXRjaGVyXG4gKiBcbiAqIEBwcmV2ZW50TXVuZ2VcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uJyk7IH0gfVxuXG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbnZhciBfcHJlZml4ID0gJ0lEXyc7XG5cbi8qKlxuICogRGlzcGF0Y2hlciBpcyB1c2VkIHRvIGJyb2FkY2FzdCBwYXlsb2FkcyB0byByZWdpc3RlcmVkIGNhbGxiYWNrcy4gVGhpcyBpc1xuICogZGlmZmVyZW50IGZyb20gZ2VuZXJpYyBwdWItc3ViIHN5c3RlbXMgaW4gdHdvIHdheXM6XG4gKlxuICogICAxKSBDYWxsYmFja3MgYXJlIG5vdCBzdWJzY3JpYmVkIHRvIHBhcnRpY3VsYXIgZXZlbnRzLiBFdmVyeSBwYXlsb2FkIGlzXG4gKiAgICAgIGRpc3BhdGNoZWQgdG8gZXZlcnkgcmVnaXN0ZXJlZCBjYWxsYmFjay5cbiAqICAgMikgQ2FsbGJhY2tzIGNhbiBiZSBkZWZlcnJlZCBpbiB3aG9sZSBvciBwYXJ0IHVudGlsIG90aGVyIGNhbGxiYWNrcyBoYXZlXG4gKiAgICAgIGJlZW4gZXhlY3V0ZWQuXG4gKlxuICogRm9yIGV4YW1wbGUsIGNvbnNpZGVyIHRoaXMgaHlwb3RoZXRpY2FsIGZsaWdodCBkZXN0aW5hdGlvbiBmb3JtLCB3aGljaFxuICogc2VsZWN0cyBhIGRlZmF1bHQgY2l0eSB3aGVuIGEgY291bnRyeSBpcyBzZWxlY3RlZDpcbiAqXG4gKiAgIHZhciBmbGlnaHREaXNwYXRjaGVyID0gbmV3IERpc3BhdGNoZXIoKTtcbiAqXG4gKiAgIC8vIEtlZXBzIHRyYWNrIG9mIHdoaWNoIGNvdW50cnkgaXMgc2VsZWN0ZWRcbiAqICAgdmFyIENvdW50cnlTdG9yZSA9IHtjb3VudHJ5OiBudWxsfTtcbiAqXG4gKiAgIC8vIEtlZXBzIHRyYWNrIG9mIHdoaWNoIGNpdHkgaXMgc2VsZWN0ZWRcbiAqICAgdmFyIENpdHlTdG9yZSA9IHtjaXR5OiBudWxsfTtcbiAqXG4gKiAgIC8vIEtlZXBzIHRyYWNrIG9mIHRoZSBiYXNlIGZsaWdodCBwcmljZSBvZiB0aGUgc2VsZWN0ZWQgY2l0eVxuICogICB2YXIgRmxpZ2h0UHJpY2VTdG9yZSA9IHtwcmljZTogbnVsbH1cbiAqXG4gKiBXaGVuIGEgdXNlciBjaGFuZ2VzIHRoZSBzZWxlY3RlZCBjaXR5LCB3ZSBkaXNwYXRjaCB0aGUgcGF5bG9hZDpcbiAqXG4gKiAgIGZsaWdodERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICogICAgIGFjdGlvblR5cGU6ICdjaXR5LXVwZGF0ZScsXG4gKiAgICAgc2VsZWN0ZWRDaXR5OiAncGFyaXMnXG4gKiAgIH0pO1xuICpcbiAqIFRoaXMgcGF5bG9hZCBpcyBkaWdlc3RlZCBieSBgQ2l0eVN0b3JlYDpcbiAqXG4gKiAgIGZsaWdodERpc3BhdGNoZXIucmVnaXN0ZXIoZnVuY3Rpb24ocGF5bG9hZCkge1xuICogICAgIGlmIChwYXlsb2FkLmFjdGlvblR5cGUgPT09ICdjaXR5LXVwZGF0ZScpIHtcbiAqICAgICAgIENpdHlTdG9yZS5jaXR5ID0gcGF5bG9hZC5zZWxlY3RlZENpdHk7XG4gKiAgICAgfVxuICogICB9KTtcbiAqXG4gKiBXaGVuIHRoZSB1c2VyIHNlbGVjdHMgYSBjb3VudHJ5LCB3ZSBkaXNwYXRjaCB0aGUgcGF5bG9hZDpcbiAqXG4gKiAgIGZsaWdodERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICogICAgIGFjdGlvblR5cGU6ICdjb3VudHJ5LXVwZGF0ZScsXG4gKiAgICAgc2VsZWN0ZWRDb3VudHJ5OiAnYXVzdHJhbGlhJ1xuICogICB9KTtcbiAqXG4gKiBUaGlzIHBheWxvYWQgaXMgZGlnZXN0ZWQgYnkgYm90aCBzdG9yZXM6XG4gKlxuICogICBDb3VudHJ5U3RvcmUuZGlzcGF0Y2hUb2tlbiA9IGZsaWdodERpc3BhdGNoZXIucmVnaXN0ZXIoZnVuY3Rpb24ocGF5bG9hZCkge1xuICogICAgIGlmIChwYXlsb2FkLmFjdGlvblR5cGUgPT09ICdjb3VudHJ5LXVwZGF0ZScpIHtcbiAqICAgICAgIENvdW50cnlTdG9yZS5jb3VudHJ5ID0gcGF5bG9hZC5zZWxlY3RlZENvdW50cnk7XG4gKiAgICAgfVxuICogICB9KTtcbiAqXG4gKiBXaGVuIHRoZSBjYWxsYmFjayB0byB1cGRhdGUgYENvdW50cnlTdG9yZWAgaXMgcmVnaXN0ZXJlZCwgd2Ugc2F2ZSBhIHJlZmVyZW5jZVxuICogdG8gdGhlIHJldHVybmVkIHRva2VuLiBVc2luZyB0aGlzIHRva2VuIHdpdGggYHdhaXRGb3IoKWAsIHdlIGNhbiBndWFyYW50ZWVcbiAqIHRoYXQgYENvdW50cnlTdG9yZWAgaXMgdXBkYXRlZCBiZWZvcmUgdGhlIGNhbGxiYWNrIHRoYXQgdXBkYXRlcyBgQ2l0eVN0b3JlYFxuICogbmVlZHMgdG8gcXVlcnkgaXRzIGRhdGEuXG4gKlxuICogICBDaXR5U3RvcmUuZGlzcGF0Y2hUb2tlbiA9IGZsaWdodERpc3BhdGNoZXIucmVnaXN0ZXIoZnVuY3Rpb24ocGF5bG9hZCkge1xuICogICAgIGlmIChwYXlsb2FkLmFjdGlvblR5cGUgPT09ICdjb3VudHJ5LXVwZGF0ZScpIHtcbiAqICAgICAgIC8vIGBDb3VudHJ5U3RvcmUuY291bnRyeWAgbWF5IG5vdCBiZSB1cGRhdGVkLlxuICogICAgICAgZmxpZ2h0RGlzcGF0Y2hlci53YWl0Rm9yKFtDb3VudHJ5U3RvcmUuZGlzcGF0Y2hUb2tlbl0pO1xuICogICAgICAgLy8gYENvdW50cnlTdG9yZS5jb3VudHJ5YCBpcyBub3cgZ3VhcmFudGVlZCB0byBiZSB1cGRhdGVkLlxuICpcbiAqICAgICAgIC8vIFNlbGVjdCB0aGUgZGVmYXVsdCBjaXR5IGZvciB0aGUgbmV3IGNvdW50cnlcbiAqICAgICAgIENpdHlTdG9yZS5jaXR5ID0gZ2V0RGVmYXVsdENpdHlGb3JDb3VudHJ5KENvdW50cnlTdG9yZS5jb3VudHJ5KTtcbiAqICAgICB9XG4gKiAgIH0pO1xuICpcbiAqIFRoZSB1c2FnZSBvZiBgd2FpdEZvcigpYCBjYW4gYmUgY2hhaW5lZCwgZm9yIGV4YW1wbGU6XG4gKlxuICogICBGbGlnaHRQcmljZVN0b3JlLmRpc3BhdGNoVG9rZW4gPVxuICogICAgIGZsaWdodERpc3BhdGNoZXIucmVnaXN0ZXIoZnVuY3Rpb24ocGF5bG9hZCkge1xuICogICAgICAgc3dpdGNoIChwYXlsb2FkLmFjdGlvblR5cGUpIHtcbiAqICAgICAgICAgY2FzZSAnY291bnRyeS11cGRhdGUnOlxuICogICAgICAgICBjYXNlICdjaXR5LXVwZGF0ZSc6XG4gKiAgICAgICAgICAgZmxpZ2h0RGlzcGF0Y2hlci53YWl0Rm9yKFtDaXR5U3RvcmUuZGlzcGF0Y2hUb2tlbl0pO1xuICogICAgICAgICAgIEZsaWdodFByaWNlU3RvcmUucHJpY2UgPVxuICogICAgICAgICAgICAgZ2V0RmxpZ2h0UHJpY2VTdG9yZShDb3VudHJ5U3RvcmUuY291bnRyeSwgQ2l0eVN0b3JlLmNpdHkpO1xuICogICAgICAgICAgIGJyZWFrO1xuICogICAgIH1cbiAqICAgfSk7XG4gKlxuICogVGhlIGBjb3VudHJ5LXVwZGF0ZWAgcGF5bG9hZCB3aWxsIGJlIGd1YXJhbnRlZWQgdG8gaW52b2tlIHRoZSBzdG9yZXMnXG4gKiByZWdpc3RlcmVkIGNhbGxiYWNrcyBpbiBvcmRlcjogYENvdW50cnlTdG9yZWAsIGBDaXR5U3RvcmVgLCB0aGVuXG4gKiBgRmxpZ2h0UHJpY2VTdG9yZWAuXG4gKi9cblxudmFyIERpc3BhdGNoZXIgPSAoZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBEaXNwYXRjaGVyKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBEaXNwYXRjaGVyKTtcblxuICAgIHRoaXMuX2NhbGxiYWNrcyA9IHt9O1xuICAgIHRoaXMuX2lzRGlzcGF0Y2hpbmcgPSBmYWxzZTtcbiAgICB0aGlzLl9pc0hhbmRsZWQgPSB7fTtcbiAgICB0aGlzLl9pc1BlbmRpbmcgPSB7fTtcbiAgICB0aGlzLl9sYXN0SUQgPSAxO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBhIGNhbGxiYWNrIHRvIGJlIGludm9rZWQgd2l0aCBldmVyeSBkaXNwYXRjaGVkIHBheWxvYWQuIFJldHVybnNcbiAgICogYSB0b2tlbiB0aGF0IGNhbiBiZSB1c2VkIHdpdGggYHdhaXRGb3IoKWAuXG4gICAqL1xuXG4gIERpc3BhdGNoZXIucHJvdG90eXBlLnJlZ2lzdGVyID0gZnVuY3Rpb24gcmVnaXN0ZXIoY2FsbGJhY2spIHtcbiAgICB2YXIgaWQgPSBfcHJlZml4ICsgdGhpcy5fbGFzdElEKys7XG4gICAgdGhpcy5fY2FsbGJhY2tzW2lkXSA9IGNhbGxiYWNrO1xuICAgIHJldHVybiBpZDtcbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlcyBhIGNhbGxiYWNrIGJhc2VkIG9uIGl0cyB0b2tlbi5cbiAgICovXG5cbiAgRGlzcGF0Y2hlci5wcm90b3R5cGUudW5yZWdpc3RlciA9IGZ1bmN0aW9uIHVucmVnaXN0ZXIoaWQpIHtcbiAgICAhdGhpcy5fY2FsbGJhY2tzW2lkXSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdEaXNwYXRjaGVyLnVucmVnaXN0ZXIoLi4uKTogYCVzYCBkb2VzIG5vdCBtYXAgdG8gYSByZWdpc3RlcmVkIGNhbGxiYWNrLicsIGlkKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgZGVsZXRlIHRoaXMuX2NhbGxiYWNrc1tpZF07XG4gIH07XG5cbiAgLyoqXG4gICAqIFdhaXRzIGZvciB0aGUgY2FsbGJhY2tzIHNwZWNpZmllZCB0byBiZSBpbnZva2VkIGJlZm9yZSBjb250aW51aW5nIGV4ZWN1dGlvblxuICAgKiBvZiB0aGUgY3VycmVudCBjYWxsYmFjay4gVGhpcyBtZXRob2Qgc2hvdWxkIG9ubHkgYmUgdXNlZCBieSBhIGNhbGxiYWNrIGluXG4gICAqIHJlc3BvbnNlIHRvIGEgZGlzcGF0Y2hlZCBwYXlsb2FkLlxuICAgKi9cblxuICBEaXNwYXRjaGVyLnByb3RvdHlwZS53YWl0Rm9yID0gZnVuY3Rpb24gd2FpdEZvcihpZHMpIHtcbiAgICAhdGhpcy5faXNEaXNwYXRjaGluZyA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdEaXNwYXRjaGVyLndhaXRGb3IoLi4uKTogTXVzdCBiZSBpbnZva2VkIHdoaWxlIGRpc3BhdGNoaW5nLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICBmb3IgKHZhciBpaSA9IDA7IGlpIDwgaWRzLmxlbmd0aDsgaWkrKykge1xuICAgICAgdmFyIGlkID0gaWRzW2lpXTtcbiAgICAgIGlmICh0aGlzLl9pc1BlbmRpbmdbaWRdKSB7XG4gICAgICAgICF0aGlzLl9pc0hhbmRsZWRbaWRdID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0Rpc3BhdGNoZXIud2FpdEZvciguLi4pOiBDaXJjdWxhciBkZXBlbmRlbmN5IGRldGVjdGVkIHdoaWxlICcgKyAnd2FpdGluZyBmb3IgYCVzYC4nLCBpZCkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgICF0aGlzLl9jYWxsYmFja3NbaWRdID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0Rpc3BhdGNoZXIud2FpdEZvciguLi4pOiBgJXNgIGRvZXMgbm90IG1hcCB0byBhIHJlZ2lzdGVyZWQgY2FsbGJhY2suJywgaWQpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMuX2ludm9rZUNhbGxiYWNrKGlkKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIERpc3BhdGNoZXMgYSBwYXlsb2FkIHRvIGFsbCByZWdpc3RlcmVkIGNhbGxiYWNrcy5cbiAgICovXG5cbiAgRGlzcGF0Y2hlci5wcm90b3R5cGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiBkaXNwYXRjaChwYXlsb2FkKSB7XG4gICAgISF0aGlzLl9pc0Rpc3BhdGNoaW5nID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0Rpc3BhdGNoLmRpc3BhdGNoKC4uLik6IENhbm5vdCBkaXNwYXRjaCBpbiB0aGUgbWlkZGxlIG9mIGEgZGlzcGF0Y2guJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIHRoaXMuX3N0YXJ0RGlzcGF0Y2hpbmcocGF5bG9hZCk7XG4gICAgdHJ5IHtcbiAgICAgIGZvciAodmFyIGlkIGluIHRoaXMuX2NhbGxiYWNrcykge1xuICAgICAgICBpZiAodGhpcy5faXNQZW5kaW5nW2lkXSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2ludm9rZUNhbGxiYWNrKGlkKTtcbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgdGhpcy5fc3RvcERpc3BhdGNoaW5nKCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBJcyB0aGlzIERpc3BhdGNoZXIgY3VycmVudGx5IGRpc3BhdGNoaW5nLlxuICAgKi9cblxuICBEaXNwYXRjaGVyLnByb3RvdHlwZS5pc0Rpc3BhdGNoaW5nID0gZnVuY3Rpb24gaXNEaXNwYXRjaGluZygpIHtcbiAgICByZXR1cm4gdGhpcy5faXNEaXNwYXRjaGluZztcbiAgfTtcblxuICAvKipcbiAgICogQ2FsbCB0aGUgY2FsbGJhY2sgc3RvcmVkIHdpdGggdGhlIGdpdmVuIGlkLiBBbHNvIGRvIHNvbWUgaW50ZXJuYWxcbiAgICogYm9va2tlZXBpbmcuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cblxuICBEaXNwYXRjaGVyLnByb3RvdHlwZS5faW52b2tlQ2FsbGJhY2sgPSBmdW5jdGlvbiBfaW52b2tlQ2FsbGJhY2soaWQpIHtcbiAgICB0aGlzLl9pc1BlbmRpbmdbaWRdID0gdHJ1ZTtcbiAgICB0aGlzLl9jYWxsYmFja3NbaWRdKHRoaXMuX3BlbmRpbmdQYXlsb2FkKTtcbiAgICB0aGlzLl9pc0hhbmRsZWRbaWRdID0gdHJ1ZTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHVwIGJvb2trZWVwaW5nIG5lZWRlZCB3aGVuIGRpc3BhdGNoaW5nLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG5cbiAgRGlzcGF0Y2hlci5wcm90b3R5cGUuX3N0YXJ0RGlzcGF0Y2hpbmcgPSBmdW5jdGlvbiBfc3RhcnREaXNwYXRjaGluZyhwYXlsb2FkKSB7XG4gICAgZm9yICh2YXIgaWQgaW4gdGhpcy5fY2FsbGJhY2tzKSB7XG4gICAgICB0aGlzLl9pc1BlbmRpbmdbaWRdID0gZmFsc2U7XG4gICAgICB0aGlzLl9pc0hhbmRsZWRbaWRdID0gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMuX3BlbmRpbmdQYXlsb2FkID0gcGF5bG9hZDtcbiAgICB0aGlzLl9pc0Rpc3BhdGNoaW5nID0gdHJ1ZTtcbiAgfTtcblxuICAvKipcbiAgICogQ2xlYXIgYm9va2tlZXBpbmcgdXNlZCBmb3IgZGlzcGF0Y2hpbmcuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cblxuICBEaXNwYXRjaGVyLnByb3RvdHlwZS5fc3RvcERpc3BhdGNoaW5nID0gZnVuY3Rpb24gX3N0b3BEaXNwYXRjaGluZygpIHtcbiAgICBkZWxldGUgdGhpcy5fcGVuZGluZ1BheWxvYWQ7XG4gICAgdGhpcy5faXNEaXNwYXRjaGluZyA9IGZhbHNlO1xuICB9O1xuXG4gIHJldHVybiBEaXNwYXRjaGVyO1xufSkoKTtcblxubW9kdWxlLmV4cG9ydHMgPSBEaXNwYXRjaGVyO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9mbHV4L2xpYi9EaXNwYXRjaGVyLmpzXG4vLyBtb2R1bGUgaWQgPSAxOTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIFVzZSBpbnZhcmlhbnQoKSB0byBhc3NlcnQgc3RhdGUgd2hpY2ggeW91ciBwcm9ncmFtIGFzc3VtZXMgdG8gYmUgdHJ1ZS5cbiAqXG4gKiBQcm92aWRlIHNwcmludGYtc3R5bGUgZm9ybWF0IChvbmx5ICVzIGlzIHN1cHBvcnRlZCkgYW5kIGFyZ3VtZW50c1xuICogdG8gcHJvdmlkZSBpbmZvcm1hdGlvbiBhYm91dCB3aGF0IGJyb2tlIGFuZCB3aGF0IHlvdSB3ZXJlXG4gKiBleHBlY3RpbmcuXG4gKlxuICogVGhlIGludmFyaWFudCBtZXNzYWdlIHdpbGwgYmUgc3RyaXBwZWQgaW4gcHJvZHVjdGlvbiwgYnV0IHRoZSBpbnZhcmlhbnRcbiAqIHdpbGwgcmVtYWluIHRvIGVuc3VyZSBsb2dpYyBkb2VzIG5vdCBkaWZmZXIgaW4gcHJvZHVjdGlvbi5cbiAqL1xuXG52YXIgdmFsaWRhdGVGb3JtYXQgPSBmdW5jdGlvbiB2YWxpZGF0ZUZvcm1hdChmb3JtYXQpIHt9O1xuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICB2YWxpZGF0ZUZvcm1hdCA9IGZ1bmN0aW9uIHZhbGlkYXRlRm9ybWF0KGZvcm1hdCkge1xuICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhcmlhbnQgcmVxdWlyZXMgYW4gZXJyb3IgbWVzc2FnZSBhcmd1bWVudCcpO1xuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gaW52YXJpYW50KGNvbmRpdGlvbiwgZm9ybWF0LCBhLCBiLCBjLCBkLCBlLCBmKSB7XG4gIHZhbGlkYXRlRm9ybWF0KGZvcm1hdCk7XG5cbiAgaWYgKCFjb25kaXRpb24pIHtcbiAgICB2YXIgZXJyb3I7XG4gICAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBlcnJvciA9IG5ldyBFcnJvcignTWluaWZpZWQgZXhjZXB0aW9uIG9jY3VycmVkOyB1c2UgdGhlIG5vbi1taW5pZmllZCBkZXYgZW52aXJvbm1lbnQgJyArICdmb3IgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZSBhbmQgYWRkaXRpb25hbCBoZWxwZnVsIHdhcm5pbmdzLicpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgYXJncyA9IFthLCBiLCBjLCBkLCBlLCBmXTtcbiAgICAgIHZhciBhcmdJbmRleCA9IDA7XG4gICAgICBlcnJvciA9IG5ldyBFcnJvcihmb3JtYXQucmVwbGFjZSgvJXMvZywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gYXJnc1thcmdJbmRleCsrXTtcbiAgICAgIH0pKTtcbiAgICAgIGVycm9yLm5hbWUgPSAnSW52YXJpYW50IFZpb2xhdGlvbic7XG4gICAgfVxuXG4gICAgZXJyb3IuZnJhbWVzVG9Qb3AgPSAxOyAvLyB3ZSBkb24ndCBjYXJlIGFib3V0IGludmFyaWFudCdzIG93biBmcmFtZVxuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaW52YXJpYW50O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9mbHV4L34vZmJqcy9saWIvaW52YXJpYW50LmpzXG4vLyBtb2R1bGUgaWQgPSAxOTFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLy8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblxuLy8gbG9hZCB0aGUgc3R5bGVzXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuL3NlYXJjaC5zY3NzXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCB7fSk7XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcblx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuL3NlYXJjaC5zY3NzXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi9zZWFyY2guc2Nzc1wiKTtcblx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdH0pO1xuXHR9XG5cdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vcm9vdC9zdHlsZS9jb21wb25lbnRzL3NlYXJjaC5zY3NzIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKSgpO1xuLy8gaW1wb3J0c1xuXG5cbi8vIG1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLnNlYXJjaD5pbnB1dHtmb250LXNpemU6MTZweDtoZWlnaHQ6MjBweDt3aWR0aDo1NDBweDtjb2xvcjojMmUyYzJkO2JvcmRlci1yYWRpdXM6NHB4O2JhY2tncm91bmQtaW1hZ2U6dXJsKFxcXCJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJRQUFBQVFDQVlBQUFBV0dGOGJBQUFBQm1KTFIwUUFxZ0NxQUtvaE9LNElBQUFBQ1hCSVdYTUFBQXNUQUFBTEV3RUFtcHdZQUFBQUIzUkpUVVVINEFzUkJCd3g5VVZGY2dBQUFTQkpSRUZVT011dGxMMUtBMEVVaGIrTlZ1NHJCSVFRT3p2ekVnWXRvdUFybk5ydFhTVHBJbWg5WDBHSUZnRjlDbHN0RkYwaGo2QldDalozWkpEc1RFQlBNejk3K0RoMzdzNFVSREt6RXFpQmZhRHYyMC9BSEJoTGVpZWpJb0lkQUxPTS8xRFNWY3JRV1FLN0FRYVNDa2tGTVBBOWdKbVpqWklKdmN3M1gxZVNMcFlaemV3WU9QZGxLZW1qTFdFZGtyWEJBUHhiU0hxYUtublA1elY1QmM5UkNyamxDZTV5dE1pem1XektmNm9EUFBxaDcrVE1rYWRKQWVjK0g2OFFZT0xqWlFvWVFFTXpxeExwS21BMzErWEN6U01nM0lCYjRDUTB3TXVjUkxBRzZFdjZ5bDI5R05xbXhqdThBSHFTUGx1N0xPa2FLSUV6NFBVWFpBcHMrSU94QUxyQXM1bXR0eVpjVldhMkJydzQ5RjdTOXAvK1F6KzdIdkFRdlFFLytnWUxLVjZ0NmkyQjdnQUFBQUJKUlU1RXJrSmdnZz09XFxcIik7YmFja2dyb3VuZC1wb3NpdGlvbjoxMDAlIDZweDtiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7Ym9yZGVyLWNvbG9yOiMyZTJjMmQ7YmFja2dyb3VuZC1jb2xvcjojZmZmO3BhZGRpbmc6NXB4fS5zZWFyY2g+aW5wdXQ6Zm9jdXN7b3V0bGluZTpub25lfS5zZWFyY2guc2hvdyBpbnB1dHtib3JkZXItcmFkaXVzOjVweCA1cHggMCAwfS5zZWFyY2guc2hvdyAucmVzdWx0c3t0cmFuc2Zvcm06cGVyc3BlY3RpdmUoMCkgcm90YXRlWCgwZGVnKX0uc2VhcmNoIC5yZXN1bHRze3dpZHRoOjU1MnB4O2JhY2tncm91bmQtY29sb3I6I2ZmZjtib3gtc2hhZG93OjVweCA1cHggMTBweCAjMDAwO3Bvc2l0aW9uOmFic29sdXRlO2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47anVzdGlmeS1jb250ZW50OmZsZXgtc3RhcnQ7dHJhbnNmb3JtOnBlcnNwZWN0aXZlKDgwMHB4KSByb3RhdGVYKC05MGRlZyk7dHJhbnNmb3JtLW9yaWdpbjp0b3A7dHJhbnNpdGlvbjphbGwgLjVzIGxpbmVhcjt6LWluZGV4OjEwO292ZXJmbG93OnNjcm9sbH0uc2VhcmNoIC5yZXN1bHRzIC5yb3ctY29udGVudHtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246cm93O2p1c3RpZnktY29udGVudDpmbGV4LXN0YXJ0O2FsaWduLWl0ZW1zOnN0cmV0Y2g7bWFyZ2luOjAgMTBweDtwYWRkaW5nOjVweCAwO2N1cnNvcjpwb2ludGVyfS5zZWFyY2ggLnJlc3VsdHMgLnJvdy1jb250ZW50IC5kZXRhaWxze3BhZGRpbmctbGVmdDoyMHB4O2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47anVzdGlmeS1jb250ZW50OmNlbnRlcn0uc2VhcmNoIC5yZXN1bHRzIC5yb3ctY29udGVudCAuZGV0YWlscyAudGl0bGV7Zm9udC1zaXplOjIwcHg7Y29sb3I6IzJlMmMyZH0uc2VhcmNoIC5yZXN1bHRzIC5yb3ctY29udGVudCAuZGV0YWlscyAudGl0bGUgLmhpZ2hsaWdodHtmb250LXdlaWdodDo3MDA7Zm9udC1zaXplOjIwcHh9LnNlYXJjaCAucmVzdWx0cyAucm93LWNvbnRlbnQgLmRldGFpbHMgLmF1dGhvcntmb250LXNpemU6MTRweDtjb2xvcjojNTg1NjU4fS5zZWFyY2ggLnJlc3VsdHMgLnJvdy1jb250ZW50IC5pbWFnZXt3aWR0aDo1MHB4O2hlaWdodDo1MHB4fS5zZWFyY2ggLnJlc3VsdHMgLnJvd3tib3JkZXItdG9wOjFweCBzb2xpZCAjM2EzNTNjO2JvcmRlci1ib3R0b206MXB4IHNvbGlkICMzYTM1M2N9LnNlYXJjaCAucmVzdWx0cyAucm93LmFjdGl2ZSwuc2VhcmNoIC5yZXN1bHRzIC5yb3c6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojM2EzNTNjfS5zZWFyY2ggLnJlc3VsdHMgLnJvdy5hY3RpdmUgLnRpdGxlLC5zZWFyY2ggLnJlc3VsdHMgLnJvdzpob3ZlciAudGl0bGV7Y29sb3I6I2YxZjFmMX0uc2VhcmNoIC5yZXN1bHRzIC5yb3cuYWN0aXZlIC5hdXRob3IsLnNlYXJjaCAucmVzdWx0cyAucm93OmhvdmVyIC5hdXRob3J7Y29sb3I6I2IzYWZhZn0uc2VhcmNoIC5yZXN1bHRzIC5yb3c6bGFzdC1jaGlsZCAucm93LWNvbnRlbnR7Ym9yZGVyLWJvdHRvbTpub25lO3BhZGRpbmctYm90dG9tOjEwcHh9LnNlYXJjaCAucmVzdWx0cyAucm93OmZpcnN0LWNoaWxkIC5yb3ctY29udGVudHtib3JkZXItdG9wOm5vbmU7cGFkZGluZy10b3A6MTBweH1cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vY3NzLWxvYWRlciEuL34vc2Fzcy1sb2FkZXIhLi9yb290L3N0eWxlL2NvbXBvbmVudHMvc2VhcmNoLnNjc3Ncbi8vIG1vZHVsZSBpZCA9IDE5M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXG4vLyBsb2FkIHRoZSBzdHlsZXNcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vaGVhZGVyLnNjc3NcIik7XG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcbi8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIHt9KTtcbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuLy8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuaWYobW9kdWxlLmhvdCkge1xuXHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vaGVhZGVyLnNjc3NcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuL2hlYWRlci5zY3NzXCIpO1xuXHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0fSk7XG5cdH1cblx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9yb290L3N0eWxlL2NvbXBvbmVudHMvaGVhZGVyLnNjc3MiLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuaGVhZGVyLWNvbnRlbnR7YmFja2dyb3VuZC1jb2xvcjojZmZmO2hlaWdodDo2MHB4O3BhZGRpbmc6MCAyNXB4O2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpyb3c7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47YWxpZ24taXRlbXM6Y2VudGVyfS5oZWFkZXItY29udGVudCAudXNlci1tZW51e3Bvc2l0aW9uOnJlbGF0aXZlO2NvbG9yOiM1ODU2NTg7Y3Vyc29yOnBvaW50ZXJ9LmhlYWRlci1jb250ZW50IC51c2VyLW1lbnUgLnVzZXItbGFiZWx7cGFkZGluZy1yaWdodDoxMHB4O2N1cnNvcjpwb2ludGVyfS5oZWFkZXItY29udGVudCAudXNlci1tZW51IC51c2VyLWxhYmVsOmhvdmVye3RleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmU7Y29sb3I6IzJlMmMyZH0uaGVhZGVyLWNvbnRlbnQgLnVzZXItbWVudS5zaG93LW1lbnUgLm1lbnUtb3B0aW9uc3t0cmFuc2Zvcm06cGVyc3BlY3RpdmUoMCkgcm90YXRlWCgwZGVnKX0uaGVhZGVyLWNvbnRlbnQgLnVzZXItbWVudSAubWVudS1vcHRpb25ze2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47YmFja2dyb3VuZC1jb2xvcjojZmZmO2JveC1zaGFkb3c6NXB4IDVweCAxMHB4ICMwMDA7cG9zaXRpb246YWJzb2x1dGU7bGVmdDowO3JpZ2h0OjA7dHJhbnNmb3JtOnBlcnNwZWN0aXZlKDgwMHB4KSByb3RhdGVYKC05MGRlZyk7dHJhbnNmb3JtLW9yaWdpbjp0b3A7dHJhbnNpdGlvbjphbGwgLjVzIGxpbmVhcjt6LWluZGV4OjEwfS5oZWFkZXItY29udGVudCAudXNlci1tZW51IC5tZW51LW9wdGlvbnMgLml0ZW17cGFkZGluZzo1cHg7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgIzJlMmMyZDtjdXJzb3I6cG9pbnRlcn0uaGVhZGVyLWNvbnRlbnQgLnVzZXItbWVudSAubWVudS1vcHRpb25zIC5pdGVtOmxhc3QtY2hpbGR7Ym9yZGVyLWJvdHRvbTpub25lfS5oZWFkZXItY29udGVudCAudXNlci1tZW51IC5tZW51LW9wdGlvbnMgLml0ZW06aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojMmUyYzJkO2NvbG9yOiNiM2FmYWZ9LmhlYWRlci1jb250ZW50IC51c2VyLW1lbnUgLm1lbnUtb3B0aW9ucyAuaXRlbTpob3ZlciAuaGlnaGxpZ2h0e2NvbG9yOiNmMWYxZjF9XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2Nzcy1sb2FkZXIhLi9+L3Nhc3MtbG9hZGVyIS4vcm9vdC9zdHlsZS9jb21wb25lbnRzL2hlYWRlci5zY3NzXG4vLyBtb2R1bGUgaWQgPSAxOTVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xucmVxdWlyZShcIi4uL3N0eWxlL2NvbXBvbmVudHMvbmF2aWdhdGlvbi5zY3NzXCIpO1xuXG52YXIgTmF2aWdhdGlvbiA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgICB0b2dnbGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoUmVhY3RET00uZmluZERPTU5vZGUodGhpcykuY2xhc3NMaXN0LmNvbnRhaW5zKFwic2hvd1wiKSkge1xuICAgICAgICAgICAgUmVhY3RET00uZmluZERPTU5vZGUodGhpcykuY2xhc3NMaXN0LnJlbW92ZShcInNob3dcIik7XG4gICAgICAgICAgICBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKS5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGlkZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKS5jbGFzc0xpc3QuYWRkKFwic2hvd1wiKTtcbiAgICAgICAgICAgIFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oaWRlKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgX2hpZGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKS5jbGFzc0xpc3QucmVtb3ZlKFwic2hvd1wiKTtcbiAgICB9LFxuICAgIF9nZXRJZDogZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgICB2YXIgY3VycmVudEVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICB3aGlsZSAoIWN1cnJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcImxpbmtcIikpIHtcbiAgICAgICAgICAgIGN1cnJlbnRFbGVtZW50ID0gY3VycmVudEVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY3VycmVudEVsZW1lbnQuZGF0YXNldC5pZDtcbiAgICB9LFxuICAgIGhhbmRsZUNsaWNrOiBmdW5jdGlvbihlKSB7XG4gICAgICAgIHRoaXMucHJvcHMuYU9wZW5Db250ZW50KHRoaXMuX2dldElkKGUudGFyZ2V0KSk7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfSxcbiAgICBoYW5kbGVDbG9zZTogZnVuY3Rpb24oZSkge1xuICAgICAgICB0aGlzLnByb3BzLmFDbG9zZVJlY2lwZSh0aGlzLl9nZXRJZChlLnRhcmdldCkpO1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH0sXG4gICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIG5hdiA9IHRoaXM7XG4gICAgICAgIHZhciBsaXN0ID0gdGhpcy5wcm9wcy5zT3Blbkxpc3QubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICB2YXIgY2xhc3NlcyA9IFwibGluayBob3ZlclwiOyBcbiAgICAgICAgICAgIGlmIChpdGVtLmFjdGl2ZSkge1xuICAgICAgICAgICAgICAgIGNsYXNzZXMgPSBcImxpbmsgaG92ZXIgYWN0aXZlXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChpdGVtLmlkID09IFwiaG9tZVwiKSB7XG4gICAgICAgICAgICAgICAgY2xhc3NlcyArPSBcIiB0aS1ob21lXCI7XG4gICAgICAgICAgICAgICAgcmV0dXJuICg8bGkga2V5PXtpdGVtLmlkfSBjbGFzc05hbWU9e2NsYXNzZXN9IGRhdGEtaWQ9XCJob21lXCIgb25DbGljaz17bmF2LmhhbmRsZUNsaWNrfT5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dFwiPkhvbWU8L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9saT4pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVtLmlkID09IFwibmV3XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobmF2LnByb3BzLnNVc2VyICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NlcyArPSBcIiB0aS1wbHVzXCI7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoPGxpIGtleT17aXRlbS5pZH0gY2xhc3NOYW1lPXtjbGFzc2VzfSBkYXRhLWlkPVwibmV3XCIgb25DbGljaz17bmF2LnByb3BzLmFOZXdSZWNpcGV9PlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dFwiPk5ldzwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPC9saT4pOyAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfSAgICAgICAgICAgIFxuICAgICAgICAgICAgfSBlbHNlIGlmKGl0ZW0uaWQgPT0gXCJ1c2VyXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobmF2LnByb3BzLnNVc2VyICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NlcyArPSBcIiB0aS11c2VyXCI7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoPGxpIGtleT17aXRlbS5pZH0gY2xhc3NOYW1lPXtjbGFzc2VzfSBkYXRhLWlkPVwidXNlclwiIG9uQ2xpY2s9e25hdi5oYW5kbGVDbGlja30+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0XCI+VXNlciBzZXR0aW5nczwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPC9saT4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHRpdGxlID0gaXRlbS5yZWNpcGUudGl0bGU7XG4gICAgICAgICAgICAgICAgaWYgKHRpdGxlID09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGUgPSBcIk5ldy4uLlwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gKDxsaSBrZXk9e2l0ZW0uaWR9IGRhdGEtaWQ9e2l0ZW0uaWR9IGNsYXNzTmFtZT17Y2xhc3Nlc30gb25DbGljaz17bmF2LmhhbmRsZUNsaWNrfT5cbiAgICAgICAgICAgICAgICAgICAgPGltZyBjbGFzc05hbWU9XCJpbWFnZVwiIHNyYz17aXRlbS5yZWNpcGUucGljdHVyZSArIFwiP1wiICsgaXRlbS5yZWNpcGUuZGF0ZU1vZGlmaWVkfSAvPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0IHRydW5jYXRlXCIgdGl0bGU9e3RpdGxlfT57dGl0bGV9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8YSBjbGFzc05hbWU9XCJ0aS1jbG9zZVwiIG9uQ2xpY2s9e25hdi5oYW5kbGVDbG9zZX0+PC9hPntjbG9zZX1cbiAgICAgICAgICAgICAgICA8L2xpPik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuICg8bmF2IGNsYXNzTmFtZT1cIm5hdmlnYXRpb25cIj5cbiAgICAgICAgICAgIDx1bCBjbGFzc05hbWU9XCJuYXZpZ2F0aW9uLWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICA8bGkgY2xhc3NOYW1lPVwibGlua1wiPjxhIGNsYXNzTmFtZT1cInRvZ2dsZVwiIG9uQ2xpY2s9e3RoaXMudG9nZ2xlfT48L2E+PC9saT5cbiAgICAgICAgICAgICAgICB7bGlzdH1cbiAgICAgICAgICAgIDwvdWw+XG4gICAgICAgIDwvbmF2Pik7XG4gICAgfVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IE5hdmlnYXRpb247XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9yb290L2NvbXBvbmVudHMvbmF2aWdhdGlvbi5qc3giLCIvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXG4vLyBsb2FkIHRoZSBzdHlsZXNcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vbmF2aWdhdGlvbi5zY3NzXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCB7fSk7XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcblx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuL25hdmlnYXRpb24uc2Nzc1wiLCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vbmF2aWdhdGlvbi5zY3NzXCIpO1xuXHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0fSk7XG5cdH1cblx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9yb290L3N0eWxlL2NvbXBvbmVudHMvbmF2aWdhdGlvbi5zY3NzIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKSgpO1xuLy8gaW1wb3J0c1xuXG5cbi8vIG1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLm5hdmlnYXRpb257d2lkdGg6NTBweDtiYWNrZ3JvdW5kLWNvbG9yOiMzYTM1M2M7dHJhbnNpdGlvbjp3aWR0aCAuNXN9Lm5hdmlnYXRpb24gLm5hdmlnYXRpb24tY29udGVudHtwb3NpdGlvbjpyZWxhdGl2ZTtmbGV4LWRpcmVjdGlvbjpyb3c7anVzdGlmeS1jb250ZW50OmZsZXgtc3RhcnQ7YWxpZ24taXRlbXM6c3RyZXRjaDtoZWlnaHQ6MTAwJTtsaXN0LXN0eWxlLXR5cGU6bm9uZTttYXJnaW46MDtwYWRkaW5nOjA7b3ZlcmZsb3c6aGlkZGVufS5uYXZpZ2F0aW9uIC5uYXZpZ2F0aW9uLWNvbnRlbnQgLmxpbmt7aGVpZ2h0OjM1cHg7ZGlzcGxheTpmbGV4O3Bvc2l0aW9uOnJlbGF0aXZlO2FsaWduLWl0ZW1zOmNlbnRlcjtsaW5lLWhlaWdodDozNXB4O2NvbG9yOiNmMWYxZjE7cGFkZGluZzo1cHggMCA1cHggMTBweDtvcGFjaXR5Oi43NTtjdXJzb3I6cG9pbnRlcn0ubmF2aWdhdGlvbiAubmF2aWdhdGlvbi1jb250ZW50IC5saW5rIC50aS1jbG9zZXtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtyaWdodDowO2ZvbnQtc2l6ZTouNTVlbTtwYWRkaW5nOjNweDttYXJnaW46MXB4O2JvcmRlci1yYWRpdXM6MTBweDtiYWNrZ3JvdW5kLWNvbG9yOiMwMDA7Y29sb3I6I2IzYWZhZn0ubmF2aWdhdGlvbiAubmF2aWdhdGlvbi1jb250ZW50IC5saW5rIC50aS1jbG9zZTpob3Zlcntjb2xvcjojZjFmMWYxfS5uYXZpZ2F0aW9uIC5uYXZpZ2F0aW9uLWNvbnRlbnQgLmxpbms6Zmlyc3QtY2hpbGR7ZGlzcGxheTpibG9jaztwYWRkaW5nOjB9Lm5hdmlnYXRpb24gLm5hdmlnYXRpb24tY29udGVudCAubGluaz4uaW1hZ2V7d2lkdGg6MzBweDtoZWlnaHQ6MzBweDttaW4td2lkdGg6MzBweH0ubmF2aWdhdGlvbiAubmF2aWdhdGlvbi1jb250ZW50IC5saW5rPi50ZXh0e29wYWNpdHk6MDtwYWRkaW5nLWxlZnQ6MTBweH0ubmF2aWdhdGlvbiAubmF2aWdhdGlvbi1jb250ZW50IC5saW5rPi50ZXh0LnRydW5jYXRle3dpZHRoOjE1MHB4O3doaXRlLXNwYWNlOm5vd3JhcDt0ZXh0LXJlbmRlcmluZzphdXRvOy13ZWJraXQtZm9udC1zbW9vdGhpbmc6YW50aWFsaWFzZWQ7ZGlzcGxheTppbmxpbmUtYmxvY2s7b3ZlcmZsb3c6aGlkZGVuO3RleHQtb3ZlcmZsb3c6ZWxsaXBzaXM7dHJhbnNpdGlvbjphbGwgLjVzfS5uYXZpZ2F0aW9uIC5uYXZpZ2F0aW9uLWNvbnRlbnQgLmxpbmsuYWN0aXZlLC5uYXZpZ2F0aW9uIC5uYXZpZ2F0aW9uLWNvbnRlbnQgLmxpbmsuaG92ZXI6aG92ZXIsLm5hdmlnYXRpb24gLm5hdmlnYXRpb24tY29udGVudCAubGluazpmaXJzdC1jaGlsZHtiYWNrZ3JvdW5kLWNvbG9yOiMyZTJjMmQ7b3BhY2l0eToxfS5uYXZpZ2F0aW9uIC5uYXZpZ2F0aW9uLWNvbnRlbnQgLmxpbmsuYWN0aXZle2JvcmRlci1sZWZ0OjNweCBzb2xpZCAjZGVkYTFkO3BhZGRpbmctbGVmdDo3cHh9Lm5hdmlnYXRpb24gLm5hdmlnYXRpb24tY29udGVudCAubGluazpiZWZvcmV7Zm9udC1zaXplOjI2cHg7cGFkZGluZy1yaWdodDo1cHh9Lm5hdmlnYXRpb24gLm5hdmlnYXRpb24tY29udGVudCAudG9nZ2xle3BhZGRpbmc6MDt3aWR0aDo1MHB4O2Zsb2F0OnJpZ2h0O2Rpc3BsYXk6YmxvY2s7aGVpZ2h0OjM1cHh9Lm5hdmlnYXRpb24gLm5hdmlnYXRpb24tY29udGVudCAudG9nZ2xlOmFmdGVyLC5uYXZpZ2F0aW9uIC5uYXZpZ2F0aW9uLWNvbnRlbnQgLnRvZ2dsZTpiZWZvcmV7Y29udGVudDpcXFwiIFxcXCI7dHJhbnNpdGlvbjphbGwgLjVzIGxpbmVhcjtiYWNrZ3JvdW5kLWNvbG9yOiNmMWYxZjE7cG9zaXRpb246YWJzb2x1dGU7cmlnaHQ6MTVweDt3aWR0aDoyNXB4O2hlaWdodDozcHg7cGFkZGluZzowfS5uYXZpZ2F0aW9uIC5uYXZpZ2F0aW9uLWNvbnRlbnQgLnRvZ2dsZTpiZWZvcmV7dG9wOjEwcHh9Lm5hdmlnYXRpb24gLm5hdmlnYXRpb24tY29udGVudCAudG9nZ2xlOmFmdGVye3RvcDoyMHB4fS5uYXZpZ2F0aW9uLnNob3d7d2lkdGg6MjAwcHh9Lm5hdmlnYXRpb24uc2hvdyAudG9nZ2xle3dpZHRoOjM1cHh9Lm5hdmlnYXRpb24uc2hvdyAudG9nZ2xlOmFmdGVyLC5uYXZpZ2F0aW9uLnNob3cgLnRvZ2dsZTpiZWZvcmV7cmlnaHQ6MTJweDt3aWR0aDoxNXB4fS5uYXZpZ2F0aW9uLnNob3cgLnRvZ2dsZTpiZWZvcmV7dHJhbnNmb3JtOnJvdGF0ZSgtNDVkZWcpfS5uYXZpZ2F0aW9uLnNob3cgLnRvZ2dsZTphZnRlcnt0cmFuc2Zvcm06cm90YXRlKDQ1ZGVnKTt0b3A6MTlweH0ubmF2aWdhdGlvbi5zaG93IC5saW5rPi50ZXh0e29wYWNpdHk6MX1AbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4tZGV2aWNlLXdpZHRoOjMyMHB4KSBhbmQgKG1heC1kZXZpY2Utd2lkdGg6NDgwcHgpey5uYXZpZ2F0aW9ue3otaW5kZXg6MTA7aGVpZ2h0OjgwcHg7dHJhbnNpdGlvbjpoZWlnaHQgLjVzfS5uYXZpZ2F0aW9uIC5uYXZpZ2F0aW9uLWNvbnRlbnQgLmxpbmt7aGVpZ2h0OjgwcHg7bGluZS1oZWlnaHQ6ODBweH0ubmF2aWdhdGlvbiAubmF2aWdhdGlvbi1jb250ZW50IC5saW5rIC50aS1jbG9zZXttYXJnaW46MTBweDtmb250LXNpemU6Ljc1ZW19Lm5hdmlnYXRpb24gLm5hdmlnYXRpb24tY29udGVudCAubGluaz4uaW1hZ2V7d2lkdGg6NjBweDtoZWlnaHQ6NjBweH0ubmF2aWdhdGlvbiAubmF2aWdhdGlvbi1jb250ZW50IC5saW5rPi50ZXh0LnRydW5jYXRle3dpZHRoOmF1dG99Lm5hdmlnYXRpb24gLm5hdmlnYXRpb24tY29udGVudCAudG9nZ2xle3dpZHRoOjkwcHg7aGVpZ2h0OjgwcHh9Lm5hdmlnYXRpb24gLm5hdmlnYXRpb24tY29udGVudCAudG9nZ2xlOmFmdGVyLC5uYXZpZ2F0aW9uIC5uYXZpZ2F0aW9uLWNvbnRlbnQgLnRvZ2dsZTpiZWZvcmV7cmlnaHQ6MTVweDt3aWR0aDo1MHB4O2hlaWdodDo0cHh9Lm5hdmlnYXRpb24gLm5hdmlnYXRpb24tY29udGVudCAudG9nZ2xlOmJlZm9yZXt0b3A6MzBweH0ubmF2aWdhdGlvbiAubmF2aWdhdGlvbi1jb250ZW50IC50b2dnbGU6YWZ0ZXJ7dG9wOjUwcHh9Lm5hdmlnYXRpb24uc2hvd3toZWlnaHQ6MTAwJX0ubmF2aWdhdGlvbi5zaG93IC50b2dnbGV7d2lkdGg6MTEwcHh9Lm5hdmlnYXRpb24uc2hvdyAudG9nZ2xlOmFmdGVyLC5uYXZpZ2F0aW9uLnNob3cgLnRvZ2dsZTpiZWZvcmV7dG9wOjM1cHg7d2lkdGg6NDBweH0ubmF2aWdhdGlvbi5zaG93IC50b2dnbGU6YmVmb3Jle3RyYW5zZm9ybTpyb3RhdGUoNDVkZWcpO3JpZ2h0OjUwcHh9Lm5hdmlnYXRpb24uc2hvdyAudG9nZ2xlOmFmdGVye3RyYW5zZm9ybTpyb3RhdGUoLTQ1ZGVnKTtyaWdodDoyMnB4fS5uYXZpZ2F0aW9uIC50aS1jbG9zZXtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtyaWdodDowO2ZvbnQtc2l6ZToxMHB4O3BhZGRpbmc6M3B4O21hcmdpbjoxcHg7Ym9yZGVyLXJhZGl1czoxMHB4O2JhY2tncm91bmQtY29sb3I6IzAwMDtjb2xvcjojYjNhZmFmfS5uYXZpZ2F0aW9uIC50aS1jbG9zZTpob3Zlcntjb2xvcjojZjFmMWYxfX1cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vY3NzLWxvYWRlciEuL34vc2Fzcy1sb2FkZXIhLi9yb290L3N0eWxlL2NvbXBvbmVudHMvbmF2aWdhdGlvbi5zY3NzXG4vLyBtb2R1bGUgaWQgPSAxOThcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xuXG5yZXF1aXJlKFwiLi4vc3R5bGUvY29tcG9uZW50cy9ob21lLnNjc3NcIik7XG5cbnZhciBIb21lID0gUmVhY3QuY3JlYXRlQ2xhc3MoeyAgIFxuICAgIGhhbmRsZUNsaWNrOiBmdW5jdGlvbihlKXtcbiAgICAgICAgdmFyIHJlY2lwZSA9IGUudGFyZ2V0O1xuICAgICAgICBcbiAgICAgICAgd2hpbGUgKHJlY2lwZSAmJiAhcmVjaXBlLmNsYXNzTGlzdC5jb250YWlucyhcInJlY2lwZVwiKSkge1xuICAgICAgICAgICAgcmVjaXBlID0gcmVjaXBlLnBhcmVudE5vZGU7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMucHJvcHMuYUdldFJlY2lwZShyZWNpcGUuZGF0YXNldC5pZCk7XG4gICAgfSwgXG4gICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGhvbWUgPSB0aGlzO1xuICAgICAgICB2YXIgcmVjZW50RmVlZCA9IHRoaXMucHJvcHMuc0hvbWUucmVjZW50RmVlZC5tYXAoZnVuY3Rpb24ocmVjaXBlKSB7XG4gICAgICAgICAgICAvLyBTcGxpdCB0aW1lc3RhbXAgaW50byBbIFksIE0sIEQsIGgsIG0sIHMgXVxuICAgICAgICAgICAgdmFyIHRpbWUgPSByZWNpcGUuZGF0ZU1vZGlmaWVkLnNwbGl0KC9bLSA6XS8pO1xuICAgICAgICAgICAgLy8gQXBwbHkgZWFjaCBlbGVtZW50IHRvIHRoZSBEYXRlIGZ1bmN0aW9uXG4gICAgICAgICAgICB2YXIgY3JlYXRlZCA9IG5ldyBEYXRlKERhdGUuVVRDKHRpbWVbMF0sIHRpbWVbMV0tMSwgdGltZVsyXSwgdGltZVszXSwgdGltZVs0XSwgdGltZVs1XSkpO1xuXG4gICAgICAgICAgICByZXR1cm4gKDxkaXYgY2xhc3NOYW1lPVwicmVjaXBlXCIga2V5PXtyZWNpcGUuaWR9IGRhdGEtaWQ9e3JlY2lwZS5pZH0gb25DbGljaz17aG9tZS5oYW5kbGVDbGlja30+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0aXRsZVwiPntyZWNpcGUudGl0bGV9PC9kaXY+XG4gICAgICAgICAgICAgICAgPGltZyBzcmM9e3JlY2lwZS5waWN0dXJlICsgXCI/XCIgKyByZWNpcGUuZGF0ZU1vZGlmaWVkfS8+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhZGRpdGlvbmFsLWluZm9cIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiYXV0aG9yXCI+e3JlY2lwZS5maXJzdE5hbWUgKyBcIiBcIiArIHJlY2lwZS5sYXN0TmFtZX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImNyZWF0aW9uLWRhdGVcIj4oe2NyZWF0ZWQudG9EYXRlU3RyaW5nKCl9KTwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PilcbiAgICAgICAgfSk7XG5cblxuICAgICAgICByZXR1cm4gKCA8bWFpbiBjbGFzc05hbWU9XCJob21lLWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwic2l0ZS10aXRsZVwiPkRlQW5nZWxpcyBIb21lIFJlY2lwZXM8L2gxPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVjZW50LXdyYXBwZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgPGgyIGNsYXNzTmFtZT1cInJlY2VudC10aXRsZVwiPlJlY2VudGx5IEVudGVyZWQgUmVjaXBlczwvaDI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVjZW50LWZlZWRcIj57cmVjZW50RmVlZH08L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvbWFpbj5cbiAgICAgICAgKTtcbiAgICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgSG9tZTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3Jvb3QvY29tcG9uZW50cy9ob21lLmpzeCIsIi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi9ob21lLnNjc3NcIik7XG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcbi8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIHt9KTtcbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuLy8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuaWYobW9kdWxlLmhvdCkge1xuXHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vaG9tZS5zY3NzXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi9ob21lLnNjc3NcIik7XG5cdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHR9KTtcblx0fVxuXHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3Jvb3Qvc3R5bGUvY29tcG9uZW50cy9ob21lLnNjc3MiLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuaG9tZS1jb250ZW50e3BhZGRpbmc6MjVweH0uaG9tZS1jb250ZW50IC5zaXRlLXRpdGxle2NvbG9yOiMyZTJjMmQ7Zm9udC1zaXplOjIuMjVlbTtwYWRkaW5nLWxlZnQ6MTBweDttYXJnaW46MCAwIDI1cHh9LmhvbWUtY29udGVudCAucmVjZW50LXdyYXBwZXJ7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjthbGlnbi1pdGVtczpjZW50ZXJ9LmhvbWUtY29udGVudCAucmVjZW50LXdyYXBwZXIgLnJlY2VudC10aXRsZXtmb250LXNpemU6MS4yZW07Y29sb3I6IzU4NTY1ODttYXJnaW46MCAwIDVweH0uaG9tZS1jb250ZW50IC5yZWNlbnQtZmVlZHtkaXNwbGF5OmZsZXg7Ym9yZGVyLXRvcDoxcHggc29saWQgIzU4NTY1ODtib3JkZXItYm90dG9tOjFweCBzb2xpZCAjNTg1NjU4fS5ob21lLWNvbnRlbnQgLnJlY2VudC1mZWVkIC5yZWNpcGV7cG9zaXRpb246cmVsYXRpdmU7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjthbGlnbi1pdGVtczpjZW50ZXI7bWFyZ2luOjEwcHg7bWF4LXdpZHRoOjQwMHB4O3RyYW5zaXRpb246dHJhbnNmb3JtIC41cztjdXJzb3I6cG9pbnRlcn0uaG9tZS1jb250ZW50IC5yZWNlbnQtZmVlZCAucmVjaXBlOmhvdmVye3RyYW5zZm9ybTpzY2FsZSgxLjAyNSk7Ym94LXNoYWRvdzo1cHggNXB4IDVweCAjODg4fS5ob21lLWNvbnRlbnQgLnJlY2VudC1mZWVkIC5yZWNpcGUgLmFkZGl0aW9uYWwtaW5mbywuaG9tZS1jb250ZW50IC5yZWNlbnQtZmVlZCAucmVjaXBlIC50aXRsZXtwb3NpdGlvbjphYnNvbHV0ZTtiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMCwwLDAsLjc1KTtsZWZ0OjA7cmlnaHQ6MDt0ZXh0LWFsaWduOmNlbnRlcjtwYWRkaW5nOjVweH0uaG9tZS1jb250ZW50IC5yZWNlbnQtZmVlZCAucmVjaXBlIC5hZGRpdGlvbmFsLWluZm8gLmF1dGhvciwuaG9tZS1jb250ZW50IC5yZWNlbnQtZmVlZCAucmVjaXBlIC50aXRsZSAuYXV0aG9ye3BhZGRpbmctcmlnaHQ6MTBweH0uaG9tZS1jb250ZW50IC5yZWNlbnQtZmVlZCAucmVjaXBlIC50aXRsZXtjb2xvcjojZjFmMWYxO3RvcDowfS5ob21lLWNvbnRlbnQgLnJlY2VudC1mZWVkIC5yZWNpcGUgLmFkZGl0aW9uYWwtaW5mb3tjb2xvcjojYjNhZmFmO2ZvbnQtc2l6ZTouNzVlbTtib3R0b206MH0uaG9tZS1jb250ZW50IC5yZWNlbnQtZmVlZCAucmVjaXBlIGltZ3t3aWR0aDoxMDAlfUBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi1kZXZpY2Utd2lkdGg6MzIwcHgpIGFuZCAobWF4LWRldmljZS13aWR0aDo0ODBweCl7LmhvbWUtY29udGVudCAucmVjZW50LWZlZWR7d2lkdGg6MTAwJTtmbGV4LWRpcmVjdGlvbjpjb2x1bW59LmhvbWUtY29udGVudCAucmVjZW50LWZlZWQgLnJlY2lwZXttYXgtd2lkdGg6MTAwJX0uaG9tZS1jb250ZW50IC5yZWNlbnQtZmVlZCAucmVjaXBlOmhvdmVye3RyYW5zZm9ybTpub25lO2JveC1zaGFkb3c6bm9uZX19XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2Nzcy1sb2FkZXIhLi9+L3Nhc3MtbG9hZGVyIS4vcm9vdC9zdHlsZS9jb21wb25lbnRzL2hvbWUuc2Nzc1xuLy8gbW9kdWxlIGlkID0gMjAxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUmVhY3RET00gZnJvbSAncmVhY3QtZG9tJztcblxucmVxdWlyZShcIi4uL3N0eWxlL2NvbXBvbmVudHMvdXNlclNldHRpbmdzLnNjc3NcIik7XG5cbnZhciBVc2VyU2V0dGluZ3MgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ICAgXG4gICAgX2dldFVzZXJJZDogZnVuY3Rpb24oZSkge1xuICAgICAgICB2YXIgY3VycmVudEVsZW1lbnQgPSBlLnRhcmdldDtcbiAgICAgICAgdmFyIHVzZXJOYW1lO1xuICAgICAgICB3aGlsZSAoY3VycmVudEVsZW1lbnQgIT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcIml0ZW1cIikpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjdXJyZW50RWxlbWVudCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coY3VycmVudEVsZW1lbnQuZGF0YXNldC51c2VyaWQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50RWxlbWVudC5kYXRhc2V0LnVzZXJpZDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJlbnRFbGVtZW50ID0gY3VycmVudEVsZW1lbnQucGFyZW50Tm9kZTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgYWNjZXB0OiBmdW5jdGlvbihlKSB7XG4gICAgICAgIHRoaXMucHJvcHMuYVVwZGF0ZVVzZXJTdGF0dXModGhpcy5fZ2V0VXNlcklkKGUpLCBcInBlbmRpbmdcIik7XG4gICAgfSxcbiAgICBkZWNsaW5lOiBmdW5jdGlvbihlKSB7XG4gICAgICAgIHRoaXMucHJvcHMuYVVwZGF0ZVVzZXJTdGF0dXModGhpcy5fZ2V0VXNlcklkKGUpLCBcImRlbGV0ZWRcIik7XG4gICAgfSxcbiAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgc2V0dGluZyA9IHRoaXM7XG4gICAgICAgIHZhciBhZG1pbjtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuc1VzZXIucm9sZVR5cGUgPT0gXCJhZG1pblwiKSB7XG4gICAgICAgICAgICB2YXIgcmVxdWVzdHMgPSB0aGlzLnByb3BzLnNVc2VyLnJlcXVlc3RzLm1hcChmdW5jdGlvbih1c2VyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICg8bGkga2V5PXt1c2VyLnVzZXJJZH0gY2xhc3NOYW1lPVwiaXRlbVwiIGRhdGEtdXNlcmlkPXt1c2VyLnVzZXJJZH0+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIm5hbWVcIj57dXNlci5maXJzdE5hbWUgKyBcIiBcIiArIHVzZXIubGFzdE5hbWV9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJpbmZvXCI+KHt1c2VyLnVzZXJOYW1lICsgXCIgLSBcIiArIHVzZXIuZW1haWx9KTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiY29udHJvbHNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiYWNjZXB0XCIgb25DbGljaz17c2V0dGluZy5hY2NlcHR9PkFjY2VwdDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJyZWplY3RcIiBvbkNsaWNrPXtzZXR0aW5nLmRlY2xpbmV9PlJlamVjdDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9saT4pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGFkbWluID0gKDxkaXY+XG4gICAgICAgICAgICAgICAgPGgyPkN1cnJlbnQgcmVxdWVzdHM8L2gyPlxuICAgICAgICAgICAgICAgIDx1bCBjbGFzc05hbWU9XCJyZXF1ZXN0LWxpc3RcIj5cbiAgICAgICAgICAgICAgICAgICAge3JlcXVlc3RzfSAgIFxuICAgICAgICAgICAgICAgIDwvdWw+IFxuICAgICAgICAgICAgPC9kaXY+KTtcbiAgICAgICAgfSBcblxuICAgICAgICByZXR1cm4gKCA8bWFpbiBjbGFzc05hbWU9XCJzZXR0aW5ncy1jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImNvbnRlbnQtdGl0bGVcIj5Vc2VyIFNldHRpbmdzPC9oMT5cbiAgICAgICAgICAgICAgICB7YWRtaW59XG4gICAgICAgICAgICA8L21haW4+XG4gICAgICAgICk7XG4gICAgfVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IFVzZXJTZXR0aW5ncztcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3Jvb3QvY29tcG9uZW50cy91c2VyU2V0dGluZ3MuanN4IiwiLy8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblxuLy8gbG9hZCB0aGUgc3R5bGVzXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuL3VzZXJTZXR0aW5ncy5zY3NzXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCB7fSk7XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcblx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuL3VzZXJTZXR0aW5ncy5zY3NzXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi91c2VyU2V0dGluZ3Muc2Nzc1wiKTtcblx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdH0pO1xuXHR9XG5cdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vcm9vdC9zdHlsZS9jb21wb25lbnRzL3VzZXJTZXR0aW5ncy5zY3NzIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKSgpO1xuLy8gaW1wb3J0c1xuXG5cbi8vIG1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLnNldHRpbmdzLWNvbnRlbnR7cGFkZGluZzoyNXB4fS5zZXR0aW5ncy1jb250ZW50IC5jb250ZW50LXRpdGxle2NvbG9yOiMyZTJjMmQ7Zm9udC1zaXplOjMwcHg7cGFkZGluZy1sZWZ0OjEwcHg7bWFyZ2luOjAgMCAyNXB4fS5zZXR0aW5ncy1jb250ZW50IC5yZXF1ZXN0LWxpc3R7bGlzdC1zdHlsZTpub25lO2NvbG9yOiMyZTJjMmQ7cGFkZGluZy1sZWZ0OjEwcHh9LnNldHRpbmdzLWNvbnRlbnQgLnJlcXVlc3QtbGlzdCAuaXRlbXtwYWRkaW5nOjVweCAxMHB4O2JvcmRlci1ib3R0b206MXB4IHNvbGlkICMyZTJjMmQ7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOnJvdzthbGlnbi1zZWxmOmNlbnRlcn0uc2V0dGluZ3MtY29udGVudCAucmVxdWVzdC1saXN0IC5pdGVtPip7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcn0uc2V0dGluZ3MtY29udGVudCAucmVxdWVzdC1saXN0IC5pdGVtOmxhc3QtY2hpbGR7Ym9yZGVyLWJvdHRvbTpub25lfS5zZXR0aW5ncy1jb250ZW50IC5yZXF1ZXN0LWxpc3QgLml0ZW0gLmluZm97Y29sb3I6IzU4NTY1ODtwYWRkaW5nLWxlZnQ6MjBweDtmb250LXNpemU6LjhlbX0uc2V0dGluZ3MtY29udGVudCAucmVxdWVzdC1saXN0IC5pdGVtIC5jb250cm9sc3tmbGV4OjE7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpmbGV4LWVuZH0uc2V0dGluZ3MtY29udGVudCAucmVxdWVzdC1saXN0IC5pdGVtIC5jb250cm9scyBidXR0b257YmFja2dyb3VuZC1jb2xvcjojM2EzNTNjO2JvcmRlcjpub25lO2NvbG9yOiNmMWYxZjE7cGFkZGluZzo1cHggMTVweDttYXJnaW4tbGVmdDoxNXB4O2N1cnNvcjpwb2ludGVyfS5zZXR0aW5ncy1jb250ZW50IC5yZXF1ZXN0LWxpc3QgLml0ZW0gLmNvbnRyb2xzIGJ1dHRvbjpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiMyZTJjMmR9XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2Nzcy1sb2FkZXIhLi9+L3Nhc3MtbG9hZGVyIS4vcm9vdC9zdHlsZS9jb21wb25lbnRzL3VzZXJTZXR0aW5ncy5zY3NzXG4vLyBtb2R1bGUgaWQgPSAyMDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xuXG5yZXF1aXJlKFwiLi4vc3R5bGUvY29tcG9uZW50cy9hdXRoZW50aWNhdGlvbi5zY3NzXCIpO1xuXG52YXIgQXV0aGVudGljYXRpb24gPSBSZWFjdC5jcmVhdGVDbGFzcyh7IFxuICAgIGFwcEF1dGhlbnRpY2F0ZUZvcm06IG51bGwsXG4gICAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpcnN0TmFtZSA6IFwiXCIsIFxuICAgICAgICAgICAgbGFzdE5hbWUgOiBcIlwiLFxuICAgICAgICAgICAgdXNlcm5hbWUgOiBcIlwiLFxuICAgICAgICAgICAgZW1haWwgOiBcIlwiLFxuICAgICAgICAgICAgZW1haWxDb25maXJtIDogXCJcIixcbiAgICAgICAgICAgIG9sZFBhc3N3b3JkIDogXCJcIixcbiAgICAgICAgICAgIG5ld1Bhc3N3b3JkIDogXCJcIixcbiAgICAgICAgICAgIGNvbmZpcm1QYXNzd29yZCA6IFwiXCJcbiAgICAgICAgfVxuICAgIH0sXG4gICAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmFwcEF1dGhlbnRpY2F0ZUZvcm0gPSBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKS5xdWVyeVNlbGVjdG9yKFwiLmFwcC1hdXRoZW50aWNhdGUtZm9ybVwiKTtcbiAgICAgICAgdGhpcy5oYW5kbGVMb2FkKCk7XG4gICAgfSxcbiAgICBjb21wb25lbnREaWRVcGRhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmhhbmRsZUxvYWQoKTtcbiAgICB9LFxuICAgIGhhbmRsZUxvYWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5zQXV0aGVudGljYXRlLmFjdGl2ZSkge1xuICAgICAgICAgICAgdGhpcy5hcHBBdXRoZW50aWNhdGVGb3JtLnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKS5mb2N1cygpO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLmhhbmRsZUtleVVwLCB0cnVlKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLnNBdXRoZW50aWNhdGUudHlwZSA9PSBcInJlc2V0XCIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcEF1dGhlbnRpY2F0ZUZvcm0ucXVlcnlTZWxlY3RvcihcIi51c2VybmFtZVwiKS52YWx1ZSA9IHRoaXMucHJvcHMuc0F1dGhlbnRpY2F0ZS51c2VyO1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwQXV0aGVudGljYXRlRm9ybS5xdWVyeVNlbGVjdG9yKFwiLm9sZC1wYXNzd29yZFwiKS52YWx1ZSA9IHRoaXMucHJvcHMuc0F1dGhlbnRpY2F0ZS5rZXk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuaGFuZGxlS2V5VXAsIHRydWUpOyAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgfSxcbiAgICB2YWxpZGF0ZUVtYWlsOiBmdW5jdGlvbihlbWFpbCkge1xuICAgICAgICB2YXIgcmUgPSAvXigoW148PigpXFxbXFxdXFxcXC4sOzpcXHNAXCJdKyhcXC5bXjw+KClcXFtcXF1cXFxcLiw7Olxcc0BcIl0rKSopfChcIi4rXCIpKUAoKFxcW1swLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXF0pfCgoW2EtekEtWlxcLTAtOV0rXFwuKStbYS16QS1aXXsyLH0pKSQvO1xuICAgICAgICByZXR1cm4gcmUudGVzdChlbWFpbCk7XG4gICAgfSxcbiAgICB2YWxpZGF0ZTogZnVuY3Rpb24oZmlyc3ROYW1lLCBsYXN0TmFtZSwgdXNlcm5hbWUsIGVtYWlsLCBlbWFpbENvbmZpcm0sIG9sZFBhc3N3b3JkLCBuZXdQYXNzd29yZCwgY29uZmlybVBhc3N3b3JkKSB7XG4gICAgICAgIHZhciBlcnJvcnMgPSBbXTtcbiAgICAgICAgdmFyIG5ld1N0YXRlID0gIHtcbiAgICAgICAgICAgIGZpcnN0TmFtZSA6IFwiXCIsIFxuICAgICAgICAgICAgbGFzdE5hbWUgOiBcIlwiLFxuICAgICAgICAgICAgdXNlcm5hbWUgOiBcIlwiLFxuICAgICAgICAgICAgZW1haWwgOiBcIlwiLFxuICAgICAgICAgICAgZW1haWxDb25maXJtIDogXCJcIixcbiAgICAgICAgICAgIG9sZFBhc3N3b3JkIDogXCJcIixcbiAgICAgICAgICAgIG5ld1Bhc3N3b3JkIDogXCJcIixcbiAgICAgICAgICAgIGNvbmZpcm1QYXNzd29yZCA6IFwiXCJcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoZmlyc3ROYW1lICE9IG51bGwgJiYgZmlyc3ROYW1lID09IFwiXCIpIHtcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKFwiRmlyc3QgbmFtZSBpcyByZXF1aXJlZFwiKTtcbiAgICAgICAgICAgIG5ld1N0YXRlLmZpcnN0TmFtZSA9IFwiZXJyb3IgXCI7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobGFzdE5hbWUgIT0gbnVsbCAmJiBsYXN0TmFtZSA9PSBcIlwiKSB7XG4gICAgICAgICAgICBlcnJvcnMucHVzaChcIkxhc3QgbmFtZSBpcyByZXF1aXJlZFwiKTtcbiAgICAgICAgICAgIG5ld1N0YXRlLmxhc3ROYW1lID0gXCJlcnJvciBcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh1c2VybmFtZSAhPSBudWxsICYmIHVzZXJuYW1lID09IFwiXCIpIHtcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKFwiVXNlcm5hbWUgaXMgcmVxdWlyZWRcIik7XG4gICAgICAgICAgICBuZXdTdGF0ZS51c2VybmFtZSA9IFwiZXJyb3IgXCI7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZW1haWwgIT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKGVtYWlsID09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICBlcnJvcnMucHVzaChcIkVtYWlsIGlzIHJlcXVpcmVkXCIpO1xuICAgICAgICAgICAgICAgIG5ld1N0YXRlLmVtYWlsID0gXCJlcnJvciBcIjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIXRoaXMudmFsaWRhdGVFbWFpbChlbWFpbCkpIHtcbiAgICAgICAgICAgICAgICBlcnJvcnMucHVzaChcIlBsZWFzZSBlbnRlciB2YWxpZCBlbWFpbFwiKTtcbiAgICAgICAgICAgICAgICBuZXdTdGF0ZS5lbWFpbCA9IFwiZXJyb3IgXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZW1haWxDb25maXJtICE9IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChlbWFpbENvbmZpcm0gPT0gXCJcIikge1xuICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKFwiRW1haWwgY29uZmlybWF0aW9uIGlzIHJlcXVpcmVkXCIpO1xuICAgICAgICAgICAgICAgIG5ld1N0YXRlLmVtYWlsQ29uZmlybSA9IFwiZXJyb3IgXCI7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLnZhbGlkYXRlRW1haWwoZW1haWxDb25maXJtKSkge1xuICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKFwiUGxlYXNlIGVudGVyIHZhbGlkIGNvbmZpcm1hdGlvbiBlbWFpbFwiKTtcbiAgICAgICAgICAgICAgICBuZXdTdGF0ZS5lbWFpbENvbmZpcm0gPSBcImVycm9yIFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVtYWlsICE9IG51bGwgJiYgZW1haWwgIT0gXCJcIiAmJiBlbWFpbENvbmZpcm0gIT0gbnVsbCAmJiBlbWFpbENvbmZpcm0gIT0gXCJcIiAmJiBlbWFpbCAhPSBlbWFpbENvbmZpcm0pIHtcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKFwiRW1haWwgYWRkcmVzc2VzIGRvIG5vdCBtYXRjaFwiKTtcbiAgICAgICAgICAgIG5ld1N0YXRlLmVtYWlsID0gXCJlcnJvciBcIjtcbiAgICAgICAgICAgIG5ld1N0YXRlLmVtYWlsQ29uZmlybSA9IFwiZXJyb3IgXCI7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob2xkUGFzc3dvcmQgIT0gbnVsbCAmJiBvbGRQYXNzd29yZCA9PSBcIlwiKSB7XG4gICAgICAgICAgICBlcnJvcnMucHVzaChcIlBhc3N3b3JkIGlzIHJlcXVpcmVkXCIpO1xuICAgICAgICAgICAgbmV3U3RhdGUub2xkUGFzc3dvcmQgPSBcImVycm9yIFwiO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5ld1Bhc3N3b3JkICE9IG51bGwgJiYgbmV3UGFzc3dvcmQgPT0gXCJcIikge1xuICAgICAgICAgICAgZXJyb3JzLnB1c2goXCJOZXcgcGFzc3dvcmQgaXMgcmVxdWlyZWRcIik7XG4gICAgICAgICAgICBuZXdTdGF0ZS5uZXdQYXNzd29yZCA9IFwiZXJyb3IgXCI7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob2xkUGFzc3dvcmQgIT0gbnVsbCAmJiBvbGRQYXNzd29yZCAhPSBcIlwiICYmIG5ld1Bhc3N3b3JkICE9IG51bGwgJiYgbmV3UGFzc3dvcmQgIT0gXCJcIiAmJiBvbGRQYXNzd29yZCA9PSBuZXdQYXNzd29yZCkge1xuICAgICAgICAgICAgZXJyb3JzLnB1c2goXCJQbGVhc2UgcGljayBhIG5ldyBwYXNzd29yZFwiKTtcbiAgICAgICAgICAgIG5ld1N0YXRlLm9sZFBhc3N3b3JkID0gXCJlcnJvciBcIjtcbiAgICAgICAgICAgIG5ld1N0YXRlLm5ld1Bhc3N3b3JkID0gXCJlcnJvciBcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUobmV3U3RhdGUpO1xuICAgICAgICBpZiAoZXJyb3JzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSAwO1xuICAgICAgICAgICAgdmFyIG1lc3NhZ2VJbm5lciA9IGVycm9ycy5tYXAoZnVuY3Rpb24obXNnKSB7XG4gICAgICAgICAgICAgICAga2V5ICs9IDE7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDxsaSBrZXk9e2tleX0+e21zZ308L2xpPlxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSA8ZGl2IGNsYXNzTmFtZT1cInZhbGlkYXRpb25cIj5cbiAgICAgICAgICAgICAgICA8aDM+UGxlYXNlIGNvcnJlY3QgZmxhZ2dlZCBmaWVsZHM8L2gzPlxuICAgICAgICAgICAgICAgIDx1bD57bWVzc2FnZUlubmVyfTwvdWw+XG4gICAgICAgICAgICA8L2Rpdj47XG5cbiAgICAgICAgICAgIHRoaXMucHJvcHMuYU5vdGlmeSh0cnVlLCBcImVycm9yXCIsIG1lc3NhZ2UsIG51bGwpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgIH0sXG4gICAgaGFuZGxlSGlkZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBmaWVsZHMgPSBbXCIuZmlyc3QtbmFtZVwiLCBcIi5sYXN0LW5hbWVcIiwgXCIudXNlcm5hbWVcIiwgXCIuZW1haWxcIiwgXCIuZW1haWwtY29uZmlybVwiLCBcIi5wYXNzd29yZFwiLCBcIi5vbGQtcGFzc3dvcmRcIiwgXCIubmV3LXBhc3N3b3JkXCIsIFwiLmNvbmZpcm0tcGFzc3dvcmRcIl07XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmaWVsZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuYXBwQXV0aGVudGljYXRlRm9ybS5xdWVyeVNlbGVjdG9yKGZpZWxkc1tpXSk7XG4gICAgICAgICAgICBpZiAoZmllbGQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGZpZWxkLnZhbHVlID0gXCJcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgZmlyc3ROYW1lIDogXCJcIiwgXG4gICAgICAgICAgICBsYXN0TmFtZSA6IFwiXCIsXG4gICAgICAgICAgICB1c2VybmFtZSA6IFwiXCIsXG4gICAgICAgICAgICBlbWFpbCA6IFwiXCIsXG4gICAgICAgICAgICBlbWFpbENvbmZpcm0gOiBcIlwiLFxuICAgICAgICAgICAgb2xkUGFzc3dvcmQgOiBcIlwiLFxuICAgICAgICAgICAgbmV3UGFzc3dvcmQgOiBcIlwiLFxuICAgICAgICAgICAgY29uZmlybVBhc3N3b3JkIDogXCJcIlxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMucHJvcHMuYUF1dGhlbnRpY2F0ZShmYWxzZSk7XG4gICAgfSxcbiAgICBoYW5kbGVTaG93UmVnaXN0ZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLnByb3BzLmFBdXRoZW50aWNhdGUodHJ1ZSwgXCJyZWdpc3RlclwiKTtcbiAgICB9LFxuICAgIGhhbmRsZVNob3dMb2dpbjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMucHJvcHMuYUF1dGhlbnRpY2F0ZSh0cnVlLCBcImxvZ2luXCIpO1xuICAgIH0sXG4gICAgaGFuZGxlTG9naW46IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgYXV0aCA9IHRoaXM7XG4gICAgICAgIHZhciB1c2VybmFtZSA9IHRoaXMuYXBwQXV0aGVudGljYXRlRm9ybS5xdWVyeVNlbGVjdG9yKFwiLnVzZXJuYW1lXCIpLnZhbHVlO1xuICAgICAgICB2YXIgcGFzc3dvcmQgPSB0aGlzLmFwcEF1dGhlbnRpY2F0ZUZvcm0ucXVlcnlTZWxlY3RvcihcIi5wYXNzd29yZFwiKS52YWx1ZTtcblxuICAgICAgICB2YXIgY2FsbGJhY2sgPSBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PSBcImZhaWxcIikge1xuICAgICAgICAgICAgICAgIGF1dGguc2V0U3RhdGUoe3VzZXJuYW1lIDogXCJlcnJvciBcIiwgb2xkUGFzc3dvcmQ6IFwiZXJyb3IgXCIgfSk7XG4gICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSA8ZGl2IGNsYXNzTmFtZT1cInZhbGlkYXRpb25cIj5cbiAgICAgICAgICAgICAgICAgICAgPGgzPkFuIGVycm9yIG9jY3VyZWQgZHVycmluZyBsb2dpbjwvaDM+XG4gICAgICAgICAgICAgICAgICAgIDxwPntyZXNwb25zZS5tZXNzYWdlfTwvcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj47XG5cbiAgICAgICAgICAgICAgICBhdXRoLnByb3BzLmFOb3RpZnkodHJ1ZSwgXCJlcnJvclwiLCBtZXNzYWdlLCBudWxsKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYXV0aC5oYW5kbGVIaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaXNWYWxpZCA9IHRoaXMudmFsaWRhdGUobnVsbCwgbnVsbCwgdXNlcm5hbWUsIG51bGwsIG51bGwsIHBhc3N3b3JkLCBudWxsLCBudWxsKTtcbiAgICAgICAgaWYgKGlzVmFsaWQpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMuYUxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZCwgY2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBoYW5kbGVSZXNldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB1c2VybmFtZSA9IHRoaXMuYXBwQXV0aGVudGljYXRlRm9ybS5xdWVyeVNlbGVjdG9yKFwiLnVzZXJuYW1lXCIpLnZhbHVlO1xuICAgICAgICB2YXIgb2xkUGFzc3dvcmQgPSB0aGlzLmFwcEF1dGhlbnRpY2F0ZUZvcm0ucXVlcnlTZWxlY3RvcihcIi5vbGQtcGFzc3dvcmRcIikudmFsdWU7XG4gICAgICAgIHZhciBuZXdQYXNzd29yZCA9IHRoaXMuYXBwQXV0aGVudGljYXRlRm9ybS5xdWVyeVNlbGVjdG9yKFwiLm5ldy1wYXNzd29yZFwiKS52YWx1ZTtcbiAgICAgICAgdmFyIGNvbmZpcm1QYXNzd29yZCA9IHRoaXMuYXBwQXV0aGVudGljYXRlRm9ybS5xdWVyeVNlbGVjdG9yKFwiLmNvbmZpcm0tcGFzc3dvcmRcIikudmFsdWU7XG5cbiAgICAgICAgdmFyIGlzVmFsaWQgPSB0aGlzLnZhbGlkYXRlKG51bGwsIG51bGwsIHVzZXJuYW1lLCBudWxsLCBudWxsLCBvbGRQYXNzd29yZCwgbmV3UGFzc3dvcmQsIGNvbmZpcm1QYXNzd29yZCkgXG4gICAgICAgIGlmIChpc1ZhbGlkKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLmFVcGRhdGVQYXNzd29yZCh0aGlzLnByb3BzLnNBdXRoZW50aWNhdGUudXNlcklkLCBvbGRQYXNzd29yZCwgbmV3UGFzc3dvcmQpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBoYW5kbGVSZWdpc3RlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBhdXRoID0gdGhpcztcbiAgICAgICAgdmFyIGZpcnN0TmFtZSA9IHRoaXMuYXBwQXV0aGVudGljYXRlRm9ybS5xdWVyeVNlbGVjdG9yKFwiLmZpcnN0LW5hbWVcIikudmFsdWU7XG4gICAgICAgIHZhciBsYXN0TmFtZSA9IHRoaXMuYXBwQXV0aGVudGljYXRlRm9ybS5xdWVyeVNlbGVjdG9yKFwiLmxhc3QtbmFtZVwiKS52YWx1ZTtcbiAgICAgICAgdmFyIHVzZXJuYW1lID0gdGhpcy5hcHBBdXRoZW50aWNhdGVGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIudXNlcm5hbWVcIikudmFsdWU7XG4gICAgICAgIHZhciBlbWFpbCA9IHRoaXMuYXBwQXV0aGVudGljYXRlRm9ybS5xdWVyeVNlbGVjdG9yKFwiLmVtYWlsXCIpLnZhbHVlO1xuICAgICAgICB2YXIgZW1haWxDb25maXJtID0gdGhpcy5hcHBBdXRoZW50aWNhdGVGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIuZW1haWwtY29uZmlybVwiKS52YWx1ZTtcblxuICAgICAgICB2YXIgY2FsbGJhY2sgPSBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PSBcImZhaWxcIikge1xuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5maWVsZCA9PSBcInVzZXJuYW1lXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgYXV0aC5zZXRTdGF0ZSh7dXNlcm5hbWUgOiBcImVycm9yIFwiIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZmllbGQgPT0gXCJlbWFpbFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGF1dGguc2V0U3RhdGUoe2VtYWlsIDogXCJlcnJvciBcIiB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSA8ZGl2IGNsYXNzTmFtZT1cInZhbGlkYXRpb25cIj5cbiAgICAgICAgICAgICAgICAgICAgPGgzPkFuIGVycm9yIG9jY3VyZWQgZHVycmluZyByZWdpc3RyYXRpb248L2gzPlxuICAgICAgICAgICAgICAgICAgICA8cD57cmVzcG9uc2UubWVzc2FnZX08L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+O1xuXG4gICAgICAgICAgICAgICAgYXV0aC5wcm9wcy5hTm90aWZ5KHRydWUsIFwiZXJyb3JcIiwgbWVzc2FnZSwgbnVsbCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGF1dGguaGFuZGxlSGlkZSgpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gPGRpdiBjbGFzc05hbWU9XCJ2YWxpZGF0aW9uXCI+XG4gICAgICAgICAgICAgICAgICAgIDxoMz5UaGFuayB5b3UgZm9yIHJlZ2lzdGVyaW5nPC9oMz5cbiAgICAgICAgICAgICAgICAgICAgPHA+QW4gYWRtaW5pc3RyYXRvciB3aWxsIHJldmlldyB5b3UgcmVnaXN0cmF0aW9uIGFzIHNvb24gYXMgcG9zc2libGUuIFxuICAgICAgICAgICAgICAgICAgICAgICAgT25jZSByZXZpZXdlZCB5b3Ugd2lsbCByZWNlaXZlIGFuIGVtYWlsIHdpdGggYSBsaW5rIHRvIGNvbXBsZXRlIHJlZ2lzdHJhdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgPGJyLz48YnIvPlxuICAgICAgICAgICAgICAgICAgICBUaGFuayB5b3UgZm9yIHlvdXIgcGF0aWVuY2UhPC9wPlxuICAgICAgICAgICAgICAgIDwvZGl2PjtcbiAgICBcbiAgICAgICAgICAgICAgICBhdXRoLnByb3BzLmFOb3RpZnkodHJ1ZSwgXCJtZXNzYWdlXCIsIG1lc3NhZ2UsIG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGlzVmFsaWQgPSB0aGlzLnZhbGlkYXRlKGZpcnN0TmFtZSwgbGFzdE5hbWUsIHVzZXJuYW1lLCBlbWFpbCwgZW1haWxDb25maXJtLCBudWxsLCBudWxsLCBudWxsKSBcbiAgICAgICAgaWYgKGlzVmFsaWQpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMuYVJlZ2lzdGVyKGZpcnN0TmFtZSwgbGFzdE5hbWUsIHVzZXJuYW1lLCBlbWFpbCwgY2FsbGJhY2spOyAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgfSxcbiAgICBoYW5kbGVLZXlVcDogZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAoZS5rZXlDb2RlID09IDEzKSB7XG4gICAgICAgICAgICBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKS5xdWVyeVNlbGVjdG9yKFwiLnN1Ym1pdC1idXR0b25cIikuY2xpY2soKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuc0F1dGhlbnRpY2F0ZS50eXBlID09IFwicmVnaXN0ZXJcIikge1xuICAgICAgICAgICAgcmV0dXJuICg8ZGl2IGNsYXNzTmFtZT1cImFwcC1hdXRoZW50aWNhdGUtaW5uZXJcIj5cbiAgICAgICAgICAgICAgICA8aGVhZGVyPlxuICAgICAgICAgICAgICAgICAgICA8bGFiZWw+UmVnaXN0ZXI8L2xhYmVsPjxhIGNsYXNzTmFtZT1cInRpLWNsb3NlXCIgb25DbGljaz17dGhpcy5oYW5kbGVIaWRlfS8+XG4gICAgICAgICAgICAgICAgPC9oZWFkZXI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhcHAtYXV0aGVudGljYXRlLWZvcm1cIj5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHBsYWNlaG9sZGVyPVwiRmlyc3QgbmFtZVwiIGNsYXNzTmFtZT17dGhpcy5zdGF0ZS5maXJzdE5hbWUgKyBcImZpcnN0LW5hbWVcIn0gdHlwZT1cInRleHRcIi8+XG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCBwbGFjZWhvbGRlcj1cIkxhc3QgbmFtZVwiIGNsYXNzTmFtZT17dGhpcy5zdGF0ZS5sYXN0TmFtZSArIFwibGFzdC1uYW1lXCJ9IHR5cGU9XCJ0ZXh0XCIvPlxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgcGxhY2Vob2xkZXI9XCJVc2VybmFtZVwiIGNsYXNzTmFtZT17dGhpcy5zdGF0ZS51c2VybmFtZSArIFwidXNlcm5hbWVcIn0gdHlwZT1cInRleHRcIi8+XG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCBwbGFjZWhvbGRlcj1cIkVtYWlsXCIgY2xhc3NOYW1lPXt0aGlzLnN0YXRlLmVtYWlsICsgXCJlbWFpbFwifSB0eXBlPVwiZW1haWxcIi8+XG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCBwbGFjZWhvbGRlcj1cIkNvbmZpcm0gZW1haWxcIiBjbGFzc05hbWU9e3RoaXMuc3RhdGUuZW1haWxDb25maXJtICsgXCIgZW1haWwtY29uZmlybVwifSB0eXBlPVwiZW1haWxcIi8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGZvb3Rlcj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJzdWJtaXQtYnV0dG9uXCIgb25DbGljaz17dGhpcy5oYW5kbGVSZWdpc3Rlcn0+UmVnaXN0ZXI8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb290ZXItbm90ZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPkFscmVhZHkgaGF2ZSBhbiBhY2NvdW50PyA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgb25DbGljaz17dGhpcy5oYW5kbGVTaG93TG9naW59PkxvZ2luPC9hPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Zvb3Rlcj5cbiAgICAgICAgICAgIDwvZGl2Pik7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5zQXV0aGVudGljYXRlLnR5cGUgPT0gXCJyZXNldFwiKSB7XG4gICAgICAgICAgICB2YXIgZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLnNBdXRoZW50aWNhdGUua2V5ICE9IFwiXCIpIHtcbiAgICAgICAgICAgICAgICBkaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gKDxkaXYgY2xhc3NOYW1lPVwiYXBwLWF1dGhlbnRpY2F0ZS1pbm5lclwiPlxuICAgICAgICAgICAgICAgIDxoZWFkZXI+XG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbD5SZXNldCBwYXNzd29yZDwvbGFiZWw+PGEgY2xhc3NOYW1lPVwidGktY2xvc2VcIiBvbkNsaWNrPXt0aGlzLmhhbmRsZUhpZGV9Lz5cbiAgICAgICAgICAgICAgICA8L2hlYWRlcj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFwcC1hdXRoZW50aWNhdGUtZm9ybVwiPlxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgcGxhY2Vob2xkZXI9XCJVc2VybmFtZVwiIGNsYXNzTmFtZT17dGhpcy5zdGF0ZS51c2VybmFtZSArIFwidXNlcm5hbWVcIn0gdHlwZT1cInRleHRcIiBkaXNhYmxlZD17ZGlzYWJsZWR9Lz5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHBsYWNlaG9sZGVyPVwiQ3VycmVudCBwYXNzd29yZFwiIGNsYXNzTmFtZT17dGhpcy5zdGF0ZS5vbGRQYXNzd29yZCArIFwib2xkLXBhc3N3b3JkXCJ9IHR5cGU9XCJwYXNzd29yZFwiIGRpc2FibGVkPXtkaXNhYmxlZH0vPlxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgcGxhY2Vob2xkZXI9XCJOZXcgcGFzc3dvcmRcIiBjbGFzc05hbWU9e3RoaXMuc3RhdGUubmV3UGFzc3dvcmQgKyBcIm5ldy1wYXNzd29yZFwifSB0eXBlPVwicGFzc3dvcmRcIi8+XG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCBwbGFjZWhvbGRlcj1cIkNvbmZpcm0gcGFzc3dvcmRcIiBjbGFzc05hbWU9e3RoaXMuc3RhdGUuY29uZmlybVBhc3N3b3JkICsgXCJjb25maXJtLXBhc3N3b3JkXCJ9IHR5cGU9XCJwYXNzd29yZFwiLz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8Zm9vdGVyPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cInN1Ym1pdC1idXR0b25cIiBvbkNsaWNrPXt0aGlzLmhhbmRsZVJlc2V0fT5SZXNldDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvb3Rlci1ub3RlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+QWxyZWFkeSBoYXZlIGFuIGFjY291bnQ/IDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBvbkNsaWNrPXt0aGlzLmhhbmRsZVNob3dMb2dpbn0+TG9naW48L2E+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZm9vdGVyPlxuICAgICAgICAgICAgPC9kaXY+KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAoPGRpdiBjbGFzc05hbWU9XCJhcHAtYXV0aGVudGljYXRlLWlubmVyXCI+XG4gICAgICAgICAgICAgICAgPGhlYWRlcj5cbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsPkxvZ2luPC9sYWJlbD48YSBjbGFzc05hbWU9XCJ0aS1jbG9zZVwiIG9uQ2xpY2s9e3RoaXMuaGFuZGxlSGlkZX0vPlxuICAgICAgICAgICAgICAgIDwvaGVhZGVyPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYXBwLWF1dGhlbnRpY2F0ZS1mb3JtXCI+XG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCBwbGFjZWhvbGRlcj1cIlVzZXJuYW1lXCIgY2xhc3NOYW1lPXt0aGlzLnN0YXRlLnVzZXJuYW1lICsgXCJ1c2VybmFtZVwifSB0eXBlPVwidGV4dFwiLz5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHBsYWNlaG9sZGVyPVwiUGFzc3dvcmRcIiBjbGFzc05hbWU9e3RoaXMuc3RhdGUub2xkUGFzc3dvcmQgKyBcInBhc3N3b3JkXCJ9IHR5cGU9XCJwYXNzd29yZFwiLz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8Zm9vdGVyPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cInN1Ym1pdC1idXR0b25cIiBvbkNsaWNrPXt0aGlzLmhhbmRsZUxvZ2lufT5Mb2dpbjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvb3Rlci1ub3RlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+RG9uJ3QgaGF2ZSBhbiBhY2NvdW50PyA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgb25DbGljaz17dGhpcy5oYW5kbGVTaG93UmVnaXN0ZXJ9PlJlZ2lzdGVyPC9hPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Zvb3Rlcj5cbiAgICAgICAgICAgIDwvZGl2Pik7XG4gICAgICAgIH1cbiAgICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgQXV0aGVudGljYXRpb247XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vcm9vdC9jb21wb25lbnRzL2F1dGhlbnRpY2F0aW9uLmpzeCIsIi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi9hdXRoZW50aWNhdGlvbi5zY3NzXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCB7fSk7XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcblx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuL2F1dGhlbnRpY2F0aW9uLnNjc3NcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuL2F1dGhlbnRpY2F0aW9uLnNjc3NcIik7XG5cdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHR9KTtcblx0fVxuXHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3Jvb3Qvc3R5bGUvY29tcG9uZW50cy9hdXRoZW50aWNhdGlvbi5zY3NzIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKSgpO1xuLy8gaW1wb3J0c1xuXG5cbi8vIG1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmFwcC1hdXRoZW50aWNhdGUtaW5uZXJ7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjthbGlnbi1pdGVtczpjZW50ZXI7dHJhbnNpdGlvbjpoZWlnaHQgLjVzO3dpZHRoOjMwMHB4O2JhY2tncm91bmQtY29sb3I6I2ZmZjtib3gtc2hhZG93OjVweCA1cHggNXB4ICMyZTJjMmR9LmFwcC1hdXRoZW50aWNhdGUtaW5uZXIgLmFwcC1hdXRoZW50aWNhdGUtZm9ybXthbGlnbi1jb250ZW50OnN0cmV0Y2g7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtwYWRkaW5nOjI1cHggMDt3aWR0aDoxMDAlfS5hcHAtYXV0aGVudGljYXRlLWlubmVyIC5hcHAtYXV0aGVudGljYXRlLWZvcm0gaW5wdXR7bWFyZ2luOjVweCAxMHB4fS5hcHAtYXV0aGVudGljYXRlLWlubmVyIGZvb3RlciwuYXBwLWF1dGhlbnRpY2F0ZS1pbm5lciBoZWFkZXJ7ZGlzcGxheTpmbGV4O3dpZHRoOjEwMCU7YmFja2dyb3VuZC1jb2xvcjojZWJlYmVkfS5hcHAtYXV0aGVudGljYXRlLWlubmVyIGhlYWRlcntqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjtwYWRkaW5nOjEwcHggMDtib3JkZXItYm90dG9tOjFweCBzb2xpZCAjMmUyYzJkO2NvbG9yOiMyZTJjMmR9LmFwcC1hdXRoZW50aWNhdGUtaW5uZXIgaGVhZGVyIGxhYmVse3BhZGRpbmctbGVmdDoxMHB4fS5hcHAtYXV0aGVudGljYXRlLWlubmVyIGhlYWRlciAudGktY2xvc2V7cGFkZGluZy1yaWdodDoxMHB4O29wYWNpdHk6Ljc1fS5hcHAtYXV0aGVudGljYXRlLWlubmVyIGhlYWRlciAudGktY2xvc2U6aG92ZXJ7b3BhY2l0eToxfS5hcHAtYXV0aGVudGljYXRlLWlubmVyIGZvb3RlcnthbGlnbi1pdGVtczpjZW50ZXI7ZmxleC1kaXJlY3Rpb246Y29sdW1uO3BhZGRpbmc6MTBweCAwO2JvcmRlci10b3A6MXB4IHNvbGlkICMyZTJjMmR9LmFwcC1hdXRoZW50aWNhdGUtaW5uZXIgZm9vdGVyIC5mb290ZXItbm90ZXtjb2xvcjojNTg1NjU4O2ZvbnQtc2l6ZTouNzVlbTtwYWRkaW5nLXRvcDo1cHh9LmFwcC1hdXRoZW50aWNhdGUtaW5uZXIgZm9vdGVyIC5mb290ZXItbm90ZSBhe2NvbG9yOiM1ODU2NTg7Y3Vyc29yOnBvaW50ZXJ9LmFwcC1hdXRoZW50aWNhdGUtaW5uZXIgZm9vdGVyIC5mb290ZXItbm90ZSBhOmhvdmVye2NvbG9yOiMyZTJjMmQ7dGV4dC1kZWNvcmF0aW9uOnVuZGVybGluZX0uYXBwLWF1dGhlbnRpY2F0ZS1pbm5lciBmb290ZXIgYnV0dG9ue2JhY2tncm91bmQtY29sb3I6IzNhMzUzYztib3JkZXI6bm9uZTtjb2xvcjojZjFmMWYxO3BhZGRpbmc6NXB4IDE1cHg7Y3Vyc29yOnBvaW50ZXJ9LmFwcC1hdXRoZW50aWNhdGUtaW5uZXIgZm9vdGVyIGJ1dHRvbjpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiMyZTJjMmR9XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2Nzcy1sb2FkZXIhLi9+L3Nhc3MtbG9hZGVyIS4vcm9vdC9zdHlsZS9jb21wb25lbnRzL2F1dGhlbnRpY2F0aW9uLnNjc3Ncbi8vIG1vZHVsZSBpZCA9IDIwN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSc7XG5cbnJlcXVpcmUoXCIuLi9zdHlsZS9jb21wb25lbnRzL25vdGlmeS5zY3NzXCIpO1xuXG52YXIgTm90aWZ5ID0gUmVhY3QuY3JlYXRlQ2xhc3MoeyBcbiAgICB0aW1lcjogbnVsbCxcbiAgICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlTG9hZCgpO1xuICAgIH0sXG4gICAgY29tcG9uZW50RGlkVXBkYXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVMb2FkKCk7XG4gICAgfSxcbiAgICBoYW5kbGVMb2FkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuc05vdGlmeS5hY3RpdmUgJiYgdGhpcy5wcm9wcy5zTm90aWZ5LnRpbWVyICE9IG51bGwpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKTtcbiAgICAgICAgICAgIHRoaXMudGltZXIgPSBzZXRUaW1lb3V0KHRoaXMuaGFuZGxlSGlkZSwgdGhpcy5wcm9wcy5zTm90aWZ5LnRpbWVyICsgNTAwKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgaGFuZGxlSGlkZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMucHJvcHMuYU5vdGlmeShmYWxzZSwgbnVsbCwgbnVsbCwgdGhpcy5wcm9wcy5zTm90aWZ5LnRpbWVyKTtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmhhbmRsZUhpZGUsIHRydWUpO1xuICAgICAgICBcbiAgICB9LFxuICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBvdXRlckNsYXNzZXMgPSBcImFwcC1ub3RpZnlcIjtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuc05vdGlmeS5hY3RpdmUpe1xuICAgICAgICAgICAgb3V0ZXJDbGFzc2VzICs9IFwiIHNob3dcIjtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5oYW5kbGVIaWRlLCB0cnVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBjbG9zZSA9IFwiXCI7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLnNOb3RpZnkudGltZXIgPT0gbnVsbCkge1xuICAgICAgICAgICAgY2xvc2UgPSA8YSBjbGFzc05hbWU9XCJ0aS1jbG9zZVwiIG9uQ2xpY2s9e3RoaXMuaGFuZGxlSGlkZX0vPjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbWVzc2FnZSA9IDxwPnt0aGlzLnByb3BzLnNOb3RpZnkubWVzc2FnZX08L3A+XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5wcm9wcy5zTm90aWZ5Lm1lc3NhZ2UgPT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgbWVzc2FnZSA9IHRoaXMucHJvcHMuc05vdGlmeS5tZXNzYWdlXG4gICAgICAgIH1cblxuICAgICAgICB2YXIgY29udGVudENsYXNzZXMgPSBcIm5vdGlmeS1jb250ZW50IFwiICsgdGhpcy5wcm9wcy5zTm90aWZ5LnR5cGU7XG4gICAgICAgIHJldHVybiAoPGRpdiBjbGFzc05hbWU9e291dGVyQ2xhc3Nlc30+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y29udGVudENsYXNzZXN9PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibm90aWZ5LW1lc3NhZ2VcIj5cbiAgICAgICAgICAgICAgICAgICAge2Nsb3NlfVxuICAgICAgICAgICAgICAgICAgICB7bWVzc2FnZX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj4pO1xuICAgIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBOb3RpZnk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vcm9vdC9jb21wb25lbnRzL25vdGlmeS5qc3giLCIvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXG4vLyBsb2FkIHRoZSBzdHlsZXNcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vbm90aWZ5LnNjc3NcIik7XG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcbi8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIHt9KTtcbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuLy8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuaWYobW9kdWxlLmhvdCkge1xuXHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vbm90aWZ5LnNjc3NcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuL25vdGlmeS5zY3NzXCIpO1xuXHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0fSk7XG5cdH1cblx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9yb290L3N0eWxlL2NvbXBvbmVudHMvbm90aWZ5LnNjc3MiLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuYXBwLW5vdGlmeXtkaXNwbGF5OmZsZXg7cG9zaXRpb246YWJzb2x1dGU7anVzdGlmeS1jb250ZW50OmNlbnRlcjthbGlnbi1pdGVtczpjZW50ZXI7d2lkdGg6MTAwJTt6LWluZGV4OjE7dG9wOi0xMDAlO2NvbG9yOiNmMWYxZjE7dHJhbnNpdGlvbjp0b3AgMXN9LmFwcC1ub3RpZnkuc2hvd3t0b3A6MjVweDthbmltYXRpb246c2hvd05vdGlmeSAuNXN9LmFwcC1ub3RpZnkgLm5vdGlmeS1jb250ZW50e2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47YWxpZ24taXRlbXM6Y2VudGVyO21heC13aWR0aDo2MDBweDtjb2xvcjojMmUyYzJkO2JveC1zaGFkb3c6NXB4IDVweCA1cHggIzg4OH0uYXBwLW5vdGlmeSAubm90aWZ5LWNvbnRlbnQgcHttYXJnaW46MH0uYXBwLW5vdGlmeSAubm90aWZ5LWNvbnRlbnQubWVzc2FnZXtiYWNrZ3JvdW5kLWNvbG9yOiNmOWY4Y2N9LmFwcC1ub3RpZnkgLm5vdGlmeS1jb250ZW50LmVycm9ye2JhY2tncm91bmQtY29sb3I6I2Y5NjY2Nn0uYXBwLW5vdGlmeSAubm90aWZ5LWNvbnRlbnQuc3VjY2Vzc3tiYWNrZ3JvdW5kLWNvbG9yOiNiMWZmYjV9LmFwcC1ub3RpZnkgLm5vdGlmeS1jb250ZW50IC5ub3RpZnktbWVzc2FnZXtwYWRkaW5nOjIwcHh9LmFwcC1ub3RpZnkgLm5vdGlmeS1jb250ZW50IC50aS1jbG9zZXtmbG9hdDpyaWdodDtwYWRkaW5nOjAgMCAxMHB4IDEwcHg7b3BhY2l0eTouNzV9LmFwcC1ub3RpZnkgLm5vdGlmeS1jb250ZW50IC50aS1jbG9zZTpob3ZlcntvcGFjaXR5OjF9QGtleWZyYW1lcyBzaG93Tm90aWZ5ezAle3RvcDotMTAwJX03MCV7dG9wOjI1cHh9NzAle3RyYW5zZm9ybTp0cmFuc2xhdGVZKDApfTg1JXt0cmFuc2Zvcm06dHJhbnNsYXRlWSgxNXB4KX10b3t0cmFuc2Zvcm06dHJhbnNsYXRlWSgwKX19XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2Nzcy1sb2FkZXIhLi9+L3Nhc3MtbG9hZGVyIS4vcm9vdC9zdHlsZS9jb21wb25lbnRzL25vdGlmeS5zY3NzXG4vLyBtb2R1bGUgaWQgPSAyMTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLy8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblxuLy8gbG9hZCB0aGUgc3R5bGVzXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuL21haW4uc2Nzc1wiKTtcbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuLy8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9hZGRTdHlsZXMuanNcIikoY29udGVudCwge30pO1xuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG4vLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5pZihtb2R1bGUuaG90KSB7XG5cdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi9tYWluLnNjc3NcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuL21haW4uc2Nzc1wiKTtcblx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdH0pO1xuXHR9XG5cdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vcm9vdC9zdHlsZS9tYWluLnNjc3MiLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCJib2R5e292ZXJmbG93OmhpZGRlbjttYXJnaW46MDtmb250LWZhbWlseTpUZW5zb01lZGl1bSxUZW5zb0xpZ2h0LEhlbHZldGljYSBOZXVlLEhlbHZldGljYSxBcmlhbCxzYW5zLXNlcmlmO2ZvbnQtc2l6ZToxOHB4O2JhY2tncm91bmQtY29sb3I6IzNhMzUzY31ib2R5ICp7Zm9udC1mYW1pbHk6aW5oZXJpdDtmb250LXNpemU6aW5oZXJpdDtvdXRsaW5lLWNvbG9yOiNkZWRhMWR9Ym9keSBpbnB1dCxib2R5IHNlbGVjdCxib2R5IHRleHRhcmVhe2JvcmRlci1yYWRpdXM6NHB4O2JvcmRlcjoxcHggc29saWQgIzJlMmMyZDtwYWRkaW5nOjNweH0uYXBwIC5hcHAtYXV0aGVudGljYXRle2Rpc3BsYXk6ZmxleDtwb3NpdGlvbjphYnNvbHV0ZTtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2FsaWduLWl0ZW1zOmNlbnRlcjt0cmFuc2Zvcm06cGVyc3BlY3RpdmUoODAwcHgpIHJvdGF0ZVgoOTBkZWcpO3RyYW5zaXRpb24tcHJvcGVydHk6YWxsO3RyYW5zaXRpb24tZHVyYXRpb246MXM7dHJhbnNpdGlvbi1kZWxheTouNXM7dHJhbnNmb3JtLW9yaWdpbjpib3R0b207d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJX0uYXBwIC5hcHAtYXV0aGVudGljYXRlLnNob3d7dHJhbnNmb3JtOnBlcnNwZWN0aXZlKDApIHJvdGF0ZVgoMGRlZyl9LmFwcCAuYXBwLWF1dGhlbnRpY2F0ZS5oaWRle3RyYW5zaXRpb24tZGVsYXk6MHN9LmFwcCAuYXBwLWJvZHl7ZGlzcGxheTpmbGV4O3RyYW5zZm9ybTpwZXJzcGVjdGl2ZSgwKSByb3RhdGVYKDBkZWcpO3RyYW5zaXRpb24tcHJvcGVydHk6YWxsO3RyYW5zaXRpb24tZHVyYXRpb246LjVzO3RyYW5zZm9ybS1vcmlnaW46Ym90dG9tfS5hcHAgLmFwcC1ib2R5LmhpZGV7dHJhbnNmb3JtOnBlcnNwZWN0aXZlKDgwMHB4KSByb3RhdGVYKDkwZGVnKX0uYXBwIC5hcHAtYm9keS5zaG93e3RyYW5zaXRpb24tZGVsYXk6MXN9LmFwcCAuYXBwLWJvZHkgLnNpdGUtYm9keXtmbGV4OjE7aGVpZ2h0OjEwMHZoO2JhY2tncm91bmQtY29sb3I6I2ViZWJlZH0uYXBwIC5hcHAtYm9keSAuc2l0ZS1ib2R5Pi5vcGVuLWNvbnRlbnR7b3ZlcmZsb3c6c2Nyb2xsO3BhZGRpbmc6MDttYXJnaW4tYm90dG9tOjUwcHg7aGVpZ2h0OmNhbGMoMTAwJSAtIDYwcHgpfWlucHV0LmVycm9ye2JhY2tncm91bmQtY29sb3I6I2Y5NjY2Nn0udmFsaWRhdGlvbntkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1ufS52YWxpZGF0aW9uIGgze21hcmdpbjowfS52YWxpZGF0aW9uIHVse21hcmdpbjoxMHB4IDA7cGFkZGluZy1sZWZ0OjIwcHh9LnRvZ2dsZS1zd2l0Y2h7cG9zaXRpb246cmVsYXRpdmU7ZGlzcGxheTppbmxpbmUtYmxvY2s7d2lkdGg6NjBweDtoZWlnaHQ6MzRweH0udG9nZ2xlLXN3aXRjaCBpbnB1dHtkaXNwbGF5Om5vbmV9LnRvZ2dsZS1zd2l0Y2ggaW5wdXQ6Y2hlY2tlZCsuc2xpZGVye2JhY2tncm91bmQtY29sb3I6I2RlZGExZH0udG9nZ2xlLXN3aXRjaCBpbnB1dDpjaGVja2VkKy5zbGlkZXI6YmVmb3Jley13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVgoMjZweCk7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoMjZweCl9LnRvZ2dsZS1zd2l0Y2ggLnNsaWRlcntwb3NpdGlvbjphYnNvbHV0ZTtjdXJzb3I6cG9pbnRlcjt0b3A6MDtsZWZ0OjA7cmlnaHQ6MDtib3R0b206MDtiYWNrZ3JvdW5kLWNvbG9yOiNjY2M7dHJhbnNpdGlvbjouNHM7Ym9yZGVyLXJhZGl1czozNHB4fS50b2dnbGUtc3dpdGNoIC5zbGlkZXI6YmVmb3Jle3Bvc2l0aW9uOmFic29sdXRlO2NvbnRlbnQ6XFxcIlxcXCI7aGVpZ2h0OjI2cHg7d2lkdGg6MjZweDtsZWZ0OjRweDtib3R0b206NHB4O2JhY2tncm91bmQtY29sb3I6I2ZmZjt0cmFuc2l0aW9uOi40cztib3JkZXItcmFkaXVzOjUwJX0ubG9hZGluZzpiZWZvcmV7Y29udGVudDpcXFwiXFxcIjtwb3NpdGlvbjpmaXhlZDt6LWluZGV4Ojk5OTk5OTk5OTk5OTk5OTt0b3A6MDtsZWZ0OjA7Ym90dG9tOjA7cmlnaHQ6MDtiYWNrZ3JvdW5kLWNvbG9yOiMwMDA7b3BhY2l0eTouODU7YmFja2dyb3VuZC1pbWFnZTp1cmwoXFxcImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlCbGJtTnZaR2x1WnowaWRYUm1MVGdpUHo0S1BITjJaeUIzYVdSMGFEMG5NVGsyY0hnbklHaGxhV2RvZEQwbk1UazJjSGduSUhodGJHNXpQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh5TURBd0wzTjJaeUlnZG1sbGQwSnZlRDBpTUNBd0lERXdNQ0F4TURBaUlIQnlaWE5sY25abFFYTndaV04wVW1GMGFXODlJbmhOYVdSWlRXbGtJaUJqYkdGemN6MGlkV2xzTFhOd2FXNGlQZ29nSUR4eVpXTjBJSGc5SWpBaUlIazlJakFpSUhkcFpIUm9QU0l4TURBaUlHaGxhV2RvZEQwaU1UQXdJaUJtYVd4c1BTSnViMjVsSWlCamJHRnpjejBpWW1zaVBqd3ZjbVZqZEQ0S0lDQThaeUIwY21GdWMyWnZjbTA5SW5SeVlXNXpiR0YwWlNnMU1DQTFNQ2tpUGdvZ0lDQWdQR2NnZEhKaGJuTm1iM0p0UFNKeWIzUmhkR1VvTUNrZ2RISmhibk5zWVhSbEtETTBJREFwSWo0S0lDQWdJQ0FnUEdOcGNtTnNaU0JqZUQwaU1DSWdZM2s5SWpBaUlISTlJamdpSUdacGJHdzlJaU5rWldSaE1XUWlQZ29nSUNBZ0lDQWdJRHhoYm1sdFlYUmxJR0YwZEhKcFluVjBaVTVoYldVOUltOXdZV05wZEhraUlHWnliMjA5SWpFaUlIUnZQU0l3TGpFaUlHSmxaMmx1UFNJd2N5SWdaSFZ5UFNJeGN5SWdjbVZ3WldGMFEyOTFiblE5SW1sdVpHVm1hVzVwZEdVaVBqd3ZZVzVwYldGMFpUNEtJQ0FnSUNBZ0lDQThZVzVwYldGMFpWUnlZVzV6Wm05eWJTQmhkSFJ5YVdKMWRHVk9ZVzFsUFNKMGNtRnVjMlp2Y20waUlIUjVjR1U5SW5OallXeGxJaUJtY205dFBTSXhMallpSUhSdlBTSXhJaUJpWldkcGJqMGlNSE1pSUdSMWNqMGlNWE1pSUhKbGNHVmhkRU52ZFc1MFBTSnBibVJsWm1sdWFYUmxJajQ4TDJGdWFXMWhkR1ZVY21GdWMyWnZjbTArQ2lBZ0lDQWdJRHd2WTJseVkyeGxQZ29nSUNBZ1BDOW5QZ29nSUNBZ1BHY2dkSEpoYm5ObWIzSnRQU0p5YjNSaGRHVW9ORFVwSUhSeVlXNXpiR0YwWlNnek5DQXdLU0krQ2lBZ0lDQWdJRHhqYVhKamJHVWdZM2c5SWpBaUlHTjVQU0l3SWlCeVBTSTRJaUJtYVd4c1BTSWpaR1ZrWVRGa0lqNEtJQ0FnSUNBZ0lDQThZVzVwYldGMFpTQmhkSFJ5YVdKMWRHVk9ZVzFsUFNKdmNHRmphWFI1SWlCbWNtOXRQU0l4SWlCMGJ6MGlNQzR4SWlCaVpXZHBiajBpTUM0eE1uTWlJR1IxY2owaU1YTWlJSEpsY0dWaGRFTnZkVzUwUFNKcGJtUmxabWx1YVhSbElqNDhMMkZ1YVcxaGRHVStDaUFnSUNBZ0lDQWdQR0Z1YVcxaGRHVlVjbUZ1YzJadmNtMGdZWFIwY21saWRYUmxUbUZ0WlQwaWRISmhibk5tYjNKdElpQjBlWEJsUFNKelkyRnNaU0lnWm5KdmJUMGlNUzQySWlCMGJ6MGlNU0lnWW1WbmFXNDlJakF1TVRKeklpQmtkWEk5SWpGeklpQnlaWEJsWVhSRGIzVnVkRDBpYVc1a1pXWnBibWwwWlNJK1BDOWhibWx0WVhSbFZISmhibk5tYjNKdFBnb2dJQ0FnSUNBOEwyTnBjbU5zWlQ0S0lDQWdJRHd2Wno0S0lDQWdJRHhuSUhSeVlXNXpabTl5YlQwaWNtOTBZWFJsS0Rrd0tTQjBjbUZ1YzJ4aGRHVW9NelFnTUNraVBnb2dJQ0FnSUNBOFkybHlZMnhsSUdONFBTSXdJaUJqZVQwaU1DSWdjajBpT0NJZ1ptbHNiRDBpSTJSbFpHRXhaQ0krQ2lBZ0lDQWdJQ0FnUEdGdWFXMWhkR1VnWVhSMGNtbGlkWFJsVG1GdFpUMGliM0JoWTJsMGVTSWdabkp2YlQwaU1TSWdkRzg5SWpBdU1TSWdZbVZuYVc0OUlqQXVNalZ6SWlCa2RYSTlJakZ6SWlCeVpYQmxZWFJEYjNWdWREMGlhVzVrWldacGJtbDBaU0krUEM5aGJtbHRZWFJsUGdvZ0lDQWdJQ0FnSUR4aGJtbHRZWFJsVkhKaGJuTm1iM0p0SUdGMGRISnBZblYwWlU1aGJXVTlJblJ5WVc1elptOXliU0lnZEhsd1pUMGljMk5oYkdVaUlHWnliMjA5SWpFdU5pSWdkRzg5SWpFaUlHSmxaMmx1UFNJd0xqSTFjeUlnWkhWeVBTSXhjeUlnY21Wd1pXRjBRMjkxYm5ROUltbHVaR1ZtYVc1cGRHVWlQand2WVc1cGJXRjBaVlJ5WVc1elptOXliVDRLSUNBZ0lDQWdQQzlqYVhKamJHVStDaUFnSUNBOEwyYytDaUFnSUNBOFp5QjBjbUZ1YzJadmNtMDlJbkp2ZEdGMFpTZ3hNelVwSUhSeVlXNXpiR0YwWlNnek5DQXdLU0krQ2lBZ0lDQWdJRHhqYVhKamJHVWdZM2c5SWpBaUlHTjVQU0l3SWlCeVBTSTRJaUJtYVd4c1BTSWpaR1ZrWVRGa0lqNEtJQ0FnSUNBZ0lDQThZVzVwYldGMFpTQmhkSFJ5YVdKMWRHVk9ZVzFsUFNKdmNHRmphWFI1SWlCbWNtOXRQU0l4SWlCMGJ6MGlNQzR4SWlCaVpXZHBiajBpTUM0ek4zTWlJR1IxY2owaU1YTWlJSEpsY0dWaGRFTnZkVzUwUFNKcGJtUmxabWx1YVhSbElqNDhMMkZ1YVcxaGRHVStDaUFnSUNBZ0lDQWdQR0Z1YVcxaGRHVlVjbUZ1YzJadmNtMGdZWFIwY21saWRYUmxUbUZ0WlQwaWRISmhibk5tYjNKdElpQjBlWEJsUFNKelkyRnNaU0lnWm5KdmJUMGlNUzQySWlCMGJ6MGlNU0lnWW1WbmFXNDlJakF1TXpkeklpQmtkWEk5SWpGeklpQnlaWEJsWVhSRGIzVnVkRDBpYVc1a1pXWnBibWwwWlNJK1BDOWhibWx0WVhSbFZISmhibk5tYjNKdFBnb2dJQ0FnSUNBOEwyTnBjbU5zWlQ0S0lDQWdJRHd2Wno0S0lDQWdJRHhuSUhSeVlXNXpabTl5YlQwaWNtOTBZWFJsS0RFNE1Da2dkSEpoYm5Oc1lYUmxLRE0wSURBcElqNEtJQ0FnSUNBZ1BHTnBjbU5zWlNCamVEMGlNQ0lnWTNrOUlqQWlJSEk5SWpnaUlHWnBiR3c5SWlOa1pXUmhNV1FpUGdvZ0lDQWdJQ0FnSUR4aGJtbHRZWFJsSUdGMGRISnBZblYwWlU1aGJXVTlJbTl3WVdOcGRIa2lJR1p5YjIwOUlqRWlJSFJ2UFNJd0xqRWlJR0psWjJsdVBTSXdMalZ6SWlCa2RYSTlJakZ6SWlCeVpYQmxZWFJEYjNWdWREMGlhVzVrWldacGJtbDBaU0krUEM5aGJtbHRZWFJsUGdvZ0lDQWdJQ0FnSUR4aGJtbHRZWFJsVkhKaGJuTm1iM0p0SUdGMGRISnBZblYwWlU1aGJXVTlJblJ5WVc1elptOXliU0lnZEhsd1pUMGljMk5oYkdVaUlHWnliMjA5SWpFdU5pSWdkRzg5SWpFaUlHSmxaMmx1UFNJd0xqVnpJaUJrZFhJOUlqRnpJaUJ5WlhCbFlYUkRiM1Z1ZEQwaWFXNWtaV1pwYm1sMFpTSStQQzloYm1sdFlYUmxWSEpoYm5ObWIzSnRQZ29nSUNBZ0lDQThMMk5wY21Oc1pUNEtJQ0FnSUR3dlp6NEtJQ0FnSUR4bklIUnlZVzV6Wm05eWJUMGljbTkwWVhSbEtESXlOU2tnZEhKaGJuTnNZWFJsS0RNMElEQXBJajRLSUNBZ0lDQWdQR05wY21Oc1pTQmplRDBpTUNJZ1kzazlJakFpSUhJOUlqZ2lJR1pwYkd3OUlpTmtaV1JoTVdRaVBnb2dJQ0FnSUNBZ0lEeGhibWx0WVhSbElHRjBkSEpwWW5WMFpVNWhiV1U5SW05d1lXTnBkSGtpSUdaeWIyMDlJakVpSUhSdlBTSXdMakVpSUdKbFoybHVQU0l3TGpZeWN5SWdaSFZ5UFNJeGN5SWdjbVZ3WldGMFEyOTFiblE5SW1sdVpHVm1hVzVwZEdVaVBqd3ZZVzVwYldGMFpUNEtJQ0FnSUNBZ0lDQThZVzVwYldGMFpWUnlZVzV6Wm05eWJTQmhkSFJ5YVdKMWRHVk9ZVzFsUFNKMGNtRnVjMlp2Y20waUlIUjVjR1U5SW5OallXeGxJaUJtY205dFBTSXhMallpSUhSdlBTSXhJaUJpWldkcGJqMGlNQzQyTW5NaUlHUjFjajBpTVhNaUlISmxjR1ZoZEVOdmRXNTBQU0pwYm1SbFptbHVhWFJsSWo0OEwyRnVhVzFoZEdWVWNtRnVjMlp2Y20wK0NpQWdJQ0FnSUR3dlkybHlZMnhsUGdvZ0lDQWdQQzluUGdvZ0lDQWdQR2NnZEhKaGJuTm1iM0p0UFNKeWIzUmhkR1VvTWpjd0tTQjBjbUZ1YzJ4aGRHVW9NelFnTUNraVBnb2dJQ0FnSUNBOFkybHlZMnhsSUdONFBTSXdJaUJqZVQwaU1DSWdjajBpT0NJZ1ptbHNiRDBpSTJSbFpHRXhaQ0krQ2lBZ0lDQWdJQ0FnUEdGdWFXMWhkR1VnWVhSMGNtbGlkWFJsVG1GdFpUMGliM0JoWTJsMGVTSWdabkp2YlQwaU1TSWdkRzg5SWpBdU1TSWdZbVZuYVc0OUlqQXVOelZ6SWlCa2RYSTlJakZ6SWlCeVpYQmxZWFJEYjNWdWREMGlhVzVrWldacGJtbDBaU0krUEM5aGJtbHRZWFJsUGdvZ0lDQWdJQ0FnSUR4aGJtbHRZWFJsVkhKaGJuTm1iM0p0SUdGMGRISnBZblYwWlU1aGJXVTlJblJ5WVc1elptOXliU0lnZEhsd1pUMGljMk5oYkdVaUlHWnliMjA5SWpFdU5pSWdkRzg5SWpFaUlHSmxaMmx1UFNJd0xqYzFjeUlnWkhWeVBTSXhjeUlnY21Wd1pXRjBRMjkxYm5ROUltbHVaR1ZtYVc1cGRHVWlQand2WVc1cGJXRjBaVlJ5WVc1elptOXliVDRLSUNBZ0lDQWdQQzlqYVhKamJHVStDaUFnSUNBOEwyYytDaUFnSUNBOFp5QjBjbUZ1YzJadmNtMDlJbkp2ZEdGMFpTZ3pNVFVwSUhSeVlXNXpiR0YwWlNnek5DQXdLU0krQ2lBZ0lDQWdJRHhqYVhKamJHVWdZM2c5SWpBaUlHTjVQU0l3SWlCeVBTSTRJaUJtYVd4c1BTSWpaR1ZrWVRGa0lqNEtJQ0FnSUNBZ0lDQThZVzVwYldGMFpTQmhkSFJ5YVdKMWRHVk9ZVzFsUFNKdmNHRmphWFI1SWlCbWNtOXRQU0l4SWlCMGJ6MGlNQzR4SWlCaVpXZHBiajBpTUM0NE4zTWlJR1IxY2owaU1YTWlJSEpsY0dWaGRFTnZkVzUwUFNKcGJtUmxabWx1YVhSbElqNDhMMkZ1YVcxaGRHVStDaUFnSUNBZ0lDQWdQR0Z1YVcxaGRHVlVjbUZ1YzJadmNtMGdZWFIwY21saWRYUmxUbUZ0WlQwaWRISmhibk5tYjNKdElpQjBlWEJsUFNKelkyRnNaU0lnWm5KdmJUMGlNUzQySWlCMGJ6MGlNU0lnWW1WbmFXNDlJakF1T0RkeklpQmtkWEk5SWpGeklpQnlaWEJsWVhSRGIzVnVkRDBpYVc1a1pXWnBibWwwWlNJK1BDOWhibWx0WVhSbFZISmhibk5tYjNKdFBnb2dJQ0FnSUNBOEwyTnBjbU5zWlQ0S0lDQWdJRHd2Wno0S0lDQThMMmMrQ2p3dmMzWm5QZz09XFxcIik7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246NTAlfUBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi1kZXZpY2Utd2lkdGg6MzIwcHgpIGFuZCAobWF4LWRldmljZS13aWR0aDo0ODBweCl7Ym9keXtmb250LXNpemU6MzZweH0uYXBwIC5hcHAtYm9keXtwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmJsb2NrO2hlaWdodDoxMDB2aH0uYXBwIC5hcHAtYm9keSAuc2l0ZS1ib2R5e3Bvc2l0aW9uOmFic29sdXRlO2JvdHRvbTo4MHB4O3JpZ2h0OjA7bGVmdDowO3RvcDowO2hlaWdodDphdXRvfS5hcHAgLmFwcC1ib2R5IC5zaXRlLWJvZHkgLm9wZW4tY29udGVudHtwb3NpdGlvbjphYnNvbHV0ZTtib3R0b206MDt0b3A6NjBweDtyaWdodDowO2xlZnQ6MDttYXJnaW4tYm90dG9tOjEwcHg7aGVpZ2h0OmF1dG99LmFwcCAuYXBwLWJvZHkgLm5hdmlnYXRpb257cG9zaXRpb246Zml4ZWQ7Ym90dG9tOjA7d2lkdGg6MTAwJX19XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2Nzcy1sb2FkZXIhLi9+L3Nhc3MtbG9hZGVyIS4vcm9vdC9zdHlsZS9tYWluLnNjc3Ncbi8vIG1vZHVsZSBpZCA9IDIxMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNC1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMuQ29udGFpbmVyID0gcmVxdWlyZSgnLi9saWIvRmx1eENvbnRhaW5lcicpO1xubW9kdWxlLmV4cG9ydHMuTWl4aW4gPSByZXF1aXJlKCcuL2xpYi9GbHV4TWl4aW5MZWdhY3knKTtcbm1vZHVsZS5leHBvcnRzLlJlZHVjZVN0b3JlID0gcmVxdWlyZSgnLi9saWIvRmx1eFJlZHVjZVN0b3JlJyk7XG5tb2R1bGUuZXhwb3J0cy5TdG9yZSA9IHJlcXVpcmUoJy4vbGliL0ZsdXhTdG9yZScpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2ZsdXgvdXRpbHMuanNcbi8vIG1vZHVsZSBpZCA9IDIxM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNC1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIEZsdXhDb250YWluZXJcbiAqIFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24nKTsgfSB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICdmdW5jdGlvbicgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICcgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBGbHV4Q29udGFpbmVyU3Vic2NyaXB0aW9ucyA9IHJlcXVpcmUoJy4vRmx1eENvbnRhaW5lclN1YnNjcmlwdGlvbnMnKTtcbnZhciBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5cbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcbnZhciBzaGFsbG93RXF1YWwgPSByZXF1aXJlKCdmYmpzL2xpYi9zaGFsbG93RXF1YWwnKTtcblxudmFyIENvbXBvbmVudCA9IFJlYWN0LkNvbXBvbmVudDtcblxudmFyIERFRkFVTFRfT1BUSU9OUyA9IHtcbiAgcHVyZTogdHJ1ZSxcbiAgd2l0aFByb3BzOiBmYWxzZSxcbiAgd2l0aENvbnRleHQ6IGZhbHNlXG59O1xuXG4vKipcbiAqIEEgRmx1eENvbnRhaW5lciBpcyB1c2VkIHRvIHN1YnNjcmliZSBhIHJlYWN0IGNvbXBvbmVudCB0byBtdWx0aXBsZSBzdG9yZXMuXG4gKiBUaGUgc3RvcmVzIHRoYXQgYXJlIHVzZWQgbXVzdCBiZSByZXR1cm5lZCBmcm9tIGEgc3RhdGljIGBnZXRTdG9yZXMoKWAgbWV0aG9kLlxuICpcbiAqIFRoZSBjb21wb25lbnQgcmVjZWl2ZXMgaW5mb3JtYXRpb24gZnJvbSB0aGUgc3RvcmVzIHZpYSBzdGF0ZS4gVGhlIHN0YXRlXG4gKiBpcyBnZW5lcmF0ZWQgdXNpbmcgYSBzdGF0aWMgYGNhbGN1bGF0ZVN0YXRlKClgIG1ldGhvZCB0aGF0IGVhY2ggY29udGFpbmVyXG4gKiBtdXN0IGltcGxlbWVudC4gQSBzaW1wbGUgY29udGFpbmVyIG1heSBsb29rIGxpa2U6XG4gKlxuICogICBjbGFzcyBGb29Db250YWluZXIgZXh0ZW5kcyBDb21wb25lbnQge1xuICogICAgIHN0YXRpYyBnZXRTdG9yZXMoKSB7XG4gKiAgICAgICByZXR1cm4gW0Zvb1N0b3JlXTtcbiAqICAgICB9XG4gKlxuICogICAgIHN0YXRpYyBjYWxjdWxhdGVTdGF0ZSgpIHtcbiAqICAgICAgIHJldHVybiB7XG4gKiAgICAgICAgIGZvbzogRm9vU3RvcmUuZ2V0U3RhdGUoKSxcbiAqICAgICAgIH07XG4gKiAgICAgfVxuICpcbiAqICAgICByZW5kZXIoKSB7XG4gKiAgICAgICByZXR1cm4gPEZvb1ZpZXcgey4uLnRoaXMuc3RhdGV9IC8+O1xuICogICAgIH1cbiAqICAgfVxuICpcbiAqICAgbW9kdWxlLmV4cG9ydHMgPSBGbHV4Q29udGFpbmVyLmNyZWF0ZShGb29Db250YWluZXIpO1xuICpcbiAqIEZsdXggY29udGFpbmVyIGFsc28gc3VwcG9ydHMgc29tZSBvdGhlciwgbW9yZSBhZHZhbmNlZCB1c2UgY2FzZXMuIElmIHlvdSBuZWVkXG4gKiB0byBiYXNlIHlvdXIgc3RhdGUgb2ZmIG9mIHByb3BzIGFzIHdlbGw6XG4gKlxuICogICBjbGFzcyBGb29Db250YWluZXIgZXh0ZW5kcyBDb21wb25lbnQge1xuICogICAgIC4uLlxuICpcbiAqICAgICBzdGF0aWMgY2FsY3VsYXRlU3RhdGUocHJldlN0YXRlLCBwcm9wcykge1xuICogICAgICAgcmV0dXJuIHtcbiAqICAgICAgICAgZm9vOiBGb29TdG9yZS5nZXRTcGVjaWZpY0Zvbyhwcm9wcy5pZCksXG4gKiAgICAgICB9O1xuICogICAgIH1cbiAqXG4gKiAgICAgLi4uXG4gKiAgIH1cbiAqXG4gKiAgIG1vZHVsZS5leHBvcnRzID0gRmx1eENvbnRhaW5lci5jcmVhdGUoRm9vQ29udGFpbmVyLCB7d2l0aFByb3BzOiB0cnVlfSk7XG4gKlxuICogT3IgaWYgeW91ciBzdG9yZXMgYXJlIHBhc3NlZCB0aHJvdWdoIHlvdXIgcHJvcHM6XG4gKlxuICogICBjbGFzcyBGb29Db250YWluZXIgZXh0ZW5kcyBDb21wb25lbnQge1xuICogICAgIC4uLlxuICpcbiAqICAgICBzdGF0aWMgZ2V0U3RvcmVzKHByb3BzKSB7XG4gKiAgICAgICBjb25zdCB7QmFyU3RvcmUsIEZvb1N0b3JlfSA9IHByb3BzLnN0b3JlcztcbiAqICAgICAgIHJldHVybiBbQmFyU3RvcmUsIEZvb1N0b3JlXTtcbiAqICAgICB9XG4gKlxuICogICAgIHN0YXRpYyBjYWxjdWxhdGVTdGF0ZShwcmV2U3RhdGUsIHByb3BzKSB7XG4gKiAgICAgICBjb25zdCB7QmFyU3RvcmUsIEZvb1N0b3JlfSA9IHByb3BzLnN0b3JlcztcbiAqICAgICAgIHJldHVybiB7XG4gKiAgICAgICAgIGJhcjogQmFyU3RvcmUuZ2V0U3RhdGUoKSxcbiAqICAgICAgICAgZm9vOiBGb29TdG9yZS5nZXRTdGF0ZSgpLFxuICogICAgICAgfTtcbiAqICAgICB9XG4gKlxuICogICAgIC4uLlxuICogICB9XG4gKlxuICogICBtb2R1bGUuZXhwb3J0cyA9IEZsdXhDb250YWluZXIuY3JlYXRlKEZvb0NvbnRhaW5lciwge3dpdGhQcm9wczogdHJ1ZX0pO1xuICovXG5mdW5jdGlvbiBjcmVhdGUoQmFzZSwgb3B0aW9ucykge1xuICBlbmZvcmNlSW50ZXJmYWNlKEJhc2UpO1xuXG4gIC8vIENvbnN0cnVjdCB0aGUgb3B0aW9ucyB1c2luZyBkZWZhdWx0LCBvdmVycmlkZSB3aXRoIHVzZXIgdmFsdWVzIGFzIG5lY2Vzc2FyeS5cbiAgdmFyIHJlYWxPcHRpb25zID0gX2V4dGVuZHMoe30sIERFRkFVTFRfT1BUSU9OUywgb3B0aW9ucyB8fCB7fSk7XG5cbiAgdmFyIGdldFN0YXRlID0gZnVuY3Rpb24gKHN0YXRlLCBtYXliZVByb3BzLCBtYXliZUNvbnRleHQpIHtcbiAgICB2YXIgcHJvcHMgPSByZWFsT3B0aW9ucy53aXRoUHJvcHMgPyBtYXliZVByb3BzIDogdW5kZWZpbmVkO1xuICAgIHZhciBjb250ZXh0ID0gcmVhbE9wdGlvbnMud2l0aENvbnRleHQgPyBtYXliZUNvbnRleHQgOiB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIEJhc2UuY2FsY3VsYXRlU3RhdGUoc3RhdGUsIHByb3BzLCBjb250ZXh0KTtcbiAgfTtcblxuICB2YXIgZ2V0U3RvcmVzID0gZnVuY3Rpb24gKG1heWJlUHJvcHMsIG1heWJlQ29udGV4dCkge1xuICAgIHZhciBwcm9wcyA9IHJlYWxPcHRpb25zLndpdGhQcm9wcyA/IG1heWJlUHJvcHMgOiB1bmRlZmluZWQ7XG4gICAgdmFyIGNvbnRleHQgPSByZWFsT3B0aW9ucy53aXRoQ29udGV4dCA/IG1heWJlQ29udGV4dCA6IHVuZGVmaW5lZDtcbiAgICByZXR1cm4gQmFzZS5nZXRTdG9yZXMocHJvcHMsIGNvbnRleHQpO1xuICB9O1xuXG4gIC8vIEJ1aWxkIHRoZSBjb250YWluZXIgY2xhc3MuXG5cbiAgdmFyIENvbnRhaW5lckNsYXNzID0gKGZ1bmN0aW9uIChfQmFzZSkge1xuICAgIF9pbmhlcml0cyhDb250YWluZXJDbGFzcywgX0Jhc2UpO1xuXG4gICAgZnVuY3Rpb24gQ29udGFpbmVyQ2xhc3MocHJvcHMsIGNvbnRleHQpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb250YWluZXJDbGFzcyk7XG5cbiAgICAgIF9CYXNlLmNhbGwodGhpcywgcHJvcHMsIGNvbnRleHQpO1xuICAgICAgdGhpcy5fZmx1eENvbnRhaW5lclN1YnNjcmlwdGlvbnMgPSBuZXcgRmx1eENvbnRhaW5lclN1YnNjcmlwdGlvbnMoKTtcbiAgICAgIHRoaXMuX2ZsdXhDb250YWluZXJTdWJzY3JpcHRpb25zLnNldFN0b3JlcyhnZXRTdG9yZXMocHJvcHMpKTtcbiAgICAgIHRoaXMuX2ZsdXhDb250YWluZXJTdWJzY3JpcHRpb25zLmFkZExpc3RlbmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMuc2V0U3RhdGUoZnVuY3Rpb24gKHByZXZTdGF0ZSwgY3VycmVudFByb3BzKSB7XG4gICAgICAgICAgcmV0dXJuIGdldFN0YXRlKHByZXZTdGF0ZSwgY3VycmVudFByb3BzLCBjb250ZXh0KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIHZhciBjYWxjdWxhdGVkU3RhdGUgPSBnZXRTdGF0ZSh1bmRlZmluZWQsIHByb3BzLCBjb250ZXh0KTtcbiAgICAgIHRoaXMuc3RhdGUgPSBfZXh0ZW5kcyh7fSwgdGhpcy5zdGF0ZSB8fCB7fSwgY2FsY3VsYXRlZFN0YXRlKTtcbiAgICB9XG5cbiAgICAvLyBNYWtlIHN1cmUgd2Ugb3ZlcnJpZGUgc2hvdWxkQ29tcG9uZW50VXBkYXRlIG9ubHkgaWYgdGhlIHB1cmUgb3B0aW9uIGlzXG4gICAgLy8gc3BlY2lmaWVkLiBXZSBjYW4ndCBvdmVycmlkZSB0aGlzIGFib3ZlIGJlY2F1c2Ugd2UgZG9uJ3Qgd2FudCB0byBvdmVycmlkZVxuICAgIC8vIHRoZSBkZWZhdWx0IGJlaGF2aW9yIG9uIGFjY2lkZW50LiBTdXBlciB3b3JrcyB3ZWlyZCB3aXRoIHJlYWN0IEVTNiBjbGFzc2VzLlxuXG4gICAgQ29udGFpbmVyQ2xhc3MucHJvdG90eXBlLmNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgPSBmdW5jdGlvbiBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcywgbmV4dENvbnRleHQpIHtcbiAgICAgIGlmIChfQmFzZS5wcm90b3R5cGUuY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcykge1xuICAgICAgICBfQmFzZS5wcm90b3R5cGUuY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcy5jYWxsKHRoaXMsIG5leHRQcm9wcywgbmV4dENvbnRleHQpO1xuICAgICAgfVxuXG4gICAgICBpZiAocmVhbE9wdGlvbnMud2l0aFByb3BzIHx8IHJlYWxPcHRpb25zLndpdGhDb250ZXh0KSB7XG4gICAgICAgIC8vIFVwZGF0ZSBib3RoIHN0b3JlcyBhbmQgc3RhdGUuXG4gICAgICAgIHRoaXMuX2ZsdXhDb250YWluZXJTdWJzY3JpcHRpb25zLnNldFN0b3JlcyhnZXRTdG9yZXMobmV4dFByb3BzLCBuZXh0Q29udGV4dCkpO1xuICAgICAgICB0aGlzLnNldFN0YXRlKGZ1bmN0aW9uIChwcmV2U3RhdGUpIHtcbiAgICAgICAgICByZXR1cm4gZ2V0U3RhdGUocHJldlN0YXRlLCBuZXh0UHJvcHMsIG5leHRDb250ZXh0KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIENvbnRhaW5lckNsYXNzLnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudCA9IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgaWYgKF9CYXNlLnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudCkge1xuICAgICAgICBfQmFzZS5wcm90b3R5cGUuY29tcG9uZW50V2lsbFVubW91bnQuY2FsbCh0aGlzKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fZmx1eENvbnRhaW5lclN1YnNjcmlwdGlvbnMucmVzZXQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIENvbnRhaW5lckNsYXNzO1xuICB9KShCYXNlKTtcblxuICB2YXIgY29udGFpbmVyID0gcmVhbE9wdGlvbnMucHVyZSA/IGNyZWF0ZVB1cmVDb21wb25lbnQoQ29udGFpbmVyQ2xhc3MpIDogQ29udGFpbmVyQ2xhc3M7XG5cbiAgLy8gVXBkYXRlIHRoZSBuYW1lIG9mIHRoZSBjb250YWluZXIgYmVmb3JlIHJldHVybmluZ1xuICB2YXIgY29tcG9uZW50TmFtZSA9IEJhc2UuZGlzcGxheU5hbWUgfHwgQmFzZS5uYW1lO1xuICBjb250YWluZXIuZGlzcGxheU5hbWUgPSAnRmx1eENvbnRhaW5lcignICsgY29tcG9uZW50TmFtZSArICcpJztcbiAgcmV0dXJuIGNvbnRhaW5lcjtcbn1cblxuZnVuY3Rpb24gY3JlYXRlUHVyZUNvbXBvbmVudChCYXNlQ29tcG9uZW50KSB7XG4gIHZhciBQdXJlQ29tcG9uZW50ID0gKGZ1bmN0aW9uIChfQmFzZUNvbXBvbmVudCkge1xuICAgIF9pbmhlcml0cyhQdXJlQ29tcG9uZW50LCBfQmFzZUNvbXBvbmVudCk7XG5cbiAgICBmdW5jdGlvbiBQdXJlQ29tcG9uZW50KCkge1xuICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFB1cmVDb21wb25lbnQpO1xuXG4gICAgICBfQmFzZUNvbXBvbmVudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cblxuICAgIFB1cmVDb21wb25lbnQucHJvdG90eXBlLnNob3VsZENvbXBvbmVudFVwZGF0ZSA9IGZ1bmN0aW9uIHNob3VsZENvbXBvbmVudFVwZGF0ZShuZXh0UHJvcHMsIG5leHRTdGF0ZSkge1xuICAgICAgcmV0dXJuICFzaGFsbG93RXF1YWwodGhpcy5wcm9wcywgbmV4dFByb3BzKSB8fCAhc2hhbGxvd0VxdWFsKHRoaXMuc3RhdGUsIG5leHRTdGF0ZSk7XG4gICAgfTtcblxuICAgIHJldHVybiBQdXJlQ29tcG9uZW50O1xuICB9KShCYXNlQ29tcG9uZW50KTtcblxuICByZXR1cm4gUHVyZUNvbXBvbmVudDtcbn1cblxuZnVuY3Rpb24gZW5mb3JjZUludGVyZmFjZShvKSB7XG4gICFvLmdldFN0b3JlcyA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdDb21wb25lbnRzIHRoYXQgdXNlIEZsdXhDb250YWluZXIgbXVzdCBpbXBsZW1lbnQgYHN0YXRpYyBnZXRTdG9yZXMoKWAnKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICFvLmNhbGN1bGF0ZVN0YXRlID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0NvbXBvbmVudHMgdGhhdCB1c2UgRmx1eENvbnRhaW5lciBtdXN0IGltcGxlbWVudCBgc3RhdGljIGNhbGN1bGF0ZVN0YXRlKClgJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xufVxuXG4vKipcbiAqIFRoaXMgaXMgYSB3YXkgdG8gY29ubmVjdCBzdG9yZXMgdG8gYSBmdW5jdGlvbmFsIHN0YXRlbGVzcyB2aWV3LiBIZXJlJ3MgYVxuICogc2ltcGxlIGV4YW1wbGU6XG4gKlxuICogICAvLyBGb29WaWV3LmpzXG4gKlxuICogICBmdW5jdGlvbiBGb29WaWV3KHByb3BzKSB7XG4gKiAgICAgcmV0dXJuIDxkaXY+e3Byb3BzLnZhbHVlfTwvZGl2PjtcbiAqICAgfVxuICpcbiAqICAgbW9kdWxlLmV4cG9ydHMgPSBGb29WaWV3O1xuICpcbiAqXG4gKiAgIC8vIEZvb0NvbnRhaW5lci5qc1xuICpcbiAqICAgZnVuY3Rpb24gZ2V0U3RvcmVzKCkge1xuICogICAgIHJldHVybiBbRm9vU3RvcmVdO1xuICogICB9XG4gKlxuICogICBmdW5jdGlvbiBjYWxjdWxhdGVTdGF0ZSgpIHtcbiAqICAgICByZXR1cm4ge1xuICogICAgICAgdmFsdWU6IEZvb1N0b3JlLmdldFN0YXRlKCk7XG4gKiAgICAgfTtcbiAqICAgfVxuICpcbiAqICAgbW9kdWxlLmV4cG9ydHMgPSBGbHV4Q29udGFpbmVyLmNyZWF0ZUZ1bmN0aW9uYWwoXG4gKiAgICAgRm9vVmlldyxcbiAqICAgICBnZXRTdG9yZXMsXG4gKiAgICAgY2FsY3VsYXRlU3RhdGUsXG4gKiAgICk7XG4gKlxuICovXG5mdW5jdGlvbiBjcmVhdGVGdW5jdGlvbmFsKHZpZXdGbiwgX2dldFN0b3JlcywgX2NhbGN1bGF0ZVN0YXRlLCBvcHRpb25zKSB7XG4gIHZhciBGdW5jdGlvbmFsQ29udGFpbmVyID0gKGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gICAgX2luaGVyaXRzKEZ1bmN0aW9uYWxDb250YWluZXIsIF9Db21wb25lbnQpO1xuXG4gICAgZnVuY3Rpb24gRnVuY3Rpb25hbENvbnRhaW5lcigpIHtcbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBGdW5jdGlvbmFsQ29udGFpbmVyKTtcblxuICAgICAgX0NvbXBvbmVudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cblxuICAgIC8vIFVwZGF0ZSB0aGUgbmFtZSBvZiB0aGUgY29tcG9uZW50IGJlZm9yZSBjcmVhdGluZyB0aGUgY29udGFpbmVyLlxuXG4gICAgRnVuY3Rpb25hbENvbnRhaW5lci5nZXRTdG9yZXMgPSBmdW5jdGlvbiBnZXRTdG9yZXMocHJvcHMsIGNvbnRleHQpIHtcbiAgICAgIHJldHVybiBfZ2V0U3RvcmVzKHByb3BzLCBjb250ZXh0KTtcbiAgICB9O1xuXG4gICAgRnVuY3Rpb25hbENvbnRhaW5lci5jYWxjdWxhdGVTdGF0ZSA9IGZ1bmN0aW9uIGNhbGN1bGF0ZVN0YXRlKHByZXZTdGF0ZSwgcHJvcHMsIGNvbnRleHQpIHtcbiAgICAgIHJldHVybiBfY2FsY3VsYXRlU3RhdGUocHJldlN0YXRlLCBwcm9wcywgY29udGV4dCk7XG4gICAgfTtcblxuICAgIEZ1bmN0aW9uYWxDb250YWluZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHJldHVybiB2aWV3Rm4odGhpcy5zdGF0ZSk7XG4gICAgfTtcblxuICAgIHJldHVybiBGdW5jdGlvbmFsQ29udGFpbmVyO1xuICB9KShDb21wb25lbnQpO1xuXG4gIHZhciB2aWV3Rm5OYW1lID0gdmlld0ZuLmRpc3BsYXlOYW1lIHx8IHZpZXdGbi5uYW1lIHx8ICdGdW5jdGlvbmFsQ29udGFpbmVyJztcbiAgRnVuY3Rpb25hbENvbnRhaW5lci5kaXNwbGF5TmFtZSA9IHZpZXdGbk5hbWU7XG4gIHJldHVybiBjcmVhdGUoRnVuY3Rpb25hbENvbnRhaW5lciwgb3B0aW9ucyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0geyBjcmVhdGU6IGNyZWF0ZSwgY3JlYXRlRnVuY3Rpb25hbDogY3JlYXRlRnVuY3Rpb25hbCB9O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9mbHV4L2xpYi9GbHV4Q29udGFpbmVyLmpzXG4vLyBtb2R1bGUgaWQgPSAyMTRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQtcHJlc2VudCwgRmFjZWJvb2ssIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIEZsdXhDb250YWluZXJTdWJzY3JpcHRpb25zXG4gKiBcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uJyk7IH0gfVxuXG52YXIgRmx1eFN0b3JlR3JvdXAgPSByZXF1aXJlKCcuL0ZsdXhTdG9yZUdyb3VwJyk7XG5cbmZ1bmN0aW9uIHNoYWxsb3dBcnJheUVxdWFsKGEsIGIpIHtcbiAgaWYgKGEgPT09IGIpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChhW2ldICE9PSBiW2ldKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG52YXIgRmx1eENvbnRhaW5lclN1YnNjcmlwdGlvbnMgPSAoZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBGbHV4Q29udGFpbmVyU3Vic2NyaXB0aW9ucygpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRmx1eENvbnRhaW5lclN1YnNjcmlwdGlvbnMpO1xuXG4gICAgdGhpcy5fY2FsbGJhY2tzID0gW107XG4gIH1cblxuICBGbHV4Q29udGFpbmVyU3Vic2NyaXB0aW9ucy5wcm90b3R5cGUuc2V0U3RvcmVzID0gZnVuY3Rpb24gc2V0U3RvcmVzKHN0b3Jlcykge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICBpZiAodGhpcy5fc3RvcmVzICYmIHNoYWxsb3dBcnJheUVxdWFsKHRoaXMuX3N0b3Jlcywgc3RvcmVzKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9zdG9yZXMgPSBzdG9yZXM7XG4gICAgdGhpcy5fcmVzZXRUb2tlbnMoKTtcbiAgICB0aGlzLl9yZXNldFN0b3JlR3JvdXAoKTtcblxuICAgIHZhciBjaGFuZ2VkID0gZmFsc2U7XG4gICAgdmFyIGNoYW5nZWRTdG9yZXMgPSBbXTtcblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAvLyBLZWVwIHRyYWNrIG9mIHRoZSBzdG9yZXMgdGhhdCBjaGFuZ2VkIGZvciBkZWJ1Z2dpbmcgcHVycG9zZXMgb25seVxuICAgICAgdGhpcy5fdG9rZW5zID0gc3RvcmVzLm1hcChmdW5jdGlvbiAoc3RvcmUpIHtcbiAgICAgICAgcmV0dXJuIHN0b3JlLmFkZExpc3RlbmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICBjaGFuZ2VkU3RvcmVzLnB1c2goc3RvcmUpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2V0Q2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgX3RoaXMuX3Rva2VucyA9IHN0b3Jlcy5tYXAoZnVuY3Rpb24gKHN0b3JlKSB7XG4gICAgICAgICAgcmV0dXJuIHN0b3JlLmFkZExpc3RlbmVyKHNldENoYW5nZWQpO1xuICAgICAgICB9KTtcbiAgICAgIH0pKCk7XG4gICAgfVxuXG4gICAgdmFyIGNhbGxDYWxsYmFja3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoY2hhbmdlZCkge1xuICAgICAgICBfdGhpcy5fY2FsbGJhY2tzLmZvckVhY2goZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgICAgcmV0dXJuIGZuKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBjaGFuZ2VkID0gZmFsc2U7XG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgLy8gVW5jb21tZW50IHRoaXMgdG8gcHJpbnQgdGhlIHN0b3JlcyB0aGF0IGNoYW5nZWQuXG4gICAgICAgICAgLy8gY29uc29sZS5sb2coY2hhbmdlZFN0b3Jlcyk7XG4gICAgICAgICAgY2hhbmdlZFN0b3JlcyA9IFtdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLl9zdG9yZUdyb3VwID0gbmV3IEZsdXhTdG9yZUdyb3VwKHN0b3JlcywgY2FsbENhbGxiYWNrcyk7XG4gIH07XG5cbiAgRmx1eENvbnRhaW5lclN1YnNjcmlwdGlvbnMucHJvdG90eXBlLmFkZExpc3RlbmVyID0gZnVuY3Rpb24gYWRkTGlzdGVuZXIoZm4pIHtcbiAgICB0aGlzLl9jYWxsYmFja3MucHVzaChmbik7XG4gIH07XG5cbiAgRmx1eENvbnRhaW5lclN1YnNjcmlwdGlvbnMucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgdGhpcy5fcmVzZXRUb2tlbnMoKTtcbiAgICB0aGlzLl9yZXNldFN0b3JlR3JvdXAoKTtcbiAgICB0aGlzLl9yZXNldENhbGxiYWNrcygpO1xuICAgIHRoaXMuX3Jlc2V0U3RvcmVzKCk7XG4gIH07XG5cbiAgRmx1eENvbnRhaW5lclN1YnNjcmlwdGlvbnMucHJvdG90eXBlLl9yZXNldFRva2VucyA9IGZ1bmN0aW9uIF9yZXNldFRva2VucygpIHtcbiAgICBpZiAodGhpcy5fdG9rZW5zKSB7XG4gICAgICB0aGlzLl90b2tlbnMuZm9yRWFjaChmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgICAgcmV0dXJuIHRva2VuLnJlbW92ZSgpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLl90b2tlbnMgPSBudWxsO1xuICAgIH1cbiAgfTtcblxuICBGbHV4Q29udGFpbmVyU3Vic2NyaXB0aW9ucy5wcm90b3R5cGUuX3Jlc2V0U3RvcmVHcm91cCA9IGZ1bmN0aW9uIF9yZXNldFN0b3JlR3JvdXAoKSB7XG4gICAgaWYgKHRoaXMuX3N0b3JlR3JvdXApIHtcbiAgICAgIHRoaXMuX3N0b3JlR3JvdXAucmVsZWFzZSgpO1xuICAgICAgdGhpcy5fc3RvcmVHcm91cCA9IG51bGw7XG4gICAgfVxuICB9O1xuXG4gIEZsdXhDb250YWluZXJTdWJzY3JpcHRpb25zLnByb3RvdHlwZS5fcmVzZXRTdG9yZXMgPSBmdW5jdGlvbiBfcmVzZXRTdG9yZXMoKSB7XG4gICAgdGhpcy5fc3RvcmVzID0gbnVsbDtcbiAgfTtcblxuICBGbHV4Q29udGFpbmVyU3Vic2NyaXB0aW9ucy5wcm90b3R5cGUuX3Jlc2V0Q2FsbGJhY2tzID0gZnVuY3Rpb24gX3Jlc2V0Q2FsbGJhY2tzKCkge1xuICAgIHRoaXMuX2NhbGxiYWNrcyA9IFtdO1xuICB9O1xuXG4gIHJldHVybiBGbHV4Q29udGFpbmVyU3Vic2NyaXB0aW9ucztcbn0pKCk7XG5cbm1vZHVsZS5leHBvcnRzID0gRmx1eENvbnRhaW5lclN1YnNjcmlwdGlvbnM7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2ZsdXgvbGliL0ZsdXhDb250YWluZXJTdWJzY3JpcHRpb25zLmpzXG4vLyBtb2R1bGUgaWQgPSAyMTVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBGbHV4U3RvcmVHcm91cFxuICogXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbicpOyB9IH1cblxudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xuXG4vKipcbiAqIEZsdXhTdG9yZUdyb3VwIGFsbG93cyB5b3UgdG8gZXhlY3V0ZSBhIGNhbGxiYWNrIG9uIGV2ZXJ5IGRpc3BhdGNoIGFmdGVyXG4gKiB3YWl0aW5nIGZvciBlYWNoIG9mIHRoZSBnaXZlbiBzdG9yZXMuXG4gKi9cblxudmFyIEZsdXhTdG9yZUdyb3VwID0gKGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gRmx1eFN0b3JlR3JvdXAoc3RvcmVzLCBjYWxsYmFjaykge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRmx1eFN0b3JlR3JvdXApO1xuXG4gICAgdGhpcy5fZGlzcGF0Y2hlciA9IF9nZXRVbmlmb3JtRGlzcGF0Y2hlcihzdG9yZXMpO1xuXG4gICAgLy8gUHJlY29tcHV0ZSBzdG9yZSB0b2tlbnMuXG4gICAgdmFyIHN0b3JlVG9rZW5zID0gc3RvcmVzLm1hcChmdW5jdGlvbiAoc3RvcmUpIHtcbiAgICAgIHJldHVybiBzdG9yZS5nZXREaXNwYXRjaFRva2VuKCk7XG4gICAgfSk7XG5cbiAgICAvLyBSZWdpc3RlciB3aXRoIHRoZSBkaXNwYXRjaGVyLlxuICAgIHRoaXMuX2Rpc3BhdGNoVG9rZW4gPSB0aGlzLl9kaXNwYXRjaGVyLnJlZ2lzdGVyKGZ1bmN0aW9uIChwYXlsb2FkKSB7XG4gICAgICBfdGhpcy5fZGlzcGF0Y2hlci53YWl0Rm9yKHN0b3JlVG9rZW5zKTtcbiAgICAgIGNhbGxiYWNrKCk7XG4gICAgfSk7XG4gIH1cblxuICBGbHV4U3RvcmVHcm91cC5wcm90b3R5cGUucmVsZWFzZSA9IGZ1bmN0aW9uIHJlbGVhc2UoKSB7XG4gICAgdGhpcy5fZGlzcGF0Y2hlci51bnJlZ2lzdGVyKHRoaXMuX2Rpc3BhdGNoVG9rZW4pO1xuICB9O1xuXG4gIHJldHVybiBGbHV4U3RvcmVHcm91cDtcbn0pKCk7XG5cbmZ1bmN0aW9uIF9nZXRVbmlmb3JtRGlzcGF0Y2hlcihzdG9yZXMpIHtcbiAgIShzdG9yZXMgJiYgc3RvcmVzLmxlbmd0aCkgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnTXVzdCBwcm92aWRlIGF0IGxlYXN0IG9uZSBzdG9yZSB0byBGbHV4U3RvcmVHcm91cCcpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgdmFyIGRpc3BhdGNoZXIgPSBzdG9yZXNbMF0uZ2V0RGlzcGF0Y2hlcigpO1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGZvciAodmFyIF9pdGVyYXRvciA9IHN0b3JlcywgX2lzQXJyYXkgPSBBcnJheS5pc0FycmF5KF9pdGVyYXRvciksIF9pID0gMCwgX2l0ZXJhdG9yID0gX2lzQXJyYXkgPyBfaXRlcmF0b3IgOiBfaXRlcmF0b3JbU3ltYm9sLml0ZXJhdG9yXSgpOzspIHtcbiAgICAgIHZhciBfcmVmO1xuXG4gICAgICBpZiAoX2lzQXJyYXkpIHtcbiAgICAgICAgaWYgKF9pID49IF9pdGVyYXRvci5sZW5ndGgpIGJyZWFrO1xuICAgICAgICBfcmVmID0gX2l0ZXJhdG9yW19pKytdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX2kgPSBfaXRlcmF0b3IubmV4dCgpO1xuICAgICAgICBpZiAoX2kuZG9uZSkgYnJlYWs7XG4gICAgICAgIF9yZWYgPSBfaS52YWx1ZTtcbiAgICAgIH1cblxuICAgICAgdmFyIHN0b3JlID0gX3JlZjtcblxuICAgICAgIShzdG9yZS5nZXREaXNwYXRjaGVyKCkgPT09IGRpc3BhdGNoZXIpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0FsbCBzdG9yZXMgaW4gYSBGbHV4U3RvcmVHcm91cCBtdXN0IHVzZSB0aGUgc2FtZSBkaXNwYXRjaGVyJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZGlzcGF0Y2hlcjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBGbHV4U3RvcmVHcm91cDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vZmx1eC9saWIvRmx1eFN0b3JlR3JvdXAuanNcbi8vIG1vZHVsZSBpZCA9IDIxNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqIEB0eXBlY2hlY2tzXG4gKiBcbiAqL1xuXG4vKmVzbGludC1kaXNhYmxlIG5vLXNlbGYtY29tcGFyZSAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogaW5saW5lZCBPYmplY3QuaXMgcG9seWZpbGwgdG8gYXZvaWQgcmVxdWlyaW5nIGNvbnN1bWVycyBzaGlwIHRoZWlyIG93blxuICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2lzXG4gKi9cbmZ1bmN0aW9uIGlzKHgsIHkpIHtcbiAgLy8gU2FtZVZhbHVlIGFsZ29yaXRobVxuICBpZiAoeCA9PT0geSkge1xuICAgIC8vIFN0ZXBzIDEtNSwgNy0xMFxuICAgIC8vIFN0ZXBzIDYuYi02LmU6ICswICE9IC0wXG4gICAgLy8gQWRkZWQgdGhlIG5vbnplcm8geSBjaGVjayB0byBtYWtlIEZsb3cgaGFwcHksIGJ1dCBpdCBpcyByZWR1bmRhbnRcbiAgICByZXR1cm4geCAhPT0gMCB8fCB5ICE9PSAwIHx8IDEgLyB4ID09PSAxIC8geTtcbiAgfSBlbHNlIHtcbiAgICAvLyBTdGVwIDYuYTogTmFOID09IE5hTlxuICAgIHJldHVybiB4ICE9PSB4ICYmIHkgIT09IHk7XG4gIH1cbn1cblxuLyoqXG4gKiBQZXJmb3JtcyBlcXVhbGl0eSBieSBpdGVyYXRpbmcgdGhyb3VnaCBrZXlzIG9uIGFuIG9iamVjdCBhbmQgcmV0dXJuaW5nIGZhbHNlXG4gKiB3aGVuIGFueSBrZXkgaGFzIHZhbHVlcyB3aGljaCBhcmUgbm90IHN0cmljdGx5IGVxdWFsIGJldHdlZW4gdGhlIGFyZ3VtZW50cy5cbiAqIFJldHVybnMgdHJ1ZSB3aGVuIHRoZSB2YWx1ZXMgb2YgYWxsIGtleXMgYXJlIHN0cmljdGx5IGVxdWFsLlxuICovXG5mdW5jdGlvbiBzaGFsbG93RXF1YWwob2JqQSwgb2JqQikge1xuICBpZiAoaXMob2JqQSwgb2JqQikpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGlmICh0eXBlb2Ygb2JqQSAhPT0gJ29iamVjdCcgfHwgb2JqQSA9PT0gbnVsbCB8fCB0eXBlb2Ygb2JqQiAhPT0gJ29iamVjdCcgfHwgb2JqQiA9PT0gbnVsbCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHZhciBrZXlzQSA9IE9iamVjdC5rZXlzKG9iakEpO1xuICB2YXIga2V5c0IgPSBPYmplY3Qua2V5cyhvYmpCKTtcblxuICBpZiAoa2V5c0EubGVuZ3RoICE9PSBrZXlzQi5sZW5ndGgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvLyBUZXN0IGZvciBBJ3Mga2V5cyBkaWZmZXJlbnQgZnJvbSBCLlxuICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXNBLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKCFoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iakIsIGtleXNBW2ldKSB8fCAhaXMob2JqQVtrZXlzQVtpXV0sIG9iakJba2V5c0FbaV1dKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHNoYWxsb3dFcXVhbDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vZmx1eC9+L2ZianMvbGliL3NoYWxsb3dFcXVhbC5qc1xuLy8gbW9kdWxlIGlkID0gMjE3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBGbHV4TWl4aW5MZWdhY3lcbiAqIFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEZsdXhTdG9yZUdyb3VwID0gcmVxdWlyZSgnLi9GbHV4U3RvcmVHcm91cCcpO1xuXG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbi8qKlxuICogYEZsdXhDb250YWluZXJgIHNob3VsZCBiZSBwcmVmZXJyZWQgb3ZlciB0aGlzIG1peGluLCBidXQgaXQgcmVxdWlyZXMgdXNpbmdcbiAqIHJlYWN0IHdpdGggY2xhc3Nlcy4gU28gdGhpcyBtaXhpbiBpcyBwcm92aWRlZCB3aGVyZSBpdCBpcyBub3QgeWV0IHBvc3NpYmxlXG4gKiB0byBjb252ZXJ0IGEgY29udGFpbmVyIHRvIGJlIGEgY2xhc3MuXG4gKlxuICogVGhpcyBtaXhpbiBzaG91bGQgYmUgdXNlZCBmb3IgUmVhY3QgY29tcG9uZW50cyB0aGF0IGhhdmUgc3RhdGUgYmFzZWQgcHVyZWx5XG4gKiBvbiBzdG9yZXMuIGB0aGlzLnByb3BzYCB3aWxsIG5vdCBiZSBhdmFpbGFibGUgaW5zaWRlIG9mIGBjYWxjdWxhdGVTdGF0ZSgpYC5cbiAqXG4gKiBUaGlzIG1peGluIHdpbGwgb25seSBgc2V0U3RhdGVgIG5vdCByZXBsYWNlIGl0LCBzbyB5b3Ugc2hvdWxkIGFsd2F5cyByZXR1cm5cbiAqIGV2ZXJ5IGtleSBpbiB5b3VyIHN0YXRlIHVubGVzcyB5b3Uga25vdyB3aGF0IHlvdSBhcmUgZG9pbmcuIENvbnNpZGVyIHRoaXM6XG4gKlxuICogICB2YXIgRm9vID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICogICAgIG1peGluczogW1xuICogICAgICAgRmx1eE1peGluTGVnYWN5KFtGb29TdG9yZV0pXG4gKiAgICAgXSxcbiAqXG4gKiAgICAgc3RhdGljczoge1xuICogICAgICAgY2FsY3VsYXRlU3RhdGUocHJldlN0YXRlKSB7XG4gKiAgICAgICAgIGlmICghcHJldlN0YXRlKSB7XG4gKiAgICAgICAgICAgcmV0dXJuIHtcbiAqICAgICAgICAgICAgIGZvbzogRm9vU3RvcmUuZ2V0Rm9vKCksXG4gKiAgICAgICAgICAgfTtcbiAqICAgICAgICAgfVxuICpcbiAqICAgICAgICAgcmV0dXJuIHtcbiAqICAgICAgICAgICBiYXI6IEZvb1N0b3JlLmdldEJhcigpLFxuICogICAgICAgICB9O1xuICogICAgICAgfVxuICogICAgIH0sXG4gKiAgIH0pO1xuICpcbiAqIE9uIHRoZSBzZWNvbmQgY2FsY3VsYXRlU3RhdGUgd2hlbiBwcmV2U3RhdGUgaXMgbm90IG51bGwsIHRoZSBzdGF0ZSB3aWxsIGJlXG4gKiB1cGRhdGVkIHRvIGNvbnRhaW4gdGhlIHByZXZpb3VzIGZvbyBBTkQgdGhlIGJhciB0aGF0IHdhcyBqdXN0IHJldHVybmVkLiBPbmx5XG4gKiByZXR1cm5pbmcgYmFyIHdpbGwgbm90IGRlbGV0ZSBmb28uXG4gKlxuICovXG5mdW5jdGlvbiBGbHV4TWl4aW5MZWdhY3koc3RvcmVzKSB7XG4gIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8geyB3aXRoUHJvcHM6IGZhbHNlIH0gOiBhcmd1bWVudHNbMV07XG5cbiAgc3RvcmVzID0gc3RvcmVzLmZpbHRlcihmdW5jdGlvbiAoc3RvcmUpIHtcbiAgICByZXR1cm4gISFzdG9yZTtcbiAgfSk7XG5cbiAgcmV0dXJuIHtcbiAgICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGVuZm9yY2VJbnRlcmZhY2UodGhpcyk7XG4gICAgICByZXR1cm4gb3B0aW9ucy53aXRoUHJvcHMgPyB0aGlzLmNvbnN0cnVjdG9yLmNhbGN1bGF0ZVN0YXRlKG51bGwsIHRoaXMucHJvcHMpIDogdGhpcy5jb25zdHJ1Y3Rvci5jYWxjdWxhdGVTdGF0ZShudWxsLCB1bmRlZmluZWQpO1xuICAgIH0sXG5cbiAgICBjb21wb25lbnRXaWxsTW91bnQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgIC8vIFRoaXMgdHJhY2tzIHdoZW4gYW55IHN0b3JlIGhhcyBjaGFuZ2VkIGFuZCB3ZSBtYXkgbmVlZCB0byB1cGRhdGUuXG4gICAgICB2YXIgY2hhbmdlZCA9IGZhbHNlO1xuICAgICAgdmFyIHNldENoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNoYW5nZWQgPSB0cnVlO1xuICAgICAgfTtcblxuICAgICAgLy8gVGhpcyBhZGRzIHN1YnNjcmlwdGlvbnMgdG8gc3RvcmVzLiBXaGVuIGEgc3RvcmUgY2hhbmdlcyBhbGwgd2UgZG8gaXNcbiAgICAgIC8vIHNldCBjaGFuZ2VkIHRvIHRydWUuXG4gICAgICB0aGlzLl9mbHV4TWl4aW5TdWJzY3JpcHRpb25zID0gc3RvcmVzLm1hcChmdW5jdGlvbiAoc3RvcmUpIHtcbiAgICAgICAgcmV0dXJuIHN0b3JlLmFkZExpc3RlbmVyKHNldENoYW5nZWQpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFRoaXMgY2FsbGJhY2sgaXMgY2FsbGVkIGFmdGVyIHRoZSBkaXNwYXRjaCBvZiB0aGUgcmVsZXZhbnQgc3RvcmVzLiBJZlxuICAgICAgLy8gYW55IGhhdmUgcmVwb3J0ZWQgYSBjaGFuZ2Ugd2UgdXBkYXRlIHRoZSBzdGF0ZSwgdGhlbiByZXNldCBjaGFuZ2VkLlxuICAgICAgdmFyIGNhbGxiYWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoY2hhbmdlZCkge1xuICAgICAgICAgIF90aGlzLnNldFN0YXRlKGZ1bmN0aW9uIChwcmV2U3RhdGUpIHtcbiAgICAgICAgICAgIHJldHVybiBvcHRpb25zLndpdGhQcm9wcyA/IF90aGlzLmNvbnN0cnVjdG9yLmNhbGN1bGF0ZVN0YXRlKHByZXZTdGF0ZSwgX3RoaXMucHJvcHMpIDogX3RoaXMuY29uc3RydWN0b3IuY2FsY3VsYXRlU3RhdGUocHJldlN0YXRlLCB1bmRlZmluZWQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNoYW5nZWQgPSBmYWxzZTtcbiAgICAgIH07XG4gICAgICB0aGlzLl9mbHV4TWl4aW5TdG9yZUdyb3VwID0gbmV3IEZsdXhTdG9yZUdyb3VwKHN0b3JlcywgY2FsbGJhY2spO1xuICAgIH0sXG5cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudDogZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fZmx1eE1peGluU3RvcmVHcm91cC5yZWxlYXNlKCk7XG4gICAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSB0aGlzLl9mbHV4TWl4aW5TdWJzY3JpcHRpb25zLCBfaXNBcnJheSA9IEFycmF5LmlzQXJyYXkoX2l0ZXJhdG9yKSwgX2kgPSAwLCBfaXRlcmF0b3IgPSBfaXNBcnJheSA/IF9pdGVyYXRvciA6IF9pdGVyYXRvcltTeW1ib2wuaXRlcmF0b3JdKCk7Oykge1xuICAgICAgICB2YXIgX3JlZjtcblxuICAgICAgICBpZiAoX2lzQXJyYXkpIHtcbiAgICAgICAgICBpZiAoX2kgPj0gX2l0ZXJhdG9yLmxlbmd0aCkgYnJlYWs7XG4gICAgICAgICAgX3JlZiA9IF9pdGVyYXRvcltfaSsrXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBfaSA9IF9pdGVyYXRvci5uZXh0KCk7XG4gICAgICAgICAgaWYgKF9pLmRvbmUpIGJyZWFrO1xuICAgICAgICAgIF9yZWYgPSBfaS52YWx1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBfcmVmO1xuXG4gICAgICAgIHN1YnNjcmlwdGlvbi5yZW1vdmUoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2ZsdXhNaXhpblN1YnNjcmlwdGlvbnMgPSBbXTtcbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIGVuZm9yY2VJbnRlcmZhY2Uobykge1xuICAhby5jb25zdHJ1Y3Rvci5jYWxjdWxhdGVTdGF0ZSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdDb21wb25lbnRzIHRoYXQgdXNlIEZsdXhNaXhpbkxlZ2FjeSBtdXN0IGltcGxlbWVudCAnICsgJ2BjYWxjdWxhdGVTdGF0ZSgpYCBvbiB0aGUgc3RhdGljcyBvYmplY3QnKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gRmx1eE1peGluTGVnYWN5O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9mbHV4L2xpYi9GbHV4TWl4aW5MZWdhY3kuanNcbi8vIG1vZHVsZSBpZCA9IDIxOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNC1wcmVzZW50LCBGYWNlYm9vaywgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRmx1eFJlZHVjZVN0b3JlXG4gKiBcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uJyk7IH0gfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAnZnVuY3Rpb24nICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAnICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgRmx1eFN0b3JlID0gcmVxdWlyZSgnLi9GbHV4U3RvcmUnKTtcblxudmFyIGFic3RyYWN0TWV0aG9kID0gcmVxdWlyZSgnLi9hYnN0cmFjdE1ldGhvZCcpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xuXG4vKipcbiAqIFRoaXMgaXMgdGhlIGJhc2ljIGJ1aWxkaW5nIGJsb2NrIG9mIGEgRmx1eCBhcHBsaWNhdGlvbi4gQWxsIG9mIHlvdXIgc3RvcmVzXG4gKiBzaG91bGQgZXh0ZW5kIHRoaXMgY2xhc3MuXG4gKlxuICogICBjbGFzcyBDb3VudGVyU3RvcmUgZXh0ZW5kcyBGbHV4UmVkdWNlU3RvcmU8bnVtYmVyPiB7XG4gKiAgICAgZ2V0SW5pdGlhbFN0YXRlKCk6IG51bWJlciB7XG4gKiAgICAgICByZXR1cm4gMTtcbiAqICAgICB9XG4gKlxuICogICAgIHJlZHVjZShzdGF0ZTogbnVtYmVyLCBhY3Rpb246IE9iamVjdCk6IG51bWJlciB7XG4gKiAgICAgICBzd2l0Y2goYWN0aW9uLnR5cGUpIHtcbiAqICAgICAgICAgY2FzZTogJ2FkZCc6XG4gKiAgICAgICAgICAgcmV0dXJuIHN0YXRlICsgYWN0aW9uLnZhbHVlO1xuICogICAgICAgICBjYXNlOiAnZG91YmxlJzpcbiAqICAgICAgICAgICByZXR1cm4gc3RhdGUgKiAyO1xuICogICAgICAgICBkZWZhdWx0OlxuICogICAgICAgICAgIHJldHVybiBzdGF0ZTtcbiAqICAgICAgIH1cbiAqICAgICB9XG4gKiAgIH1cbiAqL1xuXG52YXIgRmx1eFJlZHVjZVN0b3JlID0gKGZ1bmN0aW9uIChfRmx1eFN0b3JlKSB7XG4gIF9pbmhlcml0cyhGbHV4UmVkdWNlU3RvcmUsIF9GbHV4U3RvcmUpO1xuXG4gIGZ1bmN0aW9uIEZsdXhSZWR1Y2VTdG9yZShkaXNwYXRjaGVyKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZsdXhSZWR1Y2VTdG9yZSk7XG5cbiAgICBfRmx1eFN0b3JlLmNhbGwodGhpcywgZGlzcGF0Y2hlcik7XG4gICAgdGhpcy5fc3RhdGUgPSB0aGlzLmdldEluaXRpYWxTdGF0ZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHRlciB0aGF0IGV4cG9zZXMgdGhlIGVudGlyZSBzdGF0ZSBvZiB0aGlzIHN0b3JlLiBJZiB5b3VyIHN0YXRlIGlzIG5vdFxuICAgKiBpbW11dGFibGUgeW91IHNob3VsZCBvdmVycmlkZSB0aGlzIGFuZCBub3QgZXhwb3NlIF9zdGF0ZSBkaXJlY3RseS5cbiAgICovXG5cbiAgRmx1eFJlZHVjZVN0b3JlLnByb3RvdHlwZS5nZXRTdGF0ZSA9IGZ1bmN0aW9uIGdldFN0YXRlKCkge1xuICAgIHJldHVybiB0aGlzLl9zdGF0ZTtcbiAgfTtcblxuICAvKipcbiAgICogQ29uc3RydWN0cyB0aGUgaW5pdGlhbCBzdGF0ZSBmb3IgdGhpcyBzdG9yZS4gVGhpcyBpcyBjYWxsZWQgb25jZSBkdXJpbmdcbiAgICogY29uc3RydWN0aW9uIG9mIHRoZSBzdG9yZS5cbiAgICovXG5cbiAgRmx1eFJlZHVjZVN0b3JlLnByb3RvdHlwZS5nZXRJbml0aWFsU3RhdGUgPSBmdW5jdGlvbiBnZXRJbml0aWFsU3RhdGUoKSB7XG4gICAgcmV0dXJuIGFic3RyYWN0TWV0aG9kKCdGbHV4UmVkdWNlU3RvcmUnLCAnZ2V0SW5pdGlhbFN0YXRlJyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFVzZWQgdG8gcmVkdWNlIGEgc3RyZWFtIG9mIGFjdGlvbnMgY29taW5nIGZyb20gdGhlIGRpc3BhdGNoZXIgaW50byBhXG4gICAqIHNpbmdsZSBzdGF0ZSBvYmplY3QuXG4gICAqL1xuXG4gIEZsdXhSZWR1Y2VTdG9yZS5wcm90b3R5cGUucmVkdWNlID0gZnVuY3Rpb24gcmVkdWNlKHN0YXRlLCBhY3Rpb24pIHtcbiAgICByZXR1cm4gYWJzdHJhY3RNZXRob2QoJ0ZsdXhSZWR1Y2VTdG9yZScsICdyZWR1Y2UnKTtcbiAgfTtcblxuICAvKipcbiAgICogQ2hlY2tzIGlmIHR3byB2ZXJzaW9ucyBvZiBzdGF0ZSBhcmUgdGhlIHNhbWUuIFlvdSBkbyBub3QgbmVlZCB0byBvdmVycmlkZVxuICAgKiB0aGlzIGlmIHlvdXIgc3RhdGUgaXMgaW1tdXRhYmxlLlxuICAgKi9cblxuICBGbHV4UmVkdWNlU3RvcmUucHJvdG90eXBlLmFyZUVxdWFsID0gZnVuY3Rpb24gYXJlRXF1YWwob25lLCB0d28pIHtcbiAgICByZXR1cm4gb25lID09PSB0d287XG4gIH07XG5cbiAgRmx1eFJlZHVjZVN0b3JlLnByb3RvdHlwZS5fX2ludm9rZU9uRGlzcGF0Y2ggPSBmdW5jdGlvbiBfX2ludm9rZU9uRGlzcGF0Y2goYWN0aW9uKSB7XG4gICAgdGhpcy5fX2NoYW5nZWQgPSBmYWxzZTtcblxuICAgIC8vIFJlZHVjZSB0aGUgc3RyZWFtIG9mIGluY29taW5nIGFjdGlvbnMgdG8gc3RhdGUsIHVwZGF0ZSB3aGVuIG5lY2Vzc2FyeS5cbiAgICB2YXIgc3RhcnRpbmdTdGF0ZSA9IHRoaXMuX3N0YXRlO1xuICAgIHZhciBlbmRpbmdTdGF0ZSA9IHRoaXMucmVkdWNlKHN0YXJ0aW5nU3RhdGUsIGFjdGlvbik7XG5cbiAgICAvLyBUaGlzIG1lYW5zIHlvdXIgZW5kaW5nIHN0YXRlIHNob3VsZCBuZXZlciBiZSB1bmRlZmluZWQuXG4gICAgIShlbmRpbmdTdGF0ZSAhPT0gdW5kZWZpbmVkKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICclcyByZXR1cm5lZCB1bmRlZmluZWQgZnJvbSByZWR1Y2UoLi4uKSwgZGlkIHlvdSBmb3JnZXQgdG8gcmV0dXJuICcgKyAnc3RhdGUgaW4gdGhlIGRlZmF1bHQgY2FzZT8gKHVzZSBudWxsIGlmIHRoaXMgd2FzIGludGVudGlvbmFsKScsIHRoaXMuY29uc3RydWN0b3IubmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgaWYgKCF0aGlzLmFyZUVxdWFsKHN0YXJ0aW5nU3RhdGUsIGVuZGluZ1N0YXRlKSkge1xuICAgICAgdGhpcy5fc3RhdGUgPSBlbmRpbmdTdGF0ZTtcblxuICAgICAgLy8gYF9fZW1pdENoYW5nZSgpYCBzZXRzIGB0aGlzLl9fY2hhbmdlZGAgdG8gdHJ1ZSBhbmQgdGhlbiB0aGUgYWN0dWFsXG4gICAgICAvLyBjaGFuZ2Ugd2lsbCBiZSBmaXJlZCBmcm9tIHRoZSBlbWl0dGVyIGF0IHRoZSBlbmQgb2YgdGhlIGRpc3BhdGNoLCB0aGlzXG4gICAgICAvLyBpcyByZXF1aXJlZCBpbiBvcmRlciB0byBzdXBwb3J0IG1ldGhvZHMgbGlrZSBgaGFzQ2hhbmdlZCgpYFxuICAgICAgdGhpcy5fX2VtaXRDaGFuZ2UoKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fX2NoYW5nZWQpIHtcbiAgICAgIHRoaXMuX19lbWl0dGVyLmVtaXQodGhpcy5fX2NoYW5nZUV2ZW50KTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIEZsdXhSZWR1Y2VTdG9yZTtcbn0pKEZsdXhTdG9yZSk7XG5cbm1vZHVsZS5leHBvcnRzID0gRmx1eFJlZHVjZVN0b3JlO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9mbHV4L2xpYi9GbHV4UmVkdWNlU3RvcmUuanNcbi8vIG1vZHVsZSBpZCA9IDIxOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNC1wcmVzZW50LCBGYWNlYm9vaywgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRmx1eFN0b3JlXG4gKiBcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uJyk7IH0gfVxuXG52YXIgX3JlcXVpcmUgPSByZXF1aXJlKCdmYmVtaXR0ZXInKTtcblxudmFyIEV2ZW50RW1pdHRlciA9IF9yZXF1aXJlLkV2ZW50RW1pdHRlcjtcblxudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xuXG4vKipcbiAqIFRoaXMgY2xhc3MgcmVwcmVzZW50cyB0aGUgbW9zdCBiYXNpYyBmdW5jdGlvbmFsaXR5IGZvciBhIEZsdXhTdG9yZS4gRG8gbm90XG4gKiBleHRlbmQgdGhpcyBzdG9yZSBkaXJlY3RseTsgaW5zdGVhZCBleHRlbmQgRmx1eFJlZHVjZVN0b3JlIHdoZW4gY3JlYXRpbmcgYVxuICogbmV3IHN0b3JlLlxuICovXG5cbnZhciBGbHV4U3RvcmUgPSAoZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBGbHV4U3RvcmUoZGlzcGF0Y2hlcikge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRmx1eFN0b3JlKTtcblxuICAgIHRoaXMuX19jbGFzc05hbWUgPSB0aGlzLmNvbnN0cnVjdG9yLm5hbWU7XG5cbiAgICB0aGlzLl9fY2hhbmdlZCA9IGZhbHNlO1xuICAgIHRoaXMuX19jaGFuZ2VFdmVudCA9ICdjaGFuZ2UnO1xuICAgIHRoaXMuX19kaXNwYXRjaGVyID0gZGlzcGF0Y2hlcjtcbiAgICB0aGlzLl9fZW1pdHRlciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICB0aGlzLl9kaXNwYXRjaFRva2VuID0gZGlzcGF0Y2hlci5yZWdpc3RlcihmdW5jdGlvbiAocGF5bG9hZCkge1xuICAgICAgX3RoaXMuX19pbnZva2VPbkRpc3BhdGNoKHBheWxvYWQpO1xuICAgIH0pO1xuICB9XG5cbiAgRmx1eFN0b3JlLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uIGFkZExpc3RlbmVyKGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIHRoaXMuX19lbWl0dGVyLmFkZExpc3RlbmVyKHRoaXMuX19jaGFuZ2VFdmVudCwgY2FsbGJhY2spO1xuICB9O1xuXG4gIEZsdXhTdG9yZS5wcm90b3R5cGUuZ2V0RGlzcGF0Y2hlciA9IGZ1bmN0aW9uIGdldERpc3BhdGNoZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuX19kaXNwYXRjaGVyO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUaGlzIGV4cG9zZXMgYSB1bmlxdWUgc3RyaW5nIHRvIGlkZW50aWZ5IGVhY2ggc3RvcmUncyByZWdpc3RlcmVkIGNhbGxiYWNrLlxuICAgKiBUaGlzIGlzIHVzZWQgd2l0aCB0aGUgZGlzcGF0Y2hlcidzIHdhaXRGb3IgbWV0aG9kIHRvIGRlY2xhcmF0aXZlbHkgZGVwZW5kXG4gICAqIG9uIG90aGVyIHN0b3JlcyB1cGRhdGluZyB0aGVtc2VsdmVzIGZpcnN0LlxuICAgKi9cblxuICBGbHV4U3RvcmUucHJvdG90eXBlLmdldERpc3BhdGNoVG9rZW4gPSBmdW5jdGlvbiBnZXREaXNwYXRjaFRva2VuKCkge1xuICAgIHJldHVybiB0aGlzLl9kaXNwYXRjaFRva2VuO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHN0b3JlIGhhcyBjaGFuZ2VkIGR1cmluZyB0aGUgbW9zdCByZWNlbnQgZGlzcGF0Y2guXG4gICAqL1xuXG4gIEZsdXhTdG9yZS5wcm90b3R5cGUuaGFzQ2hhbmdlZCA9IGZ1bmN0aW9uIGhhc0NoYW5nZWQoKSB7XG4gICAgIXRoaXMuX19kaXNwYXRjaGVyLmlzRGlzcGF0Y2hpbmcoKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICclcy5oYXNDaGFuZ2VkKCk6IE11c3QgYmUgaW52b2tlZCB3aGlsZSBkaXNwYXRjaGluZy4nLCB0aGlzLl9fY2xhc3NOYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIHRoaXMuX19jaGFuZ2VkO1xuICB9O1xuXG4gIEZsdXhTdG9yZS5wcm90b3R5cGUuX19lbWl0Q2hhbmdlID0gZnVuY3Rpb24gX19lbWl0Q2hhbmdlKCkge1xuICAgICF0aGlzLl9fZGlzcGF0Y2hlci5pc0Rpc3BhdGNoaW5nKCkgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnJXMuX19lbWl0Q2hhbmdlKCk6IE11c3QgYmUgaW52b2tlZCB3aGlsZSBkaXNwYXRjaGluZy4nLCB0aGlzLl9fY2xhc3NOYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgdGhpcy5fX2NoYW5nZWQgPSB0cnVlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUaGlzIG1ldGhvZCBlbmNhcHN1bGF0ZXMgYWxsIGxvZ2ljIGZvciBpbnZva2luZyBfX29uRGlzcGF0Y2guIEl0IHNob3VsZFxuICAgKiBiZSB1c2VkIGZvciB0aGluZ3MgbGlrZSBjYXRjaGluZyBjaGFuZ2VzIGFuZCBlbWl0dGluZyB0aGVtIGFmdGVyIHRoZVxuICAgKiBzdWJjbGFzcyBoYXMgaGFuZGxlZCBhIHBheWxvYWQuXG4gICAqL1xuXG4gIEZsdXhTdG9yZS5wcm90b3R5cGUuX19pbnZva2VPbkRpc3BhdGNoID0gZnVuY3Rpb24gX19pbnZva2VPbkRpc3BhdGNoKHBheWxvYWQpIHtcbiAgICB0aGlzLl9fY2hhbmdlZCA9IGZhbHNlO1xuICAgIHRoaXMuX19vbkRpc3BhdGNoKHBheWxvYWQpO1xuICAgIGlmICh0aGlzLl9fY2hhbmdlZCkge1xuICAgICAgdGhpcy5fX2VtaXR0ZXIuZW1pdCh0aGlzLl9fY2hhbmdlRXZlbnQpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogVGhlIGNhbGxiYWNrIHRoYXQgd2lsbCBiZSByZWdpc3RlcmVkIHdpdGggdGhlIGRpc3BhdGNoZXIgZHVyaW5nXG4gICAqIGluc3RhbnRpYXRpb24uIFN1YmNsYXNzZXMgbXVzdCBvdmVycmlkZSB0aGlzIG1ldGhvZC4gVGhpcyBjYWxsYmFjayBpcyB0aGVcbiAgICogb25seSB3YXkgdGhlIHN0b3JlIHJlY2VpdmVzIG5ldyBkYXRhLlxuICAgKi9cblxuICBGbHV4U3RvcmUucHJvdG90eXBlLl9fb25EaXNwYXRjaCA9IGZ1bmN0aW9uIF9fb25EaXNwYXRjaChwYXlsb2FkKSB7XG4gICAgIWZhbHNlID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJyVzIGhhcyBub3Qgb3ZlcnJpZGRlbiBGbHV4U3RvcmUuX19vbkRpc3BhdGNoKCksIHdoaWNoIGlzIHJlcXVpcmVkJywgdGhpcy5fX2NsYXNzTmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICB9O1xuXG4gIHJldHVybiBGbHV4U3RvcmU7XG59KSgpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEZsdXhTdG9yZTtcblxuLy8gcHJpdmF0ZVxuXG4vLyBwcm90ZWN0ZWQsIGF2YWlsYWJsZSB0byBzdWJjbGFzc2VzXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2ZsdXgvbGliL0ZsdXhTdG9yZS5qc1xuLy8gbW9kdWxlIGlkID0gMjIwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqL1xuXG52YXIgZmJlbWl0dGVyID0ge1xuICBFdmVudEVtaXR0ZXI6IHJlcXVpcmUoJy4vbGliL0Jhc2VFdmVudEVtaXR0ZXInKSxcbiAgRW1pdHRlclN1YnNjcmlwdGlvbiA6IHJlcXVpcmUoJy4vbGliL0VtaXR0ZXJTdWJzY3JpcHRpb24nKVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBmYmVtaXR0ZXI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vZmJlbWl0dGVyL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAyMjFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBCYXNlRXZlbnRFbWl0dGVyXG4gKiBAdHlwZWNoZWNrc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24nKTsgfSB9XG5cbnZhciBFbWl0dGVyU3Vic2NyaXB0aW9uID0gcmVxdWlyZSgnLi9FbWl0dGVyU3Vic2NyaXB0aW9uJyk7XG52YXIgRXZlbnRTdWJzY3JpcHRpb25WZW5kb3IgPSByZXF1aXJlKCcuL0V2ZW50U3Vic2NyaXB0aW9uVmVuZG9yJyk7XG5cbnZhciBlbXB0eUZ1bmN0aW9uID0gcmVxdWlyZSgnZmJqcy9saWIvZW1wdHlGdW5jdGlvbicpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xuXG4vKipcbiAqIEBjbGFzcyBCYXNlRXZlbnRFbWl0dGVyXG4gKiBAZGVzY3JpcHRpb25cbiAqIEFuIEV2ZW50RW1pdHRlciBpcyByZXNwb25zaWJsZSBmb3IgbWFuYWdpbmcgYSBzZXQgb2YgbGlzdGVuZXJzIGFuZCBwdWJsaXNoaW5nXG4gKiBldmVudHMgdG8gdGhlbSB3aGVuIGl0IGlzIHRvbGQgdGhhdCBzdWNoIGV2ZW50cyBoYXBwZW5lZC4gSW4gYWRkaXRpb24gdG8gdGhlXG4gKiBkYXRhIGZvciB0aGUgZ2l2ZW4gZXZlbnQgaXQgYWxzbyBzZW5kcyBhIGV2ZW50IGNvbnRyb2wgb2JqZWN0IHdoaWNoIGFsbG93c1xuICogdGhlIGxpc3RlbmVycy9oYW5kbGVycyB0byBwcmV2ZW50IHRoZSBkZWZhdWx0IGJlaGF2aW9yIG9mIHRoZSBnaXZlbiBldmVudC5cbiAqXG4gKiBUaGUgZW1pdHRlciBpcyBkZXNpZ25lZCB0byBiZSBnZW5lcmljIGVub3VnaCB0byBzdXBwb3J0IGFsbCB0aGUgZGlmZmVyZW50XG4gKiBjb250ZXh0cyBpbiB3aGljaCBvbmUgbWlnaHQgd2FudCB0byBlbWl0IGV2ZW50cy4gSXQgaXMgYSBzaW1wbGUgbXVsdGljYXN0XG4gKiBtZWNoYW5pc20gb24gdG9wIG9mIHdoaWNoIGV4dHJhIGZ1bmN0aW9uYWxpdHkgY2FuIGJlIGNvbXBvc2VkLiBGb3IgZXhhbXBsZSwgYVxuICogbW9yZSBhZHZhbmNlZCBlbWl0dGVyIG1heSB1c2UgYW4gRXZlbnRIb2xkZXIgYW5kIEV2ZW50RmFjdG9yeS5cbiAqL1xuXG52YXIgQmFzZUV2ZW50RW1pdHRlciA9IChmdW5jdGlvbiAoKSB7XG4gIC8qKlxuICAgKiBAY29uc3RydWN0b3JcbiAgICovXG5cbiAgZnVuY3Rpb24gQmFzZUV2ZW50RW1pdHRlcigpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQmFzZUV2ZW50RW1pdHRlcik7XG5cbiAgICB0aGlzLl9zdWJzY3JpYmVyID0gbmV3IEV2ZW50U3Vic2NyaXB0aW9uVmVuZG9yKCk7XG4gICAgdGhpcy5fY3VycmVudFN1YnNjcmlwdGlvbiA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBhIGxpc3RlbmVyIHRvIGJlIGludm9rZWQgd2hlbiBldmVudHMgb2YgdGhlIHNwZWNpZmllZCB0eXBlIGFyZVxuICAgKiBlbWl0dGVkLiBBbiBvcHRpb25hbCBjYWxsaW5nIGNvbnRleHQgbWF5IGJlIHByb3ZpZGVkLiBUaGUgZGF0YSBhcmd1bWVudHNcbiAgICogZW1pdHRlZCB3aWxsIGJlIHBhc3NlZCB0byB0aGUgbGlzdGVuZXIgZnVuY3Rpb24uXG4gICAqXG4gICAqIFRPRE86IEFubm90YXRlIHRoZSBsaXN0ZW5lciBhcmcncyB0eXBlLiBUaGlzIGlzIHRyaWNreSBiZWNhdXNlIGxpc3RlbmVyc1xuICAgKiAgICAgICBjYW4gYmUgaW52b2tlZCB3aXRoIHZhcmFyZ3MuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFR5cGUgLSBOYW1lIG9mIHRoZSBldmVudCB0byBsaXN0ZW4gdG9cbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gbGlzdGVuZXIgLSBGdW5jdGlvbiB0byBpbnZva2Ugd2hlbiB0aGUgc3BlY2lmaWVkIGV2ZW50IGlzXG4gICAqICAgZW1pdHRlZFxuICAgKiBAcGFyYW0geyp9IGNvbnRleHQgLSBPcHRpb25hbCBjb250ZXh0IG9iamVjdCB0byB1c2Ugd2hlbiBpbnZva2luZyB0aGVcbiAgICogICBsaXN0ZW5lclxuICAgKi9cblxuICBCYXNlRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uIGFkZExpc3RlbmVyKGV2ZW50VHlwZSwgbGlzdGVuZXIsIGNvbnRleHQpIHtcbiAgICByZXR1cm4gdGhpcy5fc3Vic2NyaWJlci5hZGRTdWJzY3JpcHRpb24oZXZlbnRUeXBlLCBuZXcgRW1pdHRlclN1YnNjcmlwdGlvbih0aGlzLl9zdWJzY3JpYmVyLCBsaXN0ZW5lciwgY29udGV4dCkpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTaW1pbGFyIHRvIGFkZExpc3RlbmVyLCBleGNlcHQgdGhhdCB0aGUgbGlzdGVuZXIgaXMgcmVtb3ZlZCBhZnRlciBpdCBpc1xuICAgKiBpbnZva2VkIG9uY2UuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFR5cGUgLSBOYW1lIG9mIHRoZSBldmVudCB0byBsaXN0ZW4gdG9cbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gbGlzdGVuZXIgLSBGdW5jdGlvbiB0byBpbnZva2Ugb25seSBvbmNlIHdoZW4gdGhlXG4gICAqICAgc3BlY2lmaWVkIGV2ZW50IGlzIGVtaXR0ZWRcbiAgICogQHBhcmFtIHsqfSBjb250ZXh0IC0gT3B0aW9uYWwgY29udGV4dCBvYmplY3QgdG8gdXNlIHdoZW4gaW52b2tpbmcgdGhlXG4gICAqICAgbGlzdGVuZXJcbiAgICovXG5cbiAgQmFzZUV2ZW50RW1pdHRlci5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uIG9uY2UoZXZlbnRUeXBlLCBsaXN0ZW5lciwgY29udGV4dCkge1xuICAgIHZhciBlbWl0dGVyID0gdGhpcztcbiAgICByZXR1cm4gdGhpcy5hZGRMaXN0ZW5lcihldmVudFR5cGUsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGVtaXR0ZXIucmVtb3ZlQ3VycmVudExpc3RlbmVyKCk7XG4gICAgICBsaXN0ZW5lci5hcHBseShjb250ZXh0LCBhcmd1bWVudHMpO1xuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGFsbCBvZiB0aGUgcmVnaXN0ZXJlZCBsaXN0ZW5lcnMsIGluY2x1ZGluZyB0aG9zZSByZWdpc3RlcmVkIGFzXG4gICAqIGxpc3RlbmVyIG1hcHMuXG4gICAqXG4gICAqIEBwYXJhbSB7P3N0cmluZ30gZXZlbnRUeXBlIC0gT3B0aW9uYWwgbmFtZSBvZiB0aGUgZXZlbnQgd2hvc2UgcmVnaXN0ZXJlZFxuICAgKiAgIGxpc3RlbmVycyB0byByZW1vdmVcbiAgICovXG5cbiAgQmFzZUV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzID0gZnVuY3Rpb24gcmVtb3ZlQWxsTGlzdGVuZXJzKGV2ZW50VHlwZSkge1xuICAgIHRoaXMuX3N1YnNjcmliZXIucmVtb3ZlQWxsU3Vic2NyaXB0aW9ucyhldmVudFR5cGUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBQcm92aWRlcyBhbiBBUEkgdGhhdCBjYW4gYmUgY2FsbGVkIGR1cmluZyBhbiBldmVudGluZyBjeWNsZSB0byByZW1vdmUgdGhlXG4gICAqIGxhc3QgbGlzdGVuZXIgdGhhdCB3YXMgaW52b2tlZC4gVGhpcyBhbGxvd3MgYSBkZXZlbG9wZXIgdG8gcHJvdmlkZSBhbiBldmVudFxuICAgKiBvYmplY3QgdGhhdCBjYW4gcmVtb3ZlIHRoZSBsaXN0ZW5lciAob3IgbGlzdGVuZXIgbWFwKSBkdXJpbmcgdGhlXG4gICAqIGludm9jYXRpb24uXG4gICAqXG4gICAqIElmIGl0IGlzIGNhbGxlZCB3aGVuIG5vdCBpbnNpZGUgb2YgYW4gZW1pdHRpbmcgY3ljbGUgaXQgd2lsbCB0aHJvdy5cbiAgICpcbiAgICogQHRocm93cyB7RXJyb3J9IFdoZW4gY2FsbGVkIG5vdCBkdXJpbmcgYW4gZXZlbnRpbmcgY3ljbGVcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogICB2YXIgc3Vic2NyaXB0aW9uID0gZW1pdHRlci5hZGRMaXN0ZW5lck1hcCh7XG4gICAqICAgICBzb21lRXZlbnQ6IGZ1bmN0aW9uKGRhdGEsIGV2ZW50KSB7XG4gICAqICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgKiAgICAgICBlbWl0dGVyLnJlbW92ZUN1cnJlbnRMaXN0ZW5lcigpO1xuICAgKiAgICAgfVxuICAgKiAgIH0pO1xuICAgKlxuICAgKiAgIGVtaXR0ZXIuZW1pdCgnc29tZUV2ZW50JywgJ2FiYycpOyAvLyBsb2dzICdhYmMnXG4gICAqICAgZW1pdHRlci5lbWl0KCdzb21lRXZlbnQnLCAnZGVmJyk7IC8vIGRvZXMgbm90IGxvZyBhbnl0aGluZ1xuICAgKi9cblxuICBCYXNlRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVDdXJyZW50TGlzdGVuZXIgPSBmdW5jdGlvbiByZW1vdmVDdXJyZW50TGlzdGVuZXIoKSB7XG4gICAgISEhdGhpcy5fY3VycmVudFN1YnNjcmlwdGlvbiA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdOb3QgaW4gYW4gZW1pdHRpbmcgY3ljbGU7IHRoZXJlIGlzIG5vIGN1cnJlbnQgc3Vic2NyaXB0aW9uJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIHRoaXMuX3N1YnNjcmliZXIucmVtb3ZlU3Vic2NyaXB0aW9uKHRoaXMuX2N1cnJlbnRTdWJzY3JpcHRpb24pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIGxpc3RlbmVycyB0aGF0IGFyZSBjdXJyZW50bHkgcmVnaXN0ZXJlZCBmb3IgdGhlIGdpdmVuXG4gICAqIGV2ZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRUeXBlIC0gTmFtZSBvZiB0aGUgZXZlbnQgdG8gcXVlcnlcbiAgICogQHJldHVybiB7YXJyYXl9XG4gICAqL1xuXG4gIEJhc2VFdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycyA9IGZ1bmN0aW9uIGxpc3RlbmVycyhldmVudFR5cGUpIC8qIFRPRE86IEFycmF5PEV2ZW50U3Vic2NyaXB0aW9uPiAqL3tcbiAgICB2YXIgc3Vic2NyaXB0aW9ucyA9IHRoaXMuX3N1YnNjcmliZXIuZ2V0U3Vic2NyaXB0aW9uc0ZvclR5cGUoZXZlbnRUeXBlKTtcbiAgICByZXR1cm4gc3Vic2NyaXB0aW9ucyA/IHN1YnNjcmlwdGlvbnMuZmlsdGVyKGVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNUcnVlKS5tYXAoZnVuY3Rpb24gKHN1YnNjcmlwdGlvbikge1xuICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbi5saXN0ZW5lcjtcbiAgICB9KSA6IFtdO1xuICB9O1xuXG4gIC8qKlxuICAgKiBFbWl0cyBhbiBldmVudCBvZiB0aGUgZ2l2ZW4gdHlwZSB3aXRoIHRoZSBnaXZlbiBkYXRhLiBBbGwgaGFuZGxlcnMgb2YgdGhhdFxuICAgKiBwYXJ0aWN1bGFyIHR5cGUgd2lsbCBiZSBub3RpZmllZC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50VHlwZSAtIE5hbWUgb2YgdGhlIGV2ZW50IHRvIGVtaXRcbiAgICogQHBhcmFtIHsqfSBBcmJpdHJhcnkgYXJndW1lbnRzIHRvIGJlIHBhc3NlZCB0byBlYWNoIHJlZ2lzdGVyZWQgbGlzdGVuZXJcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogICBlbWl0dGVyLmFkZExpc3RlbmVyKCdzb21lRXZlbnQnLCBmdW5jdGlvbihtZXNzYWdlKSB7XG4gICAqICAgICBjb25zb2xlLmxvZyhtZXNzYWdlKTtcbiAgICogICB9KTtcbiAgICpcbiAgICogICBlbWl0dGVyLmVtaXQoJ3NvbWVFdmVudCcsICdhYmMnKTsgLy8gbG9ncyAnYWJjJ1xuICAgKi9cblxuICBCYXNlRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gZW1pdChldmVudFR5cGUpIHtcbiAgICB2YXIgc3Vic2NyaXB0aW9ucyA9IHRoaXMuX3N1YnNjcmliZXIuZ2V0U3Vic2NyaXB0aW9uc0ZvclR5cGUoZXZlbnRUeXBlKTtcbiAgICBpZiAoc3Vic2NyaXB0aW9ucykge1xuICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhzdWJzY3JpcHRpb25zKTtcbiAgICAgIGZvciAodmFyIGlpID0gMDsgaWkgPCBrZXlzLmxlbmd0aDsgaWkrKykge1xuICAgICAgICB2YXIga2V5ID0ga2V5c1tpaV07XG4gICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBzdWJzY3JpcHRpb25zW2tleV07XG4gICAgICAgIC8vIFRoZSBzdWJzY3JpcHRpb24gbWF5IGhhdmUgYmVlbiByZW1vdmVkIGR1cmluZyB0aGlzIGV2ZW50IGxvb3AuXG4gICAgICAgIGlmIChzdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICB0aGlzLl9jdXJyZW50U3Vic2NyaXB0aW9uID0gc3Vic2NyaXB0aW9uO1xuICAgICAgICAgIHRoaXMuX19lbWl0VG9TdWJzY3JpcHRpb24uYXBwbHkodGhpcywgW3N1YnNjcmlwdGlvbl0uY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5fY3VycmVudFN1YnNjcmlwdGlvbiA9IG51bGw7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBQcm92aWRlcyBhIGhvb2sgdG8gb3ZlcnJpZGUgaG93IHRoZSBlbWl0dGVyIGVtaXRzIGFuIGV2ZW50IHRvIGEgc3BlY2lmaWNcbiAgICogc3Vic2NyaXB0aW9uLiBUaGlzIGFsbG93cyB5b3UgdG8gc2V0IHVwIGxvZ2dpbmcgYW5kIGVycm9yIGJvdW5kYXJpZXNcbiAgICogc3BlY2lmaWMgdG8geW91ciBlbnZpcm9ubWVudC5cbiAgICpcbiAgICogQHBhcmFtIHtFbWl0dGVyU3Vic2NyaXB0aW9ufSBzdWJzY3JpcHRpb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50VHlwZVxuICAgKiBAcGFyYW0geyp9IEFyYml0cmFyeSBhcmd1bWVudHMgdG8gYmUgcGFzc2VkIHRvIGVhY2ggcmVnaXN0ZXJlZCBsaXN0ZW5lclxuICAgKi9cblxuICBCYXNlRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fX2VtaXRUb1N1YnNjcmlwdGlvbiA9IGZ1bmN0aW9uIF9fZW1pdFRvU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbiwgZXZlbnRUeXBlKSB7XG4gICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpO1xuICAgIHN1YnNjcmlwdGlvbi5saXN0ZW5lci5hcHBseShzdWJzY3JpcHRpb24uY29udGV4dCwgYXJncyk7XG4gIH07XG5cbiAgcmV0dXJuIEJhc2VFdmVudEVtaXR0ZXI7XG59KSgpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEJhc2VFdmVudEVtaXR0ZXI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2ZiZW1pdHRlci9saWIvQmFzZUV2ZW50RW1pdHRlci5qc1xuLy8gbW9kdWxlIGlkID0gMjIyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqIFxuICogQHByb3ZpZGVzTW9kdWxlIEVtaXR0ZXJTdWJzY3JpcHRpb25cbiAqIEB0eXBlY2hlY2tzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbicpOyB9IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gJ2Z1bmN0aW9uJyAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ1N1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgJyArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIEV2ZW50U3Vic2NyaXB0aW9uID0gcmVxdWlyZSgnLi9FdmVudFN1YnNjcmlwdGlvbicpO1xuXG4vKipcbiAqIEVtaXR0ZXJTdWJzY3JpcHRpb24gcmVwcmVzZW50cyBhIHN1YnNjcmlwdGlvbiB3aXRoIGxpc3RlbmVyIGFuZCBjb250ZXh0IGRhdGEuXG4gKi9cblxudmFyIEVtaXR0ZXJTdWJzY3JpcHRpb24gPSAoZnVuY3Rpb24gKF9FdmVudFN1YnNjcmlwdGlvbikge1xuICBfaW5oZXJpdHMoRW1pdHRlclN1YnNjcmlwdGlvbiwgX0V2ZW50U3Vic2NyaXB0aW9uKTtcblxuICAvKipcbiAgICogQHBhcmFtIHtFdmVudFN1YnNjcmlwdGlvblZlbmRvcn0gc3Vic2NyaWJlciAtIFRoZSBzdWJzY3JpYmVyIHRoYXQgY29udHJvbHNcbiAgICogICB0aGlzIHN1YnNjcmlwdGlvblxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBsaXN0ZW5lciAtIEZ1bmN0aW9uIHRvIGludm9rZSB3aGVuIHRoZSBzcGVjaWZpZWQgZXZlbnQgaXNcbiAgICogICBlbWl0dGVkXG4gICAqIEBwYXJhbSB7Kn0gY29udGV4dCAtIE9wdGlvbmFsIGNvbnRleHQgb2JqZWN0IHRvIHVzZSB3aGVuIGludm9raW5nIHRoZVxuICAgKiAgIGxpc3RlbmVyXG4gICAqL1xuXG4gIGZ1bmN0aW9uIEVtaXR0ZXJTdWJzY3JpcHRpb24oc3Vic2NyaWJlciwgbGlzdGVuZXIsIGNvbnRleHQpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRW1pdHRlclN1YnNjcmlwdGlvbik7XG5cbiAgICBfRXZlbnRTdWJzY3JpcHRpb24uY2FsbCh0aGlzLCBzdWJzY3JpYmVyKTtcbiAgICB0aGlzLmxpc3RlbmVyID0gbGlzdGVuZXI7XG4gICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgfVxuXG4gIHJldHVybiBFbWl0dGVyU3Vic2NyaXB0aW9uO1xufSkoRXZlbnRTdWJzY3JpcHRpb24pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEVtaXR0ZXJTdWJzY3JpcHRpb247XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2ZiZW1pdHRlci9saWIvRW1pdHRlclN1YnNjcmlwdGlvbi5qc1xuLy8gbW9kdWxlIGlkID0gMjIzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRXZlbnRTdWJzY3JpcHRpb25cbiAqIEB0eXBlY2hlY2tzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEV2ZW50U3Vic2NyaXB0aW9uIHJlcHJlc2VudHMgYSBzdWJzY3JpcHRpb24gdG8gYSBwYXJ0aWN1bGFyIGV2ZW50LiBJdCBjYW5cbiAqIHJlbW92ZSBpdHMgb3duIHN1YnNjcmlwdGlvbi5cbiAqL1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbicpOyB9IH1cblxudmFyIEV2ZW50U3Vic2NyaXB0aW9uID0gKGZ1bmN0aW9uICgpIHtcblxuICAvKipcbiAgICogQHBhcmFtIHtFdmVudFN1YnNjcmlwdGlvblZlbmRvcn0gc3Vic2NyaWJlciB0aGUgc3Vic2NyaWJlciB0aGF0IGNvbnRyb2xzXG4gICAqICAgdGhpcyBzdWJzY3JpcHRpb24uXG4gICAqL1xuXG4gIGZ1bmN0aW9uIEV2ZW50U3Vic2NyaXB0aW9uKHN1YnNjcmliZXIpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRXZlbnRTdWJzY3JpcHRpb24pO1xuXG4gICAgdGhpcy5zdWJzY3JpYmVyID0gc3Vic2NyaWJlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIHRoaXMgc3Vic2NyaXB0aW9uIGZyb20gdGhlIHN1YnNjcmliZXIgdGhhdCBjb250cm9scyBpdC5cbiAgICovXG5cbiAgRXZlbnRTdWJzY3JpcHRpb24ucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgICBpZiAodGhpcy5zdWJzY3JpYmVyKSB7XG4gICAgICB0aGlzLnN1YnNjcmliZXIucmVtb3ZlU3Vic2NyaXB0aW9uKHRoaXMpO1xuICAgICAgdGhpcy5zdWJzY3JpYmVyID0gbnVsbDtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIEV2ZW50U3Vic2NyaXB0aW9uO1xufSkoKTtcblxubW9kdWxlLmV4cG9ydHMgPSBFdmVudFN1YnNjcmlwdGlvbjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vZmJlbWl0dGVyL2xpYi9FdmVudFN1YnNjcmlwdGlvbi5qc1xuLy8gbW9kdWxlIGlkID0gMjI0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqIFxuICogQHByb3ZpZGVzTW9kdWxlIEV2ZW50U3Vic2NyaXB0aW9uVmVuZG9yXG4gKiBAdHlwZWNoZWNrc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24nKTsgfSB9XG5cbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcblxuLyoqXG4gKiBFdmVudFN1YnNjcmlwdGlvblZlbmRvciBzdG9yZXMgYSBzZXQgb2YgRXZlbnRTdWJzY3JpcHRpb25zIHRoYXQgYXJlXG4gKiBzdWJzY3JpYmVkIHRvIGEgcGFydGljdWxhciBldmVudCB0eXBlLlxuICovXG5cbnZhciBFdmVudFN1YnNjcmlwdGlvblZlbmRvciA9IChmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEV2ZW50U3Vic2NyaXB0aW9uVmVuZG9yKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBFdmVudFN1YnNjcmlwdGlvblZlbmRvcik7XG5cbiAgICB0aGlzLl9zdWJzY3JpcHRpb25zRm9yVHlwZSA9IHt9O1xuICAgIHRoaXMuX2N1cnJlbnRTdWJzY3JpcHRpb24gPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYSBzdWJzY3JpcHRpb24ga2V5ZWQgYnkgYW4gZXZlbnQgdHlwZS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50VHlwZVxuICAgKiBAcGFyYW0ge0V2ZW50U3Vic2NyaXB0aW9ufSBzdWJzY3JpcHRpb25cbiAgICovXG5cbiAgRXZlbnRTdWJzY3JpcHRpb25WZW5kb3IucHJvdG90eXBlLmFkZFN1YnNjcmlwdGlvbiA9IGZ1bmN0aW9uIGFkZFN1YnNjcmlwdGlvbihldmVudFR5cGUsIHN1YnNjcmlwdGlvbikge1xuICAgICEoc3Vic2NyaXB0aW9uLnN1YnNjcmliZXIgPT09IHRoaXMpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1RoZSBzdWJzY3JpYmVyIG9mIHRoZSBzdWJzY3JpcHRpb24gaXMgaW5jb3JyZWN0bHkgc2V0LicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICBpZiAoIXRoaXMuX3N1YnNjcmlwdGlvbnNGb3JUeXBlW2V2ZW50VHlwZV0pIHtcbiAgICAgIHRoaXMuX3N1YnNjcmlwdGlvbnNGb3JUeXBlW2V2ZW50VHlwZV0gPSBbXTtcbiAgICB9XG4gICAgdmFyIGtleSA9IHRoaXMuX3N1YnNjcmlwdGlvbnNGb3JUeXBlW2V2ZW50VHlwZV0ubGVuZ3RoO1xuICAgIHRoaXMuX3N1YnNjcmlwdGlvbnNGb3JUeXBlW2V2ZW50VHlwZV0ucHVzaChzdWJzY3JpcHRpb24pO1xuICAgIHN1YnNjcmlwdGlvbi5ldmVudFR5cGUgPSBldmVudFR5cGU7XG4gICAgc3Vic2NyaXB0aW9uLmtleSA9IGtleTtcbiAgICByZXR1cm4gc3Vic2NyaXB0aW9uO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGEgYnVsayBzZXQgb2YgdGhlIHN1YnNjcmlwdGlvbnMuXG4gICAqXG4gICAqIEBwYXJhbSB7P3N0cmluZ30gZXZlbnRUeXBlIC0gT3B0aW9uYWwgbmFtZSBvZiB0aGUgZXZlbnQgdHlwZSB3aG9zZVxuICAgKiAgIHJlZ2lzdGVyZWQgc3Vwc2NyaXB0aW9ucyB0byByZW1vdmUsIGlmIG51bGwgcmVtb3ZlIGFsbCBzdWJzY3JpcHRpb25zLlxuICAgKi9cblxuICBFdmVudFN1YnNjcmlwdGlvblZlbmRvci5wcm90b3R5cGUucmVtb3ZlQWxsU3Vic2NyaXB0aW9ucyA9IGZ1bmN0aW9uIHJlbW92ZUFsbFN1YnNjcmlwdGlvbnMoZXZlbnRUeXBlKSB7XG4gICAgaWYgKGV2ZW50VHlwZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLl9zdWJzY3JpcHRpb25zRm9yVHlwZSA9IHt9O1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWxldGUgdGhpcy5fc3Vic2NyaXB0aW9uc0ZvclR5cGVbZXZlbnRUeXBlXTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYSBzcGVjaWZpYyBzdWJzY3JpcHRpb24uIEluc3RlYWQgb2YgY2FsbGluZyB0aGlzIGZ1bmN0aW9uLCBjYWxsXG4gICAqIGBzdWJzY3JpcHRpb24ucmVtb3ZlKClgIGRpcmVjdGx5LlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gc3Vic2NyaXB0aW9uXG4gICAqL1xuXG4gIEV2ZW50U3Vic2NyaXB0aW9uVmVuZG9yLnByb3RvdHlwZS5yZW1vdmVTdWJzY3JpcHRpb24gPSBmdW5jdGlvbiByZW1vdmVTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uKSB7XG4gICAgdmFyIGV2ZW50VHlwZSA9IHN1YnNjcmlwdGlvbi5ldmVudFR5cGU7XG4gICAgdmFyIGtleSA9IHN1YnNjcmlwdGlvbi5rZXk7XG5cbiAgICB2YXIgc3Vic2NyaXB0aW9uc0ZvclR5cGUgPSB0aGlzLl9zdWJzY3JpcHRpb25zRm9yVHlwZVtldmVudFR5cGVdO1xuICAgIGlmIChzdWJzY3JpcHRpb25zRm9yVHlwZSkge1xuICAgICAgZGVsZXRlIHN1YnNjcmlwdGlvbnNGb3JUeXBlW2tleV07XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBhcnJheSBvZiBzdWJzY3JpcHRpb25zIHRoYXQgYXJlIGN1cnJlbnRseSByZWdpc3RlcmVkIGZvciB0aGVcbiAgICogZ2l2ZW4gZXZlbnQgdHlwZS5cbiAgICpcbiAgICogTm90ZTogVGhpcyBhcnJheSBjYW4gYmUgcG90ZW50aWFsbHkgc3BhcnNlIGFzIHN1YnNjcmlwdGlvbnMgYXJlIGRlbGV0ZWRcbiAgICogZnJvbSBpdCB3aGVuIHRoZXkgYXJlIHJlbW92ZWQuXG4gICAqXG4gICAqIFRPRE86IFRoaXMgcmV0dXJucyBhIG51bGxhYmxlIGFycmF5LiB3YXQ/XG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFR5cGVcbiAgICogQHJldHVybiB7P2FycmF5fVxuICAgKi9cblxuICBFdmVudFN1YnNjcmlwdGlvblZlbmRvci5wcm90b3R5cGUuZ2V0U3Vic2NyaXB0aW9uc0ZvclR5cGUgPSBmdW5jdGlvbiBnZXRTdWJzY3JpcHRpb25zRm9yVHlwZShldmVudFR5cGUpIHtcbiAgICByZXR1cm4gdGhpcy5fc3Vic2NyaXB0aW9uc0ZvclR5cGVbZXZlbnRUeXBlXTtcbiAgfTtcblxuICByZXR1cm4gRXZlbnRTdWJzY3JpcHRpb25WZW5kb3I7XG59KSgpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEV2ZW50U3Vic2NyaXB0aW9uVmVuZG9yO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9mYmVtaXR0ZXIvbGliL0V2ZW50U3Vic2NyaXB0aW9uVmVuZG9yLmpzXG4vLyBtb2R1bGUgaWQgPSAyMjVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIFVzZSBpbnZhcmlhbnQoKSB0byBhc3NlcnQgc3RhdGUgd2hpY2ggeW91ciBwcm9ncmFtIGFzc3VtZXMgdG8gYmUgdHJ1ZS5cbiAqXG4gKiBQcm92aWRlIHNwcmludGYtc3R5bGUgZm9ybWF0IChvbmx5ICVzIGlzIHN1cHBvcnRlZCkgYW5kIGFyZ3VtZW50c1xuICogdG8gcHJvdmlkZSBpbmZvcm1hdGlvbiBhYm91dCB3aGF0IGJyb2tlIGFuZCB3aGF0IHlvdSB3ZXJlXG4gKiBleHBlY3RpbmcuXG4gKlxuICogVGhlIGludmFyaWFudCBtZXNzYWdlIHdpbGwgYmUgc3RyaXBwZWQgaW4gcHJvZHVjdGlvbiwgYnV0IHRoZSBpbnZhcmlhbnRcbiAqIHdpbGwgcmVtYWluIHRvIGVuc3VyZSBsb2dpYyBkb2VzIG5vdCBkaWZmZXIgaW4gcHJvZHVjdGlvbi5cbiAqL1xuXG52YXIgdmFsaWRhdGVGb3JtYXQgPSBmdW5jdGlvbiB2YWxpZGF0ZUZvcm1hdChmb3JtYXQpIHt9O1xuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICB2YWxpZGF0ZUZvcm1hdCA9IGZ1bmN0aW9uIHZhbGlkYXRlRm9ybWF0KGZvcm1hdCkge1xuICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhcmlhbnQgcmVxdWlyZXMgYW4gZXJyb3IgbWVzc2FnZSBhcmd1bWVudCcpO1xuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gaW52YXJpYW50KGNvbmRpdGlvbiwgZm9ybWF0LCBhLCBiLCBjLCBkLCBlLCBmKSB7XG4gIHZhbGlkYXRlRm9ybWF0KGZvcm1hdCk7XG5cbiAgaWYgKCFjb25kaXRpb24pIHtcbiAgICB2YXIgZXJyb3I7XG4gICAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBlcnJvciA9IG5ldyBFcnJvcignTWluaWZpZWQgZXhjZXB0aW9uIG9jY3VycmVkOyB1c2UgdGhlIG5vbi1taW5pZmllZCBkZXYgZW52aXJvbm1lbnQgJyArICdmb3IgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZSBhbmQgYWRkaXRpb25hbCBoZWxwZnVsIHdhcm5pbmdzLicpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgYXJncyA9IFthLCBiLCBjLCBkLCBlLCBmXTtcbiAgICAgIHZhciBhcmdJbmRleCA9IDA7XG4gICAgICBlcnJvciA9IG5ldyBFcnJvcihmb3JtYXQucmVwbGFjZSgvJXMvZywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gYXJnc1thcmdJbmRleCsrXTtcbiAgICAgIH0pKTtcbiAgICAgIGVycm9yLm5hbWUgPSAnSW52YXJpYW50IFZpb2xhdGlvbic7XG4gICAgfVxuXG4gICAgZXJyb3IuZnJhbWVzVG9Qb3AgPSAxOyAvLyB3ZSBkb24ndCBjYXJlIGFib3V0IGludmFyaWFudCdzIG93biBmcmFtZVxuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaW52YXJpYW50O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9mYmVtaXR0ZXIvfi9mYmpzL2xpYi9pbnZhcmlhbnQuanNcbi8vIG1vZHVsZSBpZCA9IDIyNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcblxuLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBcbiAqL1xuXG5mdW5jdGlvbiBtYWtlRW1wdHlGdW5jdGlvbihhcmcpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gYXJnO1xuICB9O1xufVxuXG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gYWNjZXB0cyBhbmQgZGlzY2FyZHMgaW5wdXRzOyBpdCBoYXMgbm8gc2lkZSBlZmZlY3RzLiBUaGlzIGlzXG4gKiBwcmltYXJpbHkgdXNlZnVsIGlkaW9tYXRpY2FsbHkgZm9yIG92ZXJyaWRhYmxlIGZ1bmN0aW9uIGVuZHBvaW50cyB3aGljaFxuICogYWx3YXlzIG5lZWQgdG8gYmUgY2FsbGFibGUsIHNpbmNlIEpTIGxhY2tzIGEgbnVsbC1jYWxsIGlkaW9tIGFsYSBDb2NvYS5cbiAqL1xudmFyIGVtcHR5RnVuY3Rpb24gPSBmdW5jdGlvbiBlbXB0eUZ1bmN0aW9uKCkge307XG5cbmVtcHR5RnVuY3Rpb24udGhhdFJldHVybnMgPSBtYWtlRW1wdHlGdW5jdGlvbjtcbmVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNGYWxzZSA9IG1ha2VFbXB0eUZ1bmN0aW9uKGZhbHNlKTtcbmVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNUcnVlID0gbWFrZUVtcHR5RnVuY3Rpb24odHJ1ZSk7XG5lbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zTnVsbCA9IG1ha2VFbXB0eUZ1bmN0aW9uKG51bGwpO1xuZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc1RoaXMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzO1xufTtcbmVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNBcmd1bWVudCA9IGZ1bmN0aW9uIChhcmcpIHtcbiAgcmV0dXJuIGFyZztcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZW1wdHlGdW5jdGlvbjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vZmJlbWl0dGVyL34vZmJqcy9saWIvZW1wdHlGdW5jdGlvbi5qc1xuLy8gbW9kdWxlIGlkID0gMjI3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgYWJzdHJhY3RNZXRob2RcbiAqIFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xuXG5mdW5jdGlvbiBhYnN0cmFjdE1ldGhvZChjbGFzc05hbWUsIG1ldGhvZE5hbWUpIHtcbiAgIWZhbHNlID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1N1YmNsYXNzZXMgb2YgJXMgbXVzdCBvdmVycmlkZSAlcygpIHdpdGggdGhlaXIgb3duIGltcGxlbWVudGF0aW9uLicsIGNsYXNzTmFtZSwgbWV0aG9kTmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGFic3RyYWN0TWV0aG9kO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9mbHV4L2xpYi9hYnN0cmFjdE1ldGhvZC5qc1xuLy8gbW9kdWxlIGlkID0gMjI4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImltcG9ydCBJbW11dGFibGUgZnJvbSAnaW1tdXRhYmxlJztcbmltcG9ydCB7IFJlZHVjZVN0b3JlIH0gZnJvbSAnZmx1eC91dGlscyc7XG5pbXBvcnQgQWN0aW9uVHlwZXMgZnJvbSAnLi9hY3Rpb25UeXBlcy5qcyc7XG5pbXBvcnQgRGlzcGF0Y2hlciBmcm9tICcuL2Rpc3BhdGNoZXIuanMnO1xuaW1wb3J0IE1ENSBmcm9tICdqcy1tZDUnO1xuXG5jbGFzcyBSZWNpcGVTdG9yZSBleHRlbmRzIFJlZHVjZVN0b3JlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoRGlzcGF0Y2hlcik7XG4gICAgfVxuXG4gICAgZ2V0SW5pdGlhbFN0YXRlKCkge1xuICAgICAgICB2YXIgbmV3UmVjaXBlID0ge2lkOiBcIm5ld1wifTtcbiAgICAgICAgdmFyIHVzZXJTZXR0aW5ncyA9IHsgaWQ6IFwidXNlclwiLCBhY3RpdmU6IGZhbHNlIH07XG4gICAgICAgIHZhciBub3RpZnkgPSB7IGFjdGl2ZTogZmFsc2UsIHRpbWVyOiBudWxsLCBtZXNzYWdlOiBcIlwiLCB0eXBlOiBcIlwiIH07XG5cbiAgICAgICAgLy8gR2V0IGhvbWUgZmVlZCBvbiBpbml0aWFsIGxvYWRcbiAgICAgICAgdmFyIGhvbWUgPSB7IGlkOiBcImhvbWVcIiwgYWN0aXZlOiB0cnVlLCByZWNlbnRGZWVkOiBbXSB9O1xuICAgICAgICB0aGlzLl9wcm9jZXNzQWN0aW9uKFxuICAgICAgICAgICAgeyBhY3Rpb24gOiBcIkdFVF9EQVRBX1JFQ0VOVF9GRUVEXCIgfSwgXG4gICAgICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGhvbWUucmVjZW50RmVlZCA9IHJlc3BvbnNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIGZhbHNlXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gU2VlIGlmIHRoZSB1c2VyIGlzIGFscmVhZHkgbG9nZ2VkIGluXG4gICAgICAgIHZhciB1c2VyID0gbnVsbDtcbiAgICAgICAgdGhpcy5fcHJvY2Vzc0FjdGlvbihcbiAgICAgICAgICAgIHsgYWN0aW9uIDogXCJMT0dJTlwiIH0sIFxuICAgICAgICAgICAgZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgIT0gbnVsbCAmJiByZXNwb25zZS5zdGF0dXMgPT0gXCJzdWNjZXNzXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdXNlciA9IHJlc3BvbnNlLnVzZXI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgZmFsc2VcbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIHZhciBhdXRoZW50aWNhdGUgPSB7IGFjdGl2ZTogZmFsc2UsIHR5cGU6IFwibG9naW5cIiB9O1xuICAgICAgICBpZiAobG9jYXRpb24uaGFzaCAmJiBsb2NhdGlvbi5oYXNoLmluZGV4T2YoXCJrZXlcIikgIT0gLTEgJiYgbG9jYXRpb24uaGFzaC5pbmRleE9mKFwiaWRcIikgIT0gLTEmJiBsb2NhdGlvbi5oYXNoLmluZGV4T2YoXCJuYW1lXCIpICE9IC0xKSB7XG4gICAgICAgICAgICBhdXRoZW50aWNhdGUuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgIGF1dGhlbnRpY2F0ZS50eXBlID0gXCJyZXNldFwiO1xuXG4gICAgICAgICAgICAvLyBUcmltIG9mZiB0aGUgZmlyc3QgY2hhcmVjdGVyIGFuZCBzcGxpdCBvbiB2YWx1ZXNcbiAgICAgICAgICAgIHZhciBwYWlycyA9IGxvY2F0aW9uLmhhc2guc2xpY2UoMSkuc3BsaXQoXCImXCIpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYWlycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBwYWlyc1tpXS5zcGxpdChcIj1cIilbMF07XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gcGFpcnNbaV0uc3BsaXQoXCI9XCIpWzFdO1xuICAgICAgICAgICAgICAgIGlmIChrZXkgPT0gXCJuYW1lXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgYXV0aGVudGljYXRlLnVzZXIgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGtleSA9PSBcImlkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgYXV0aGVudGljYXRlLnVzZXJJZCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoa2V5ID09IFwia2V5XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgYXV0aGVudGljYXRlLmtleSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbG9jYXRpb24uaGFzaCA9IFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGF1dGhlbnRpY2F0ZTogYXV0aGVudGljYXRlLFxuICAgICAgICAgICAgdXNlcjogdXNlcixcbiAgICAgICAgICAgIG5vdGlmeTogbm90aWZ5LFxuICAgICAgICAgICAgb3BlbjogW2hvbWUsIHVzZXJTZXR0aW5ncywgbmV3UmVjaXBlXVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIF9wcm9jZXNzQWN0aW9uKGFjdGlvbiwgY2FsbGJhY2ssIGFzeW5jKSB7XG4gICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyBTdWNjZXNzIGlzIDRcbiAgICAgICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PSA0KSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gSlNPTi5wYXJzZSh0aGlzLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2socmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB4aHIub3BlbignUE9TVCcsICdwcm9jZXNzQWN0aW9uLnBocCcsIGFzeW5jKTtcbiAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgICAgIHhoci5zZW5kKEpTT04uc3RyaW5naWZ5KGFjdGlvbikpO1xuICAgIH1cblxuICAgIF9wcm9jZXNzQ29udGVudChsaXN0LCBpdGVtKSB7XG4gICAgICAgIHZhciBuZXdJdGVtID0ge1xuICAgICAgICAgICAgaWQ6IGl0ZW0uaWQsXG4gICAgICAgICAgICBhY3RpdmU6IHRydWUsXG4gICAgICAgICAgICByZWNpcGU6IGl0ZW1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBpc09wZW4gPSBmYWxzZTtcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxpc3RbaV0uYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAobGlzdFtpXS5pZCA9PSBpdGVtLmlkKSB7XG4gICAgICAgICAgICAgICAgbGlzdFtpXSA9IG5ld0l0ZW07XG4gICAgICAgICAgICAgICAgaXNPcGVuID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghaXNPcGVuKSB7XG4gICAgICAgICAgICBsaXN0LnB1c2gobmV3SXRlbSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfb3BlbkNvbnRlbnQobGlzdCwga2V5KSB7XG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsaXN0W2ldLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKGxpc3RbaV0uaWQgPT0ga2V5KSB7XG4gICAgICAgICAgICAgICAgbGlzdFtpXS5hY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgX3VwZGF0ZUFjdGl2ZVJlY2lwZShjYWxsYmFjaykge1xuICAgICAgICB2YXIgcmVjaXBlID0ge307XG4gICAgICAgIHZhciBjdXJyU3RhdGUgPSB0aGlzLmdldFN0YXRlKCk7XG5cbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGN1cnJTdGF0ZS5vcGVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoY3VyclN0YXRlLm9wZW5baV0uYWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgY3VyclN0YXRlLm9wZW5baV0ucmVjaXBlID0gY2FsbGJhY2soY3VyclN0YXRlLm9wZW5baV0ucmVjaXBlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjdXJyU3RhdGU7XG4gICAgfVxuXG4gICAgcmVkdWNlKHN0YXRlLCBhY3Rpb24pIHtcbiAgICAgICAgc3dpdGNoIChhY3Rpb24uYWN0aW9uKSB7XG4gICAgICAgICAgICBjYXNlIEFjdGlvblR5cGVzLk5PVElGWTpcbiAgICAgICAgICAgICAgICBzdGF0ZS5ub3RpZnkgPSB7IFxuICAgICAgICAgICAgICAgICAgICBhY3RpdmU6IGFjdGlvbi5hY3RpdmUsIFxuICAgICAgICAgICAgICAgICAgICB0aW1lcjogYWN0aW9uLnRpbWVyLCBcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogKGFjdGlvbi5tZXNzYWdlP2FjdGlvbi5tZXNzYWdlOnN0YXRlLm5vdGlmeS5tZXNzYWdlKSwgXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IChhY3Rpb24udHlwZT9hY3Rpb24udHlwZTpzdGF0ZS5ub3RpZnkudHlwZSlcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIEltbXV0YWJsZS5mcm9tSlMoc3RhdGUpLnRvSlMoKTtcbiAgICAgICAgICAgIGNhc2UgQWN0aW9uVHlwZXMuQVVUSEVOVElDQVRFOlxuICAgICAgICAgICAgICAgIGlmIChhY3Rpb24uYWN0aXZlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuYXV0aGVudGljYXRlLmFjdGl2ZSA9IGFjdGlvbi5hY3RpdmVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGFjdGlvbi50eXBlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuYXV0aGVudGljYXRlLnR5cGUgPSBhY3Rpb24udHlwZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gSW1tdXRhYmxlLmZyb21KUyhzdGF0ZSkudG9KUygpO1xuICAgICAgICAgICAgY2FzZSBBY3Rpb25UeXBlcy5VUERBVEVfVVNFUl9TVEFUVVM6XG4gICAgICAgICAgICAgICAgYWN0aW9uLnVybCA9IGxvY2F0aW9uLm9yaWdpbjtcbiAgICAgICAgICAgICAgICB0aGlzLl9wcm9jZXNzQWN0aW9uKGFjdGlvbiwgbnVsbCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgICAgICAgICAgY2FzZSBBY3Rpb25UeXBlcy5VUERBVEVfUEFTU1dPUkQ6XG4gICAgICAgICAgICAgICAgdmFyIHN0b3JlID0gdGhpcztcbiAgICAgICAgICAgICAgICBhY3Rpb24ubmV3UGFzc3dvcmQgPSBNRDUoYWN0aW9uLm5ld1Bhc3N3b3JkKTtcbiAgICAgICAgICAgICAgICB2YXIgY2FsbGJhY2sgPSBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLnVzZXIgPSByZXNwb25zZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLmF1dGhlbnRpY2F0ZS5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuX3Byb2Nlc3NBY3Rpb24oYWN0aW9uLCBjYWxsYmFjaywgZmFsc2UpO1xuICAgICAgICAgICAgICAgIHJldHVybiBJbW11dGFibGUuZnJvbUpTKHN0YXRlKS50b0pTKCk7XG4gICAgICAgICAgICBjYXNlIEFjdGlvblR5cGVzLlJFR0lTVEVSOlxuICAgICAgICAgICAgICAgIHZhciBzdG9yZSA9IHRoaXM7XG4gICAgICAgICAgICAgICAgdmFyIGNhbGxiYWNrID0gZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYWN0aW9uLmNhbGxiYWNrID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb24uY2FsbGJhY2socmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgMClcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuX3Byb2Nlc3NBY3Rpb24oYWN0aW9uLCBjYWxsYmFjaywgZmFsc2UpO1xuICAgICAgICAgICAgICAgIHJldHVybiBJbW11dGFibGUuZnJvbUpTKHN0YXRlKS50b0pTKCk7XG4gICAgICAgICAgICBjYXNlIEFjdGlvblR5cGVzLkxPR0lOOlxuICAgICAgICAgICAgICAgIHZhciBzdG9yZSA9IHRoaXM7XG4gICAgICAgICAgICAgICAgYWN0aW9uLnBhc3N3b3JkID0gTUQ1KGFjdGlvbi5wYXNzd29yZCk7XG4gICAgICAgICAgICAgICAgdmFyIGNhbGxiYWNrID0gZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT0gXCJzdWNjZXNzXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLnVzZXIgPSByZXNwb25zZS51c2VyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYWN0aW9uLmNhbGxiYWNrID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb24uY2FsbGJhY2socmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgMClcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuX3Byb2Nlc3NBY3Rpb24oYWN0aW9uLCBjYWxsYmFjaywgZmFsc2UpO1xuICAgICAgICAgICAgICAgIHJldHVybiBJbW11dGFibGUuZnJvbUpTKHN0YXRlKS50b0pTKCk7XG4gICAgICAgICAgICBjYXNlIEFjdGlvblR5cGVzLkxPR09VVDpcbiAgICAgICAgICAgICAgICB2YXIgc3RvcmUgPSB0aGlzO1xuICAgICAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9IHN0b3JlLmdldEluaXRpYWxTdGF0ZSgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuX3Byb2Nlc3NBY3Rpb24oYWN0aW9uLCBjYWxsYmFjaywgZmFsc2UpO1xuICAgICAgICAgICAgICAgIHJldHVybiBJbW11dGFibGUuZnJvbUpTKHN0YXRlKS50b0pTKCk7XG4gICAgICAgICAgICBjYXNlIEFjdGlvblR5cGVzLk9QRU5fQ09OVEVOVDpcbiAgICAgICAgICAgICAgICB0aGlzLl9vcGVuQ29udGVudChzdGF0ZS5vcGVuLCBhY3Rpb24ua2V5KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gSW1tdXRhYmxlLmZyb21KUyhzdGF0ZSkudG9KUygpOyBcbiAgICAgICAgICAgIGNhc2UgQWN0aW9uVHlwZXMuU0VSVkVSX1JFUVVFU1Q6XG4gICAgICAgICAgICAgICAgdGhpcy5fcHJvY2Vzc0FjdGlvbihhY3Rpb24uZGF0YSwgYWN0aW9uLmNhbGxiYWNrLCBhY3Rpb24uYXN5bmMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICAgICAgICAgIGNhc2UgQWN0aW9uVHlwZXMuU0FWRV9SRUNJUEU6XG4gICAgICAgICAgICAgICAgdGhpcy5fcHJvY2Vzc0FjdGlvbihhY3Rpb24sIG51bGwsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgICAgICAgICBjYXNlIEFjdGlvblR5cGVzLkdFVF9SRUNJUEU6XG4gICAgICAgICAgICAgICAgdmFyIHN0b3JlID0gdGhpcztcbiAgICAgICAgICAgICAgICB2YXIgY2FsbGJhY2sgPSBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RvcmUuX3Byb2Nlc3NDb250ZW50KHN0YXRlLm9wZW4sIHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLl9wcm9jZXNzQWN0aW9uKGFjdGlvbiwgY2FsbGJhY2ssIGZhbHNlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gSW1tdXRhYmxlLmZyb21KUyhzdGF0ZSkudG9KUygpO1xuICAgICAgICAgICAgY2FzZSBBY3Rpb25UeXBlcy5ORVdfUkVDSVBFOlxuICAgICAgICAgICAgICAgIHZhciBzdG9yZSA9IHRoaXM7XG4gICAgICAgICAgICAgICAgdmFyIGNhbGxiYWNrID0gZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0b3JlLl9wcm9jZXNzQ29udGVudChzdGF0ZS5vcGVuLCByZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5fcHJvY2Vzc0FjdGlvbihhY3Rpb24sIGNhbGxiYWNrLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEltbXV0YWJsZS5mcm9tSlMoc3RhdGUpLnRvSlMoKTtcbiAgICAgICAgICAgIGNhc2UgQWN0aW9uVHlwZXMuQ0xPU0VfUkVDSVBFOlxuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IG51bGw7XG4gICAgICAgICAgICAgICAgdmFyIGlzQWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGF0ZS5vcGVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5vcGVuW2ldLmlkID09IGFjdGlvbi5pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSBpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLm9wZW5baV0uYWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNBY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGlzQWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RhdGUub3Blbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLm9wZW5baV0uaWQgPT0gXCJob21lXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5vcGVuW2ldLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5vcGVuLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBJbW11dGFibGUuZnJvbUpTKHN0YXRlKS50b0pTKCk7XG4gICAgICAgICAgICBjYXNlIEFjdGlvblR5cGVzLkFERF9JTkdSRURJRU5UOlxuICAgICAgICAgICAgICAgIHN0YXRlID0gdGhpcy5fdXBkYXRlQWN0aXZlUmVjaXBlKGZ1bmN0aW9uKHJlY2lwZSkge1xuICAgICAgICAgICAgICAgICAgICByZWNpcGUuaW5ncmVkaWVudHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuaXQ6IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmdyZWRpZW50TmFtZTogXCJcIlxuICAgICAgICAgICAgICAgICAgICB9KTsgIFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVjaXBlO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIEltbXV0YWJsZS5mcm9tSlMoc3RhdGUpLnRvSlMoKTtcbiAgICAgICAgICAgIGNhc2UgQWN0aW9uVHlwZXMuQUREX1NURVA6XG4gICAgICAgICAgICAgICAgc3RhdGUgPSB0aGlzLl91cGRhdGVBY3RpdmVSZWNpcGUoZnVuY3Rpb24ocmVjaXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlY2lwZS5zdGVwcyArPSBcInxcIjtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlY2lwZTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBJbW11dGFibGUuZnJvbUpTKHN0YXRlKS50b0pTKCk7XG4gICAgICAgICAgICBjYXNlIEFjdGlvblR5cGVzLlVQREFURV9WQUxVRTpcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiVXBkYXRlOiBcIiArIGFjdGlvbi5rZXkgKyBcIiB3aXRoIFwiICsgYWN0aW9uLnZhbHVlKTtcbiAgICAgICAgICAgICAgICBzdGF0ZSA9IHRoaXMuX3VwZGF0ZUFjdGl2ZVJlY2lwZShmdW5jdGlvbihyZWNpcGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVjaXBlW2FjdGlvbi5rZXldID0gYWN0aW9uLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVjaXBlO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIEltbXV0YWJsZS5mcm9tSlMoc3RhdGUpLnRvSlMoKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJkZWZhdWx0XCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgbmV3IFJlY2lwZVN0b3JlKCk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vcm9vdC9saWIvcmVjaXBlU3RvcmUuanMiLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNC1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcbiAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcbiAgKGdsb2JhbC5JbW11dGFibGUgPSBmYWN0b3J5KCkpO1xufSh0aGlzLCBmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0Jzt2YXIgU0xJQ0UkMCA9IEFycmF5LnByb3RvdHlwZS5zbGljZTtcblxuICBmdW5jdGlvbiBjcmVhdGVDbGFzcyhjdG9yLCBzdXBlckNsYXNzKSB7XG4gICAgaWYgKHN1cGVyQ2xhc3MpIHtcbiAgICAgIGN0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSk7XG4gICAgfVxuICAgIGN0b3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gY3RvcjtcbiAgfVxuXG4gIGZ1bmN0aW9uIEl0ZXJhYmxlKHZhbHVlKSB7XG4gICAgICByZXR1cm4gaXNJdGVyYWJsZSh2YWx1ZSkgPyB2YWx1ZSA6IFNlcSh2YWx1ZSk7XG4gICAgfVxuXG5cbiAgY3JlYXRlQ2xhc3MoS2V5ZWRJdGVyYWJsZSwgSXRlcmFibGUpO1xuICAgIGZ1bmN0aW9uIEtleWVkSXRlcmFibGUodmFsdWUpIHtcbiAgICAgIHJldHVybiBpc0tleWVkKHZhbHVlKSA/IHZhbHVlIDogS2V5ZWRTZXEodmFsdWUpO1xuICAgIH1cblxuXG4gIGNyZWF0ZUNsYXNzKEluZGV4ZWRJdGVyYWJsZSwgSXRlcmFibGUpO1xuICAgIGZ1bmN0aW9uIEluZGV4ZWRJdGVyYWJsZSh2YWx1ZSkge1xuICAgICAgcmV0dXJuIGlzSW5kZXhlZCh2YWx1ZSkgPyB2YWx1ZSA6IEluZGV4ZWRTZXEodmFsdWUpO1xuICAgIH1cblxuXG4gIGNyZWF0ZUNsYXNzKFNldEl0ZXJhYmxlLCBJdGVyYWJsZSk7XG4gICAgZnVuY3Rpb24gU2V0SXRlcmFibGUodmFsdWUpIHtcbiAgICAgIHJldHVybiBpc0l0ZXJhYmxlKHZhbHVlKSAmJiAhaXNBc3NvY2lhdGl2ZSh2YWx1ZSkgPyB2YWx1ZSA6IFNldFNlcSh2YWx1ZSk7XG4gICAgfVxuXG5cblxuICBmdW5jdGlvbiBpc0l0ZXJhYmxlKG1heWJlSXRlcmFibGUpIHtcbiAgICByZXR1cm4gISEobWF5YmVJdGVyYWJsZSAmJiBtYXliZUl0ZXJhYmxlW0lTX0lURVJBQkxFX1NFTlRJTkVMXSk7XG4gIH1cblxuICBmdW5jdGlvbiBpc0tleWVkKG1heWJlS2V5ZWQpIHtcbiAgICByZXR1cm4gISEobWF5YmVLZXllZCAmJiBtYXliZUtleWVkW0lTX0tFWUVEX1NFTlRJTkVMXSk7XG4gIH1cblxuICBmdW5jdGlvbiBpc0luZGV4ZWQobWF5YmVJbmRleGVkKSB7XG4gICAgcmV0dXJuICEhKG1heWJlSW5kZXhlZCAmJiBtYXliZUluZGV4ZWRbSVNfSU5ERVhFRF9TRU5USU5FTF0pO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNBc3NvY2lhdGl2ZShtYXliZUFzc29jaWF0aXZlKSB7XG4gICAgcmV0dXJuIGlzS2V5ZWQobWF5YmVBc3NvY2lhdGl2ZSkgfHwgaXNJbmRleGVkKG1heWJlQXNzb2NpYXRpdmUpO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNPcmRlcmVkKG1heWJlT3JkZXJlZCkge1xuICAgIHJldHVybiAhIShtYXliZU9yZGVyZWQgJiYgbWF5YmVPcmRlcmVkW0lTX09SREVSRURfU0VOVElORUxdKTtcbiAgfVxuXG4gIEl0ZXJhYmxlLmlzSXRlcmFibGUgPSBpc0l0ZXJhYmxlO1xuICBJdGVyYWJsZS5pc0tleWVkID0gaXNLZXllZDtcbiAgSXRlcmFibGUuaXNJbmRleGVkID0gaXNJbmRleGVkO1xuICBJdGVyYWJsZS5pc0Fzc29jaWF0aXZlID0gaXNBc3NvY2lhdGl2ZTtcbiAgSXRlcmFibGUuaXNPcmRlcmVkID0gaXNPcmRlcmVkO1xuXG4gIEl0ZXJhYmxlLktleWVkID0gS2V5ZWRJdGVyYWJsZTtcbiAgSXRlcmFibGUuSW5kZXhlZCA9IEluZGV4ZWRJdGVyYWJsZTtcbiAgSXRlcmFibGUuU2V0ID0gU2V0SXRlcmFibGU7XG5cblxuICB2YXIgSVNfSVRFUkFCTEVfU0VOVElORUwgPSAnQEBfX0lNTVVUQUJMRV9JVEVSQUJMRV9fQEAnO1xuICB2YXIgSVNfS0VZRURfU0VOVElORUwgPSAnQEBfX0lNTVVUQUJMRV9LRVlFRF9fQEAnO1xuICB2YXIgSVNfSU5ERVhFRF9TRU5USU5FTCA9ICdAQF9fSU1NVVRBQkxFX0lOREVYRURfX0BAJztcbiAgdmFyIElTX09SREVSRURfU0VOVElORUwgPSAnQEBfX0lNTVVUQUJMRV9PUkRFUkVEX19AQCc7XG5cbiAgLy8gVXNlZCBmb3Igc2V0dGluZyBwcm90b3R5cGUgbWV0aG9kcyB0aGF0IElFOCBjaG9rZXMgb24uXG4gIHZhciBERUxFVEUgPSAnZGVsZXRlJztcblxuICAvLyBDb25zdGFudHMgZGVzY3JpYmluZyB0aGUgc2l6ZSBvZiB0cmllIG5vZGVzLlxuICB2YXIgU0hJRlQgPSA1OyAvLyBSZXN1bHRlZCBpbiBiZXN0IHBlcmZvcm1hbmNlIGFmdGVyIF9fX19fXz9cbiAgdmFyIFNJWkUgPSAxIDw8IFNISUZUO1xuICB2YXIgTUFTSyA9IFNJWkUgLSAxO1xuXG4gIC8vIEEgY29uc2lzdGVudCBzaGFyZWQgdmFsdWUgcmVwcmVzZW50aW5nIFwibm90IHNldFwiIHdoaWNoIGVxdWFscyBub3RoaW5nIG90aGVyXG4gIC8vIHRoYW4gaXRzZWxmLCBhbmQgbm90aGluZyB0aGF0IGNvdWxkIGJlIHByb3ZpZGVkIGV4dGVybmFsbHkuXG4gIHZhciBOT1RfU0VUID0ge307XG5cbiAgLy8gQm9vbGVhbiByZWZlcmVuY2VzLCBSb3VnaCBlcXVpdmFsZW50IG9mIGBib29sICZgLlxuICB2YXIgQ0hBTkdFX0xFTkdUSCA9IHsgdmFsdWU6IGZhbHNlIH07XG4gIHZhciBESURfQUxURVIgPSB7IHZhbHVlOiBmYWxzZSB9O1xuXG4gIGZ1bmN0aW9uIE1ha2VSZWYocmVmKSB7XG4gICAgcmVmLnZhbHVlID0gZmFsc2U7XG4gICAgcmV0dXJuIHJlZjtcbiAgfVxuXG4gIGZ1bmN0aW9uIFNldFJlZihyZWYpIHtcbiAgICByZWYgJiYgKHJlZi52YWx1ZSA9IHRydWUpO1xuICB9XG5cbiAgLy8gQSBmdW5jdGlvbiB3aGljaCByZXR1cm5zIGEgdmFsdWUgcmVwcmVzZW50aW5nIGFuIFwib3duZXJcIiBmb3IgdHJhbnNpZW50IHdyaXRlc1xuICAvLyB0byB0cmllcy4gVGhlIHJldHVybiB2YWx1ZSB3aWxsIG9ubHkgZXZlciBlcXVhbCBpdHNlbGYsIGFuZCB3aWxsIG5vdCBlcXVhbFxuICAvLyB0aGUgcmV0dXJuIG9mIGFueSBzdWJzZXF1ZW50IGNhbGwgb2YgdGhpcyBmdW5jdGlvbi5cbiAgZnVuY3Rpb24gT3duZXJJRCgpIHt9XG5cbiAgLy8gaHR0cDovL2pzcGVyZi5jb20vY29weS1hcnJheS1pbmxpbmVcbiAgZnVuY3Rpb24gYXJyQ29weShhcnIsIG9mZnNldCkge1xuICAgIG9mZnNldCA9IG9mZnNldCB8fCAwO1xuICAgIHZhciBsZW4gPSBNYXRoLm1heCgwLCBhcnIubGVuZ3RoIC0gb2Zmc2V0KTtcbiAgICB2YXIgbmV3QXJyID0gbmV3IEFycmF5KGxlbik7XG4gICAgZm9yICh2YXIgaWkgPSAwOyBpaSA8IGxlbjsgaWkrKykge1xuICAgICAgbmV3QXJyW2lpXSA9IGFycltpaSArIG9mZnNldF07XG4gICAgfVxuICAgIHJldHVybiBuZXdBcnI7XG4gIH1cblxuICBmdW5jdGlvbiBlbnN1cmVTaXplKGl0ZXIpIHtcbiAgICBpZiAoaXRlci5zaXplID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGl0ZXIuc2l6ZSA9IGl0ZXIuX19pdGVyYXRlKHJldHVyblRydWUpO1xuICAgIH1cbiAgICByZXR1cm4gaXRlci5zaXplO1xuICB9XG5cbiAgZnVuY3Rpb24gd3JhcEluZGV4KGl0ZXIsIGluZGV4KSB7XG4gICAgLy8gVGhpcyBpbXBsZW1lbnRzIFwiaXMgYXJyYXkgaW5kZXhcIiB3aGljaCB0aGUgRUNNQVN0cmluZyBzcGVjIGRlZmluZXMgYXM6XG4gICAgLy9cbiAgICAvLyAgICAgQSBTdHJpbmcgcHJvcGVydHkgbmFtZSBQIGlzIGFuIGFycmF5IGluZGV4IGlmIGFuZCBvbmx5IGlmXG4gICAgLy8gICAgIFRvU3RyaW5nKFRvVWludDMyKFApKSBpcyBlcXVhbCB0byBQIGFuZCBUb1VpbnQzMihQKSBpcyBub3QgZXF1YWxcbiAgICAvLyAgICAgdG8gMl4zMuKIkjEuXG4gICAgLy9cbiAgICAvLyBodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtYXJyYXktZXhvdGljLW9iamVjdHNcbiAgICBpZiAodHlwZW9mIGluZGV4ICE9PSAnbnVtYmVyJykge1xuICAgICAgdmFyIHVpbnQzMkluZGV4ID0gaW5kZXggPj4+IDA7IC8vIE4gPj4+IDAgaXMgc2hvcnRoYW5kIGZvciBUb1VpbnQzMlxuICAgICAgaWYgKCcnICsgdWludDMySW5kZXggIT09IGluZGV4IHx8IHVpbnQzMkluZGV4ID09PSA0Mjk0OTY3Mjk1KSB7XG4gICAgICAgIHJldHVybiBOYU47XG4gICAgICB9XG4gICAgICBpbmRleCA9IHVpbnQzMkluZGV4O1xuICAgIH1cbiAgICByZXR1cm4gaW5kZXggPCAwID8gZW5zdXJlU2l6ZShpdGVyKSArIGluZGV4IDogaW5kZXg7XG4gIH1cblxuICBmdW5jdGlvbiByZXR1cm5UcnVlKCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgZnVuY3Rpb24gd2hvbGVTbGljZShiZWdpbiwgZW5kLCBzaXplKSB7XG4gICAgcmV0dXJuIChiZWdpbiA9PT0gMCB8fCAoc2l6ZSAhPT0gdW5kZWZpbmVkICYmIGJlZ2luIDw9IC1zaXplKSkgJiZcbiAgICAgIChlbmQgPT09IHVuZGVmaW5lZCB8fCAoc2l6ZSAhPT0gdW5kZWZpbmVkICYmIGVuZCA+PSBzaXplKSk7XG4gIH1cblxuICBmdW5jdGlvbiByZXNvbHZlQmVnaW4oYmVnaW4sIHNpemUpIHtcbiAgICByZXR1cm4gcmVzb2x2ZUluZGV4KGJlZ2luLCBzaXplLCAwKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlc29sdmVFbmQoZW5kLCBzaXplKSB7XG4gICAgcmV0dXJuIHJlc29sdmVJbmRleChlbmQsIHNpemUsIHNpemUpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVzb2x2ZUluZGV4KGluZGV4LCBzaXplLCBkZWZhdWx0SW5kZXgpIHtcbiAgICByZXR1cm4gaW5kZXggPT09IHVuZGVmaW5lZCA/XG4gICAgICBkZWZhdWx0SW5kZXggOlxuICAgICAgaW5kZXggPCAwID9cbiAgICAgICAgTWF0aC5tYXgoMCwgc2l6ZSArIGluZGV4KSA6XG4gICAgICAgIHNpemUgPT09IHVuZGVmaW5lZCA/XG4gICAgICAgICAgaW5kZXggOlxuICAgICAgICAgIE1hdGgubWluKHNpemUsIGluZGV4KTtcbiAgfVxuXG4gIC8qIGdsb2JhbCBTeW1ib2wgKi9cblxuICB2YXIgSVRFUkFURV9LRVlTID0gMDtcbiAgdmFyIElURVJBVEVfVkFMVUVTID0gMTtcbiAgdmFyIElURVJBVEVfRU5UUklFUyA9IDI7XG5cbiAgdmFyIFJFQUxfSVRFUkFUT1JfU1lNQk9MID0gdHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJyAmJiBTeW1ib2wuaXRlcmF0b3I7XG4gIHZhciBGQVVYX0lURVJBVE9SX1NZTUJPTCA9ICdAQGl0ZXJhdG9yJztcblxuICB2YXIgSVRFUkFUT1JfU1lNQk9MID0gUkVBTF9JVEVSQVRPUl9TWU1CT0wgfHwgRkFVWF9JVEVSQVRPUl9TWU1CT0w7XG5cblxuICBmdW5jdGlvbiBJdGVyYXRvcihuZXh0KSB7XG4gICAgICB0aGlzLm5leHQgPSBuZXh0O1xuICAgIH1cblxuICAgIEl0ZXJhdG9yLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICdbSXRlcmF0b3JdJztcbiAgICB9O1xuXG5cbiAgSXRlcmF0b3IuS0VZUyA9IElURVJBVEVfS0VZUztcbiAgSXRlcmF0b3IuVkFMVUVTID0gSVRFUkFURV9WQUxVRVM7XG4gIEl0ZXJhdG9yLkVOVFJJRVMgPSBJVEVSQVRFX0VOVFJJRVM7XG5cbiAgSXRlcmF0b3IucHJvdG90eXBlLmluc3BlY3QgPVxuICBJdGVyYXRvci5wcm90b3R5cGUudG9Tb3VyY2UgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLnRvU3RyaW5nKCk7IH1cbiAgSXRlcmF0b3IucHJvdG90eXBlW0lURVJBVE9SX1NZTUJPTF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cblxuICBmdW5jdGlvbiBpdGVyYXRvclZhbHVlKHR5cGUsIGssIHYsIGl0ZXJhdG9yUmVzdWx0KSB7XG4gICAgdmFyIHZhbHVlID0gdHlwZSA9PT0gMCA/IGsgOiB0eXBlID09PSAxID8gdiA6IFtrLCB2XTtcbiAgICBpdGVyYXRvclJlc3VsdCA/IChpdGVyYXRvclJlc3VsdC52YWx1ZSA9IHZhbHVlKSA6IChpdGVyYXRvclJlc3VsdCA9IHtcbiAgICAgIHZhbHVlOiB2YWx1ZSwgZG9uZTogZmFsc2VcbiAgICB9KTtcbiAgICByZXR1cm4gaXRlcmF0b3JSZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiBpdGVyYXRvckRvbmUoKSB7XG4gICAgcmV0dXJuIHsgdmFsdWU6IHVuZGVmaW5lZCwgZG9uZTogdHJ1ZSB9O1xuICB9XG5cbiAgZnVuY3Rpb24gaGFzSXRlcmF0b3IobWF5YmVJdGVyYWJsZSkge1xuICAgIHJldHVybiAhIWdldEl0ZXJhdG9yRm4obWF5YmVJdGVyYWJsZSk7XG4gIH1cblxuICBmdW5jdGlvbiBpc0l0ZXJhdG9yKG1heWJlSXRlcmF0b3IpIHtcbiAgICByZXR1cm4gbWF5YmVJdGVyYXRvciAmJiB0eXBlb2YgbWF5YmVJdGVyYXRvci5uZXh0ID09PSAnZnVuY3Rpb24nO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0SXRlcmF0b3IoaXRlcmFibGUpIHtcbiAgICB2YXIgaXRlcmF0b3JGbiA9IGdldEl0ZXJhdG9yRm4oaXRlcmFibGUpO1xuICAgIHJldHVybiBpdGVyYXRvckZuICYmIGl0ZXJhdG9yRm4uY2FsbChpdGVyYWJsZSk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRJdGVyYXRvckZuKGl0ZXJhYmxlKSB7XG4gICAgdmFyIGl0ZXJhdG9yRm4gPSBpdGVyYWJsZSAmJiAoXG4gICAgICAoUkVBTF9JVEVSQVRPUl9TWU1CT0wgJiYgaXRlcmFibGVbUkVBTF9JVEVSQVRPUl9TWU1CT0xdKSB8fFxuICAgICAgaXRlcmFibGVbRkFVWF9JVEVSQVRPUl9TWU1CT0xdXG4gICAgKTtcbiAgICBpZiAodHlwZW9mIGl0ZXJhdG9yRm4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybiBpdGVyYXRvckZuO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGlzQXJyYXlMaWtlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlICYmIHR5cGVvZiB2YWx1ZS5sZW5ndGggPT09ICdudW1iZXInO1xuICB9XG5cbiAgY3JlYXRlQ2xhc3MoU2VxLCBJdGVyYWJsZSk7XG4gICAgZnVuY3Rpb24gU2VxKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCA/IGVtcHR5U2VxdWVuY2UoKSA6XG4gICAgICAgIGlzSXRlcmFibGUodmFsdWUpID8gdmFsdWUudG9TZXEoKSA6IHNlcUZyb21WYWx1ZSh2YWx1ZSk7XG4gICAgfVxuXG4gICAgU2VxLm9mID0gZnVuY3Rpb24oLyouLi52YWx1ZXMqLykge1xuICAgICAgcmV0dXJuIFNlcShhcmd1bWVudHMpO1xuICAgIH07XG5cbiAgICBTZXEucHJvdG90eXBlLnRvU2VxID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgU2VxLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX190b1N0cmluZygnU2VxIHsnLCAnfScpO1xuICAgIH07XG5cbiAgICBTZXEucHJvdG90eXBlLmNhY2hlUmVzdWx0ID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoIXRoaXMuX2NhY2hlICYmIHRoaXMuX19pdGVyYXRlVW5jYWNoZWQpIHtcbiAgICAgICAgdGhpcy5fY2FjaGUgPSB0aGlzLmVudHJ5U2VxKCkudG9BcnJheSgpO1xuICAgICAgICB0aGlzLnNpemUgPSB0aGlzLl9jYWNoZS5sZW5ndGg7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgLy8gYWJzdHJhY3QgX19pdGVyYXRlVW5jYWNoZWQoZm4sIHJldmVyc2UpXG5cbiAgICBTZXEucHJvdG90eXBlLl9faXRlcmF0ZSA9IGZ1bmN0aW9uKGZuLCByZXZlcnNlKSB7XG4gICAgICByZXR1cm4gc2VxSXRlcmF0ZSh0aGlzLCBmbiwgcmV2ZXJzZSwgdHJ1ZSk7XG4gICAgfTtcblxuICAgIC8vIGFic3RyYWN0IF9faXRlcmF0b3JVbmNhY2hlZCh0eXBlLCByZXZlcnNlKVxuXG4gICAgU2VxLnByb3RvdHlwZS5fX2l0ZXJhdG9yID0gZnVuY3Rpb24odHlwZSwgcmV2ZXJzZSkge1xuICAgICAgcmV0dXJuIHNlcUl0ZXJhdG9yKHRoaXMsIHR5cGUsIHJldmVyc2UsIHRydWUpO1xuICAgIH07XG5cblxuXG4gIGNyZWF0ZUNsYXNzKEtleWVkU2VxLCBTZXEpO1xuICAgIGZ1bmN0aW9uIEtleWVkU2VxKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCA/XG4gICAgICAgIGVtcHR5U2VxdWVuY2UoKS50b0tleWVkU2VxKCkgOlxuICAgICAgICBpc0l0ZXJhYmxlKHZhbHVlKSA/XG4gICAgICAgICAgKGlzS2V5ZWQodmFsdWUpID8gdmFsdWUudG9TZXEoKSA6IHZhbHVlLmZyb21FbnRyeVNlcSgpKSA6XG4gICAgICAgICAga2V5ZWRTZXFGcm9tVmFsdWUodmFsdWUpO1xuICAgIH1cblxuICAgIEtleWVkU2VxLnByb3RvdHlwZS50b0tleWVkU2VxID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG5cblxuICBjcmVhdGVDbGFzcyhJbmRleGVkU2VxLCBTZXEpO1xuICAgIGZ1bmN0aW9uIEluZGV4ZWRTZXEodmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkID8gZW1wdHlTZXF1ZW5jZSgpIDpcbiAgICAgICAgIWlzSXRlcmFibGUodmFsdWUpID8gaW5kZXhlZFNlcUZyb21WYWx1ZSh2YWx1ZSkgOlxuICAgICAgICBpc0tleWVkKHZhbHVlKSA/IHZhbHVlLmVudHJ5U2VxKCkgOiB2YWx1ZS50b0luZGV4ZWRTZXEoKTtcbiAgICB9XG5cbiAgICBJbmRleGVkU2VxLm9mID0gZnVuY3Rpb24oLyouLi52YWx1ZXMqLykge1xuICAgICAgcmV0dXJuIEluZGV4ZWRTZXEoYXJndW1lbnRzKTtcbiAgICB9O1xuXG4gICAgSW5kZXhlZFNlcS5wcm90b3R5cGUudG9JbmRleGVkU2VxID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgSW5kZXhlZFNlcS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLl9fdG9TdHJpbmcoJ1NlcSBbJywgJ10nKTtcbiAgICB9O1xuXG4gICAgSW5kZXhlZFNlcS5wcm90b3R5cGUuX19pdGVyYXRlID0gZnVuY3Rpb24oZm4sIHJldmVyc2UpIHtcbiAgICAgIHJldHVybiBzZXFJdGVyYXRlKHRoaXMsIGZuLCByZXZlcnNlLCBmYWxzZSk7XG4gICAgfTtcblxuICAgIEluZGV4ZWRTZXEucHJvdG90eXBlLl9faXRlcmF0b3IgPSBmdW5jdGlvbih0eXBlLCByZXZlcnNlKSB7XG4gICAgICByZXR1cm4gc2VxSXRlcmF0b3IodGhpcywgdHlwZSwgcmV2ZXJzZSwgZmFsc2UpO1xuICAgIH07XG5cblxuXG4gIGNyZWF0ZUNsYXNzKFNldFNlcSwgU2VxKTtcbiAgICBmdW5jdGlvbiBTZXRTZXEodmFsdWUpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQgPyBlbXB0eVNlcXVlbmNlKCkgOlxuICAgICAgICAhaXNJdGVyYWJsZSh2YWx1ZSkgPyBpbmRleGVkU2VxRnJvbVZhbHVlKHZhbHVlKSA6XG4gICAgICAgIGlzS2V5ZWQodmFsdWUpID8gdmFsdWUuZW50cnlTZXEoKSA6IHZhbHVlXG4gICAgICApLnRvU2V0U2VxKCk7XG4gICAgfVxuXG4gICAgU2V0U2VxLm9mID0gZnVuY3Rpb24oLyouLi52YWx1ZXMqLykge1xuICAgICAgcmV0dXJuIFNldFNlcShhcmd1bWVudHMpO1xuICAgIH07XG5cbiAgICBTZXRTZXEucHJvdG90eXBlLnRvU2V0U2VxID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG5cblxuICBTZXEuaXNTZXEgPSBpc1NlcTtcbiAgU2VxLktleWVkID0gS2V5ZWRTZXE7XG4gIFNlcS5TZXQgPSBTZXRTZXE7XG4gIFNlcS5JbmRleGVkID0gSW5kZXhlZFNlcTtcblxuICB2YXIgSVNfU0VRX1NFTlRJTkVMID0gJ0BAX19JTU1VVEFCTEVfU0VRX19AQCc7XG5cbiAgU2VxLnByb3RvdHlwZVtJU19TRVFfU0VOVElORUxdID0gdHJ1ZTtcblxuXG5cbiAgY3JlYXRlQ2xhc3MoQXJyYXlTZXEsIEluZGV4ZWRTZXEpO1xuICAgIGZ1bmN0aW9uIEFycmF5U2VxKGFycmF5KSB7XG4gICAgICB0aGlzLl9hcnJheSA9IGFycmF5O1xuICAgICAgdGhpcy5zaXplID0gYXJyYXkubGVuZ3RoO1xuICAgIH1cblxuICAgIEFycmF5U2VxLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbihpbmRleCwgbm90U2V0VmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLmhhcyhpbmRleCkgPyB0aGlzLl9hcnJheVt3cmFwSW5kZXgodGhpcywgaW5kZXgpXSA6IG5vdFNldFZhbHVlO1xuICAgIH07XG5cbiAgICBBcnJheVNlcS5wcm90b3R5cGUuX19pdGVyYXRlID0gZnVuY3Rpb24oZm4sIHJldmVyc2UpIHtcbiAgICAgIHZhciBhcnJheSA9IHRoaXMuX2FycmF5O1xuICAgICAgdmFyIG1heEluZGV4ID0gYXJyYXkubGVuZ3RoIC0gMTtcbiAgICAgIGZvciAodmFyIGlpID0gMDsgaWkgPD0gbWF4SW5kZXg7IGlpKyspIHtcbiAgICAgICAgaWYgKGZuKGFycmF5W3JldmVyc2UgPyBtYXhJbmRleCAtIGlpIDogaWldLCBpaSwgdGhpcykgPT09IGZhbHNlKSB7XG4gICAgICAgICAgcmV0dXJuIGlpICsgMTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGlpO1xuICAgIH07XG5cbiAgICBBcnJheVNlcS5wcm90b3R5cGUuX19pdGVyYXRvciA9IGZ1bmN0aW9uKHR5cGUsIHJldmVyc2UpIHtcbiAgICAgIHZhciBhcnJheSA9IHRoaXMuX2FycmF5O1xuICAgICAgdmFyIG1heEluZGV4ID0gYXJyYXkubGVuZ3RoIC0gMTtcbiAgICAgIHZhciBpaSA9IDA7XG4gICAgICByZXR1cm4gbmV3IEl0ZXJhdG9yKGZ1bmN0aW9uKCkgXG4gICAgICAgIHtyZXR1cm4gaWkgPiBtYXhJbmRleCA/XG4gICAgICAgICAgaXRlcmF0b3JEb25lKCkgOlxuICAgICAgICAgIGl0ZXJhdG9yVmFsdWUodHlwZSwgaWksIGFycmF5W3JldmVyc2UgPyBtYXhJbmRleCAtIGlpKysgOiBpaSsrXSl9XG4gICAgICApO1xuICAgIH07XG5cblxuXG4gIGNyZWF0ZUNsYXNzKE9iamVjdFNlcSwgS2V5ZWRTZXEpO1xuICAgIGZ1bmN0aW9uIE9iamVjdFNlcShvYmplY3QpIHtcbiAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTtcbiAgICAgIHRoaXMuX29iamVjdCA9IG9iamVjdDtcbiAgICAgIHRoaXMuX2tleXMgPSBrZXlzO1xuICAgICAgdGhpcy5zaXplID0ga2V5cy5sZW5ndGg7XG4gICAgfVxuXG4gICAgT2JqZWN0U2VxLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbihrZXksIG5vdFNldFZhbHVlKSB7XG4gICAgICBpZiAobm90U2V0VmFsdWUgIT09IHVuZGVmaW5lZCAmJiAhdGhpcy5oYXMoa2V5KSkge1xuICAgICAgICByZXR1cm4gbm90U2V0VmFsdWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5fb2JqZWN0W2tleV07XG4gICAgfTtcblxuICAgIE9iamVjdFNlcS5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24oa2V5KSB7XG4gICAgICByZXR1cm4gdGhpcy5fb2JqZWN0Lmhhc093blByb3BlcnR5KGtleSk7XG4gICAgfTtcblxuICAgIE9iamVjdFNlcS5wcm90b3R5cGUuX19pdGVyYXRlID0gZnVuY3Rpb24oZm4sIHJldmVyc2UpIHtcbiAgICAgIHZhciBvYmplY3QgPSB0aGlzLl9vYmplY3Q7XG4gICAgICB2YXIga2V5cyA9IHRoaXMuX2tleXM7XG4gICAgICB2YXIgbWF4SW5kZXggPSBrZXlzLmxlbmd0aCAtIDE7XG4gICAgICBmb3IgKHZhciBpaSA9IDA7IGlpIDw9IG1heEluZGV4OyBpaSsrKSB7XG4gICAgICAgIHZhciBrZXkgPSBrZXlzW3JldmVyc2UgPyBtYXhJbmRleCAtIGlpIDogaWldO1xuICAgICAgICBpZiAoZm4ob2JqZWN0W2tleV0sIGtleSwgdGhpcykgPT09IGZhbHNlKSB7XG4gICAgICAgICAgcmV0dXJuIGlpICsgMTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGlpO1xuICAgIH07XG5cbiAgICBPYmplY3RTZXEucHJvdG90eXBlLl9faXRlcmF0b3IgPSBmdW5jdGlvbih0eXBlLCByZXZlcnNlKSB7XG4gICAgICB2YXIgb2JqZWN0ID0gdGhpcy5fb2JqZWN0O1xuICAgICAgdmFyIGtleXMgPSB0aGlzLl9rZXlzO1xuICAgICAgdmFyIG1heEluZGV4ID0ga2V5cy5sZW5ndGggLSAxO1xuICAgICAgdmFyIGlpID0gMDtcbiAgICAgIHJldHVybiBuZXcgSXRlcmF0b3IoZnVuY3Rpb24oKSAge1xuICAgICAgICB2YXIga2V5ID0ga2V5c1tyZXZlcnNlID8gbWF4SW5kZXggLSBpaSA6IGlpXTtcbiAgICAgICAgcmV0dXJuIGlpKysgPiBtYXhJbmRleCA/XG4gICAgICAgICAgaXRlcmF0b3JEb25lKCkgOlxuICAgICAgICAgIGl0ZXJhdG9yVmFsdWUodHlwZSwga2V5LCBvYmplY3Rba2V5XSk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gIE9iamVjdFNlcS5wcm90b3R5cGVbSVNfT1JERVJFRF9TRU5USU5FTF0gPSB0cnVlO1xuXG5cbiAgY3JlYXRlQ2xhc3MoSXRlcmFibGVTZXEsIEluZGV4ZWRTZXEpO1xuICAgIGZ1bmN0aW9uIEl0ZXJhYmxlU2VxKGl0ZXJhYmxlKSB7XG4gICAgICB0aGlzLl9pdGVyYWJsZSA9IGl0ZXJhYmxlO1xuICAgICAgdGhpcy5zaXplID0gaXRlcmFibGUubGVuZ3RoIHx8IGl0ZXJhYmxlLnNpemU7XG4gICAgfVxuXG4gICAgSXRlcmFibGVTZXEucHJvdG90eXBlLl9faXRlcmF0ZVVuY2FjaGVkID0gZnVuY3Rpb24oZm4sIHJldmVyc2UpIHtcbiAgICAgIGlmIChyZXZlcnNlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhY2hlUmVzdWx0KCkuX19pdGVyYXRlKGZuLCByZXZlcnNlKTtcbiAgICAgIH1cbiAgICAgIHZhciBpdGVyYWJsZSA9IHRoaXMuX2l0ZXJhYmxlO1xuICAgICAgdmFyIGl0ZXJhdG9yID0gZ2V0SXRlcmF0b3IoaXRlcmFibGUpO1xuICAgICAgdmFyIGl0ZXJhdGlvbnMgPSAwO1xuICAgICAgaWYgKGlzSXRlcmF0b3IoaXRlcmF0b3IpKSB7XG4gICAgICAgIHZhciBzdGVwO1xuICAgICAgICB3aGlsZSAoIShzdGVwID0gaXRlcmF0b3IubmV4dCgpKS5kb25lKSB7XG4gICAgICAgICAgaWYgKGZuKHN0ZXAudmFsdWUsIGl0ZXJhdGlvbnMrKywgdGhpcykgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBpdGVyYXRpb25zO1xuICAgIH07XG5cbiAgICBJdGVyYWJsZVNlcS5wcm90b3R5cGUuX19pdGVyYXRvclVuY2FjaGVkID0gZnVuY3Rpb24odHlwZSwgcmV2ZXJzZSkge1xuICAgICAgaWYgKHJldmVyc2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGVSZXN1bHQoKS5fX2l0ZXJhdG9yKHR5cGUsIHJldmVyc2UpO1xuICAgICAgfVxuICAgICAgdmFyIGl0ZXJhYmxlID0gdGhpcy5faXRlcmFibGU7XG4gICAgICB2YXIgaXRlcmF0b3IgPSBnZXRJdGVyYXRvcihpdGVyYWJsZSk7XG4gICAgICBpZiAoIWlzSXRlcmF0b3IoaXRlcmF0b3IpKSB7XG4gICAgICAgIHJldHVybiBuZXcgSXRlcmF0b3IoaXRlcmF0b3JEb25lKTtcbiAgICAgIH1cbiAgICAgIHZhciBpdGVyYXRpb25zID0gMDtcbiAgICAgIHJldHVybiBuZXcgSXRlcmF0b3IoZnVuY3Rpb24oKSAge1xuICAgICAgICB2YXIgc3RlcCA9IGl0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgcmV0dXJuIHN0ZXAuZG9uZSA/IHN0ZXAgOiBpdGVyYXRvclZhbHVlKHR5cGUsIGl0ZXJhdGlvbnMrKywgc3RlcC52YWx1ZSk7XG4gICAgICB9KTtcbiAgICB9O1xuXG5cblxuICBjcmVhdGVDbGFzcyhJdGVyYXRvclNlcSwgSW5kZXhlZFNlcSk7XG4gICAgZnVuY3Rpb24gSXRlcmF0b3JTZXEoaXRlcmF0b3IpIHtcbiAgICAgIHRoaXMuX2l0ZXJhdG9yID0gaXRlcmF0b3I7XG4gICAgICB0aGlzLl9pdGVyYXRvckNhY2hlID0gW107XG4gICAgfVxuXG4gICAgSXRlcmF0b3JTZXEucHJvdG90eXBlLl9faXRlcmF0ZVVuY2FjaGVkID0gZnVuY3Rpb24oZm4sIHJldmVyc2UpIHtcbiAgICAgIGlmIChyZXZlcnNlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhY2hlUmVzdWx0KCkuX19pdGVyYXRlKGZuLCByZXZlcnNlKTtcbiAgICAgIH1cbiAgICAgIHZhciBpdGVyYXRvciA9IHRoaXMuX2l0ZXJhdG9yO1xuICAgICAgdmFyIGNhY2hlID0gdGhpcy5faXRlcmF0b3JDYWNoZTtcbiAgICAgIHZhciBpdGVyYXRpb25zID0gMDtcbiAgICAgIHdoaWxlIChpdGVyYXRpb25zIDwgY2FjaGUubGVuZ3RoKSB7XG4gICAgICAgIGlmIChmbihjYWNoZVtpdGVyYXRpb25zXSwgaXRlcmF0aW9ucysrLCB0aGlzKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICByZXR1cm4gaXRlcmF0aW9ucztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdmFyIHN0ZXA7XG4gICAgICB3aGlsZSAoIShzdGVwID0gaXRlcmF0b3IubmV4dCgpKS5kb25lKSB7XG4gICAgICAgIHZhciB2YWwgPSBzdGVwLnZhbHVlO1xuICAgICAgICBjYWNoZVtpdGVyYXRpb25zXSA9IHZhbDtcbiAgICAgICAgaWYgKGZuKHZhbCwgaXRlcmF0aW9ucysrLCB0aGlzKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGl0ZXJhdGlvbnM7XG4gICAgfTtcblxuICAgIEl0ZXJhdG9yU2VxLnByb3RvdHlwZS5fX2l0ZXJhdG9yVW5jYWNoZWQgPSBmdW5jdGlvbih0eXBlLCByZXZlcnNlKSB7XG4gICAgICBpZiAocmV2ZXJzZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYWNoZVJlc3VsdCgpLl9faXRlcmF0b3IodHlwZSwgcmV2ZXJzZSk7XG4gICAgICB9XG4gICAgICB2YXIgaXRlcmF0b3IgPSB0aGlzLl9pdGVyYXRvcjtcbiAgICAgIHZhciBjYWNoZSA9IHRoaXMuX2l0ZXJhdG9yQ2FjaGU7XG4gICAgICB2YXIgaXRlcmF0aW9ucyA9IDA7XG4gICAgICByZXR1cm4gbmV3IEl0ZXJhdG9yKGZ1bmN0aW9uKCkgIHtcbiAgICAgICAgaWYgKGl0ZXJhdGlvbnMgPj0gY2FjaGUubGVuZ3RoKSB7XG4gICAgICAgICAgdmFyIHN0ZXAgPSBpdGVyYXRvci5uZXh0KCk7XG4gICAgICAgICAgaWYgKHN0ZXAuZG9uZSkge1xuICAgICAgICAgICAgcmV0dXJuIHN0ZXA7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhY2hlW2l0ZXJhdGlvbnNdID0gc3RlcC52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXRlcmF0b3JWYWx1ZSh0eXBlLCBpdGVyYXRpb25zLCBjYWNoZVtpdGVyYXRpb25zKytdKTtcbiAgICAgIH0pO1xuICAgIH07XG5cblxuXG5cbiAgLy8gIyBwcmFnbWEgSGVscGVyIGZ1bmN0aW9uc1xuXG4gIGZ1bmN0aW9uIGlzU2VxKG1heWJlU2VxKSB7XG4gICAgcmV0dXJuICEhKG1heWJlU2VxICYmIG1heWJlU2VxW0lTX1NFUV9TRU5USU5FTF0pO1xuICB9XG5cbiAgdmFyIEVNUFRZX1NFUTtcblxuICBmdW5jdGlvbiBlbXB0eVNlcXVlbmNlKCkge1xuICAgIHJldHVybiBFTVBUWV9TRVEgfHwgKEVNUFRZX1NFUSA9IG5ldyBBcnJheVNlcShbXSkpO1xuICB9XG5cbiAgZnVuY3Rpb24ga2V5ZWRTZXFGcm9tVmFsdWUodmFsdWUpIHtcbiAgICB2YXIgc2VxID1cbiAgICAgIEFycmF5LmlzQXJyYXkodmFsdWUpID8gbmV3IEFycmF5U2VxKHZhbHVlKS5mcm9tRW50cnlTZXEoKSA6XG4gICAgICBpc0l0ZXJhdG9yKHZhbHVlKSA/IG5ldyBJdGVyYXRvclNlcSh2YWx1ZSkuZnJvbUVudHJ5U2VxKCkgOlxuICAgICAgaGFzSXRlcmF0b3IodmFsdWUpID8gbmV3IEl0ZXJhYmxlU2VxKHZhbHVlKS5mcm9tRW50cnlTZXEoKSA6XG4gICAgICB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnID8gbmV3IE9iamVjdFNlcSh2YWx1ZSkgOlxuICAgICAgdW5kZWZpbmVkO1xuICAgIGlmICghc2VxKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgICAnRXhwZWN0ZWQgQXJyYXkgb3IgaXRlcmFibGUgb2JqZWN0IG9mIFtrLCB2XSBlbnRyaWVzLCAnK1xuICAgICAgICAnb3Iga2V5ZWQgb2JqZWN0OiAnICsgdmFsdWVcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBzZXE7XG4gIH1cblxuICBmdW5jdGlvbiBpbmRleGVkU2VxRnJvbVZhbHVlKHZhbHVlKSB7XG4gICAgdmFyIHNlcSA9IG1heWJlSW5kZXhlZFNlcUZyb21WYWx1ZSh2YWx1ZSk7XG4gICAgaWYgKCFzZXEpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICdFeHBlY3RlZCBBcnJheSBvciBpdGVyYWJsZSBvYmplY3Qgb2YgdmFsdWVzOiAnICsgdmFsdWVcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBzZXE7XG4gIH1cblxuICBmdW5jdGlvbiBzZXFGcm9tVmFsdWUodmFsdWUpIHtcbiAgICB2YXIgc2VxID0gbWF5YmVJbmRleGVkU2VxRnJvbVZhbHVlKHZhbHVlKSB8fFxuICAgICAgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgbmV3IE9iamVjdFNlcSh2YWx1ZSkpO1xuICAgIGlmICghc2VxKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgICAnRXhwZWN0ZWQgQXJyYXkgb3IgaXRlcmFibGUgb2JqZWN0IG9mIHZhbHVlcywgb3Iga2V5ZWQgb2JqZWN0OiAnICsgdmFsdWVcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBzZXE7XG4gIH1cblxuICBmdW5jdGlvbiBtYXliZUluZGV4ZWRTZXFGcm9tVmFsdWUodmFsdWUpIHtcbiAgICByZXR1cm4gKFxuICAgICAgaXNBcnJheUxpa2UodmFsdWUpID8gbmV3IEFycmF5U2VxKHZhbHVlKSA6XG4gICAgICBpc0l0ZXJhdG9yKHZhbHVlKSA/IG5ldyBJdGVyYXRvclNlcSh2YWx1ZSkgOlxuICAgICAgaGFzSXRlcmF0b3IodmFsdWUpID8gbmV3IEl0ZXJhYmxlU2VxKHZhbHVlKSA6XG4gICAgICB1bmRlZmluZWRcbiAgICApO1xuICB9XG5cbiAgZnVuY3Rpb24gc2VxSXRlcmF0ZShzZXEsIGZuLCByZXZlcnNlLCB1c2VLZXlzKSB7XG4gICAgdmFyIGNhY2hlID0gc2VxLl9jYWNoZTtcbiAgICBpZiAoY2FjaGUpIHtcbiAgICAgIHZhciBtYXhJbmRleCA9IGNhY2hlLmxlbmd0aCAtIDE7XG4gICAgICBmb3IgKHZhciBpaSA9IDA7IGlpIDw9IG1heEluZGV4OyBpaSsrKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IGNhY2hlW3JldmVyc2UgPyBtYXhJbmRleCAtIGlpIDogaWldO1xuICAgICAgICBpZiAoZm4oZW50cnlbMV0sIHVzZUtleXMgPyBlbnRyeVswXSA6IGlpLCBzZXEpID09PSBmYWxzZSkge1xuICAgICAgICAgIHJldHVybiBpaSArIDE7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBpaTtcbiAgICB9XG4gICAgcmV0dXJuIHNlcS5fX2l0ZXJhdGVVbmNhY2hlZChmbiwgcmV2ZXJzZSk7XG4gIH1cblxuICBmdW5jdGlvbiBzZXFJdGVyYXRvcihzZXEsIHR5cGUsIHJldmVyc2UsIHVzZUtleXMpIHtcbiAgICB2YXIgY2FjaGUgPSBzZXEuX2NhY2hlO1xuICAgIGlmIChjYWNoZSkge1xuICAgICAgdmFyIG1heEluZGV4ID0gY2FjaGUubGVuZ3RoIC0gMTtcbiAgICAgIHZhciBpaSA9IDA7XG4gICAgICByZXR1cm4gbmV3IEl0ZXJhdG9yKGZ1bmN0aW9uKCkgIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gY2FjaGVbcmV2ZXJzZSA/IG1heEluZGV4IC0gaWkgOiBpaV07XG4gICAgICAgIHJldHVybiBpaSsrID4gbWF4SW5kZXggP1xuICAgICAgICAgIGl0ZXJhdG9yRG9uZSgpIDpcbiAgICAgICAgICBpdGVyYXRvclZhbHVlKHR5cGUsIHVzZUtleXMgPyBlbnRyeVswXSA6IGlpIC0gMSwgZW50cnlbMV0pO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBzZXEuX19pdGVyYXRvclVuY2FjaGVkKHR5cGUsIHJldmVyc2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gZnJvbUpTKGpzb24sIGNvbnZlcnRlcikge1xuICAgIHJldHVybiBjb252ZXJ0ZXIgP1xuICAgICAgZnJvbUpTV2l0aChjb252ZXJ0ZXIsIGpzb24sICcnLCB7Jyc6IGpzb259KSA6XG4gICAgICBmcm9tSlNEZWZhdWx0KGpzb24pO1xuICB9XG5cbiAgZnVuY3Rpb24gZnJvbUpTV2l0aChjb252ZXJ0ZXIsIGpzb24sIGtleSwgcGFyZW50SlNPTikge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGpzb24pKSB7XG4gICAgICByZXR1cm4gY29udmVydGVyLmNhbGwocGFyZW50SlNPTiwga2V5LCBJbmRleGVkU2VxKGpzb24pLm1hcChmdW5jdGlvbih2LCBrKSAge3JldHVybiBmcm9tSlNXaXRoKGNvbnZlcnRlciwgdiwgaywganNvbil9KSk7XG4gICAgfVxuICAgIGlmIChpc1BsYWluT2JqKGpzb24pKSB7XG4gICAgICByZXR1cm4gY29udmVydGVyLmNhbGwocGFyZW50SlNPTiwga2V5LCBLZXllZFNlcShqc29uKS5tYXAoZnVuY3Rpb24odiwgaykgIHtyZXR1cm4gZnJvbUpTV2l0aChjb252ZXJ0ZXIsIHYsIGssIGpzb24pfSkpO1xuICAgIH1cbiAgICByZXR1cm4ganNvbjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZyb21KU0RlZmF1bHQoanNvbikge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGpzb24pKSB7XG4gICAgICByZXR1cm4gSW5kZXhlZFNlcShqc29uKS5tYXAoZnJvbUpTRGVmYXVsdCkudG9MaXN0KCk7XG4gICAgfVxuICAgIGlmIChpc1BsYWluT2JqKGpzb24pKSB7XG4gICAgICByZXR1cm4gS2V5ZWRTZXEoanNvbikubWFwKGZyb21KU0RlZmF1bHQpLnRvTWFwKCk7XG4gICAgfVxuICAgIHJldHVybiBqc29uO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNQbGFpbk9iaih2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSAmJiAodmFsdWUuY29uc3RydWN0b3IgPT09IE9iamVjdCB8fCB2YWx1ZS5jb25zdHJ1Y3RvciA9PT0gdW5kZWZpbmVkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbiBleHRlbnNpb24gb2YgdGhlIFwic2FtZS12YWx1ZVwiIGFsZ29yaXRobSBhcyBbZGVzY3JpYmVkIGZvciB1c2UgYnkgRVM2IE1hcFxuICAgKiBhbmQgU2V0XShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9NYXAjS2V5X2VxdWFsaXR5KVxuICAgKlxuICAgKiBOYU4gaXMgY29uc2lkZXJlZCB0aGUgc2FtZSBhcyBOYU4sIGhvd2V2ZXIgLTAgYW5kIDAgYXJlIGNvbnNpZGVyZWQgdGhlIHNhbWVcbiAgICogdmFsdWUsIHdoaWNoIGlzIGRpZmZlcmVudCBmcm9tIHRoZSBhbGdvcml0aG0gZGVzY3JpYmVkIGJ5XG4gICAqIFtgT2JqZWN0LmlzYF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2lzKS5cbiAgICpcbiAgICogVGhpcyBpcyBleHRlbmRlZCBmdXJ0aGVyIHRvIGFsbG93IE9iamVjdHMgdG8gZGVzY3JpYmUgdGhlIHZhbHVlcyB0aGV5XG4gICAqIHJlcHJlc2VudCwgYnkgd2F5IG9mIGB2YWx1ZU9mYCBvciBgZXF1YWxzYCAoYW5kIGBoYXNoQ29kZWApLlxuICAgKlxuICAgKiBOb3RlOiBiZWNhdXNlIG9mIHRoaXMgZXh0ZW5zaW9uLCB0aGUga2V5IGVxdWFsaXR5IG9mIEltbXV0YWJsZS5NYXAgYW5kIHRoZVxuICAgKiB2YWx1ZSBlcXVhbGl0eSBvZiBJbW11dGFibGUuU2V0IHdpbGwgZGlmZmVyIGZyb20gRVM2IE1hcCBhbmQgU2V0LlxuICAgKlxuICAgKiAjIyMgRGVmaW5pbmcgY3VzdG9tIHZhbHVlc1xuICAgKlxuICAgKiBUaGUgZWFzaWVzdCB3YXkgdG8gZGVzY3JpYmUgdGhlIHZhbHVlIGFuIG9iamVjdCByZXByZXNlbnRzIGlzIGJ5IGltcGxlbWVudGluZ1xuICAgKiBgdmFsdWVPZmAuIEZvciBleGFtcGxlLCBgRGF0ZWAgcmVwcmVzZW50cyBhIHZhbHVlIGJ5IHJldHVybmluZyBhIHVuaXhcbiAgICogdGltZXN0YW1wIGZvciBgdmFsdWVPZmA6XG4gICAqXG4gICAqICAgICB2YXIgZGF0ZTEgPSBuZXcgRGF0ZSgxMjM0NTY3ODkwMDAwKTsgLy8gRnJpIEZlYiAxMyAyMDA5IC4uLlxuICAgKiAgICAgdmFyIGRhdGUyID0gbmV3IERhdGUoMTIzNDU2Nzg5MDAwMCk7XG4gICAqICAgICBkYXRlMS52YWx1ZU9mKCk7IC8vIDEyMzQ1Njc4OTAwMDBcbiAgICogICAgIGFzc2VydCggZGF0ZTEgIT09IGRhdGUyICk7XG4gICAqICAgICBhc3NlcnQoIEltbXV0YWJsZS5pcyggZGF0ZTEsIGRhdGUyICkgKTtcbiAgICpcbiAgICogTm90ZTogb3ZlcnJpZGluZyBgdmFsdWVPZmAgbWF5IGhhdmUgb3RoZXIgaW1wbGljYXRpb25zIGlmIHlvdSB1c2UgdGhpcyBvYmplY3RcbiAgICogd2hlcmUgSmF2YVNjcmlwdCBleHBlY3RzIGEgcHJpbWl0aXZlLCBzdWNoIGFzIGltcGxpY2l0IHN0cmluZyBjb2VyY2lvbi5cbiAgICpcbiAgICogRm9yIG1vcmUgY29tcGxleCB0eXBlcywgZXNwZWNpYWxseSBjb2xsZWN0aW9ucywgaW1wbGVtZW50aW5nIGB2YWx1ZU9mYCBtYXlcbiAgICogbm90IGJlIHBlcmZvcm1hbnQuIEFuIGFsdGVybmF0aXZlIGlzIHRvIGltcGxlbWVudCBgZXF1YWxzYCBhbmQgYGhhc2hDb2RlYC5cbiAgICpcbiAgICogYGVxdWFsc2AgdGFrZXMgYW5vdGhlciBvYmplY3QsIHByZXN1bWFibHkgb2Ygc2ltaWxhciB0eXBlLCBhbmQgcmV0dXJucyB0cnVlXG4gICAqIGlmIHRoZSBpdCBpcyBlcXVhbC4gRXF1YWxpdHkgaXMgc3ltbWV0cmljYWwsIHNvIHRoZSBzYW1lIHJlc3VsdCBzaG91bGQgYmVcbiAgICogcmV0dXJuZWQgaWYgdGhpcyBhbmQgdGhlIGFyZ3VtZW50IGFyZSBmbGlwcGVkLlxuICAgKlxuICAgKiAgICAgYXNzZXJ0KCBhLmVxdWFscyhiKSA9PT0gYi5lcXVhbHMoYSkgKTtcbiAgICpcbiAgICogYGhhc2hDb2RlYCByZXR1cm5zIGEgMzJiaXQgaW50ZWdlciBudW1iZXIgcmVwcmVzZW50aW5nIHRoZSBvYmplY3Qgd2hpY2ggd2lsbFxuICAgKiBiZSB1c2VkIHRvIGRldGVybWluZSBob3cgdG8gc3RvcmUgdGhlIHZhbHVlIG9iamVjdCBpbiBhIE1hcCBvciBTZXQuIFlvdSBtdXN0XG4gICAqIHByb3ZpZGUgYm90aCBvciBuZWl0aGVyIG1ldGhvZHMsIG9uZSBtdXN0IG5vdCBleGlzdCB3aXRob3V0IHRoZSBvdGhlci5cbiAgICpcbiAgICogQWxzbywgYW4gaW1wb3J0YW50IHJlbGF0aW9uc2hpcCBiZXR3ZWVuIHRoZXNlIG1ldGhvZHMgbXVzdCBiZSB1cGhlbGQ6IGlmIHR3b1xuICAgKiB2YWx1ZXMgYXJlIGVxdWFsLCB0aGV5ICptdXN0KiByZXR1cm4gdGhlIHNhbWUgaGFzaENvZGUuIElmIHRoZSB2YWx1ZXMgYXJlIG5vdFxuICAgKiBlcXVhbCwgdGhleSBtaWdodCBoYXZlIHRoZSBzYW1lIGhhc2hDb2RlOyB0aGlzIGlzIGNhbGxlZCBhIGhhc2ggY29sbGlzaW9uLFxuICAgKiBhbmQgd2hpbGUgdW5kZXNpcmFibGUgZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMsIGl0IGlzIGFjY2VwdGFibGUuXG4gICAqXG4gICAqICAgICBpZiAoYS5lcXVhbHMoYikpIHtcbiAgICogICAgICAgYXNzZXJ0KCBhLmhhc2hDb2RlKCkgPT09IGIuaGFzaENvZGUoKSApO1xuICAgKiAgICAgfVxuICAgKlxuICAgKiBBbGwgSW1tdXRhYmxlIGNvbGxlY3Rpb25zIGltcGxlbWVudCBgZXF1YWxzYCBhbmQgYGhhc2hDb2RlYC5cbiAgICpcbiAgICovXG4gIGZ1bmN0aW9uIGlzKHZhbHVlQSwgdmFsdWVCKSB7XG4gICAgaWYgKHZhbHVlQSA9PT0gdmFsdWVCIHx8ICh2YWx1ZUEgIT09IHZhbHVlQSAmJiB2YWx1ZUIgIT09IHZhbHVlQikpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoIXZhbHVlQSB8fCAhdmFsdWVCKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgdmFsdWVBLnZhbHVlT2YgPT09ICdmdW5jdGlvbicgJiZcbiAgICAgICAgdHlwZW9mIHZhbHVlQi52YWx1ZU9mID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB2YWx1ZUEgPSB2YWx1ZUEudmFsdWVPZigpO1xuICAgICAgdmFsdWVCID0gdmFsdWVCLnZhbHVlT2YoKTtcbiAgICAgIGlmICh2YWx1ZUEgPT09IHZhbHVlQiB8fCAodmFsdWVBICE9PSB2YWx1ZUEgJiYgdmFsdWVCICE9PSB2YWx1ZUIpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKCF2YWx1ZUEgfHwgIXZhbHVlQikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0eXBlb2YgdmFsdWVBLmVxdWFscyA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgICB0eXBlb2YgdmFsdWVCLmVxdWFscyA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgICB2YWx1ZUEuZXF1YWxzKHZhbHVlQikpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBmdW5jdGlvbiBkZWVwRXF1YWwoYSwgYikge1xuICAgIGlmIChhID09PSBiKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICAhaXNJdGVyYWJsZShiKSB8fFxuICAgICAgYS5zaXplICE9PSB1bmRlZmluZWQgJiYgYi5zaXplICE9PSB1bmRlZmluZWQgJiYgYS5zaXplICE9PSBiLnNpemUgfHxcbiAgICAgIGEuX19oYXNoICE9PSB1bmRlZmluZWQgJiYgYi5fX2hhc2ggIT09IHVuZGVmaW5lZCAmJiBhLl9faGFzaCAhPT0gYi5fX2hhc2ggfHxcbiAgICAgIGlzS2V5ZWQoYSkgIT09IGlzS2V5ZWQoYikgfHxcbiAgICAgIGlzSW5kZXhlZChhKSAhPT0gaXNJbmRleGVkKGIpIHx8XG4gICAgICBpc09yZGVyZWQoYSkgIT09IGlzT3JkZXJlZChiKVxuICAgICkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChhLnNpemUgPT09IDAgJiYgYi5zaXplID09PSAwKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICB2YXIgbm90QXNzb2NpYXRpdmUgPSAhaXNBc3NvY2lhdGl2ZShhKTtcblxuICAgIGlmIChpc09yZGVyZWQoYSkpIHtcbiAgICAgIHZhciBlbnRyaWVzID0gYS5lbnRyaWVzKCk7XG4gICAgICByZXR1cm4gYi5ldmVyeShmdW5jdGlvbih2LCBrKSAge1xuICAgICAgICB2YXIgZW50cnkgPSBlbnRyaWVzLm5leHQoKS52YWx1ZTtcbiAgICAgICAgcmV0dXJuIGVudHJ5ICYmIGlzKGVudHJ5WzFdLCB2KSAmJiAobm90QXNzb2NpYXRpdmUgfHwgaXMoZW50cnlbMF0sIGspKTtcbiAgICAgIH0pICYmIGVudHJpZXMubmV4dCgpLmRvbmU7XG4gICAgfVxuXG4gICAgdmFyIGZsaXBwZWQgPSBmYWxzZTtcblxuICAgIGlmIChhLnNpemUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKGIuc2l6ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYS5jYWNoZVJlc3VsdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIGEuY2FjaGVSZXN1bHQoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZmxpcHBlZCA9IHRydWU7XG4gICAgICAgIHZhciBfID0gYTtcbiAgICAgICAgYSA9IGI7XG4gICAgICAgIGIgPSBfO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBhbGxFcXVhbCA9IHRydWU7XG4gICAgdmFyIGJTaXplID0gYi5fX2l0ZXJhdGUoZnVuY3Rpb24odiwgaykgIHtcbiAgICAgIGlmIChub3RBc3NvY2lhdGl2ZSA/ICFhLmhhcyh2KSA6XG4gICAgICAgICAgZmxpcHBlZCA/ICFpcyh2LCBhLmdldChrLCBOT1RfU0VUKSkgOiAhaXMoYS5nZXQoaywgTk9UX1NFVCksIHYpKSB7XG4gICAgICAgIGFsbEVxdWFsID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBhbGxFcXVhbCAmJiBhLnNpemUgPT09IGJTaXplO1xuICB9XG5cbiAgY3JlYXRlQ2xhc3MoUmVwZWF0LCBJbmRleGVkU2VxKTtcblxuICAgIGZ1bmN0aW9uIFJlcGVhdCh2YWx1ZSwgdGltZXMpIHtcbiAgICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBSZXBlYXQpKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVwZWF0KHZhbHVlLCB0aW1lcyk7XG4gICAgICB9XG4gICAgICB0aGlzLl92YWx1ZSA9IHZhbHVlO1xuICAgICAgdGhpcy5zaXplID0gdGltZXMgPT09IHVuZGVmaW5lZCA/IEluZmluaXR5IDogTWF0aC5tYXgoMCwgdGltZXMpO1xuICAgICAgaWYgKHRoaXMuc2l6ZSA9PT0gMCkge1xuICAgICAgICBpZiAoRU1QVFlfUkVQRUFUKSB7XG4gICAgICAgICAgcmV0dXJuIEVNUFRZX1JFUEVBVDtcbiAgICAgICAgfVxuICAgICAgICBFTVBUWV9SRVBFQVQgPSB0aGlzO1xuICAgICAgfVxuICAgIH1cblxuICAgIFJlcGVhdC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLnNpemUgPT09IDApIHtcbiAgICAgICAgcmV0dXJuICdSZXBlYXQgW10nO1xuICAgICAgfVxuICAgICAgcmV0dXJuICdSZXBlYXQgWyAnICsgdGhpcy5fdmFsdWUgKyAnICcgKyB0aGlzLnNpemUgKyAnIHRpbWVzIF0nO1xuICAgIH07XG5cbiAgICBSZXBlYXQucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKGluZGV4LCBub3RTZXRWYWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMuaGFzKGluZGV4KSA/IHRoaXMuX3ZhbHVlIDogbm90U2V0VmFsdWU7XG4gICAgfTtcblxuICAgIFJlcGVhdC5wcm90b3R5cGUuaW5jbHVkZXMgPSBmdW5jdGlvbihzZWFyY2hWYWx1ZSkge1xuICAgICAgcmV0dXJuIGlzKHRoaXMuX3ZhbHVlLCBzZWFyY2hWYWx1ZSk7XG4gICAgfTtcblxuICAgIFJlcGVhdC5wcm90b3R5cGUuc2xpY2UgPSBmdW5jdGlvbihiZWdpbiwgZW5kKSB7XG4gICAgICB2YXIgc2l6ZSA9IHRoaXMuc2l6ZTtcbiAgICAgIHJldHVybiB3aG9sZVNsaWNlKGJlZ2luLCBlbmQsIHNpemUpID8gdGhpcyA6XG4gICAgICAgIG5ldyBSZXBlYXQodGhpcy5fdmFsdWUsIHJlc29sdmVFbmQoZW5kLCBzaXplKSAtIHJlc29sdmVCZWdpbihiZWdpbiwgc2l6ZSkpO1xuICAgIH07XG5cbiAgICBSZXBlYXQucHJvdG90eXBlLnJldmVyc2UgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBSZXBlYXQucHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbihzZWFyY2hWYWx1ZSkge1xuICAgICAgaWYgKGlzKHRoaXMuX3ZhbHVlLCBzZWFyY2hWYWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG4gICAgICByZXR1cm4gLTE7XG4gICAgfTtcblxuICAgIFJlcGVhdC5wcm90b3R5cGUubGFzdEluZGV4T2YgPSBmdW5jdGlvbihzZWFyY2hWYWx1ZSkge1xuICAgICAgaWYgKGlzKHRoaXMuX3ZhbHVlLCBzZWFyY2hWYWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiAtMTtcbiAgICB9O1xuXG4gICAgUmVwZWF0LnByb3RvdHlwZS5fX2l0ZXJhdGUgPSBmdW5jdGlvbihmbiwgcmV2ZXJzZSkge1xuICAgICAgZm9yICh2YXIgaWkgPSAwOyBpaSA8IHRoaXMuc2l6ZTsgaWkrKykge1xuICAgICAgICBpZiAoZm4odGhpcy5fdmFsdWUsIGlpLCB0aGlzKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICByZXR1cm4gaWkgKyAxO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gaWk7XG4gICAgfTtcblxuICAgIFJlcGVhdC5wcm90b3R5cGUuX19pdGVyYXRvciA9IGZ1bmN0aW9uKHR5cGUsIHJldmVyc2UpIHt2YXIgdGhpcyQwID0gdGhpcztcbiAgICAgIHZhciBpaSA9IDA7XG4gICAgICByZXR1cm4gbmV3IEl0ZXJhdG9yKGZ1bmN0aW9uKCkgXG4gICAgICAgIHtyZXR1cm4gaWkgPCB0aGlzJDAuc2l6ZSA/IGl0ZXJhdG9yVmFsdWUodHlwZSwgaWkrKywgdGhpcyQwLl92YWx1ZSkgOiBpdGVyYXRvckRvbmUoKX1cbiAgICAgICk7XG4gICAgfTtcblxuICAgIFJlcGVhdC5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24ob3RoZXIpIHtcbiAgICAgIHJldHVybiBvdGhlciBpbnN0YW5jZW9mIFJlcGVhdCA/XG4gICAgICAgIGlzKHRoaXMuX3ZhbHVlLCBvdGhlci5fdmFsdWUpIDpcbiAgICAgICAgZGVlcEVxdWFsKG90aGVyKTtcbiAgICB9O1xuXG5cbiAgdmFyIEVNUFRZX1JFUEVBVDtcblxuICBmdW5jdGlvbiBpbnZhcmlhbnQoY29uZGl0aW9uLCBlcnJvcikge1xuICAgIGlmICghY29uZGl0aW9uKSB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xuICB9XG5cbiAgY3JlYXRlQ2xhc3MoUmFuZ2UsIEluZGV4ZWRTZXEpO1xuXG4gICAgZnVuY3Rpb24gUmFuZ2Uoc3RhcnQsIGVuZCwgc3RlcCkge1xuICAgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFJhbmdlKSkge1xuICAgICAgICByZXR1cm4gbmV3IFJhbmdlKHN0YXJ0LCBlbmQsIHN0ZXApO1xuICAgICAgfVxuICAgICAgaW52YXJpYW50KHN0ZXAgIT09IDAsICdDYW5ub3Qgc3RlcCBhIFJhbmdlIGJ5IDAnKTtcbiAgICAgIHN0YXJ0ID0gc3RhcnQgfHwgMDtcbiAgICAgIGlmIChlbmQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBlbmQgPSBJbmZpbml0eTtcbiAgICAgIH1cbiAgICAgIHN0ZXAgPSBzdGVwID09PSB1bmRlZmluZWQgPyAxIDogTWF0aC5hYnMoc3RlcCk7XG4gICAgICBpZiAoZW5kIDwgc3RhcnQpIHtcbiAgICAgICAgc3RlcCA9IC1zdGVwO1xuICAgICAgfVxuICAgICAgdGhpcy5fc3RhcnQgPSBzdGFydDtcbiAgICAgIHRoaXMuX2VuZCA9IGVuZDtcbiAgICAgIHRoaXMuX3N0ZXAgPSBzdGVwO1xuICAgICAgdGhpcy5zaXplID0gTWF0aC5tYXgoMCwgTWF0aC5jZWlsKChlbmQgLSBzdGFydCkgLyBzdGVwIC0gMSkgKyAxKTtcbiAgICAgIGlmICh0aGlzLnNpemUgPT09IDApIHtcbiAgICAgICAgaWYgKEVNUFRZX1JBTkdFKSB7XG4gICAgICAgICAgcmV0dXJuIEVNUFRZX1JBTkdFO1xuICAgICAgICB9XG4gICAgICAgIEVNUFRZX1JBTkdFID0gdGhpcztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBSYW5nZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLnNpemUgPT09IDApIHtcbiAgICAgICAgcmV0dXJuICdSYW5nZSBbXSc7XG4gICAgICB9XG4gICAgICByZXR1cm4gJ1JhbmdlIFsgJyArXG4gICAgICAgIHRoaXMuX3N0YXJ0ICsgJy4uLicgKyB0aGlzLl9lbmQgK1xuICAgICAgICAodGhpcy5fc3RlcCAhPT0gMSA/ICcgYnkgJyArIHRoaXMuX3N0ZXAgOiAnJykgK1xuICAgICAgJyBdJztcbiAgICB9O1xuXG4gICAgUmFuZ2UucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKGluZGV4LCBub3RTZXRWYWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMuaGFzKGluZGV4KSA/XG4gICAgICAgIHRoaXMuX3N0YXJ0ICsgd3JhcEluZGV4KHRoaXMsIGluZGV4KSAqIHRoaXMuX3N0ZXAgOlxuICAgICAgICBub3RTZXRWYWx1ZTtcbiAgICB9O1xuXG4gICAgUmFuZ2UucHJvdG90eXBlLmluY2x1ZGVzID0gZnVuY3Rpb24oc2VhcmNoVmFsdWUpIHtcbiAgICAgIHZhciBwb3NzaWJsZUluZGV4ID0gKHNlYXJjaFZhbHVlIC0gdGhpcy5fc3RhcnQpIC8gdGhpcy5fc3RlcDtcbiAgICAgIHJldHVybiBwb3NzaWJsZUluZGV4ID49IDAgJiZcbiAgICAgICAgcG9zc2libGVJbmRleCA8IHRoaXMuc2l6ZSAmJlxuICAgICAgICBwb3NzaWJsZUluZGV4ID09PSBNYXRoLmZsb29yKHBvc3NpYmxlSW5kZXgpO1xuICAgIH07XG5cbiAgICBSYW5nZS5wcm90b3R5cGUuc2xpY2UgPSBmdW5jdGlvbihiZWdpbiwgZW5kKSB7XG4gICAgICBpZiAod2hvbGVTbGljZShiZWdpbiwgZW5kLCB0aGlzLnNpemUpKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgICAgYmVnaW4gPSByZXNvbHZlQmVnaW4oYmVnaW4sIHRoaXMuc2l6ZSk7XG4gICAgICBlbmQgPSByZXNvbHZlRW5kKGVuZCwgdGhpcy5zaXplKTtcbiAgICAgIGlmIChlbmQgPD0gYmVnaW4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSYW5nZSgwLCAwKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXcgUmFuZ2UodGhpcy5nZXQoYmVnaW4sIHRoaXMuX2VuZCksIHRoaXMuZ2V0KGVuZCwgdGhpcy5fZW5kKSwgdGhpcy5fc3RlcCk7XG4gICAgfTtcblxuICAgIFJhbmdlLnByb3RvdHlwZS5pbmRleE9mID0gZnVuY3Rpb24oc2VhcmNoVmFsdWUpIHtcbiAgICAgIHZhciBvZmZzZXRWYWx1ZSA9IHNlYXJjaFZhbHVlIC0gdGhpcy5fc3RhcnQ7XG4gICAgICBpZiAob2Zmc2V0VmFsdWUgJSB0aGlzLl9zdGVwID09PSAwKSB7XG4gICAgICAgIHZhciBpbmRleCA9IG9mZnNldFZhbHVlIC8gdGhpcy5fc3RlcDtcbiAgICAgICAgaWYgKGluZGV4ID49IDAgJiYgaW5kZXggPCB0aGlzLnNpemUpIHtcbiAgICAgICAgICByZXR1cm4gaW5kZXhcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIC0xO1xuICAgIH07XG5cbiAgICBSYW5nZS5wcm90b3R5cGUubGFzdEluZGV4T2YgPSBmdW5jdGlvbihzZWFyY2hWYWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMuaW5kZXhPZihzZWFyY2hWYWx1ZSk7XG4gICAgfTtcblxuICAgIFJhbmdlLnByb3RvdHlwZS5fX2l0ZXJhdGUgPSBmdW5jdGlvbihmbiwgcmV2ZXJzZSkge1xuICAgICAgdmFyIG1heEluZGV4ID0gdGhpcy5zaXplIC0gMTtcbiAgICAgIHZhciBzdGVwID0gdGhpcy5fc3RlcDtcbiAgICAgIHZhciB2YWx1ZSA9IHJldmVyc2UgPyB0aGlzLl9zdGFydCArIG1heEluZGV4ICogc3RlcCA6IHRoaXMuX3N0YXJ0O1xuICAgICAgZm9yICh2YXIgaWkgPSAwOyBpaSA8PSBtYXhJbmRleDsgaWkrKykge1xuICAgICAgICBpZiAoZm4odmFsdWUsIGlpLCB0aGlzKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICByZXR1cm4gaWkgKyAxO1xuICAgICAgICB9XG4gICAgICAgIHZhbHVlICs9IHJldmVyc2UgPyAtc3RlcCA6IHN0ZXA7XG4gICAgICB9XG4gICAgICByZXR1cm4gaWk7XG4gICAgfTtcblxuICAgIFJhbmdlLnByb3RvdHlwZS5fX2l0ZXJhdG9yID0gZnVuY3Rpb24odHlwZSwgcmV2ZXJzZSkge1xuICAgICAgdmFyIG1heEluZGV4ID0gdGhpcy5zaXplIC0gMTtcbiAgICAgIHZhciBzdGVwID0gdGhpcy5fc3RlcDtcbiAgICAgIHZhciB2YWx1ZSA9IHJldmVyc2UgPyB0aGlzLl9zdGFydCArIG1heEluZGV4ICogc3RlcCA6IHRoaXMuX3N0YXJ0O1xuICAgICAgdmFyIGlpID0gMDtcbiAgICAgIHJldHVybiBuZXcgSXRlcmF0b3IoZnVuY3Rpb24oKSAge1xuICAgICAgICB2YXIgdiA9IHZhbHVlO1xuICAgICAgICB2YWx1ZSArPSByZXZlcnNlID8gLXN0ZXAgOiBzdGVwO1xuICAgICAgICByZXR1cm4gaWkgPiBtYXhJbmRleCA/IGl0ZXJhdG9yRG9uZSgpIDogaXRlcmF0b3JWYWx1ZSh0eXBlLCBpaSsrLCB2KTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBSYW5nZS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24ob3RoZXIpIHtcbiAgICAgIHJldHVybiBvdGhlciBpbnN0YW5jZW9mIFJhbmdlID9cbiAgICAgICAgdGhpcy5fc3RhcnQgPT09IG90aGVyLl9zdGFydCAmJlxuICAgICAgICB0aGlzLl9lbmQgPT09IG90aGVyLl9lbmQgJiZcbiAgICAgICAgdGhpcy5fc3RlcCA9PT0gb3RoZXIuX3N0ZXAgOlxuICAgICAgICBkZWVwRXF1YWwodGhpcywgb3RoZXIpO1xuICAgIH07XG5cblxuICB2YXIgRU1QVFlfUkFOR0U7XG5cbiAgY3JlYXRlQ2xhc3MoQ29sbGVjdGlvbiwgSXRlcmFibGUpO1xuICAgIGZ1bmN0aW9uIENvbGxlY3Rpb24oKSB7XG4gICAgICB0aHJvdyBUeXBlRXJyb3IoJ0Fic3RyYWN0Jyk7XG4gICAgfVxuXG5cbiAgY3JlYXRlQ2xhc3MoS2V5ZWRDb2xsZWN0aW9uLCBDb2xsZWN0aW9uKTtmdW5jdGlvbiBLZXllZENvbGxlY3Rpb24oKSB7fVxuXG4gIGNyZWF0ZUNsYXNzKEluZGV4ZWRDb2xsZWN0aW9uLCBDb2xsZWN0aW9uKTtmdW5jdGlvbiBJbmRleGVkQ29sbGVjdGlvbigpIHt9XG5cbiAgY3JlYXRlQ2xhc3MoU2V0Q29sbGVjdGlvbiwgQ29sbGVjdGlvbik7ZnVuY3Rpb24gU2V0Q29sbGVjdGlvbigpIHt9XG5cblxuICBDb2xsZWN0aW9uLktleWVkID0gS2V5ZWRDb2xsZWN0aW9uO1xuICBDb2xsZWN0aW9uLkluZGV4ZWQgPSBJbmRleGVkQ29sbGVjdGlvbjtcbiAgQ29sbGVjdGlvbi5TZXQgPSBTZXRDb2xsZWN0aW9uO1xuXG4gIHZhciBpbXVsID1cbiAgICB0eXBlb2YgTWF0aC5pbXVsID09PSAnZnVuY3Rpb24nICYmIE1hdGguaW11bCgweGZmZmZmZmZmLCAyKSA9PT0gLTIgP1xuICAgIE1hdGguaW11bCA6XG4gICAgZnVuY3Rpb24gaW11bChhLCBiKSB7XG4gICAgICBhID0gYSB8IDA7IC8vIGludFxuICAgICAgYiA9IGIgfCAwOyAvLyBpbnRcbiAgICAgIHZhciBjID0gYSAmIDB4ZmZmZjtcbiAgICAgIHZhciBkID0gYiAmIDB4ZmZmZjtcbiAgICAgIC8vIFNoaWZ0IGJ5IDAgZml4ZXMgdGhlIHNpZ24gb24gdGhlIGhpZ2ggcGFydC5cbiAgICAgIHJldHVybiAoYyAqIGQpICsgKCgoKGEgPj4+IDE2KSAqIGQgKyBjICogKGIgPj4+IDE2KSkgPDwgMTYpID4+PiAwKSB8IDA7IC8vIGludFxuICAgIH07XG5cbiAgLy8gdjggaGFzIGFuIG9wdGltaXphdGlvbiBmb3Igc3RvcmluZyAzMS1iaXQgc2lnbmVkIG51bWJlcnMuXG4gIC8vIFZhbHVlcyB3aGljaCBoYXZlIGVpdGhlciAwMCBvciAxMSBhcyB0aGUgaGlnaCBvcmRlciBiaXRzIHF1YWxpZnkuXG4gIC8vIFRoaXMgZnVuY3Rpb24gZHJvcHMgdGhlIGhpZ2hlc3Qgb3JkZXIgYml0IGluIGEgc2lnbmVkIG51bWJlciwgbWFpbnRhaW5pbmdcbiAgLy8gdGhlIHNpZ24gYml0LlxuICBmdW5jdGlvbiBzbWkoaTMyKSB7XG4gICAgcmV0dXJuICgoaTMyID4+PiAxKSAmIDB4NDAwMDAwMDApIHwgKGkzMiAmIDB4QkZGRkZGRkYpO1xuICB9XG5cbiAgZnVuY3Rpb24gaGFzaChvKSB7XG4gICAgaWYgKG8gPT09IGZhbHNlIHx8IG8gPT09IG51bGwgfHwgbyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBvLnZhbHVlT2YgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIG8gPSBvLnZhbHVlT2YoKTtcbiAgICAgIGlmIChvID09PSBmYWxzZSB8fCBvID09PSBudWxsIHx8IG8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKG8gPT09IHRydWUpIHtcbiAgICAgIHJldHVybiAxO1xuICAgIH1cbiAgICB2YXIgdHlwZSA9IHR5cGVvZiBvO1xuICAgIGlmICh0eXBlID09PSAnbnVtYmVyJykge1xuICAgICAgaWYgKG8gIT09IG8gfHwgbyA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG4gICAgICB2YXIgaCA9IG8gfCAwO1xuICAgICAgaWYgKGggIT09IG8pIHtcbiAgICAgICAgaCBePSBvICogMHhGRkZGRkZGRjtcbiAgICAgIH1cbiAgICAgIHdoaWxlIChvID4gMHhGRkZGRkZGRikge1xuICAgICAgICBvIC89IDB4RkZGRkZGRkY7XG4gICAgICAgIGggXj0gbztcbiAgICAgIH1cbiAgICAgIHJldHVybiBzbWkoaCk7XG4gICAgfVxuICAgIGlmICh0eXBlID09PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIG8ubGVuZ3RoID4gU1RSSU5HX0hBU0hfQ0FDSEVfTUlOX1NUUkxFTiA/IGNhY2hlZEhhc2hTdHJpbmcobykgOiBoYXNoU3RyaW5nKG8pO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG8uaGFzaENvZGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybiBvLmhhc2hDb2RlKCk7XG4gICAgfVxuICAgIGlmICh0eXBlID09PSAnb2JqZWN0Jykge1xuICAgICAgcmV0dXJuIGhhc2hKU09iaihvKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBvLnRvU3RyaW5nID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gaGFzaFN0cmluZyhvLnRvU3RyaW5nKCkpO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1ZhbHVlIHR5cGUgJyArIHR5cGUgKyAnIGNhbm5vdCBiZSBoYXNoZWQuJyk7XG4gIH1cblxuICBmdW5jdGlvbiBjYWNoZWRIYXNoU3RyaW5nKHN0cmluZykge1xuICAgIHZhciBoYXNoID0gc3RyaW5nSGFzaENhY2hlW3N0cmluZ107XG4gICAgaWYgKGhhc2ggPT09IHVuZGVmaW5lZCkge1xuICAgICAgaGFzaCA9IGhhc2hTdHJpbmcoc3RyaW5nKTtcbiAgICAgIGlmIChTVFJJTkdfSEFTSF9DQUNIRV9TSVpFID09PSBTVFJJTkdfSEFTSF9DQUNIRV9NQVhfU0laRSkge1xuICAgICAgICBTVFJJTkdfSEFTSF9DQUNIRV9TSVpFID0gMDtcbiAgICAgICAgc3RyaW5nSGFzaENhY2hlID0ge307XG4gICAgICB9XG4gICAgICBTVFJJTkdfSEFTSF9DQUNIRV9TSVpFKys7XG4gICAgICBzdHJpbmdIYXNoQ2FjaGVbc3RyaW5nXSA9IGhhc2g7XG4gICAgfVxuICAgIHJldHVybiBoYXNoO1xuICB9XG5cbiAgLy8gaHR0cDovL2pzcGVyZi5jb20vaGFzaGluZy1zdHJpbmdzXG4gIGZ1bmN0aW9uIGhhc2hTdHJpbmcoc3RyaW5nKSB7XG4gICAgLy8gVGhpcyBpcyB0aGUgaGFzaCBmcm9tIEpWTVxuICAgIC8vIFRoZSBoYXNoIGNvZGUgZm9yIGEgc3RyaW5nIGlzIGNvbXB1dGVkIGFzXG4gICAgLy8gc1swXSAqIDMxIF4gKG4gLSAxKSArIHNbMV0gKiAzMSBeIChuIC0gMikgKyAuLi4gKyBzW24gLSAxXSxcbiAgICAvLyB3aGVyZSBzW2ldIGlzIHRoZSBpdGggY2hhcmFjdGVyIG9mIHRoZSBzdHJpbmcgYW5kIG4gaXMgdGhlIGxlbmd0aCBvZlxuICAgIC8vIHRoZSBzdHJpbmcuIFdlIFwibW9kXCIgdGhlIHJlc3VsdCB0byBtYWtlIGl0IGJldHdlZW4gMCAoaW5jbHVzaXZlKSBhbmQgMl4zMVxuICAgIC8vIChleGNsdXNpdmUpIGJ5IGRyb3BwaW5nIGhpZ2ggYml0cy5cbiAgICB2YXIgaGFzaCA9IDA7XG4gICAgZm9yICh2YXIgaWkgPSAwOyBpaSA8IHN0cmluZy5sZW5ndGg7IGlpKyspIHtcbiAgICAgIGhhc2ggPSAzMSAqIGhhc2ggKyBzdHJpbmcuY2hhckNvZGVBdChpaSkgfCAwO1xuICAgIH1cbiAgICByZXR1cm4gc21pKGhhc2gpO1xuICB9XG5cbiAgZnVuY3Rpb24gaGFzaEpTT2JqKG9iaikge1xuICAgIHZhciBoYXNoO1xuICAgIGlmICh1c2luZ1dlYWtNYXApIHtcbiAgICAgIGhhc2ggPSB3ZWFrTWFwLmdldChvYmopO1xuICAgICAgaWYgKGhhc2ggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gaGFzaDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBoYXNoID0gb2JqW1VJRF9IQVNIX0tFWV07XG4gICAgaWYgKGhhc2ggIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGhhc2g7XG4gICAgfVxuXG4gICAgaWYgKCFjYW5EZWZpbmVQcm9wZXJ0eSkge1xuICAgICAgaGFzaCA9IG9iai5wcm9wZXJ0eUlzRW51bWVyYWJsZSAmJiBvYmoucHJvcGVydHlJc0VudW1lcmFibGVbVUlEX0hBU0hfS0VZXTtcbiAgICAgIGlmIChoYXNoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGhhc2g7XG4gICAgICB9XG5cbiAgICAgIGhhc2ggPSBnZXRJRU5vZGVIYXNoKG9iaik7XG4gICAgICBpZiAoaGFzaCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBoYXNoO1xuICAgICAgfVxuICAgIH1cblxuICAgIGhhc2ggPSArK29iakhhc2hVSUQ7XG4gICAgaWYgKG9iakhhc2hVSUQgJiAweDQwMDAwMDAwKSB7XG4gICAgICBvYmpIYXNoVUlEID0gMDtcbiAgICB9XG5cbiAgICBpZiAodXNpbmdXZWFrTWFwKSB7XG4gICAgICB3ZWFrTWFwLnNldChvYmosIGhhc2gpO1xuICAgIH0gZWxzZSBpZiAoaXNFeHRlbnNpYmxlICE9PSB1bmRlZmluZWQgJiYgaXNFeHRlbnNpYmxlKG9iaikgPT09IGZhbHNlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vbi1leHRlbnNpYmxlIG9iamVjdHMgYXJlIG5vdCBhbGxvd2VkIGFzIGtleXMuJyk7XG4gICAgfSBlbHNlIGlmIChjYW5EZWZpbmVQcm9wZXJ0eSkge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgVUlEX0hBU0hfS0VZLCB7XG4gICAgICAgICdlbnVtZXJhYmxlJzogZmFsc2UsXG4gICAgICAgICdjb25maWd1cmFibGUnOiBmYWxzZSxcbiAgICAgICAgJ3dyaXRhYmxlJzogZmFsc2UsXG4gICAgICAgICd2YWx1ZSc6IGhhc2hcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAob2JqLnByb3BlcnR5SXNFbnVtZXJhYmxlICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgIG9iai5wcm9wZXJ0eUlzRW51bWVyYWJsZSA9PT0gb2JqLmNvbnN0cnVjdG9yLnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZSkge1xuICAgICAgLy8gU2luY2Ugd2UgY2FuJ3QgZGVmaW5lIGEgbm9uLWVudW1lcmFibGUgcHJvcGVydHkgb24gdGhlIG9iamVjdFxuICAgICAgLy8gd2UnbGwgaGlqYWNrIG9uZSBvZiB0aGUgbGVzcy11c2VkIG5vbi1lbnVtZXJhYmxlIHByb3BlcnRpZXMgdG9cbiAgICAgIC8vIHNhdmUgb3VyIGhhc2ggb24gaXQuIFNpbmNlIHRoaXMgaXMgYSBmdW5jdGlvbiBpdCB3aWxsIG5vdCBzaG93IHVwIGluXG4gICAgICAvLyBgSlNPTi5zdHJpbmdpZnlgIHdoaWNoIGlzIHdoYXQgd2Ugd2FudC5cbiAgICAgIG9iai5wcm9wZXJ0eUlzRW51bWVyYWJsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH07XG4gICAgICBvYmoucHJvcGVydHlJc0VudW1lcmFibGVbVUlEX0hBU0hfS0VZXSA9IGhhc2g7XG4gICAgfSBlbHNlIGlmIChvYmoubm9kZVR5cGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gQXQgdGhpcyBwb2ludCB3ZSBjb3VsZG4ndCBnZXQgdGhlIElFIGB1bmlxdWVJRGAgdG8gdXNlIGFzIGEgaGFzaFxuICAgICAgLy8gYW5kIHdlIGNvdWxkbid0IHVzZSBhIG5vbi1lbnVtZXJhYmxlIHByb3BlcnR5IHRvIGV4cGxvaXQgdGhlXG4gICAgICAvLyBkb250RW51bSBidWcgc28gd2Ugc2ltcGx5IGFkZCB0aGUgYFVJRF9IQVNIX0tFWWAgb24gdGhlIG5vZGVcbiAgICAgIC8vIGl0c2VsZi5cbiAgICAgIG9ialtVSURfSEFTSF9LRVldID0gaGFzaDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmFibGUgdG8gc2V0IGEgbm9uLWVudW1lcmFibGUgcHJvcGVydHkgb24gb2JqZWN0LicpO1xuICAgIH1cblxuICAgIHJldHVybiBoYXNoO1xuICB9XG5cbiAgLy8gR2V0IHJlZmVyZW5jZXMgdG8gRVM1IG9iamVjdCBtZXRob2RzLlxuICB2YXIgaXNFeHRlbnNpYmxlID0gT2JqZWN0LmlzRXh0ZW5zaWJsZTtcblxuICAvLyBUcnVlIGlmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSB3b3JrcyBhcyBleHBlY3RlZC4gSUU4IGZhaWxzIHRoaXMgdGVzdC5cbiAgdmFyIGNhbkRlZmluZVByb3BlcnR5ID0gKGZ1bmN0aW9uKCkge1xuICAgIHRyeSB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdAJywge30pO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSgpKTtcblxuICAvLyBJRSBoYXMgYSBgdW5pcXVlSURgIHByb3BlcnR5IG9uIERPTSBub2Rlcy4gV2UgY2FuIGNvbnN0cnVjdCB0aGUgaGFzaCBmcm9tIGl0XG4gIC8vIGFuZCBhdm9pZCBtZW1vcnkgbGVha3MgZnJvbSB0aGUgSUUgY2xvbmVOb2RlIGJ1Zy5cbiAgZnVuY3Rpb24gZ2V0SUVOb2RlSGFzaChub2RlKSB7XG4gICAgaWYgKG5vZGUgJiYgbm9kZS5ub2RlVHlwZSA+IDApIHtcbiAgICAgIHN3aXRjaCAobm9kZS5ub2RlVHlwZSkge1xuICAgICAgICBjYXNlIDE6IC8vIEVsZW1lbnRcbiAgICAgICAgICByZXR1cm4gbm9kZS51bmlxdWVJRDtcbiAgICAgICAgY2FzZSA5OiAvLyBEb2N1bWVudFxuICAgICAgICAgIHJldHVybiBub2RlLmRvY3VtZW50RWxlbWVudCAmJiBub2RlLmRvY3VtZW50RWxlbWVudC51bmlxdWVJRDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBJZiBwb3NzaWJsZSwgdXNlIGEgV2Vha01hcC5cbiAgdmFyIHVzaW5nV2Vha01hcCA9IHR5cGVvZiBXZWFrTWFwID09PSAnZnVuY3Rpb24nO1xuICB2YXIgd2Vha01hcDtcbiAgaWYgKHVzaW5nV2Vha01hcCkge1xuICAgIHdlYWtNYXAgPSBuZXcgV2Vha01hcCgpO1xuICB9XG5cbiAgdmFyIG9iakhhc2hVSUQgPSAwO1xuXG4gIHZhciBVSURfSEFTSF9LRVkgPSAnX19pbW11dGFibGVoYXNoX18nO1xuICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIFVJRF9IQVNIX0tFWSA9IFN5bWJvbChVSURfSEFTSF9LRVkpO1xuICB9XG5cbiAgdmFyIFNUUklOR19IQVNIX0NBQ0hFX01JTl9TVFJMRU4gPSAxNjtcbiAgdmFyIFNUUklOR19IQVNIX0NBQ0hFX01BWF9TSVpFID0gMjU1O1xuICB2YXIgU1RSSU5HX0hBU0hfQ0FDSEVfU0laRSA9IDA7XG4gIHZhciBzdHJpbmdIYXNoQ2FjaGUgPSB7fTtcblxuICBmdW5jdGlvbiBhc3NlcnROb3RJbmZpbml0ZShzaXplKSB7XG4gICAgaW52YXJpYW50KFxuICAgICAgc2l6ZSAhPT0gSW5maW5pdHksXG4gICAgICAnQ2Fubm90IHBlcmZvcm0gdGhpcyBhY3Rpb24gd2l0aCBhbiBpbmZpbml0ZSBzaXplLidcbiAgICApO1xuICB9XG5cbiAgY3JlYXRlQ2xhc3MoTWFwLCBLZXllZENvbGxlY3Rpb24pO1xuXG4gICAgLy8gQHByYWdtYSBDb25zdHJ1Y3Rpb25cblxuICAgIGZ1bmN0aW9uIE1hcCh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQgPyBlbXB0eU1hcCgpIDpcbiAgICAgICAgaXNNYXAodmFsdWUpICYmICFpc09yZGVyZWQodmFsdWUpID8gdmFsdWUgOlxuICAgICAgICBlbXB0eU1hcCgpLndpdGhNdXRhdGlvbnMoZnVuY3Rpb24obWFwICkge1xuICAgICAgICAgIHZhciBpdGVyID0gS2V5ZWRJdGVyYWJsZSh2YWx1ZSk7XG4gICAgICAgICAgYXNzZXJ0Tm90SW5maW5pdGUoaXRlci5zaXplKTtcbiAgICAgICAgICBpdGVyLmZvckVhY2goZnVuY3Rpb24odiwgaykgIHtyZXR1cm4gbWFwLnNldChrLCB2KX0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBNYXAub2YgPSBmdW5jdGlvbigpIHt2YXIga2V5VmFsdWVzID0gU0xJQ0UkMC5jYWxsKGFyZ3VtZW50cywgMCk7XG4gICAgICByZXR1cm4gZW1wdHlNYXAoKS53aXRoTXV0YXRpb25zKGZ1bmN0aW9uKG1hcCApIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlWYWx1ZXMubGVuZ3RoOyBpICs9IDIpIHtcbiAgICAgICAgICBpZiAoaSArIDEgPj0ga2V5VmFsdWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHZhbHVlIGZvciBrZXk6ICcgKyBrZXlWYWx1ZXNbaV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtYXAuc2V0KGtleVZhbHVlc1tpXSwga2V5VmFsdWVzW2kgKyAxXSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBNYXAucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5fX3RvU3RyaW5nKCdNYXAgeycsICd9Jyk7XG4gICAgfTtcblxuICAgIC8vIEBwcmFnbWEgQWNjZXNzXG5cbiAgICBNYXAucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKGssIG5vdFNldFZhbHVlKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcm9vdCA/XG4gICAgICAgIHRoaXMuX3Jvb3QuZ2V0KDAsIHVuZGVmaW5lZCwgaywgbm90U2V0VmFsdWUpIDpcbiAgICAgICAgbm90U2V0VmFsdWU7XG4gICAgfTtcblxuICAgIC8vIEBwcmFnbWEgTW9kaWZpY2F0aW9uXG5cbiAgICBNYXAucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uKGssIHYpIHtcbiAgICAgIHJldHVybiB1cGRhdGVNYXAodGhpcywgaywgdik7XG4gICAgfTtcblxuICAgIE1hcC5wcm90b3R5cGUuc2V0SW4gPSBmdW5jdGlvbihrZXlQYXRoLCB2KSB7XG4gICAgICByZXR1cm4gdGhpcy51cGRhdGVJbihrZXlQYXRoLCBOT1RfU0VULCBmdW5jdGlvbigpICB7cmV0dXJuIHZ9KTtcbiAgICB9O1xuXG4gICAgTWFwLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbihrKSB7XG4gICAgICByZXR1cm4gdXBkYXRlTWFwKHRoaXMsIGssIE5PVF9TRVQpO1xuICAgIH07XG5cbiAgICBNYXAucHJvdG90eXBlLmRlbGV0ZUluID0gZnVuY3Rpb24oa2V5UGF0aCkge1xuICAgICAgcmV0dXJuIHRoaXMudXBkYXRlSW4oa2V5UGF0aCwgZnVuY3Rpb24oKSAge3JldHVybiBOT1RfU0VUfSk7XG4gICAgfTtcblxuICAgIE1hcC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24oaywgbm90U2V0VmFsdWUsIHVwZGF0ZXIpIHtcbiAgICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID09PSAxID9cbiAgICAgICAgayh0aGlzKSA6XG4gICAgICAgIHRoaXMudXBkYXRlSW4oW2tdLCBub3RTZXRWYWx1ZSwgdXBkYXRlcik7XG4gICAgfTtcblxuICAgIE1hcC5wcm90b3R5cGUudXBkYXRlSW4gPSBmdW5jdGlvbihrZXlQYXRoLCBub3RTZXRWYWx1ZSwgdXBkYXRlcikge1xuICAgICAgaWYgKCF1cGRhdGVyKSB7XG4gICAgICAgIHVwZGF0ZXIgPSBub3RTZXRWYWx1ZTtcbiAgICAgICAgbm90U2V0VmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICB2YXIgdXBkYXRlZFZhbHVlID0gdXBkYXRlSW5EZWVwTWFwKFxuICAgICAgICB0aGlzLFxuICAgICAgICBmb3JjZUl0ZXJhdG9yKGtleVBhdGgpLFxuICAgICAgICBub3RTZXRWYWx1ZSxcbiAgICAgICAgdXBkYXRlclxuICAgICAgKTtcbiAgICAgIHJldHVybiB1cGRhdGVkVmFsdWUgPT09IE5PVF9TRVQgPyB1bmRlZmluZWQgOiB1cGRhdGVkVmFsdWU7XG4gICAgfTtcblxuICAgIE1hcC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLnNpemUgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5fX293bmVySUQpIHtcbiAgICAgICAgdGhpcy5zaXplID0gMDtcbiAgICAgICAgdGhpcy5fcm9vdCA9IG51bGw7XG4gICAgICAgIHRoaXMuX19oYXNoID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9fYWx0ZXJlZCA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGVtcHR5TWFwKCk7XG4gICAgfTtcblxuICAgIC8vIEBwcmFnbWEgQ29tcG9zaXRpb25cblxuICAgIE1hcC5wcm90b3R5cGUubWVyZ2UgPSBmdW5jdGlvbigvKi4uLml0ZXJzKi8pIHtcbiAgICAgIHJldHVybiBtZXJnZUludG9NYXBXaXRoKHRoaXMsIHVuZGVmaW5lZCwgYXJndW1lbnRzKTtcbiAgICB9O1xuXG4gICAgTWFwLnByb3RvdHlwZS5tZXJnZVdpdGggPSBmdW5jdGlvbihtZXJnZXIpIHt2YXIgaXRlcnMgPSBTTElDRSQwLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgICAgIHJldHVybiBtZXJnZUludG9NYXBXaXRoKHRoaXMsIG1lcmdlciwgaXRlcnMpO1xuICAgIH07XG5cbiAgICBNYXAucHJvdG90eXBlLm1lcmdlSW4gPSBmdW5jdGlvbihrZXlQYXRoKSB7dmFyIGl0ZXJzID0gU0xJQ0UkMC5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgICByZXR1cm4gdGhpcy51cGRhdGVJbihcbiAgICAgICAga2V5UGF0aCxcbiAgICAgICAgZW1wdHlNYXAoKSxcbiAgICAgICAgZnVuY3Rpb24obSApIHtyZXR1cm4gdHlwZW9mIG0ubWVyZ2UgPT09ICdmdW5jdGlvbicgP1xuICAgICAgICAgIG0ubWVyZ2UuYXBwbHkobSwgaXRlcnMpIDpcbiAgICAgICAgICBpdGVyc1tpdGVycy5sZW5ndGggLSAxXX1cbiAgICAgICk7XG4gICAgfTtcblxuICAgIE1hcC5wcm90b3R5cGUubWVyZ2VEZWVwID0gZnVuY3Rpb24oLyouLi5pdGVycyovKSB7XG4gICAgICByZXR1cm4gbWVyZ2VJbnRvTWFwV2l0aCh0aGlzLCBkZWVwTWVyZ2VyLCBhcmd1bWVudHMpO1xuICAgIH07XG5cbiAgICBNYXAucHJvdG90eXBlLm1lcmdlRGVlcFdpdGggPSBmdW5jdGlvbihtZXJnZXIpIHt2YXIgaXRlcnMgPSBTTElDRSQwLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgICAgIHJldHVybiBtZXJnZUludG9NYXBXaXRoKHRoaXMsIGRlZXBNZXJnZXJXaXRoKG1lcmdlciksIGl0ZXJzKTtcbiAgICB9O1xuXG4gICAgTWFwLnByb3RvdHlwZS5tZXJnZURlZXBJbiA9IGZ1bmN0aW9uKGtleVBhdGgpIHt2YXIgaXRlcnMgPSBTTElDRSQwLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgICAgIHJldHVybiB0aGlzLnVwZGF0ZUluKFxuICAgICAgICBrZXlQYXRoLFxuICAgICAgICBlbXB0eU1hcCgpLFxuICAgICAgICBmdW5jdGlvbihtICkge3JldHVybiB0eXBlb2YgbS5tZXJnZURlZXAgPT09ICdmdW5jdGlvbicgP1xuICAgICAgICAgIG0ubWVyZ2VEZWVwLmFwcGx5KG0sIGl0ZXJzKSA6XG4gICAgICAgICAgaXRlcnNbaXRlcnMubGVuZ3RoIC0gMV19XG4gICAgICApO1xuICAgIH07XG5cbiAgICBNYXAucHJvdG90eXBlLnNvcnQgPSBmdW5jdGlvbihjb21wYXJhdG9yKSB7XG4gICAgICAvLyBMYXRlIGJpbmRpbmdcbiAgICAgIHJldHVybiBPcmRlcmVkTWFwKHNvcnRGYWN0b3J5KHRoaXMsIGNvbXBhcmF0b3IpKTtcbiAgICB9O1xuXG4gICAgTWFwLnByb3RvdHlwZS5zb3J0QnkgPSBmdW5jdGlvbihtYXBwZXIsIGNvbXBhcmF0b3IpIHtcbiAgICAgIC8vIExhdGUgYmluZGluZ1xuICAgICAgcmV0dXJuIE9yZGVyZWRNYXAoc29ydEZhY3RvcnkodGhpcywgY29tcGFyYXRvciwgbWFwcGVyKSk7XG4gICAgfTtcblxuICAgIC8vIEBwcmFnbWEgTXV0YWJpbGl0eVxuXG4gICAgTWFwLnByb3RvdHlwZS53aXRoTXV0YXRpb25zID0gZnVuY3Rpb24oZm4pIHtcbiAgICAgIHZhciBtdXRhYmxlID0gdGhpcy5hc011dGFibGUoKTtcbiAgICAgIGZuKG11dGFibGUpO1xuICAgICAgcmV0dXJuIG11dGFibGUud2FzQWx0ZXJlZCgpID8gbXV0YWJsZS5fX2Vuc3VyZU93bmVyKHRoaXMuX19vd25lcklEKSA6IHRoaXM7XG4gICAgfTtcblxuICAgIE1hcC5wcm90b3R5cGUuYXNNdXRhYmxlID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5fX293bmVySUQgPyB0aGlzIDogdGhpcy5fX2Vuc3VyZU93bmVyKG5ldyBPd25lcklEKCkpO1xuICAgIH07XG5cbiAgICBNYXAucHJvdG90eXBlLmFzSW1tdXRhYmxlID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5fX2Vuc3VyZU93bmVyKCk7XG4gICAgfTtcblxuICAgIE1hcC5wcm90b3R5cGUud2FzQWx0ZXJlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX19hbHRlcmVkO1xuICAgIH07XG5cbiAgICBNYXAucHJvdG90eXBlLl9faXRlcmF0b3IgPSBmdW5jdGlvbih0eXBlLCByZXZlcnNlKSB7XG4gICAgICByZXR1cm4gbmV3IE1hcEl0ZXJhdG9yKHRoaXMsIHR5cGUsIHJldmVyc2UpO1xuICAgIH07XG5cbiAgICBNYXAucHJvdG90eXBlLl9faXRlcmF0ZSA9IGZ1bmN0aW9uKGZuLCByZXZlcnNlKSB7dmFyIHRoaXMkMCA9IHRoaXM7XG4gICAgICB2YXIgaXRlcmF0aW9ucyA9IDA7XG4gICAgICB0aGlzLl9yb290ICYmIHRoaXMuX3Jvb3QuaXRlcmF0ZShmdW5jdGlvbihlbnRyeSApIHtcbiAgICAgICAgaXRlcmF0aW9ucysrO1xuICAgICAgICByZXR1cm4gZm4oZW50cnlbMV0sIGVudHJ5WzBdLCB0aGlzJDApO1xuICAgICAgfSwgcmV2ZXJzZSk7XG4gICAgICByZXR1cm4gaXRlcmF0aW9ucztcbiAgICB9O1xuXG4gICAgTWFwLnByb3RvdHlwZS5fX2Vuc3VyZU93bmVyID0gZnVuY3Rpb24ob3duZXJJRCkge1xuICAgICAgaWYgKG93bmVySUQgPT09IHRoaXMuX19vd25lcklEKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgICAgaWYgKCFvd25lcklEKSB7XG4gICAgICAgIHRoaXMuX19vd25lcklEID0gb3duZXJJRDtcbiAgICAgICAgdGhpcy5fX2FsdGVyZWQgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgICByZXR1cm4gbWFrZU1hcCh0aGlzLnNpemUsIHRoaXMuX3Jvb3QsIG93bmVySUQsIHRoaXMuX19oYXNoKTtcbiAgICB9O1xuXG5cbiAgZnVuY3Rpb24gaXNNYXAobWF5YmVNYXApIHtcbiAgICByZXR1cm4gISEobWF5YmVNYXAgJiYgbWF5YmVNYXBbSVNfTUFQX1NFTlRJTkVMXSk7XG4gIH1cblxuICBNYXAuaXNNYXAgPSBpc01hcDtcblxuICB2YXIgSVNfTUFQX1NFTlRJTkVMID0gJ0BAX19JTU1VVEFCTEVfTUFQX19AQCc7XG5cbiAgdmFyIE1hcFByb3RvdHlwZSA9IE1hcC5wcm90b3R5cGU7XG4gIE1hcFByb3RvdHlwZVtJU19NQVBfU0VOVElORUxdID0gdHJ1ZTtcbiAgTWFwUHJvdG90eXBlW0RFTEVURV0gPSBNYXBQcm90b3R5cGUucmVtb3ZlO1xuICBNYXBQcm90b3R5cGUucmVtb3ZlSW4gPSBNYXBQcm90b3R5cGUuZGVsZXRlSW47XG5cblxuICAvLyAjcHJhZ21hIFRyaWUgTm9kZXNcblxuXG5cbiAgICBmdW5jdGlvbiBBcnJheU1hcE5vZGUob3duZXJJRCwgZW50cmllcykge1xuICAgICAgdGhpcy5vd25lcklEID0gb3duZXJJRDtcbiAgICAgIHRoaXMuZW50cmllcyA9IGVudHJpZXM7XG4gICAgfVxuXG4gICAgQXJyYXlNYXBOb2RlLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbihzaGlmdCwga2V5SGFzaCwga2V5LCBub3RTZXRWYWx1ZSkge1xuICAgICAgdmFyIGVudHJpZXMgPSB0aGlzLmVudHJpZXM7XG4gICAgICBmb3IgKHZhciBpaSA9IDAsIGxlbiA9IGVudHJpZXMubGVuZ3RoOyBpaSA8IGxlbjsgaWkrKykge1xuICAgICAgICBpZiAoaXMoa2V5LCBlbnRyaWVzW2lpXVswXSkpIHtcbiAgICAgICAgICByZXR1cm4gZW50cmllc1tpaV1bMV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBub3RTZXRWYWx1ZTtcbiAgICB9O1xuXG4gICAgQXJyYXlNYXBOb2RlLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbihvd25lcklELCBzaGlmdCwga2V5SGFzaCwga2V5LCB2YWx1ZSwgZGlkQ2hhbmdlU2l6ZSwgZGlkQWx0ZXIpIHtcbiAgICAgIHZhciByZW1vdmVkID0gdmFsdWUgPT09IE5PVF9TRVQ7XG5cbiAgICAgIHZhciBlbnRyaWVzID0gdGhpcy5lbnRyaWVzO1xuICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICBmb3IgKHZhciBsZW4gPSBlbnRyaWVzLmxlbmd0aDsgaWR4IDwgbGVuOyBpZHgrKykge1xuICAgICAgICBpZiAoaXMoa2V5LCBlbnRyaWVzW2lkeF1bMF0pKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHZhciBleGlzdHMgPSBpZHggPCBsZW47XG5cbiAgICAgIGlmIChleGlzdHMgPyBlbnRyaWVzW2lkeF1bMV0gPT09IHZhbHVlIDogcmVtb3ZlZCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cblxuICAgICAgU2V0UmVmKGRpZEFsdGVyKTtcbiAgICAgIChyZW1vdmVkIHx8ICFleGlzdHMpICYmIFNldFJlZihkaWRDaGFuZ2VTaXplKTtcblxuICAgICAgaWYgKHJlbW92ZWQgJiYgZW50cmllcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgcmV0dXJuOyAvLyB1bmRlZmluZWRcbiAgICAgIH1cblxuICAgICAgaWYgKCFleGlzdHMgJiYgIXJlbW92ZWQgJiYgZW50cmllcy5sZW5ndGggPj0gTUFYX0FSUkFZX01BUF9TSVpFKSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVOb2Rlcyhvd25lcklELCBlbnRyaWVzLCBrZXksIHZhbHVlKTtcbiAgICAgIH1cblxuICAgICAgdmFyIGlzRWRpdGFibGUgPSBvd25lcklEICYmIG93bmVySUQgPT09IHRoaXMub3duZXJJRDtcbiAgICAgIHZhciBuZXdFbnRyaWVzID0gaXNFZGl0YWJsZSA/IGVudHJpZXMgOiBhcnJDb3B5KGVudHJpZXMpO1xuXG4gICAgICBpZiAoZXhpc3RzKSB7XG4gICAgICAgIGlmIChyZW1vdmVkKSB7XG4gICAgICAgICAgaWR4ID09PSBsZW4gLSAxID8gbmV3RW50cmllcy5wb3AoKSA6IChuZXdFbnRyaWVzW2lkeF0gPSBuZXdFbnRyaWVzLnBvcCgpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXdFbnRyaWVzW2lkeF0gPSBba2V5LCB2YWx1ZV07XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ld0VudHJpZXMucHVzaChba2V5LCB2YWx1ZV0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNFZGl0YWJsZSkge1xuICAgICAgICB0aGlzLmVudHJpZXMgPSBuZXdFbnRyaWVzO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ldyBBcnJheU1hcE5vZGUob3duZXJJRCwgbmV3RW50cmllcyk7XG4gICAgfTtcblxuXG5cblxuICAgIGZ1bmN0aW9uIEJpdG1hcEluZGV4ZWROb2RlKG93bmVySUQsIGJpdG1hcCwgbm9kZXMpIHtcbiAgICAgIHRoaXMub3duZXJJRCA9IG93bmVySUQ7XG4gICAgICB0aGlzLmJpdG1hcCA9IGJpdG1hcDtcbiAgICAgIHRoaXMubm9kZXMgPSBub2RlcztcbiAgICB9XG5cbiAgICBCaXRtYXBJbmRleGVkTm9kZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24oc2hpZnQsIGtleUhhc2gsIGtleSwgbm90U2V0VmFsdWUpIHtcbiAgICAgIGlmIChrZXlIYXNoID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAga2V5SGFzaCA9IGhhc2goa2V5KTtcbiAgICAgIH1cbiAgICAgIHZhciBiaXQgPSAoMSA8PCAoKHNoaWZ0ID09PSAwID8ga2V5SGFzaCA6IGtleUhhc2ggPj4+IHNoaWZ0KSAmIE1BU0spKTtcbiAgICAgIHZhciBiaXRtYXAgPSB0aGlzLmJpdG1hcDtcbiAgICAgIHJldHVybiAoYml0bWFwICYgYml0KSA9PT0gMCA/IG5vdFNldFZhbHVlIDpcbiAgICAgICAgdGhpcy5ub2Rlc1twb3BDb3VudChiaXRtYXAgJiAoYml0IC0gMSkpXS5nZXQoc2hpZnQgKyBTSElGVCwga2V5SGFzaCwga2V5LCBub3RTZXRWYWx1ZSk7XG4gICAgfTtcblxuICAgIEJpdG1hcEluZGV4ZWROb2RlLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbihvd25lcklELCBzaGlmdCwga2V5SGFzaCwga2V5LCB2YWx1ZSwgZGlkQ2hhbmdlU2l6ZSwgZGlkQWx0ZXIpIHtcbiAgICAgIGlmIChrZXlIYXNoID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAga2V5SGFzaCA9IGhhc2goa2V5KTtcbiAgICAgIH1cbiAgICAgIHZhciBrZXlIYXNoRnJhZyA9IChzaGlmdCA9PT0gMCA/IGtleUhhc2ggOiBrZXlIYXNoID4+PiBzaGlmdCkgJiBNQVNLO1xuICAgICAgdmFyIGJpdCA9IDEgPDwga2V5SGFzaEZyYWc7XG4gICAgICB2YXIgYml0bWFwID0gdGhpcy5iaXRtYXA7XG4gICAgICB2YXIgZXhpc3RzID0gKGJpdG1hcCAmIGJpdCkgIT09IDA7XG5cbiAgICAgIGlmICghZXhpc3RzICYmIHZhbHVlID09PSBOT1RfU0VUKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuXG4gICAgICB2YXIgaWR4ID0gcG9wQ291bnQoYml0bWFwICYgKGJpdCAtIDEpKTtcbiAgICAgIHZhciBub2RlcyA9IHRoaXMubm9kZXM7XG4gICAgICB2YXIgbm9kZSA9IGV4aXN0cyA/IG5vZGVzW2lkeF0gOiB1bmRlZmluZWQ7XG4gICAgICB2YXIgbmV3Tm9kZSA9IHVwZGF0ZU5vZGUobm9kZSwgb3duZXJJRCwgc2hpZnQgKyBTSElGVCwga2V5SGFzaCwga2V5LCB2YWx1ZSwgZGlkQ2hhbmdlU2l6ZSwgZGlkQWx0ZXIpO1xuXG4gICAgICBpZiAobmV3Tm9kZSA9PT0gbm9kZSkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cblxuICAgICAgaWYgKCFleGlzdHMgJiYgbmV3Tm9kZSAmJiBub2Rlcy5sZW5ndGggPj0gTUFYX0JJVE1BUF9JTkRFWEVEX1NJWkUpIHtcbiAgICAgICAgcmV0dXJuIGV4cGFuZE5vZGVzKG93bmVySUQsIG5vZGVzLCBiaXRtYXAsIGtleUhhc2hGcmFnLCBuZXdOb2RlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGV4aXN0cyAmJiAhbmV3Tm9kZSAmJiBub2Rlcy5sZW5ndGggPT09IDIgJiYgaXNMZWFmTm9kZShub2Rlc1tpZHggXiAxXSkpIHtcbiAgICAgICAgcmV0dXJuIG5vZGVzW2lkeCBeIDFdO1xuICAgICAgfVxuXG4gICAgICBpZiAoZXhpc3RzICYmIG5ld05vZGUgJiYgbm9kZXMubGVuZ3RoID09PSAxICYmIGlzTGVhZk5vZGUobmV3Tm9kZSkpIHtcbiAgICAgICAgcmV0dXJuIG5ld05vZGU7XG4gICAgICB9XG5cbiAgICAgIHZhciBpc0VkaXRhYmxlID0gb3duZXJJRCAmJiBvd25lcklEID09PSB0aGlzLm93bmVySUQ7XG4gICAgICB2YXIgbmV3Qml0bWFwID0gZXhpc3RzID8gbmV3Tm9kZSA/IGJpdG1hcCA6IGJpdG1hcCBeIGJpdCA6IGJpdG1hcCB8IGJpdDtcbiAgICAgIHZhciBuZXdOb2RlcyA9IGV4aXN0cyA/IG5ld05vZGUgP1xuICAgICAgICBzZXRJbihub2RlcywgaWR4LCBuZXdOb2RlLCBpc0VkaXRhYmxlKSA6XG4gICAgICAgIHNwbGljZU91dChub2RlcywgaWR4LCBpc0VkaXRhYmxlKSA6XG4gICAgICAgIHNwbGljZUluKG5vZGVzLCBpZHgsIG5ld05vZGUsIGlzRWRpdGFibGUpO1xuXG4gICAgICBpZiAoaXNFZGl0YWJsZSkge1xuICAgICAgICB0aGlzLmJpdG1hcCA9IG5ld0JpdG1hcDtcbiAgICAgICAgdGhpcy5ub2RlcyA9IG5ld05vZGVzO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ldyBCaXRtYXBJbmRleGVkTm9kZShvd25lcklELCBuZXdCaXRtYXAsIG5ld05vZGVzKTtcbiAgICB9O1xuXG5cblxuXG4gICAgZnVuY3Rpb24gSGFzaEFycmF5TWFwTm9kZShvd25lcklELCBjb3VudCwgbm9kZXMpIHtcbiAgICAgIHRoaXMub3duZXJJRCA9IG93bmVySUQ7XG4gICAgICB0aGlzLmNvdW50ID0gY291bnQ7XG4gICAgICB0aGlzLm5vZGVzID0gbm9kZXM7XG4gICAgfVxuXG4gICAgSGFzaEFycmF5TWFwTm9kZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24oc2hpZnQsIGtleUhhc2gsIGtleSwgbm90U2V0VmFsdWUpIHtcbiAgICAgIGlmIChrZXlIYXNoID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAga2V5SGFzaCA9IGhhc2goa2V5KTtcbiAgICAgIH1cbiAgICAgIHZhciBpZHggPSAoc2hpZnQgPT09IDAgPyBrZXlIYXNoIDoga2V5SGFzaCA+Pj4gc2hpZnQpICYgTUFTSztcbiAgICAgIHZhciBub2RlID0gdGhpcy5ub2Rlc1tpZHhdO1xuICAgICAgcmV0dXJuIG5vZGUgPyBub2RlLmdldChzaGlmdCArIFNISUZULCBrZXlIYXNoLCBrZXksIG5vdFNldFZhbHVlKSA6IG5vdFNldFZhbHVlO1xuICAgIH07XG5cbiAgICBIYXNoQXJyYXlNYXBOb2RlLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbihvd25lcklELCBzaGlmdCwga2V5SGFzaCwga2V5LCB2YWx1ZSwgZGlkQ2hhbmdlU2l6ZSwgZGlkQWx0ZXIpIHtcbiAgICAgIGlmIChrZXlIYXNoID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAga2V5SGFzaCA9IGhhc2goa2V5KTtcbiAgICAgIH1cbiAgICAgIHZhciBpZHggPSAoc2hpZnQgPT09IDAgPyBrZXlIYXNoIDoga2V5SGFzaCA+Pj4gc2hpZnQpICYgTUFTSztcbiAgICAgIHZhciByZW1vdmVkID0gdmFsdWUgPT09IE5PVF9TRVQ7XG4gICAgICB2YXIgbm9kZXMgPSB0aGlzLm5vZGVzO1xuICAgICAgdmFyIG5vZGUgPSBub2Rlc1tpZHhdO1xuXG4gICAgICBpZiAocmVtb3ZlZCAmJiAhbm9kZSkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cblxuICAgICAgdmFyIG5ld05vZGUgPSB1cGRhdGVOb2RlKG5vZGUsIG93bmVySUQsIHNoaWZ0ICsgU0hJRlQsIGtleUhhc2gsIGtleSwgdmFsdWUsIGRpZENoYW5nZVNpemUsIGRpZEFsdGVyKTtcbiAgICAgIGlmIChuZXdOb2RlID09PSBub2RlKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuXG4gICAgICB2YXIgbmV3Q291bnQgPSB0aGlzLmNvdW50O1xuICAgICAgaWYgKCFub2RlKSB7XG4gICAgICAgIG5ld0NvdW50Kys7XG4gICAgICB9IGVsc2UgaWYgKCFuZXdOb2RlKSB7XG4gICAgICAgIG5ld0NvdW50LS07XG4gICAgICAgIGlmIChuZXdDb3VudCA8IE1JTl9IQVNIX0FSUkFZX01BUF9TSVpFKSB7XG4gICAgICAgICAgcmV0dXJuIHBhY2tOb2Rlcyhvd25lcklELCBub2RlcywgbmV3Q291bnQsIGlkeCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIGlzRWRpdGFibGUgPSBvd25lcklEICYmIG93bmVySUQgPT09IHRoaXMub3duZXJJRDtcbiAgICAgIHZhciBuZXdOb2RlcyA9IHNldEluKG5vZGVzLCBpZHgsIG5ld05vZGUsIGlzRWRpdGFibGUpO1xuXG4gICAgICBpZiAoaXNFZGl0YWJsZSkge1xuICAgICAgICB0aGlzLmNvdW50ID0gbmV3Q291bnQ7XG4gICAgICAgIHRoaXMubm9kZXMgPSBuZXdOb2RlcztcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBuZXcgSGFzaEFycmF5TWFwTm9kZShvd25lcklELCBuZXdDb3VudCwgbmV3Tm9kZXMpO1xuICAgIH07XG5cblxuXG5cbiAgICBmdW5jdGlvbiBIYXNoQ29sbGlzaW9uTm9kZShvd25lcklELCBrZXlIYXNoLCBlbnRyaWVzKSB7XG4gICAgICB0aGlzLm93bmVySUQgPSBvd25lcklEO1xuICAgICAgdGhpcy5rZXlIYXNoID0ga2V5SGFzaDtcbiAgICAgIHRoaXMuZW50cmllcyA9IGVudHJpZXM7XG4gICAgfVxuXG4gICAgSGFzaENvbGxpc2lvbk5vZGUucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKHNoaWZ0LCBrZXlIYXNoLCBrZXksIG5vdFNldFZhbHVlKSB7XG4gICAgICB2YXIgZW50cmllcyA9IHRoaXMuZW50cmllcztcbiAgICAgIGZvciAodmFyIGlpID0gMCwgbGVuID0gZW50cmllcy5sZW5ndGg7IGlpIDwgbGVuOyBpaSsrKSB7XG4gICAgICAgIGlmIChpcyhrZXksIGVudHJpZXNbaWldWzBdKSkge1xuICAgICAgICAgIHJldHVybiBlbnRyaWVzW2lpXVsxXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG5vdFNldFZhbHVlO1xuICAgIH07XG5cbiAgICBIYXNoQ29sbGlzaW9uTm9kZS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24ob3duZXJJRCwgc2hpZnQsIGtleUhhc2gsIGtleSwgdmFsdWUsIGRpZENoYW5nZVNpemUsIGRpZEFsdGVyKSB7XG4gICAgICBpZiAoa2V5SGFzaCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGtleUhhc2ggPSBoYXNoKGtleSk7XG4gICAgICB9XG5cbiAgICAgIHZhciByZW1vdmVkID0gdmFsdWUgPT09IE5PVF9TRVQ7XG5cbiAgICAgIGlmIChrZXlIYXNoICE9PSB0aGlzLmtleUhhc2gpIHtcbiAgICAgICAgaWYgKHJlbW92ZWQpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBTZXRSZWYoZGlkQWx0ZXIpO1xuICAgICAgICBTZXRSZWYoZGlkQ2hhbmdlU2l6ZSk7XG4gICAgICAgIHJldHVybiBtZXJnZUludG9Ob2RlKHRoaXMsIG93bmVySUQsIHNoaWZ0LCBrZXlIYXNoLCBba2V5LCB2YWx1ZV0pO1xuICAgICAgfVxuXG4gICAgICB2YXIgZW50cmllcyA9IHRoaXMuZW50cmllcztcbiAgICAgIHZhciBpZHggPSAwO1xuICAgICAgZm9yICh2YXIgbGVuID0gZW50cmllcy5sZW5ndGg7IGlkeCA8IGxlbjsgaWR4KyspIHtcbiAgICAgICAgaWYgKGlzKGtleSwgZW50cmllc1tpZHhdWzBdKSkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB2YXIgZXhpc3RzID0gaWR4IDwgbGVuO1xuXG4gICAgICBpZiAoZXhpc3RzID8gZW50cmllc1tpZHhdWzFdID09PSB2YWx1ZSA6IHJlbW92ZWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICAgIFNldFJlZihkaWRBbHRlcik7XG4gICAgICAocmVtb3ZlZCB8fCAhZXhpc3RzKSAmJiBTZXRSZWYoZGlkQ2hhbmdlU2l6ZSk7XG5cbiAgICAgIGlmIChyZW1vdmVkICYmIGxlbiA9PT0gMikge1xuICAgICAgICByZXR1cm4gbmV3IFZhbHVlTm9kZShvd25lcklELCB0aGlzLmtleUhhc2gsIGVudHJpZXNbaWR4IF4gMV0pO1xuICAgICAgfVxuXG4gICAgICB2YXIgaXNFZGl0YWJsZSA9IG93bmVySUQgJiYgb3duZXJJRCA9PT0gdGhpcy5vd25lcklEO1xuICAgICAgdmFyIG5ld0VudHJpZXMgPSBpc0VkaXRhYmxlID8gZW50cmllcyA6IGFyckNvcHkoZW50cmllcyk7XG5cbiAgICAgIGlmIChleGlzdHMpIHtcbiAgICAgICAgaWYgKHJlbW92ZWQpIHtcbiAgICAgICAgICBpZHggPT09IGxlbiAtIDEgPyBuZXdFbnRyaWVzLnBvcCgpIDogKG5ld0VudHJpZXNbaWR4XSA9IG5ld0VudHJpZXMucG9wKCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ld0VudHJpZXNbaWR4XSA9IFtrZXksIHZhbHVlXTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3RW50cmllcy5wdXNoKFtrZXksIHZhbHVlXSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChpc0VkaXRhYmxlKSB7XG4gICAgICAgIHRoaXMuZW50cmllcyA9IG5ld0VudHJpZXM7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmV3IEhhc2hDb2xsaXNpb25Ob2RlKG93bmVySUQsIHRoaXMua2V5SGFzaCwgbmV3RW50cmllcyk7XG4gICAgfTtcblxuXG5cblxuICAgIGZ1bmN0aW9uIFZhbHVlTm9kZShvd25lcklELCBrZXlIYXNoLCBlbnRyeSkge1xuICAgICAgdGhpcy5vd25lcklEID0gb3duZXJJRDtcbiAgICAgIHRoaXMua2V5SGFzaCA9IGtleUhhc2g7XG4gICAgICB0aGlzLmVudHJ5ID0gZW50cnk7XG4gICAgfVxuXG4gICAgVmFsdWVOb2RlLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbihzaGlmdCwga2V5SGFzaCwga2V5LCBub3RTZXRWYWx1ZSkge1xuICAgICAgcmV0dXJuIGlzKGtleSwgdGhpcy5lbnRyeVswXSkgPyB0aGlzLmVudHJ5WzFdIDogbm90U2V0VmFsdWU7XG4gICAgfTtcblxuICAgIFZhbHVlTm9kZS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24ob3duZXJJRCwgc2hpZnQsIGtleUhhc2gsIGtleSwgdmFsdWUsIGRpZENoYW5nZVNpemUsIGRpZEFsdGVyKSB7XG4gICAgICB2YXIgcmVtb3ZlZCA9IHZhbHVlID09PSBOT1RfU0VUO1xuICAgICAgdmFyIGtleU1hdGNoID0gaXMoa2V5LCB0aGlzLmVudHJ5WzBdKTtcbiAgICAgIGlmIChrZXlNYXRjaCA/IHZhbHVlID09PSB0aGlzLmVudHJ5WzFdIDogcmVtb3ZlZCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cblxuICAgICAgU2V0UmVmKGRpZEFsdGVyKTtcblxuICAgICAgaWYgKHJlbW92ZWQpIHtcbiAgICAgICAgU2V0UmVmKGRpZENoYW5nZVNpemUpO1xuICAgICAgICByZXR1cm47IC8vIHVuZGVmaW5lZFxuICAgICAgfVxuXG4gICAgICBpZiAoa2V5TWF0Y2gpIHtcbiAgICAgICAgaWYgKG93bmVySUQgJiYgb3duZXJJRCA9PT0gdGhpcy5vd25lcklEKSB7XG4gICAgICAgICAgdGhpcy5lbnRyeVsxXSA9IHZhbHVlO1xuICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgVmFsdWVOb2RlKG93bmVySUQsIHRoaXMua2V5SGFzaCwgW2tleSwgdmFsdWVdKTtcbiAgICAgIH1cblxuICAgICAgU2V0UmVmKGRpZENoYW5nZVNpemUpO1xuICAgICAgcmV0dXJuIG1lcmdlSW50b05vZGUodGhpcywgb3duZXJJRCwgc2hpZnQsIGhhc2goa2V5KSwgW2tleSwgdmFsdWVdKTtcbiAgICB9O1xuXG5cblxuICAvLyAjcHJhZ21hIEl0ZXJhdG9yc1xuXG4gIEFycmF5TWFwTm9kZS5wcm90b3R5cGUuaXRlcmF0ZSA9XG4gIEhhc2hDb2xsaXNpb25Ob2RlLnByb3RvdHlwZS5pdGVyYXRlID0gZnVuY3Rpb24gKGZuLCByZXZlcnNlKSB7XG4gICAgdmFyIGVudHJpZXMgPSB0aGlzLmVudHJpZXM7XG4gICAgZm9yICh2YXIgaWkgPSAwLCBtYXhJbmRleCA9IGVudHJpZXMubGVuZ3RoIC0gMTsgaWkgPD0gbWF4SW5kZXg7IGlpKyspIHtcbiAgICAgIGlmIChmbihlbnRyaWVzW3JldmVyc2UgPyBtYXhJbmRleCAtIGlpIDogaWldKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIEJpdG1hcEluZGV4ZWROb2RlLnByb3RvdHlwZS5pdGVyYXRlID1cbiAgSGFzaEFycmF5TWFwTm9kZS5wcm90b3R5cGUuaXRlcmF0ZSA9IGZ1bmN0aW9uIChmbiwgcmV2ZXJzZSkge1xuICAgIHZhciBub2RlcyA9IHRoaXMubm9kZXM7XG4gICAgZm9yICh2YXIgaWkgPSAwLCBtYXhJbmRleCA9IG5vZGVzLmxlbmd0aCAtIDE7IGlpIDw9IG1heEluZGV4OyBpaSsrKSB7XG4gICAgICB2YXIgbm9kZSA9IG5vZGVzW3JldmVyc2UgPyBtYXhJbmRleCAtIGlpIDogaWldO1xuICAgICAgaWYgKG5vZGUgJiYgbm9kZS5pdGVyYXRlKGZuLCByZXZlcnNlKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIFZhbHVlTm9kZS5wcm90b3R5cGUuaXRlcmF0ZSA9IGZ1bmN0aW9uIChmbiwgcmV2ZXJzZSkge1xuICAgIHJldHVybiBmbih0aGlzLmVudHJ5KTtcbiAgfVxuXG4gIGNyZWF0ZUNsYXNzKE1hcEl0ZXJhdG9yLCBJdGVyYXRvcik7XG5cbiAgICBmdW5jdGlvbiBNYXBJdGVyYXRvcihtYXAsIHR5cGUsIHJldmVyc2UpIHtcbiAgICAgIHRoaXMuX3R5cGUgPSB0eXBlO1xuICAgICAgdGhpcy5fcmV2ZXJzZSA9IHJldmVyc2U7XG4gICAgICB0aGlzLl9zdGFjayA9IG1hcC5fcm9vdCAmJiBtYXBJdGVyYXRvckZyYW1lKG1hcC5fcm9vdCk7XG4gICAgfVxuXG4gICAgTWFwSXRlcmF0b3IucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciB0eXBlID0gdGhpcy5fdHlwZTtcbiAgICAgIHZhciBzdGFjayA9IHRoaXMuX3N0YWNrO1xuICAgICAgd2hpbGUgKHN0YWNrKSB7XG4gICAgICAgIHZhciBub2RlID0gc3RhY2subm9kZTtcbiAgICAgICAgdmFyIGluZGV4ID0gc3RhY2suaW5kZXgrKztcbiAgICAgICAgdmFyIG1heEluZGV4O1xuICAgICAgICBpZiAobm9kZS5lbnRyeSkge1xuICAgICAgICAgIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG1hcEl0ZXJhdG9yVmFsdWUodHlwZSwgbm9kZS5lbnRyeSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKG5vZGUuZW50cmllcykge1xuICAgICAgICAgIG1heEluZGV4ID0gbm9kZS5lbnRyaWVzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgaWYgKGluZGV4IDw9IG1heEluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gbWFwSXRlcmF0b3JWYWx1ZSh0eXBlLCBub2RlLmVudHJpZXNbdGhpcy5fcmV2ZXJzZSA/IG1heEluZGV4IC0gaW5kZXggOiBpbmRleF0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtYXhJbmRleCA9IG5vZGUubm9kZXMubGVuZ3RoIC0gMTtcbiAgICAgICAgICBpZiAoaW5kZXggPD0gbWF4SW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBzdWJOb2RlID0gbm9kZS5ub2Rlc1t0aGlzLl9yZXZlcnNlID8gbWF4SW5kZXggLSBpbmRleCA6IGluZGV4XTtcbiAgICAgICAgICAgIGlmIChzdWJOb2RlKSB7XG4gICAgICAgICAgICAgIGlmIChzdWJOb2RlLmVudHJ5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hcEl0ZXJhdG9yVmFsdWUodHlwZSwgc3ViTm9kZS5lbnRyeSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgc3RhY2sgPSB0aGlzLl9zdGFjayA9IG1hcEl0ZXJhdG9yRnJhbWUoc3ViTm9kZSwgc3RhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHN0YWNrID0gdGhpcy5fc3RhY2sgPSB0aGlzLl9zdGFjay5fX3ByZXY7XG4gICAgICB9XG4gICAgICByZXR1cm4gaXRlcmF0b3JEb25lKCk7XG4gICAgfTtcblxuXG4gIGZ1bmN0aW9uIG1hcEl0ZXJhdG9yVmFsdWUodHlwZSwgZW50cnkpIHtcbiAgICByZXR1cm4gaXRlcmF0b3JWYWx1ZSh0eXBlLCBlbnRyeVswXSwgZW50cnlbMV0pO1xuICB9XG5cbiAgZnVuY3Rpb24gbWFwSXRlcmF0b3JGcmFtZShub2RlLCBwcmV2KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5vZGU6IG5vZGUsXG4gICAgICBpbmRleDogMCxcbiAgICAgIF9fcHJldjogcHJldlxuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBtYWtlTWFwKHNpemUsIHJvb3QsIG93bmVySUQsIGhhc2gpIHtcbiAgICB2YXIgbWFwID0gT2JqZWN0LmNyZWF0ZShNYXBQcm90b3R5cGUpO1xuICAgIG1hcC5zaXplID0gc2l6ZTtcbiAgICBtYXAuX3Jvb3QgPSByb290O1xuICAgIG1hcC5fX293bmVySUQgPSBvd25lcklEO1xuICAgIG1hcC5fX2hhc2ggPSBoYXNoO1xuICAgIG1hcC5fX2FsdGVyZWQgPSBmYWxzZTtcbiAgICByZXR1cm4gbWFwO1xuICB9XG5cbiAgdmFyIEVNUFRZX01BUDtcbiAgZnVuY3Rpb24gZW1wdHlNYXAoKSB7XG4gICAgcmV0dXJuIEVNUFRZX01BUCB8fCAoRU1QVFlfTUFQID0gbWFrZU1hcCgwKSk7XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVNYXAobWFwLCBrLCB2KSB7XG4gICAgdmFyIG5ld1Jvb3Q7XG4gICAgdmFyIG5ld1NpemU7XG4gICAgaWYgKCFtYXAuX3Jvb3QpIHtcbiAgICAgIGlmICh2ID09PSBOT1RfU0VUKSB7XG4gICAgICAgIHJldHVybiBtYXA7XG4gICAgICB9XG4gICAgICBuZXdTaXplID0gMTtcbiAgICAgIG5ld1Jvb3QgPSBuZXcgQXJyYXlNYXBOb2RlKG1hcC5fX293bmVySUQsIFtbaywgdl1dKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGRpZENoYW5nZVNpemUgPSBNYWtlUmVmKENIQU5HRV9MRU5HVEgpO1xuICAgICAgdmFyIGRpZEFsdGVyID0gTWFrZVJlZihESURfQUxURVIpO1xuICAgICAgbmV3Um9vdCA9IHVwZGF0ZU5vZGUobWFwLl9yb290LCBtYXAuX19vd25lcklELCAwLCB1bmRlZmluZWQsIGssIHYsIGRpZENoYW5nZVNpemUsIGRpZEFsdGVyKTtcbiAgICAgIGlmICghZGlkQWx0ZXIudmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIG1hcDtcbiAgICAgIH1cbiAgICAgIG5ld1NpemUgPSBtYXAuc2l6ZSArIChkaWRDaGFuZ2VTaXplLnZhbHVlID8gdiA9PT0gTk9UX1NFVCA/IC0xIDogMSA6IDApO1xuICAgIH1cbiAgICBpZiAobWFwLl9fb3duZXJJRCkge1xuICAgICAgbWFwLnNpemUgPSBuZXdTaXplO1xuICAgICAgbWFwLl9yb290ID0gbmV3Um9vdDtcbiAgICAgIG1hcC5fX2hhc2ggPSB1bmRlZmluZWQ7XG4gICAgICBtYXAuX19hbHRlcmVkID0gdHJ1ZTtcbiAgICAgIHJldHVybiBtYXA7XG4gICAgfVxuICAgIHJldHVybiBuZXdSb290ID8gbWFrZU1hcChuZXdTaXplLCBuZXdSb290KSA6IGVtcHR5TWFwKCk7XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVOb2RlKG5vZGUsIG93bmVySUQsIHNoaWZ0LCBrZXlIYXNoLCBrZXksIHZhbHVlLCBkaWRDaGFuZ2VTaXplLCBkaWRBbHRlcikge1xuICAgIGlmICghbm9kZSkge1xuICAgICAgaWYgKHZhbHVlID09PSBOT1RfU0VUKSB7XG4gICAgICAgIHJldHVybiBub2RlO1xuICAgICAgfVxuICAgICAgU2V0UmVmKGRpZEFsdGVyKTtcbiAgICAgIFNldFJlZihkaWRDaGFuZ2VTaXplKTtcbiAgICAgIHJldHVybiBuZXcgVmFsdWVOb2RlKG93bmVySUQsIGtleUhhc2gsIFtrZXksIHZhbHVlXSk7XG4gICAgfVxuICAgIHJldHVybiBub2RlLnVwZGF0ZShvd25lcklELCBzaGlmdCwga2V5SGFzaCwga2V5LCB2YWx1ZSwgZGlkQ2hhbmdlU2l6ZSwgZGlkQWx0ZXIpO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNMZWFmTm9kZShub2RlKSB7XG4gICAgcmV0dXJuIG5vZGUuY29uc3RydWN0b3IgPT09IFZhbHVlTm9kZSB8fCBub2RlLmNvbnN0cnVjdG9yID09PSBIYXNoQ29sbGlzaW9uTm9kZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1lcmdlSW50b05vZGUobm9kZSwgb3duZXJJRCwgc2hpZnQsIGtleUhhc2gsIGVudHJ5KSB7XG4gICAgaWYgKG5vZGUua2V5SGFzaCA9PT0ga2V5SGFzaCkge1xuICAgICAgcmV0dXJuIG5ldyBIYXNoQ29sbGlzaW9uTm9kZShvd25lcklELCBrZXlIYXNoLCBbbm9kZS5lbnRyeSwgZW50cnldKTtcbiAgICB9XG5cbiAgICB2YXIgaWR4MSA9IChzaGlmdCA9PT0gMCA/IG5vZGUua2V5SGFzaCA6IG5vZGUua2V5SGFzaCA+Pj4gc2hpZnQpICYgTUFTSztcbiAgICB2YXIgaWR4MiA9IChzaGlmdCA9PT0gMCA/IGtleUhhc2ggOiBrZXlIYXNoID4+PiBzaGlmdCkgJiBNQVNLO1xuXG4gICAgdmFyIG5ld05vZGU7XG4gICAgdmFyIG5vZGVzID0gaWR4MSA9PT0gaWR4MiA/XG4gICAgICBbbWVyZ2VJbnRvTm9kZShub2RlLCBvd25lcklELCBzaGlmdCArIFNISUZULCBrZXlIYXNoLCBlbnRyeSldIDpcbiAgICAgICgobmV3Tm9kZSA9IG5ldyBWYWx1ZU5vZGUob3duZXJJRCwga2V5SGFzaCwgZW50cnkpKSwgaWR4MSA8IGlkeDIgPyBbbm9kZSwgbmV3Tm9kZV0gOiBbbmV3Tm9kZSwgbm9kZV0pO1xuXG4gICAgcmV0dXJuIG5ldyBCaXRtYXBJbmRleGVkTm9kZShvd25lcklELCAoMSA8PCBpZHgxKSB8ICgxIDw8IGlkeDIpLCBub2Rlcyk7XG4gIH1cblxuICBmdW5jdGlvbiBjcmVhdGVOb2Rlcyhvd25lcklELCBlbnRyaWVzLCBrZXksIHZhbHVlKSB7XG4gICAgaWYgKCFvd25lcklEKSB7XG4gICAgICBvd25lcklEID0gbmV3IE93bmVySUQoKTtcbiAgICB9XG4gICAgdmFyIG5vZGUgPSBuZXcgVmFsdWVOb2RlKG93bmVySUQsIGhhc2goa2V5KSwgW2tleSwgdmFsdWVdKTtcbiAgICBmb3IgKHZhciBpaSA9IDA7IGlpIDwgZW50cmllcy5sZW5ndGg7IGlpKyspIHtcbiAgICAgIHZhciBlbnRyeSA9IGVudHJpZXNbaWldO1xuICAgICAgbm9kZSA9IG5vZGUudXBkYXRlKG93bmVySUQsIDAsIHVuZGVmaW5lZCwgZW50cnlbMF0sIGVudHJ5WzFdKTtcbiAgICB9XG4gICAgcmV0dXJuIG5vZGU7XG4gIH1cblxuICBmdW5jdGlvbiBwYWNrTm9kZXMob3duZXJJRCwgbm9kZXMsIGNvdW50LCBleGNsdWRpbmcpIHtcbiAgICB2YXIgYml0bWFwID0gMDtcbiAgICB2YXIgcGFja2VkSUkgPSAwO1xuICAgIHZhciBwYWNrZWROb2RlcyA9IG5ldyBBcnJheShjb3VudCk7XG4gICAgZm9yICh2YXIgaWkgPSAwLCBiaXQgPSAxLCBsZW4gPSBub2Rlcy5sZW5ndGg7IGlpIDwgbGVuOyBpaSsrLCBiaXQgPDw9IDEpIHtcbiAgICAgIHZhciBub2RlID0gbm9kZXNbaWldO1xuICAgICAgaWYgKG5vZGUgIT09IHVuZGVmaW5lZCAmJiBpaSAhPT0gZXhjbHVkaW5nKSB7XG4gICAgICAgIGJpdG1hcCB8PSBiaXQ7XG4gICAgICAgIHBhY2tlZE5vZGVzW3BhY2tlZElJKytdID0gbm9kZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5ldyBCaXRtYXBJbmRleGVkTm9kZShvd25lcklELCBiaXRtYXAsIHBhY2tlZE5vZGVzKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGV4cGFuZE5vZGVzKG93bmVySUQsIG5vZGVzLCBiaXRtYXAsIGluY2x1ZGluZywgbm9kZSkge1xuICAgIHZhciBjb3VudCA9IDA7XG4gICAgdmFyIGV4cGFuZGVkTm9kZXMgPSBuZXcgQXJyYXkoU0laRSk7XG4gICAgZm9yICh2YXIgaWkgPSAwOyBiaXRtYXAgIT09IDA7IGlpKyssIGJpdG1hcCA+Pj49IDEpIHtcbiAgICAgIGV4cGFuZGVkTm9kZXNbaWldID0gYml0bWFwICYgMSA/IG5vZGVzW2NvdW50KytdIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICBleHBhbmRlZE5vZGVzW2luY2x1ZGluZ10gPSBub2RlO1xuICAgIHJldHVybiBuZXcgSGFzaEFycmF5TWFwTm9kZShvd25lcklELCBjb3VudCArIDEsIGV4cGFuZGVkTm9kZXMpO1xuICB9XG5cbiAgZnVuY3Rpb24gbWVyZ2VJbnRvTWFwV2l0aChtYXAsIG1lcmdlciwgaXRlcmFibGVzKSB7XG4gICAgdmFyIGl0ZXJzID0gW107XG4gICAgZm9yICh2YXIgaWkgPSAwOyBpaSA8IGl0ZXJhYmxlcy5sZW5ndGg7IGlpKyspIHtcbiAgICAgIHZhciB2YWx1ZSA9IGl0ZXJhYmxlc1tpaV07XG4gICAgICB2YXIgaXRlciA9IEtleWVkSXRlcmFibGUodmFsdWUpO1xuICAgICAgaWYgKCFpc0l0ZXJhYmxlKHZhbHVlKSkge1xuICAgICAgICBpdGVyID0gaXRlci5tYXAoZnVuY3Rpb24odiApIHtyZXR1cm4gZnJvbUpTKHYpfSk7XG4gICAgICB9XG4gICAgICBpdGVycy5wdXNoKGl0ZXIpO1xuICAgIH1cbiAgICByZXR1cm4gbWVyZ2VJbnRvQ29sbGVjdGlvbldpdGgobWFwLCBtZXJnZXIsIGl0ZXJzKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlZXBNZXJnZXIoZXhpc3RpbmcsIHZhbHVlLCBrZXkpIHtcbiAgICByZXR1cm4gZXhpc3RpbmcgJiYgZXhpc3RpbmcubWVyZ2VEZWVwICYmIGlzSXRlcmFibGUodmFsdWUpID9cbiAgICAgIGV4aXN0aW5nLm1lcmdlRGVlcCh2YWx1ZSkgOlxuICAgICAgaXMoZXhpc3RpbmcsIHZhbHVlKSA/IGV4aXN0aW5nIDogdmFsdWU7XG4gIH1cblxuICBmdW5jdGlvbiBkZWVwTWVyZ2VyV2l0aChtZXJnZXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oZXhpc3RpbmcsIHZhbHVlLCBrZXkpICB7XG4gICAgICBpZiAoZXhpc3RpbmcgJiYgZXhpc3RpbmcubWVyZ2VEZWVwV2l0aCAmJiBpc0l0ZXJhYmxlKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gZXhpc3RpbmcubWVyZ2VEZWVwV2l0aChtZXJnZXIsIHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIHZhciBuZXh0VmFsdWUgPSBtZXJnZXIoZXhpc3RpbmcsIHZhbHVlLCBrZXkpO1xuICAgICAgcmV0dXJuIGlzKGV4aXN0aW5nLCBuZXh0VmFsdWUpID8gZXhpc3RpbmcgOiBuZXh0VmFsdWU7XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1lcmdlSW50b0NvbGxlY3Rpb25XaXRoKGNvbGxlY3Rpb24sIG1lcmdlciwgaXRlcnMpIHtcbiAgICBpdGVycyA9IGl0ZXJzLmZpbHRlcihmdW5jdGlvbih4ICkge3JldHVybiB4LnNpemUgIT09IDB9KTtcbiAgICBpZiAoaXRlcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gY29sbGVjdGlvbjtcbiAgICB9XG4gICAgaWYgKGNvbGxlY3Rpb24uc2l6ZSA9PT0gMCAmJiAhY29sbGVjdGlvbi5fX293bmVySUQgJiYgaXRlcnMubGVuZ3RoID09PSAxKSB7XG4gICAgICByZXR1cm4gY29sbGVjdGlvbi5jb25zdHJ1Y3RvcihpdGVyc1swXSk7XG4gICAgfVxuICAgIHJldHVybiBjb2xsZWN0aW9uLndpdGhNdXRhdGlvbnMoZnVuY3Rpb24oY29sbGVjdGlvbiApIHtcbiAgICAgIHZhciBtZXJnZUludG9NYXAgPSBtZXJnZXIgP1xuICAgICAgICBmdW5jdGlvbih2YWx1ZSwga2V5KSAge1xuICAgICAgICAgIGNvbGxlY3Rpb24udXBkYXRlKGtleSwgTk9UX1NFVCwgZnVuY3Rpb24oZXhpc3RpbmcgKVxuICAgICAgICAgICAge3JldHVybiBleGlzdGluZyA9PT0gTk9UX1NFVCA/IHZhbHVlIDogbWVyZ2VyKGV4aXN0aW5nLCB2YWx1ZSwga2V5KX1cbiAgICAgICAgICApO1xuICAgICAgICB9IDpcbiAgICAgICAgZnVuY3Rpb24odmFsdWUsIGtleSkgIHtcbiAgICAgICAgICBjb2xsZWN0aW9uLnNldChrZXksIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgZm9yICh2YXIgaWkgPSAwOyBpaSA8IGl0ZXJzLmxlbmd0aDsgaWkrKykge1xuICAgICAgICBpdGVyc1tpaV0uZm9yRWFjaChtZXJnZUludG9NYXApO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlSW5EZWVwTWFwKGV4aXN0aW5nLCBrZXlQYXRoSXRlciwgbm90U2V0VmFsdWUsIHVwZGF0ZXIpIHtcbiAgICB2YXIgaXNOb3RTZXQgPSBleGlzdGluZyA9PT0gTk9UX1NFVDtcbiAgICB2YXIgc3RlcCA9IGtleVBhdGhJdGVyLm5leHQoKTtcbiAgICBpZiAoc3RlcC5kb25lKSB7XG4gICAgICB2YXIgZXhpc3RpbmdWYWx1ZSA9IGlzTm90U2V0ID8gbm90U2V0VmFsdWUgOiBleGlzdGluZztcbiAgICAgIHZhciBuZXdWYWx1ZSA9IHVwZGF0ZXIoZXhpc3RpbmdWYWx1ZSk7XG4gICAgICByZXR1cm4gbmV3VmFsdWUgPT09IGV4aXN0aW5nVmFsdWUgPyBleGlzdGluZyA6IG5ld1ZhbHVlO1xuICAgIH1cbiAgICBpbnZhcmlhbnQoXG4gICAgICBpc05vdFNldCB8fCAoZXhpc3RpbmcgJiYgZXhpc3Rpbmcuc2V0KSxcbiAgICAgICdpbnZhbGlkIGtleVBhdGgnXG4gICAgKTtcbiAgICB2YXIga2V5ID0gc3RlcC52YWx1ZTtcbiAgICB2YXIgbmV4dEV4aXN0aW5nID0gaXNOb3RTZXQgPyBOT1RfU0VUIDogZXhpc3RpbmcuZ2V0KGtleSwgTk9UX1NFVCk7XG4gICAgdmFyIG5leHRVcGRhdGVkID0gdXBkYXRlSW5EZWVwTWFwKFxuICAgICAgbmV4dEV4aXN0aW5nLFxuICAgICAga2V5UGF0aEl0ZXIsXG4gICAgICBub3RTZXRWYWx1ZSxcbiAgICAgIHVwZGF0ZXJcbiAgICApO1xuICAgIHJldHVybiBuZXh0VXBkYXRlZCA9PT0gbmV4dEV4aXN0aW5nID8gZXhpc3RpbmcgOlxuICAgICAgbmV4dFVwZGF0ZWQgPT09IE5PVF9TRVQgPyBleGlzdGluZy5yZW1vdmUoa2V5KSA6XG4gICAgICAoaXNOb3RTZXQgPyBlbXB0eU1hcCgpIDogZXhpc3RpbmcpLnNldChrZXksIG5leHRVcGRhdGVkKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBvcENvdW50KHgpIHtcbiAgICB4ID0geCAtICgoeCA+PiAxKSAmIDB4NTU1NTU1NTUpO1xuICAgIHggPSAoeCAmIDB4MzMzMzMzMzMpICsgKCh4ID4+IDIpICYgMHgzMzMzMzMzMyk7XG4gICAgeCA9ICh4ICsgKHggPj4gNCkpICYgMHgwZjBmMGYwZjtcbiAgICB4ID0geCArICh4ID4+IDgpO1xuICAgIHggPSB4ICsgKHggPj4gMTYpO1xuICAgIHJldHVybiB4ICYgMHg3ZjtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldEluKGFycmF5LCBpZHgsIHZhbCwgY2FuRWRpdCkge1xuICAgIHZhciBuZXdBcnJheSA9IGNhbkVkaXQgPyBhcnJheSA6IGFyckNvcHkoYXJyYXkpO1xuICAgIG5ld0FycmF5W2lkeF0gPSB2YWw7XG4gICAgcmV0dXJuIG5ld0FycmF5O1xuICB9XG5cbiAgZnVuY3Rpb24gc3BsaWNlSW4oYXJyYXksIGlkeCwgdmFsLCBjYW5FZGl0KSB7XG4gICAgdmFyIG5ld0xlbiA9IGFycmF5Lmxlbmd0aCArIDE7XG4gICAgaWYgKGNhbkVkaXQgJiYgaWR4ICsgMSA9PT0gbmV3TGVuKSB7XG4gICAgICBhcnJheVtpZHhdID0gdmFsO1xuICAgICAgcmV0dXJuIGFycmF5O1xuICAgIH1cbiAgICB2YXIgbmV3QXJyYXkgPSBuZXcgQXJyYXkobmV3TGVuKTtcbiAgICB2YXIgYWZ0ZXIgPSAwO1xuICAgIGZvciAodmFyIGlpID0gMDsgaWkgPCBuZXdMZW47IGlpKyspIHtcbiAgICAgIGlmIChpaSA9PT0gaWR4KSB7XG4gICAgICAgIG5ld0FycmF5W2lpXSA9IHZhbDtcbiAgICAgICAgYWZ0ZXIgPSAtMTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ld0FycmF5W2lpXSA9IGFycmF5W2lpICsgYWZ0ZXJdO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbmV3QXJyYXk7XG4gIH1cblxuICBmdW5jdGlvbiBzcGxpY2VPdXQoYXJyYXksIGlkeCwgY2FuRWRpdCkge1xuICAgIHZhciBuZXdMZW4gPSBhcnJheS5sZW5ndGggLSAxO1xuICAgIGlmIChjYW5FZGl0ICYmIGlkeCA9PT0gbmV3TGVuKSB7XG4gICAgICBhcnJheS5wb3AoKTtcbiAgICAgIHJldHVybiBhcnJheTtcbiAgICB9XG4gICAgdmFyIG5ld0FycmF5ID0gbmV3IEFycmF5KG5ld0xlbik7XG4gICAgdmFyIGFmdGVyID0gMDtcbiAgICBmb3IgKHZhciBpaSA9IDA7IGlpIDwgbmV3TGVuOyBpaSsrKSB7XG4gICAgICBpZiAoaWkgPT09IGlkeCkge1xuICAgICAgICBhZnRlciA9IDE7XG4gICAgICB9XG4gICAgICBuZXdBcnJheVtpaV0gPSBhcnJheVtpaSArIGFmdGVyXTtcbiAgICB9XG4gICAgcmV0dXJuIG5ld0FycmF5O1xuICB9XG5cbiAgdmFyIE1BWF9BUlJBWV9NQVBfU0laRSA9IFNJWkUgLyA0O1xuICB2YXIgTUFYX0JJVE1BUF9JTkRFWEVEX1NJWkUgPSBTSVpFIC8gMjtcbiAgdmFyIE1JTl9IQVNIX0FSUkFZX01BUF9TSVpFID0gU0laRSAvIDQ7XG5cbiAgY3JlYXRlQ2xhc3MoTGlzdCwgSW5kZXhlZENvbGxlY3Rpb24pO1xuXG4gICAgLy8gQHByYWdtYSBDb25zdHJ1Y3Rpb25cblxuICAgIGZ1bmN0aW9uIExpc3QodmFsdWUpIHtcbiAgICAgIHZhciBlbXB0eSA9IGVtcHR5TGlzdCgpO1xuICAgICAgaWYgKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGVtcHR5O1xuICAgICAgfVxuICAgICAgaWYgKGlzTGlzdCh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgICAgdmFyIGl0ZXIgPSBJbmRleGVkSXRlcmFibGUodmFsdWUpO1xuICAgICAgdmFyIHNpemUgPSBpdGVyLnNpemU7XG4gICAgICBpZiAoc2l6ZSA9PT0gMCkge1xuICAgICAgICByZXR1cm4gZW1wdHk7XG4gICAgICB9XG4gICAgICBhc3NlcnROb3RJbmZpbml0ZShzaXplKTtcbiAgICAgIGlmIChzaXplID4gMCAmJiBzaXplIDwgU0laRSkge1xuICAgICAgICByZXR1cm4gbWFrZUxpc3QoMCwgc2l6ZSwgU0hJRlQsIG51bGwsIG5ldyBWTm9kZShpdGVyLnRvQXJyYXkoKSkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGVtcHR5LndpdGhNdXRhdGlvbnMoZnVuY3Rpb24obGlzdCApIHtcbiAgICAgICAgbGlzdC5zZXRTaXplKHNpemUpO1xuICAgICAgICBpdGVyLmZvckVhY2goZnVuY3Rpb24odiwgaSkgIHtyZXR1cm4gbGlzdC5zZXQoaSwgdil9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIExpc3Qub2YgPSBmdW5jdGlvbigvKi4uLnZhbHVlcyovKSB7XG4gICAgICByZXR1cm4gdGhpcyhhcmd1bWVudHMpO1xuICAgIH07XG5cbiAgICBMaXN0LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX190b1N0cmluZygnTGlzdCBbJywgJ10nKTtcbiAgICB9O1xuXG4gICAgLy8gQHByYWdtYSBBY2Nlc3NcblxuICAgIExpc3QucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKGluZGV4LCBub3RTZXRWYWx1ZSkge1xuICAgICAgaW5kZXggPSB3cmFwSW5kZXgodGhpcywgaW5kZXgpO1xuICAgICAgaWYgKGluZGV4ID49IDAgJiYgaW5kZXggPCB0aGlzLnNpemUpIHtcbiAgICAgICAgaW5kZXggKz0gdGhpcy5fb3JpZ2luO1xuICAgICAgICB2YXIgbm9kZSA9IGxpc3ROb2RlRm9yKHRoaXMsIGluZGV4KTtcbiAgICAgICAgcmV0dXJuIG5vZGUgJiYgbm9kZS5hcnJheVtpbmRleCAmIE1BU0tdO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5vdFNldFZhbHVlO1xuICAgIH07XG5cbiAgICAvLyBAcHJhZ21hIE1vZGlmaWNhdGlvblxuXG4gICAgTGlzdC5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24oaW5kZXgsIHZhbHVlKSB7XG4gICAgICByZXR1cm4gdXBkYXRlTGlzdCh0aGlzLCBpbmRleCwgdmFsdWUpO1xuICAgIH07XG5cbiAgICBMaXN0LnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbihpbmRleCkge1xuICAgICAgcmV0dXJuICF0aGlzLmhhcyhpbmRleCkgPyB0aGlzIDpcbiAgICAgICAgaW5kZXggPT09IDAgPyB0aGlzLnNoaWZ0KCkgOlxuICAgICAgICBpbmRleCA9PT0gdGhpcy5zaXplIC0gMSA/IHRoaXMucG9wKCkgOlxuICAgICAgICB0aGlzLnNwbGljZShpbmRleCwgMSk7XG4gICAgfTtcblxuICAgIExpc3QucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uKGluZGV4LCB2YWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMuc3BsaWNlKGluZGV4LCAwLCB2YWx1ZSk7XG4gICAgfTtcblxuICAgIExpc3QucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy5zaXplID09PSAwKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuX19vd25lcklEKSB7XG4gICAgICAgIHRoaXMuc2l6ZSA9IHRoaXMuX29yaWdpbiA9IHRoaXMuX2NhcGFjaXR5ID0gMDtcbiAgICAgICAgdGhpcy5fbGV2ZWwgPSBTSElGVDtcbiAgICAgICAgdGhpcy5fcm9vdCA9IHRoaXMuX3RhaWwgPSBudWxsO1xuICAgICAgICB0aGlzLl9faGFzaCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fX2FsdGVyZWQgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICAgIHJldHVybiBlbXB0eUxpc3QoKTtcbiAgICB9O1xuXG4gICAgTGlzdC5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uKC8qLi4udmFsdWVzKi8pIHtcbiAgICAgIHZhciB2YWx1ZXMgPSBhcmd1bWVudHM7XG4gICAgICB2YXIgb2xkU2l6ZSA9IHRoaXMuc2l6ZTtcbiAgICAgIHJldHVybiB0aGlzLndpdGhNdXRhdGlvbnMoZnVuY3Rpb24obGlzdCApIHtcbiAgICAgICAgc2V0TGlzdEJvdW5kcyhsaXN0LCAwLCBvbGRTaXplICsgdmFsdWVzLmxlbmd0aCk7XG4gICAgICAgIGZvciAodmFyIGlpID0gMDsgaWkgPCB2YWx1ZXMubGVuZ3RoOyBpaSsrKSB7XG4gICAgICAgICAgbGlzdC5zZXQob2xkU2l6ZSArIGlpLCB2YWx1ZXNbaWldKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIExpc3QucHJvdG90eXBlLnBvcCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHNldExpc3RCb3VuZHModGhpcywgMCwgLTEpO1xuICAgIH07XG5cbiAgICBMaXN0LnByb3RvdHlwZS51bnNoaWZ0ID0gZnVuY3Rpb24oLyouLi52YWx1ZXMqLykge1xuICAgICAgdmFyIHZhbHVlcyA9IGFyZ3VtZW50cztcbiAgICAgIHJldHVybiB0aGlzLndpdGhNdXRhdGlvbnMoZnVuY3Rpb24obGlzdCApIHtcbiAgICAgICAgc2V0TGlzdEJvdW5kcyhsaXN0LCAtdmFsdWVzLmxlbmd0aCk7XG4gICAgICAgIGZvciAodmFyIGlpID0gMDsgaWkgPCB2YWx1ZXMubGVuZ3RoOyBpaSsrKSB7XG4gICAgICAgICAgbGlzdC5zZXQoaWksIHZhbHVlc1tpaV0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgTGlzdC5wcm90b3R5cGUuc2hpZnQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBzZXRMaXN0Qm91bmRzKHRoaXMsIDEpO1xuICAgIH07XG5cbiAgICAvLyBAcHJhZ21hIENvbXBvc2l0aW9uXG5cbiAgICBMaXN0LnByb3RvdHlwZS5tZXJnZSA9IGZ1bmN0aW9uKC8qLi4uaXRlcnMqLykge1xuICAgICAgcmV0dXJuIG1lcmdlSW50b0xpc3RXaXRoKHRoaXMsIHVuZGVmaW5lZCwgYXJndW1lbnRzKTtcbiAgICB9O1xuXG4gICAgTGlzdC5wcm90b3R5cGUubWVyZ2VXaXRoID0gZnVuY3Rpb24obWVyZ2VyKSB7dmFyIGl0ZXJzID0gU0xJQ0UkMC5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgICByZXR1cm4gbWVyZ2VJbnRvTGlzdFdpdGgodGhpcywgbWVyZ2VyLCBpdGVycyk7XG4gICAgfTtcblxuICAgIExpc3QucHJvdG90eXBlLm1lcmdlRGVlcCA9IGZ1bmN0aW9uKC8qLi4uaXRlcnMqLykge1xuICAgICAgcmV0dXJuIG1lcmdlSW50b0xpc3RXaXRoKHRoaXMsIGRlZXBNZXJnZXIsIGFyZ3VtZW50cyk7XG4gICAgfTtcblxuICAgIExpc3QucHJvdG90eXBlLm1lcmdlRGVlcFdpdGggPSBmdW5jdGlvbihtZXJnZXIpIHt2YXIgaXRlcnMgPSBTTElDRSQwLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgICAgIHJldHVybiBtZXJnZUludG9MaXN0V2l0aCh0aGlzLCBkZWVwTWVyZ2VyV2l0aChtZXJnZXIpLCBpdGVycyk7XG4gICAgfTtcblxuICAgIExpc3QucHJvdG90eXBlLnNldFNpemUgPSBmdW5jdGlvbihzaXplKSB7XG4gICAgICByZXR1cm4gc2V0TGlzdEJvdW5kcyh0aGlzLCAwLCBzaXplKTtcbiAgICB9O1xuXG4gICAgLy8gQHByYWdtYSBJdGVyYXRpb25cblxuICAgIExpc3QucHJvdG90eXBlLnNsaWNlID0gZnVuY3Rpb24oYmVnaW4sIGVuZCkge1xuICAgICAgdmFyIHNpemUgPSB0aGlzLnNpemU7XG4gICAgICBpZiAod2hvbGVTbGljZShiZWdpbiwgZW5kLCBzaXplKSkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICAgIHJldHVybiBzZXRMaXN0Qm91bmRzKFxuICAgICAgICB0aGlzLFxuICAgICAgICByZXNvbHZlQmVnaW4oYmVnaW4sIHNpemUpLFxuICAgICAgICByZXNvbHZlRW5kKGVuZCwgc2l6ZSlcbiAgICAgICk7XG4gICAgfTtcblxuICAgIExpc3QucHJvdG90eXBlLl9faXRlcmF0b3IgPSBmdW5jdGlvbih0eXBlLCByZXZlcnNlKSB7XG4gICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgdmFyIHZhbHVlcyA9IGl0ZXJhdGVMaXN0KHRoaXMsIHJldmVyc2UpO1xuICAgICAgcmV0dXJuIG5ldyBJdGVyYXRvcihmdW5jdGlvbigpICB7XG4gICAgICAgIHZhciB2YWx1ZSA9IHZhbHVlcygpO1xuICAgICAgICByZXR1cm4gdmFsdWUgPT09IERPTkUgP1xuICAgICAgICAgIGl0ZXJhdG9yRG9uZSgpIDpcbiAgICAgICAgICBpdGVyYXRvclZhbHVlKHR5cGUsIGluZGV4KyssIHZhbHVlKTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBMaXN0LnByb3RvdHlwZS5fX2l0ZXJhdGUgPSBmdW5jdGlvbihmbiwgcmV2ZXJzZSkge1xuICAgICAgdmFyIGluZGV4ID0gMDtcbiAgICAgIHZhciB2YWx1ZXMgPSBpdGVyYXRlTGlzdCh0aGlzLCByZXZlcnNlKTtcbiAgICAgIHZhciB2YWx1ZTtcbiAgICAgIHdoaWxlICgodmFsdWUgPSB2YWx1ZXMoKSkgIT09IERPTkUpIHtcbiAgICAgICAgaWYgKGZuKHZhbHVlLCBpbmRleCsrLCB0aGlzKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGluZGV4O1xuICAgIH07XG5cbiAgICBMaXN0LnByb3RvdHlwZS5fX2Vuc3VyZU93bmVyID0gZnVuY3Rpb24ob3duZXJJRCkge1xuICAgICAgaWYgKG93bmVySUQgPT09IHRoaXMuX19vd25lcklEKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgICAgaWYgKCFvd25lcklEKSB7XG4gICAgICAgIHRoaXMuX19vd25lcklEID0gb3duZXJJRDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgICByZXR1cm4gbWFrZUxpc3QodGhpcy5fb3JpZ2luLCB0aGlzLl9jYXBhY2l0eSwgdGhpcy5fbGV2ZWwsIHRoaXMuX3Jvb3QsIHRoaXMuX3RhaWwsIG93bmVySUQsIHRoaXMuX19oYXNoKTtcbiAgICB9O1xuXG5cbiAgZnVuY3Rpb24gaXNMaXN0KG1heWJlTGlzdCkge1xuICAgIHJldHVybiAhIShtYXliZUxpc3QgJiYgbWF5YmVMaXN0W0lTX0xJU1RfU0VOVElORUxdKTtcbiAgfVxuXG4gIExpc3QuaXNMaXN0ID0gaXNMaXN0O1xuXG4gIHZhciBJU19MSVNUX1NFTlRJTkVMID0gJ0BAX19JTU1VVEFCTEVfTElTVF9fQEAnO1xuXG4gIHZhciBMaXN0UHJvdG90eXBlID0gTGlzdC5wcm90b3R5cGU7XG4gIExpc3RQcm90b3R5cGVbSVNfTElTVF9TRU5USU5FTF0gPSB0cnVlO1xuICBMaXN0UHJvdG90eXBlW0RFTEVURV0gPSBMaXN0UHJvdG90eXBlLnJlbW92ZTtcbiAgTGlzdFByb3RvdHlwZS5zZXRJbiA9IE1hcFByb3RvdHlwZS5zZXRJbjtcbiAgTGlzdFByb3RvdHlwZS5kZWxldGVJbiA9XG4gIExpc3RQcm90b3R5cGUucmVtb3ZlSW4gPSBNYXBQcm90b3R5cGUucmVtb3ZlSW47XG4gIExpc3RQcm90b3R5cGUudXBkYXRlID0gTWFwUHJvdG90eXBlLnVwZGF0ZTtcbiAgTGlzdFByb3RvdHlwZS51cGRhdGVJbiA9IE1hcFByb3RvdHlwZS51cGRhdGVJbjtcbiAgTGlzdFByb3RvdHlwZS5tZXJnZUluID0gTWFwUHJvdG90eXBlLm1lcmdlSW47XG4gIExpc3RQcm90b3R5cGUubWVyZ2VEZWVwSW4gPSBNYXBQcm90b3R5cGUubWVyZ2VEZWVwSW47XG4gIExpc3RQcm90b3R5cGUud2l0aE11dGF0aW9ucyA9IE1hcFByb3RvdHlwZS53aXRoTXV0YXRpb25zO1xuICBMaXN0UHJvdG90eXBlLmFzTXV0YWJsZSA9IE1hcFByb3RvdHlwZS5hc011dGFibGU7XG4gIExpc3RQcm90b3R5cGUuYXNJbW11dGFibGUgPSBNYXBQcm90b3R5cGUuYXNJbW11dGFibGU7XG4gIExpc3RQcm90b3R5cGUud2FzQWx0ZXJlZCA9IE1hcFByb3RvdHlwZS53YXNBbHRlcmVkO1xuXG5cblxuICAgIGZ1bmN0aW9uIFZOb2RlKGFycmF5LCBvd25lcklEKSB7XG4gICAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG4gICAgICB0aGlzLm93bmVySUQgPSBvd25lcklEO1xuICAgIH1cblxuICAgIC8vIFRPRE86IHNlZW1zIGxpa2UgdGhlc2UgbWV0aG9kcyBhcmUgdmVyeSBzaW1pbGFyXG5cbiAgICBWTm9kZS5wcm90b3R5cGUucmVtb3ZlQmVmb3JlID0gZnVuY3Rpb24ob3duZXJJRCwgbGV2ZWwsIGluZGV4KSB7XG4gICAgICBpZiAoaW5kZXggPT09IGxldmVsID8gMSA8PCBsZXZlbCA6IDAgfHwgdGhpcy5hcnJheS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgICB2YXIgb3JpZ2luSW5kZXggPSAoaW5kZXggPj4+IGxldmVsKSAmIE1BU0s7XG4gICAgICBpZiAob3JpZ2luSW5kZXggPj0gdGhpcy5hcnJheS5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWTm9kZShbXSwgb3duZXJJRCk7XG4gICAgICB9XG4gICAgICB2YXIgcmVtb3ZpbmdGaXJzdCA9IG9yaWdpbkluZGV4ID09PSAwO1xuICAgICAgdmFyIG5ld0NoaWxkO1xuICAgICAgaWYgKGxldmVsID4gMCkge1xuICAgICAgICB2YXIgb2xkQ2hpbGQgPSB0aGlzLmFycmF5W29yaWdpbkluZGV4XTtcbiAgICAgICAgbmV3Q2hpbGQgPSBvbGRDaGlsZCAmJiBvbGRDaGlsZC5yZW1vdmVCZWZvcmUob3duZXJJRCwgbGV2ZWwgLSBTSElGVCwgaW5kZXgpO1xuICAgICAgICBpZiAobmV3Q2hpbGQgPT09IG9sZENoaWxkICYmIHJlbW92aW5nRmlyc3QpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHJlbW92aW5nRmlyc3QgJiYgIW5ld0NoaWxkKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgICAgdmFyIGVkaXRhYmxlID0gZWRpdGFibGVWTm9kZSh0aGlzLCBvd25lcklEKTtcbiAgICAgIGlmICghcmVtb3ZpbmdGaXJzdCkge1xuICAgICAgICBmb3IgKHZhciBpaSA9IDA7IGlpIDwgb3JpZ2luSW5kZXg7IGlpKyspIHtcbiAgICAgICAgICBlZGl0YWJsZS5hcnJheVtpaV0gPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChuZXdDaGlsZCkge1xuICAgICAgICBlZGl0YWJsZS5hcnJheVtvcmlnaW5JbmRleF0gPSBuZXdDaGlsZDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBlZGl0YWJsZTtcbiAgICB9O1xuXG4gICAgVk5vZGUucHJvdG90eXBlLnJlbW92ZUFmdGVyID0gZnVuY3Rpb24ob3duZXJJRCwgbGV2ZWwsIGluZGV4KSB7XG4gICAgICBpZiAoaW5kZXggPT09IChsZXZlbCA/IDEgPDwgbGV2ZWwgOiAwKSB8fCB0aGlzLmFycmF5Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICAgIHZhciBzaXplSW5kZXggPSAoKGluZGV4IC0gMSkgPj4+IGxldmVsKSAmIE1BU0s7XG4gICAgICBpZiAoc2l6ZUluZGV4ID49IHRoaXMuYXJyYXkubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuXG4gICAgICB2YXIgbmV3Q2hpbGQ7XG4gICAgICBpZiAobGV2ZWwgPiAwKSB7XG4gICAgICAgIHZhciBvbGRDaGlsZCA9IHRoaXMuYXJyYXlbc2l6ZUluZGV4XTtcbiAgICAgICAgbmV3Q2hpbGQgPSBvbGRDaGlsZCAmJiBvbGRDaGlsZC5yZW1vdmVBZnRlcihvd25lcklELCBsZXZlbCAtIFNISUZULCBpbmRleCk7XG4gICAgICAgIGlmIChuZXdDaGlsZCA9PT0gb2xkQ2hpbGQgJiYgc2l6ZUluZGV4ID09PSB0aGlzLmFycmF5Lmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgZWRpdGFibGUgPSBlZGl0YWJsZVZOb2RlKHRoaXMsIG93bmVySUQpO1xuICAgICAgZWRpdGFibGUuYXJyYXkuc3BsaWNlKHNpemVJbmRleCArIDEpO1xuICAgICAgaWYgKG5ld0NoaWxkKSB7XG4gICAgICAgIGVkaXRhYmxlLmFycmF5W3NpemVJbmRleF0gPSBuZXdDaGlsZDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBlZGl0YWJsZTtcbiAgICB9O1xuXG5cblxuICB2YXIgRE9ORSA9IHt9O1xuXG4gIGZ1bmN0aW9uIGl0ZXJhdGVMaXN0KGxpc3QsIHJldmVyc2UpIHtcbiAgICB2YXIgbGVmdCA9IGxpc3QuX29yaWdpbjtcbiAgICB2YXIgcmlnaHQgPSBsaXN0Ll9jYXBhY2l0eTtcbiAgICB2YXIgdGFpbFBvcyA9IGdldFRhaWxPZmZzZXQocmlnaHQpO1xuICAgIHZhciB0YWlsID0gbGlzdC5fdGFpbDtcblxuICAgIHJldHVybiBpdGVyYXRlTm9kZU9yTGVhZihsaXN0Ll9yb290LCBsaXN0Ll9sZXZlbCwgMCk7XG5cbiAgICBmdW5jdGlvbiBpdGVyYXRlTm9kZU9yTGVhZihub2RlLCBsZXZlbCwgb2Zmc2V0KSB7XG4gICAgICByZXR1cm4gbGV2ZWwgPT09IDAgP1xuICAgICAgICBpdGVyYXRlTGVhZihub2RlLCBvZmZzZXQpIDpcbiAgICAgICAgaXRlcmF0ZU5vZGUobm9kZSwgbGV2ZWwsIG9mZnNldCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXRlcmF0ZUxlYWYobm9kZSwgb2Zmc2V0KSB7XG4gICAgICB2YXIgYXJyYXkgPSBvZmZzZXQgPT09IHRhaWxQb3MgPyB0YWlsICYmIHRhaWwuYXJyYXkgOiBub2RlICYmIG5vZGUuYXJyYXk7XG4gICAgICB2YXIgZnJvbSA9IG9mZnNldCA+IGxlZnQgPyAwIDogbGVmdCAtIG9mZnNldDtcbiAgICAgIHZhciB0byA9IHJpZ2h0IC0gb2Zmc2V0O1xuICAgICAgaWYgKHRvID4gU0laRSkge1xuICAgICAgICB0byA9IFNJWkU7XG4gICAgICB9XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSAge1xuICAgICAgICBpZiAoZnJvbSA9PT0gdG8pIHtcbiAgICAgICAgICByZXR1cm4gRE9ORTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaWR4ID0gcmV2ZXJzZSA/IC0tdG8gOiBmcm9tKys7XG4gICAgICAgIHJldHVybiBhcnJheSAmJiBhcnJheVtpZHhdO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpdGVyYXRlTm9kZShub2RlLCBsZXZlbCwgb2Zmc2V0KSB7XG4gICAgICB2YXIgdmFsdWVzO1xuICAgICAgdmFyIGFycmF5ID0gbm9kZSAmJiBub2RlLmFycmF5O1xuICAgICAgdmFyIGZyb20gPSBvZmZzZXQgPiBsZWZ0ID8gMCA6IChsZWZ0IC0gb2Zmc2V0KSA+PiBsZXZlbDtcbiAgICAgIHZhciB0byA9ICgocmlnaHQgLSBvZmZzZXQpID4+IGxldmVsKSArIDE7XG4gICAgICBpZiAodG8gPiBTSVpFKSB7XG4gICAgICAgIHRvID0gU0laRTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmdW5jdGlvbigpICB7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICBpZiAodmFsdWVzKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB2YWx1ZXMoKTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gRE9ORSkge1xuICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YWx1ZXMgPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZnJvbSA9PT0gdG8pIHtcbiAgICAgICAgICAgIHJldHVybiBET05FO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgaWR4ID0gcmV2ZXJzZSA/IC0tdG8gOiBmcm9tKys7XG4gICAgICAgICAgdmFsdWVzID0gaXRlcmF0ZU5vZGVPckxlYWYoXG4gICAgICAgICAgICBhcnJheSAmJiBhcnJheVtpZHhdLCBsZXZlbCAtIFNISUZULCBvZmZzZXQgKyAoaWR4IDw8IGxldmVsKVxuICAgICAgICAgICk7XG4gICAgICAgIH0gd2hpbGUgKHRydWUpO1xuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBtYWtlTGlzdChvcmlnaW4sIGNhcGFjaXR5LCBsZXZlbCwgcm9vdCwgdGFpbCwgb3duZXJJRCwgaGFzaCkge1xuICAgIHZhciBsaXN0ID0gT2JqZWN0LmNyZWF0ZShMaXN0UHJvdG90eXBlKTtcbiAgICBsaXN0LnNpemUgPSBjYXBhY2l0eSAtIG9yaWdpbjtcbiAgICBsaXN0Ll9vcmlnaW4gPSBvcmlnaW47XG4gICAgbGlzdC5fY2FwYWNpdHkgPSBjYXBhY2l0eTtcbiAgICBsaXN0Ll9sZXZlbCA9IGxldmVsO1xuICAgIGxpc3QuX3Jvb3QgPSByb290O1xuICAgIGxpc3QuX3RhaWwgPSB0YWlsO1xuICAgIGxpc3QuX19vd25lcklEID0gb3duZXJJRDtcbiAgICBsaXN0Ll9faGFzaCA9IGhhc2g7XG4gICAgbGlzdC5fX2FsdGVyZWQgPSBmYWxzZTtcbiAgICByZXR1cm4gbGlzdDtcbiAgfVxuXG4gIHZhciBFTVBUWV9MSVNUO1xuICBmdW5jdGlvbiBlbXB0eUxpc3QoKSB7XG4gICAgcmV0dXJuIEVNUFRZX0xJU1QgfHwgKEVNUFRZX0xJU1QgPSBtYWtlTGlzdCgwLCAwLCBTSElGVCkpO1xuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlTGlzdChsaXN0LCBpbmRleCwgdmFsdWUpIHtcbiAgICBpbmRleCA9IHdyYXBJbmRleChsaXN0LCBpbmRleCk7XG5cbiAgICBpZiAoaW5kZXggIT09IGluZGV4KSB7XG4gICAgICByZXR1cm4gbGlzdDtcbiAgICB9XG5cbiAgICBpZiAoaW5kZXggPj0gbGlzdC5zaXplIHx8IGluZGV4IDwgMCkge1xuICAgICAgcmV0dXJuIGxpc3Qud2l0aE11dGF0aW9ucyhmdW5jdGlvbihsaXN0ICkge1xuICAgICAgICBpbmRleCA8IDAgP1xuICAgICAgICAgIHNldExpc3RCb3VuZHMobGlzdCwgaW5kZXgpLnNldCgwLCB2YWx1ZSkgOlxuICAgICAgICAgIHNldExpc3RCb3VuZHMobGlzdCwgMCwgaW5kZXggKyAxKS5zZXQoaW5kZXgsIHZhbHVlKVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaW5kZXggKz0gbGlzdC5fb3JpZ2luO1xuXG4gICAgdmFyIG5ld1RhaWwgPSBsaXN0Ll90YWlsO1xuICAgIHZhciBuZXdSb290ID0gbGlzdC5fcm9vdDtcbiAgICB2YXIgZGlkQWx0ZXIgPSBNYWtlUmVmKERJRF9BTFRFUik7XG4gICAgaWYgKGluZGV4ID49IGdldFRhaWxPZmZzZXQobGlzdC5fY2FwYWNpdHkpKSB7XG4gICAgICBuZXdUYWlsID0gdXBkYXRlVk5vZGUobmV3VGFpbCwgbGlzdC5fX293bmVySUQsIDAsIGluZGV4LCB2YWx1ZSwgZGlkQWx0ZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBuZXdSb290ID0gdXBkYXRlVk5vZGUobmV3Um9vdCwgbGlzdC5fX293bmVySUQsIGxpc3QuX2xldmVsLCBpbmRleCwgdmFsdWUsIGRpZEFsdGVyKTtcbiAgICB9XG5cbiAgICBpZiAoIWRpZEFsdGVyLnZhbHVlKSB7XG4gICAgICByZXR1cm4gbGlzdDtcbiAgICB9XG5cbiAgICBpZiAobGlzdC5fX293bmVySUQpIHtcbiAgICAgIGxpc3QuX3Jvb3QgPSBuZXdSb290O1xuICAgICAgbGlzdC5fdGFpbCA9IG5ld1RhaWw7XG4gICAgICBsaXN0Ll9faGFzaCA9IHVuZGVmaW5lZDtcbiAgICAgIGxpc3QuX19hbHRlcmVkID0gdHJ1ZTtcbiAgICAgIHJldHVybiBsaXN0O1xuICAgIH1cbiAgICByZXR1cm4gbWFrZUxpc3QobGlzdC5fb3JpZ2luLCBsaXN0Ll9jYXBhY2l0eSwgbGlzdC5fbGV2ZWwsIG5ld1Jvb3QsIG5ld1RhaWwpO1xuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlVk5vZGUobm9kZSwgb3duZXJJRCwgbGV2ZWwsIGluZGV4LCB2YWx1ZSwgZGlkQWx0ZXIpIHtcbiAgICB2YXIgaWR4ID0gKGluZGV4ID4+PiBsZXZlbCkgJiBNQVNLO1xuICAgIHZhciBub2RlSGFzID0gbm9kZSAmJiBpZHggPCBub2RlLmFycmF5Lmxlbmd0aDtcbiAgICBpZiAoIW5vZGVIYXMgJiYgdmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfVxuXG4gICAgdmFyIG5ld05vZGU7XG5cbiAgICBpZiAobGV2ZWwgPiAwKSB7XG4gICAgICB2YXIgbG93ZXJOb2RlID0gbm9kZSAmJiBub2RlLmFycmF5W2lkeF07XG4gICAgICB2YXIgbmV3TG93ZXJOb2RlID0gdXBkYXRlVk5vZGUobG93ZXJOb2RlLCBvd25lcklELCBsZXZlbCAtIFNISUZULCBpbmRleCwgdmFsdWUsIGRpZEFsdGVyKTtcbiAgICAgIGlmIChuZXdMb3dlck5vZGUgPT09IGxvd2VyTm9kZSkge1xuICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgIH1cbiAgICAgIG5ld05vZGUgPSBlZGl0YWJsZVZOb2RlKG5vZGUsIG93bmVySUQpO1xuICAgICAgbmV3Tm9kZS5hcnJheVtpZHhdID0gbmV3TG93ZXJOb2RlO1xuICAgICAgcmV0dXJuIG5ld05vZGU7XG4gICAgfVxuXG4gICAgaWYgKG5vZGVIYXMgJiYgbm9kZS5hcnJheVtpZHhdID09PSB2YWx1ZSkge1xuICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfVxuXG4gICAgU2V0UmVmKGRpZEFsdGVyKTtcblxuICAgIG5ld05vZGUgPSBlZGl0YWJsZVZOb2RlKG5vZGUsIG93bmVySUQpO1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkICYmIGlkeCA9PT0gbmV3Tm9kZS5hcnJheS5sZW5ndGggLSAxKSB7XG4gICAgICBuZXdOb2RlLmFycmF5LnBvcCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBuZXdOb2RlLmFycmF5W2lkeF0gPSB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIG5ld05vZGU7XG4gIH1cblxuICBmdW5jdGlvbiBlZGl0YWJsZVZOb2RlKG5vZGUsIG93bmVySUQpIHtcbiAgICBpZiAob3duZXJJRCAmJiBub2RlICYmIG93bmVySUQgPT09IG5vZGUub3duZXJJRCkge1xuICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfVxuICAgIHJldHVybiBuZXcgVk5vZGUobm9kZSA/IG5vZGUuYXJyYXkuc2xpY2UoKSA6IFtdLCBvd25lcklEKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxpc3ROb2RlRm9yKGxpc3QsIHJhd0luZGV4KSB7XG4gICAgaWYgKHJhd0luZGV4ID49IGdldFRhaWxPZmZzZXQobGlzdC5fY2FwYWNpdHkpKSB7XG4gICAgICByZXR1cm4gbGlzdC5fdGFpbDtcbiAgICB9XG4gICAgaWYgKHJhd0luZGV4IDwgMSA8PCAobGlzdC5fbGV2ZWwgKyBTSElGVCkpIHtcbiAgICAgIHZhciBub2RlID0gbGlzdC5fcm9vdDtcbiAgICAgIHZhciBsZXZlbCA9IGxpc3QuX2xldmVsO1xuICAgICAgd2hpbGUgKG5vZGUgJiYgbGV2ZWwgPiAwKSB7XG4gICAgICAgIG5vZGUgPSBub2RlLmFycmF5WyhyYXdJbmRleCA+Pj4gbGV2ZWwpICYgTUFTS107XG4gICAgICAgIGxldmVsIC09IFNISUZUO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2V0TGlzdEJvdW5kcyhsaXN0LCBiZWdpbiwgZW5kKSB7XG4gICAgLy8gU2FuaXRpemUgYmVnaW4gJiBlbmQgdXNpbmcgdGhpcyBzaG9ydGhhbmQgZm9yIFRvSW50MzIoYXJndW1lbnQpXG4gICAgLy8gaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLXRvaW50MzJcbiAgICBpZiAoYmVnaW4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgYmVnaW4gPSBiZWdpbiB8IDA7XG4gICAgfVxuICAgIGlmIChlbmQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgZW5kID0gZW5kIHwgMDtcbiAgICB9XG4gICAgdmFyIG93bmVyID0gbGlzdC5fX293bmVySUQgfHwgbmV3IE93bmVySUQoKTtcbiAgICB2YXIgb2xkT3JpZ2luID0gbGlzdC5fb3JpZ2luO1xuICAgIHZhciBvbGRDYXBhY2l0eSA9IGxpc3QuX2NhcGFjaXR5O1xuICAgIHZhciBuZXdPcmlnaW4gPSBvbGRPcmlnaW4gKyBiZWdpbjtcbiAgICB2YXIgbmV3Q2FwYWNpdHkgPSBlbmQgPT09IHVuZGVmaW5lZCA/IG9sZENhcGFjaXR5IDogZW5kIDwgMCA/IG9sZENhcGFjaXR5ICsgZW5kIDogb2xkT3JpZ2luICsgZW5kO1xuICAgIGlmIChuZXdPcmlnaW4gPT09IG9sZE9yaWdpbiAmJiBuZXdDYXBhY2l0eSA9PT0gb2xkQ2FwYWNpdHkpIHtcbiAgICAgIHJldHVybiBsaXN0O1xuICAgIH1cblxuICAgIC8vIElmIGl0J3MgZ29pbmcgdG8gZW5kIGFmdGVyIGl0IHN0YXJ0cywgaXQncyBlbXB0eS5cbiAgICBpZiAobmV3T3JpZ2luID49IG5ld0NhcGFjaXR5KSB7XG4gICAgICByZXR1cm4gbGlzdC5jbGVhcigpO1xuICAgIH1cblxuICAgIHZhciBuZXdMZXZlbCA9IGxpc3QuX2xldmVsO1xuICAgIHZhciBuZXdSb290ID0gbGlzdC5fcm9vdDtcblxuICAgIC8vIE5ldyBvcmlnaW4gbWlnaHQgbmVlZCBjcmVhdGluZyBhIGhpZ2hlciByb290LlxuICAgIHZhciBvZmZzZXRTaGlmdCA9IDA7XG4gICAgd2hpbGUgKG5ld09yaWdpbiArIG9mZnNldFNoaWZ0IDwgMCkge1xuICAgICAgbmV3Um9vdCA9IG5ldyBWTm9kZShuZXdSb290ICYmIG5ld1Jvb3QuYXJyYXkubGVuZ3RoID8gW3VuZGVmaW5lZCwgbmV3Um9vdF0gOiBbXSwgb3duZXIpO1xuICAgICAgbmV3TGV2ZWwgKz0gU0hJRlQ7XG4gICAgICBvZmZzZXRTaGlmdCArPSAxIDw8IG5ld0xldmVsO1xuICAgIH1cbiAgICBpZiAob2Zmc2V0U2hpZnQpIHtcbiAgICAgIG5ld09yaWdpbiArPSBvZmZzZXRTaGlmdDtcbiAgICAgIG9sZE9yaWdpbiArPSBvZmZzZXRTaGlmdDtcbiAgICAgIG5ld0NhcGFjaXR5ICs9IG9mZnNldFNoaWZ0O1xuICAgICAgb2xkQ2FwYWNpdHkgKz0gb2Zmc2V0U2hpZnQ7XG4gICAgfVxuXG4gICAgdmFyIG9sZFRhaWxPZmZzZXQgPSBnZXRUYWlsT2Zmc2V0KG9sZENhcGFjaXR5KTtcbiAgICB2YXIgbmV3VGFpbE9mZnNldCA9IGdldFRhaWxPZmZzZXQobmV3Q2FwYWNpdHkpO1xuXG4gICAgLy8gTmV3IHNpemUgbWlnaHQgbmVlZCBjcmVhdGluZyBhIGhpZ2hlciByb290LlxuICAgIHdoaWxlIChuZXdUYWlsT2Zmc2V0ID49IDEgPDwgKG5ld0xldmVsICsgU0hJRlQpKSB7XG4gICAgICBuZXdSb290ID0gbmV3IFZOb2RlKG5ld1Jvb3QgJiYgbmV3Um9vdC5hcnJheS5sZW5ndGggPyBbbmV3Um9vdF0gOiBbXSwgb3duZXIpO1xuICAgICAgbmV3TGV2ZWwgKz0gU0hJRlQ7XG4gICAgfVxuXG4gICAgLy8gTG9jYXRlIG9yIGNyZWF0ZSB0aGUgbmV3IHRhaWwuXG4gICAgdmFyIG9sZFRhaWwgPSBsaXN0Ll90YWlsO1xuICAgIHZhciBuZXdUYWlsID0gbmV3VGFpbE9mZnNldCA8IG9sZFRhaWxPZmZzZXQgP1xuICAgICAgbGlzdE5vZGVGb3IobGlzdCwgbmV3Q2FwYWNpdHkgLSAxKSA6XG4gICAgICBuZXdUYWlsT2Zmc2V0ID4gb2xkVGFpbE9mZnNldCA/IG5ldyBWTm9kZShbXSwgb3duZXIpIDogb2xkVGFpbDtcblxuICAgIC8vIE1lcmdlIFRhaWwgaW50byB0cmVlLlxuICAgIGlmIChvbGRUYWlsICYmIG5ld1RhaWxPZmZzZXQgPiBvbGRUYWlsT2Zmc2V0ICYmIG5ld09yaWdpbiA8IG9sZENhcGFjaXR5ICYmIG9sZFRhaWwuYXJyYXkubGVuZ3RoKSB7XG4gICAgICBuZXdSb290ID0gZWRpdGFibGVWTm9kZShuZXdSb290LCBvd25lcik7XG4gICAgICB2YXIgbm9kZSA9IG5ld1Jvb3Q7XG4gICAgICBmb3IgKHZhciBsZXZlbCA9IG5ld0xldmVsOyBsZXZlbCA+IFNISUZUOyBsZXZlbCAtPSBTSElGVCkge1xuICAgICAgICB2YXIgaWR4ID0gKG9sZFRhaWxPZmZzZXQgPj4+IGxldmVsKSAmIE1BU0s7XG4gICAgICAgIG5vZGUgPSBub2RlLmFycmF5W2lkeF0gPSBlZGl0YWJsZVZOb2RlKG5vZGUuYXJyYXlbaWR4XSwgb3duZXIpO1xuICAgICAgfVxuICAgICAgbm9kZS5hcnJheVsob2xkVGFpbE9mZnNldCA+Pj4gU0hJRlQpICYgTUFTS10gPSBvbGRUYWlsO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSBzaXplIGhhcyBiZWVuIHJlZHVjZWQsIHRoZXJlJ3MgYSBjaGFuY2UgdGhlIHRhaWwgbmVlZHMgdG8gYmUgdHJpbW1lZC5cbiAgICBpZiAobmV3Q2FwYWNpdHkgPCBvbGRDYXBhY2l0eSkge1xuICAgICAgbmV3VGFpbCA9IG5ld1RhaWwgJiYgbmV3VGFpbC5yZW1vdmVBZnRlcihvd25lciwgMCwgbmV3Q2FwYWNpdHkpO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSBuZXcgb3JpZ2luIGlzIHdpdGhpbiB0aGUgdGFpbCwgdGhlbiB3ZSBkbyBub3QgbmVlZCBhIHJvb3QuXG4gICAgaWYgKG5ld09yaWdpbiA+PSBuZXdUYWlsT2Zmc2V0KSB7XG4gICAgICBuZXdPcmlnaW4gLT0gbmV3VGFpbE9mZnNldDtcbiAgICAgIG5ld0NhcGFjaXR5IC09IG5ld1RhaWxPZmZzZXQ7XG4gICAgICBuZXdMZXZlbCA9IFNISUZUO1xuICAgICAgbmV3Um9vdCA9IG51bGw7XG4gICAgICBuZXdUYWlsID0gbmV3VGFpbCAmJiBuZXdUYWlsLnJlbW92ZUJlZm9yZShvd25lciwgMCwgbmV3T3JpZ2luKTtcblxuICAgIC8vIE90aGVyd2lzZSwgaWYgdGhlIHJvb3QgaGFzIGJlZW4gdHJpbW1lZCwgZ2FyYmFnZSBjb2xsZWN0LlxuICAgIH0gZWxzZSBpZiAobmV3T3JpZ2luID4gb2xkT3JpZ2luIHx8IG5ld1RhaWxPZmZzZXQgPCBvbGRUYWlsT2Zmc2V0KSB7XG4gICAgICBvZmZzZXRTaGlmdCA9IDA7XG5cbiAgICAgIC8vIElkZW50aWZ5IHRoZSBuZXcgdG9wIHJvb3Qgbm9kZSBvZiB0aGUgc3VidHJlZSBvZiB0aGUgb2xkIHJvb3QuXG4gICAgICB3aGlsZSAobmV3Um9vdCkge1xuICAgICAgICB2YXIgYmVnaW5JbmRleCA9IChuZXdPcmlnaW4gPj4+IG5ld0xldmVsKSAmIE1BU0s7XG4gICAgICAgIGlmIChiZWdpbkluZGV4ICE9PSAobmV3VGFpbE9mZnNldCA+Pj4gbmV3TGV2ZWwpICYgTUFTSykge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGlmIChiZWdpbkluZGV4KSB7XG4gICAgICAgICAgb2Zmc2V0U2hpZnQgKz0gKDEgPDwgbmV3TGV2ZWwpICogYmVnaW5JbmRleDtcbiAgICAgICAgfVxuICAgICAgICBuZXdMZXZlbCAtPSBTSElGVDtcbiAgICAgICAgbmV3Um9vdCA9IG5ld1Jvb3QuYXJyYXlbYmVnaW5JbmRleF07XG4gICAgICB9XG5cbiAgICAgIC8vIFRyaW0gdGhlIG5ldyBzaWRlcyBvZiB0aGUgbmV3IHJvb3QuXG4gICAgICBpZiAobmV3Um9vdCAmJiBuZXdPcmlnaW4gPiBvbGRPcmlnaW4pIHtcbiAgICAgICAgbmV3Um9vdCA9IG5ld1Jvb3QucmVtb3ZlQmVmb3JlKG93bmVyLCBuZXdMZXZlbCwgbmV3T3JpZ2luIC0gb2Zmc2V0U2hpZnQpO1xuICAgICAgfVxuICAgICAgaWYgKG5ld1Jvb3QgJiYgbmV3VGFpbE9mZnNldCA8IG9sZFRhaWxPZmZzZXQpIHtcbiAgICAgICAgbmV3Um9vdCA9IG5ld1Jvb3QucmVtb3ZlQWZ0ZXIob3duZXIsIG5ld0xldmVsLCBuZXdUYWlsT2Zmc2V0IC0gb2Zmc2V0U2hpZnQpO1xuICAgICAgfVxuICAgICAgaWYgKG9mZnNldFNoaWZ0KSB7XG4gICAgICAgIG5ld09yaWdpbiAtPSBvZmZzZXRTaGlmdDtcbiAgICAgICAgbmV3Q2FwYWNpdHkgLT0gb2Zmc2V0U2hpZnQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGxpc3QuX19vd25lcklEKSB7XG4gICAgICBsaXN0LnNpemUgPSBuZXdDYXBhY2l0eSAtIG5ld09yaWdpbjtcbiAgICAgIGxpc3QuX29yaWdpbiA9IG5ld09yaWdpbjtcbiAgICAgIGxpc3QuX2NhcGFjaXR5ID0gbmV3Q2FwYWNpdHk7XG4gICAgICBsaXN0Ll9sZXZlbCA9IG5ld0xldmVsO1xuICAgICAgbGlzdC5fcm9vdCA9IG5ld1Jvb3Q7XG4gICAgICBsaXN0Ll90YWlsID0gbmV3VGFpbDtcbiAgICAgIGxpc3QuX19oYXNoID0gdW5kZWZpbmVkO1xuICAgICAgbGlzdC5fX2FsdGVyZWQgPSB0cnVlO1xuICAgICAgcmV0dXJuIGxpc3Q7XG4gICAgfVxuICAgIHJldHVybiBtYWtlTGlzdChuZXdPcmlnaW4sIG5ld0NhcGFjaXR5LCBuZXdMZXZlbCwgbmV3Um9vdCwgbmV3VGFpbCk7XG4gIH1cblxuICBmdW5jdGlvbiBtZXJnZUludG9MaXN0V2l0aChsaXN0LCBtZXJnZXIsIGl0ZXJhYmxlcykge1xuICAgIHZhciBpdGVycyA9IFtdO1xuICAgIHZhciBtYXhTaXplID0gMDtcbiAgICBmb3IgKHZhciBpaSA9IDA7IGlpIDwgaXRlcmFibGVzLmxlbmd0aDsgaWkrKykge1xuICAgICAgdmFyIHZhbHVlID0gaXRlcmFibGVzW2lpXTtcbiAgICAgIHZhciBpdGVyID0gSW5kZXhlZEl0ZXJhYmxlKHZhbHVlKTtcbiAgICAgIGlmIChpdGVyLnNpemUgPiBtYXhTaXplKSB7XG4gICAgICAgIG1heFNpemUgPSBpdGVyLnNpemU7XG4gICAgICB9XG4gICAgICBpZiAoIWlzSXRlcmFibGUodmFsdWUpKSB7XG4gICAgICAgIGl0ZXIgPSBpdGVyLm1hcChmdW5jdGlvbih2ICkge3JldHVybiBmcm9tSlModil9KTtcbiAgICAgIH1cbiAgICAgIGl0ZXJzLnB1c2goaXRlcik7XG4gICAgfVxuICAgIGlmIChtYXhTaXplID4gbGlzdC5zaXplKSB7XG4gICAgICBsaXN0ID0gbGlzdC5zZXRTaXplKG1heFNpemUpO1xuICAgIH1cbiAgICByZXR1cm4gbWVyZ2VJbnRvQ29sbGVjdGlvbldpdGgobGlzdCwgbWVyZ2VyLCBpdGVycyk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRUYWlsT2Zmc2V0KHNpemUpIHtcbiAgICByZXR1cm4gc2l6ZSA8IFNJWkUgPyAwIDogKCgoc2l6ZSAtIDEpID4+PiBTSElGVCkgPDwgU0hJRlQpO1xuICB9XG5cbiAgY3JlYXRlQ2xhc3MoT3JkZXJlZE1hcCwgTWFwKTtcblxuICAgIC8vIEBwcmFnbWEgQ29uc3RydWN0aW9uXG5cbiAgICBmdW5jdGlvbiBPcmRlcmVkTWFwKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCA/IGVtcHR5T3JkZXJlZE1hcCgpIDpcbiAgICAgICAgaXNPcmRlcmVkTWFwKHZhbHVlKSA/IHZhbHVlIDpcbiAgICAgICAgZW1wdHlPcmRlcmVkTWFwKCkud2l0aE11dGF0aW9ucyhmdW5jdGlvbihtYXAgKSB7XG4gICAgICAgICAgdmFyIGl0ZXIgPSBLZXllZEl0ZXJhYmxlKHZhbHVlKTtcbiAgICAgICAgICBhc3NlcnROb3RJbmZpbml0ZShpdGVyLnNpemUpO1xuICAgICAgICAgIGl0ZXIuZm9yRWFjaChmdW5jdGlvbih2LCBrKSAge3JldHVybiBtYXAuc2V0KGssIHYpfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIE9yZGVyZWRNYXAub2YgPSBmdW5jdGlvbigvKi4uLnZhbHVlcyovKSB7XG4gICAgICByZXR1cm4gdGhpcyhhcmd1bWVudHMpO1xuICAgIH07XG5cbiAgICBPcmRlcmVkTWFwLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX190b1N0cmluZygnT3JkZXJlZE1hcCB7JywgJ30nKTtcbiAgICB9O1xuXG4gICAgLy8gQHByYWdtYSBBY2Nlc3NcblxuICAgIE9yZGVyZWRNYXAucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKGssIG5vdFNldFZhbHVlKSB7XG4gICAgICB2YXIgaW5kZXggPSB0aGlzLl9tYXAuZ2V0KGspO1xuICAgICAgcmV0dXJuIGluZGV4ICE9PSB1bmRlZmluZWQgPyB0aGlzLl9saXN0LmdldChpbmRleClbMV0gOiBub3RTZXRWYWx1ZTtcbiAgICB9O1xuXG4gICAgLy8gQHByYWdtYSBNb2RpZmljYXRpb25cblxuICAgIE9yZGVyZWRNYXAucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy5zaXplID09PSAwKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuX19vd25lcklEKSB7XG4gICAgICAgIHRoaXMuc2l6ZSA9IDA7XG4gICAgICAgIHRoaXMuX21hcC5jbGVhcigpO1xuICAgICAgICB0aGlzLl9saXN0LmNsZWFyKCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGVtcHR5T3JkZXJlZE1hcCgpO1xuICAgIH07XG5cbiAgICBPcmRlcmVkTWFwLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbihrLCB2KSB7XG4gICAgICByZXR1cm4gdXBkYXRlT3JkZXJlZE1hcCh0aGlzLCBrLCB2KTtcbiAgICB9O1xuXG4gICAgT3JkZXJlZE1hcC5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24oaykge1xuICAgICAgcmV0dXJuIHVwZGF0ZU9yZGVyZWRNYXAodGhpcywgaywgTk9UX1NFVCk7XG4gICAgfTtcblxuICAgIE9yZGVyZWRNYXAucHJvdG90eXBlLndhc0FsdGVyZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLl9tYXAud2FzQWx0ZXJlZCgpIHx8IHRoaXMuX2xpc3Qud2FzQWx0ZXJlZCgpO1xuICAgIH07XG5cbiAgICBPcmRlcmVkTWFwLnByb3RvdHlwZS5fX2l0ZXJhdGUgPSBmdW5jdGlvbihmbiwgcmV2ZXJzZSkge3ZhciB0aGlzJDAgPSB0aGlzO1xuICAgICAgcmV0dXJuIHRoaXMuX2xpc3QuX19pdGVyYXRlKFxuICAgICAgICBmdW5jdGlvbihlbnRyeSApIHtyZXR1cm4gZW50cnkgJiYgZm4oZW50cnlbMV0sIGVudHJ5WzBdLCB0aGlzJDApfSxcbiAgICAgICAgcmV2ZXJzZVxuICAgICAgKTtcbiAgICB9O1xuXG4gICAgT3JkZXJlZE1hcC5wcm90b3R5cGUuX19pdGVyYXRvciA9IGZ1bmN0aW9uKHR5cGUsIHJldmVyc2UpIHtcbiAgICAgIHJldHVybiB0aGlzLl9saXN0LmZyb21FbnRyeVNlcSgpLl9faXRlcmF0b3IodHlwZSwgcmV2ZXJzZSk7XG4gICAgfTtcblxuICAgIE9yZGVyZWRNYXAucHJvdG90eXBlLl9fZW5zdXJlT3duZXIgPSBmdW5jdGlvbihvd25lcklEKSB7XG4gICAgICBpZiAob3duZXJJRCA9PT0gdGhpcy5fX293bmVySUQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgICB2YXIgbmV3TWFwID0gdGhpcy5fbWFwLl9fZW5zdXJlT3duZXIob3duZXJJRCk7XG4gICAgICB2YXIgbmV3TGlzdCA9IHRoaXMuX2xpc3QuX19lbnN1cmVPd25lcihvd25lcklEKTtcbiAgICAgIGlmICghb3duZXJJRCkge1xuICAgICAgICB0aGlzLl9fb3duZXJJRCA9IG93bmVySUQ7XG4gICAgICAgIHRoaXMuX21hcCA9IG5ld01hcDtcbiAgICAgICAgdGhpcy5fbGlzdCA9IG5ld0xpc3Q7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG1ha2VPcmRlcmVkTWFwKG5ld01hcCwgbmV3TGlzdCwgb3duZXJJRCwgdGhpcy5fX2hhc2gpO1xuICAgIH07XG5cblxuICBmdW5jdGlvbiBpc09yZGVyZWRNYXAobWF5YmVPcmRlcmVkTWFwKSB7XG4gICAgcmV0dXJuIGlzTWFwKG1heWJlT3JkZXJlZE1hcCkgJiYgaXNPcmRlcmVkKG1heWJlT3JkZXJlZE1hcCk7XG4gIH1cblxuICBPcmRlcmVkTWFwLmlzT3JkZXJlZE1hcCA9IGlzT3JkZXJlZE1hcDtcblxuICBPcmRlcmVkTWFwLnByb3RvdHlwZVtJU19PUkRFUkVEX1NFTlRJTkVMXSA9IHRydWU7XG4gIE9yZGVyZWRNYXAucHJvdG90eXBlW0RFTEVURV0gPSBPcmRlcmVkTWFwLnByb3RvdHlwZS5yZW1vdmU7XG5cblxuXG4gIGZ1bmN0aW9uIG1ha2VPcmRlcmVkTWFwKG1hcCwgbGlzdCwgb3duZXJJRCwgaGFzaCkge1xuICAgIHZhciBvbWFwID0gT2JqZWN0LmNyZWF0ZShPcmRlcmVkTWFwLnByb3RvdHlwZSk7XG4gICAgb21hcC5zaXplID0gbWFwID8gbWFwLnNpemUgOiAwO1xuICAgIG9tYXAuX21hcCA9IG1hcDtcbiAgICBvbWFwLl9saXN0ID0gbGlzdDtcbiAgICBvbWFwLl9fb3duZXJJRCA9IG93bmVySUQ7XG4gICAgb21hcC5fX2hhc2ggPSBoYXNoO1xuICAgIHJldHVybiBvbWFwO1xuICB9XG5cbiAgdmFyIEVNUFRZX09SREVSRURfTUFQO1xuICBmdW5jdGlvbiBlbXB0eU9yZGVyZWRNYXAoKSB7XG4gICAgcmV0dXJuIEVNUFRZX09SREVSRURfTUFQIHx8IChFTVBUWV9PUkRFUkVEX01BUCA9IG1ha2VPcmRlcmVkTWFwKGVtcHR5TWFwKCksIGVtcHR5TGlzdCgpKSk7XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVPcmRlcmVkTWFwKG9tYXAsIGssIHYpIHtcbiAgICB2YXIgbWFwID0gb21hcC5fbWFwO1xuICAgIHZhciBsaXN0ID0gb21hcC5fbGlzdDtcbiAgICB2YXIgaSA9IG1hcC5nZXQoayk7XG4gICAgdmFyIGhhcyA9IGkgIT09IHVuZGVmaW5lZDtcbiAgICB2YXIgbmV3TWFwO1xuICAgIHZhciBuZXdMaXN0O1xuICAgIGlmICh2ID09PSBOT1RfU0VUKSB7IC8vIHJlbW92ZWRcbiAgICAgIGlmICghaGFzKSB7XG4gICAgICAgIHJldHVybiBvbWFwO1xuICAgICAgfVxuICAgICAgaWYgKGxpc3Quc2l6ZSA+PSBTSVpFICYmIGxpc3Quc2l6ZSA+PSBtYXAuc2l6ZSAqIDIpIHtcbiAgICAgICAgbmV3TGlzdCA9IGxpc3QuZmlsdGVyKGZ1bmN0aW9uKGVudHJ5LCBpZHgpICB7cmV0dXJuIGVudHJ5ICE9PSB1bmRlZmluZWQgJiYgaSAhPT0gaWR4fSk7XG4gICAgICAgIG5ld01hcCA9IG5ld0xpc3QudG9LZXllZFNlcSgpLm1hcChmdW5jdGlvbihlbnRyeSApIHtyZXR1cm4gZW50cnlbMF19KS5mbGlwKCkudG9NYXAoKTtcbiAgICAgICAgaWYgKG9tYXAuX19vd25lcklEKSB7XG4gICAgICAgICAgbmV3TWFwLl9fb3duZXJJRCA9IG5ld0xpc3QuX19vd25lcklEID0gb21hcC5fX293bmVySUQ7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ld01hcCA9IG1hcC5yZW1vdmUoayk7XG4gICAgICAgIG5ld0xpc3QgPSBpID09PSBsaXN0LnNpemUgLSAxID8gbGlzdC5wb3AoKSA6IGxpc3Quc2V0KGksIHVuZGVmaW5lZCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChoYXMpIHtcbiAgICAgICAgaWYgKHYgPT09IGxpc3QuZ2V0KGkpWzFdKSB7XG4gICAgICAgICAgcmV0dXJuIG9tYXA7XG4gICAgICAgIH1cbiAgICAgICAgbmV3TWFwID0gbWFwO1xuICAgICAgICBuZXdMaXN0ID0gbGlzdC5zZXQoaSwgW2ssIHZdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ld01hcCA9IG1hcC5zZXQoaywgbGlzdC5zaXplKTtcbiAgICAgICAgbmV3TGlzdCA9IGxpc3Quc2V0KGxpc3Quc2l6ZSwgW2ssIHZdKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKG9tYXAuX19vd25lcklEKSB7XG4gICAgICBvbWFwLnNpemUgPSBuZXdNYXAuc2l6ZTtcbiAgICAgIG9tYXAuX21hcCA9IG5ld01hcDtcbiAgICAgIG9tYXAuX2xpc3QgPSBuZXdMaXN0O1xuICAgICAgb21hcC5fX2hhc2ggPSB1bmRlZmluZWQ7XG4gICAgICByZXR1cm4gb21hcDtcbiAgICB9XG4gICAgcmV0dXJuIG1ha2VPcmRlcmVkTWFwKG5ld01hcCwgbmV3TGlzdCk7XG4gIH1cblxuICBjcmVhdGVDbGFzcyhUb0tleWVkU2VxdWVuY2UsIEtleWVkU2VxKTtcbiAgICBmdW5jdGlvbiBUb0tleWVkU2VxdWVuY2UoaW5kZXhlZCwgdXNlS2V5cykge1xuICAgICAgdGhpcy5faXRlciA9IGluZGV4ZWQ7XG4gICAgICB0aGlzLl91c2VLZXlzID0gdXNlS2V5cztcbiAgICAgIHRoaXMuc2l6ZSA9IGluZGV4ZWQuc2l6ZTtcbiAgICB9XG5cbiAgICBUb0tleWVkU2VxdWVuY2UucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKGtleSwgbm90U2V0VmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLl9pdGVyLmdldChrZXksIG5vdFNldFZhbHVlKTtcbiAgICB9O1xuXG4gICAgVG9LZXllZFNlcXVlbmNlLnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbihrZXkpIHtcbiAgICAgIHJldHVybiB0aGlzLl9pdGVyLmhhcyhrZXkpO1xuICAgIH07XG5cbiAgICBUb0tleWVkU2VxdWVuY2UucHJvdG90eXBlLnZhbHVlU2VxID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5faXRlci52YWx1ZVNlcSgpO1xuICAgIH07XG5cbiAgICBUb0tleWVkU2VxdWVuY2UucHJvdG90eXBlLnJldmVyc2UgPSBmdW5jdGlvbigpIHt2YXIgdGhpcyQwID0gdGhpcztcbiAgICAgIHZhciByZXZlcnNlZFNlcXVlbmNlID0gcmV2ZXJzZUZhY3RvcnkodGhpcywgdHJ1ZSk7XG4gICAgICBpZiAoIXRoaXMuX3VzZUtleXMpIHtcbiAgICAgICAgcmV2ZXJzZWRTZXF1ZW5jZS52YWx1ZVNlcSA9IGZ1bmN0aW9uKCkgIHtyZXR1cm4gdGhpcyQwLl9pdGVyLnRvU2VxKCkucmV2ZXJzZSgpfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXZlcnNlZFNlcXVlbmNlO1xuICAgIH07XG5cbiAgICBUb0tleWVkU2VxdWVuY2UucHJvdG90eXBlLm1hcCA9IGZ1bmN0aW9uKG1hcHBlciwgY29udGV4dCkge3ZhciB0aGlzJDAgPSB0aGlzO1xuICAgICAgdmFyIG1hcHBlZFNlcXVlbmNlID0gbWFwRmFjdG9yeSh0aGlzLCBtYXBwZXIsIGNvbnRleHQpO1xuICAgICAgaWYgKCF0aGlzLl91c2VLZXlzKSB7XG4gICAgICAgIG1hcHBlZFNlcXVlbmNlLnZhbHVlU2VxID0gZnVuY3Rpb24oKSAge3JldHVybiB0aGlzJDAuX2l0ZXIudG9TZXEoKS5tYXAobWFwcGVyLCBjb250ZXh0KX07XG4gICAgICB9XG4gICAgICByZXR1cm4gbWFwcGVkU2VxdWVuY2U7XG4gICAgfTtcblxuICAgIFRvS2V5ZWRTZXF1ZW5jZS5wcm90b3R5cGUuX19pdGVyYXRlID0gZnVuY3Rpb24oZm4sIHJldmVyc2UpIHt2YXIgdGhpcyQwID0gdGhpcztcbiAgICAgIHZhciBpaTtcbiAgICAgIHJldHVybiB0aGlzLl9pdGVyLl9faXRlcmF0ZShcbiAgICAgICAgdGhpcy5fdXNlS2V5cyA/XG4gICAgICAgICAgZnVuY3Rpb24odiwgaykgIHtyZXR1cm4gZm4odiwgaywgdGhpcyQwKX0gOlxuICAgICAgICAgICgoaWkgPSByZXZlcnNlID8gcmVzb2x2ZVNpemUodGhpcykgOiAwKSxcbiAgICAgICAgICAgIGZ1bmN0aW9uKHYgKSB7cmV0dXJuIGZuKHYsIHJldmVyc2UgPyAtLWlpIDogaWkrKywgdGhpcyQwKX0pLFxuICAgICAgICByZXZlcnNlXG4gICAgICApO1xuICAgIH07XG5cbiAgICBUb0tleWVkU2VxdWVuY2UucHJvdG90eXBlLl9faXRlcmF0b3IgPSBmdW5jdGlvbih0eXBlLCByZXZlcnNlKSB7XG4gICAgICBpZiAodGhpcy5fdXNlS2V5cykge1xuICAgICAgICByZXR1cm4gdGhpcy5faXRlci5fX2l0ZXJhdG9yKHR5cGUsIHJldmVyc2UpO1xuICAgICAgfVxuICAgICAgdmFyIGl0ZXJhdG9yID0gdGhpcy5faXRlci5fX2l0ZXJhdG9yKElURVJBVEVfVkFMVUVTLCByZXZlcnNlKTtcbiAgICAgIHZhciBpaSA9IHJldmVyc2UgPyByZXNvbHZlU2l6ZSh0aGlzKSA6IDA7XG4gICAgICByZXR1cm4gbmV3IEl0ZXJhdG9yKGZ1bmN0aW9uKCkgIHtcbiAgICAgICAgdmFyIHN0ZXAgPSBpdGVyYXRvci5uZXh0KCk7XG4gICAgICAgIHJldHVybiBzdGVwLmRvbmUgPyBzdGVwIDpcbiAgICAgICAgICBpdGVyYXRvclZhbHVlKHR5cGUsIHJldmVyc2UgPyAtLWlpIDogaWkrKywgc3RlcC52YWx1ZSwgc3RlcCk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gIFRvS2V5ZWRTZXF1ZW5jZS5wcm90b3R5cGVbSVNfT1JERVJFRF9TRU5USU5FTF0gPSB0cnVlO1xuXG5cbiAgY3JlYXRlQ2xhc3MoVG9JbmRleGVkU2VxdWVuY2UsIEluZGV4ZWRTZXEpO1xuICAgIGZ1bmN0aW9uIFRvSW5kZXhlZFNlcXVlbmNlKGl0ZXIpIHtcbiAgICAgIHRoaXMuX2l0ZXIgPSBpdGVyO1xuICAgICAgdGhpcy5zaXplID0gaXRlci5zaXplO1xuICAgIH1cblxuICAgIFRvSW5kZXhlZFNlcXVlbmNlLnByb3RvdHlwZS5pbmNsdWRlcyA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdGhpcy5faXRlci5pbmNsdWRlcyh2YWx1ZSk7XG4gICAgfTtcblxuICAgIFRvSW5kZXhlZFNlcXVlbmNlLnByb3RvdHlwZS5fX2l0ZXJhdGUgPSBmdW5jdGlvbihmbiwgcmV2ZXJzZSkge3ZhciB0aGlzJDAgPSB0aGlzO1xuICAgICAgdmFyIGl0ZXJhdGlvbnMgPSAwO1xuICAgICAgcmV0dXJuIHRoaXMuX2l0ZXIuX19pdGVyYXRlKGZ1bmN0aW9uKHYgKSB7cmV0dXJuIGZuKHYsIGl0ZXJhdGlvbnMrKywgdGhpcyQwKX0sIHJldmVyc2UpO1xuICAgIH07XG5cbiAgICBUb0luZGV4ZWRTZXF1ZW5jZS5wcm90b3R5cGUuX19pdGVyYXRvciA9IGZ1bmN0aW9uKHR5cGUsIHJldmVyc2UpIHtcbiAgICAgIHZhciBpdGVyYXRvciA9IHRoaXMuX2l0ZXIuX19pdGVyYXRvcihJVEVSQVRFX1ZBTFVFUywgcmV2ZXJzZSk7XG4gICAgICB2YXIgaXRlcmF0aW9ucyA9IDA7XG4gICAgICByZXR1cm4gbmV3IEl0ZXJhdG9yKGZ1bmN0aW9uKCkgIHtcbiAgICAgICAgdmFyIHN0ZXAgPSBpdGVyYXRvci5uZXh0KCk7XG4gICAgICAgIHJldHVybiBzdGVwLmRvbmUgPyBzdGVwIDpcbiAgICAgICAgICBpdGVyYXRvclZhbHVlKHR5cGUsIGl0ZXJhdGlvbnMrKywgc3RlcC52YWx1ZSwgc3RlcClcbiAgICAgIH0pO1xuICAgIH07XG5cblxuXG4gIGNyZWF0ZUNsYXNzKFRvU2V0U2VxdWVuY2UsIFNldFNlcSk7XG4gICAgZnVuY3Rpb24gVG9TZXRTZXF1ZW5jZShpdGVyKSB7XG4gICAgICB0aGlzLl9pdGVyID0gaXRlcjtcbiAgICAgIHRoaXMuc2l6ZSA9IGl0ZXIuc2l6ZTtcbiAgICB9XG5cbiAgICBUb1NldFNlcXVlbmNlLnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbihrZXkpIHtcbiAgICAgIHJldHVybiB0aGlzLl9pdGVyLmluY2x1ZGVzKGtleSk7XG4gICAgfTtcblxuICAgIFRvU2V0U2VxdWVuY2UucHJvdG90eXBlLl9faXRlcmF0ZSA9IGZ1bmN0aW9uKGZuLCByZXZlcnNlKSB7dmFyIHRoaXMkMCA9IHRoaXM7XG4gICAgICByZXR1cm4gdGhpcy5faXRlci5fX2l0ZXJhdGUoZnVuY3Rpb24odiApIHtyZXR1cm4gZm4odiwgdiwgdGhpcyQwKX0sIHJldmVyc2UpO1xuICAgIH07XG5cbiAgICBUb1NldFNlcXVlbmNlLnByb3RvdHlwZS5fX2l0ZXJhdG9yID0gZnVuY3Rpb24odHlwZSwgcmV2ZXJzZSkge1xuICAgICAgdmFyIGl0ZXJhdG9yID0gdGhpcy5faXRlci5fX2l0ZXJhdG9yKElURVJBVEVfVkFMVUVTLCByZXZlcnNlKTtcbiAgICAgIHJldHVybiBuZXcgSXRlcmF0b3IoZnVuY3Rpb24oKSAge1xuICAgICAgICB2YXIgc3RlcCA9IGl0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgcmV0dXJuIHN0ZXAuZG9uZSA/IHN0ZXAgOlxuICAgICAgICAgIGl0ZXJhdG9yVmFsdWUodHlwZSwgc3RlcC52YWx1ZSwgc3RlcC52YWx1ZSwgc3RlcCk7XG4gICAgICB9KTtcbiAgICB9O1xuXG5cblxuICBjcmVhdGVDbGFzcyhGcm9tRW50cmllc1NlcXVlbmNlLCBLZXllZFNlcSk7XG4gICAgZnVuY3Rpb24gRnJvbUVudHJpZXNTZXF1ZW5jZShlbnRyaWVzKSB7XG4gICAgICB0aGlzLl9pdGVyID0gZW50cmllcztcbiAgICAgIHRoaXMuc2l6ZSA9IGVudHJpZXMuc2l6ZTtcbiAgICB9XG5cbiAgICBGcm9tRW50cmllc1NlcXVlbmNlLnByb3RvdHlwZS5lbnRyeVNlcSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2l0ZXIudG9TZXEoKTtcbiAgICB9O1xuXG4gICAgRnJvbUVudHJpZXNTZXF1ZW5jZS5wcm90b3R5cGUuX19pdGVyYXRlID0gZnVuY3Rpb24oZm4sIHJldmVyc2UpIHt2YXIgdGhpcyQwID0gdGhpcztcbiAgICAgIHJldHVybiB0aGlzLl9pdGVyLl9faXRlcmF0ZShmdW5jdGlvbihlbnRyeSApIHtcbiAgICAgICAgLy8gQ2hlY2sgaWYgZW50cnkgZXhpc3RzIGZpcnN0IHNvIGFycmF5IGFjY2VzcyBkb2Vzbid0IHRocm93IGZvciBob2xlc1xuICAgICAgICAvLyBpbiB0aGUgcGFyZW50IGl0ZXJhdGlvbi5cbiAgICAgICAgaWYgKGVudHJ5KSB7XG4gICAgICAgICAgdmFsaWRhdGVFbnRyeShlbnRyeSk7XG4gICAgICAgICAgdmFyIGluZGV4ZWRJdGVyYWJsZSA9IGlzSXRlcmFibGUoZW50cnkpO1xuICAgICAgICAgIHJldHVybiBmbihcbiAgICAgICAgICAgIGluZGV4ZWRJdGVyYWJsZSA/IGVudHJ5LmdldCgxKSA6IGVudHJ5WzFdLFxuICAgICAgICAgICAgaW5kZXhlZEl0ZXJhYmxlID8gZW50cnkuZ2V0KDApIDogZW50cnlbMF0sXG4gICAgICAgICAgICB0aGlzJDBcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9LCByZXZlcnNlKTtcbiAgICB9O1xuXG4gICAgRnJvbUVudHJpZXNTZXF1ZW5jZS5wcm90b3R5cGUuX19pdGVyYXRvciA9IGZ1bmN0aW9uKHR5cGUsIHJldmVyc2UpIHtcbiAgICAgIHZhciBpdGVyYXRvciA9IHRoaXMuX2l0ZXIuX19pdGVyYXRvcihJVEVSQVRFX1ZBTFVFUywgcmV2ZXJzZSk7XG4gICAgICByZXR1cm4gbmV3IEl0ZXJhdG9yKGZ1bmN0aW9uKCkgIHtcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICB2YXIgc3RlcCA9IGl0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgICBpZiAoc3RlcC5kb25lKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RlcDtcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFyIGVudHJ5ID0gc3RlcC52YWx1ZTtcbiAgICAgICAgICAvLyBDaGVjayBpZiBlbnRyeSBleGlzdHMgZmlyc3Qgc28gYXJyYXkgYWNjZXNzIGRvZXNuJ3QgdGhyb3cgZm9yIGhvbGVzXG4gICAgICAgICAgLy8gaW4gdGhlIHBhcmVudCBpdGVyYXRpb24uXG4gICAgICAgICAgaWYgKGVudHJ5KSB7XG4gICAgICAgICAgICB2YWxpZGF0ZUVudHJ5KGVudHJ5KTtcbiAgICAgICAgICAgIHZhciBpbmRleGVkSXRlcmFibGUgPSBpc0l0ZXJhYmxlKGVudHJ5KTtcbiAgICAgICAgICAgIHJldHVybiBpdGVyYXRvclZhbHVlKFxuICAgICAgICAgICAgICB0eXBlLFxuICAgICAgICAgICAgICBpbmRleGVkSXRlcmFibGUgPyBlbnRyeS5nZXQoMCkgOiBlbnRyeVswXSxcbiAgICAgICAgICAgICAgaW5kZXhlZEl0ZXJhYmxlID8gZW50cnkuZ2V0KDEpIDogZW50cnlbMV0sXG4gICAgICAgICAgICAgIHN0ZXBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG5cbiAgVG9JbmRleGVkU2VxdWVuY2UucHJvdG90eXBlLmNhY2hlUmVzdWx0ID1cbiAgVG9LZXllZFNlcXVlbmNlLnByb3RvdHlwZS5jYWNoZVJlc3VsdCA9XG4gIFRvU2V0U2VxdWVuY2UucHJvdG90eXBlLmNhY2hlUmVzdWx0ID1cbiAgRnJvbUVudHJpZXNTZXF1ZW5jZS5wcm90b3R5cGUuY2FjaGVSZXN1bHQgPVxuICAgIGNhY2hlUmVzdWx0VGhyb3VnaDtcblxuXG4gIGZ1bmN0aW9uIGZsaXBGYWN0b3J5KGl0ZXJhYmxlKSB7XG4gICAgdmFyIGZsaXBTZXF1ZW5jZSA9IG1ha2VTZXF1ZW5jZShpdGVyYWJsZSk7XG4gICAgZmxpcFNlcXVlbmNlLl9pdGVyID0gaXRlcmFibGU7XG4gICAgZmxpcFNlcXVlbmNlLnNpemUgPSBpdGVyYWJsZS5zaXplO1xuICAgIGZsaXBTZXF1ZW5jZS5mbGlwID0gZnVuY3Rpb24oKSAge3JldHVybiBpdGVyYWJsZX07XG4gICAgZmxpcFNlcXVlbmNlLnJldmVyc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgcmV2ZXJzZWRTZXF1ZW5jZSA9IGl0ZXJhYmxlLnJldmVyc2UuYXBwbHkodGhpcyk7IC8vIHN1cGVyLnJldmVyc2UoKVxuICAgICAgcmV2ZXJzZWRTZXF1ZW5jZS5mbGlwID0gZnVuY3Rpb24oKSAge3JldHVybiBpdGVyYWJsZS5yZXZlcnNlKCl9O1xuICAgICAgcmV0dXJuIHJldmVyc2VkU2VxdWVuY2U7XG4gICAgfTtcbiAgICBmbGlwU2VxdWVuY2UuaGFzID0gZnVuY3Rpb24oa2V5ICkge3JldHVybiBpdGVyYWJsZS5pbmNsdWRlcyhrZXkpfTtcbiAgICBmbGlwU2VxdWVuY2UuaW5jbHVkZXMgPSBmdW5jdGlvbihrZXkgKSB7cmV0dXJuIGl0ZXJhYmxlLmhhcyhrZXkpfTtcbiAgICBmbGlwU2VxdWVuY2UuY2FjaGVSZXN1bHQgPSBjYWNoZVJlc3VsdFRocm91Z2g7XG4gICAgZmxpcFNlcXVlbmNlLl9faXRlcmF0ZVVuY2FjaGVkID0gZnVuY3Rpb24gKGZuLCByZXZlcnNlKSB7dmFyIHRoaXMkMCA9IHRoaXM7XG4gICAgICByZXR1cm4gaXRlcmFibGUuX19pdGVyYXRlKGZ1bmN0aW9uKHYsIGspICB7cmV0dXJuIGZuKGssIHYsIHRoaXMkMCkgIT09IGZhbHNlfSwgcmV2ZXJzZSk7XG4gICAgfVxuICAgIGZsaXBTZXF1ZW5jZS5fX2l0ZXJhdG9yVW5jYWNoZWQgPSBmdW5jdGlvbih0eXBlLCByZXZlcnNlKSB7XG4gICAgICBpZiAodHlwZSA9PT0gSVRFUkFURV9FTlRSSUVTKSB7XG4gICAgICAgIHZhciBpdGVyYXRvciA9IGl0ZXJhYmxlLl9faXRlcmF0b3IodHlwZSwgcmV2ZXJzZSk7XG4gICAgICAgIHJldHVybiBuZXcgSXRlcmF0b3IoZnVuY3Rpb24oKSAge1xuICAgICAgICAgIHZhciBzdGVwID0gaXRlcmF0b3IubmV4dCgpO1xuICAgICAgICAgIGlmICghc3RlcC5kb25lKSB7XG4gICAgICAgICAgICB2YXIgayA9IHN0ZXAudmFsdWVbMF07XG4gICAgICAgICAgICBzdGVwLnZhbHVlWzBdID0gc3RlcC52YWx1ZVsxXTtcbiAgICAgICAgICAgIHN0ZXAudmFsdWVbMV0gPSBrO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gc3RlcDtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gaXRlcmFibGUuX19pdGVyYXRvcihcbiAgICAgICAgdHlwZSA9PT0gSVRFUkFURV9WQUxVRVMgPyBJVEVSQVRFX0tFWVMgOiBJVEVSQVRFX1ZBTFVFUyxcbiAgICAgICAgcmV2ZXJzZVxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIGZsaXBTZXF1ZW5jZTtcbiAgfVxuXG5cbiAgZnVuY3Rpb24gbWFwRmFjdG9yeShpdGVyYWJsZSwgbWFwcGVyLCBjb250ZXh0KSB7XG4gICAgdmFyIG1hcHBlZFNlcXVlbmNlID0gbWFrZVNlcXVlbmNlKGl0ZXJhYmxlKTtcbiAgICBtYXBwZWRTZXF1ZW5jZS5zaXplID0gaXRlcmFibGUuc2l6ZTtcbiAgICBtYXBwZWRTZXF1ZW5jZS5oYXMgPSBmdW5jdGlvbihrZXkgKSB7cmV0dXJuIGl0ZXJhYmxlLmhhcyhrZXkpfTtcbiAgICBtYXBwZWRTZXF1ZW5jZS5nZXQgPSBmdW5jdGlvbihrZXksIG5vdFNldFZhbHVlKSAge1xuICAgICAgdmFyIHYgPSBpdGVyYWJsZS5nZXQoa2V5LCBOT1RfU0VUKTtcbiAgICAgIHJldHVybiB2ID09PSBOT1RfU0VUID9cbiAgICAgICAgbm90U2V0VmFsdWUgOlxuICAgICAgICBtYXBwZXIuY2FsbChjb250ZXh0LCB2LCBrZXksIGl0ZXJhYmxlKTtcbiAgICB9O1xuICAgIG1hcHBlZFNlcXVlbmNlLl9faXRlcmF0ZVVuY2FjaGVkID0gZnVuY3Rpb24gKGZuLCByZXZlcnNlKSB7dmFyIHRoaXMkMCA9IHRoaXM7XG4gICAgICByZXR1cm4gaXRlcmFibGUuX19pdGVyYXRlKFxuICAgICAgICBmdW5jdGlvbih2LCBrLCBjKSAge3JldHVybiBmbihtYXBwZXIuY2FsbChjb250ZXh0LCB2LCBrLCBjKSwgaywgdGhpcyQwKSAhPT0gZmFsc2V9LFxuICAgICAgICByZXZlcnNlXG4gICAgICApO1xuICAgIH1cbiAgICBtYXBwZWRTZXF1ZW5jZS5fX2l0ZXJhdG9yVW5jYWNoZWQgPSBmdW5jdGlvbiAodHlwZSwgcmV2ZXJzZSkge1xuICAgICAgdmFyIGl0ZXJhdG9yID0gaXRlcmFibGUuX19pdGVyYXRvcihJVEVSQVRFX0VOVFJJRVMsIHJldmVyc2UpO1xuICAgICAgcmV0dXJuIG5ldyBJdGVyYXRvcihmdW5jdGlvbigpICB7XG4gICAgICAgIHZhciBzdGVwID0gaXRlcmF0b3IubmV4dCgpO1xuICAgICAgICBpZiAoc3RlcC5kb25lKSB7XG4gICAgICAgICAgcmV0dXJuIHN0ZXA7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGVudHJ5ID0gc3RlcC52YWx1ZTtcbiAgICAgICAgdmFyIGtleSA9IGVudHJ5WzBdO1xuICAgICAgICByZXR1cm4gaXRlcmF0b3JWYWx1ZShcbiAgICAgICAgICB0eXBlLFxuICAgICAgICAgIGtleSxcbiAgICAgICAgICBtYXBwZXIuY2FsbChjb250ZXh0LCBlbnRyeVsxXSwga2V5LCBpdGVyYWJsZSksXG4gICAgICAgICAgc3RlcFxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBtYXBwZWRTZXF1ZW5jZTtcbiAgfVxuXG5cbiAgZnVuY3Rpb24gcmV2ZXJzZUZhY3RvcnkoaXRlcmFibGUsIHVzZUtleXMpIHtcbiAgICB2YXIgcmV2ZXJzZWRTZXF1ZW5jZSA9IG1ha2VTZXF1ZW5jZShpdGVyYWJsZSk7XG4gICAgcmV2ZXJzZWRTZXF1ZW5jZS5faXRlciA9IGl0ZXJhYmxlO1xuICAgIHJldmVyc2VkU2VxdWVuY2Uuc2l6ZSA9IGl0ZXJhYmxlLnNpemU7XG4gICAgcmV2ZXJzZWRTZXF1ZW5jZS5yZXZlcnNlID0gZnVuY3Rpb24oKSAge3JldHVybiBpdGVyYWJsZX07XG4gICAgaWYgKGl0ZXJhYmxlLmZsaXApIHtcbiAgICAgIHJldmVyc2VkU2VxdWVuY2UuZmxpcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGZsaXBTZXF1ZW5jZSA9IGZsaXBGYWN0b3J5KGl0ZXJhYmxlKTtcbiAgICAgICAgZmxpcFNlcXVlbmNlLnJldmVyc2UgPSBmdW5jdGlvbigpICB7cmV0dXJuIGl0ZXJhYmxlLmZsaXAoKX07XG4gICAgICAgIHJldHVybiBmbGlwU2VxdWVuY2U7XG4gICAgICB9O1xuICAgIH1cbiAgICByZXZlcnNlZFNlcXVlbmNlLmdldCA9IGZ1bmN0aW9uKGtleSwgbm90U2V0VmFsdWUpIFxuICAgICAge3JldHVybiBpdGVyYWJsZS5nZXQodXNlS2V5cyA/IGtleSA6IC0xIC0ga2V5LCBub3RTZXRWYWx1ZSl9O1xuICAgIHJldmVyc2VkU2VxdWVuY2UuaGFzID0gZnVuY3Rpb24oa2V5IClcbiAgICAgIHtyZXR1cm4gaXRlcmFibGUuaGFzKHVzZUtleXMgPyBrZXkgOiAtMSAtIGtleSl9O1xuICAgIHJldmVyc2VkU2VxdWVuY2UuaW5jbHVkZXMgPSBmdW5jdGlvbih2YWx1ZSApIHtyZXR1cm4gaXRlcmFibGUuaW5jbHVkZXModmFsdWUpfTtcbiAgICByZXZlcnNlZFNlcXVlbmNlLmNhY2hlUmVzdWx0ID0gY2FjaGVSZXN1bHRUaHJvdWdoO1xuICAgIHJldmVyc2VkU2VxdWVuY2UuX19pdGVyYXRlID0gZnVuY3Rpb24gKGZuLCByZXZlcnNlKSB7dmFyIHRoaXMkMCA9IHRoaXM7XG4gICAgICByZXR1cm4gaXRlcmFibGUuX19pdGVyYXRlKGZ1bmN0aW9uKHYsIGspICB7cmV0dXJuIGZuKHYsIGssIHRoaXMkMCl9LCAhcmV2ZXJzZSk7XG4gICAgfTtcbiAgICByZXZlcnNlZFNlcXVlbmNlLl9faXRlcmF0b3IgPVxuICAgICAgZnVuY3Rpb24odHlwZSwgcmV2ZXJzZSkgIHtyZXR1cm4gaXRlcmFibGUuX19pdGVyYXRvcih0eXBlLCAhcmV2ZXJzZSl9O1xuICAgIHJldHVybiByZXZlcnNlZFNlcXVlbmNlO1xuICB9XG5cblxuICBmdW5jdGlvbiBmaWx0ZXJGYWN0b3J5KGl0ZXJhYmxlLCBwcmVkaWNhdGUsIGNvbnRleHQsIHVzZUtleXMpIHtcbiAgICB2YXIgZmlsdGVyU2VxdWVuY2UgPSBtYWtlU2VxdWVuY2UoaXRlcmFibGUpO1xuICAgIGlmICh1c2VLZXlzKSB7XG4gICAgICBmaWx0ZXJTZXF1ZW5jZS5oYXMgPSBmdW5jdGlvbihrZXkgKSB7XG4gICAgICAgIHZhciB2ID0gaXRlcmFibGUuZ2V0KGtleSwgTk9UX1NFVCk7XG4gICAgICAgIHJldHVybiB2ICE9PSBOT1RfU0VUICYmICEhcHJlZGljYXRlLmNhbGwoY29udGV4dCwgdiwga2V5LCBpdGVyYWJsZSk7XG4gICAgICB9O1xuICAgICAgZmlsdGVyU2VxdWVuY2UuZ2V0ID0gZnVuY3Rpb24oa2V5LCBub3RTZXRWYWx1ZSkgIHtcbiAgICAgICAgdmFyIHYgPSBpdGVyYWJsZS5nZXQoa2V5LCBOT1RfU0VUKTtcbiAgICAgICAgcmV0dXJuIHYgIT09IE5PVF9TRVQgJiYgcHJlZGljYXRlLmNhbGwoY29udGV4dCwgdiwga2V5LCBpdGVyYWJsZSkgP1xuICAgICAgICAgIHYgOiBub3RTZXRWYWx1ZTtcbiAgICAgIH07XG4gICAgfVxuICAgIGZpbHRlclNlcXVlbmNlLl9faXRlcmF0ZVVuY2FjaGVkID0gZnVuY3Rpb24gKGZuLCByZXZlcnNlKSB7dmFyIHRoaXMkMCA9IHRoaXM7XG4gICAgICB2YXIgaXRlcmF0aW9ucyA9IDA7XG4gICAgICBpdGVyYWJsZS5fX2l0ZXJhdGUoZnVuY3Rpb24odiwgaywgYykgIHtcbiAgICAgICAgaWYgKHByZWRpY2F0ZS5jYWxsKGNvbnRleHQsIHYsIGssIGMpKSB7XG4gICAgICAgICAgaXRlcmF0aW9ucysrO1xuICAgICAgICAgIHJldHVybiBmbih2LCB1c2VLZXlzID8gayA6IGl0ZXJhdGlvbnMgLSAxLCB0aGlzJDApO1xuICAgICAgICB9XG4gICAgICB9LCByZXZlcnNlKTtcbiAgICAgIHJldHVybiBpdGVyYXRpb25zO1xuICAgIH07XG4gICAgZmlsdGVyU2VxdWVuY2UuX19pdGVyYXRvclVuY2FjaGVkID0gZnVuY3Rpb24gKHR5cGUsIHJldmVyc2UpIHtcbiAgICAgIHZhciBpdGVyYXRvciA9IGl0ZXJhYmxlLl9faXRlcmF0b3IoSVRFUkFURV9FTlRSSUVTLCByZXZlcnNlKTtcbiAgICAgIHZhciBpdGVyYXRpb25zID0gMDtcbiAgICAgIHJldHVybiBuZXcgSXRlcmF0b3IoZnVuY3Rpb24oKSAge1xuICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgIHZhciBzdGVwID0gaXRlcmF0b3IubmV4dCgpO1xuICAgICAgICAgIGlmIChzdGVwLmRvbmUpIHtcbiAgICAgICAgICAgIHJldHVybiBzdGVwO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgZW50cnkgPSBzdGVwLnZhbHVlO1xuICAgICAgICAgIHZhciBrZXkgPSBlbnRyeVswXTtcbiAgICAgICAgICB2YXIgdmFsdWUgPSBlbnRyeVsxXTtcbiAgICAgICAgICBpZiAocHJlZGljYXRlLmNhbGwoY29udGV4dCwgdmFsdWUsIGtleSwgaXRlcmFibGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gaXRlcmF0b3JWYWx1ZSh0eXBlLCB1c2VLZXlzID8ga2V5IDogaXRlcmF0aW9ucysrLCB2YWx1ZSwgc3RlcCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGZpbHRlclNlcXVlbmNlO1xuICB9XG5cblxuICBmdW5jdGlvbiBjb3VudEJ5RmFjdG9yeShpdGVyYWJsZSwgZ3JvdXBlciwgY29udGV4dCkge1xuICAgIHZhciBncm91cHMgPSBNYXAoKS5hc011dGFibGUoKTtcbiAgICBpdGVyYWJsZS5fX2l0ZXJhdGUoZnVuY3Rpb24odiwgaykgIHtcbiAgICAgIGdyb3Vwcy51cGRhdGUoXG4gICAgICAgIGdyb3VwZXIuY2FsbChjb250ZXh0LCB2LCBrLCBpdGVyYWJsZSksXG4gICAgICAgIDAsXG4gICAgICAgIGZ1bmN0aW9uKGEgKSB7cmV0dXJuIGEgKyAxfVxuICAgICAgKTtcbiAgICB9KTtcbiAgICByZXR1cm4gZ3JvdXBzLmFzSW1tdXRhYmxlKCk7XG4gIH1cblxuXG4gIGZ1bmN0aW9uIGdyb3VwQnlGYWN0b3J5KGl0ZXJhYmxlLCBncm91cGVyLCBjb250ZXh0KSB7XG4gICAgdmFyIGlzS2V5ZWRJdGVyID0gaXNLZXllZChpdGVyYWJsZSk7XG4gICAgdmFyIGdyb3VwcyA9IChpc09yZGVyZWQoaXRlcmFibGUpID8gT3JkZXJlZE1hcCgpIDogTWFwKCkpLmFzTXV0YWJsZSgpO1xuICAgIGl0ZXJhYmxlLl9faXRlcmF0ZShmdW5jdGlvbih2LCBrKSAge1xuICAgICAgZ3JvdXBzLnVwZGF0ZShcbiAgICAgICAgZ3JvdXBlci5jYWxsKGNvbnRleHQsIHYsIGssIGl0ZXJhYmxlKSxcbiAgICAgICAgZnVuY3Rpb24oYSApIHtyZXR1cm4gKGEgPSBhIHx8IFtdLCBhLnB1c2goaXNLZXllZEl0ZXIgPyBbaywgdl0gOiB2KSwgYSl9XG4gICAgICApO1xuICAgIH0pO1xuICAgIHZhciBjb2VyY2UgPSBpdGVyYWJsZUNsYXNzKGl0ZXJhYmxlKTtcbiAgICByZXR1cm4gZ3JvdXBzLm1hcChmdW5jdGlvbihhcnIgKSB7cmV0dXJuIHJlaWZ5KGl0ZXJhYmxlLCBjb2VyY2UoYXJyKSl9KTtcbiAgfVxuXG5cbiAgZnVuY3Rpb24gc2xpY2VGYWN0b3J5KGl0ZXJhYmxlLCBiZWdpbiwgZW5kLCB1c2VLZXlzKSB7XG4gICAgdmFyIG9yaWdpbmFsU2l6ZSA9IGl0ZXJhYmxlLnNpemU7XG5cbiAgICAvLyBTYW5pdGl6ZSBiZWdpbiAmIGVuZCB1c2luZyB0aGlzIHNob3J0aGFuZCBmb3IgVG9JbnQzMihhcmd1bWVudClcbiAgICAvLyBodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtdG9pbnQzMlxuICAgIGlmIChiZWdpbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBiZWdpbiA9IGJlZ2luIHwgMDtcbiAgICB9XG4gICAgaWYgKGVuZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAoZW5kID09PSBJbmZpbml0eSkge1xuICAgICAgICBlbmQgPSBvcmlnaW5hbFNpemU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbmQgPSBlbmQgfCAwO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh3aG9sZVNsaWNlKGJlZ2luLCBlbmQsIG9yaWdpbmFsU2l6ZSkpIHtcbiAgICAgIHJldHVybiBpdGVyYWJsZTtcbiAgICB9XG5cbiAgICB2YXIgcmVzb2x2ZWRCZWdpbiA9IHJlc29sdmVCZWdpbihiZWdpbiwgb3JpZ2luYWxTaXplKTtcbiAgICB2YXIgcmVzb2x2ZWRFbmQgPSByZXNvbHZlRW5kKGVuZCwgb3JpZ2luYWxTaXplKTtcblxuICAgIC8vIGJlZ2luIG9yIGVuZCB3aWxsIGJlIE5hTiBpZiB0aGV5IHdlcmUgcHJvdmlkZWQgYXMgbmVnYXRpdmUgbnVtYmVycyBhbmRcbiAgICAvLyB0aGlzIGl0ZXJhYmxlJ3Mgc2l6ZSBpcyB1bmtub3duLiBJbiB0aGF0IGNhc2UsIGNhY2hlIGZpcnN0IHNvIHRoZXJlIGlzXG4gICAgLy8gYSBrbm93biBzaXplIGFuZCB0aGVzZSBkbyBub3QgcmVzb2x2ZSB0byBOYU4uXG4gICAgaWYgKHJlc29sdmVkQmVnaW4gIT09IHJlc29sdmVkQmVnaW4gfHwgcmVzb2x2ZWRFbmQgIT09IHJlc29sdmVkRW5kKSB7XG4gICAgICByZXR1cm4gc2xpY2VGYWN0b3J5KGl0ZXJhYmxlLnRvU2VxKCkuY2FjaGVSZXN1bHQoKSwgYmVnaW4sIGVuZCwgdXNlS2V5cyk7XG4gICAgfVxuXG4gICAgLy8gTm90ZTogcmVzb2x2ZWRFbmQgaXMgdW5kZWZpbmVkIHdoZW4gdGhlIG9yaWdpbmFsIHNlcXVlbmNlJ3MgbGVuZ3RoIGlzXG4gICAgLy8gdW5rbm93biBhbmQgdGhpcyBzbGljZSBkaWQgbm90IHN1cHBseSBhbiBlbmQgYW5kIHNob3VsZCBjb250YWluIGFsbFxuICAgIC8vIGVsZW1lbnRzIGFmdGVyIHJlc29sdmVkQmVnaW4uXG4gICAgLy8gSW4gdGhhdCBjYXNlLCByZXNvbHZlZFNpemUgd2lsbCBiZSBOYU4gYW5kIHNsaWNlU2l6ZSB3aWxsIHJlbWFpbiB1bmRlZmluZWQuXG4gICAgdmFyIHJlc29sdmVkU2l6ZSA9IHJlc29sdmVkRW5kIC0gcmVzb2x2ZWRCZWdpbjtcbiAgICB2YXIgc2xpY2VTaXplO1xuICAgIGlmIChyZXNvbHZlZFNpemUgPT09IHJlc29sdmVkU2l6ZSkge1xuICAgICAgc2xpY2VTaXplID0gcmVzb2x2ZWRTaXplIDwgMCA/IDAgOiByZXNvbHZlZFNpemU7XG4gICAgfVxuXG4gICAgdmFyIHNsaWNlU2VxID0gbWFrZVNlcXVlbmNlKGl0ZXJhYmxlKTtcblxuICAgIC8vIElmIGl0ZXJhYmxlLnNpemUgaXMgdW5kZWZpbmVkLCB0aGUgc2l6ZSBvZiB0aGUgcmVhbGl6ZWQgc2xpY2VTZXEgaXNcbiAgICAvLyB1bmtub3duIGF0IHRoaXMgcG9pbnQgdW5sZXNzIHRoZSBudW1iZXIgb2YgaXRlbXMgdG8gc2xpY2UgaXMgMFxuICAgIHNsaWNlU2VxLnNpemUgPSBzbGljZVNpemUgPT09IDAgPyBzbGljZVNpemUgOiBpdGVyYWJsZS5zaXplICYmIHNsaWNlU2l6ZSB8fCB1bmRlZmluZWQ7XG5cbiAgICBpZiAoIXVzZUtleXMgJiYgaXNTZXEoaXRlcmFibGUpICYmIHNsaWNlU2l6ZSA+PSAwKSB7XG4gICAgICBzbGljZVNlcS5nZXQgPSBmdW5jdGlvbiAoaW5kZXgsIG5vdFNldFZhbHVlKSB7XG4gICAgICAgIGluZGV4ID0gd3JhcEluZGV4KHRoaXMsIGluZGV4KTtcbiAgICAgICAgcmV0dXJuIGluZGV4ID49IDAgJiYgaW5kZXggPCBzbGljZVNpemUgP1xuICAgICAgICAgIGl0ZXJhYmxlLmdldChpbmRleCArIHJlc29sdmVkQmVnaW4sIG5vdFNldFZhbHVlKSA6XG4gICAgICAgICAgbm90U2V0VmFsdWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgc2xpY2VTZXEuX19pdGVyYXRlVW5jYWNoZWQgPSBmdW5jdGlvbihmbiwgcmV2ZXJzZSkge3ZhciB0aGlzJDAgPSB0aGlzO1xuICAgICAgaWYgKHNsaWNlU2l6ZSA9PT0gMCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cbiAgICAgIGlmIChyZXZlcnNlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhY2hlUmVzdWx0KCkuX19pdGVyYXRlKGZuLCByZXZlcnNlKTtcbiAgICAgIH1cbiAgICAgIHZhciBza2lwcGVkID0gMDtcbiAgICAgIHZhciBpc1NraXBwaW5nID0gdHJ1ZTtcbiAgICAgIHZhciBpdGVyYXRpb25zID0gMDtcbiAgICAgIGl0ZXJhYmxlLl9faXRlcmF0ZShmdW5jdGlvbih2LCBrKSAge1xuICAgICAgICBpZiAoIShpc1NraXBwaW5nICYmIChpc1NraXBwaW5nID0gc2tpcHBlZCsrIDwgcmVzb2x2ZWRCZWdpbikpKSB7XG4gICAgICAgICAgaXRlcmF0aW9ucysrO1xuICAgICAgICAgIHJldHVybiBmbih2LCB1c2VLZXlzID8gayA6IGl0ZXJhdGlvbnMgLSAxLCB0aGlzJDApICE9PSBmYWxzZSAmJlxuICAgICAgICAgICAgICAgICBpdGVyYXRpb25zICE9PSBzbGljZVNpemU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGl0ZXJhdGlvbnM7XG4gICAgfTtcblxuICAgIHNsaWNlU2VxLl9faXRlcmF0b3JVbmNhY2hlZCA9IGZ1bmN0aW9uKHR5cGUsIHJldmVyc2UpIHtcbiAgICAgIGlmIChzbGljZVNpemUgIT09IDAgJiYgcmV2ZXJzZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYWNoZVJlc3VsdCgpLl9faXRlcmF0b3IodHlwZSwgcmV2ZXJzZSk7XG4gICAgICB9XG4gICAgICAvLyBEb24ndCBib3RoZXIgaW5zdGFudGlhdGluZyBwYXJlbnQgaXRlcmF0b3IgaWYgdGFraW5nIDAuXG4gICAgICB2YXIgaXRlcmF0b3IgPSBzbGljZVNpemUgIT09IDAgJiYgaXRlcmFibGUuX19pdGVyYXRvcih0eXBlLCByZXZlcnNlKTtcbiAgICAgIHZhciBza2lwcGVkID0gMDtcbiAgICAgIHZhciBpdGVyYXRpb25zID0gMDtcbiAgICAgIHJldHVybiBuZXcgSXRlcmF0b3IoZnVuY3Rpb24oKSAge1xuICAgICAgICB3aGlsZSAoc2tpcHBlZCsrIDwgcmVzb2x2ZWRCZWdpbikge1xuICAgICAgICAgIGl0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKytpdGVyYXRpb25zID4gc2xpY2VTaXplKSB7XG4gICAgICAgICAgcmV0dXJuIGl0ZXJhdG9yRG9uZSgpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzdGVwID0gaXRlcmF0b3IubmV4dCgpO1xuICAgICAgICBpZiAodXNlS2V5cyB8fCB0eXBlID09PSBJVEVSQVRFX1ZBTFVFUykge1xuICAgICAgICAgIHJldHVybiBzdGVwO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09IElURVJBVEVfS0VZUykge1xuICAgICAgICAgIHJldHVybiBpdGVyYXRvclZhbHVlKHR5cGUsIGl0ZXJhdGlvbnMgLSAxLCB1bmRlZmluZWQsIHN0ZXApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBpdGVyYXRvclZhbHVlKHR5cGUsIGl0ZXJhdGlvbnMgLSAxLCBzdGVwLnZhbHVlWzFdLCBzdGVwKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNsaWNlU2VxO1xuICB9XG5cblxuICBmdW5jdGlvbiB0YWtlV2hpbGVGYWN0b3J5KGl0ZXJhYmxlLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICB2YXIgdGFrZVNlcXVlbmNlID0gbWFrZVNlcXVlbmNlKGl0ZXJhYmxlKTtcbiAgICB0YWtlU2VxdWVuY2UuX19pdGVyYXRlVW5jYWNoZWQgPSBmdW5jdGlvbihmbiwgcmV2ZXJzZSkge3ZhciB0aGlzJDAgPSB0aGlzO1xuICAgICAgaWYgKHJldmVyc2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGVSZXN1bHQoKS5fX2l0ZXJhdGUoZm4sIHJldmVyc2UpO1xuICAgICAgfVxuICAgICAgdmFyIGl0ZXJhdGlvbnMgPSAwO1xuICAgICAgaXRlcmFibGUuX19pdGVyYXRlKGZ1bmN0aW9uKHYsIGssIGMpIFxuICAgICAgICB7cmV0dXJuIHByZWRpY2F0ZS5jYWxsKGNvbnRleHQsIHYsIGssIGMpICYmICsraXRlcmF0aW9ucyAmJiBmbih2LCBrLCB0aGlzJDApfVxuICAgICAgKTtcbiAgICAgIHJldHVybiBpdGVyYXRpb25zO1xuICAgIH07XG4gICAgdGFrZVNlcXVlbmNlLl9faXRlcmF0b3JVbmNhY2hlZCA9IGZ1bmN0aW9uKHR5cGUsIHJldmVyc2UpIHt2YXIgdGhpcyQwID0gdGhpcztcbiAgICAgIGlmIChyZXZlcnNlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhY2hlUmVzdWx0KCkuX19pdGVyYXRvcih0eXBlLCByZXZlcnNlKTtcbiAgICAgIH1cbiAgICAgIHZhciBpdGVyYXRvciA9IGl0ZXJhYmxlLl9faXRlcmF0b3IoSVRFUkFURV9FTlRSSUVTLCByZXZlcnNlKTtcbiAgICAgIHZhciBpdGVyYXRpbmcgPSB0cnVlO1xuICAgICAgcmV0dXJuIG5ldyBJdGVyYXRvcihmdW5jdGlvbigpICB7XG4gICAgICAgIGlmICghaXRlcmF0aW5nKSB7XG4gICAgICAgICAgcmV0dXJuIGl0ZXJhdG9yRG9uZSgpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzdGVwID0gaXRlcmF0b3IubmV4dCgpO1xuICAgICAgICBpZiAoc3RlcC5kb25lKSB7XG4gICAgICAgICAgcmV0dXJuIHN0ZXA7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGVudHJ5ID0gc3RlcC52YWx1ZTtcbiAgICAgICAgdmFyIGsgPSBlbnRyeVswXTtcbiAgICAgICAgdmFyIHYgPSBlbnRyeVsxXTtcbiAgICAgICAgaWYgKCFwcmVkaWNhdGUuY2FsbChjb250ZXh0LCB2LCBrLCB0aGlzJDApKSB7XG4gICAgICAgICAgaXRlcmF0aW5nID0gZmFsc2U7XG4gICAgICAgICAgcmV0dXJuIGl0ZXJhdG9yRG9uZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0eXBlID09PSBJVEVSQVRFX0VOVFJJRVMgPyBzdGVwIDpcbiAgICAgICAgICBpdGVyYXRvclZhbHVlKHR5cGUsIGssIHYsIHN0ZXApO1xuICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gdGFrZVNlcXVlbmNlO1xuICB9XG5cblxuICBmdW5jdGlvbiBza2lwV2hpbGVGYWN0b3J5KGl0ZXJhYmxlLCBwcmVkaWNhdGUsIGNvbnRleHQsIHVzZUtleXMpIHtcbiAgICB2YXIgc2tpcFNlcXVlbmNlID0gbWFrZVNlcXVlbmNlKGl0ZXJhYmxlKTtcbiAgICBza2lwU2VxdWVuY2UuX19pdGVyYXRlVW5jYWNoZWQgPSBmdW5jdGlvbiAoZm4sIHJldmVyc2UpIHt2YXIgdGhpcyQwID0gdGhpcztcbiAgICAgIGlmIChyZXZlcnNlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhY2hlUmVzdWx0KCkuX19pdGVyYXRlKGZuLCByZXZlcnNlKTtcbiAgICAgIH1cbiAgICAgIHZhciBpc1NraXBwaW5nID0gdHJ1ZTtcbiAgICAgIHZhciBpdGVyYXRpb25zID0gMDtcbiAgICAgIGl0ZXJhYmxlLl9faXRlcmF0ZShmdW5jdGlvbih2LCBrLCBjKSAge1xuICAgICAgICBpZiAoIShpc1NraXBwaW5nICYmIChpc1NraXBwaW5nID0gcHJlZGljYXRlLmNhbGwoY29udGV4dCwgdiwgaywgYykpKSkge1xuICAgICAgICAgIGl0ZXJhdGlvbnMrKztcbiAgICAgICAgICByZXR1cm4gZm4odiwgdXNlS2V5cyA/IGsgOiBpdGVyYXRpb25zIC0gMSwgdGhpcyQwKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gaXRlcmF0aW9ucztcbiAgICB9O1xuICAgIHNraXBTZXF1ZW5jZS5fX2l0ZXJhdG9yVW5jYWNoZWQgPSBmdW5jdGlvbih0eXBlLCByZXZlcnNlKSB7dmFyIHRoaXMkMCA9IHRoaXM7XG4gICAgICBpZiAocmV2ZXJzZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYWNoZVJlc3VsdCgpLl9faXRlcmF0b3IodHlwZSwgcmV2ZXJzZSk7XG4gICAgICB9XG4gICAgICB2YXIgaXRlcmF0b3IgPSBpdGVyYWJsZS5fX2l0ZXJhdG9yKElURVJBVEVfRU5UUklFUywgcmV2ZXJzZSk7XG4gICAgICB2YXIgc2tpcHBpbmcgPSB0cnVlO1xuICAgICAgdmFyIGl0ZXJhdGlvbnMgPSAwO1xuICAgICAgcmV0dXJuIG5ldyBJdGVyYXRvcihmdW5jdGlvbigpICB7XG4gICAgICAgIHZhciBzdGVwLCBrLCB2O1xuICAgICAgICBkbyB7XG4gICAgICAgICAgc3RlcCA9IGl0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgICBpZiAoc3RlcC5kb25lKSB7XG4gICAgICAgICAgICBpZiAodXNlS2V5cyB8fCB0eXBlID09PSBJVEVSQVRFX1ZBTFVFUykge1xuICAgICAgICAgICAgICByZXR1cm4gc3RlcDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gSVRFUkFURV9LRVlTKSB7XG4gICAgICAgICAgICAgIHJldHVybiBpdGVyYXRvclZhbHVlKHR5cGUsIGl0ZXJhdGlvbnMrKywgdW5kZWZpbmVkLCBzdGVwKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJldHVybiBpdGVyYXRvclZhbHVlKHR5cGUsIGl0ZXJhdGlvbnMrKywgc3RlcC52YWx1ZVsxXSwgc3RlcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciBlbnRyeSA9IHN0ZXAudmFsdWU7XG4gICAgICAgICAgayA9IGVudHJ5WzBdO1xuICAgICAgICAgIHYgPSBlbnRyeVsxXTtcbiAgICAgICAgICBza2lwcGluZyAmJiAoc2tpcHBpbmcgPSBwcmVkaWNhdGUuY2FsbChjb250ZXh0LCB2LCBrLCB0aGlzJDApKTtcbiAgICAgICAgfSB3aGlsZSAoc2tpcHBpbmcpO1xuICAgICAgICByZXR1cm4gdHlwZSA9PT0gSVRFUkFURV9FTlRSSUVTID8gc3RlcCA6XG4gICAgICAgICAgaXRlcmF0b3JWYWx1ZSh0eXBlLCBrLCB2LCBzdGVwKTtcbiAgICAgIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIHNraXBTZXF1ZW5jZTtcbiAgfVxuXG5cbiAgZnVuY3Rpb24gY29uY2F0RmFjdG9yeShpdGVyYWJsZSwgdmFsdWVzKSB7XG4gICAgdmFyIGlzS2V5ZWRJdGVyYWJsZSA9IGlzS2V5ZWQoaXRlcmFibGUpO1xuICAgIHZhciBpdGVycyA9IFtpdGVyYWJsZV0uY29uY2F0KHZhbHVlcykubWFwKGZ1bmN0aW9uKHYgKSB7XG4gICAgICBpZiAoIWlzSXRlcmFibGUodikpIHtcbiAgICAgICAgdiA9IGlzS2V5ZWRJdGVyYWJsZSA/XG4gICAgICAgICAga2V5ZWRTZXFGcm9tVmFsdWUodikgOlxuICAgICAgICAgIGluZGV4ZWRTZXFGcm9tVmFsdWUoQXJyYXkuaXNBcnJheSh2KSA/IHYgOiBbdl0pO1xuICAgICAgfSBlbHNlIGlmIChpc0tleWVkSXRlcmFibGUpIHtcbiAgICAgICAgdiA9IEtleWVkSXRlcmFibGUodik7XG4gICAgICB9XG4gICAgICByZXR1cm4gdjtcbiAgICB9KS5maWx0ZXIoZnVuY3Rpb24odiApIHtyZXR1cm4gdi5zaXplICE9PSAwfSk7XG5cbiAgICBpZiAoaXRlcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gaXRlcmFibGU7XG4gICAgfVxuXG4gICAgaWYgKGl0ZXJzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgdmFyIHNpbmdsZXRvbiA9IGl0ZXJzWzBdO1xuICAgICAgaWYgKHNpbmdsZXRvbiA9PT0gaXRlcmFibGUgfHxcbiAgICAgICAgICBpc0tleWVkSXRlcmFibGUgJiYgaXNLZXllZChzaW5nbGV0b24pIHx8XG4gICAgICAgICAgaXNJbmRleGVkKGl0ZXJhYmxlKSAmJiBpc0luZGV4ZWQoc2luZ2xldG9uKSkge1xuICAgICAgICByZXR1cm4gc2luZ2xldG9uO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBjb25jYXRTZXEgPSBuZXcgQXJyYXlTZXEoaXRlcnMpO1xuICAgIGlmIChpc0tleWVkSXRlcmFibGUpIHtcbiAgICAgIGNvbmNhdFNlcSA9IGNvbmNhdFNlcS50b0tleWVkU2VxKCk7XG4gICAgfSBlbHNlIGlmICghaXNJbmRleGVkKGl0ZXJhYmxlKSkge1xuICAgICAgY29uY2F0U2VxID0gY29uY2F0U2VxLnRvU2V0U2VxKCk7XG4gICAgfVxuICAgIGNvbmNhdFNlcSA9IGNvbmNhdFNlcS5mbGF0dGVuKHRydWUpO1xuICAgIGNvbmNhdFNlcS5zaXplID0gaXRlcnMucmVkdWNlKFxuICAgICAgZnVuY3Rpb24oc3VtLCBzZXEpICB7XG4gICAgICAgIGlmIChzdW0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHZhciBzaXplID0gc2VxLnNpemU7XG4gICAgICAgICAgaWYgKHNpemUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHN1bSArIHNpemU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgMFxuICAgICk7XG4gICAgcmV0dXJuIGNvbmNhdFNlcTtcbiAgfVxuXG5cbiAgZnVuY3Rpb24gZmxhdHRlbkZhY3RvcnkoaXRlcmFibGUsIGRlcHRoLCB1c2VLZXlzKSB7XG4gICAgdmFyIGZsYXRTZXF1ZW5jZSA9IG1ha2VTZXF1ZW5jZShpdGVyYWJsZSk7XG4gICAgZmxhdFNlcXVlbmNlLl9faXRlcmF0ZVVuY2FjaGVkID0gZnVuY3Rpb24oZm4sIHJldmVyc2UpIHtcbiAgICAgIHZhciBpdGVyYXRpb25zID0gMDtcbiAgICAgIHZhciBzdG9wcGVkID0gZmFsc2U7XG4gICAgICBmdW5jdGlvbiBmbGF0RGVlcChpdGVyLCBjdXJyZW50RGVwdGgpIHt2YXIgdGhpcyQwID0gdGhpcztcbiAgICAgICAgaXRlci5fX2l0ZXJhdGUoZnVuY3Rpb24odiwgaykgIHtcbiAgICAgICAgICBpZiAoKCFkZXB0aCB8fCBjdXJyZW50RGVwdGggPCBkZXB0aCkgJiYgaXNJdGVyYWJsZSh2KSkge1xuICAgICAgICAgICAgZmxhdERlZXAodiwgY3VycmVudERlcHRoICsgMSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChmbih2LCB1c2VLZXlzID8gayA6IGl0ZXJhdGlvbnMrKywgdGhpcyQwKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHN0b3BwZWQgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gIXN0b3BwZWQ7XG4gICAgICAgIH0sIHJldmVyc2UpO1xuICAgICAgfVxuICAgICAgZmxhdERlZXAoaXRlcmFibGUsIDApO1xuICAgICAgcmV0dXJuIGl0ZXJhdGlvbnM7XG4gICAgfVxuICAgIGZsYXRTZXF1ZW5jZS5fX2l0ZXJhdG9yVW5jYWNoZWQgPSBmdW5jdGlvbih0eXBlLCByZXZlcnNlKSB7XG4gICAgICB2YXIgaXRlcmF0b3IgPSBpdGVyYWJsZS5fX2l0ZXJhdG9yKHR5cGUsIHJldmVyc2UpO1xuICAgICAgdmFyIHN0YWNrID0gW107XG4gICAgICB2YXIgaXRlcmF0aW9ucyA9IDA7XG4gICAgICByZXR1cm4gbmV3IEl0ZXJhdG9yKGZ1bmN0aW9uKCkgIHtcbiAgICAgICAgd2hpbGUgKGl0ZXJhdG9yKSB7XG4gICAgICAgICAgdmFyIHN0ZXAgPSBpdGVyYXRvci5uZXh0KCk7XG4gICAgICAgICAgaWYgKHN0ZXAuZG9uZSAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGl0ZXJhdG9yID0gc3RhY2sucG9wKCk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFyIHYgPSBzdGVwLnZhbHVlO1xuICAgICAgICAgIGlmICh0eXBlID09PSBJVEVSQVRFX0VOVFJJRVMpIHtcbiAgICAgICAgICAgIHYgPSB2WzFdO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoKCFkZXB0aCB8fCBzdGFjay5sZW5ndGggPCBkZXB0aCkgJiYgaXNJdGVyYWJsZSh2KSkge1xuICAgICAgICAgICAgc3RhY2sucHVzaChpdGVyYXRvcik7XG4gICAgICAgICAgICBpdGVyYXRvciA9IHYuX19pdGVyYXRvcih0eXBlLCByZXZlcnNlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHVzZUtleXMgPyBzdGVwIDogaXRlcmF0b3JWYWx1ZSh0eXBlLCBpdGVyYXRpb25zKyssIHYsIHN0ZXApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXRlcmF0b3JEb25lKCk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGZsYXRTZXF1ZW5jZTtcbiAgfVxuXG5cbiAgZnVuY3Rpb24gZmxhdE1hcEZhY3RvcnkoaXRlcmFibGUsIG1hcHBlciwgY29udGV4dCkge1xuICAgIHZhciBjb2VyY2UgPSBpdGVyYWJsZUNsYXNzKGl0ZXJhYmxlKTtcbiAgICByZXR1cm4gaXRlcmFibGUudG9TZXEoKS5tYXAoXG4gICAgICBmdW5jdGlvbih2LCBrKSAge3JldHVybiBjb2VyY2UobWFwcGVyLmNhbGwoY29udGV4dCwgdiwgaywgaXRlcmFibGUpKX1cbiAgICApLmZsYXR0ZW4odHJ1ZSk7XG4gIH1cblxuXG4gIGZ1bmN0aW9uIGludGVycG9zZUZhY3RvcnkoaXRlcmFibGUsIHNlcGFyYXRvcikge1xuICAgIHZhciBpbnRlcnBvc2VkU2VxdWVuY2UgPSBtYWtlU2VxdWVuY2UoaXRlcmFibGUpO1xuICAgIGludGVycG9zZWRTZXF1ZW5jZS5zaXplID0gaXRlcmFibGUuc2l6ZSAmJiBpdGVyYWJsZS5zaXplICogMiAtMTtcbiAgICBpbnRlcnBvc2VkU2VxdWVuY2UuX19pdGVyYXRlVW5jYWNoZWQgPSBmdW5jdGlvbihmbiwgcmV2ZXJzZSkge3ZhciB0aGlzJDAgPSB0aGlzO1xuICAgICAgdmFyIGl0ZXJhdGlvbnMgPSAwO1xuICAgICAgaXRlcmFibGUuX19pdGVyYXRlKGZ1bmN0aW9uKHYsIGspIFxuICAgICAgICB7cmV0dXJuICghaXRlcmF0aW9ucyB8fCBmbihzZXBhcmF0b3IsIGl0ZXJhdGlvbnMrKywgdGhpcyQwKSAhPT0gZmFsc2UpICYmXG4gICAgICAgIGZuKHYsIGl0ZXJhdGlvbnMrKywgdGhpcyQwKSAhPT0gZmFsc2V9LFxuICAgICAgICByZXZlcnNlXG4gICAgICApO1xuICAgICAgcmV0dXJuIGl0ZXJhdGlvbnM7XG4gICAgfTtcbiAgICBpbnRlcnBvc2VkU2VxdWVuY2UuX19pdGVyYXRvclVuY2FjaGVkID0gZnVuY3Rpb24odHlwZSwgcmV2ZXJzZSkge1xuICAgICAgdmFyIGl0ZXJhdG9yID0gaXRlcmFibGUuX19pdGVyYXRvcihJVEVSQVRFX1ZBTFVFUywgcmV2ZXJzZSk7XG4gICAgICB2YXIgaXRlcmF0aW9ucyA9IDA7XG4gICAgICB2YXIgc3RlcDtcbiAgICAgIHJldHVybiBuZXcgSXRlcmF0b3IoZnVuY3Rpb24oKSAge1xuICAgICAgICBpZiAoIXN0ZXAgfHwgaXRlcmF0aW9ucyAlIDIpIHtcbiAgICAgICAgICBzdGVwID0gaXRlcmF0b3IubmV4dCgpO1xuICAgICAgICAgIGlmIChzdGVwLmRvbmUpIHtcbiAgICAgICAgICAgIHJldHVybiBzdGVwO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXRlcmF0aW9ucyAlIDIgP1xuICAgICAgICAgIGl0ZXJhdG9yVmFsdWUodHlwZSwgaXRlcmF0aW9ucysrLCBzZXBhcmF0b3IpIDpcbiAgICAgICAgICBpdGVyYXRvclZhbHVlKHR5cGUsIGl0ZXJhdGlvbnMrKywgc3RlcC52YWx1ZSwgc3RlcCk7XG4gICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBpbnRlcnBvc2VkU2VxdWVuY2U7XG4gIH1cblxuXG4gIGZ1bmN0aW9uIHNvcnRGYWN0b3J5KGl0ZXJhYmxlLCBjb21wYXJhdG9yLCBtYXBwZXIpIHtcbiAgICBpZiAoIWNvbXBhcmF0b3IpIHtcbiAgICAgIGNvbXBhcmF0b3IgPSBkZWZhdWx0Q29tcGFyYXRvcjtcbiAgICB9XG4gICAgdmFyIGlzS2V5ZWRJdGVyYWJsZSA9IGlzS2V5ZWQoaXRlcmFibGUpO1xuICAgIHZhciBpbmRleCA9IDA7XG4gICAgdmFyIGVudHJpZXMgPSBpdGVyYWJsZS50b1NlcSgpLm1hcChcbiAgICAgIGZ1bmN0aW9uKHYsIGspICB7cmV0dXJuIFtrLCB2LCBpbmRleCsrLCBtYXBwZXIgPyBtYXBwZXIodiwgaywgaXRlcmFibGUpIDogdl19XG4gICAgKS50b0FycmF5KCk7XG4gICAgZW50cmllcy5zb3J0KGZ1bmN0aW9uKGEsIGIpICB7cmV0dXJuIGNvbXBhcmF0b3IoYVszXSwgYlszXSkgfHwgYVsyXSAtIGJbMl19KS5mb3JFYWNoKFxuICAgICAgaXNLZXllZEl0ZXJhYmxlID9cbiAgICAgIGZ1bmN0aW9uKHYsIGkpICB7IGVudHJpZXNbaV0ubGVuZ3RoID0gMjsgfSA6XG4gICAgICBmdW5jdGlvbih2LCBpKSAgeyBlbnRyaWVzW2ldID0gdlsxXTsgfVxuICAgICk7XG4gICAgcmV0dXJuIGlzS2V5ZWRJdGVyYWJsZSA/IEtleWVkU2VxKGVudHJpZXMpIDpcbiAgICAgIGlzSW5kZXhlZChpdGVyYWJsZSkgPyBJbmRleGVkU2VxKGVudHJpZXMpIDpcbiAgICAgIFNldFNlcShlbnRyaWVzKTtcbiAgfVxuXG5cbiAgZnVuY3Rpb24gbWF4RmFjdG9yeShpdGVyYWJsZSwgY29tcGFyYXRvciwgbWFwcGVyKSB7XG4gICAgaWYgKCFjb21wYXJhdG9yKSB7XG4gICAgICBjb21wYXJhdG9yID0gZGVmYXVsdENvbXBhcmF0b3I7XG4gICAgfVxuICAgIGlmIChtYXBwZXIpIHtcbiAgICAgIHZhciBlbnRyeSA9IGl0ZXJhYmxlLnRvU2VxKClcbiAgICAgICAgLm1hcChmdW5jdGlvbih2LCBrKSAge3JldHVybiBbdiwgbWFwcGVyKHYsIGssIGl0ZXJhYmxlKV19KVxuICAgICAgICAucmVkdWNlKGZ1bmN0aW9uKGEsIGIpICB7cmV0dXJuIG1heENvbXBhcmUoY29tcGFyYXRvciwgYVsxXSwgYlsxXSkgPyBiIDogYX0pO1xuICAgICAgcmV0dXJuIGVudHJ5ICYmIGVudHJ5WzBdO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gaXRlcmFibGUucmVkdWNlKGZ1bmN0aW9uKGEsIGIpICB7cmV0dXJuIG1heENvbXBhcmUoY29tcGFyYXRvciwgYSwgYikgPyBiIDogYX0pO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG1heENvbXBhcmUoY29tcGFyYXRvciwgYSwgYikge1xuICAgIHZhciBjb21wID0gY29tcGFyYXRvcihiLCBhKTtcbiAgICAvLyBiIGlzIGNvbnNpZGVyZWQgdGhlIG5ldyBtYXggaWYgdGhlIGNvbXBhcmF0b3IgZGVjbGFyZXMgdGhlbSBlcXVhbCwgYnV0XG4gICAgLy8gdGhleSBhcmUgbm90IGVxdWFsIGFuZCBiIGlzIGluIGZhY3QgYSBudWxsaXNoIHZhbHVlLlxuICAgIHJldHVybiAoY29tcCA9PT0gMCAmJiBiICE9PSBhICYmIChiID09PSB1bmRlZmluZWQgfHwgYiA9PT0gbnVsbCB8fCBiICE9PSBiKSkgfHwgY29tcCA+IDA7XG4gIH1cblxuXG4gIGZ1bmN0aW9uIHppcFdpdGhGYWN0b3J5KGtleUl0ZXIsIHppcHBlciwgaXRlcnMpIHtcbiAgICB2YXIgemlwU2VxdWVuY2UgPSBtYWtlU2VxdWVuY2Uoa2V5SXRlcik7XG4gICAgemlwU2VxdWVuY2Uuc2l6ZSA9IG5ldyBBcnJheVNlcShpdGVycykubWFwKGZ1bmN0aW9uKGkgKSB7cmV0dXJuIGkuc2l6ZX0pLm1pbigpO1xuICAgIC8vIE5vdGU6IHRoaXMgYSBnZW5lcmljIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgX19pdGVyYXRlIGluIHRlcm1zIG9mXG4gICAgLy8gX19pdGVyYXRvciB3aGljaCBtYXkgYmUgbW9yZSBnZW5lcmljYWxseSB1c2VmdWwgaW4gdGhlIGZ1dHVyZS5cbiAgICB6aXBTZXF1ZW5jZS5fX2l0ZXJhdGUgPSBmdW5jdGlvbihmbiwgcmV2ZXJzZSkge1xuICAgICAgLyogZ2VuZXJpYzpcbiAgICAgIHZhciBpdGVyYXRvciA9IHRoaXMuX19pdGVyYXRvcihJVEVSQVRFX0VOVFJJRVMsIHJldmVyc2UpO1xuICAgICAgdmFyIHN0ZXA7XG4gICAgICB2YXIgaXRlcmF0aW9ucyA9IDA7XG4gICAgICB3aGlsZSAoIShzdGVwID0gaXRlcmF0b3IubmV4dCgpKS5kb25lKSB7XG4gICAgICAgIGl0ZXJhdGlvbnMrKztcbiAgICAgICAgaWYgKGZuKHN0ZXAudmFsdWVbMV0sIHN0ZXAudmFsdWVbMF0sIHRoaXMpID09PSBmYWxzZSkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gaXRlcmF0aW9ucztcbiAgICAgICovXG4gICAgICAvLyBpbmRleGVkOlxuICAgICAgdmFyIGl0ZXJhdG9yID0gdGhpcy5fX2l0ZXJhdG9yKElURVJBVEVfVkFMVUVTLCByZXZlcnNlKTtcbiAgICAgIHZhciBzdGVwO1xuICAgICAgdmFyIGl0ZXJhdGlvbnMgPSAwO1xuICAgICAgd2hpbGUgKCEoc3RlcCA9IGl0ZXJhdG9yLm5leHQoKSkuZG9uZSkge1xuICAgICAgICBpZiAoZm4oc3RlcC52YWx1ZSwgaXRlcmF0aW9ucysrLCB0aGlzKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGl0ZXJhdGlvbnM7XG4gICAgfTtcbiAgICB6aXBTZXF1ZW5jZS5fX2l0ZXJhdG9yVW5jYWNoZWQgPSBmdW5jdGlvbih0eXBlLCByZXZlcnNlKSB7XG4gICAgICB2YXIgaXRlcmF0b3JzID0gaXRlcnMubWFwKGZ1bmN0aW9uKGkgKVxuICAgICAgICB7cmV0dXJuIChpID0gSXRlcmFibGUoaSksIGdldEl0ZXJhdG9yKHJldmVyc2UgPyBpLnJldmVyc2UoKSA6IGkpKX1cbiAgICAgICk7XG4gICAgICB2YXIgaXRlcmF0aW9ucyA9IDA7XG4gICAgICB2YXIgaXNEb25lID0gZmFsc2U7XG4gICAgICByZXR1cm4gbmV3IEl0ZXJhdG9yKGZ1bmN0aW9uKCkgIHtcbiAgICAgICAgdmFyIHN0ZXBzO1xuICAgICAgICBpZiAoIWlzRG9uZSkge1xuICAgICAgICAgIHN0ZXBzID0gaXRlcmF0b3JzLm1hcChmdW5jdGlvbihpICkge3JldHVybiBpLm5leHQoKX0pO1xuICAgICAgICAgIGlzRG9uZSA9IHN0ZXBzLnNvbWUoZnVuY3Rpb24ocyApIHtyZXR1cm4gcy5kb25lfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzRG9uZSkge1xuICAgICAgICAgIHJldHVybiBpdGVyYXRvckRvbmUoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXRlcmF0b3JWYWx1ZShcbiAgICAgICAgICB0eXBlLFxuICAgICAgICAgIGl0ZXJhdGlvbnMrKyxcbiAgICAgICAgICB6aXBwZXIuYXBwbHkobnVsbCwgc3RlcHMubWFwKGZ1bmN0aW9uKHMgKSB7cmV0dXJuIHMudmFsdWV9KSlcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIHppcFNlcXVlbmNlXG4gIH1cblxuXG4gIC8vICNwcmFnbWEgSGVscGVyIEZ1bmN0aW9uc1xuXG4gIGZ1bmN0aW9uIHJlaWZ5KGl0ZXIsIHNlcSkge1xuICAgIHJldHVybiBpc1NlcShpdGVyKSA/IHNlcSA6IGl0ZXIuY29uc3RydWN0b3Ioc2VxKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHZhbGlkYXRlRW50cnkoZW50cnkpIHtcbiAgICBpZiAoZW50cnkgIT09IE9iamVjdChlbnRyeSkpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIFtLLCBWXSB0dXBsZTogJyArIGVudHJ5KTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZXNvbHZlU2l6ZShpdGVyKSB7XG4gICAgYXNzZXJ0Tm90SW5maW5pdGUoaXRlci5zaXplKTtcbiAgICByZXR1cm4gZW5zdXJlU2l6ZShpdGVyKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGl0ZXJhYmxlQ2xhc3MoaXRlcmFibGUpIHtcbiAgICByZXR1cm4gaXNLZXllZChpdGVyYWJsZSkgPyBLZXllZEl0ZXJhYmxlIDpcbiAgICAgIGlzSW5kZXhlZChpdGVyYWJsZSkgPyBJbmRleGVkSXRlcmFibGUgOlxuICAgICAgU2V0SXRlcmFibGU7XG4gIH1cblxuICBmdW5jdGlvbiBtYWtlU2VxdWVuY2UoaXRlcmFibGUpIHtcbiAgICByZXR1cm4gT2JqZWN0LmNyZWF0ZShcbiAgICAgIChcbiAgICAgICAgaXNLZXllZChpdGVyYWJsZSkgPyBLZXllZFNlcSA6XG4gICAgICAgIGlzSW5kZXhlZChpdGVyYWJsZSkgPyBJbmRleGVkU2VxIDpcbiAgICAgICAgU2V0U2VxXG4gICAgICApLnByb3RvdHlwZVxuICAgICk7XG4gIH1cblxuICBmdW5jdGlvbiBjYWNoZVJlc3VsdFRocm91Z2goKSB7XG4gICAgaWYgKHRoaXMuX2l0ZXIuY2FjaGVSZXN1bHQpIHtcbiAgICAgIHRoaXMuX2l0ZXIuY2FjaGVSZXN1bHQoKTtcbiAgICAgIHRoaXMuc2l6ZSA9IHRoaXMuX2l0ZXIuc2l6ZTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gU2VxLnByb3RvdHlwZS5jYWNoZVJlc3VsdC5jYWxsKHRoaXMpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGRlZmF1bHRDb21wYXJhdG9yKGEsIGIpIHtcbiAgICByZXR1cm4gYSA+IGIgPyAxIDogYSA8IGIgPyAtMSA6IDA7XG4gIH1cblxuICBmdW5jdGlvbiBmb3JjZUl0ZXJhdG9yKGtleVBhdGgpIHtcbiAgICB2YXIgaXRlciA9IGdldEl0ZXJhdG9yKGtleVBhdGgpO1xuICAgIGlmICghaXRlcikge1xuICAgICAgLy8gQXJyYXkgbWlnaHQgbm90IGJlIGl0ZXJhYmxlIGluIHRoaXMgZW52aXJvbm1lbnQsIHNvIHdlIG5lZWQgYSBmYWxsYmFja1xuICAgICAgLy8gdG8gb3VyIHdyYXBwZWQgdHlwZS5cbiAgICAgIGlmICghaXNBcnJheUxpa2Uoa2V5UGF0aCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgaXRlcmFibGUgb3IgYXJyYXktbGlrZTogJyArIGtleVBhdGgpO1xuICAgICAgfVxuICAgICAgaXRlciA9IGdldEl0ZXJhdG9yKEl0ZXJhYmxlKGtleVBhdGgpKTtcbiAgICB9XG4gICAgcmV0dXJuIGl0ZXI7XG4gIH1cblxuICBjcmVhdGVDbGFzcyhSZWNvcmQsIEtleWVkQ29sbGVjdGlvbik7XG5cbiAgICBmdW5jdGlvbiBSZWNvcmQoZGVmYXVsdFZhbHVlcywgbmFtZSkge1xuICAgICAgdmFyIGhhc0luaXRpYWxpemVkO1xuXG4gICAgICB2YXIgUmVjb3JkVHlwZSA9IGZ1bmN0aW9uIFJlY29yZCh2YWx1ZXMpIHtcbiAgICAgICAgaWYgKHZhbHVlcyBpbnN0YW5jZW9mIFJlY29yZFR5cGUpIHtcbiAgICAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgICAgICB9XG4gICAgICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBSZWNvcmRUeXBlKSkge1xuICAgICAgICAgIHJldHVybiBuZXcgUmVjb3JkVHlwZSh2YWx1ZXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaGFzSW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICBoYXNJbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhkZWZhdWx0VmFsdWVzKTtcbiAgICAgICAgICBzZXRQcm9wcyhSZWNvcmRUeXBlUHJvdG90eXBlLCBrZXlzKTtcbiAgICAgICAgICBSZWNvcmRUeXBlUHJvdG90eXBlLnNpemUgPSBrZXlzLmxlbmd0aDtcbiAgICAgICAgICBSZWNvcmRUeXBlUHJvdG90eXBlLl9uYW1lID0gbmFtZTtcbiAgICAgICAgICBSZWNvcmRUeXBlUHJvdG90eXBlLl9rZXlzID0ga2V5cztcbiAgICAgICAgICBSZWNvcmRUeXBlUHJvdG90eXBlLl9kZWZhdWx0VmFsdWVzID0gZGVmYXVsdFZhbHVlcztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9tYXAgPSBNYXAodmFsdWVzKTtcbiAgICAgIH07XG5cbiAgICAgIHZhciBSZWNvcmRUeXBlUHJvdG90eXBlID0gUmVjb3JkVHlwZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFJlY29yZFByb3RvdHlwZSk7XG4gICAgICBSZWNvcmRUeXBlUHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUmVjb3JkVHlwZTtcblxuICAgICAgcmV0dXJuIFJlY29yZFR5cGU7XG4gICAgfVxuXG4gICAgUmVjb3JkLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX190b1N0cmluZyhyZWNvcmROYW1lKHRoaXMpICsgJyB7JywgJ30nKTtcbiAgICB9O1xuXG4gICAgLy8gQHByYWdtYSBBY2Nlc3NcblxuICAgIFJlY29yZC5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24oaykge1xuICAgICAgcmV0dXJuIHRoaXMuX2RlZmF1bHRWYWx1ZXMuaGFzT3duUHJvcGVydHkoayk7XG4gICAgfTtcblxuICAgIFJlY29yZC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24oaywgbm90U2V0VmFsdWUpIHtcbiAgICAgIGlmICghdGhpcy5oYXMoaykpIHtcbiAgICAgICAgcmV0dXJuIG5vdFNldFZhbHVlO1xuICAgICAgfVxuICAgICAgdmFyIGRlZmF1bHRWYWwgPSB0aGlzLl9kZWZhdWx0VmFsdWVzW2tdO1xuICAgICAgcmV0dXJuIHRoaXMuX21hcCA/IHRoaXMuX21hcC5nZXQoaywgZGVmYXVsdFZhbCkgOiBkZWZhdWx0VmFsO1xuICAgIH07XG5cbiAgICAvLyBAcHJhZ21hIE1vZGlmaWNhdGlvblxuXG4gICAgUmVjb3JkLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHRoaXMuX19vd25lcklEKSB7XG4gICAgICAgIHRoaXMuX21hcCAmJiB0aGlzLl9tYXAuY2xlYXIoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgICB2YXIgUmVjb3JkVHlwZSA9IHRoaXMuY29uc3RydWN0b3I7XG4gICAgICByZXR1cm4gUmVjb3JkVHlwZS5fZW1wdHkgfHwgKFJlY29yZFR5cGUuX2VtcHR5ID0gbWFrZVJlY29yZCh0aGlzLCBlbXB0eU1hcCgpKSk7XG4gICAgfTtcblxuICAgIFJlY29yZC5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24oaywgdikge1xuICAgICAgaWYgKCF0aGlzLmhhcyhrKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBzZXQgdW5rbm93biBrZXkgXCInICsgayArICdcIiBvbiAnICsgcmVjb3JkTmFtZSh0aGlzKSk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5fbWFwICYmICF0aGlzLl9tYXAuaGFzKGspKSB7XG4gICAgICAgIHZhciBkZWZhdWx0VmFsID0gdGhpcy5fZGVmYXVsdFZhbHVlc1trXTtcbiAgICAgICAgaWYgKHYgPT09IGRlZmF1bHRWYWwpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdmFyIG5ld01hcCA9IHRoaXMuX21hcCAmJiB0aGlzLl9tYXAuc2V0KGssIHYpO1xuICAgICAgaWYgKHRoaXMuX19vd25lcklEIHx8IG5ld01hcCA9PT0gdGhpcy5fbWFwKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG1ha2VSZWNvcmQodGhpcywgbmV3TWFwKTtcbiAgICB9O1xuXG4gICAgUmVjb3JkLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbihrKSB7XG4gICAgICBpZiAoIXRoaXMuaGFzKGspKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgICAgdmFyIG5ld01hcCA9IHRoaXMuX21hcCAmJiB0aGlzLl9tYXAucmVtb3ZlKGspO1xuICAgICAgaWYgKHRoaXMuX19vd25lcklEIHx8IG5ld01hcCA9PT0gdGhpcy5fbWFwKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG1ha2VSZWNvcmQodGhpcywgbmV3TWFwKTtcbiAgICB9O1xuXG4gICAgUmVjb3JkLnByb3RvdHlwZS53YXNBbHRlcmVkID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5fbWFwLndhc0FsdGVyZWQoKTtcbiAgICB9O1xuXG4gICAgUmVjb3JkLnByb3RvdHlwZS5fX2l0ZXJhdG9yID0gZnVuY3Rpb24odHlwZSwgcmV2ZXJzZSkge3ZhciB0aGlzJDAgPSB0aGlzO1xuICAgICAgcmV0dXJuIEtleWVkSXRlcmFibGUodGhpcy5fZGVmYXVsdFZhbHVlcykubWFwKGZ1bmN0aW9uKF8sIGspICB7cmV0dXJuIHRoaXMkMC5nZXQoayl9KS5fX2l0ZXJhdG9yKHR5cGUsIHJldmVyc2UpO1xuICAgIH07XG5cbiAgICBSZWNvcmQucHJvdG90eXBlLl9faXRlcmF0ZSA9IGZ1bmN0aW9uKGZuLCByZXZlcnNlKSB7dmFyIHRoaXMkMCA9IHRoaXM7XG4gICAgICByZXR1cm4gS2V5ZWRJdGVyYWJsZSh0aGlzLl9kZWZhdWx0VmFsdWVzKS5tYXAoZnVuY3Rpb24oXywgaykgIHtyZXR1cm4gdGhpcyQwLmdldChrKX0pLl9faXRlcmF0ZShmbiwgcmV2ZXJzZSk7XG4gICAgfTtcblxuICAgIFJlY29yZC5wcm90b3R5cGUuX19lbnN1cmVPd25lciA9IGZ1bmN0aW9uKG93bmVySUQpIHtcbiAgICAgIGlmIChvd25lcklEID09PSB0aGlzLl9fb3duZXJJRCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICAgIHZhciBuZXdNYXAgPSB0aGlzLl9tYXAgJiYgdGhpcy5fbWFwLl9fZW5zdXJlT3duZXIob3duZXJJRCk7XG4gICAgICBpZiAoIW93bmVySUQpIHtcbiAgICAgICAgdGhpcy5fX293bmVySUQgPSBvd25lcklEO1xuICAgICAgICB0aGlzLl9tYXAgPSBuZXdNYXA7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG1ha2VSZWNvcmQodGhpcywgbmV3TWFwLCBvd25lcklEKTtcbiAgICB9O1xuXG5cbiAgdmFyIFJlY29yZFByb3RvdHlwZSA9IFJlY29yZC5wcm90b3R5cGU7XG4gIFJlY29yZFByb3RvdHlwZVtERUxFVEVdID0gUmVjb3JkUHJvdG90eXBlLnJlbW92ZTtcbiAgUmVjb3JkUHJvdG90eXBlLmRlbGV0ZUluID1cbiAgUmVjb3JkUHJvdG90eXBlLnJlbW92ZUluID0gTWFwUHJvdG90eXBlLnJlbW92ZUluO1xuICBSZWNvcmRQcm90b3R5cGUubWVyZ2UgPSBNYXBQcm90b3R5cGUubWVyZ2U7XG4gIFJlY29yZFByb3RvdHlwZS5tZXJnZVdpdGggPSBNYXBQcm90b3R5cGUubWVyZ2VXaXRoO1xuICBSZWNvcmRQcm90b3R5cGUubWVyZ2VJbiA9IE1hcFByb3RvdHlwZS5tZXJnZUluO1xuICBSZWNvcmRQcm90b3R5cGUubWVyZ2VEZWVwID0gTWFwUHJvdG90eXBlLm1lcmdlRGVlcDtcbiAgUmVjb3JkUHJvdG90eXBlLm1lcmdlRGVlcFdpdGggPSBNYXBQcm90b3R5cGUubWVyZ2VEZWVwV2l0aDtcbiAgUmVjb3JkUHJvdG90eXBlLm1lcmdlRGVlcEluID0gTWFwUHJvdG90eXBlLm1lcmdlRGVlcEluO1xuICBSZWNvcmRQcm90b3R5cGUuc2V0SW4gPSBNYXBQcm90b3R5cGUuc2V0SW47XG4gIFJlY29yZFByb3RvdHlwZS51cGRhdGUgPSBNYXBQcm90b3R5cGUudXBkYXRlO1xuICBSZWNvcmRQcm90b3R5cGUudXBkYXRlSW4gPSBNYXBQcm90b3R5cGUudXBkYXRlSW47XG4gIFJlY29yZFByb3RvdHlwZS53aXRoTXV0YXRpb25zID0gTWFwUHJvdG90eXBlLndpdGhNdXRhdGlvbnM7XG4gIFJlY29yZFByb3RvdHlwZS5hc011dGFibGUgPSBNYXBQcm90b3R5cGUuYXNNdXRhYmxlO1xuICBSZWNvcmRQcm90b3R5cGUuYXNJbW11dGFibGUgPSBNYXBQcm90b3R5cGUuYXNJbW11dGFibGU7XG5cblxuICBmdW5jdGlvbiBtYWtlUmVjb3JkKGxpa2VSZWNvcmQsIG1hcCwgb3duZXJJRCkge1xuICAgIHZhciByZWNvcmQgPSBPYmplY3QuY3JlYXRlKE9iamVjdC5nZXRQcm90b3R5cGVPZihsaWtlUmVjb3JkKSk7XG4gICAgcmVjb3JkLl9tYXAgPSBtYXA7XG4gICAgcmVjb3JkLl9fb3duZXJJRCA9IG93bmVySUQ7XG4gICAgcmV0dXJuIHJlY29yZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlY29yZE5hbWUocmVjb3JkKSB7XG4gICAgcmV0dXJuIHJlY29yZC5fbmFtZSB8fCByZWNvcmQuY29uc3RydWN0b3IubmFtZSB8fCAnUmVjb3JkJztcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldFByb3BzKHByb3RvdHlwZSwgbmFtZXMpIHtcbiAgICB0cnkge1xuICAgICAgbmFtZXMuZm9yRWFjaChzZXRQcm9wLmJpbmQodW5kZWZpbmVkLCBwcm90b3R5cGUpKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gT2JqZWN0LmRlZmluZVByb3BlcnR5IGZhaWxlZC4gUHJvYmFibHkgSUU4LlxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNldFByb3AocHJvdG90eXBlLCBuYW1lKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHByb3RvdHlwZSwgbmFtZSwge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KG5hbWUpO1xuICAgICAgfSxcbiAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgaW52YXJpYW50KHRoaXMuX19vd25lcklELCAnQ2Fubm90IHNldCBvbiBhbiBpbW11dGFibGUgcmVjb3JkLicpO1xuICAgICAgICB0aGlzLnNldChuYW1lLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBjcmVhdGVDbGFzcyhTZXQsIFNldENvbGxlY3Rpb24pO1xuXG4gICAgLy8gQHByYWdtYSBDb25zdHJ1Y3Rpb25cblxuICAgIGZ1bmN0aW9uIFNldCh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQgPyBlbXB0eVNldCgpIDpcbiAgICAgICAgaXNTZXQodmFsdWUpICYmICFpc09yZGVyZWQodmFsdWUpID8gdmFsdWUgOlxuICAgICAgICBlbXB0eVNldCgpLndpdGhNdXRhdGlvbnMoZnVuY3Rpb24oc2V0ICkge1xuICAgICAgICAgIHZhciBpdGVyID0gU2V0SXRlcmFibGUodmFsdWUpO1xuICAgICAgICAgIGFzc2VydE5vdEluZmluaXRlKGl0ZXIuc2l6ZSk7XG4gICAgICAgICAgaXRlci5mb3JFYWNoKGZ1bmN0aW9uKHYgKSB7cmV0dXJuIHNldC5hZGQodil9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgU2V0Lm9mID0gZnVuY3Rpb24oLyouLi52YWx1ZXMqLykge1xuICAgICAgcmV0dXJuIHRoaXMoYXJndW1lbnRzKTtcbiAgICB9O1xuXG4gICAgU2V0LmZyb21LZXlzID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzKEtleWVkSXRlcmFibGUodmFsdWUpLmtleVNlcSgpKTtcbiAgICB9O1xuXG4gICAgU2V0LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX190b1N0cmluZygnU2V0IHsnLCAnfScpO1xuICAgIH07XG5cbiAgICAvLyBAcHJhZ21hIEFjY2Vzc1xuXG4gICAgU2V0LnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMuX21hcC5oYXModmFsdWUpO1xuICAgIH07XG5cbiAgICAvLyBAcHJhZ21hIE1vZGlmaWNhdGlvblxuXG4gICAgU2V0LnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIHVwZGF0ZVNldCh0aGlzLCB0aGlzLl9tYXAuc2V0KHZhbHVlLCB0cnVlKSk7XG4gICAgfTtcblxuICAgIFNldC5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiB1cGRhdGVTZXQodGhpcywgdGhpcy5fbWFwLnJlbW92ZSh2YWx1ZSkpO1xuICAgIH07XG5cbiAgICBTZXQucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdXBkYXRlU2V0KHRoaXMsIHRoaXMuX21hcC5jbGVhcigpKTtcbiAgICB9O1xuXG4gICAgLy8gQHByYWdtYSBDb21wb3NpdGlvblxuXG4gICAgU2V0LnByb3RvdHlwZS51bmlvbiA9IGZ1bmN0aW9uKCkge3ZhciBpdGVycyA9IFNMSUNFJDAuY2FsbChhcmd1bWVudHMsIDApO1xuICAgICAgaXRlcnMgPSBpdGVycy5maWx0ZXIoZnVuY3Rpb24oeCApIHtyZXR1cm4geC5zaXplICE9PSAwfSk7XG4gICAgICBpZiAoaXRlcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuc2l6ZSA9PT0gMCAmJiAhdGhpcy5fX293bmVySUQgJiYgaXRlcnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yKGl0ZXJzWzBdKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLndpdGhNdXRhdGlvbnMoZnVuY3Rpb24oc2V0ICkge1xuICAgICAgICBmb3IgKHZhciBpaSA9IDA7IGlpIDwgaXRlcnMubGVuZ3RoOyBpaSsrKSB7XG4gICAgICAgICAgU2V0SXRlcmFibGUoaXRlcnNbaWldKS5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlICkge3JldHVybiBzZXQuYWRkKHZhbHVlKX0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgU2V0LnByb3RvdHlwZS5pbnRlcnNlY3QgPSBmdW5jdGlvbigpIHt2YXIgaXRlcnMgPSBTTElDRSQwLmNhbGwoYXJndW1lbnRzLCAwKTtcbiAgICAgIGlmIChpdGVycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgICBpdGVycyA9IGl0ZXJzLm1hcChmdW5jdGlvbihpdGVyICkge3JldHVybiBTZXRJdGVyYWJsZShpdGVyKX0pO1xuICAgICAgdmFyIG9yaWdpbmFsU2V0ID0gdGhpcztcbiAgICAgIHJldHVybiB0aGlzLndpdGhNdXRhdGlvbnMoZnVuY3Rpb24oc2V0ICkge1xuICAgICAgICBvcmlnaW5hbFNldC5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlICkge1xuICAgICAgICAgIGlmICghaXRlcnMuZXZlcnkoZnVuY3Rpb24oaXRlciApIHtyZXR1cm4gaXRlci5pbmNsdWRlcyh2YWx1ZSl9KSkge1xuICAgICAgICAgICAgc2V0LnJlbW92ZSh2YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBTZXQucHJvdG90eXBlLnN1YnRyYWN0ID0gZnVuY3Rpb24oKSB7dmFyIGl0ZXJzID0gU0xJQ0UkMC5jYWxsKGFyZ3VtZW50cywgMCk7XG4gICAgICBpZiAoaXRlcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgICAgaXRlcnMgPSBpdGVycy5tYXAoZnVuY3Rpb24oaXRlciApIHtyZXR1cm4gU2V0SXRlcmFibGUoaXRlcil9KTtcbiAgICAgIHZhciBvcmlnaW5hbFNldCA9IHRoaXM7XG4gICAgICByZXR1cm4gdGhpcy53aXRoTXV0YXRpb25zKGZ1bmN0aW9uKHNldCApIHtcbiAgICAgICAgb3JpZ2luYWxTZXQuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSApIHtcbiAgICAgICAgICBpZiAoaXRlcnMuc29tZShmdW5jdGlvbihpdGVyICkge3JldHVybiBpdGVyLmluY2x1ZGVzKHZhbHVlKX0pKSB7XG4gICAgICAgICAgICBzZXQucmVtb3ZlKHZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIFNldC5wcm90b3R5cGUubWVyZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnVuaW9uLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcblxuICAgIFNldC5wcm90b3R5cGUubWVyZ2VXaXRoID0gZnVuY3Rpb24obWVyZ2VyKSB7dmFyIGl0ZXJzID0gU0xJQ0UkMC5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgICByZXR1cm4gdGhpcy51bmlvbi5hcHBseSh0aGlzLCBpdGVycyk7XG4gICAgfTtcblxuICAgIFNldC5wcm90b3R5cGUuc29ydCA9IGZ1bmN0aW9uKGNvbXBhcmF0b3IpIHtcbiAgICAgIC8vIExhdGUgYmluZGluZ1xuICAgICAgcmV0dXJuIE9yZGVyZWRTZXQoc29ydEZhY3RvcnkodGhpcywgY29tcGFyYXRvcikpO1xuICAgIH07XG5cbiAgICBTZXQucHJvdG90eXBlLnNvcnRCeSA9IGZ1bmN0aW9uKG1hcHBlciwgY29tcGFyYXRvcikge1xuICAgICAgLy8gTGF0ZSBiaW5kaW5nXG4gICAgICByZXR1cm4gT3JkZXJlZFNldChzb3J0RmFjdG9yeSh0aGlzLCBjb21wYXJhdG9yLCBtYXBwZXIpKTtcbiAgICB9O1xuXG4gICAgU2V0LnByb3RvdHlwZS53YXNBbHRlcmVkID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5fbWFwLndhc0FsdGVyZWQoKTtcbiAgICB9O1xuXG4gICAgU2V0LnByb3RvdHlwZS5fX2l0ZXJhdGUgPSBmdW5jdGlvbihmbiwgcmV2ZXJzZSkge3ZhciB0aGlzJDAgPSB0aGlzO1xuICAgICAgcmV0dXJuIHRoaXMuX21hcC5fX2l0ZXJhdGUoZnVuY3Rpb24oXywgaykgIHtyZXR1cm4gZm4oaywgaywgdGhpcyQwKX0sIHJldmVyc2UpO1xuICAgIH07XG5cbiAgICBTZXQucHJvdG90eXBlLl9faXRlcmF0b3IgPSBmdW5jdGlvbih0eXBlLCByZXZlcnNlKSB7XG4gICAgICByZXR1cm4gdGhpcy5fbWFwLm1hcChmdW5jdGlvbihfLCBrKSAge3JldHVybiBrfSkuX19pdGVyYXRvcih0eXBlLCByZXZlcnNlKTtcbiAgICB9O1xuXG4gICAgU2V0LnByb3RvdHlwZS5fX2Vuc3VyZU93bmVyID0gZnVuY3Rpb24ob3duZXJJRCkge1xuICAgICAgaWYgKG93bmVySUQgPT09IHRoaXMuX19vd25lcklEKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgICAgdmFyIG5ld01hcCA9IHRoaXMuX21hcC5fX2Vuc3VyZU93bmVyKG93bmVySUQpO1xuICAgICAgaWYgKCFvd25lcklEKSB7XG4gICAgICAgIHRoaXMuX19vd25lcklEID0gb3duZXJJRDtcbiAgICAgICAgdGhpcy5fbWFwID0gbmV3TWFwO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLl9fbWFrZShuZXdNYXAsIG93bmVySUQpO1xuICAgIH07XG5cblxuICBmdW5jdGlvbiBpc1NldChtYXliZVNldCkge1xuICAgIHJldHVybiAhIShtYXliZVNldCAmJiBtYXliZVNldFtJU19TRVRfU0VOVElORUxdKTtcbiAgfVxuXG4gIFNldC5pc1NldCA9IGlzU2V0O1xuXG4gIHZhciBJU19TRVRfU0VOVElORUwgPSAnQEBfX0lNTVVUQUJMRV9TRVRfX0BAJztcblxuICB2YXIgU2V0UHJvdG90eXBlID0gU2V0LnByb3RvdHlwZTtcbiAgU2V0UHJvdG90eXBlW0lTX1NFVF9TRU5USU5FTF0gPSB0cnVlO1xuICBTZXRQcm90b3R5cGVbREVMRVRFXSA9IFNldFByb3RvdHlwZS5yZW1vdmU7XG4gIFNldFByb3RvdHlwZS5tZXJnZURlZXAgPSBTZXRQcm90b3R5cGUubWVyZ2U7XG4gIFNldFByb3RvdHlwZS5tZXJnZURlZXBXaXRoID0gU2V0UHJvdG90eXBlLm1lcmdlV2l0aDtcbiAgU2V0UHJvdG90eXBlLndpdGhNdXRhdGlvbnMgPSBNYXBQcm90b3R5cGUud2l0aE11dGF0aW9ucztcbiAgU2V0UHJvdG90eXBlLmFzTXV0YWJsZSA9IE1hcFByb3RvdHlwZS5hc011dGFibGU7XG4gIFNldFByb3RvdHlwZS5hc0ltbXV0YWJsZSA9IE1hcFByb3RvdHlwZS5hc0ltbXV0YWJsZTtcblxuICBTZXRQcm90b3R5cGUuX19lbXB0eSA9IGVtcHR5U2V0O1xuICBTZXRQcm90b3R5cGUuX19tYWtlID0gbWFrZVNldDtcblxuICBmdW5jdGlvbiB1cGRhdGVTZXQoc2V0LCBuZXdNYXApIHtcbiAgICBpZiAoc2V0Ll9fb3duZXJJRCkge1xuICAgICAgc2V0LnNpemUgPSBuZXdNYXAuc2l6ZTtcbiAgICAgIHNldC5fbWFwID0gbmV3TWFwO1xuICAgICAgcmV0dXJuIHNldDtcbiAgICB9XG4gICAgcmV0dXJuIG5ld01hcCA9PT0gc2V0Ll9tYXAgPyBzZXQgOlxuICAgICAgbmV3TWFwLnNpemUgPT09IDAgPyBzZXQuX19lbXB0eSgpIDpcbiAgICAgIHNldC5fX21ha2UobmV3TWFwKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1ha2VTZXQobWFwLCBvd25lcklEKSB7XG4gICAgdmFyIHNldCA9IE9iamVjdC5jcmVhdGUoU2V0UHJvdG90eXBlKTtcbiAgICBzZXQuc2l6ZSA9IG1hcCA/IG1hcC5zaXplIDogMDtcbiAgICBzZXQuX21hcCA9IG1hcDtcbiAgICBzZXQuX19vd25lcklEID0gb3duZXJJRDtcbiAgICByZXR1cm4gc2V0O1xuICB9XG5cbiAgdmFyIEVNUFRZX1NFVDtcbiAgZnVuY3Rpb24gZW1wdHlTZXQoKSB7XG4gICAgcmV0dXJuIEVNUFRZX1NFVCB8fCAoRU1QVFlfU0VUID0gbWFrZVNldChlbXB0eU1hcCgpKSk7XG4gIH1cblxuICBjcmVhdGVDbGFzcyhPcmRlcmVkU2V0LCBTZXQpO1xuXG4gICAgLy8gQHByYWdtYSBDb25zdHJ1Y3Rpb25cblxuICAgIGZ1bmN0aW9uIE9yZGVyZWRTZXQodmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkID8gZW1wdHlPcmRlcmVkU2V0KCkgOlxuICAgICAgICBpc09yZGVyZWRTZXQodmFsdWUpID8gdmFsdWUgOlxuICAgICAgICBlbXB0eU9yZGVyZWRTZXQoKS53aXRoTXV0YXRpb25zKGZ1bmN0aW9uKHNldCApIHtcbiAgICAgICAgICB2YXIgaXRlciA9IFNldEl0ZXJhYmxlKHZhbHVlKTtcbiAgICAgICAgICBhc3NlcnROb3RJbmZpbml0ZShpdGVyLnNpemUpO1xuICAgICAgICAgIGl0ZXIuZm9yRWFjaChmdW5jdGlvbih2ICkge3JldHVybiBzZXQuYWRkKHYpfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIE9yZGVyZWRTZXQub2YgPSBmdW5jdGlvbigvKi4uLnZhbHVlcyovKSB7XG4gICAgICByZXR1cm4gdGhpcyhhcmd1bWVudHMpO1xuICAgIH07XG5cbiAgICBPcmRlcmVkU2V0LmZyb21LZXlzID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzKEtleWVkSXRlcmFibGUodmFsdWUpLmtleVNlcSgpKTtcbiAgICB9O1xuXG4gICAgT3JkZXJlZFNldC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLl9fdG9TdHJpbmcoJ09yZGVyZWRTZXQgeycsICd9Jyk7XG4gICAgfTtcblxuXG4gIGZ1bmN0aW9uIGlzT3JkZXJlZFNldChtYXliZU9yZGVyZWRTZXQpIHtcbiAgICByZXR1cm4gaXNTZXQobWF5YmVPcmRlcmVkU2V0KSAmJiBpc09yZGVyZWQobWF5YmVPcmRlcmVkU2V0KTtcbiAgfVxuXG4gIE9yZGVyZWRTZXQuaXNPcmRlcmVkU2V0ID0gaXNPcmRlcmVkU2V0O1xuXG4gIHZhciBPcmRlcmVkU2V0UHJvdG90eXBlID0gT3JkZXJlZFNldC5wcm90b3R5cGU7XG4gIE9yZGVyZWRTZXRQcm90b3R5cGVbSVNfT1JERVJFRF9TRU5USU5FTF0gPSB0cnVlO1xuXG4gIE9yZGVyZWRTZXRQcm90b3R5cGUuX19lbXB0eSA9IGVtcHR5T3JkZXJlZFNldDtcbiAgT3JkZXJlZFNldFByb3RvdHlwZS5fX21ha2UgPSBtYWtlT3JkZXJlZFNldDtcblxuICBmdW5jdGlvbiBtYWtlT3JkZXJlZFNldChtYXAsIG93bmVySUQpIHtcbiAgICB2YXIgc2V0ID0gT2JqZWN0LmNyZWF0ZShPcmRlcmVkU2V0UHJvdG90eXBlKTtcbiAgICBzZXQuc2l6ZSA9IG1hcCA/IG1hcC5zaXplIDogMDtcbiAgICBzZXQuX21hcCA9IG1hcDtcbiAgICBzZXQuX19vd25lcklEID0gb3duZXJJRDtcbiAgICByZXR1cm4gc2V0O1xuICB9XG5cbiAgdmFyIEVNUFRZX09SREVSRURfU0VUO1xuICBmdW5jdGlvbiBlbXB0eU9yZGVyZWRTZXQoKSB7XG4gICAgcmV0dXJuIEVNUFRZX09SREVSRURfU0VUIHx8IChFTVBUWV9PUkRFUkVEX1NFVCA9IG1ha2VPcmRlcmVkU2V0KGVtcHR5T3JkZXJlZE1hcCgpKSk7XG4gIH1cblxuICBjcmVhdGVDbGFzcyhTdGFjaywgSW5kZXhlZENvbGxlY3Rpb24pO1xuXG4gICAgLy8gQHByYWdtYSBDb25zdHJ1Y3Rpb25cblxuICAgIGZ1bmN0aW9uIFN0YWNrKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCA/IGVtcHR5U3RhY2soKSA6XG4gICAgICAgIGlzU3RhY2sodmFsdWUpID8gdmFsdWUgOlxuICAgICAgICBlbXB0eVN0YWNrKCkudW5zaGlmdEFsbCh2YWx1ZSk7XG4gICAgfVxuXG4gICAgU3RhY2sub2YgPSBmdW5jdGlvbigvKi4uLnZhbHVlcyovKSB7XG4gICAgICByZXR1cm4gdGhpcyhhcmd1bWVudHMpO1xuICAgIH07XG5cbiAgICBTdGFjay5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLl9fdG9TdHJpbmcoJ1N0YWNrIFsnLCAnXScpO1xuICAgIH07XG5cbiAgICAvLyBAcHJhZ21hIEFjY2Vzc1xuXG4gICAgU3RhY2sucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKGluZGV4LCBub3RTZXRWYWx1ZSkge1xuICAgICAgdmFyIGhlYWQgPSB0aGlzLl9oZWFkO1xuICAgICAgaW5kZXggPSB3cmFwSW5kZXgodGhpcywgaW5kZXgpO1xuICAgICAgd2hpbGUgKGhlYWQgJiYgaW5kZXgtLSkge1xuICAgICAgICBoZWFkID0gaGVhZC5uZXh0O1xuICAgICAgfVxuICAgICAgcmV0dXJuIGhlYWQgPyBoZWFkLnZhbHVlIDogbm90U2V0VmFsdWU7XG4gICAgfTtcblxuICAgIFN0YWNrLnByb3RvdHlwZS5wZWVrID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5faGVhZCAmJiB0aGlzLl9oZWFkLnZhbHVlO1xuICAgIH07XG5cbiAgICAvLyBAcHJhZ21hIE1vZGlmaWNhdGlvblxuXG4gICAgU3RhY2sucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbigvKi4uLnZhbHVlcyovKSB7XG4gICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICAgIHZhciBuZXdTaXplID0gdGhpcy5zaXplICsgYXJndW1lbnRzLmxlbmd0aDtcbiAgICAgIHZhciBoZWFkID0gdGhpcy5faGVhZDtcbiAgICAgIGZvciAodmFyIGlpID0gYXJndW1lbnRzLmxlbmd0aCAtIDE7IGlpID49IDA7IGlpLS0pIHtcbiAgICAgICAgaGVhZCA9IHtcbiAgICAgICAgICB2YWx1ZTogYXJndW1lbnRzW2lpXSxcbiAgICAgICAgICBuZXh0OiBoZWFkXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5fX293bmVySUQpIHtcbiAgICAgICAgdGhpcy5zaXplID0gbmV3U2l6ZTtcbiAgICAgICAgdGhpcy5faGVhZCA9IGhlYWQ7XG4gICAgICAgIHRoaXMuX19oYXNoID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9fYWx0ZXJlZCA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG1ha2VTdGFjayhuZXdTaXplLCBoZWFkKTtcbiAgICB9O1xuXG4gICAgU3RhY2sucHJvdG90eXBlLnB1c2hBbGwgPSBmdW5jdGlvbihpdGVyKSB7XG4gICAgICBpdGVyID0gSW5kZXhlZEl0ZXJhYmxlKGl0ZXIpO1xuICAgICAgaWYgKGl0ZXIuc2l6ZSA9PT0gMCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICAgIGFzc2VydE5vdEluZmluaXRlKGl0ZXIuc2l6ZSk7XG4gICAgICB2YXIgbmV3U2l6ZSA9IHRoaXMuc2l6ZTtcbiAgICAgIHZhciBoZWFkID0gdGhpcy5faGVhZDtcbiAgICAgIGl0ZXIucmV2ZXJzZSgpLmZvckVhY2goZnVuY3Rpb24odmFsdWUgKSB7XG4gICAgICAgIG5ld1NpemUrKztcbiAgICAgICAgaGVhZCA9IHtcbiAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgbmV4dDogaGVhZFxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgICBpZiAodGhpcy5fX293bmVySUQpIHtcbiAgICAgICAgdGhpcy5zaXplID0gbmV3U2l6ZTtcbiAgICAgICAgdGhpcy5faGVhZCA9IGhlYWQ7XG4gICAgICAgIHRoaXMuX19oYXNoID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9fYWx0ZXJlZCA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG1ha2VTdGFjayhuZXdTaXplLCBoZWFkKTtcbiAgICB9O1xuXG4gICAgU3RhY2sucHJvdG90eXBlLnBvcCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuc2xpY2UoMSk7XG4gICAgfTtcblxuICAgIFN0YWNrLnByb3RvdHlwZS51bnNoaWZ0ID0gZnVuY3Rpb24oLyouLi52YWx1ZXMqLykge1xuICAgICAgcmV0dXJuIHRoaXMucHVzaC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG5cbiAgICBTdGFjay5wcm90b3R5cGUudW5zaGlmdEFsbCA9IGZ1bmN0aW9uKGl0ZXIpIHtcbiAgICAgIHJldHVybiB0aGlzLnB1c2hBbGwoaXRlcik7XG4gICAgfTtcblxuICAgIFN0YWNrLnByb3RvdHlwZS5zaGlmdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMucG9wLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcblxuICAgIFN0YWNrLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHRoaXMuc2l6ZSA9PT0gMCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLl9fb3duZXJJRCkge1xuICAgICAgICB0aGlzLnNpemUgPSAwO1xuICAgICAgICB0aGlzLl9oZWFkID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9faGFzaCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fX2FsdGVyZWQgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICAgIHJldHVybiBlbXB0eVN0YWNrKCk7XG4gICAgfTtcblxuICAgIFN0YWNrLnByb3RvdHlwZS5zbGljZSA9IGZ1bmN0aW9uKGJlZ2luLCBlbmQpIHtcbiAgICAgIGlmICh3aG9sZVNsaWNlKGJlZ2luLCBlbmQsIHRoaXMuc2l6ZSkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgICB2YXIgcmVzb2x2ZWRCZWdpbiA9IHJlc29sdmVCZWdpbihiZWdpbiwgdGhpcy5zaXplKTtcbiAgICAgIHZhciByZXNvbHZlZEVuZCA9IHJlc29sdmVFbmQoZW5kLCB0aGlzLnNpemUpO1xuICAgICAgaWYgKHJlc29sdmVkRW5kICE9PSB0aGlzLnNpemUpIHtcbiAgICAgICAgLy8gc3VwZXIuc2xpY2UoYmVnaW4sIGVuZCk7XG4gICAgICAgIHJldHVybiBJbmRleGVkQ29sbGVjdGlvbi5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLCBiZWdpbiwgZW5kKTtcbiAgICAgIH1cbiAgICAgIHZhciBuZXdTaXplID0gdGhpcy5zaXplIC0gcmVzb2x2ZWRCZWdpbjtcbiAgICAgIHZhciBoZWFkID0gdGhpcy5faGVhZDtcbiAgICAgIHdoaWxlIChyZXNvbHZlZEJlZ2luLS0pIHtcbiAgICAgICAgaGVhZCA9IGhlYWQubmV4dDtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLl9fb3duZXJJRCkge1xuICAgICAgICB0aGlzLnNpemUgPSBuZXdTaXplO1xuICAgICAgICB0aGlzLl9oZWFkID0gaGVhZDtcbiAgICAgICAgdGhpcy5fX2hhc2ggPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX19hbHRlcmVkID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgICByZXR1cm4gbWFrZVN0YWNrKG5ld1NpemUsIGhlYWQpO1xuICAgIH07XG5cbiAgICAvLyBAcHJhZ21hIE11dGFiaWxpdHlcblxuICAgIFN0YWNrLnByb3RvdHlwZS5fX2Vuc3VyZU93bmVyID0gZnVuY3Rpb24ob3duZXJJRCkge1xuICAgICAgaWYgKG93bmVySUQgPT09IHRoaXMuX19vd25lcklEKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgICAgaWYgKCFvd25lcklEKSB7XG4gICAgICAgIHRoaXMuX19vd25lcklEID0gb3duZXJJRDtcbiAgICAgICAgdGhpcy5fX2FsdGVyZWQgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgICByZXR1cm4gbWFrZVN0YWNrKHRoaXMuc2l6ZSwgdGhpcy5faGVhZCwgb3duZXJJRCwgdGhpcy5fX2hhc2gpO1xuICAgIH07XG5cbiAgICAvLyBAcHJhZ21hIEl0ZXJhdGlvblxuXG4gICAgU3RhY2sucHJvdG90eXBlLl9faXRlcmF0ZSA9IGZ1bmN0aW9uKGZuLCByZXZlcnNlKSB7XG4gICAgICBpZiAocmV2ZXJzZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXZlcnNlKCkuX19pdGVyYXRlKGZuKTtcbiAgICAgIH1cbiAgICAgIHZhciBpdGVyYXRpb25zID0gMDtcbiAgICAgIHZhciBub2RlID0gdGhpcy5faGVhZDtcbiAgICAgIHdoaWxlIChub2RlKSB7XG4gICAgICAgIGlmIChmbihub2RlLnZhbHVlLCBpdGVyYXRpb25zKyssIHRoaXMpID09PSBmYWxzZSkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIG5vZGUgPSBub2RlLm5leHQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gaXRlcmF0aW9ucztcbiAgICB9O1xuXG4gICAgU3RhY2sucHJvdG90eXBlLl9faXRlcmF0b3IgPSBmdW5jdGlvbih0eXBlLCByZXZlcnNlKSB7XG4gICAgICBpZiAocmV2ZXJzZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXZlcnNlKCkuX19pdGVyYXRvcih0eXBlKTtcbiAgICAgIH1cbiAgICAgIHZhciBpdGVyYXRpb25zID0gMDtcbiAgICAgIHZhciBub2RlID0gdGhpcy5faGVhZDtcbiAgICAgIHJldHVybiBuZXcgSXRlcmF0b3IoZnVuY3Rpb24oKSAge1xuICAgICAgICBpZiAobm9kZSkge1xuICAgICAgICAgIHZhciB2YWx1ZSA9IG5vZGUudmFsdWU7XG4gICAgICAgICAgbm9kZSA9IG5vZGUubmV4dDtcbiAgICAgICAgICByZXR1cm4gaXRlcmF0b3JWYWx1ZSh0eXBlLCBpdGVyYXRpb25zKyssIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXRlcmF0b3JEb25lKCk7XG4gICAgICB9KTtcbiAgICB9O1xuXG5cbiAgZnVuY3Rpb24gaXNTdGFjayhtYXliZVN0YWNrKSB7XG4gICAgcmV0dXJuICEhKG1heWJlU3RhY2sgJiYgbWF5YmVTdGFja1tJU19TVEFDS19TRU5USU5FTF0pO1xuICB9XG5cbiAgU3RhY2suaXNTdGFjayA9IGlzU3RhY2s7XG5cbiAgdmFyIElTX1NUQUNLX1NFTlRJTkVMID0gJ0BAX19JTU1VVEFCTEVfU1RBQ0tfX0BAJztcblxuICB2YXIgU3RhY2tQcm90b3R5cGUgPSBTdGFjay5wcm90b3R5cGU7XG4gIFN0YWNrUHJvdG90eXBlW0lTX1NUQUNLX1NFTlRJTkVMXSA9IHRydWU7XG4gIFN0YWNrUHJvdG90eXBlLndpdGhNdXRhdGlvbnMgPSBNYXBQcm90b3R5cGUud2l0aE11dGF0aW9ucztcbiAgU3RhY2tQcm90b3R5cGUuYXNNdXRhYmxlID0gTWFwUHJvdG90eXBlLmFzTXV0YWJsZTtcbiAgU3RhY2tQcm90b3R5cGUuYXNJbW11dGFibGUgPSBNYXBQcm90b3R5cGUuYXNJbW11dGFibGU7XG4gIFN0YWNrUHJvdG90eXBlLndhc0FsdGVyZWQgPSBNYXBQcm90b3R5cGUud2FzQWx0ZXJlZDtcblxuXG4gIGZ1bmN0aW9uIG1ha2VTdGFjayhzaXplLCBoZWFkLCBvd25lcklELCBoYXNoKSB7XG4gICAgdmFyIG1hcCA9IE9iamVjdC5jcmVhdGUoU3RhY2tQcm90b3R5cGUpO1xuICAgIG1hcC5zaXplID0gc2l6ZTtcbiAgICBtYXAuX2hlYWQgPSBoZWFkO1xuICAgIG1hcC5fX293bmVySUQgPSBvd25lcklEO1xuICAgIG1hcC5fX2hhc2ggPSBoYXNoO1xuICAgIG1hcC5fX2FsdGVyZWQgPSBmYWxzZTtcbiAgICByZXR1cm4gbWFwO1xuICB9XG5cbiAgdmFyIEVNUFRZX1NUQUNLO1xuICBmdW5jdGlvbiBlbXB0eVN0YWNrKCkge1xuICAgIHJldHVybiBFTVBUWV9TVEFDSyB8fCAoRU1QVFlfU1RBQ0sgPSBtYWtlU3RhY2soMCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnRyaWJ1dGVzIGFkZGl0aW9uYWwgbWV0aG9kcyB0byBhIGNvbnN0cnVjdG9yXG4gICAqL1xuICBmdW5jdGlvbiBtaXhpbihjdG9yLCBtZXRob2RzKSB7XG4gICAgdmFyIGtleUNvcGllciA9IGZ1bmN0aW9uKGtleSApIHsgY3Rvci5wcm90b3R5cGVba2V5XSA9IG1ldGhvZHNba2V5XTsgfTtcbiAgICBPYmplY3Qua2V5cyhtZXRob2RzKS5mb3JFYWNoKGtleUNvcGllcik7XG4gICAgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyAmJlxuICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhtZXRob2RzKS5mb3JFYWNoKGtleUNvcGllcik7XG4gICAgcmV0dXJuIGN0b3I7XG4gIH1cblxuICBJdGVyYWJsZS5JdGVyYXRvciA9IEl0ZXJhdG9yO1xuXG4gIG1peGluKEl0ZXJhYmxlLCB7XG5cbiAgICAvLyAjIyMgQ29udmVyc2lvbiB0byBvdGhlciB0eXBlc1xuXG4gICAgdG9BcnJheTogZnVuY3Rpb24oKSB7XG4gICAgICBhc3NlcnROb3RJbmZpbml0ZSh0aGlzLnNpemUpO1xuICAgICAgdmFyIGFycmF5ID0gbmV3IEFycmF5KHRoaXMuc2l6ZSB8fCAwKTtcbiAgICAgIHRoaXMudmFsdWVTZXEoKS5fX2l0ZXJhdGUoZnVuY3Rpb24odiwgaSkgIHsgYXJyYXlbaV0gPSB2OyB9KTtcbiAgICAgIHJldHVybiBhcnJheTtcbiAgICB9LFxuXG4gICAgdG9JbmRleGVkU2VxOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBuZXcgVG9JbmRleGVkU2VxdWVuY2UodGhpcyk7XG4gICAgfSxcblxuICAgIHRvSlM6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMudG9TZXEoKS5tYXAoXG4gICAgICAgIGZ1bmN0aW9uKHZhbHVlICkge3JldHVybiB2YWx1ZSAmJiB0eXBlb2YgdmFsdWUudG9KUyA9PT0gJ2Z1bmN0aW9uJyA/IHZhbHVlLnRvSlMoKSA6IHZhbHVlfVxuICAgICAgKS5fX3RvSlMoKTtcbiAgICB9LFxuXG4gICAgdG9KU09OOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnRvU2VxKCkubWFwKFxuICAgICAgICBmdW5jdGlvbih2YWx1ZSApIHtyZXR1cm4gdmFsdWUgJiYgdHlwZW9mIHZhbHVlLnRvSlNPTiA9PT0gJ2Z1bmN0aW9uJyA/IHZhbHVlLnRvSlNPTigpIDogdmFsdWV9XG4gICAgICApLl9fdG9KUygpO1xuICAgIH0sXG5cbiAgICB0b0tleWVkU2VxOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBuZXcgVG9LZXllZFNlcXVlbmNlKHRoaXMsIHRydWUpO1xuICAgIH0sXG5cbiAgICB0b01hcDogZnVuY3Rpb24oKSB7XG4gICAgICAvLyBVc2UgTGF0ZSBCaW5kaW5nIGhlcmUgdG8gc29sdmUgdGhlIGNpcmN1bGFyIGRlcGVuZGVuY3kuXG4gICAgICByZXR1cm4gTWFwKHRoaXMudG9LZXllZFNlcSgpKTtcbiAgICB9LFxuXG4gICAgdG9PYmplY3Q6IGZ1bmN0aW9uKCkge1xuICAgICAgYXNzZXJ0Tm90SW5maW5pdGUodGhpcy5zaXplKTtcbiAgICAgIHZhciBvYmplY3QgPSB7fTtcbiAgICAgIHRoaXMuX19pdGVyYXRlKGZ1bmN0aW9uKHYsIGspICB7IG9iamVjdFtrXSA9IHY7IH0pO1xuICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICB9LFxuXG4gICAgdG9PcmRlcmVkTWFwOiBmdW5jdGlvbigpIHtcbiAgICAgIC8vIFVzZSBMYXRlIEJpbmRpbmcgaGVyZSB0byBzb2x2ZSB0aGUgY2lyY3VsYXIgZGVwZW5kZW5jeS5cbiAgICAgIHJldHVybiBPcmRlcmVkTWFwKHRoaXMudG9LZXllZFNlcSgpKTtcbiAgICB9LFxuXG4gICAgdG9PcmRlcmVkU2V0OiBmdW5jdGlvbigpIHtcbiAgICAgIC8vIFVzZSBMYXRlIEJpbmRpbmcgaGVyZSB0byBzb2x2ZSB0aGUgY2lyY3VsYXIgZGVwZW5kZW5jeS5cbiAgICAgIHJldHVybiBPcmRlcmVkU2V0KGlzS2V5ZWQodGhpcykgPyB0aGlzLnZhbHVlU2VxKCkgOiB0aGlzKTtcbiAgICB9LFxuXG4gICAgdG9TZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgLy8gVXNlIExhdGUgQmluZGluZyBoZXJlIHRvIHNvbHZlIHRoZSBjaXJjdWxhciBkZXBlbmRlbmN5LlxuICAgICAgcmV0dXJuIFNldChpc0tleWVkKHRoaXMpID8gdGhpcy52YWx1ZVNlcSgpIDogdGhpcyk7XG4gICAgfSxcblxuICAgIHRvU2V0U2VxOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBuZXcgVG9TZXRTZXF1ZW5jZSh0aGlzKTtcbiAgICB9LFxuXG4gICAgdG9TZXE6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGlzSW5kZXhlZCh0aGlzKSA/IHRoaXMudG9JbmRleGVkU2VxKCkgOlxuICAgICAgICBpc0tleWVkKHRoaXMpID8gdGhpcy50b0tleWVkU2VxKCkgOlxuICAgICAgICB0aGlzLnRvU2V0U2VxKCk7XG4gICAgfSxcblxuICAgIHRvU3RhY2s6IGZ1bmN0aW9uKCkge1xuICAgICAgLy8gVXNlIExhdGUgQmluZGluZyBoZXJlIHRvIHNvbHZlIHRoZSBjaXJjdWxhciBkZXBlbmRlbmN5LlxuICAgICAgcmV0dXJuIFN0YWNrKGlzS2V5ZWQodGhpcykgPyB0aGlzLnZhbHVlU2VxKCkgOiB0aGlzKTtcbiAgICB9LFxuXG4gICAgdG9MaXN0OiBmdW5jdGlvbigpIHtcbiAgICAgIC8vIFVzZSBMYXRlIEJpbmRpbmcgaGVyZSB0byBzb2x2ZSB0aGUgY2lyY3VsYXIgZGVwZW5kZW5jeS5cbiAgICAgIHJldHVybiBMaXN0KGlzS2V5ZWQodGhpcykgPyB0aGlzLnZhbHVlU2VxKCkgOiB0aGlzKTtcbiAgICB9LFxuXG5cbiAgICAvLyAjIyMgQ29tbW9uIEphdmFTY3JpcHQgbWV0aG9kcyBhbmQgcHJvcGVydGllc1xuXG4gICAgdG9TdHJpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICdbSXRlcmFibGVdJztcbiAgICB9LFxuXG4gICAgX190b1N0cmluZzogZnVuY3Rpb24oaGVhZCwgdGFpbCkge1xuICAgICAgaWYgKHRoaXMuc2l6ZSA9PT0gMCkge1xuICAgICAgICByZXR1cm4gaGVhZCArIHRhaWw7XG4gICAgICB9XG4gICAgICByZXR1cm4gaGVhZCArICcgJyArIHRoaXMudG9TZXEoKS5tYXAodGhpcy5fX3RvU3RyaW5nTWFwcGVyKS5qb2luKCcsICcpICsgJyAnICsgdGFpbDtcbiAgICB9LFxuXG5cbiAgICAvLyAjIyMgRVM2IENvbGxlY3Rpb24gbWV0aG9kcyAoRVM2IEFycmF5IGFuZCBNYXApXG5cbiAgICBjb25jYXQ6IGZ1bmN0aW9uKCkge3ZhciB2YWx1ZXMgPSBTTElDRSQwLmNhbGwoYXJndW1lbnRzLCAwKTtcbiAgICAgIHJldHVybiByZWlmeSh0aGlzLCBjb25jYXRGYWN0b3J5KHRoaXMsIHZhbHVlcykpO1xuICAgIH0sXG5cbiAgICBpbmNsdWRlczogZnVuY3Rpb24oc2VhcmNoVmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLnNvbWUoZnVuY3Rpb24odmFsdWUgKSB7cmV0dXJuIGlzKHZhbHVlLCBzZWFyY2hWYWx1ZSl9KTtcbiAgICB9LFxuXG4gICAgZW50cmllczogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5fX2l0ZXJhdG9yKElURVJBVEVfRU5UUklFUyk7XG4gICAgfSxcblxuICAgIGV2ZXJ5OiBmdW5jdGlvbihwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICAgIGFzc2VydE5vdEluZmluaXRlKHRoaXMuc2l6ZSk7XG4gICAgICB2YXIgcmV0dXJuVmFsdWUgPSB0cnVlO1xuICAgICAgdGhpcy5fX2l0ZXJhdGUoZnVuY3Rpb24odiwgaywgYykgIHtcbiAgICAgICAgaWYgKCFwcmVkaWNhdGUuY2FsbChjb250ZXh0LCB2LCBrLCBjKSkge1xuICAgICAgICAgIHJldHVyblZhbHVlID0gZmFsc2U7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXR1cm5WYWx1ZTtcbiAgICB9LFxuXG4gICAgZmlsdGVyOiBmdW5jdGlvbihwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICAgIHJldHVybiByZWlmeSh0aGlzLCBmaWx0ZXJGYWN0b3J5KHRoaXMsIHByZWRpY2F0ZSwgY29udGV4dCwgdHJ1ZSkpO1xuICAgIH0sXG5cbiAgICBmaW5kOiBmdW5jdGlvbihwcmVkaWNhdGUsIGNvbnRleHQsIG5vdFNldFZhbHVlKSB7XG4gICAgICB2YXIgZW50cnkgPSB0aGlzLmZpbmRFbnRyeShwcmVkaWNhdGUsIGNvbnRleHQpO1xuICAgICAgcmV0dXJuIGVudHJ5ID8gZW50cnlbMV0gOiBub3RTZXRWYWx1ZTtcbiAgICB9LFxuXG4gICAgZm9yRWFjaDogZnVuY3Rpb24oc2lkZUVmZmVjdCwgY29udGV4dCkge1xuICAgICAgYXNzZXJ0Tm90SW5maW5pdGUodGhpcy5zaXplKTtcbiAgICAgIHJldHVybiB0aGlzLl9faXRlcmF0ZShjb250ZXh0ID8gc2lkZUVmZmVjdC5iaW5kKGNvbnRleHQpIDogc2lkZUVmZmVjdCk7XG4gICAgfSxcblxuICAgIGpvaW46IGZ1bmN0aW9uKHNlcGFyYXRvcikge1xuICAgICAgYXNzZXJ0Tm90SW5maW5pdGUodGhpcy5zaXplKTtcbiAgICAgIHNlcGFyYXRvciA9IHNlcGFyYXRvciAhPT0gdW5kZWZpbmVkID8gJycgKyBzZXBhcmF0b3IgOiAnLCc7XG4gICAgICB2YXIgam9pbmVkID0gJyc7XG4gICAgICB2YXIgaXNGaXJzdCA9IHRydWU7XG4gICAgICB0aGlzLl9faXRlcmF0ZShmdW5jdGlvbih2ICkge1xuICAgICAgICBpc0ZpcnN0ID8gKGlzRmlyc3QgPSBmYWxzZSkgOiAoam9pbmVkICs9IHNlcGFyYXRvcik7XG4gICAgICAgIGpvaW5lZCArPSB2ICE9PSBudWxsICYmIHYgIT09IHVuZGVmaW5lZCA/IHYudG9TdHJpbmcoKSA6ICcnO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gam9pbmVkO1xuICAgIH0sXG5cbiAgICBrZXlzOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLl9faXRlcmF0b3IoSVRFUkFURV9LRVlTKTtcbiAgICB9LFxuXG4gICAgbWFwOiBmdW5jdGlvbihtYXBwZXIsIGNvbnRleHQpIHtcbiAgICAgIHJldHVybiByZWlmeSh0aGlzLCBtYXBGYWN0b3J5KHRoaXMsIG1hcHBlciwgY29udGV4dCkpO1xuICAgIH0sXG5cbiAgICByZWR1Y2U6IGZ1bmN0aW9uKHJlZHVjZXIsIGluaXRpYWxSZWR1Y3Rpb24sIGNvbnRleHQpIHtcbiAgICAgIGFzc2VydE5vdEluZmluaXRlKHRoaXMuc2l6ZSk7XG4gICAgICB2YXIgcmVkdWN0aW9uO1xuICAgICAgdmFyIHVzZUZpcnN0O1xuICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7XG4gICAgICAgIHVzZUZpcnN0ID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlZHVjdGlvbiA9IGluaXRpYWxSZWR1Y3Rpb247XG4gICAgICB9XG4gICAgICB0aGlzLl9faXRlcmF0ZShmdW5jdGlvbih2LCBrLCBjKSAge1xuICAgICAgICBpZiAodXNlRmlyc3QpIHtcbiAgICAgICAgICB1c2VGaXJzdCA9IGZhbHNlO1xuICAgICAgICAgIHJlZHVjdGlvbiA9IHY7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVkdWN0aW9uID0gcmVkdWNlci5jYWxsKGNvbnRleHQsIHJlZHVjdGlvbiwgdiwgaywgYyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlZHVjdGlvbjtcbiAgICB9LFxuXG4gICAgcmVkdWNlUmlnaHQ6IGZ1bmN0aW9uKHJlZHVjZXIsIGluaXRpYWxSZWR1Y3Rpb24sIGNvbnRleHQpIHtcbiAgICAgIHZhciByZXZlcnNlZCA9IHRoaXMudG9LZXllZFNlcSgpLnJldmVyc2UoKTtcbiAgICAgIHJldHVybiByZXZlcnNlZC5yZWR1Y2UuYXBwbHkocmV2ZXJzZWQsIGFyZ3VtZW50cyk7XG4gICAgfSxcblxuICAgIHJldmVyc2U6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHJlaWZ5KHRoaXMsIHJldmVyc2VGYWN0b3J5KHRoaXMsIHRydWUpKTtcbiAgICB9LFxuXG4gICAgc2xpY2U6IGZ1bmN0aW9uKGJlZ2luLCBlbmQpIHtcbiAgICAgIHJldHVybiByZWlmeSh0aGlzLCBzbGljZUZhY3RvcnkodGhpcywgYmVnaW4sIGVuZCwgdHJ1ZSkpO1xuICAgIH0sXG5cbiAgICBzb21lOiBmdW5jdGlvbihwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICAgIHJldHVybiAhdGhpcy5ldmVyeShub3QocHJlZGljYXRlKSwgY29udGV4dCk7XG4gICAgfSxcblxuICAgIHNvcnQ6IGZ1bmN0aW9uKGNvbXBhcmF0b3IpIHtcbiAgICAgIHJldHVybiByZWlmeSh0aGlzLCBzb3J0RmFjdG9yeSh0aGlzLCBjb21wYXJhdG9yKSk7XG4gICAgfSxcblxuICAgIHZhbHVlczogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5fX2l0ZXJhdG9yKElURVJBVEVfVkFMVUVTKTtcbiAgICB9LFxuXG5cbiAgICAvLyAjIyMgTW9yZSBzZXF1ZW50aWFsIG1ldGhvZHNcblxuICAgIGJ1dExhc3Q6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuc2xpY2UoMCwgLTEpO1xuICAgIH0sXG5cbiAgICBpc0VtcHR5OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnNpemUgIT09IHVuZGVmaW5lZCA/IHRoaXMuc2l6ZSA9PT0gMCA6ICF0aGlzLnNvbWUoZnVuY3Rpb24oKSAge3JldHVybiB0cnVlfSk7XG4gICAgfSxcblxuICAgIGNvdW50OiBmdW5jdGlvbihwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICAgIHJldHVybiBlbnN1cmVTaXplKFxuICAgICAgICBwcmVkaWNhdGUgPyB0aGlzLnRvU2VxKCkuZmlsdGVyKHByZWRpY2F0ZSwgY29udGV4dCkgOiB0aGlzXG4gICAgICApO1xuICAgIH0sXG5cbiAgICBjb3VudEJ5OiBmdW5jdGlvbihncm91cGVyLCBjb250ZXh0KSB7XG4gICAgICByZXR1cm4gY291bnRCeUZhY3RvcnkodGhpcywgZ3JvdXBlciwgY29udGV4dCk7XG4gICAgfSxcblxuICAgIGVxdWFsczogZnVuY3Rpb24ob3RoZXIpIHtcbiAgICAgIHJldHVybiBkZWVwRXF1YWwodGhpcywgb3RoZXIpO1xuICAgIH0sXG5cbiAgICBlbnRyeVNlcTogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgaXRlcmFibGUgPSB0aGlzO1xuICAgICAgaWYgKGl0ZXJhYmxlLl9jYWNoZSkge1xuICAgICAgICAvLyBXZSBjYWNoZSBhcyBhbiBlbnRyaWVzIGFycmF5LCBzbyB3ZSBjYW4ganVzdCByZXR1cm4gdGhlIGNhY2hlIVxuICAgICAgICByZXR1cm4gbmV3IEFycmF5U2VxKGl0ZXJhYmxlLl9jYWNoZSk7XG4gICAgICB9XG4gICAgICB2YXIgZW50cmllc1NlcXVlbmNlID0gaXRlcmFibGUudG9TZXEoKS5tYXAoZW50cnlNYXBwZXIpLnRvSW5kZXhlZFNlcSgpO1xuICAgICAgZW50cmllc1NlcXVlbmNlLmZyb21FbnRyeVNlcSA9IGZ1bmN0aW9uKCkgIHtyZXR1cm4gaXRlcmFibGUudG9TZXEoKX07XG4gICAgICByZXR1cm4gZW50cmllc1NlcXVlbmNlO1xuICAgIH0sXG5cbiAgICBmaWx0ZXJOb3Q6IGZ1bmN0aW9uKHByZWRpY2F0ZSwgY29udGV4dCkge1xuICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyKG5vdChwcmVkaWNhdGUpLCBjb250ZXh0KTtcbiAgICB9LFxuXG4gICAgZmluZEVudHJ5OiBmdW5jdGlvbihwcmVkaWNhdGUsIGNvbnRleHQsIG5vdFNldFZhbHVlKSB7XG4gICAgICB2YXIgZm91bmQgPSBub3RTZXRWYWx1ZTtcbiAgICAgIHRoaXMuX19pdGVyYXRlKGZ1bmN0aW9uKHYsIGssIGMpICB7XG4gICAgICAgIGlmIChwcmVkaWNhdGUuY2FsbChjb250ZXh0LCB2LCBrLCBjKSkge1xuICAgICAgICAgIGZvdW5kID0gW2ssIHZdO1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gZm91bmQ7XG4gICAgfSxcblxuICAgIGZpbmRLZXk6IGZ1bmN0aW9uKHByZWRpY2F0ZSwgY29udGV4dCkge1xuICAgICAgdmFyIGVudHJ5ID0gdGhpcy5maW5kRW50cnkocHJlZGljYXRlLCBjb250ZXh0KTtcbiAgICAgIHJldHVybiBlbnRyeSAmJiBlbnRyeVswXTtcbiAgICB9LFxuXG4gICAgZmluZExhc3Q6IGZ1bmN0aW9uKHByZWRpY2F0ZSwgY29udGV4dCwgbm90U2V0VmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLnRvS2V5ZWRTZXEoKS5yZXZlcnNlKCkuZmluZChwcmVkaWNhdGUsIGNvbnRleHQsIG5vdFNldFZhbHVlKTtcbiAgICB9LFxuXG4gICAgZmluZExhc3RFbnRyeTogZnVuY3Rpb24ocHJlZGljYXRlLCBjb250ZXh0LCBub3RTZXRWYWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMudG9LZXllZFNlcSgpLnJldmVyc2UoKS5maW5kRW50cnkocHJlZGljYXRlLCBjb250ZXh0LCBub3RTZXRWYWx1ZSk7XG4gICAgfSxcblxuICAgIGZpbmRMYXN0S2V5OiBmdW5jdGlvbihwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICAgIHJldHVybiB0aGlzLnRvS2V5ZWRTZXEoKS5yZXZlcnNlKCkuZmluZEtleShwcmVkaWNhdGUsIGNvbnRleHQpO1xuICAgIH0sXG5cbiAgICBmaXJzdDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5maW5kKHJldHVyblRydWUpO1xuICAgIH0sXG5cbiAgICBmbGF0TWFwOiBmdW5jdGlvbihtYXBwZXIsIGNvbnRleHQpIHtcbiAgICAgIHJldHVybiByZWlmeSh0aGlzLCBmbGF0TWFwRmFjdG9yeSh0aGlzLCBtYXBwZXIsIGNvbnRleHQpKTtcbiAgICB9LFxuXG4gICAgZmxhdHRlbjogZnVuY3Rpb24oZGVwdGgpIHtcbiAgICAgIHJldHVybiByZWlmeSh0aGlzLCBmbGF0dGVuRmFjdG9yeSh0aGlzLCBkZXB0aCwgdHJ1ZSkpO1xuICAgIH0sXG5cbiAgICBmcm9tRW50cnlTZXE6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIG5ldyBGcm9tRW50cmllc1NlcXVlbmNlKHRoaXMpO1xuICAgIH0sXG5cbiAgICBnZXQ6IGZ1bmN0aW9uKHNlYXJjaEtleSwgbm90U2V0VmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLmZpbmQoZnVuY3Rpb24oXywga2V5KSAge3JldHVybiBpcyhrZXksIHNlYXJjaEtleSl9LCB1bmRlZmluZWQsIG5vdFNldFZhbHVlKTtcbiAgICB9LFxuXG4gICAgZ2V0SW46IGZ1bmN0aW9uKHNlYXJjaEtleVBhdGgsIG5vdFNldFZhbHVlKSB7XG4gICAgICB2YXIgbmVzdGVkID0gdGhpcztcbiAgICAgIC8vIE5vdGU6IGluIGFuIEVTNiBlbnZpcm9ubWVudCwgd2Ugd291bGQgcHJlZmVyOlxuICAgICAgLy8gZm9yICh2YXIga2V5IG9mIHNlYXJjaEtleVBhdGgpIHtcbiAgICAgIHZhciBpdGVyID0gZm9yY2VJdGVyYXRvcihzZWFyY2hLZXlQYXRoKTtcbiAgICAgIHZhciBzdGVwO1xuICAgICAgd2hpbGUgKCEoc3RlcCA9IGl0ZXIubmV4dCgpKS5kb25lKSB7XG4gICAgICAgIHZhciBrZXkgPSBzdGVwLnZhbHVlO1xuICAgICAgICBuZXN0ZWQgPSBuZXN0ZWQgJiYgbmVzdGVkLmdldCA/IG5lc3RlZC5nZXQoa2V5LCBOT1RfU0VUKSA6IE5PVF9TRVQ7XG4gICAgICAgIGlmIChuZXN0ZWQgPT09IE5PVF9TRVQpIHtcbiAgICAgICAgICByZXR1cm4gbm90U2V0VmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXN0ZWQ7XG4gICAgfSxcblxuICAgIGdyb3VwQnk6IGZ1bmN0aW9uKGdyb3VwZXIsIGNvbnRleHQpIHtcbiAgICAgIHJldHVybiBncm91cEJ5RmFjdG9yeSh0aGlzLCBncm91cGVyLCBjb250ZXh0KTtcbiAgICB9LFxuXG4gICAgaGFzOiBmdW5jdGlvbihzZWFyY2hLZXkpIHtcbiAgICAgIHJldHVybiB0aGlzLmdldChzZWFyY2hLZXksIE5PVF9TRVQpICE9PSBOT1RfU0VUO1xuICAgIH0sXG5cbiAgICBoYXNJbjogZnVuY3Rpb24oc2VhcmNoS2V5UGF0aCkge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0SW4oc2VhcmNoS2V5UGF0aCwgTk9UX1NFVCkgIT09IE5PVF9TRVQ7XG4gICAgfSxcblxuICAgIGlzU3Vic2V0OiBmdW5jdGlvbihpdGVyKSB7XG4gICAgICBpdGVyID0gdHlwZW9mIGl0ZXIuaW5jbHVkZXMgPT09ICdmdW5jdGlvbicgPyBpdGVyIDogSXRlcmFibGUoaXRlcik7XG4gICAgICByZXR1cm4gdGhpcy5ldmVyeShmdW5jdGlvbih2YWx1ZSApIHtyZXR1cm4gaXRlci5pbmNsdWRlcyh2YWx1ZSl9KTtcbiAgICB9LFxuXG4gICAgaXNTdXBlcnNldDogZnVuY3Rpb24oaXRlcikge1xuICAgICAgaXRlciA9IHR5cGVvZiBpdGVyLmlzU3Vic2V0ID09PSAnZnVuY3Rpb24nID8gaXRlciA6IEl0ZXJhYmxlKGl0ZXIpO1xuICAgICAgcmV0dXJuIGl0ZXIuaXNTdWJzZXQodGhpcyk7XG4gICAgfSxcblxuICAgIGtleU9mOiBmdW5jdGlvbihzZWFyY2hWYWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMuZmluZEtleShmdW5jdGlvbih2YWx1ZSApIHtyZXR1cm4gaXModmFsdWUsIHNlYXJjaFZhbHVlKX0pO1xuICAgIH0sXG5cbiAgICBrZXlTZXE6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMudG9TZXEoKS5tYXAoa2V5TWFwcGVyKS50b0luZGV4ZWRTZXEoKTtcbiAgICB9LFxuXG4gICAgbGFzdDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy50b1NlcSgpLnJldmVyc2UoKS5maXJzdCgpO1xuICAgIH0sXG5cbiAgICBsYXN0S2V5T2Y6IGZ1bmN0aW9uKHNlYXJjaFZhbHVlKSB7XG4gICAgICByZXR1cm4gdGhpcy50b0tleWVkU2VxKCkucmV2ZXJzZSgpLmtleU9mKHNlYXJjaFZhbHVlKTtcbiAgICB9LFxuXG4gICAgbWF4OiBmdW5jdGlvbihjb21wYXJhdG9yKSB7XG4gICAgICByZXR1cm4gbWF4RmFjdG9yeSh0aGlzLCBjb21wYXJhdG9yKTtcbiAgICB9LFxuXG4gICAgbWF4Qnk6IGZ1bmN0aW9uKG1hcHBlciwgY29tcGFyYXRvcikge1xuICAgICAgcmV0dXJuIG1heEZhY3RvcnkodGhpcywgY29tcGFyYXRvciwgbWFwcGVyKTtcbiAgICB9LFxuXG4gICAgbWluOiBmdW5jdGlvbihjb21wYXJhdG9yKSB7XG4gICAgICByZXR1cm4gbWF4RmFjdG9yeSh0aGlzLCBjb21wYXJhdG9yID8gbmVnKGNvbXBhcmF0b3IpIDogZGVmYXVsdE5lZ0NvbXBhcmF0b3IpO1xuICAgIH0sXG5cbiAgICBtaW5CeTogZnVuY3Rpb24obWFwcGVyLCBjb21wYXJhdG9yKSB7XG4gICAgICByZXR1cm4gbWF4RmFjdG9yeSh0aGlzLCBjb21wYXJhdG9yID8gbmVnKGNvbXBhcmF0b3IpIDogZGVmYXVsdE5lZ0NvbXBhcmF0b3IsIG1hcHBlcik7XG4gICAgfSxcblxuICAgIHJlc3Q6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuc2xpY2UoMSk7XG4gICAgfSxcblxuICAgIHNraXA6IGZ1bmN0aW9uKGFtb3VudCkge1xuICAgICAgcmV0dXJuIHRoaXMuc2xpY2UoTWF0aC5tYXgoMCwgYW1vdW50KSk7XG4gICAgfSxcblxuICAgIHNraXBMYXN0OiBmdW5jdGlvbihhbW91bnQpIHtcbiAgICAgIHJldHVybiByZWlmeSh0aGlzLCB0aGlzLnRvU2VxKCkucmV2ZXJzZSgpLnNraXAoYW1vdW50KS5yZXZlcnNlKCkpO1xuICAgIH0sXG5cbiAgICBza2lwV2hpbGU6IGZ1bmN0aW9uKHByZWRpY2F0ZSwgY29udGV4dCkge1xuICAgICAgcmV0dXJuIHJlaWZ5KHRoaXMsIHNraXBXaGlsZUZhY3RvcnkodGhpcywgcHJlZGljYXRlLCBjb250ZXh0LCB0cnVlKSk7XG4gICAgfSxcblxuICAgIHNraXBVbnRpbDogZnVuY3Rpb24ocHJlZGljYXRlLCBjb250ZXh0KSB7XG4gICAgICByZXR1cm4gdGhpcy5za2lwV2hpbGUobm90KHByZWRpY2F0ZSksIGNvbnRleHQpO1xuICAgIH0sXG5cbiAgICBzb3J0Qnk6IGZ1bmN0aW9uKG1hcHBlciwgY29tcGFyYXRvcikge1xuICAgICAgcmV0dXJuIHJlaWZ5KHRoaXMsIHNvcnRGYWN0b3J5KHRoaXMsIGNvbXBhcmF0b3IsIG1hcHBlcikpO1xuICAgIH0sXG5cbiAgICB0YWtlOiBmdW5jdGlvbihhbW91bnQpIHtcbiAgICAgIHJldHVybiB0aGlzLnNsaWNlKDAsIE1hdGgubWF4KDAsIGFtb3VudCkpO1xuICAgIH0sXG5cbiAgICB0YWtlTGFzdDogZnVuY3Rpb24oYW1vdW50KSB7XG4gICAgICByZXR1cm4gcmVpZnkodGhpcywgdGhpcy50b1NlcSgpLnJldmVyc2UoKS50YWtlKGFtb3VudCkucmV2ZXJzZSgpKTtcbiAgICB9LFxuXG4gICAgdGFrZVdoaWxlOiBmdW5jdGlvbihwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICAgIHJldHVybiByZWlmeSh0aGlzLCB0YWtlV2hpbGVGYWN0b3J5KHRoaXMsIHByZWRpY2F0ZSwgY29udGV4dCkpO1xuICAgIH0sXG5cbiAgICB0YWtlVW50aWw6IGZ1bmN0aW9uKHByZWRpY2F0ZSwgY29udGV4dCkge1xuICAgICAgcmV0dXJuIHRoaXMudGFrZVdoaWxlKG5vdChwcmVkaWNhdGUpLCBjb250ZXh0KTtcbiAgICB9LFxuXG4gICAgdmFsdWVTZXE6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMudG9JbmRleGVkU2VxKCk7XG4gICAgfSxcblxuXG4gICAgLy8gIyMjIEhhc2hhYmxlIE9iamVjdFxuXG4gICAgaGFzaENvZGU6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX19oYXNoIHx8ICh0aGlzLl9faGFzaCA9IGhhc2hJdGVyYWJsZSh0aGlzKSk7XG4gICAgfVxuXG5cbiAgICAvLyAjIyMgSW50ZXJuYWxcblxuICAgIC8vIGFic3RyYWN0IF9faXRlcmF0ZShmbiwgcmV2ZXJzZSlcblxuICAgIC8vIGFic3RyYWN0IF9faXRlcmF0b3IodHlwZSwgcmV2ZXJzZSlcbiAgfSk7XG5cbiAgLy8gdmFyIElTX0lURVJBQkxFX1NFTlRJTkVMID0gJ0BAX19JTU1VVEFCTEVfSVRFUkFCTEVfX0BAJztcbiAgLy8gdmFyIElTX0tFWUVEX1NFTlRJTkVMID0gJ0BAX19JTU1VVEFCTEVfS0VZRURfX0BAJztcbiAgLy8gdmFyIElTX0lOREVYRURfU0VOVElORUwgPSAnQEBfX0lNTVVUQUJMRV9JTkRFWEVEX19AQCc7XG4gIC8vIHZhciBJU19PUkRFUkVEX1NFTlRJTkVMID0gJ0BAX19JTU1VVEFCTEVfT1JERVJFRF9fQEAnO1xuXG4gIHZhciBJdGVyYWJsZVByb3RvdHlwZSA9IEl0ZXJhYmxlLnByb3RvdHlwZTtcbiAgSXRlcmFibGVQcm90b3R5cGVbSVNfSVRFUkFCTEVfU0VOVElORUxdID0gdHJ1ZTtcbiAgSXRlcmFibGVQcm90b3R5cGVbSVRFUkFUT1JfU1lNQk9MXSA9IEl0ZXJhYmxlUHJvdG90eXBlLnZhbHVlcztcbiAgSXRlcmFibGVQcm90b3R5cGUuX190b0pTID0gSXRlcmFibGVQcm90b3R5cGUudG9BcnJheTtcbiAgSXRlcmFibGVQcm90b3R5cGUuX190b1N0cmluZ01hcHBlciA9IHF1b3RlU3RyaW5nO1xuICBJdGVyYWJsZVByb3RvdHlwZS5pbnNwZWN0ID1cbiAgSXRlcmFibGVQcm90b3R5cGUudG9Tb3VyY2UgPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMudG9TdHJpbmcoKTsgfTtcbiAgSXRlcmFibGVQcm90b3R5cGUuY2hhaW4gPSBJdGVyYWJsZVByb3RvdHlwZS5mbGF0TWFwO1xuICBJdGVyYWJsZVByb3RvdHlwZS5jb250YWlucyA9IEl0ZXJhYmxlUHJvdG90eXBlLmluY2x1ZGVzO1xuXG4gIG1peGluKEtleWVkSXRlcmFibGUsIHtcblxuICAgIC8vICMjIyBNb3JlIHNlcXVlbnRpYWwgbWV0aG9kc1xuXG4gICAgZmxpcDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gcmVpZnkodGhpcywgZmxpcEZhY3RvcnkodGhpcykpO1xuICAgIH0sXG5cbiAgICBtYXBFbnRyaWVzOiBmdW5jdGlvbihtYXBwZXIsIGNvbnRleHQpIHt2YXIgdGhpcyQwID0gdGhpcztcbiAgICAgIHZhciBpdGVyYXRpb25zID0gMDtcbiAgICAgIHJldHVybiByZWlmeSh0aGlzLFxuICAgICAgICB0aGlzLnRvU2VxKCkubWFwKFxuICAgICAgICAgIGZ1bmN0aW9uKHYsIGspICB7cmV0dXJuIG1hcHBlci5jYWxsKGNvbnRleHQsIFtrLCB2XSwgaXRlcmF0aW9ucysrLCB0aGlzJDApfVxuICAgICAgICApLmZyb21FbnRyeVNlcSgpXG4gICAgICApO1xuICAgIH0sXG5cbiAgICBtYXBLZXlzOiBmdW5jdGlvbihtYXBwZXIsIGNvbnRleHQpIHt2YXIgdGhpcyQwID0gdGhpcztcbiAgICAgIHJldHVybiByZWlmeSh0aGlzLFxuICAgICAgICB0aGlzLnRvU2VxKCkuZmxpcCgpLm1hcChcbiAgICAgICAgICBmdW5jdGlvbihrLCB2KSAge3JldHVybiBtYXBwZXIuY2FsbChjb250ZXh0LCBrLCB2LCB0aGlzJDApfVxuICAgICAgICApLmZsaXAoKVxuICAgICAgKTtcbiAgICB9XG5cbiAgfSk7XG5cbiAgdmFyIEtleWVkSXRlcmFibGVQcm90b3R5cGUgPSBLZXllZEl0ZXJhYmxlLnByb3RvdHlwZTtcbiAgS2V5ZWRJdGVyYWJsZVByb3RvdHlwZVtJU19LRVlFRF9TRU5USU5FTF0gPSB0cnVlO1xuICBLZXllZEl0ZXJhYmxlUHJvdG90eXBlW0lURVJBVE9SX1NZTUJPTF0gPSBJdGVyYWJsZVByb3RvdHlwZS5lbnRyaWVzO1xuICBLZXllZEl0ZXJhYmxlUHJvdG90eXBlLl9fdG9KUyA9IEl0ZXJhYmxlUHJvdG90eXBlLnRvT2JqZWN0O1xuICBLZXllZEl0ZXJhYmxlUHJvdG90eXBlLl9fdG9TdHJpbmdNYXBwZXIgPSBmdW5jdGlvbih2LCBrKSAge3JldHVybiBKU09OLnN0cmluZ2lmeShrKSArICc6ICcgKyBxdW90ZVN0cmluZyh2KX07XG5cblxuXG4gIG1peGluKEluZGV4ZWRJdGVyYWJsZSwge1xuXG4gICAgLy8gIyMjIENvbnZlcnNpb24gdG8gb3RoZXIgdHlwZXNcblxuICAgIHRvS2V5ZWRTZXE6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIG5ldyBUb0tleWVkU2VxdWVuY2UodGhpcywgZmFsc2UpO1xuICAgIH0sXG5cblxuICAgIC8vICMjIyBFUzYgQ29sbGVjdGlvbiBtZXRob2RzIChFUzYgQXJyYXkgYW5kIE1hcClcblxuICAgIGZpbHRlcjogZnVuY3Rpb24ocHJlZGljYXRlLCBjb250ZXh0KSB7XG4gICAgICByZXR1cm4gcmVpZnkodGhpcywgZmlsdGVyRmFjdG9yeSh0aGlzLCBwcmVkaWNhdGUsIGNvbnRleHQsIGZhbHNlKSk7XG4gICAgfSxcblxuICAgIGZpbmRJbmRleDogZnVuY3Rpb24ocHJlZGljYXRlLCBjb250ZXh0KSB7XG4gICAgICB2YXIgZW50cnkgPSB0aGlzLmZpbmRFbnRyeShwcmVkaWNhdGUsIGNvbnRleHQpO1xuICAgICAgcmV0dXJuIGVudHJ5ID8gZW50cnlbMF0gOiAtMTtcbiAgICB9LFxuXG4gICAgaW5kZXhPZjogZnVuY3Rpb24oc2VhcmNoVmFsdWUpIHtcbiAgICAgIHZhciBrZXkgPSB0aGlzLmtleU9mKHNlYXJjaFZhbHVlKTtcbiAgICAgIHJldHVybiBrZXkgPT09IHVuZGVmaW5lZCA/IC0xIDoga2V5O1xuICAgIH0sXG5cbiAgICBsYXN0SW5kZXhPZjogZnVuY3Rpb24oc2VhcmNoVmFsdWUpIHtcbiAgICAgIHZhciBrZXkgPSB0aGlzLmxhc3RLZXlPZihzZWFyY2hWYWx1ZSk7XG4gICAgICByZXR1cm4ga2V5ID09PSB1bmRlZmluZWQgPyAtMSA6IGtleTtcbiAgICB9LFxuXG4gICAgcmV2ZXJzZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gcmVpZnkodGhpcywgcmV2ZXJzZUZhY3RvcnkodGhpcywgZmFsc2UpKTtcbiAgICB9LFxuXG4gICAgc2xpY2U6IGZ1bmN0aW9uKGJlZ2luLCBlbmQpIHtcbiAgICAgIHJldHVybiByZWlmeSh0aGlzLCBzbGljZUZhY3RvcnkodGhpcywgYmVnaW4sIGVuZCwgZmFsc2UpKTtcbiAgICB9LFxuXG4gICAgc3BsaWNlOiBmdW5jdGlvbihpbmRleCwgcmVtb3ZlTnVtIC8qLCAuLi52YWx1ZXMqLykge1xuICAgICAgdmFyIG51bUFyZ3MgPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgICAgcmVtb3ZlTnVtID0gTWF0aC5tYXgocmVtb3ZlTnVtIHwgMCwgMCk7XG4gICAgICBpZiAobnVtQXJncyA9PT0gMCB8fCAobnVtQXJncyA9PT0gMiAmJiAhcmVtb3ZlTnVtKSkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICAgIC8vIElmIGluZGV4IGlzIG5lZ2F0aXZlLCBpdCBzaG91bGQgcmVzb2x2ZSByZWxhdGl2ZSB0byB0aGUgc2l6ZSBvZiB0aGVcbiAgICAgIC8vIGNvbGxlY3Rpb24uIEhvd2V2ZXIgc2l6ZSBtYXkgYmUgZXhwZW5zaXZlIHRvIGNvbXB1dGUgaWYgbm90IGNhY2hlZCwgc29cbiAgICAgIC8vIG9ubHkgY2FsbCBjb3VudCgpIGlmIHRoZSBudW1iZXIgaXMgaW4gZmFjdCBuZWdhdGl2ZS5cbiAgICAgIGluZGV4ID0gcmVzb2x2ZUJlZ2luKGluZGV4LCBpbmRleCA8IDAgPyB0aGlzLmNvdW50KCkgOiB0aGlzLnNpemUpO1xuICAgICAgdmFyIHNwbGljZWQgPSB0aGlzLnNsaWNlKDAsIGluZGV4KTtcbiAgICAgIHJldHVybiByZWlmeShcbiAgICAgICAgdGhpcyxcbiAgICAgICAgbnVtQXJncyA9PT0gMSA/XG4gICAgICAgICAgc3BsaWNlZCA6XG4gICAgICAgICAgc3BsaWNlZC5jb25jYXQoYXJyQ29weShhcmd1bWVudHMsIDIpLCB0aGlzLnNsaWNlKGluZGV4ICsgcmVtb3ZlTnVtKSlcbiAgICAgICk7XG4gICAgfSxcblxuXG4gICAgLy8gIyMjIE1vcmUgY29sbGVjdGlvbiBtZXRob2RzXG5cbiAgICBmaW5kTGFzdEluZGV4OiBmdW5jdGlvbihwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICAgIHZhciBlbnRyeSA9IHRoaXMuZmluZExhc3RFbnRyeShwcmVkaWNhdGUsIGNvbnRleHQpO1xuICAgICAgcmV0dXJuIGVudHJ5ID8gZW50cnlbMF0gOiAtMTtcbiAgICB9LFxuXG4gICAgZmlyc3Q6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0KDApO1xuICAgIH0sXG5cbiAgICBmbGF0dGVuOiBmdW5jdGlvbihkZXB0aCkge1xuICAgICAgcmV0dXJuIHJlaWZ5KHRoaXMsIGZsYXR0ZW5GYWN0b3J5KHRoaXMsIGRlcHRoLCBmYWxzZSkpO1xuICAgIH0sXG5cbiAgICBnZXQ6IGZ1bmN0aW9uKGluZGV4LCBub3RTZXRWYWx1ZSkge1xuICAgICAgaW5kZXggPSB3cmFwSW5kZXgodGhpcywgaW5kZXgpO1xuICAgICAgcmV0dXJuIChpbmRleCA8IDAgfHwgKHRoaXMuc2l6ZSA9PT0gSW5maW5pdHkgfHxcbiAgICAgICAgICAodGhpcy5zaXplICE9PSB1bmRlZmluZWQgJiYgaW5kZXggPiB0aGlzLnNpemUpKSkgP1xuICAgICAgICBub3RTZXRWYWx1ZSA6XG4gICAgICAgIHRoaXMuZmluZChmdW5jdGlvbihfLCBrZXkpICB7cmV0dXJuIGtleSA9PT0gaW5kZXh9LCB1bmRlZmluZWQsIG5vdFNldFZhbHVlKTtcbiAgICB9LFxuXG4gICAgaGFzOiBmdW5jdGlvbihpbmRleCkge1xuICAgICAgaW5kZXggPSB3cmFwSW5kZXgodGhpcywgaW5kZXgpO1xuICAgICAgcmV0dXJuIGluZGV4ID49IDAgJiYgKHRoaXMuc2l6ZSAhPT0gdW5kZWZpbmVkID9cbiAgICAgICAgdGhpcy5zaXplID09PSBJbmZpbml0eSB8fCBpbmRleCA8IHRoaXMuc2l6ZSA6XG4gICAgICAgIHRoaXMuaW5kZXhPZihpbmRleCkgIT09IC0xXG4gICAgICApO1xuICAgIH0sXG5cbiAgICBpbnRlcnBvc2U6IGZ1bmN0aW9uKHNlcGFyYXRvcikge1xuICAgICAgcmV0dXJuIHJlaWZ5KHRoaXMsIGludGVycG9zZUZhY3RvcnkodGhpcywgc2VwYXJhdG9yKSk7XG4gICAgfSxcblxuICAgIGludGVybGVhdmU6IGZ1bmN0aW9uKC8qLi4uaXRlcmFibGVzKi8pIHtcbiAgICAgIHZhciBpdGVyYWJsZXMgPSBbdGhpc10uY29uY2F0KGFyckNvcHkoYXJndW1lbnRzKSk7XG4gICAgICB2YXIgemlwcGVkID0gemlwV2l0aEZhY3RvcnkodGhpcy50b1NlcSgpLCBJbmRleGVkU2VxLm9mLCBpdGVyYWJsZXMpO1xuICAgICAgdmFyIGludGVybGVhdmVkID0gemlwcGVkLmZsYXR0ZW4odHJ1ZSk7XG4gICAgICBpZiAoemlwcGVkLnNpemUpIHtcbiAgICAgICAgaW50ZXJsZWF2ZWQuc2l6ZSA9IHppcHBlZC5zaXplICogaXRlcmFibGVzLmxlbmd0aDtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZWlmeSh0aGlzLCBpbnRlcmxlYXZlZCk7XG4gICAgfSxcblxuICAgIGtleVNlcTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gUmFuZ2UoMCwgdGhpcy5zaXplKTtcbiAgICB9LFxuXG4gICAgbGFzdDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXQoLTEpO1xuICAgIH0sXG5cbiAgICBza2lwV2hpbGU6IGZ1bmN0aW9uKHByZWRpY2F0ZSwgY29udGV4dCkge1xuICAgICAgcmV0dXJuIHJlaWZ5KHRoaXMsIHNraXBXaGlsZUZhY3RvcnkodGhpcywgcHJlZGljYXRlLCBjb250ZXh0LCBmYWxzZSkpO1xuICAgIH0sXG5cbiAgICB6aXA6IGZ1bmN0aW9uKC8qLCAuLi5pdGVyYWJsZXMgKi8pIHtcbiAgICAgIHZhciBpdGVyYWJsZXMgPSBbdGhpc10uY29uY2F0KGFyckNvcHkoYXJndW1lbnRzKSk7XG4gICAgICByZXR1cm4gcmVpZnkodGhpcywgemlwV2l0aEZhY3RvcnkodGhpcywgZGVmYXVsdFppcHBlciwgaXRlcmFibGVzKSk7XG4gICAgfSxcblxuICAgIHppcFdpdGg6IGZ1bmN0aW9uKHppcHBlci8qLCAuLi5pdGVyYWJsZXMgKi8pIHtcbiAgICAgIHZhciBpdGVyYWJsZXMgPSBhcnJDb3B5KGFyZ3VtZW50cyk7XG4gICAgICBpdGVyYWJsZXNbMF0gPSB0aGlzO1xuICAgICAgcmV0dXJuIHJlaWZ5KHRoaXMsIHppcFdpdGhGYWN0b3J5KHRoaXMsIHppcHBlciwgaXRlcmFibGVzKSk7XG4gICAgfVxuXG4gIH0pO1xuXG4gIEluZGV4ZWRJdGVyYWJsZS5wcm90b3R5cGVbSVNfSU5ERVhFRF9TRU5USU5FTF0gPSB0cnVlO1xuICBJbmRleGVkSXRlcmFibGUucHJvdG90eXBlW0lTX09SREVSRURfU0VOVElORUxdID0gdHJ1ZTtcblxuXG5cbiAgbWl4aW4oU2V0SXRlcmFibGUsIHtcblxuICAgIC8vICMjIyBFUzYgQ29sbGVjdGlvbiBtZXRob2RzIChFUzYgQXJyYXkgYW5kIE1hcClcblxuICAgIGdldDogZnVuY3Rpb24odmFsdWUsIG5vdFNldFZhbHVlKSB7XG4gICAgICByZXR1cm4gdGhpcy5oYXModmFsdWUpID8gdmFsdWUgOiBub3RTZXRWYWx1ZTtcbiAgICB9LFxuXG4gICAgaW5jbHVkZXM6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdGhpcy5oYXModmFsdWUpO1xuICAgIH0sXG5cblxuICAgIC8vICMjIyBNb3JlIHNlcXVlbnRpYWwgbWV0aG9kc1xuXG4gICAga2V5U2VxOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnZhbHVlU2VxKCk7XG4gICAgfVxuXG4gIH0pO1xuXG4gIFNldEl0ZXJhYmxlLnByb3RvdHlwZS5oYXMgPSBJdGVyYWJsZVByb3RvdHlwZS5pbmNsdWRlcztcbiAgU2V0SXRlcmFibGUucHJvdG90eXBlLmNvbnRhaW5zID0gU2V0SXRlcmFibGUucHJvdG90eXBlLmluY2x1ZGVzO1xuXG5cbiAgLy8gTWl4aW4gc3ViY2xhc3Nlc1xuXG4gIG1peGluKEtleWVkU2VxLCBLZXllZEl0ZXJhYmxlLnByb3RvdHlwZSk7XG4gIG1peGluKEluZGV4ZWRTZXEsIEluZGV4ZWRJdGVyYWJsZS5wcm90b3R5cGUpO1xuICBtaXhpbihTZXRTZXEsIFNldEl0ZXJhYmxlLnByb3RvdHlwZSk7XG5cbiAgbWl4aW4oS2V5ZWRDb2xsZWN0aW9uLCBLZXllZEl0ZXJhYmxlLnByb3RvdHlwZSk7XG4gIG1peGluKEluZGV4ZWRDb2xsZWN0aW9uLCBJbmRleGVkSXRlcmFibGUucHJvdG90eXBlKTtcbiAgbWl4aW4oU2V0Q29sbGVjdGlvbiwgU2V0SXRlcmFibGUucHJvdG90eXBlKTtcblxuXG4gIC8vICNwcmFnbWEgSGVscGVyIGZ1bmN0aW9uc1xuXG4gIGZ1bmN0aW9uIGtleU1hcHBlcih2LCBrKSB7XG4gICAgcmV0dXJuIGs7XG4gIH1cblxuICBmdW5jdGlvbiBlbnRyeU1hcHBlcih2LCBrKSB7XG4gICAgcmV0dXJuIFtrLCB2XTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG5vdChwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gIXByZWRpY2F0ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG5lZyhwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gLXByZWRpY2F0ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHF1b3RlU3RyaW5nKHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgPyBKU09OLnN0cmluZ2lmeSh2YWx1ZSkgOiBTdHJpbmcodmFsdWUpO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVmYXVsdFppcHBlcigpIHtcbiAgICByZXR1cm4gYXJyQ29weShhcmd1bWVudHMpO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVmYXVsdE5lZ0NvbXBhcmF0b3IoYSwgYikge1xuICAgIHJldHVybiBhIDwgYiA/IDEgOiBhID4gYiA/IC0xIDogMDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhhc2hJdGVyYWJsZShpdGVyYWJsZSkge1xuICAgIGlmIChpdGVyYWJsZS5zaXplID09PSBJbmZpbml0eSkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIHZhciBvcmRlcmVkID0gaXNPcmRlcmVkKGl0ZXJhYmxlKTtcbiAgICB2YXIga2V5ZWQgPSBpc0tleWVkKGl0ZXJhYmxlKTtcbiAgICB2YXIgaCA9IG9yZGVyZWQgPyAxIDogMDtcbiAgICB2YXIgc2l6ZSA9IGl0ZXJhYmxlLl9faXRlcmF0ZShcbiAgICAgIGtleWVkID9cbiAgICAgICAgb3JkZXJlZCA/XG4gICAgICAgICAgZnVuY3Rpb24odiwgaykgIHsgaCA9IDMxICogaCArIGhhc2hNZXJnZShoYXNoKHYpLCBoYXNoKGspKSB8IDA7IH0gOlxuICAgICAgICAgIGZ1bmN0aW9uKHYsIGspICB7IGggPSBoICsgaGFzaE1lcmdlKGhhc2godiksIGhhc2goaykpIHwgMDsgfSA6XG4gICAgICAgIG9yZGVyZWQgP1xuICAgICAgICAgIGZ1bmN0aW9uKHYgKSB7IGggPSAzMSAqIGggKyBoYXNoKHYpIHwgMDsgfSA6XG4gICAgICAgICAgZnVuY3Rpb24odiApIHsgaCA9IGggKyBoYXNoKHYpIHwgMDsgfVxuICAgICk7XG4gICAgcmV0dXJuIG11cm11ckhhc2hPZlNpemUoc2l6ZSwgaCk7XG4gIH1cblxuICBmdW5jdGlvbiBtdXJtdXJIYXNoT2ZTaXplKHNpemUsIGgpIHtcbiAgICBoID0gaW11bChoLCAweENDOUUyRDUxKTtcbiAgICBoID0gaW11bChoIDw8IDE1IHwgaCA+Pj4gLTE1LCAweDFCODczNTkzKTtcbiAgICBoID0gaW11bChoIDw8IDEzIHwgaCA+Pj4gLTEzLCA1KTtcbiAgICBoID0gKGggKyAweEU2NTQ2QjY0IHwgMCkgXiBzaXplO1xuICAgIGggPSBpbXVsKGggXiBoID4+PiAxNiwgMHg4NUVCQ0E2Qik7XG4gICAgaCA9IGltdWwoaCBeIGggPj4+IDEzLCAweEMyQjJBRTM1KTtcbiAgICBoID0gc21pKGggXiBoID4+PiAxNik7XG4gICAgcmV0dXJuIGg7XG4gIH1cblxuICBmdW5jdGlvbiBoYXNoTWVyZ2UoYSwgYikge1xuICAgIHJldHVybiBhIF4gYiArIDB4OUUzNzc5QjkgKyAoYSA8PCA2KSArIChhID4+IDIpIHwgMDsgLy8gaW50XG4gIH1cblxuICB2YXIgSW1tdXRhYmxlID0ge1xuXG4gICAgSXRlcmFibGU6IEl0ZXJhYmxlLFxuXG4gICAgU2VxOiBTZXEsXG4gICAgQ29sbGVjdGlvbjogQ29sbGVjdGlvbixcbiAgICBNYXA6IE1hcCxcbiAgICBPcmRlcmVkTWFwOiBPcmRlcmVkTWFwLFxuICAgIExpc3Q6IExpc3QsXG4gICAgU3RhY2s6IFN0YWNrLFxuICAgIFNldDogU2V0LFxuICAgIE9yZGVyZWRTZXQ6IE9yZGVyZWRTZXQsXG5cbiAgICBSZWNvcmQ6IFJlY29yZCxcbiAgICBSYW5nZTogUmFuZ2UsXG4gICAgUmVwZWF0OiBSZXBlYXQsXG5cbiAgICBpczogaXMsXG4gICAgZnJvbUpTOiBmcm9tSlNcblxuICB9O1xuXG4gIHJldHVybiBJbW11dGFibGU7XG5cbn0pKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vaW1tdXRhYmxlL2Rpc3QvaW1tdXRhYmxlLmpzXG4vLyBtb2R1bGUgaWQgPSAyMzBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBbanMtbWQ1XXtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZW1uMTc4L2pzLW1kNX1cbiAqXG4gKiBAbmFtZXNwYWNlIG1kNVxuICogQHZlcnNpb24gMC43LjNcbiAqIEBhdXRob3IgQ2hlbiwgWWktQ3l1YW4gW2VtbjE3OEBnbWFpbC5jb21dXG4gKiBAY29weXJpZ2h0IENoZW4sIFlpLUN5dWFuIDIwMTQtMjAxN1xuICogQGxpY2Vuc2UgTUlUXG4gKi9cbihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICB2YXIgRVJST1IgPSAnaW5wdXQgaXMgaW52YWxpZCB0eXBlJztcbiAgdmFyIFdJTkRPVyA9IHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnO1xuICB2YXIgcm9vdCA9IFdJTkRPVyA/IHdpbmRvdyA6IHt9O1xuICBpZiAocm9vdC5KU19NRDVfTk9fV0lORE9XKSB7XG4gICAgV0lORE9XID0gZmFsc2U7XG4gIH1cbiAgdmFyIFdFQl9XT1JLRVIgPSAhV0lORE9XICYmIHR5cGVvZiBzZWxmID09PSAnb2JqZWN0JztcbiAgdmFyIE5PREVfSlMgPSAhcm9vdC5KU19NRDVfTk9fTk9ERV9KUyAmJiB0eXBlb2YgcHJvY2VzcyA9PT0gJ29iamVjdCcgJiYgcHJvY2Vzcy52ZXJzaW9ucyAmJiBwcm9jZXNzLnZlcnNpb25zLm5vZGU7XG4gIGlmIChOT0RFX0pTKSB7XG4gICAgcm9vdCA9IGdsb2JhbDtcbiAgfSBlbHNlIGlmIChXRUJfV09SS0VSKSB7XG4gICAgcm9vdCA9IHNlbGY7XG4gIH1cbiAgdmFyIENPTU1PTl9KUyA9ICFyb290LkpTX01ENV9OT19DT01NT05fSlMgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHM7XG4gIHZhciBBTUQgPSB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQ7XG4gIHZhciBBUlJBWV9CVUZGRVIgPSAhcm9vdC5KU19NRDVfTk9fQVJSQVlfQlVGRkVSICYmIHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCc7XG4gIHZhciBIRVhfQ0hBUlMgPSAnMDEyMzQ1Njc4OWFiY2RlZicuc3BsaXQoJycpO1xuICB2YXIgRVhUUkEgPSBbMTI4LCAzMjc2OCwgODM4ODYwOCwgLTIxNDc0ODM2NDhdO1xuICB2YXIgU0hJRlQgPSBbMCwgOCwgMTYsIDI0XTtcbiAgdmFyIE9VVFBVVF9UWVBFUyA9IFsnaGV4JywgJ2FycmF5JywgJ2RpZ2VzdCcsICdidWZmZXInLCAnYXJyYXlCdWZmZXInLCAnYmFzZTY0J107XG4gIHZhciBCQVNFNjRfRU5DT0RFX0NIQVIgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLycuc3BsaXQoJycpO1xuXG4gIHZhciBibG9ja3MgPSBbXSwgYnVmZmVyODtcbiAgaWYgKEFSUkFZX0JVRkZFUikge1xuICAgIHZhciBidWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoNjgpO1xuICAgIGJ1ZmZlcjggPSBuZXcgVWludDhBcnJheShidWZmZXIpO1xuICAgIGJsb2NrcyA9IG5ldyBVaW50MzJBcnJheShidWZmZXIpO1xuICB9XG5cbiAgaWYgKHJvb3QuSlNfTUQ1X05PX05PREVfSlMgfHwgIUFycmF5LmlzQXJyYXkpIHtcbiAgICBBcnJheS5pc0FycmF5ID0gZnVuY3Rpb24gKG9iaikge1xuICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBBcnJheV0nO1xuICAgIH07XG4gIH1cblxuICBpZiAoQVJSQVlfQlVGRkVSICYmIChyb290LkpTX01ENV9OT19BUlJBWV9CVUZGRVJfSVNfVklFVyB8fCAhQXJyYXlCdWZmZXIuaXNWaWV3KSkge1xuICAgIEFycmF5QnVmZmVyLmlzVmlldyA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0JyAmJiBvYmouYnVmZmVyICYmIG9iai5idWZmZXIuY29uc3RydWN0b3IgPT09IEFycmF5QnVmZmVyO1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQG1ldGhvZCBoZXhcbiAgICogQG1lbWJlcm9mIG1kNVxuICAgKiBAZGVzY3JpcHRpb24gT3V0cHV0IGhhc2ggYXMgaGV4IHN0cmluZ1xuICAgKiBAcGFyYW0ge1N0cmluZ3xBcnJheXxVaW50OEFycmF5fEFycmF5QnVmZmVyfSBtZXNzYWdlIG1lc3NhZ2UgdG8gaGFzaFxuICAgKiBAcmV0dXJucyB7U3RyaW5nfSBIZXggc3RyaW5nXG4gICAqIEBleGFtcGxlXG4gICAqIG1kNS5oZXgoJ1RoZSBxdWljayBicm93biBmb3gganVtcHMgb3ZlciB0aGUgbGF6eSBkb2cnKTtcbiAgICogLy8gZXF1YWwgdG9cbiAgICogbWQ1KCdUaGUgcXVpY2sgYnJvd24gZm94IGp1bXBzIG92ZXIgdGhlIGxhenkgZG9nJyk7XG4gICAqL1xuICAvKipcbiAgICogQG1ldGhvZCBkaWdlc3RcbiAgICogQG1lbWJlcm9mIG1kNVxuICAgKiBAZGVzY3JpcHRpb24gT3V0cHV0IGhhc2ggYXMgYnl0ZXMgYXJyYXlcbiAgICogQHBhcmFtIHtTdHJpbmd8QXJyYXl8VWludDhBcnJheXxBcnJheUJ1ZmZlcn0gbWVzc2FnZSBtZXNzYWdlIHRvIGhhc2hcbiAgICogQHJldHVybnMge0FycmF5fSBCeXRlcyBhcnJheVxuICAgKiBAZXhhbXBsZVxuICAgKiBtZDUuZGlnZXN0KCdUaGUgcXVpY2sgYnJvd24gZm94IGp1bXBzIG92ZXIgdGhlIGxhenkgZG9nJyk7XG4gICAqL1xuICAvKipcbiAgICogQG1ldGhvZCBhcnJheVxuICAgKiBAbWVtYmVyb2YgbWQ1XG4gICAqIEBkZXNjcmlwdGlvbiBPdXRwdXQgaGFzaCBhcyBieXRlcyBhcnJheVxuICAgKiBAcGFyYW0ge1N0cmluZ3xBcnJheXxVaW50OEFycmF5fEFycmF5QnVmZmVyfSBtZXNzYWdlIG1lc3NhZ2UgdG8gaGFzaFxuICAgKiBAcmV0dXJucyB7QXJyYXl9IEJ5dGVzIGFycmF5XG4gICAqIEBleGFtcGxlXG4gICAqIG1kNS5hcnJheSgnVGhlIHF1aWNrIGJyb3duIGZveCBqdW1wcyBvdmVyIHRoZSBsYXp5IGRvZycpO1xuICAgKi9cbiAgLyoqXG4gICAqIEBtZXRob2QgYXJyYXlCdWZmZXJcbiAgICogQG1lbWJlcm9mIG1kNVxuICAgKiBAZGVzY3JpcHRpb24gT3V0cHV0IGhhc2ggYXMgQXJyYXlCdWZmZXJcbiAgICogQHBhcmFtIHtTdHJpbmd8QXJyYXl8VWludDhBcnJheXxBcnJheUJ1ZmZlcn0gbWVzc2FnZSBtZXNzYWdlIHRvIGhhc2hcbiAgICogQHJldHVybnMge0FycmF5QnVmZmVyfSBBcnJheUJ1ZmZlclxuICAgKiBAZXhhbXBsZVxuICAgKiBtZDUuYXJyYXlCdWZmZXIoJ1RoZSBxdWljayBicm93biBmb3gganVtcHMgb3ZlciB0aGUgbGF6eSBkb2cnKTtcbiAgICovXG4gIC8qKlxuICAgKiBAbWV0aG9kIGJ1ZmZlclxuICAgKiBAZGVwcmVjYXRlZCBUaGlzIG1heWJlIGNvbmZ1c2Ugd2l0aCBCdWZmZXIgaW4gbm9kZS5qcy4gUGxlYXNlIHVzZSBhcnJheUJ1ZmZlciBpbnN0ZWFkLlxuICAgKiBAbWVtYmVyb2YgbWQ1XG4gICAqIEBkZXNjcmlwdGlvbiBPdXRwdXQgaGFzaCBhcyBBcnJheUJ1ZmZlclxuICAgKiBAcGFyYW0ge1N0cmluZ3xBcnJheXxVaW50OEFycmF5fEFycmF5QnVmZmVyfSBtZXNzYWdlIG1lc3NhZ2UgdG8gaGFzaFxuICAgKiBAcmV0dXJucyB7QXJyYXlCdWZmZXJ9IEFycmF5QnVmZmVyXG4gICAqIEBleGFtcGxlXG4gICAqIG1kNS5idWZmZXIoJ1RoZSBxdWljayBicm93biBmb3gganVtcHMgb3ZlciB0aGUgbGF6eSBkb2cnKTtcbiAgICovXG4gIC8qKlxuICAgKiBAbWV0aG9kIGJhc2U2NFxuICAgKiBAbWVtYmVyb2YgbWQ1XG4gICAqIEBkZXNjcmlwdGlvbiBPdXRwdXQgaGFzaCBhcyBiYXNlNjQgc3RyaW5nXG4gICAqIEBwYXJhbSB7U3RyaW5nfEFycmF5fFVpbnQ4QXJyYXl8QXJyYXlCdWZmZXJ9IG1lc3NhZ2UgbWVzc2FnZSB0byBoYXNoXG4gICAqIEByZXR1cm5zIHtTdHJpbmd9IGJhc2U2NCBzdHJpbmdcbiAgICogQGV4YW1wbGVcbiAgICogbWQ1LmJhc2U2NCgnVGhlIHF1aWNrIGJyb3duIGZveCBqdW1wcyBvdmVyIHRoZSBsYXp5IGRvZycpO1xuICAgKi9cbiAgdmFyIGNyZWF0ZU91dHB1dE1ldGhvZCA9IGZ1bmN0aW9uIChvdXRwdXRUeXBlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICByZXR1cm4gbmV3IE1kNSh0cnVlKS51cGRhdGUobWVzc2FnZSlbb3V0cHV0VHlwZV0oKTtcbiAgICB9O1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbWV0aG9kIGNyZWF0ZVxuICAgKiBAbWVtYmVyb2YgbWQ1XG4gICAqIEBkZXNjcmlwdGlvbiBDcmVhdGUgTWQ1IG9iamVjdFxuICAgKiBAcmV0dXJucyB7TWQ1fSBNZDUgb2JqZWN0LlxuICAgKiBAZXhhbXBsZVxuICAgKiB2YXIgaGFzaCA9IG1kNS5jcmVhdGUoKTtcbiAgICovXG4gIC8qKlxuICAgKiBAbWV0aG9kIHVwZGF0ZVxuICAgKiBAbWVtYmVyb2YgbWQ1XG4gICAqIEBkZXNjcmlwdGlvbiBDcmVhdGUgYW5kIHVwZGF0ZSBNZDUgb2JqZWN0XG4gICAqIEBwYXJhbSB7U3RyaW5nfEFycmF5fFVpbnQ4QXJyYXl8QXJyYXlCdWZmZXJ9IG1lc3NhZ2UgbWVzc2FnZSB0byBoYXNoXG4gICAqIEByZXR1cm5zIHtNZDV9IE1kNSBvYmplY3QuXG4gICAqIEBleGFtcGxlXG4gICAqIHZhciBoYXNoID0gbWQ1LnVwZGF0ZSgnVGhlIHF1aWNrIGJyb3duIGZveCBqdW1wcyBvdmVyIHRoZSBsYXp5IGRvZycpO1xuICAgKiAvLyBlcXVhbCB0b1xuICAgKiB2YXIgaGFzaCA9IG1kNS5jcmVhdGUoKTtcbiAgICogaGFzaC51cGRhdGUoJ1RoZSBxdWljayBicm93biBmb3gganVtcHMgb3ZlciB0aGUgbGF6eSBkb2cnKTtcbiAgICovXG4gIHZhciBjcmVhdGVNZXRob2QgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG1ldGhvZCA9IGNyZWF0ZU91dHB1dE1ldGhvZCgnaGV4Jyk7XG4gICAgaWYgKE5PREVfSlMpIHtcbiAgICAgIG1ldGhvZCA9IG5vZGVXcmFwKG1ldGhvZCk7XG4gICAgfVxuICAgIG1ldGhvZC5jcmVhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gbmV3IE1kNSgpO1xuICAgIH07XG4gICAgbWV0aG9kLnVwZGF0ZSA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICByZXR1cm4gbWV0aG9kLmNyZWF0ZSgpLnVwZGF0ZShtZXNzYWdlKTtcbiAgICB9O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgT1VUUFVUX1RZUEVTLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgdHlwZSA9IE9VVFBVVF9UWVBFU1tpXTtcbiAgICAgIG1ldGhvZFt0eXBlXSA9IGNyZWF0ZU91dHB1dE1ldGhvZCh0eXBlKTtcbiAgICB9XG4gICAgcmV0dXJuIG1ldGhvZDtcbiAgfTtcblxuICB2YXIgbm9kZVdyYXAgPSBmdW5jdGlvbiAobWV0aG9kKSB7XG4gICAgdmFyIGNyeXB0byA9IGV2YWwoXCJyZXF1aXJlKCdjcnlwdG8nKVwiKTtcbiAgICB2YXIgQnVmZmVyID0gZXZhbChcInJlcXVpcmUoJ2J1ZmZlcicpLkJ1ZmZlclwiKTtcbiAgICB2YXIgbm9kZU1ldGhvZCA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiBjcnlwdG8uY3JlYXRlSGFzaCgnbWQ1JykudXBkYXRlKG1lc3NhZ2UsICd1dGY4JykuZGlnZXN0KCdoZXgnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChtZXNzYWdlID09PSBudWxsIHx8IG1lc3NhZ2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHRocm93IEVSUk9SO1xuICAgICAgICB9IGVsc2UgaWYgKG1lc3NhZ2UuY29uc3RydWN0b3IgPT09IEFycmF5QnVmZmVyKSB7XG4gICAgICAgICAgbWVzc2FnZSA9IG5ldyBVaW50OEFycmF5KG1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShtZXNzYWdlKSB8fCBBcnJheUJ1ZmZlci5pc1ZpZXcobWVzc2FnZSkgfHxcbiAgICAgICAgbWVzc2FnZS5jb25zdHJ1Y3RvciA9PT0gQnVmZmVyKSB7XG4gICAgICAgIHJldHVybiBjcnlwdG8uY3JlYXRlSGFzaCgnbWQ1JykudXBkYXRlKG5ldyBCdWZmZXIobWVzc2FnZSkpLmRpZ2VzdCgnaGV4Jyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbWV0aG9kKG1lc3NhZ2UpO1xuICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIG5vZGVNZXRob2Q7XG4gIH07XG5cbiAgLyoqXG4gICAqIE1kNSBjbGFzc1xuICAgKiBAY2xhc3MgTWQ1XG4gICAqIEBkZXNjcmlwdGlvbiBUaGlzIGlzIGludGVybmFsIGNsYXNzLlxuICAgKiBAc2VlIHtAbGluayBtZDUuY3JlYXRlfVxuICAgKi9cbiAgZnVuY3Rpb24gTWQ1KHNoYXJlZE1lbW9yeSkge1xuICAgIGlmIChzaGFyZWRNZW1vcnkpIHtcbiAgICAgIGJsb2Nrc1swXSA9IGJsb2Nrc1sxNl0gPSBibG9ja3NbMV0gPSBibG9ja3NbMl0gPSBibG9ja3NbM10gPVxuICAgICAgYmxvY2tzWzRdID0gYmxvY2tzWzVdID0gYmxvY2tzWzZdID0gYmxvY2tzWzddID1cbiAgICAgIGJsb2Nrc1s4XSA9IGJsb2Nrc1s5XSA9IGJsb2Nrc1sxMF0gPSBibG9ja3NbMTFdID1cbiAgICAgIGJsb2Nrc1sxMl0gPSBibG9ja3NbMTNdID0gYmxvY2tzWzE0XSA9IGJsb2Nrc1sxNV0gPSAwO1xuICAgICAgdGhpcy5ibG9ja3MgPSBibG9ja3M7XG4gICAgICB0aGlzLmJ1ZmZlcjggPSBidWZmZXI4O1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoQVJSQVlfQlVGRkVSKSB7XG4gICAgICAgIHZhciBidWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoNjgpO1xuICAgICAgICB0aGlzLmJ1ZmZlcjggPSBuZXcgVWludDhBcnJheShidWZmZXIpO1xuICAgICAgICB0aGlzLmJsb2NrcyA9IG5ldyBVaW50MzJBcnJheShidWZmZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5ibG9ja3MgPSBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF07XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuaDAgPSB0aGlzLmgxID0gdGhpcy5oMiA9IHRoaXMuaDMgPSB0aGlzLnN0YXJ0ID0gdGhpcy5ieXRlcyA9IHRoaXMuaEJ5dGVzID0gMDtcbiAgICB0aGlzLmZpbmFsaXplZCA9IHRoaXMuaGFzaGVkID0gZmFsc2U7XG4gICAgdGhpcy5maXJzdCA9IHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQG1ldGhvZCB1cGRhdGVcbiAgICogQG1lbWJlcm9mIE1kNVxuICAgKiBAaW5zdGFuY2VcbiAgICogQGRlc2NyaXB0aW9uIFVwZGF0ZSBoYXNoXG4gICAqIEBwYXJhbSB7U3RyaW5nfEFycmF5fFVpbnQ4QXJyYXl8QXJyYXlCdWZmZXJ9IG1lc3NhZ2UgbWVzc2FnZSB0byBoYXNoXG4gICAqIEByZXR1cm5zIHtNZDV9IE1kNSBvYmplY3QuXG4gICAqIEBzZWUge0BsaW5rIG1kNS51cGRhdGV9XG4gICAqL1xuICBNZDUucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIG5vdFN0cmluZywgdHlwZSA9IHR5cGVvZiBtZXNzYWdlO1xuICAgIGlmICh0eXBlICE9PSAnc3RyaW5nJykge1xuICAgICAgaWYgKHR5cGUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGlmIChtZXNzYWdlID09PSBudWxsKSB7XG4gICAgICAgICAgdGhyb3cgRVJST1I7XG4gICAgICAgIH0gZWxzZSBpZiAoQVJSQVlfQlVGRkVSICYmIG1lc3NhZ2UuY29uc3RydWN0b3IgPT09IEFycmF5QnVmZmVyKSB7XG4gICAgICAgICAgbWVzc2FnZSA9IG5ldyBVaW50OEFycmF5KG1lc3NhZ2UpO1xuICAgICAgICB9IGVsc2UgaWYgKCFBcnJheS5pc0FycmF5KG1lc3NhZ2UpKSB7XG4gICAgICAgICAgaWYgKCFBUlJBWV9CVUZGRVIgfHwgIUFycmF5QnVmZmVyLmlzVmlldyhtZXNzYWdlKSkge1xuICAgICAgICAgICAgdGhyb3cgRVJST1I7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBFUlJPUjtcbiAgICAgIH1cbiAgICAgIG5vdFN0cmluZyA9IHRydWU7XG4gICAgfVxuICAgIHZhciBjb2RlLCBpbmRleCA9IDAsIGksIGxlbmd0aCA9IG1lc3NhZ2UubGVuZ3RoLCBibG9ja3MgPSB0aGlzLmJsb2NrcztcbiAgICB2YXIgYnVmZmVyOCA9IHRoaXMuYnVmZmVyODtcblxuICAgIHdoaWxlIChpbmRleCA8IGxlbmd0aCkge1xuICAgICAgaWYgKHRoaXMuaGFzaGVkKSB7XG4gICAgICAgIHRoaXMuaGFzaGVkID0gZmFsc2U7XG4gICAgICAgIGJsb2Nrc1swXSA9IGJsb2Nrc1sxNl07XG4gICAgICAgIGJsb2Nrc1sxNl0gPSBibG9ja3NbMV0gPSBibG9ja3NbMl0gPSBibG9ja3NbM10gPVxuICAgICAgICBibG9ja3NbNF0gPSBibG9ja3NbNV0gPSBibG9ja3NbNl0gPSBibG9ja3NbN10gPVxuICAgICAgICBibG9ja3NbOF0gPSBibG9ja3NbOV0gPSBibG9ja3NbMTBdID0gYmxvY2tzWzExXSA9XG4gICAgICAgIGJsb2Nrc1sxMl0gPSBibG9ja3NbMTNdID0gYmxvY2tzWzE0XSA9IGJsb2Nrc1sxNV0gPSAwO1xuICAgICAgfVxuXG4gICAgICBpZiAobm90U3RyaW5nKSB7XG4gICAgICAgIGlmIChBUlJBWV9CVUZGRVIpIHtcbiAgICAgICAgICBmb3IgKGkgPSB0aGlzLnN0YXJ0OyBpbmRleCA8IGxlbmd0aCAmJiBpIDwgNjQ7ICsraW5kZXgpIHtcbiAgICAgICAgICAgIGJ1ZmZlcjhbaSsrXSA9IG1lc3NhZ2VbaW5kZXhdO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmb3IgKGkgPSB0aGlzLnN0YXJ0OyBpbmRleCA8IGxlbmd0aCAmJiBpIDwgNjQ7ICsraW5kZXgpIHtcbiAgICAgICAgICAgIGJsb2Nrc1tpID4+IDJdIHw9IG1lc3NhZ2VbaW5kZXhdIDw8IFNISUZUW2krKyAmIDNdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKEFSUkFZX0JVRkZFUikge1xuICAgICAgICAgIGZvciAoaSA9IHRoaXMuc3RhcnQ7IGluZGV4IDwgbGVuZ3RoICYmIGkgPCA2NDsgKytpbmRleCkge1xuICAgICAgICAgICAgY29kZSA9IG1lc3NhZ2UuY2hhckNvZGVBdChpbmRleCk7XG4gICAgICAgICAgICBpZiAoY29kZSA8IDB4ODApIHtcbiAgICAgICAgICAgICAgYnVmZmVyOFtpKytdID0gY29kZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY29kZSA8IDB4ODAwKSB7XG4gICAgICAgICAgICAgIGJ1ZmZlcjhbaSsrXSA9IDB4YzAgfCAoY29kZSA+PiA2KTtcbiAgICAgICAgICAgICAgYnVmZmVyOFtpKytdID0gMHg4MCB8IChjb2RlICYgMHgzZik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvZGUgPCAweGQ4MDAgfHwgY29kZSA+PSAweGUwMDApIHtcbiAgICAgICAgICAgICAgYnVmZmVyOFtpKytdID0gMHhlMCB8IChjb2RlID4+IDEyKTtcbiAgICAgICAgICAgICAgYnVmZmVyOFtpKytdID0gMHg4MCB8ICgoY29kZSA+PiA2KSAmIDB4M2YpO1xuICAgICAgICAgICAgICBidWZmZXI4W2krK10gPSAweDgwIHwgKGNvZGUgJiAweDNmKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvZGUgPSAweDEwMDAwICsgKCgoY29kZSAmIDB4M2ZmKSA8PCAxMCkgfCAobWVzc2FnZS5jaGFyQ29kZUF0KCsraW5kZXgpICYgMHgzZmYpKTtcbiAgICAgICAgICAgICAgYnVmZmVyOFtpKytdID0gMHhmMCB8IChjb2RlID4+IDE4KTtcbiAgICAgICAgICAgICAgYnVmZmVyOFtpKytdID0gMHg4MCB8ICgoY29kZSA+PiAxMikgJiAweDNmKTtcbiAgICAgICAgICAgICAgYnVmZmVyOFtpKytdID0gMHg4MCB8ICgoY29kZSA+PiA2KSAmIDB4M2YpO1xuICAgICAgICAgICAgICBidWZmZXI4W2krK10gPSAweDgwIHwgKGNvZGUgJiAweDNmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZm9yIChpID0gdGhpcy5zdGFydDsgaW5kZXggPCBsZW5ndGggJiYgaSA8IDY0OyArK2luZGV4KSB7XG4gICAgICAgICAgICBjb2RlID0gbWVzc2FnZS5jaGFyQ29kZUF0KGluZGV4KTtcbiAgICAgICAgICAgIGlmIChjb2RlIDwgMHg4MCkge1xuICAgICAgICAgICAgICBibG9ja3NbaSA+PiAyXSB8PSBjb2RlIDw8IFNISUZUW2krKyAmIDNdO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChjb2RlIDwgMHg4MDApIHtcbiAgICAgICAgICAgICAgYmxvY2tzW2kgPj4gMl0gfD0gKDB4YzAgfCAoY29kZSA+PiA2KSkgPDwgU0hJRlRbaSsrICYgM107XG4gICAgICAgICAgICAgIGJsb2Nrc1tpID4+IDJdIHw9ICgweDgwIHwgKGNvZGUgJiAweDNmKSkgPDwgU0hJRlRbaSsrICYgM107XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvZGUgPCAweGQ4MDAgfHwgY29kZSA+PSAweGUwMDApIHtcbiAgICAgICAgICAgICAgYmxvY2tzW2kgPj4gMl0gfD0gKDB4ZTAgfCAoY29kZSA+PiAxMikpIDw8IFNISUZUW2krKyAmIDNdO1xuICAgICAgICAgICAgICBibG9ja3NbaSA+PiAyXSB8PSAoMHg4MCB8ICgoY29kZSA+PiA2KSAmIDB4M2YpKSA8PCBTSElGVFtpKysgJiAzXTtcbiAgICAgICAgICAgICAgYmxvY2tzW2kgPj4gMl0gfD0gKDB4ODAgfCAoY29kZSAmIDB4M2YpKSA8PCBTSElGVFtpKysgJiAzXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvZGUgPSAweDEwMDAwICsgKCgoY29kZSAmIDB4M2ZmKSA8PCAxMCkgfCAobWVzc2FnZS5jaGFyQ29kZUF0KCsraW5kZXgpICYgMHgzZmYpKTtcbiAgICAgICAgICAgICAgYmxvY2tzW2kgPj4gMl0gfD0gKDB4ZjAgfCAoY29kZSA+PiAxOCkpIDw8IFNISUZUW2krKyAmIDNdO1xuICAgICAgICAgICAgICBibG9ja3NbaSA+PiAyXSB8PSAoMHg4MCB8ICgoY29kZSA+PiAxMikgJiAweDNmKSkgPDwgU0hJRlRbaSsrICYgM107XG4gICAgICAgICAgICAgIGJsb2Nrc1tpID4+IDJdIHw9ICgweDgwIHwgKChjb2RlID4+IDYpICYgMHgzZikpIDw8IFNISUZUW2krKyAmIDNdO1xuICAgICAgICAgICAgICBibG9ja3NbaSA+PiAyXSB8PSAoMHg4MCB8IChjb2RlICYgMHgzZikpIDw8IFNISUZUW2krKyAmIDNdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5sYXN0Qnl0ZUluZGV4ID0gaTtcbiAgICAgIHRoaXMuYnl0ZXMgKz0gaSAtIHRoaXMuc3RhcnQ7XG4gICAgICBpZiAoaSA+PSA2NCkge1xuICAgICAgICB0aGlzLnN0YXJ0ID0gaSAtIDY0O1xuICAgICAgICB0aGlzLmhhc2goKTtcbiAgICAgICAgdGhpcy5oYXNoZWQgPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zdGFydCA9IGk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmJ5dGVzID4gNDI5NDk2NzI5NSkge1xuICAgICAgdGhpcy5oQnl0ZXMgKz0gdGhpcy5ieXRlcyAvIDQyOTQ5NjcyOTYgPDwgMDtcbiAgICAgIHRoaXMuYnl0ZXMgPSB0aGlzLmJ5dGVzICUgNDI5NDk2NzI5NjtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgTWQ1LnByb3RvdHlwZS5maW5hbGl6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5maW5hbGl6ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5maW5hbGl6ZWQgPSB0cnVlO1xuICAgIHZhciBibG9ja3MgPSB0aGlzLmJsb2NrcywgaSA9IHRoaXMubGFzdEJ5dGVJbmRleDtcbiAgICBibG9ja3NbaSA+PiAyXSB8PSBFWFRSQVtpICYgM107XG4gICAgaWYgKGkgPj0gNTYpIHtcbiAgICAgIGlmICghdGhpcy5oYXNoZWQpIHtcbiAgICAgICAgdGhpcy5oYXNoKCk7XG4gICAgICB9XG4gICAgICBibG9ja3NbMF0gPSBibG9ja3NbMTZdO1xuICAgICAgYmxvY2tzWzE2XSA9IGJsb2Nrc1sxXSA9IGJsb2Nrc1syXSA9IGJsb2Nrc1szXSA9XG4gICAgICBibG9ja3NbNF0gPSBibG9ja3NbNV0gPSBibG9ja3NbNl0gPSBibG9ja3NbN10gPVxuICAgICAgYmxvY2tzWzhdID0gYmxvY2tzWzldID0gYmxvY2tzWzEwXSA9IGJsb2Nrc1sxMV0gPVxuICAgICAgYmxvY2tzWzEyXSA9IGJsb2Nrc1sxM10gPSBibG9ja3NbMTRdID0gYmxvY2tzWzE1XSA9IDA7XG4gICAgfVxuICAgIGJsb2Nrc1sxNF0gPSB0aGlzLmJ5dGVzIDw8IDM7XG4gICAgYmxvY2tzWzE1XSA9IHRoaXMuaEJ5dGVzIDw8IDMgfCB0aGlzLmJ5dGVzID4+PiAyOTtcbiAgICB0aGlzLmhhc2goKTtcbiAgfTtcblxuICBNZDUucHJvdG90eXBlLmhhc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGEsIGIsIGMsIGQsIGJjLCBkYSwgYmxvY2tzID0gdGhpcy5ibG9ja3M7XG5cbiAgICBpZiAodGhpcy5maXJzdCkge1xuICAgICAgYSA9IGJsb2Nrc1swXSAtIDY4MDg3NjkzNztcbiAgICAgIGEgPSAoYSA8PCA3IHwgYSA+Pj4gMjUpIC0gMjcxNzMzODc5IDw8IDA7XG4gICAgICBkID0gKC0xNzMyNTg0MTk0IF4gYSAmIDIwMDQzMTgwNzEpICsgYmxvY2tzWzFdIC0gMTE3ODMwNzA4O1xuICAgICAgZCA9IChkIDw8IDEyIHwgZCA+Pj4gMjApICsgYSA8PCAwO1xuICAgICAgYyA9ICgtMjcxNzMzODc5IF4gKGQgJiAoYSBeIC0yNzE3MzM4NzkpKSkgKyBibG9ja3NbMl0gLSAxMTI2NDc4Mzc1O1xuICAgICAgYyA9IChjIDw8IDE3IHwgYyA+Pj4gMTUpICsgZCA8PCAwO1xuICAgICAgYiA9IChhIF4gKGMgJiAoZCBeIGEpKSkgKyBibG9ja3NbM10gLSAxMzE2MjU5MjA5O1xuICAgICAgYiA9IChiIDw8IDIyIHwgYiA+Pj4gMTApICsgYyA8PCAwO1xuICAgIH0gZWxzZSB7XG4gICAgICBhID0gdGhpcy5oMDtcbiAgICAgIGIgPSB0aGlzLmgxO1xuICAgICAgYyA9IHRoaXMuaDI7XG4gICAgICBkID0gdGhpcy5oMztcbiAgICAgIGEgKz0gKGQgXiAoYiAmIChjIF4gZCkpKSArIGJsb2Nrc1swXSAtIDY4MDg3NjkzNjtcbiAgICAgIGEgPSAoYSA8PCA3IHwgYSA+Pj4gMjUpICsgYiA8PCAwO1xuICAgICAgZCArPSAoYyBeIChhICYgKGIgXiBjKSkpICsgYmxvY2tzWzFdIC0gMzg5NTY0NTg2O1xuICAgICAgZCA9IChkIDw8IDEyIHwgZCA+Pj4gMjApICsgYSA8PCAwO1xuICAgICAgYyArPSAoYiBeIChkICYgKGEgXiBiKSkpICsgYmxvY2tzWzJdICsgNjA2MTA1ODE5O1xuICAgICAgYyA9IChjIDw8IDE3IHwgYyA+Pj4gMTUpICsgZCA8PCAwO1xuICAgICAgYiArPSAoYSBeIChjICYgKGQgXiBhKSkpICsgYmxvY2tzWzNdIC0gMTA0NDUyNTMzMDtcbiAgICAgIGIgPSAoYiA8PCAyMiB8IGIgPj4+IDEwKSArIGMgPDwgMDtcbiAgICB9XG5cbiAgICBhICs9IChkIF4gKGIgJiAoYyBeIGQpKSkgKyBibG9ja3NbNF0gLSAxNzY0MTg4OTc7XG4gICAgYSA9IChhIDw8IDcgfCBhID4+PiAyNSkgKyBiIDw8IDA7XG4gICAgZCArPSAoYyBeIChhICYgKGIgXiBjKSkpICsgYmxvY2tzWzVdICsgMTIwMDA4MDQyNjtcbiAgICBkID0gKGQgPDwgMTIgfCBkID4+PiAyMCkgKyBhIDw8IDA7XG4gICAgYyArPSAoYiBeIChkICYgKGEgXiBiKSkpICsgYmxvY2tzWzZdIC0gMTQ3MzIzMTM0MTtcbiAgICBjID0gKGMgPDwgMTcgfCBjID4+PiAxNSkgKyBkIDw8IDA7XG4gICAgYiArPSAoYSBeIChjICYgKGQgXiBhKSkpICsgYmxvY2tzWzddIC0gNDU3MDU5ODM7XG4gICAgYiA9IChiIDw8IDIyIHwgYiA+Pj4gMTApICsgYyA8PCAwO1xuICAgIGEgKz0gKGQgXiAoYiAmIChjIF4gZCkpKSArIGJsb2Nrc1s4XSArIDE3NzAwMzU0MTY7XG4gICAgYSA9IChhIDw8IDcgfCBhID4+PiAyNSkgKyBiIDw8IDA7XG4gICAgZCArPSAoYyBeIChhICYgKGIgXiBjKSkpICsgYmxvY2tzWzldIC0gMTk1ODQxNDQxNztcbiAgICBkID0gKGQgPDwgMTIgfCBkID4+PiAyMCkgKyBhIDw8IDA7XG4gICAgYyArPSAoYiBeIChkICYgKGEgXiBiKSkpICsgYmxvY2tzWzEwXSAtIDQyMDYzO1xuICAgIGMgPSAoYyA8PCAxNyB8IGMgPj4+IDE1KSArIGQgPDwgMDtcbiAgICBiICs9IChhIF4gKGMgJiAoZCBeIGEpKSkgKyBibG9ja3NbMTFdIC0gMTk5MDQwNDE2MjtcbiAgICBiID0gKGIgPDwgMjIgfCBiID4+PiAxMCkgKyBjIDw8IDA7XG4gICAgYSArPSAoZCBeIChiICYgKGMgXiBkKSkpICsgYmxvY2tzWzEyXSArIDE4MDQ2MDM2ODI7XG4gICAgYSA9IChhIDw8IDcgfCBhID4+PiAyNSkgKyBiIDw8IDA7XG4gICAgZCArPSAoYyBeIChhICYgKGIgXiBjKSkpICsgYmxvY2tzWzEzXSAtIDQwMzQxMTAxO1xuICAgIGQgPSAoZCA8PCAxMiB8IGQgPj4+IDIwKSArIGEgPDwgMDtcbiAgICBjICs9IChiIF4gKGQgJiAoYSBeIGIpKSkgKyBibG9ja3NbMTRdIC0gMTUwMjAwMjI5MDtcbiAgICBjID0gKGMgPDwgMTcgfCBjID4+PiAxNSkgKyBkIDw8IDA7XG4gICAgYiArPSAoYSBeIChjICYgKGQgXiBhKSkpICsgYmxvY2tzWzE1XSArIDEyMzY1MzUzMjk7XG4gICAgYiA9IChiIDw8IDIyIHwgYiA+Pj4gMTApICsgYyA8PCAwO1xuICAgIGEgKz0gKGMgXiAoZCAmIChiIF4gYykpKSArIGJsb2Nrc1sxXSAtIDE2NTc5NjUxMDtcbiAgICBhID0gKGEgPDwgNSB8IGEgPj4+IDI3KSArIGIgPDwgMDtcbiAgICBkICs9IChiIF4gKGMgJiAoYSBeIGIpKSkgKyBibG9ja3NbNl0gLSAxMDY5NTAxNjMyO1xuICAgIGQgPSAoZCA8PCA5IHwgZCA+Pj4gMjMpICsgYSA8PCAwO1xuICAgIGMgKz0gKGEgXiAoYiAmIChkIF4gYSkpKSArIGJsb2Nrc1sxMV0gKyA2NDM3MTc3MTM7XG4gICAgYyA9IChjIDw8IDE0IHwgYyA+Pj4gMTgpICsgZCA8PCAwO1xuICAgIGIgKz0gKGQgXiAoYSAmIChjIF4gZCkpKSArIGJsb2Nrc1swXSAtIDM3Mzg5NzMwMjtcbiAgICBiID0gKGIgPDwgMjAgfCBiID4+PiAxMikgKyBjIDw8IDA7XG4gICAgYSArPSAoYyBeIChkICYgKGIgXiBjKSkpICsgYmxvY2tzWzVdIC0gNzAxNTU4NjkxO1xuICAgIGEgPSAoYSA8PCA1IHwgYSA+Pj4gMjcpICsgYiA8PCAwO1xuICAgIGQgKz0gKGIgXiAoYyAmIChhIF4gYikpKSArIGJsb2Nrc1sxMF0gKyAzODAxNjA4MztcbiAgICBkID0gKGQgPDwgOSB8IGQgPj4+IDIzKSArIGEgPDwgMDtcbiAgICBjICs9IChhIF4gKGIgJiAoZCBeIGEpKSkgKyBibG9ja3NbMTVdIC0gNjYwNDc4MzM1O1xuICAgIGMgPSAoYyA8PCAxNCB8IGMgPj4+IDE4KSArIGQgPDwgMDtcbiAgICBiICs9IChkIF4gKGEgJiAoYyBeIGQpKSkgKyBibG9ja3NbNF0gLSA0MDU1Mzc4NDg7XG4gICAgYiA9IChiIDw8IDIwIHwgYiA+Pj4gMTIpICsgYyA8PCAwO1xuICAgIGEgKz0gKGMgXiAoZCAmIChiIF4gYykpKSArIGJsb2Nrc1s5XSArIDU2ODQ0NjQzODtcbiAgICBhID0gKGEgPDwgNSB8IGEgPj4+IDI3KSArIGIgPDwgMDtcbiAgICBkICs9IChiIF4gKGMgJiAoYSBeIGIpKSkgKyBibG9ja3NbMTRdIC0gMTAxOTgwMzY5MDtcbiAgICBkID0gKGQgPDwgOSB8IGQgPj4+IDIzKSArIGEgPDwgMDtcbiAgICBjICs9IChhIF4gKGIgJiAoZCBeIGEpKSkgKyBibG9ja3NbM10gLSAxODczNjM5NjE7XG4gICAgYyA9IChjIDw8IDE0IHwgYyA+Pj4gMTgpICsgZCA8PCAwO1xuICAgIGIgKz0gKGQgXiAoYSAmIChjIF4gZCkpKSArIGJsb2Nrc1s4XSArIDExNjM1MzE1MDE7XG4gICAgYiA9IChiIDw8IDIwIHwgYiA+Pj4gMTIpICsgYyA8PCAwO1xuICAgIGEgKz0gKGMgXiAoZCAmIChiIF4gYykpKSArIGJsb2Nrc1sxM10gLSAxNDQ0NjgxNDY3O1xuICAgIGEgPSAoYSA8PCA1IHwgYSA+Pj4gMjcpICsgYiA8PCAwO1xuICAgIGQgKz0gKGIgXiAoYyAmIChhIF4gYikpKSArIGJsb2Nrc1syXSAtIDUxNDAzNzg0O1xuICAgIGQgPSAoZCA8PCA5IHwgZCA+Pj4gMjMpICsgYSA8PCAwO1xuICAgIGMgKz0gKGEgXiAoYiAmIChkIF4gYSkpKSArIGJsb2Nrc1s3XSArIDE3MzUzMjg0NzM7XG4gICAgYyA9IChjIDw8IDE0IHwgYyA+Pj4gMTgpICsgZCA8PCAwO1xuICAgIGIgKz0gKGQgXiAoYSAmIChjIF4gZCkpKSArIGJsb2Nrc1sxMl0gLSAxOTI2NjA3NzM0O1xuICAgIGIgPSAoYiA8PCAyMCB8IGIgPj4+IDEyKSArIGMgPDwgMDtcbiAgICBiYyA9IGIgXiBjO1xuICAgIGEgKz0gKGJjIF4gZCkgKyBibG9ja3NbNV0gLSAzNzg1NTg7XG4gICAgYSA9IChhIDw8IDQgfCBhID4+PiAyOCkgKyBiIDw8IDA7XG4gICAgZCArPSAoYmMgXiBhKSArIGJsb2Nrc1s4XSAtIDIwMjI1NzQ0NjM7XG4gICAgZCA9IChkIDw8IDExIHwgZCA+Pj4gMjEpICsgYSA8PCAwO1xuICAgIGRhID0gZCBeIGE7XG4gICAgYyArPSAoZGEgXiBiKSArIGJsb2Nrc1sxMV0gKyAxODM5MDMwNTYyO1xuICAgIGMgPSAoYyA8PCAxNiB8IGMgPj4+IDE2KSArIGQgPDwgMDtcbiAgICBiICs9IChkYSBeIGMpICsgYmxvY2tzWzE0XSAtIDM1MzA5NTU2O1xuICAgIGIgPSAoYiA8PCAyMyB8IGIgPj4+IDkpICsgYyA8PCAwO1xuICAgIGJjID0gYiBeIGM7XG4gICAgYSArPSAoYmMgXiBkKSArIGJsb2Nrc1sxXSAtIDE1MzA5OTIwNjA7XG4gICAgYSA9IChhIDw8IDQgfCBhID4+PiAyOCkgKyBiIDw8IDA7XG4gICAgZCArPSAoYmMgXiBhKSArIGJsb2Nrc1s0XSArIDEyNzI4OTMzNTM7XG4gICAgZCA9IChkIDw8IDExIHwgZCA+Pj4gMjEpICsgYSA8PCAwO1xuICAgIGRhID0gZCBeIGE7XG4gICAgYyArPSAoZGEgXiBiKSArIGJsb2Nrc1s3XSAtIDE1NTQ5NzYzMjtcbiAgICBjID0gKGMgPDwgMTYgfCBjID4+PiAxNikgKyBkIDw8IDA7XG4gICAgYiArPSAoZGEgXiBjKSArIGJsb2Nrc1sxMF0gLSAxMDk0NzMwNjQwO1xuICAgIGIgPSAoYiA8PCAyMyB8IGIgPj4+IDkpICsgYyA8PCAwO1xuICAgIGJjID0gYiBeIGM7XG4gICAgYSArPSAoYmMgXiBkKSArIGJsb2Nrc1sxM10gKyA2ODEyNzkxNzQ7XG4gICAgYSA9IChhIDw8IDQgfCBhID4+PiAyOCkgKyBiIDw8IDA7XG4gICAgZCArPSAoYmMgXiBhKSArIGJsb2Nrc1swXSAtIDM1ODUzNzIyMjtcbiAgICBkID0gKGQgPDwgMTEgfCBkID4+PiAyMSkgKyBhIDw8IDA7XG4gICAgZGEgPSBkIF4gYTtcbiAgICBjICs9IChkYSBeIGIpICsgYmxvY2tzWzNdIC0gNzIyNTIxOTc5O1xuICAgIGMgPSAoYyA8PCAxNiB8IGMgPj4+IDE2KSArIGQgPDwgMDtcbiAgICBiICs9IChkYSBeIGMpICsgYmxvY2tzWzZdICsgNzYwMjkxODk7XG4gICAgYiA9IChiIDw8IDIzIHwgYiA+Pj4gOSkgKyBjIDw8IDA7XG4gICAgYmMgPSBiIF4gYztcbiAgICBhICs9IChiYyBeIGQpICsgYmxvY2tzWzldIC0gNjQwMzY0NDg3O1xuICAgIGEgPSAoYSA8PCA0IHwgYSA+Pj4gMjgpICsgYiA8PCAwO1xuICAgIGQgKz0gKGJjIF4gYSkgKyBibG9ja3NbMTJdIC0gNDIxODE1ODM1O1xuICAgIGQgPSAoZCA8PCAxMSB8IGQgPj4+IDIxKSArIGEgPDwgMDtcbiAgICBkYSA9IGQgXiBhO1xuICAgIGMgKz0gKGRhIF4gYikgKyBibG9ja3NbMTVdICsgNTMwNzQyNTIwO1xuICAgIGMgPSAoYyA8PCAxNiB8IGMgPj4+IDE2KSArIGQgPDwgMDtcbiAgICBiICs9IChkYSBeIGMpICsgYmxvY2tzWzJdIC0gOTk1MzM4NjUxO1xuICAgIGIgPSAoYiA8PCAyMyB8IGIgPj4+IDkpICsgYyA8PCAwO1xuICAgIGEgKz0gKGMgXiAoYiB8IH5kKSkgKyBibG9ja3NbMF0gLSAxOTg2MzA4NDQ7XG4gICAgYSA9IChhIDw8IDYgfCBhID4+PiAyNikgKyBiIDw8IDA7XG4gICAgZCArPSAoYiBeIChhIHwgfmMpKSArIGJsb2Nrc1s3XSArIDExMjY4OTE0MTU7XG4gICAgZCA9IChkIDw8IDEwIHwgZCA+Pj4gMjIpICsgYSA8PCAwO1xuICAgIGMgKz0gKGEgXiAoZCB8IH5iKSkgKyBibG9ja3NbMTRdIC0gMTQxNjM1NDkwNTtcbiAgICBjID0gKGMgPDwgMTUgfCBjID4+PiAxNykgKyBkIDw8IDA7XG4gICAgYiArPSAoZCBeIChjIHwgfmEpKSArIGJsb2Nrc1s1XSAtIDU3NDM0MDU1O1xuICAgIGIgPSAoYiA8PCAyMSB8IGIgPj4+IDExKSArIGMgPDwgMDtcbiAgICBhICs9IChjIF4gKGIgfCB+ZCkpICsgYmxvY2tzWzEyXSArIDE3MDA0ODU1NzE7XG4gICAgYSA9IChhIDw8IDYgfCBhID4+PiAyNikgKyBiIDw8IDA7XG4gICAgZCArPSAoYiBeIChhIHwgfmMpKSArIGJsb2Nrc1szXSAtIDE4OTQ5ODY2MDY7XG4gICAgZCA9IChkIDw8IDEwIHwgZCA+Pj4gMjIpICsgYSA8PCAwO1xuICAgIGMgKz0gKGEgXiAoZCB8IH5iKSkgKyBibG9ja3NbMTBdIC0gMTA1MTUyMztcbiAgICBjID0gKGMgPDwgMTUgfCBjID4+PiAxNykgKyBkIDw8IDA7XG4gICAgYiArPSAoZCBeIChjIHwgfmEpKSArIGJsb2Nrc1sxXSAtIDIwNTQ5MjI3OTk7XG4gICAgYiA9IChiIDw8IDIxIHwgYiA+Pj4gMTEpICsgYyA8PCAwO1xuICAgIGEgKz0gKGMgXiAoYiB8IH5kKSkgKyBibG9ja3NbOF0gKyAxODczMzEzMzU5O1xuICAgIGEgPSAoYSA8PCA2IHwgYSA+Pj4gMjYpICsgYiA8PCAwO1xuICAgIGQgKz0gKGIgXiAoYSB8IH5jKSkgKyBibG9ja3NbMTVdIC0gMzA2MTE3NDQ7XG4gICAgZCA9IChkIDw8IDEwIHwgZCA+Pj4gMjIpICsgYSA8PCAwO1xuICAgIGMgKz0gKGEgXiAoZCB8IH5iKSkgKyBibG9ja3NbNl0gLSAxNTYwMTk4MzgwO1xuICAgIGMgPSAoYyA8PCAxNSB8IGMgPj4+IDE3KSArIGQgPDwgMDtcbiAgICBiICs9IChkIF4gKGMgfCB+YSkpICsgYmxvY2tzWzEzXSArIDEzMDkxNTE2NDk7XG4gICAgYiA9IChiIDw8IDIxIHwgYiA+Pj4gMTEpICsgYyA8PCAwO1xuICAgIGEgKz0gKGMgXiAoYiB8IH5kKSkgKyBibG9ja3NbNF0gLSAxNDU1MjMwNzA7XG4gICAgYSA9IChhIDw8IDYgfCBhID4+PiAyNikgKyBiIDw8IDA7XG4gICAgZCArPSAoYiBeIChhIHwgfmMpKSArIGJsb2Nrc1sxMV0gLSAxMTIwMjEwMzc5O1xuICAgIGQgPSAoZCA8PCAxMCB8IGQgPj4+IDIyKSArIGEgPDwgMDtcbiAgICBjICs9IChhIF4gKGQgfCB+YikpICsgYmxvY2tzWzJdICsgNzE4Nzg3MjU5O1xuICAgIGMgPSAoYyA8PCAxNSB8IGMgPj4+IDE3KSArIGQgPDwgMDtcbiAgICBiICs9IChkIF4gKGMgfCB+YSkpICsgYmxvY2tzWzldIC0gMzQzNDg1NTUxO1xuICAgIGIgPSAoYiA8PCAyMSB8IGIgPj4+IDExKSArIGMgPDwgMDtcblxuICAgIGlmICh0aGlzLmZpcnN0KSB7XG4gICAgICB0aGlzLmgwID0gYSArIDE3MzI1ODQxOTMgPDwgMDtcbiAgICAgIHRoaXMuaDEgPSBiIC0gMjcxNzMzODc5IDw8IDA7XG4gICAgICB0aGlzLmgyID0gYyAtIDE3MzI1ODQxOTQgPDwgMDtcbiAgICAgIHRoaXMuaDMgPSBkICsgMjcxNzMzODc4IDw8IDA7XG4gICAgICB0aGlzLmZpcnN0ID0gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaDAgPSB0aGlzLmgwICsgYSA8PCAwO1xuICAgICAgdGhpcy5oMSA9IHRoaXMuaDEgKyBiIDw8IDA7XG4gICAgICB0aGlzLmgyID0gdGhpcy5oMiArIGMgPDwgMDtcbiAgICAgIHRoaXMuaDMgPSB0aGlzLmgzICsgZCA8PCAwO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQG1ldGhvZCBoZXhcbiAgICogQG1lbWJlcm9mIE1kNVxuICAgKiBAaW5zdGFuY2VcbiAgICogQGRlc2NyaXB0aW9uIE91dHB1dCBoYXNoIGFzIGhleCBzdHJpbmdcbiAgICogQHJldHVybnMge1N0cmluZ30gSGV4IHN0cmluZ1xuICAgKiBAc2VlIHtAbGluayBtZDUuaGV4fVxuICAgKiBAZXhhbXBsZVxuICAgKiBoYXNoLmhleCgpO1xuICAgKi9cbiAgTWQ1LnByb3RvdHlwZS5oZXggPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5maW5hbGl6ZSgpO1xuXG4gICAgdmFyIGgwID0gdGhpcy5oMCwgaDEgPSB0aGlzLmgxLCBoMiA9IHRoaXMuaDIsIGgzID0gdGhpcy5oMztcblxuICAgIHJldHVybiBIRVhfQ0hBUlNbKGgwID4+IDQpICYgMHgwRl0gKyBIRVhfQ0hBUlNbaDAgJiAweDBGXSArXG4gICAgICBIRVhfQ0hBUlNbKGgwID4+IDEyKSAmIDB4MEZdICsgSEVYX0NIQVJTWyhoMCA+PiA4KSAmIDB4MEZdICtcbiAgICAgIEhFWF9DSEFSU1soaDAgPj4gMjApICYgMHgwRl0gKyBIRVhfQ0hBUlNbKGgwID4+IDE2KSAmIDB4MEZdICtcbiAgICAgIEhFWF9DSEFSU1soaDAgPj4gMjgpICYgMHgwRl0gKyBIRVhfQ0hBUlNbKGgwID4+IDI0KSAmIDB4MEZdICtcbiAgICAgIEhFWF9DSEFSU1soaDEgPj4gNCkgJiAweDBGXSArIEhFWF9DSEFSU1toMSAmIDB4MEZdICtcbiAgICAgIEhFWF9DSEFSU1soaDEgPj4gMTIpICYgMHgwRl0gKyBIRVhfQ0hBUlNbKGgxID4+IDgpICYgMHgwRl0gK1xuICAgICAgSEVYX0NIQVJTWyhoMSA+PiAyMCkgJiAweDBGXSArIEhFWF9DSEFSU1soaDEgPj4gMTYpICYgMHgwRl0gK1xuICAgICAgSEVYX0NIQVJTWyhoMSA+PiAyOCkgJiAweDBGXSArIEhFWF9DSEFSU1soaDEgPj4gMjQpICYgMHgwRl0gK1xuICAgICAgSEVYX0NIQVJTWyhoMiA+PiA0KSAmIDB4MEZdICsgSEVYX0NIQVJTW2gyICYgMHgwRl0gK1xuICAgICAgSEVYX0NIQVJTWyhoMiA+PiAxMikgJiAweDBGXSArIEhFWF9DSEFSU1soaDIgPj4gOCkgJiAweDBGXSArXG4gICAgICBIRVhfQ0hBUlNbKGgyID4+IDIwKSAmIDB4MEZdICsgSEVYX0NIQVJTWyhoMiA+PiAxNikgJiAweDBGXSArXG4gICAgICBIRVhfQ0hBUlNbKGgyID4+IDI4KSAmIDB4MEZdICsgSEVYX0NIQVJTWyhoMiA+PiAyNCkgJiAweDBGXSArXG4gICAgICBIRVhfQ0hBUlNbKGgzID4+IDQpICYgMHgwRl0gKyBIRVhfQ0hBUlNbaDMgJiAweDBGXSArXG4gICAgICBIRVhfQ0hBUlNbKGgzID4+IDEyKSAmIDB4MEZdICsgSEVYX0NIQVJTWyhoMyA+PiA4KSAmIDB4MEZdICtcbiAgICAgIEhFWF9DSEFSU1soaDMgPj4gMjApICYgMHgwRl0gKyBIRVhfQ0hBUlNbKGgzID4+IDE2KSAmIDB4MEZdICtcbiAgICAgIEhFWF9DSEFSU1soaDMgPj4gMjgpICYgMHgwRl0gKyBIRVhfQ0hBUlNbKGgzID4+IDI0KSAmIDB4MEZdO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbWV0aG9kIHRvU3RyaW5nXG4gICAqIEBtZW1iZXJvZiBNZDVcbiAgICogQGluc3RhbmNlXG4gICAqIEBkZXNjcmlwdGlvbiBPdXRwdXQgaGFzaCBhcyBoZXggc3RyaW5nXG4gICAqIEByZXR1cm5zIHtTdHJpbmd9IEhleCBzdHJpbmdcbiAgICogQHNlZSB7QGxpbmsgbWQ1LmhleH1cbiAgICogQGV4YW1wbGVcbiAgICogaGFzaC50b1N0cmluZygpO1xuICAgKi9cbiAgTWQ1LnByb3RvdHlwZS50b1N0cmluZyA9IE1kNS5wcm90b3R5cGUuaGV4O1xuXG4gIC8qKlxuICAgKiBAbWV0aG9kIGRpZ2VzdFxuICAgKiBAbWVtYmVyb2YgTWQ1XG4gICAqIEBpbnN0YW5jZVxuICAgKiBAZGVzY3JpcHRpb24gT3V0cHV0IGhhc2ggYXMgYnl0ZXMgYXJyYXlcbiAgICogQHJldHVybnMge0FycmF5fSBCeXRlcyBhcnJheVxuICAgKiBAc2VlIHtAbGluayBtZDUuZGlnZXN0fVxuICAgKiBAZXhhbXBsZVxuICAgKiBoYXNoLmRpZ2VzdCgpO1xuICAgKi9cbiAgTWQ1LnByb3RvdHlwZS5kaWdlc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5maW5hbGl6ZSgpO1xuXG4gICAgdmFyIGgwID0gdGhpcy5oMCwgaDEgPSB0aGlzLmgxLCBoMiA9IHRoaXMuaDIsIGgzID0gdGhpcy5oMztcbiAgICByZXR1cm4gW1xuICAgICAgaDAgJiAweEZGLCAoaDAgPj4gOCkgJiAweEZGLCAoaDAgPj4gMTYpICYgMHhGRiwgKGgwID4+IDI0KSAmIDB4RkYsXG4gICAgICBoMSAmIDB4RkYsIChoMSA+PiA4KSAmIDB4RkYsIChoMSA+PiAxNikgJiAweEZGLCAoaDEgPj4gMjQpICYgMHhGRixcbiAgICAgIGgyICYgMHhGRiwgKGgyID4+IDgpICYgMHhGRiwgKGgyID4+IDE2KSAmIDB4RkYsIChoMiA+PiAyNCkgJiAweEZGLFxuICAgICAgaDMgJiAweEZGLCAoaDMgPj4gOCkgJiAweEZGLCAoaDMgPj4gMTYpICYgMHhGRiwgKGgzID4+IDI0KSAmIDB4RkZcbiAgICBdO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbWV0aG9kIGFycmF5XG4gICAqIEBtZW1iZXJvZiBNZDVcbiAgICogQGluc3RhbmNlXG4gICAqIEBkZXNjcmlwdGlvbiBPdXRwdXQgaGFzaCBhcyBieXRlcyBhcnJheVxuICAgKiBAcmV0dXJucyB7QXJyYXl9IEJ5dGVzIGFycmF5XG4gICAqIEBzZWUge0BsaW5rIG1kNS5hcnJheX1cbiAgICogQGV4YW1wbGVcbiAgICogaGFzaC5hcnJheSgpO1xuICAgKi9cbiAgTWQ1LnByb3RvdHlwZS5hcnJheSA9IE1kNS5wcm90b3R5cGUuZGlnZXN0O1xuXG4gIC8qKlxuICAgKiBAbWV0aG9kIGFycmF5QnVmZmVyXG4gICAqIEBtZW1iZXJvZiBNZDVcbiAgICogQGluc3RhbmNlXG4gICAqIEBkZXNjcmlwdGlvbiBPdXRwdXQgaGFzaCBhcyBBcnJheUJ1ZmZlclxuICAgKiBAcmV0dXJucyB7QXJyYXlCdWZmZXJ9IEFycmF5QnVmZmVyXG4gICAqIEBzZWUge0BsaW5rIG1kNS5hcnJheUJ1ZmZlcn1cbiAgICogQGV4YW1wbGVcbiAgICogaGFzaC5hcnJheUJ1ZmZlcigpO1xuICAgKi9cbiAgTWQ1LnByb3RvdHlwZS5hcnJheUJ1ZmZlciA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZpbmFsaXplKCk7XG5cbiAgICB2YXIgYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKDE2KTtcbiAgICB2YXIgYmxvY2tzID0gbmV3IFVpbnQzMkFycmF5KGJ1ZmZlcik7XG4gICAgYmxvY2tzWzBdID0gdGhpcy5oMDtcbiAgICBibG9ja3NbMV0gPSB0aGlzLmgxO1xuICAgIGJsb2Nrc1syXSA9IHRoaXMuaDI7XG4gICAgYmxvY2tzWzNdID0gdGhpcy5oMztcbiAgICByZXR1cm4gYnVmZmVyO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbWV0aG9kIGJ1ZmZlclxuICAgKiBAZGVwcmVjYXRlZCBUaGlzIG1heWJlIGNvbmZ1c2Ugd2l0aCBCdWZmZXIgaW4gbm9kZS5qcy4gUGxlYXNlIHVzZSBhcnJheUJ1ZmZlciBpbnN0ZWFkLlxuICAgKiBAbWVtYmVyb2YgTWQ1XG4gICAqIEBpbnN0YW5jZVxuICAgKiBAZGVzY3JpcHRpb24gT3V0cHV0IGhhc2ggYXMgQXJyYXlCdWZmZXJcbiAgICogQHJldHVybnMge0FycmF5QnVmZmVyfSBBcnJheUJ1ZmZlclxuICAgKiBAc2VlIHtAbGluayBtZDUuYnVmZmVyfVxuICAgKiBAZXhhbXBsZVxuICAgKiBoYXNoLmJ1ZmZlcigpO1xuICAgKi9cbiAgTWQ1LnByb3RvdHlwZS5idWZmZXIgPSBNZDUucHJvdG90eXBlLmFycmF5QnVmZmVyO1xuXG4gIC8qKlxuICAgKiBAbWV0aG9kIGJhc2U2NFxuICAgKiBAbWVtYmVyb2YgTWQ1XG4gICAqIEBpbnN0YW5jZVxuICAgKiBAZGVzY3JpcHRpb24gT3V0cHV0IGhhc2ggYXMgYmFzZTY0IHN0cmluZ1xuICAgKiBAcmV0dXJucyB7U3RyaW5nfSBiYXNlNjQgc3RyaW5nXG4gICAqIEBzZWUge0BsaW5rIG1kNS5iYXNlNjR9XG4gICAqIEBleGFtcGxlXG4gICAqIGhhc2guYmFzZTY0KCk7XG4gICAqL1xuICBNZDUucHJvdG90eXBlLmJhc2U2NCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdjEsIHYyLCB2MywgYmFzZTY0U3RyID0gJycsIGJ5dGVzID0gdGhpcy5hcnJheSgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTU7KSB7XG4gICAgICB2MSA9IGJ5dGVzW2krK107XG4gICAgICB2MiA9IGJ5dGVzW2krK107XG4gICAgICB2MyA9IGJ5dGVzW2krK107XG4gICAgICBiYXNlNjRTdHIgKz0gQkFTRTY0X0VOQ09ERV9DSEFSW3YxID4+PiAyXSArXG4gICAgICAgIEJBU0U2NF9FTkNPREVfQ0hBUlsodjEgPDwgNCB8IHYyID4+PiA0KSAmIDYzXSArXG4gICAgICAgIEJBU0U2NF9FTkNPREVfQ0hBUlsodjIgPDwgMiB8IHYzID4+PiA2KSAmIDYzXSArXG4gICAgICAgIEJBU0U2NF9FTkNPREVfQ0hBUlt2MyAmIDYzXTtcbiAgICB9XG4gICAgdjEgPSBieXRlc1tpXTtcbiAgICBiYXNlNjRTdHIgKz0gQkFTRTY0X0VOQ09ERV9DSEFSW3YxID4+PiAyXSArXG4gICAgICBCQVNFNjRfRU5DT0RFX0NIQVJbKHYxIDw8IDQpICYgNjNdICtcbiAgICAgICc9PSc7XG4gICAgcmV0dXJuIGJhc2U2NFN0cjtcbiAgfTtcblxuICB2YXIgZXhwb3J0cyA9IGNyZWF0ZU1ldGhvZCgpO1xuXG4gIGlmIChDT01NT05fSlMpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHM7XG4gIH0gZWxzZSB7XG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBtZDVcYlxuICAgICAqIEBkZXNjcmlwdGlvbiBNZDUgaGFzaCBmdW5jdGlvbiwgZXhwb3J0IHRvIGdsb2JhbCBpbiBicm93c2Vycy5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ3xBcnJheXxVaW50OEFycmF5fEFycmF5QnVmZmVyfSBtZXNzYWdlIG1lc3NhZ2UgdG8gaGFzaFxuICAgICAqIEByZXR1cm5zIHtTdHJpbmd9IG1kNSBoYXNoZXNcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIG1kNSgnJyk7IC8vIGQ0MWQ4Y2Q5OGYwMGIyMDRlOTgwMDk5OGVjZjg0MjdlXG4gICAgICogbWQ1KCdUaGUgcXVpY2sgYnJvd24gZm94IGp1bXBzIG92ZXIgdGhlIGxhenkgZG9nJyk7IC8vIDllMTA3ZDlkMzcyYmI2ODI2YmQ4MWQzNTQyYTQxOWQ2XG4gICAgICogbWQ1KCdUaGUgcXVpY2sgYnJvd24gZm94IGp1bXBzIG92ZXIgdGhlIGxhenkgZG9nLicpOyAvLyBlNGQ5MDljMjkwZDBmYjFjYTA2OGZmYWRkZjIyY2JkMFxuICAgICAqXG4gICAgICogLy8gSXQgYWxzbyBzdXBwb3J0cyBVVEYtOCBlbmNvZGluZ1xuICAgICAqIG1kNSgn5Lit5paHJyk7IC8vIGE3YmFjMjIzOWZjZGNiM2EwNjc5MDNkODA3N2M0YTA3XG4gICAgICpcbiAgICAgKiAvLyBJdCBhbHNvIHN1cHBvcnRzIGJ5dGUgYEFycmF5YCwgYFVpbnQ4QXJyYXlgLCBgQXJyYXlCdWZmZXJgXG4gICAgICogbWQ1KFtdKTsgLy8gZDQxZDhjZDk4ZjAwYjIwNGU5ODAwOTk4ZWNmODQyN2VcbiAgICAgKiBtZDUobmV3IFVpbnQ4QXJyYXkoW10pKTsgLy8gZDQxZDhjZDk4ZjAwYjIwNGU5ODAwOTk4ZWNmODQyN2VcbiAgICAgKi9cbiAgICByb290Lm1kNSA9IGV4cG9ydHM7XG4gICAgaWYgKEFNRCkge1xuICAgICAgZGVmaW5lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGV4cG9ydHM7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn0pKCk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vanMtbWQ1L3NyYy9tZDUuanNcbi8vIG1vZHVsZSBpZCA9IDIzMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19hbWRfb3B0aW9uc19fO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvYnVpbGRpbi9hbWQtb3B0aW9ucy5qc1xuLy8gbW9kdWxlIGlkID0gMjMyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=